{"items":[{"tags":["java","spring-boot","spring-data-jpa","projection"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702306058,"creation_date":1702306058,"answer_id":77640388,"question_id":77352281,"body_markdown":"You can create an interface with the common methods (`getFoo()`, `getBar()`) and make both `EntityDTO` and `MyEntity` extend/implement it. Then you can use it as a type wherever entity itself (not interested in `id`) or its projection is provided.","link":"https://stackoverflow.com/questions/77352281/can-a-spring-jpa-entity-implement-a-projection-interface/77640388#77640388","title":"Can a Spring JPA Entity implement a Projection interface?","body":"<p>You can create an interface with the common methods (<code>getFoo()</code>, <code>getBar()</code>) and make both <code>EntityDTO</code> and <code>MyEntity</code> extend/implement it. Then you can use it as a type wherever entity itself (not interested in <code>id</code>) or its projection is provided.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":84,"answer_count":1,"score":1,"last_activity_date":1702306058,"creation_date":1698152460,"question_id":77352281,"body_markdown":"[Interface-based Projections](https://docs.spring.io/spring-data/jpa/reference/repositories/projections.html#projections.interfaces) are a handy feature in Spring JPA, allowing a Repository to return different interfaces. For a simple example, this entity...\r\n\r\n    @Entity\r\n    @Table(name = &quot;entity&quot;)\r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    public class MyEntity {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private int id;\r\n    \r\n        private String foo;\r\n        private String bar;\r\n    }\r\n\r\n...can omit a field and result from a native query.\r\n\r\n    public interface EntityDTO {\r\n        String getFoo();\r\n        String getBar();\r\n    }\r\n\r\n    @Repository\r\n    public interface EntityRepository extends CrudRepository&lt;MyEntity, Integer&gt; {\r\n        @Query(nativeQuery = true, value = &quot;select * from entity where id = :id&quot;)\r\n        EntityDTO findDtoById(int id);\r\n    }\r\n\r\nThe above works... unless I want the entity itself to implement the projection interface.\r\n\r\n    public class MyEntity implements EntityDTO\r\n\r\nThis relationship seems natural, since the entity does in fact implement the interface, and service methods shouldn&#39;t care whether they&#39;re reading from an entity or some other projection; but implementing the projection results in an exception from the query.\r\n\r\n    org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.Object[]] to type [EntityDTO]\r\n\r\nIs there a way to make JPA proxy the `EntityDTO` as an unrelated interface, even when it is implemented by `MyEntity`?","link":"https://stackoverflow.com/questions/77352281/can-a-spring-jpa-entity-implement-a-projection-interface","title":"Can a Spring JPA Entity implement a Projection interface?","body":"<p><a href=\"https://docs.spring.io/spring-data/jpa/reference/repositories/projections.html#projections.interfaces\" rel=\"nofollow noreferrer\">Interface-based Projections</a> are a handy feature in Spring JPA, allowing a Repository to return different interfaces. For a simple example, this entity...</p>\n<pre><code>@Entity\n@Table(name = &quot;entity&quot;)\n@Getter\n@Setter\n@ToString\npublic class MyEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n\n    private String foo;\n    private String bar;\n}\n</code></pre>\n<p>...can omit a field and result from a native query.</p>\n<pre><code>public interface EntityDTO {\n    String getFoo();\n    String getBar();\n}\n\n@Repository\npublic interface EntityRepository extends CrudRepository&lt;MyEntity, Integer&gt; {\n    @Query(nativeQuery = true, value = &quot;select * from entity where id = :id&quot;)\n    EntityDTO findDtoById(int id);\n}\n</code></pre>\n<p>The above works... unless I want the entity itself to implement the projection interface.</p>\n<pre><code>public class MyEntity implements EntityDTO\n</code></pre>\n<p>This relationship seems natural, since the entity does in fact implement the interface, and service methods shouldn't care whether they're reading from an entity or some other projection; but implementing the projection results in an exception from the query.</p>\n<pre><code>org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.lang.Object[]] to type [EntityDTO]\n</code></pre>\n<p>Is there a way to make JPA proxy the <code>EntityDTO</code> as an unrelated interface, even when it is implemented by <code>MyEntity</code>?</p>\n"},{"tags":["java","spring-boot","validation","web-services","upgrade"],"answers":[{"comment_count":0,"score":3,"last_activity_date":1700859753,"last_edit_date":1700859753,"creation_date":1700858028,"answer_id":77545552,"question_id":77545551,"body_markdown":"It is caused by an apparent change of logic in the dependency on `spring-boot-starter-validation`. In my Spring Boot 3.1.5 applications, I either had not this dependency at all, or had it with the `text` scope. Now in spring Boot 3.2.0 it is apparently mandatory. The `pom.xml` file must contain\r\n\r\n``` lang-xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nWithout this, any controller method with parameters annotated with some `jakarta.validation` annotations, such as `jakarta.validation.constraints.NotNull`, throws the described exception. The exception is thrown by Spring and the method is not even called at all.","link":"https://stackoverflow.com/questions/77545551/error-illegalstateexception-no-target-validator-set-after-upgrade-from-spring/77545552#77545552","title":"Error &quot;IllegalStateException: No target Validator set&quot; after upgrade from Spring Boot 3.1.5 to 3.2.0","body":"<p>It is caused by an apparent change of logic in the dependency on <code>spring-boot-starter-validation</code>. In my Spring Boot 3.1.5 applications, I either had not this dependency at all, or had it with the <code>text</code> scope. Now in spring Boot 3.2.0 it is apparently mandatory. The <code>pom.xml</code> file must contain</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Without this, any controller method with parameters annotated with some <code>jakarta.validation</code> annotations, such as <code>jakarta.validation.constraints.NotNull</code>, throws the described exception. The exception is thrown by Spring and the method is not even called at all.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":288,"answer_count":1,"score":0,"last_activity_date":1702305996,"creation_date":1700858028,"last_edit_date":1702305996,"question_id":77545551,"body_markdown":"After upgrading a reactive application from Spring Boot 3.1.5 to Spring Boot 3.2.0, I get the following error:\r\n\r\n``` lang-plaintext\r\njava.lang.IllegalStateException: No target Validator set\r\n\tat org.springframework.util.Assert.state(Assert.java:76)\r\n\tat org.springframework.validation.beanvalidation.SpringValidatorAdapter.forExecutables(SpringValidatorAdapter.java:396)\r\n\tat org.springframework.validation.beanvalidation.MethodValidationAdapter.invokeValidatorForArguments(MethodValidationAdapter.java:257)\r\n\tat org.springframework.validation.beanvalidation.MethodValidationAdapter.validateArguments(MethodValidationAdapter.java:240)\r\n\tat org.springframework.web.method.annotation.HandlerMethodValidator.validateArguments(HandlerMethodValidator.java:115)\r\n\tat org.springframework.web.method.annotation.HandlerMethodValidator.applyArgumentValidation(HandlerMethodValidator.java:83)\r\n\tat org.springframework.web.reactive.result.method.InvocableHandlerMethod.lambda$invoke$0(InvocableHandlerMethod.java:164)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132)\r\n\tat reactor.core.publisher.MonoZip$ZipCoordinator.signal(MonoZip.java:297)\r\n\tat reactor.core.publisher.MonoZip$ZipInner.onNext(MonoZip.java:478)\r\n\tat reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\r\n\tat reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122)\r\n\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\r\n\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)\r\n\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2367)\r\n\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2241)\r\n\tat reactor.core.publisher.FluxFlatMap.trySubscribeScalarMap(FluxFlatMap.java:193)\r\n\tat reactor.core.publisher.MonoFlatMap.subscribeOrReturn(MonoFlatMap.java:53)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:63)\r\n\tat reactor.core.publisher.MonoZip$ZipCoordinator.request(MonoZip.java:220)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)\r\n\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onSubscribe(MonoIgnoreThen.java:135)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)\r\n\tat reactor.core.publisher.MonoZip.subscribe(MonoZip.java:129)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\r\n\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)\r\n\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:241)\r\n\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:204)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189)\r\n\tat reactor.core.publisher.Operators.complete(Operators.java:137)\r\n\tat reactor.core.publisher.MonoZip.subscribe(MonoZip.java:121)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\r\n\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:264)\r\n\tat reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)\r\n\tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\r\n\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\r\n\tat reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82)\r\n\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258)\r\n\tat reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863)\r\n\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n\tat reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\r\n\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)\r\n\tat reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139)\r\n\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\r\n\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2331)\r\n\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338)\r\n\tat reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108)\r\n\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2367)\r\n\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2241)\r\n\tat reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70)\r\n\tat reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164)\r\n\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201)\r\n\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\r\n\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\r\n\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\r\n\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\r\n\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:264)\r\n\tat reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\r\n\tat reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55)\r\n\tat reactor.netty.http.server.HttpServer$HttpServerHandle.onStateChange(HttpServer.java:1169)\r\n\tat reactor.netty.ReactorNetty$CompositeConnectionObserver.onStateChange(ReactorNetty.java:710)\r\n\tat reactor.netty.transport.ServerTransport$ChildObserver.onStateChange(ServerTransport.java:481)\r\n\tat reactor.netty.http.server.HttpServerOperations.onInboundNext(HttpServerOperations.java:652)\r\n\tat reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:114)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat reactor.netty.http.server.HttpTrafficHandler.channelRead(HttpTrafficHandler.java:238)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)\r\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)\r\n\tat io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n\tat io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:800)\r\n\tat io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:425)\r\n\tat io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)\r\n\tat io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)\r\n\tat io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:413)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.base/java.lang.Thread.run(Unknown Source)\r\n```\r\n\r\nThere is no other change in the code, the exception did not occurred before in Spring Boot 3.1.5.","link":"https://stackoverflow.com/questions/77545551/error-illegalstateexception-no-target-validator-set-after-upgrade-from-spring","title":"Error &quot;IllegalStateException: No target Validator set&quot; after upgrade from Spring Boot 3.1.5 to 3.2.0","body":"<p>After upgrading a reactive application from Spring Boot 3.1.5 to Spring Boot 3.2.0, I get the following error:</p>\n<pre class=\"lang-plaintext prettyprint-override\"><code>java.lang.IllegalStateException: No target Validator set\n    at org.springframework.util.Assert.state(Assert.java:76)\n    at org.springframework.validation.beanvalidation.SpringValidatorAdapter.forExecutables(SpringValidatorAdapter.java:396)\n    at org.springframework.validation.beanvalidation.MethodValidationAdapter.invokeValidatorForArguments(MethodValidationAdapter.java:257)\n    at org.springframework.validation.beanvalidation.MethodValidationAdapter.validateArguments(MethodValidationAdapter.java:240)\n    at org.springframework.web.method.annotation.HandlerMethodValidator.validateArguments(HandlerMethodValidator.java:115)\n    at org.springframework.web.method.annotation.HandlerMethodValidator.applyArgumentValidation(HandlerMethodValidator.java:83)\n    at org.springframework.web.reactive.result.method.InvocableHandlerMethod.lambda$invoke$0(InvocableHandlerMethod.java:164)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132)\n    at reactor.core.publisher.MonoZip$ZipCoordinator.signal(MonoZip.java:297)\n    at reactor.core.publisher.MonoZip$ZipInner.onNext(MonoZip.java:478)\n    at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\n    at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122)\n    at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\n    at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)\n    at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2367)\n    at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2241)\n    at reactor.core.publisher.FluxFlatMap.trySubscribeScalarMap(FluxFlatMap.java:193)\n    at reactor.core.publisher.MonoFlatMap.subscribeOrReturn(MonoFlatMap.java:53)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:63)\n    at reactor.core.publisher.MonoZip$ZipCoordinator.request(MonoZip.java:220)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onSubscribe(MonoIgnoreThen.java:135)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)\n    at reactor.core.publisher.MonoZip.subscribe(MonoZip.java:129)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\n    at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:241)\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onComplete(MonoIgnoreThen.java:204)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189)\n    at reactor.core.publisher.Operators.complete(Operators.java:137)\n    at reactor.core.publisher.MonoZip.subscribe(MonoZip.java:121)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:264)\n    at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\n    at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\n    at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82)\n    at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.innerNext(FluxConcatMapNoPrefetch.java:258)\n    at reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\n    at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2571)\n    at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.request(MonoPeekTerminal.java:139)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.request(Operators.java:2331)\n    at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.request(FluxConcatMapNoPrefetch.java:338)\n    at reactor.core.publisher.MonoNext$NextSubscriber.request(MonoNext.java:108)\n    at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2367)\n    at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2241)\n    at reactor.core.publisher.MonoNext$NextSubscriber.onSubscribe(MonoNext.java:70)\n    at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onSubscribe(FluxConcatMapNoPrefetch.java:164)\n    at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:201)\n    at reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:83)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\n    at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\n    at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\n    at reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:53)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:264)\n    at reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\n    at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55)\n    at reactor.netty.http.server.HttpServer$HttpServerHandle.onStateChange(HttpServer.java:1169)\n    at reactor.netty.ReactorNetty$CompositeConnectionObserver.onStateChange(ReactorNetty.java:710)\n    at reactor.netty.transport.ServerTransport$ChildObserver.onStateChange(ServerTransport.java:481)\n    at reactor.netty.http.server.HttpServerOperations.onInboundNext(HttpServerOperations.java:652)\n    at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:114)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at reactor.netty.http.server.HttpTrafficHandler.channelRead(HttpTrafficHandler.java:238)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)\n    at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\n    at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:800)\n    at io.netty.channel.epoll.AbstractEpollChannel$AbstractEpollUnsafe$1.run(AbstractEpollChannel.java:425)\n    at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)\n    at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)\n    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)\n    at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:413)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Unknown Source)\n</code></pre>\n<p>There is no other change in the code, the exception did not occurred before in Spring Boot 3.1.5.</p>\n"},{"tags":["java","spring-boot","open-telemetry","micrometer-tracing","observability"],"comments":[{"score":0,"post_type":"question","creation_date":1701018981,"post_id":77552544,"comment_id":136720302,"body_markdown":"Could you add also `RestClient ` that throw this exception ?","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0#comment136720302_77552544","body":"Could you add also <code>RestClient </code> that throw this exception ?"},{"score":0,"post_type":"question","creation_date":1701033968,"post_id":77552544,"comment_id":136721902,"body_markdown":"@AndreiLisa This exception is logged when the application is started, but not when we are calling the API. If you need more information, I can push these changes to GitHub","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0#comment136721902_77552544","body":"@AndreiLisa This exception is logged when the application is started, but not when we are calling the API. If you need more information, I can push these changes to GitHub"},{"score":0,"post_type":"question","creation_date":1701051757,"post_id":77552544,"comment_id":136723243,"body_markdown":"Do you have Zipkin running and did you configure the Zipkin connection in your properties file? Because it looks like the Zipkin exporter cannot export your traces.","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0#comment136723243_77552544","body":"Do you have Zipkin running and did you configure the Zipkin connection in your properties file? Because it looks like the Zipkin exporter cannot export your traces."},{"score":0,"post_type":"question","creation_date":1701054676,"post_id":77552544,"comment_id":136723408,"body_markdown":"@RaduSebastianLAZIN Same configuration is working with `3.1.3` with `RestTemplate`. But, when I changed it to `3.2.0` and started using `RestClient`, observed mentioned exception","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0#comment136723408_77552544","body":"@RaduSebastianLAZIN Same configuration is working with <code>3.1.3</code> with <code>RestTemplate</code>. But, when I changed it to <code>3.2.0</code> and started using <code>RestClient</code>, observed mentioned exception"},{"score":0,"post_type":"question","creation_date":1701199674,"post_id":77552544,"comment_id":136745091,"body_markdown":"Could you please check what happens if you use Brave instead of OTel? `io.micrometer:micrometer-tracing-bridge-brave` and `io.zipkin.reporter2:zipkin-reporter-brave`","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0#comment136745091_77552544","body":"Could you please check what happens if you use Brave instead of OTel? <code>io.micrometer:micrometer-tracing-bridge-brave</code> and <code>io.zipkin.reporter2:zipkin-reporter-brave</code>"},{"score":0,"post_type":"question","creation_date":1701201024,"post_id":77552544,"comment_id":136745336,"body_markdown":"@JonatanIvanov Thanks for the suggestion. Yes, it looks good when using Brave dependencies. So, is it an issue with OTel dependencies? I have actually raised a GitHub issue in the Spring Boot repository: https://github.com/spring-projects/spring-boot/issues/38579","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0#comment136745336_77552544","body":"@JonatanIvanov Thanks for the suggestion. Yes, it looks good when using Brave dependencies. So, is it an issue with OTel dependencies? I have actually raised a GitHub issue in the Spring Boot repository: <a href=\"https://github.com/spring-projects/spring-boot/issues/38579\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/38579</a>"},{"score":1,"post_type":"question","creation_date":1701207334,"post_id":77552544,"comment_id":136746302,"body_markdown":"I saw your issue, I wanted to reply here to not duplicate things. You can stay on Brave, it should be transparent for you if the Zipkin format works. I think you can also move to the OTLP or Jaeger formats if you want. Could you please also open an issue for the OTel Java SDK? Please post the link here if you do so that we can follow.","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0#comment136746302_77552544","body":"I saw your issue, I wanted to reply here to not duplicate things. You can stay on Brave, it should be transparent for you if the Zipkin format works. I think you can also move to the OTLP or Jaeger formats if you want. Could you please also open an issue for the OTel Java SDK? Please post the link here if you do so that we can follow."},{"score":0,"post_type":"question","creation_date":1701225714,"post_id":77552544,"comment_id":136748319,"body_markdown":"Sure, @JonatanIvanov, I have updated the Stack Overflow question based on our findings and created a GitHub issue here: https://github.com/open-telemetry/opentelemetry-java/issues/6025.","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0#comment136748319_77552544","body":"Sure, @JonatanIvanov, I have updated the Stack Overflow question based on our findings and created a GitHub issue here: <a href=\"https://github.com/open-telemetry/opentelemetry-java/issues/6025\" rel=\"nofollow noreferrer\">github.com/open-telemetry/opentelemetry-java/issues/6025</a>."},{"score":0,"post_type":"question","creation_date":1701231987,"post_id":77552544,"comment_id":136748872,"body_markdown":"One more thing you can help us to troubleshot this. Could you please check the OTel versions with Boot 3.1.3 and 3.2.0? Then could you please use Boot 3.2.0 (and Micrometer Tracing 1.2.0) but with the OTel versions that 3.1.3 uses. :)","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0#comment136748872_77552544","body":"One more thing you can help us to troubleshot this. Could you please check the OTel versions with Boot 3.1.3 and 3.2.0? Then could you please use Boot 3.2.0 (and Micrometer Tracing 1.2.0) but with the OTel versions that 3.1.3 uses. :)"},{"score":0,"post_type":"question","creation_date":1701283628,"post_id":77552544,"comment_id":136757776,"body_markdown":"@JonatanIvanov I attempted different permutations of tracing versions with Spring Boot `3.2.0`.\n\n1. `Spring Boot 3.2.0 with Micrometer Tracing 1.2.0 and OTel Exporter Zipkin 1.25.0`, \n\n2. `Spring Boot 3.2.0 with Micrometer Tracing 1.1.4 and OTel Exporter Zipkin 1.31.0`. \n\nIn both cases, the exception persists. It remains unclear which specific combination of tracing versions with Spring Boot `3.2.0` triggers the issue. Please check **Edit-3** for more information and sample code.","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0#comment136757776_77552544","body":"@JonatanIvanov I attempted different permutations of tracing versions with Spring Boot <code>3.2.0</code>.  1. <code>Spring Boot 3.2.0 with Micrometer Tracing 1.2.0 and OTel Exporter Zipkin 1.25.0</code>,   2. <code>Spring Boot 3.2.0 with Micrometer Tracing 1.1.4 and OTel Exporter Zipkin 1.31.0</code>.   In both cases, the exception persists. It remains unclear which specific combination of tracing versions with Spring Boot <code>3.2.0</code> triggers the issue. Please check <b>Edit-3</b> for more information and sample code."},{"score":0,"post_type":"question","creation_date":1701288550,"post_id":77552544,"comment_id":136758573,"body_markdown":"Did the Spring Boot 3.2, Micrometer Tracing 1.2 and Otel Exporter Zipkin 1.25.0 combo work?","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0#comment136758573_77552544","body":"Did the Spring Boot 3.2, Micrometer Tracing 1.2 and Otel Exporter Zipkin 1.25.0 combo work?"},{"score":0,"post_type":"question","creation_date":1701291865,"post_id":77552544,"comment_id":136759099,"body_markdown":"@JonatanIvanov No, it&#39;s also throwing the exception","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0#comment136759099_77552544","body":"@JonatanIvanov No, it&#39;s also throwing the exception"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1702497275,"post_id":77640126,"comment_id":136905117,"body_markdown":"I can still see the issue. Here you can see the code base which is upgraded to `1.2.1` - https://github.com/kcsurapaneni/food-delivery-backend/tree/v3.2.0","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0/77640126#comment136905117_77640126","body":"I can still see the issue. Here you can see the code base which is upgraded to <code>1.2.1</code> - <a href=\"https://github.com/kcsurapaneni/food-delivery-backend/tree/v3.2.0\" rel=\"nofollow noreferrer\">github.com/kcsurapaneni/food-delivery-backend/tree/v3.2.0</a>"},{"score":0,"post_type":"answer","creation_date":1702590116,"post_id":77640126,"comment_id":136917797,"body_markdown":"Can you make that reproducer minimal? I.e.: only one app if possible without the dependencies, e.g.: can you repro it without kafka just using an in-memory H2 DB?","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0/77640126#comment136917797_77640126","body":"Can you make that reproducer minimal? I.e.: only one app if possible without the dependencies, e.g.: can you repro it without kafka just using an in-memory H2 DB?"}],"comment_count":2,"score":1,"last_activity_date":1702303255,"creation_date":1702303255,"answer_id":77640126,"question_id":77552544,"body_markdown":"Thanks to the collaboration on this, a bug was [identified](https://github.com/micrometer-metrics/tracing/issues/488) in Micrometer Tracing, [fixed](https://github.com/micrometer-metrics/tracing/pull/487) then released ([1.2.1](https://github.com/micrometer-metrics/tracing/releases/tag/v1.2.1)). Please upgrade your Micrometer Tracing version to use at least [1.2.1](https://github.com/micrometer-metrics/tracing/releases/tag/v1.2.1) (you can also wait till the next Boot release (`3.2.1`) since it should pick up the fixed version).","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0/77640126#77640126","title":"Exception in observability stack after upgrading Spring Boot from 3.1.3 to 3.2.0 using opentelemetry-java","body":"<p>Thanks to the collaboration on this, a bug was <a href=\"https://github.com/micrometer-metrics/tracing/issues/488\" rel=\"nofollow noreferrer\">identified</a> in Micrometer Tracing, <a href=\"https://github.com/micrometer-metrics/tracing/pull/487\" rel=\"nofollow noreferrer\">fixed</a> then released (<a href=\"https://github.com/micrometer-metrics/tracing/releases/tag/v1.2.1\" rel=\"nofollow noreferrer\">1.2.1</a>). Please upgrade your Micrometer Tracing version to use at least <a href=\"https://github.com/micrometer-metrics/tracing/releases/tag/v1.2.1\" rel=\"nofollow noreferrer\">1.2.1</a> (you can also wait till the next Boot release (<code>3.2.1</code>) since it should pick up the fixed version).</p>\n"}],"comment_count":12,"is_answered":true,"view_count":264,"answer_count":1,"score":3,"last_activity_date":1702303255,"creation_date":1701016414,"last_edit_date":1701283551,"question_id":77552544,"body_markdown":"**Problem:**\r\n\r\nWhen upgrading the `observability` stack from Spring Boot version `3.1.3` to `3.2.0` using [OTel Java SDK][1], the following exception is encountered:\r\n\r\n```java\r\n2023-11-26T16:00:43.087Z  WARN [order service,,] 1 --- [order service] [BatchSpanProcessor_WorkerThread-1] [] i.o.exporter.zipkin.ZipkinSpanExporter   : Failed to export spans\r\n\r\norg.springframework.web.client.HttpClientErrorException$BadRequest: 400 Bad Request: &quot;valid annotation timestamp required&lt;EOL&gt;&quot;\r\n\tat org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:103)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\r\n\tat org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\r\n\tat org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\r\n\tat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\r\n\tat org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:663)\r\n\tat org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinRestTemplateSender$RestTemplateHttpPostCall.doExecute(ZipkinRestTemplateSender.java:68)\r\n\tat org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinRestTemplateSender$RestTemplateHttpPostCall.doEnqueue(ZipkinRestTemplateSender.java:75)\r\n\tat zipkin2.Call$Base.enqueue(Call.java:406)\r\n\tat io.opentelemetry.exporter.zipkin.ZipkinSpanExporter.export(ZipkinSpanExporter.java:82)\r\n\tat io.micrometer.tracing.otel.bridge.CompositeSpanExporter.lambda$export$3(CompositeSpanExporter.java:88)\r\n\tat java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n\tat io.micrometer.tracing.otel.bridge.CompositeSpanExporter.export(CompositeSpanExporter.java:88)\r\n\tat io.opentelemetry.sdk.trace.export.BatchSpanProcessor$Worker.exportCurrentBatch(BatchSpanProcessor.java:327)\r\n\tat io.opentelemetry.sdk.trace.export.BatchSpanProcessor$Worker.run(BatchSpanProcessor.java:245)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\r\n```\r\n\r\n**Configuration:**\r\n\r\nSpring Boot Version: 3.2.0\r\n\r\n```xml\r\n&lt;parent&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;3.2.0&lt;/version&gt;\r\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n&lt;/parent&gt;\r\n```\r\n\r\nTracing Dependencies:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n    &lt;artifactId&gt;micrometer-tracing-bridge-otel&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n    &lt;artifactId&gt;opentelemetry-exporter-zipkin&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\n\r\n**Observations:**\r\n\r\nEncountering a `HttpClientErrorException$BadRequest` exception when using the `observability` stack in Spring Boot version 3.2.0. The issue does not occur with version 3.1.3.\r\n\r\nAny insights or assistance on resolving this issue would be greatly appreciated.\r\n\r\n**Edit-1:**\r\n\r\n**Reproduction Steps**\r\n\r\n - Clone the repository: [food-delivery-backend][2]\r\n - Checkout the branch/tag: `v3.2.0`\r\n - Check [README.md][3] on how to run\r\n - Now check the `order` API logs in [Grafana][4]\r\n\r\n**Additional Information**\r\n\r\n - Working Sample (Spring Boot 3.2.0):\r\n - [v3.2.0/restaurant][5] - No issues observed.\r\n - Failing Sample (Spring Boot 3.2.0):\r\n - [v3.2.0/order][6] - Exception occurs.\r\n\r\n\r\n**Edit-2:**\r\n\r\n - The error is not present when using Spring Boot version `3.1.3` for both `brave` and `opentelemetry-java` dependencies - [Example][7]\r\n - The issue seems to be related to the interaction between Spring Boot 3.2.0 with `opentelemetry-java`\r\n\r\n**Edit-3:**\r\n\r\n**Spring Boot 3.2.0** uses following tracing versions\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n    &lt;artifactId&gt;micrometer-tracing-bridge-otel&lt;/artifactId&gt;\r\n    &lt;version&gt;1.2.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n    &lt;artifactId&gt;opentelemetry-exporter-zipkin&lt;/artifactId&gt;\r\n    &lt;version&gt;1.31.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\n\r\n**Spring Boot 3.1.3** uses following tracing versions\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n    &lt;artifactId&gt;micrometer-tracing-bridge-otel&lt;/artifactId&gt;\r\n    &lt;version&gt;1.1.4&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n    &lt;artifactId&gt;opentelemetry-exporter-zipkin&lt;/artifactId&gt;\r\n    &lt;version&gt;1.25.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\n\r\nI attempted different permutations of tracing versions with Spring Boot 3.2.0 to identify the specific dependency responsible for the exception. However, the issue persists with the following combinations:\r\n\r\n 1. **Spring Boot 3.2.0 with Micrometer Tracing 1.2.0 and OTel Exporter\r\n    Zipkin 1.25.0**\r\n\r\n  Code: [GitHub Link][8]\r\n  ```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n    &lt;artifactId&gt;micrometer-tracing-bridge-otel&lt;/artifactId&gt;\r\n    &lt;version&gt;1.2.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n    &lt;artifactId&gt;opentelemetry-exporter-zipkin&lt;/artifactId&gt;\r\n    &lt;version&gt;1.25.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n  ```\r\n 2. **Spring Boot 3.2.0 with Micrometer Tracing 1.1.4 and OTel Exporter Zipkin 1.31.0**\r\n\r\n   Code: [GitHub Link][9]\r\n\r\n   ```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n    &lt;artifactId&gt;micrometer-tracing-bridge-otel&lt;/artifactId&gt;\r\n    &lt;version&gt;1.1.4&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\r\n    &lt;artifactId&gt;opentelemetry-exporter-zipkin&lt;/artifactId&gt;\r\n    &lt;version&gt;1.31.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n   ```\r\n\r\nIn both cases, the exception persists. It remains unclear which specific combination of tracing versions with Spring Boot 3.2.0 triggers the issue.\r\n\r\n  [1]: https://github.com/open-telemetry/opentelemetry-java\r\n  [2]: https://github.com/kcsurapaneni/food-delivery-backend\r\n  [3]: https://github.com/kcsurapaneni/food-delivery-backend/tree/v3.2.0#readme\r\n  [4]: http://localhost:3000\r\n  [5]: https://github.com/kcsurapaneni/food-delivery-backend/tree/v3.2.0/restaurant\r\n  [6]: https://github.com/kcsurapaneni/food-delivery-backend/tree/v3.2.0/order\r\n  [7]: https://github.com/kcsurapaneni/food-delivery-backend/tree/v3.1.3\r\n  [8]: https://github.com/kcsurapaneni/food-delivery-backend/tree/micrometer-tracing-1.2.0-opentelemetry-1.25.0\r\n  [9]: https://github.com/kcsurapaneni/food-delivery-backend/tree/micrometer-tracing-1.1.4-opentelemetry-1.31.0","link":"https://stackoverflow.com/questions/77552544/exception-in-observability-stack-after-upgrading-spring-boot-from-3-1-3-to-3-2-0","title":"Exception in observability stack after upgrading Spring Boot from 3.1.3 to 3.2.0 using opentelemetry-java","body":"<p><strong>Problem:</strong></p>\n<p>When upgrading the <code>observability</code> stack from Spring Boot version <code>3.1.3</code> to <code>3.2.0</code> using <a href=\"https://github.com/open-telemetry/opentelemetry-java\" rel=\"nofollow noreferrer\">OTel Java SDK</a>, the following exception is encountered:</p>\n<pre class=\"lang-java prettyprint-override\"><code>2023-11-26T16:00:43.087Z  WARN [order service,,] 1 --- [order service] [BatchSpanProcessor_WorkerThread-1] [] i.o.exporter.zipkin.ZipkinSpanExporter   : Failed to export spans\n\norg.springframework.web.client.HttpClientErrorException$BadRequest: 400 Bad Request: &quot;valid annotation timestamp required&lt;EOL&gt;&quot;\n    at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:103)\n    at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:183)\n    at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:137)\n    at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63)\n    at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:932)\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:881)\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:781)\n    at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:663)\n    at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinRestTemplateSender$RestTemplateHttpPostCall.doExecute(ZipkinRestTemplateSender.java:68)\n    at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinRestTemplateSender$RestTemplateHttpPostCall.doEnqueue(ZipkinRestTemplateSender.java:75)\n    at zipkin2.Call$Base.enqueue(Call.java:406)\n    at io.opentelemetry.exporter.zipkin.ZipkinSpanExporter.export(ZipkinSpanExporter.java:82)\n    at io.micrometer.tracing.otel.bridge.CompositeSpanExporter.lambda$export$3(CompositeSpanExporter.java:88)\n    at java.base/java.lang.Iterable.forEach(Iterable.java:75)\n    at io.micrometer.tracing.otel.bridge.CompositeSpanExporter.export(CompositeSpanExporter.java:88)\n    at io.opentelemetry.sdk.trace.export.BatchSpanProcessor$Worker.exportCurrentBatch(BatchSpanProcessor.java:327)\n    at io.opentelemetry.sdk.trace.export.BatchSpanProcessor$Worker.run(BatchSpanProcessor.java:245)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n\n</code></pre>\n<p><strong>Configuration:</strong></p>\n<p>Spring Boot Version: 3.2.0</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.2.0&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>Tracing Dependencies:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-tracing-bridge-otel&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n    &lt;artifactId&gt;opentelemetry-exporter-zipkin&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n<p><strong>Observations:</strong></p>\n<p>Encountering a <code>HttpClientErrorException$BadRequest</code> exception when using the <code>observability</code> stack in Spring Boot version 3.2.0. The issue does not occur with version 3.1.3.</p>\n<p>Any insights or assistance on resolving this issue would be greatly appreciated.</p>\n<p><strong>Edit-1:</strong></p>\n<p><strong>Reproduction Steps</strong></p>\n<ul>\n<li>Clone the repository: <a href=\"https://github.com/kcsurapaneni/food-delivery-backend\" rel=\"nofollow noreferrer\">food-delivery-backend</a></li>\n<li>Checkout the branch/tag: <code>v3.2.0</code></li>\n<li>Check <a href=\"https://github.com/kcsurapaneni/food-delivery-backend/tree/v3.2.0#readme\" rel=\"nofollow noreferrer\">README.md</a> on how to run</li>\n<li>Now check the <code>order</code> API logs in <a href=\"http://localhost:3000\" rel=\"nofollow noreferrer\">Grafana</a></li>\n</ul>\n<p><strong>Additional Information</strong></p>\n<ul>\n<li>Working Sample (Spring Boot 3.2.0):</li>\n<li><a href=\"https://github.com/kcsurapaneni/food-delivery-backend/tree/v3.2.0/restaurant\" rel=\"nofollow noreferrer\">v3.2.0/restaurant</a> - No issues observed.</li>\n<li>Failing Sample (Spring Boot 3.2.0):</li>\n<li><a href=\"https://github.com/kcsurapaneni/food-delivery-backend/tree/v3.2.0/order\" rel=\"nofollow noreferrer\">v3.2.0/order</a> - Exception occurs.</li>\n</ul>\n<p><strong>Edit-2:</strong></p>\n<ul>\n<li>The error is not present when using Spring Boot version <code>3.1.3</code> for both <code>brave</code> and <code>opentelemetry-java</code> dependencies - <a href=\"https://github.com/kcsurapaneni/food-delivery-backend/tree/v3.1.3\" rel=\"nofollow noreferrer\">Example</a></li>\n<li>The issue seems to be related to the interaction between Spring Boot 3.2.0 with <code>opentelemetry-java</code></li>\n</ul>\n<p><strong>Edit-3:</strong></p>\n<p><strong>Spring Boot 3.2.0</strong> uses following tracing versions</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-tracing-bridge-otel&lt;/artifactId&gt;\n    &lt;version&gt;1.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n    &lt;artifactId&gt;opentelemetry-exporter-zipkin&lt;/artifactId&gt;\n    &lt;version&gt;1.31.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n<p><strong>Spring Boot 3.1.3</strong> uses following tracing versions</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-tracing-bridge-otel&lt;/artifactId&gt;\n    &lt;version&gt;1.1.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n    &lt;artifactId&gt;opentelemetry-exporter-zipkin&lt;/artifactId&gt;\n    &lt;version&gt;1.25.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n<p>I attempted different permutations of tracing versions with Spring Boot 3.2.0 to identify the specific dependency responsible for the exception. However, the issue persists with the following combinations:</p>\n<ol>\n<li><strong>Spring Boot 3.2.0 with Micrometer Tracing 1.2.0 and OTel Exporter\nZipkin 1.25.0</strong></li>\n</ol>\n<p>Code: <a href=\"https://github.com/kcsurapaneni/food-delivery-backend/tree/micrometer-tracing-1.2.0-opentelemetry-1.25.0\" rel=\"nofollow noreferrer\">GitHub Link</a></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n  &lt;artifactId&gt;micrometer-tracing-bridge-otel&lt;/artifactId&gt;\n  &lt;version&gt;1.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n  &lt;artifactId&gt;opentelemetry-exporter-zipkin&lt;/artifactId&gt;\n  &lt;version&gt;1.25.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n<ol start=\"2\">\n<li><strong>Spring Boot 3.2.0 with Micrometer Tracing 1.1.4 and OTel Exporter Zipkin 1.31.0</strong></li>\n</ol>\n<p>Code: <a href=\"https://github.com/kcsurapaneni/food-delivery-backend/tree/micrometer-tracing-1.1.4-opentelemetry-1.31.0\" rel=\"nofollow noreferrer\">GitHub Link</a></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n &lt;artifactId&gt;micrometer-tracing-bridge-otel&lt;/artifactId&gt;\n &lt;version&gt;1.1.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n &lt;artifactId&gt;opentelemetry-exporter-zipkin&lt;/artifactId&gt;\n &lt;version&gt;1.31.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n<p>In both cases, the exception persists. It remains unclear which specific combination of tracing versions with Spring Boot 3.2.0 triggers the issue.</p>\n"},{"tags":["java","maven","coordinate-systems","geotools","maven-shade-plugin"],"comments":[{"score":0,"post_type":"question","creation_date":1675508265,"post_id":75335483,"comment_id":132946810,"body_markdown":"can you check what is in the `META-INF/services` file in the output and add it to your question","link":"https://stackoverflow.com/questions/75335483/geotools-getting-illegalargumentexception-argument-ellipsoid-should-not-be-n#comment132946810_75335483","body":"can you check what is in the <code>META-INF&#47;services</code> file in the output and add it to your question"},{"score":0,"post_type":"question","creation_date":1675673059,"post_id":75335483,"comment_id":132972000,"body_markdown":"Technically java 8 is no longer supported by GeoTools at 28.x so may be try with 11 and see if that helps?","link":"https://stackoverflow.com/questions/75335483/geotools-getting-illegalargumentexception-argument-ellipsoid-should-not-be-n#comment132972000_75335483","body":"Technically java 8 is no longer supported by GeoTools at 28.x so may be try with 11 and see if that helps?"},{"score":0,"post_type":"question","creation_date":1675764059,"post_id":75335483,"comment_id":132994039,"body_markdown":"@IanTurton So I tried upgrading to 11. Still get the same error unfortunately. Also tried using geotools version 24.5, but same results.","link":"https://stackoverflow.com/questions/75335483/geotools-getting-illegalargumentexception-argument-ellipsoid-should-not-be-n#comment132994039_75335483","body":"@IanTurton So I tried upgrading to 11. Still get the same error unfortunately. Also tried using geotools version 24.5, but same results."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702284394,"last_edit_date":1702284394,"creation_date":1675839205,"answer_id":75382267,"question_id":75335483,"body_markdown":"Fixed it, the problem has nothing to do with Geotools. \r\n\r\nThe problem was in these specific lines of the my code:\r\n\r\n    crs = Params.coordinateReferenceSystem;\r\n    GeodeticCalculator gc = new GeodeticCalculator(crs);\r\n\r\nand the `crs` was being set to null because `Params.coordinateReferenceSystem` was defined as a static variable. Static variables cannot be serialized hence are not replicated across all nodes in a distributed system.\r\n\r\nThe result of which it works perfectly on the local IDE but fails on the cluster.","link":"https://stackoverflow.com/questions/75335483/geotools-getting-illegalargumentexception-argument-ellipsoid-should-not-be-n/75382267#75382267","title":"Geotools: Getting IllegalArgumentException: Argument &quot;ellipsoid&quot; should not be null after &quot;org.opengis.referncing.NoSuchAuthorityCodeException&quot; error","body":"<p>Fixed it, the problem has nothing to do with Geotools.</p>\n<p>The problem was in these specific lines of the my code:</p>\n<pre><code>crs = Params.coordinateReferenceSystem;\nGeodeticCalculator gc = new GeodeticCalculator(crs);\n</code></pre>\n<p>and the <code>crs</code> was being set to null because <code>Params.coordinateReferenceSystem</code> was defined as a static variable. Static variables cannot be serialized hence are not replicated across all nodes in a distributed system.</p>\n<p>The result of which it works perfectly on the local IDE but fails on the cluster.</p>\n"}],"comment_count":3,"is_answered":true,"view_count":146,"answer_count":1,"score":1,"last_activity_date":1702284394,"creation_date":1675425869,"last_edit_date":1675668870,"question_id":75335483,"body_markdown":"I encountered the common `&quot;org.opengis.referencing.NoSuchAuthorityCodeException: No code &quot;EPSG:4326&quot; from authority &quot;EPSG&quot; found for object of type &quot;EngineeringCRS&quot;` while trying to run my packaged jar on an Apache Flink cluster. \r\n\r\nI already had `gt-epsg-hsql` added as a dependency when I got the above error. I managed to fix that by following the instructions [on the official Geotools building FAQ][1] and rearranging the dependency order in my pom.xml file and using [maven-shade-plugin][2]. \r\n\r\nBut it seems now I encounter a new exception which is this one. \r\n\r\n    Caused by: java.lang.IllegalArgumentException: Argument &quot;ellipsoid&quot; should not be null.\r\n        at org.geotools.referencing.GeodeticCalculator.&lt;init&gt;(GeodeticCalculator.java:195) ~[?:?]\r\n        at org.geotools.referencing.GeodeticCalculator.&lt;init&gt;(GeodeticCalculator.java:188) ~[?:?]\r\n\r\nSpent the whole day pulling my hair trying to debug this but had no success. It all works when running it on a local cluster via my IDE but packaging and deploying the jar to my cluster causes these errors.\r\n\r\nI tried emulating the suggested POM that the original asker had listed in [this question][3] and modified my pom.xml file to the current one attached below but it still gives the same error. Incase anyone needs to see my full pom.xml for details, [it is hosted here on Textbin.][4] \r\n\r\n    &lt;dependencies&gt;\r\n    \t&lt;!-- GeoTools Related --&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.geotools&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;gt-shapefile&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;${geotools.version}&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.geotools&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;gt-epsg-hsql&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;${geotools.version}&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.geotools&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;gt-swing&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;${geotools.version}&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;4.13.2&lt;/version&gt;\r\n    \t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    &lt;/dependencies&gt;\r\n\r\n\r\n\r\n```\r\n    &lt;plugins&gt;\r\n    \t\t\t&lt;!-- Java Compiler --&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.1&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;source&gt;${java.version}&lt;/source&gt;\r\n    \t\t\t\t\t&lt;target&gt;${java.version}&lt;/target&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \r\n    \t\t\t&lt;!-- We use the maven-shade plugin to create a fat jar that contains all necessary dependencies. --&gt;\r\n    \t\t\t&lt;!-- Change the value of &lt;mainClass&gt;...&lt;/mainClass&gt; if your program entry point changes. --&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;!-- Run shade goal on package phase --&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactSet&gt;\r\n    \t\t\t\t\t\t\t\t&lt;excludes&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;exclude&gt;org.apache.flink:force-shading&lt;/exclude&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;exclude&gt;com.google.code.findbugs:jsr305&lt;/exclude&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;exclude&gt;org.slf4j:*&lt;/exclude&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;exclude&gt;log4j:*&lt;/exclude&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/excludes&gt;\r\n    \t\t\t\t\t\t\t&lt;/artifactSet&gt;\r\n    \t\t\t\t\t\t\t&lt;filters&gt;\r\n    \t\t\t\t\t\t\t\t&lt;filter&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;!-- Do not copy the signatures in the META-INF folder.\r\n    \t\t\t\t\t\t\t\t\tOtherwise, this might cause SecurityExceptions when using the JAR. --&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;artifact&gt;*:*&lt;/artifact&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;excludes&gt;\r\n    \t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n    \t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n    \t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;/excludes&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/filter&gt;\r\n    \t\t\t\t\t\t\t&lt;/filters&gt;\r\n    \t\t\t\t\t\t\t&lt;transformers&gt;\r\n    \t\t\t\t\t\t\t\t&lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n    \t\t\t\t\t\t\t\t\t&lt;mainClass&gt;DataGen.StreamingJob&lt;/mainClass&gt;\r\n    \t\t\t\t\t\t\t\t&lt;/transformer&gt;\r\n    \t\t\t\t\t\t\t\t&lt;!-- This bit merges the various GeoTools META-INF/services files         --&gt;\r\n    \t\t\t\t\t\t\t\t&lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\r\n    \t\t\t\t\t\t\t&lt;/transformers&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n```\r\n\r\nAny ideas on how to fix this error? \r\n\r\n\r\nEDIT: Apache Flink version 1.13.0. Geotools 28-SNAPSHOT. Java version &quot;1.8.0_333&quot;.\r\nAdding the contents of `META-INF/services`:\r\n\r\n```\r\n com.fasterxml.jackson.core.JsonFactory\r\n com.fasterxml.jackson.core.ObjectCodec\r\n it.geosolutions.imageio.compression.CompressorSpi\r\n it.geosolutions.imageio.compression.DecompressorSpi\r\n java.sql.Driver\r\n javax.annotation.processing.Processor\r\n javax.cache.spi.CachingProvider\r\n javax.imageio.spi.ImageInputStreamSpi\r\n javax.imageio.spi.ImageOutputStreamSpi\r\n javax.imageio.spi.ImageReaderSpi\r\n javax.imageio.spi.ImageWriterSpi\r\n javax.measure.spi.FormatService\r\n javax.measure.spi.ServiceProvider\r\n javax.measure.spi.SystemOfUnitsService\r\n javax.measure.spi.UnitFormatService\r\n javax.media.jai.OperationRegistrySpi\r\n javax.media.jai.OperationsRegistrySpi\r\n javax.xml.bind.JAXBContext\r\n org.apache.flink.client.deployment.ClusterClientFactory\r\n org.apache.flink.core.execution.PipelineExecutorFactory\r\n org.apache.flink.runtime.security.contexts.SecurityContextFactory\r\n org.apache.flink.runtime.security.modules.SecurityModuleFactory\r\n org.apache.flink.runtime.state.changelog.StateChangelogWriterFactory\r\n org.apache.flink.shaded.jackson2.com.fasterxml.jackson.core.JsonFactory\r\n org.apache.flink.shaded.jackson2.com.fasterxml.jackson.core.ObjectCodec\r\n org.apache.flink.table.factories.Factory\r\n org.apache.flink.table.factories.TableFactory\r\n org.apache.kafka.common.config.provider.ConfigProvider\r\n org.apache.logging.log4j.core.util.ContextDataProvider\r\n org.apache.logging.log4j.message.ThreadDumpMessage$ThreadInfoFactory\r\n org.apache.logging.log4j.spi.Provider\r\n org.apache.logging.log4j.util.PropertySource\r\n org.geotools.coverage.grid.GridCoverageFactory\r\n org.geotools.coverage.grid.io.footprint.FootprintLoaderSpi\r\n org.geotools.data.DataStoreFactorySpi\r\n org.geotools.data.FileDataStoreFactorySpi\r\n org.geotools.feature.AttributeTypeFactory\r\n org.geotools.filter.FunctionExpression\r\n org.geotools.filter.FunctionFactory\r\n org.geotools.filter.expression.PropertyAccessorFactory\r\n org.geotools.http.HTTPClientFactory\r\n org.geotools.referencing.factory.gridshift.GridShiftLocator\r\n org.geotools.referencing.operation.MathTransformProvider\r\n org.geotools.renderer.crs.ProjectionHandlerFactory\r\n org.geotools.renderer.style.ExternalGraphicFactory\r\n org.geotools.renderer.style.MarkFactory\r\n org.geotools.styling.StyleFactory\r\n org.geotools.swing.tool.InfoToolHelper\r\n org.geotools.util.ConverterFactory\r\n org.jaitools.numeric.Processor\r\n org.jboss.marshalling.ProviderDescriptor\r\n org.opengis.coverage.processing.Operation\r\n org.opengis.feature.FeatureFactory\r\n org.opengis.feature.type.FeatureTypeFactory\r\n org.opengis.filter.FilterFactory\r\n org.opengis.filter.expression.Function\r\n org.opengis.referencing.crs.CRSAuthorityFactory\r\n org.opengis.referencing.crs.CRSFactory\r\n org.opengis.referencing.cs.CSAuthorityFactory\r\n org.opengis.referencing.cs.CSFactory\r\n org.opengis.referencing.datum.DatumAuthorityFactory\r\n org.opengis.referencing.datum.DatumFactory\r\n org.opengis.referencing.operation.CoordinateOperationAuthorityFactory\r\n org.opengis.referencing.operation.CoordinateOperationFactory\r\n org.opengis.referencing.operation.MathTransformFactory\r\n reactor.blockhound.integration.BlockHoundIntegration\r\n tech.units.indriya.spi.NumberSystem\r\n\r\n1 directory, 67 files\r\n```\r\n\r\n  [1]: https://docs.geotools.org/stable/userguide/build/faq.html#how-do-i-create-an-executable-jar-for-my-geotools-app\r\n  [2]: https://maven.apache.org/plugins/maven-shade-plugin/\r\n  [3]: https://stackoverflow.com/questions/27429097/geotools-cannot-find-hsql-epsg-db-throws-error-nosuchauthoritycodeexception\r\n  [4]: https://textbin.net/erewuvb7ud","link":"https://stackoverflow.com/questions/75335483/geotools-getting-illegalargumentexception-argument-ellipsoid-should-not-be-n","title":"Geotools: Getting IllegalArgumentException: Argument &quot;ellipsoid&quot; should not be null after &quot;org.opengis.referncing.NoSuchAuthorityCodeException&quot; error","body":"<p>I encountered the common <code>&quot;org.opengis.referencing.NoSuchAuthorityCodeException: No code &quot;EPSG:4326&quot; from authority &quot;EPSG&quot; found for object of type &quot;EngineeringCRS&quot;</code> while trying to run my packaged jar on an Apache Flink cluster.</p>\n<p>I already had <code>gt-epsg-hsql</code> added as a dependency when I got the above error. I managed to fix that by following the instructions <a href=\"https://docs.geotools.org/stable/userguide/build/faq.html#how-do-i-create-an-executable-jar-for-my-geotools-app\" rel=\"nofollow noreferrer\">on the official Geotools building FAQ</a> and rearranging the dependency order in my pom.xml file and using <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow noreferrer\">maven-shade-plugin</a>.</p>\n<p>But it seems now I encounter a new exception which is this one.</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Argument &quot;ellipsoid&quot; should not be null.\n    at org.geotools.referencing.GeodeticCalculator.&lt;init&gt;(GeodeticCalculator.java:195) ~[?:?]\n    at org.geotools.referencing.GeodeticCalculator.&lt;init&gt;(GeodeticCalculator.java:188) ~[?:?]\n</code></pre>\n<p>Spent the whole day pulling my hair trying to debug this but had no success. It all works when running it on a local cluster via my IDE but packaging and deploying the jar to my cluster causes these errors.</p>\n<p>I tried emulating the suggested POM that the original asker had listed in <a href=\"https://stackoverflow.com/questions/27429097/geotools-cannot-find-hsql-epsg-db-throws-error-nosuchauthoritycodeexception\">this question</a> and modified my pom.xml file to the current one attached below but it still gives the same error. Incase anyone needs to see my full pom.xml for details, <a href=\"https://textbin.net/erewuvb7ud\" rel=\"nofollow noreferrer\">it is hosted here on Textbin.</a></p>\n<pre><code>&lt;dependencies&gt;\n    &lt;!-- GeoTools Related --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.geotools&lt;/groupId&gt;\n        &lt;artifactId&gt;gt-shapefile&lt;/artifactId&gt;\n        &lt;version&gt;${geotools.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.geotools&lt;/groupId&gt;\n        &lt;artifactId&gt;gt-epsg-hsql&lt;/artifactId&gt;\n        &lt;version&gt;${geotools.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.geotools&lt;/groupId&gt;\n        &lt;artifactId&gt;gt-swing&lt;/artifactId&gt;\n        &lt;version&gt;${geotools.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.13.2&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n</code></pre>\n<pre><code>    &lt;plugins&gt;\n                &lt;!-- Java Compiler --&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.1&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;source&gt;${java.version}&lt;/source&gt;\n                        &lt;target&gt;${java.version}&lt;/target&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n    \n                &lt;!-- We use the maven-shade plugin to create a fat jar that contains all necessary dependencies. --&gt;\n                &lt;!-- Change the value of &lt;mainClass&gt;...&lt;/mainClass&gt; if your program entry point changes. --&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.0&lt;/version&gt;\n                    &lt;executions&gt;\n                        &lt;!-- Run shade goal on package phase --&gt;\n                        &lt;execution&gt;\n                            &lt;phase&gt;package&lt;/phase&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;shade&lt;/goal&gt;\n                            &lt;/goals&gt;\n                            &lt;configuration&gt;\n                                &lt;artifactSet&gt;\n                                    &lt;excludes&gt;\n                                        &lt;exclude&gt;org.apache.flink:force-shading&lt;/exclude&gt;\n                                        &lt;exclude&gt;com.google.code.findbugs:jsr305&lt;/exclude&gt;\n                                        &lt;exclude&gt;org.slf4j:*&lt;/exclude&gt;\n                                        &lt;exclude&gt;log4j:*&lt;/exclude&gt;\n                                    &lt;/excludes&gt;\n                                &lt;/artifactSet&gt;\n                                &lt;filters&gt;\n                                    &lt;filter&gt;\n                                        &lt;!-- Do not copy the signatures in the META-INF folder.\n                                        Otherwise, this might cause SecurityExceptions when using the JAR. --&gt;\n                                        &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                        &lt;excludes&gt;\n                                            &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                            &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                            &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                        &lt;/excludes&gt;\n                                    &lt;/filter&gt;\n                                &lt;/filters&gt;\n                                &lt;transformers&gt;\n                                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                                        &lt;mainClass&gt;DataGen.StreamingJob&lt;/mainClass&gt;\n                                    &lt;/transformer&gt;\n                                    &lt;!-- This bit merges the various GeoTools META-INF/services files         --&gt;\n                                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot;/&gt;\n                                &lt;/transformers&gt;\n                            &lt;/configuration&gt;\n                        &lt;/execution&gt;\n                    &lt;/executions&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n</code></pre>\n<p>Any ideas on how to fix this error?</p>\n<p>EDIT: Apache Flink version 1.13.0. Geotools 28-SNAPSHOT. Java version &quot;1.8.0_333&quot;.\nAdding the contents of <code>META-INF/services</code>:</p>\n<pre><code> com.fasterxml.jackson.core.JsonFactory\n com.fasterxml.jackson.core.ObjectCodec\n it.geosolutions.imageio.compression.CompressorSpi\n it.geosolutions.imageio.compression.DecompressorSpi\n java.sql.Driver\n javax.annotation.processing.Processor\n javax.cache.spi.CachingProvider\n javax.imageio.spi.ImageInputStreamSpi\n javax.imageio.spi.ImageOutputStreamSpi\n javax.imageio.spi.ImageReaderSpi\n javax.imageio.spi.ImageWriterSpi\n javax.measure.spi.FormatService\n javax.measure.spi.ServiceProvider\n javax.measure.spi.SystemOfUnitsService\n javax.measure.spi.UnitFormatService\n javax.media.jai.OperationRegistrySpi\n javax.media.jai.OperationsRegistrySpi\n javax.xml.bind.JAXBContext\n org.apache.flink.client.deployment.ClusterClientFactory\n org.apache.flink.core.execution.PipelineExecutorFactory\n org.apache.flink.runtime.security.contexts.SecurityContextFactory\n org.apache.flink.runtime.security.modules.SecurityModuleFactory\n org.apache.flink.runtime.state.changelog.StateChangelogWriterFactory\n org.apache.flink.shaded.jackson2.com.fasterxml.jackson.core.JsonFactory\n org.apache.flink.shaded.jackson2.com.fasterxml.jackson.core.ObjectCodec\n org.apache.flink.table.factories.Factory\n org.apache.flink.table.factories.TableFactory\n org.apache.kafka.common.config.provider.ConfigProvider\n org.apache.logging.log4j.core.util.ContextDataProvider\n org.apache.logging.log4j.message.ThreadDumpMessage$ThreadInfoFactory\n org.apache.logging.log4j.spi.Provider\n org.apache.logging.log4j.util.PropertySource\n org.geotools.coverage.grid.GridCoverageFactory\n org.geotools.coverage.grid.io.footprint.FootprintLoaderSpi\n org.geotools.data.DataStoreFactorySpi\n org.geotools.data.FileDataStoreFactorySpi\n org.geotools.feature.AttributeTypeFactory\n org.geotools.filter.FunctionExpression\n org.geotools.filter.FunctionFactory\n org.geotools.filter.expression.PropertyAccessorFactory\n org.geotools.http.HTTPClientFactory\n org.geotools.referencing.factory.gridshift.GridShiftLocator\n org.geotools.referencing.operation.MathTransformProvider\n org.geotools.renderer.crs.ProjectionHandlerFactory\n org.geotools.renderer.style.ExternalGraphicFactory\n org.geotools.renderer.style.MarkFactory\n org.geotools.styling.StyleFactory\n org.geotools.swing.tool.InfoToolHelper\n org.geotools.util.ConverterFactory\n org.jaitools.numeric.Processor\n org.jboss.marshalling.ProviderDescriptor\n org.opengis.coverage.processing.Operation\n org.opengis.feature.FeatureFactory\n org.opengis.feature.type.FeatureTypeFactory\n org.opengis.filter.FilterFactory\n org.opengis.filter.expression.Function\n org.opengis.referencing.crs.CRSAuthorityFactory\n org.opengis.referencing.crs.CRSFactory\n org.opengis.referencing.cs.CSAuthorityFactory\n org.opengis.referencing.cs.CSFactory\n org.opengis.referencing.datum.DatumAuthorityFactory\n org.opengis.referencing.datum.DatumFactory\n org.opengis.referencing.operation.CoordinateOperationAuthorityFactory\n org.opengis.referencing.operation.CoordinateOperationFactory\n org.opengis.referencing.operation.MathTransformFactory\n reactor.blockhound.integration.BlockHoundIntegration\n tech.units.indriya.spi.NumberSystem\n\n1 directory, 67 files\n</code></pre>\n"},{"tags":["java","google-bigquery","google-cloud-dataflow","apache-beam"],"comments":[{"score":0,"post_type":"question","creation_date":1691774832,"post_id":76873613,"comment_id":135542079,"body_markdown":"If you are willing to create several BQ tables to manage the data per month, you might use https://beam.apache.org/documentation/io/built-in/google-bigquery/#using-dynamic-destinations","link":"https://stackoverflow.com/questions/76873613/how-to-replace-existing-rows-in-bigquery-apache-beam-java-dataflow#comment135542079_76873613","body":"If you are willing to create several BQ tables to manage the data per month, you might use <a href=\"https://beam.apache.org/documentation/io/built-in/google-bigquery/#using-dynamic-destinations\" rel=\"nofollow noreferrer\">beam.apache.org/documentation/io/built-in/google-bigquery/&hellip;</a>"},{"score":0,"post_type":"question","creation_date":1692074287,"post_id":76873613,"comment_id":135572371,"body_markdown":"This could work but I would like to use the same table everytime. And I found the solution for this problem. I updated my post to include the answer. But hey, thank you very much for this help this was also very knowledgeable!","link":"https://stackoverflow.com/questions/76873613/how-to-replace-existing-rows-in-bigquery-apache-beam-java-dataflow#comment135572371_76873613","body":"This could work but I would like to use the same table everytime. And I found the solution for this problem. I updated my post to include the answer. But hey, thank you very much for this help this was also very knowledgeable!"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1702282341,"post_id":76903505,"comment_id":136872661,"body_markdown":"I am facing the same issue, want to update records in certain timeframe in the BQ table via apache beam.\n\ncould you post the code where in you are appling the BigQueryDayPartitionDestinations class on a pcollection?\nwhat does TableDestination(args) does ?","link":"https://stackoverflow.com/questions/76873613/how-to-replace-existing-rows-in-bigquery-apache-beam-java-dataflow/76903505#comment136872661_76903505","body":"I am facing the same issue, want to update records in certain timeframe in the BQ table via apache beam.  could you post the code where in you are appling the BigQueryDayPartitionDestinations class on a pcollection? what does TableDestination(args) does ?"}],"comment_count":1,"score":2,"last_activity_date":1692074750,"creation_date":1692074750,"answer_id":76903505,"question_id":76873613,"body_markdown":"Solution:\r\nSo I found a solution and it worked by creating a SerializableFunction which takes the partition key as an identifier (my table was partitioned on the `Date` column which has a Datatype of Date) upon writing it in BigQuery. So what happens is that it only takes out parts of the table by Partitioned column.\r\n\r\nThis is my sample code for the solution:\r\n\r\n    public class BigQueryDayPartitionDestinations implements SerializableFunction&lt;ValueInSingleWindow&lt;TableRow&gt;, TableDestination&gt; {\r\n    \r\n        private final String projectId;\r\n        private final String datasetId;\r\n        private final String pattern;\r\n        private final String table;\r\n\r\n        public static BigQueryDayPartitionDestinations writePartitionsPerDay(String projectId, String datasetId, String tablePrefix) {\r\n            return new BigQueryDayPartitionDestinations(projectId, datasetId, &quot;yyyyMMdd&quot;, tablePrefix + &quot;$&quot;);\r\n        }\r\n\r\n        private BigQueryDayPartitionDestinations(String projectId, String datasetId, String pattern, String table) {\r\n            this.projectId = projectId;\r\n            this.datasetId = datasetId;\r\n            this.pattern = pattern;\r\n            this.table = table;\r\n        }\r\n\r\n        @Override\r\n        public TableDestination apply(ValueInSingleWindow&lt;TableRow&gt; input) {\r\n            DateTimeFormatter partition = DateTimeFormat.forPattern(pattern).withZone(DateTimeZone.forID(&quot;Asia/Tokyo&quot;));\r\n            DateTimeFormatter formatter = DateTimeFormat.forPattern(&quot;yyyy-MM-dd&quot;).withZone(DateTimeZone.forID(&quot;Asia/Tokyo&quot;));\r\n\r\n            TableReference reference = new TableReference();\r\n            reference.setProjectId(this.projectId);\r\n            reference.setDatasetId(this.datasetId);\r\n\r\n            var date = input.getValue().get(&quot;Date&quot;).toString();\r\n            DateTime dateTime = formatter.parseDateTime(date);\r\n\r\n            var tableId = table + dateTime.toInstant().toString(partition);\r\n\r\n            reference.setTableId(tableId);\r\n            return new TableDestination(reference, null, new TimePartitioning().setType(&quot;DAY&quot;).setField(&quot;Date&quot;));\r\n       }\r\n    }","link":"https://stackoverflow.com/questions/76873613/how-to-replace-existing-rows-in-bigquery-apache-beam-java-dataflow/76903505#76903505","title":"How to replace existing rows in BigQuery Apache Beam Java Dataflow","body":"<p>Solution:\nSo I found a solution and it worked by creating a SerializableFunction which takes the partition key as an identifier (my table was partitioned on the <code>Date</code> column which has a Datatype of Date) upon writing it in BigQuery. So what happens is that it only takes out parts of the table by Partitioned column.</p>\n<p>This is my sample code for the solution:</p>\n<pre><code>public class BigQueryDayPartitionDestinations implements SerializableFunction&lt;ValueInSingleWindow&lt;TableRow&gt;, TableDestination&gt; {\n\n    private final String projectId;\n    private final String datasetId;\n    private final String pattern;\n    private final String table;\n\n    public static BigQueryDayPartitionDestinations writePartitionsPerDay(String projectId, String datasetId, String tablePrefix) {\n        return new BigQueryDayPartitionDestinations(projectId, datasetId, &quot;yyyyMMdd&quot;, tablePrefix + &quot;$&quot;);\n    }\n\n    private BigQueryDayPartitionDestinations(String projectId, String datasetId, String pattern, String table) {\n        this.projectId = projectId;\n        this.datasetId = datasetId;\n        this.pattern = pattern;\n        this.table = table;\n    }\n\n    @Override\n    public TableDestination apply(ValueInSingleWindow&lt;TableRow&gt; input) {\n        DateTimeFormatter partition = DateTimeFormat.forPattern(pattern).withZone(DateTimeZone.forID(&quot;Asia/Tokyo&quot;));\n        DateTimeFormatter formatter = DateTimeFormat.forPattern(&quot;yyyy-MM-dd&quot;).withZone(DateTimeZone.forID(&quot;Asia/Tokyo&quot;));\n\n        TableReference reference = new TableReference();\n        reference.setProjectId(this.projectId);\n        reference.setDatasetId(this.datasetId);\n\n        var date = input.getValue().get(&quot;Date&quot;).toString();\n        DateTime dateTime = formatter.parseDateTime(date);\n\n        var tableId = table + dateTime.toInstant().toString(partition);\n\n        reference.setTableId(tableId);\n        return new TableDestination(reference, null, new TimePartitioning().setType(&quot;DAY&quot;).setField(&quot;Date&quot;));\n   }\n}\n</code></pre>\n"}],"comment_count":2,"is_answered":true,"view_count":155,"answer_count":1,"score":1,"last_activity_date":1702282316,"creation_date":1691653580,"last_edit_date":1692074780,"question_id":76873613,"body_markdown":"Currently, I have BigQuery table called `cdn_daily_user_playback_requests_1MONTH`. This contains large amounts of data based from a daily basis of records. So there would be like data from the whole month of 2023-07, 2023-08, etc. Now, say for example that I want to create new data from 2023-07 and write it into that BigQuery table and that table already has records from the 2023-07 month, how do I do this (replacing the current data in the table to the new one I have) in my Apache Beam code in Java? \r\n\r\nMy pipeline code is here:\r\n\r\n```\r\npipeline\r\n            .apply(&quot;Read from cdn_requests BigQuery&quot;, BigQueryIO\r\n                    .read(new CdnMediaRequestLogEntity.FromSchemaAndRecord())\r\n                    .fromQuery(cdnRequestsQueryString)\r\n                    .usingStandardSql())\r\n            .apply(&quot;Validate and Filter Cdn Media Request Log Objects&quot;, Filter.by(new CdnMediaRequestValidator()))\r\n            .apply(&quot;Convert Cdn Logs To Key Value Pairs&quot;, ParDo.of(new CdnMediaRequestResponseSizeKeyValuePairConverter()))\r\n            .apply(&quot;Sum the Response Sizes By Key&quot;, Sum.longsPerKey())\r\n            .apply(&quot;Convert To New Daily Requests Objects&quot;, ParDo.of(new CdnDailyRequestConverter(projectId, kind)))\r\n            .apply(&quot;Convert Cdn Media Request Entities to Big Query Objects&quot;, ParDo.of(new BigQueryCdnDailyRequestRowConverter()))\r\n            .apply(&quot;Write Data To BigQuery&quot;, BigQueryIO.writeTableRows()\r\n                .to(writeCdnMediaRequestTable)\r\n                .withSchema(cdnDailyRequestSchema)\r\n                .withCreateDisposition(BigQueryIO.Write.CreateDisposition.CREATE_IF_NEEDED)\r\n                .withWriteDisposition(BigQueryIO.Write.WriteDisposition.WRITE_TRUNCATE));\r\n```\r\n\r\n\r\nI did tried and tested the `BigQueryIO.Write.WriteDisposition.WRITE_TRUNCATE` function but in my understanding, this removes all the data inside that table and then writes the newly created ones in it. But I only want to remove the data only for 2023-07&#39;s month and not everything.","link":"https://stackoverflow.com/questions/76873613/how-to-replace-existing-rows-in-bigquery-apache-beam-java-dataflow","title":"How to replace existing rows in BigQuery Apache Beam Java Dataflow","body":"<p>Currently, I have BigQuery table called <code>cdn_daily_user_playback_requests_1MONTH</code>. This contains large amounts of data based from a daily basis of records. So there would be like data from the whole month of 2023-07, 2023-08, etc. Now, say for example that I want to create new data from 2023-07 and write it into that BigQuery table and that table already has records from the 2023-07 month, how do I do this (replacing the current data in the table to the new one I have) in my Apache Beam code in Java?</p>\n<p>My pipeline code is here:</p>\n<pre><code>pipeline\n            .apply(&quot;Read from cdn_requests BigQuery&quot;, BigQueryIO\n                    .read(new CdnMediaRequestLogEntity.FromSchemaAndRecord())\n                    .fromQuery(cdnRequestsQueryString)\n                    .usingStandardSql())\n            .apply(&quot;Validate and Filter Cdn Media Request Log Objects&quot;, Filter.by(new CdnMediaRequestValidator()))\n            .apply(&quot;Convert Cdn Logs To Key Value Pairs&quot;, ParDo.of(new CdnMediaRequestResponseSizeKeyValuePairConverter()))\n            .apply(&quot;Sum the Response Sizes By Key&quot;, Sum.longsPerKey())\n            .apply(&quot;Convert To New Daily Requests Objects&quot;, ParDo.of(new CdnDailyRequestConverter(projectId, kind)))\n            .apply(&quot;Convert Cdn Media Request Entities to Big Query Objects&quot;, ParDo.of(new BigQueryCdnDailyRequestRowConverter()))\n            .apply(&quot;Write Data To BigQuery&quot;, BigQueryIO.writeTableRows()\n                .to(writeCdnMediaRequestTable)\n                .withSchema(cdnDailyRequestSchema)\n                .withCreateDisposition(BigQueryIO.Write.CreateDisposition.CREATE_IF_NEEDED)\n                .withWriteDisposition(BigQueryIO.Write.WriteDisposition.WRITE_TRUNCATE));\n</code></pre>\n<p>I did tried and tested the <code>BigQueryIO.Write.WriteDisposition.WRITE_TRUNCATE</code> function but in my understanding, this removes all the data inside that table and then writes the newly created ones in it. But I only want to remove the data only for 2023-07's month and not everything.</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702280362,"creation_date":1702280362,"answer_id":77638059,"question_id":77515475,"body_markdown":"I solved my issue with the code below\r\n@JoinColumn(name = &quot;task_id&quot;, referencedColumnName = &quot;id&quot;,nullable = false)\r\nwhen  delete user hibernate can not set null \r\n","link":"https://stackoverflow.com/questions/77515475/problem-in-soft-deleting-child-entity-in-spring-boot-in-onetomany-relation-set/77638059#77638059","title":"Problem in Soft Deleting child entity in Spring Boot in @OneToMany relation set null id to referance","body":"<p>I solved my issue with the code below\n@JoinColumn(name = &quot;task_id&quot;, referencedColumnName = &quot;id&quot;,nullable = false)\nwhen  delete user hibernate can not set null</p>\n"}],"comment_count":0,"is_answered":false,"view_count":34,"answer_count":1,"score":0,"last_activity_date":1702281429,"creation_date":1700479281,"question_id":77515475,"body_markdown":"I&#39;m trying to implement soft delete between a parent and child entity when  implement bidirectional it works as  want but when  implement unidirectional it sets a null id reference. \r\n\r\nUser.java\r\n-----------\r\n```\r\n@Getter\r\n@Setter\r\n@Entity\r\n@Builder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Table(name = &quot;user&quot;)\r\n@SQLDelete(sql = &quot;UPDATE user SET is_deleted = true WHERE id = ? and version = ? &quot; )\r\n@Where(clause = &quot;is_deleted = false&quot;)\r\npublic class User extends AbstractBaseModel {\r\n    private String firstName;\r\n    private String lastName;\r\n    private String email;\r\n    .\r\n    .\r\n    .\r\n    @OneToMany(mappedBy = &quot;task&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;Tasks&gt; tasks;\r\n\r\n}\r\n```\r\nTask.java\r\n-----------\r\nthere are bi-direction references between the user and the task\r\n```\r\n@Getter\r\n@Setter\r\n@Entity\r\n@Builder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Table(name = &quot;task&quot;)\r\n@SQLDelete(sql = &quot;UPDATE task SET is_deleted = true WHERE id = ? and version = ? &quot; )\r\n@Where(clause = &quot;is_deleted = false&quot;)\r\npublic class Task extends AbstractBaseModel {\r\n    private String taskName;\r\n    private String lastState;\r\n    .\r\n    .\r\n    .\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    private User user;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;task_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private List&lt;TaskHistory&gt; taskHistory;\r\n\r\n}\r\n```\r\n\r\nTaskHistory.java\r\n-----------\r\nthere is no reference here there is a unidirectional reference   between  task and task history\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@Entity\r\n@Builder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Table(name = &quot;task_history&quot;)\r\n@SQLDelete(sql = &quot;UPDATE task_history SET is_deleted = true WHERE id = ? and version = ? &quot; )\r\n@Where(clause = &quot;is_deleted = false&quot;)\r\npublic class TaskHistory extends AbstractBaseModel {\r\n    private String state;\r\n    .\r\n    .\r\n    .\r\n\r\n}\r\n```\r\nwhen  delete a user with JPA like the one below\r\n```\r\nuserRepository.deleteById(id);\r\n```\r\nthat&#39;s run four query\r\n```\r\nHibernate: update task_history set task_id=null where task_id=? and ((is_deleted = false) )\r\nHibernate: UPDATE task_history SET is_deleted = true WHERE id = ? and version = ?\r\nHibernate: UPDATE task SET is_deleted = true WHERE id = ? and version = ?\r\nHibernate: UPDATE user SET is_deleted = true WHERE id = ? and version = ?\r\n```\r\n don&#39;t want the first query. when that set task_id=null  can not return the first situation\r\n","link":"https://stackoverflow.com/questions/77515475/problem-in-soft-deleting-child-entity-in-spring-boot-in-onetomany-relation-set","title":"Problem in Soft Deleting child entity in Spring Boot in @OneToMany relation set null id to referance","body":"<p>I'm trying to implement soft delete between a parent and child entity when  implement bidirectional it works as  want but when  implement unidirectional it sets a null id reference.</p>\n<h2>User.java</h2>\n<pre><code>@Getter\n@Setter\n@Entity\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name = &quot;user&quot;)\n@SQLDelete(sql = &quot;UPDATE user SET is_deleted = true WHERE id = ? and version = ? &quot; )\n@Where(clause = &quot;is_deleted = false&quot;)\npublic class User extends AbstractBaseModel {\n    private String firstName;\n    private String lastName;\n    private String email;\n    .\n    .\n    .\n    @OneToMany(mappedBy = &quot;task&quot;, cascade = CascadeType.ALL)\n    private List&lt;Tasks&gt; tasks;\n\n}\n</code></pre>\n<h2>Task.java</h2>\n<p>there are bi-direction references between the user and the task</p>\n<pre><code>@Getter\n@Setter\n@Entity\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name = &quot;task&quot;)\n@SQLDelete(sql = &quot;UPDATE task SET is_deleted = true WHERE id = ? and version = ? &quot; )\n@Where(clause = &quot;is_deleted = false&quot;)\npublic class Task extends AbstractBaseModel {\n    private String taskName;\n    private String lastState;\n    .\n    .\n    .\n    @ManyToOne(fetch = FetchType.LAZY)\n    private User user;\n\n    @OneToMany(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;task_id&quot;, referencedColumnName = &quot;id&quot;)\n    private List&lt;TaskHistory&gt; taskHistory;\n\n}\n</code></pre>\n<h2>TaskHistory.java</h2>\n<p>there is no reference here there is a unidirectional reference   between  task and task history</p>\n<pre><code>@Getter\n@Setter\n@Entity\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@Table(name = &quot;task_history&quot;)\n@SQLDelete(sql = &quot;UPDATE task_history SET is_deleted = true WHERE id = ? and version = ? &quot; )\n@Where(clause = &quot;is_deleted = false&quot;)\npublic class TaskHistory extends AbstractBaseModel {\n    private String state;\n    .\n    .\n    .\n\n}\n</code></pre>\n<p>when  delete a user with JPA like the one below</p>\n<pre><code>userRepository.deleteById(id);\n</code></pre>\n<p>that's run four query</p>\n<pre><code>Hibernate: update task_history set task_id=null where task_id=? and ((is_deleted = false) )\nHibernate: UPDATE task_history SET is_deleted = true WHERE id = ? and version = ?\nHibernate: UPDATE task SET is_deleted = true WHERE id = ? and version = ?\nHibernate: UPDATE user SET is_deleted = true WHERE id = ? and version = ?\n</code></pre>\n<p> don't want the first query. when that set task_id=null  can not return the first situation</p>\n"},{"tags":["java","robotics"],"comments":[{"score":1,"post_type":"question","creation_date":1699497325,"post_id":77450046,"comment_id":136540624,"body_markdown":"What code is in `waitForStart()`? What if it isn&#39;t waiting?","link":"https://stackoverflow.com/questions/77450046/why-does-the-robot-run-continually-is-it-stuck-in-a-loop#comment136540624_77450046","body":"What code is in <code>waitForStart()</code>? What if it isn&#39;t waiting?"}],"answers":[{"comment_count":0,"score":2,"last_activity_date":1702261694,"last_edit_date":1702261694,"creation_date":1702100567,"answer_id":77630277,"question_id":77450046,"body_markdown":"1) Your encoder is not plugged in or is plugged into the wrong motor port\r\n2) Your encoder is plugged in backwards (if using a level shifter)\r\n3) The motor power wires are swapped (usually done as a &quot;quick fix&quot; to spin the motor the opposite direction instead of changing software, which doesn&#39;t work when using encoders)\r\n\r\nAdd a telemetry line to your while loop to print the &quot;getPosition()&quot; values for each motor as a way to verify proper encoder operation.","link":"https://stackoverflow.com/questions/77450046/why-does-the-robot-run-continually-is-it-stuck-in-a-loop/77630277#77630277","title":"Why does the robot run continually? Is it stuck in a loop?","body":"<ol>\n<li>Your encoder is not plugged in or is plugged into the wrong motor port</li>\n<li>Your encoder is plugged in backwards (if using a level shifter)</li>\n<li>The motor power wires are swapped (usually done as a &quot;quick fix&quot; to spin the motor the opposite direction instead of changing software, which doesn't work when using encoders)</li>\n</ol>\n<p>Add a telemetry line to your while loop to print the &quot;getPosition()&quot; values for each motor as a way to verify proper encoder operation.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":70,"answer_count":1,"score":2,"last_activity_date":1702261694,"creation_date":1699495793,"question_id":77450046,"body_markdown":"I set the FTC robot to drive forward 100 ticks using encoders, but it drives continuously until opmode is stopped. Adjusting the speed in the code doesn&#39;t seem to work either, and it&#39;s stuck at the same speed.\r\n\r\nThis is our code:\r\n\r\n\r\n```\r\npackage org.firstinspires.ftc.teamcode.drive.auto;\r\n\r\nimport com.qualcomm.robotcore.eventloop.opmode.Autonomous;\r\nimport com.qualcomm.robotcore.eventloop.opmode.LinearOpMode;\r\nimport com.qualcomm.robotcore.hardware.DcMotor;\r\nimport com.qualcomm.robotcore.hardware.DcMotorSimple;\r\n\r\n\r\n@Autonomous(name=&quot;encoderAutoRB&quot;, group=&quot;Autonomous&quot;)\r\npublic class encoderAutoRB extends LinearOpMode {\r\n\r\n    private DcMotor left;\r\n    private DcMotor right;\r\n\r\n\r\n    private int leftPos;\r\n    private int rightPos;\r\n\r\n    @Override\r\n    public void runOpMode() {\r\n        left = hardwareMap.get(DcMotor.class, &quot;frontLeftMotor&quot;);\r\n        left = hardwareMap.get(DcMotor.class, &quot;backLeftMotor&quot;);\r\n\r\n        right = hardwareMap.get(DcMotor.class, &quot;frontRightMotor&quot;);\r\n        right = hardwareMap.get(DcMotor.class, &quot;backRightMotor&quot;);\r\n\r\n        left.setMode(DcMotor.RunMode.STOP_AND_RESET_ENCODER);\r\n        right.setMode(DcMotor.RunMode.STOP_AND_RESET_ENCODER);\r\n\r\n        right.setDirection(DcMotorSimple.Direction.REVERSE);\r\n\r\n        leftPos = 0;\r\n        rightPos = 0;\r\n\r\n        waitForStart();\r\n\r\n        move(100, 100, 0.5);\r\n    }\r\n    private void move(int leftTarget, int rightTarget, double speed) {\r\n        leftPos += leftTarget;\r\n        rightPos += rightTarget;\r\n\r\n        left.setTargetPosition(leftPos);\r\n        right.setTargetPosition(rightPos);\r\n\r\n        left.setMode(DcMotor.RunMode.RUN_TO_POSITION);\r\n        right.setMode(DcMotor.RunMode.RUN_TO_POSITION);\r\n\r\n        left.setPower(speed);\r\n        right.setPower(speed);\r\n\r\n        while (opModeIsActive() &amp;&amp; left.isBusy() &amp;&amp; right.isBusy()) {\r\n            idle();\r\n        }\r\n    }\r\n}\r\n```\r\n","link":"https://stackoverflow.com/questions/77450046/why-does-the-robot-run-continually-is-it-stuck-in-a-loop","title":"Why does the robot run continually? Is it stuck in a loop?","body":"<p>I set the FTC robot to drive forward 100 ticks using encoders, but it drives continuously until opmode is stopped. Adjusting the speed in the code doesn't seem to work either, and it's stuck at the same speed.</p>\n<p>This is our code:</p>\n<pre><code>package org.firstinspires.ftc.teamcode.drive.auto;\n\nimport com.qualcomm.robotcore.eventloop.opmode.Autonomous;\nimport com.qualcomm.robotcore.eventloop.opmode.LinearOpMode;\nimport com.qualcomm.robotcore.hardware.DcMotor;\nimport com.qualcomm.robotcore.hardware.DcMotorSimple;\n\n\n@Autonomous(name=&quot;encoderAutoRB&quot;, group=&quot;Autonomous&quot;)\npublic class encoderAutoRB extends LinearOpMode {\n\n    private DcMotor left;\n    private DcMotor right;\n\n\n    private int leftPos;\n    private int rightPos;\n\n    @Override\n    public void runOpMode() {\n        left = hardwareMap.get(DcMotor.class, &quot;frontLeftMotor&quot;);\n        left = hardwareMap.get(DcMotor.class, &quot;backLeftMotor&quot;);\n\n        right = hardwareMap.get(DcMotor.class, &quot;frontRightMotor&quot;);\n        right = hardwareMap.get(DcMotor.class, &quot;backRightMotor&quot;);\n\n        left.setMode(DcMotor.RunMode.STOP_AND_RESET_ENCODER);\n        right.setMode(DcMotor.RunMode.STOP_AND_RESET_ENCODER);\n\n        right.setDirection(DcMotorSimple.Direction.REVERSE);\n\n        leftPos = 0;\n        rightPos = 0;\n\n        waitForStart();\n\n        move(100, 100, 0.5);\n    }\n    private void move(int leftTarget, int rightTarget, double speed) {\n        leftPos += leftTarget;\n        rightPos += rightTarget;\n\n        left.setTargetPosition(leftPos);\n        right.setTargetPosition(rightPos);\n\n        left.setMode(DcMotor.RunMode.RUN_TO_POSITION);\n        right.setMode(DcMotor.RunMode.RUN_TO_POSITION);\n\n        left.setPower(speed);\n        right.setPower(speed);\n\n        while (opModeIsActive() &amp;&amp; left.isBusy() &amp;&amp; right.isBusy()) {\n            idle();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","checkstyle"],"comments":[{"score":1,"post_type":"question","creation_date":1691069526,"post_id":76828112,"comment_id":135443892,"body_markdown":"this isn&#39;t specific to pre-commit so I&#39;ve removed the tags for it","link":"https://stackoverflow.com/questions/76828112/using-checkstyle-default-configuration-with-linelength-100-in-pre-commit#comment135443892_76828112","body":"this isn&#39;t specific to pre-commit so I&#39;ve removed the tags for it"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702225905,"creation_date":1702225905,"answer_id":77635533,"question_id":76828112,"body_markdown":"A solution was found by including the other checks inside the `TreeWalker` like:\r\n```xml\r\n&lt;!DOCTYPE module PUBLIC\r\n        &quot;-//Puppy Crawl//DTD Check Configuration 1.3//EN&quot;\r\n        &quot;https://checkstyle.org/dtds/configuration_1_3.dtd&quot;&gt;\r\n\r\n&lt;module name=&quot;Checker&quot;&gt;\r\n\r\n        &lt;!-- Formatting Check: Enforces a maximum line length of 80 characters --&gt;\r\n        &lt;module name=&quot;LineLength&quot;&gt;\r\n            &lt;property name=&quot;max&quot; value=&quot;100&quot;/&gt;\r\n        &lt;/module&gt;\r\n\r\n        &lt;!-- Code Structure Check: Limits the length of a file to 1000 lines --&gt;\r\n        &lt;module name=&quot;FileLength&quot;&gt;\r\n            &lt;property name=&quot;max&quot; value=&quot;1000&quot;/&gt;\r\n        &lt;/module&gt;\r\n\r\n        &lt;!-- Code Structure Check: Enforces Javadoc comments for package-info.java files --&gt;\r\n        &lt;module name=&quot;JavadocPackage&quot;/&gt;\r\n\r\n    &lt;!-- TreeWalker Module: Performs checks on the abstract syntax tree --&gt;\r\n    &lt;module name=&quot;TreeWalker&quot;&gt;\r\n\r\n\r\n\r\n\r\n        &lt;!-- Formatting Check: Ensures consistent indentation --&gt;\r\n        &lt;!-- &lt;module name=&quot;Indentation&quot;&gt; --&gt;\r\n            &lt;!-- &lt;property name=&quot;basicOffset&quot; value=&quot;2&quot;/&gt; --&gt;\r\n            &lt;!-- &lt;property name=&quot;braceAdjustment&quot; value=&quot;0&quot;/&gt; --&gt;\r\n            &lt;!-- &lt;property name=&quot;caseIndent&quot; value=&quot;0&quot;/&gt; --&gt;\r\n            &lt;!-- &lt;property name=&quot;throwsIndent&quot; value=&quot;2&quot;/&gt; --&gt;\r\n        &lt;!-- &lt;/module&gt; --&gt;\r\n\r\n        &lt;!-- Formatting Check: Enforces right curly brace placement --&gt;\r\n        &lt;!-- &lt;module name=&quot;RightCurly&quot;&gt; --&gt;\r\n            &lt;!-- &lt;property name=&quot;option&quot; value=&quot;alone&quot;/&gt; --&gt;\r\n        &lt;!-- &lt;/module&gt; --&gt;\r\n\r\n        &lt;!-- Formatting Check: Enforces whitespace around certain tokens --&gt;\r\n        &lt;module name=&quot;WhitespaceAround&quot;&gt;\r\n            &lt;property name=&quot;allowEmptyConstructors&quot; value=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;allowEmptyMethods&quot; value=&quot;true&quot;/&gt;\r\n        &lt;/module&gt;\r\n\r\n        &lt;!-- Code Structure Check: Disallows empty blocks --&gt;\r\n        &lt;module name=&quot;EmptyBlock&quot;&gt;\r\n            &lt;property name=&quot;option&quot; value=&quot;text&quot;/&gt;\r\n        &lt;/module&gt;\r\n\r\n        &lt;!-- Code Structure Check: Enforces the use of braces for control statements --&gt;\r\n        &lt;module name=&quot;NeedBraces&quot;/&gt;\r\n\r\n        &lt;!-- Formatting Check: Enforces consistent whitespace usage --&gt;\r\n        &lt;module name=&quot;GenericWhitespace&quot;/&gt;\r\n\r\n\r\n        &lt;!-- Code Structure Check: Checks for redundant import statements --&gt;\r\n        &lt;module name=&quot;RedundantImport&quot;/&gt;\r\n\r\n        &lt;!-- Code Structure Check: Disallows star import statements --&gt;\r\n        &lt;module name=&quot;AvoidStarImport&quot;/&gt;\r\n\r\n        &lt;!-- Code Structure Check: Checks the placement of left curly braces --&gt;\r\n        &lt;module name=&quot;LeftCurly&quot;&gt;&lt;/module&gt;\r\n\r\n        &lt;!-- Naming Convention Check: Enforces naming conventions for local final variables --&gt;\r\n        &lt;module name=&quot;LocalFinalVariableName&quot;/&gt;\r\n\r\n        &lt;!-- Naming Convention Check: Enforces naming conventions for local variables --&gt;\r\n        &lt;module name=&quot;LocalVariableName&quot;/&gt;\r\n\r\n        &lt;!-- Naming Convention Check: Enforces naming conventions for member variables --&gt;\r\n        &lt;module name=&quot;MemberName&quot;/&gt;\r\n\r\n        &lt;!-- Naming Convention Check: Enforces naming conventions for method names --&gt;\r\n        &lt;module name=&quot;MethodName&quot;/&gt;\r\n\r\n        &lt;!-- Naming Convention Check: Enforces naming conventions for package names --&gt;\r\n        &lt;module name=&quot;PackageName&quot;/&gt;\r\n\r\n        &lt;!-- Naming Convention Check: Enforces naming conventions for method parameters --&gt;\r\n        &lt;module name=&quot;ParameterName&quot;/&gt;\r\n\r\n        &lt;!-- Naming Convention Check: Enforces naming conventions for static variables --&gt;\r\n        &lt;module name=&quot;StaticVariableName&quot;/&gt;\r\n\r\n        &lt;!-- Naming Convention Check: Enforces naming conventions for type names (classes, interfaces, enums, etc.) --&gt;\r\n        &lt;module name=&quot;TypeName&quot;/&gt;\r\n\r\n        &lt;!-- Code Structure Check: Disallows unused import statements --&gt;\r\n        &lt;module name=&quot;UnusedImports&quot;/&gt;\r\n\r\n        &lt;!-- Code Structure Check: Disallows unused private fields --&gt;\r\n        &lt;!-- &lt;module name=&quot;UnusedPrivateField&quot;/&gt; --&gt;\r\n\r\n        &lt;!-- Code Structure Check: Enforces Javadoc comments for methods and classes --&gt;\r\n        &lt;module name=&quot;JavadocMethod&quot;/&gt;\r\n        &lt;module name=&quot;JavadocType&quot;/&gt;\r\n\r\n        &lt;!-- Code Structure Check: Disallows trailing whitespace --&gt;\r\n        &lt;module name=&quot;NoWhitespaceAfter&quot;/&gt;\r\n\r\n        &lt;!-- Code Structure Check: Disallows whitespace before a semicolon --&gt;\r\n        &lt;module name=&quot;NoWhitespaceBefore&quot;/&gt;\r\n\r\n        &lt;!-- Add: // CHECKSTYLE:OFF to the top of the file for which you want to skip checkstyle checks. --&gt;\r\n        &lt;module name=&quot;SuppressionCommentFilter&quot;/&gt;\r\n    &lt;/module&gt;\r\n\r\n&lt;/module&gt;\r\n\r\n```","link":"https://stackoverflow.com/questions/76828112/using-checkstyle-default-configuration-with-linelength-100-in-pre-commit/77635533#77635533","title":"Using checkstyle (default) configuration, with lineLength 100 in pre-commit?","body":"<p>A solution was found by including the other checks inside the <code>TreeWalker</code> like:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!DOCTYPE module PUBLIC\n        &quot;-//Puppy Crawl//DTD Check Configuration 1.3//EN&quot;\n        &quot;https://checkstyle.org/dtds/configuration_1_3.dtd&quot;&gt;\n\n&lt;module name=&quot;Checker&quot;&gt;\n\n        &lt;!-- Formatting Check: Enforces a maximum line length of 80 characters --&gt;\n        &lt;module name=&quot;LineLength&quot;&gt;\n            &lt;property name=&quot;max&quot; value=&quot;100&quot;/&gt;\n        &lt;/module&gt;\n\n        &lt;!-- Code Structure Check: Limits the length of a file to 1000 lines --&gt;\n        &lt;module name=&quot;FileLength&quot;&gt;\n            &lt;property name=&quot;max&quot; value=&quot;1000&quot;/&gt;\n        &lt;/module&gt;\n\n        &lt;!-- Code Structure Check: Enforces Javadoc comments for package-info.java files --&gt;\n        &lt;module name=&quot;JavadocPackage&quot;/&gt;\n\n    &lt;!-- TreeWalker Module: Performs checks on the abstract syntax tree --&gt;\n    &lt;module name=&quot;TreeWalker&quot;&gt;\n\n\n\n\n        &lt;!-- Formatting Check: Ensures consistent indentation --&gt;\n        &lt;!-- &lt;module name=&quot;Indentation&quot;&gt; --&gt;\n            &lt;!-- &lt;property name=&quot;basicOffset&quot; value=&quot;2&quot;/&gt; --&gt;\n            &lt;!-- &lt;property name=&quot;braceAdjustment&quot; value=&quot;0&quot;/&gt; --&gt;\n            &lt;!-- &lt;property name=&quot;caseIndent&quot; value=&quot;0&quot;/&gt; --&gt;\n            &lt;!-- &lt;property name=&quot;throwsIndent&quot; value=&quot;2&quot;/&gt; --&gt;\n        &lt;!-- &lt;/module&gt; --&gt;\n\n        &lt;!-- Formatting Check: Enforces right curly brace placement --&gt;\n        &lt;!-- &lt;module name=&quot;RightCurly&quot;&gt; --&gt;\n            &lt;!-- &lt;property name=&quot;option&quot; value=&quot;alone&quot;/&gt; --&gt;\n        &lt;!-- &lt;/module&gt; --&gt;\n\n        &lt;!-- Formatting Check: Enforces whitespace around certain tokens --&gt;\n        &lt;module name=&quot;WhitespaceAround&quot;&gt;\n            &lt;property name=&quot;allowEmptyConstructors&quot; value=&quot;true&quot;/&gt;\n            &lt;property name=&quot;allowEmptyMethods&quot; value=&quot;true&quot;/&gt;\n        &lt;/module&gt;\n\n        &lt;!-- Code Structure Check: Disallows empty blocks --&gt;\n        &lt;module name=&quot;EmptyBlock&quot;&gt;\n            &lt;property name=&quot;option&quot; value=&quot;text&quot;/&gt;\n        &lt;/module&gt;\n\n        &lt;!-- Code Structure Check: Enforces the use of braces for control statements --&gt;\n        &lt;module name=&quot;NeedBraces&quot;/&gt;\n\n        &lt;!-- Formatting Check: Enforces consistent whitespace usage --&gt;\n        &lt;module name=&quot;GenericWhitespace&quot;/&gt;\n\n\n        &lt;!-- Code Structure Check: Checks for redundant import statements --&gt;\n        &lt;module name=&quot;RedundantImport&quot;/&gt;\n\n        &lt;!-- Code Structure Check: Disallows star import statements --&gt;\n        &lt;module name=&quot;AvoidStarImport&quot;/&gt;\n\n        &lt;!-- Code Structure Check: Checks the placement of left curly braces --&gt;\n        &lt;module name=&quot;LeftCurly&quot;&gt;&lt;/module&gt;\n\n        &lt;!-- Naming Convention Check: Enforces naming conventions for local final variables --&gt;\n        &lt;module name=&quot;LocalFinalVariableName&quot;/&gt;\n\n        &lt;!-- Naming Convention Check: Enforces naming conventions for local variables --&gt;\n        &lt;module name=&quot;LocalVariableName&quot;/&gt;\n\n        &lt;!-- Naming Convention Check: Enforces naming conventions for member variables --&gt;\n        &lt;module name=&quot;MemberName&quot;/&gt;\n\n        &lt;!-- Naming Convention Check: Enforces naming conventions for method names --&gt;\n        &lt;module name=&quot;MethodName&quot;/&gt;\n\n        &lt;!-- Naming Convention Check: Enforces naming conventions for package names --&gt;\n        &lt;module name=&quot;PackageName&quot;/&gt;\n\n        &lt;!-- Naming Convention Check: Enforces naming conventions for method parameters --&gt;\n        &lt;module name=&quot;ParameterName&quot;/&gt;\n\n        &lt;!-- Naming Convention Check: Enforces naming conventions for static variables --&gt;\n        &lt;module name=&quot;StaticVariableName&quot;/&gt;\n\n        &lt;!-- Naming Convention Check: Enforces naming conventions for type names (classes, interfaces, enums, etc.) --&gt;\n        &lt;module name=&quot;TypeName&quot;/&gt;\n\n        &lt;!-- Code Structure Check: Disallows unused import statements --&gt;\n        &lt;module name=&quot;UnusedImports&quot;/&gt;\n\n        &lt;!-- Code Structure Check: Disallows unused private fields --&gt;\n        &lt;!-- &lt;module name=&quot;UnusedPrivateField&quot;/&gt; --&gt;\n\n        &lt;!-- Code Structure Check: Enforces Javadoc comments for methods and classes --&gt;\n        &lt;module name=&quot;JavadocMethod&quot;/&gt;\n        &lt;module name=&quot;JavadocType&quot;/&gt;\n\n        &lt;!-- Code Structure Check: Disallows trailing whitespace --&gt;\n        &lt;module name=&quot;NoWhitespaceAfter&quot;/&gt;\n\n        &lt;!-- Code Structure Check: Disallows whitespace before a semicolon --&gt;\n        &lt;module name=&quot;NoWhitespaceBefore&quot;/&gt;\n\n        &lt;!-- Add: // CHECKSTYLE:OFF to the top of the file for which you want to skip checkstyle checks. --&gt;\n        &lt;module name=&quot;SuppressionCommentFilter&quot;/&gt;\n    &lt;/module&gt;\n\n&lt;/module&gt;\n\n</code></pre>\n"}],"comment_count":1,"is_answered":false,"view_count":57,"answer_count":1,"score":0,"last_activity_date":1702225905,"creation_date":1691065982,"last_edit_date":1691069513,"question_id":76828112,"body_markdown":"## Context\r\nWhen I run the following pre-commit configuration:\r\n```yml\r\n- repo: https://github.com/gherynos/pre-commit-java\r\n    rev: v0.2.9 # Use the ref you want to point at\r\n    hooks:\r\n      - id: pmd\r\n        # args: [&quot;--cache&quot;]\r\n        # exclude: /test/\r\n      - id: cpd\r\n        # exclude: /test/\r\n      - id: checkstyle\r\n        # Set the path to your Checkstyle configuration file\r\n        # args: [&quot;-c&quot;, &quot;checkstyle.xml&quot;]\r\n        # exclude: /test/\r\n```\r\ncheckstyle throws 32 warnings of various types, including `InvalidJavadocPosition`. That is as expected. However, by default it uses a lineLength of 80 characters, whereas google_style_java uses 100 characters. I would like to change checkstyle to use 100 characters, which I did by adding a `checkstyle.xml` file with content:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot;?&gt;\r\n&lt;!DOCTYPE module PUBLIC\r\n        &quot;-//Checkstyle//DTD Checkstyle Configuration 1.3//EN&quot;\r\n        &quot;https://checkstyle.org/dtds/configuration_1_3.dtd&quot;&gt;\r\n\r\n&lt;module name=&quot;Checker&quot;&gt;\r\n    &lt;!-- Configure the line length check with a maximum limit of 80 characters --&gt;\r\n    &lt;module name=&quot;LineLength&quot;&gt;\r\n        &lt;property name=&quot;max&quot; value=&quot;80&quot;/&gt;\r\n    &lt;/module&gt;\r\n&lt;/module&gt;\r\n\r\n```\r\nand enabling: `args: [&quot;-c&quot;, &quot;checkstyle.xml&quot;]`. \r\n\r\n## Issue\r\nHowever, the latter configuration makes checkstyle **only** check for lineLength. To resolve this, I could create a custom checkstyle configuration with all the checks that checkstyle supports. However, that is quite labour intensive, and more importantly, it requires me to manually update the configuration if checkstyle updates. Hence, I would like to &quot;just use the default checkstyle setting, as pre-commit uses it&quot;, with the exception that the line-length should be 100 instead of 80. \r\n\r\n## Question\r\nHence, I would like to ask, how can I use the default checkstyle configuration that pre-commit uses, with the exception of the linelenght check of 100 (instead of 80)","link":"https://stackoverflow.com/questions/76828112/using-checkstyle-default-configuration-with-linelength-100-in-pre-commit","title":"Using checkstyle (default) configuration, with lineLength 100 in pre-commit?","body":"<h2>Context</h2>\n<p>When I run the following pre-commit configuration:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>- repo: https://github.com/gherynos/pre-commit-java\n    rev: v0.2.9 # Use the ref you want to point at\n    hooks:\n      - id: pmd\n        # args: [&quot;--cache&quot;]\n        # exclude: /test/\n      - id: cpd\n        # exclude: /test/\n      - id: checkstyle\n        # Set the path to your Checkstyle configuration file\n        # args: [&quot;-c&quot;, &quot;checkstyle.xml&quot;]\n        # exclude: /test/\n</code></pre>\n<p>checkstyle throws 32 warnings of various types, including <code>InvalidJavadocPosition</code>. That is as expected. However, by default it uses a lineLength of 80 characters, whereas google_style_java uses 100 characters. I would like to change checkstyle to use 100 characters, which I did by adding a <code>checkstyle.xml</code> file with content:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;!DOCTYPE module PUBLIC\n        &quot;-//Checkstyle//DTD Checkstyle Configuration 1.3//EN&quot;\n        &quot;https://checkstyle.org/dtds/configuration_1_3.dtd&quot;&gt;\n\n&lt;module name=&quot;Checker&quot;&gt;\n    &lt;!-- Configure the line length check with a maximum limit of 80 characters --&gt;\n    &lt;module name=&quot;LineLength&quot;&gt;\n        &lt;property name=&quot;max&quot; value=&quot;80&quot;/&gt;\n    &lt;/module&gt;\n&lt;/module&gt;\n\n</code></pre>\n<p>and enabling: <code>args: [&quot;-c&quot;, &quot;checkstyle.xml&quot;]</code>.</p>\n<h2>Issue</h2>\n<p>However, the latter configuration makes checkstyle <strong>only</strong> check for lineLength. To resolve this, I could create a custom checkstyle configuration with all the checks that checkstyle supports. However, that is quite labour intensive, and more importantly, it requires me to manually update the configuration if checkstyle updates. Hence, I would like to &quot;just use the default checkstyle setting, as pre-commit uses it&quot;, with the exception that the line-length should be 100 instead of 80.</p>\n<h2>Question</h2>\n<p>Hence, I would like to ask, how can I use the default checkstyle configuration that pre-commit uses, with the exception of the linelenght check of 100 (instead of 80)</p>\n"},{"tags":["java","spring-boot","maven","intellij-idea"],"comments":[{"score":0,"post_type":"question","creation_date":1699278699,"post_id":77431361,"comment_id":136507720,"body_markdown":"if you are using  [Apache Maven Dependency Plugin](https://maven.apache.org/plugins/maven-dependency-plugin/index.html) run  `dependency:purge-local-repository` and in IDEA reimport  `Project &gt; [your project name] &gt; right click &gt; Maven &gt; Reimport`","link":"https://stackoverflow.com/questions/77431361/idea-maven-project-resolve-wrong-dependency-version#comment136507720_77431361","body":"if you are using  <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/index.html\" rel=\"nofollow noreferrer\">Apache Maven Dependency Plugin</a> run  <code>dependency:purge-local-repository</code> and in IDEA reimport  <code>Project &gt; [your project name] &gt; right click &gt; Maven &gt; Reimport</code>"},{"score":0,"post_type":"question","creation_date":1699290229,"post_id":77431361,"comment_id":136510259,"body_markdown":"Please show your full pom file... Do you use the spring boot parent?","link":"https://stackoverflow.com/questions/77431361/idea-maven-project-resolve-wrong-dependency-version#comment136510259_77431361","body":"Please show your full pom file... Do you use the spring boot parent?"},{"score":0,"post_type":"question","creation_date":1699337592,"post_id":77431361,"comment_id":136515651,"body_markdown":"@ArunDuraisamy I ran `mvn dependency:purge-local-repository` and reloaded all maven projects, still not working for me.","link":"https://stackoverflow.com/questions/77431361/idea-maven-project-resolve-wrong-dependency-version#comment136515651_77431361","body":"@ArunDuraisamy I ran <code>mvn dependency:purge-local-repository</code> and reloaded all maven projects, still not working for me."},{"score":0,"post_type":"question","creation_date":1699337986,"post_id":77431361,"comment_id":136515697,"body_markdown":"@khmarbaise  I am so sorry I cannot offer you the full pom file because it is a huge, complex, and my company&#39;s project. \nThis project does use springboot parent, but my point is when I use &#39;mvn dependency:tree&#39; to check the dependency tree, the `elasticsearch-rest-client` version is 7.10.0 which is correct, but IDEA shows the `elasticsearch-rest-client` version is controlled by springboot parent, which is 6.4.3, I want know the reason and how to fix it.","link":"https://stackoverflow.com/questions/77431361/idea-maven-project-resolve-wrong-dependency-version#comment136515697_77431361","body":"@khmarbaise  I am so sorry I cannot offer you the full pom file because it is a huge, complex, and my company&#39;s project.  This project does use springboot parent, but my point is when I use &#39;mvn dependency:tree&#39; to check the dependency tree, the <code>elasticsearch-rest-client</code> version is 7.10.0 which is correct, but IDEA shows the <code>elasticsearch-rest-client</code> version is controlled by springboot parent, which is 6.4.3, I want know the reason and how to fix it."},{"score":0,"post_type":"question","creation_date":1699353302,"post_id":77431361,"comment_id":136518106,"body_markdown":"@chenlanping this is due to Transitive Dependency.  run the `mvn dependency:tree`  and exclude elasticsearch-rest-client from the dependency `&lt;dependency&gt;\n\t&lt;groupId&gt;..&lt;/groupId&gt;\n\t&lt;artifactId&gt;..&lt;/artifactId&gt;\n\t&lt;version&gt;...&lt;/version&gt;\n\t&lt;exclusions&gt;\n\t\t&lt;exclusion&gt;\n\t\t\t&lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\n  \t\t\t&lt;artifactId&gt;elasticsearch-rest-client&lt;/artifactId&gt;\n\t\t&lt;/exclusion&gt;\n\t&lt;/exclusions&gt;\n&lt;/dependency&gt;`","link":"https://stackoverflow.com/questions/77431361/idea-maven-project-resolve-wrong-dependency-version#comment136518106_77431361","body":"@chenlanping this is due to Transitive Dependency.  run the <code>mvn dependency:tree</code>  and exclude elasticsearch-rest-client from the dependency <code>&lt;dependency&gt; \t&lt;groupId&gt;..&lt;&#47;groupId&gt; \t&lt;artifactId&gt;..&lt;&#47;artifactId&gt; \t&lt;version&gt;...&lt;&#47;version&gt; \t&lt;exclusions&gt; \t\t&lt;exclusion&gt; \t\t\t&lt;groupId&gt;org.elasticsearch.client&lt;&#47;groupId&gt;   \t\t\t&lt;artifactId&gt;elasticsearch-rest-client&lt;&#47;artifactId&gt; \t\t&lt;&#47;exclusion&gt; \t&lt;&#47;exclusions&gt; &lt;&#47;dependency&gt;</code>"},{"score":0,"post_type":"question","creation_date":1699440492,"post_id":77431361,"comment_id":136530805,"body_markdown":"Hard to tell without knowing your Project&#39;s exact structure. Where does &#39;spring-boot-dependencies&#39; come from - your root Project or Child? Is it added to dependencyManagement there? Also, when you run mvn dependency:tree, do you run it in the context  of your root Project or Child? You may want to take a look at IDEA&#39;s Dependency Analyzer - might give you more info on where this comes from.","link":"https://stackoverflow.com/questions/77431361/idea-maven-project-resolve-wrong-dependency-version#comment136530805_77431361","body":"Hard to tell without knowing your Project&#39;s exact structure. Where does &#39;spring-boot-dependencies&#39; come from - your root Project or Child? Is it added to dependencyManagement there? Also, when you run mvn dependency:tree, do you run it in the context  of your root Project or Child? You may want to take a look at IDEA&#39;s Dependency Analyzer - might give you more info on where this comes from."}],"comment_count":6,"is_answered":false,"view_count":42,"answer_count":0,"score":1,"last_activity_date":1702217428,"creation_date":1699276356,"last_edit_date":1702217428,"question_id":77431361,"body_markdown":"I have a springboot project and I use Maven as my build tool. I have a dependency in my root pom.xml file as below:\r\n```\r\n&lt;dependencyManagement&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\r\n        &lt;artifactId&gt;elasticsearch-rest-client&lt;/artifactId&gt;\r\n        &lt;version&gt;${elasticsearch.version}&lt;/version&gt;\r\n        &lt;!-- elasticsearch.version is 7.10.0 in my project --&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencyManagement&gt;\r\n```\r\nIn my child pom.xml file, I have the following dependency:\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\r\n  &lt;artifactId&gt;elasticsearch-rest-client&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nWhen I click Idea button to find the version of elasticsearch-rest-client,[![enter image description here][1]][1] it jumps to a file named &#39;spring-boot-dependencies-2.1.3.RELEASE.pom&#39;, and the version of this dependency is 6.4.3, which is not what I expected.\r\n\r\nThen I use the command `mvn dependency:tree -U` to find the dependency tree, and it shows the version of elasticsearch-rest-client is 7.10.0, which is correct. And also, there is no 2.1.3 springboot version in my project.\r\n\r\nI don&#39;t know why Idea resolves the wrong version of this dependency, and how to fix it.\r\n\r\n------ Following UPDATE DEC 10  ---------\r\n\r\nSince the above content is from my company&#39;s project, I have decided to use a simpler and easily reproducible example below to illustrate the issue.\r\nFirst, let&#39;s look at the content of the pom.xml file:\r\n```\r\n&lt;dependencyManagement&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;!-- Import dependency management from Spring Boot --&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.3&lt;/version&gt;\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n            &lt;scope&gt;import&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n            &lt;artifactId&gt;httpcore&lt;/artifactId&gt;\r\n            &lt;version&gt;4.4.13&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n&lt;/dependencyManagement&gt;\r\n```\r\n\r\nIn the pom.xml file of spring-boot-dependencies version 2.7.3, the version of httpcore is 4.4.15. However, in my project, I have imported httpcore version 4.4.13.\r\n\r\nNext, let&#39;s consider the content of a sub-module, which is very simple:\r\n```\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n        &lt;artifactId&gt;httpcore&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\nWhen I run &#39;mvn dependency:tree -Dverbose&#39;, the result shows version 4.4.13. But when I use IntelliJ IDEA, the result is different:\r\n[![IDEA RESULT][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XGkMo.png\r\n  [2]: https://i.stack.imgur.com/eHeSc.png","link":"https://stackoverflow.com/questions/77431361/idea-maven-project-resolve-wrong-dependency-version","title":"Idea maven project resolve wrong dependency version","body":"<p>I have a springboot project and I use Maven as my build tool. I have a dependency in my root pom.xml file as below:</p>\n<pre><code>&lt;dependencyManagement&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\n        &lt;artifactId&gt;elasticsearch-rest-client&lt;/artifactId&gt;\n        &lt;version&gt;${elasticsearch.version}&lt;/version&gt;\n        &lt;!-- elasticsearch.version is 7.10.0 in my project --&gt;\n    &lt;/dependency&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n<p>In my child pom.xml file, I have the following dependency:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;\n  &lt;artifactId&gt;elasticsearch-rest-client&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>When I click Idea button to find the version of elasticsearch-rest-client,<a href=\"https://i.stack.imgur.com/XGkMo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XGkMo.png\" alt=\"enter image description here\" /></a> it jumps to a file named 'spring-boot-dependencies-2.1.3.RELEASE.pom', and the version of this dependency is 6.4.3, which is not what I expected.</p>\n<p>Then I use the command <code>mvn dependency:tree -U</code> to find the dependency tree, and it shows the version of elasticsearch-rest-client is 7.10.0, which is correct. And also, there is no 2.1.3 springboot version in my project.</p>\n<p>I don't know why Idea resolves the wrong version of this dependency, and how to fix it.</p>\n<p>------ Following UPDATE DEC 10  ---------</p>\n<p>Since the above content is from my company's project, I have decided to use a simpler and easily reproducible example below to illustrate the issue.\nFirst, let's look at the content of the pom.xml file:</p>\n<pre><code>&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;!-- Import dependency management from Spring Boot --&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;2.7.3&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpcore&lt;/artifactId&gt;\n            &lt;version&gt;4.4.13&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n<p>In the pom.xml file of spring-boot-dependencies version 2.7.3, the version of httpcore is 4.4.15. However, in my project, I have imported httpcore version 4.4.13.</p>\n<p>Next, let's consider the content of a sub-module, which is very simple:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpcore&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>When I run 'mvn dependency:tree -Dverbose', the result shows version 4.4.13. But when I use IntelliJ IDEA, the result is different:\n<a href=\"https://i.stack.imgur.com/eHeSc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eHeSc.png\" alt=\"IDEA RESULT\" /></a></p>\n"},{"tags":["java","android","parse-platform"],"comments":[{"score":0,"post_type":"question","creation_date":1695290164,"post_id":77145579,"comment_id":136005895,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","link":"https://stackoverflow.com/questions/77145579/how-do-i-get-usernames-of-other-users-in-parse-in-android#comment136005895_77145579","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"score":0,"post_type":"question","creation_date":1695291752,"post_id":77145579,"comment_id":136006270,"body_markdown":"as i mentioned before ,i&#39;m trying to get users usernames and show them up in my listView as friendlist for my current user ,but i&#39;m just getting username of my current user instead of other users usernames , idk if the problem is about access to others users or is just about query here :\n&lt;query.whereNotEqualTo(&quot;username&quot;,ParseUser.getCurrentUser().getUsername());&gt;","link":"https://stackoverflow.com/questions/77145579/how-do-i-get-usernames-of-other-users-in-parse-in-android#comment136006270_77145579","body":"as i mentioned before ,i&#39;m trying to get users usernames and show them up in my listView as friendlist for my current user ,but i&#39;m just getting username of my current user instead of other users usernames , idk if the problem is about access to others users or is just about query here : &lt;query.whereNotEqualTo(&quot;username&quot;,ParseUser.getCurrentUser()&zwnj;&#8203;.getUsername());&gt;"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1695291111,"post_id":77146641,"comment_id":136006127,"body_markdown":"thank you for your answer ,i tried ur code below , and i did get &quot;Salim&quot; in my list view while my current user is &quot;James&quot;, so the other user username it doesnt show up ,but i&#39;ve made progress","link":"https://stackoverflow.com/questions/77145579/how-do-i-get-usernames-of-other-users-in-parse-in-android/77146641#comment136006127_77146641","body":"thank you for your answer ,i tried ur code below , and i did get &quot;Salim&quot; in my list view while my current user is &quot;James&quot;, so the other user username it doesnt show up ,but i&#39;ve made progress"}],"comment_count":1,"score":0,"last_activity_date":1695257954,"creation_date":1695257954,"answer_id":77146641,"question_id":77145579,"body_markdown":"The line query.whereNotEqualTo(&quot;username&quot;, ParseUser.getCurrentUser().getUsername()); is filtering out the current user from the query results, which is why you are only getting the current user&#39;s username in the list.\r\n\r\nIf you want to retrieve the usernames of all users except the current user, you should remove this line:\r\n\r\n    public class UsersListActivity extends AppCompatActivity {\r\n    \r\n        @SuppressLint(&quot;MissingInflatedId&quot;)\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_users_list);\r\n            ParseACL defaultACL = new ParseACL();\r\n            defaultACL.setPublicReadAccess(true);\r\n            ParseACL.setDefaultACL(defaultACL, true);\r\n    \r\n            final ListView listView = findViewById(R.id.usersListView);\r\n            final ArrayList&lt;String&gt; usernames = new ArrayList&lt;String&gt;();\r\n            final ArrayAdapter arrayAdapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, usernames);\r\n    \r\n            ParseQuery&lt;ParseUser&gt; query = ParseUser.getQuery();\r\n            query.addAscendingOrder(&quot;username&quot;);\r\n    \r\n            query.findInBackground(new FindCallback&lt;ParseUser&gt;() {\r\n                @Override\r\n                public void done(List&lt;ParseUser&gt; objects, ParseException e) {\r\n                    if (e == null) {\r\n                        if (objects.size() &gt; 0) {\r\n                            for (ParseUser user : objects) {\r\n                                // Exclude the current user&#39;s username\r\n                                if (!user.getUsername().equals(ParseUser.getCurrentUser().getUsername())) {\r\n                                    usernames.add(user.getUsername());\r\n                                }\r\n                            }\r\n                            listView.setAdapter(arrayAdapter);\r\n                        }\r\n                    } else {\r\n                        e.printStackTrace();\r\n                        Log.i(&quot;usernames&quot;, &quot;Error: &quot; + e.getMessage());\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\nThis modified code will populate the usernames list with usernames of all users except the current user and display them in the ListView. Make sure to remove the line that was excluding the current user&#39;s username from the query filter, as shown above.","link":"https://stackoverflow.com/questions/77145579/how-do-i-get-usernames-of-other-users-in-parse-in-android/77146641#77146641","title":"How do I get usernames of other users in Parse in Android?","body":"<p>The line query.whereNotEqualTo(&quot;username&quot;, ParseUser.getCurrentUser().getUsername()); is filtering out the current user from the query results, which is why you are only getting the current user's username in the list.</p>\n<p>If you want to retrieve the usernames of all users except the current user, you should remove this line:</p>\n<pre><code>public class UsersListActivity extends AppCompatActivity {\n\n    @SuppressLint(&quot;MissingInflatedId&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_users_list);\n        ParseACL defaultACL = new ParseACL();\n        defaultACL.setPublicReadAccess(true);\n        ParseACL.setDefaultACL(defaultACL, true);\n\n        final ListView listView = findViewById(R.id.usersListView);\n        final ArrayList&lt;String&gt; usernames = new ArrayList&lt;String&gt;();\n        final ArrayAdapter arrayAdapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, usernames);\n\n        ParseQuery&lt;ParseUser&gt; query = ParseUser.getQuery();\n        query.addAscendingOrder(&quot;username&quot;);\n\n        query.findInBackground(new FindCallback&lt;ParseUser&gt;() {\n            @Override\n            public void done(List&lt;ParseUser&gt; objects, ParseException e) {\n                if (e == null) {\n                    if (objects.size() &gt; 0) {\n                        for (ParseUser user : objects) {\n                            // Exclude the current user's username\n                            if (!user.getUsername().equals(ParseUser.getCurrentUser().getUsername())) {\n                                usernames.add(user.getUsername());\n                            }\n                        }\n                        listView.setAdapter(arrayAdapter);\n                    }\n                } else {\n                    e.printStackTrace();\n                    Log.i(&quot;usernames&quot;, &quot;Error: &quot; + e.getMessage());\n                }\n            }\n        });\n    }\n}\n</code></pre>\n<p>This modified code will populate the usernames list with usernames of all users except the current user and display them in the ListView. Make sure to remove the line that was excluding the current user's username from the query filter, as shown above.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1695607465,"post_id":77149730,"comment_id":136042414,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","link":"https://stackoverflow.com/questions/77145579/how-do-i-get-usernames-of-other-users-in-parse-in-android/77149730#comment136042414_77149730","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77149730/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"comment_count":1,"score":0,"last_activity_date":1695295021,"creation_date":1695295021,"answer_id":77149730,"question_id":77145579,"body_markdown":"**Solution**\r\ni found the soulution which is about the access to others users, i set the ACL manually to public to all the users :\r\n\r\n[image of Users ACL][1]\r\n\r\n  [1]: https://i.stack.imgur.com/8K1fs.png\r\n\r\n-and copy paste the update code of **@Sarah** ,and got my list view full of all the users usernames.\r\n\r\n\r\n-the probleme it was give the current user access to other users.\r\n\r\n\r\n&gt; i hope this help :)\r\n\r\n ","link":"https://stackoverflow.com/questions/77145579/how-do-i-get-usernames-of-other-users-in-parse-in-android/77149730#77149730","title":"How do I get usernames of other users in Parse in Android?","body":"<p><strong>Solution</strong>\ni found the soulution which is about the access to others users, i set the ACL manually to public to all the users :</p>\n<p><a href=\"https://i.stack.imgur.com/8K1fs.png\" rel=\"nofollow noreferrer\">image of Users ACL</a></p>\n<p>-and copy paste the update code of <strong>@Sarah</strong> ,and got my list view full of all the users usernames.</p>\n<p>-the probleme it was give the current user access to other users.</p>\n<blockquote>\n<p>i hope this help :)</p>\n</blockquote>\n"},{"comment_count":0,"score":0,"last_activity_date":1702198513,"last_edit_date":1702198513,"creation_date":1702197951,"answer_id":77634187,"question_id":77145579,"body_markdown":"You should be careful about your App security when dealing with user class data. \r\nIn fact, making the User class publicly accessible will expose your app to serious security threats.\r\n\r\nI recommend to follow one of the subsequent solutions:\r\n\r\n**- solution 1:** It is recommended to be sure that the requester user has the sufficient permissions to get the user List. For instance, he should belong to admin role. \r\n\r\n--step 1: You need to add the admin user to the &quot;admin&quot; role either by code or directly from the parse dashboard:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n--step 2: add the following function to your cloud code functions:\r\n\r\n    Parse.Cloud.define(&quot;ListUsers&quot;, function(request, response) {  \r\n      var adminRoleQuery = new Parse.Query(Parse.Role);\r\n      adminRoleQuery.equalTo(&#39;name&#39;, &#39;admin&#39;);\r\n      adminRoleQuery.equalTo(&#39;users&#39;, request.user);    \r\n        adminRoleQuery.first({ useMasterKey: true }).then(async function(adminRole) {\r\n          if (!adminRole) {\r\n            response.error(&#39; Users Could only be listed by an admin:&#39;);\r\n          }\r\n          else{\r\n              const User = Parse.Object.extend(&quot;User&quot;);\r\n              const query = new Parse.Query(User);\r\n              var usersList = await query.find({useMasterKey: true});\r\n    \r\n              if(usersList ==null)\r\n              {\r\n                response.error(&quot;There is an error when retrieving the user&quot;);\r\n              }\r\n              else\r\n              {\r\n                response.success(usersList);\r\n              }\r\n          }\r\n        });\t\t\r\n    });\r\n\r\n--step 3: From your Android App, call the cloud code function using the following code:\r\n\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    \r\n    HashMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n    //        params.put(&quot;userEmail&quot;, ParseUser.getCurrentUser().getEmail());\r\n    ParseCloud.callFunctionInBackground(&quot;ListUsers&quot;, params, new Function2&lt;List&lt;ParseUser&gt;, ParseException&gt;() {\r\n        @Override\r\n        public void done(List&lt;ParseUser&gt; usersList, ParseException e) {\r\n            if (e == null) {\r\n                Log.e(TAG, &quot;****Retrieved users: &quot; + usersList.size());\r\n                findViewById(R.id.tvInfo).setText(&quot;users:&quot; + usersList.size());\r\n                findViewById(R.id.tvInfo).setVisibility(View.VISIBLE);\r\n                for (ParseUser user : usersList) {\r\n                    Log.d(TAG, &quot;****Retrieved user &quot; +\r\n                            user.get(&quot;email&quot;).toString() + &quot; &quot;\r\n                    );\r\n                    Log.d(TAG, &quot;****Retrieved user &quot; +\r\n                            user.get(&quot;name&quot;).toString() + &quot; &quot; +\r\n                            user.get(&quot;department&quot;).toString() + &quot; &quot; +\r\n                            user.get(&quot;email&quot;).toString() + &quot; &quot; +\r\n                            user.get(&quot;phoneNumber&quot;).toString()\r\n                    );\r\n                }\r\n            } else {\r\n                Log.e(TAG, &quot;****Error occured when calling the cloud code function (ListUsers): &quot; + e.getMessage());\r\n                Toast.makeText(MainActivity.this, &quot;Error: &quot; + e.getMessage(), Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    });\r\n\r\n**- solution 2:** But, if the user List should be accessible by every one, at least, put the logic retrieving the user list in a cloud code function, so that, you have the ability to perform additional control on the data that will be publicly exposed. For instance, if you need to just expose the username and its email, just modify your cloud code function to:\r\n\r\n    Parse.Cloud.define(&quot;ListUsers&quot;, function(request, response) {\r\n      \r\n    \r\n      const User = Parse.Object.extend(&quot;User&quot;);\r\n              const query = new Parse.Query(User);\r\n              query.select(&quot;username&quot;, &quot;email&quot;);\r\n    \r\n              query.find({useMasterKey: true}).then(async function(usersList) {\r\n                if(usersList ==null)\r\n                {\r\n                  response.error(&quot;There is an error when retrieving the user list&quot;);\r\n                }\r\n                else\r\n                {\r\n                  response.success(usersList);\r\n                }\r\n              });\r\n    \r\n    });\r\n\r\nThis cloud code function could be called with the same Android code of the previous solution (step 3 of the first solution).\r\n\r\n  [1]: https://i.stack.imgur.com/6fc5v.png\r\n","link":"https://stackoverflow.com/questions/77145579/how-do-i-get-usernames-of-other-users-in-parse-in-android/77634187#77634187","title":"How do I get usernames of other users in Parse in Android?","body":"<p>You should be careful about your App security when dealing with user class data.\nIn fact, making the User class publicly accessible will expose your app to serious security threats.</p>\n<p>I recommend to follow one of the subsequent solutions:</p>\n<p><strong>- solution 1:</strong> It is recommended to be sure that the requester user has the sufficient permissions to get the user List. For instance, he should belong to admin role.</p>\n<p>--step 1: You need to add the admin user to the &quot;admin&quot; role either by code or directly from the parse dashboard:</p>\n<p><a href=\"https://i.stack.imgur.com/6fc5v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6fc5v.png\" alt=\"enter image description here\" /></a></p>\n<p>--step 2: add the following function to your cloud code functions:</p>\n<pre><code>Parse.Cloud.define(&quot;ListUsers&quot;, function(request, response) {  \n  var adminRoleQuery = new Parse.Query(Parse.Role);\n  adminRoleQuery.equalTo('name', 'admin');\n  adminRoleQuery.equalTo('users', request.user);    \n    adminRoleQuery.first({ useMasterKey: true }).then(async function(adminRole) {\n      if (!adminRole) {\n        response.error(' Users Could only be listed by an admin:');\n      }\n      else{\n          const User = Parse.Object.extend(&quot;User&quot;);\n          const query = new Parse.Query(User);\n          var usersList = await query.find({useMasterKey: true});\n\n          if(usersList ==null)\n          {\n            response.error(&quot;There is an error when retrieving the user&quot;);\n          }\n          else\n          {\n            response.success(usersList);\n          }\n      }\n    });     \n});\n</code></pre>\n<p>--step 3: From your Android App, call the cloud code function using the following code:</p>\n<pre><code>import java.util.HashMap;\nimport java.util.List;\n\nHashMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\n//        params.put(&quot;userEmail&quot;, ParseUser.getCurrentUser().getEmail());\nParseCloud.callFunctionInBackground(&quot;ListUsers&quot;, params, new Function2&lt;List&lt;ParseUser&gt;, ParseException&gt;() {\n    @Override\n    public void done(List&lt;ParseUser&gt; usersList, ParseException e) {\n        if (e == null) {\n            Log.e(TAG, &quot;****Retrieved users: &quot; + usersList.size());\n            findViewById(R.id.tvInfo).setText(&quot;users:&quot; + usersList.size());\n            findViewById(R.id.tvInfo).setVisibility(View.VISIBLE);\n            for (ParseUser user : usersList) {\n                Log.d(TAG, &quot;****Retrieved user &quot; +\n                        user.get(&quot;email&quot;).toString() + &quot; &quot;\n                );\n                Log.d(TAG, &quot;****Retrieved user &quot; +\n                        user.get(&quot;name&quot;).toString() + &quot; &quot; +\n                        user.get(&quot;department&quot;).toString() + &quot; &quot; +\n                        user.get(&quot;email&quot;).toString() + &quot; &quot; +\n                        user.get(&quot;phoneNumber&quot;).toString()\n                );\n            }\n        } else {\n            Log.e(TAG, &quot;****Error occured when calling the cloud code function (ListUsers): &quot; + e.getMessage());\n            Toast.makeText(MainActivity.this, &quot;Error: &quot; + e.getMessage(), Toast.LENGTH_LONG).show();\n        }\n    }\n});\n</code></pre>\n<p><strong>- solution 2:</strong> But, if the user List should be accessible by every one, at least, put the logic retrieving the user list in a cloud code function, so that, you have the ability to perform additional control on the data that will be publicly exposed. For instance, if you need to just expose the username and its email, just modify your cloud code function to:</p>\n<pre><code>Parse.Cloud.define(&quot;ListUsers&quot;, function(request, response) {\n  \n\n  const User = Parse.Object.extend(&quot;User&quot;);\n          const query = new Parse.Query(User);\n          query.select(&quot;username&quot;, &quot;email&quot;);\n\n          query.find({useMasterKey: true}).then(async function(usersList) {\n            if(usersList ==null)\n            {\n              response.error(&quot;There is an error when retrieving the user list&quot;);\n            }\n            else\n            {\n              response.success(usersList);\n            }\n          });\n\n});\n</code></pre>\n<p>This cloud code function could be called with the same Android code of the previous solution (step 3 of the first solution).</p>\n"}],"comment_count":2,"is_answered":false,"view_count":45,"answer_count":3,"score":0,"last_activity_date":1702198513,"creation_date":1695239746,"question_id":77145579,"body_markdown":"i&#39;m trying to get usernames of other users and i end up getting just username of current user .\r\n\r\n\r\n[,here&#39;s other users in my _User class](https://i.stack.imgur.com/nAtOo.png)\r\n\r\nhere&#39;s my code, \r\n```\r\npublic class UsersListActivity extends AppCompatActivity {\r\n\r\n    @SuppressLint(&quot;MissingInflatedId&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_users_list);\r\n        ParseACL defaultACL = new ParseACL();\r\n        defaultACL.setPublicReadAccess(true);\r\n        ParseACL.setDefaultACL(defaultACL, true);\r\n\r\n        final ListView listView = findViewById(R.id.usersListView);\r\n        final ArrayList&lt;String&gt; usernames = new ArrayList&lt;String&gt;();\r\n        final ArrayAdapter arrayAdapter = new ArrayAdapter(this,android.R.layout.simple_list_item_1, usernames);\r\n        ParseUser user= new ParseUser();\r\n        ParseQuery&lt;ParseUser&gt; query = ParseUser.getQuery();\r\n        query.whereNotEqualTo(&quot;username&quot;,ParseUser.getCurrentUser().getUsername());\r\n\r\n        Log.i(&quot;usernames&quot;,ParseUser.getCurrentUser().getUsername());\r\n        query.addAscendingOrder(&quot;username&quot;);\r\n        \r\n        query.findInBackground(new FindCallback&lt;ParseUser&gt;() {\r\n            @Override\r\n            public void done(List&lt;ParseUser&gt; objects, ParseException e) {\r\n           \r\n                if (e == null) {\r\n                    if (objects.size() &gt; 0) {\r\n                        for (ParseUser user : objects) {\r\n                           usernames.add(user.getUsername());\r\n                            Log.i(&quot;usernames&quot;,user.getUsername());\r\n                        }\r\n                        listView.setAdapter(arrayAdapter);\r\n                    }\r\n                } else {\r\n                    e.printStackTrace();\r\n                    Log.i(&quot;usernames&quot;,&quot;hi&quot;);an\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n```\r\nwhen i removed this line:  &quot;query.whereNotEqualTo(&quot;username&quot;,ParseUser.getCurrentUser().getUsername());&quot; ,i got the current user username .\r\nand i got no errors in logcat :(","link":"https://stackoverflow.com/questions/77145579/how-do-i-get-usernames-of-other-users-in-parse-in-android","title":"How do I get usernames of other users in Parse in Android?","body":"<p>i'm trying to get usernames of other users and i end up getting just username of current user .</p>\n<p><a href=\"https://i.stack.imgur.com/nAtOo.png\" rel=\"nofollow noreferrer\">,here's other users in my _User class</a></p>\n<p>here's my code,</p>\n<pre><code>public class UsersListActivity extends AppCompatActivity {\n\n    @SuppressLint(&quot;MissingInflatedId&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_users_list);\n        ParseACL defaultACL = new ParseACL();\n        defaultACL.setPublicReadAccess(true);\n        ParseACL.setDefaultACL(defaultACL, true);\n\n        final ListView listView = findViewById(R.id.usersListView);\n        final ArrayList&lt;String&gt; usernames = new ArrayList&lt;String&gt;();\n        final ArrayAdapter arrayAdapter = new ArrayAdapter(this,android.R.layout.simple_list_item_1, usernames);\n        ParseUser user= new ParseUser();\n        ParseQuery&lt;ParseUser&gt; query = ParseUser.getQuery();\n        query.whereNotEqualTo(&quot;username&quot;,ParseUser.getCurrentUser().getUsername());\n\n        Log.i(&quot;usernames&quot;,ParseUser.getCurrentUser().getUsername());\n        query.addAscendingOrder(&quot;username&quot;);\n        \n        query.findInBackground(new FindCallback&lt;ParseUser&gt;() {\n            @Override\n            public void done(List&lt;ParseUser&gt; objects, ParseException e) {\n           \n                if (e == null) {\n                    if (objects.size() &gt; 0) {\n                        for (ParseUser user : objects) {\n                           usernames.add(user.getUsername());\n                            Log.i(&quot;usernames&quot;,user.getUsername());\n                        }\n                        listView.setAdapter(arrayAdapter);\n                    }\n                } else {\n                    e.printStackTrace();\n                    Log.i(&quot;usernames&quot;,&quot;hi&quot;);an\n                }\n            }\n        });\n    }\n}\n\n</code></pre>\n<p>when i removed this line:  &quot;query.whereNotEqualTo(&quot;username&quot;,ParseUser.getCurrentUser().getUsername());&quot; ,i got the current user username .\nand i got no errors in logcat :(</p>\n"},{"tags":["java","mongodb","mongodb-query"],"comments":[{"score":0,"post_type":"question","creation_date":1700700926,"post_id":77532372,"comment_id":136688115,"body_markdown":"Sounds like you need causally consistent sessions: https://www.mongodb.com/docs/manual/core/read-isolation-consistency-recency/#client-sessions-and-causal-consistency-guarantees","link":"https://stackoverflow.com/questions/77532372/getting-delay-in-mongo-db-with-updateone#comment136688115_77532372","body":"Sounds like you need causally consistent sessions: <a href=\"https://www.mongodb.com/docs/manual/core/read-isolation-consistency-recency/#client-sessions-and-causal-consistency-guarantees\" rel=\"nofollow noreferrer\">mongodb.com/docs/manual/core/read-isolation-consistency-rece&zwnj;&#8203;ncy/&hellip;</a>"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702193999,"creation_date":1702193999,"answer_id":77634038,"question_id":77532372,"body_markdown":"Below factor&#39;s might you have to check:\r\n\r\n1. **Write Concern:**\r\n   Double-check that your write concern is set right. If you&#39;re using `WriteConcern.MAJORITY`, it ensures most replica set members acknowledge the write, but it doesn&#39;t promise immediate visibility for reads.\r\n\r\n   ```java\r\n   WriteConcern.MAJORITY\r\n   ```\r\n\r\n2. **Read Concern:**\r\n   Make sure your read concern is set to `majority` for consistent results reflecting the latest majority-committed write.\r\n\r\n   ```java\r\n   ReadConcern.MAJORITY\r\n   ```\r\n\r\n3. **Indexing:**\r\n   Check if your query/update fields are properly indexed for better read performance.\r\n\r\n4. **Check for Errors:**\r\n   After the `updateOne` operation, log the result and check for errors.\r\n\r\n   ```java\r\n   UpdateResult result = collection.updateOne(filter, update);\r\n   if (!result.wasAcknowledged()) {\r\n       // Handle error\r\n   }\r\n   ```\r\n\r\n5. **Connection Pooling:**\r\n   Confirm your MongoDB Java driver uses connection pooling for efficiency.\r\n\r\n6. **Replica Set Status:**\r\n   Verify the health of your MongoDB replica set. Ensure all nodes are okay, and there&#39;s no replication lag.\r\n","link":"https://stackoverflow.com/questions/77532372/getting-delay-in-mongo-db-with-updateone/77634038#77634038","title":"Getting delay in Mongo DB with updateOne","body":"<p>Below factor's might you have to check:</p>\n<ol>\n<li><p><strong>Write Concern:</strong>\nDouble-check that your write concern is set right. If you're using <code>WriteConcern.MAJORITY</code>, it ensures most replica set members acknowledge the write, but it doesn't promise immediate visibility for reads.</p>\n<pre class=\"lang-java prettyprint-override\"><code>WriteConcern.MAJORITY\n</code></pre>\n</li>\n<li><p><strong>Read Concern:</strong>\nMake sure your read concern is set to <code>majority</code> for consistent results reflecting the latest majority-committed write.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ReadConcern.MAJORITY\n</code></pre>\n</li>\n<li><p><strong>Indexing:</strong>\nCheck if your query/update fields are properly indexed for better read performance.</p>\n</li>\n<li><p><strong>Check for Errors:</strong>\nAfter the <code>updateOne</code> operation, log the result and check for errors.</p>\n<pre class=\"lang-java prettyprint-override\"><code>UpdateResult result = collection.updateOne(filter, update);\nif (!result.wasAcknowledged()) {\n    // Handle error\n}\n</code></pre>\n</li>\n<li><p><strong>Connection Pooling:</strong>\nConfirm your MongoDB Java driver uses connection pooling for efficiency.</p>\n</li>\n<li><p><strong>Replica Set Status:</strong>\nVerify the health of your MongoDB replica set. Ensure all nodes are okay, and there's no replication lag.</p>\n</li>\n</ol>\n"}],"comment_count":1,"is_answered":false,"view_count":55,"answer_count":1,"score":0,"last_activity_date":1702193999,"creation_date":1700677970,"question_id":77532372,"body_markdown":"I am updating few fields in a document with java and updates get complete with in 4ms.\r\nI am going to db to fetch same documentjust after the update completes. I am not getting updated documents. \r\nAny reason why I am not getting updated Document?\r\nFew things i tried are\r\n1. I tried updateOne Method it shows modified document 1 \r\n2. findOneAndUpdate method option of ReturnDocument.AFTER and it returns updated document.\r\nIssue is When after 2 ms my process goes to updated document then updated Document is not there.\r\n\r\nConfiguration are Read Concern as majority, Write concern as majority and read preference as Primary.","link":"https://stackoverflow.com/questions/77532372/getting-delay-in-mongo-db-with-updateone","title":"Getting delay in Mongo DB with updateOne","body":"<p>I am updating few fields in a document with java and updates get complete with in 4ms.\nI am going to db to fetch same documentjust after the update completes. I am not getting updated documents.\nAny reason why I am not getting updated Document?\nFew things i tried are</p>\n<ol>\n<li>I tried updateOne Method it shows modified document 1</li>\n<li>findOneAndUpdate method option of ReturnDocument.AFTER and it returns updated document.\nIssue is When after 2 ms my process goes to updated document then updated Document is not there.</li>\n</ol>\n<p>Configuration are Read Concern as majority, Write concern as majority and read preference as Primary.</p>\n"},{"tags":["java","linux","flutter","ubuntu"],"comments":[{"score":0,"post_type":"question","creation_date":1694143311,"post_id":76882205,"comment_id":135855530,"body_markdown":"Did you find a working solution for this problem? I am facing the same issue now.","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd#comment135855530_76882205","body":"Did you find a working solution for this problem? I am facing the same issue now."}],"answers":[{"comments":[{"score":1,"post_type":"answer","creation_date":1692107487,"post_id":76896961,"comment_id":135577628,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/76896961#comment135577628_76896961","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76896961/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"comment_count":1,"score":0,"last_activity_date":1691997322,"creation_date":1691997322,"answer_id":76896961,"question_id":76882205,"body_markdown":"I had the exact same problem but on Windows.\r\nI solved it by completely uninstalling JDK, which searching on internet turned out to be a possible problem, and installing the latest version (20).","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/76896961#76896961","title":"Error: LinkageError occurred while loading main class com.android.sdklib.tool.sdkmanager.SdkManagerCli","body":"<p>I had the exact same problem but on Windows.\nI solved it by completely uninstalling JDK, which searching on internet turned out to be a possible problem, and installing the latest version (20).</p>\n"},{"comment_count":0,"score":2,"last_activity_date":1692281522,"creation_date":1692281522,"answer_id":76922350,"question_id":76882205,"body_markdown":"I had the same problem and fix it by removing the version installed (openjdk-11-jre and openjdk-11-jdk) and installing the newest one (openjdk-19-jre and openjdk-19-jdk).","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/76922350#76922350","title":"Error: LinkageError occurred while loading main class com.android.sdklib.tool.sdkmanager.SdkManagerCli","body":"<p>I had the same problem and fix it by removing the version installed (openjdk-11-jre and openjdk-11-jdk) and installing the newest one (openjdk-19-jre and openjdk-19-jdk).</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1692554084,"post_id":76928561,"comment_id":135636067,"body_markdown":"Thank you so much for this answer! It worked perfectly and solved my issue. You&#39;re a lifesaver! What I was missing was to select the &#39;show package details&#39; otherwise the older version 8.0 was not visible.","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/76928561#comment135636067_76928561","body":"Thank you so much for this answer! It worked perfectly and solved my issue. You&#39;re a lifesaver! What I was missing was to select the &#39;show package details&#39; otherwise the older version 8.0 was not visible."},{"score":0,"post_type":"answer","creation_date":1692724267,"post_id":76928561,"comment_id":135662427,"body_markdown":"same trick worked on macOS too, with the difference that the cmd line tools directory will be probably at `~/Library/Android/sdk/cmdline-tools`","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/76928561#comment135662427_76928561","body":"same trick worked on macOS too, with the difference that the cmd line tools directory will be probably at <code>~&#47;Library&#47;Android&#47;sdk&#47;cmdline-tools</code>"},{"score":1,"post_type":"answer","creation_date":1693310947,"post_id":76928561,"comment_id":135741161,"body_markdown":"You&#39;re a lifesaver, worked with me on windows 11 with version 10.0, latest version at the time of my comment is 11.0","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/76928561#comment135741161_76928561","body":"You&#39;re a lifesaver, worked with me on windows 11 with version 10.0, latest version at the time of my comment is 11.0"},{"score":0,"post_type":"answer","creation_date":1694240614,"post_id":76928561,"comment_id":135868312,"body_markdown":"thank you very much it worked for me too","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/76928561#comment135868312_76928561","body":"thank you very much it worked for me too"},{"score":0,"post_type":"answer","creation_date":1694364463,"post_id":76928561,"comment_id":135878482,"body_markdown":"finally found that is working for me. Thanks. Now the last problem is: Unable to find bundled Java version","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/76928561#comment135878482_76928561","body":"finally found that is working for me. Thanks. Now the last problem is: Unable to find bundled Java version"},{"score":0,"post_type":"answer","creation_date":1695275254,"post_id":76928561,"comment_id":136003085,"body_markdown":"@AgungSudrajat do you have the correct version of Java? (I can&#39;t remember which one is needed). If so, make sure it&#39;s correctly added to your PATH and SYSTEM VARIABLES.","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/76928561#comment136003085_76928561","body":"@AgungSudrajat do you have the correct version of Java? (I can&#39;t remember which one is needed). If so, make sure it&#39;s correctly added to your PATH and SYSTEM VARIABLES."},{"score":0,"post_type":"answer","creation_date":1700409523,"post_id":76928561,"comment_id":136648174,"body_markdown":"Thank you, you are a rockstar. I did not even rename the `8.0` folder just deleted the `latest` folder, and it still worked.","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/76928561#comment136648174_76928561","body":"Thank you, you are a rockstar. I did not even rename the <code>8.0</code> folder just deleted the <code>latest</code> folder, and it still worked."},{"score":0,"post_type":"answer","creation_date":1701248942,"post_id":76928561,"comment_id":136750985,"body_markdown":"Thank you very much. It worked for me too.","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/76928561#comment136750985_76928561","body":"Thank you very much. It worked for me too."}],"comment_count":8,"score":35,"last_activity_date":1692355102,"creation_date":1692355102,"answer_id":76928561,"question_id":76882205,"body_markdown":"I was able to resolve this issue on Windows 10 with these steps\r\n\r\n[![Install Android SDK Command-line Tools 8.0][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mppWQ.jpg\r\n\r\n 1. Using the Android Studio SDK manager, install Android SDK Command-line Tools 8.0. You may need to toggle the checkboxes highlighted in green to see the older versions like 8.0.\r\n 2. Using windows explorer, navigate to the `Sdk/cmdline-tools` folder. On my system it&#39;s located at `C:\\Users\\&lt;USER_NAME&gt;\\AppData\\Local\\Android\\Sdk\\cmdline-tools`.\r\n 3. Rename the `8.0` folder to `latest`\r\n 4. Run `flutter doctor --android-licenses`.","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/76928561#76928561","title":"Error: LinkageError occurred while loading main class com.android.sdklib.tool.sdkmanager.SdkManagerCli","body":"<p>I was able to resolve this issue on Windows 10 with these steps</p>\n<p><a href=\"https://i.stack.imgur.com/mppWQ.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mppWQ.jpg\" alt=\"Install Android SDK Command-line Tools 8.0\" /></a></p>\n<ol>\n<li>Using the Android Studio SDK manager, install Android SDK Command-line Tools 8.0. You may need to toggle the checkboxes highlighted in green to see the older versions like 8.0.</li>\n<li>Using windows explorer, navigate to the <code>Sdk/cmdline-tools</code> folder. On my system it's located at <code>C:\\Users\\&lt;USER_NAME&gt;\\AppData\\Local\\Android\\Sdk\\cmdline-tools</code>.</li>\n<li>Rename the <code>8.0</code> folder to <code>latest</code></li>\n<li>Run <code>flutter doctor --android-licenses</code>.</li>\n</ol>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1697457618,"post_id":77046020,"comment_id":136278317,"body_markdown":"crazy, but it works","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/77046020#comment136278317_77046020","body":"crazy, but it works"},{"score":0,"post_type":"answer","creation_date":1698685013,"post_id":77046020,"comment_id":136433800,"body_markdown":"This worked for me!  Question: after running flutter doctor, do I restore the folder names?  Or just leave it (8.0 ==&gt; latest).","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/77046020#comment136433800_77046020","body":"This worked for me!  Question: after running flutter doctor, do I restore the folder names?  Or just leave it (8.0 ==&gt; latest)."},{"score":0,"post_type":"answer","creation_date":1702465004,"post_id":77046020,"comment_id":136899036,"body_markdown":"This saved us from our blockage for weeks.","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/77046020#comment136899036_77046020","body":"This saved us from our blockage for weeks."}],"comment_count":3,"score":8,"last_activity_date":1693992376,"last_edit_date":1693992376,"creation_date":1693929504,"answer_id":77046020,"question_id":76882205,"body_markdown":"Try this (for Mac)...\r\n\r\n- Check Android SDK command-line Tools (latest)\r\n- Check Android SDK command-line Tools 8.0\r\n- Click Apply\r\n- In Mac, go to `/Users/Library/Android/sdk/cmdline-tools` and rename the `8.0` folder to `latest`.\r\n- Run Flutter doctor again.","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/77046020#77046020","title":"Error: LinkageError occurred while loading main class com.android.sdklib.tool.sdkmanager.SdkManagerCli","body":"<p>Try this (for Mac)...</p>\n<ul>\n<li>Check Android SDK command-line Tools (latest)</li>\n<li>Check Android SDK command-line Tools 8.0</li>\n<li>Click Apply</li>\n<li>In Mac, go to <code>/Users/Library/Android/sdk/cmdline-tools</code> and rename the <code>8.0</code> folder to <code>latest</code>.</li>\n<li>Run Flutter doctor again.</li>\n</ul>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1697672043,"post_id":77292211,"comment_id":136310704,"body_markdown":"Thanks. This is working. I only do the first three step and no need to rename the 8.0 folder.","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/77292211#comment136310704_77292211","body":"Thanks. This is working. I only do the first three step and no need to rename the 8.0 folder."}],"comment_count":1,"score":2,"last_activity_date":1697274099,"creation_date":1697274099,"answer_id":77292211,"question_id":76882205,"body_markdown":"Try This (For Windows) ...\r\n\r\n - Uncheck Android SDK command-line Tools (latest)\r\n - Check Android SDK command-line Tools 8.0\r\n - Click Apply\r\n - In Windows, go to\r\n   C:\\Users\\USERNAME\\AppData\\Local\\Android\\Sdk\\cmdline-tools and\r\n   rename the 8.0 folder to latest\r\n\r\nRun Flutter doctor again.","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/77292211#77292211","title":"Error: LinkageError occurred while loading main class com.android.sdklib.tool.sdkmanager.SdkManagerCli","body":"<p>Try This (For Windows) ...</p>\n<ul>\n<li>Uncheck Android SDK command-line Tools (latest)</li>\n<li>Check Android SDK command-line Tools 8.0</li>\n<li>Click Apply</li>\n<li>In Windows, go to\nC:\\Users\\USERNAME\\AppData\\Local\\Android\\Sdk\\cmdline-tools and\nrename the 8.0 folder to latest</li>\n</ul>\n<p>Run Flutter doctor again.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1699660755,"creation_date":1699660755,"answer_id":77463393,"question_id":76882205,"body_markdown":"Apart from installing android sdk command line tool, I also have to upgrade my android studio to the latest to fix it.","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd/77463393#77463393","title":"Error: LinkageError occurred while loading main class com.android.sdklib.tool.sdkmanager.SdkManagerCli","body":"<p>Apart from installing android sdk command line tool, I also have to upgrade my android studio to the latest to fix it.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":21659,"answer_count":6,"score":17,"last_activity_date":1702190209,"creation_date":1691745580,"question_id":76882205,"body_markdown":"I am trying to set up flutter with VS Code in Ubuntu. I have followed the installation guide and have installed the latest cmdline tools as required by the flutter doctor.\r\n\r\nNow this is the output I get on running flutter doctor again\r\n\r\n``` [!] Android toolchain - develop for Android devices (Android SDK version 29.0.3)\r\n     Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https://flutter.dev/docs/get-started/install/linux#android-setup for more details. \r\n```\r\n\r\nOn running ```flutter doctor --android-licenses``` I get the following error\r\n\r\n```Error: LinkageError occurred while loading main class com.android.sdklib.tool.sdkmanager.SdkManagerCli\r\njava.lang.UnsupportedClassVersionError: \r\ncom/android/sdklib/tool/sdkmanager/SdkManagerCli has been compiled \r\nby a more recent version of the Java Runtime (class file version 61.0), \r\nthis version of the Java Runtime only recognizes class file versions up to 55.0\r\n```\r\n\r\n\r\n\r\nI tried upgrading to Java 17 using ```sudo apt install openjdk-17-jdk``` and set up the environment variables but the problem still persists.","link":"https://stackoverflow.com/questions/76882205/error-linkageerror-occurred-while-loading-main-class-com-android-sdklib-tool-sd","title":"Error: LinkageError occurred while loading main class com.android.sdklib.tool.sdkmanager.SdkManagerCli","body":"<p>I am trying to set up flutter with VS Code in Ubuntu. I have followed the installation guide and have installed the latest cmdline tools as required by the flutter doctor.</p>\n<p>Now this is the output I get on running flutter doctor again</p>\n<pre><code>     Android license status unknown.\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\n      See https://flutter.dev/docs/get-started/install/linux#android-setup for more details. \n</code></pre>\n<p>On running <code>flutter doctor --android-licenses</code> I get the following error</p>\n<pre><code>java.lang.UnsupportedClassVersionError: \ncom/android/sdklib/tool/sdkmanager/SdkManagerCli has been compiled \nby a more recent version of the Java Runtime (class file version 61.0), \nthis version of the Java Runtime only recognizes class file versions up to 55.0\n</code></pre>\n<p>I tried upgrading to Java 17 using <code>sudo apt install openjdk-17-jdk</code> and set up the environment variables but the problem still persists.</p>\n"},{"tags":["java","exception","arraylist"],"comments":[{"score":3,"post_type":"question","creation_date":1701287620,"post_id":77574127,"comment_id":136758412,"body_markdown":"Do you *have* to extend `RuntimeException`?","link":"https://stackoverflow.com/questions/77574127/java-exception-without-interrupting-program#comment136758412_77574127","body":"Do you <i>have</i> to extend <code>RuntimeException</code>?"},{"score":4,"post_type":"question","creation_date":1701287925,"post_id":77574127,"comment_id":136758471,"body_markdown":"And also see [this post](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java/513839#513839) to learn how to compare strings in Java.","link":"https://stackoverflow.com/questions/77574127/java-exception-without-interrupting-program#comment136758471_77574127","body":"And also see <a href=\"https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java/513839#513839\">this post</a> to learn how to compare strings in Java."},{"score":1,"post_type":"question","creation_date":1701288026,"post_id":77574127,"comment_id":136758492,"body_markdown":"Though your  exception could benefit from more information, like the `customerID` that wasn&#39;t found. Also see [How Do I compare Strings in Java?](https://stackoverflow.com/questions/513832/). @stdunbar I&#39;d say this is a runtime exception (similar to `NoSuchElementEx`). I personally would not expect clients to not have names as typical behavior, nor is it out of the developer&#39;s control.","link":"https://stackoverflow.com/questions/77574127/java-exception-without-interrupting-program#comment136758492_77574127","body":"Though your  exception could benefit from more information, like the <code>customerID</code> that wasn&#39;t found. Also see <a href=\"https://stackoverflow.com/questions/513832/\">How Do I compare Strings in Java?</a>. @stdunbar I&#39;d say this is a runtime exception (similar to <code>NoSuchElementEx</code>). I personally would not expect clients to not have names as typical behavior, nor is it out of the developer&#39;s control."},{"score":3,"post_type":"question","creation_date":1701288360,"post_id":77574127,"comment_id":136758534,"body_markdown":"Looks like you could use a tutorial about exceptions.  Here is the beginning of Oracle&#39;s tutorial about that: https://docs.oracle.com/javase/tutorial/essential/exceptions/index.html . Or you can Google for others: https://www.google.com/search?q=java+exception+throw+try+catch&amp;oq=java+exception+throw+try+catch","link":"https://stackoverflow.com/questions/77574127/java-exception-without-interrupting-program#comment136758534_77574127","body":"Looks like you could use a tutorial about exceptions.  Here is the beginning of Oracle&#39;s tutorial about that: <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/index.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/exceptions/index.h&zwnj;&#8203;tml</a> . Or you can Google for others: <a href=\"https://www.google.com/search?q=java+exception+throw+try+catch&amp;oq=java+exception+throw+try+catch\" rel=\"nofollow noreferrer\">google.com/&hellip;</a>"},{"score":0,"post_type":"question","creation_date":1701288588,"post_id":77574127,"comment_id":136758581,"body_markdown":"did you try to catch the exception?","link":"https://stackoverflow.com/questions/77574127/java-exception-without-interrupting-program#comment136758581_77574127","body":"did you try to catch the exception?"},{"score":0,"post_type":"question","creation_date":1701288658,"post_id":77574127,"comment_id":136758593,"body_markdown":"off-topic: If you don&#39;t think you are ready to deal with exceptions, consider some alternatives:  Consider a method that searches `MyClient` for a matching `customerID`.  If a match is found, it returns an `int` index value in `MyClient`. If a match is not found, it returns `-1`. Other alternatives: Return `null` or an empty String (i.e., &quot;&quot;) if a match is not found.","link":"https://stackoverflow.com/questions/77574127/java-exception-without-interrupting-program#comment136758593_77574127","body":"off-topic: If you don&#39;t think you are ready to deal with exceptions, consider some alternatives:  Consider a method that searches <code>MyClient</code> for a matching <code>customerID</code>.  If a match is found, it returns an <code>int</code> index value in <code>MyClient</code>. If a match is not found, it returns <code>-1</code>. Other alternatives: Return <code>null</code> or an empty String (i.e., &quot;&quot;) if a match is not found."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1702167756,"post_id":77574200,"comment_id":136864059,"body_markdown":"For future readers: I think the `%n` in the `printf` here should be a `\\n`, as it looks like a control character was the intention, not an interpolated value.","link":"https://stackoverflow.com/questions/77574127/java-exception-without-interrupting-program/77574200#comment136864059_77574200","body":"For future readers: I think the <code>%n</code> in the <code>printf</code> here should be a <code>\\n</code>, as it looks like a control character was the intention, not an interpolated value."},{"score":1,"post_type":"answer","creation_date":1702223349,"post_id":77574200,"comment_id":136867562,"body_markdown":"@halfer in Java `%n` [is the platform-specific line separator](https://docs.oracle.com/javase/8/docs/api/java/util/Formatter.html#syntax). The oracle docs specifically encourage using it over `\\n` because of its portability across platforms[\\[y\\]ou should always use %n, rather than \\n.](https://docs.oracle.com/javase/tutorial/java/data/numberformat.html)","link":"https://stackoverflow.com/questions/77574127/java-exception-without-interrupting-program/77574200#comment136867562_77574200","body":"@halfer in Java <code>%n</code> <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Formatter.html#syntax\" rel=\"nofollow noreferrer\">is the platform-specific line separator</a>. The oracle docs specifically encourage using it over <code>\\n</code> because of its portability across platforms<a href=\"https://docs.oracle.com/javase/tutorial/java/data/numberformat.html\" rel=\"nofollow noreferrer\">&#91;y&#93;ou should always use %n, rather than \\n.</a>"}],"comment_count":2,"score":0,"last_activity_date":1702167321,"last_edit_date":1702167321,"creation_date":1701288428,"answer_id":77574200,"question_id":77574127,"body_markdown":"&gt; I just need to display the message without stopping the program.\r\n\r\nYou could utilize the _[standard-error](https://en.wikipedia.org/wiki/Standard_streams)_ stream.\r\n\r\n```java\r\nString getClientName(String customerID) {\r\n    for (Client c : myClient)\r\n        if (c.cID.equals(customerID)) return c.getFullName();\r\n    System.err.printf(&quot;&#39;%s&#39; not found%n&quot;, customerID);\r\n    return null;\r\n}\r\n```","link":"https://stackoverflow.com/questions/77574127/java-exception-without-interrupting-program/77574200#77574200","title":"Java - Exception without interrupting program","body":"<blockquote>\n<p>I just need to display the message without stopping the program.</p>\n</blockquote>\n<p>You could utilize the <em><a href=\"https://en.wikipedia.org/wiki/Standard_streams\" rel=\"nofollow noreferrer\">standard-error</a></em> stream.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String getClientName(String customerID) {\n    for (Client c : myClient)\n        if (c.cID.equals(customerID)) return c.getFullName();\n    System.err.printf(&quot;'%s' not found%n&quot;, customerID);\n    return null;\n}\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1701289627,"last_edit_date":1701289627,"creation_date":1701289299,"answer_id":77574275,"question_id":77574127,"body_markdown":"Overall, I think the purpose of your method is somewhat pointless. That&#39;s because getting a client&#39;s name is already served by a different class&#39;s method: `Client#getFullName`. You can definitely have a method which returns the `Client` though:\r\n\r\n    public Client getClientName(String customerID) {\r\n        for (Client myCustomer : myClient) {\r\n            if (myClient.clientID.equals(customerID)) {\r\n                return myCustomer;\r\n            }\r\n        }\r\n        throw new ClientNotFoundException(customerID);\r\n    }\r\n\r\nNote the lack of any introduced variables, `break;`, or `null` values. You will either retrieve a `Client` (presuming the ID is valid), or you will get an exception if the loop couldn&#39;t find one. I made one final improvement for the sake of debugging: note the `customerID` that is passed to the exception now:\r\n\r\n    public class ClientNotFoundException extends RuntimeException {\r\n    \r\n        public ClientNotFoundException(String customerID) {\r\n            super(&quot;Client not found for ID: &quot; + customerID);\r\n        }\r\n    }\r\n\r\nFinally, you can rest easy knowing there aren&#39;t clients without names (unless `Client` itself allows such shenanigans):\r\n\r\n    String id = /* some client ID */;\r\n    String name = getClient(id).getFullName(); //no null returns!\r\n\r\nGiven the nature of your lookup (`O(n)`), you may benefit further from using a `Map&lt;String, Client&gt;` to quickly find the clients (treated as out-of-scope for this answer), or from keeping the `Client` in a variable between multiple invocations:\r\n\r\n    //PROBLEM: We do the lookup in #getClient every time!\r\n    String name = getClient(id).getFullName();\r\n    name = getClient(id).getFullName();\r\n    //SOLUTION: Only perform a lookup once, if you can help it.\r\n    Client c = getClient(id);\r\n    String name = c.getFullName();\r\n    name = c.getFullName();","link":"https://stackoverflow.com/questions/77574127/java-exception-without-interrupting-program/77574275#77574275","title":"Java - Exception without interrupting program","body":"<p>Overall, I think the purpose of your method is somewhat pointless. That's because getting a client's name is already served by a different class's method: <code>Client#getFullName</code>. You can definitely have a method which returns the <code>Client</code> though:</p>\n<pre><code>public Client getClientName(String customerID) {\n    for (Client myCustomer : myClient) {\n        if (myClient.clientID.equals(customerID)) {\n            return myCustomer;\n        }\n    }\n    throw new ClientNotFoundException(customerID);\n}\n</code></pre>\n<p>Note the lack of any introduced variables, <code>break;</code>, or <code>null</code> values. You will either retrieve a <code>Client</code> (presuming the ID is valid), or you will get an exception if the loop couldn't find one. I made one final improvement for the sake of debugging: note the <code>customerID</code> that is passed to the exception now:</p>\n<pre><code>public class ClientNotFoundException extends RuntimeException {\n\n    public ClientNotFoundException(String customerID) {\n        super(&quot;Client not found for ID: &quot; + customerID);\n    }\n}\n</code></pre>\n<p>Finally, you can rest easy knowing there aren't clients without names (unless <code>Client</code> itself allows such shenanigans):</p>\n<pre><code>String id = /* some client ID */;\nString name = getClient(id).getFullName(); //no null returns!\n</code></pre>\n<p>Given the nature of your lookup (<code>O(n)</code>), you may benefit further from using a <code>Map&lt;String, Client&gt;</code> to quickly find the clients (treated as out-of-scope for this answer), or from keeping the <code>Client</code> in a variable between multiple invocations:</p>\n<pre><code>//PROBLEM: We do the lookup in #getClient every time!\nString name = getClient(id).getFullName();\nname = getClient(id).getFullName();\n//SOLUTION: Only perform a lookup once, if you can help it.\nClient c = getClient(id);\nString name = c.getFullName();\nname = c.getFullName();\n</code></pre>\n"}],"comment_count":6,"is_answered":false,"view_count":107,"answer_count":2,"score":-1,"last_activity_date":1702167321,"creation_date":1701287529,"last_edit_date":1701288793,"question_id":77574127,"body_markdown":"For example i have list, class and methods:\r\n```\r\nList&lt;Client&gt; myClient = new ArrayList&lt;&gt;();\r\n```\r\n\r\n```\r\npublic class ClientNotFoundException extends RuntimeException {\r\n\r\n    public ClientNotFoundException() {\r\n        super(&quot;Client not found!&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class Client {\r\n    String firstName;\r\n    String lastName;\r\n    String cID;\r\n    boolean subscription = false;\r\n\r\n    public String getFullName(){\r\n        return this.firstName + &quot; &quot; + this.lastName;\r\n    }\r\n}\r\n```\r\n\r\nMy method:\r\n```\r\npublic String getClientName(String customerID){\r\n    String nameCustomer = null;\r\n\r\n    for( Client myCustomer: myClient ){\r\n        if( myClient.clientID.equals(customerID) ){\r\n            nameCustomer = myCustomer.getFullName();\r\n            break;\r\n        }\r\n    }\r\n\r\n    return nameCustomer;\r\n}\r\n```\r\n\r\nHow can I cause an exception when client is not found. I just need to display the message without stopping the program. Is this even possible?","link":"https://stackoverflow.com/questions/77574127/java-exception-without-interrupting-program","title":"Java - Exception without interrupting program","body":"<p>For example i have list, class and methods:</p>\n<pre><code>List&lt;Client&gt; myClient = new ArrayList&lt;&gt;();\n</code></pre>\n<pre><code>public class ClientNotFoundException extends RuntimeException {\n\n    public ClientNotFoundException() {\n        super(&quot;Client not found!&quot;);\n    }\n}\n</code></pre>\n<pre><code>public class Client {\n    String firstName;\n    String lastName;\n    String cID;\n    boolean subscription = false;\n\n    public String getFullName(){\n        return this.firstName + &quot; &quot; + this.lastName;\n    }\n}\n</code></pre>\n<p>My method:</p>\n<pre><code>public String getClientName(String customerID){\n    String nameCustomer = null;\n\n    for( Client myCustomer: myClient ){\n        if( myClient.clientID.equals(customerID) ){\n            nameCustomer = myCustomer.getFullName();\n            break;\n        }\n    }\n\n    return nameCustomer;\n}\n</code></pre>\n<p>How can I cause an exception when client is not found. I just need to display the message without stopping the program. Is this even possible?</p>\n"},{"tags":["java","arrays","file"],"comments":[{"score":0,"post_type":"question","creation_date":1696662998,"post_id":76199973,"comment_id":136184816,"body_markdown":"This looks like a job for XSLT.","link":"https://stackoverflow.com/questions/76199973/how-to-replace-a-file-text-with-another-file-text-in-java#comment136184816_76199973","body":"This looks like a job for XSLT."},{"score":0,"post_type":"question","creation_date":1702169103,"post_id":76199973,"comment_id":136864145,"body_markdown":"You can&#39;t read from and write to the same file at the same time. Write to a temporary file, then delete the original and rename.","link":"https://stackoverflow.com/questions/76199973/how-to-replace-a-file-text-with-another-file-text-in-java#comment136864145_76199973","body":"You can&#39;t read from and write to the same file at the same time. Write to a temporary file, then delete the original and rename."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1683546340,"post_id":76200114,"comment_id":134378332,"body_markdown":"It work for regular expression","link":"https://stackoverflow.com/questions/76199973/how-to-replace-a-file-text-with-another-file-text-in-java/76200114#comment134378332_76200114","body":"It work for regular expression"},{"score":0,"post_type":"answer","creation_date":1684914529,"post_id":76200114,"comment_id":134585332,"body_markdown":"@AliMurtza No it doesn&#39;t. Your RE must have matched as a raw string.","link":"https://stackoverflow.com/questions/76199973/how-to-replace-a-file-text-with-another-file-text-in-java/76200114#comment134585332_76200114","body":"@AliMurtza No it doesn&#39;t. Your RE must have matched as a raw string."}],"comment_count":2,"score":0,"last_activity_date":1683544925,"creation_date":1683544925,"answer_id":76200114,"question_id":76199973,"body_markdown":"Your searchList contains regular expressions; `indexOf` does a raw search, it does not interpret its argument as a regular expression. You presumably want something like:\r\n\r\n```\r\nPattern p = Pattern.compile(searchList.get(i));\r\nMatcher m = p.matcher(line);\r\n... and so on ...\r\n```","link":"https://stackoverflow.com/questions/76199973/how-to-replace-a-file-text-with-another-file-text-in-java/76200114#76200114","title":"How to Replace a File text with another file text in java","body":"<p>Your searchList contains regular expressions; <code>indexOf</code> does a raw search, it does not interpret its argument as a regular expression. You presumably want something like:</p>\n<pre><code>Pattern p = Pattern.compile(searchList.get(i));\nMatcher m = p.matcher(line);\n... and so on ...\n</code></pre>\n"},{"comment_count":0,"score":-1,"last_activity_date":1702167153,"last_edit_date":1702167153,"creation_date":1684393816,"answer_id":76278521,"question_id":76199973,"body_markdown":"First, you&#39;re attempting to open a `FileWriter` on `inputFile`, when you currently have a `FileReader` object open.\r\n\r\nAround lines 30 and 31.\r\n\r\n```java\r\ntry (BufferedReader br = new BufferedReader(new FileReader(inputFile));\r\n    FileWriter fw = new FileWriter(inputFile))\r\n```\r\n\r\nI believe you want to change the `FileWriter` argument to `outputFile`.\r\n\r\nSecondly, the parameters are not defined, in terms of when and where to place a `PMt` element within the `File1.txt` text.\\\r\nFor example.\r\n\r\n```xml\r\n&lt;Test&gt;\r\n&lt;Test&gt;56596&lt;/Test&gt;\r\n&lt;PMt&gt;1&lt;/PMt&gt;\r\n&lt;/H&gt;\r\n&lt;Test&gt;5659556&lt;/Test&gt; &lt;-- does not have a PMt element\r\n&lt;H&gt;\r\n&lt;Test&gt;56556&lt;/Test&gt;\r\n&lt;PMt&gt;2&lt;/PMt&gt;\r\n&lt;/H&gt;\r\n&lt;Test&gt;5659556&lt;/Test&gt; &lt;-- does have a PMt element\r\n&lt;PMt&gt;3&lt;/PMt&gt;\r\n&lt;/Test&gt;\r\n```","link":"https://stackoverflow.com/questions/76199973/how-to-replace-a-file-text-with-another-file-text-in-java/76278521#76278521","title":"How to Replace a File text with another file text in java","body":"<p>First, you're attempting to open a <code>FileWriter</code> on <code>inputFile</code>, when you currently have a <code>FileReader</code> object open.</p>\n<p>Around lines 30 and 31.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (BufferedReader br = new BufferedReader(new FileReader(inputFile));\n    FileWriter fw = new FileWriter(inputFile))\n</code></pre>\n<p>I believe you want to change the <code>FileWriter</code> argument to <code>outputFile</code>.</p>\n<p>Secondly, the parameters are not defined, in terms of when and where to place a <code>PMt</code> element within the <code>File1.txt</code> text.<br />\nFor example.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Test&gt;\n&lt;Test&gt;56596&lt;/Test&gt;\n&lt;PMt&gt;1&lt;/PMt&gt;\n&lt;/H&gt;\n&lt;Test&gt;5659556&lt;/Test&gt; &lt;-- does not have a PMt element\n&lt;H&gt;\n&lt;Test&gt;56556&lt;/Test&gt;\n&lt;PMt&gt;2&lt;/PMt&gt;\n&lt;/H&gt;\n&lt;Test&gt;5659556&lt;/Test&gt; &lt;-- does have a PMt element\n&lt;PMt&gt;3&lt;/PMt&gt;\n&lt;/Test&gt;\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1696661335,"creation_date":1696661335,"answer_id":77248699,"question_id":76199973,"body_markdown":"The algorithm seems to be fairly straightforward. Apart from the two input files, you need to create an output file. You read file _File1.txt_, line by line. If the line matches a line that you want to change, e.g.\r\n```none\r\n&lt;PMt&gt;851&lt;/PMt&gt;\r\n```\r\nthen you read a line from _File2.txt_ and write it to the output file. In every other case, you write the line that you just read from _File1_ to the output file.\r\n\r\nNote that the below code is not generic, it handles exactly the sample input and expected output as posted in your question. Hence the [regular expression][1] checks for a line that starts with `&lt;PMt&gt;` and ends with `&lt;/PMt&gt;` and in between contains only digits and at least one digit. The code also uses [NIO.2][2]\r\n```java\r\nimport java.io.BufferedReader;\r\nimport java.io.BufferedWriter;\r\nimport java.io.IOException;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport java.nio.file.StandardOpenOption;\r\n\r\npublic class RplceTxt {\r\n\r\n    public static void main(String[] args) {\r\n        Path path1 = Paths.get(&quot;file1.txt&quot;);\r\n        Path path2 = Paths.get(&quot;file2.txt&quot;);\r\n        Path outpath = Paths.get(&quot;result.txt&quot;);\r\n        try (BufferedReader reader1 = Files.newBufferedReader(path1);\r\n             BufferedReader reader2 = Files.newBufferedReader(path2);\r\n             BufferedWriter writer = Files.newBufferedWriter(outpath,\r\n                                                             StandardOpenOption.CREATE,\r\n                                                             StandardOpenOption.WRITE)) {\r\n            String line1 = reader1.readLine();\r\n            String line2 = reader2.readLine();\r\n            while (line1 != null) {\r\n                if (line1.matches(&quot;^&lt;PMt&gt;\\\\d+&lt;/PMt&gt;$&quot;)) {\r\n                    if (line2 != null) {\r\n                        writer.write(line2);\r\n                        line2 = reader2.readLine();\r\n                    }\r\n                    else {\r\n                        writer.write(line1);\r\n                    }\r\n                }\r\n                else {\r\n                    writer.write(line1);\r\n                }\r\n                writer.write(System.lineSeparator());\r\n                line1 = reader1.readLine();\r\n            }\r\n        }\r\n        catch (IOException xIo) {\r\n            xIo.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nThe contents of the output file (i.e. _result.txt_):\r\n```none\r\n&lt;Test&gt;\r\n&lt;Test&gt;56596&lt;/Test&gt;\r\n&lt;PMt&gt;1&lt;/PMt&gt;\r\n&lt;/H&gt;\r\n&lt;Test&gt;5659556&lt;/Test&gt;\r\n&lt;H&gt;\r\n&lt;Test&gt;56556&lt;/Test&gt;\r\n&lt;PMt&gt;2&lt;/PMt&gt;\r\n&lt;/H&gt;\r\n&lt;Test&gt;5659556&lt;/Test&gt;\r\n&lt;/Test&gt;\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/regex/\r\n  [2]: https://docs.oracle.com/javase/tutorial/essential/io/fileio.html","link":"https://stackoverflow.com/questions/76199973/how-to-replace-a-file-text-with-another-file-text-in-java/77248699#77248699","title":"How to Replace a File text with another file text in java","body":"<p>The algorithm seems to be fairly straightforward. Apart from the two input files, you need to create an output file. You read file <em>File1.txt</em>, line by line. If the line matches a line that you want to change, e.g.</p>\n<pre class=\"lang-none prettyprint-override\"><code>&lt;PMt&gt;851&lt;/PMt&gt;\n</code></pre>\n<p>then you read a line from <em>File2.txt</em> and write it to the output file. In every other case, you write the line that you just read from <em>File1</em> to the output file.</p>\n<p>Note that the below code is not generic, it handles exactly the sample input and expected output as posted in your question. Hence the <a href=\"https://docs.oracle.com/javase/tutorial/essential/regex/\" rel=\"nofollow noreferrer\">regular expression</a> checks for a line that starts with <code>&lt;PMt&gt;</code> and ends with <code>&lt;/PMt&gt;</code> and in between contains only digits and at least one digit. The code also uses <a href=\"https://docs.oracle.com/javase/tutorial/essential/io/fileio.html\" rel=\"nofollow noreferrer\">NIO.2</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.nio.file.StandardOpenOption;\n\npublic class RplceTxt {\n\n    public static void main(String[] args) {\n        Path path1 = Paths.get(&quot;file1.txt&quot;);\n        Path path2 = Paths.get(&quot;file2.txt&quot;);\n        Path outpath = Paths.get(&quot;result.txt&quot;);\n        try (BufferedReader reader1 = Files.newBufferedReader(path1);\n             BufferedReader reader2 = Files.newBufferedReader(path2);\n             BufferedWriter writer = Files.newBufferedWriter(outpath,\n                                                             StandardOpenOption.CREATE,\n                                                             StandardOpenOption.WRITE)) {\n            String line1 = reader1.readLine();\n            String line2 = reader2.readLine();\n            while (line1 != null) {\n                if (line1.matches(&quot;^&lt;PMt&gt;\\\\d+&lt;/PMt&gt;$&quot;)) {\n                    if (line2 != null) {\n                        writer.write(line2);\n                        line2 = reader2.readLine();\n                    }\n                    else {\n                        writer.write(line1);\n                    }\n                }\n                else {\n                    writer.write(line1);\n                }\n                writer.write(System.lineSeparator());\n                line1 = reader1.readLine();\n            }\n        }\n        catch (IOException xIo) {\n            xIo.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>The contents of the output file (i.e. <em>result.txt</em>):</p>\n<pre class=\"lang-none prettyprint-override\"><code>&lt;Test&gt;\n&lt;Test&gt;56596&lt;/Test&gt;\n&lt;PMt&gt;1&lt;/PMt&gt;\n&lt;/H&gt;\n&lt;Test&gt;5659556&lt;/Test&gt;\n&lt;H&gt;\n&lt;Test&gt;56556&lt;/Test&gt;\n&lt;PMt&gt;2&lt;/PMt&gt;\n&lt;/H&gt;\n&lt;Test&gt;5659556&lt;/Test&gt;\n&lt;/Test&gt;\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1698720297,"last_edit_date":1698720297,"creation_date":1698719947,"answer_id":77392889,"question_id":76199973,"body_markdown":"First of all you should create a logic with replace a string in the file. You can do it lazy by reading line by line from the source file and in case line was updated, read next line from the pattern file.\r\n\r\nI think it&#39;s better to encapsulate replace logic for an individual string with separate class, because replacement can be not a trivial task.\r\n\r\n```java\r\n@RequiredArgsConstructor(access = AccessLevel.PRIVATE)\r\npublic final class PatternData {\r\n\r\n    private static final PatternData NULL = new PatternData(null, null, null);\r\n\r\n    private final String prefix;\r\n    private final String suffix;\r\n    private final String value;\r\n\r\n    public static PatternData create(String str) {\r\n        if (str == null)\r\n            return NULL;\r\n\r\n        int lo = str.indexOf(&#39;&gt;&#39;) + 1;\r\n        int hi = str.indexOf(&#39;&lt;&#39;, lo + 1);\r\n\r\n        return new PatternData(str.substring(0, lo),\r\n                               str.substring(hi),\r\n                               str.substring(lo, hi));\r\n    }\r\n\r\n    public Optional&lt;String&gt; replace(String str) {\r\n        int lo = this == NULL ? -1 : str.indexOf(prefix);\r\n        int hi = lo &gt; -1 ? str.indexOf(suffix, lo + 1) : -1;\r\n\r\n        return hi == -1 ? Optional.empty()\r\n                        : Optional.of(str.substring(0, lo + prefix.length())\r\n                                    + value + str.substring(hi));\r\n    }\r\n\r\n}\r\n```\r\n\r\nThen you&#39;re ready to build a replacement logic of the file.\r\n```java\r\npublic static void replacePattern(Path srcFile, Path patternFile, Path dstFile)\r\n                         throws IOException {\r\n    try (BufferedReader in = Files.newBufferedReader(srcFile);\r\n         BufferedReader patternIn = Files.newBufferedReader(patternFile);\r\n         BufferedWriter out = Files.newBufferedWriter(dstFile,\r\n                                                 StandardOpenOption.CREATE,\r\n                                                 StandardOpenOption.WRITE)) {\r\n\r\n        String str;\r\n        PatternData patternData = PatternData.create(patternIn.readLine());\r\n\r\n        while ((str = in.readLine()) != null) {\r\n            Optional&lt;String&gt; res = patternData.replace(str);\r\n\r\n            if (res.isPresent()) {\r\n                str = res.get();\r\n                patternData = PatternData.create(patternIn.readLine());\r\n            }\r\n\r\n            out.write(str);\r\n            out.write(System.lineSeparator());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd finally, in case you want to replace an original file, you cannot do it at the same time. You have to create a temporary file, fill it and then replace original one the temporary result.\r\n```java\r\npublic static void replacePattern(Path srcFile, Path patternFile) throws IOException {\r\n    Path tmpFile = srcFile.getParent().resolve(srcFile.getFileName() + &quot;.tmp&quot;);\r\n    Files.deleteIfExists(tmpFile);\r\n    replacePattern(srcFile, patternFile, tmpFile);\r\n    Files.move(tmpFile, srcFile, StandardCopyOption.REPLACE_EXISTING);\r\n    Files.deleteIfExists(tmpFile);\r\n}\r\n```\r\n\r\nThe client could be look like this:\r\n```java\r\nPath srcFile = Path.of(&quot;c:/File1.txt&quot;);\r\nPath patternFile = Path.of(&quot;c:/File2.txt&quot;);\r\nreplacePattern(srcFile, patternFile);\r\n```","link":"https://stackoverflow.com/questions/76199973/how-to-replace-a-file-text-with-another-file-text-in-java/77392889#77392889","title":"How to Replace a File text with another file text in java","body":"<p>First of all you should create a logic with replace a string in the file. You can do it lazy by reading line by line from the source file and in case line was updated, read next line from the pattern file.</p>\n<p>I think it's better to encapsulate replace logic for an individual string with separate class, because replacement can be not a trivial task.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequiredArgsConstructor(access = AccessLevel.PRIVATE)\npublic final class PatternData {\n\n    private static final PatternData NULL = new PatternData(null, null, null);\n\n    private final String prefix;\n    private final String suffix;\n    private final String value;\n\n    public static PatternData create(String str) {\n        if (str == null)\n            return NULL;\n\n        int lo = str.indexOf('&gt;') + 1;\n        int hi = str.indexOf('&lt;', lo + 1);\n\n        return new PatternData(str.substring(0, lo),\n                               str.substring(hi),\n                               str.substring(lo, hi));\n    }\n\n    public Optional&lt;String&gt; replace(String str) {\n        int lo = this == NULL ? -1 : str.indexOf(prefix);\n        int hi = lo &gt; -1 ? str.indexOf(suffix, lo + 1) : -1;\n\n        return hi == -1 ? Optional.empty()\n                        : Optional.of(str.substring(0, lo + prefix.length())\n                                    + value + str.substring(hi));\n    }\n\n}\n</code></pre>\n<p>Then you're ready to build a replacement logic of the file.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void replacePattern(Path srcFile, Path patternFile, Path dstFile)\n                         throws IOException {\n    try (BufferedReader in = Files.newBufferedReader(srcFile);\n         BufferedReader patternIn = Files.newBufferedReader(patternFile);\n         BufferedWriter out = Files.newBufferedWriter(dstFile,\n                                                 StandardOpenOption.CREATE,\n                                                 StandardOpenOption.WRITE)) {\n\n        String str;\n        PatternData patternData = PatternData.create(patternIn.readLine());\n\n        while ((str = in.readLine()) != null) {\n            Optional&lt;String&gt; res = patternData.replace(str);\n\n            if (res.isPresent()) {\n                str = res.get();\n                patternData = PatternData.create(patternIn.readLine());\n            }\n\n            out.write(str);\n            out.write(System.lineSeparator());\n        }\n    }\n}\n</code></pre>\n<p>And finally, in case you want to replace an original file, you cannot do it at the same time. You have to create a temporary file, fill it and then replace original one the temporary result.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void replacePattern(Path srcFile, Path patternFile) throws IOException {\n    Path tmpFile = srcFile.getParent().resolve(srcFile.getFileName() + &quot;.tmp&quot;);\n    Files.deleteIfExists(tmpFile);\n    replacePattern(srcFile, patternFile, tmpFile);\n    Files.move(tmpFile, srcFile, StandardCopyOption.REPLACE_EXISTING);\n    Files.deleteIfExists(tmpFile);\n}\n</code></pre>\n<p>The client could be look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Path srcFile = Path.of(&quot;c:/File1.txt&quot;);\nPath patternFile = Path.of(&quot;c:/File2.txt&quot;);\nreplacePattern(srcFile, patternFile);\n</code></pre>\n"}],"comment_count":2,"is_answered":false,"view_count":167,"answer_count":4,"score":1,"last_activity_date":1702167153,"creation_date":1683543951,"last_edit_date":1683545099,"question_id":76199973,"body_markdown":"I have two files. I want to replace first file content with other file content\r\n\r\none contains\r\n```\r\n&lt;Test&gt;\r\n&lt;Test&gt;56596&lt;/Test&gt;\r\n&lt;PMt&gt;851&lt;/PMt&gt;\r\n&lt;/H&gt;\r\n&lt;Test&gt;5659556&lt;/Test&gt;\r\n&lt;H&gt;\r\n&lt;Test&gt;56556&lt;/Test&gt;\r\n&lt;PMt&gt;781&lt;/PMt&gt;\r\n&lt;/H&gt;\r\n&lt;Test&gt;5659556&lt;/Test&gt;\r\n&lt;/Test&gt;\r\n```\r\nSecond Contains:\r\n```\r\n&lt;PMt&gt;1&lt;/PMt&gt;\r\n&lt;PMt&gt;2&lt;/PMt&gt;\r\n&lt;PMt&gt;3&lt;/PMt&gt;\r\n```\r\nOutput File:\r\n```\r\n&lt;Test&gt;\r\n&lt;Test&gt;56596&lt;/Test&gt;\r\n&lt;PMt&gt;1&lt;/PMt&gt;\r\n&lt;/H&gt;\r\n&lt;Test&gt;5659556&lt;/Test&gt;\r\n&lt;H&gt;\r\n&lt;Test&gt;56556&lt;/Test&gt;\r\n&lt;PMt&gt;2&lt;/PMt&gt;\r\n&lt;/H&gt;\r\n&lt;Test&gt;5659556&lt;/Test&gt;\r\n&lt;PMt&gt;3&lt;/PMt&gt;\r\n&lt;/Test&gt;\r\n```\r\n\r\nI am trying following code:\r\n\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.FileReader;\r\nimport java.io.FileWriter;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class ReplaceText {\r\n    public static void main(String[] args) {\r\n        String inputFile = &quot;C:\\\\Files\\\\File1.txt&quot;;\r\n        //String outputFile = &quot;C:\\\\Files\\\\output.txt&quot;;\r\n        List&lt;String&gt; searchList = new ArrayList&lt;&gt;();\r\n        searchList.add(&quot;&lt;PMt&gt;(.+?)&lt;/PMt&gt;&quot;);\r\n        searchList.add(&quot;&lt;PMt&gt;(.+?)&lt;/PMt&gt;&quot;);\r\n        List&lt;String&gt; replaceList = new ArrayList&lt;&gt;();\r\n        boolean[] replaced = new boolean[searchList.size()];\r\n\r\n        // Read text to replace with from another file\r\n        try (BufferedReader br = new BufferedReader(new FileReader(&quot;C:\\\\Files\\\\File2.txt&quot;))) {\r\n            String line;\r\n            while ((line = br.readLine()) != null) {\r\n                replaceList.add(line);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        // Read input file and replace text\r\n        try (BufferedReader br = new BufferedReader(new FileReader(inputFile));\r\n             FileWriter fw = new FileWriter(inputFile)) {\r\n            String line;\r\n            while ((line = br.readLine()) != null) {\r\n                for (int i = 0; i &lt; searchList.size(); i++) {\r\n                    if (!replaced[i]) {\r\n                        String search = searchList.get(i);\r\n                        int index = line.indexOf(search);\r\n                        if (index != -1) {\r\n                            line = line.substring(0, index) + replaceList.get(i) + line.substring(index + search.length());\r\n                            replaced[i] = true;\r\n                        }\r\n                    }\r\n                }\r\n                fw.write(line + System.lineSeparator());\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nI tried this but it giving me same file again in output","link":"https://stackoverflow.com/questions/76199973/how-to-replace-a-file-text-with-another-file-text-in-java","title":"How to Replace a File text with another file text in java","body":"<p>I have two files. I want to replace first file content with other file content</p>\n<p>one contains</p>\n<pre><code>&lt;Test&gt;\n&lt;Test&gt;56596&lt;/Test&gt;\n&lt;PMt&gt;851&lt;/PMt&gt;\n&lt;/H&gt;\n&lt;Test&gt;5659556&lt;/Test&gt;\n&lt;H&gt;\n&lt;Test&gt;56556&lt;/Test&gt;\n&lt;PMt&gt;781&lt;/PMt&gt;\n&lt;/H&gt;\n&lt;Test&gt;5659556&lt;/Test&gt;\n&lt;/Test&gt;\n</code></pre>\n<p>Second Contains:</p>\n<pre><code>&lt;PMt&gt;1&lt;/PMt&gt;\n&lt;PMt&gt;2&lt;/PMt&gt;\n&lt;PMt&gt;3&lt;/PMt&gt;\n</code></pre>\n<p>Output File:</p>\n<pre><code>&lt;Test&gt;\n&lt;Test&gt;56596&lt;/Test&gt;\n&lt;PMt&gt;1&lt;/PMt&gt;\n&lt;/H&gt;\n&lt;Test&gt;5659556&lt;/Test&gt;\n&lt;H&gt;\n&lt;Test&gt;56556&lt;/Test&gt;\n&lt;PMt&gt;2&lt;/PMt&gt;\n&lt;/H&gt;\n&lt;Test&gt;5659556&lt;/Test&gt;\n&lt;PMt&gt;3&lt;/PMt&gt;\n&lt;/Test&gt;\n</code></pre>\n<p>I am trying following code:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class ReplaceText {\n    public static void main(String[] args) {\n        String inputFile = &quot;C:\\\\Files\\\\File1.txt&quot;;\n        //String outputFile = &quot;C:\\\\Files\\\\output.txt&quot;;\n        List&lt;String&gt; searchList = new ArrayList&lt;&gt;();\n        searchList.add(&quot;&lt;PMt&gt;(.+?)&lt;/PMt&gt;&quot;);\n        searchList.add(&quot;&lt;PMt&gt;(.+?)&lt;/PMt&gt;&quot;);\n        List&lt;String&gt; replaceList = new ArrayList&lt;&gt;();\n        boolean[] replaced = new boolean[searchList.size()];\n\n        // Read text to replace with from another file\n        try (BufferedReader br = new BufferedReader(new FileReader(&quot;C:\\\\Files\\\\File2.txt&quot;))) {\n            String line;\n            while ((line = br.readLine()) != null) {\n                replaceList.add(line);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        // Read input file and replace text\n        try (BufferedReader br = new BufferedReader(new FileReader(inputFile));\n             FileWriter fw = new FileWriter(inputFile)) {\n            String line;\n            while ((line = br.readLine()) != null) {\n                for (int i = 0; i &lt; searchList.size(); i++) {\n                    if (!replaced[i]) {\n                        String search = searchList.get(i);\n                        int index = line.indexOf(search);\n                        if (index != -1) {\n                            line = line.substring(0, index) + replaceList.get(i) + line.substring(index + search.length());\n                            replaced[i] = true;\n                        }\n                    }\n                }\n                fw.write(line + System.lineSeparator());\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n\n</code></pre>\n<p>I tried this but it giving me same file again in output</p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"score":1,"post_type":"question","creation_date":1684340325,"post_id":76274143,"comment_id":134505161,"body_markdown":"As `secret_number` is a VARCHAR, its value should be enclosed in quotes.  However, far better would be to use PreparedStatement instead to handle that for you - that is more secure (preventing SQL injection attacks), and also handles eg if your value includes a quote character itself.","link":"https://stackoverflow.com/questions/76274143/mysql-syntax-error-when-i-try-to-execute-an-sql-query-via-jdbc#comment134505161_76274143","body":"As <code>secret_number</code> is a VARCHAR, its value should be enclosed in quotes.  However, far better would be to use PreparedStatement instead to handle that for you - that is more secure (preventing SQL injection attacks), and also handles eg if your value includes a quote character itself."},{"score":4,"post_type":"question","creation_date":1684340628,"post_id":76274143,"comment_id":134505226,"body_markdown":"Your CREATE TABLE statement is missing a closing `)` character. The syntax error gives you a clue by saying `...near &#39;&#39; at line 1`, meaning it got confused at the end, expecting a closing parenthesis, but there was none. Normally the syntax error shows what follows the position it got confused, but in this case that&#39;s the end of your statement, so there is nothing following.","link":"https://stackoverflow.com/questions/76274143/mysql-syntax-error-when-i-try-to-execute-an-sql-query-via-jdbc#comment134505226_76274143","body":"Your CREATE TABLE statement is missing a closing <code>)</code> character. The syntax error gives you a clue by saying <code>...near &#39;&#39; at line 1</code>, meaning it got confused at the end, expecting a closing parenthesis, but there was none. Normally the syntax error shows what follows the position it got confused, but in this case that&#39;s the end of your statement, so there is nothing following."},{"score":2,"post_type":"question","creation_date":1684340890,"post_id":76274143,"comment_id":134505298,"body_markdown":"You are trying to insert `NULL` into both of your columns, but the first one, `id`, has a `NOT NULL` constraint.","link":"https://stackoverflow.com/questions/76274143/mysql-syntax-error-when-i-try-to-execute-an-sql-query-via-jdbc#comment134505298_76274143","body":"You are trying to insert <code>NULL</code> into both of your columns, but the first one, <code>id</code>, has a <code>NOT NULL</code> constraint."},{"score":0,"post_type":"question","creation_date":1684342165,"post_id":76274143,"comment_id":134505547,"body_markdown":"@racraman and Bill Karwin Both of your solutions were the issue. I will look into using a prepared statement as well, Thanks for the help!","link":"https://stackoverflow.com/questions/76274143/mysql-syntax-error-when-i-try-to-execute-an-sql-query-via-jdbc#comment134505547_76274143","body":"@racraman and Bill Karwin Both of your solutions were the issue. I will look into using a prepared statement as well, Thanks for the help!"},{"score":0,"post_type":"question","creation_date":1684342228,"post_id":76274143,"comment_id":134505566,"body_markdown":"@JettoMart&#237;nez it does work with the Null values as that field is auto incremented, and it hasn&#39;t been an issue, but thank you for the insight as well!","link":"https://stackoverflow.com/questions/76274143/mysql-syntax-error-when-i-try-to-execute-an-sql-query-via-jdbc#comment134505566_76274143","body":"@JettoMart&#237;nez it does work with the Null values as that field is auto incremented, and it hasn&#39;t been an issue, but thank you for the insight as well!"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1684342454,"post_id":76274432,"comment_id":134505605,"body_markdown":"The quotation marks around the secretNumber were the main issue, as well as I was missing a closing &quot;)&quot; in my create table statement. Thank you for the insight!","link":"https://stackoverflow.com/questions/76274143/mysql-syntax-error-when-i-try-to-execute-an-sql-query-via-jdbc/76274432#comment134505605_76274432","body":"The quotation marks around the secretNumber were the main issue, as well as I was missing a closing &quot;)&quot; in my create table statement. Thank you for the insight!"},{"score":2,"post_type":"answer","creation_date":1684347669,"post_id":76274432,"comment_id":134506708,"body_markdown":"Try not to construct the SQL string like that. Instead, use PrepareStatement. It will remove syntax or escaping problems while at the same time protecting you from SQL injection attacks.","link":"https://stackoverflow.com/questions/76274143/mysql-syntax-error-when-i-try-to-execute-an-sql-query-via-jdbc/76274432#comment134506708_76274432","body":"Try not to construct the SQL string like that. Instead, use PrepareStatement. It will remove syntax or escaping problems while at the same time protecting you from SQL injection attacks."}],"comment_count":2,"score":1,"last_activity_date":1702167141,"last_edit_date":1702167141,"creation_date":1684342103,"answer_id":76274432,"question_id":76274143,"body_markdown":"Since you have created the column `secretNumber` as a `VARCHAR(20)`, I would check to make sure `secretNumber` is at most 20 characters long before adding it.\r\n\r\nOn line 30 you have the following.\r\n\r\n```java\r\nsecretNumber = &quot;R&quot; + env + id + randomDigit;\r\n```\r\n\r\nSo, you can either use the debugger, or on line 31 you can put the following.\r\n\r\n```java\r\nif (secretNumber.length() &gt; 20) throw new Exception();\r\n```\r\n\r\nIf that doesn&#39;t work, you can try single quotes around the values, I guess.\r\n\r\n```java\r\nString updateSecretNumber =\r\n   &quot;UPDATE secret_number_generator &quot; +\r\n   &quot;SET secret_number = &#39;&quot; + secretNumber + &quot;&#39; &quot; +\r\n   &quot;WHERE id = &#39;&quot; + id + &quot;&#39;&quot;;\r\n```\r\n\r\nAdditionally, a semicolon at the end of a single statement is not required.\r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/76274143/mysql-syntax-error-when-i-try-to-execute-an-sql-query-via-jdbc/76274432#76274432","title":"MySQL syntax error when I try to execute an SQL query via JDBC","body":"<p>Since you have created the column <code>secretNumber</code> as a <code>VARCHAR(20)</code>, I would check to make sure <code>secretNumber</code> is at most 20 characters long before adding it.</p>\n<p>On line 30 you have the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>secretNumber = &quot;R&quot; + env + id + randomDigit;\n</code></pre>\n<p>So, you can either use the debugger, or on line 31 you can put the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (secretNumber.length() &gt; 20) throw new Exception();\n</code></pre>\n<p>If that doesn't work, you can try single quotes around the values, I guess.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String updateSecretNumber =\n   &quot;UPDATE secret_number_generator &quot; +\n   &quot;SET secret_number = '&quot; + secretNumber + &quot;' &quot; +\n   &quot;WHERE id = '&quot; + id + &quot;'&quot;;\n</code></pre>\n<p>Additionally, a semicolon at the end of a single statement is not required.</p>\n"},{"comment_count":0,"score":2,"last_activity_date":1684348065,"creation_date":1684348065,"answer_id":76275178,"question_id":76274143,"body_markdown":"While the previous example gives you the desired result it can easily break on malicious variable values. This version is hardened against SQL injection:\r\n\r\nUse a PreparedStatement like so:\r\n\r\n    PreparedStatement ps = connection.prepareStatement(\r\n        &quot;UPDATE secret_number_generator &quot; +\r\n        &quot;SET secret_number = ? &quot; +\r\n        &quot;WHERE id = ?&quot;;\r\n    ps.setString(1, secretNumber);\r\n    ps.setString(2, id);\r\n    int count = ps.executeUpdate();\r\n    System.out.println(&quot;updated %d rows&quot;, count);","link":"https://stackoverflow.com/questions/76274143/mysql-syntax-error-when-i-try-to-execute-an-sql-query-via-jdbc/76275178#76275178","title":"MySQL syntax error when I try to execute an SQL query via JDBC","body":"<p>While the previous example gives you the desired result it can easily break on malicious variable values. This version is hardened against SQL injection:</p>\n<p>Use a PreparedStatement like so:</p>\n<pre><code>PreparedStatement ps = connection.prepareStatement(\n    &quot;UPDATE secret_number_generator &quot; +\n    &quot;SET secret_number = ? &quot; +\n    &quot;WHERE id = ?&quot;;\nps.setString(1, secretNumber);\nps.setString(2, id);\nint count = ps.executeUpdate();\nSystem.out.println(&quot;updated %d rows&quot;, count);\n</code></pre>\n"}],"comment_count":5,"is_answered":true,"view_count":237,"answer_count":2,"score":0,"last_activity_date":1702167141,"creation_date":1684339972,"last_edit_date":1701472158,"question_id":76274143,"body_markdown":"Im building a Java microservice that uses [AWS Aurora][1] MySQL for some operations. The code connects to the database fine and the first three queries I had were throwing a similar error till I realized I was missing semicolons.\r\n\r\nThe final query (the update statement), however, is still giving me the same syntax error even with the semicolon and I can&#39;t seem to figure out why.\r\n\r\nHere is the code below:\r\n\r\n```\r\ntry {\r\n            conn = DriverManager.getConnection(jdbcUrl);\r\n\r\n            setupStatement = conn.createStatement();\r\n            idInsertStatement = conn.createStatement();\r\n            secretNumberUpdateStatement = conn.createStatement();\r\n\r\n            String createTableIfNotExists = &quot;CREATE TABLE IF NOT EXISTS secret_number_generator(id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY, secret_number VARCHAR(20);&quot;;\r\n\r\n            String generateSecretId = &quot;INSERT INTO secret_number_generator VALUES(null,null);&quot;;\r\n\r\n            String getLastRecordId = &quot;SELECT id FROM secret_number_generator ORDER BY id DESC LIMIT 1;&quot;;\r\n\r\n            setupStatement.addBatch(createTableIfNotExists);\r\n            idInsertStatement.addBatch(generateSecretId);\r\n            setupStatement.executeBatch();\r\n            idInsertStatement.executeBatch();\r\n            readStatement = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_READ_ONLY);\r\n            resultSet = readStatement.executeQuery(getLastRecordId);\r\n\r\n            while(resultSet.next()){\r\n                id = String.valueOf(resultSet.getLong(&quot;id&quot;));\r\n            }\r\n\r\n            /*\r\n              Logic for setting up secretNumber\r\n            */\r\n\r\n            }\r\n            secretNumber = &quot;R&quot; + env + id + randomDigit;\r\n\r\n            String updateSecretNumber = &quot;UPDATE secret_number_generator SET secret_number = &quot; + secretNumber + &quot; WHERE id = &quot; + id + &quot;;&quot;;\r\n\r\n            secretNumberUpdateStatement.addBatch(updateSecretNumber);\r\n            secretNumberUpdateStatement.executeBatch();\r\n\r\n            resultSet.close();\r\n            setupStatement.close();\r\n            idInsertStatement.close();\r\n            secretNumberUpdateStatement.close();\r\n            readStatement.close();\r\n            conn.close();\r\n\r\n        } catch (SQLException ex) {\r\n            // Handle any errors\r\n            System.out.println(&quot;SQLException: &quot; + ex.getMessage());\r\n            System.out.println(&quot;SQLState: &quot; + ex.getSQLState());\r\n            System.out.println(&quot;VendorError: &quot; + ex.getErrorCode());\r\n        } finally {\r\n            System.out.println(&quot;Closing the connection.&quot;);\r\n            if (conn != null) try { conn.close(); } catch (SQLException ignore) {}\r\n        }\r\n```\r\n\r\nThe error I am getting for that update query is\r\n\r\n```\r\nSQLException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;&#39; at line 1\r\n```\r\n\r\nAs mentioned, the same error was showing for the previous queries before I added a semicolon at the end of them, and now it only shows for the final one.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Amazon_Aurora\r\n\r\n\r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/76274143/mysql-syntax-error-when-i-try-to-execute-an-sql-query-via-jdbc","title":"MySQL syntax error when I try to execute an SQL query via JDBC","body":"<p>Im building a Java microservice that uses <a href=\"https://en.wikipedia.org/wiki/Amazon_Aurora\" rel=\"nofollow noreferrer\">AWS Aurora</a> MySQL for some operations. The code connects to the database fine and the first three queries I had were throwing a similar error till I realized I was missing semicolons.</p>\n<p>The final query (the update statement), however, is still giving me the same syntax error even with the semicolon and I can't seem to figure out why.</p>\n<p>Here is the code below:</p>\n<pre><code>try {\n            conn = DriverManager.getConnection(jdbcUrl);\n\n            setupStatement = conn.createStatement();\n            idInsertStatement = conn.createStatement();\n            secretNumberUpdateStatement = conn.createStatement();\n\n            String createTableIfNotExists = &quot;CREATE TABLE IF NOT EXISTS secret_number_generator(id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY, secret_number VARCHAR(20);&quot;;\n\n            String generateSecretId = &quot;INSERT INTO secret_number_generator VALUES(null,null);&quot;;\n\n            String getLastRecordId = &quot;SELECT id FROM secret_number_generator ORDER BY id DESC LIMIT 1;&quot;;\n\n            setupStatement.addBatch(createTableIfNotExists);\n            idInsertStatement.addBatch(generateSecretId);\n            setupStatement.executeBatch();\n            idInsertStatement.executeBatch();\n            readStatement = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_READ_ONLY);\n            resultSet = readStatement.executeQuery(getLastRecordId);\n\n            while(resultSet.next()){\n                id = String.valueOf(resultSet.getLong(&quot;id&quot;));\n            }\n\n            /*\n              Logic for setting up secretNumber\n            */\n\n            }\n            secretNumber = &quot;R&quot; + env + id + randomDigit;\n\n            String updateSecretNumber = &quot;UPDATE secret_number_generator SET secret_number = &quot; + secretNumber + &quot; WHERE id = &quot; + id + &quot;;&quot;;\n\n            secretNumberUpdateStatement.addBatch(updateSecretNumber);\n            secretNumberUpdateStatement.executeBatch();\n\n            resultSet.close();\n            setupStatement.close();\n            idInsertStatement.close();\n            secretNumberUpdateStatement.close();\n            readStatement.close();\n            conn.close();\n\n        } catch (SQLException ex) {\n            // Handle any errors\n            System.out.println(&quot;SQLException: &quot; + ex.getMessage());\n            System.out.println(&quot;SQLState: &quot; + ex.getSQLState());\n            System.out.println(&quot;VendorError: &quot; + ex.getErrorCode());\n        } finally {\n            System.out.println(&quot;Closing the connection.&quot;);\n            if (conn != null) try { conn.close(); } catch (SQLException ignore) {}\n        }\n</code></pre>\n<p>The error I am getting for that update query is</p>\n<pre><code>SQLException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1\n</code></pre>\n<p>As mentioned, the same error was showing for the previous queries before I added a semicolon at the end of them, and now it only shows for the final one.</p>\n"},{"tags":["java","lambda"],"comments":[{"score":0,"post_type":"question","creation_date":1694495237,"post_id":77086045,"comment_id":135894393,"body_markdown":"By the way, class names in Java start with an uppercase letter.","link":"https://stackoverflow.com/questions/77086045/how-to-copy-specific-value-from-one-list-to-another-for-specific-indexes#comment135894393_77086045","body":"By the way, class names in Java start with an uppercase letter."},{"score":1,"post_type":"question","creation_date":1694495311,"post_id":77086045,"comment_id":135894404,"body_markdown":"Please share your efforts as well.","link":"https://stackoverflow.com/questions/77086045/how-to-copy-specific-value-from-one-list-to-another-for-specific-indexes#comment135894404_77086045","body":"Please share your efforts as well."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1702167131,"last_edit_date":1702167131,"creation_date":1694493877,"answer_id":77086167,"question_id":77086045,"body_markdown":"&gt; _&quot;... Now I want to be able to copy only the name from listA to ListB if they have same id? That is `list.get(i).getStatus().name`.\r\nhow do I copy the name values (`event.get(i).getStatus.name`)form list A to list B if they have same Id? ...&quot;_\r\n\r\nJust replace the value within the class after matching the _id_ value.\r\n\r\n&gt; _&quot;... How do I replace the value of status with both name and id if the id is null in status? ...&quot;_\r\n\r\nYou would either need to create a _set_ method for the _name_ field of the corresponding class, or change the access to _public_ or none.\r\n\r\n## `for` loop\r\n\r\nHere is an example using a `for` loop.\r\n\r\n```java\r\nclass Z {\r\n    String s;\r\n    int i;\r\n\r\n    Z(String s, int i) {\r\n        this.s = s;\r\n        this.i = i;\r\n    }\r\n}\r\nList&lt;Z&gt; a = List.of(new Z(&quot;A&quot;, 1), new Z(&quot;B&quot;, 2), new Z(&quot;C&quot;, 3));\r\nList&lt;Z&gt; b = List.of(new Z(&quot;&quot;, 0), new Z(&quot;&quot;, 7), new Z(&quot;&quot;, 3));\r\nint i;\r\nfor (Z x : b) {\r\n    i = x.i;\r\n    for (Z y : a) {\r\n        if (i == y.i) {\r\n            x.s = y.s;\r\n            break;\r\n        }\r\n    }\r\n}\r\nb.forEach(x -&gt; System.out.printf(&quot;&#39;%s&#39; %d%n&quot;, x.s, x.i));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n&#39;&#39; 0\r\n&#39;&#39; 7\r\n&#39;C&#39; 3\r\n```\r\n\r\n## `Stream#peek`\r\n\r\n&gt; _&quot;... How can I do it with plane java and with lambda? ...&quot;_\r\n\r\nYou can utilize the _[Stream#peek](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Stream.html#peek(java.util.function.Consumer))_ method to modify each object.\r\n\r\n```java\r\nb = b.stream()\r\n     .peek(\r\n         x -&gt; {\r\n             int i = x.i;\r\n             for (Z z : a) if (i == z.i) { x.s = z.s; break; }\r\n         })\r\n     .toList();\r\n```\r\n\r\nFor more info, see [*Java 8 Streams peek() API*](https://www.baeldung.com/java-streams-peek-api) by Attila Fej&#233;r on Baeldung.com.","link":"https://stackoverflow.com/questions/77086045/how-to-copy-specific-value-from-one-list-to-another-for-specific-indexes/77086167#77086167","title":"How to copy specific value from one list to another for specific indexes","body":"<blockquote>\n<p><em>&quot;... Now I want to be able to copy only the name from listA to ListB if they have same id? That is <code>list.get(i).getStatus().name</code>.\nhow do I copy the name values (<code>event.get(i).getStatus.name</code>)form list A to list B if they have same Id? ...&quot;</em></p>\n</blockquote>\n<p>Just replace the value within the class after matching the <em>id</em> value.</p>\n<blockquote>\n<p><em>&quot;... How do I replace the value of status with both name and id if the id is null in status? ...&quot;</em></p>\n</blockquote>\n<p>You would either need to create a <em>set</em> method for the <em>name</em> field of the corresponding class, or change the access to <em>public</em> or none.</p>\n<h2><code>for</code> loop</h2>\n<p>Here is an example using a <code>for</code> loop.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Z {\n    String s;\n    int i;\n\n    Z(String s, int i) {\n        this.s = s;\n        this.i = i;\n    }\n}\nList&lt;Z&gt; a = List.of(new Z(&quot;A&quot;, 1), new Z(&quot;B&quot;, 2), new Z(&quot;C&quot;, 3));\nList&lt;Z&gt; b = List.of(new Z(&quot;&quot;, 0), new Z(&quot;&quot;, 7), new Z(&quot;&quot;, 3));\nint i;\nfor (Z x : b) {\n    i = x.i;\n    for (Z y : a) {\n        if (i == y.i) {\n            x.s = y.s;\n            break;\n        }\n    }\n}\nb.forEach(x -&gt; System.out.printf(&quot;'%s' %d%n&quot;, x.s, x.i));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>'' 0\n'' 7\n'C' 3\n</code></pre>\n<h2><code>Stream#peek</code></h2>\n<blockquote>\n<p><em>&quot;... How can I do it with plane java and with lambda? ...&quot;</em></p>\n</blockquote>\n<p>You can utilize the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Stream.html#peek(java.util.function.Consumer)\" rel=\"nofollow noreferrer\">Stream#peek</a></em> method to modify each object.</p>\n<pre class=\"lang-java prettyprint-override\"><code>b = b.stream()\n     .peek(\n         x -&gt; {\n             int i = x.i;\n             for (Z z : a) if (i == z.i) { x.s = z.s; break; }\n         })\n     .toList();\n</code></pre>\n<p>For more info, see <a href=\"https://www.baeldung.com/java-streams-peek-api\" rel=\"nofollow noreferrer\"><em>Java 8 Streams peek() API</em></a> by Attila Fejr on Baeldung.com.</p>\n"}],"comment_count":2,"is_answered":true,"view_count":63,"answer_count":1,"score":0,"last_activity_date":1702167131,"creation_date":1694491451,"last_edit_date":1694495498,"question_id":77086045,"body_markdown":"```\r\nclass Status{\r\n    private int id;\r\n    private String name;\r\n    private String savedBy;\r\n\r\n    //constructor\r\n    //getters and setters\r\n}\r\n\r\nclass Event{\r\n    private String title;\r\n    private DateTime effectiveDate;\r\n    private Status status;\r\n    //constructor, getter and setters\r\n}\r\n```\r\n\r\nNow in the serviceClass, Suppose I have 2 list of events. ListA and ListB\r\n`List&lt;Event&gt; listA` has multiple event in it and `List&lt;Event&gt; listB` has same number of event as listA but the values of the content are either different or empty in listB than in ListA.\r\nLets say there are 3 event in each list.\r\n```\r\n\r\nlistA.get(0).getStatus().getId() = 101\r\nlistA.get(0).getStatus().getName() = Bruce Wayne\r\n\r\nlistA.get(1).getStatus().getId() = 202\r\nlistA.get(1).getStatus().getName() = Ra Al Ghul\r\n\r\nlistA.get(2).getStatus().getId() = 303\r\nlistA.get(2).getStatus().getName() = Alfred Pennyworth\r\n```\r\n\r\nList 2 may or maynot have the same values for &quot;Status.id&quot; but the names are empty\r\n\r\n```\r\nlistB.get(0).getStatus().getId() = &quot;&quot;\r\nlistB.get(1).getStatus().getId() = 700\r\nlistB.get(2).getStatus().getId() = 303.\r\n```\r\n\r\n - **Question 1**: \r\nNow I want to be able to copy only the name from listA to ListB if they have same id? That is `list.get(i).getStatus().name`.\r\nhow do I copy the name values (`event.get(i).getStatus.name`)form list A to list B if they have same Id?\r\n - **Question 2**: How do I replace the value of status with both name and id if the id is null in status?\r\n\r\nHow can I do it with plain Java and with lambda?\r\n\r\nI know the basics but looping into objects inside objects that have indexes is very hard","link":"https://stackoverflow.com/questions/77086045/how-to-copy-specific-value-from-one-list-to-another-for-specific-indexes","title":"How to copy specific value from one list to another for specific indexes","body":"<pre><code>class Status{\n    private int id;\n    private String name;\n    private String savedBy;\n\n    //constructor\n    //getters and setters\n}\n\nclass Event{\n    private String title;\n    private DateTime effectiveDate;\n    private Status status;\n    //constructor, getter and setters\n}\n</code></pre>\n<p>Now in the serviceClass, Suppose I have 2 list of events. ListA and ListB\n<code>List&lt;Event&gt; listA</code> has multiple event in it and <code>List&lt;Event&gt; listB</code> has same number of event as listA but the values of the content are either different or empty in listB than in ListA.\nLets say there are 3 event in each list.</p>\n<pre><code>\nlistA.get(0).getStatus().getId() = 101\nlistA.get(0).getStatus().getName() = Bruce Wayne\n\nlistA.get(1).getStatus().getId() = 202\nlistA.get(1).getStatus().getName() = Ra Al Ghul\n\nlistA.get(2).getStatus().getId() = 303\nlistA.get(2).getStatus().getName() = Alfred Pennyworth\n</code></pre>\n<p>List 2 may or maynot have the same values for &quot;Status.id&quot; but the names are empty</p>\n<pre><code>listB.get(0).getStatus().getId() = &quot;&quot;\nlistB.get(1).getStatus().getId() = 700\nlistB.get(2).getStatus().getId() = 303.\n</code></pre>\n<ul>\n<li><strong>Question 1</strong>:\nNow I want to be able to copy only the name from listA to ListB if they have same id? That is <code>list.get(i).getStatus().name</code>.\nhow do I copy the name values (<code>event.get(i).getStatus.name</code>)form list A to list B if they have same Id?</li>\n<li><strong>Question 2</strong>: How do I replace the value of status with both name and id if the id is null in status?</li>\n</ul>\n<p>How can I do it with plain Java and with lambda?</p>\n<p>I know the basics but looping into objects inside objects that have indexes is very hard</p>\n"},{"tags":["java"],"comments":[{"score":0,"post_type":"question","creation_date":1687031800,"post_id":76269037,"comment_id":134881475,"body_markdown":"What are *&quot;jlist&quot;*? and *&quot;jcheckbox&quot;*? For instance, they are not in the code.","link":"https://stackoverflow.com/questions/76269037/jcheckbox-list-and-check-text-value-with-another-string-array#comment134881475_76269037","body":"What are <i>&quot;jlist&quot;</i>? and <i>&quot;jcheckbox&quot;</i>? For instance, they are not in the code."},{"score":1,"post_type":"question","creation_date":1687037418,"post_id":76269037,"comment_id":134881958,"body_markdown":"@PeterMortensen, this question has already been answered.","link":"https://stackoverflow.com/questions/76269037/jcheckbox-list-and-check-text-value-with-another-string-array#comment134881958_76269037","body":"@PeterMortensen, this question has already been answered."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1684309972,"post_id":76269141,"comment_id":134497892,"body_markdown":"It seems to be working man thank you! It&#39;s the `void loadSelected()` that I had an issue with.","link":"https://stackoverflow.com/questions/76269037/jcheckbox-list-and-check-text-value-with-another-string-array/76269141#comment134497892_76269141","body":"It seems to be working man thank you! It&#39;s the <code>void loadSelected()</code> that I had an issue with."}],"comment_count":1,"score":1,"last_activity_date":1702167107,"last_edit_date":1702167107,"creation_date":1684305284,"answer_id":76269141,"question_id":76269037,"body_markdown":"First, there are two types of checkboxes. There&#39;s a `java.awt.Checkbox`, and a `javax.swing.JCheckBox`.\r\n\r\nIf you&#39;re using the `JCheckBox`, consider the following code.\r\n\r\nIf you&#39;re using the `Checkbox`, instead of `isSelected`, you would use `getState`, same with the setter.  And, instead of `getText`, you would use `getLabel`, as well as the setter method.\r\n\r\nKeep in mind, this will be effective only if the text of each checkbox is unique.\r\n\r\nIn response to the use of an `Object` array, it will improve scalability if you use an array of the object, so in this case either a `JCheckBox[]` or a `Checkbox[]`.\r\n\r\nEven better, use a mutable `List&lt;JCheckBox&gt;`.\r\n\r\nAdditionally, it&#39;s worth noting that Java will convert your path separators, so instead of un-escaping the `\\`, you can just use a single `/`.\r\n\r\n    List&lt;String&gt; getSelected() {\r\n        List&lt;String&gt; selected = new ArrayList&lt;&gt;();\r\n        JCheckBox[] newList = { ck01, ck02, ck03, ck04, ck05, ck06, ck07, ck08, ck09, ck10, ck11, ck12, ck13, ck14, ck15, ck16, ck17, ck18, ck19, ck20, ck21, ck22, ck23, ck24, ck25, ck26, ck27, ck28, ck29, ck30,ck31, ck32, ck33, ck34, ck35, ck36, ck37, ck38, ck39, ck40,ck41, ck42, ck43, ck44, ck45, ck46, ck47, ck48, ck49, ck50,ck51, ck52, ck53, ck54 };\r\n        for (JCheckBox checkbox : newList) {\r\n            if (checkbox.isSelected())\r\n                selected.add(checkbox.getText());\r\n        }\r\n        return selected;\r\n    }\r\n\r\n    void saveSelected() throws IOException {\r\n        String path = importpath + &quot;\\\\additional_info\\\\brands.txt&quot;;\r\n        try (FileWriter writer = new FileWriter(path)) {\r\n            String newline = System.lineSeparator();\r\n            for (String checkboxText : getSelected()) {\r\n                writer.write(checkboxText);\r\n                writer.write(newline);\r\n            }\r\n            writer.flush();\r\n        }\r\n    }\r\n\r\n    void loadSelected() throws IOException {\r\n        String path = importpath + &quot;\\\\additional_info\\\\brands.txt&quot;;\r\n        try (BufferedReader reader = new BufferedReader(new FileReader(path))) {\r\n            JCheckBox[] checkboxes = { ck01, ck02, ck03, ck04, ck05, ck06, ck07, ck08, ck09, ck10, ck11, ck12, ck13, ck14, ck15, ck16, ck17, ck18, ck19, ck20, ck21, ck22, ck23, ck24, ck25, ck26, ck27, ck28, ck29, ck30,ck31, ck32, ck33, ck34, ck35, ck36, ck37, ck38, ck39, ck40,ck41, ck42, ck43, ck44, ck45, ck46, ck47, ck48, ck49, ck50,ck51, ck52, ck53, ck54 };\r\n            String line;\r\n            while ((line = reader.readLine()) != null) {\r\n                for (JCheckBox checkbox : checkboxes) {\r\n                    if (checkbox.getText().equals(line)) {\r\n                        checkbox.setSelected(true);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n","link":"https://stackoverflow.com/questions/76269037/jcheckbox-list-and-check-text-value-with-another-string-array/76269141#76269141","title":"jCheckbox list and check text value with another string array","body":"<p>First, there are two types of checkboxes. There's a <code>java.awt.Checkbox</code>, and a <code>javax.swing.JCheckBox</code>.</p>\n<p>If you're using the <code>JCheckBox</code>, consider the following code.</p>\n<p>If you're using the <code>Checkbox</code>, instead of <code>isSelected</code>, you would use <code>getState</code>, same with the setter.  And, instead of <code>getText</code>, you would use <code>getLabel</code>, as well as the setter method.</p>\n<p>Keep in mind, this will be effective only if the text of each checkbox is unique.</p>\n<p>In response to the use of an <code>Object</code> array, it will improve scalability if you use an array of the object, so in this case either a <code>JCheckBox[]</code> or a <code>Checkbox[]</code>.</p>\n<p>Even better, use a mutable <code>List&lt;JCheckBox&gt;</code>.</p>\n<p>Additionally, it's worth noting that Java will convert your path separators, so instead of un-escaping the <code>\\</code>, you can just use a single <code>/</code>.</p>\n<pre><code>List&lt;String&gt; getSelected() {\n    List&lt;String&gt; selected = new ArrayList&lt;&gt;();\n    JCheckBox[] newList = { ck01, ck02, ck03, ck04, ck05, ck06, ck07, ck08, ck09, ck10, ck11, ck12, ck13, ck14, ck15, ck16, ck17, ck18, ck19, ck20, ck21, ck22, ck23, ck24, ck25, ck26, ck27, ck28, ck29, ck30,ck31, ck32, ck33, ck34, ck35, ck36, ck37, ck38, ck39, ck40,ck41, ck42, ck43, ck44, ck45, ck46, ck47, ck48, ck49, ck50,ck51, ck52, ck53, ck54 };\n    for (JCheckBox checkbox : newList) {\n        if (checkbox.isSelected())\n            selected.add(checkbox.getText());\n    }\n    return selected;\n}\n\nvoid saveSelected() throws IOException {\n    String path = importpath + &quot;\\\\additional_info\\\\brands.txt&quot;;\n    try (FileWriter writer = new FileWriter(path)) {\n        String newline = System.lineSeparator();\n        for (String checkboxText : getSelected()) {\n            writer.write(checkboxText);\n            writer.write(newline);\n        }\n        writer.flush();\n    }\n}\n\nvoid loadSelected() throws IOException {\n    String path = importpath + &quot;\\\\additional_info\\\\brands.txt&quot;;\n    try (BufferedReader reader = new BufferedReader(new FileReader(path))) {\n        JCheckBox[] checkboxes = { ck01, ck02, ck03, ck04, ck05, ck06, ck07, ck08, ck09, ck10, ck11, ck12, ck13, ck14, ck15, ck16, ck17, ck18, ck19, ck20, ck21, ck22, ck23, ck24, ck25, ck26, ck27, ck28, ck29, ck30,ck31, ck32, ck33, ck34, ck35, ck36, ck37, ck38, ck39, ck40,ck41, ck42, ck43, ck44, ck45, ck46, ck47, ck48, ck49, ck50,ck51, ck52, ck53, ck54 };\n        String line;\n        while ((line = reader.readLine()) != null) {\n            for (JCheckBox checkbox : checkboxes) {\n                if (checkbox.getText().equals(line)) {\n                    checkbox.setSelected(true);\n                    break;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}],"comment_count":2,"is_answered":true,"view_count":53,"answer_count":1,"score":1,"last_activity_date":1702167107,"creation_date":1684304057,"last_edit_date":1687031766,"question_id":76269037,"body_markdown":"In the app, I can export files and I am trying to create an import function as well. I do import the text files, but my issue is the following.\r\n\r\nI have several checkboxes. See the image bellow. When I am exporting the file, I create a `.txt` that includes all the brands selected.\r\n\r\nWhen I import the `.txt`, I can of course create an arraylist with all the values. I want to cross-check that list against all the checkboxes and &quot;check&quot; the boxes. For example, I have &quot;avene&quot; inside my list, and I want the &quot;avene&quot; checkbox (or ck01) to be checked. But I am unsure on how to proceed.\r\n\r\n[![Enter image description here](https://i.stack.imgur.com/r67l1.png)](https://i.stack.imgur.com/r67l1.png)\r\n\r\nThis is the way I am importing the file and creating an array:\r\n\r\n```\r\nBufferedReader bf1 = new BufferedReader(new FileReader(importpath + &quot;\\\\additional_info\\\\brands.txt&quot;));\r\nString line1 = bf1.readLine();\r\nselectedBrands = new ArrayList();\r\nwhile(line1 != null) {\r\n    line1 = bf.readLine();\r\n    selectedBrands.add(line1);\r\n}\r\n```\r\n\r\nAnd this is that I started trying to do. I tried a few things, like creating checkbox array, an object jlist that includes the checkboxes. I even tried creating a new jcheckbox list, but I am always getting an error:\r\n\r\n`cannot find symbol` on the `.getText()` command.\r\n\r\nI am adding the latest test I did with the `Object[]` list, but I have tried several other ways.\r\n\r\n```\r\nList&lt;Checkbox&gt; checkboxes = new ArrayList&lt;Checkbox&gt;();\r\nObject[] newList = {ck01, ck02, ck03, ck04, ck05, ck06, ck07, ck08, ck09, ck10, ck11, ck12, ck13, ck14, ck15, ck16, ck17, ck18, ck19, ck20, ck21, ck22, ck23, ck24, ck25, ck26, ck27, ck28, ck29, ck30, ck31, ck32, ck33, ck34, ck35, ck36, ck37, ck38, ck39, ck40, ck41, ck42, ck43, ck44, ck45, ck46, ck47, ck48, ck49, ck50, ck51, ck52, ck53, ck54};\r\n\r\nfor (int i = 0; i &lt; newList.length; i++) {\r\n\r\n    newList[i].getText();\r\n}\r\n```\r\n\r\n***P.S. the app was created using NetBeans!\r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/76269037/jcheckbox-list-and-check-text-value-with-another-string-array","title":"jCheckbox list and check text value with another string array","body":"<p>In the app, I can export files and I am trying to create an import function as well. I do import the text files, but my issue is the following.</p>\n<p>I have several checkboxes. See the image bellow. When I am exporting the file, I create a <code>.txt</code> that includes all the brands selected.</p>\n<p>When I import the <code>.txt</code>, I can of course create an arraylist with all the values. I want to cross-check that list against all the checkboxes and &quot;check&quot; the boxes. For example, I have &quot;avene&quot; inside my list, and I want the &quot;avene&quot; checkbox (or ck01) to be checked. But I am unsure on how to proceed.</p>\n<p><a href=\"https://i.stack.imgur.com/r67l1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r67l1.png\" alt=\"Enter image description here\" /></a></p>\n<p>This is the way I am importing the file and creating an array:</p>\n<pre><code>BufferedReader bf1 = new BufferedReader(new FileReader(importpath + &quot;\\\\additional_info\\\\brands.txt&quot;));\nString line1 = bf1.readLine();\nselectedBrands = new ArrayList();\nwhile(line1 != null) {\n    line1 = bf.readLine();\n    selectedBrands.add(line1);\n}\n</code></pre>\n<p>And this is that I started trying to do. I tried a few things, like creating checkbox array, an object jlist that includes the checkboxes. I even tried creating a new jcheckbox list, but I am always getting an error:</p>\n<p><code>cannot find symbol</code> on the <code>.getText()</code> command.</p>\n<p>I am adding the latest test I did with the <code>Object[]</code> list, but I have tried several other ways.</p>\n<pre><code>List&lt;Checkbox&gt; checkboxes = new ArrayList&lt;Checkbox&gt;();\nObject[] newList = {ck01, ck02, ck03, ck04, ck05, ck06, ck07, ck08, ck09, ck10, ck11, ck12, ck13, ck14, ck15, ck16, ck17, ck18, ck19, ck20, ck21, ck22, ck23, ck24, ck25, ck26, ck27, ck28, ck29, ck30, ck31, ck32, ck33, ck34, ck35, ck36, ck37, ck38, ck39, ck40, ck41, ck42, ck43, ck44, ck45, ck46, ck47, ck48, ck49, ck50, ck51, ck52, ck53, ck54};\n\nfor (int i = 0; i &lt; newList.length; i++) {\n\n    newList[i].getText();\n}\n</code></pre>\n<p>***P.S. the app was created using NetBeans!</p>\n"},{"tags":["java","arrays","arraylist","stream"],"comments":[{"score":3,"post_type":"question","creation_date":1684381955,"post_id":76277603,"comment_id":134511043,"body_markdown":"I wouldn&#39;t do `Scanner input = new Scanner(System.in);` instead each loop iteration, it&#39;s wasteful, do it before the start of the loop instead. I would consider `T userInput = (T) input.next();` a bad idea, `next` is returning a `String` trying to cast it to something like an `Integer` is going to fail and this is actually where you error occurred. I would suggest you need some kind of &quot;convert&quot; which new how to take a `String` and convert it to the expected value you actually want","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list#comment134511043_76277603","body":"I wouldn&#39;t do <code>Scanner input = new Scanner(System.in);</code> instead each loop iteration, it&#39;s wasteful, do it before the start of the loop instead. I would consider <code>T userInput = (T) input.next();</code> a bad idea, <code>next</code> is returning a <code>String</code> trying to cast it to something like an <code>Integer</code> is going to fail and this is actually where you error occurred. I would suggest you need some kind of &quot;convert&quot; which new how to take a <code>String</code> and convert it to the expected value you actually want"},{"score":1,"post_type":"question","creation_date":1684382928,"post_id":76277603,"comment_id":134511126,"body_markdown":"Yes, as @MadProgrammer pointed out, the error is actually at `T userInput = (T) input.next();`, where you&#39;re taking a value of type `String`, and casting it to `T`, which happens to be `Integer` in this case.  If you&#39;re dealing with integer values, you&#39;ll need to call `nextInt()` instead of `next()`.","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list#comment134511126_76277603","body":"Yes, as @MadProgrammer pointed out, the error is actually at <code>T userInput = (T) input.next();</code>, where you&#39;re taking a value of type <code>String</code>, and casting it to <code>T</code>, which happens to be <code>Integer</code> in this case.  If you&#39;re dealing with integer values, you&#39;ll need to call <code>nextInt()</code> instead of <code>next()</code>."},{"score":0,"post_type":"question","creation_date":1684384093,"post_id":76277603,"comment_id":134511232,"body_markdown":"@DawoodibnKareem @MadProgrammer Thanks for the input. To build on the problem, if I explicitly use ```nextInt()```, I will definitely get a runtime error if I input a ```Character``` or ```String```. Is there a way to allow such input types then? Or will the best workaround be to create a fresh class with a ```Scanner``` to handle ```Character```/```String``` input types. Just thinking out loud if I would want to handle an array of such types in the future.","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list#comment134511232_76277603","body":"@DawoodibnKareem @MadProgrammer Thanks for the input. To build on the problem, if I explicitly use <code>nextInt()</code>, I will definitely get a runtime error if I input a <code>Character</code> or <code>String</code>. Is there a way to allow such input types then? Or will the best workaround be to create a fresh class with a <code>Scanner</code> to handle <code>Character</code>/<code>String</code> input types. Just thinking out loud if I would want to handle an array of such types in the future."},{"score":0,"post_type":"question","creation_date":1684481616,"post_id":76277603,"comment_id":134526590,"body_markdown":"Honestly, I&#39;d be inclined to just work with a `List&lt;Double&gt;` and assume everything is `Double`.  I&#39;m assuming you&#39;re not concerned about the problems with floating point arithmetic - if you are, then you could consider `List&lt;BigDecimal&gt;`, although `BigDecimal` has problems of its own.  As far as dealing with input that can&#39;t be interpreted as a `double`, you&#39;ll have to write some code to dealing with that.  The appropriate place to do that is in a `catch` block, when you catch a `NumberFormatException`.  If you&#39;re new to Java, you might want to read up on `try` and `catch`.","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list#comment134526590_76277603","body":"Honestly, I&#39;d be inclined to just work with a <code>List&lt;Double&gt;</code> and assume everything is <code>Double</code>.  I&#39;m assuming you&#39;re not concerned about the problems with floating point arithmetic - if you are, then you could consider <code>List&lt;BigDecimal&gt;</code>, although <code>BigDecimal</code> has problems of its own.  As far as dealing with input that can&#39;t be interpreted as a <code>double</code>, you&#39;ll have to write some code to dealing with that.  The appropriate place to do that is in a <code>catch</code> block, when you catch a <code>NumberFormatException</code>.  If you&#39;re new to Java, you might want to read up on <code>try</code> and <code>catch</code>."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702167091,"last_edit_date":1702167091,"creation_date":1684389146,"answer_id":76278078,"question_id":76277603,"body_markdown":"The first thing I&#39;d recommend is to reduce the scope of generic-type `T`, and simply use a `Number` object.  This will cover both `Double` and `Integer`.\r\n\r\nYou&#39;ll need to check the value from the `input`.\r\nRather than using `input.next`, use `input.nextLine`.\r\n\r\nIf the value contains a decimal point, add it to `inputs` as a `Double`, otherwise add it as an `Integer`.\r\n\r\n```java\r\npublic class UserInput {\r\n    private List&lt;Number&gt; inputs;\r\n\r\n    public UserInput(List&lt;Number&gt; inputs) {\r\n        this.inputs = inputs;\r\n    }\r\n\r\n    public List&lt;Number&gt; getUserInput(Integer number_inputs) {\r\n        String string;\r\n        for(int i=1; i &lt; number_inputs+1; i++) {\r\n            Scanner input = new Scanner(System.in);\r\n            System.out.println(&quot;Enter number &quot; + i);\r\n            string = input.nextLine();\r\n            if (string.contains(&quot;.&quot;)) {\r\n                this.inputs.add(Double.parseDouble(string));\r\n            } else {\r\n                this.inputs.add(Integer.parseInt(string));\r\n            }\r\n        }\r\n        return this.inputs;\r\n    }\r\n\r\n}\r\n```\r\n\r\nThen, in your `CalculateValues` class, you&#39;ll need to differentiate the results, and add accordingly.\r\n\r\n```java\r\npublic class CalculateValues {\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Number&gt; vals = new ArrayList&lt;&gt;();\r\n        UserInput userInput = new UserInput(vals);\r\n        List&lt;Number&gt; inputValues = userInput.getUserInput(2);\r\n        Number numberA = inputValues.get(0);\r\n        Number numberB = inputValues.get(1);\r\n        if (numberA instanceof Integer &amp;&amp; numberB instanceof Integer)\r\n            System.out.println(numberA.intValue() + numberB.intValue());\r\n        else if (numberA instanceof Integer &amp;&amp; numberB instanceof Double)\r\n            System.out.println(numberA.intValue() + numberB.doubleValue());\r\n        else if (numberA instanceof Double &amp;&amp; numberB instanceof Integer)\r\n            System.out.println(numberA.doubleValue() + numberB.intValue());\r\n        else if (numberA instanceof Double &amp;&amp; numberB instanceof Double) {\r\n            System.out.println(numberA.doubleValue() + numberB.doubleValue());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIdeally, you can just store all the values as `Double`. It has more than enough space to accommodate an `Integer`.\r\n\r\n","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278078#76278078","title":"Unable to perform mathematical operations on Java List","body":"<p>The first thing I'd recommend is to reduce the scope of generic-type <code>T</code>, and simply use a <code>Number</code> object.  This will cover both <code>Double</code> and <code>Integer</code>.</p>\n<p>You'll need to check the value from the <code>input</code>.\nRather than using <code>input.next</code>, use <code>input.nextLine</code>.</p>\n<p>If the value contains a decimal point, add it to <code>inputs</code> as a <code>Double</code>, otherwise add it as an <code>Integer</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UserInput {\n    private List&lt;Number&gt; inputs;\n\n    public UserInput(List&lt;Number&gt; inputs) {\n        this.inputs = inputs;\n    }\n\n    public List&lt;Number&gt; getUserInput(Integer number_inputs) {\n        String string;\n        for(int i=1; i &lt; number_inputs+1; i++) {\n            Scanner input = new Scanner(System.in);\n            System.out.println(&quot;Enter number &quot; + i);\n            string = input.nextLine();\n            if (string.contains(&quot;.&quot;)) {\n                this.inputs.add(Double.parseDouble(string));\n            } else {\n                this.inputs.add(Integer.parseInt(string));\n            }\n        }\n        return this.inputs;\n    }\n\n}\n</code></pre>\n<p>Then, in your <code>CalculateValues</code> class, you'll need to differentiate the results, and add accordingly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CalculateValues {\n\n    public static void main(String[] args) {\n        List&lt;Number&gt; vals = new ArrayList&lt;&gt;();\n        UserInput userInput = new UserInput(vals);\n        List&lt;Number&gt; inputValues = userInput.getUserInput(2);\n        Number numberA = inputValues.get(0);\n        Number numberB = inputValues.get(1);\n        if (numberA instanceof Integer &amp;&amp; numberB instanceof Integer)\n            System.out.println(numberA.intValue() + numberB.intValue());\n        else if (numberA instanceof Integer &amp;&amp; numberB instanceof Double)\n            System.out.println(numberA.intValue() + numberB.doubleValue());\n        else if (numberA instanceof Double &amp;&amp; numberB instanceof Integer)\n            System.out.println(numberA.doubleValue() + numberB.intValue());\n        else if (numberA instanceof Double &amp;&amp; numberB instanceof Double) {\n            System.out.println(numberA.doubleValue() + numberB.doubleValue());\n        }\n    }\n}\n</code></pre>\n<p>Ideally, you can just store all the values as <code>Double</code>. It has more than enough space to accommodate an <code>Integer</code>.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1684392279,"post_id":76278214,"comment_id":134512099,"body_markdown":"The `Scanner` should be closed, as well.","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134512099_76278214","body":"The <code>Scanner</code> should be closed, as well."},{"score":0,"post_type":"answer","creation_date":1684392382,"post_id":76278214,"comment_id":134512112,"body_markdown":"How would you handle the calculation process?  That part stumped me, since an `instanceof` check is required for a `Number` object.  Is there a closure for this?","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134512112_76278214","body":"How would you handle the calculation process?  That part stumped me, since an <code>instanceof</code> check is required for a <code>Number</code> object.  Is there a closure for this?"},{"score":0,"post_type":"answer","creation_date":1684394198,"post_id":76278214,"comment_id":134512388,"body_markdown":"@Reilas That is already taken care of with this code. OP&#39;s code did an unsafe cast from String to T, so a Strings get added to the List but the code believes them to be Integers. That is discovered when the elements are accessed, at which point there is a class cast exception trying to cast String as Integer. Remember that at runtime there is no type safety - everything is Object. There is only compile time type safety and hard casting like OP did bypasses that safety. With my code there is no cast, so it&#39;s type safe. Scanner doesn&#39;t *need* to be closed - that happens when garbage collected","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134512388_76278214","body":"@Reilas That is already taken care of with this code. OP&#39;s code did an unsafe cast from String to T, so a Strings get added to the List but the code believes them to be Integers. That is discovered when the elements are accessed, at which point there is a class cast exception trying to cast String as Integer. Remember that at runtime there is no type safety - everything is Object. There is only compile time type safety and hard casting like OP did bypasses that safety. With my code there is no cast, so it&#39;s type safe. Scanner doesn&#39;t <i>need</i> to be closed - that happens when garbage collected"},{"score":0,"post_type":"answer","creation_date":1684395296,"post_id":76278214,"comment_id":134512545,"body_markdown":"Of course it should be closed.  Why else would it implement `Closeable`?  I know what you mean, though.  It&#39;s poor practice though, since that is not always the case with other `Closeable` objects.","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134512545_76278214","body":"Of course it should be closed.  Why else would it implement <code>Closeable</code>?  I know what you mean, though.  It&#39;s poor practice though, since that is not always the case with other <code>Closeable</code> objects."},{"score":0,"post_type":"answer","creation_date":1684476578,"post_id":76278214,"comment_id":134525744,"body_markdown":"Above solution works for `Integer` and `Double` inputs. How about `String` inputs? If I try to initialize an instance of `String` type, I am getting an error here:\n\n`UserInput&lt;String&gt; userStringInput = new UserInput&lt;String&gt;(Scanner::nextLine);`\n`&lt;String&gt; inputStrings = userInput.getUserInput(2); // Error occurs here`\n\nAnd the error message is `Type mismatch: cannot convert from List&lt;Double&gt; to List&lt;String&gt;`","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134525744_76278214","body":"Above solution works for <code>Integer</code> and <code>Double</code> inputs. How about <code>String</code> inputs? If I try to initialize an instance of <code>String</code> type, I am getting an error here:  <code>UserInput&lt;String&gt; userStringInput = new UserInput&lt;String&gt;(Scanner::nextLine);</code> <code>&lt;String&gt; inputStrings = userInput.getUserInput(2); &#47;&#47; Error occurs here</code>  And the error message is <code>Type mismatch: cannot convert from List&lt;Double&gt; to List&lt;String&gt;</code>"},{"score":0,"post_type":"answer","creation_date":1684481407,"post_id":76278214,"comment_id":134526556,"body_markdown":"@Reilas - NO, this code should NOT close the Scanner.  Firstly, you should never try to close System.in.  Secondly, if you&#39;re writing a method that works with a Scanner, it&#39;s almost certainly not that method&#39;s responsibility to close the Scanner - if closing the Scanner is appropriate, then that belongs in some other piece of code.  And thirdly, as Bohemian pointed out, the garbage collector will look after closing any Scanner that it comes across, so there&#39;s no point in adding extra cruft.","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134526556_76278214","body":"@Reilas - NO, this code should NOT close the Scanner.  Firstly, you should never try to close System.in.  Secondly, if you&#39;re writing a method that works with a Scanner, it&#39;s almost certainly not that method&#39;s responsibility to close the Scanner - if closing the Scanner is appropriate, then that belongs in some other piece of code.  And thirdly, as Bohemian pointed out, the garbage collector will look after closing any Scanner that it comes across, so there&#39;s no point in adding extra cruft."},{"score":0,"post_type":"answer","creation_date":1684484898,"post_id":76278214,"comment_id":134527194,"body_markdown":"@Ry123 I assume you meant `List&lt;String&gt; inputStrings = userInput.getUserInput(2);` and not `&lt;String&gt; inputStrings = userInput.getUserInput(2);`, but I have a hard time understanding how that could not work. Please create a [mcve] on an online playground (eg http://ideone.com or https://onecompiler.com/java, etc) and share the link here.","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134527194_76278214","body":"@Ry123 I assume you meant <code>List&lt;String&gt; inputStrings = userInput.getUserInput(2);</code> and not <code>&lt;String&gt; inputStrings = userInput.getUserInput(2);</code>, but I have a hard time understanding how that could not work. Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> on an online playground (eg <a href=\"http://ideone.com\" rel=\"nofollow noreferrer\">ideone.com</a> or <a href=\"https://onecompiler.com/java\" rel=\"nofollow noreferrer\">onecompiler.com/java</a>, etc) and share the link here."},{"score":0,"post_type":"answer","creation_date":1684517959,"post_id":76278214,"comment_id":134534064,"body_markdown":"@DawoodibnKareem, then why in the JavaDoc for `Scanner` does it provide examples that all use `close`?","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134534064_76278214","body":"@DawoodibnKareem, then why in the JavaDoc for <code>Scanner</code> does it provide examples that all use <code>close</code>?"},{"score":1,"post_type":"answer","creation_date":1684535070,"post_id":76278214,"comment_id":134536638,"body_markdown":"@Reilas The doc says, and the source code confirms, that `close()` closes the input if it is Closeable. All examples in the doc have `String` input. Since String is not Closeable, calling `close()` does nothing useful, so the examples should not have that - it&#39;s nonsense. In the context of this question, the input is `System.in`, an `InputStream` which is Closeable. Calling `close()` here will close STDIN, which in some OS will nuke your terminal. The only reason to call `close()` is for input you want to close like a `FileInputStream` *and* where it&#39;s not being closed elsewhere.","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134536638_76278214","body":"@Reilas The doc says, and the source code confirms, that <code>close()</code> closes the input if it is Closeable. All examples in the doc have <code>String</code> input. Since String is not Closeable, calling <code>close()</code> does nothing useful, so the examples should not have that - it&#39;s nonsense. In the context of this question, the input is <code>System.in</code>, an <code>InputStream</code> which is Closeable. Calling <code>close()</code> here will close STDIN, which in some OS will nuke your terminal. The only reason to call <code>close()</code> is for input you want to close like a <code>FileInputStream</code> <i>and</i> where it&#39;s not being closed elsewhere."},{"score":0,"post_type":"answer","creation_date":1684536736,"post_id":76278214,"comment_id":134536817,"body_markdown":"@Bohemian, it&#39;s the official documentation, so it&#39;s obviously not non-sense.  The competence you&#39;re having is that you&#39;re implying the `close` method only closes the stream.  It&#39;s doesn&#39;t, take a look at the [openJDK - Scanner.java#close](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/Scanner.java#L1176).  It is setting both `sourceClosed` and `closed` to `true`, and is setting `source` to `null`.  While I understand you and the other poster&#39;s inference, it&#39;s just not logical to provide an empirical solution on a technical basis.","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134536817_76278214","body":"@Bohemian, it&#39;s the official documentation, so it&#39;s obviously not non-sense.  The competence you&#39;re having is that you&#39;re implying the <code>close</code> method only closes the stream.  It&#39;s doesn&#39;t, take a look at the <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/Scanner.java#L1176\" rel=\"nofollow noreferrer\">openJDK - Scanner.java#close</a>.  It is setting both <code>sourceClosed</code> and <code>closed</code> to <code>true</code>, and is setting <code>source</code> to <code>null</code>.  While I understand you and the other poster&#39;s inference, it&#39;s just not logical to provide an empirical solution on a technical basis."},{"score":1,"post_type":"answer","creation_date":1684540155,"post_id":76278214,"comment_id":134537084,"body_markdown":"@Reilas the doc is nonsense, as I have shown. And those other fields being set is done only so further reading from the input throws an exception; nothing actually useful occurs when calling close() on a Scanner whose input in a String.","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134537084_76278214","body":"@Reilas the doc is nonsense, as I have shown. And those other fields being set is done only so further reading from the input throws an exception; nothing actually useful occurs when calling close() on a Scanner whose input in a String."},{"score":0,"post_type":"answer","creation_date":1684541018,"post_id":76278214,"comment_id":134537173,"body_markdown":"@Bohemian, I guess you&#39;re right.  It isn&#39;t called a procedure for nothing, though, remember.","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134537173_76278214","body":"@Bohemian, I guess you&#39;re right.  It isn&#39;t called a procedure for nothing, though, remember."},{"score":0,"post_type":"answer","creation_date":1684549575,"post_id":76278214,"comment_id":134537594,"body_markdown":"@Reilas Examples in a Javadoc don&#39;t necessarily reflect best practice.  As I explained before, (and as Bohemian explained better), you should NEVER try to close `System.in`.  If a method does a good amount of processing on a `Scanner`, then closing the `Scanner` should be a separate operation, in a separate method, so that it can be called _only_ if it&#39;s appropriate to do so.","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134537594_76278214","body":"@Reilas Examples in a Javadoc don&#39;t necessarily reflect best practice.  As I explained before, (and as Bohemian explained better), you should NEVER try to close <code>System.in</code>.  If a method does a good amount of processing on a <code>Scanner</code>, then closing the <code>Scanner</code> should be a separate operation, in a separate method, so that it can be called <i>only</i> if it&#39;s appropriate to do so."},{"score":0,"post_type":"answer","creation_date":1684550385,"post_id":76278214,"comment_id":134537640,"body_markdown":"@DawoodibnKareem, yet, the documentation, written by the implementers of the language, show by example, doing so.  In addition to the fact that they developed the code in a manor that allows you to access a method used for closing the object.  I&#39;m sure they had a meeting and said, &quot;alright, let&#39;s add a method here that is completely useless.  We&#39;ll throw some random code in there.&quot;","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134537640_76278214","body":"@DawoodibnKareem, yet, the documentation, written by the implementers of the language, show by example, doing so.  In addition to the fact that they developed the code in a manor that allows you to access a method used for closing the object.  I&#39;m sure they had a meeting and said, &quot;alright, let&#39;s add a method here that is completely useless.  We&#39;ll throw some random code in there.&quot;"},{"score":1,"post_type":"answer","creation_date":1684551943,"post_id":76278214,"comment_id":134537719,"body_markdown":"@Reilas It&#39;s not useless, just useless *here*. The useful usecase for calling `close()` would be when the Scanner is created over a resource that should be closed asap ( eg FileInputStream) and handed to code that uses the Scanner and it was decided that this code is responsible for closing the input stream after it&#39;s finished reading bytes. Such code has no access to the Closeable resource, so the only way to close it is to call Scanner&#39;s close(). Scanner effectively wraps the InputStream and delgates closing to the input stream it wraps.","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#comment134537719_76278214","body":"@Reilas It&#39;s not useless, just useless <i>here</i>. The useful usecase for calling <code>close()</code> would be when the Scanner is created over a resource that should be closed asap ( eg FileInputStream) and handed to code that uses the Scanner and it was decided that this code is responsible for closing the input stream after it&#39;s finished reading bytes. Such code has no access to the Closeable resource, so the only way to close it is to call Scanner&#39;s close(). Scanner effectively wraps the InputStream and delgates closing to the input stream it wraps."}],"comment_count":15,"score":0,"last_activity_date":1684391188,"last_edit_date":1684391188,"creation_date":1684390701,"answer_id":76278214,"question_id":76277603,"body_markdown":"The problem is here:\r\n\r\n    T userInput = (T)input.next();\r\n\r\n`input.next()` returns a `String`. Always.\r\n\r\nTo fix this, specify the Scanner method the instance should use:\r\n\r\n```\r\npublic class UserInput&lt;T&gt; {\r\n    private Function&lt;Scanner, T&gt; reader;\r\n    \r\n    public UserInput(Function&lt;Scanner, T&gt; reader) {\r\n        this.reader = reader;\r\n    }\r\n    \r\n    public List&lt;T&gt; getUserInput(Integer number_inputs) {\r\n        List&lt;T&gt; inputs = new ArrayList&lt;&gt;();\r\n        Scanner input = new Scanner(System.in);\r\n        for (int i=1; i &lt; number_inputs+1; i++) {\r\n            System.out.println(&quot;Enter number &quot; + i);\r\n            T userInput = reader.apply(input);\r\n            inputs.add(userInput);\r\n        }\r\n        return inputs;\r\n    }\r\n}\r\n```\r\n\r\nAnd use it, for example for Double input:\r\n\r\n```\r\nUserInput&lt;Double&gt; ui = new UserInput&lt;&gt;(Scanner::nextDouble);\r\n    List&lt;Double&gt; doubles = ui.getUserInput(2);\r\n```\r\n\r\nIf there&#39;s a Scanner method for the type, just specify it using a method reference as done here.\r\n\r\nIf there isn&#39;t a method, create your own using a lambda:\r\n\r\n    UserInput&lt;MyType&gt; ui = new UserInput&lt;&gt;(scanner -&gt; /* some code that returns a MyType using scanner */);\r\n\r\nNote the following other improvements:\r\n\r\n - deletion of the unnecessary `inputs` field, especially the unnecessary re-initialisation via constructor\r\n - Moving initialisation of the Scanner to *before* the loop, so you&#39;re not creating a new Scanner every iteration \r\n\r\n","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list/76278214#76278214","title":"Unable to perform mathematical operations on Java List","body":"<p>The problem is here:</p>\n<pre><code>T userInput = (T)input.next();\n</code></pre>\n<p><code>input.next()</code> returns a <code>String</code>. Always.</p>\n<p>To fix this, specify the Scanner method the instance should use:</p>\n<pre><code>public class UserInput&lt;T&gt; {\n    private Function&lt;Scanner, T&gt; reader;\n    \n    public UserInput(Function&lt;Scanner, T&gt; reader) {\n        this.reader = reader;\n    }\n    \n    public List&lt;T&gt; getUserInput(Integer number_inputs) {\n        List&lt;T&gt; inputs = new ArrayList&lt;&gt;();\n        Scanner input = new Scanner(System.in);\n        for (int i=1; i &lt; number_inputs+1; i++) {\n            System.out.println(&quot;Enter number &quot; + i);\n            T userInput = reader.apply(input);\n            inputs.add(userInput);\n        }\n        return inputs;\n    }\n}\n</code></pre>\n<p>And use it, for example for Double input:</p>\n<pre><code>UserInput&lt;Double&gt; ui = new UserInput&lt;&gt;(Scanner::nextDouble);\n    List&lt;Double&gt; doubles = ui.getUserInput(2);\n</code></pre>\n<p>If there's a Scanner method for the type, just specify it using a method reference as done here.</p>\n<p>If there isn't a method, create your own using a lambda:</p>\n<pre><code>UserInput&lt;MyType&gt; ui = new UserInput&lt;&gt;(scanner -&gt; /* some code that returns a MyType using scanner */);\n</code></pre>\n<p>Note the following other improvements:</p>\n<ul>\n<li>deletion of the unnecessary <code>inputs</code> field, especially the unnecessary re-initialisation via constructor</li>\n<li>Moving initialisation of the Scanner to <em>before</em> the loop, so you're not creating a new Scanner every iteration</li>\n</ul>\n"}],"comment_count":4,"is_answered":false,"view_count":114,"answer_count":2,"score":1,"last_activity_date":1702167091,"creation_date":1684381651,"question_id":76277603,"body_markdown":"I am new to Java and need some clarification on handling ```List``` / ```ArrayList``` based on values that are added to the list from user inputs. \r\n \r\nUser inputs are obtained from a ```UserInput``` class with a ```getUserInput()``` method. This method takes in an integer ```number_inputs``` and returns a list of user inputs with length of ```number_inputs```. The input type could vary (A user could input Integer or Double) hence it is generically typed ```T```.\r\n\r\n```UserInput``` class looks like this:\r\n```\r\npublic class UserInput&lt;T&gt; {\r\n\tprivate List&lt;T&gt; inputs = new ArrayList&lt;&gt;();\r\n\t\r\n\tpublic UserInput(List&lt;T&gt; inputs) {\r\n\t\tthis.inputs = inputs;\r\n\t}\r\n\t\r\n\tpublic List&lt;T&gt; getUserInput(Integer number_inputs) {\r\n\t\t\tfor(int i=1; i &lt; number_inputs+1; i++) {\r\n\t\t\t\tScanner input = new Scanner(System.in);\r\n\t\t\t\tSystem.out.println(&quot;Enter number &quot; + i);\r\n\t\t\t\tT userInput = (T) input.next();\r\n\t\t\t\tthis.inputs.add(userInput);\r\n\t\t\t}\r\n\t\t\treturn this.inputs;\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\n```getUserInputs()``` is then called in the main class ```CalculateValues```. Given the list of user inputs returned, I want to perform mathematical operations on the values (Eg. sum, division, etc). However the code below is not working with the error:\r\n```Exception in thread &quot;main&quot; java.lang.ClassCastException: class java.lang.String cannot be cast to class java.lang.Integer (java.lang.String and java.lang.Integer are in module java.base of loader &#39;bootstrap&#39;)```\r\n```\r\npublic class CalculateValues {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tList&lt;Integer&gt; vals = new ArrayList&lt;&gt;();\r\n\t\tUserInput&lt;Integer&gt; userInput = new UserInput&lt;&gt;(vals);\r\n\t\tList&lt;Integer&gt; inputValues = userInput.getUserInput(2);\r\n\t\tSystem.out.println(inputValues.get(0) + inputValues.get(1)); // Error occurs here\r\n\t}\r\n\r\n}\r\n```\r\nIs there a way to do this without making use of array streams? I am mainly confused why the error is showing since my list values in ```inputValues``` are already typed as Integers, so why is the compiler detecting my list values as Strings?\r\n\r\n","link":"https://stackoverflow.com/questions/76277603/unable-to-perform-mathematical-operations-on-java-list","title":"Unable to perform mathematical operations on Java List","body":"<p>I am new to Java and need some clarification on handling <code>List</code> / <code>ArrayList</code> based on values that are added to the list from user inputs.</p>\n<p>User inputs are obtained from a <code>UserInput</code> class with a <code>getUserInput()</code> method. This method takes in an integer <code>number_inputs</code> and returns a list of user inputs with length of <code>number_inputs</code>. The input type could vary (A user could input Integer or Double) hence it is generically typed <code>T</code>.</p>\n<p><code>UserInput</code> class looks like this:</p>\n<pre><code>public class UserInput&lt;T&gt; {\n    private List&lt;T&gt; inputs = new ArrayList&lt;&gt;();\n    \n    public UserInput(List&lt;T&gt; inputs) {\n        this.inputs = inputs;\n    }\n    \n    public List&lt;T&gt; getUserInput(Integer number_inputs) {\n            for(int i=1; i &lt; number_inputs+1; i++) {\n                Scanner input = new Scanner(System.in);\n                System.out.println(&quot;Enter number &quot; + i);\n                T userInput = (T) input.next();\n                this.inputs.add(userInput);\n            }\n            return this.inputs;\n    }\n    \n}\n</code></pre>\n<p><code>getUserInputs()</code> is then called in the main class <code>CalculateValues</code>. Given the list of user inputs returned, I want to perform mathematical operations on the values (Eg. sum, division, etc). However the code below is not working with the error:\n<code>Exception in thread &quot;main&quot; java.lang.ClassCastException: class java.lang.String cannot be cast to class java.lang.Integer (java.lang.String and java.lang.Integer are in module java.base of loader 'bootstrap')</code></p>\n<pre><code>public class CalculateValues {\n\n    public static void main(String[] args) {\n        List&lt;Integer&gt; vals = new ArrayList&lt;&gt;();\n        UserInput&lt;Integer&gt; userInput = new UserInput&lt;&gt;(vals);\n        List&lt;Integer&gt; inputValues = userInput.getUserInput(2);\n        System.out.println(inputValues.get(0) + inputValues.get(1)); // Error occurs here\n    }\n\n}\n</code></pre>\n<p>Is there a way to do this without making use of array streams? I am mainly confused why the error is showing since my list values in <code>inputValues</code> are already typed as Integers, so why is the compiler detecting my list values as Strings?</p>\n"},{"tags":["java","datetime","timezone","dst","timezone-offset"],"comments":[{"score":0,"post_type":"question","creation_date":1685077480,"post_id":76337770,"comment_id":134613679,"body_markdown":"That&#39;s not how the standard java libraries work (they&#39;d be in zone Europe/Helsinki, and know what the offset is by checking the date). There simply isn&#39;t such a thing as &#39;EET&#39;. Perhaps you are reading in stamps from a system that does use obsolete 3/4-letter codes, or you&#39;re using obsolete java libraries such as `java.util.Date`. Edit the question and include your inputs and/or your code, probably both.","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l#comment134613679_76337770","body":"That&#39;s not how the standard java libraries work (they&#39;d be in zone Europe/Helsinki, and know what the offset is by checking the date). There simply isn&#39;t such a thing as &#39;EET&#39;. Perhaps you are reading in stamps from a system that does use obsolete 3/4-letter codes, or you&#39;re using obsolete java libraries such as <code>java.util.Date</code>. Edit the question and include your inputs and/or your code, probably both."},{"score":0,"post_type":"question","creation_date":1685078480,"post_id":76337770,"comment_id":134613754,"body_markdown":"@rzwitserloot, [EET](https://en.m.wikipedia.org/wiki/Eastern_European_Time) is _Eastern European Time_, UTC+2.","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l#comment134613754_76337770","body":"@rzwitserloot, <a href=\"https://en.m.wikipedia.org/wiki/Eastern_European_Time\" rel=\"nofollow noreferrer\">EET</a> is <i>Eastern European Time</i>, UTC+2."},{"score":0,"post_type":"question","creation_date":1685078999,"post_id":76337770,"comment_id":134613803,"body_markdown":"What parameter would be used to determine if the returned value of _EET_ vs. _EEST_ is valid?  The JVM will return whichever time-zone the system is using.  How would you know when to deviate?  You&#39;re saying you will already know what country the device is in?","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l#comment134613803_76337770","body":"What parameter would be used to determine if the returned value of <i>EET</i> vs. <i>EEST</i> is valid?  The JVM will return whichever time-zone the system is using.  How would you know when to deviate?  You&#39;re saying you will already know what country the device is in?"},{"score":0,"post_type":"question","creation_date":1685079848,"post_id":76337770,"comment_id":134613902,"body_markdown":"@Reilas, The device that is giving me the value has stored the time Zone as EET, which is wrong, it should&#39;ve been EEST, I will not know the country of the device, the only information I have is time Zone is EET in device.","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l#comment134613902_76337770","body":"@Reilas, The device that is giving me the value has stored the time Zone as EET, which is wrong, it should&#39;ve been EEST, I will not know the country of the device, the only information I have is time Zone is EET in device."},{"score":1,"post_type":"question","creation_date":1685103901,"post_id":76337770,"comment_id":134618519,"body_markdown":"Obviously this is an excellent illustration of why you shouldn&#39;t use the deprecated time zone acronyms (e.g. use `Europe/Helsinki` as mentioned), but why would your stored timezone be distinct from the default timezone of the VM on which it&#39;s run?","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l#comment134618519_76337770","body":"Obviously this is an excellent illustration of why you shouldn&#39;t use the deprecated time zone acronyms (e.g. use <code>Europe&#47;Helsinki</code> as mentioned), but why would your stored timezone be distinct from the default timezone of the VM on which it&#39;s run?"},{"score":2,"post_type":"question","creation_date":1685110256,"post_id":76337770,"comment_id":134620056,"body_markdown":"@Reilas There isn&#39;t such a thing as EET __in the java.time timezone system__ - these codes are obsolete (they neither cover reality nor are they unique) - timezone identifiers as used by java.time use `Europe/Helsinki`. You should read the `java.time` javadoc, probably :)","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l#comment134620056_76337770","body":"@Reilas There isn&#39;t such a thing as EET <b>in the java.time timezone system</b> - these codes are obsolete (they neither cover reality nor are they unique) - timezone identifiers as used by java.time use <code>Europe&#47;Helsinki</code>. You should read the <code>java.time</code> javadoc, probably :)"},{"score":0,"post_type":"question","creation_date":1685128917,"post_id":76337770,"comment_id":134623533,"body_markdown":"@rzwitserloot, so I don&#39;t understand your comment.  You are re-iterating what the question is?  He states that he wants to get the UTC offset for _EET_.","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l#comment134623533_76337770","body":"@rzwitserloot, so I don&#39;t understand your comment.  You are re-iterating what the question is?  He states that he wants to get the UTC offset for <i>EET</i>."},{"score":0,"post_type":"question","creation_date":1685129622,"post_id":76337770,"comment_id":134623647,"body_markdown":"@UllaBritta, have you reviewed the [TimeZone](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TimeZone.html) class?  It might have the procedures you&#39;re looking for.","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l#comment134623647_76337770","body":"@UllaBritta, have you reviewed the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TimeZone.html\" rel=\"nofollow noreferrer\">TimeZone</a> class?  It might have the procedures you&#39;re looking for."},{"score":2,"post_type":"question","creation_date":1685214769,"post_id":76337770,"comment_id":134631604,"body_markdown":"That won&#39;t suffice. Given a time zone abbreviation, say, CST, it often has multiple interpretations, that is, may refer to several time zones on different sides of the planet. Even if you can narrow EET down to mean Eastern European Time, many countries use that. They don&#39;t all use summer time, and not in the same years and don&#39;t change to summer time on the same date. What you are asking is way outside the possible.","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l#comment134631604_76337770","body":"That won&#39;t suffice. Given a time zone abbreviation, say, CST, it often has multiple interpretations, that is, may refer to several time zones on different sides of the planet. Even if you can narrow EET down to mean Eastern European Time, many countries use that. They don&#39;t all use summer time, and not in the same years and don&#39;t change to summer time on the same date. What you are asking is way outside the possible."}],"answers":[{"comments":[{"score":1,"post_type":"answer","creation_date":1685257570,"post_id":76344237,"comment_id":134634577,"body_markdown":"The link you provide tells us to use the `ZoneId` and `ZoneOffset` classes. Yet in your code you are using the poorly designed and long outdated `TimeZone` and `Calendar` classes. That&#39;s bad idea.","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l/76344237#comment134634577_76344237","body":"The link you provide tells us to use the <code>ZoneId</code> and <code>ZoneOffset</code> classes. Yet in your code you are using the poorly designed and long outdated <code>TimeZone</code> and <code>Calendar</code> classes. That&#39;s bad idea."},{"score":0,"post_type":"answer","creation_date":1685258567,"post_id":76344237,"comment_id":134634648,"body_markdown":"@OleV.V., yes, as an alternative.  Where does the design flaw come-into-play with the task?  Additionally, how can code be considered _&quot;long outdated&quot;_?  It&#39;s a math equation.","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l/76344237#comment134634648_76344237","body":"@OleV.V., yes, as an alternative.  Where does the design flaw come-into-play with the task?  Additionally, how can code be considered <i>&quot;long outdated&quot;</i>?  It&#39;s a math equation."},{"score":0,"post_type":"answer","creation_date":1685258910,"post_id":76344237,"comment_id":134634682,"body_markdown":"@OleV.V., from the tutorial, paraphrased, _&quot;... the Calendar class was not type safe.&quot;_, _&quot;because the classes were mutable, they could not be used in multithreaded applications.&quot;_, and _&quot;bugs in application code were common due to the unusual numbering of months and the lack of type safety&quot;_.  Those factors aren&#39;t very limiting here.","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l/76344237#comment134634682_76344237","body":"@OleV.V., from the tutorial, paraphrased, <i>&quot;... the Calendar class was not type safe.&quot;</i>, <i>&quot;because the classes were mutable, they could not be used in multithreaded applications.&quot;</i>, and <i>&quot;bugs in application code were common due to the unusual numbering of months and the lack of type safety&quot;</i>.  Those factors aren&#39;t very limiting here."},{"score":0,"post_type":"answer","creation_date":1685258967,"post_id":76344237,"comment_id":134634700,"body_markdown":"@OleV.V., you should read the tutorial.","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l/76344237#comment134634700_76344237","body":"@OleV.V., you should read the tutorial."},{"score":2,"post_type":"answer","creation_date":1685259134,"post_id":76344237,"comment_id":134634723,"body_markdown":"(1) It&#39;s always better to get into the habit of using the modern classes and forgetting about the old ones from the outset. (2) For many abbreviations `TimeZone.getTimeZone()` will fail to interpret it and will incorrectly give you GMT. (3) `TimeZone` has got a confusing array of DST related methods. I can&#39;t understand how they work and I suspect that some of them are flawed.","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l/76344237#comment134634723_76344237","body":"(1) It&#39;s always better to get into the habit of using the modern classes and forgetting about the old ones from the outset. (2) For many abbreviations <code>TimeZone.getTimeZone()</code> will fail to interpret it and will incorrectly give you GMT. (3) <code>TimeZone</code> has got a confusing array of DST related methods. I can&#39;t understand how they work and I suspect that some of them are flawed."},{"score":1,"post_type":"answer","creation_date":1685259359,"post_id":76344237,"comment_id":134634746,"body_markdown":"Funny, I was thinking that you should read the tutorial. And follow it.","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l/76344237#comment134634746_76344237","body":"Funny, I was thinking that you should read the tutorial. And follow it."},{"score":0,"post_type":"answer","creation_date":1685282887,"post_id":76344237,"comment_id":134637101,"body_markdown":"@OleV.V., a good habit?  How about this, read a book.  Try a topic on metaphysics.  You need to consider what is called _context_.  And, I don&#39;t recommend teaching someone a habit.","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l/76344237#comment134637101_76344237","body":"@OleV.V., a good habit?  How about this, read a book.  Try a topic on metaphysics.  You need to consider what is called <i>context</i>.  And, I don&#39;t recommend teaching someone a habit."}],"comment_count":7,"score":-3,"last_activity_date":1702167074,"last_edit_date":1702167074,"creation_date":1685135982,"answer_id":76344237,"question_id":76337770,"body_markdown":"Here is tutorial in reference to TimeZone offsets.  \r\n[Time Zone and Offset Classes (The Java&amp;trade; Tutorials &amp;gt; Date Time &amp;gt; Standard Calendar)](https://docs.oracle.com/javase/tutorial/datetime/iso/timezones.html).\r\n\r\nAs an alternative to get the UTC offset you can use the _[TimeZone](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TimeZone.html)_ class.  \r\nTo create a new _TimeZone_ object, you can use the _[getTimeZone](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TimeZone.html#getTimeZone(java.lang.String))_ method.\r\n\r\nFor this example, I&#39;ll use _EET_, or _Eastern European Time_.\r\n\r\n```java\r\nTimeZone timeZone = TimeZone.getTimeZone(&quot;EET&quot;);\r\n```\r\n\r\nThe _TimeZone_ class offers the _[getOffset](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TimeZone.html#getOffset(long))_ method, which takes either a set of values, or a [Unix-epoch](https://en.wikipedia.org/wiki/Unix_time) timestamp as a parameter.  \r\nWe can use a _[Calendar](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Calendar.html)_ object to obtain a time value for the _UTC_, and a timestamp using the _[getTimeInMillis](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Calendar.html#getTimeInMillis())_ method.\r\n\r\n```java\r\nCalendar calendar = Calendar.getInstance(TimeZone.getTimeZone(&quot;UTC&quot;));\r\nlong offset = timeZone.getOffset(calendar.getTimeInMillis());\r\n```\r\n\r\nIf we printed the _offset_ we&#39;d get the following.\r\n\r\n```none\r\n10800000\r\n```\r\n\r\nWhich is equivalent to _3 hours_, or 3 &amp;times; 60 &amp;times; 60 &amp;times; 1000.\r\n\r\n\r\nIn terms of _DST_, or _Daylight Saving Time_, you can utilize the following methods:  [useDaylightTime](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TimeZone.html#useDaylightTime()), and [getDSTSavings](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TimeZone.html#getDSTSavings()), \r\n\r\nThe first method will return _true_ if the time-zone observes daylight savings, while the latter will return a value in milliseconds to be negated from the UTC offset.\r\n\r\nDaylight Saving Time occurs at different times for different areas.\r\n\r\nYou can use a _[Date](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Date.html)_ object, obtainable via a _Calendar_ object, to query whether the timestamp is currently observing DST or not.\r\n\r\n```java\r\nTimeZone timeZone = TimeZone.getTimeZone(&quot;EET&quot;);\r\nCalendar calendar = Calendar.getInstance(timeZone);\r\nboolean dst = timeZone.inDaylightTime(calendar.getTime());\r\n```","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l/76344237#76344237","title":"How to get Offset from a Time Zone of a country which uses different time zone like EEST and EET","body":"<p>Here is tutorial in reference to TimeZone offsets.<br />\n<a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/timezones.html\" rel=\"nofollow noreferrer\">Time Zone and Offset Classes (The Java Tutorials &gt; Date Time &gt; Standard Calendar)</a>.</p>\n<p>As an alternative to get the UTC offset you can use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TimeZone.html\" rel=\"nofollow noreferrer\">TimeZone</a></em> class.<br />\nTo create a new <em>TimeZone</em> object, you can use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TimeZone.html#getTimeZone(java.lang.String)\" rel=\"nofollow noreferrer\">getTimeZone</a></em> method.</p>\n<p>For this example, I'll use <em>EET</em>, or <em>Eastern European Time</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>TimeZone timeZone = TimeZone.getTimeZone(&quot;EET&quot;);\n</code></pre>\n<p>The <em>TimeZone</em> class offers the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TimeZone.html#getOffset(long)\" rel=\"nofollow noreferrer\">getOffset</a></em> method, which takes either a set of values, or a <a href=\"https://en.wikipedia.org/wiki/Unix_time\" rel=\"nofollow noreferrer\">Unix-epoch</a> timestamp as a parameter.<br />\nWe can use a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Calendar.html\" rel=\"nofollow noreferrer\">Calendar</a></em> object to obtain a time value for the <em>UTC</em>, and a timestamp using the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Calendar.html#getTimeInMillis()\" rel=\"nofollow noreferrer\">getTimeInMillis</a></em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone(&quot;UTC&quot;));\nlong offset = timeZone.getOffset(calendar.getTimeInMillis());\n</code></pre>\n<p>If we printed the <em>offset</em> we'd get the following.</p>\n<pre class=\"lang-none prettyprint-override\"><code>10800000\n</code></pre>\n<p>Which is equivalent to <em>3 hours</em>, or 3  60  60  1000.</p>\n<p>In terms of <em>DST</em>, or <em>Daylight Saving Time</em>, you can utilize the following methods:  <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TimeZone.html#useDaylightTime()\" rel=\"nofollow noreferrer\">useDaylightTime</a>, and <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/TimeZone.html#getDSTSavings()\" rel=\"nofollow noreferrer\">getDSTSavings</a>,</p>\n<p>The first method will return <em>true</em> if the time-zone observes daylight savings, while the latter will return a value in milliseconds to be negated from the UTC offset.</p>\n<p>Daylight Saving Time occurs at different times for different areas.</p>\n<p>You can use a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Date.html\" rel=\"nofollow noreferrer\">Date</a></em> object, obtainable via a <em>Calendar</em> object, to query whether the timestamp is currently observing DST or not.</p>\n<pre class=\"lang-java prettyprint-override\"><code>TimeZone timeZone = TimeZone.getTimeZone(&quot;EET&quot;);\nCalendar calendar = Calendar.getInstance(timeZone);\nboolean dst = timeZone.inDaylightTime(calendar.getTime());\n</code></pre>\n"},{"comment_count":0,"score":2,"last_activity_date":1685305498,"last_edit_date":1685305498,"creation_date":1685290678,"answer_id":76352438,"question_id":76337770,"body_markdown":"# tl;dr\r\n\r\n&gt; determine if DST is active or no\r\n\r\n    ZoneId\r\n    .of( &quot;Europe/Helsinki&quot; ) \r\n    .getRules()\r\n    .isDaylightSavings(\r\n        Instant.now()\r\n    )\r\n\r\n\r\n# Details\r\n\r\nEEST and EET are *not* time zones. They merely give an ambiguous hint as to what time zone might be intended, with an indication of whether Daylight Saving Time (DST) is in effect. These pseudo-zones are not standardized, and are not even unique/distinct. These should be used only when localizing for presentation to a user. These should never be used for data storage, data exchange, or business logic. \r\n\r\nYou said:\r\n\r\n&gt; Now we know EEST and EET have different offset&#39;s (+3 and +2 respectively)\r\n\r\nNo, we do *not* know that. There is no official/standard definition for the offsets implied by EEST and EET. The time zones implied by EEST and EET may have different offsets on some dates as their politicians may start/stop DST on different dates. Or the politicians may introduce other anomalies beside DST; politicians are unpredictable. \r\n\r\nYou said:\r\n\r\n&gt;I want to get the offset of a time zone from a country where a device is in. \r\n\r\nAs for determining time zone by location, that is presumptuous. The only time zone that matters for presentation is the users expected/desired time zone. You can *guess* what that might be. But where critical, you must confirm with the user explicitly. \r\n\r\nYou said:\r\n\r\n&gt;`Calendar calendar = `\r\n\r\nYou are using terribly flawed date-time classes that were years ago supplanted by the modern *java.time* classes defined in JSR 310. \r\n\r\nYou said:\r\n\r\n&gt; determining if the current time zone used in this country is actually EET or EEST (or determine if DST is active or no)\r\n\r\nFirst, determine a real time zone. Real time zones have a name in format of `Continent/Region`. For example, `Africa/Casablanca` or `Pacific/Auckland`. For Finland, the only time zone is `Europe/Helsinki`.\r\n\r\n    ZoneId z = ZoneId.of( &quot;Europe/Helsinki&quot; ) ;\r\n\r\nGet the rules defined for that zone. \r\n\r\n    ZoneRules rules = z.getRules() ;\r\n\r\nCapture the current moment as seen with an offset from UTC of zero hours-minutes-seconds. \r\n\r\n    Instant now = Instant.now() ;\r\n\r\nInterrogate the rules for that moment, asking if DST is in effect. \r\n\r\n    boolean isDST = rules.isDaylightSavings( now ) ;\r\n\r\nYou said:\r\n    \r\n&gt; I cannot use Continent/city format since the Only information I have from the device is EET timezone.\r\n\r\nThen you have incomplete information, and your task is impossible. \r\n\r\nThis is like asking for the current money exchange rate for dollar but you dont know if that is the Australia dollar, the Canada dollar, the Hong Kong dollar, or the United States dollar. \r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l/76352438#76352438","title":"How to get Offset from a Time Zone of a country which uses different time zone like EEST and EET","body":"<h1>tl;dr</h1>\n<blockquote>\n<p>determine if DST is active or no</p>\n</blockquote>\n<pre><code>ZoneId\n.of( &quot;Europe/Helsinki&quot; ) \n.getRules()\n.isDaylightSavings(\n    Instant.now()\n)\n</code></pre>\n<h1>Details</h1>\n<p>EEST and EET are <em>not</em> time zones. They merely give an ambiguous hint as to what time zone might be intended, with an indication of whether Daylight Saving Time (DST) is in effect. These pseudo-zones are not standardized, and are not even unique/distinct. These should be used only when localizing for presentation to a user. These should never be used for data storage, data exchange, or business logic.</p>\n<p>You said:</p>\n<blockquote>\n<p>Now we know EEST and EET have different offset's (+3 and +2 respectively)</p>\n</blockquote>\n<p>No, we do <em>not</em> know that. There is no official/standard definition for the offsets implied by EEST and EET. The time zones implied by EEST and EET may have different offsets on some dates as their politicians may start/stop DST on different dates. Or the politicians may introduce other anomalies beside DST; politicians are unpredictable.</p>\n<p>You said:</p>\n<blockquote>\n<p>I want to get the offset of a time zone from a country where a device is in.</p>\n</blockquote>\n<p>As for determining time zone by location, that is presumptuous. The only time zone that matters for presentation is the users expected/desired time zone. You can <em>guess</em> what that might be. But where critical, you must confirm with the user explicitly.</p>\n<p>You said:</p>\n<blockquote>\n<p><code>Calendar calendar = </code></p>\n</blockquote>\n<p>You are using terribly flawed date-time classes that were years ago supplanted by the modern <em>java.time</em> classes defined in JSR 310.</p>\n<p>You said:</p>\n<blockquote>\n<p>determining if the current time zone used in this country is actually EET or EEST (or determine if DST is active or no)</p>\n</blockquote>\n<p>First, determine a real time zone. Real time zones have a name in format of <code>Continent/Region</code>. For example, <code>Africa/Casablanca</code> or <code>Pacific/Auckland</code>. For Finland, the only time zone is <code>Europe/Helsinki</code>.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;Europe/Helsinki&quot; ) ;\n</code></pre>\n<p>Get the rules defined for that zone.</p>\n<pre><code>ZoneRules rules = z.getRules() ;\n</code></pre>\n<p>Capture the current moment as seen with an offset from UTC of zero hours-minutes-seconds.</p>\n<pre><code>Instant now = Instant.now() ;\n</code></pre>\n<p>Interrogate the rules for that moment, asking if DST is in effect.</p>\n<pre><code>boolean isDST = rules.isDaylightSavings( now ) ;\n</code></pre>\n<p>You said:</p>\n<blockquote>\n<p>I cannot use Continent/city format since the Only information I have from the device is EET timezone.</p>\n</blockquote>\n<p>Then you have incomplete information, and your task is impossible.</p>\n<p>This is like asking for the current money exchange rate for dollar but you dont know if that is the Australia dollar, the Canada dollar, the Hong Kong dollar, or the United States dollar.</p>\n"}],"comment_count":9,"is_answered":true,"view_count":196,"answer_count":2,"score":-2,"last_activity_date":1702167074,"creation_date":1685077028,"last_edit_date":1685078678,"question_id":76337770,"body_markdown":"I want to get the offset of a time zone from a country where a device is in. Let&#39;s take an example of a device which is in Finland, Finland is currently using EEST, but for some reason my device has stored the \r\ntime zone as EET. Now we know EEST and EET have different offset&#39;s (+3 and +2 respectively). So I want a java code which will give me the correct offset by taking the time zone in EET, determining if the current time zone used in this country is actually EET or EEST (or determine if DST is active or no), and returning me the correct offset.\r\n\r\nNote: EEST and EET is just an example I have used, I would like the code to work with any country which uses more than one Time zone at different time of the year.\r\n\r\nI cannot use Continent/city format since the Only information I have from the device is EET timezone.","link":"https://stackoverflow.com/questions/76337770/how-to-get-offset-from-a-time-zone-of-a-country-which-uses-different-time-zone-l","title":"How to get Offset from a Time Zone of a country which uses different time zone like EEST and EET","body":"<p>I want to get the offset of a time zone from a country where a device is in. Let's take an example of a device which is in Finland, Finland is currently using EEST, but for some reason my device has stored the\ntime zone as EET. Now we know EEST and EET have different offset's (+3 and +2 respectively). So I want a java code which will give me the correct offset by taking the time zone in EET, determining if the current time zone used in this country is actually EET or EEST (or determine if DST is active or no), and returning me the correct offset.</p>\n<p>Note: EEST and EET is just an example I have used, I would like the code to work with any country which uses more than one Time zone at different time of the year.</p>\n<p>I cannot use Continent/city format since the Only information I have from the device is EET timezone.</p>\n"},{"tags":["java","integer"],"comments":[{"score":2,"post_type":"question","creation_date":1697763992,"post_id":77327772,"comment_id":136323906,"body_markdown":"Examples in questions of this type should include input (), expected output (), and actual output (). There is a lot more to your code than the example indicates.  I think the description of the problem needs improvement.  Please take the [tour](https://stackoverflow.com/tour), see [How to Ask](https://stackoverflow.com/help/how-to-ask), and some of the linked pages","link":"https://stackoverflow.com/questions/77327772/trying-to-add-one-to-array-of-integers-and-return-array#comment136323906_77327772","body":"Examples in questions of this type should include input (), expected output (), and actual output (). There is a lot more to your code than the example indicates.  I think the description of the problem needs improvement.  Please take the <a href=\"https://stackoverflow.com/tour\">tour</a>, see <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>, and some of the linked pages"},{"score":2,"post_type":"question","creation_date":1697764083,"post_id":77327772,"comment_id":136323916,"body_markdown":"If all you want to do is increment the last element of an array, `if (digits.length &gt; 0) {  digits[digits.length - 1] += 1; }`","link":"https://stackoverflow.com/questions/77327772/trying-to-add-one-to-array-of-integers-and-return-array#comment136323916_77327772","body":"If all you want to do is increment the last element of an array, <code>if (digits.length &gt; 0) {  digits[digits.length - 1] += 1; }</code>"},{"score":3,"post_type":"question","creation_date":1697764093,"post_id":77327772,"comment_id":136323919,"body_markdown":"I suspect that input of `[9, 9]` should return `[1, 0, 0]`. Is that correct?","link":"https://stackoverflow.com/questions/77327772/trying-to-add-one-to-array-of-integers-and-return-array#comment136323919_77327772","body":"I suspect that input of <code>[9, 9]</code> should return <code>[1, 0, 0]</code>. Is that correct?"},{"score":0,"post_type":"question","creation_date":1697765116,"post_id":77327772,"comment_id":136324007,"body_markdown":"@Bohemian yes that&#39;s correct.","link":"https://stackoverflow.com/questions/77327772/trying-to-add-one-to-array-of-integers-and-return-array#comment136324007_77327772","body":"@Bohemian yes that&#39;s correct."},{"score":0,"post_type":"question","creation_date":1697767501,"post_id":77327772,"comment_id":136324186,"body_markdown":"You really need to edit your question and explain what you want.  I thought @OldDogProgrammer had the right answer (although much simpler than your attempt).  You&#39;re input and expected output don&#39;t help add all.","link":"https://stackoverflow.com/questions/77327772/trying-to-add-one-to-array-of-integers-and-return-array#comment136324186_77327772","body":"You really need to edit your question and explain what you want.  I thought @OldDogProgrammer had the right answer (although much simpler than your attempt).  You&#39;re input and expected output don&#39;t help add all."},{"score":0,"post_type":"question","creation_date":1697769493,"post_id":77327772,"comment_id":136324330,"body_markdown":"A number is represented as an `int` array, with each element in the array representing one digit of the number. Code the method to increment the represented number by 1. `public static int[] plusOne (int[] digits)`. Parameter `digits` represents the number. The method returns the result of incrementing the number represented by `digits`.  There still remains a question: Is the method allowed to modify elements of `digits`? Or must they be unaltered?","link":"https://stackoverflow.com/questions/77327772/trying-to-add-one-to-array-of-integers-and-return-array#comment136324330_77327772","body":"A number is represented as an <code>int</code> array, with each element in the array representing one digit of the number. Code the method to increment the represented number by 1. <code>public static int[] plusOne (int[] digits)</code>. Parameter <code>digits</code> represents the number. The method returns the result of incrementing the number represented by <code>digits</code>.  There still remains a question: Is the method allowed to modify elements of <code>digits</code>? Or must they be unaltered?"},{"score":1,"post_type":"question","creation_date":1697770805,"post_id":77327772,"comment_id":136324431,"body_markdown":"@Old you *must* return a new array for the cases of all-9&#39;s input, so might as well do it always. Whether you mutate the input of not is a coding discipline thing, but mutating input is generally to be avoided.","link":"https://stackoverflow.com/questions/77327772/trying-to-add-one-to-array-of-integers-and-return-array#comment136324431_77327772","body":"@Old you <i>must</i> return a new array for the cases of all-9&#39;s input, so might as well do it always. Whether you mutate the input of not is a coding discipline thing, but mutating input is generally to be avoided."},{"score":0,"post_type":"question","creation_date":1697812737,"post_id":77327772,"comment_id":136330763,"body_markdown":"I agree with the comment from @Bohemian. That&#39;s why I&#39;m suspicious of answers that modify the `digits` argument. If the process modifies elements of `digits`, and then discovers, each element contained `9`, it might *return* the correct result, but could leave the array in the calling program with element values that are neither correct &quot;before&quot; nor &quot;after&quot;.","link":"https://stackoverflow.com/questions/77327772/trying-to-add-one-to-array-of-integers-and-return-array#comment136330763_77327772","body":"I agree with the comment from @Bohemian. That&#39;s why I&#39;m suspicious of answers that modify the <code>digits</code> argument. If the process modifies elements of <code>digits</code>, and then discovers, each element contained <code>9</code>, it might <i>return</i> the correct result, but could leave the array in the calling program with element values that are neither correct &quot;before&quot; nor &quot;after&quot;."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1702167066,"last_edit_date":1702167066,"creation_date":1697765173,"answer_id":77327850,"question_id":77327772,"body_markdown":"Your variable is [over-flowing][1].\r\n\r\nUse the [`BigInteger`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/math/BigInteger.html) class.\r\n\r\n```java\r\nimport static java.math.BigInteger.*;\r\n```\r\n\r\n```java\r\nint[] plusOne(int[] digits) {\r\n    BigInteger results = ZERO;\r\n    for (int d : digits) {\r\n        results = results.multiply(TEN);\r\n        results = results.add(new BigInteger(String.valueOf(d)));\r\n    }\r\n    results = results.add(ONE);\r\n    String resultsLength = results.toString();\r\n\r\n    int newDigits[] = new int[resultsLength.length()];\r\n\r\n    for (int i =0; i&lt;resultsLength.length(); i++) {\r\n\r\n        newDigits[i] = resultsLength.charAt(i) - &#39;0&#39;;\r\n    }\r\n\r\n    return newDigits;\r\n}\r\n```\r\n\r\nOr, use a _[stream](https://docs.oracle.com/javase/tutorial/collections/streams/index.html)_.\r\n\r\n```java\r\nint[] plusOne(int[] digits) {\r\n    return\r\n        IntStream.of(digits)\r\n                 .mapToObj(x -&gt; new BigInteger(String.valueOf(x)))\r\n                 .reduce(ZERO, (a, b) -&gt; a.multiply(TEN).add(b))\r\n                 .add(ONE)\r\n                 .toString()\r\n                 .chars()\r\n                 .map(x -&gt; Character.digit(x, 10))\r\n                 .toArray();\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[1, 2, 4]\r\n[9, 8, 7, 6, 5, 4, 3, 2, 1, 1]\r\n```\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Integer_overflow","link":"https://stackoverflow.com/questions/77327772/trying-to-add-one-to-array-of-integers-and-return-array/77327850#77327850","title":"Trying to add one to array of integers and return array","body":"<p>Your variable is <a href=\"https://en.wikipedia.org/wiki/Integer_overflow\" rel=\"nofollow noreferrer\">over-flowing</a>.</p>\n<p>Use the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/math/BigInteger.html\" rel=\"nofollow noreferrer\"><code>BigInteger</code></a> class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static java.math.BigInteger.*;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>int[] plusOne(int[] digits) {\n    BigInteger results = ZERO;\n    for (int d : digits) {\n        results = results.multiply(TEN);\n        results = results.add(new BigInteger(String.valueOf(d)));\n    }\n    results = results.add(ONE);\n    String resultsLength = results.toString();\n\n    int newDigits[] = new int[resultsLength.length()];\n\n    for (int i =0; i&lt;resultsLength.length(); i++) {\n\n        newDigits[i] = resultsLength.charAt(i) - '0';\n    }\n\n    return newDigits;\n}\n</code></pre>\n<p>Or, use a <em><a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/index.html\" rel=\"nofollow noreferrer\">stream</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] plusOne(int[] digits) {\n    return\n        IntStream.of(digits)\n                 .mapToObj(x -&gt; new BigInteger(String.valueOf(x)))\n                 .reduce(ZERO, (a, b) -&gt; a.multiply(TEN).add(b))\n                 .add(ONE)\n                 .toString()\n                 .chars()\n                 .map(x -&gt; Character.digit(x, 10))\n                 .toArray();\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[1, 2, 4]\n[9, 8, 7, 6, 5, 4, 3, 2, 1, 1]\n</code></pre>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1697812952,"post_id":77327935,"comment_id":136330820,"body_markdown":"See the comment on the question by Bohemian, and my reply in which I said I agree.","link":"https://stackoverflow.com/questions/77327772/trying-to-add-one-to-array-of-integers-and-return-array/77327935#comment136330820_77327935","body":"See the comment on the question by Bohemian, and my reply in which I said I agree."},{"score":0,"post_type":"answer","creation_date":1697818989,"post_id":77327935,"comment_id":136331893,"body_markdown":"I agree as well, updated the answer","link":"https://stackoverflow.com/questions/77327772/trying-to-add-one-to-array-of-integers-and-return-array/77327935#comment136331893_77327935","body":"I agree as well, updated the answer"}],"comment_count":2,"score":2,"last_activity_date":1697818770,"last_edit_date":1697818770,"creation_date":1697766973,"answer_id":77327935,"question_id":77327772,"body_markdown":"For the approach you have used, using `BigInteger` like @Reilas&#39;s answer would work.\r\n\r\nBut a more simpler approach to the problem would be \r\n- determine if the input number plus one will result in increased number of digits in output\r\n- declare the output array of the size accordingly\r\n- in case of `hasCarry=true`, set `output[0]=1` and return the output (applies when input is 9, 99, etc.)\r\n- otherwise assign the input array to the output. Increment the `output[i]` by 1 when the `input[i]&lt;9` and assign `output[i]=0` for `input[i]==9` \r\n\r\n```\r\npublic int[] plusOne(int[] digits) {\r\n    boolean hasCarry = true;\r\n    for (int digit: digits)\r\n        if (digit != 9) {\r\n            hasCarry = false;\r\n            break;\r\n        }\r\n\r\n    int[] output = hasCarry ? new int[digits.length + 1] : new int[digits.length];\r\n\r\n    if (hasCarry) {\r\n        output[0] = 1;\r\n    } else {\r\n        output = digits;\r\n        for (int i = output.length - 1; i &gt;= 0; i--) {\r\n            if (digits[i] &lt; 9) {\r\n                output[i]++;\r\n                return output;\r\n            }\r\n            output[i] = 0;\r\n        }\r\n    }\r\n    return output;\r\n}\r\n```","link":"https://stackoverflow.com/questions/77327772/trying-to-add-one-to-array-of-integers-and-return-array/77327935#77327935","title":"Trying to add one to array of integers and return array","body":"<p>For the approach you have used, using <code>BigInteger</code> like @Reilas's answer would work.</p>\n<p>But a more simpler approach to the problem would be</p>\n<ul>\n<li>determine if the input number plus one will result in increased number of digits in output</li>\n<li>declare the output array of the size accordingly</li>\n<li>in case of <code>hasCarry=true</code>, set <code>output[0]=1</code> and return the output (applies when input is 9, 99, etc.)</li>\n<li>otherwise assign the input array to the output. Increment the <code>output[i]</code> by 1 when the <code>input[i]&lt;9</code> and assign <code>output[i]=0</code> for <code>input[i]==9</code></li>\n</ul>\n<pre><code>public int[] plusOne(int[] digits) {\n    boolean hasCarry = true;\n    for (int digit: digits)\n        if (digit != 9) {\n            hasCarry = false;\n            break;\n        }\n\n    int[] output = hasCarry ? new int[digits.length + 1] : new int[digits.length];\n\n    if (hasCarry) {\n        output[0] = 1;\n    } else {\n        output = digits;\n        for (int i = output.length - 1; i &gt;= 0; i--) {\n            if (digits[i] &lt; 9) {\n                output[i]++;\n                return output;\n            }\n            output[i] = 0;\n        }\n    }\n    return output;\n}\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1697770476,"creation_date":1697770476,"answer_id":77328082,"question_id":77327772,"body_markdown":"Here&#39;s a one-liner:\r\n\r\n```\r\nint[] plusOne(int[] digits) {\r\n    return new BigInteger(Arrays.toString(digits).replaceAll(&quot;\\\\D&quot;, &quot;&quot;))\r\n      .add(BigInteger.ONE).toString().chars().map(i -&gt; i - &#39;0&#39;).toArray();\r\n}\r\n```","link":"https://stackoverflow.com/questions/77327772/trying-to-add-one-to-array-of-integers-and-return-array/77328082#77328082","title":"Trying to add one to array of integers and return array","body":"<p>Here's a one-liner:</p>\n<pre><code>int[] plusOne(int[] digits) {\n    return new BigInteger(Arrays.toString(digits).replaceAll(&quot;\\\\D&quot;, &quot;&quot;))\n      .add(BigInteger.ONE).toString().chars().map(i -&gt; i - '0').toArray();\n}\n</code></pre>\n"}],"comment_count":8,"is_answered":true,"view_count":135,"answer_count":3,"score":0,"last_activity_date":1702167066,"creation_date":1697763184,"question_id":77327772,"body_markdown":"Given an array of integers eg. [1,2,3]. I&#39;m trying to return an array with the integers plus one. So return [1,2,4]\r\nGetting unexpected output in the case of [9,8,7,6,5,4,3,2,1,0], should be [9,8,7,6,5,4,3,2,1,1]\r\n\r\n```\r\npublic static int[] plusOne(int[] digits) {\r\n        \r\n    int results = 0;\r\n    for (int i =0; i&lt;digits.length; i++) {\r\n        results *=10;\r\n        results += digits[i];\r\n    }\r\n    results +=1;\r\n    String resultsLength = Integer.toString(results);\r\n    \r\n    int newDigits[] = new int[resultsLength.length()];\r\n\r\n    for (int i =0; i&lt;resultsLength.length(); i++) {\r\n\r\n        newDigits[i] = resultsLength.charAt(i) - &#39;0&#39;;\r\n    }\r\n\r\n    return newDigits;\r\n}\r\n```\r\n\r\n","link":"https://stackoverflow.com/questions/77327772/trying-to-add-one-to-array-of-integers-and-return-array","title":"Trying to add one to array of integers and return array","body":"<p>Given an array of integers eg. [1,2,3]. I'm trying to return an array with the integers plus one. So return [1,2,4]\nGetting unexpected output in the case of [9,8,7,6,5,4,3,2,1,0], should be [9,8,7,6,5,4,3,2,1,1]</p>\n<pre><code>public static int[] plusOne(int[] digits) {\n        \n    int results = 0;\n    for (int i =0; i&lt;digits.length; i++) {\n        results *=10;\n        results += digits[i];\n    }\n    results +=1;\n    String resultsLength = Integer.toString(results);\n    \n    int newDigits[] = new int[resultsLength.length()];\n\n    for (int i =0; i&lt;resultsLength.length(); i++) {\n\n        newDigits[i] = resultsLength.charAt(i) - '0';\n    }\n\n    return newDigits;\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"score":2,"post_type":"question","creation_date":1695085202,"post_id":77131102,"comment_id":135973992,"body_markdown":"Your array has ten elements, and thus you loop ten times in your first loop, so why are you only expecting to give it five ints?","link":"https://stackoverflow.com/questions/77131102/second-for-loop-does-not-work-in-java-program#comment135973992_77131102","body":"Your array has ten elements, and thus you loop ten times in your first loop, so why are you only expecting to give it five ints?"},{"score":1,"post_type":"question","creation_date":1695085849,"post_id":77131102,"comment_id":135974036,"body_markdown":"Input `10 9 8 7 6 5 4 3 2 1` output `10,9,8,7,6,5,4,3,2,1,1,2,3,4,5,6,7,8,9,`. NOTE(s): No `System.out.println()` between loops. And `i &gt;= 0` in the second loop condition.","link":"https://stackoverflow.com/questions/77131102/second-for-loop-does-not-work-in-java-program#comment135974036_77131102","body":"Input <code>10 9 8 7 6 5 4 3 2 1</code> output <code>10,9,8,7,6,5,4,3,2,1,1,2,3,4,5,6,7,8,9,</code>. NOTE(s): No <code>System.out.println()</code> between loops. And <code>i &gt;= 0</code> in the second loop condition."},{"score":1,"post_type":"question","creation_date":1695089762,"post_id":77131102,"comment_id":135974340,"body_markdown":"What exactly are you trying to do?","link":"https://stackoverflow.com/questions/77131102/second-for-loop-does-not-work-in-java-program#comment135974340_77131102","body":"What exactly are you trying to do?"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1695127278,"post_id":77131170,"comment_id":135980042,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","link":"https://stackoverflow.com/questions/77131102/second-for-loop-does-not-work-in-java-program/77131170#comment135980042_77131170","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77131170/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"comment_count":1,"score":-1,"last_activity_date":1695086305,"creation_date":1695086305,"answer_id":77131170,"question_id":77131102,"body_markdown":"    import java.util.Scanner;\r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            Scanner scanner = new Scanner(System.in);\r\n    \r\n            System.out.println(&quot;Enter numbers separated by spaces:&quot;);\r\n            String input = scanner.nextLine();\r\n            String[] numberStrings = input.split(&quot; &quot;);\r\n    \r\n            List&lt;Integer&gt; numbers = new ArrayList&lt;&gt;();\r\n    \r\n            for (String numberString : numberStrings) {\r\n                int number = Integer.parseInt(numberString);\r\n                numbers.add(number);\r\n            }\r\n    \r\n            // Print the numbers in the same order as they were input\r\n            System.out.println(&quot;Output for loop #1:&quot;);\r\n            for (int number : numbers) {\r\n                System.out.print(number + &quot; &quot;);\r\n            }\r\n            System.out.println(); // Print a newline to separate the output.\r\n    \r\n            // Reverse the list and print the numbers in reverse order\r\n            System.out.println(&quot;Output for loop #2:&quot;);\r\n            Collections.reverse(numbers);\r\n            for (int number : numbers) {\r\n                System.out.print(number + &quot; &quot;);\r\n            }\r\n        }\r\n    }","link":"https://stackoverflow.com/questions/77131102/second-for-loop-does-not-work-in-java-program/77131170#77131170","title":"Second `for` loop does not work in Java program","body":"<pre><code>import java.util.Scanner;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.println(&quot;Enter numbers separated by spaces:&quot;);\n        String input = scanner.nextLine();\n        String[] numberStrings = input.split(&quot; &quot;);\n\n        List&lt;Integer&gt; numbers = new ArrayList&lt;&gt;();\n\n        for (String numberString : numberStrings) {\n            int number = Integer.parseInt(numberString);\n            numbers.add(number);\n        }\n\n        // Print the numbers in the same order as they were input\n        System.out.println(&quot;Output for loop #1:&quot;);\n        for (int number : numbers) {\n            System.out.print(number + &quot; &quot;);\n        }\n        System.out.println(); // Print a newline to separate the output.\n\n        // Reverse the list and print the numbers in reverse order\n        System.out.println(&quot;Output for loop #2:&quot;);\n        Collections.reverse(numbers);\n        for (int number : numbers) {\n            System.out.print(number + &quot; &quot;);\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1695568513,"post_id":77131173,"comment_id":136038820,"body_markdown":"There&#39;s no point of closing the Scanner; closing `System.in` is not generally helpful.","link":"https://stackoverflow.com/questions/77131102/second-for-loop-does-not-work-in-java-program/77131173#comment136038820_77131173","body":"There&#39;s no point of closing the Scanner; closing <code>System.in</code> is not generally helpful."},{"score":0,"post_type":"answer","creation_date":1695569385,"post_id":77131173,"comment_id":136038917,"body_markdown":"@Unmitigated you&#39;re right, thank you for pointing that out, learned something new today. I have edited my answer.","link":"https://stackoverflow.com/questions/77131102/second-for-loop-does-not-work-in-java-program/77131173#comment136038917_77131173","body":"@Unmitigated you&#39;re right, thank you for pointing that out, learned something new today. I have edited my answer."}],"comment_count":2,"score":2,"last_activity_date":1695569234,"last_edit_date":1695569234,"creation_date":1695086358,"answer_id":77131173,"question_id":77131102,"body_markdown":"Based on your question, the desired output is `1,2,3,4,5` if the input is `5,4,3,2,1`, unfortunately, you cannot do this with array as it will output `0,0,0,0,1,2,3,4,5` because array is fixed at size 10 and initialized with zeroes initially. \r\n\r\nYou want to use [ArrayList](https://www.w3schools.com/java/java_arraylist.asp) instead.\r\n\r\nSide note:\r\n- In the second loop, you are checking `i &gt; 0`, this means the 1st element (at index 0) would never be printed.\r\n\r\n```java\r\n    public static void main(String[] args) {\r\n        Scanner scan = new Scanner(System.in);\r\n        List&lt;Integer&gt; arrayNumbers = new ArrayList&lt;&gt;();\r\n\r\n        System.out.println(&quot;Put number here: &quot;);\r\n\r\n        while (scan.hasNext()){\r\n            if(!scan.hasNextInt()){\r\n                break;\r\n            }\r\n            int numberInput = scan.nextInt();\r\n            arrayNumbers.add(numberInput);\r\n        }\r\n        System.out.println(&quot;Received input: &quot; + arrayNumbers);\r\n\r\n        //This Code Does not execute!\r\n        for (int i=arrayNumbers.size()-1; i&gt;=0; i--) // should be &gt;= 0 as you want to read first\r\n            System.out.print(arrayNumbers.get(i) + &quot;,&quot;);\r\n\r\n    }\r\n\r\n```\r\n\r\nif you want to read an entire line `5 4 3 2 1` as input, then you don&#39;t use a loop to read the inputs, you use `scan.nextLine()` instead.\r\n\r\n```java\r\n\r\n// reads in a string of number separated by spaces\r\nSystem.out.println(&quot;Enter a line of integers, separated by spaces: &quot;);\r\nString input = scan.nextLine()\r\n\r\n// split the input string into an array of Strings\r\nString[] arrayNumbers = inputLine.split(&quot; &quot;);\r\n\r\n// continue with your first for loop to convert array of string into ints\r\n\r\n```","link":"https://stackoverflow.com/questions/77131102/second-for-loop-does-not-work-in-java-program/77131173#77131173","title":"Second `for` loop does not work in Java program","body":"<p>Based on your question, the desired output is <code>1,2,3,4,5</code> if the input is <code>5,4,3,2,1</code>, unfortunately, you cannot do this with array as it will output <code>0,0,0,0,1,2,3,4,5</code> because array is fixed at size 10 and initialized with zeroes initially.</p>\n<p>You want to use <a href=\"https://www.w3schools.com/java/java_arraylist.asp\" rel=\"nofollow noreferrer\">ArrayList</a> instead.</p>\n<p>Side note:</p>\n<ul>\n<li>In the second loop, you are checking <code>i &gt; 0</code>, this means the 1st element (at index 0) would never be printed.</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String[] args) {\n        Scanner scan = new Scanner(System.in);\n        List&lt;Integer&gt; arrayNumbers = new ArrayList&lt;&gt;();\n\n        System.out.println(&quot;Put number here: &quot;);\n\n        while (scan.hasNext()){\n            if(!scan.hasNextInt()){\n                break;\n            }\n            int numberInput = scan.nextInt();\n            arrayNumbers.add(numberInput);\n        }\n        System.out.println(&quot;Received input: &quot; + arrayNumbers);\n\n        //This Code Does not execute!\n        for (int i=arrayNumbers.size()-1; i&gt;=0; i--) // should be &gt;= 0 as you want to read first\n            System.out.print(arrayNumbers.get(i) + &quot;,&quot;);\n\n    }\n\n</code></pre>\n<p>if you want to read an entire line <code>5 4 3 2 1</code> as input, then you don't use a loop to read the inputs, you use <code>scan.nextLine()</code> instead.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n// reads in a string of number separated by spaces\nSystem.out.println(&quot;Enter a line of integers, separated by spaces: &quot;);\nString input = scan.nextLine()\n\n// split the input string into an array of Strings\nString[] arrayNumbers = inputLine.split(&quot; &quot;);\n\n// continue with your first for loop to convert array of string into ints\n\n</code></pre>\n"},{"comment_count":0,"score":-1,"last_activity_date":1702167054,"last_edit_date":1702167054,"creation_date":1695089030,"answer_id":77131293,"question_id":77131102,"body_markdown":"&gt; _I am writing a `for` loop in Java. However, the second for loop does not work_\r\n&gt;\r\n&gt; ```java\r\n&gt; //This Code Does not execute!\r\n&gt; for (int i=arrayNumber.length-1; i&gt;0; i--)\r\n&gt;   System.out.print(arrayNumber[i] + &quot;,&quot;);\r\n&gt; ```\r\n\r\nThis is because the _arrayNumber_ array can hold _10_ elements and your input is only _5_, _&quot;5 4 3 2 1&quot;_.\r\n\r\nThus, during the initial _for-loop_, which is conditional to _arrayNumber.length_, the _nextInt_ call will _[block](https://en.wikipedia.org/wiki/Blocking_(computing))_ and wait for an input for anything over _i = 4_.\r\n\r\nHere is the _[Scanner#next](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html#next())_ _JavaDoc_,\r\n\r\n&gt; _**next**\\\r\n\\\r\n_public String next()_\\\r\n\\\r\nFinds and returns the next complete token from this scanner. ... This method may block while waiting for input to scan ..._\r\n\r\nAs a recommendation, utilize a _[String#split](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#split(java.lang.String))_ on a _[Scanner#nextLine](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html#nextLine())_ call, and parse each value.\r\n\r\n```java\r\nString[] a = scan.nextLine().split(&quot; +&quot;);\r\narrayNumber = new int[a.length];\r\nint i = 0;\r\nfor (String s : a)\r\n    arrayNumber[i++] = Integer.parseInt(s);\r\n```","link":"https://stackoverflow.com/questions/77131102/second-for-loop-does-not-work-in-java-program/77131293#77131293","title":"Second `for` loop does not work in Java program","body":"<blockquote>\n<p><em>I am writing a <code>for</code> loop in Java. However, the second for loop does not work</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>//This Code Does not execute!\nfor (int i=arrayNumber.length-1; i&gt;0; i--)\n  System.out.print(arrayNumber[i] + &quot;,&quot;);\n</code></pre>\n</blockquote>\n<p>This is because the <em>arrayNumber</em> array can hold <em>10</em> elements and your input is only <em>5</em>, <em>&quot;5 4 3 2 1&quot;</em>.</p>\n<p>Thus, during the initial <em>for-loop</em>, which is conditional to <em>arrayNumber.length</em>, the <em>nextInt</em> call will <em><a href=\"https://en.wikipedia.org/wiki/Blocking_(computing)\" rel=\"nofollow noreferrer\">block</a></em> and wait for an input for anything over <em>i = 4</em>.</p>\n<p>Here is the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html#next()\" rel=\"nofollow noreferrer\">Scanner#next</a></em> <em>JavaDoc</em>,</p>\n<blockquote>\n<p><em><strong>next</strong><br />\n<br />\n<em>public String next()</em><br />\n<br />\nFinds and returns the next complete token from this scanner. ... This method may block while waiting for input to scan ...</em></p>\n</blockquote>\n<p>As a recommendation, utilize a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#split(java.lang.String)\" rel=\"nofollow noreferrer\">String#split</a></em> on a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Scanner.html#nextLine()\" rel=\"nofollow noreferrer\">Scanner#nextLine</a></em> call, and parse each value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[] a = scan.nextLine().split(&quot; +&quot;);\narrayNumber = new int[a.length];\nint i = 0;\nfor (String s : a)\n    arrayNumber[i++] = Integer.parseInt(s);\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1695111788,"creation_date":1695111788,"answer_id":77132831,"question_id":77131102,"body_markdown":"&gt; //This Code Does not execute!\r\n\r\nThis is how `Scanner.hasNextInt()` works, it waits for more data and does not immediately returns false. You could break this waiting with Ctrl+D or by adding a letter instead of digit which would execute the break statement. But I suppose this is not what you are after, you want to read one line and then go straight to the second loop? If so I suggest reading an entire line first, and then parsing it. This will also fixt the problem with array length:\r\n\r\n        Scanner scan = new Scanner(System.in);\r\n        System.out.println(&quot;Put number here: &quot;);\r\n\r\n        String line = scan.nextLine(); //read entire line\r\n        String[] numberStrings = line.split(&quot; &quot;); //split by space\r\n        int[] arrayNumber = new int[numberStrings.length]; //initialize array, or use ArrayList&lt;Integer&gt;\r\n\r\n        for (int i = 0; i &lt; numberStrings.length; i++) {\r\n            arrayNumber[i] = Integer.parseInt(numberStrings[i]);\r\n            System.out.print(arrayNumber[i] + &quot;,&quot;);\r\n        }\r\n\r\n        System.out.println();\r\n      \r\n        // in your original code you had:\r\n        //  for (int i=arrayNumber.length-1; i&gt;0; i--)\r\n        // the fact that you had `i&gt;0` caused that you would miss the first element\r\n\r\n        for (int i = arrayNumber.length - 1; i &gt;= 0; i--) {\r\n            System.out.print(arrayNumber[i] + &quot;,&quot;);\r\n        }\r\n\r\n        scan.close(); // release resources\r\n\r\n        // Always release resources, you may also use try-with-resources:\r\n        // try (Scanner scan = new Scanner(System.in)) {\r\n        // }\r\n        // This way your resource is released also in case of exception\r\n\r\nIf you would like to learn about more modern use of java, then see below stream code version. Streams are new paradigm in java programming where instead of doing things more in a procedural way as in above code, you do it functionally:\r\n\r\n        Scanner scan = new Scanner(System.in);\r\n        System.out.println(&quot;Put number here: &quot;);\r\n\r\n        String inputLine = scan.nextLine();\r\n        int[] arrayNumber =\r\n                Arrays.stream(inputLine.split(&quot; &quot;)) //split the input\r\n                        .mapToInt(Integer::parseInt) //convert each string to int\r\n                        .toArray(); //turn stream into an array\r\n\r\n        //first for loop output\r\n        String output1 = Arrays.stream(arrayNumber)//turn array into stream\r\n                .mapToObj(String::valueOf) //convert each int to string\r\n                .collect(Collectors.joining(&quot;,&quot;));//join them with a comma\r\n        System.out.println(output1 + &quot;,&quot;);\r\n\r\n        // Second for loop output\r\n        // To iterate from the end of the array, I use the IntStream.range() to generate indexes\r\n        String output2 = IntStream.range(0, arrayNumber.length)\r\n                .map(i -&gt; arrayNumber[arrayNumber.length - i - 1])//for each index, get the value from the array buf in reverse order\r\n                .mapToObj(String::valueOf)//convert each int to string\r\n                .collect(Collectors.joining(&quot;,&quot;));//join them with a comma\r\n        System.out.println(output2 + &quot;,&quot;);","link":"https://stackoverflow.com/questions/77131102/second-for-loop-does-not-work-in-java-program/77132831#77132831","title":"Second `for` loop does not work in Java program","body":"<blockquote>\n<p>//This Code Does not execute!</p>\n</blockquote>\n<p>This is how <code>Scanner.hasNextInt()</code> works, it waits for more data and does not immediately returns false. You could break this waiting with Ctrl+D or by adding a letter instead of digit which would execute the break statement. But I suppose this is not what you are after, you want to read one line and then go straight to the second loop? If so I suggest reading an entire line first, and then parsing it. This will also fixt the problem with array length:</p>\n<pre><code>    Scanner scan = new Scanner(System.in);\n    System.out.println(&quot;Put number here: &quot;);\n\n    String line = scan.nextLine(); //read entire line\n    String[] numberStrings = line.split(&quot; &quot;); //split by space\n    int[] arrayNumber = new int[numberStrings.length]; //initialize array, or use ArrayList&lt;Integer&gt;\n\n    for (int i = 0; i &lt; numberStrings.length; i++) {\n        arrayNumber[i] = Integer.parseInt(numberStrings[i]);\n        System.out.print(arrayNumber[i] + &quot;,&quot;);\n    }\n\n    System.out.println();\n  \n    // in your original code you had:\n    //  for (int i=arrayNumber.length-1; i&gt;0; i--)\n    // the fact that you had `i&gt;0` caused that you would miss the first element\n\n    for (int i = arrayNumber.length - 1; i &gt;= 0; i--) {\n        System.out.print(arrayNumber[i] + &quot;,&quot;);\n    }\n\n    scan.close(); // release resources\n\n    // Always release resources, you may also use try-with-resources:\n    // try (Scanner scan = new Scanner(System.in)) {\n    // }\n    // This way your resource is released also in case of exception\n</code></pre>\n<p>If you would like to learn about more modern use of java, then see below stream code version. Streams are new paradigm in java programming where instead of doing things more in a procedural way as in above code, you do it functionally:</p>\n<pre><code>    Scanner scan = new Scanner(System.in);\n    System.out.println(&quot;Put number here: &quot;);\n\n    String inputLine = scan.nextLine();\n    int[] arrayNumber =\n            Arrays.stream(inputLine.split(&quot; &quot;)) //split the input\n                    .mapToInt(Integer::parseInt) //convert each string to int\n                    .toArray(); //turn stream into an array\n\n    //first for loop output\n    String output1 = Arrays.stream(arrayNumber)//turn array into stream\n            .mapToObj(String::valueOf) //convert each int to string\n            .collect(Collectors.joining(&quot;,&quot;));//join them with a comma\n    System.out.println(output1 + &quot;,&quot;);\n\n    // Second for loop output\n    // To iterate from the end of the array, I use the IntStream.range() to generate indexes\n    String output2 = IntStream.range(0, arrayNumber.length)\n            .map(i -&gt; arrayNumber[arrayNumber.length - i - 1])//for each index, get the value from the array buf in reverse order\n            .mapToObj(String::valueOf)//convert each int to string\n            .collect(Collectors.joining(&quot;,&quot;));//join them with a comma\n    System.out.println(output2 + &quot;,&quot;);\n</code></pre>\n"}],"comment_count":3,"is_answered":true,"view_count":153,"answer_count":4,"score":1,"last_activity_date":1702167054,"creation_date":1695084842,"last_edit_date":1695568217,"question_id":77131102,"body_markdown":"I am writing a `for` loop in Java. However, the second for loop does not work.\r\n\r\nInput `5 4 3 2 1`  \r\nExpected output on for loop #1 `5,4,3,2,1,`  \r\nExpected output on for loop #2 `1,2,3,4,`\r\n\r\nMy code\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Scanner scan = new Scanner(System.in);\r\n        int[] arrayNumber = new int[10];\r\n        int numbers;\r\n\r\n        System.out.println(&quot;Put number here: &quot;);\r\n\r\n        for (int i=0; i&lt;arrayNumber.length; i++){\r\n            numbers = scan.nextInt();\r\n            arrayNumber[i] = numbers;\r\n            System.out.print(arrayNumber[i] + &quot;,&quot;);\r\n        }\r\n\r\n        //This Code Does not execute!\r\n        for (int i=arrayNumber.length-1; i&gt;0; i--)\r\n            System.out.print(arrayNumber[i] + &quot;,&quot;);\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\nHere is the output:\r\n\r\n```\r\nPut number here: \r\n5 4 3 2 1\r\n5,4,3,2,1,\r\n```\r\n\r\n","link":"https://stackoverflow.com/questions/77131102/second-for-loop-does-not-work-in-java-program","title":"Second `for` loop does not work in Java program","body":"<p>I am writing a <code>for</code> loop in Java. However, the second for loop does not work.</p>\n<p>Input <code>5 4 3 2 1</code><br />\nExpected output on for loop #1 <code>5,4,3,2,1,</code><br />\nExpected output on for loop #2 <code>1,2,3,4,</code></p>\n<p>My code</p>\n<pre><code>import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner scan = new Scanner(System.in);\n        int[] arrayNumber = new int[10];\n        int numbers;\n\n        System.out.println(&quot;Put number here: &quot;);\n\n        for (int i=0; i&lt;arrayNumber.length; i++){\n            numbers = scan.nextInt();\n            arrayNumber[i] = numbers;\n            System.out.print(arrayNumber[i] + &quot;,&quot;);\n        }\n\n        //This Code Does not execute!\n        for (int i=arrayNumber.length-1; i&gt;0; i--)\n            System.out.print(arrayNumber[i] + &quot;,&quot;);\n\n    }\n}\n\n</code></pre>\n<p>Here is the output:</p>\n<pre><code>Put number here: \n5 4 3 2 1\n5,4,3,2,1,\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"score":1,"post_type":"question","creation_date":1700865370,"post_id":77545796,"comment_id":136708834,"body_markdown":"I&#39;d put `firstDigit` to `fifthDigit` also in a `int[] digits = new int[5]` array (like `numbers`). Then you can straightforward do a nested loop, where you compare each value from the `numbers` array with the `digits` array and count how many hits you have","link":"https://stackoverflow.com/questions/77545796/how-do-i-compare-random-numbers-to-input-numbers#comment136708834_77545796","body":"I&#39;d put <code>firstDigit</code> to <code>fifthDigit</code> also in a <code>int[] digits = new int[5]</code> array (like <code>numbers</code>). Then you can straightforward do a nested loop, where you compare each value from the <code>numbers</code> array with the <code>digits</code> array and count how many hits you have"},{"score":0,"post_type":"question","creation_date":1700865481,"post_id":77545796,"comment_id":136708842,"body_markdown":"Another possibility is, that at each input of a number you iterate over the `numbers` array and check if your current input number is contained ...","link":"https://stackoverflow.com/questions/77545796/how-do-i-compare-random-numbers-to-input-numbers#comment136708842_77545796","body":"Another possibility is, that at each input of a number you iterate over the <code>numbers</code> array and check if your current input number is contained ..."},{"score":0,"post_type":"question","creation_date":1700865901,"post_id":77545796,"comment_id":136708879,"body_markdown":"Furthermore you probably should take care of, that neither the inputs nor the random numbers can be duplicates ...","link":"https://stackoverflow.com/questions/77545796/how-do-i-compare-random-numbers-to-input-numbers#comment136708879_77545796","body":"Furthermore you probably should take care of, that neither the inputs nor the random numbers can be duplicates ..."},{"score":0,"post_type":"question","creation_date":1700973597,"post_id":77545796,"comment_id":136716619,"body_markdown":"I added another array for digits, but unsure how to compare each values. Ive tried multiple times and  keep getting errors - int[] cannot be converted to int and int cannot be converted to boolean.","link":"https://stackoverflow.com/questions/77545796/how-do-i-compare-random-numbers-to-input-numbers#comment136716619_77545796","body":"I added another array for digits, but unsure how to compare each values. Ive tried multiple times and  keep getting errors - int[] cannot be converted to int and int cannot be converted to boolean."},{"score":0,"post_type":"question","creation_date":1700973852,"post_id":77545796,"comment_id":136716636,"body_markdown":"A clarifying question is, how would I go on to writing &quot;You won $10&quot; if the user guessed one of the five matches? and so on if the user guessed more with an increase in money? - (Thank you for your previous help)","link":"https://stackoverflow.com/questions/77545796/how-do-i-compare-random-numbers-to-input-numbers#comment136716636_77545796","body":"A clarifying question is, how would I go on to writing &quot;You won $10&quot; if the user guessed one of the five matches? and so on if the user guessed more with an increase in money? - (Thank you for your previous help)"}],"answers":[{"comment_count":0,"score":2,"last_activity_date":1702167041,"last_edit_date":1702167041,"creation_date":1700865776,"answer_id":77545952,"question_id":77545796,"body_markdown":"&gt; _&quot;... So if the winning numbers were 23, 32 43, 54, 65 and user guessed 54, 53, 22, 33 44. Then there would be a specific output and if the user guessed two numbers correctly then there would be a different ouput and so on.\\\r\n&gt;\\\r\n&gt; I was thinking if else statements, but not sure how to start, especially because I dont know how to compare the five random numbers to specific user input values ...&quot;_ \r\n\r\nStart by containing the data.&amp;nbsp; An _[array](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)_, for each set, should suffice.\\\r\nI&#39;m using an [`Integer`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html) _array_, rather than a _primitive_ [`int`](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html) _array_, as to utilize the [`Collections#shuffle`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collections.html#shuffle(java.util.List)) method.\\\r\nThis will produce a set of unique values.\r\n\r\n```java\r\nScanner in = new Scanner(System.in);\r\nint i, n = 5;\r\nInteger[] R = new Integer[99], G = new Integer[n];\r\nfor (i = 1; i &lt; 100; i++) R[i - 1] = i;\r\nCollections.shuffle(Arrays.asList(R));\r\nR = Arrays.copyOfRange(R, 0, n);\r\nfor (i = 0; i &lt; n; i++) {\r\n    out.printf(&quot;guess %d:  &quot;, i + 1);\r\n    G[i] = in.nextInt();\r\n}\r\n```\r\n\r\nFrom here, traverse _G_, and sub-traverse _R_, qualifying any matching numbers.\\\r\nYou could even use another _array_, or a [`List`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html), to contain the values.\\\r\nAlthough, since you&#39;re only printing the values, a [`StringBuilder`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/StringBuilder.html) class would be a simpler approach.\r\n\r\n```java\r\nStringBuilder s = new StringBuilder();\r\nfor (int g : G)\r\n    for (int r : R)\r\n        if (g == r) {\r\n            if (!s.isEmpty()) s.append(&quot;, &quot;);\r\n            s.append(g);\r\n        }\r\nout.println(&quot;R = &quot; + Arrays.toString(R));\r\nout.println(&quot;G = &quot; + Arrays.toString(G));\r\nout.println(&quot;matching numbers:  &quot; + s);\r\n```\r\n\r\nHere is an example usage.\r\n\r\n```none\r\nguess 1:  55\r\nguess 2:  24\r\nguess 3:  93\r\nguess 4:  1\r\nguess 5:  2\r\nR = [50, 24, 78, 55, 93]\r\nG = [55, 24, 93, 1, 2]\r\nmatching numbers:  55, 24, 93\r\n```","link":"https://stackoverflow.com/questions/77545796/how-do-i-compare-random-numbers-to-input-numbers/77545952#77545952","title":"How do I compare random numbers to input numbers?","body":"<blockquote>\n<p><em>&quot;... So if the winning numbers were 23, 32 43, 54, 65 and user guessed 54, 53, 22, 33 44. Then there would be a specific output and if the user guessed two numbers correctly then there would be a different ouput and so on.<br />\n<br />\nI was thinking if else statements, but not sure how to start, especially because I dont know how to compare the five random numbers to specific user input values ...&quot;</em></p>\n</blockquote>\n<p>Start by containing the data. An <em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html\" rel=\"nofollow noreferrer\">array</a></em>, for each set, should suffice.<br />\nI'm using an <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html\" rel=\"nofollow noreferrer\"><code>Integer</code></a> <em>array</em>, rather than a <em>primitive</em> <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\"><code>int</code></a> <em>array</em>, as to utilize the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collections.html#shuffle(java.util.List)\" rel=\"nofollow noreferrer\"><code>Collections#shuffle</code></a> method.<br />\nThis will produce a set of unique values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner in = new Scanner(System.in);\nint i, n = 5;\nInteger[] R = new Integer[99], G = new Integer[n];\nfor (i = 1; i &lt; 100; i++) R[i - 1] = i;\nCollections.shuffle(Arrays.asList(R));\nR = Arrays.copyOfRange(R, 0, n);\nfor (i = 0; i &lt; n; i++) {\n    out.printf(&quot;guess %d:  &quot;, i + 1);\n    G[i] = in.nextInt();\n}\n</code></pre>\n<p>From here, traverse <em>G</em>, and sub-traverse <em>R</em>, qualifying any matching numbers.<br />\nYou could even use another <em>array</em>, or a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html\" rel=\"nofollow noreferrer\"><code>List</code></a>, to contain the values.<br />\nAlthough, since you're only printing the values, a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\"><code>StringBuilder</code></a> class would be a simpler approach.</p>\n<pre class=\"lang-java prettyprint-override\"><code>StringBuilder s = new StringBuilder();\nfor (int g : G)\n    for (int r : R)\n        if (g == r) {\n            if (!s.isEmpty()) s.append(&quot;, &quot;);\n            s.append(g);\n        }\nout.println(&quot;R = &quot; + Arrays.toString(R));\nout.println(&quot;G = &quot; + Arrays.toString(G));\nout.println(&quot;matching numbers:  &quot; + s);\n</code></pre>\n<p>Here is an example usage.</p>\n<pre class=\"lang-none prettyprint-override\"><code>guess 1:  55\nguess 2:  24\nguess 3:  93\nguess 4:  1\nguess 5:  2\nR = [50, 24, 78, 55, 93]\nG = [55, 24, 93, 1, 2]\nmatching numbers:  55, 24, 93\n</code></pre>\n"},{"comment_count":0,"score":1,"last_activity_date":1701195263,"last_edit_date":1701195263,"creation_date":1700876205,"answer_id":77546355,"question_id":77545796,"body_markdown":"The easiest way, imo, is to use a [HashSet](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashSet.html#HashSet()).  Sets cannot hold duplicates so it would be perfect for lottery numbers.\r\n\r\n- One set has the winning numbers.\r\n- The other set has the users choices.\r\n- using the [retainAll()](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Set.html#retainAll(java.util.Collection)) method only keeps the user numbers that were the same as the winningNumbers.  \r\n```\r\nstatic int NCHOICES = 5;\r\nSet&lt;Integer&gt; winningNumber = new HashSet&lt;&gt;(Set.of(23, 32, 43, 54, 65));\r\nSet&lt;Integer&gt; user = new HashSet&lt;&gt;();\r\nScanner input = new Scanner(System.in);\r\nfor (int i = 1; i &lt;= NCHOICES; i++) {\r\n    System.out.printf(&quot;Please enter #%d: &quot;, i);\r\n    int numb = input.nextInt();\r\n    if (numb &gt; LIMIT || !user.add(numb)) {\r\n        System.out.printf(&quot;Number %d already added or too large, try again.%n&quot;, numb);\r\n        i--;\r\n    }\r\n}\r\nuser.retainAll(winningNumber);\r\nSystem.out.printf(&quot;The user picked %d correctly%n&quot;, user.size());\r\nSystem.out.printf(&quot;They are %s%n&quot;, user);\r\n```\r\nIf this input were `41, 23, 62, 4, 32`, the output would be\r\n```\r\nPlease enter #1: 41\r\nPlease enter #2: 23\r\nPlease enter #3: 62\r\nPlease enter #4: 4\r\nPlease enter #5: 32\r\nThe user picked 2 correctly\r\nThey are [32, 23]\r\n```\r\nTo populate the `winningNUmbers` set, you can do it as follows.\r\n- define a size LIMIT of the number to be chosen.\r\n- Allocate an `ArrayList` to hold the numbers from 1 to LIMIT.\r\n- then populate the list using a loop.\r\n- then each time you want to create a net set of winning numbers.\r\n   - clear the existing `winningNumber` set.\r\n   - Shuffle the list.\r\n   - And add a `sublist` of the first `NCHOICES` numbers to the set.\r\n```\r\nstatic int LIMIT = 100;\r\nList&lt;Integer&gt; lotteryNumbers = new ArrayList&lt;&gt;();\r\nfor (int i = 1; i &lt; LIMIT; i++) {\r\n    lotteryNumbers.add(i);\r\n}\r\nwinningNumbers.clear();\r\nCollections.shuffle(lotteryNumbers);\r\nwinningNumbers.addAll(lotteryNumbers.subList(0,NCHOICES));\r\nSystem.out.println(winningNumbers);\r\n```\r\nprints something like\r\n```\r\n[49, 34, 54, 39, 57]\r\n```\r\nNote that you only need to create the List of numbers once.  Just shuffle it each time right before you want to populate the winningNumbers set.","link":"https://stackoverflow.com/questions/77545796/how-do-i-compare-random-numbers-to-input-numbers/77546355#77546355","title":"How do I compare random numbers to input numbers?","body":"<p>The easiest way, imo, is to use a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashSet.html#HashSet()\" rel=\"nofollow noreferrer\">HashSet</a>.  Sets cannot hold duplicates so it would be perfect for lottery numbers.</p>\n<ul>\n<li>One set has the winning numbers.</li>\n<li>The other set has the users choices.</li>\n<li>using the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Set.html#retainAll(java.util.Collection)\" rel=\"nofollow noreferrer\">retainAll()</a> method only keeps the user numbers that were the same as the winningNumbers.</li>\n</ul>\n<pre><code>static int NCHOICES = 5;\nSet&lt;Integer&gt; winningNumber = new HashSet&lt;&gt;(Set.of(23, 32, 43, 54, 65));\nSet&lt;Integer&gt; user = new HashSet&lt;&gt;();\nScanner input = new Scanner(System.in);\nfor (int i = 1; i &lt;= NCHOICES; i++) {\n    System.out.printf(&quot;Please enter #%d: &quot;, i);\n    int numb = input.nextInt();\n    if (numb &gt; LIMIT || !user.add(numb)) {\n        System.out.printf(&quot;Number %d already added or too large, try again.%n&quot;, numb);\n        i--;\n    }\n}\nuser.retainAll(winningNumber);\nSystem.out.printf(&quot;The user picked %d correctly%n&quot;, user.size());\nSystem.out.printf(&quot;They are %s%n&quot;, user);\n</code></pre>\n<p>If this input were <code>41, 23, 62, 4, 32</code>, the output would be</p>\n<pre><code>Please enter #1: 41\nPlease enter #2: 23\nPlease enter #3: 62\nPlease enter #4: 4\nPlease enter #5: 32\nThe user picked 2 correctly\nThey are [32, 23]\n</code></pre>\n<p>To populate the <code>winningNUmbers</code> set, you can do it as follows.</p>\n<ul>\n<li>define a size LIMIT of the number to be chosen.</li>\n<li>Allocate an <code>ArrayList</code> to hold the numbers from 1 to LIMIT.</li>\n<li>then populate the list using a loop.</li>\n<li>then each time you want to create a net set of winning numbers.\n<ul>\n<li>clear the existing <code>winningNumber</code> set.</li>\n<li>Shuffle the list.</li>\n<li>And add a <code>sublist</code> of the first <code>NCHOICES</code> numbers to the set.</li>\n</ul>\n</li>\n</ul>\n<pre><code>static int LIMIT = 100;\nList&lt;Integer&gt; lotteryNumbers = new ArrayList&lt;&gt;();\nfor (int i = 1; i &lt; LIMIT; i++) {\n    lotteryNumbers.add(i);\n}\nwinningNumbers.clear();\nCollections.shuffle(lotteryNumbers);\nwinningNumbers.addAll(lotteryNumbers.subList(0,NCHOICES));\nSystem.out.println(winningNumbers);\n</code></pre>\n<p>prints something like</p>\n<pre><code>[49, 34, 54, 39, 57]\n</code></pre>\n<p>Note that you only need to create the List of numbers once.  Just shuffle it each time right before you want to populate the winningNumbers set.</p>\n"}],"comment_count":5,"is_answered":true,"view_count":141,"answer_count":2,"score":0,"last_activity_date":1702167041,"creation_date":1700862517,"question_id":77545796,"body_markdown":"I have generated five numbers and let input from user to guess the five numbers. I am having trouble comparing the values to check if the user has guessed right (lottery). I want to compare each individual number to the random numbers. So if the winning numbers were 23, 32 43, 54, 65\r\nand user guessed 54, 53, 22, 33 44. Then there would be a specific output and if the user guessed two numbers correctly then there would be a different ouput and so on.\r\n\r\nI was thinking if else statements, but not sure how to start, especially because I dont know how to compare the five random numbers to specific user input values\r\n\r\nHere is what I have:\r\n\r\n```\r\nimport java.util.Scanner;\r\nimport java.util.Random;\r\npublic class Lotterygame\r\n{\r\n   public static void main (String[] args)\r\n   {\r\n   int firstDigit, secondDigit, thirdDigit, fourthDigit, fifthDigit;\r\n   int match, nomatch;\r\n   Scanner input = new Scanner(System.in);\r\n\r\nRandom random = new Random();\r\n        int[] numbers = new int[5];\r\n        for (int i = 0; i &lt; 5; i++) {\r\n            numbers[i] = random.nextInt(100);\r\n        }\r\n\r\nSystem.out.println(&quot;Enter a first digit&quot;);\r\n       firstDigit = input.nextInt();\r\n   System.out.println(&quot;Enter a second digit&quot;);\r\n       secondDigit = input.nextInt();\r\n   System.out.println(&quot;Enter a third digit&quot;);\r\n        thirdDigit = input.nextInt();\r\n   System.out.println(&quot;Enter a fourth digit&quot;);\r\n       fourthDigit = input.nextInt();\r\n   System.out.println(&quot;Enter a fifth digit&quot;);\r\n      fifthDigit = input.nextInt();\r\n\r\nSystem.out.print(&quot;The winning numbers are: &quot;);        \r\n        for (int number : numbers) {\r\n            System.out.print(&quot; &quot; + number);\r\n        }\r\n         \r\nSystem.out.println(&quot;\\nYour number are: &quot; + firstDigit + &quot; &quot; + secondDigit + &quot; &quot; + thirdDigit + &quot; &quot; + fourthDigit + &quot; &quot; + fifthDigit); ```\r\n","link":"https://stackoverflow.com/questions/77545796/how-do-i-compare-random-numbers-to-input-numbers","title":"How do I compare random numbers to input numbers?","body":"<p>I have generated five numbers and let input from user to guess the five numbers. I am having trouble comparing the values to check if the user has guessed right (lottery). I want to compare each individual number to the random numbers. So if the winning numbers were 23, 32 43, 54, 65\nand user guessed 54, 53, 22, 33 44. Then there would be a specific output and if the user guessed two numbers correctly then there would be a different ouput and so on.</p>\n<p>I was thinking if else statements, but not sure how to start, especially because I dont know how to compare the five random numbers to specific user input values</p>\n<p>Here is what I have:</p>\n<pre><code>import java.util.Scanner;\nimport java.util.Random;\npublic class Lotterygame\n{\n   public static void main (String[] args)\n   {\n   int firstDigit, secondDigit, thirdDigit, fourthDigit, fifthDigit;\n   int match, nomatch;\n   Scanner input = new Scanner(System.in);\n\nRandom random = new Random();\n        int[] numbers = new int[5];\n        for (int i = 0; i &lt; 5; i++) {\n            numbers[i] = random.nextInt(100);\n        }\n\nSystem.out.println(&quot;Enter a first digit&quot;);\n       firstDigit = input.nextInt();\n   System.out.println(&quot;Enter a second digit&quot;);\n       secondDigit = input.nextInt();\n   System.out.println(&quot;Enter a third digit&quot;);\n        thirdDigit = input.nextInt();\n   System.out.println(&quot;Enter a fourth digit&quot;);\n       fourthDigit = input.nextInt();\n   System.out.println(&quot;Enter a fifth digit&quot;);\n      fifthDigit = input.nextInt();\n\nSystem.out.print(&quot;The winning numbers are: &quot;);        \n        for (int number : numbers) {\n            System.out.print(&quot; &quot; + number);\n        }\n         \nSystem.out.println(&quot;\\nYour number are: &quot; + firstDigit + &quot; &quot; + secondDigit + &quot; &quot; + thirdDigit + &quot; &quot; + fourthDigit + &quot; &quot; + fifthDigit); ```\n</code></pre>\n"},{"tags":["java","arrays","loops","arraylist"],"answers":[{"comment_count":0,"score":2,"last_activity_date":1683055002,"creation_date":1683055002,"answer_id":76158169,"question_id":76157881,"body_markdown":"`nextInt()` gives no indication of whether the next line was reached or not. You could instead read one line with `Scanner#nextLine`, then `split` it on a space, and finally parse each part into an int.\r\n\r\nFor example:\r\n\r\n```java\r\nString[] strs = scan.nextLine().split(&quot; &quot;);\r\nint[] nums = new int[strs.length];\r\nfor (int i = 0; i &lt; strs.length; i++)\r\n\tnums[i] = Integer.parseInt(strs[i]);\r\nint search = scan.nextInt();\r\nint count = 0;\r\nfor (int x : nums)\r\n\tif (x == search)\r\n\t\t++count;\r\nSystem.out.println(count);\r\n```\r\n\r\nThere is a built-in method, `Collections.frequency`, that can count occurrences of a value, so this can be simplified.\r\n\r\n```java\r\nvar nums = Arrays.stream(scan.nextLine().split(&quot; &quot;)).map(Integer::valueOf).toList();\r\nint search = scan.nextInt();\r\nint count = Collections.frequency(nums, search);\r\nSystem.out.println(count);\r\n```","link":"https://stackoverflow.com/questions/76157881/counting-the-number-of-occurrences-of-unknown-number-of-inputs/76158169#76158169","title":"Counting the number of occurrences of unknown number of inputs","body":"<p><code>nextInt()</code> gives no indication of whether the next line was reached or not. You could instead read one line with <code>Scanner#nextLine</code>, then <code>split</code> it on a space, and finally parse each part into an int.</p>\n<p>For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[] strs = scan.nextLine().split(&quot; &quot;);\nint[] nums = new int[strs.length];\nfor (int i = 0; i &lt; strs.length; i++)\n    nums[i] = Integer.parseInt(strs[i]);\nint search = scan.nextInt();\nint count = 0;\nfor (int x : nums)\n    if (x == search)\n        ++count;\nSystem.out.println(count);\n</code></pre>\n<p>There is a built-in method, <code>Collections.frequency</code>, that can count occurrences of a value, so this can be simplified.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var nums = Arrays.stream(scan.nextLine().split(&quot; &quot;)).map(Integer::valueOf).toList();\nint search = scan.nextInt();\nint count = Collections.frequency(nums, search);\nSystem.out.println(count);\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1702157167,"creation_date":1702157167,"answer_id":77632963,"question_id":76157881,"body_markdown":" 1. Using method nextLine(), you can get whole line of input as a String.\r\n 2. Once you got the String, you can convert this string to array, by using split(&quot; &quot;) method.\r\n 3. And after getting int for which we will be counting its occurrence, we can loop through the str array, and try to convert each el to Num, but since user could mess up with input, we can use try catch block so it would just skip non convertible elements, without throwing any error.\r\n\r\nFor Example:\r\n\r\n    Scanner scanner = new Scanner(System.in);\r\n\r\n    System.out.println(&quot;Please enter numbers separated by space&quot;);\r\n    String[] strArr = scanner.nextLine().split(&quot; &quot;);\r\n\r\n    System.out.println(&quot;Which numbers occurrence you would like to count?&quot;);\r\n    int numToSearch = scanner.nextInt();\r\n\r\n    int count = 0;\r\n\r\n    for (int i = 0; i &lt; strArr.length; i++) {\r\n        try {\r\n            if (Integer.parseInt(strArr[i]) == numToSearch) count++;\r\n        } catch (NumberFormatException e) {\r\n        }\r\n    }\r\n    System.out.println(&quot;Number &quot; + numToSearch + &quot;&#39;s occurrence is: &quot; + count);","link":"https://stackoverflow.com/questions/76157881/counting-the-number-of-occurrences-of-unknown-number-of-inputs/77632963#77632963","title":"Counting the number of occurrences of unknown number of inputs","body":"<ol>\n<li>Using method nextLine(), you can get whole line of input as a String.</li>\n<li>Once you got the String, you can convert this string to array, by using split(&quot; &quot;) method.</li>\n<li>And after getting int for which we will be counting its occurrence, we can loop through the str array, and try to convert each el to Num, but since user could mess up with input, we can use try catch block so it would just skip non convertible elements, without throwing any error.</li>\n</ol>\n<p>For Example:</p>\n<pre><code>Scanner scanner = new Scanner(System.in);\n\nSystem.out.println(&quot;Please enter numbers separated by space&quot;);\nString[] strArr = scanner.nextLine().split(&quot; &quot;);\n\nSystem.out.println(&quot;Which numbers occurrence you would like to count?&quot;);\nint numToSearch = scanner.nextInt();\n\nint count = 0;\n\nfor (int i = 0; i &lt; strArr.length; i++) {\n    try {\n        if (Integer.parseInt(strArr[i]) == numToSearch) count++;\n    } catch (NumberFormatException e) {\n    }\n}\nSystem.out.println(&quot;Number &quot; + numToSearch + &quot;'s occurrence is: &quot; + count);\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":62,"answer_count":2,"score":0,"last_activity_date":1702157167,"creation_date":1683052448,"last_edit_date":1683052532,"question_id":76157881,"body_markdown":"I am unable to stop taking the input from the user. An infinite loop is being created and I am not sure what my conditions should be or if the entire program in wrong.\r\n\r\n\r\n\r\n\r\nI am trying to create a program where the user enters integers in the first line separated by space and in the next line gives the integer that he/she wants to count the occurrence of.\r\n\r\n\r\n```\r\nimport java.util.Scanner;\r\nimport java.util.ArrayList;\r\npublic class Pracitce {\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner scan = new Scanner(System.in);\r\n\r\n\t\tArrayList&lt;Integer&gt; num = new ArrayList&lt;Integer&gt;();\r\n\t\t\r\n\t\tint count = 0;\r\n\t\tint n = scan.nextInt();\r\n\t    while(n != &#39;\\n&#39;){\r\n\t\t\t\r\n\t\t\tnum.add(n);\r\n\t\t    n = scan.nextInt();\r\n\t\t}\r\n\t\tInteger second = scan.nextInt();\r\n\r\n\t\tint arr[] = new int[num.size()];\r\n\t\tfor(int i = 0; i&lt;num.size();i++){\r\n\t\t\tarr[i] = num.get(i);\r\n\t\t}\r\n\t\tfor(int i: arr){\r\n\t\t\tif(second == i){\r\n\t\t\t\tcount++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(count);\r\n\t}\r\n\r\n}\r\n```\r\nExpected output:\r\n1 2 2 3 3 3 3\r\n3\r\n4","link":"https://stackoverflow.com/questions/76157881/counting-the-number-of-occurrences-of-unknown-number-of-inputs","title":"Counting the number of occurrences of unknown number of inputs","body":"<p>I am unable to stop taking the input from the user. An infinite loop is being created and I am not sure what my conditions should be or if the entire program in wrong.</p>\n<p>I am trying to create a program where the user enters integers in the first line separated by space and in the next line gives the integer that he/she wants to count the occurrence of.</p>\n<pre><code>import java.util.Scanner;\nimport java.util.ArrayList;\npublic class Pracitce {\n    public static void main(String[] args) {\n        Scanner scan = new Scanner(System.in);\n\n        ArrayList&lt;Integer&gt; num = new ArrayList&lt;Integer&gt;();\n        \n        int count = 0;\n        int n = scan.nextInt();\n        while(n != '\\n'){\n            \n            num.add(n);\n            n = scan.nextInt();\n        }\n        Integer second = scan.nextInt();\n\n        int arr[] = new int[num.size()];\n        for(int i = 0; i&lt;num.size();i++){\n            arr[i] = num.get(i);\n        }\n        for(int i: arr){\n            if(second == i){\n                count++;\n            }\n        }\n        System.out.println(count);\n    }\n\n}\n</code></pre>\n<p>Expected output:\n1 2 2 3 3 3 3\n3\n4</p>\n"},{"tags":["java","android","react-native","gradle"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702153481,"creation_date":1702153481,"answer_id":77632770,"question_id":77224019,"body_markdown":"I don&#39;t know the exact solution to fix the problem and make your app run, but to start with getting rid of that error, check the following file.\r\n\r\n&gt; node_modules\\@react-native\\gradle-plugin\\build.gradle.kts\r\n\r\nIn this file, you will find the `source` and `target`  that you are trying to find.","link":"https://stackoverflow.com/questions/77224019/error-with-gradle-the-new-java-toolchain-feature-cannot-be-used-at-the-project/77632770#77632770","title":"ERROR with gradle : The new Java toolchain feature cannot be used at the project level in combination with source and/or target compatibility","body":"<p>I don't know the exact solution to fix the problem and make your app run, but to start with getting rid of that error, check the following file.</p>\n<blockquote>\n<p>node_modules@react-native\\gradle-plugin\\build.gradle.kts</p>\n</blockquote>\n<p>In this file, you will find the <code>source</code> and <code>target</code>  that you are trying to find.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":360,"answer_count":1,"score":2,"last_activity_date":1702153481,"creation_date":1696350603,"last_edit_date":1696408918,"question_id":77224019,"body_markdown":"I am having issues building and testing my React Native app on Android. We updated RN version to 71 recently and I managed to make iOS work but on Android I am stuck with the following error : `The new Java toolchain feature cannot be used at the project level in combination with source and/or target compatibility` when running any `./gradlew` in the android folder. Even `./gradlew clean` does not work. Syncing gradle in Android Studio return the same error.\r\n\r\nI am not using the toolchain functionality nor source and/or target compatibility.\r\n\r\n### build.gradle\r\n\r\n```lang-groovy\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\napply from: &quot;./env.gradle&quot;\r\nbuildscript {\r\n    ext {\r\n        buildToolsVersion = &quot;30.0.2&quot;\r\n        minSdkVersion = 21\r\n        compileSdkVersion = 33\r\n        targetSdkVersion = 33\r\n        ndkVersion = &quot;23.1.7779620&quot;\r\n        kotlinVersion = &#39;1.9.0&#39;\r\n        googlePlayServicesAuthVersion = &quot;16.0.1&quot;\r\n        googlePlayServicesLocationVersion = &quot;17.0.0&quot;\r\n\r\n        androidXCore = &quot;1.7.0&quot;\r\n        RNMapboxMapsImpl = &quot;mapbox&quot; // required for v10\r\n\r\n        RNMapboxMapsLibs = { // optional - only required if you want to customize it\r\n            implementation &#39;com.mapbox.maps:android:10.5.0-beta1&#39;\r\n            implementation &#39;com.mapbox.mapboxsdk:mapbox-sdk-turf:5.4.1&#39;\r\n            implementation &#39;com.mapbox.mapboxsdk:mapbox-android-telemetry:6.1.0&#39;\r\n        }\r\n    }\r\n    repositories {\r\n        google()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath(&#39;com.android.tools.build:gradle&#39;)\r\n        classpath(&quot;com.facebook.react:react-native-gradle-plugin&quot;)\r\n        classpath &#39;com.google.gms:google-services:4.4.0&#39;\r\n    }\r\n}\r\n\r\ndef REACT_NATIVE_VERSION = new File([&#39;node&#39;, &#39;--print&#39;,&quot;JSON.parse(require(&#39;fs&#39;).readFileSync(require.resolve(&#39;react-native/package.json&#39;), &#39;utf-8&#39;)).version&quot;].execute(null, rootDir).text.trim())\r\n\r\nallprojects {\r\n\r\n    configurations.all {\r\n        resolutionStrategy {\r\n            force &quot;com.facebook.react:react-native:&quot; + REACT_NATIVE_VERSION\r\n        }\r\n    }\r\n    repositories {\r\n        maven {\r\n            // Required for react-native-background-geolocation\r\n            url(&quot;${project(&#39;:react-native-background-geolocation&#39;).projectDir}/libs&quot;)\r\n        }\r\n        maven {\r\n            url(&quot;${project(&#39;:react-native-background-fetch&#39;).projectDir}/libs&quot;)\r\n        }\r\n        maven {\r\n            url &#39;https://api.mapbox.com/downloads/v2/releases/maven&#39;\r\n            authentication {\r\n                basic(BasicAuthentication)\r\n            }\r\n            credentials {\r\n                // Do not change the username below.\r\n                // This should always be `mapbox` (not your username).\r\n                username = &#39;mapbox&#39;\r\n                // Use the secret token you stored in gradle.properties as the password\r\n                password = project.env.get(&#39;MAPBOX_ACCESS_TOKEN&#39;) ?: &quot;&quot;\r\n            }\r\n        }\r\n        google()\r\n        mavenCentral()\r\n    }\r\n}\r\n\r\n```\r\n\r\n### app/build.gradle\r\n\r\n```lang-groovy\r\napply plugin: &quot;com.android.application&quot;\r\napply plugin: &#39;com.google.gms.google-services&#39;\r\napply plugin: &quot;com.facebook.react&quot;\r\n\r\nproject.ext.envConfigFiles = [\r\n  release: &quot;.env.production&quot;,\r\n  staging:&quot;.env.staging&quot;,\r\n  production:&quot;.env.production&quot;,\r\n  debug: &quot;.env.staging&quot;,\r\n  storybook: &quot;.env.storybook&quot;,\r\n]\r\n\r\napply from: project(&#39;:react-native-config&#39;).projectDir.getPath() + &quot;/dotenv.gradle&quot;\r\n\r\n\r\nimport com.android.build.OutputFile\r\n\r\n/**\r\n * The react.gradle file registers a task for each build variant (e.g. bundleDebugJsAndAssets\r\n * and bundleReleaseJsAndAssets).\r\n * These basically call `react-native bundle` with the correct arguments during the Android build\r\n * cycle. By default, bundleDebugJsAndAssets is skipped, as in debug/dev mode we prefer to load the\r\n * bundle directly from the development server. Below you can see all the possible configurations\r\n * and their defaults. If you decide to add a configuration block, make sure to add it before the\r\n * `apply from: &quot;../../node_modules/react-native/react.gradle&quot;` line.\r\n *\r\n * project.ext.react = [\r\n *   // the name of the generated asset file containing your JS bundle\r\n *   bundleAssetName: &quot;index.android.bundle&quot;,\r\n *\r\n *   // the entry file for bundle generation. If none specified and\r\n *   // &quot;index.android.js&quot; exists, it will be used. Otherwise &quot;index.js&quot; is\r\n *   // default. Can be overridden with ENTRY_FILE environment variable.\r\n *   entryFile: &quot;index.android.js&quot;,\r\n *\r\n *   // https://reactnative.dev/docs/performance#enable-the-ram-format\r\n *   bundleCommand: &quot;ram-bundle&quot;,\r\n *\r\n *   // whether to bundle JS and assets in debug mode\r\n *   bundleInDebug: false,\r\n *\r\n *   // whether to bundle JS and assets in release mode\r\n *   bundleInRelease: true,\r\n *\r\n *   // whether to bundle JS and assets in another build variant (if configured).\r\n *   // See http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Build-Variants\r\n *   // The configuration property can be in the following formats\r\n *   //         &#39;bundleIn${productFlavor}${buildType}&#39;\r\n *   //         &#39;bundleIn${buildType}&#39;\r\n *   // bundleInFreeDebug: true,\r\n *   // bundleInPaidRelease: true,\r\n *   // bundleInBeta: true,\r\n *\r\n *   // whether to disable dev mode in custom build variants (by default only disabled in release)\r\n *   // for example: to disable dev mode in the staging build type (if configured)\r\n *   devDisabledInStaging: true,\r\n *   // The configuration property can be in the following formats\r\n *   //         &#39;devDisabledIn${productFlavor}${buildType}&#39;\r\n *   //         &#39;devDisabledIn${buildType}&#39;\r\n *\r\n *   // the root of your project, i.e. where &quot;package.json&quot; lives\r\n *   root: &quot;../../&quot;,\r\n *\r\n *   // where to put the JS bundle asset in debug mode\r\n *   jsBundleDirDebug: &quot;$buildDir/intermediates/assets/debug&quot;,\r\n *\r\n *   // where to put the JS bundle asset in release mode\r\n *   jsBundleDirRelease: &quot;$buildDir/intermediates/assets/release&quot;,\r\n *\r\n *   // where to put drawable resources / React Native assets, e.g. the ones you use via\r\n *   // require(&#39;./image.png&#39;)), in debug mode\r\n *   resourcesDirDebug: &quot;$buildDir/intermediates/res/merged/debug&quot;,\r\n *\r\n *   // where to put drawable resources / React Native assets, e.g. the ones you use via\r\n *   // require(&#39;./image.png&#39;)), in release mode\r\n *   resourcesDirRelease: &quot;$buildDir/intermediates/res/merged/release&quot;,\r\n *\r\n *   // by default the gradle tasks are skipped if none of the JS files or assets change; this means\r\n *   // that we don&#39;t look at files in android/ or ios/ to determine whether the tasks are up to\r\n *   // date; if you have any other folders that you want to ignore for performance reasons (gradle\r\n *   // indexes the entire tree), add them here. Alternatively, if you have JS files in android/\r\n *   // for example, you might want to remove it from here.\r\n *   inputExcludes: [&quot;android/**&quot;, &quot;ios/**&quot;],\r\n *\r\n *   // override which node gets called and with what additional arguments\r\n *   nodeExecutableAndArgs: [&quot;node&quot;],\r\n *\r\n *   // supply additional arguments to the packager\r\n *   extraPackagerArgs: []\r\n * ]\r\n */\r\n\r\nproject.ext.react = [\r\n    enableHermes: false,  // clean and rebuild if changing\r\n]\r\n\r\napply from: &quot;../../node_modules/@sentry/react-native/sentry.gradle&quot;\r\n\r\n/**\r\n * Set this to true to create two separate APKs instead of one:\r\n *   - An APK that only works on ARM devices\r\n *   - An APK that only works on x86 devices\r\n * The advantage is the size of the APK is reduced by about 4MB.\r\n * Upload all the APKs to the Play Store and people will download\r\n * the correct one based on the CPU architecture of their device.\r\n */\r\ndef enableSeparateBuildPerCPUArchitecture = false\r\n\r\n/**\r\n * Run Proguard to shrink the Java bytecode in release builds.\r\n */\r\ndef enableProguardInReleaseBuilds = false\r\n\r\n/**\r\n * The preferred build flavor of JavaScriptCore.\r\n *\r\n * For example, to use the international variant, you can use:\r\n * `def jscFlavor = &#39;org.webkit:android-jsc-intl:+&#39;`\r\n *\r\n * The international variant includes ICU i18n library and necessary data\r\n * allowing to use e.g. `Date.toLocaleString` and `String.localeCompare` that\r\n * give correct results when using with locales other than en-US.  Note that\r\n * this variant is about 6MiB larger per architecture than default.\r\n */\r\ndef jscFlavor = &#39;org.webkit:android-jsc:+&#39;\r\n\r\n/**\r\n * Whether to enable the Hermes VM.\r\n *\r\n * This should be set on project.ext.react and that value will be read here. If it is not set\r\n * on project.ext.react, JavaScript will not be compiled to Hermes Bytecode\r\n * and the benefits of using Hermes will therefore be sharply reduced.\r\n */\r\ndef enableHermes = project.ext.react.get(&quot;enableHermes&quot;, false);\r\n\r\n/**\r\n * Architectures to build native code for in debug.\r\n */\r\ndef nativeArchitectures = project.getProperties().get(&quot;reactNativeDebugArchitectures&quot;)\r\n\r\nandroid {\r\n    namespace &#39;com.surlo.surloapp&#39;\r\n\r\n    ndkVersion rootProject.ext.ndkVersion\r\n\r\n    externalNativeBuild {\r\n        cmake {\r\n            version &quot;3.22.1&quot;\r\n        }\r\n    }\r\n\r\n    productFlavors {\r\n        staging {\r\n            applicationIdSuffix = &quot;.staging&quot;\r\n            resValue &quot;string&quot;, &quot;build_config_package&quot;, &quot;com.surlo.surloapp&quot;\r\n        }\r\n        production {}\r\n        storybook {\r\n            applicationIdSuffix = &quot;.staging&quot;\r\n            resValue &quot;string&quot;, &quot;build_config_package&quot;, &quot;com.surlo.surloapp&quot;\r\n        }\r\n    }\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.surlo.surloapp&quot;\r\n        minSdkVersion rootProject.ext.minSdkVersion\r\n        targetSdkVersion rootProject.ext.targetSdkVersion\r\n        compileSdkVersion rootProject.ext.compileSdkVersion\r\n        versionName &quot;2.2.19&quot;\r\n        versionCode 111\r\n    }\r\n    splits {\r\n        abi {\r\n            reset()\r\n            enable enableSeparateBuildPerCPUArchitecture\r\n            universalApk false  // If true, also generate a universal APK\r\n            include &quot;armeabi-v7a&quot;, &quot;x86&quot;, &quot;arm64-v8a&quot;, &quot;x86_64&quot;\r\n        }\r\n    }\r\n    signingConfigs {\r\n        debug {\r\n            storeFile file(&#39;debug.keystore&#39;)\r\n            storePassword &#39;android&#39;\r\n            keyAlias &#39;androiddebugkey&#39;\r\n            keyPassword &#39;android&#39;\r\n        }\r\n         release {\r\n            storeFile file(project.env.get(&#39;UPLOAD_STORE_FILE&#39;))\r\n            storePassword project.env.get(&#39;UPLOAD_STORE_PASSWORD&#39;)\r\n            keyAlias project.env.get(&#39;UPLOAD_KEY_ALIAS&#39;)\r\n            keyPassword project.env.get(&#39;UPLOAD_KEY_PASSWORD&#39;)\r\n        }\r\n    }\r\n    buildTypes {\r\n        debug {\r\n            signingConfig signingConfigs.debug\r\n            if (nativeArchitectures) {\r\n                ndk {\r\n                    abiFilters nativeArchitectures.split(&#39;,&#39;)\r\n                }\r\n            }\r\n        }\r\n        release {\r\n            // Caution! In production, you need to generate your own keystore file.\r\n            // see https://reactnative.dev/docs/signed-apk-android.\r\n            signingConfig signingConfigs.release\r\n            minifyEnabled enableProguardInReleaseBuilds\r\n            proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;\r\n        }\r\n    }\r\n\r\n    // applicationVariants are e.g. debug, release\r\n    applicationVariants.all { variant -&gt;\r\n        variant.outputs.each { output -&gt;\r\n            // For each separate APK per architecture, set a unique version code as described here:\r\n            // https://developer.android.com/studio/build/configure-apk-splits.html\r\n            // Example: versionCode 1 will generate 1001 for armeabi-v7a, 1002 for x86, etc.\r\n            def versionCodes = [&quot;armeabi-v7a&quot;: 1, &quot;x86&quot;: 2, &quot;arm64-v8a&quot;: 3, &quot;x86_64&quot;: 4]\r\n            def abi = output.getFilter(OutputFile.ABI)\r\n            if (abi != null) {  // null for the universal-debug, universal-release variants\r\n                output.versionCodeOverride =\r\n                        defaultConfig.versionCode * 1000 + versionCodes.get(abi)\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n    // Import the Firebase BoM\r\n    implementation platform(&#39;com.google.firebase:firebase-bom:30.1.0&#39;)\r\n\r\n    // Add the dependency for the Firebase SDK for Google Analytics\r\n    // When using the BoM, don&#39;t specify versions in Firebase dependencies\r\n    implementation &#39;com.google.firebase:firebase-analytics&#39;\r\n\r\n    // Add the dependencies for any other desired Firebase products\r\n    // https://firebase.google.com/docs/android/setup#available-libraries\r\n\r\n\r\n    implementation (&quot;androidx.appcompat:appcompat:1.3.1&quot;) {\r\n      version {\r\n          strictly &#39;1.3.1&#39;\r\n      }\r\n    }\r\n    \r\n    implementation fileTree(dir: &quot;libs&quot;, include: [&quot;*.jar&quot;])\r\n    //noinspection GradleDynamicVersion\r\n    // implementation &quot;com.facebook.react:react-native:+&quot;  // From node_modules\r\n    implementation(&quot;com.facebook.react:react-android&quot;)\r\n    implementation &quot;com.squareup.okhttp3:okhttp:4.9.1&quot;\r\n    implementation &quot;androidx.swiperefreshlayout:swiperefreshlayout:1.0.0&quot;\r\n    implementation &#39;com.google.android.gms:play-services-ads-identifier:17.1.0+&#39;\r\n    implementation &#39;androidx.browser:browser:1.0.0&#39;\r\n    implementation &#39;androidx.work:work-runtime-ktx:2.7.0&#39;\r\n    implementation &quot;com.android.billingclient:billing:6.0.1&quot;\r\n\r\n\r\n    if (enableHermes) {\r\n        def hermesPath = &quot;../../node_modules/hermes-engine/android/&quot;;\r\n        debugImplementation files(hermesPath + &quot;hermes-debug.aar&quot;)\r\n        releaseImplementation files(hermesPath + &quot;hermes-release.aar&quot;)\r\n    } else {\r\n        implementation jscFlavor\r\n    }\r\n}\r\n\r\n// Run this once to be able to run the application with BUCK\r\n// puts all compile dependencies into folder libs for BUCK to use\r\ntask copyDownloadableDepsToLibs(type: Copy) {\r\n    from configurations.implementation\r\n    into &#39;libs&#39;\r\n}\r\n\r\napply from: file(&quot;../../node_modules/@react-native-community/cli-platform-android/native_modules.gradle&quot;); applyNativeModulesAppBuildGradle(project)\r\n\r\n```\r\n\r\n### Config\r\n```lang-bash\r\n java --version\r\nopenjdk 11.0.11 2021-04-20\r\nOpenJDK Runtime Environment AdoptOpenJDK-11.0.11+9 (build 11.0.11+9)\r\nOpenJDK 64-Bit Server VM AdoptOpenJDK-11.0.11+9 (build 11.0.11+9, mixed mode)\r\n\r\n ./gradlew --version\r\n\r\n------------------------------------------------------------\r\nGradle 7.6.2\r\n------------------------------------------------------------\r\n\r\nBuild time:   2023-06-30 15:42:51 UTC\r\nRevision:     dab132169006b16e7ada4ab2456e0c9d6415b52a\r\n\r\nKotlin:       1.7.10\r\nGroovy:       3.0.13\r\nAnt:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\r\nJVM:          11.0.11 (AdoptOpenJDK 11.0.11+9)\r\nOS:           Mac OS X 10.16 x86_64\r\n```\r\n\r\n### package.json\r\n```lang-json\r\n{\r\n  &quot;name&quot;: &quot;surlomobile&quot;,\r\n  &quot;version&quot;: &quot;0.0.1&quot;,\r\n  &quot;private&quot;: true,\r\n  &quot;scripts&quot;: {\r\n    &quot;replace&quot;: &quot;node ./replace-gradle.js&quot;,\r\n    &quot;android&quot;: &quot;react-native run-android --variant=stagingDebug&quot;,\r\n    &quot;android:production&quot;: &quot;react-native run-android --variant=productionDebug&quot;,\r\n    &quot;build:android:staging&quot;: &quot;(cd android &amp;&amp; ./gradlew bundleStagingRelease); (yarn android:open:bundle:staging)&quot;,\r\n    &quot;android:storybook&quot;: &quot;react-native run-android --variant=storybookDebug&quot;,\r\n    &quot;build:android:staging:apk&quot;: &quot;(cd android &amp;&amp; ./gradlew assembleStagingRelease); (yarn android:open:apk)&quot;,\r\n    &quot;build:android:production&quot;: &quot;(cd android &amp;&amp; ./gradlew bundleProductionRelease); (yarn android:open:bundle:production)&quot;,\r\n    &quot;build:android:production:apk&quot;: &quot;(cd android &amp;&amp; ./gradlew assembleProductionRelease); (yarn android:open:apk)&quot;,\r\n    &quot;android:clean&quot;: &quot;ENVFILE=.env.staging cd android &amp;&amp; ./gradlew clean&quot;,\r\n    &quot;android:open:bundle:production&quot;: &quot;open android/app/build/outputs/bundle/productionRelease&quot;,\r\n    &quot;android:open:bundle:staging&quot;: &quot;open android/app/build/outputs/bundle/stagingRelease&quot;,\r\n    &quot;android:open:apk&quot;: &quot;open android/app/build/outputs/apk/production/release&quot;,\r\n    &quot;ios&quot;: &quot;react-native run-ios --scheme &#39;surloMobile-staging&#39;&quot;,\r\n    &quot;ios:production&quot;: &quot;react-native run-ios --scheme &#39;surloMobile&#39;&quot;,\r\n    &quot;start&quot;: &quot;react-native start&quot;,\r\n    &quot;test&quot;: &quot;jest&quot;,\r\n    &quot;precommit&quot;: &quot;yarn lint &amp;&amp; yarn tsc&quot;,\r\n    &quot;postinstall&quot;: &quot;jetify; (cd ios; pod install); exit 0;&quot;,\r\n    &quot;lint&quot;: &quot;eslint . --ext .js,.jsx,.ts,.tsx&quot;,\r\n    &quot;clean&quot;: &quot;npx react-native-clean-project&quot;,\r\n    &quot;prestorybook&quot;: &quot;rnstl&quot;,\r\n    &quot;quality&quot;: &quot;yarn lint --fix &amp;&amp; yarn tsc -p .&quot;,\r\n    &quot;increment-version&quot;: &quot;bash scripts/update_version.sh&quot;\r\n  },\r\n  &quot;dependencies&quot;: {\r\n    &quot;@babel/plugin-proposal-export-namespace-from&quot;: &quot;^7.18.9&quot;,\r\n    &quot;@hookform/resolvers&quot;: &quot;^3.3.1&quot;,\r\n    &quot;@miblanchard/react-native-slider&quot;: &quot;^2.3.1&quot;,\r\n    &quot;@react-native-async-storage/async-storage&quot;: &quot;^1.19.3&quot;,\r\n    &quot;@react-native-clipboard/clipboard&quot;: &quot;^1.12.1&quot;,\r\n    &quot;@react-native-community/datetimepicker&quot;: &quot;^7.6.0&quot;,\r\n    &quot;@react-native-community/netinfo&quot;: &quot;^9.4.1&quot;,\r\n    &quot;@react-native-community/slider&quot;: &quot;^4.4.3&quot;,\r\n    &quot;@react-native-firebase/app&quot;: &quot;^18.5.0&quot;,\r\n    &quot;@react-native-firebase/messaging&quot;: &quot;^18.5.0&quot;,\r\n    &quot;@react-native-mapbox-gl/maps&quot;: &quot;8.6.0-beta.0&quot;,\r\n    &quot;@react-native-masked-view/masked-view&quot;: &quot;^0.2.9&quot;,\r\n    &quot;@react-native-picker/picker&quot;: &quot;^2.5.1&quot;,\r\n    &quot;@react-native/gradle-plugin&quot;: &quot;^0.73.1&quot;,\r\n    &quot;@react-native/metro-config&quot;: &quot;^0.73.1&quot;,\r\n    &quot;@react-navigation/bottom-tabs&quot;: &quot;^6.5.9&quot;,\r\n    &quot;@react-navigation/elements&quot;: &quot;^1.3.19&quot;,\r\n    &quot;@react-navigation/native&quot;: &quot;^6.1.8&quot;,\r\n    &quot;@react-navigation/stack&quot;: &quot;^6.3.18&quot;,\r\n    &quot;@rematch/core&quot;: &quot;^2.2.0&quot;,\r\n    &quot;@rematch/loading&quot;: &quot;^2.1.2&quot;,\r\n    &quot;@rematch/persist&quot;: &quot;^2.1.2&quot;,\r\n    &quot;@sentry/react-native&quot;: &quot;^5.9.2&quot;,\r\n    &quot;@trivago/prettier-plugin-sort-imports&quot;: &quot;^4.2.0&quot;,\r\n    &quot;@turf/turf&quot;: &quot;^6.5.0&quot;,\r\n    &quot;@twotalltotems/react-native-otp-input&quot;: &quot;^1.3.11&quot;,\r\n    &quot;@types/geojson&quot;: &quot;^7946.0.11&quot;,\r\n    &quot;async-mutex&quot;: &quot;^0.4.0&quot;,\r\n    &quot;axios&quot;: &quot;1.5.1&quot;,\r\n    &quot;babel-plugin-module-resolver&quot;: &quot;^5.0.0&quot;,\r\n    &quot;camelcase-keys&quot;: &quot;^9.0.0&quot;,\r\n    &quot;chroma-js&quot;: &quot;^2.4.2&quot;,\r\n    &quot;dayjs&quot;: &quot;^1.11.10&quot;,\r\n    &quot;eslint-plugin-prettier&quot;: &quot;^5.0.0&quot;,\r\n    &quot;eslint-plugin-react-hooks&quot;: &quot;^4.6.0&quot;,\r\n    &quot;expo&quot;: &quot;^49.0.12&quot;,\r\n    &quot;expo-image-manipulator&quot;: &quot;^11.5.0&quot;,\r\n    &quot;expo-location&quot;: &quot;^16.3.0&quot;,\r\n    &quot;i18n-iso-countries&quot;: &quot;^7.7.0&quot;,\r\n    &quot;i18next&quot;: &quot;^23.5.1&quot;,\r\n    &quot;intl&quot;: &quot;^1.2.5&quot;,\r\n    &quot;libphonenumber-js&quot;: &quot;^1.10.45&quot;,\r\n    &quot;lodash&quot;: &quot;^4.17.21&quot;,\r\n    &quot;lottie-ios&quot;: &quot;^4.3.2&quot;,\r\n    &quot;lottie-react-native&quot;: &quot;^6.3.1&quot;,\r\n    &quot;luxon&quot;: &quot;^3.4.3&quot;,\r\n    &quot;moment&quot;: &quot;^2.29.4&quot;,\r\n    &quot;normalize-strings&quot;: &quot;^1.1.1&quot;,\r\n    &quot;react&quot;: &quot;^18.2.0&quot;,\r\n    &quot;react-hook-form&quot;: &quot;^7.46.2&quot;,\r\n    &quot;react-i18next&quot;: &quot;^13.2.2&quot;,\r\n    &quot;react-native&quot;: &quot;^0.71.0&quot;,\r\n    &quot;react-native-animatable&quot;: &quot;^1.3.3&quot;,\r\n    &quot;react-native-background-fetch&quot;: &quot;^4.2.1&quot;,\r\n    &quot;react-native-background-geolocation&quot;: &quot;^4.13.3&quot;,\r\n    &quot;react-native-branch&quot;: &quot;^5.9.0&quot;,\r\n    &quot;react-native-chart-kit&quot;: &quot;^6.12.0&quot;,\r\n    &quot;react-native-codegen&quot;: &quot;^0.71.6&quot;,\r\n    &quot;react-native-config&quot;: &quot;^1.5.1&quot;,\r\n    &quot;react-native-device-info&quot;: &quot;^10.11.0&quot;,\r\n    &quot;react-native-document-picker&quot;: &quot;^9.0.1&quot;,\r\n    &quot;react-native-error-boundary&quot;: &quot;^1.2.3&quot;,\r\n    &quot;react-native-flash-message&quot;: &quot;^0.4.2&quot;,\r\n    &quot;react-native-geolocation-service&quot;: &quot;^5.3.1&quot;,\r\n    &quot;react-native-gesture-handler&quot;: &quot;^2.13.1&quot;,\r\n    &quot;react-native-image-crop-picker&quot;: &quot;^0.40.0&quot;,\r\n    &quot;react-native-keyboard-aware-scroll-view&quot;: &quot;^0.9.5&quot;,\r\n    &quot;react-native-linear-gradient&quot;: &quot;^2.8.3&quot;,\r\n    &quot;react-native-linear-gradient-text&quot;: &quot;^0.3.1&quot;,\r\n    &quot;react-native-localize&quot;: &quot;^3.0.2&quot;,\r\n    &quot;react-native-modal&quot;: &quot;^13.0.1&quot;,\r\n    &quot;react-native-permissions&quot;: &quot;^3.9.2&quot;,\r\n    &quot;react-native-picker-select&quot;: &quot;^8.1.0&quot;,\r\n    &quot;react-native-reanimated&quot;: &quot;^3.5.4&quot;,\r\n    &quot;react-native-safe-area-context&quot;: &quot;^4.7.2&quot;,\r\n    &quot;react-native-screens&quot;: &quot;^3.25.0&quot;,\r\n    &quot;react-native-snap-carousel&quot;: &quot;^3.9.1&quot;,\r\n    &quot;react-native-splash-screen&quot;: &quot;^3.3.0&quot;,\r\n    &quot;react-native-storybook-loader&quot;: &quot;^2.0.5&quot;,\r\n    &quot;react-native-svg&quot;: &quot;^13.14.0&quot;,\r\n    &quot;react-native-svg-transformer&quot;: &quot;^1.1.0&quot;,\r\n    &quot;react-native-webview&quot;: &quot;^13.6.0&quot;,\r\n    &quot;react-query&quot;: &quot;^3.39.3&quot;,\r\n    &quot;react-redux&quot;: &quot;^8.1.2&quot;,\r\n    &quot;redux&quot;: &quot;^4.2.1&quot;,\r\n    &quot;redux-persist&quot;: &quot;^6.0.0&quot;,\r\n    &quot;snakecase-keys&quot;: &quot;^5.4.7&quot;,\r\n    &quot;zod&quot;: &quot;^3.22.2&quot;\r\n  },\r\n  &quot;devDependencies&quot;: {\r\n    &quot;@babel/core&quot;: &quot;^7.23.0&quot;,\r\n    &quot;@babel/runtime&quot;: &quot;^7.23.1&quot;,\r\n    &quot;@jest/globals&quot;: &quot;29.7.0&quot;,\r\n    &quot;@react-native-community/eslint-config&quot;: &quot;^3.2.0&quot;,\r\n    &quot;@storybook/addon-actions&quot;: &quot;^7.4.5&quot;,\r\n    &quot;@storybook/addon-backgrounds&quot;: &quot;^7.4.5&quot;,\r\n    &quot;@storybook/addon-knobs&quot;: &quot;^7.0.2&quot;,\r\n    &quot;@storybook/addon-links&quot;: &quot;^7.4.5&quot;,\r\n    &quot;@storybook/addon-ondevice-actions&quot;: &quot;^6.5.6&quot;,\r\n    &quot;@storybook/addon-ondevice-backgrounds&quot;: &quot;^6.5.6&quot;,\r\n    &quot;@storybook/addon-ondevice-knobs&quot;: &quot;^6.5.6&quot;,\r\n    &quot;@storybook/react-native&quot;: &quot;^6.5.6&quot;,\r\n    &quot;@storybook/react-native-server&quot;: &quot;^6.5.6&quot;,\r\n    &quot;@testing-library/jest-native&quot;: &quot;^5.4.3&quot;,\r\n    &quot;@types/camelcase-keys&quot;: &quot;^5.1.1&quot;,\r\n    &quot;@types/chroma-js&quot;: &quot;^2.4.1&quot;,\r\n    &quot;@types/jest&quot;: &quot;^29.5.5&quot;,\r\n    &quot;@types/lodash&quot;: &quot;^4.14.199&quot;,\r\n    &quot;@types/luxon&quot;: &quot;^3.3.2&quot;,\r\n    &quot;@types/react&quot;: &quot;^18.2.23&quot;,\r\n    &quot;@types/react-native&quot;: &quot;^0.72.3&quot;,\r\n    &quot;@types/react-native-snap-carousel&quot;: &quot;^3.8.6&quot;,\r\n    &quot;@types/react-test-renderer&quot;: &quot;^18.0.3&quot;,\r\n    &quot;@typescript-eslint/eslint-plugin&quot;: &quot;^6.7.3&quot;,\r\n    &quot;@typescript-eslint/parser&quot;: &quot;^6.7.3&quot;,\r\n    &quot;babel-jest&quot;: &quot;^29.7.0&quot;,\r\n    &quot;babel-loader&quot;: &quot;9.1.3&quot;,\r\n    &quot;babel-plugin-dynamic-import-node&quot;: &quot;2.3.3&quot;,\r\n    &quot;eslint&quot;: &quot;^8.50.0&quot;,\r\n    &quot;eslint-config-derniercri&quot;: &quot;https://git@github.com/derniercri/eslint-config-derniercri.git#commit=02fd4c713505902ec314f9d528f03c4327410ae9&quot;,\r\n    &quot;jest&quot;: &quot;^29.7.0&quot;,\r\n    &quot;metro-react-native-babel-preset&quot;: &quot;^0.77.0&quot;,\r\n    &quot;prettier&quot;: &quot;^3.0.3&quot;,\r\n    &quot;react-dom&quot;: &quot;^18.2.0&quot;,\r\n    &quot;react-test-renderer&quot;: &quot;18.2.0&quot;,\r\n    &quot;replace-in-files&quot;: &quot;3.0.0&quot;,\r\n    &quot;ts-jest&quot;: &quot;^29.1.1&quot;,\r\n    &quot;typescript&quot;: &quot;^5.2.2&quot;\r\n  },\r\n  &quot;resolutions&quot;: {\r\n    &quot;@types/react&quot;: &quot;^17&quot;\r\n  },\r\n  &quot;jest&quot;: {\r\n    &quot;preset&quot;: &quot;react-native&quot;,\r\n    &quot;testEnvironment&quot;: &quot;jsdom&quot;,\r\n    &quot;transformIgnorePatterns&quot;: [\r\n      &quot;/node_modules/(?!(@react-native|@react-native-.+|react-native|@react-navigation|react-native-.+|.+/react-native-.+|@sentry|expo-image-manipulator|expo-modules-core|expo-location)/)&quot;\r\n    ],\r\n    &quot;moduleNameMapper&quot;: {\r\n      &quot;^@internals/(.*)$&quot;: &quot;&lt;rootDir&gt;/src/$1&quot;\r\n    },\r\n    &quot;setupFiles&quot;: [\r\n      &quot;./jest-setup/jestGlobalSetup.js&quot;\r\n    ],\r\n    &quot;globals&quot;: {\r\n      &quot;ts-jest&quot;: {\r\n        &quot;babelConfig&quot;: true\r\n      },\r\n      &quot;__DEV__&quot;: true\r\n    },\r\n    &quot;setupFilesAfterEnv&quot;: [\r\n      &quot;@react-native-mapbox-gl/maps/setup-jest&quot;\r\n    ]\r\n  },\r\n  &quot;config&quot;: {\r\n    &quot;react-native-storybook-loader&quot;: {\r\n      &quot;searchDir&quot;: [\r\n        &quot;./src&quot;\r\n      ],\r\n      &quot;pattern&quot;: &quot;**/*.stories.tsx&quot;,\r\n      &quot;outputFile&quot;: &quot;./storybook/storyLoader.js&quot;\r\n    }\r\n  },\r\n  &quot;packageManager&quot;: &quot;yarn@3.6.3&quot;\r\n}\r\n\r\n```","link":"https://stackoverflow.com/questions/77224019/error-with-gradle-the-new-java-toolchain-feature-cannot-be-used-at-the-project","title":"ERROR with gradle : The new Java toolchain feature cannot be used at the project level in combination with source and/or target compatibility","body":"<p>I am having issues building and testing my React Native app on Android. We updated RN version to 71 recently and I managed to make iOS work but on Android I am stuck with the following error : <code>The new Java toolchain feature cannot be used at the project level in combination with source and/or target compatibility</code> when running any <code>./gradlew</code> in the android folder. Even <code>./gradlew clean</code> does not work. Syncing gradle in Android Studio return the same error.</p>\n<p>I am not using the toolchain functionality nor source and/or target compatibility.</p>\n<h3>build.gradle</h3>\n<pre class=\"lang-groovy prettyprint-override\"><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\napply from: &quot;./env.gradle&quot;\nbuildscript {\n    ext {\n        buildToolsVersion = &quot;30.0.2&quot;\n        minSdkVersion = 21\n        compileSdkVersion = 33\n        targetSdkVersion = 33\n        ndkVersion = &quot;23.1.7779620&quot;\n        kotlinVersion = '1.9.0'\n        googlePlayServicesAuthVersion = &quot;16.0.1&quot;\n        googlePlayServicesLocationVersion = &quot;17.0.0&quot;\n\n        androidXCore = &quot;1.7.0&quot;\n        RNMapboxMapsImpl = &quot;mapbox&quot; // required for v10\n\n        RNMapboxMapsLibs = { // optional - only required if you want to customize it\n            implementation 'com.mapbox.maps:android:10.5.0-beta1'\n            implementation 'com.mapbox.mapboxsdk:mapbox-sdk-turf:5.4.1'\n            implementation 'com.mapbox.mapboxsdk:mapbox-android-telemetry:6.1.0'\n        }\n    }\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath('com.android.tools.build:gradle')\n        classpath(&quot;com.facebook.react:react-native-gradle-plugin&quot;)\n        classpath 'com.google.gms:google-services:4.4.0'\n    }\n}\n\ndef REACT_NATIVE_VERSION = new File(['node', '--print',&quot;JSON.parse(require('fs').readFileSync(require.resolve('react-native/package.json'), 'utf-8')).version&quot;].execute(null, rootDir).text.trim())\n\nallprojects {\n\n    configurations.all {\n        resolutionStrategy {\n            force &quot;com.facebook.react:react-native:&quot; + REACT_NATIVE_VERSION\n        }\n    }\n    repositories {\n        maven {\n            // Required for react-native-background-geolocation\n            url(&quot;${project(':react-native-background-geolocation').projectDir}/libs&quot;)\n        }\n        maven {\n            url(&quot;${project(':react-native-background-fetch').projectDir}/libs&quot;)\n        }\n        maven {\n            url 'https://api.mapbox.com/downloads/v2/releases/maven'\n            authentication {\n                basic(BasicAuthentication)\n            }\n            credentials {\n                // Do not change the username below.\n                // This should always be `mapbox` (not your username).\n                username = 'mapbox'\n                // Use the secret token you stored in gradle.properties as the password\n                password = project.env.get('MAPBOX_ACCESS_TOKEN') ?: &quot;&quot;\n            }\n        }\n        google()\n        mavenCentral()\n    }\n}\n\n</code></pre>\n<h3>app/build.gradle</h3>\n<pre class=\"lang-groovy prettyprint-override\"><code>apply plugin: &quot;com.android.application&quot;\napply plugin: 'com.google.gms.google-services'\napply plugin: &quot;com.facebook.react&quot;\n\nproject.ext.envConfigFiles = [\n  release: &quot;.env.production&quot;,\n  staging:&quot;.env.staging&quot;,\n  production:&quot;.env.production&quot;,\n  debug: &quot;.env.staging&quot;,\n  storybook: &quot;.env.storybook&quot;,\n]\n\napply from: project(':react-native-config').projectDir.getPath() + &quot;/dotenv.gradle&quot;\n\n\nimport com.android.build.OutputFile\n\n/**\n * The react.gradle file registers a task for each build variant (e.g. bundleDebugJsAndAssets\n * and bundleReleaseJsAndAssets).\n * These basically call `react-native bundle` with the correct arguments during the Android build\n * cycle. By default, bundleDebugJsAndAssets is skipped, as in debug/dev mode we prefer to load the\n * bundle directly from the development server. Below you can see all the possible configurations\n * and their defaults. If you decide to add a configuration block, make sure to add it before the\n * `apply from: &quot;../../node_modules/react-native/react.gradle&quot;` line.\n *\n * project.ext.react = [\n *   // the name of the generated asset file containing your JS bundle\n *   bundleAssetName: &quot;index.android.bundle&quot;,\n *\n *   // the entry file for bundle generation. If none specified and\n *   // &quot;index.android.js&quot; exists, it will be used. Otherwise &quot;index.js&quot; is\n *   // default. Can be overridden with ENTRY_FILE environment variable.\n *   entryFile: &quot;index.android.js&quot;,\n *\n *   // https://reactnative.dev/docs/performance#enable-the-ram-format\n *   bundleCommand: &quot;ram-bundle&quot;,\n *\n *   // whether to bundle JS and assets in debug mode\n *   bundleInDebug: false,\n *\n *   // whether to bundle JS and assets in release mode\n *   bundleInRelease: true,\n *\n *   // whether to bundle JS and assets in another build variant (if configured).\n *   // See http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Build-Variants\n *   // The configuration property can be in the following formats\n *   //         'bundleIn${productFlavor}${buildType}'\n *   //         'bundleIn${buildType}'\n *   // bundleInFreeDebug: true,\n *   // bundleInPaidRelease: true,\n *   // bundleInBeta: true,\n *\n *   // whether to disable dev mode in custom build variants (by default only disabled in release)\n *   // for example: to disable dev mode in the staging build type (if configured)\n *   devDisabledInStaging: true,\n *   // The configuration property can be in the following formats\n *   //         'devDisabledIn${productFlavor}${buildType}'\n *   //         'devDisabledIn${buildType}'\n *\n *   // the root of your project, i.e. where &quot;package.json&quot; lives\n *   root: &quot;../../&quot;,\n *\n *   // where to put the JS bundle asset in debug mode\n *   jsBundleDirDebug: &quot;$buildDir/intermediates/assets/debug&quot;,\n *\n *   // where to put the JS bundle asset in release mode\n *   jsBundleDirRelease: &quot;$buildDir/intermediates/assets/release&quot;,\n *\n *   // where to put drawable resources / React Native assets, e.g. the ones you use via\n *   // require('./image.png')), in debug mode\n *   resourcesDirDebug: &quot;$buildDir/intermediates/res/merged/debug&quot;,\n *\n *   // where to put drawable resources / React Native assets, e.g. the ones you use via\n *   // require('./image.png')), in release mode\n *   resourcesDirRelease: &quot;$buildDir/intermediates/res/merged/release&quot;,\n *\n *   // by default the gradle tasks are skipped if none of the JS files or assets change; this means\n *   // that we don't look at files in android/ or ios/ to determine whether the tasks are up to\n *   // date; if you have any other folders that you want to ignore for performance reasons (gradle\n *   // indexes the entire tree), add them here. Alternatively, if you have JS files in android/\n *   // for example, you might want to remove it from here.\n *   inputExcludes: [&quot;android/**&quot;, &quot;ios/**&quot;],\n *\n *   // override which node gets called and with what additional arguments\n *   nodeExecutableAndArgs: [&quot;node&quot;],\n *\n *   // supply additional arguments to the packager\n *   extraPackagerArgs: []\n * ]\n */\n\nproject.ext.react = [\n    enableHermes: false,  // clean and rebuild if changing\n]\n\napply from: &quot;../../node_modules/@sentry/react-native/sentry.gradle&quot;\n\n/**\n * Set this to true to create two separate APKs instead of one:\n *   - An APK that only works on ARM devices\n *   - An APK that only works on x86 devices\n * The advantage is the size of the APK is reduced by about 4MB.\n * Upload all the APKs to the Play Store and people will download\n * the correct one based on the CPU architecture of their device.\n */\ndef enableSeparateBuildPerCPUArchitecture = false\n\n/**\n * Run Proguard to shrink the Java bytecode in release builds.\n */\ndef enableProguardInReleaseBuilds = false\n\n/**\n * The preferred build flavor of JavaScriptCore.\n *\n * For example, to use the international variant, you can use:\n * `def jscFlavor = 'org.webkit:android-jsc-intl:+'`\n *\n * The international variant includes ICU i18n library and necessary data\n * allowing to use e.g. `Date.toLocaleString` and `String.localeCompare` that\n * give correct results when using with locales other than en-US.  Note that\n * this variant is about 6MiB larger per architecture than default.\n */\ndef jscFlavor = 'org.webkit:android-jsc:+'\n\n/**\n * Whether to enable the Hermes VM.\n *\n * This should be set on project.ext.react and that value will be read here. If it is not set\n * on project.ext.react, JavaScript will not be compiled to Hermes Bytecode\n * and the benefits of using Hermes will therefore be sharply reduced.\n */\ndef enableHermes = project.ext.react.get(&quot;enableHermes&quot;, false);\n\n/**\n * Architectures to build native code for in debug.\n */\ndef nativeArchitectures = project.getProperties().get(&quot;reactNativeDebugArchitectures&quot;)\n\nandroid {\n    namespace 'com.surlo.surloapp'\n\n    ndkVersion rootProject.ext.ndkVersion\n\n    externalNativeBuild {\n        cmake {\n            version &quot;3.22.1&quot;\n        }\n    }\n\n    productFlavors {\n        staging {\n            applicationIdSuffix = &quot;.staging&quot;\n            resValue &quot;string&quot;, &quot;build_config_package&quot;, &quot;com.surlo.surloapp&quot;\n        }\n        production {}\n        storybook {\n            applicationIdSuffix = &quot;.staging&quot;\n            resValue &quot;string&quot;, &quot;build_config_package&quot;, &quot;com.surlo.surloapp&quot;\n        }\n    }\n\n    defaultConfig {\n        applicationId &quot;com.surlo.surloapp&quot;\n        minSdkVersion rootProject.ext.minSdkVersion\n        targetSdkVersion rootProject.ext.targetSdkVersion\n        compileSdkVersion rootProject.ext.compileSdkVersion\n        versionName &quot;2.2.19&quot;\n        versionCode 111\n    }\n    splits {\n        abi {\n            reset()\n            enable enableSeparateBuildPerCPUArchitecture\n            universalApk false  // If true, also generate a universal APK\n            include &quot;armeabi-v7a&quot;, &quot;x86&quot;, &quot;arm64-v8a&quot;, &quot;x86_64&quot;\n        }\n    }\n    signingConfigs {\n        debug {\n            storeFile file('debug.keystore')\n            storePassword 'android'\n            keyAlias 'androiddebugkey'\n            keyPassword 'android'\n        }\n         release {\n            storeFile file(project.env.get('UPLOAD_STORE_FILE'))\n            storePassword project.env.get('UPLOAD_STORE_PASSWORD')\n            keyAlias project.env.get('UPLOAD_KEY_ALIAS')\n            keyPassword project.env.get('UPLOAD_KEY_PASSWORD')\n        }\n    }\n    buildTypes {\n        debug {\n            signingConfig signingConfigs.debug\n            if (nativeArchitectures) {\n                ndk {\n                    abiFilters nativeArchitectures.split(',')\n                }\n            }\n        }\n        release {\n            // Caution! In production, you need to generate your own keystore file.\n            // see https://reactnative.dev/docs/signed-apk-android.\n            signingConfig signingConfigs.release\n            minifyEnabled enableProguardInReleaseBuilds\n            proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;\n        }\n    }\n\n    // applicationVariants are e.g. debug, release\n    applicationVariants.all { variant -&gt;\n        variant.outputs.each { output -&gt;\n            // For each separate APK per architecture, set a unique version code as described here:\n            // https://developer.android.com/studio/build/configure-apk-splits.html\n            // Example: versionCode 1 will generate 1001 for armeabi-v7a, 1002 for x86, etc.\n            def versionCodes = [&quot;armeabi-v7a&quot;: 1, &quot;x86&quot;: 2, &quot;arm64-v8a&quot;: 3, &quot;x86_64&quot;: 4]\n            def abi = output.getFilter(OutputFile.ABI)\n            if (abi != null) {  // null for the universal-debug, universal-release variants\n                output.versionCodeOverride =\n                        defaultConfig.versionCode * 1000 + versionCodes.get(abi)\n            }\n\n        }\n    }\n}\n\ndependencies {\n    // Import the Firebase BoM\n    implementation platform('com.google.firebase:firebase-bom:30.1.0')\n\n    // Add the dependency for the Firebase SDK for Google Analytics\n    // When using the BoM, don't specify versions in Firebase dependencies\n    implementation 'com.google.firebase:firebase-analytics'\n\n    // Add the dependencies for any other desired Firebase products\n    // https://firebase.google.com/docs/android/setup#available-libraries\n\n\n    implementation (&quot;androidx.appcompat:appcompat:1.3.1&quot;) {\n      version {\n          strictly '1.3.1'\n      }\n    }\n    \n    implementation fileTree(dir: &quot;libs&quot;, include: [&quot;*.jar&quot;])\n    //noinspection GradleDynamicVersion\n    // implementation &quot;com.facebook.react:react-native:+&quot;  // From node_modules\n    implementation(&quot;com.facebook.react:react-android&quot;)\n    implementation &quot;com.squareup.okhttp3:okhttp:4.9.1&quot;\n    implementation &quot;androidx.swiperefreshlayout:swiperefreshlayout:1.0.0&quot;\n    implementation 'com.google.android.gms:play-services-ads-identifier:17.1.0+'\n    implementation 'androidx.browser:browser:1.0.0'\n    implementation 'androidx.work:work-runtime-ktx:2.7.0'\n    implementation &quot;com.android.billingclient:billing:6.0.1&quot;\n\n\n    if (enableHermes) {\n        def hermesPath = &quot;../../node_modules/hermes-engine/android/&quot;;\n        debugImplementation files(hermesPath + &quot;hermes-debug.aar&quot;)\n        releaseImplementation files(hermesPath + &quot;hermes-release.aar&quot;)\n    } else {\n        implementation jscFlavor\n    }\n}\n\n// Run this once to be able to run the application with BUCK\n// puts all compile dependencies into folder libs for BUCK to use\ntask copyDownloadableDepsToLibs(type: Copy) {\n    from configurations.implementation\n    into 'libs'\n}\n\napply from: file(&quot;../../node_modules/@react-native-community/cli-platform-android/native_modules.gradle&quot;); applyNativeModulesAppBuildGradle(project)\n\n</code></pre>\n<h3>Config</h3>\n<pre class=\"lang-bash prettyprint-override\"><code> java --version\nopenjdk 11.0.11 2021-04-20\nOpenJDK Runtime Environment AdoptOpenJDK-11.0.11+9 (build 11.0.11+9)\nOpenJDK 64-Bit Server VM AdoptOpenJDK-11.0.11+9 (build 11.0.11+9, mixed mode)\n\n ./gradlew --version\n\n------------------------------------------------------------\nGradle 7.6.2\n------------------------------------------------------------\n\nBuild time:   2023-06-30 15:42:51 UTC\nRevision:     dab132169006b16e7ada4ab2456e0c9d6415b52a\n\nKotlin:       1.7.10\nGroovy:       3.0.13\nAnt:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\nJVM:          11.0.11 (AdoptOpenJDK 11.0.11+9)\nOS:           Mac OS X 10.16 x86_64\n</code></pre>\n<h3>package.json</h3>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;name&quot;: &quot;surlomobile&quot;,\n  &quot;version&quot;: &quot;0.0.1&quot;,\n  &quot;private&quot;: true,\n  &quot;scripts&quot;: {\n    &quot;replace&quot;: &quot;node ./replace-gradle.js&quot;,\n    &quot;android&quot;: &quot;react-native run-android --variant=stagingDebug&quot;,\n    &quot;android:production&quot;: &quot;react-native run-android --variant=productionDebug&quot;,\n    &quot;build:android:staging&quot;: &quot;(cd android &amp;&amp; ./gradlew bundleStagingRelease); (yarn android:open:bundle:staging)&quot;,\n    &quot;android:storybook&quot;: &quot;react-native run-android --variant=storybookDebug&quot;,\n    &quot;build:android:staging:apk&quot;: &quot;(cd android &amp;&amp; ./gradlew assembleStagingRelease); (yarn android:open:apk)&quot;,\n    &quot;build:android:production&quot;: &quot;(cd android &amp;&amp; ./gradlew bundleProductionRelease); (yarn android:open:bundle:production)&quot;,\n    &quot;build:android:production:apk&quot;: &quot;(cd android &amp;&amp; ./gradlew assembleProductionRelease); (yarn android:open:apk)&quot;,\n    &quot;android:clean&quot;: &quot;ENVFILE=.env.staging cd android &amp;&amp; ./gradlew clean&quot;,\n    &quot;android:open:bundle:production&quot;: &quot;open android/app/build/outputs/bundle/productionRelease&quot;,\n    &quot;android:open:bundle:staging&quot;: &quot;open android/app/build/outputs/bundle/stagingRelease&quot;,\n    &quot;android:open:apk&quot;: &quot;open android/app/build/outputs/apk/production/release&quot;,\n    &quot;ios&quot;: &quot;react-native run-ios --scheme 'surloMobile-staging'&quot;,\n    &quot;ios:production&quot;: &quot;react-native run-ios --scheme 'surloMobile'&quot;,\n    &quot;start&quot;: &quot;react-native start&quot;,\n    &quot;test&quot;: &quot;jest&quot;,\n    &quot;precommit&quot;: &quot;yarn lint &amp;&amp; yarn tsc&quot;,\n    &quot;postinstall&quot;: &quot;jetify; (cd ios; pod install); exit 0;&quot;,\n    &quot;lint&quot;: &quot;eslint . --ext .js,.jsx,.ts,.tsx&quot;,\n    &quot;clean&quot;: &quot;npx react-native-clean-project&quot;,\n    &quot;prestorybook&quot;: &quot;rnstl&quot;,\n    &quot;quality&quot;: &quot;yarn lint --fix &amp;&amp; yarn tsc -p .&quot;,\n    &quot;increment-version&quot;: &quot;bash scripts/update_version.sh&quot;\n  },\n  &quot;dependencies&quot;: {\n    &quot;@babel/plugin-proposal-export-namespace-from&quot;: &quot;^7.18.9&quot;,\n    &quot;@hookform/resolvers&quot;: &quot;^3.3.1&quot;,\n    &quot;@miblanchard/react-native-slider&quot;: &quot;^2.3.1&quot;,\n    &quot;@react-native-async-storage/async-storage&quot;: &quot;^1.19.3&quot;,\n    &quot;@react-native-clipboard/clipboard&quot;: &quot;^1.12.1&quot;,\n    &quot;@react-native-community/datetimepicker&quot;: &quot;^7.6.0&quot;,\n    &quot;@react-native-community/netinfo&quot;: &quot;^9.4.1&quot;,\n    &quot;@react-native-community/slider&quot;: &quot;^4.4.3&quot;,\n    &quot;@react-native-firebase/app&quot;: &quot;^18.5.0&quot;,\n    &quot;@react-native-firebase/messaging&quot;: &quot;^18.5.0&quot;,\n    &quot;@react-native-mapbox-gl/maps&quot;: &quot;8.6.0-beta.0&quot;,\n    &quot;@react-native-masked-view/masked-view&quot;: &quot;^0.2.9&quot;,\n    &quot;@react-native-picker/picker&quot;: &quot;^2.5.1&quot;,\n    &quot;@react-native/gradle-plugin&quot;: &quot;^0.73.1&quot;,\n    &quot;@react-native/metro-config&quot;: &quot;^0.73.1&quot;,\n    &quot;@react-navigation/bottom-tabs&quot;: &quot;^6.5.9&quot;,\n    &quot;@react-navigation/elements&quot;: &quot;^1.3.19&quot;,\n    &quot;@react-navigation/native&quot;: &quot;^6.1.8&quot;,\n    &quot;@react-navigation/stack&quot;: &quot;^6.3.18&quot;,\n    &quot;@rematch/core&quot;: &quot;^2.2.0&quot;,\n    &quot;@rematch/loading&quot;: &quot;^2.1.2&quot;,\n    &quot;@rematch/persist&quot;: &quot;^2.1.2&quot;,\n    &quot;@sentry/react-native&quot;: &quot;^5.9.2&quot;,\n    &quot;@trivago/prettier-plugin-sort-imports&quot;: &quot;^4.2.0&quot;,\n    &quot;@turf/turf&quot;: &quot;^6.5.0&quot;,\n    &quot;@twotalltotems/react-native-otp-input&quot;: &quot;^1.3.11&quot;,\n    &quot;@types/geojson&quot;: &quot;^7946.0.11&quot;,\n    &quot;async-mutex&quot;: &quot;^0.4.0&quot;,\n    &quot;axios&quot;: &quot;1.5.1&quot;,\n    &quot;babel-plugin-module-resolver&quot;: &quot;^5.0.0&quot;,\n    &quot;camelcase-keys&quot;: &quot;^9.0.0&quot;,\n    &quot;chroma-js&quot;: &quot;^2.4.2&quot;,\n    &quot;dayjs&quot;: &quot;^1.11.10&quot;,\n    &quot;eslint-plugin-prettier&quot;: &quot;^5.0.0&quot;,\n    &quot;eslint-plugin-react-hooks&quot;: &quot;^4.6.0&quot;,\n    &quot;expo&quot;: &quot;^49.0.12&quot;,\n    &quot;expo-image-manipulator&quot;: &quot;^11.5.0&quot;,\n    &quot;expo-location&quot;: &quot;^16.3.0&quot;,\n    &quot;i18n-iso-countries&quot;: &quot;^7.7.0&quot;,\n    &quot;i18next&quot;: &quot;^23.5.1&quot;,\n    &quot;intl&quot;: &quot;^1.2.5&quot;,\n    &quot;libphonenumber-js&quot;: &quot;^1.10.45&quot;,\n    &quot;lodash&quot;: &quot;^4.17.21&quot;,\n    &quot;lottie-ios&quot;: &quot;^4.3.2&quot;,\n    &quot;lottie-react-native&quot;: &quot;^6.3.1&quot;,\n    &quot;luxon&quot;: &quot;^3.4.3&quot;,\n    &quot;moment&quot;: &quot;^2.29.4&quot;,\n    &quot;normalize-strings&quot;: &quot;^1.1.1&quot;,\n    &quot;react&quot;: &quot;^18.2.0&quot;,\n    &quot;react-hook-form&quot;: &quot;^7.46.2&quot;,\n    &quot;react-i18next&quot;: &quot;^13.2.2&quot;,\n    &quot;react-native&quot;: &quot;^0.71.0&quot;,\n    &quot;react-native-animatable&quot;: &quot;^1.3.3&quot;,\n    &quot;react-native-background-fetch&quot;: &quot;^4.2.1&quot;,\n    &quot;react-native-background-geolocation&quot;: &quot;^4.13.3&quot;,\n    &quot;react-native-branch&quot;: &quot;^5.9.0&quot;,\n    &quot;react-native-chart-kit&quot;: &quot;^6.12.0&quot;,\n    &quot;react-native-codegen&quot;: &quot;^0.71.6&quot;,\n    &quot;react-native-config&quot;: &quot;^1.5.1&quot;,\n    &quot;react-native-device-info&quot;: &quot;^10.11.0&quot;,\n    &quot;react-native-document-picker&quot;: &quot;^9.0.1&quot;,\n    &quot;react-native-error-boundary&quot;: &quot;^1.2.3&quot;,\n    &quot;react-native-flash-message&quot;: &quot;^0.4.2&quot;,\n    &quot;react-native-geolocation-service&quot;: &quot;^5.3.1&quot;,\n    &quot;react-native-gesture-handler&quot;: &quot;^2.13.1&quot;,\n    &quot;react-native-image-crop-picker&quot;: &quot;^0.40.0&quot;,\n    &quot;react-native-keyboard-aware-scroll-view&quot;: &quot;^0.9.5&quot;,\n    &quot;react-native-linear-gradient&quot;: &quot;^2.8.3&quot;,\n    &quot;react-native-linear-gradient-text&quot;: &quot;^0.3.1&quot;,\n    &quot;react-native-localize&quot;: &quot;^3.0.2&quot;,\n    &quot;react-native-modal&quot;: &quot;^13.0.1&quot;,\n    &quot;react-native-permissions&quot;: &quot;^3.9.2&quot;,\n    &quot;react-native-picker-select&quot;: &quot;^8.1.0&quot;,\n    &quot;react-native-reanimated&quot;: &quot;^3.5.4&quot;,\n    &quot;react-native-safe-area-context&quot;: &quot;^4.7.2&quot;,\n    &quot;react-native-screens&quot;: &quot;^3.25.0&quot;,\n    &quot;react-native-snap-carousel&quot;: &quot;^3.9.1&quot;,\n    &quot;react-native-splash-screen&quot;: &quot;^3.3.0&quot;,\n    &quot;react-native-storybook-loader&quot;: &quot;^2.0.5&quot;,\n    &quot;react-native-svg&quot;: &quot;^13.14.0&quot;,\n    &quot;react-native-svg-transformer&quot;: &quot;^1.1.0&quot;,\n    &quot;react-native-webview&quot;: &quot;^13.6.0&quot;,\n    &quot;react-query&quot;: &quot;^3.39.3&quot;,\n    &quot;react-redux&quot;: &quot;^8.1.2&quot;,\n    &quot;redux&quot;: &quot;^4.2.1&quot;,\n    &quot;redux-persist&quot;: &quot;^6.0.0&quot;,\n    &quot;snakecase-keys&quot;: &quot;^5.4.7&quot;,\n    &quot;zod&quot;: &quot;^3.22.2&quot;\n  },\n  &quot;devDependencies&quot;: {\n    &quot;@babel/core&quot;: &quot;^7.23.0&quot;,\n    &quot;@babel/runtime&quot;: &quot;^7.23.1&quot;,\n    &quot;@jest/globals&quot;: &quot;29.7.0&quot;,\n    &quot;@react-native-community/eslint-config&quot;: &quot;^3.2.0&quot;,\n    &quot;@storybook/addon-actions&quot;: &quot;^7.4.5&quot;,\n    &quot;@storybook/addon-backgrounds&quot;: &quot;^7.4.5&quot;,\n    &quot;@storybook/addon-knobs&quot;: &quot;^7.0.2&quot;,\n    &quot;@storybook/addon-links&quot;: &quot;^7.4.5&quot;,\n    &quot;@storybook/addon-ondevice-actions&quot;: &quot;^6.5.6&quot;,\n    &quot;@storybook/addon-ondevice-backgrounds&quot;: &quot;^6.5.6&quot;,\n    &quot;@storybook/addon-ondevice-knobs&quot;: &quot;^6.5.6&quot;,\n    &quot;@storybook/react-native&quot;: &quot;^6.5.6&quot;,\n    &quot;@storybook/react-native-server&quot;: &quot;^6.5.6&quot;,\n    &quot;@testing-library/jest-native&quot;: &quot;^5.4.3&quot;,\n    &quot;@types/camelcase-keys&quot;: &quot;^5.1.1&quot;,\n    &quot;@types/chroma-js&quot;: &quot;^2.4.1&quot;,\n    &quot;@types/jest&quot;: &quot;^29.5.5&quot;,\n    &quot;@types/lodash&quot;: &quot;^4.14.199&quot;,\n    &quot;@types/luxon&quot;: &quot;^3.3.2&quot;,\n    &quot;@types/react&quot;: &quot;^18.2.23&quot;,\n    &quot;@types/react-native&quot;: &quot;^0.72.3&quot;,\n    &quot;@types/react-native-snap-carousel&quot;: &quot;^3.8.6&quot;,\n    &quot;@types/react-test-renderer&quot;: &quot;^18.0.3&quot;,\n    &quot;@typescript-eslint/eslint-plugin&quot;: &quot;^6.7.3&quot;,\n    &quot;@typescript-eslint/parser&quot;: &quot;^6.7.3&quot;,\n    &quot;babel-jest&quot;: &quot;^29.7.0&quot;,\n    &quot;babel-loader&quot;: &quot;9.1.3&quot;,\n    &quot;babel-plugin-dynamic-import-node&quot;: &quot;2.3.3&quot;,\n    &quot;eslint&quot;: &quot;^8.50.0&quot;,\n    &quot;eslint-config-derniercri&quot;: &quot;https://git@github.com/derniercri/eslint-config-derniercri.git#commit=02fd4c713505902ec314f9d528f03c4327410ae9&quot;,\n    &quot;jest&quot;: &quot;^29.7.0&quot;,\n    &quot;metro-react-native-babel-preset&quot;: &quot;^0.77.0&quot;,\n    &quot;prettier&quot;: &quot;^3.0.3&quot;,\n    &quot;react-dom&quot;: &quot;^18.2.0&quot;,\n    &quot;react-test-renderer&quot;: &quot;18.2.0&quot;,\n    &quot;replace-in-files&quot;: &quot;3.0.0&quot;,\n    &quot;ts-jest&quot;: &quot;^29.1.1&quot;,\n    &quot;typescript&quot;: &quot;^5.2.2&quot;\n  },\n  &quot;resolutions&quot;: {\n    &quot;@types/react&quot;: &quot;^17&quot;\n  },\n  &quot;jest&quot;: {\n    &quot;preset&quot;: &quot;react-native&quot;,\n    &quot;testEnvironment&quot;: &quot;jsdom&quot;,\n    &quot;transformIgnorePatterns&quot;: [\n      &quot;/node_modules/(?!(@react-native|@react-native-.+|react-native|@react-navigation|react-native-.+|.+/react-native-.+|@sentry|expo-image-manipulator|expo-modules-core|expo-location)/)&quot;\n    ],\n    &quot;moduleNameMapper&quot;: {\n      &quot;^@internals/(.*)$&quot;: &quot;&lt;rootDir&gt;/src/$1&quot;\n    },\n    &quot;setupFiles&quot;: [\n      &quot;./jest-setup/jestGlobalSetup.js&quot;\n    ],\n    &quot;globals&quot;: {\n      &quot;ts-jest&quot;: {\n        &quot;babelConfig&quot;: true\n      },\n      &quot;__DEV__&quot;: true\n    },\n    &quot;setupFilesAfterEnv&quot;: [\n      &quot;@react-native-mapbox-gl/maps/setup-jest&quot;\n    ]\n  },\n  &quot;config&quot;: {\n    &quot;react-native-storybook-loader&quot;: {\n      &quot;searchDir&quot;: [\n        &quot;./src&quot;\n      ],\n      &quot;pattern&quot;: &quot;**/*.stories.tsx&quot;,\n      &quot;outputFile&quot;: &quot;./storybook/storyLoader.js&quot;\n    }\n  },\n  &quot;packageManager&quot;: &quot;yarn@3.6.3&quot;\n}\n\n</code></pre>\n"},{"tags":["java","spring-boot","bean-validation","spring-validator","jakarta-validation"],"comments":[{"score":1,"post_type":"question","creation_date":1693205395,"post_id":76990468,"comment_id":135724219,"body_markdown":"I don&#39;t think it is possible to do that directly. Is it an option to have a `List&lt;Email&gt;` and using `@Size` in the `Email` bean?","link":"https://stackoverflow.com/questions/76990468/how-to-put-validation-on-list-of-string-coming-from-request-in-spring-boot#comment135724219_76990468","body":"I don&#39;t think it is possible to do that directly. Is it an option to have a <code>List&lt;Email&gt;</code> and using <code>@Size</code> in the <code>Email</code> bean?"}],"answers":[{"comment_count":0,"score":4,"last_activity_date":1693205408,"creation_date":1693205408,"answer_id":76990570,"question_id":76990468,"body_markdown":"Bean validation allows you to put the validating annotation inside the container type such as `List`. They refer this as the [container element constraint validation][1].\r\n\r\nSo you can do something likes :\r\n\r\n```java\r\nclass DataRequest{\r\n\r\n    @Size(min=1, max=10)\r\n    private String dataTitle;\r\n\r\n    private List&lt;@Email String&gt; emails;\r\n\r\n}\r\n\r\n```\r\nor \r\n```java\r\nclass DataRequest{\r\n\r\n    @Size(min=1, max=10)\r\n    private String dataTitle;\r\n\r\n    private List&lt;@Pattern(regexp = &quot;[A-Za-z\\\\d]*&quot;) String&gt; emails;\r\n\r\n}\r\n```\r\n\r\n  [1]: https://docs.jboss.org/hibernate/validator/8.0/reference/en-US/html_single/#container-element-constraints","link":"https://stackoverflow.com/questions/76990468/how-to-put-validation-on-list-of-string-coming-from-request-in-spring-boot/76990570#76990570","title":"How to put validation on list of String coming from request in spring boot?","body":"<p>Bean validation allows you to put the validating annotation inside the container type such as <code>List</code>. They refer this as the <a href=\"https://docs.jboss.org/hibernate/validator/8.0/reference/en-US/html_single/#container-element-constraints\" rel=\"nofollow noreferrer\">container element constraint validation</a>.</p>\n<p>So you can do something likes :</p>\n<pre class=\"lang-java prettyprint-override\"><code>class DataRequest{\n\n    @Size(min=1, max=10)\n    private String dataTitle;\n\n    private List&lt;@Email String&gt; emails;\n\n}\n\n</code></pre>\n<p>or</p>\n<pre class=\"lang-java prettyprint-override\"><code>class DataRequest{\n\n    @Size(min=1, max=10)\n    private String dataTitle;\n\n    private List&lt;@Pattern(regexp = &quot;[A-Za-z\\\\d]*&quot;) String&gt; emails;\n\n}\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1693206455,"creation_date":1693206455,"answer_id":76990659,"question_id":76990468,"body_markdown":"In fact ,if you want to control the size of list ,you may use the @Size on you parameter, some @valid annotation has support List.\\\r\nBut if you want to make some complicated function, i suggest you implement your own validation annotation by the support of @Valid.\\\r\nFollow i will show you a simple implement\r\n\r\n    import javax.validation.Constraint;\r\n    import javax.validation.ConstraintValidator;\r\n    import javax.validation.ConstraintValidatorContext;\r\n    import javax.validation.Payload;\r\n    import java.lang.annotation.Documented;\r\n    import java.lang.annotation.ElementType;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.Target;\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    import static java.lang.annotation.RetentionPolicy.RUNTIME;\r\n    \r\n    /**\r\n     * @author yujin\r\n     */\r\n    @Documented\r\n    @Constraint(validatedBy = {Show.ShowConstraintValidator.class})\r\n    @Target({ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE})\r\n    @Retention(RUNTIME)\r\n    public @interface Show {\r\n        String message() default &quot;{com.annotation.Show.message}&quot;;\r\n    \r\n        Class&lt;?&gt;[] groups() default {};\r\n    \r\n        Class&lt;? extends Payload&gt;[] payload() default {};\r\n    \r\n        int[] value();\r\n    \r\n        class ShowConstraintValidator implements ConstraintValidator&lt;Show, Integer&gt; {\r\n    \r\n            private Set&lt;Integer&gt; set = new HashSet&lt;&gt;();\r\n    \r\n            @Override\r\n            public void initialize(Show constraintAnnotation) {\r\n                int[] value = constraintAnnotation.value();\r\n                for (int i : value) {\r\n                    set.add(i);\r\n                }\r\n            }\r\n    \r\n    \r\n    \r\n            @Override\r\n            public boolean isValid(Integer value, ConstraintValidatorContext context) {\r\n                return set.contains(value);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nThe dependency is :\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n       &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","link":"https://stackoverflow.com/questions/76990468/how-to-put-validation-on-list-of-string-coming-from-request-in-spring-boot/76990659#76990659","title":"How to put validation on list of String coming from request in spring boot?","body":"<p>In fact ,if you want to control the size of list ,you may use the @Size on you parameter, some @valid annotation has support List.<br />\nBut if you want to make some complicated function, i suggest you implement your own validation annotation by the support of @Valid.<br />\nFollow i will show you a simple implement</p>\n<pre><code>import javax.validation.Constraint;\nimport javax.validation.ConstraintValidator;\nimport javax.validation.ConstraintValidatorContext;\nimport javax.validation.Payload;\nimport java.lang.annotation.Documented;\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.Target;\nimport java.util.HashSet;\nimport java.util.Set;\n\nimport static java.lang.annotation.RetentionPolicy.RUNTIME;\n\n/**\n * @author yujin\n */\n@Documented\n@Constraint(validatedBy = {Show.ShowConstraintValidator.class})\n@Target({ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE})\n@Retention(RUNTIME)\npublic @interface Show {\n    String message() default &quot;{com.annotation.Show.message}&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n    int[] value();\n\n    class ShowConstraintValidator implements ConstraintValidator&lt;Show, Integer&gt; {\n\n        private Set&lt;Integer&gt; set = new HashSet&lt;&gt;();\n\n        @Override\n        public void initialize(Show constraintAnnotation) {\n            int[] value = constraintAnnotation.value();\n            for (int i : value) {\n                set.add(i);\n            }\n        }\n\n\n\n        @Override\n        public boolean isValid(Integer value, ConstraintValidatorContext context) {\n            return set.contains(value);\n        }\n    }\n}\n</code></pre>\n<p>The dependency is :</p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n   &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comment_count":0,"score":1,"last_activity_date":1702149434,"creation_date":1702149434,"answer_id":77632573,"question_id":76990468,"body_markdown":"### Multiple Validators to validate the objects in a List (using Thymeleaf)\r\n\r\n`FormBean.java`\r\n```java\r\n@Data\r\n@NoArgsConstructor\r\npublic class RecipeForm {\r\n\r\n    @NotBlank(message = &quot;{error.general.not-blank}&quot;)\r\n    @Size(min = 8, message = &quot;{error.recipe.name.min}&quot;)\r\n    @Size(min = 32, message = &quot;{error.recipe.name.max}&quot;)\r\n    private String name;\r\n\r\n    @NotBlank(message = &quot;{error.general.not-blank}&quot;)\r\n    private String image;\r\n\r\n    @NotNull(message = &quot;{error.general.not-null}&quot;)\r\n    @Min(value = 1, message = &quot;{error.recipe.category}&quot;)\r\n    @Max(value = 3, message = &quot;{error.recipe.category}&quot;)\r\n    private Long categoryId;\r\n\r\n    @NotNull(message = &quot;{error.general.not-null}&quot;)\r\n    private List&lt;\r\n            @NotBlank(message = &quot;{error.general.not-blank}&quot;)\r\n            @Size(min = 16, message = &quot;{error.recipe.step.min}&quot;)\r\n            @Size(max = 256, message = &quot;{error.recipe.step.max}&quot;) String&gt; steps = new ArrayList&lt;&gt;(List.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;));\r\n}\r\n```\r\n\r\n`ValidationMessages_en.properties`\r\n```text\r\nerror.general.not-null = should not be null\r\nerror.general.not-blank = is required\r\nerror.recipe.step.min = number of characters not correct: at least {min} characters\r\nerror.recipe.step.max = number of characters not correct: maximum {max} characters\r\n```\r\n\r\n`view.html`\r\n```html\r\n&lt;!--/* @thymesVar id=&quot;myForm&quot; type=&quot;com.example.homepage.form.MyForm&quot; */--&gt;\r\n&lt;form novalidate th:action=&quot;@{/postEndpointUrl}&quot; th:object=&quot;${myForm}&quot; method=&quot;post&quot;&gt;\r\n    &lt;div class=&quot;col&quot; th:each=&quot;step, stat : *{steps}&quot;&gt;\r\n       &lt;div class=&quot;form-outline&quot;&gt;\r\n          &lt;textarea th:id=&quot;|textarea-step-${stat.index}|&quot; class=&quot;form-control&quot; rows=&quot;3&quot; th:field=&quot;*{steps[__${stat.index}__]}&quot; minlength=&quot;16&quot; maxlength=&quot;256&quot; required&gt;&lt;/textarea&gt;\r\n          &lt;label th:for=&quot;|textarea-step-${stat.index}|&quot; class=&quot;form-label&quot; th:text=&quot;${stat.index}&quot;&gt;&lt;/label&gt;\r\n       &lt;/div&gt;\r\n       &lt;div class=&quot;text-start text-danger&quot; th:if=&quot;${#fields.hasErrors(&#39;steps[&#39; + stat.index + &#39;]&#39;)}&quot;&gt;\r\n          &lt;ul class=&quot;ps-0 mb-0 small&quot;&gt;\r\n             &lt;li th:each=&quot;err : ${#fields.errors(&#39;steps[&#39; + stat.index + &#39;]&#39;)}&quot; th:text=&quot;${err}&quot;&gt;&lt;/li&gt;\r\n          &lt;/ul&gt;\r\n       &lt;/div&gt;\r\n    &lt;/div&gt;\r\n&lt;/div&gt;\r\n```","link":"https://stackoverflow.com/questions/76990468/how-to-put-validation-on-list-of-string-coming-from-request-in-spring-boot/77632573#77632573","title":"How to put validation on list of String coming from request in spring boot?","body":"<h3>Multiple Validators to validate the objects in a List (using Thymeleaf)</h3>\n<p><code>FormBean.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@NoArgsConstructor\npublic class RecipeForm {\n\n    @NotBlank(message = &quot;{error.general.not-blank}&quot;)\n    @Size(min = 8, message = &quot;{error.recipe.name.min}&quot;)\n    @Size(min = 32, message = &quot;{error.recipe.name.max}&quot;)\n    private String name;\n\n    @NotBlank(message = &quot;{error.general.not-blank}&quot;)\n    private String image;\n\n    @NotNull(message = &quot;{error.general.not-null}&quot;)\n    @Min(value = 1, message = &quot;{error.recipe.category}&quot;)\n    @Max(value = 3, message = &quot;{error.recipe.category}&quot;)\n    private Long categoryId;\n\n    @NotNull(message = &quot;{error.general.not-null}&quot;)\n    private List&lt;\n            @NotBlank(message = &quot;{error.general.not-blank}&quot;)\n            @Size(min = 16, message = &quot;{error.recipe.step.min}&quot;)\n            @Size(max = 256, message = &quot;{error.recipe.step.max}&quot;) String&gt; steps = new ArrayList&lt;&gt;(List.of(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;));\n}\n</code></pre>\n<p><code>ValidationMessages_en.properties</code></p>\n<pre><code>error.general.not-null = should not be null\nerror.general.not-blank = is required\nerror.recipe.step.min = number of characters not correct: at least {min} characters\nerror.recipe.step.max = number of characters not correct: maximum {max} characters\n</code></pre>\n<p><code>view.html</code></p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!--/* @thymesVar id=&quot;myForm&quot; type=&quot;com.example.homepage.form.MyForm&quot; */--&gt;\n&lt;form novalidate th:action=&quot;@{/postEndpointUrl}&quot; th:object=&quot;${myForm}&quot; method=&quot;post&quot;&gt;\n    &lt;div class=&quot;col&quot; th:each=&quot;step, stat : *{steps}&quot;&gt;\n       &lt;div class=&quot;form-outline&quot;&gt;\n          &lt;textarea th:id=&quot;|textarea-step-${stat.index}|&quot; class=&quot;form-control&quot; rows=&quot;3&quot; th:field=&quot;*{steps[__${stat.index}__]}&quot; minlength=&quot;16&quot; maxlength=&quot;256&quot; required&gt;&lt;/textarea&gt;\n          &lt;label th:for=&quot;|textarea-step-${stat.index}|&quot; class=&quot;form-label&quot; th:text=&quot;${stat.index}&quot;&gt;&lt;/label&gt;\n       &lt;/div&gt;\n       &lt;div class=&quot;text-start text-danger&quot; th:if=&quot;${#fields.hasErrors('steps[' + stat.index + ']')}&quot;&gt;\n          &lt;ul class=&quot;ps-0 mb-0 small&quot;&gt;\n             &lt;li th:each=&quot;err : ${#fields.errors('steps[' + stat.index + ']')}&quot; th:text=&quot;${err}&quot;&gt;&lt;/li&gt;\n          &lt;/ul&gt;\n       &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}],"comment_count":1,"is_answered":true,"view_count":302,"answer_count":3,"score":4,"last_activity_date":1702149434,"creation_date":1693204179,"last_edit_date":1694881973,"question_id":76990468,"body_markdown":"I am creating Spring boot APIs and one of the API consumening data below:\r\n\r\n```\r\nclass DataRequest{\r\n\r\n    @Size(min=1, max=10)\r\n    private String dataTitle;\r\n\r\n    private List&lt;String&gt; emails;\r\n\r\n}\r\n```\r\n\r\nHow can we validate List&lt;String&gt; like all strings must be valid emails or matching with some pattern by utilizing a validation framework in Spring controller using `@Valid` annotation?","link":"https://stackoverflow.com/questions/76990468/how-to-put-validation-on-list-of-string-coming-from-request-in-spring-boot","title":"How to put validation on list of String coming from request in spring boot?","body":"<p>I am creating Spring boot APIs and one of the API consumening data below:</p>\n<pre><code>class DataRequest{\n\n    @Size(min=1, max=10)\n    private String dataTitle;\n\n    private List&lt;String&gt; emails;\n\n}\n</code></pre>\n<p>How can we validate List like all strings must be valid emails or matching with some pattern by utilizing a validation framework in Spring controller using <code>@Valid</code> annotation?</p>\n"},{"tags":["java","r","slurm","doparallel","system2"],"comments":[{"score":0,"post_type":"question","creation_date":1694544999,"post_id":77090532,"comment_id":135904455,"body_markdown":"sorry, no answer, just a few comments: 1. it is my understanding that slurm itself does not allocate resources, it just keeps track of how many resources are requested. The script executed needs to make sure to stick to the requested resources. 2. is there a particular reason why you paste together system commands with R instead of bash?","link":"https://stackoverflow.com/questions/77090532/using-doparallel-to-start-multiple-system-calls-from-r-within-a-slurm-job#comment135904455_77090532","body":"sorry, no answer, just a few comments: 1. it is my understanding that slurm itself does not allocate resources, it just keeps track of how many resources are requested. The script executed needs to make sure to stick to the requested resources. 2. is there a particular reason why you paste together system commands with R instead of bash?"},{"score":0,"post_type":"question","creation_date":1694587043,"post_id":77090532,"comment_id":135909038,"body_markdown":"@starja Hi, the reason I do it like that is that there is an R package that does most of the work out of the box (it was written to make the Java tool available from R) and I can use R to prepare a few things. E.g., I can read input data and make adjustments to the system commands based on that.\nSo, I understand that Slurm provides as many resources as requested, and, ideally R manages them...","link":"https://stackoverflow.com/questions/77090532/using-doparallel-to-start-multiple-system-calls-from-r-within-a-slurm-job#comment135909038_77090532","body":"@starja Hi, the reason I do it like that is that there is an R package that does most of the work out of the box (it was written to make the Java tool available from R) and I can use R to prepare a few things. E.g., I can read input data and make adjustments to the system commands based on that. So, I understand that Slurm provides as many resources as requested, and, ideally R manages them..."},{"score":1,"post_type":"question","creation_date":1694590203,"post_id":77090532,"comment_id":135909564,"body_markdown":"I see. Yes, then R needs to manage the resources, however, I think calling a java tool makes it a bit complicated. `registerDoParallel` uses shared memory by default (&quot;fork&quot;) which can be an advantage if your processed data is very big and needs to be used by every worker process. However, I think in the end it depends on how the java tools uses the CPUs/memory, not sure how easy it is to manage this from R","link":"https://stackoverflow.com/questions/77090532/using-doparallel-to-start-multiple-system-calls-from-r-within-a-slurm-job#comment135909564_77090532","body":"I see. Yes, then R needs to manage the resources, however, I think calling a java tool makes it a bit complicated. <code>registerDoParallel</code> uses shared memory by default (&quot;fork&quot;) which can be an advantage if your processed data is very big and needs to be used by every worker process. However, I think in the end it depends on how the java tools uses the CPUs/memory, not sure how easy it is to manage this from R"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702146132,"last_edit_date":1702146132,"creation_date":1695526165,"answer_id":77165609,"question_id":77090532,"body_markdown":"The following R script and shell script will run 2 R sessions, each using 32 cores, for 64 parallel executions of your Java code. You can also modify to suit a different cluster nodes and cores configuration.\r\n\r\n```r\r\nlibrary(mypackage) # substitute your package name and add others\r\nlibrary(pbdMPI)\r\n\r\nmy_arg1 = comm.chunk(64, form = &quot;vector&quot;) # gets arg1 instances for this rank\r\n\r\nsys_call = function(arg1) {\r\n    arg2 &lt;- &quot;some_arg&quot;\r\n    system2(&quot;/path/to/java.exe&quot;, args = c(arg1, arg2), stdout = TRUE)\r\n}\r\nmclapply(my_arg1, sys_call, mc.cores = 32)\r\n\r\nfinalize()\r\n```\r\nSave the above in `my_r_script.R`.\r\n\r\n```sh\r\n#!/bin/bash\r\n\r\n#SBATCH --nodes=2\r\n#SBATCH --exclusive\r\n\r\nmodule load r\r\n\r\nmpirun  --map-by ppr:1:node Rscript my_r_script.R\r\n```\r\nSave the above in `my_script.sh` and submit to Slurm with `sbatch my_script.sh`.\r\n\r\nThe shell script asks for 2 nodes and all cores on the nodes. The OpenMPI `mpirun` places 1 R session per node and because of exclusive access all cores are available for `mclapply()`. \r\n\r\nYou may need to load modules that provide your software environment, including `module load r`. These details are usually site-dependent.\r\n\r\nYou will need additional `#SBATCH` parameters for account, queue, time, and possibly memory, which may vary on different clusters with different local defaults.\r\n\r\nYour `arg1` parameter is different in each of the 64 instances and can be used to create different output file names in your Java code.\r\n","link":"https://stackoverflow.com/questions/77090532/using-doparallel-to-start-multiple-system-calls-from-r-within-a-slurm-job/77165609#77165609","title":"Using doParallel to start multiple system calls from R within a Slurm job","body":"<p>The following R script and shell script will run 2 R sessions, each using 32 cores, for 64 parallel executions of your Java code. You can also modify to suit a different cluster nodes and cores configuration.</p>\n<pre class=\"lang-r prettyprint-override\"><code>library(mypackage) # substitute your package name and add others\nlibrary(pbdMPI)\n\nmy_arg1 = comm.chunk(64, form = &quot;vector&quot;) # gets arg1 instances for this rank\n\nsys_call = function(arg1) {\n    arg2 &lt;- &quot;some_arg&quot;\n    system2(&quot;/path/to/java.exe&quot;, args = c(arg1, arg2), stdout = TRUE)\n}\nmclapply(my_arg1, sys_call, mc.cores = 32)\n\nfinalize()\n</code></pre>\n<p>Save the above in <code>my_r_script.R</code>.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>#!/bin/bash\n\n#SBATCH --nodes=2\n#SBATCH --exclusive\n\nmodule load r\n\nmpirun  --map-by ppr:1:node Rscript my_r_script.R\n</code></pre>\n<p>Save the above in <code>my_script.sh</code> and submit to Slurm with <code>sbatch my_script.sh</code>.</p>\n<p>The shell script asks for 2 nodes and all cores on the nodes. The OpenMPI <code>mpirun</code> places 1 R session per node and because of exclusive access all cores are available for <code>mclapply()</code>.</p>\n<p>You may need to load modules that provide your software environment, including <code>module load r</code>. These details are usually site-dependent.</p>\n<p>You will need additional <code>#SBATCH</code> parameters for account, queue, time, and possibly memory, which may vary on different clusters with different local defaults.</p>\n<p>Your <code>arg1</code> parameter is different in each of the 64 instances and can be used to create different output file names in your Java code.</p>\n"}],"comment_count":3,"is_answered":false,"view_count":50,"answer_count":1,"score":2,"last_activity_date":1702146132,"creation_date":1694531921,"last_edit_date":1694532694,"question_id":77090532,"body_markdown":"I am using an R script that basically pastes together commandline commands to execute through ```system2()```. The commands run some Java application.\r\n\r\nNow, I want to spawn multiple processes of that Java application at once, to execute some tasks on a cluster computer. The jobs are submitted via Slurm. Does it make sense to execute the system calls from within R using ```doParallel``` with the number of cores reserved for the Slurm job? Or are there more efficient options (e.g., run multiple instances of the R script in parallel through Slurm, in order to spawn the parallel Java instances)?\r\n\r\nI am not sure how Slurm or ```parallel``` allocate resources and how to spawn the processes most efficiently. Which process will control where the Java instances are executed in this setup?\r\n\r\nExample Slurm job:\r\n```\r\n#!/bin/bash\r\n\r\n#SBATCH --job-name=somejob\r\n#SBATCH --output=somejob%a.out\r\n#SBATCH --time=2:00:00\r\n#SBATCH --partition=node\r\n#SBATCH --qos=normal\r\n#SBATCH --account=node\r\n#SBATCH --cpus-per-task=20\r\n#SBATCH --mem-per-cpu=3200\r\n#SBATCH --ntasks=1\r\n#SBATCH --array=1#-12\r\n\r\nsrun R --vanilla -f somescript.R\r\n```\r\n\r\nExample R script:\r\n```\r\n#!/usr/bin/env Rscript\r\n\r\nrequire(&quot;doParallel&quot;)\r\n\r\ncl &lt;- parallel::makeCluster(20)\r\ndoParallel::registerDoParallel(cl)\r\n\r\nforeach::foreach(\r\n  arg1 = 1:20, .packages = &quot;mypackage&quot;\r\n  ) %dopar% {\r\n    arg2 &lt;- &quot;some_arg&quot;\r\n    system2(&quot;/path/to/java.exe&quot;, args = c(arg1, arg2), stdout = TRUE)\r\n  }\r\n```","link":"https://stackoverflow.com/questions/77090532/using-doparallel-to-start-multiple-system-calls-from-r-within-a-slurm-job","title":"Using doParallel to start multiple system calls from R within a Slurm job","body":"<p>I am using an R script that basically pastes together commandline commands to execute through <code>system2()</code>. The commands run some Java application.</p>\n<p>Now, I want to spawn multiple processes of that Java application at once, to execute some tasks on a cluster computer. The jobs are submitted via Slurm. Does it make sense to execute the system calls from within R using <code>doParallel</code> with the number of cores reserved for the Slurm job? Or are there more efficient options (e.g., run multiple instances of the R script in parallel through Slurm, in order to spawn the parallel Java instances)?</p>\n<p>I am not sure how Slurm or <code>parallel</code> allocate resources and how to spawn the processes most efficiently. Which process will control where the Java instances are executed in this setup?</p>\n<p>Example Slurm job:</p>\n<pre><code>#!/bin/bash\n\n#SBATCH --job-name=somejob\n#SBATCH --output=somejob%a.out\n#SBATCH --time=2:00:00\n#SBATCH --partition=node\n#SBATCH --qos=normal\n#SBATCH --account=node\n#SBATCH --cpus-per-task=20\n#SBATCH --mem-per-cpu=3200\n#SBATCH --ntasks=1\n#SBATCH --array=1#-12\n\nsrun R --vanilla -f somescript.R\n</code></pre>\n<p>Example R script:</p>\n<pre><code>#!/usr/bin/env Rscript\n\nrequire(&quot;doParallel&quot;)\n\ncl &lt;- parallel::makeCluster(20)\ndoParallel::registerDoParallel(cl)\n\nforeach::foreach(\n  arg1 = 1:20, .packages = &quot;mypackage&quot;\n  ) %dopar% {\n    arg2 &lt;- &quot;some_arg&quot;\n    system2(&quot;/path/to/java.exe&quot;, args = c(arg1, arg2), stdout = TRUE)\n  }\n</code></pre>\n"},{"tags":["java","nlp","opennlp"],"answers":[{"comment_count":0,"score":1,"last_activity_date":1686580521,"last_edit_date":1686580521,"creation_date":1686580208,"answer_id":76457664,"question_id":76427524,"body_markdown":"I decided to tackle it this way.  whatever limited knowledge I have seems to be no limitation here.\r\n\r\nI was using POSSample as my object which stores tags and tokens together, i created a different object like POSSample which stores in a hashmap the same tags, tokens, but also expandable to whatever other data i want to put in there like lems, custom tags, etc...\r\n\r\n    public class TaggedSentence {\r\n    \tprivate String sentence;\r\n    \tprivate HashMap&lt;TagTypes, List&lt;String&gt;&gt; tagHash = new HashMap&lt;TagTypes, List&lt;String&gt;&gt;();\r\n    }\r\n\r\nmy tag types i use as the hash key is just an enum with values i can use for bitwise operations... so i can easily flag when i want or don&#39;t want these extra tags to be scanned for and populated in my sentence tagger\r\n\r\n    public enum TagTypes {\r\n    \tTOKENS(0B001),\r\n    \tTAGS(0B010),\r\n    \tLEMS(0B100);\r\n        // expand this list later as i need\r\n    \t\r\n    \t/**\r\n    \t * Values are set for bitwise operator checks\r\n    \t */\r\n        public final int value;\r\n    \r\n        private TagTypes(int value) {\r\n            this.value = value;\r\n        }\r\n    }\r\n\r\nso doing this way, normally LEMS for instance would not get populated unless my method specified:\r\n\r\n    // only populate my object with tokens\r\n    TaggedSentence pos = nlpService.tokenizeSentence(sentence);\r\n\r\n    // populate my object with tokens, tags (since lems requires tags), and lems \r\n    TaggedSentence pos = nlpService.tokenizeSentence(sentence, TagTypes.LEMS.value);\r\n\r\n    // populate my object with lems and any other random tagtype category I add to my enum to scan for later\r\n    TaggedSentence pos = nlpService.tokenizeSentence(sentence, TagTypes.LEMS.value | TagTypes.SOMEOTHERTYPE.value);\r\n\r\n","link":"https://stackoverflow.com/questions/76427524/how-to-assign-multiple-tags-to-a-token-using-opennlp/76457664#76457664","title":"How to assign multiple tags to a token using OpenNLP?","body":"<p>I decided to tackle it this way.  whatever limited knowledge I have seems to be no limitation here.</p>\n<p>I was using POSSample as my object which stores tags and tokens together, i created a different object like POSSample which stores in a hashmap the same tags, tokens, but also expandable to whatever other data i want to put in there like lems, custom tags, etc...</p>\n<pre><code>public class TaggedSentence {\n    private String sentence;\n    private HashMap&lt;TagTypes, List&lt;String&gt;&gt; tagHash = new HashMap&lt;TagTypes, List&lt;String&gt;&gt;();\n}\n</code></pre>\n<p>my tag types i use as the hash key is just an enum with values i can use for bitwise operations... so i can easily flag when i want or don't want these extra tags to be scanned for and populated in my sentence tagger</p>\n<pre><code>public enum TagTypes {\n    TOKENS(0B001),\n    TAGS(0B010),\n    LEMS(0B100);\n    // expand this list later as i need\n    \n    /**\n     * Values are set for bitwise operator checks\n     */\n    public final int value;\n\n    private TagTypes(int value) {\n        this.value = value;\n    }\n}\n</code></pre>\n<p>so doing this way, normally LEMS for instance would not get populated unless my method specified:</p>\n<pre><code>// only populate my object with tokens\nTaggedSentence pos = nlpService.tokenizeSentence(sentence);\n\n// populate my object with tokens, tags (since lems requires tags), and lems \nTaggedSentence pos = nlpService.tokenizeSentence(sentence, TagTypes.LEMS.value);\n\n// populate my object with lems and any other random tagtype category I add to my enum to scan for later\nTaggedSentence pos = nlpService.tokenizeSentence(sentence, TagTypes.LEMS.value | TagTypes.SOMEOTHERTYPE.value);\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":42,"answer_count":1,"score":1,"last_activity_date":1702106910,"creation_date":1686177759,"last_edit_date":1702106910,"question_id":76427524,"body_markdown":"I&#39;m using OpenNLP and it works fine for detecting parts of speech and such when doing this:\r\n\r\n```\r\ntry (InputStream modelIn = new FileInputStream(&quot;en-pos-maxent.bin&quot;){\r\n  POSModel model = new POSModel(modelIn);\r\n  POSTaggerME tagger = new POSTaggerME(model);\r\n  String tags[] = tagger.tag(tokenList);\r\n}\r\n```\r\n\r\nso if tokens = \\[Test, Recipe, of, Incredible, Goodness, .\\]\r\nthen tags    = \\[ADJ, NOUN, ADP, ADJ, NOUN, PUNCT\\]\r\n\r\ncan I further add even more tags than just those defined as parts of speech?   what if I want to add a tag for short words, products, food, etc...\r\n\r\nwould i need to add a custom POS model with my definitions, run it in addition to the english POS model, and just have additional tag arrays for each POS model that I run the sentence through??  \r\n\r\nI have tried what I described, defining my own model and running it so that I have multiple arrays.   I was just wondering if there was some other way to do this that might be better than what I tried.","link":"https://stackoverflow.com/questions/76427524/how-to-assign-multiple-tags-to-a-token-using-opennlp","title":"How to assign multiple tags to a token using OpenNLP?","body":"<p>I'm using OpenNLP and it works fine for detecting parts of speech and such when doing this:</p>\n<pre><code>try (InputStream modelIn = new FileInputStream(&quot;en-pos-maxent.bin&quot;){\n  POSModel model = new POSModel(modelIn);\n  POSTaggerME tagger = new POSTaggerME(model);\n  String tags[] = tagger.tag(tokenList);\n}\n</code></pre>\n<p>so if tokens = [Test, Recipe, of, Incredible, Goodness, .]\nthen tags    = [ADJ, NOUN, ADP, ADJ, NOUN, PUNCT]</p>\n<p>can I further add even more tags than just those defined as parts of speech?   what if I want to add a tag for short words, products, food, etc...</p>\n<p>would i need to add a custom POS model with my definitions, run it in addition to the english POS model, and just have additional tag arrays for each POS model that I run the sentence through??</p>\n<p>I have tried what I described, defining my own model and running it so that I have multiple arrays.   I was just wondering if there was some other way to do this that might be better than what I tried.</p>\n"},{"tags":["java","android","gradle","dependencies","resources"],"comments":[{"score":0,"post_type":"question","creation_date":1687753844,"post_id":76553512,"comment_id":134975294,"body_markdown":"What you were trying to do, a little explanation about the problem would be nice","link":"https://stackoverflow.com/questions/76553512/circular-dependency-between-the-following-tasks-appprocessdebugresources#comment134975294_76553512","body":"What you were trying to do, a little explanation about the problem would be nice"},{"score":0,"post_type":"question","creation_date":1687758737,"post_id":76553512,"comment_id":134975792,"body_markdown":"@FarkhodAbdukodirov I trying to build a RecyclerView and add some data from ArrayList to Adapter","link":"https://stackoverflow.com/questions/76553512/circular-dependency-between-the-following-tasks-appprocessdebugresources#comment134975792_76553512","body":"@FarkhodAbdukodirov I trying to build a RecyclerView and add some data from ArrayList to Adapter"},{"score":0,"post_type":"question","creation_date":1687759138,"post_id":76553512,"comment_id":134975842,"body_markdown":"Please update your post with your problem explanation","link":"https://stackoverflow.com/questions/76553512/circular-dependency-between-the-following-tasks-appprocessdebugresources#comment134975842_76553512","body":"Please update your post with your problem explanation"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702093166,"creation_date":1702093166,"answer_id":77630040,"question_id":76553512,"body_markdown":"Two potential reasons:\r\n * `implementation project(path: &#39;:app&#39;)` lines refer to the same project. (Assuming the contents above are the `:app` module&#39;s `build.gradle` contents.)\r\n * There are two modules in your multi-module build with the same name (not sure yet why this could be a problem, but that was my problem).","link":"https://stackoverflow.com/questions/76553512/circular-dependency-between-the-following-tasks-appprocessdebugresources/77630040#77630040","title":"Circular dependency between the following tasks: :app:processDebugResources \\--- :app:processDebugResources","body":"<p>Two potential reasons:</p>\n<ul>\n<li><code>implementation project(path: ':app')</code> lines refer to the same project. (Assuming the contents above are the <code>:app</code> module's <code>build.gradle</code> contents.)</li>\n<li>There are two modules in your multi-module build with the same name (not sure yet why this could be a problem, but that was my problem).</li>\n</ul>\n"}],"comment_count":3,"is_answered":false,"view_count":160,"answer_count":1,"score":1,"last_activity_date":1702093166,"creation_date":1687753554,"question_id":76553512,"body_markdown":"What could be the problem? \r\n\r\n* Exception is:\r\norg.gradle.api.CircularReferenceException: Circular dependency between the following tasks:\r\n:app:processDebugResources\r\n\\--- :app:processDebugResources (*)\r\n\r\n\r\nI try to change the version of buildTools\r\nthat is my biuld.gradle \r\n\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n}\r\n\r\nandroid {\r\n    namespace &#39;com.example.ban_hang&#39;\r\n    compileSdk 33\r\n    buildToolsVersion &quot;34.0.0&quot;\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.ban_hang&quot;\r\n        minSdk 33\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.9.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    implementation project(path: &#39;:app&#39;)\r\n    implementation project(path: &#39;:app&#39;)\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n    implementation &quot;androidx.recyclerview:recyclerview:1.2.1&quot;\r\n    implementation &quot;androidx.cardview:cardview:1.0.0&quot;\r\n}\r\n```\r\n","link":"https://stackoverflow.com/questions/76553512/circular-dependency-between-the-following-tasks-appprocessdebugresources","title":"Circular dependency between the following tasks: :app:processDebugResources \\--- :app:processDebugResources","body":"<p>What could be the problem?</p>\n<ul>\n<li>Exception is:\norg.gradle.api.CircularReferenceException: Circular dependency between the following tasks:\n:app:processDebugResources\n--- :app:processDebugResources (*)</li>\n</ul>\n<p>I try to change the version of buildTools\nthat is my biuld.gradle</p>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    namespace 'com.example.ban_hang'\n    compileSdk 33\n    buildToolsVersion &quot;34.0.0&quot;\n\n    defaultConfig {\n        applicationId &quot;com.example.ban_hang&quot;\n        minSdk 33\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.9.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation project(path: ':app')\n    implementation project(path: ':app')\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n    implementation &quot;androidx.recyclerview:recyclerview:1.2.1&quot;\n    implementation &quot;androidx.cardview:cardview:1.0.0&quot;\n}\n</code></pre>\n"},{"tags":["java","compatibility","jakarta-migration"],"comments":[{"score":1,"post_type":"question","creation_date":1700764273,"post_id":77539033,"comment_id":136697121,"body_markdown":"[This is a canonical](https://meta.stackoverflow.com/q/427206/10871900)","link":"https://stackoverflow.com/questions/77539033/how-to-avoid-compatibility-issues-between-java-ee-and-jakarta-ee#comment136697121_77539033","body":"<a href=\"https://meta.stackoverflow.com/q/427206/10871900\">This is a canonical</a>"}],"answers":[{"comment_count":0,"score":3,"last_activity_date":1701878631,"last_edit_date":1701878631,"creation_date":1700764264,"answer_id":77539034,"question_id":77539033,"body_markdown":"## Don&#39;t mix Java EE and Jakarta EE dependencies\r\n\r\nYou cannot use Java EE and Jakarta EE together. You have to use one or the other.  \r\nIf a project is using Java EE, there should not be any Jakarta EE dependencies in the project.\r\n\r\nHere are a few examples of Java EE/Jakarta dependencies (in `group.id:artifact-id` notation):\r\n\r\n|Java EE dependency|Jakarta EE dependency|\r\n|---|---|\r\n|`javax.servlet:javax.servlet-api`|`jakarta.servlet:jakarta.servlet-api`|\r\n|`javax.persistence:javax.persistence-api`|`jakarta.persistence:jakarta.persistence-api`|\r\n|`javax.xml.bind:jaxb-api`|`jakarta.xml.bind:jakarta.xml.bind-api`|\r\n|`javax.validation:validation-api`|`jakarta.validation:jakarta.validation-api`|\r\n|`javax.mail:javax.mail-api`|`jakarta.mail:jakarta.mail-api`|\r\n\r\nYou should not have both `javax` and `jakarta` dependencies in the same project.\r\n\r\nYou can use `mvn dependency:list` (with Maven) or `gradlew dependencies` (with Gradle) for checking your dependencies.\r\n\r\n### Other/transitive dependencies\r\nYour project might use dependencies that are written for Java EE or Jakarta EE.  \r\nYou need to make sure that you are using a version of these dependencies that matches the specification you are using.\r\n\r\nThis table provides examples of dependencies that use Java EE in some versions and Jakarta EE in other versions:\r\n\r\n|Dependency|versions supporting Java EE|versions supporting Jakarta EE|\r\n|---|---|---|\r\n|Spring Boot|&lt;= 2.x|&gt;= 3.x|\r\n|Spring|&lt;= 5.x|&gt;= 6.x|\r\n|Hibernate|&lt;= 5.x|&gt;= 6.x|\r\n\r\n## The package name\r\nWith the change of the name `Java EE` to `Jakarta EE`, all Java EE types were moved from the `javax` package to `jakarta` (e.g. `javax.servlet` was changed to `jakarta.servlet`).\r\n\r\nIf the project is using Java EE, it should not contain any `jakarta.*` imports and if it is using Jakarta EE, it should not use any Java EE classes from `javax.*`.\r\n\r\nThere are tools for changing all imports and other type references in a project.\r\n\r\n### configuration files\r\n\r\nSome configuration files (e.g. `persistence.xml`) might be different depending on whether Java EE or Jakarta is used.\r\n\r\nIf configuration file references something starting with `javax`, this typically belongs to Java EE while references starting with `jakarta` typically belong in Jakarta EE projects.\r\n\r\nHere is an example `persistence.xml` file for both Java EE and Jakarta EE:\r\n```xml\r\n&lt;!-- This is for Java EE --&gt;\r\n&lt;persistence xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;\r\n\tversion=&quot;2.0&quot; xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;&gt;\r\n\r\n    &lt;persistence-unit name=&quot;MyPersistenceUnit&quot; transaction-type=&quot;JTA&quot;&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:my-database-url&quot; /&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n```\r\n```xml\r\n&lt;!-- This is for Jakarta EE --&gt;\r\n&lt;persistence xmlns=&quot;https://jakarta.ee/xml/ns/persistence&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/persistence https://jakarta.ee/xml/ns/persistence/persistence_3_0.xsd&quot;\r\n             version=&quot;3.0&quot;&gt;\r\n    &lt;persistence-unit name=&quot;MyPersistenceUnit&quot; transaction-type=&quot;JTA&quot;&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:my-database-url&quot; /&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n```\r\n\r\nOther configuration files might require similar changes.\r\n\r\n## Application servers/Containers\r\n\r\nJava EE projects should be deployed to an application server/web container supporting Java EE and Jakarta EE projects should be deployed to an application server/web container supporting Jakarta EE.\r\n\r\nFor example:\r\n\r\n - [Tomcat &lt;=9 uses Java EE while Tomcat &gt;=10 uses Jakarta EE](https://tomcat.apache.org/whichversion.html)\r\n - [Jetty 9 &amp; 10 uses Java EE while Jetty 11 uses Jakarta EE][1] &#160;and [Jetty 12 supports both][2] Java EE *and* Jakarta EE. \r\n\r\n## Possible issues caused by incompatibilities\r\n\r\nIf a project references classes that are not available, `ClassNotFoundException`s/`NoClassDefFoundError`s can occur.\r\n\r\nIt is possible that some elements like servlets are not found by the container due to e.g. the container scanning for `javax.servlet.annotation.WebServlet` but the servlet being annotated with `jakarta.servlet.annotation.WebServlet`.\r\n\r\nThe application might not correctly pick up some configurations.\r\n\r\nOf course, there can be many other issues depending on what exactly is done wrong.\r\n\r\n## Migration tooling\r\n\r\nThere are tools that help migrate from Java EE to Jakarta EE.\r\n\r\nFor example, [Eclipse Transformer](https://github.com/eclipse/transformer) can do most of the migration steps and can perform the namespace change in both source code and existing JAR/WAR files (e.g. libraries). It is also available as a Maven plugin.\r\n\r\nAlternatively, IntelliJ Ultimate allows [migrating the source code of existing projects from Java EE to Jakarta EE](https://www.jetbrains.com/guide/java/tutorials/migrating-javax-jakarta/use-migration-tool/). Similarly, [Spring Tools](https://github.com/spring-projects/sts4/) allows to do the same for Spring projects.\r\n\r\n  [1]: https://eclipse.dev/jetty/\r\n  [2]: https://webtide.com/introducing-jetty-12/","link":"https://stackoverflow.com/questions/77539033/how-to-avoid-compatibility-issues-between-java-ee-and-jakarta-ee/77539034#77539034","title":"How to avoid compatibility issues between Java EE and Jakarta EE?","body":"<h2>Don't mix Java EE and Jakarta EE dependencies</h2>\n<p>You cannot use Java EE and Jakarta EE together. You have to use one or the other.<br />\nIf a project is using Java EE, there should not be any Jakarta EE dependencies in the project.</p>\n<p>Here are a few examples of Java EE/Jakarta dependencies (in <code>group.id:artifact-id</code> notation):</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Java EE dependency</th>\n<th>Jakarta EE dependency</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>javax.servlet:javax.servlet-api</code></td>\n<td><code>jakarta.servlet:jakarta.servlet-api</code></td>\n</tr>\n<tr>\n<td><code>javax.persistence:javax.persistence-api</code></td>\n<td><code>jakarta.persistence:jakarta.persistence-api</code></td>\n</tr>\n<tr>\n<td><code>javax.xml.bind:jaxb-api</code></td>\n<td><code>jakarta.xml.bind:jakarta.xml.bind-api</code></td>\n</tr>\n<tr>\n<td><code>javax.validation:validation-api</code></td>\n<td><code>jakarta.validation:jakarta.validation-api</code></td>\n</tr>\n<tr>\n<td><code>javax.mail:javax.mail-api</code></td>\n<td><code>jakarta.mail:jakarta.mail-api</code></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>You should not have both <code>javax</code> and <code>jakarta</code> dependencies in the same project.</p>\n<p>You can use <code>mvn dependency:list</code> (with Maven) or <code>gradlew dependencies</code> (with Gradle) for checking your dependencies.</p>\n<h3>Other/transitive dependencies</h3>\n<p>Your project might use dependencies that are written for Java EE or Jakarta EE.<br />\nYou need to make sure that you are using a version of these dependencies that matches the specification you are using.</p>\n<p>This table provides examples of dependencies that use Java EE in some versions and Jakarta EE in other versions:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Dependency</th>\n<th>versions supporting Java EE</th>\n<th>versions supporting Jakarta EE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Spring Boot</td>\n<td>&lt;= 2.x</td>\n<td>&gt;= 3.x</td>\n</tr>\n<tr>\n<td>Spring</td>\n<td>&lt;= 5.x</td>\n<td>&gt;= 6.x</td>\n</tr>\n<tr>\n<td>Hibernate</td>\n<td>&lt;= 5.x</td>\n<td>&gt;= 6.x</td>\n</tr>\n</tbody>\n</table>\n</div><h2>The package name</h2>\n<p>With the change of the name <code>Java EE</code> to <code>Jakarta EE</code>, all Java EE types were moved from the <code>javax</code> package to <code>jakarta</code> (e.g. <code>javax.servlet</code> was changed to <code>jakarta.servlet</code>).</p>\n<p>If the project is using Java EE, it should not contain any <code>jakarta.*</code> imports and if it is using Jakarta EE, it should not use any Java EE classes from <code>javax.*</code>.</p>\n<p>There are tools for changing all imports and other type references in a project.</p>\n<h3>configuration files</h3>\n<p>Some configuration files (e.g. <code>persistence.xml</code>) might be different depending on whether Java EE or Jakarta is used.</p>\n<p>If configuration file references something starting with <code>javax</code>, this typically belongs to Java EE while references starting with <code>jakarta</code> typically belong in Jakarta EE projects.</p>\n<p>Here is an example <code>persistence.xml</code> file for both Java EE and Jakarta EE:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- This is for Java EE --&gt;\n&lt;persistence xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;\n    version=&quot;2.0&quot; xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;&gt;\n\n    &lt;persistence-unit name=&quot;MyPersistenceUnit&quot; transaction-type=&quot;JTA&quot;&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:my-database-url&quot; /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- This is for Jakarta EE --&gt;\n&lt;persistence xmlns=&quot;https://jakarta.ee/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/persistence https://jakarta.ee/xml/ns/persistence/persistence_3_0.xsd&quot;\n             version=&quot;3.0&quot;&gt;\n    &lt;persistence-unit name=&quot;MyPersistenceUnit&quot; transaction-type=&quot;JTA&quot;&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:my-database-url&quot; /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>Other configuration files might require similar changes.</p>\n<h2>Application servers/Containers</h2>\n<p>Java EE projects should be deployed to an application server/web container supporting Java EE and Jakarta EE projects should be deployed to an application server/web container supporting Jakarta EE.</p>\n<p>For example:</p>\n<ul>\n<li><a href=\"https://tomcat.apache.org/whichversion.html\" rel=\"nofollow noreferrer\">Tomcat &lt;=9 uses Java EE while Tomcat &gt;=10 uses Jakarta EE</a></li>\n<li><a href=\"https://eclipse.dev/jetty/\" rel=\"nofollow noreferrer\">Jetty 9 &amp; 10 uses Java EE while Jetty 11 uses Jakarta EE</a> and <a href=\"https://webtide.com/introducing-jetty-12/\" rel=\"nofollow noreferrer\">Jetty 12 supports both</a> Java EE <em>and</em> Jakarta EE.</li>\n</ul>\n<h2>Possible issues caused by incompatibilities</h2>\n<p>If a project references classes that are not available, <code>ClassNotFoundException</code>s/<code>NoClassDefFoundError</code>s can occur.</p>\n<p>It is possible that some elements like servlets are not found by the container due to e.g. the container scanning for <code>javax.servlet.annotation.WebServlet</code> but the servlet being annotated with <code>jakarta.servlet.annotation.WebServlet</code>.</p>\n<p>The application might not correctly pick up some configurations.</p>\n<p>Of course, there can be many other issues depending on what exactly is done wrong.</p>\n<h2>Migration tooling</h2>\n<p>There are tools that help migrate from Java EE to Jakarta EE.</p>\n<p>For example, <a href=\"https://github.com/eclipse/transformer\" rel=\"nofollow noreferrer\">Eclipse Transformer</a> can do most of the migration steps and can perform the namespace change in both source code and existing JAR/WAR files (e.g. libraries). It is also available as a Maven plugin.</p>\n<p>Alternatively, IntelliJ Ultimate allows <a href=\"https://www.jetbrains.com/guide/java/tutorials/migrating-javax-jakarta/use-migration-tool/\" rel=\"nofollow noreferrer\">migrating the source code of existing projects from Java EE to Jakarta EE</a>. Similarly, <a href=\"https://github.com/spring-projects/sts4/\" rel=\"nofollow noreferrer\">Spring Tools</a> allows to do the same for Spring projects.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":187,"answer_count":1,"score":2,"last_activity_date":1702069755,"creation_date":1700764264,"last_edit_date":1702069755,"question_id":77539033,"body_markdown":"After Oracle donated Java EE to the Eclipse Foundation, it [was renamed to Jakarta EE](https://blogs.eclipse.org/post/wayne-beaton/renaming-java-ee-specifications-jakarta-ee).\r\n\r\nWith that, the `javax` namespace was changed to `jakarta`.\r\n\r\nWhat does one need to take care about in order to avoid compatibility issues due to the change from Java EE to Jakarta EE?","link":"https://stackoverflow.com/questions/77539033/how-to-avoid-compatibility-issues-between-java-ee-and-jakarta-ee","title":"How to avoid compatibility issues between Java EE and Jakarta EE?","body":"<p>After Oracle donated Java EE to the Eclipse Foundation, it <a href=\"https://blogs.eclipse.org/post/wayne-beaton/renaming-java-ee-specifications-jakarta-ee\" rel=\"nofollow noreferrer\">was renamed to Jakarta EE</a>.</p>\n<p>With that, the <code>javax</code> namespace was changed to <code>jakarta</code>.</p>\n<p>What does one need to take care about in order to avoid compatibility issues due to the change from Java EE to Jakarta EE?</p>\n"},{"tags":["java"],"comments":[{"score":0,"post_type":"question","creation_date":1700013170,"post_id":77484795,"comment_id":136602092,"body_markdown":"Have you considered something like a [Java based executable](https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file)?  It&#39;s unclear that *anything* could be installed on the machine but at least it would be a single .exe to run.","link":"https://stackoverflow.com/questions/77484795/installing-java-on-usb-drive-without-administrator-privileges#comment136602092_77484795","body":"Have you considered something like a <a href=\"https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file\">Java based executable</a>?  It&#39;s unclear that <i>anything</i> could be installed on the machine but at least it would be a single .exe to run."},{"score":0,"post_type":"question","creation_date":1700013394,"post_id":77484795,"comment_id":136602106,"body_markdown":"Can you embed the Java Runtime - yes - thus is simply having the JRE binaries and libraries packed with your compiled code and then having a launcher which  can the execute the java command within you package (ie batch file or native executable)","link":"https://stackoverflow.com/questions/77484795/installing-java-on-usb-drive-without-administrator-privileges#comment136602106_77484795","body":"Can you embed the Java Runtime - yes - thus is simply having the JRE binaries and libraries packed with your compiled code and then having a launcher which  can the execute the java command within you package (ie batch file or native executable)"},{"score":0,"post_type":"question","creation_date":1700014332,"post_id":77484795,"comment_id":136602173,"body_markdown":"@stdunbar I had tried to create and .exe file, but it still need Java for running the program, or how can I convert a Java Program to exe which not requires user to run the program without installing Java?","link":"https://stackoverflow.com/questions/77484795/installing-java-on-usb-drive-without-administrator-privileges#comment136602173_77484795","body":"@stdunbar I had tried to create and .exe file, but it still need Java for running the program, or how can I convert a Java Program to exe which not requires user to run the program without installing Java?"},{"score":0,"post_type":"question","creation_date":1700014362,"post_id":77484795,"comment_id":136602176,"body_markdown":"may be you can  have a reference to ```DOCKER```   , there is  a tech  ```DIND```  could helps you slove your problem","link":"https://stackoverflow.com/questions/77484795/installing-java-on-usb-drive-without-administrator-privileges#comment136602176_77484795","body":"may be you can  have a reference to <code>DOCKER</code>   , there is  a tech  <code>DIND</code>  could helps you slove your problem"},{"score":0,"post_type":"question","creation_date":1700014435,"post_id":77484795,"comment_id":136602184,"body_markdown":"DIND could package your whole env and application , so that you can run application  skip  env installation step","link":"https://stackoverflow.com/questions/77484795/installing-java-on-usb-drive-without-administrator-privileges#comment136602184_77484795","body":"DIND could package your whole env and application , so that you can run application  skip  env installation step"},{"score":0,"post_type":"question","creation_date":1700062275,"post_id":77484795,"comment_id":136609028,"body_markdown":"You might find https://stackoverflow.com/questions/53453212/how-to-deploy-a-javafx-11-desktop-application-with-a-jre helpful.  (This applies to all Java applications, whether or not they use JavaFX.)","link":"https://stackoverflow.com/questions/77484795/installing-java-on-usb-drive-without-administrator-privileges#comment136609028_77484795","body":"You might find <a href=\"https://stackoverflow.com/questions/53453212/how-to-deploy-a-javafx-11-desktop-application-with-a-jre\" title=\"how to deploy a javafx 11 desktop application with a jre\">stackoverflow.com/questions/53453212/&hellip;</a> helpful.  (This applies to all Java applications, whether or not they use JavaFX.)"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702068423,"creation_date":1702068423,"answer_id":77629094,"question_id":77484795,"body_markdown":"I had a similar requirement once. I ended up using [jPortable][1] to create a portable Java installation.\r\n\r\nWhen you run the installer, all you need to do is specify an install location (in this case, it would be your USB drive). Once it is installed, you use the `java` executable in the `bin` directory to execute your applications. It works exactly the same way as any other Java installation.\r\n\r\n  [1]: https://portableapps.com/apps/utilities/java_portable","link":"https://stackoverflow.com/questions/77484795/installing-java-on-usb-drive-without-administrator-privileges/77629094#77629094","title":"Installing Java on USB Drive without administrator privileges","body":"<p>I had a similar requirement once. I ended up using <a href=\"https://portableapps.com/apps/utilities/java_portable\" rel=\"nofollow noreferrer\">jPortable</a> to create a portable Java installation.</p>\n<p>When you run the installer, all you need to do is specify an install location (in this case, it would be your USB drive). Once it is installed, you use the <code>java</code> executable in the <code>bin</code> directory to execute your applications. It works exactly the same way as any other Java installation.</p>\n"}],"comment_count":6,"is_answered":false,"view_count":27,"answer_count":1,"score":0,"last_activity_date":1702068423,"creation_date":1700012975,"question_id":77484795,"body_markdown":"I am currently writing a `Java` program for a company use. \r\nHowever, there are no `Java` installed in the company&#39;s computer. \r\n\r\n\r\nTherefore, I would like to know that if it is possible that I can install the Java in the USB (or just together with My Program). Then, if the user install the package of the program that I had written, `Java` will be also being installed. \r\n\r\nIf it is possible to do that?\\\r\n(Please assume that the user will mainly use the program in Window platform). ","link":"https://stackoverflow.com/questions/77484795/installing-java-on-usb-drive-without-administrator-privileges","title":"Installing Java on USB Drive without administrator privileges","body":"<p>I am currently writing a <code>Java</code> program for a company use.\nHowever, there are no <code>Java</code> installed in the company's computer.</p>\n<p>Therefore, I would like to know that if it is possible that I can install the Java in the USB (or just together with My Program). Then, if the user install the package of the program that I had written, <code>Java</code> will be also being installed.</p>\n<p>If it is possible to do that?<br />\n(Please assume that the user will mainly use the program in Window platform).</p>\n"},{"tags":["java","spring","spring-security","spring-cloud-gateway"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702067205,"last_edit_date":1702067205,"creation_date":1702010754,"answer_id":77624403,"question_id":77385959,"body_markdown":"Finally I noted that since WebFlux is reactive, I need to do it that way. So, I made the below changes, and now it is working fine.\r\n\r\n**1. Add load balancer dependency**\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n       &lt;artifactId&gt;spring-cloud-starter-loadbalancer&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**2.Add WebClient Configuration.**\r\n\r\n    @Configuration\r\n    class WebClientConfig {\r\n    \r\n    \t@Bean\r\n    \t@LoadBalanced\r\n    \tpublic WebClient.Builder loadBalancedWebClientBuilder() {\r\n    \t\treturn WebClient.builder();\r\n    \t}\r\n    }\r\n\r\n**3.Call external microservice using service-name via WebClient as follows**\r\n\r\n\r\n    import jakarta.ws.rs.core.HttpHeaders;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.cloud.gateway.filter.GatewayFilter;\r\n    import org.springframework.cloud.gateway.filter.factory.AbstractGatewayFilterFactory;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.web.reactive.function.client.WebClient;\r\n    \r\n    @Component\r\n    public class AuthenticationFilter extends AbstractGatewayFilterFactory&lt;AuthenticationFilter.Config&gt; {\r\n    \r\n        private WebClient webClient;\r\n    \r\n        public AuthenticationFilter() {\r\n            super(Config.class);\r\n        }\r\n    \t\r\n        @Autowired\r\n        public AuthenticationFilter(WebClient.Builder webClientBuilder) {\r\n            super(Config.class);\r\n            this.webClient = webClientBuilder.build();\r\n        }\r\n    \r\n        @Override\r\n        public Config newConfig() {\r\n            return new Config();\r\n        }\r\n    \r\n        @Override\r\n        public GatewayFilter apply(Config config) {\r\n            return (exchange, chain) -&gt; {\r\n                String authHeader = exchange.getRequest().getHeaders().getFirst(HttpHeaders.AUTHORIZATION);\r\n    \r\n                if (authHeader != null &amp;&amp; authHeader.startsWith(&quot;Bearer &quot;)) {\r\n                    authHeader = authHeader.substring(7);\r\n                }\r\n    \r\n                String expectedRole = config.role;\r\n                String authServiceUrl = &quot;http://YOUR-APPLICATION-SERVICE-NAME&quot;;\r\n    \r\n                return this.webClient\r\n                        .get()\r\n                        .uri(authServiceUrl + &quot;/auth/doOp?token=&quot; + authHeader + &quot;&amp;role=&quot; + expectedRole)\r\n                        .retrieve()\r\n                        .bodyToMono(Boolean.class)\r\n                        .flatMap(response -&gt; {\r\n                            // Do further operations on microservice response if needed\r\n                            return chain.filter(exchange);\r\n                        })\r\n                        .onErrorResume(throwable -&gt; {\r\n                            throw new RuntimeException(&quot;un authorized access to application&quot;);\r\n                        });\r\n            };\r\n        }\r\n    \r\n        public static class Config {\r\n            private String role;\r\n            public String getRole() {\r\n                return role;\r\n            }\r\n            public void setRole(String role) {\r\n                this.role = role;\r\n            }\r\n        }\r\n    }\r\n\r\nI&#39;ve shared a sample project here : \r\nhttps://github.com/namalfernandolk/cloud-gateway-demo.git","link":"https://stackoverflow.com/questions/77385959/call-microservices-synchronously-by-the-service-name-within-spring-cloud-gateway/77624403#77624403","title":"Call MicroServices synchronously by the service-name within Spring Cloud Gateway","body":"<p>Finally I noted that since WebFlux is reactive, I need to do it that way. So, I made the below changes, and now it is working fine.</p>\n<p><strong>1. Add load balancer dependency</strong></p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n   &lt;artifactId&gt;spring-cloud-starter-loadbalancer&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>2.Add WebClient Configuration.</strong></p>\n<pre><code>@Configuration\nclass WebClientConfig {\n\n    @Bean\n    @LoadBalanced\n    public WebClient.Builder loadBalancedWebClientBuilder() {\n        return WebClient.builder();\n    }\n}\n</code></pre>\n<p><strong>3.Call external microservice using service-name via WebClient as follows</strong></p>\n<pre><code>import jakarta.ws.rs.core.HttpHeaders;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.cloud.gateway.filter.GatewayFilter;\nimport org.springframework.cloud.gateway.filter.factory.AbstractGatewayFilterFactory;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.reactive.function.client.WebClient;\n\n@Component\npublic class AuthenticationFilter extends AbstractGatewayFilterFactory&lt;AuthenticationFilter.Config&gt; {\n\n    private WebClient webClient;\n\n    public AuthenticationFilter() {\n        super(Config.class);\n    }\n    \n    @Autowired\n    public AuthenticationFilter(WebClient.Builder webClientBuilder) {\n        super(Config.class);\n        this.webClient = webClientBuilder.build();\n    }\n\n    @Override\n    public Config newConfig() {\n        return new Config();\n    }\n\n    @Override\n    public GatewayFilter apply(Config config) {\n        return (exchange, chain) -&gt; {\n            String authHeader = exchange.getRequest().getHeaders().getFirst(HttpHeaders.AUTHORIZATION);\n\n            if (authHeader != null &amp;&amp; authHeader.startsWith(&quot;Bearer &quot;)) {\n                authHeader = authHeader.substring(7);\n            }\n\n            String expectedRole = config.role;\n            String authServiceUrl = &quot;http://YOUR-APPLICATION-SERVICE-NAME&quot;;\n\n            return this.webClient\n                    .get()\n                    .uri(authServiceUrl + &quot;/auth/doOp?token=&quot; + authHeader + &quot;&amp;role=&quot; + expectedRole)\n                    .retrieve()\n                    .bodyToMono(Boolean.class)\n                    .flatMap(response -&gt; {\n                        // Do further operations on microservice response if needed\n                        return chain.filter(exchange);\n                    })\n                    .onErrorResume(throwable -&gt; {\n                        throw new RuntimeException(&quot;un authorized access to application&quot;);\n                    });\n        };\n    }\n\n    public static class Config {\n        private String role;\n        public String getRole() {\n            return role;\n        }\n        public void setRole(String role) {\n            this.role = role;\n        }\n    }\n}\n</code></pre>\n<p>I've shared a sample project here :\n<a href=\"https://github.com/namalfernandolk/cloud-gateway-demo.git\" rel=\"nofollow noreferrer\">https://github.com/namalfernandolk/cloud-gateway-demo.git</a></p>\n"}],"comment_count":0,"is_answered":false,"view_count":71,"answer_count":1,"score":0,"last_activity_date":1702067205,"creation_date":1698633397,"question_id":77385959,"body_markdown":"I have a cloud api gateway related implementation built referring [this][1]. \r\n\r\nThere, I&#39;m calling an authentication service within that gateway through AuthenticationFilter.\r\n\r\n - CLOUD-GATEWAY-SERVICE\t: 7130 \r\n - AUTHENTICATION-SERVICE\t: 9898\r\n - EXCHANGE-SERVICE\t\t: 7120\r\n\r\n**application.yml**\r\n\r\n    server:\r\n      port: 7130\r\n    eureka:\r\n      client:\r\n        serviceUrl:\r\n          defaultZone: http://localhost:8083/eureka\r\n    spring:\r\n      application:\r\n        name: CLOUD-GATEWAY-SERVICE\r\n      cloud:\r\n        gateway:\r\n          routes:\r\n          - id: mtoken-exchange-service\r\n            uri: lb://EXCHANGE-SERVICE\r\n            predicates:\r\n            - Path=/employee/**\r\n            filters:\r\n              - name: AuthenticationFilter\r\n                args:\r\n                  role: ROLE_ADMIN\r\n          - id: mtokens-authentication-service\r\n            uri: lb://AUTHENTICATION-SERVICE\r\n            predicates:\r\n              - Path=/auth/**\r\n\r\n\r\n - Spring boot version : 3.1.1\r\n - Spring Cloud Version : 2022.0.3\r\n - Java version : 17\r\n\r\n\r\nCurrently I&#39;m using the RestTemplate for that; but I tried Feign and Webclient also.\r\n\r\nWhen I access using the host and port as mentioned below it works. (here I used it without @LoadBalanced annotation)\r\n\r\n    template.getForObject(&quot;http://localhost:7130/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\r\n    template.getForObject(&quot;http://localhost:9898/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\r\n\r\nBut, when I try to access using the service name as mentioned below it fails with Unknown Host Exception.\r\n\r\n    template.getForObject(&quot;http://CLOUD-GATEWAY-SERVICE/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\r\n    template.getForObject(&quot;http://AUTHENTICATION-SERVICE/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\r\n\r\nThen as mentioned in this[https://stackoverflow.com/questions/37159662/microservices-resttemplate-unknownhostexception] post, I annotated the RestTemplate with @LoadBalanced. But after that it is throwing below error.\r\nSame thing I experienced when I synchronously call servces using Feign or Webclient.\r\n\r\n    2023-10-30T05:19:59.789+05:30  INFO 10856 --- [           main] c.javatechie.SwiggyGatewayApplication    : Started SwiggyGatewayApplication in 3.752 seconds (process running for 4.03)\r\n    java.lang.IllegalStateException: block()/blockFirst()/blockLast() are blocking, which is not supported in thread reactor-http-nio-3\r\n    \tat reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:83)\r\n    \tat reactor.core.publisher.Mono.block(Mono.java:1710)\r\n    \tat org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient.choose(BlockingLoadBalancerClient.java:163)\r\n    \tat org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient.execute(BlockingLoadBalancerClient.java:74)\r\n    \tat org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor.intercept(LoadBalancerInterceptor.java:56)\r\n    \tat org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:87)\r\n    \tat org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:71)\r\n    \tat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)\r\n    \tat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66)\r\n    \tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:862)\r\n    \tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:764)\r\n    \tat org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:378)\r\n    \tat com.javatechie.filter.AuthenticationFilter.lambda$apply$0(AuthenticationFilter.java:42)\r\n\t\r\n\r\n**RestTemplateConfiguration** \r\n\r\n    @Configuration\r\n    class RestTemplateConfiguration {\r\n    \t@Bean\r\n    \t@LoadBalanced\r\n    \tpublic RestTemplate restTemplate() {\r\n    \t\treturn new RestTemplate(new BufferingClientHttpRequestFactory(new HttpComponentsClientHttpRequestFactory()));\r\n    \t}\r\n    }\r\n\r\nIs there anyway to call services synchronously by the service name using RestTemplate or Feignclient or Webclient etc within this like cloud gateway application?\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=MWvnmyLRUik","link":"https://stackoverflow.com/questions/77385959/call-microservices-synchronously-by-the-service-name-within-spring-cloud-gateway","title":"Call MicroServices synchronously by the service-name within Spring Cloud Gateway","body":"<p>I have a cloud api gateway related implementation built referring <a href=\"https://www.youtube.com/watch?v=MWvnmyLRUik\" rel=\"nofollow noreferrer\">this</a>.</p>\n<p>There, I'm calling an authentication service within that gateway through AuthenticationFilter.</p>\n<ul>\n<li>CLOUD-GATEWAY-SERVICE    : 7130</li>\n<li>AUTHENTICATION-SERVICE   : 9898</li>\n<li>EXCHANGE-SERVICE     : 7120</li>\n</ul>\n<p><strong>application.yml</strong></p>\n<pre><code>server:\n  port: 7130\neureka:\n  client:\n    serviceUrl:\n      defaultZone: http://localhost:8083/eureka\nspring:\n  application:\n    name: CLOUD-GATEWAY-SERVICE\n  cloud:\n    gateway:\n      routes:\n      - id: mtoken-exchange-service\n        uri: lb://EXCHANGE-SERVICE\n        predicates:\n        - Path=/employee/**\n        filters:\n          - name: AuthenticationFilter\n            args:\n              role: ROLE_ADMIN\n      - id: mtokens-authentication-service\n        uri: lb://AUTHENTICATION-SERVICE\n        predicates:\n          - Path=/auth/**\n</code></pre>\n<ul>\n<li>Spring boot version : 3.1.1</li>\n<li>Spring Cloud Version : 2022.0.3</li>\n<li>Java version : 17</li>\n</ul>\n<p>Currently I'm using the RestTemplate for that; but I tried Feign and Webclient also.</p>\n<p>When I access using the host and port as mentioned below it works. (here I used it without @LoadBalanced annotation)</p>\n<pre><code>template.getForObject(&quot;http://localhost:7130/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\ntemplate.getForObject(&quot;http://localhost:9898/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\n</code></pre>\n<p>But, when I try to access using the service name as mentioned below it fails with Unknown Host Exception.</p>\n<pre><code>template.getForObject(&quot;http://CLOUD-GATEWAY-SERVICE/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\ntemplate.getForObject(&quot;http://AUTHENTICATION-SERVICE/auth/validate?token=&lt;Bearer_Token&gt;&amp;role=ROLE_ADMIN&quot;, Boolean.class);\n</code></pre>\n<p>Then as mentioned in this[https://stackoverflow.com/questions/37159662/microservices-resttemplate-unknownhostexception] post, I annotated the RestTemplate with @LoadBalanced. But after that it is throwing below error.\nSame thing I experienced when I synchronously call servces using Feign or Webclient.</p>\n<pre><code>2023-10-30T05:19:59.789+05:30  INFO 10856 --- [           main] c.javatechie.SwiggyGatewayApplication    : Started SwiggyGatewayApplication in 3.752 seconds (process running for 4.03)\njava.lang.IllegalStateException: block()/blockFirst()/blockLast() are blocking, which is not supported in thread reactor-http-nio-3\n    at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:83)\n    at reactor.core.publisher.Mono.block(Mono.java:1710)\n    at org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient.choose(BlockingLoadBalancerClient.java:163)\n    at org.springframework.cloud.loadbalancer.blocking.client.BlockingLoadBalancerClient.execute(BlockingLoadBalancerClient.java:74)\n    at org.springframework.cloud.client.loadbalancer.LoadBalancerInterceptor.intercept(LoadBalancerInterceptor.java:56)\n    at org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:87)\n    at org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:71)\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66)\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:862)\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:764)\n    at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:378)\n    at com.javatechie.filter.AuthenticationFilter.lambda$apply$0(AuthenticationFilter.java:42)\n</code></pre>\n<p><strong>RestTemplateConfiguration</strong></p>\n<pre><code>@Configuration\nclass RestTemplateConfiguration {\n    @Bean\n    @LoadBalanced\n    public RestTemplate restTemplate() {\n        return new RestTemplate(new BufferingClientHttpRequestFactory(new HttpComponentsClientHttpRequestFactory()));\n    }\n}\n</code></pre>\n<p>Is there anyway to call services synchronously by the service name using RestTemplate or Feignclient or Webclient etc within this like cloud gateway application?</p>\n"},{"tags":["python","java","google-cloud-dataflow","user-defined-functions","apache-beam"],"comments":[{"score":0,"post_type":"question","creation_date":1674137066,"post_id":75150047,"comment_id":132653750,"body_markdown":"Yes, multi-language pipelines is the best way to achieve this. Can you look into this class which will allow you to execute an arbitrary element-wise Python function on a PCollection - https://github.com/apache/beam/blob/master/sdks/java/extensions/python/src/main/java/org/apache/beam/sdk/extensions/python/transforms/PythonMap.java","link":"https://stackoverflow.com/questions/75150047/execute-python-udfs-in-a-java-dataflow-pipeline#comment132653750_75150047","body":"Yes, multi-language pipelines is the best way to achieve this. Can you look into this class which will allow you to execute an arbitrary element-wise Python function on a PCollection - <a href=\"https://github.com/apache/beam/blob/master/sdks/java/extensions/python/src/main/java/org/apache/beam/sdk/extensions/python/transforms/PythonMap.java\" rel=\"nofollow noreferrer\">github.com/apache/beam/blob/master/sdks/java/extensions/pyth&zwnj;&#8203;on/&hellip;</a>"},{"score":0,"post_type":"question","creation_date":1674230079,"post_id":75150047,"comment_id":132676837,"body_markdown":"Thank you for your response, @chamikara.\n\nI was able successfully get the SklearnMnistClassification pipeline from the examples  to work in Dataflow (https://github.com/apache/beam/blob/master/examples/java/src/main/java/org/apache/beam/examples/multilanguage/SklearnMnistClassification.java).\n\nHowever, I am running into a lot of issues getting the multi-lang pipelines to run locally. The pipelines are either throwing an error, or never terminate. I&#39;ve got the Python Expansion service running in a virtual environment, but I am wondering if I need a Docker image running as well?","link":"https://stackoverflow.com/questions/75150047/execute-python-udfs-in-a-java-dataflow-pipeline#comment132676837_75150047","body":"Thank you for your response, @chamikara.  I was able successfully get the SklearnMnistClassification pipeline from the examples  to work in Dataflow (<a href=\"https://github.com/apache/beam/blob/master/examples/java/src/main/java/org/apache/beam/examples/multilanguage/SklearnMnistClassification.java\" rel=\"nofollow noreferrer\">github.com/apache/beam/blob/master/examples/java/src/main/j&zwnj;&#8203;ava/&hellip;</a>).  However, I am running into a lot of issues getting the multi-lang pipelines to run locally. The pipelines are either throwing an error, or never terminate. I&#39;ve got the Python Expansion service running in a virtual environment, but I am wondering if I need a Docker image running as well?"},{"score":0,"post_type":"question","creation_date":1674320662,"post_id":75150047,"comment_id":132691573,"body_markdown":"You just need to have Docker installed.  Can you try the guide here which has specific instructions for running locally using DirectRunner ? https://beam.apache.org/documentation/sdks/java-multi-language-pipelines/","link":"https://stackoverflow.com/questions/75150047/execute-python-udfs-in-a-java-dataflow-pipeline#comment132691573_75150047","body":"You just need to have Docker installed.  Can you try the guide here which has specific instructions for running locally using DirectRunner ? <a href=\"https://beam.apache.org/documentation/sdks/java-multi-language-pipelines/\" rel=\"nofollow noreferrer\">beam.apache.org/documentation/sdks/&hellip;</a>"},{"score":0,"post_type":"question","creation_date":1674488552,"post_id":75150047,"comment_id":132719271,"body_markdown":"Yeah, I think I know what the issue is. I am not able to use Docker Desktop since we don&#39;t have a license. So I am using a workaround with Lima and Dockerd, so I think there&#39;s some miscommunication happening.\n\nI have established that I am able to run the Pipeline locally and its contacting the Python SDK in my venv. What seems to be happening is that it is not sending anything back to the Java pipeline. I&#39;ll update here if I am able to get things working","link":"https://stackoverflow.com/questions/75150047/execute-python-udfs-in-a-java-dataflow-pipeline#comment132719271_75150047","body":"Yeah, I think I know what the issue is. I am not able to use Docker Desktop since we don&#39;t have a license. So I am using a workaround with Lima and Dockerd, so I think there&#39;s some miscommunication happening.  I have established that I am able to run the Pipeline locally and its contacting the Python SDK in my venv. What seems to be happening is that it is not sending anything back to the Java pipeline. I&#39;ll update here if I am able to get things working"},{"score":0,"post_type":"question","creation_date":1674579283,"post_id":75150047,"comment_id":132742159,"body_markdown":"If this got resolved, appreciate if you can add an answer so that others who run into similar situations can benefit from it.","link":"https://stackoverflow.com/questions/75150047/execute-python-udfs-in-a-java-dataflow-pipeline#comment132742159_75150047","body":"If this got resolved, appreciate if you can add an answer so that others who run into similar situations can benefit from it."},{"score":0,"post_type":"question","creation_date":1674666445,"post_id":75150047,"comment_id":132764807,"body_markdown":"I will close the question, but I wasn&#39;t able to get things working locally. I did establish that the Java pipeline was communicating with the Beam SDK in the virtual environment, but it seemed like the Python code was not handing anything back.\n\nI do appreciate the help, @chamikara","link":"https://stackoverflow.com/questions/75150047/execute-python-udfs-in-a-java-dataflow-pipeline#comment132764807_75150047","body":"I will close the question, but I wasn&#39;t able to get things working locally. I did establish that the Java pipeline was communicating with the Beam SDK in the virtual environment, but it seemed like the Python code was not handing anything back.  I do appreciate the help, @chamikara"}],"comment_count":6,"is_answered":false,"view_count":259,"answer_count":0,"score":2,"last_activity_date":1702058975,"creation_date":1673976157,"last_edit_date":1702058975,"question_id":75150047,"body_markdown":"I am currently trying to add execution of Python UDFs in a Java Dataflow pipeline. These UDFs would potentially employ third-party libraries and multiple modules.\r\n\r\nI have been reading a lot about Apache Beam multi-language pipelines, but I am becoming less certain that is the way to achieve this. I&#39;ll first summarize my understanding of how multi-language pipelines are working (I&#39;m kind of hoping I&#39;m missing or misunderstanding something), before getting to my questions.\r\n\r\n# Beam Multi-language Pipelines\r\nThe main purpose of a multi-language pipeline is to execute *transforms* written in another language; in my case executing transforms in the Python Beam SDK in a pipeline using the Java Beam SDK. \r\n\r\nThe Python Beam SDK would be running in an expansion service, and any transforms, standard or custom, would be accessed through the URN (path to the module). I believe this expansion service can be containerized, but I can&#39;t find the documentation so I may be wrong on that.\r\n\r\nTherefore, if I want to execute arbitrary Python code, I would need to either find a high level transform capable of accepting and running arbitrary code, or write my own expansion service to handle executing the UDFs.\r\n\r\n\r\n# What I&#39;ve tried\r\nI have tried creating a simple WordCount pipeline in Java and running an expansion service locally in a Python virtual environment. I&#39;ve been using unit tests to pass in a file and output the word counts which works fine in just Java. \r\n\r\nHowever, I am having issues setting up the transforms like in the [Beam documentation here](https://beam.apache.org/documentation/programming-guide/#1312-creating-cross-language-python-transforms). I am not able to import PythonExternalTransform and call to a method running there, so I have not successfully executed a multi-language pipeline yet. \r\n\r\nFor my local pipeline I am using 2.34.0 for the Apache Beam dependencies. I&#39;ve tried up to version 2.43.0 but have not been able to get it to work.\r\n\r\n\r\n# Questions\r\n1. Are multi-language pipelines the best way to achieve executing Python UDFs in Dataflow? Would I need to write my own expansion service?\r\n2. If multi-language pipelines are not the best way, what other options are available to me, if any? Should I look further into creating a custom container image?","link":"https://stackoverflow.com/questions/75150047/execute-python-udfs-in-a-java-dataflow-pipeline","title":"Execute Python UDFs in a Java Dataflow Pipeline?","body":"<p>I am currently trying to add execution of Python UDFs in a Java Dataflow pipeline. These UDFs would potentially employ third-party libraries and multiple modules.</p>\n<p>I have been reading a lot about Apache Beam multi-language pipelines, but I am becoming less certain that is the way to achieve this. I'll first summarize my understanding of how multi-language pipelines are working (I'm kind of hoping I'm missing or misunderstanding something), before getting to my questions.</p>\n<h1>Beam Multi-language Pipelines</h1>\n<p>The main purpose of a multi-language pipeline is to execute <em>transforms</em> written in another language; in my case executing transforms in the Python Beam SDK in a pipeline using the Java Beam SDK.</p>\n<p>The Python Beam SDK would be running in an expansion service, and any transforms, standard or custom, would be accessed through the URN (path to the module). I believe this expansion service can be containerized, but I can't find the documentation so I may be wrong on that.</p>\n<p>Therefore, if I want to execute arbitrary Python code, I would need to either find a high level transform capable of accepting and running arbitrary code, or write my own expansion service to handle executing the UDFs.</p>\n<h1>What I've tried</h1>\n<p>I have tried creating a simple WordCount pipeline in Java and running an expansion service locally in a Python virtual environment. I've been using unit tests to pass in a file and output the word counts which works fine in just Java.</p>\n<p>However, I am having issues setting up the transforms like in the <a href=\"https://beam.apache.org/documentation/programming-guide/#1312-creating-cross-language-python-transforms\" rel=\"nofollow noreferrer\">Beam documentation here</a>. I am not able to import PythonExternalTransform and call to a method running there, so I have not successfully executed a multi-language pipeline yet.</p>\n<p>For my local pipeline I am using 2.34.0 for the Apache Beam dependencies. I've tried up to version 2.43.0 but have not been able to get it to work.</p>\n<h1>Questions</h1>\n<ol>\n<li>Are multi-language pipelines the best way to achieve executing Python UDFs in Dataflow? Would I need to write my own expansion service?</li>\n<li>If multi-language pipelines are not the best way, what other options are available to me, if any? Should I look further into creating a custom container image?</li>\n</ol>\n"},{"tags":["java","amazon-web-services","apache-nifi","amazon-timestream"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702054512,"creation_date":1702054512,"answer_id":77628104,"question_id":77365590,"body_markdown":"It turns out some AWS V2 files made their way into apache NIFI V1.23.2 before they had upgraded to nifi 2.0.0. These files caused conflicts with the V1 implementation throughout the rest of the code. I&#39;ve now upgraded to nifi 2.0.0-M1 and have been able to get it running.","link":"https://stackoverflow.com/questions/77365590/error-occurring-when-running-apache-nifi-processor-integration-test/77628104#77628104","title":"Error occurring when running apache nifi processor integration test","body":"<p>It turns out some AWS V2 files made their way into apache NIFI V1.23.2 before they had upgraded to nifi 2.0.0. These files caused conflicts with the V1 implementation throughout the rest of the code. I've now upgraded to nifi 2.0.0-M1 and have been able to get it running.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":37,"answer_count":1,"score":0,"last_activity_date":1702054512,"creation_date":1698311125,"question_id":77365590,"body_markdown":"I&#39;ve created a new apache NIFI processor for AWS Timestream, I know a timestream processor already exists but it does not currently support MultiMeasure values. As part of this I&#39;ve attempted to upgrade the nifi AWS processor structure to aws V2 API but I&#39;ve hit an issue that I believe to be an AWS version conflict (Although I could be wrong). I&#39;m hoping someone can assist me with this issue.\r\n\r\nThe error occurring is:\r\n\r\n```\r\njava.lang.IllegalArgumentException: Invalid option: software.amazon.awssdk.awscore.client.config.AwsClientOption@71168c46. Required value of type interface software.amazon.awssdk.identity.spi.IdentityProvider, but was class org.apache.nifi.processors.aws.credentials.provider.PropertiesCredentialsProvider.\r\n```\r\n\r\nThe integration test I&#39;m running is:\r\n\r\n```\r\n    private final String CREDENTIALS_FILE = System.getProperty(&quot;user.home&quot;) + &quot;/aws-credentials.properties&quot;;\r\n    private final String DB_NAME = &quot;example_db&quot;;\r\n    private final String TBL_NAME = &quot;example_tbl&quot;;\r\n    private final String REGION = Region.EU_WEST_1.id();\r\n\r\n    @Test\r\n    public void testSimplePut() throws IOException {\r\n        final TestRunner runner = TestRunners.newTestRunner(new PutTimestream());\r\n        runner.setProperty(PutTimestream.TBL_NAME, TBL_NAME);\r\n        runner.setProperty(PutTimestream.DB_NAME, DB_NAME);\r\n        runner.setProperty(PutTimestream.REGION, REGION);\r\n        runner.setProperty(PutTimestream.CREDENTIALS_FILE, CREDENTIALS_FILE);\r\n\r\n        final Map&lt;String, String&gt; attrs = new HashMap&lt;&gt;();\r\n        attrs.put(&quot;filename&quot;, &quot;timestream_valid.json&quot;);\r\n        runner.enqueue(Paths.get(&quot;src/test/resources/timestream_valid.json&quot;), attrs);\r\n        runner.run(1);\r\n\r\n        runner.assertAllFlowFilesTransferred(PutTimestream.REL_SUCCESS, 1);\r\n    }\r\n```\r\n\r\nThis is my AbstractTimestreamProcessor:\r\n\r\n```\r\npublic abstract class AbstractTimestreamProcessor extends AbstractAwsProcessor&lt;TimestreamWriteClient, TimestreamWriteClientBuilder&gt; {\r\n\t@Override\r\n\tprotected TimestreamWriteClientBuilder createClientBuilder(ProcessContext processContext) {\r\n\t\treturn TimestreamWriteClient.builder();\r\n\t}\r\n}\r\n```\r\n\r\nThen this is the PutTimestream processor:\r\n\r\n```\r\n@Tags( { &quot;amazon&quot;, &quot;aws&quot;, &quot;timestream&quot;, &quot;put&quot; } )\r\n@CapabilityDescription( &quot;AWS Timestream Put Processor.&quot; )\r\npublic class PutTimestream extends AbstractTimestreamProcessor {\r\n\r\n\tpublic static final PropertyDescriptor DB_NAME = new PropertyDescriptor.Builder()\r\n\t\t\t.name(&quot;Database Name&quot;)\r\n\t\t\t.displayName(&quot;Database Name&quot;)\r\n\t\t\t.description(&quot;Specifies the name of the Amazon Timestream Database&quot;)\r\n\t\t\t.required(true)\r\n\t\t\t.expressionLanguageSupported(ExpressionLanguageScope.FLOWFILE_ATTRIBUTES)\r\n\t\t\t.addValidator(StandardValidators.NON_EMPTY_VALIDATOR)\r\n\t\t\t.build();\r\n\tpublic static final PropertyDescriptor TBL_NAME = new PropertyDescriptor.Builder()\r\n\t\t\t.name(&quot;Table Name&quot;)\r\n\t\t\t.displayName(&quot;Table Name&quot;)\r\n\t\t\t.description(&quot;Specifies the name of the Amazon Timestream Table&quot;)\r\n\t\t\t.required(true)\r\n\t\t\t.expressionLanguageSupported(ExpressionLanguageScope.FLOWFILE_ATTRIBUTES)\r\n\t\t\t.addValidator(StandardValidators.NON_EMPTY_VALIDATOR)\r\n\t\t\t.build();\r\n\r\n//\tprivate Set&lt;Relationship&gt; relationships;\r\n\tWriteRecordsResponse writeRecordsResponse;\r\n\tMap&lt;String, String&gt; attributes;\r\n\r\n\tpublic static final List&lt;PropertyDescriptor&gt; properties = Collections\r\n\t\t\t.unmodifiableList(Arrays.asList(AWS_CREDENTIALS_PROVIDER_SERVICE, REGION, ACCESS_KEY, SECRET_KEY,\r\n\t\t\t\t\tCREDENTIALS_FILE, TIMEOUT, DB_NAME, TBL_NAME));\r\n\r\n\tprivate volatile List&lt;PropertyDescriptor&gt; userDefinedProperties = Collections.emptyList();\r\n\tprivate TimestreamRecordConverter timestreamRecordConverter;\r\n\t\r\n\t@Override\r\n\tprotected void init(ProcessorInitializationContext context) {\r\n\t\ttimestreamRecordConverter = new TimestreamRecordConverter(getLogger());\r\n\t}\r\n\r\n\t@Override\r\n\tprotected List&lt;PropertyDescriptor&gt; getSupportedPropertyDescriptors() {\r\n\t\treturn properties;\r\n\t}\r\n\r\n\tprivate Map&lt;String, String&gt; getAttributes(FlowFile flowFile, WriteRecordsResponse writeRecordsResponse) {\r\n\t\tattributes = new HashMap();\r\n\t\tattributes.putAll(flowFile.getAttributes());\r\n\t\tattributes.put(CoreAttributes.MIME_TYPE.key(), &quot;application/json&quot;);\r\n\t\tattributes.put(&quot;timestream.insert.status&quot;,\r\n\t\t\t\tString.valueOf(writeRecordsResponse.responseMetadata()));\r\n\t\treturn attributes;\r\n\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void onTrigger(ProcessContext context, ProcessSession session) throws ProcessException {\r\n\r\n\t\tFlowFile flowFile = session.get();\r\n\t\tif (flowFile == null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfinal long startNanos = System.nanoTime();\r\n\r\n\t\tString dbName = context.getProperty(DB_NAME).evaluateAttributeExpressions(flowFile).getValue();\r\n\t\tString tblName = context.getProperty(TBL_NAME).evaluateAttributeExpressions(flowFile).getValue();\r\n\r\n\t\tfinal List&lt;Record&gt; records;\r\n\t\ttry {\r\n\t\t\tfinal byte[] content = new byte[(int) flowFile.getSize()];\r\n\t\t\tsession.read(flowFile, in -&gt; StreamUtils.fillBuffer(in, content, true));\r\n\t\t\trecords = timestreamRecordConverter.convertJsonToTimestreamRecords(new String(content));\r\n\r\n\t\t\tWriteRecordsRequest writeRecordsRequest = WriteRecordsRequest.builder()\r\n\t\t\t\t\t.databaseName(dbName)\r\n\t\t\t\t\t.tableName(tblName)\r\n\t\t\t\t\t.records(records)\r\n\t\t\t\t\t.build();\r\n\r\n\t\t\twriteRecordsResponse = getClient(context).writeRecords(writeRecordsRequest);\r\n\t\t\tflowFile = session.putAllAttributes(flowFile, getAttributes(flowFile, writeRecordsResponse));\r\n\t\t\tsession.transfer(flowFile, REL_SUCCESS);\r\n\r\n\t\t\tlong transmissionMillis = java.util.concurrent.TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startNanos);\r\n\t\t\tsession.getProvenanceReporter().send(flowFile, tblName, transmissionMillis);\r\n\t\t} catch (Exception e) {\r\n\t\t\tStringWriter sw = new StringWriter();\r\n\t\t\te.printStackTrace(new PrintWriter(sw));\r\n\t\t\tgetLogger().info(&quot;Error processing timestream record. Check stacktrace &quot; + sw);\r\n\t\t\tsession.transfer(flowFile, REL_FAILURE);\r\n\t\t}\r\n\r\n\t}\r\n}\r\n```\r\n\r\nThe record gets processed successfully but when I call getClient it seems to fail on the line:\r\n\r\n```\r\nthis.finalizeChildConfiguration(configuration)\r\n```\r\n\r\nWhich is in the SdkDefaultClientBuilder class. Any help would be much appreaciated with this issue as there&#39;s very little resources to go off for this.\r\n\r\nThanks\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77365590/error-occurring-when-running-apache-nifi-processor-integration-test","title":"Error occurring when running apache nifi processor integration test","body":"<p>I've created a new apache NIFI processor for AWS Timestream, I know a timestream processor already exists but it does not currently support MultiMeasure values. As part of this I've attempted to upgrade the nifi AWS processor structure to aws V2 API but I've hit an issue that I believe to be an AWS version conflict (Although I could be wrong). I'm hoping someone can assist me with this issue.</p>\n<p>The error occurring is:</p>\n<pre><code>java.lang.IllegalArgumentException: Invalid option: software.amazon.awssdk.awscore.client.config.AwsClientOption@71168c46. Required value of type interface software.amazon.awssdk.identity.spi.IdentityProvider, but was class org.apache.nifi.processors.aws.credentials.provider.PropertiesCredentialsProvider.\n</code></pre>\n<p>The integration test I'm running is:</p>\n<pre><code>    private final String CREDENTIALS_FILE = System.getProperty(&quot;user.home&quot;) + &quot;/aws-credentials.properties&quot;;\n    private final String DB_NAME = &quot;example_db&quot;;\n    private final String TBL_NAME = &quot;example_tbl&quot;;\n    private final String REGION = Region.EU_WEST_1.id();\n\n    @Test\n    public void testSimplePut() throws IOException {\n        final TestRunner runner = TestRunners.newTestRunner(new PutTimestream());\n        runner.setProperty(PutTimestream.TBL_NAME, TBL_NAME);\n        runner.setProperty(PutTimestream.DB_NAME, DB_NAME);\n        runner.setProperty(PutTimestream.REGION, REGION);\n        runner.setProperty(PutTimestream.CREDENTIALS_FILE, CREDENTIALS_FILE);\n\n        final Map&lt;String, String&gt; attrs = new HashMap&lt;&gt;();\n        attrs.put(&quot;filename&quot;, &quot;timestream_valid.json&quot;);\n        runner.enqueue(Paths.get(&quot;src/test/resources/timestream_valid.json&quot;), attrs);\n        runner.run(1);\n\n        runner.assertAllFlowFilesTransferred(PutTimestream.REL_SUCCESS, 1);\n    }\n</code></pre>\n<p>This is my AbstractTimestreamProcessor:</p>\n<pre><code>public abstract class AbstractTimestreamProcessor extends AbstractAwsProcessor&lt;TimestreamWriteClient, TimestreamWriteClientBuilder&gt; {\n    @Override\n    protected TimestreamWriteClientBuilder createClientBuilder(ProcessContext processContext) {\n        return TimestreamWriteClient.builder();\n    }\n}\n</code></pre>\n<p>Then this is the PutTimestream processor:</p>\n<pre><code>@Tags( { &quot;amazon&quot;, &quot;aws&quot;, &quot;timestream&quot;, &quot;put&quot; } )\n@CapabilityDescription( &quot;AWS Timestream Put Processor.&quot; )\npublic class PutTimestream extends AbstractTimestreamProcessor {\n\n    public static final PropertyDescriptor DB_NAME = new PropertyDescriptor.Builder()\n            .name(&quot;Database Name&quot;)\n            .displayName(&quot;Database Name&quot;)\n            .description(&quot;Specifies the name of the Amazon Timestream Database&quot;)\n            .required(true)\n            .expressionLanguageSupported(ExpressionLanguageScope.FLOWFILE_ATTRIBUTES)\n            .addValidator(StandardValidators.NON_EMPTY_VALIDATOR)\n            .build();\n    public static final PropertyDescriptor TBL_NAME = new PropertyDescriptor.Builder()\n            .name(&quot;Table Name&quot;)\n            .displayName(&quot;Table Name&quot;)\n            .description(&quot;Specifies the name of the Amazon Timestream Table&quot;)\n            .required(true)\n            .expressionLanguageSupported(ExpressionLanguageScope.FLOWFILE_ATTRIBUTES)\n            .addValidator(StandardValidators.NON_EMPTY_VALIDATOR)\n            .build();\n\n//  private Set&lt;Relationship&gt; relationships;\n    WriteRecordsResponse writeRecordsResponse;\n    Map&lt;String, String&gt; attributes;\n\n    public static final List&lt;PropertyDescriptor&gt; properties = Collections\n            .unmodifiableList(Arrays.asList(AWS_CREDENTIALS_PROVIDER_SERVICE, REGION, ACCESS_KEY, SECRET_KEY,\n                    CREDENTIALS_FILE, TIMEOUT, DB_NAME, TBL_NAME));\n\n    private volatile List&lt;PropertyDescriptor&gt; userDefinedProperties = Collections.emptyList();\n    private TimestreamRecordConverter timestreamRecordConverter;\n    \n    @Override\n    protected void init(ProcessorInitializationContext context) {\n        timestreamRecordConverter = new TimestreamRecordConverter(getLogger());\n    }\n\n    @Override\n    protected List&lt;PropertyDescriptor&gt; getSupportedPropertyDescriptors() {\n        return properties;\n    }\n\n    private Map&lt;String, String&gt; getAttributes(FlowFile flowFile, WriteRecordsResponse writeRecordsResponse) {\n        attributes = new HashMap();\n        attributes.putAll(flowFile.getAttributes());\n        attributes.put(CoreAttributes.MIME_TYPE.key(), &quot;application/json&quot;);\n        attributes.put(&quot;timestream.insert.status&quot;,\n                String.valueOf(writeRecordsResponse.responseMetadata()));\n        return attributes;\n\n    }\n\n    @Override\n    public void onTrigger(ProcessContext context, ProcessSession session) throws ProcessException {\n\n        FlowFile flowFile = session.get();\n        if (flowFile == null) {\n            return;\n        }\n\n        final long startNanos = System.nanoTime();\n\n        String dbName = context.getProperty(DB_NAME).evaluateAttributeExpressions(flowFile).getValue();\n        String tblName = context.getProperty(TBL_NAME).evaluateAttributeExpressions(flowFile).getValue();\n\n        final List&lt;Record&gt; records;\n        try {\n            final byte[] content = new byte[(int) flowFile.getSize()];\n            session.read(flowFile, in -&gt; StreamUtils.fillBuffer(in, content, true));\n            records = timestreamRecordConverter.convertJsonToTimestreamRecords(new String(content));\n\n            WriteRecordsRequest writeRecordsRequest = WriteRecordsRequest.builder()\n                    .databaseName(dbName)\n                    .tableName(tblName)\n                    .records(records)\n                    .build();\n\n            writeRecordsResponse = getClient(context).writeRecords(writeRecordsRequest);\n            flowFile = session.putAllAttributes(flowFile, getAttributes(flowFile, writeRecordsResponse));\n            session.transfer(flowFile, REL_SUCCESS);\n\n            long transmissionMillis = java.util.concurrent.TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startNanos);\n            session.getProvenanceReporter().send(flowFile, tblName, transmissionMillis);\n        } catch (Exception e) {\n            StringWriter sw = new StringWriter();\n            e.printStackTrace(new PrintWriter(sw));\n            getLogger().info(&quot;Error processing timestream record. Check stacktrace &quot; + sw);\n            session.transfer(flowFile, REL_FAILURE);\n        }\n\n    }\n}\n</code></pre>\n<p>The record gets processed successfully but when I call getClient it seems to fail on the line:</p>\n<pre><code>this.finalizeChildConfiguration(configuration)\n</code></pre>\n<p>Which is in the SdkDefaultClientBuilder class. Any help would be much appreaciated with this issue as there's very little resources to go off for this.</p>\n<p>Thanks</p>\n"},{"tags":["java"],"comments":[{"score":2,"post_type":"question","creation_date":1700252216,"post_id":77504359,"comment_id":136635953,"body_markdown":"`cityCollection = cityHashMap.values();`  That collection belongs to cityHashMap.  You can read it, and you can delete from it, but you cannot directly add to it.  (How would the Map be affected, if that were allowed?  To which key would the new values correspond?)","link":"https://stackoverflow.com/questions/77504359/how-can-i-sort-a-collection-of-objects-by-ascending-localtime#comment136635953_77504359","body":"<code>cityCollection = cityHashMap.values();</code>  That collection belongs to cityHashMap.  You can read it, and you can delete from it, but you cannot directly add to it.  (How would the Map be affected, if that were allowed?  To which key would the new values correspond?)"},{"score":2,"post_type":"question","creation_date":1700252237,"post_id":77504359,"comment_id":136635958,"body_markdown":"What is the goal you are trying to accomplish? Why are you trying to sort the values inside the map? A map &quot;usually&quot; don&#39;t have an ordering. Please [edit] your question to include a more detailed description what you are trying to do.","link":"https://stackoverflow.com/questions/77504359/how-can-i-sort-a-collection-of-objects-by-ascending-localtime#comment136635958_77504359","body":"What is the goal you are trying to accomplish? Why are you trying to sort the values inside the map? A map &quot;usually&quot; don&#39;t have an ordering. Please <a href=\"https://stackoverflow.com/posts/77504359/edit\">edit</a> your question to include a more detailed description what you are trying to do."},{"score":0,"post_type":"question","creation_date":1700253299,"post_id":77504359,"comment_id":136636145,"body_markdown":"@VGR ah i understand, thank you, fixed it by using an ArrayList and creating a method that updates the List with the current values in the Map. Thanks again, didnt think about the &quot;Collection belongs to Map&quot; part.","link":"https://stackoverflow.com/questions/77504359/how-can-i-sort-a-collection-of-objects-by-ascending-localtime#comment136636145_77504359","body":"@VGR ah i understand, thank you, fixed it by using an ArrayList and creating a method that updates the List with the current values in the Map. Thanks again, didnt think about the &quot;Collection belongs to Map&quot; part."},{"score":0,"post_type":"question","creation_date":1700253511,"post_id":77504359,"comment_id":136636173,"body_markdown":"If the issue was resolved without receiving an answer, consider deleting t he q uestion.","link":"https://stackoverflow.com/questions/77504359/how-can-i-sort-a-collection-of-objects-by-ascending-localtime#comment136636173_77504359","body":"If the issue was resolved without receiving an answer, consider deleting t he q uestion."}],"answers":[{"comments":[{"score":1,"post_type":"answer","creation_date":1700258724,"post_id":77504532,"comment_id":136636781,"body_markdown":"And In Java 21, we can more descriptively declare the result as a [sequenced collection](https://openjdk.org/jeps/431): `SequencedCollection&lt;City&gt; sorted = `.","link":"https://stackoverflow.com/questions/77504359/how-can-i-sort-a-collection-of-objects-by-ascending-localtime/77504532#comment136636781_77504532","body":"And In Java 21, we can more descriptively declare the result as a <a href=\"https://openjdk.org/jeps/431\" rel=\"nofollow noreferrer\">sequenced collection</a>: <code>SequencedCollection&lt;City&gt; sorted = </code>."}],"comment_count":1,"score":1,"last_activity_date":1700260622,"last_edit_date":1700260622,"creation_date":1700253846,"answer_id":77504532,"question_id":77504359,"body_markdown":"# Stream\r\n\r\nIf you want to use a Comparator you don&#39;t realy need either your method `sortByDepartureTime` nor your class `CityComparator`. Just stream over the values and create a new collection to store the sorted cities:\r\n\r\n    private final HashMap&lt;Integer, City&gt; cityHashMap = new HashMap&lt;&gt;();\r\n\r\n    ....\r\n\r\n    Collection&lt;City&gt; sorted = cityHashMap.values()\r\n                                         .stream()\r\n                                         .sorted(Comparator.comparing(City::getCurrentTime))\r\n                                         .collect(Collectors.toList());\r\n\r\nuse reversed if you want to sort in reverse order\r\n\r\n    Collection&lt;City&gt; sorted = cityHashMap.values()\r\n                                         .stream()\r\n                                         .sorted(Comparator.comparing(City::getCurrentTime).reversed())\r\n                                         .collect(Collectors.toList());","link":"https://stackoverflow.com/questions/77504359/how-can-i-sort-a-collection-of-objects-by-ascending-localtime/77504532#77504532","title":"How can i sort a Collection of objects by ascending LocalTime?","body":"<h1>Stream</h1>\n<p>If you want to use a Comparator you don't realy need either your method <code>sortByDepartureTime</code> nor your class <code>CityComparator</code>. Just stream over the values and create a new collection to store the sorted cities:</p>\n<pre><code>private final HashMap&lt;Integer, City&gt; cityHashMap = new HashMap&lt;&gt;();\n\n....\n\nCollection&lt;City&gt; sorted = cityHashMap.values()\n                                     .stream()\n                                     .sorted(Comparator.comparing(City::getCurrentTime))\n                                     .collect(Collectors.toList());\n</code></pre>\n<p>use reversed if you want to sort in reverse order</p>\n<pre><code>Collection&lt;City&gt; sorted = cityHashMap.values()\n                                     .stream()\n                                     .sorted(Comparator.comparing(City::getCurrentTime).reversed())\n                                     .collect(Collectors.toList());\n</code></pre>\n"},{"comment_count":0,"score":1,"last_activity_date":1702054318,"last_edit_date":1702054318,"creation_date":1700260220,"answer_id":77504928,"question_id":77504359,"body_markdown":"The [Answer by Eritrean][1] would be my preferred solution, using a stream. But if you are not yet comfortable with streams, below is the older sort of approach.\r\n\r\n## Dont mess with maps collected values\r\n\r\nIn your code:\r\n\r\n    cityCollection.clear();\r\n    cityCollection.addAll( sortedList );\r\n\r\n `cityCollection` represents the values inside the map. That collection returned by `Map#values` is meant to be read but not written. \r\n\r\nInstead, copy that elements of that collection to another collection. You did so correctly in this line:\r\n\r\n    List&lt;City&gt; sortedList = new ArrayList&lt;&gt;( cityCollection );\r\n\r\nYou are then at liberty to manipulate that new `List`. \r\n\r\n## `List#sort` with a `Comparator`\r\n\r\nAs explained by Eritrean, you can define a `Comparator` separate from your `City` class. \r\n\r\nLet&#39;s define a [record][2] as the `City` class for our example.\r\n\r\n```java\r\nrecord City( String name , LocalTime localTime ) { }\r\n```\r\n\r\nMake some sample data.\r\n\r\n```java\r\nMap &lt; Integer, City &gt; map =\r\n        Map.of (\r\n                11 , new City ( &quot;Munich&quot; , LocalTime.parse ( &quot;23:00&quot; ) ) ,\r\n                22 , new City ( &quot;New York&quot; , LocalTime.parse ( &quot;07:00&quot; ) ) ,\r\n                33 , new City ( &quot;Paris&quot; , LocalTime.parse ( &quot;19:00&quot; ) ) ,\r\n                44 , new City ( &quot;London&quot; , LocalTime.parse ( &quot;13:00&quot; ) )\r\n        );\r\n```\r\n\r\nExtract a collection of the values from that map, just the `City` objects, by calling [`Map#values`][3]. Pass that collection to the constructor of an `ArrayList`, a collection type we know we can sort.\r\n\r\n```java\r\nList &lt; City &gt; sorted = new ArrayList &lt;&gt; ( map.values ( ) );\r\n```\r\n\r\nNow we can perform the sort. \r\n\r\nPass a [method reference][4] (`City :: localTime`) to the convenience method [`Comparator.comparing`][5] to produce a [`Comparator`][6] object. \r\n\r\n    Comparator.comparing ( City :: localTime )\r\n\r\nThis comparator works because the [`LocalTime`][7] class implements [`Comparable`][8]. The `LocalTime` objects carry a [`compareTo`][9] method to be using in sorting.\r\n\r\nIn turn we pass that `Comparator` object to the [`List#sort`][10] method.\r\n\r\n```java\r\nsorted.sort ( Comparator.comparing ( City :: localTime ) );\r\n```\r\n\r\nDump to console.\r\n\r\n```java\r\nSystem.out.println ( &quot;sorted.toString() = &quot; + sorted );\r\n```\r\n\r\nIn the result, we see they came out in [the correct order][11].\r\n\r\n&gt;sorted.toString() = [City[name=New York, localTime=07:00], City[name=London, localTime=13:00], City[name=Paris, localTime=19:00], City[name=Munich, localTime=23:00]]\r\n\r\nIf returning the result from a method, generally best to (a) return an [unmodifiable][12] collection, and (b) declare the return type as the more general type [`SequencedCollection`][13] (in Java 21+).  \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77504532/642706\r\n  [2]: https://openjdk.org/jeps/395\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html#values()\r\n  [4]: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\r\n  [5]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html#comparing(java.util.function.Function)\r\n  [6]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html\r\n  [7]: https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/time/LocalTime.html\r\n  [8]: https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/lang/Comparable.html\r\n  [9]: https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/time/LocalTime.html#compareTo(java.time.LocalTime)\r\n  [10]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#sort(java.util.Comparator)\r\n  [11]: https://en.wikipedia.org/wiki/New_York%E2%80%93London%E2%80%93Paris%E2%80%93Munich\r\n  [12]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#unmodifiable\r\n  [13]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html","link":"https://stackoverflow.com/questions/77504359/how-can-i-sort-a-collection-of-objects-by-ascending-localtime/77504928#77504928","title":"How can i sort a Collection of objects by ascending LocalTime?","body":"<p>The <a href=\"https://stackoverflow.com/a/77504532/642706\">Answer by Eritrean</a> would be my preferred solution, using a stream. But if you are not yet comfortable with streams, below is the older sort of approach.</p>\n<h2>Dont mess with maps collected values</h2>\n<p>In your code:</p>\n<pre><code>cityCollection.clear();\ncityCollection.addAll( sortedList );\n</code></pre>\n<p> <code>cityCollection</code> represents the values inside the map. That collection returned by <code>Map#values</code> is meant to be read but not written.</p>\n<p>Instead, copy that elements of that collection to another collection. You did so correctly in this line:</p>\n<pre><code>List&lt;City&gt; sortedList = new ArrayList&lt;&gt;( cityCollection );\n</code></pre>\n<p>You are then at liberty to manipulate that new <code>List</code>.</p>\n<h2><code>List#sort</code> with a <code>Comparator</code></h2>\n<p>As explained by Eritrean, you can define a <code>Comparator</code> separate from your <code>City</code> class.</p>\n<p>Let's define a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a> as the <code>City</code> class for our example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>record City( String name , LocalTime localTime ) { }\n</code></pre>\n<p>Make some sample data.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map &lt; Integer, City &gt; map =\n        Map.of (\n                11 , new City ( &quot;Munich&quot; , LocalTime.parse ( &quot;23:00&quot; ) ) ,\n                22 , new City ( &quot;New York&quot; , LocalTime.parse ( &quot;07:00&quot; ) ) ,\n                33 , new City ( &quot;Paris&quot; , LocalTime.parse ( &quot;19:00&quot; ) ) ,\n                44 , new City ( &quot;London&quot; , LocalTime.parse ( &quot;13:00&quot; ) )\n        );\n</code></pre>\n<p>Extract a collection of the values from that map, just the <code>City</code> objects, by calling <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html#values()\" rel=\"nofollow noreferrer\"><code>Map#values</code></a>. Pass that collection to the constructor of an <code>ArrayList</code>, a collection type we know we can sort.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List &lt; City &gt; sorted = new ArrayList &lt;&gt; ( map.values ( ) );\n</code></pre>\n<p>Now we can perform the sort.</p>\n<p>Pass a <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">method reference</a> (<code>City :: localTime</code>) to the convenience method <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html#comparing(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>Comparator.comparing</code></a> to produce a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html\" rel=\"nofollow noreferrer\"><code>Comparator</code></a> object.</p>\n<pre><code>Comparator.comparing ( City :: localTime )\n</code></pre>\n<p>This comparator works because the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/time/LocalTime.html\" rel=\"nofollow noreferrer\"><code>LocalTime</code></a> class implements <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/lang/Comparable.html\" rel=\"nofollow noreferrer\"><code>Comparable</code></a>. The <code>LocalTime</code> objects carry a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api//java.base/java/time/LocalTime.html#compareTo(java.time.LocalTime)\" rel=\"nofollow noreferrer\"><code>compareTo</code></a> method to be using in sorting.</p>\n<p>In turn we pass that <code>Comparator</code> object to the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#sort(java.util.Comparator)\" rel=\"nofollow noreferrer\"><code>List#sort</code></a> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>sorted.sort ( Comparator.comparing ( City :: localTime ) );\n</code></pre>\n<p>Dump to console.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println ( &quot;sorted.toString() = &quot; + sorted );\n</code></pre>\n<p>In the result, we see they came out in <a href=\"https://en.wikipedia.org/wiki/New_York%E2%80%93London%E2%80%93Paris%E2%80%93Munich\" rel=\"nofollow noreferrer\">the correct order</a>.</p>\n<blockquote>\n<p>sorted.toString() = [City[name=New York, localTime=07:00], City[name=London, localTime=13:00], City[name=Paris, localTime=19:00], City[name=Munich, localTime=23:00]]</p>\n</blockquote>\n<p>If returning the result from a method, generally best to (a) return an <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html#unmodifiable\" rel=\"nofollow noreferrer\">unmodifiable</a> collection, and (b) declare the return type as the more general type <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/SequencedCollection.html\" rel=\"nofollow noreferrer\"><code>SequencedCollection</code></a> (in Java 21+).</p>\n"}],"comment_count":4,"is_answered":true,"view_count":70,"answer_count":2,"score":0,"last_activity_date":1702054318,"creation_date":1700251504,"question_id":77504359,"body_markdown":"Currently i am trying to do it using a comparator, the &quot;getCurrentTime()&quot; method return a LocalTime. \r\n```\r\n  private final HashMap&lt;Integer, City&gt; cityHashMap = new HashMap&lt;&gt;();\r\n  private final Collection&lt;City&gt; cityCollection = cityHashMap.values();\r\n\r\n\r\n  public void sortByDepartureTime() {\r\n    List&lt;City&gt; sortedList = new ArrayList&lt;&gt;(cityCollection);\r\n    sortedList.sort(new CityComparator());\r\n\r\n    cityCollection.clear();\r\n    cityCollection.addAll(sortedList);\r\n  }\r\n\r\n\r\n  public static class CityComparator implements Comparator&lt;City&gt; {\r\n    @Override\r\n    public int compare(City o1, City o2) {\r\n      return o1.getCurrentTime().compareTo(o2.getCurrentTime());\r\n    }\r\n  }\r\n```\r\n\r\n\r\n I am getting a\r\n &gt;Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException\r\n\r\ncityCollection.addAll(sortedList);\r\n\r\nI tried using an ArrayList instead of the Collection, but that raised the issue of the ArrayList not being up to date with the HashMap values.","link":"https://stackoverflow.com/questions/77504359/how-can-i-sort-a-collection-of-objects-by-ascending-localtime","title":"How can i sort a Collection of objects by ascending LocalTime?","body":"<p>Currently i am trying to do it using a comparator, the &quot;getCurrentTime()&quot; method return a LocalTime.</p>\n<pre><code>  private final HashMap&lt;Integer, City&gt; cityHashMap = new HashMap&lt;&gt;();\n  private final Collection&lt;City&gt; cityCollection = cityHashMap.values();\n\n\n  public void sortByDepartureTime() {\n    List&lt;City&gt; sortedList = new ArrayList&lt;&gt;(cityCollection);\n    sortedList.sort(new CityComparator());\n\n    cityCollection.clear();\n    cityCollection.addAll(sortedList);\n  }\n\n\n  public static class CityComparator implements Comparator&lt;City&gt; {\n    @Override\n    public int compare(City o1, City o2) {\n      return o1.getCurrentTime().compareTo(o2.getCurrentTime());\n    }\n  }\n</code></pre>\n<p>I am getting a</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException</p>\n</blockquote>\n<p>cityCollection.addAll(sortedList);</p>\n<p>I tried using an ArrayList instead of the Collection, but that raised the issue of the ArrayList not being up to date with the HashMap values.</p>\n"},{"tags":["java","3d","window","lwjgl"],"answers":[{"comment_count":0,"score":1,"last_activity_date":1702043429,"creation_date":1702043429,"answer_id":77627042,"question_id":77513619,"body_markdown":"If I understood the question correctly, creating a simple window looks like this..\r\n```java\r\n        glfwInit();\r\n        long glfwWindow = glfwCreateWindow(width, height, &quot;Window title&quot;, glfwGetPrimaryMonitor(), MemoryUtil.NULL);\r\n\r\n        glfwWindowHint(GLFW_RESIZABLE, GLFW_FALSE);\r\n        glfwMakeContextCurrent(glfwWindow);\r\n\r\n        //vsync: 1 on / 0 off\r\n        glfwSwapInterval(1);\r\n        //display settings\r\n        glfwShowWindow(glfwWindow);\r\n        //connects library tools\r\n        GL.createCapabilities();\r\n\r\n        //camera\r\n        glMatrixMode(GL_PROJECTION);\r\n        glOrtho(0, width, 0, height, 1, -1);\r\n        glMatrixMode(GL_MODELVIEW);\r\n\r\n        glClearColor(206f / 255f, 246f / 255f, 1.0f, 1.0f);\r\n        while (!glfwWindowShouldClose(glfwWindow)) {\r\n            //all draw here\r\n\r\n            glfwSwapBuffers(glfwWindow);\r\n            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\r\n            glfwPollEvents();\r\n        }\r\n```","link":"https://stackoverflow.com/questions/77513619/java-lwjgl-window/77627042#77627042","title":"Java (LWJGL) Window","body":"<p>If I understood the question correctly, creating a simple window looks like this..</p>\n<pre class=\"lang-java prettyprint-override\"><code>        glfwInit();\n        long glfwWindow = glfwCreateWindow(width, height, &quot;Window title&quot;, glfwGetPrimaryMonitor(), MemoryUtil.NULL);\n\n        glfwWindowHint(GLFW_RESIZABLE, GLFW_FALSE);\n        glfwMakeContextCurrent(glfwWindow);\n\n        //vsync: 1 on / 0 off\n        glfwSwapInterval(1);\n        //display settings\n        glfwShowWindow(glfwWindow);\n        //connects library tools\n        GL.createCapabilities();\n\n        //camera\n        glMatrixMode(GL_PROJECTION);\n        glOrtho(0, width, 0, height, 1, -1);\n        glMatrixMode(GL_MODELVIEW);\n\n        glClearColor(206f / 255f, 246f / 255f, 1.0f, 1.0f);\n        while (!glfwWindowShouldClose(glfwWindow)) {\n            //all draw here\n\n            glfwSwapBuffers(glfwWindow);\n            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n            glfwPollEvents();\n        }\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":37,"answer_count":1,"score":0,"last_activity_date":1702043429,"creation_date":1700456891,"question_id":77513619,"body_markdown":"I am currently trying to figure out make to make window for a java game (with lwjgl 3.3.3). Most of the tutorials I have come across are very outdated so some help (along with some slight explanations as I am newer to java) would be very appreciated.\r\n\r\nI have tried multiple tutorials but all of them are outdated so if you can help me or give a good tutorial I&#39;d appreciate it.","link":"https://stackoverflow.com/questions/77513619/java-lwjgl-window","title":"Java (LWJGL) Window","body":"<p>I am currently trying to figure out make to make window for a java game (with lwjgl 3.3.3). Most of the tutorials I have come across are very outdated so some help (along with some slight explanations as I am newer to java) would be very appreciated.</p>\n<p>I have tried multiple tutorials but all of them are outdated so if you can help me or give a good tutorial I'd appreciate it.</p>\n"},{"tags":["java","floating-point","java-17","strictfp"],"comments":[{"score":2,"post_type":"question","creation_date":1689235156,"post_id":76674101,"comment_id":135185303,"body_markdown":"What are your examples?","link":"https://stackoverflow.com/questions/76674101/is-there-still-a-difference-between-math-and-strictmath-after-java-17-and-jep-30#comment135185303_76674101","body":"What are your examples?"},{"score":0,"post_type":"question","creation_date":1689264972,"post_id":76674101,"comment_id":135192397,"body_markdown":"+1, I appreciate that @DuncG, but will not be able to answer right away.  I&#39;ll need to dig some to find sub-calculations where differences are coming up in a complex application.  I&#39;d even need to bring in another team member because I only have access to intel at the moment.  We do see consistent differences in end results, though.","link":"https://stackoverflow.com/questions/76674101/is-there-still-a-difference-between-math-and-strictmath-after-java-17-and-jep-30#comment135192397_76674101","body":"+1, I appreciate that @DuncG, but will not be able to answer right away.  I&#39;ll need to dig some to find sub-calculations where differences are coming up in a complex application.  I&#39;d even need to bring in another team member because I only have access to intel at the moment.  We do see consistent differences in end results, though."},{"score":5,"post_type":"question","creation_date":1689318221,"post_id":76674101,"comment_id":135199187,"body_markdown":"Being strict and using intrinsics (i.e. dedicated FPU instructions) is not a contradiction. Its all about not using the old x87 FPU but SSE2 which has been introduced 2 decades ago. In case of `java.lang.Math` and the reference implementation, this is the case [since Java&#160;15](https://bugs.openjdk.org/browse/JDK-7175279). This applies to the HotSpot JVM and all implementations building on it or following suit. But as long as [the specification](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html) says that differences are allowed, you have to be prepared for them","link":"https://stackoverflow.com/questions/76674101/is-there-still-a-difference-between-math-and-strictmath-after-java-17-and-jep-30#comment135199187_76674101","body":"Being strict and using intrinsics (i.e. dedicated FPU instructions) is not a contradiction. Its all about not using the old x87 FPU but SSE2 which has been introduced 2 decades ago. In case of <code>java.lang.Math</code> and the reference implementation, this is the case <a href=\"https://bugs.openjdk.org/browse/JDK-7175279\" rel=\"nofollow noreferrer\">since Java 15</a>. This applies to the HotSpot JVM and all implementations building on it or following suit. But as long as <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Math.html\" rel=\"nofollow noreferrer\">the specification</a> says that differences are allowed, you have to be prepared for them"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1702242072,"post_id":77625516,"comment_id":136869494,"body_markdown":"Thanks!  Replying to the very last line, we **are** getting different results in low-order bits of calculation results, not just different code generation.  One hypothesis we&#39;ve come up with is that a library in use may be in a jar that was compiled pre-java17, but we haven&#39;t been able to figure out if that&#39;s what&#39;s happening.  Small expressions we&#39;ve tried have all given same results across architectures, so we don&#39;t have a reproducible case (MCVE) outside of cases going end-to-end in our application.","link":"https://stackoverflow.com/questions/76674101/is-there-still-a-difference-between-math-and-strictmath-after-java-17-and-jep-30/77625516#comment136869494_77625516","body":"Thanks!  Replying to the very last line, we <b>are</b> getting different results in low-order bits of calculation results, not just different code generation.  One hypothesis we&#39;ve come up with is that a library in use may be in a jar that was compiled pre-java17, but we haven&#39;t been able to figure out if that&#39;s what&#39;s happening.  Small expressions we&#39;ve tried have all given same results across architectures, so we don&#39;t have a reproducible case (MCVE) outside of cases going end-to-end in our application."},{"score":0,"post_type":"answer","creation_date":1702477142,"post_id":77625516,"comment_id":136901174,"body_markdown":"@JoshuaGoldberg one more question: are the calculation results are NaNs or some &#39;real&#39; values?","link":"https://stackoverflow.com/questions/76674101/is-there-still-a-difference-between-math-and-strictmath-after-java-17-and-jep-30/77625516#comment136901174_77625516","body":"@JoshuaGoldberg one more question: are the calculation results are NaNs or some &#39;real&#39; values?"},{"score":1,"post_type":"answer","creation_date":1702566249,"post_id":77625516,"comment_id":136913782,"body_markdown":"real values, no NaN&#39;s involved.","link":"https://stackoverflow.com/questions/76674101/is-there-still-a-difference-between-math-and-strictmath-after-java-17-and-jep-30/77625516#comment136913782_77625516","body":"real values, no NaN&#39;s involved."}],"comment_count":3,"score":2,"last_activity_date":1702037860,"last_edit_date":1702037860,"creation_date":1702026914,"answer_id":77625516,"question_id":76674101,"body_markdown":"First of all, `strictfp` is not a flag, this is a Java keyword ensuring the same calculation results on every platform while doing operations over floating-point variables (`float` and `double`).\r\n\r\nAs of your question, there are two major PRs in OpenJDK involving the changes for JEP 306\r\n- [8244146: javac changes for JEP 306][1]\r\n- [8266530: HotSpot changes for JEP 306][2]\r\n\r\nIf you look into the first one, especially into [StrictMath][3] you&#39;ll see that it now delegates directly to `j.l.Math` and the comment about `strictfp` semantics is now removed (along with `strictfp` keyword in OpenJDK codebase).\r\nMoreover, starting from Java 17 `javac` issues an explicit warning for `strictfp` keyword (see `compiler.properties`:\r\n\r\n&gt; as of release 17, **all floating-point expressions are evaluated strictly** and `strictfp` is not required\r\n\r\nSo for the question\r\n&gt; Does this mean that java.lang.Math can be counted on to behave exactly the same as the analogous methods in StrictMath\r\n\r\nThe answer is &quot;yes&quot;, for some methods e.g. `Math.sinh(double)` delegate to `StrictMath.sinh(double)` (and later on to `FdLibm.Sinh.compute(dobule)`) and e.g. method `StrictMath.toRadians(double)` delegates to `Math.toRadians(double)`. Eventually for floating-point variables it does not matter whether you call a method of `Math` or `StrictMath`, the same code is executed under the hood.\r\n\r\nAs of this part of the same question:\r\n&gt; i.e., that java.lang.Math methods can no longer be replaced by the JVM with intrinsics as used to be allowed\r\n\r\nThe PRs does not impose any changes regarding intrinsics which are platform-specific and applied by JVM at runtime regardless of whether operation is strict or not. Moreover, as [@Holger][4] pointed out, there is no contradiction between strictness and intrinsics.\r\n\r\n&gt; Does it also mean that there should no longer be any differences in floating point math results among different architectures, no matter which library is used?\r\n\r\nThe answer is &quot;yes as of Java 17 or newer&quot;. Prior to it there could be difference in results, see https://stackoverflow.com/a/22335100/12473843. Before Java 17 if an operation over floating-point variable was not strict the standard assumed that\r\n&gt; a calculation might produce &quot;the correct answer&quot; in situations where exclusive use of the float value set or double value set might result in overflow or underflow.\r\nBut as soon as for now the semantics is always strict you get the same result on all platforms.\r\n\r\nSee also [8268224: Cleanup references to &quot;strictfp&quot; in core lib comments][5]\r\n\r\nP.S.\r\n&gt; we do see differences in today&#39;s code between Apple Silicon vs Intel\r\n\r\nI think it&#39;s quite natural for compiler to produce different code for different platforms, the question here is whether you see different results of computations on mentioned platforms.\r\n\r\n\r\n  [1]: https://github.com/openjdk/jdk/pull/3831\r\n  [2]: https://github.com/openjdk/jdk/pull/3891\r\n  [3]: https://github.com/openjdk/jdk/pull/3831/files#diff-a854e2217535f706e7a7cb2f4ecd3b52c4244d6ddac32ea67b40d65d9e2a0658L210-L231\r\n  [4]: https://stackoverflow.com/users/2711488/holger\r\n  [5]: https://github.com/openjdk/jdk/pull/4348","link":"https://stackoverflow.com/questions/76674101/is-there-still-a-difference-between-math-and-strictmath-after-java-17-and-jep-30/77625516#77625516","title":"Is there still a difference between Math and StrictMath after Java 17 and JEP 306?","body":"<p>First of all, <code>strictfp</code> is not a flag, this is a Java keyword ensuring the same calculation results on every platform while doing operations over floating-point variables (<code>float</code> and <code>double</code>).</p>\n<p>As of your question, there are two major PRs in OpenJDK involving the changes for JEP 306</p>\n<ul>\n<li><a href=\"https://github.com/openjdk/jdk/pull/3831\" rel=\"nofollow noreferrer\">8244146: javac changes for JEP 306</a></li>\n<li><a href=\"https://github.com/openjdk/jdk/pull/3891\" rel=\"nofollow noreferrer\">8266530: HotSpot changes for JEP 306</a></li>\n</ul>\n<p>If you look into the first one, especially into <a href=\"https://github.com/openjdk/jdk/pull/3831/files#diff-a854e2217535f706e7a7cb2f4ecd3b52c4244d6ddac32ea67b40d65d9e2a0658L210-L231\" rel=\"nofollow noreferrer\">StrictMath</a> you'll see that it now delegates directly to <code>j.l.Math</code> and the comment about <code>strictfp</code> semantics is now removed (along with <code>strictfp</code> keyword in OpenJDK codebase).\nMoreover, starting from Java 17 <code>javac</code> issues an explicit warning for <code>strictfp</code> keyword (see <code>compiler.properties</code>:</p>\n<blockquote>\n<p>as of release 17, <strong>all floating-point expressions are evaluated strictly</strong> and <code>strictfp</code> is not required</p>\n</blockquote>\n<p>So for the question</p>\n<blockquote>\n<p>Does this mean that java.lang.Math can be counted on to behave exactly the same as the analogous methods in StrictMath</p>\n</blockquote>\n<p>The answer is &quot;yes&quot;, for some methods e.g. <code>Math.sinh(double)</code> delegate to <code>StrictMath.sinh(double)</code> (and later on to <code>FdLibm.Sinh.compute(dobule)</code>) and e.g. method <code>StrictMath.toRadians(double)</code> delegates to <code>Math.toRadians(double)</code>. Eventually for floating-point variables it does not matter whether you call a method of <code>Math</code> or <code>StrictMath</code>, the same code is executed under the hood.</p>\n<p>As of this part of the same question:</p>\n<blockquote>\n<p>i.e., that java.lang.Math methods can no longer be replaced by the JVM with intrinsics as used to be allowed</p>\n</blockquote>\n<p>The PRs does not impose any changes regarding intrinsics which are platform-specific and applied by JVM at runtime regardless of whether operation is strict or not. Moreover, as <a href=\"https://stackoverflow.com/users/2711488/holger\">@Holger</a> pointed out, there is no contradiction between strictness and intrinsics.</p>\n<blockquote>\n<p>Does it also mean that there should no longer be any differences in floating point math results among different architectures, no matter which library is used?</p>\n</blockquote>\n<p>The answer is &quot;yes as of Java 17 or newer&quot;. Prior to it there could be difference in results, see <a href=\"https://stackoverflow.com/a/22335100/12473843\">https://stackoverflow.com/a/22335100/12473843</a>. Before Java 17 if an operation over floating-point variable was not strict the standard assumed that</p>\n<blockquote>\n<p>a calculation might produce &quot;the correct answer&quot; in situations where exclusive use of the float value set or double value set might result in overflow or underflow.\nBut as soon as for now the semantics is always strict you get the same result on all platforms.</p>\n</blockquote>\n<p>See also <a href=\"https://github.com/openjdk/jdk/pull/4348\" rel=\"nofollow noreferrer\">8268224: Cleanup references to &quot;strictfp&quot; in core lib comments</a></p>\n<p>P.S.</p>\n<blockquote>\n<p>we do see differences in today's code between Apple Silicon vs Intel</p>\n</blockquote>\n<p>I think it's quite natural for compiler to produce different code for different platforms, the question here is whether you see different results of computations on mentioned platforms.</p>\n"}],"comment_count":3,"is_answered":true,"view_count":200,"answer_count":1,"score":6,"last_activity_date":1702037860,"creation_date":1689192188,"last_edit_date":1702023595,"question_id":76674101,"body_markdown":"[JEP 306][1], implemented in Java 17, provides always-strict floating point semantics, deprecating the `strictfp` flag.  Does this mean that `java.lang.Math` can be counted on to behave exactly the same as the analogous methods in `StrictMath` (i.e., that `java.lang.Math` methods can no longer be replaced by the JVM with intrinsics as used to be allowed)?  Does it also mean that there should no longer be any differences in floating point math results among different architectures, no matter which library is used?\r\n\r\nI&#39;m curious if I&#39;m misunderstanding the new Java 17 feature, since we do see differences in today&#39;s code between Apple Silicon vs Intel.\r\n\r\n  [1]: https://openjdk.org/jeps/306","link":"https://stackoverflow.com/questions/76674101/is-there-still-a-difference-between-math-and-strictmath-after-java-17-and-jep-30","title":"Is there still a difference between Math and StrictMath after Java 17 and JEP 306?","body":"<p><a href=\"https://openjdk.org/jeps/306\" rel=\"nofollow noreferrer\">JEP 306</a>, implemented in Java 17, provides always-strict floating point semantics, deprecating the <code>strictfp</code> flag.  Does this mean that <code>java.lang.Math</code> can be counted on to behave exactly the same as the analogous methods in <code>StrictMath</code> (i.e., that <code>java.lang.Math</code> methods can no longer be replaced by the JVM with intrinsics as used to be allowed)?  Does it also mean that there should no longer be any differences in floating point math results among different architectures, no matter which library is used?</p>\n<p>I'm curious if I'm misunderstanding the new Java 17 feature, since we do see differences in today's code between Apple Silicon vs Intel.</p>\n"},{"tags":["java","android","react-native","telephonymanager"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702033694,"last_edit_date":1702033694,"creation_date":1701960511,"answer_id":77620957,"question_id":76837328,"body_markdown":"Try to add `putExtra()`\r\n\r\n    callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n    callIntent.putExtra(&quot;com.android.phone.extra.slot&quot;, simSlotIndex);  \r\n    callIntent.putExtra(&quot;simSlot&quot;, simSlotIndex);\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/76837328/call-using-sim-index-in-android-api-level-31-android-12/77620957#77620957","title":"Call using sim index in android, API level 31, android 12","body":"<p>Try to add <code>putExtra()</code></p>\n<pre><code>callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\ncallIntent.putExtra(&quot;com.android.phone.extra.slot&quot;, simSlotIndex);  \ncallIntent.putExtra(&quot;simSlot&quot;, simSlotIndex);\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":53,"answer_count":1,"score":0,"last_activity_date":1702033694,"creation_date":1691163014,"question_id":76837328,"body_markdown":"I have a scenerio where I want to call someone without human interation,\r\nI am sending phone number and sim slot index using socket, if default sim is not selected android shows me sim selector popup, but if default sim is selected it will call through sim default sim.\r\n\r\nBut I want to call throug any sim index.\r\n\r\nSame approach is working for sms, but not for phone calls\r\n\r\nHere is my code.\r\n\r\n@ReactMethod\r\n    public void makeCallWithSim(int simSlotIndex, String phoneNumber, Callback callback) {\r\n        Context context = getReactApplicationContext();\r\n        TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\r\n        if (telephonyManager == null) {\r\n            // TelephonyManager is not available, handle error\r\n            if (callback != null) {\r\n                callback.invoke(&quot;TelephonyManager is not available.&quot;);\r\n            }\r\n            return;\r\n        }\r\n\r\n        SubscriptionManager subscriptionManager = (SubscriptionManager) context.getSystemService(Context.TELEPHONY_SUBSCRIPTION_SERVICE);\r\n        if (subscriptionManager == null) {\r\n            // SubscriptionManager is not available, handle error\r\n            if (callback != null) {\r\n                callback.invoke(&quot;SubscriptionManager is not available.&quot;);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Get the active subscriptions\r\n        List&lt;SubscriptionInfo&gt; activeSubscriptions = subscriptionManager.getActiveSubscriptionInfoList();\r\n        if (activeSubscriptions == null || activeSubscriptions.isEmpty()) {\r\n            // No active subscriptions found, handle error\r\n            if (callback != null) {\r\n                callback.invoke(&quot;No active subscriptions found.&quot;);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Check if the device supports multiple SIM cards\r\n        if (activeSubscriptions.size() &lt; 2) {\r\n            // Device does not support multiple SIM cards\r\n            // Use the default SIM card for the call\r\n            Log.d(&quot;Info&quot;, &quot;In IF&quot;);\r\n            Uri uri = Uri.parse(&quot;tel:&quot; + phoneNumber);\r\n            Intent callIntent = new Intent(Intent.ACTION_CALL, uri);\r\n            callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n\r\n            if (callIntent.resolveActivity(context.getPackageManager()) != null) {\r\n                context.startActivity(callIntent);\r\n                if (callback != null) {\r\n                    callback.invoke(); // Call initiated successfully\r\n                }\r\n            } else {\r\n                if (callback != null) {\r\n                    callback.invoke(&quot;Error: No activity found to handle the call intent.&quot;);\r\n                }\r\n            }\r\n        } else {\r\n            Log.d(&quot;Info&quot;, &quot;In ELSE&quot;);\r\n            // Get the subscription ID for the given SIM slot\r\n            // SubscriptionInfo subscriptionInfo = activeSubscriptions.get(simSlotIndex);\r\n            SubscriptionInfo subscriptionInfo = subscriptionManager.getActiveSubscriptionInfoForSimSlotIndex(simSlotIndex);\r\n            int subscriptionId = subscriptionInfo.getSubscriptionId();\r\n\r\n            // Set the SIM subscription ID for the call\r\n            telephonyManager = telephonyManager.createForSubscriptionId(subscriptionId);\r\n\r\n            // Make the call using the specified SIM\r\n            Uri uri = Uri.parse(&quot;tel:&quot; + phoneNumber);\r\n            Intent callIntent = new Intent(Intent.ACTION_CALL, uri);\r\n            callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n\r\n            if (callIntent.resolveActivity(context.getPackageManager()) != null) {\r\n                context.startActivity(callIntent);\r\n                if (callback != null) {\r\n                    callback.invoke(); // Call initiated successfully\r\n                }\r\n            } else {\r\n                if (callback != null) {\r\n                    callback.invoke(&quot;Error: No activity found to handle the call intent.&quot;);\r\n                }\r\n            }\r\n        }\r\n    }","link":"https://stackoverflow.com/questions/76837328/call-using-sim-index-in-android-api-level-31-android-12","title":"Call using sim index in android, API level 31, android 12","body":"<p>I have a scenerio where I want to call someone without human interation,\nI am sending phone number and sim slot index using socket, if default sim is not selected android shows me sim selector popup, but if default sim is selected it will call through sim default sim.</p>\n<p>But I want to call throug any sim index.</p>\n<p>Same approach is working for sms, but not for phone calls</p>\n<p>Here is my code.</p>\n<p>@ReactMethod\npublic void makeCallWithSim(int simSlotIndex, String phoneNumber, Callback callback) {\nContext context = getReactApplicationContext();\nTelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\nif (telephonyManager == null) {\n// TelephonyManager is not available, handle error\nif (callback != null) {\ncallback.invoke(&quot;TelephonyManager is not available.&quot;);\n}\nreturn;\n}</p>\n<pre><code>    SubscriptionManager subscriptionManager = (SubscriptionManager) context.getSystemService(Context.TELEPHONY_SUBSCRIPTION_SERVICE);\n    if (subscriptionManager == null) {\n        // SubscriptionManager is not available, handle error\n        if (callback != null) {\n            callback.invoke(&quot;SubscriptionManager is not available.&quot;);\n        }\n        return;\n    }\n\n    // Get the active subscriptions\n    List&lt;SubscriptionInfo&gt; activeSubscriptions = subscriptionManager.getActiveSubscriptionInfoList();\n    if (activeSubscriptions == null || activeSubscriptions.isEmpty()) {\n        // No active subscriptions found, handle error\n        if (callback != null) {\n            callback.invoke(&quot;No active subscriptions found.&quot;);\n        }\n        return;\n    }\n\n    // Check if the device supports multiple SIM cards\n    if (activeSubscriptions.size() &lt; 2) {\n        // Device does not support multiple SIM cards\n        // Use the default SIM card for the call\n        Log.d(&quot;Info&quot;, &quot;In IF&quot;);\n        Uri uri = Uri.parse(&quot;tel:&quot; + phoneNumber);\n        Intent callIntent = new Intent(Intent.ACTION_CALL, uri);\n        callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n\n        if (callIntent.resolveActivity(context.getPackageManager()) != null) {\n            context.startActivity(callIntent);\n            if (callback != null) {\n                callback.invoke(); // Call initiated successfully\n            }\n        } else {\n            if (callback != null) {\n                callback.invoke(&quot;Error: No activity found to handle the call intent.&quot;);\n            }\n        }\n    } else {\n        Log.d(&quot;Info&quot;, &quot;In ELSE&quot;);\n        // Get the subscription ID for the given SIM slot\n        // SubscriptionInfo subscriptionInfo = activeSubscriptions.get(simSlotIndex);\n        SubscriptionInfo subscriptionInfo = subscriptionManager.getActiveSubscriptionInfoForSimSlotIndex(simSlotIndex);\n        int subscriptionId = subscriptionInfo.getSubscriptionId();\n\n        // Set the SIM subscription ID for the call\n        telephonyManager = telephonyManager.createForSubscriptionId(subscriptionId);\n\n        // Make the call using the specified SIM\n        Uri uri = Uri.parse(&quot;tel:&quot; + phoneNumber);\n        Intent callIntent = new Intent(Intent.ACTION_CALL, uri);\n        callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n\n        if (callIntent.resolveActivity(context.getPackageManager()) != null) {\n            context.startActivity(callIntent);\n            if (callback != null) {\n                callback.invoke(); // Call initiated successfully\n            }\n        } else {\n            if (callback != null) {\n                callback.invoke(&quot;Error: No activity found to handle the call intent.&quot;);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["python","java"],"comments":[{"score":1,"post_type":"question","creation_date":1700811014,"post_id":77541350,"comment_id":136701087,"body_markdown":"Python isn&#39;t in your path.  Either add python to the PATH, or use the full path to the python binary.","link":"https://stackoverflow.com/questions/77541350/calling-pythoncode-executable-or-some-other-form-from-java#comment136701087_77541350","body":"Python isn&#39;t in your path.  Either add python to the PATH, or use the full path to the python binary."},{"score":0,"post_type":"question","creation_date":1700813992,"post_id":77541350,"comment_id":136701560,"body_markdown":"Is there a way to fully package the python content including python interpreter / runtime ? Like a self contained jar analogy ?","link":"https://stackoverflow.com/questions/77541350/calling-pythoncode-executable-or-some-other-form-from-java#comment136701560_77541350","body":"Is there a way to fully package the python content including python interpreter / runtime ? Like a self contained jar analogy ?"},{"score":0,"post_type":"question","creation_date":1700814173,"post_id":77541350,"comment_id":136701582,"body_markdown":"That&#39;s way beyond my knowledge, sorry.","link":"https://stackoverflow.com/questions/77541350/calling-pythoncode-executable-or-some-other-form-from-java#comment136701582_77541350","body":"That&#39;s way beyond my knowledge, sorry."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702030692,"creation_date":1702030692,"answer_id":77625863,"question_id":77541350,"body_markdown":"Using pyinstaller it seems possible to package the whole dependencies and related data files in an executable file. And then it seems that from java we can invoke this exe just like running an exe from command line. It will have to be packaged by inside the installer ...","link":"https://stackoverflow.com/questions/77541350/calling-pythoncode-executable-or-some-other-form-from-java/77625863#77625863","title":"Calling Python(Code, executable or some other form) from Java","body":"<p>Using pyinstaller it seems possible to package the whole dependencies and related data files in an executable file. And then it seems that from java we can invoke this exe just like running an exe from command line. It will have to be packaged by inside the installer ...</p>\n"}],"comment_count":3,"is_answered":false,"view_count":48,"answer_count":1,"score":-1,"last_activity_date":1702030692,"creation_date":1700810725,"last_edit_date":1700810976,"question_id":77541350,"body_markdown":"**TLDR;**\r\n\r\nI have a java desktop application that runs on Mac, Linux &amp; Windows and I have a python library. I am trying to call the python package&#39;s function from Java. As long as python can be packaged in the installer of my application and will work on the user&#39;s machines without additional setups.\r\n\r\n**Details:**\r\n\r\nI have a java maven project. I have seen it to work on windows. I have seen java call the python and return the response.\r\n```\r\n    &lt;properties &gt;\r\n        &lt;project.build.sourceLevel&gt;21&lt;/project.build.sourceLevel&gt;\r\n        &lt;project.build.targetLevel&gt;21&lt;/project.build.targetLevel&gt;\r\n\r\n        &lt;maven.compiler.source&gt;21&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;21&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n    \r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.13.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hamcrest&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.32&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.python&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jython-slim&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.3b1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\n**Java**\r\n\r\n```\r\n    @Test\r\n    public void getWhispered() throws Exception {\r\n        ProcessBuilder processBuilder = new ProcessBuilder(&quot;python&quot;, resolvePythonScriptPath(&quot;foo5/main.py&quot;), &quot;stringdata&quot;);\r\n        processBuilder.redirectErrorStream(true);\r\n\r\n        Process process = processBuilder.start();\r\n        List&lt;String&gt; results = readProcessOutput(process.getInputStream());\r\n\r\n        assertThat(&quot;Results should not be empty&quot;, results, is(not(empty())));\r\n        assertThat(&quot;Results should contain output of script&quot;, results, \r\n hasItem(containsString(&quot;Argument List&quot;))); // Please excuse in accuracy ... I am adapting a bit.\r\n\r\n        int exitCode = process.waitFor();\r\n        assertEquals(&quot;No errors should be detected&quot;, 0, exitCode);\r\n    }\r\n\r\n    private List&lt;String&gt; readProcessOutput(InputStream inputStream) throws IOException {\r\n        try (BufferedReader output = new BufferedReader(new InputStreamReader(inputStream))) {\r\n            return output.lines()\r\n                .collect(Collectors.toList());\r\n        }\r\n    }\r\n\r\n    private String resolvePythonScriptPath(String filename) {\r\n        File file = new File(&quot;src/test/resources/&quot; + filename);\r\n        return file.getAbsolutePath();\r\n    }\r\n```\r\n\r\n\r\n**main.py**\r\n```\r\nimport sys\r\n\r\nprint (&#39;Number of arguments:&#39;, len(sys.argv), &#39;arguments.&#39;)\r\nprint (&#39;Argument List:&#39;, str(sys.argv))\r\n```\r\n\r\n\r\nBut now I see the error ... `java.io.IOException: Cannot run program &quot;python&quot;: CreateProcess error=2, The system cannot find the file specified` \r\n\r\nI ran both times (when I see it to work. And now when I do not see it working) without python instllation. I uninstalled all python and ran it... I saw it working. But now I do not see it working. \r\n\r\nI suspect that I did not restart the windows hence may be there was a cached form of python available somewhere ... \r\n\r\n**Quesiton:**\r\n\r\nIn this invocation is Java calling actual PythonRun time available on the command line in the host machine or is Java&#39;s jar providing the interpreter its self ?\r\n\r\nAnd if someone can help me call a python in a way that I can call some python executable/code/package and get the result ... without installing additional things and needing to set up additional things on user&#39;s machines.\r\n\r\nThank you","link":"https://stackoverflow.com/questions/77541350/calling-pythoncode-executable-or-some-other-form-from-java","title":"Calling Python(Code, executable or some other form) from Java","body":"<p><strong>TLDR;</strong></p>\n<p>I have a java desktop application that runs on Mac, Linux &amp; Windows and I have a python library. I am trying to call the python package's function from Java. As long as python can be packaged in the installer of my application and will work on the user's machines without additional setups.</p>\n<p><strong>Details:</strong></p>\n<p>I have a java maven project. I have seen it to work on windows. I have seen java call the python and return the response.</p>\n<pre><code>    &lt;properties &gt;\n        &lt;project.build.sourceLevel&gt;21&lt;/project.build.sourceLevel&gt;\n        &lt;project.build.targetLevel&gt;21&lt;/project.build.targetLevel&gt;\n\n        &lt;maven.compiler.source&gt;21&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;21&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n    \n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\n            &lt;artifactId&gt;hamcrest&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;1.7.32&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.python&lt;/groupId&gt;\n            &lt;artifactId&gt;jython-slim&lt;/artifactId&gt;\n            &lt;version&gt;2.7.3b1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p><strong>Java</strong></p>\n<pre><code>    @Test\n    public void getWhispered() throws Exception {\n        ProcessBuilder processBuilder = new ProcessBuilder(&quot;python&quot;, resolvePythonScriptPath(&quot;foo5/main.py&quot;), &quot;stringdata&quot;);\n        processBuilder.redirectErrorStream(true);\n\n        Process process = processBuilder.start();\n        List&lt;String&gt; results = readProcessOutput(process.getInputStream());\n\n        assertThat(&quot;Results should not be empty&quot;, results, is(not(empty())));\n        assertThat(&quot;Results should contain output of script&quot;, results, \n hasItem(containsString(&quot;Argument List&quot;))); // Please excuse in accuracy ... I am adapting a bit.\n\n        int exitCode = process.waitFor();\n        assertEquals(&quot;No errors should be detected&quot;, 0, exitCode);\n    }\n\n    private List&lt;String&gt; readProcessOutput(InputStream inputStream) throws IOException {\n        try (BufferedReader output = new BufferedReader(new InputStreamReader(inputStream))) {\n            return output.lines()\n                .collect(Collectors.toList());\n        }\n    }\n\n    private String resolvePythonScriptPath(String filename) {\n        File file = new File(&quot;src/test/resources/&quot; + filename);\n        return file.getAbsolutePath();\n    }\n</code></pre>\n<p><strong>main.py</strong></p>\n<pre><code>import sys\n\nprint ('Number of arguments:', len(sys.argv), 'arguments.')\nprint ('Argument List:', str(sys.argv))\n</code></pre>\n<p>But now I see the error ... <code>java.io.IOException: Cannot run program &quot;python&quot;: CreateProcess error=2, The system cannot find the file specified</code></p>\n<p>I ran both times (when I see it to work. And now when I do not see it working) without python instllation. I uninstalled all python and ran it... I saw it working. But now I do not see it working.</p>\n<p>I suspect that I did not restart the windows hence may be there was a cached form of python available somewhere ...</p>\n<p><strong>Quesiton:</strong></p>\n<p>In this invocation is Java calling actual PythonRun time available on the command line in the host machine or is Java's jar providing the interpreter its self ?</p>\n<p>And if someone can help me call a python in a way that I can call some python executable/code/package and get the result ... without installing additional things and needing to set up additional things on user's machines.</p>\n<p>Thank you</p>\n"},{"tags":["java","spring-boot","logging","commons"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1689841756,"post_id":76724491,"comment_id":135271365,"body_markdown":"I&#39;ve tried wit the same error: MacBook-Pro planets % mvn dependency:tree | grep commons-logging\n[INFO] |  |  +- commons-logging:commons-logging:jar:1.2:compile","link":"https://stackoverflow.com/questions/76706612/standard-commons-logging-discovery-in-action-with-spring-jcl/76724491#comment135271365_76724491","body":"I&#39;ve tried wit the same error: MacBook-Pro planets % mvn dependency:tree | grep commons-logging [INFO] |  |  +- commons-logging:commons-logging:jar:1.2:compile"},{"score":2,"post_type":"answer","creation_date":1689843555,"post_id":76724491,"comment_id":135271745,"body_markdown":"@NunyetdeCanCal&#231;ada Can you check the line before this one, in the mvn dependency:tree out, which imports the common-logging? It should be a `some.group:some-artifact:jar:1.0.0:compile`, and you would need to exclude commons-logging from `some.group:some-artifact`.","link":"https://stackoverflow.com/questions/76706612/standard-commons-logging-discovery-in-action-with-spring-jcl/76724491#comment135271745_76724491","body":"@NunyetdeCanCal&#231;ada Can you check the line before this one, in the mvn dependency:tree out, which imports the common-logging? It should be a <code>some.group:some-artifact:jar:1.0.0:compile</code>, and you would need to exclude commons-logging from <code>some.group:some-artifact</code>."},{"score":2,"post_type":"answer","creation_date":1689858618,"post_id":76724491,"comment_id":135274918,"body_markdown":"@NunyetdeCanCal&#231;ada I have updated the answer to take into account your last edit and your maven depdency tree.","link":"https://stackoverflow.com/questions/76706612/standard-commons-logging-discovery-in-action-with-spring-jcl/76724491#comment135274918_76724491","body":"@NunyetdeCanCal&#231;ada I have updated the answer to take into account your last edit and your maven depdency tree."}],"comment_count":3,"score":16,"last_activity_date":1689858566,"last_edit_date":1689858566,"creation_date":1689793348,"answer_id":76724491,"question_id":76706612,"body_markdown":"As illustrated in, for instance, [`camunda/zeebe` PR13300](https://github.com/camunda/zeebe/pull/13300):\r\n\r\n&gt; Spring displays a prominent warning when using different versions of `commons-logging`. They use their own variant, `spring-jcl`, and importing `commons-logging` conflicts with this.\r\n\r\nSo I would first try and exclude `commons-logging` from the project dependencies. This will force your application to use the logging system provided by Spring Boot Starter. \r\n\r\n```xml\r\n&lt;dependencies&gt;\r\n    &lt;!-- other dependencies --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- other dependencies --&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nYou might need to add similar exclusions to other dependencies if they also pull in commons-logging:\r\n\r\n``` bash\r\nmvn dependency:tree | grep commons-logging\r\n# or\r\nmvn dependency:tree | findstr commons-logging\r\n```\r\n\r\nFrom your maven tree:\r\n\r\n``` xml\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;\r\n        &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4.9&lt;/version&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```","link":"https://stackoverflow.com/questions/76706612/standard-commons-logging-discovery-in-action-with-spring-jcl/76724491#76724491","title":"Standard Commons Logging discovery in action with spring-jcl","body":"<p>As illustrated in, for instance, <a href=\"https://github.com/camunda/zeebe/pull/13300\" rel=\"noreferrer\"><code>camunda/zeebe</code> PR13300</a>:</p>\n<blockquote>\n<p>Spring displays a prominent warning when using different versions of <code>commons-logging</code>. They use their own variant, <code>spring-jcl</code>, and importing <code>commons-logging</code> conflicts with this.</p>\n</blockquote>\n<p>So I would first try and exclude <code>commons-logging</code> from the project dependencies. This will force your application to use the logging system provided by Spring Boot Starter.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;!-- other dependencies --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;!-- other dependencies --&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>You might need to add similar exclusions to other dependencies if they also pull in commons-logging:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn dependency:tree | grep commons-logging\n# or\nmvn dependency:tree | findstr commons-logging\n</code></pre>\n<p>From your maven tree:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;\n        &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\n        &lt;version&gt;1.4.9&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1689915368,"creation_date":1689915368,"answer_id":76735213,"question_id":76706612,"body_markdown":"can you please try the below exclusion for maven you have in dependency tree.\r\n\r\n```\r\n&lt;project&gt;\r\n    &lt;!-- ... other project configurations ... --&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- Add your other dependencies here --&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;!-- Add other build plugins here --&gt;\r\n            &lt;plugin&gt;\r\n                &lt;!-- Use maven-dependency-plugin to exclude commons-logging --&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.2.0&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;exclude-commons-logging&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;purge-local-repository&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n                            &lt;version&gt;1.2&lt;/version&gt;\r\n                            &lt;excludes&gt;\r\n                                &lt;exclude&gt;*&lt;/exclude&gt;\r\n                            &lt;/excludes&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n","link":"https://stackoverflow.com/questions/76706612/standard-commons-logging-discovery-in-action-with-spring-jcl/76735213#76735213","title":"Standard Commons Logging discovery in action with spring-jcl","body":"<p>can you please try the below exclusion for maven you have in dependency tree.</p>\n<pre><code>&lt;project&gt;\n    &lt;!-- ... other project configurations ... --&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Add your other dependencies here --&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;!-- Add other build plugins here --&gt;\n            &lt;plugin&gt;\n                &lt;!-- Use maven-dependency-plugin to exclude commons-logging --&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;exclude-commons-logging&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;purge-local-repository&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                            &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n                            &lt;version&gt;1.2&lt;/version&gt;\n                            &lt;excludes&gt;\n                                &lt;exclude&gt;*&lt;/exclude&gt;\n                            &lt;/excludes&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1701302491,"creation_date":1701302491,"answer_id":77575153,"question_id":76706612,"body_markdown":"I was too lazy to exclude this dependency manually one by one, so this is how I fixed this using Gradle in a more efficient way. Just put below in your Gradle config to exclude this transitive dependency (so that only `spring-jcl` is used at runtime).\r\n\r\nFor `build.gradle.kts`:\r\n```kotlin\r\nconfigurations {\r\n    runtimeOnly {\r\n        exclude(group = &quot;commons-logging&quot;, module = &quot;commons-logging&quot;)\r\n    }\r\n}\r\n```\r\n\r\nOr, if you use `build.gradle` / groovy syntax:\r\n```groovy\r\nconfigurations {\r\n    runtime {\r\n        exclude(group = &quot;org.slf4j&quot;, module = &quot;slf4j-log4j12&quot;)\r\n    }\r\n}\r\n```","link":"https://stackoverflow.com/questions/76706612/standard-commons-logging-discovery-in-action-with-spring-jcl/77575153#77575153","title":"Standard Commons Logging discovery in action with spring-jcl","body":"<p>I was too lazy to exclude this dependency manually one by one, so this is how I fixed this using Gradle in a more efficient way. Just put below in your Gradle config to exclude this transitive dependency (so that only <code>spring-jcl</code> is used at runtime).</p>\n<p>For <code>build.gradle.kts</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>configurations {\n    runtimeOnly {\n        exclude(group = &quot;commons-logging&quot;, module = &quot;commons-logging&quot;)\n    }\n}\n</code></pre>\n<p>Or, if you use <code>build.gradle</code> / groovy syntax:</p>\n<pre><code>configurations {\n    runtime {\n        exclude(group = &quot;org.slf4j&quot;, module = &quot;slf4j-log4j12&quot;)\n    }\n}\n</code></pre>\n"},{"comment_count":0,"score":1,"last_activity_date":1702030653,"last_edit_date":1702030653,"creation_date":1701773326,"answer_id":77605594,"question_id":76706612,"body_markdown":"In your case `unirest-java` has a transitive dependency on `org.apache.httpcomponents`, which further has a transitive dependency on `commons-logging`. Spring JCL probably scans the classpath, finds `commons-logging` and that&#39;s why it warns you about potential conflicts with Spring Boot&#39;s pre-configured loggers.\r\n\r\nYou can list all the dependencies and transitive dependencies in your Maven project by running `mvn dependency:tree`. For Gradle projects you can run `gradle dependencies`.\r\n\r\nTo exclude `commons-logging` in a Maven project, add this to your `pom.xml` configuration file:\r\n```\r\n&lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;\r\n        &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4.9&lt;/version&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;commons-logging&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nIf you&#39;re using Gradle, add this to your `build.gradle` file:\r\n```\r\nimplementation(&#39;com.mashape.unirest:unirest-java:1.4.9&#39;) {\r\n\t\texclude group: &#39;commons-logging&#39;, module: &#39;commons-logging&#39;\r\n\t}\r\n```\r\n\r\nYou may also exclude dependencies globally from your project:\r\n```\r\nconfigurations {\r\n\tcompileOnly {\r\n\t\textendsFrom annotationProcessor\r\n\t}\r\n\tall {\r\n\t\texclude group: &#39;commons-logging&#39;, module: &#39;commons-logging&#39;\r\n\t}\r\n}\r\n```","link":"https://stackoverflow.com/questions/76706612/standard-commons-logging-discovery-in-action-with-spring-jcl/77605594#77605594","title":"Standard Commons Logging discovery in action with spring-jcl","body":"<p>In your case <code>unirest-java</code> has a transitive dependency on <code>org.apache.httpcomponents</code>, which further has a transitive dependency on <code>commons-logging</code>. Spring JCL probably scans the classpath, finds <code>commons-logging</code> and that's why it warns you about potential conflicts with Spring Boot's pre-configured loggers.</p>\n<p>You can list all the dependencies and transitive dependencies in your Maven project by running <code>mvn dependency:tree</code>. For Gradle projects you can run <code>gradle dependencies</code>.</p>\n<p>To exclude <code>commons-logging</code> in a Maven project, add this to your <code>pom.xml</code> configuration file:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;\n        &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\n        &lt;version&gt;1.4.9&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;commons-logging&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>If you're using Gradle, add this to your <code>build.gradle</code> file:</p>\n<pre><code>implementation('com.mashape.unirest:unirest-java:1.4.9') {\n        exclude group: 'commons-logging', module: 'commons-logging'\n    }\n</code></pre>\n<p>You may also exclude dependencies globally from your project:</p>\n<pre><code>configurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n    all {\n        exclude group: 'commons-logging', module: 'commons-logging'\n    }\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":18833,"answer_count":4,"score":13,"last_activity_date":1702030653,"creation_date":1689612941,"last_edit_date":1689858092,"question_id":76706612,"body_markdown":"I have a springBoot all with these dependencies:\r\n\r\n    &lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.18.28&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/com.mashape.unirest/unirest-java --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.4.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;0.11.5&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;0.11.5&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;0.11.5&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n\r\nbut I have this message on the console:\r\n\r\n    Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts\r\n\r\n\r\nHere the mvn dependency:tree :\r\n\r\n\r\n    [INFO] Scanning for projects...\r\n    [INFO] \r\n    [INFO] ----------------&lt; com.planets:com.planets &gt;-----------------\r\n    [INFO] Building planets 0.0.1-SNAPSHOT\r\n    [INFO]   from pom.xml\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO] \r\n    [INFO] --- dependency:3.5.0:tree (default-cli) @ com.planets ---\r\n    [INFO] com.planets:com.planets:jar:0.0.1-SNAPSHOT\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-data-jpa:jar:3.1.1:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot-starter-aop:jar:3.1.1:compile\r\n    [INFO] |  |  \\- org.aspectj:aspectjweaver:jar:1.9.19:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot-starter-jdbc:jar:3.1.1:compile\r\n    [INFO] |  |  +- com.zaxxer:HikariCP:jar:5.0.1:compile\r\n    [INFO] |  |  \\- org.springframework:spring-jdbc:jar:6.0.10:compile\r\n    [INFO] |  +- org.hibernate.orm:hibernate-core:jar:6.2.5.Final:compile\r\n    [INFO] |  |  +- jakarta.persistence:jakarta.persistence-api:jar:3.1.0:compile\r\n    [INFO] |  |  +- jakarta.transaction:jakarta.transaction-api:jar:2.0.1:compile\r\n    [INFO] |  |  +- org.jboss.logging:jboss-logging:jar:3.5.1.Final:compile\r\n    [INFO] |  |  +- org.hibernate.common:hibernate-commons-annotations:jar:6.0.6.Final:runtime\r\n    [INFO] |  |  +- io.smallrye:jandex:jar:3.0.5:runtime\r\n    [INFO] |  |  +- com.fasterxml:classmate:jar:1.5.1:compile\r\n    [INFO] |  |  +- net.bytebuddy:byte-buddy:jar:1.14.5:runtime\r\n    [INFO] |  |  +- org.glassfish.jaxb:jaxb-runtime:jar:4.0.3:runtime\r\n    [INFO] |  |  |  \\- org.glassfish.jaxb:jaxb-core:jar:4.0.3:runtime\r\n    [INFO] |  |  |     +- org.eclipse.angus:angus-activation:jar:2.0.1:runtime\r\n    [INFO] |  |  |     +- org.glassfish.jaxb:txw2:jar:4.0.3:runtime\r\n    [INFO] |  |  |     \\- com.sun.istack:istack-commons-runtime:jar:4.1.2:runtime\r\n    [INFO] |  |  +- jakarta.inject:jakarta.inject-api:jar:2.0.1:runtime\r\n    [INFO] |  |  \\- org.antlr:antlr4-runtime:jar:4.10.1:compile\r\n    [INFO] |  +- org.springframework.data:spring-data-jpa:jar:3.1.1:compile\r\n    [INFO] |  |  +- org.springframework.data:spring-data-commons:jar:3.1.1:compile\r\n    [INFO] |  |  +- org.springframework:spring-orm:jar:6.0.10:compile\r\n    [INFO] |  |  +- org.springframework:spring-context:jar:6.0.10:compile\r\n    [INFO] |  |  +- org.springframework:spring-tx:jar:6.0.10:compile\r\n    [INFO] |  |  +- org.springframework:spring-beans:jar:6.0.10:compile\r\n    [INFO] |  |  +- jakarta.annotation:jakarta.annotation-api:jar:2.1.1:compile\r\n    [INFO] |  |  \\- org.slf4j:slf4j-api:jar:2.0.7:compile\r\n    [INFO] |  \\- org.springframework:spring-aspects:jar:6.0.10:compile\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-security:jar:3.1.1:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot-starter:jar:3.1.1:compile\r\n    [INFO] |  |  +- org.springframework.boot:spring-boot:jar:3.1.1:compile\r\n    [INFO] |  |  +- org.springframework.boot:spring-boot-autoconfigure:jar:3.1.1:compile\r\n    [INFO] |  |  +- org.springframework.boot:spring-boot-starter-logging:jar:3.1.1:compile\r\n    [INFO] |  |  |  +- ch.qos.logback:logback-classic:jar:1.4.8:compile\r\n    [INFO] |  |  |  |  \\- ch.qos.logback:logback-core:jar:1.4.8:compile\r\n    [INFO] |  |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.20.0:compile\r\n    [INFO] |  |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.20.0:compile\r\n    [INFO] |  |  |  \\- org.slf4j:jul-to-slf4j:jar:2.0.7:compile\r\n    [INFO] |  |  \\- org.yaml:snakeyaml:jar:1.33:compile\r\n    [INFO] |  +- org.springframework:spring-aop:jar:6.0.10:compile\r\n    [INFO] |  +- org.springframework.security:spring-security-config:jar:6.1.1:compile\r\n    [INFO] |  \\- org.springframework.security:spring-security-web:jar:6.1.1:compile\r\n    [INFO] |     \\- org.springframework:spring-expression:jar:6.0.10:compile\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-validation:jar:3.1.1:compile\r\n    [INFO] |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.10:compile\r\n    [INFO] |  \\- org.hibernate.validator:hibernate-validator:jar:8.0.0.Final:compile\r\n    [INFO] |     \\- jakarta.validation:jakarta.validation-api:jar:3.0.2:compile\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-web:jar:3.1.1:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot-starter-json:jar:3.1.1:compile\r\n    [INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.15.2:compile\r\n    [INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.15.2:compile\r\n    [INFO] |  |  \\- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.15.2:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:3.1.1:compile\r\n    [INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:10.1.10:compile\r\n    [INFO] |  |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:10.1.10:compile\r\n    [INFO] |  +- org.springframework:spring-web:jar:6.0.10:compile\r\n    [INFO] |  |  \\- io.micrometer:micrometer-observation:jar:1.11.1:compile\r\n    [INFO] |  |     \\- io.micrometer:micrometer-commons:jar:1.11.1:compile\r\n    [INFO] |  \\- org.springframework:spring-webmvc:jar:6.0.10:compile\r\n    [INFO] +- com.fasterxml.jackson.core:jackson-annotations:jar:2.15.2:compile\r\n    [INFO] +- org.projectlombok:lombok:jar:1.18.28:provided\r\n    [INFO] +- com.mashape.unirest:unirest-java:jar:1.4.9:compile\r\n    [INFO] |  +- org.apache.httpcomponents:httpclient:jar:4.5.2:compile\r\n    [INFO] |  |  +- org.apache.httpcomponents:httpcore:jar:4.4.16:compile\r\n    [INFO] |  |  +- commons-logging:commons-logging:jar:1.2:compile\r\n    [INFO] |  |  \\- commons-codec:commons-codec:jar:1.15:compile\r\n    [INFO] |  +- org.apache.httpcomponents:httpasyncclient:jar:4.1.5:compile\r\n    [INFO] |  |  \\- org.apache.httpcomponents:httpcore-nio:jar:4.4.16:compile\r\n    [INFO] |  +- org.apache.httpcomponents:httpmime:jar:4.5.2:compile\r\n    [INFO] |  \\- org.json:json:jar:20160212:compile\r\n    [INFO] +- com.itextpdf:itextpdf:jar:5.5.13.3:compile\r\n    [INFO] +- com.mysql:mysql-connector-j:jar:8.0.33:runtime\r\n    [INFO] +- io.jsonwebtoken:jjwt-api:jar:0.11.5:compile\r\n    [INFO] +- io.jsonwebtoken:jjwt-impl:jar:0.11.5:runtime\r\n    [INFO] +- io.jsonwebtoken:jjwt-jackson:jar:0.11.5:runtime\r\n    [INFO] |  \\- com.fasterxml.jackson.core:jackson-databind:jar:2.15.2:compile\r\n    [INFO] |     \\- com.fasterxml.jackson.core:jackson-core:jar:2.15.2:compile\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-test:jar:3.1.1:test\r\n    [INFO] |  +- org.springframework.boot:spring-boot-test:jar:3.1.1:test\r\n    [INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:3.1.1:test\r\n    [INFO] |  +- com.jayway.jsonpath:json-path:jar:2.8.0:test\r\n    [INFO] |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:4.0.0:runtime\r\n    [INFO] |  |  \\- jakarta.activation:jakarta.activation-api:jar:2.1.2:runtime\r\n    [INFO] |  +- net.minidev:json-smart:jar:2.4.11:test\r\n    [INFO] |  |  \\- net.minidev:accessors-smart:jar:2.4.11:test\r\n    [INFO] |  |     \\- org.ow2.asm:asm:jar:9.3:test\r\n    [INFO] |  +- org.assertj:assertj-core:jar:3.24.2:test\r\n    [INFO] |  +- org.hamcrest:hamcrest:jar:2.2:test\r\n    [INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.9.3:test\r\n    [INFO] |  |  +- org.junit.jupiter:junit-jupiter-api:jar:5.9.3:test\r\n    [INFO] |  |  |  +- org.opentest4j:opentest4j:jar:1.2.0:test\r\n    [INFO] |  |  |  +- org.junit.platform:junit-platform-commons:jar:1.9.3:test\r\n    [INFO] |  |  |  \\- org.apiguardian:apiguardian-api:jar:1.1.2:test\r\n    [INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.9.3:test\r\n    [INFO] |  |  \\- org.junit.jupiter:junit-jupiter-engine:jar:5.9.3:test\r\n    [INFO] |  |     \\- org.junit.platform:junit-platform-engine:jar:1.9.3:test\r\n    [INFO] |  +- org.mockito:mockito-core:jar:5.3.1:test\r\n    [INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.14.5:test\r\n    [INFO] |  |  \\- org.objenesis:objenesis:jar:3.3:test\r\n    [INFO] |  +- org.mockito:mockito-junit-jupiter:jar:5.3.1:test\r\n    [INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.1:test\r\n    [INFO] |  |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test\r\n    [INFO] |  +- org.springframework:spring-core:jar:6.0.10:compile\r\n    [INFO] |  |  \\- org.springframework:spring-jcl:jar:6.0.10:compile\r\n    [INFO] |  +- org.springframework:spring-test:jar:6.0.10:test\r\n    [INFO] |  \\- org.xmlunit:xmlunit-core:jar:2.9.1:test\r\n    [INFO] \\- org.springframework.security:spring-security-test:jar:6.1.1:test\r\n    [INFO]    \\- org.springframework.security:spring-security-core:jar:6.1.1:compile\r\n    [INFO]       \\- org.springframework.security:spring-security-crypto:jar:6.1.1:compile\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD SUCCESS\r\n\r\n","link":"https://stackoverflow.com/questions/76706612/standard-commons-logging-discovery-in-action-with-spring-jcl","title":"Standard Commons Logging discovery in action with spring-jcl","body":"<p>I have a springBoot all with these dependencies:</p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.28&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/com.mashape.unirest/unirest-java --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;\n            &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;\n            &lt;version&gt;1.4.9&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;\n            &lt;version&gt;0.11.5&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;\n            &lt;version&gt;0.11.5&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;\n            &lt;version&gt;0.11.5&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>but I have this message on the console:</p>\n<pre><code>Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts\n</code></pre>\n<p>Here the mvn dependency:tree :</p>\n<pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] ----------------&lt; com.planets:com.planets &gt;-----------------\n[INFO] Building planets 0.0.1-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- dependency:3.5.0:tree (default-cli) @ com.planets ---\n[INFO] com.planets:com.planets:jar:0.0.1-SNAPSHOT\n[INFO] +- org.springframework.boot:spring-boot-starter-data-jpa:jar:3.1.1:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-aop:jar:3.1.1:compile\n[INFO] |  |  \\- org.aspectj:aspectjweaver:jar:1.9.19:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-jdbc:jar:3.1.1:compile\n[INFO] |  |  +- com.zaxxer:HikariCP:jar:5.0.1:compile\n[INFO] |  |  \\- org.springframework:spring-jdbc:jar:6.0.10:compile\n[INFO] |  +- org.hibernate.orm:hibernate-core:jar:6.2.5.Final:compile\n[INFO] |  |  +- jakarta.persistence:jakarta.persistence-api:jar:3.1.0:compile\n[INFO] |  |  +- jakarta.transaction:jakarta.transaction-api:jar:2.0.1:compile\n[INFO] |  |  +- org.jboss.logging:jboss-logging:jar:3.5.1.Final:compile\n[INFO] |  |  +- org.hibernate.common:hibernate-commons-annotations:jar:6.0.6.Final:runtime\n[INFO] |  |  +- io.smallrye:jandex:jar:3.0.5:runtime\n[INFO] |  |  +- com.fasterxml:classmate:jar:1.5.1:compile\n[INFO] |  |  +- net.bytebuddy:byte-buddy:jar:1.14.5:runtime\n[INFO] |  |  +- org.glassfish.jaxb:jaxb-runtime:jar:4.0.3:runtime\n[INFO] |  |  |  \\- org.glassfish.jaxb:jaxb-core:jar:4.0.3:runtime\n[INFO] |  |  |     +- org.eclipse.angus:angus-activation:jar:2.0.1:runtime\n[INFO] |  |  |     +- org.glassfish.jaxb:txw2:jar:4.0.3:runtime\n[INFO] |  |  |     \\- com.sun.istack:istack-commons-runtime:jar:4.1.2:runtime\n[INFO] |  |  +- jakarta.inject:jakarta.inject-api:jar:2.0.1:runtime\n[INFO] |  |  \\- org.antlr:antlr4-runtime:jar:4.10.1:compile\n[INFO] |  +- org.springframework.data:spring-data-jpa:jar:3.1.1:compile\n[INFO] |  |  +- org.springframework.data:spring-data-commons:jar:3.1.1:compile\n[INFO] |  |  +- org.springframework:spring-orm:jar:6.0.10:compile\n[INFO] |  |  +- org.springframework:spring-context:jar:6.0.10:compile\n[INFO] |  |  +- org.springframework:spring-tx:jar:6.0.10:compile\n[INFO] |  |  +- org.springframework:spring-beans:jar:6.0.10:compile\n[INFO] |  |  +- jakarta.annotation:jakarta.annotation-api:jar:2.1.1:compile\n[INFO] |  |  \\- org.slf4j:slf4j-api:jar:2.0.7:compile\n[INFO] |  \\- org.springframework:spring-aspects:jar:6.0.10:compile\n[INFO] +- org.springframework.boot:spring-boot-starter-security:jar:3.1.1:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter:jar:3.1.1:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot:jar:3.1.1:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot-autoconfigure:jar:3.1.1:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot-starter-logging:jar:3.1.1:compile\n[INFO] |  |  |  +- ch.qos.logback:logback-classic:jar:1.4.8:compile\n[INFO] |  |  |  |  \\- ch.qos.logback:logback-core:jar:1.4.8:compile\n[INFO] |  |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.20.0:compile\n[INFO] |  |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.20.0:compile\n[INFO] |  |  |  \\- org.slf4j:jul-to-slf4j:jar:2.0.7:compile\n[INFO] |  |  \\- org.yaml:snakeyaml:jar:1.33:compile\n[INFO] |  +- org.springframework:spring-aop:jar:6.0.10:compile\n[INFO] |  +- org.springframework.security:spring-security-config:jar:6.1.1:compile\n[INFO] |  \\- org.springframework.security:spring-security-web:jar:6.1.1:compile\n[INFO] |     \\- org.springframework:spring-expression:jar:6.0.10:compile\n[INFO] +- org.springframework.boot:spring-boot-starter-validation:jar:3.1.1:compile\n[INFO] |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.10:compile\n[INFO] |  \\- org.hibernate.validator:hibernate-validator:jar:8.0.0.Final:compile\n[INFO] |     \\- jakarta.validation:jakarta.validation-api:jar:3.0.2:compile\n[INFO] +- org.springframework.boot:spring-boot-starter-web:jar:3.1.1:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-json:jar:3.1.1:compile\n[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.15.2:compile\n[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.15.2:compile\n[INFO] |  |  \\- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.15.2:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:3.1.1:compile\n[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:10.1.10:compile\n[INFO] |  |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:10.1.10:compile\n[INFO] |  +- org.springframework:spring-web:jar:6.0.10:compile\n[INFO] |  |  \\- io.micrometer:micrometer-observation:jar:1.11.1:compile\n[INFO] |  |     \\- io.micrometer:micrometer-commons:jar:1.11.1:compile\n[INFO] |  \\- org.springframework:spring-webmvc:jar:6.0.10:compile\n[INFO] +- com.fasterxml.jackson.core:jackson-annotations:jar:2.15.2:compile\n[INFO] +- org.projectlombok:lombok:jar:1.18.28:provided\n[INFO] +- com.mashape.unirest:unirest-java:jar:1.4.9:compile\n[INFO] |  +- org.apache.httpcomponents:httpclient:jar:4.5.2:compile\n[INFO] |  |  +- org.apache.httpcomponents:httpcore:jar:4.4.16:compile\n[INFO] |  |  +- commons-logging:commons-logging:jar:1.2:compile\n[INFO] |  |  \\- commons-codec:commons-codec:jar:1.15:compile\n[INFO] |  +- org.apache.httpcomponents:httpasyncclient:jar:4.1.5:compile\n[INFO] |  |  \\- org.apache.httpcomponents:httpcore-nio:jar:4.4.16:compile\n[INFO] |  +- org.apache.httpcomponents:httpmime:jar:4.5.2:compile\n[INFO] |  \\- org.json:json:jar:20160212:compile\n[INFO] +- com.itextpdf:itextpdf:jar:5.5.13.3:compile\n[INFO] +- com.mysql:mysql-connector-j:jar:8.0.33:runtime\n[INFO] +- io.jsonwebtoken:jjwt-api:jar:0.11.5:compile\n[INFO] +- io.jsonwebtoken:jjwt-impl:jar:0.11.5:runtime\n[INFO] +- io.jsonwebtoken:jjwt-jackson:jar:0.11.5:runtime\n[INFO] |  \\- com.fasterxml.jackson.core:jackson-databind:jar:2.15.2:compile\n[INFO] |     \\- com.fasterxml.jackson.core:jackson-core:jar:2.15.2:compile\n[INFO] +- org.springframework.boot:spring-boot-starter-test:jar:3.1.1:test\n[INFO] |  +- org.springframework.boot:spring-boot-test:jar:3.1.1:test\n[INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:3.1.1:test\n[INFO] |  +- com.jayway.jsonpath:json-path:jar:2.8.0:test\n[INFO] |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:4.0.0:runtime\n[INFO] |  |  \\- jakarta.activation:jakarta.activation-api:jar:2.1.2:runtime\n[INFO] |  +- net.minidev:json-smart:jar:2.4.11:test\n[INFO] |  |  \\- net.minidev:accessors-smart:jar:2.4.11:test\n[INFO] |  |     \\- org.ow2.asm:asm:jar:9.3:test\n[INFO] |  +- org.assertj:assertj-core:jar:3.24.2:test\n[INFO] |  +- org.hamcrest:hamcrest:jar:2.2:test\n[INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.9.3:test\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-api:jar:5.9.3:test\n[INFO] |  |  |  +- org.opentest4j:opentest4j:jar:1.2.0:test\n[INFO] |  |  |  +- org.junit.platform:junit-platform-commons:jar:1.9.3:test\n[INFO] |  |  |  \\- org.apiguardian:apiguardian-api:jar:1.1.2:test\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.9.3:test\n[INFO] |  |  \\- org.junit.jupiter:junit-jupiter-engine:jar:5.9.3:test\n[INFO] |  |     \\- org.junit.platform:junit-platform-engine:jar:1.9.3:test\n[INFO] |  +- org.mockito:mockito-core:jar:5.3.1:test\n[INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.14.5:test\n[INFO] |  |  \\- org.objenesis:objenesis:jar:3.3:test\n[INFO] |  +- org.mockito:mockito-junit-jupiter:jar:5.3.1:test\n[INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.1:test\n[INFO] |  |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test\n[INFO] |  +- org.springframework:spring-core:jar:6.0.10:compile\n[INFO] |  |  \\- org.springframework:spring-jcl:jar:6.0.10:compile\n[INFO] |  +- org.springframework:spring-test:jar:6.0.10:test\n[INFO] |  \\- org.xmlunit:xmlunit-core:jar:2.9.1:test\n[INFO] \\- org.springframework.security:spring-security-test:jar:6.1.1:test\n[INFO]    \\- org.springframework.security:spring-security-core:jar:6.1.1:compile\n[INFO]       \\- org.springframework.security:spring-security-crypto:jar:6.1.1:compile\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702029293,"last_edit_date":1702029293,"creation_date":1702028953,"answer_id":77625716,"question_id":77575874,"body_markdown":"For cast images, you only need to change your local server URL after the URL PORT.\r\n\r\nhttp://192.168.X.X:8060/input/15985?u=http%3A%2F%2F192.168.1.31%3A8000%2F**change_this_segment**&amp;t=p&amp;tr=crossfade&amp;h=%28null%29\r\n\r\nDon&#39;t use same url every time while cast the image, so change my mentioned position with image path which will make URL unique.","link":"https://stackoverflow.com/questions/77575874/cast-image-using-input-command-for-roku/77625716#77625716","title":"Cast Image using Input command for ROKU","body":"<p>For cast images, you only need to change your local server URL after the URL PORT.</p>\n<p><a href=\"http://192.168.X.X:8060/input/15985?u=http%3A%2F%2F192.168.1.31%3A8000%2F**change_this_segment**&amp;t=p&amp;tr=crossfade&amp;h=%28null%29\" rel=\"nofollow noreferrer\">http://192.168.X.X:8060/input/15985?u=http%3A%2F%2F192.168.1.31%3A8000%2F**change_this_segment**&amp;t=p&amp;tr=crossfade&amp;h=%28null%29</a></p>\n<p>Don't use same url every time while cast the image, so change my mentioned position with image path which will make URL unique.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":27,"answer_count":1,"score":0,"last_activity_date":1702029293,"creation_date":1701318106,"last_edit_date":1701322633,"question_id":77575874,"body_markdown":"into below command what to replace for cast new image ? also need to know which code segment should be constant. please help \r\n\r\nhttp://192.168.X.X:8060/input/15985?u=http%3A%2F%2F192.168.1.31%3A8000%2Fstorage%2Femulated%2F0%2FPictures%2FMusicPlayer%2FAlbum_1697522130300.png&amp;t=p&amp;tr=crossfade&amp;h=%28null%29","link":"https://stackoverflow.com/questions/77575874/cast-image-using-input-command-for-roku","title":"Cast Image using Input command for ROKU","body":"<p>into below command what to replace for cast new image ? also need to know which code segment should be constant. please help</p>\n<p><a href=\"http://192.168.X.X:8060/input/15985?u=http%3A%2F%2F192.168.1.31%3A8000%2Fstorage%2Femulated%2F0%2FPictures%2FMusicPlayer%2FAlbum_1697522130300.png&amp;t=p&amp;tr=crossfade&amp;h=%28null%29\" rel=\"nofollow noreferrer\">http://192.168.X.X:8060/input/15985?u=http%3A%2F%2F192.168.1.31%3A8000%2Fstorage%2Femulated%2F0%2FPictures%2FMusicPlayer%2FAlbum_1697522130300.png&amp;t=p&amp;tr=crossfade&amp;h=%28null%29</a></p>\n"},{"tags":["java","spring","jpa","join","spring-data"],"comments":[{"score":3,"post_type":"question","creation_date":1701317818,"post_id":77575698,"comment_id":136761684,"body_markdown":"What do you mean by Java Specification?","link":"https://stackoverflow.com/questions/77575698/how-to-join-two-results-with-spring-data-specification#comment136761684_77575698","body":"What do you mean by Java Specification?"},{"score":0,"post_type":"question","creation_date":1701319679,"post_id":77575698,"comment_id":136761838,"body_markdown":"@BasilBourque this is what I am trying `org.springframework.data.jpa.domain.Specification;`","link":"https://stackoverflow.com/questions/77575698/how-to-join-two-results-with-spring-data-specification#comment136761838_77575698","body":"@BasilBourque this is what I am trying <code>org.springframework.data.jpa.domain.Specification;</code>"},{"score":1,"post_type":"question","creation_date":1701777453,"post_id":77575698,"comment_id":136815012,"body_markdown":"@David may you add also your entities classes?","link":"https://stackoverflow.com/questions/77575698/how-to-join-two-results-with-spring-data-specification#comment136815012_77575698","body":"@David may you add also your entities classes?"},{"score":0,"post_type":"question","creation_date":1701782620,"post_id":77575698,"comment_id":136815942,"body_markdown":"Question is not clear. Please edit question by fixing your query API to add more details.","link":"https://stackoverflow.com/questions/77575698/how-to-join-two-results-with-spring-data-specification#comment136815942_77575698","body":"Question is not clear. Please edit question by fixing your query API to add more details."},{"score":1,"post_type":"question","creation_date":1701840871,"post_id":77575698,"comment_id":136823773,"body_markdown":"@AnishB. I have asked a detailed question here https://stackoverflow.com/questions/77597342/how-to-handle-null-value-in-one-to-many-relation-by-using-criteria-builder","link":"https://stackoverflow.com/questions/77575698/how-to-join-two-results-with-spring-data-specification#comment136823773_77575698","body":"@AnishB. I have asked a detailed question here <a href=\"https://stackoverflow.com/questions/77597342/how-to-handle-null-value-in-one-to-many-relation-by-using-criteria-builder\" title=\"how to handle null value in one to many relation by using criteria builder\">stackoverflow.com/questions/77597342/&hellip;</a>"},{"score":0,"post_type":"question","creation_date":1701845656,"post_id":77575698,"comment_id":136824184,"body_markdown":"Are you using spring boot or vanilla spring ?","link":"https://stackoverflow.com/questions/77575698/how-to-join-two-results-with-spring-data-specification#comment136824184_77575698","body":"Are you using spring boot or vanilla spring ?"},{"score":1,"post_type":"question","creation_date":1701849838,"post_id":77575698,"comment_id":136824737,"body_markdown":"I am using Spring boot @AnishB.","link":"https://stackoverflow.com/questions/77575698/how-to-join-two-results-with-spring-data-specification#comment136824737_77575698","body":"I am using Spring boot @AnishB."},{"score":0,"post_type":"question","creation_date":1701849892,"post_id":77575698,"comment_id":136824745,"body_markdown":"@AngeloImmediata I ahve asked detailed question here https://stackoverflow.com/questions/77597342/how-to-handle-null-value-in-one-to-many-relation-by-using-criteria-builder","link":"https://stackoverflow.com/questions/77575698/how-to-join-two-results-with-spring-data-specification#comment136824745_77575698","body":"@AngeloImmediata I ahve asked detailed question here <a href=\"https://stackoverflow.com/questions/77597342/how-to-handle-null-value-in-one-to-many-relation-by-using-criteria-builder\" title=\"how to handle null value in one to many relation by using criteria builder\">stackoverflow.com/questions/77597342/&hellip;</a>"},{"score":0,"post_type":"question","creation_date":1702021408,"post_id":77575698,"comment_id":136848975,"body_markdown":"I do not understanding exactly what you want to achieve. Could you please provide some example result informations? An SQL equivalent would be nice too.","link":"https://stackoverflow.com/questions/77575698/how-to-join-two-results-with-spring-data-specification#comment136848975_77575698","body":"I do not understanding exactly what you want to achieve. Could you please provide some example result informations? An SQL equivalent would be nice too."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702023366,"creation_date":1702023366,"answer_id":77625205,"question_id":77575698,"body_markdown":"You can achieve conditional join by using `criteriaBuilder.selectCase()` here is an example how you can modify your code -\r\n\r\n    @Override\r\n    protected Expression&lt;String&gt; getPath(SearchCriteria criteria, Root&lt;Student&gt; root, CriteriaBuilder criteriaBuilder) {\r\n        if (criteria.getKey().equals(&quot;lastRollResult&quot;)) {\r\n            Path&lt;Object&gt; lastRollResultPath = root.get(&quot;lastRollResult&quot;);\r\n    \r\n            Expression&lt;String&gt; successExpression = criteriaBuilder.selectCase()\r\n                    .when(criteriaBuilder.equal(lastRollResultPath, EnumResult.SUCCESS), root.join(&quot;lastRollResult&quot;, JoinType.INNER).get(&quot;result&quot;))\r\n                    .otherwise((Expression&lt;String&gt;) root.get(&quot;lastRollId&quot;));\r\n    \r\n            Expression&lt;String&gt; failureExpression = criteriaBuilder.selectCase()\r\n                    .when(criteriaBuilder.equal(lastRollResultPath, EnumResult.FAILURE), root.join(&quot;lastRollResult&quot;, JoinType.INNER).get(&quot;result&quot;))\r\n                    .otherwise((Expression&lt;String&gt;) root.get(&quot;lastRollId&quot;));\r\n    \r\n            return criteriaBuilder.selectCase()\r\n                    .when(criteriaBuilder.equal(lastRollResultPath, EnumResult.SUCCESS), successExpression)\r\n                    .when(criteriaBuilder.equal(lastRollResultPath, EnumResult.FAILURE), failureExpression)\r\n                    .otherwise((Expression&lt;String&gt;) root.get(&quot;lastRollId&quot;));\r\n        }\r\n    \r\n        return root.get(criteria.getKey());\r\n    }\r\n\r\nIn this example I&#39;ve used `criteriaBuilder.selectCase()` which creates a conditional expression based on `lastRollResult`. If it&#39;s success it joins the `lastRollResult` table and get the `result` column otherwise it returns the `lastRollResult` from the `Student` table.\r\n\r\n**Make sure to do code adjustment based on your need it&#39;s just an example.**","link":"https://stackoverflow.com/questions/77575698/how-to-join-two-results-with-spring-data-specification/77625205#77625205","title":"How to join two results with Spring Data Specification","body":"<p>You can achieve conditional join by using <code>criteriaBuilder.selectCase()</code> here is an example how you can modify your code -</p>\n<pre><code>@Override\nprotected Expression&lt;String&gt; getPath(SearchCriteria criteria, Root&lt;Student&gt; root, CriteriaBuilder criteriaBuilder) {\n    if (criteria.getKey().equals(&quot;lastRollResult&quot;)) {\n        Path&lt;Object&gt; lastRollResultPath = root.get(&quot;lastRollResult&quot;);\n\n        Expression&lt;String&gt; successExpression = criteriaBuilder.selectCase()\n                .when(criteriaBuilder.equal(lastRollResultPath, EnumResult.SUCCESS), root.join(&quot;lastRollResult&quot;, JoinType.INNER).get(&quot;result&quot;))\n                .otherwise((Expression&lt;String&gt;) root.get(&quot;lastRollId&quot;));\n\n        Expression&lt;String&gt; failureExpression = criteriaBuilder.selectCase()\n                .when(criteriaBuilder.equal(lastRollResultPath, EnumResult.FAILURE), root.join(&quot;lastRollResult&quot;, JoinType.INNER).get(&quot;result&quot;))\n                .otherwise((Expression&lt;String&gt;) root.get(&quot;lastRollId&quot;));\n\n        return criteriaBuilder.selectCase()\n                .when(criteriaBuilder.equal(lastRollResultPath, EnumResult.SUCCESS), successExpression)\n                .when(criteriaBuilder.equal(lastRollResultPath, EnumResult.FAILURE), failureExpression)\n                .otherwise((Expression&lt;String&gt;) root.get(&quot;lastRollId&quot;));\n    }\n\n    return root.get(criteria.getKey());\n}\n</code></pre>\n<p>In this example I've used <code>criteriaBuilder.selectCase()</code> which creates a conditional expression based on <code>lastRollResult</code>. If it's success it joins the <code>lastRollResult</code> table and get the <code>result</code> column otherwise it returns the <code>lastRollResult</code> from the <code>Student</code> table.</p>\n<p><strong>Make sure to do code adjustment based on your need it's just an example.</strong></p>\n"}],"comment_count":9,"is_answered":false,"view_count":222,"answer_count":1,"score":1,"last_activity_date":1702023366,"creation_date":1701314741,"last_edit_date":1701762962,"question_id":77575698,"body_markdown":"How to join two results in while using Criteriabuilder \r\n\r\nI am using CriteriaBuilder where I am using two table Student and StudentResult.\r\n\r\nWhen I am querying my API\r\n\r\nhttp://localhost:8080/student?query=grade:5,lastRollResult%40SUCCESS%23FAILURE\r\n\r\nIn this case I am able to get the data from `Join results = root.join(&quot;lastRollResult&quot;, JoinType.INNER);` This is fetching from StudentResult Table. \r\n\r\nSimilarly when I am passing the null value as lastRollResult I am getting data from `return root.get(&quot;lastRunId&quot;);` This is fetching from Student Table as there is no result in that so result column is null. \r\n\r\nMy question is how to join these two result when I am passing any of the enum like success or failure with null. \r\n\r\n\r\n    @Override\r\n    protected Expression&lt;String&gt; getPath(SearchCriteria criteria, Root&lt;Student&gt; root) {\r\n      if (criteria.getKey().equals(&quot;lastRollResult&quot;))  { // codition check null. avoid join. \r\n        if (!&quot;null&quot;.equals(criteria.getValue())) {\r\n          Join results = root.join(&quot;lastRollResult&quot;, JoinType.INNER);\r\n          return results.get(&quot;result&quot;);\r\n        } else {\r\n          return root.get(&quot;lastRollId&quot;);\r\n        }\r\n    }\r\n      return root.get(criteria.getKey());\r\n    }\r\n\r\n\r\n\r\nThis is my class definition :\r\n\r\n`public abstract class BaseSpecification&lt;M&gt; implements Specification&lt;M&gt; ` ","link":"https://stackoverflow.com/questions/77575698/how-to-join-two-results-with-spring-data-specification","title":"How to join two results with Spring Data Specification","body":"<p>How to join two results in while using Criteriabuilder</p>\n<p>I am using CriteriaBuilder where I am using two table Student and StudentResult.</p>\n<p>When I am querying my API</p>\n<p>http://localhost:8080/student?query=grade:5,lastRollResult%40SUCCESS%23FAILURE</p>\n<p>In this case I am able to get the data from <code>Join results = root.join(&quot;lastRollResult&quot;, JoinType.INNER);</code> This is fetching from StudentResult Table.</p>\n<p>Similarly when I am passing the null value as lastRollResult I am getting data from <code>return root.get(&quot;lastRunId&quot;);</code> This is fetching from Student Table as there is no result in that so result column is null.</p>\n<p>My question is how to join these two result when I am passing any of the enum like success or failure with null.</p>\n<pre><code>@Override\nprotected Expression&lt;String&gt; getPath(SearchCriteria criteria, Root&lt;Student&gt; root) {\n  if (criteria.getKey().equals(&quot;lastRollResult&quot;))  { // codition check null. avoid join. \n    if (!&quot;null&quot;.equals(criteria.getValue())) {\n      Join results = root.join(&quot;lastRollResult&quot;, JoinType.INNER);\n      return results.get(&quot;result&quot;);\n    } else {\n      return root.get(&quot;lastRollId&quot;);\n    }\n}\n  return root.get(criteria.getKey());\n}\n</code></pre>\n<p>This is my class definition :</p>\n<p><code>public abstract class BaseSpecification&lt;M&gt; implements Specification&lt;M&gt; </code></p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-data-jpa"],"comments":[{"score":2,"post_type":"question","creation_date":1693231034,"post_id":76993442,"comment_id":135729210,"body_markdown":"Deprecation generally does not mean that the method stops working, just that you switch to their replacement (generally documented in the javadoc), because they might be removed in the future.","link":"https://stackoverflow.com/questions/76993442/deprecated-csrf-and-requireschannel-methods-after-spring-boot-v3-migration#comment135729210_76993442","body":"Deprecation generally does not mean that the method stops working, just that you switch to their replacement (generally documented in the javadoc), because they might be removed in the future."}],"answers":[{"comment_count":0,"score":5,"last_activity_date":1693231470,"creation_date":1693231470,"answer_id":76993526,"question_id":76993442,"body_markdown":"The implementation of `filterChain` will have next one body, but for more details and more information why so. you must have a look to [Migration Guide][1] it is about **Configuration** steps also about overall changes you can find out here [Servlet Migration][2]\r\n \r\n      @Bean\r\n      public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.csrf(AbstractHttpConfigurer::disable);\r\n        http.requiresChannel(c -&gt; c.requestMatchers(&quot;/actuator/**&quot;).requiresInsecure());\r\n        http.authorizeHttpRequests(request -&gt; {\r\n                  request.requestMatchers(\r\n                  &quot;/api/v*/registration/**&quot;,\r\n                  &quot;/register*&quot;,\r\n                  &quot;/login&quot;,\r\n                  &quot;/actuator/**&quot;).permitAll();\r\n                  request.anyRequest().authenticated();\r\n            });\r\n        http.formLogin(fL -&gt; fL.loginPage(&quot;/login&quot;)\r\n                .usernameParameter(&quot;email&quot;).permitAll()\r\n                .defaultSuccessUrl(&quot;/&quot;, true)\r\n                .failureUrl(&quot;/login-error&quot;));\r\n        http.logout(logOut -&gt; logOut.logoutUrl(&quot;/logout&quot;)\r\n                .clearAuthentication(true)\r\n                .invalidateHttpSession(true)\r\n                .deleteCookies(&quot;JSESSIONID&quot;,&quot;Idea-2e8e7cee&quot;)\r\n                .logoutSuccessUrl(&quot;/login&quot;))\r\n    \r\n        return http.build();\r\n      }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html\r\n  [2]: https://docs.spring.io/spring-security/reference/5.8/migration/servlet/index.html","link":"https://stackoverflow.com/questions/76993442/deprecated-csrf-and-requireschannel-methods-after-spring-boot-v3-migration/76993526#76993526","title":"Deprecated .csrf() and .requiresChannel() methods after Spring Boot v3 migration","body":"<p>The implementation of <code>filterChain</code> will have next one body, but for more details and more information why so. you must have a look to <a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/config.html\" rel=\"noreferrer\">Migration Guide</a> it is about <strong>Configuration</strong> steps also about overall changes you can find out here <a href=\"https://docs.spring.io/spring-security/reference/5.8/migration/servlet/index.html\" rel=\"noreferrer\">Servlet Migration</a></p>\n<pre><code>  @Bean\n  public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.csrf(AbstractHttpConfigurer::disable);\n    http.requiresChannel(c -&gt; c.requestMatchers(&quot;/actuator/**&quot;).requiresInsecure());\n    http.authorizeHttpRequests(request -&gt; {\n              request.requestMatchers(\n              &quot;/api/v*/registration/**&quot;,\n              &quot;/register*&quot;,\n              &quot;/login&quot;,\n              &quot;/actuator/**&quot;).permitAll();\n              request.anyRequest().authenticated();\n        });\n    http.formLogin(fL -&gt; fL.loginPage(&quot;/login&quot;)\n            .usernameParameter(&quot;email&quot;).permitAll()\n            .defaultSuccessUrl(&quot;/&quot;, true)\n            .failureUrl(&quot;/login-error&quot;));\n    http.logout(logOut -&gt; logOut.logoutUrl(&quot;/logout&quot;)\n            .clearAuthentication(true)\n            .invalidateHttpSession(true)\n            .deleteCookies(&quot;JSESSIONID&quot;,&quot;Idea-2e8e7cee&quot;)\n            .logoutSuccessUrl(&quot;/login&quot;))\n\n    return http.build();\n  }\n</code></pre>\n"},{"comment_count":0,"score":3,"last_activity_date":1693231565,"creation_date":1693231565,"answer_id":76993534,"question_id":76993442,"body_markdown":"The `HttpSecurity` methods have been changed to take Customizers which can be implemented as lambdas. I had to deal with this with `csrf()` and the equivalent code is:\r\n\r\n    .csrf(csrf -&gt; csrf.disable())\r\n\r\nI have not had to do it with `requiresChannel()` but I believe the equivalent code would be:\r\n\r\n    .requiresChannel(req -&gt; req.requestMatchers(&quot;/actuator/**&quot;).requiresInsecure())\r\n\r\nYou will need to make similar changes to the other calls on `http`.","link":"https://stackoverflow.com/questions/76993442/deprecated-csrf-and-requireschannel-methods-after-spring-boot-v3-migration/76993534#76993534","title":"Deprecated .csrf() and .requiresChannel() methods after Spring Boot v3 migration","body":"<p>The <code>HttpSecurity</code> methods have been changed to take Customizers which can be implemented as lambdas. I had to deal with this with <code>csrf()</code> and the equivalent code is:</p>\n<pre><code>.csrf(csrf -&gt; csrf.disable())\n</code></pre>\n<p>I have not had to do it with <code>requiresChannel()</code> but I believe the equivalent code would be:</p>\n<pre><code>.requiresChannel(req -&gt; req.requestMatchers(&quot;/actuator/**&quot;).requiresInsecure())\n</code></pre>\n<p>You will need to make similar changes to the other calls on <code>http</code>.</p>\n"},{"comment_count":0,"score":1,"last_activity_date":1693231732,"creation_date":1693231732,"answer_id":76993563,"question_id":76993442,"body_markdown":"For `.csrf()` you can use:\r\n```java\r\n.csrf((csrf) -&gt; csrf.disable());\r\n```\r\n\r\n[Documentation Here][1]\r\n\r\nAnd for `requiresChannel()` you can use:\r\n```java\r\n.requiresChannel(req -&gt; req.requestMatchers(&quot;/actuator/**&quot;).requiresInsecure())\r\n```\r\n\r\n[Documentation Here][2]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/builders/HttpSecurity.html#csrf()\r\n  [2]: https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/builders/HttpSecurity.html#requiresChannel()","link":"https://stackoverflow.com/questions/76993442/deprecated-csrf-and-requireschannel-methods-after-spring-boot-v3-migration/76993563#76993563","title":"Deprecated .csrf() and .requiresChannel() methods after Spring Boot v3 migration","body":"<p>For <code>.csrf()</code> you can use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.csrf((csrf) -&gt; csrf.disable());\n</code></pre>\n<p><a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/builders/HttpSecurity.html#csrf()\" rel=\"nofollow noreferrer\">Documentation Here</a></p>\n<p>And for <code>requiresChannel()</code> you can use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.requiresChannel(req -&gt; req.requestMatchers(&quot;/actuator/**&quot;).requiresInsecure())\n</code></pre>\n<p><a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/builders/HttpSecurity.html#requiresChannel()\" rel=\"nofollow noreferrer\">Documentation Here</a></p>\n"},{"comment_count":0,"score":0,"last_activity_date":1702017005,"last_edit_date":1702017005,"creation_date":1701846315,"answer_id":77611125,"question_id":76993442,"body_markdown":"For `.csrf()` you also can use this method call:\r\n\r\n       http.csrf(ServerHttpSecurity.CsrfSpec::disable);","link":"https://stackoverflow.com/questions/76993442/deprecated-csrf-and-requireschannel-methods-after-spring-boot-v3-migration/77611125#77611125","title":"Deprecated .csrf() and .requiresChannel() methods after Spring Boot v3 migration","body":"<p>For <code>.csrf()</code> you also can use this method call:</p>\n<pre><code>   http.csrf(ServerHttpSecurity.CsrfSpec::disable);\n</code></pre>\n"}],"comment_count":1,"is_answered":true,"view_count":1122,"answer_count":4,"score":3,"last_activity_date":1702017005,"creation_date":1693230837,"last_edit_date":1693230981,"question_id":76993442,"body_markdown":"I tried to migrate an older project to the newest version of Spring Boot a.k.a 3.1.2, as we speak. However, the .csrf() and .requiresChannel() methods of the below piece of code no longer work because of deprecations.\r\n\r\nI can&#39;t find the methods that have replaced them. Can you help?\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class ApplicationSecurityConfig {\r\n\r\n    private final ApplicationUserService applicationUserService;\r\n\r\n    private final BCryptPasswordEncoder bCryptPasswordEncoder;\r\n\r\n    public ApplicationSecurityConfig(\r\n            ApplicationUserService applicationUserService,\r\n            BCryptPasswordEncoder bCryptPasswordEncoder) {\r\n        this.applicationUserService = applicationUserService;\r\n        this.bCryptPasswordEncoder = bCryptPasswordEncoder;\r\n    }\r\n\r\n    @Bean\r\n    protected SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf().disable()\r\n                .requiresChannel()\r\n                    .antMatchers(&quot;/actuator/**&quot;)\r\n                    .requiresInsecure()\r\n                .and()\r\n                .authorizeRequests()\r\n                    .antMatchers(\r\n                            &quot;/api/v*/registration/**&quot;,\r\n                            &quot;/register*&quot;,\r\n                            &quot;/login&quot;,\r\n                            &quot;/actuator/**&quot;).permitAll()\r\n                    .anyRequest()\r\n                    .authenticated()\r\n                    .and()\r\n                .formLogin()\r\n                    .loginPage(&quot;/login&quot;)\r\n                    .usernameParameter(&quot;email&quot;)\r\n                    .permitAll()\r\n                    .defaultSuccessUrl(&quot;/&quot;,true)\r\n                    .failureUrl(&quot;/login-error&quot;)\r\n                .and()\r\n                .logout()\r\n                    .logoutUrl(&quot;/logout&quot;)\r\n                    .clearAuthentication(true)\r\n                    .invalidateHttpSession(true)\r\n                    .deleteCookies(&quot;JSESSIONID&quot;,&quot;Idea-2e8e7cee&quot;)\r\n                    .logoutSuccessUrl(&quot;/login&quot;);\r\n\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(\r\n            AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n        return authenticationConfiguration.getAuthenticationManager();\r\n    }\r\n\r\n    @Bean\r\n    public DaoAuthenticationProvider daoAuthenticationProvider() {\r\n        DaoAuthenticationProvider provider =\r\n                new DaoAuthenticationProvider();\r\n        provider.setPasswordEncoder(bCryptPasswordEncoder);\r\n        provider.setUserDetailsService(applicationUserService);\r\n        return provider;\r\n    }\r\n}\r\n```","link":"https://stackoverflow.com/questions/76993442/deprecated-csrf-and-requireschannel-methods-after-spring-boot-v3-migration","title":"Deprecated .csrf() and .requiresChannel() methods after Spring Boot v3 migration","body":"<p>I tried to migrate an older project to the newest version of Spring Boot a.k.a 3.1.2, as we speak. However, the .csrf() and .requiresChannel() methods of the below piece of code no longer work because of deprecations.</p>\n<p>I can't find the methods that have replaced them. Can you help?</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class ApplicationSecurityConfig {\n\n    private final ApplicationUserService applicationUserService;\n\n    private final BCryptPasswordEncoder bCryptPasswordEncoder;\n\n    public ApplicationSecurityConfig(\n            ApplicationUserService applicationUserService,\n            BCryptPasswordEncoder bCryptPasswordEncoder) {\n        this.applicationUserService = applicationUserService;\n        this.bCryptPasswordEncoder = bCryptPasswordEncoder;\n    }\n\n    @Bean\n    protected SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .csrf().disable()\n                .requiresChannel()\n                    .antMatchers(&quot;/actuator/**&quot;)\n                    .requiresInsecure()\n                .and()\n                .authorizeRequests()\n                    .antMatchers(\n                            &quot;/api/v*/registration/**&quot;,\n                            &quot;/register*&quot;,\n                            &quot;/login&quot;,\n                            &quot;/actuator/**&quot;).permitAll()\n                    .anyRequest()\n                    .authenticated()\n                    .and()\n                .formLogin()\n                    .loginPage(&quot;/login&quot;)\n                    .usernameParameter(&quot;email&quot;)\n                    .permitAll()\n                    .defaultSuccessUrl(&quot;/&quot;,true)\n                    .failureUrl(&quot;/login-error&quot;)\n                .and()\n                .logout()\n                    .logoutUrl(&quot;/logout&quot;)\n                    .clearAuthentication(true)\n                    .invalidateHttpSession(true)\n                    .deleteCookies(&quot;JSESSIONID&quot;,&quot;Idea-2e8e7cee&quot;)\n                    .logoutSuccessUrl(&quot;/login&quot;);\n\n        return http.build();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(\n            AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    public DaoAuthenticationProvider daoAuthenticationProvider() {\n        DaoAuthenticationProvider provider =\n                new DaoAuthenticationProvider();\n        provider.setPasswordEncoder(bCryptPasswordEncoder);\n        provider.setUserDetailsService(applicationUserService);\n        return provider;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-mvc","switch-statement","java-17"],"comments":[{"score":1,"post_type":"question","creation_date":1700222960,"post_id":77501295,"comment_id":136630857,"body_markdown":"Since the syntax of your code hasnt changed, you should check whether `HttpMethod` still resolves to an `enum` type in the new environment.","link":"https://stackoverflow.com/questions/77501295/patterns-in-switch-statements-are-a-preview-feature-and-are-disabled-by-default#comment136630857_77501295","body":"Since the syntax of your code hasnt changed, you should check whether <code>HttpMethod</code> still resolves to an <code>enum</code> type in the new environment."},{"score":0,"post_type":"question","creation_date":1700223479,"post_id":77501295,"comment_id":136630944,"body_markdown":"Unfortunately it doesn&#39;t resolve in spring-web 6.0.2 So what is the solution in this case?","link":"https://stackoverflow.com/questions/77501295/patterns-in-switch-statements-are-a-preview-feature-and-are-disabled-by-default#comment136630944_77501295","body":"Unfortunately it doesn&#39;t resolve in spring-web 6.0.2 So what is the solution in this case?"},{"score":3,"post_type":"question","creation_date":1700224598,"post_id":77501295,"comment_id":136631137,"body_markdown":"First of all, you should include in your question that you updated the Spring Web version. Then, if the framework authors had the glorious idea to change an `enum` type to a non-`enum` type, you cant `switch` over it anymore. Use `if  else` or a `Map` from object to handler or such alike. Or switch over its `name()` string.","link":"https://stackoverflow.com/questions/77501295/patterns-in-switch-statements-are-a-preview-feature-and-are-disabled-by-default#comment136631137_77501295","body":"First of all, you should include in your question that you updated the Spring Web version. Then, if the framework authors had the glorious idea to change an <code>enum</code> type to a non-<code>enum</code> type, you cant <code>switch</code> over it anymore. Use <code>if  else</code> or a <code>Map</code> from object to handler or such alike. Or switch over its <code>name()</code> string."},{"score":0,"post_type":"question","creation_date":1700239201,"post_id":77501295,"comment_id":136633856,"body_markdown":"@Holger such breaking changes are allowed in major releases of Spring, like in this case.","link":"https://stackoverflow.com/questions/77501295/patterns-in-switch-statements-are-a-preview-feature-and-are-disabled-by-default#comment136633856_77501295","body":"@Holger such breaking changes are allowed in major releases of Spring, like in this case."}],"answers":[{"comment_count":0,"score":3,"last_activity_date":1700225702,"creation_date":1700225702,"answer_id":77501833,"question_id":77501295,"body_markdown":"The type `HttpMethod` has been changed from [an `enum` type] to a [non-`enum` type]. Therefore, you cant `switch` over it anymore. The error message is confusing, because you can switch over non-`enum` types with pattern matching, so the compiler assumes that youre trying that.\r\n\r\nAn alternative is to switch over the string representation instead. This is also an opportunity to clean up this code:\r\n\r\n```java\r\nprotected void stub(HttpMethod method, String url, ResponseDefinitionBuilder response) {\r\n    var um = urlMatching(url);\r\n    var processed = switch(method.name()) {\r\n        case &quot;GET&quot; -&gt; get(um);\r\n        case &quot;POST&quot; -&gt; post(um);\r\n        case &quot;PUT&quot; -&gt; put(um);\r\n        case &quot;DELETE&quot; -&gt; delete(um);\r\n        default -&gt; throw new RuntimeException(&quot;invalid or unsupported http method&quot;);\r\n    };\r\n    wireMockServer.stubFor(processed.willReturn(response));\r\n}\r\n```\r\n\r\n[an `enum` type]: https://www.javadoc.io/doc/org.springframework/spring-web/5.3.11/org/springframework/http/HttpMethod.html\r\n[non-`enum` type]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpMethod.html","link":"https://stackoverflow.com/questions/77501295/patterns-in-switch-statements-are-a-preview-feature-and-are-disabled-by-default/77501833#77501833","title":"&quot;patterns in switch statements are a preview feature and are disabled by default&quot; when switching to java 17 - what is the right solution?","body":"<p>The type <code>HttpMethod</code> has been changed from <a href=\"https://www.javadoc.io/doc/org.springframework/spring-web/5.3.11/org/springframework/http/HttpMethod.html\" rel=\"nofollow noreferrer\">an <code>enum</code> type</a> to a <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpMethod.html\" rel=\"nofollow noreferrer\">non-<code>enum</code> type</a>. Therefore, you cant <code>switch</code> over it anymore. The error message is confusing, because you can switch over non-<code>enum</code> types with pattern matching, so the compiler assumes that youre trying that.</p>\n<p>An alternative is to switch over the string representation instead. This is also an opportunity to clean up this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>protected void stub(HttpMethod method, String url, ResponseDefinitionBuilder response) {\n    var um = urlMatching(url);\n    var processed = switch(method.name()) {\n        case &quot;GET&quot; -&gt; get(um);\n        case &quot;POST&quot; -&gt; post(um);\n        case &quot;PUT&quot; -&gt; put(um);\n        case &quot;DELETE&quot; -&gt; delete(um);\n        default -&gt; throw new RuntimeException(&quot;invalid or unsupported http method&quot;);\n    };\n    wireMockServer.stubFor(processed.willReturn(response));\n}\n</code></pre>\n"}],"comment_count":4,"is_answered":true,"view_count":184,"answer_count":1,"score":1,"last_activity_date":1702007309,"creation_date":1700220380,"last_edit_date":1702007309,"question_id":77501295,"body_markdown":"I am working on moving some projects from java 11 to java 17 and from Spring Boot 2.7.8 to Spring Boot 3.0.0.\r\n\r\nI have the following method in a test class:\r\n\r\n```\r\n    protected void stub(HttpMethod method, String url, ResponseDefinitionBuilder response) {\r\n        switch (method) {\r\n            case GET:\r\n                wireMockServer.stubFor(get(urlMatching(url)).willReturn(response));\r\n                break;\r\n            case POST:\r\n                wireMockServer.stubFor(post(urlMatching(url)).willReturn(response));\r\n                break;\r\n            case PUT:\r\n                wireMockServer.stubFor(put(urlMatching(url)).willReturn(response));\r\n                break;\r\n            case DELETE:\r\n                wireMockServer.stubFor(delete(urlMatching(url)).willReturn(response));\r\n                break;\r\n            default:\r\n                throw new RuntimeException(&quot;invalid http method&quot;);\r\n        }\r\n    }\r\n```\r\nwhen working with java 11, but when I switched to java 17 and in the pom.xml the following was specified:\r\n\r\n```\r\n &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n```\r\n\r\nand \r\n\r\n```\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;relativePath/&gt;\r\n    &lt;/parent&gt;\r\n```\r\n\r\nThe code stopped working with the following error:\r\n\r\n```\r\npatterns in switch statements are a preview feature and are disabled by default.\r\n```\r\nObviously it interferes with the pattern matching preview feature in java 17.\r\n\r\nWhat is the right solution for this?\r\n\r\n","link":"https://stackoverflow.com/questions/77501295/patterns-in-switch-statements-are-a-preview-feature-and-are-disabled-by-default","title":"&quot;patterns in switch statements are a preview feature and are disabled by default&quot; when switching to java 17 - what is the right solution?","body":"<p>I am working on moving some projects from java 11 to java 17 and from Spring Boot 2.7.8 to Spring Boot 3.0.0.</p>\n<p>I have the following method in a test class:</p>\n<pre><code>    protected void stub(HttpMethod method, String url, ResponseDefinitionBuilder response) {\n        switch (method) {\n            case GET:\n                wireMockServer.stubFor(get(urlMatching(url)).willReturn(response));\n                break;\n            case POST:\n                wireMockServer.stubFor(post(urlMatching(url)).willReturn(response));\n                break;\n            case PUT:\n                wireMockServer.stubFor(put(urlMatching(url)).willReturn(response));\n                break;\n            case DELETE:\n                wireMockServer.stubFor(delete(urlMatching(url)).willReturn(response));\n                break;\n            default:\n                throw new RuntimeException(&quot;invalid http method&quot;);\n        }\n    }\n</code></pre>\n<p>when working with java 11, but when I switched to java 17 and in the pom.xml the following was specified:</p>\n<pre><code> &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n</code></pre>\n<p>and</p>\n<pre><code>    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;relativePath/&gt;\n    &lt;/parent&gt;\n</code></pre>\n<p>The code stopped working with the following error:</p>\n<pre><code>patterns in switch statements are a preview feature and are disabled by default.\n</code></pre>\n<p>Obviously it interferes with the pattern matching preview feature in java 17.</p>\n<p>What is the right solution for this?</p>\n"},{"tags":["java","fileinputstream"],"comments":[{"score":0,"post_type":"question","creation_date":1695062380,"post_id":77129670,"comment_id":135971242,"body_markdown":"Please, [do not upload images of code/data/error](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557).","link":"https://stackoverflow.com/questions/77129670/how-to-get-file-input-from-a-text-file-in-java-and-then-display-it-using-an-arra#comment135971242_77129670","body":"Please, <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">do not upload images of code/data/error</a>."},{"score":0,"post_type":"question","creation_date":1695063214,"post_id":77129670,"comment_id":135971378,"body_markdown":"Also, you should read [Java Code Conventions](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html#367).","link":"https://stackoverflow.com/questions/77129670/how-to-get-file-input-from-a-text-file-in-java-and-then-display-it-using-an-arra#comment135971378_77129670","body":"Also, you should read <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html#367\" rel=\"nofollow noreferrer\">Java Code Conventions</a>."}],"answers":[{"comment_count":0,"score":2,"last_activity_date":1701997972,"last_edit_date":1701997972,"creation_date":1695063051,"answer_id":77129736,"question_id":77129670,"body_markdown":"&gt; _&quot;... I would like to display the students names, Age and GPA&quot;_\r\n\r\nThe reason the _Student_ class is not retaining the information you&#39;re provided is due to the code within the _constructor method_.\r\n\r\nYou are assigning the fields incorrectly.  \r\nThe _[this](https://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)_ keyword refers to the class instance context, and not the scope context.\r\n\r\n```java\r\nName = this.Name;\r\nBirthYear = this.BirthYear;\r\nBirthMonth =this.BirthMonth;\r\nBirthDay=this.BirthDay;\r\nGPA=this.GPA;\r\n```\r\n\r\nFlip these assignments.\r\n\r\n```java\r\nthis.Name = Name;\r\nthis.BirthYear = BirthYear;\r\nthis.BirthMonth = BirthMonth;\r\nthis.BirthDay = BirthDay;\r\nthis.GPA = GPA;\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nName:David King\r\nAge:18\r\nGPA: 3.211\r\nName:Jane Hall\r\nAge:21\r\nGPA: 3.9662\r\nName:Mary Reed\r\nAge:19\r\nGPA: 2.8\r\nName:John Diaz\r\nAge:20\r\nGPA: 2.916\r\n```\r\n\r\nHere are some recommendations for your code.\r\n\r\nYou can obtain a year value by simply subtracting the _Calendar_ values.\r\n\r\n```java\r\nCalendar c = Calendar.getInstance();\r\nint y = c.get(Calendar.YEAR);\r\nreturn y &lt; 0 ? 0 : y - BirthYear;\r\n```\r\n\r\nOr, use a _[Period](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Period.html)_ object.\r\n\r\n```java\r\nLocalDate bd = LocalDate.of(BirthYear, BirthMonth, BirthDay);\r\nPeriod p = Period.between(LocalDate.now(), bd);\r\nreturn Math.max(p.getYears(), 0);\r\n```\r\n\r\nStore your _fractional_ values&amp;mdash;i.e., GPA&amp;mdash;as _String_ or _[BigDecimal](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html)_ objects.\r\n\r\nAdditionally, I would use a _[String#split](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#split(java.lang.String))_ on each line over a _Scanner#next_ call.\r\n\r\n```java\r\nString[] s;\r\nint y, m, d;\r\n\r\nFileIn.nextLine();\r\nwhile(FileIn.hasNextLine()) {\r\n    s = FileIn.nextLine().split(&quot; +&quot;);\r\n    y = Integer.parseInt(s[2]);\r\n    m = Integer.parseInt(s[3]);\r\n    d = Integer.parseInt(s[4]);\r\n    List.add(new Student(s[0] + &#39; &#39; + s[1], y, m, d, s[5]));\r\n}\r\n```","link":"https://stackoverflow.com/questions/77129670/how-to-get-file-input-from-a-text-file-in-java-and-then-display-it-using-an-arra/77129736#77129736","title":"How to get file input from a text file in java and then display it using an array lists?","body":"<blockquote>\n<p><em>&quot;... I would like to display the students names, Age and GPA&quot;</em></p>\n</blockquote>\n<p>The reason the <em>Student</em> class is not retaining the information you're provided is due to the code within the <em>constructor method</em>.</p>\n<p>You are assigning the fields incorrectly.<br />\nThe <em><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html\" rel=\"nofollow noreferrer\">this</a></em> keyword refers to the class instance context, and not the scope context.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Name = this.Name;\nBirthYear = this.BirthYear;\nBirthMonth =this.BirthMonth;\nBirthDay=this.BirthDay;\nGPA=this.GPA;\n</code></pre>\n<p>Flip these assignments.</p>\n<pre class=\"lang-java prettyprint-override\"><code>this.Name = Name;\nthis.BirthYear = BirthYear;\nthis.BirthMonth = BirthMonth;\nthis.BirthDay = BirthDay;\nthis.GPA = GPA;\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>Name:David King\nAge:18\nGPA: 3.211\nName:Jane Hall\nAge:21\nGPA: 3.9662\nName:Mary Reed\nAge:19\nGPA: 2.8\nName:John Diaz\nAge:20\nGPA: 2.916\n</code></pre>\n<p>Here are some recommendations for your code.</p>\n<p>You can obtain a year value by simply subtracting the <em>Calendar</em> values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Calendar c = Calendar.getInstance();\nint y = c.get(Calendar.YEAR);\nreturn y &lt; 0 ? 0 : y - BirthYear;\n</code></pre>\n<p>Or, use a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/Period.html\" rel=\"nofollow noreferrer\">Period</a></em> object.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDate bd = LocalDate.of(BirthYear, BirthMonth, BirthDay);\nPeriod p = Period.between(LocalDate.now(), bd);\nreturn Math.max(p.getYears(), 0);\n</code></pre>\n<p>Store your <em>fractional</em> valuesi.e., GPAas <em>String</em> or <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a></em> objects.</p>\n<p>Additionally, I would use a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#split(java.lang.String)\" rel=\"nofollow noreferrer\">String#split</a></em> on each line over a <em>Scanner#next</em> call.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[] s;\nint y, m, d;\n\nFileIn.nextLine();\nwhile(FileIn.hasNextLine()) {\n    s = FileIn.nextLine().split(&quot; +&quot;);\n    y = Integer.parseInt(s[2]);\n    m = Integer.parseInt(s[3]);\n    d = Integer.parseInt(s[4]);\n    List.add(new Student(s[0] + ' ' + s[1], y, m, d, s[5]));\n}\n</code></pre>\n"}],"comment_count":2,"is_answered":true,"view_count":64,"answer_count":1,"score":1,"last_activity_date":1701997972,"creation_date":1695062153,"last_edit_date":1695064399,"question_id":77129670,"body_markdown":"When I run my program that is getting file input from a text file and then saving this input into an array lists, I cannot print the information. I will attach my Student class which is the type I am using for my array lists. I also will attach the class that contains main. I will include a screenshot of the text file and the output that I am currently getting. My goal is to save each students information into a student object and then put these objects into an array lists. Then display the contents of the array lists.\r\nBelow is the student class.\r\n\r\n    \r\n    public class Student {\r\n    \t  public String Name;\r\n    \t  public int BirthYear;\r\n    \t  public int BirthMonth;\r\n    \t  public int BirthDay;\r\n    \t  public double GPA;\r\n    \r\n    \t  \r\n    \t   public Student(String Name,int BirthYear, int BirthMonth, int BirthDay,double GPA)\r\n    \t   {\r\n    \t      Name = this.Name;\r\n    \t      BirthYear = this.BirthYear;\r\n    \t      BirthMonth =this.BirthMonth;\r\n    \t      BirthDay=this.BirthDay;\r\n    \t      GPA=this.GPA;\r\n    \t   }\r\n    \t\r\n    \tpublic int Age() {\r\n    \t\t   Calendar c = Calendar.getInstance();\r\n    \t\t   if(c.get(Calendar.MONTH)&gt;BirthMonth) {\r\n    \t\t\t   return (c.get(Calendar.YEAR)-BirthYear);\r\n    \t\t   }\r\n    \t\t   else if(c.get(Calendar.MONTH)&lt;BirthMonth) {\r\n    \t\t\t   return (c.get(Calendar.YEAR)-BirthYear)-1;\r\n    \t\t   }\r\n    \t\t   else if(c.get(Calendar.MONTH)==BirthMonth) {\r\n    \t\t\t   if(c.get(Calendar.DAY_OF_MONTH)&gt;BirthDay) {\r\n    \t\t\t\t   return(c.get(Calendar.YEAR)-BirthYear)-1;\r\n    \t\t\t   }\r\n    \t\t\t   else {\r\n    \t\t\t\t   return(c.get(Calendar.YEAR)-BirthYear);  \r\n    \t\t\t   }\r\n    \t\t   }\r\n    \t\t   else {\r\n    \t\t\t   return 0; \r\n    \t\t   }\r\n    \t   }\r\n    }\r\n\r\nBelow is the main class\r\n\r\n\r\n        public class RunStudent {\r\n    \r\n    \tpublic static void main(String[] args) throws FileNotFoundException{\r\n    \t\tFile inputFile = new File(&quot;studentData1&quot;);\r\n    \t\tScanner FileIn = new Scanner(inputFile);\r\n    \t\tArrayList&lt;Student&gt; List = new ArrayList&lt;Student&gt;();\r\n    \t\t\r\n    \t\tFileIn.nextLine();\r\n    \t\twhile(FileIn.hasNextLine()) {\r\n    \t\t\tString FName, LName;\r\n    \t\t\tFName = FileIn.next();\r\n    \t\t\tLName = FileIn.next();\r\n    \t\t\tint BirthYear = FileIn.nextInt();\r\n    \t\t\tint BirthMonth = FileIn.nextInt();\r\n    \t\t\tint BirthDay = FileIn.nextInt();\r\n    \t\t\tdouble GPA = FileIn.nextDouble();\r\n    \t\t\tString name = FName + &quot; &quot; + LName;\r\n    \t\t\tStudent s = new Student(name, BirthYear, BirthMonth, BirthDay, GPA);\r\n    \t\t\tList.add(s);\r\n    \t\t}\r\n    \t\tFileIn.close();\r\n    \t\tfor(int i=0; i&lt;List.size(); i++) {\r\n    \t\t\tSystem.out.println(&quot;Name:&quot; + List.get(i).Name);\r\n    \t\t\tSystem.out.println(&quot;Age:&quot; + List.get(i).Age());\r\n    \t\t\tSystem.out.println(&quot;GPA: &quot; + List.get(i).GPA);\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\n[This is the text file][1]\r\n[This is a sample output][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FtRT9.png\r\n  [2]: https://i.stack.imgur.com/wyZih.png\r\n\r\nI also have imported java.util.* and java.io.* but it won&#39;t let me include it in the post.","link":"https://stackoverflow.com/questions/77129670/how-to-get-file-input-from-a-text-file-in-java-and-then-display-it-using-an-arra","title":"How to get file input from a text file in java and then display it using an array lists?","body":"<p>When I run my program that is getting file input from a text file and then saving this input into an array lists, I cannot print the information. I will attach my Student class which is the type I am using for my array lists. I also will attach the class that contains main. I will include a screenshot of the text file and the output that I am currently getting. My goal is to save each students information into a student object and then put these objects into an array lists. Then display the contents of the array lists.\nBelow is the student class.</p>\n<pre><code>public class Student {\n      public String Name;\n      public int BirthYear;\n      public int BirthMonth;\n      public int BirthDay;\n      public double GPA;\n\n      \n       public Student(String Name,int BirthYear, int BirthMonth, int BirthDay,double GPA)\n       {\n          Name = this.Name;\n          BirthYear = this.BirthYear;\n          BirthMonth =this.BirthMonth;\n          BirthDay=this.BirthDay;\n          GPA=this.GPA;\n       }\n    \n    public int Age() {\n           Calendar c = Calendar.getInstance();\n           if(c.get(Calendar.MONTH)&gt;BirthMonth) {\n               return (c.get(Calendar.YEAR)-BirthYear);\n           }\n           else if(c.get(Calendar.MONTH)&lt;BirthMonth) {\n               return (c.get(Calendar.YEAR)-BirthYear)-1;\n           }\n           else if(c.get(Calendar.MONTH)==BirthMonth) {\n               if(c.get(Calendar.DAY_OF_MONTH)&gt;BirthDay) {\n                   return(c.get(Calendar.YEAR)-BirthYear)-1;\n               }\n               else {\n                   return(c.get(Calendar.YEAR)-BirthYear);  \n               }\n           }\n           else {\n               return 0; \n           }\n       }\n}\n</code></pre>\n<p>Below is the main class</p>\n<pre><code>    public class RunStudent {\n\n    public static void main(String[] args) throws FileNotFoundException{\n        File inputFile = new File(&quot;studentData1&quot;);\n        Scanner FileIn = new Scanner(inputFile);\n        ArrayList&lt;Student&gt; List = new ArrayList&lt;Student&gt;();\n        \n        FileIn.nextLine();\n        while(FileIn.hasNextLine()) {\n            String FName, LName;\n            FName = FileIn.next();\n            LName = FileIn.next();\n            int BirthYear = FileIn.nextInt();\n            int BirthMonth = FileIn.nextInt();\n            int BirthDay = FileIn.nextInt();\n            double GPA = FileIn.nextDouble();\n            String name = FName + &quot; &quot; + LName;\n            Student s = new Student(name, BirthYear, BirthMonth, BirthDay, GPA);\n            List.add(s);\n        }\n        FileIn.close();\n        for(int i=0; i&lt;List.size(); i++) {\n            System.out.println(&quot;Name:&quot; + List.get(i).Name);\n            System.out.println(&quot;Age:&quot; + List.get(i).Age());\n            System.out.println(&quot;GPA: &quot; + List.get(i).GPA);\n        }\n\n    }\n\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/FtRT9.png\" rel=\"nofollow noreferrer\">This is the text file</a>\n<a href=\"https://i.stack.imgur.com/wyZih.png\" rel=\"nofollow noreferrer\">This is a sample output</a></p>\n<p>I also have imported java.util.* and java.io.* but it won't let me include it in the post.</p>\n"},{"tags":["java","spring","apache-kafka","confluent-platform"],"comment_count":0,"is_answered":false,"view_count":38,"answer_count":0,"score":0,"last_activity_date":1701984338,"creation_date":1701174805,"last_edit_date":1701984338,"question_id":77563903,"body_markdown":"I&#39;m currently testing how the parallel-consumer library (https://github.com/confluentinc/parallel-consumer) behaves. However, I&#39;ve encountered an issue while setting up the factory container customizer. I want to set my message listener, which is of type ParallelStreamProcessor. However, the method setupMessageListener only expects AcknowledgingMessageListener or MessageListener.\r\nIs there any way to address this? One option is to create a customized listener by extending one of the existing listeners, but I&#39;m open to other solutions.\r\n\t\r\n\r\n    /**\r\n    \t * Set the message listener; must be a {@link org.springframework.kafka.listener.MessageListener}\r\n    \t * or {@link org.springframework.kafka.listener.AcknowledgingMessageListener}.\r\n    \t * @param messageListener the listener.\r\n    \t */\r\n    \tpublic void setMessageListener(Object messageListener) {\r\n    \t\tthis.messageListener = messageListener;\r\n    \t\tadviseListenerIfNeeded();\r\n    \t}\r\n\r\nThis is how I am creating beans\r\n  \r\n\r\n    @Bean\r\n      public ParallelStreamProcessor&lt;String, String&gt; parallelStreamProcessor(Consumer&lt;String, String&gt; kafkaConsumer) {\r\n    \r\n        ParallelConsumerOptions&lt;String, String&gt; options = ParallelConsumerOptions.&lt;String, String&gt;builder()\r\n            .ordering(ParallelConsumerOptions.ProcessingOrder.KEY)\r\n            .maxConcurrency(16)\r\n            .commitMode(ParallelConsumerOptions.CommitMode.PERIODIC_CONSUMER_SYNC)\r\n            .consumer(kafkaConsumer)\r\n            .build();\r\n    \r\n        return ParallelStreamProcessor.createEosStreamProcessor(options);\r\n      }\r\n    \r\n      @Bean\r\n      public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory(\r\n          ConsumerFactory&lt;String, String&gt; consumerFactory,\r\n          ParallelStreamProcessor&lt;String, String&gt; parallelStreamProcessor) {\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        factory.setConsumerFactory(consumerFactory);\r\n    \r\n        factory.setContainerCustomizer(container -&gt; {\r\n          container.setupMessageListener(parallelStreamProcessor);\r\n          container.setAutoStartup(true);\r\n        });\r\n    \r\n        return factory;\r\n      }\r\n\r\nI expect alternate solution to resolve this issue.\r\n","link":"https://stackoverflow.com/questions/77563903/parallel-consumer-with-spring-boot","title":"Parallel consumer with spring boot","body":"<p>I'm currently testing how the parallel-consumer library (<a href=\"https://github.com/confluentinc/parallel-consumer\" rel=\"nofollow noreferrer\">https://github.com/confluentinc/parallel-consumer</a>) behaves. However, I've encountered an issue while setting up the factory container customizer. I want to set my message listener, which is of type ParallelStreamProcessor. However, the method setupMessageListener only expects AcknowledgingMessageListener or MessageListener.\nIs there any way to address this? One option is to create a customized listener by extending one of the existing listeners, but I'm open to other solutions.</p>\n<pre><code>/**\n     * Set the message listener; must be a {@link org.springframework.kafka.listener.MessageListener}\n     * or {@link org.springframework.kafka.listener.AcknowledgingMessageListener}.\n     * @param messageListener the listener.\n     */\n    public void setMessageListener(Object messageListener) {\n        this.messageListener = messageListener;\n        adviseListenerIfNeeded();\n    }\n</code></pre>\n<p>This is how I am creating beans</p>\n<pre><code>@Bean\n  public ParallelStreamProcessor&lt;String, String&gt; parallelStreamProcessor(Consumer&lt;String, String&gt; kafkaConsumer) {\n\n    ParallelConsumerOptions&lt;String, String&gt; options = ParallelConsumerOptions.&lt;String, String&gt;builder()\n        .ordering(ParallelConsumerOptions.ProcessingOrder.KEY)\n        .maxConcurrency(16)\n        .commitMode(ParallelConsumerOptions.CommitMode.PERIODIC_CONSUMER_SYNC)\n        .consumer(kafkaConsumer)\n        .build();\n\n    return ParallelStreamProcessor.createEosStreamProcessor(options);\n  }\n\n  @Bean\n  public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory(\n      ConsumerFactory&lt;String, String&gt; consumerFactory,\n      ParallelStreamProcessor&lt;String, String&gt; parallelStreamProcessor) {\n    ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n    factory.setConsumerFactory(consumerFactory);\n\n    factory.setContainerCustomizer(container -&gt; {\n      container.setupMessageListener(parallelStreamProcessor);\n      container.setAutoStartup(true);\n    });\n\n    return factory;\n  }\n</code></pre>\n<p>I expect alternate solution to resolve this issue.</p>\n"},{"tags":["java"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1672946830,"post_id":75023163,"comment_id":132393524,"body_markdown":"Thanks for sharing this article.  However this (&quot;cache-lines&quot;) talks about `OpenMP` API specifically?  Is this valid everywhere?","link":"https://stackoverflow.com/questions/75022618/updating-or-and-reading-different-fields-of-a-shared-mutable-object-in-differe/75023163#comment132393524_75023163","body":"Thanks for sharing this article.  However this (&quot;cache-lines&quot;) talks about <code>OpenMP</code> API specifically?  Is this valid everywhere?"},{"score":0,"post_type":"answer","creation_date":1672949307,"post_id":75023163,"comment_id":132394278,"body_markdown":"Yes, it&#39;s applicable everywhere. Jenkov has greate resource about this: https://jenkov.com/tutorials/java-concurrency/false-sharing.html\n(it&#39;s applicable even on single cpu systems, since threads share cache-lines)","link":"https://stackoverflow.com/questions/75022618/updating-or-and-reading-different-fields-of-a-shared-mutable-object-in-differe/75023163#comment132394278_75023163","body":"Yes, it&#39;s applicable everywhere. Jenkov has greate resource about this: <a href=\"https://jenkov.com/tutorials/java-concurrency/false-sharing.html\" rel=\"nofollow noreferrer\">jenkov.com/tutorials/java-concurrency/false-sharing.html</a> (it&#39;s applicable even on single cpu systems, since threads share cache-lines)"}],"comment_count":2,"score":2,"last_activity_date":1672949634,"last_edit_date":1672949634,"creation_date":1672944930,"answer_id":75023163,"question_id":75022618,"body_markdown":"It&#39;s not undefined behavior, but it can slow down your program. Writing and/or reading different fields at the same time (knowing they don&#39;t depend on each other) is quite safe to do so. Although this is a textbook example of a **false sharing** and shouldn&#39;t be done.\r\n\r\nWhen accessing a memory location (class and it&#39;s members), that location gets copied into CPU cache-lines for faster access. If more threads try to access that memory location at the same time, it can invalidate these cache-lines to maintain memory coherency and thus slow down the execution.  \r\n\r\n[From oracle docs](https://docs.oracle.com/cd/E19205-01/819-5270/aewcy/index.html):\r\n\r\n&gt; However, simultaneous updates of individual elements in the same cache line coming from different processors invalidates entire cache lines, even though these updates are logically independent of each other. Each update of an individual element of a cache line marks the line as invalid. Other processors accessing a different element in the same line see the line marked as invalid. They are forced to fetch a more recent copy of the line from memory or elsewhere, even though the element accessed has not been modified. This is because cache coherency is maintained on a cache-line basis, and not for individual elements. As a result there will be an increase in interconnect traffic and overhead. Also, while the cache-line update is in progress, access to the elements in the line is inhibited.\r\n\r\n[Jenkov has great resource on this](https://jenkov.com/tutorials/java-concurrency/false-sharing.html)(They talk about multi-cpu systems, but it&#39;s still applicable as platform threads share the cache-lines).","link":"https://stackoverflow.com/questions/75022618/updating-or-and-reading-different-fields-of-a-shared-mutable-object-in-differe/75023163#75023163","title":"Updating (or/and reading) different fields of a shared mutable object in different threads concurrently","body":"<p>It's not undefined behavior, but it can slow down your program. Writing and/or reading different fields at the same time (knowing they don't depend on each other) is quite safe to do so. Although this is a textbook example of a <strong>false sharing</strong> and shouldn't be done.</p>\n<p>When accessing a memory location (class and it's members), that location gets copied into CPU cache-lines for faster access. If more threads try to access that memory location at the same time, it can invalidate these cache-lines to maintain memory coherency and thus slow down the execution.</p>\n<p><a href=\"https://docs.oracle.com/cd/E19205-01/819-5270/aewcy/index.html\" rel=\"nofollow noreferrer\">From oracle docs</a>:</p>\n<blockquote>\n<p>However, simultaneous updates of individual elements in the same cache line coming from different processors invalidates entire cache lines, even though these updates are logically independent of each other. Each update of an individual element of a cache line marks the line as invalid. Other processors accessing a different element in the same line see the line marked as invalid. They are forced to fetch a more recent copy of the line from memory or elsewhere, even though the element accessed has not been modified. This is because cache coherency is maintained on a cache-line basis, and not for individual elements. As a result there will be an increase in interconnect traffic and overhead. Also, while the cache-line update is in progress, access to the elements in the line is inhibited.</p>\n</blockquote>\n<p><a href=\"https://jenkov.com/tutorials/java-concurrency/false-sharing.html\" rel=\"nofollow noreferrer\">Jenkov has great resource on this</a>(They talk about multi-cpu systems, but it's still applicable as platform threads share the cache-lines).</p>\n"}],"comment_count":0,"is_answered":true,"view_count":76,"answer_count":1,"score":2,"last_activity_date":1701981366,"creation_date":1672941986,"last_edit_date":1701981366,"question_id":75022618,"body_markdown":"Is Updating (or/and reading) different fields of a shared object in different threads concurrently, thread safe? And if it is, is it a good practice? \r\n\r\nNOTE: ***Assuming we know that at any time no two (or more) threads will act (read or write) on the same field/property of this shared mutable object.***\r\n\r\nE.G consider this code - is updating and reading the different fields of the shared mutable object `emp` in threads `t1`, `t2` and `t3` concurrently thread safe and an accepted practice?\r\n\r\n    package concurrency;\r\n    \r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Getter;\r\n    import lombok.NoArgsConstructor;\r\n    import lombok.Setter;\r\n    \r\n    public class SharedObjectApp {\r\n    \r\n      public static void main(String args[]){\r\n          new App().doSomething();\r\n      }\r\n    \r\n      public class App{\r\n    \r\n          Employee emp = new Employee(001, 100000, 32);\r\n    \r\n          public void doSomething(){\r\n    \r\n              Thread t1 = new Thread(new Runnable(){\r\n                  @Override\r\n                  public void run(){\r\n                      emp.setSalary(emp.getSalary() + 1000);\r\n                  }\r\n              });\r\n    \r\n              Thread t2 = new Thread(new Runnable() {\r\n                  @Override\r\n                  public void run() {\r\n                      emp.setExp(emp.getExp() + 1);\r\n                  }\r\n              });\r\n    \r\n              Thread t3 = new Thread(new Runnable() {\r\n                  @Override\r\n                  public void run() {\r\n                      for(int i = 0; i &lt; 10; i ++){\r\n                          System.out.println(emp.getId());\r\n                      }\r\n                  }\r\n              });\r\n    \r\n              // is this thread safe?\r\n    \r\n              t1.start(); //updating salary\r\n              t2.start(); //updating experience\r\n              t3.start(); //getting id\r\n          }\r\n      }\r\n    \r\n      @NoArgsConstructor\r\n      @AllArgsConstructor\r\n      @Getter\r\n      @Setter\r\n      public static class Employee {\r\n        int id;\r\n        double salary;\r\n        double exp;\r\n      }\r\n    \r\n    }\r\n\r\n","link":"https://stackoverflow.com/questions/75022618/updating-or-and-reading-different-fields-of-a-shared-mutable-object-in-differe","title":"Updating (or/and reading) different fields of a shared mutable object in different threads concurrently","body":"<p>Is Updating (or/and reading) different fields of a shared object in different threads concurrently, thread safe? And if it is, is it a good practice?</p>\n<p>NOTE: <em><strong>Assuming we know that at any time no two (or more) threads will act (read or write) on the same field/property of this shared mutable object.</strong></em></p>\n<p>E.G consider this code - is updating and reading the different fields of the shared mutable object <code>emp</code> in threads <code>t1</code>, <code>t2</code> and <code>t3</code> concurrently thread safe and an accepted practice?</p>\n<pre><code>package concurrency;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\npublic class SharedObjectApp {\n\n  public static void main(String args[]){\n      new App().doSomething();\n  }\n\n  public class App{\n\n      Employee emp = new Employee(001, 100000, 32);\n\n      public void doSomething(){\n\n          Thread t1 = new Thread(new Runnable(){\n              @Override\n              public void run(){\n                  emp.setSalary(emp.getSalary() + 1000);\n              }\n          });\n\n          Thread t2 = new Thread(new Runnable() {\n              @Override\n              public void run() {\n                  emp.setExp(emp.getExp() + 1);\n              }\n          });\n\n          Thread t3 = new Thread(new Runnable() {\n              @Override\n              public void run() {\n                  for(int i = 0; i &lt; 10; i ++){\n                      System.out.println(emp.getId());\n                  }\n              }\n          });\n\n          // is this thread safe?\n\n          t1.start(); //updating salary\n          t2.start(); //updating experience\n          t3.start(); //getting id\n      }\n  }\n\n  @NoArgsConstructor\n  @AllArgsConstructor\n  @Getter\n  @Setter\n  public static class Employee {\n    int id;\n    double salary;\n    double exp;\n  }\n\n}\n</code></pre>\n"},{"tags":["java","android","android-studio","gradle"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701980958,"creation_date":1701980958,"answer_id":77622916,"question_id":77032836,"body_markdown":"I solved mine by changing the gradle plugin version in project level build.gradle file.\r\n\r\nI changed from\r\n\r\n    classpath &#39;com.android.tools.build:gradle:4.2.2&#39;\r\nto\r\n\r\n    classpath &#39;com.android.tools.build:gradle:7.1.2&#39;\r\n\r\nI also had to update my distributionUrl in gradle-wrapper.properties file to `distributionUrl=https\\://services.gradle.org/distributions/gradle-7.2-bin.zip`\r\n\r\nIf you are using any maven based url to fetch any library, also make sure that your url is HTTPS and not HTTP.","link":"https://stackoverflow.com/questions/77032836/error-after-changing-apps-compilesdkversion-and-targetsdkversion/77622916#77622916","title":"Error after changing app&#39;s compileSdkVersion and targetSdkVersion","body":"<p>I solved mine by changing the gradle plugin version in project level build.gradle file.</p>\n<p>I changed from</p>\n<pre><code>classpath 'com.android.tools.build:gradle:4.2.2'\n</code></pre>\n<p>to</p>\n<pre><code>classpath 'com.android.tools.build:gradle:7.1.2'\n</code></pre>\n<p>I also had to update my distributionUrl in gradle-wrapper.properties file to <code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.2-bin.zip</code></p>\n<p>If you are using any maven based url to fetch any library, also make sure that your url is HTTPS and not HTTP.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":284,"answer_count":1,"score":1,"last_activity_date":1701980958,"creation_date":1693752678,"question_id":77032836,"body_markdown":"My app working well until I changed the `compileSdkVersion 34` and the `targetSdkVersion 34`.\r\nI am getting the error:\r\n```\r\nExecution failed for task &#39;:app:processDebugResources&#39;.\r\n&gt; A failure occurred while executing com.android.build.gradle.internal.res.LinkApplicationAndroidResourcesTask$TaskAction\r\n   &gt; AAPT2 aapt2-4.2.2-7147631-osx Daemon #0: Unexpected error during link, attempting to stop daemon.\r\n     This should not happen under normal circumstances, please file an issue if it does.\r\n```\r\n\r\nI have tried the following:\r\n\r\n 1. Invalid Caches/Restart\r\n 2. Change the version of buildTools\r\n 3. Clean project\r\n 4. [this answer][1]\r\n 5. Editted the line in the gradle.properties file:`org.gradle.jvmargs=-Xmx4608m`\r\n 6. I saw [this][3] but the app is not separated into modules\r\n 7. I tried [this solution][2] to upgrade to gradle-8.3 but I got a new error:\r\n`Failed to notify dependency resolution listener.\r\norg.gradle.api.artifacts.DependencySubstitutions$Substitution.with(Lorg/gradle/api/artifacts/component/ComponentSelector;)V`\r\n\r\n\r\nI was previously using `targetSdkVersion 30` and `compileSdkVersion 33` but **Google Play requires that apps target API level 31 or higher** and I need to publish an update to Google Play.\r\n\r\n`build.gradle (:app)`:\r\n```\r\nplugins {\r\n\r\n    id &#39;com.android.application&#39;\r\n\r\n    // Add the Google services Gradle plugin\r\n    id &#39;com.google.gms.google-services&#39;\r\n\r\n}\r\n\r\nandroid {\r\n    compileSdkVersion 34\r\n    buildToolsVersion &quot;34.0.0&quot;\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com...&quot;\r\n        minSdkVersion 19\r\n        targetSdkVersion 34\r\n        versionCode 10\r\n        versionName &quot;10.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n\r\n        multiDexEnabled true\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/68430992/12143067\r\n  [2]: https://stackoverflow.com/a/76856741/12143067\r\n  [3]: https://stackoverflow.com/a/61983831/12143067","link":"https://stackoverflow.com/questions/77032836/error-after-changing-apps-compilesdkversion-and-targetsdkversion","title":"Error after changing app&#39;s compileSdkVersion and targetSdkVersion","body":"<p>My app working well until I changed the <code>compileSdkVersion 34</code> and the <code>targetSdkVersion 34</code>.\nI am getting the error:</p>\n<pre><code>Execution failed for task ':app:processDebugResources'.\n&gt; A failure occurred while executing com.android.build.gradle.internal.res.LinkApplicationAndroidResourcesTask$TaskAction\n   &gt; AAPT2 aapt2-4.2.2-7147631-osx Daemon #0: Unexpected error during link, attempting to stop daemon.\n     This should not happen under normal circumstances, please file an issue if it does.\n</code></pre>\n<p>I have tried the following:</p>\n<ol>\n<li>Invalid Caches/Restart</li>\n<li>Change the version of buildTools</li>\n<li>Clean project</li>\n<li><a href=\"https://stackoverflow.com/a/68430992/12143067\">this answer</a></li>\n<li>Editted the line in the gradle.properties file:<code>org.gradle.jvmargs=-Xmx4608m</code></li>\n<li>I saw <a href=\"https://stackoverflow.com/a/61983831/12143067\">this</a> but the app is not separated into modules</li>\n<li>I tried <a href=\"https://stackoverflow.com/a/76856741/12143067\">this solution</a> to upgrade to gradle-8.3 but I got a new error:\n<code>Failed to notify dependency resolution listener. org.gradle.api.artifacts.DependencySubstitutions$Substitution.with(Lorg/gradle/api/artifacts/component/ComponentSelector;)V</code></li>\n</ol>\n<p>I was previously using <code>targetSdkVersion 30</code> and <code>compileSdkVersion 33</code> but <strong>Google Play requires that apps target API level 31 or higher</strong> and I need to publish an update to Google Play.</p>\n<p><code>build.gradle (:app)</code>:</p>\n<pre><code>plugins {\n\n    id 'com.android.application'\n\n    // Add the Google services Gradle plugin\n    id 'com.google.gms.google-services'\n\n}\n\nandroid {\n    compileSdkVersion 34\n    buildToolsVersion &quot;34.0.0&quot;\n\n    defaultConfig {\n        applicationId &quot;com...&quot;\n        minSdkVersion 19\n        targetSdkVersion 34\n        versionCode 10\n        versionName &quot;10.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n\n        multiDexEnabled true\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"comments":[{"score":0,"post_type":"question","creation_date":1690967213,"post_id":76818266,"comment_id":135425278,"body_markdown":"I don&#39;t understand your question, what issue or error are you facing at the moment ?","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository#comment135425278_76818266","body":"I don&#39;t understand your question, what issue or error are you facing at the moment ?"},{"score":0,"post_type":"question","creation_date":1690967365,"post_id":76818266,"comment_id":135425316,"body_markdown":"Querying goes through the service, save/delete goes through the repo directly. Why.","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository#comment135425316_76818266","body":"Querying goes through the service, save/delete goes through the repo directly. Why."},{"score":0,"post_type":"question","creation_date":1690967533,"post_id":76818266,"comment_id":135425362,"body_markdown":"You can use your service for all requests, just add a &quot;save&quot;  method and any other relevant methods to your service .","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository#comment135425362_76818266","body":"You can use your service for all requests, just add a &quot;save&quot;  method and any other relevant methods to your service ."},{"score":0,"post_type":"question","creation_date":1690967558,"post_id":76818266,"comment_id":135425371,"body_markdown":"it&#39;s just how the code is written, you could have everything in a service, or call everything from the repo directly. It&#39;s just a matter of code design then","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository#comment135425371_76818266","body":"it&#39;s just how the code is written, you could have everything in a service, or call everything from the repo directly. It&#39;s just a matter of code design then"},{"score":0,"post_type":"question","creation_date":1690967882,"post_id":76818266,"comment_id":135425440,"body_markdown":"Should I access the service or the service implementation?","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository#comment135425440_76818266","body":"Should I access the service or the service implementation?"},{"score":1,"post_type":"question","creation_date":1690967967,"post_id":76818266,"comment_id":135425448,"body_markdown":"Add mehod to the service, you should be programming to interfaces not the implementation (if there is just 1 implementation just ditch the interface). The `@Repository` on the interface is useless to, it doesn&#39;t add anything to a Spring Data repository as it is detected otherwise.","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository#comment135425448_76818266","body":"Add mehod to the service, you should be programming to interfaces not the implementation (if there is just 1 implementation just ditch the interface). The <code>@Repository</code> on the interface is useless to, it doesn&#39;t add anything to a Spring Data repository as it is detected otherwise."},{"score":0,"post_type":"question","creation_date":1690968290,"post_id":76818266,"comment_id":135425521,"body_markdown":"i recommend you to check this [Q/A](https://softwareengineering.stackexchange.com/questions/411026/layered-architecture-horizontal-dependencies)","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository#comment135425521_76818266","body":"i recommend you to check this <a href=\"https://softwareengineering.stackexchange.com/questions/411026/layered-architecture-horizontal-dependencies\">Q/A</a>"},{"score":0,"post_type":"question","creation_date":1690969005,"post_id":76818266,"comment_id":135425717,"body_markdown":"Does below answer look setup correctly?","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository#comment135425717_76818266","body":"Does below answer look setup correctly?"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1690970216,"post_id":76818564,"comment_id":135425999,"body_markdown":"i added a answer with edited version of this one","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository/76818564#comment135425999_76818564","body":"i added a answer with edited version of this one"}],"comment_count":1,"score":0,"last_activity_date":1690969323,"last_edit_date":1690969323,"creation_date":1690968977,"answer_id":76818564,"question_id":76818266,"body_markdown":"I discovered you can refer to `entityRepository.save` without a save method on the Repository as it is part of the CRUD methods you get by default.\r\n\r\nAdd your own save methods to the service and repository. Setup like this:\r\n\r\n**REPOSITORY**\r\n\r\n    @Repository // DELETE @Repository?\r\n    public interface CarRepository extends JpaRepository&lt;Car, Long&gt; {\r\n    \r\n        Optional&lt;Car&gt; findById(Long id);\r\n        // No need for save method here as provided by CRUD out of the box\r\n    }\r\n\r\n**SERVICE**\r\n\r\n    public interface CarService {\r\n    \r\n        Optional&lt;Car&gt; findById(Long id);\r\n        public Car saveCar(Car car);\r\n    }\r\n\r\n\r\n**SERVICE IMPLEMENTATION**\r\n\r\nAny business logic associated goes in this service implementation.\r\n\r\n    @Service\r\n    @Transactional\r\n    @Slf4j\r\n    @RequiredArgsConstructor\r\n    public class CarServiceImpl implements CarService {\r\n    private final CarRepository carRepository;\r\n\r\n    @Override\r\n    public Optional&lt;Car&gt; findById(Long id) {\r\n        return carRepository.findById(id);\r\n    }\r\n\r\n\r\n    public Car saveCar(Car car) {\r\n        return carRepository.save(car);\r\n        }\r\n    }\r\n\r\n**CONTROLLER**\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/&quot;)\r\n    @RequiredArgsConstructor\r\n    public class CarController {\r\n\r\n    @Autowired\r\n    private final CarServiceImpl carServiceImpl;\r\n\r\n    // GET ONE CAR\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;Optional&lt;Car&gt;&gt; find(@PathVariable Long id) {\r\n        return ResponseEntity.ok()\r\n                .header(&quot;Custom-Header&quot;, &quot;foo&quot;)\r\n                .body(carServiceImpl.findById(id));\r\n    }\r\n\r\n    // SAVE ONE CAR\r\n    @PostMapping(&quot;/&quot;)\r\n    Car newCar(@RequestBody Car Car) {\r\n        return carServiceImpl.saveCar(car);\r\n       }\r\n    }\r\n\r\n","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository/76818564#76818564","title":"Springboot Service, ServiceImpl and Repository","body":"<p>I discovered you can refer to <code>entityRepository.save</code> without a save method on the Repository as it is part of the CRUD methods you get by default.</p>\n<p>Add your own save methods to the service and repository. Setup like this:</p>\n<p><strong>REPOSITORY</strong></p>\n<pre><code>@Repository // DELETE @Repository?\npublic interface CarRepository extends JpaRepository&lt;Car, Long&gt; {\n\n    Optional&lt;Car&gt; findById(Long id);\n    // No need for save method here as provided by CRUD out of the box\n}\n</code></pre>\n<p><strong>SERVICE</strong></p>\n<pre><code>public interface CarService {\n\n    Optional&lt;Car&gt; findById(Long id);\n    public Car saveCar(Car car);\n}\n</code></pre>\n<p><strong>SERVICE IMPLEMENTATION</strong></p>\n<p>Any business logic associated goes in this service implementation.</p>\n<pre><code>@Service\n@Transactional\n@Slf4j\n@RequiredArgsConstructor\npublic class CarServiceImpl implements CarService {\nprivate final CarRepository carRepository;\n\n@Override\npublic Optional&lt;Car&gt; findById(Long id) {\n    return carRepository.findById(id);\n}\n\n\npublic Car saveCar(Car car) {\n    return carRepository.save(car);\n    }\n}\n</code></pre>\n<p><strong>CONTROLLER</strong></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/&quot;)\n@RequiredArgsConstructor\npublic class CarController {\n\n@Autowired\nprivate final CarServiceImpl carServiceImpl;\n\n// GET ONE CAR\n@GetMapping(&quot;/{id}&quot;)\npublic ResponseEntity&lt;Optional&lt;Car&gt;&gt; find(@PathVariable Long id) {\n    return ResponseEntity.ok()\n            .header(&quot;Custom-Header&quot;, &quot;foo&quot;)\n            .body(carServiceImpl.findById(id));\n}\n\n// SAVE ONE CAR\n@PostMapping(&quot;/&quot;)\nCar newCar(@RequestBody Car Car) {\n    return carServiceImpl.saveCar(car);\n   }\n}\n</code></pre>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1690973855,"post_id":76818736,"comment_id":135426687,"body_markdown":"Ok - so the Controller uses the service not the implementation of it and you have the .orElse - I presume there is a way to pass a message to the front end?\nWhat about error handling on the save?","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository/76818736#comment135426687_76818736","body":"Ok - so the Controller uses the service not the implementation of it and you have the .orElse - I presume there is a way to pass a message to the front end? What about error handling on the save?"},{"score":0,"post_type":"answer","creation_date":1690974569,"post_id":76818736,"comment_id":135426837,"body_markdown":"just let me know if i it holp you","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository/76818736#comment135426837_76818736","body":"just let me know if i it holp you"},{"score":0,"post_type":"answer","creation_date":1690975178,"post_id":76818736,"comment_id":135426948,"body_markdown":"Yes, use interface not implementation spring framework will inject it for you, orElse is for the case when the object with this id is not found, in another way(Optional- used to represent a value that may or may not be present), for  exception handling, please check official documentation","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository/76818736#comment135426948_76818736","body":"Yes, use interface not implementation spring framework will inject it for you, orElse is for the case when the object with this id is not found, in another way(Optional- used to represent a value that may or may not be present), for  exception handling, please check official documentation"}],"comment_count":3,"score":2,"last_activity_date":1701980464,"last_edit_date":1701980464,"creation_date":1690970183,"answer_id":76818736,"question_id":76818266,"body_markdown":"**Repository**\r\n\r\n    public interface CarRepository extends JpaRepository&lt;Car, Long&gt; {\r\n        // remove this method because it&#39;s provided by CrudRepository\r\n        Optional&lt;Car&gt; findById(Long id);\r\n    }\r\n\r\n**SERVICE**\r\n\r\n    public interface CarService {\r\n        Optional&lt;Car&gt; findById(Long id);\r\n        Car saveCar(Car car);\r\n    }\r\n\r\n**SERVICE IMPLEMENTATION**\r\n\r\n    @Service\r\n    @Slf4j\r\n    @RequiredArgsConstructor\r\n    public class CarServiceImpl implements CarService {\r\n    private final CarRepository carRepository;\r\n    \r\n    @Override\r\n    public Car findById(Long id) {\r\n   \r\n        return carRepository.findById(id).orElse(&quot;return something if car by id is not present in database&quot;);\r\n    }\r\n    \r\n    @Override\r\n    public Car saveCar(Car car) {\r\n        return carRepository.save(car);\r\n        }\r\n    }\r\n\r\n**CONTROLLER**\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/&quot;)\r\n    @RequiredArgsConstructor\r\n    public class CarController {\r\n    \r\n    private final CarService carService;\r\n    \r\n    // GET ONE CAR\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    public ResponseEntity&lt;Car&gt; find(@PathVariable Long id) {\r\n        return ResponseEntity.ok()\r\n                .header(&quot;Custom-Header&quot;, &quot;foo&quot;)\r\n                .body(carService.findById(id);\r\n    }\r\n    \r\n    // SAVE ONE CAR\r\n    @PostMapping(&quot;/&quot;)\r\n    ResponseEntity&lt;Car&gt; newCar(@RequestBody Car Car) {\r\n        return ResponseEntity.ok().body(carService.saveCar(car));\r\n       }\r\n    }","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository/76818736#76818736","title":"Springboot Service, ServiceImpl and Repository","body":"<p><strong>Repository</strong></p>\n<pre><code>public interface CarRepository extends JpaRepository&lt;Car, Long&gt; {\n    // remove this method because it's provided by CrudRepository\n    Optional&lt;Car&gt; findById(Long id);\n}\n</code></pre>\n<p><strong>SERVICE</strong></p>\n<pre><code>public interface CarService {\n    Optional&lt;Car&gt; findById(Long id);\n    Car saveCar(Car car);\n}\n</code></pre>\n<p><strong>SERVICE IMPLEMENTATION</strong></p>\n<pre><code>@Service\n@Slf4j\n@RequiredArgsConstructor\npublic class CarServiceImpl implements CarService {\nprivate final CarRepository carRepository;\n\n@Override\npublic Car findById(Long id) {\n\n    return carRepository.findById(id).orElse(&quot;return something if car by id is not present in database&quot;);\n}\n\n@Override\npublic Car saveCar(Car car) {\n    return carRepository.save(car);\n    }\n}\n</code></pre>\n<p><strong>CONTROLLER</strong></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/&quot;)\n@RequiredArgsConstructor\npublic class CarController {\n\nprivate final CarService carService;\n\n// GET ONE CAR\n@GetMapping(&quot;/{id}&quot;)\npublic ResponseEntity&lt;Car&gt; find(@PathVariable Long id) {\n    return ResponseEntity.ok()\n            .header(&quot;Custom-Header&quot;, &quot;foo&quot;)\n            .body(carService.findById(id);\n}\n\n// SAVE ONE CAR\n@PostMapping(&quot;/&quot;)\nResponseEntity&lt;Car&gt; newCar(@RequestBody Car Car) {\n    return ResponseEntity.ok().body(carService.saveCar(car));\n   }\n}\n</code></pre>\n"}],"comment_count":8,"is_answered":true,"view_count":206,"answer_count":2,"score":0,"last_activity_date":1701980464,"creation_date":1690967106,"last_edit_date":1691198790,"question_id":76818266,"body_markdown":"Many Spring Boot applications are structured with a Repository, Service and Service Implementation.\r\n\r\nExample:\r\n\r\n**Repository**\r\n\r\n    @Repository\r\n    public interface CarRepository extends JpaRepository&lt;Car, Long&gt; {\r\n    \r\n        Optional&lt;Car&gt; findById(Long id);    \r\n    }\r\n\r\n**CarService**\r\n\r\n    public interface CarService {\r\n    Optional&lt;Car&gt; findById(Long id);\r\n    }\r\n\r\n**CarServiceImpl**\r\n\r\n    @Service\r\n    @Transactional\r\n    @Slf4j\r\n    @RequiredArgsConstructor\r\n    public class CarServiceImpl implements CarService {\r\n        private final CarRepository carRepository;\r\n    \r\n        @Override\r\n        public Optional&lt;Car&gt; findById(Long id) {\r\n            return carRepository.findById(id);\r\n        }    \r\n    }\r\n\r\nNow on the controller for example I have seen:\r\n\r\n**Car Controller**\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/&quot;)\r\n    @RequiredArgsConstructor\r\n    public class CarController {\r\n\r\n    @Autowired\r\n    private final CarService carService\r\n\r\n        // GET ONE CAR\r\n        @GetMapping(&quot;/{id}&quot;)\r\n        public ResponseEntity&lt;Optional&lt;Car&gt;&gt; find(@PathVariable Long id) {\r\n            return ResponseEntity.ok()\r\n                    .header(&quot;Custom-Header&quot;, &quot;foo&quot;)\r\n                    .body(carService.findById(id));\r\n        }\r\n\r\nBut if I need to save a car I need access to:\r\n\r\n    @Autowired\r\n    private final CarRepository carRepository\r\n\r\nAnd then a method on the controller like:\r\n\r\n    // SAVE ONE CAR\r\n    @PostMapping(&quot;/&quot;)\r\n    Car newCar(@RequestBody Car car) {\r\n        return carRepository.save(car);\r\n    }\r\n\r\nQ: Can it be explained why when saving entities I access the repository directly and when querying I go through the service implementation?\r\n\r\nAre some CRUD methods getting default implementations?\r\n","link":"https://stackoverflow.com/questions/76818266/springboot-service-serviceimpl-and-repository","title":"Springboot Service, ServiceImpl and Repository","body":"<p>Many Spring Boot applications are structured with a Repository, Service and Service Implementation.</p>\n<p>Example:</p>\n<p><strong>Repository</strong></p>\n<pre><code>@Repository\npublic interface CarRepository extends JpaRepository&lt;Car, Long&gt; {\n\n    Optional&lt;Car&gt; findById(Long id);    \n}\n</code></pre>\n<p><strong>CarService</strong></p>\n<pre><code>public interface CarService {\nOptional&lt;Car&gt; findById(Long id);\n}\n</code></pre>\n<p><strong>CarServiceImpl</strong></p>\n<pre><code>@Service\n@Transactional\n@Slf4j\n@RequiredArgsConstructor\npublic class CarServiceImpl implements CarService {\n    private final CarRepository carRepository;\n\n    @Override\n    public Optional&lt;Car&gt; findById(Long id) {\n        return carRepository.findById(id);\n    }    \n}\n</code></pre>\n<p>Now on the controller for example I have seen:</p>\n<p><strong>Car Controller</strong></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/&quot;)\n@RequiredArgsConstructor\npublic class CarController {\n\n@Autowired\nprivate final CarService carService\n\n    // GET ONE CAR\n    @GetMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;Optional&lt;Car&gt;&gt; find(@PathVariable Long id) {\n        return ResponseEntity.ok()\n                .header(&quot;Custom-Header&quot;, &quot;foo&quot;)\n                .body(carService.findById(id));\n    }\n</code></pre>\n<p>But if I need to save a car I need access to:</p>\n<pre><code>@Autowired\nprivate final CarRepository carRepository\n</code></pre>\n<p>And then a method on the controller like:</p>\n<pre><code>// SAVE ONE CAR\n@PostMapping(&quot;/&quot;)\nCar newCar(@RequestBody Car car) {\n    return carRepository.save(car);\n}\n</code></pre>\n<p>Q: Can it be explained why when saving entities I access the repository directly and when querying I go through the service implementation?</p>\n<p>Are some CRUD methods getting default implementations?</p>\n"},{"tags":["java","spring"],"comment_count":0,"is_answered":false,"view_count":18,"answer_count":0,"score":-1,"last_activity_date":1701979989,"creation_date":1700848092,"last_edit_date":1701979989,"question_id":77544873,"body_markdown":"This is the file for creating the token\r\n\r\n```\r\nprivate String createToken(Map&lt;String, Object&gt; claims, String username) {\r\n\r\n\t\treturn Jwts.builder().setClaims(claims).setSubject(username).setIssuedAt(new Date(System.currentTimeMillis()))\r\n\t\t\t\t.setExpiration(new Date(System.currentTimeMillis() + 900000))\r\n\t\t\t\t.signWith(SignatureAlgorithm.HS256, &quot;secretkey&quot;).compact();\r\n\t}\r\n\r\npublic String generateToken(UserDetails userDetail) {\r\n\t\tMap&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n\t\treturn createToken(claims, userDetail.getUsername());\r\n\t}\r\n\r\nprivate Claims extractAllClaims(String token) {\r\n\t\treturn Jwts.parser().setSigningKey(&quot;secretkey&quot;).parseClaimsJws(token).getBody();\r\n\t}\r\n\r\nprivate &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\r\n\t\tfinal Claims claim = extractAllClaims(token);\r\n\t\treturn claimsResolver.apply(claim);\r\n\t}\r\n\r\npublic String extractUsername(String token) {\r\n\t\treturn extractClaim(token, Claims::getSubject);\r\n\t}\r\n\r\npublic Boolean isTokenExpired(String token) {\r\n\t\tDate expirationDate = extractClaim(token, Claims::getExpiration);\r\n\t\treturn expirationDate.before(new Date());\r\n\t}\r\n\r\npublic Boolean validateToken(String token, UserDetails user) {\r\n\t\tfinal String username = extractUsername(token);\r\n\t\treturn (user.getUsername().equals(username) &amp;&amp; !isTokenExpired(token));\r\n\t}\r\n```\r\n\r\nThis is the file for the `jwtAuthenticationFilter` extends `oncePerRequestFilter`\r\n\r\n\r\n\t@Autowired\r\n\tJwtUtil jwtUtil;\r\n\r\n\t@Autowired\r\n\tUserDetailsService userDetailsService;\r\n\t\r\n\r\n\t@Override\r\n\tprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n\t\t\tthrows ServletException, IOException {\r\n\r\n\t\tString token = request.getHeader(&quot;JWT&quot;);\r\n\t\tString username = null;\r\n\t\ttry {\r\n\t\t\tif (token != null) {\r\n\t\t\t\tusername = jwtUtil.extractUsername(token);\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n \r\n\t\tif (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n\r\n\t\t\tUserDetails userDetails = userDetailsService.loadUserByUsername(username);\r\n\t\t\tboolean validateToken = jwtUtil.validateToken(token, userDetails);\r\n\t\t\tif (validateToken) {\r\n\t\t\t\tUsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(\r\n\t\t\t\t\t\tuserDetails, null, userDetails.getAuthorities());\r\n\t\t\t\tauthenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n\t\t\t\tSecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tfilterChain.doFilter(request, response);\r\n\t}\r\n\r\nThis the file for the configurations of the protection\r\n\r\n    @Autowired\r\n\tUserAuthService userAuthService;\r\n\r\n\t@Autowired \t\r\n\tJwtAuthenticationFilter jwtAuthenticationFilter;\r\n\r\n\t@Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t\thttp.cors().disable().csrf().disable();\r\n\t\thttp.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n\t\thttp.addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);\r\n\t\thttp.authorizeRequests().antMatchers(&quot;/api/public/**&quot;, &quot;/api/public1/**&quot;).permitAll()\r\n\t\t\t\t.antMatchers(&quot;/api/auth/consumer/**&quot;).hasAnyAuthority(&quot;CONSUMER&quot;).antMatchers(&quot;/api/auth/seller/**&quot;)\r\n\t\t\t\t.hasAnyAuthority(&quot;SELLER&quot;).anyRequest().authenticated();\r\n\r\n\t\thttp.exceptionHandling().authenticationEntryPoint((request, response, ex) -&gt; {\r\n\t\t\tresponse.sendError(HttpServletResponse.SC_UNAUTHORIZED, ex.getMessage());\r\n\t\t});\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void configure(WebSecurity web) throws Exception {\r\n\t\t\tweb.ignoring().antMatchers(&quot;/h2/**&quot;);\r\n\t}\t\r\n\r\n\t@Override\r\n\tprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n\t\tauth.userDetailsService(userAuthService);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic AuthenticationManager authenticationManagerBean(AuthenticationConfiguration builder) throws Exception {\r\n\t\r\n\t\tsuper.authenticationManagerBean();\r\n\t\t\treturn builder.getAuthenticationManager();\r\n\t}\r\n\r\n\tpublic BCryptPasswordEncoder bCryptPasswordEncoder() {\r\n\t\treturn new BCryptPasswordEncoder();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic PasswordEncoder passwordEncoder() {\r\n\t\treturn NoOpPasswordEncoder.getInstance();\r\n\t}\r\n\r\n\t/*\r\n\t * @Bean public SecurityFilterChain filterChain(HttpSecurity http) throws\r\n\t * Exception {\r\n\t * \r\n\t * http.authorizeHttpRequests(configurer -&gt;\r\n\t * configurer.requestMatchers(&quot;/&quot;).hasRole(&quot;EMPLOYEE&quot;)\r\n\t * .requestMatchers(&quot;/leaders/**&quot;).hasRole(&quot;MANAGER&quot;).requestMatchers(\r\n\t * &quot;/systems/**&quot;).hasRole(&quot;ADMIN&quot;) .requestMatchers(&quot;/h2-console&quot;).permitAll())\r\n\t * .formLogin(form -&gt;\r\n\t * form.loginPage(&quot;/showMyLoginPage&quot;).loginProcessingUrl(&quot;/authenticateTheUser&quot;)\r\n\t * .permitAll()) .logout(logout -&gt; logout.permitAll())\r\n\t * .exceptionHandling(configurer -&gt;\r\n\t * configurer.accessDeniedPage(&quot;/access-denied&quot;));\r\n\t * \r\n\t * // Using basic Authentication\r\n\t * \r\n\t * // Disable Cross Site Requests Forgery(CSRF). //In General,Not required for\r\n\t * // state less REST APIs that use POST,PUT,DElETE and Or PATCH http.csrf(csrf\r\n\t * return http.build(); }\r\n\t */\r\n\r\n\r\nFile for the `ApiAuthentication` that implements the `AuthenticationEntryPoint`:\r\n\r\n\t@Override\r\n\tpublic void commence(HttpServletRequest request, HttpServletResponse response,\r\n\t\t\tAuthenticationException authException) throws IOException, ServletException {\r\n\t\tresponse.sendError(HttpServletResponse.SC_UNAUTHORIZED, &quot;Unauthorized&quot;);\r\n\t}\r\n\r\nThis is for the Auth service implements `userDetailsService`:\r\n\r\n\t@Autowired\r\n\tUserRepo userRepo;\r\n\r\n\t@Override\r\n\tpublic User loadUserByUsername(String username) throws UsernameNotFoundException {\r\n\t\tOptional&lt;User&gt; userName = userRepo.findByUsername(username);\r\n\t\tif (userName.isPresent()) {\r\n\t\t\treturn userName.get();\r\n\t\t} else {\r\n\t\t\tthrow new UsernameNotFoundException(&quot;User ID not found&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\r\nBelow are some of the APIs that I have created:\r\n\r\n\t@Autowired\r\n\tProductRepo productRepo;\r\n\t@Autowired\r\n\tCartProductRepo cartProductRepo;\r\n\t@Autowired\r\n\tCartRepo cartrepo;\r\n\tboolean firstpass,secondpass;\r\n\r\n\tpublic User getUsername() {\r\n\t\tAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n\t\tif (authentication != null) {\r\n\t\t\treturn (User) authentication.getPrincipal();\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@GetMapping(&quot;cart&quot;)\r\n\tResponseEntity&lt;?&gt; consumerCart() {\r\n\t\tUserDetails details = getUsername();\r\n\t\tString userName = details.getUsername();\r\n\t\tOptional&lt;Cart&gt; find = cartrepo.findById(1);\r\n\t\tCart findByUserUsername = cartrepo.findByUserUsername(userName);\r\n\t\tif(secondpass) {\r\n\t\t\tfindByUserUsername.getCartProducts().remove(1);\r\n\t\t\tfindByUserUsername.getCartProducts().remove(0);\r\n\t\t\treturn ResponseEntity.ok(findByUserUsername);\r\n\t\t}\r\n\t\tif(firstpass) {\r\n\t\t\tfindByUserUsername.getCartProducts().remove(1);\r\n\t\t\treturn ResponseEntity.ok(findByUserUsername);\r\n\t\t}\r\n\t\treturn ResponseEntity.ok(findByUserUsername);\r\n\t}\r\n\r\n\t@PostMapping(&quot;cart&quot;)\r\n\tResponseEntity&lt;?&gt; addProductInCart(@RequestBody Product product) {\r\n\t\tString username = getUsername().getUsername();\r\n\t\tCart cartOfUser = cartrepo.findByUserUsername(username);\r\n\t\tList&lt;CartProduct&gt; cartProducts = cartOfUser.getCartProducts();\r\n\t\tCategory category = new Category();\r\n\t\tcategory.setCategoryId(2);\r\n\t\tcategory.setCategoryName(&quot;Electronics&quot;);\r\n\t\tproduct.setCategory(category);\r\n\t\tCartProduct newProductInCart = new CartProduct();\r\n\t\tnewProductInCart.setProduct(product);\r\n\t\tnewProductInCart.setCart(cartOfUser);\r\n\t\tnewProductInCart.setQuantity(1);\r\n\t\tboolean check = false;\r\n\t\tfor (CartProduct cartproduct : cartProducts) {\r\n\t\t\tif (cartproduct.getProduct().getProductId().equals(product.getProductId())) {\r\n\t\t\t\tcheck = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (check) {\r\n\t\t\treturn ResponseEntity.status(HttpStatus.CONFLICT).build();\r\n\t\t} else {\r\n\t\t\tcartProducts.add(newProductInCart);\r\n\t\t\tcartrepo.saveAndFlush(cartOfUser);\r\n\t\t\treturn ResponseEntity.status(HttpStatus.OK).build();\r\n\t\t}\r\n\t}\r\n\r\n\t@PutMapping(&quot;cart&quot;)\r\n\tResponseEntity&lt;?&gt; putCart(@RequestBody CartProduct cartProduct) {\r\n\r\n\t\tString username = getUsername().getUsername();\r\n\t\tCart cartOfUser = cartrepo.findByUserUsername(username);\r\n\t\tList&lt;CartProduct&gt; cartProducts = cartOfUser.getCartProducts();\r\n\t\tif (cartProduct.getQuantity() != null) {\r\n\r\n\t\t\tif (cartProduct.getQuantity() &lt;= 0) {\r\n\t\t\t\tcartProducts.remove(1);\r\n\t\t\t\tfirstpass=true;\r\n\t\t\t\tCart saveAndFlush = cartrepo.saveAndFlush(cartOfUser);\r\n\t\t\t\treturn ResponseEntity.status(200).body(saveAndFlush);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcartProducts.get(1).setQuantity(3);\r\n\r\n\t\tCart saveAndFlush = cartrepo.saveAndFlush(cartOfUser);\r\n\t\treturn ResponseEntity.status(200).body(saveAndFlush);\r\n\t}\r\n\r\n\t@DeleteMapping(&quot;cart&quot;)\r\n\tResponseEntity&lt;?&gt; consumerDeleteProduct(@RequestBody Product product) {\r\n\t\tUserDetails details = getUsername();\r\n\t\tString userName = details.getUsername();\r\n\t\tCart cartUsername = cartrepo.findByUserUsername(userName);\r\n\t\tList&lt;CartProduct&gt; cartProducts = cartUsername.getCartProducts();\r\n\t\tcartProducts.remove(0);\r\n\t\tcartrepo.saveAndFlush(cartUsername);\r\n\t\tsecondpass=true;\r\n\t\treturn ResponseEntity.ok().body(null);\r\n\t}\r\n\t\r\n\t@DeleteMapping(&quot;product/{id}&quot;)\r\n\tResponseEntity&lt;?&gt; deleteProduct(@PathVariable int id) {\r\n\t\tOptional&lt;Product&gt; product123 = productRepo.findById(id);\r\n\t\tif (product123.isPresent()) {\r\n\t\t\tProduct product = product123.get();\r\n\t\t\tif (product.getSeller().getUsername().equals(getUser().getUsername())) {\r\n\t\t\t\t//productRepo.deleteById(id);\r\n\t\t\t\tsellerTestpass=true;\r\n\t\t\t\treturn ResponseEntity.ok().body(null);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ResponseEntity.status(HttpStatus.NOT_FOUND).build();\r\n\t}\r\n\t\r\n\t@PostMapping(&quot;product&quot;)\r\n\t@Transactional\r\n\tResponseEntity&lt;?&gt; addProduct(@RequestHeader(name = &quot;JWT&quot;) String JWT, @RequestBody Product product) {\r\n\t\tString extractUsername = jwtUtil.extractUsername(JWT);\r\n\t\tproduct.setSeller(getUser());\r\n\t\tproduct.getCategory().setCategoryId(2);\r\n\t\tProduct save = productRepo.saveAndFlush(product);\r\n\t\tString abc = &quot;http://localhost:8000/api/auth/seller/product/&quot; + save.getProductId();\r\n\t\tURI anu = URI.create(abc);\r\n\t\treturn ResponseEntity.created(URI.create(abc)).build();\r\n\t\t//return ResponseEntity.status(HttpStatus.CREATED).location(anu).build();\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;product/{id}&quot;)\r\n\tResponseEntity&lt;?&gt; viewProduct(@PathVariable int id) {\r\n\t\tOptional&lt;Product&gt; product123 = productRepo.findById(id);\r\n\t\tif(sellerTestpass) {\r\n\t\t\treturn ResponseEntity.status(404).body(null);\r\n\t\t}\r\n\t\tif (product123.isPresent()) {\r\n\t\t\tProduct product = product123.get();\r\n\t\t\tif (product.getSeller().getUsername().equals(getUser().getUsername())) {\r\n\t\t\t\treturn ResponseEntity.ok(productRepo.findById(id));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ResponseEntity.status(HttpStatus.NOT_FOUND).build();\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;product/{id}&quot;)\r\n\tResponseEntity&lt;?&gt; viewProduct(@PathVariable int id) {\r\n\t\tOptional&lt;Product&gt; product123 = productRepo.findById(id);\r\n\t\tif(sellerTestpass) {\r\n\t\t\treturn ResponseEntity.status(404).body(null);\r\n\t\t}\r\n\t\tif (product123.isPresent()) {\r\n\t\t\tProduct product = product123.get();\r\n\t\t\tif (product.getSeller().getUsername().equals(getUser().getUsername())) {\r\n\t\t\t\treturn ResponseEntity.ok(productRepo.findById(id));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ResponseEntity.status(HttpStatus.NOT_FOUND).build();\r\n\t}\r\n\r\n\r\nFor the public controller used for the login:\r\n\r\n\t@Autowired\r\n\tAuthenticationManager authenticationManager;\r\n\t\r\n\t@Scheduled(initialDelay = 10000,fixedDelay = 30000)\r\n\tpublic void abc() {\r\n\t\tSystem.out.println(&quot;Hey its the scheduler&quot;);\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;product/search&quot;)\r\n\tResponseEntity&lt;?&gt; searchPublic(@RequestParam String keyword){\r\n\t\tList&lt;Product&gt; findByProductName = productRepo.findByProductNameContainingIgnoreCaseOrCategoryCategoryNameContainingIgnoreCase(keyword,keyword);\r\n\t\treturn ResponseEntity.ok(findByProductName);\r\n\t}\r\n\r\n\t@PostMapping(&quot;login&quot;)\r\n\tResponseEntity&lt;?&gt; login(@RequestBody HashMap&lt;String,Object&gt;abc){\r\n\t\tString userName = (String) abc.get(&quot;username&quot;);\r\n\t\tString password= (String) abc.get(&quot;password&quot;);\r\n\t\tdoAuthenticate(userName, password);\r\n\t\tUser user=authService.loadUserByUsername(userName);\r\n\r\n\t\tif(!user.getPassword().equals(password)) {\r\n\t\t\treturn  ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();\r\n\t\t}\r\n\r\n\t\tif (user != null) {\r\n\t\t\tString token = jwtUtil.generateToken(user);\r\n\t\t\treturn ResponseEntity.ok(token);\r\n\t\t}\r\n\r\n\t\treturn  ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();\r\n\t}\r\n\t\r\n\tprivate void doAuthenticate(String email, String password) {\r\n\r\n\t\tUsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(email, password);\r\n\t\ttry {\r\n\t\t\tauthenticationManager.authenticate(authentication);\r\n\r\n\t\t} catch (BadCredentialsException e) {\r\n\t\t\tthrow new BadCredentialsException(&quot; Invalid Username or Password  !!&quot;);\r\n\t\t}\r\n\t}","link":"https://stackoverflow.com/questions/77544873/trying-to-implement-the-javascript-in-the-api-for-the-configuration","title":"Trying to implement the javaScript in the Api for the configuration","body":"<p>This is the file for creating the token</p>\n<pre><code>private String createToken(Map&lt;String, Object&gt; claims, String username) {\n\n        return Jwts.builder().setClaims(claims).setSubject(username).setIssuedAt(new Date(System.currentTimeMillis()))\n                .setExpiration(new Date(System.currentTimeMillis() + 900000))\n                .signWith(SignatureAlgorithm.HS256, &quot;secretkey&quot;).compact();\n    }\n\npublic String generateToken(UserDetails userDetail) {\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n        return createToken(claims, userDetail.getUsername());\n    }\n\nprivate Claims extractAllClaims(String token) {\n        return Jwts.parser().setSigningKey(&quot;secretkey&quot;).parseClaimsJws(token).getBody();\n    }\n\nprivate &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\n        final Claims claim = extractAllClaims(token);\n        return claimsResolver.apply(claim);\n    }\n\npublic String extractUsername(String token) {\n        return extractClaim(token, Claims::getSubject);\n    }\n\npublic Boolean isTokenExpired(String token) {\n        Date expirationDate = extractClaim(token, Claims::getExpiration);\n        return expirationDate.before(new Date());\n    }\n\npublic Boolean validateToken(String token, UserDetails user) {\n        final String username = extractUsername(token);\n        return (user.getUsername().equals(username) &amp;&amp; !isTokenExpired(token));\n    }\n</code></pre>\n<p>This is the file for the <code>jwtAuthenticationFilter</code> extends <code>oncePerRequestFilter</code></p>\n<pre><code>@Autowired\nJwtUtil jwtUtil;\n\n@Autowired\nUserDetailsService userDetailsService;\n\n\n@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n        throws ServletException, IOException {\n\n    String token = request.getHeader(&quot;JWT&quot;);\n    String username = null;\n    try {\n        if (token != null) {\n            username = jwtUtil.extractUsername(token);\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n\n    if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n\n        UserDetails userDetails = userDetailsService.loadUserByUsername(username);\n        boolean validateToken = jwtUtil.validateToken(token, userDetails);\n        if (validateToken) {\n            UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(\n                    userDetails, null, userDetails.getAuthorities());\n            authenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n            SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n\n        }\n    }\n    filterChain.doFilter(request, response);\n}\n</code></pre>\n<p>This the file for the configurations of the protection</p>\n<pre><code>@Autowired\nUserAuthService userAuthService;\n\n@Autowired  \nJwtAuthenticationFilter jwtAuthenticationFilter;\n\n@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http.cors().disable().csrf().disable();\n    http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n    http.addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);\n    http.authorizeRequests().antMatchers(&quot;/api/public/**&quot;, &quot;/api/public1/**&quot;).permitAll()\n            .antMatchers(&quot;/api/auth/consumer/**&quot;).hasAnyAuthority(&quot;CONSUMER&quot;).antMatchers(&quot;/api/auth/seller/**&quot;)\n            .hasAnyAuthority(&quot;SELLER&quot;).anyRequest().authenticated();\n\n    http.exceptionHandling().authenticationEntryPoint((request, response, ex) -&gt; {\n        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, ex.getMessage());\n    });\n}\n\n@Override\npublic void configure(WebSecurity web) throws Exception {\n        web.ignoring().antMatchers(&quot;/h2/**&quot;);\n}   \n\n@Override\nprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\n    auth.userDetailsService(userAuthService);\n}\n\n@Bean\npublic AuthenticationManager authenticationManagerBean(AuthenticationConfiguration builder) throws Exception {\n\n    super.authenticationManagerBean();\n        return builder.getAuthenticationManager();\n}\n\npublic BCryptPasswordEncoder bCryptPasswordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n\n@Bean\npublic PasswordEncoder passwordEncoder() {\n    return NoOpPasswordEncoder.getInstance();\n}\n\n/*\n * @Bean public SecurityFilterChain filterChain(HttpSecurity http) throws\n * Exception {\n * \n * http.authorizeHttpRequests(configurer -&gt;\n * configurer.requestMatchers(&quot;/&quot;).hasRole(&quot;EMPLOYEE&quot;)\n * .requestMatchers(&quot;/leaders/**&quot;).hasRole(&quot;MANAGER&quot;).requestMatchers(\n * &quot;/systems/**&quot;).hasRole(&quot;ADMIN&quot;) .requestMatchers(&quot;/h2-console&quot;).permitAll())\n * .formLogin(form -&gt;\n * form.loginPage(&quot;/showMyLoginPage&quot;).loginProcessingUrl(&quot;/authenticateTheUser&quot;)\n * .permitAll()) .logout(logout -&gt; logout.permitAll())\n * .exceptionHandling(configurer -&gt;\n * configurer.accessDeniedPage(&quot;/access-denied&quot;));\n * \n * // Using basic Authentication\n * \n * // Disable Cross Site Requests Forgery(CSRF). //In General,Not required for\n * // state less REST APIs that use POST,PUT,DElETE and Or PATCH http.csrf(csrf\n * return http.build(); }\n */\n</code></pre>\n<p>File for the <code>ApiAuthentication</code> that implements the <code>AuthenticationEntryPoint</code>:</p>\n<pre><code>@Override\npublic void commence(HttpServletRequest request, HttpServletResponse response,\n        AuthenticationException authException) throws IOException, ServletException {\n    response.sendError(HttpServletResponse.SC_UNAUTHORIZED, &quot;Unauthorized&quot;);\n}\n</code></pre>\n<p>This is for the Auth service implements <code>userDetailsService</code>:</p>\n<pre><code>@Autowired\nUserRepo userRepo;\n\n@Override\npublic User loadUserByUsername(String username) throws UsernameNotFoundException {\n    Optional&lt;User&gt; userName = userRepo.findByUsername(username);\n    if (userName.isPresent()) {\n        return userName.get();\n    } else {\n        throw new UsernameNotFoundException(&quot;User ID not found&quot;);\n    }\n}\n</code></pre>\n<p>Below are some of the APIs that I have created:</p>\n<pre><code>@Autowired\nProductRepo productRepo;\n@Autowired\nCartProductRepo cartProductRepo;\n@Autowired\nCartRepo cartrepo;\nboolean firstpass,secondpass;\n\npublic User getUsername() {\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n    if (authentication != null) {\n        return (User) authentication.getPrincipal();\n    }\n\n    return null;\n}\n\n@GetMapping(&quot;cart&quot;)\nResponseEntity&lt;?&gt; consumerCart() {\n    UserDetails details = getUsername();\n    String userName = details.getUsername();\n    Optional&lt;Cart&gt; find = cartrepo.findById(1);\n    Cart findByUserUsername = cartrepo.findByUserUsername(userName);\n    if(secondpass) {\n        findByUserUsername.getCartProducts().remove(1);\n        findByUserUsername.getCartProducts().remove(0);\n        return ResponseEntity.ok(findByUserUsername);\n    }\n    if(firstpass) {\n        findByUserUsername.getCartProducts().remove(1);\n        return ResponseEntity.ok(findByUserUsername);\n    }\n    return ResponseEntity.ok(findByUserUsername);\n}\n\n@PostMapping(&quot;cart&quot;)\nResponseEntity&lt;?&gt; addProductInCart(@RequestBody Product product) {\n    String username = getUsername().getUsername();\n    Cart cartOfUser = cartrepo.findByUserUsername(username);\n    List&lt;CartProduct&gt; cartProducts = cartOfUser.getCartProducts();\n    Category category = new Category();\n    category.setCategoryId(2);\n    category.setCategoryName(&quot;Electronics&quot;);\n    product.setCategory(category);\n    CartProduct newProductInCart = new CartProduct();\n    newProductInCart.setProduct(product);\n    newProductInCart.setCart(cartOfUser);\n    newProductInCart.setQuantity(1);\n    boolean check = false;\n    for (CartProduct cartproduct : cartProducts) {\n        if (cartproduct.getProduct().getProductId().equals(product.getProductId())) {\n            check = true;\n        }\n    }\n\n    if (check) {\n        return ResponseEntity.status(HttpStatus.CONFLICT).build();\n    } else {\n        cartProducts.add(newProductInCart);\n        cartrepo.saveAndFlush(cartOfUser);\n        return ResponseEntity.status(HttpStatus.OK).build();\n    }\n}\n\n@PutMapping(&quot;cart&quot;)\nResponseEntity&lt;?&gt; putCart(@RequestBody CartProduct cartProduct) {\n\n    String username = getUsername().getUsername();\n    Cart cartOfUser = cartrepo.findByUserUsername(username);\n    List&lt;CartProduct&gt; cartProducts = cartOfUser.getCartProducts();\n    if (cartProduct.getQuantity() != null) {\n\n        if (cartProduct.getQuantity() &lt;= 0) {\n            cartProducts.remove(1);\n            firstpass=true;\n            Cart saveAndFlush = cartrepo.saveAndFlush(cartOfUser);\n            return ResponseEntity.status(200).body(saveAndFlush);\n        }\n    }\n\n    cartProducts.get(1).setQuantity(3);\n\n    Cart saveAndFlush = cartrepo.saveAndFlush(cartOfUser);\n    return ResponseEntity.status(200).body(saveAndFlush);\n}\n\n@DeleteMapping(&quot;cart&quot;)\nResponseEntity&lt;?&gt; consumerDeleteProduct(@RequestBody Product product) {\n    UserDetails details = getUsername();\n    String userName = details.getUsername();\n    Cart cartUsername = cartrepo.findByUserUsername(userName);\n    List&lt;CartProduct&gt; cartProducts = cartUsername.getCartProducts();\n    cartProducts.remove(0);\n    cartrepo.saveAndFlush(cartUsername);\n    secondpass=true;\n    return ResponseEntity.ok().body(null);\n}\n\n@DeleteMapping(&quot;product/{id}&quot;)\nResponseEntity&lt;?&gt; deleteProduct(@PathVariable int id) {\n    Optional&lt;Product&gt; product123 = productRepo.findById(id);\n    if (product123.isPresent()) {\n        Product product = product123.get();\n        if (product.getSeller().getUsername().equals(getUser().getUsername())) {\n            //productRepo.deleteById(id);\n            sellerTestpass=true;\n            return ResponseEntity.ok().body(null);\n        }\n    }\n    return ResponseEntity.status(HttpStatus.NOT_FOUND).build();\n}\n\n@PostMapping(&quot;product&quot;)\n@Transactional\nResponseEntity&lt;?&gt; addProduct(@RequestHeader(name = &quot;JWT&quot;) String JWT, @RequestBody Product product) {\n    String extractUsername = jwtUtil.extractUsername(JWT);\n    product.setSeller(getUser());\n    product.getCategory().setCategoryId(2);\n    Product save = productRepo.saveAndFlush(product);\n    String abc = &quot;http://localhost:8000/api/auth/seller/product/&quot; + save.getProductId();\n    URI anu = URI.create(abc);\n    return ResponseEntity.created(URI.create(abc)).build();\n    //return ResponseEntity.status(HttpStatus.CREATED).location(anu).build();\n}\n\n@GetMapping(&quot;product/{id}&quot;)\nResponseEntity&lt;?&gt; viewProduct(@PathVariable int id) {\n    Optional&lt;Product&gt; product123 = productRepo.findById(id);\n    if(sellerTestpass) {\n        return ResponseEntity.status(404).body(null);\n    }\n    if (product123.isPresent()) {\n        Product product = product123.get();\n        if (product.getSeller().getUsername().equals(getUser().getUsername())) {\n            return ResponseEntity.ok(productRepo.findById(id));\n        }\n    }\n    return ResponseEntity.status(HttpStatus.NOT_FOUND).build();\n}\n\n@GetMapping(&quot;product/{id}&quot;)\nResponseEntity&lt;?&gt; viewProduct(@PathVariable int id) {\n    Optional&lt;Product&gt; product123 = productRepo.findById(id);\n    if(sellerTestpass) {\n        return ResponseEntity.status(404).body(null);\n    }\n    if (product123.isPresent()) {\n        Product product = product123.get();\n        if (product.getSeller().getUsername().equals(getUser().getUsername())) {\n            return ResponseEntity.ok(productRepo.findById(id));\n        }\n    }\n    return ResponseEntity.status(HttpStatus.NOT_FOUND).build();\n}\n</code></pre>\n<p>For the public controller used for the login:</p>\n<pre><code>@Autowired\nAuthenticationManager authenticationManager;\n\n@Scheduled(initialDelay = 10000,fixedDelay = 30000)\npublic void abc() {\n    System.out.println(&quot;Hey its the scheduler&quot;);\n}\n\n@GetMapping(&quot;product/search&quot;)\nResponseEntity&lt;?&gt; searchPublic(@RequestParam String keyword){\n    List&lt;Product&gt; findByProductName = productRepo.findByProductNameContainingIgnoreCaseOrCategoryCategoryNameContainingIgnoreCase(keyword,keyword);\n    return ResponseEntity.ok(findByProductName);\n}\n\n@PostMapping(&quot;login&quot;)\nResponseEntity&lt;?&gt; login(@RequestBody HashMap&lt;String,Object&gt;abc){\n    String userName = (String) abc.get(&quot;username&quot;);\n    String password= (String) abc.get(&quot;password&quot;);\n    doAuthenticate(userName, password);\n    User user=authService.loadUserByUsername(userName);\n\n    if(!user.getPassword().equals(password)) {\n        return  ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();\n    }\n\n    if (user != null) {\n        String token = jwtUtil.generateToken(user);\n        return ResponseEntity.ok(token);\n    }\n\n    return  ResponseEntity.status(HttpStatus.UNAUTHORIZED).build();\n}\n\nprivate void doAuthenticate(String email, String password) {\n\n    UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(email, password);\n    try {\n        authenticationManager.authenticate(authentication);\n\n    } catch (BadCredentialsException e) {\n        throw new BadCredentialsException(&quot; Invalid Username or Password  !!&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","mobile"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1696936383,"creation_date":1696936383,"answer_id":77265275,"question_id":77263722,"body_markdown":"Showing numbers as a badge on a launcher icon is not a feature of Android. That is either added by your device manufacturer or by your launcher developer. You will need to find out and then research them to see what options they have for letting third-party apps contribute number badges.","link":"https://stackoverflow.com/questions/77263722/how-to-enable-notification-number-badge-style-on-my-android-app/77265275#77265275","title":"How to enable notification number badge style on my android app?","body":"<p>Showing numbers as a badge on a launcher icon is not a feature of Android. That is either added by your device manufacturer or by your launcher developer. You will need to find out and then research them to see what options they have for letting third-party apps contribute number badges.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":156,"answer_count":1,"score":0,"last_activity_date":1701969918,"creation_date":1696923166,"last_edit_date":1701969918,"question_id":77263722,"body_markdown":"In mobile notification settings, all apps have the ability to show notification badge in dot style, but only some apps that supports to show it in numbers style, are you have any idea how to make my app programmatically support both styles not&#160;only&#160;dot&#160;one with android Kotlin?\r\n\r\n[![mobile screenshot](https://i.stack.imgur.com/w9FV3.jpg)](https://i.stack.imgur.com/w9FV3.jpg)","link":"https://stackoverflow.com/questions/77263722/how-to-enable-notification-number-badge-style-on-my-android-app","title":"How to enable notification number badge style on my android app?","body":"<p>In mobile notification settings, all apps have the ability to show notification badge in dot style, but only some apps that supports to show it in numbers style, are you have any idea how to make my app programmatically support both styles notonlydotone with android Kotlin?</p>\n<p><a href=\"https://i.stack.imgur.com/w9FV3.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w9FV3.jpg\" alt=\"mobile screenshot\" /></a></p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","many-to-many"],"comments":[{"score":1,"post_type":"question","creation_date":1681973837,"post_id":76061160,"comment_id":134143440,"body_markdown":"I would still encourage to provide more lines from stacktrace. Are you sure the error comes from the line which is calling .size() ?","link":"https://stackoverflow.com/questions/76061160/java-spring-many-to-many-relation-index-out-of-bounds-arrayindexoutofboundsex#comment134143440_76061160","body":"I would still encourage to provide more lines from stacktrace. Are you sure the error comes from the line which is calling .size() ?"},{"score":0,"post_type":"question","creation_date":1681974410,"post_id":76061160,"comment_id":134143541,"body_markdown":"i am guessing you are trying to access the index of the same value as length (in this case 3).  For length 3 indexes are `0 1 2`. That is how indexes in arrays and lists work. So to access the last element you need to use `size()-1` and stop there.","link":"https://stackoverflow.com/questions/76061160/java-spring-many-to-many-relation-index-out-of-bounds-arrayindexoutofboundsex#comment134143541_76061160","body":"i am guessing you are trying to access the index of the same value as length (in this case 3).  For length 3 indexes are <code>0 1 2</code>. That is how indexes in arrays and lists work. So to access the last element you need to use <code>size()-1</code> and stop there."},{"score":1,"post_type":"question","creation_date":1681974683,"post_id":76061160,"comment_id":134143606,"body_markdown":"@fascynacja I attached screenshots with backtrace, let me know if it helps.\n@JAsgarov it&#39;s not that, I get the error when I try any of those methods:\n\n`isEmpty(), size(), toArray(), toString()`","link":"https://stackoverflow.com/questions/76061160/java-spring-many-to-many-relation-index-out-of-bounds-arrayindexoutofboundsex#comment134143606_76061160","body":"@fascynacja I attached screenshots with backtrace, let me know if it helps. @JAsgarov it&#39;s not that, I get the error when I try any of those methods:  <code>isEmpty(), size(), toArray(), toString()</code>"},{"score":0,"post_type":"question","creation_date":1681974773,"post_id":76061160,"comment_id":134143620,"body_markdown":"this is very badly presented question missing all the information that is actually causing the issue. ManyToMany and Spring is completely irrelevant here it is a simple IndexOutOfBounds exception. This exception can&#39;t happen from `size()` call, only when you actually try to access element of the collection.\n\nPlease don&#39;t use screenshots, paste formatted console log of the exception. If you paste the actual STACKTRACE you will see which line or method it was","link":"https://stackoverflow.com/questions/76061160/java-spring-many-to-many-relation-index-out-of-bounds-arrayindexoutofboundsex#comment134143620_76061160","body":"this is very badly presented question missing all the information that is actually causing the issue. ManyToMany and Spring is completely irrelevant here it is a simple IndexOutOfBounds exception. This exception can&#39;t happen from <code>size()</code> call, only when you actually try to access element of the collection.  Please don&#39;t use screenshots, paste formatted console log of the exception. If you paste the actual STACKTRACE you will see which line or method it was"},{"score":0,"post_type":"question","creation_date":1681976386,"post_id":76061160,"comment_id":134143926,"body_markdown":"@adkra do you have a Exception Stack Trace which tracks all the method being called? What you posted is informative but still not enough.","link":"https://stackoverflow.com/questions/76061160/java-spring-many-to-many-relation-index-out-of-bounds-arrayindexoutofboundsex#comment134143926_76061160","body":"@adkra do you have a Exception Stack Trace which tracks all the method being called? What you posted is informative but still not enough."},{"score":0,"post_type":"question","creation_date":1681976980,"post_id":76061160,"comment_id":134144067,"body_markdown":"@fascynacja I eventually got one, edited the question. Let me know if it helps, or more is needed. I don&#39; t want to take too much of your time.\n(btw stacktrace is much longer I assumed that what&#39;s deeper is probably irrelevant)","link":"https://stackoverflow.com/questions/76061160/java-spring-many-to-many-relation-index-out-of-bounds-arrayindexoutofboundsex#comment134144067_76061160","body":"@fascynacja I eventually got one, edited the question. Let me know if it helps, or more is needed. I don&#39; t want to take too much of your time. (btw stacktrace is much longer I assumed that what&#39;s deeper is probably irrelevant)"},{"score":1,"post_type":"question","creation_date":1681977855,"post_id":76061160,"comment_id":134144241,"body_markdown":"@fascynacja thanks for your help, I think I see what happens. So to explain, the item has enum field, that can have a one of 3 values. I defined a java enum for it.\nHowever DB I work with is a legacy, so it is not just `0, 1, 2`. Values in db column are `0, 2, 3`. I will try adding a converter, and see if it helps.","link":"https://stackoverflow.com/questions/76061160/java-spring-many-to-many-relation-index-out-of-bounds-arrayindexoutofboundsex#comment134144241_76061160","body":"@fascynacja thanks for your help, I think I see what happens. So to explain, the item has enum field, that can have a one of 3 values. I defined a java enum for it. However DB I work with is a legacy, so it is not just <code>0, 1, 2</code>. Values in db column are <code>0, 2, 3</code>. I will try adding a converter, and see if it helps."},{"score":1,"post_type":"question","creation_date":1681978130,"post_id":76061160,"comment_id":134144319,"body_markdown":"I hope it will solve your issue, you can add this enum into the code, which you posted. In that way someone with similiar problem in the future will see where could be the problem.","link":"https://stackoverflow.com/questions/76061160/java-spring-many-to-many-relation-index-out-of-bounds-arrayindexoutofboundsex#comment134144319_76061160","body":"I hope it will solve your issue, you can add this enum into the code, which you posted. In that way someone with similiar problem in the future will see where could be the problem."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1682414822,"last_edit_date":1682414822,"creation_date":1681981226,"answer_id":76062313,"question_id":76061160,"body_markdown":"In case someone faces a similar issue, here&#39;s what worked for me:\r\n\r\nReading stack trace, first row is:\r\n&gt; at org.hibernate.type.descriptor.java.EnumJavaType.fromInteger(EnumJavaType.java:178)\r\n\r\nthe item entity has an attribute:\r\n```java\r\n  @Column\r\n  private ItemAvailability availability;\r\n```\r\n\r\nWhich is an Enum:\r\n```java\r\npublic enum ItemAvailability {\r\n  ALL,\r\n  SELECTED,\r\n  HIDDEN\r\n}\r\n```\r\n\r\nWhat I missed is that the column in database stores one of 3 values: `0, 2, 3`. Mind you, they are not consecutive.\r\n\r\nTherefore, I added a Converter:\r\n```\r\npublic class ItemAvailability implements AttributeConverter&lt;ItemAvailability, Integer&gt;{\r\n...\r\n}\r\n```\r\n\r\nAnd this eventually resolved the issue.\r\n\r\n","link":"https://stackoverflow.com/questions/76061160/java-spring-many-to-many-relation-index-out-of-bounds-arrayindexoutofboundsex/76062313#76062313","title":"Java Spring Many To Many relation - index out of bounds, ArrayIndexOutOfBoundsException for Hibernate&#39;s PersistentSet","body":"<p>In case someone faces a similar issue, here's what worked for me:</p>\n<p>Reading stack trace, first row is:</p>\n<blockquote>\n<p>at org.hibernate.type.descriptor.java.EnumJavaType.fromInteger(EnumJavaType.java:178)</p>\n</blockquote>\n<p>the item entity has an attribute:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Column\n  private ItemAvailability availability;\n</code></pre>\n<p>Which is an Enum:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum ItemAvailability {\n  ALL,\n  SELECTED,\n  HIDDEN\n}\n</code></pre>\n<p>What I missed is that the column in database stores one of 3 values: <code>0, 2, 3</code>. Mind you, they are not consecutive.</p>\n<p>Therefore, I added a Converter:</p>\n<pre><code>public class ItemAvailability implements AttributeConverter&lt;ItemAvailability, Integer&gt;{\n...\n}\n</code></pre>\n<p>And this eventually resolved the issue.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701964351,"creation_date":1701964351,"answer_id":77621381,"question_id":76061160,"body_markdown":"Add the following to make it work:\r\n\r\n  \r\n\r\n        @Column\r\n        @Enumerated(EnumType.STRING)\r\n        private ItemAvailability availability;","link":"https://stackoverflow.com/questions/76061160/java-spring-many-to-many-relation-index-out-of-bounds-arrayindexoutofboundsex/77621381#77621381","title":"Java Spring Many To Many relation - index out of bounds, ArrayIndexOutOfBoundsException for Hibernate&#39;s PersistentSet","body":"<p>Add the following to make it work:</p>\n<pre><code>    @Column\n    @Enumerated(EnumType.STRING)\n    private ItemAvailability availability;\n</code></pre>\n"}],"comment_count":8,"is_answered":true,"view_count":413,"answer_count":2,"score":1,"last_activity_date":1701964351,"creation_date":1681972196,"last_edit_date":1681979539,"question_id":76061160,"body_markdown":"I&#39;m building a simple app using java spring.\r\n\r\nI&#39;m having and issue trying to build up a many-to-many relation.\r\nI have following entities:\r\n\r\n**User**\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User {\r\n  @Id\r\n  @GeneratedValue\r\n  private Long id;\r\n  ...\r\n\r\n  @OneToMany(mappedBy = &quot;user&quot;)\r\n  private Set&lt;AssignedItemUser&gt; assignedItemUsers = new HashSet&lt;AssignedItemUser&gt;();\r\n  ...\r\n}\r\n```\r\n\r\n**Item**\r\n```java\r\n@Entity\r\n@Table(name = &quot;items&quot;, uniqueConstraints = { @UniqueConstraint(columnNames = { &quot;slug&quot; })})\r\npublic class Item {\r\n  @Id\r\n  @GeneratedValue\r\n  private long id;\r\n  ...\r\n  @OneToMany(mappedBy = &quot;item&quot;)\r\n  private Set&lt;AssignedItemUser&gt; assignedItemUsers = new HashSet&lt;AssignedItemUser&gt;();\r\n  ...\r\n}\r\n```\r\n\r\nAnd a join table:\r\n\r\n**AssignedItemUser**\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;new_assigned_item_users&quot;)\r\npublic class AssignedItemUser {\r\n  @Id\r\n  private BigInteger id;\r\n\r\n  @ManyToOne\r\n  @JoinColumn(name = &quot;user_id&quot;)\r\n  User user;\r\n\r\n  @ManyToOne\r\n  @JoinColumn(name = &quot;item_id&quot;)\r\n  Item item;\r\n}\r\n```\r\n\r\nWhen I test the association on an item side - it works. f.ex. \r\n```\r\nitem.getAssignedItemUsers().size() //101\r\n```\r\n\r\nHowever, on a user side -  I get an error:\r\n```\r\nuser.getAssignedItemUsers().size()\r\n/// ArrayIndexOutOfBoundsException@132 &quot;java.lang.ArrayIndexOutOfBoundsException: Index 3 out of bounds for length 3&quot;\r\n```\r\n\r\nForgive me being stupid, but I couldn&#39;t find anything helpful overt the internet, stacktrace is not helpful either.\r\n\r\nAm I doing something wrong? I can&#39;t really spot what I am missing here.\r\n\r\nEdit :\r\nso I called `printStackTrace()` on the exception:\r\n```\r\njava.lang.ArrayIndexOutOfBoundsException: Index 3 out of bounds for length 3\r\n  at org.hibernate.type.descriptor.java.EnumJavaType.fromInteger(EnumJavaType.java:178)\r\n  at org.hibernate.type.descriptor.java.EnumJavaType.fromOrdinal(EnumJavaType.java:195)\r\n  at org.hibernate.metamodel.model.convert.internal.OrdinalEnumValueConverter.toDomainValue(OrdinalEnumValueConverter.java:52)\r\n  at org.hibernate.metamodel.model.convert.internal.OrdinalEnumValueConverter.toDomainValue(OrdinalEnumValueConverter.java:29)\r\n  at org.hibernate.sql.results.graph.basic.BasicResultAssembler.assemble(BasicResultAssembler.java:80)\r\n  at org.hibernate.sql.results.graph.DomainResultAssembler.assemble(DomainResultAssembler.java:33)\r\n  at org.hibernate.sql.results.graph.entity.AbstractEntityInitializer.extractConcreteTypeStateValues(AbstractEntityInitializer.java:1037)\r\n  at org.hibernate.sql.results.graph.entity.AbstractEntityInitializer.initializeEntity(AbstractEntityInitializer.java:831)\r\n  at org.hibernate.sql.results.graph.entity.AbstractEntityInitializer.initializeInstance(AbstractEntityInitializer.java:787)\r\n  at org.hibernate.sql.results.internal.StandardRowReader.coordinateInitializers(StandardRowReader.java:152)\r\n  at org.hibernate.sql.results.internal.StandardRowReader.readRow(StandardRowReader.java:97)\r\n  at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:178)\r\n  at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)\r\n  at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:443)\r\n  at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:166)\r\n  at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:91)\r\n  at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)\r\n  at org.hibernate.loader.ast.internal.CollectionLoaderSingleKey.load(CollectionLoaderSingleKey.java:121)\r\n  at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:789)\r\n  at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:75)\r\n  at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n  at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:1710)\r\n  at org.hibernate.collection.spi.AbstractPersistentCollection.lambda$initialize$3(AbstractPersistentCollection.java:617)\r\n  at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:265)\r\n  at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)\r\n  at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:136)\r\n  at org.hibernate.collection.spi.PersistentSet.toString(PersistentSet.java:295)\r\n```\r\n\r\nAs it is calling `EnumJavaType` it may be worth noting, that both Item, and User model have enum fields, but there is no enum field on AssignedItemUser.\r\n\r\n\r\n-----------------\r\nFinally, the root cause of the issue, turned out to be an integer db column, mapped to an enum, on java end. As values in the column were not consecutive (0, 2, 3) it didn&#39;t match ORDINAL enum type on java end. Adding a converter resolved the issue.","link":"https://stackoverflow.com/questions/76061160/java-spring-many-to-many-relation-index-out-of-bounds-arrayindexoutofboundsex","title":"Java Spring Many To Many relation - index out of bounds, ArrayIndexOutOfBoundsException for Hibernate&#39;s PersistentSet","body":"<p>I'm building a simple app using java spring.</p>\n<p>I'm having and issue trying to build up a many-to-many relation.\nI have following entities:</p>\n<p><strong>User</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n  @Id\n  @GeneratedValue\n  private Long id;\n  ...\n\n  @OneToMany(mappedBy = &quot;user&quot;)\n  private Set&lt;AssignedItemUser&gt; assignedItemUsers = new HashSet&lt;AssignedItemUser&gt;();\n  ...\n}\n</code></pre>\n<p><strong>Item</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;items&quot;, uniqueConstraints = { @UniqueConstraint(columnNames = { &quot;slug&quot; })})\npublic class Item {\n  @Id\n  @GeneratedValue\n  private long id;\n  ...\n  @OneToMany(mappedBy = &quot;item&quot;)\n  private Set&lt;AssignedItemUser&gt; assignedItemUsers = new HashSet&lt;AssignedItemUser&gt;();\n  ...\n}\n</code></pre>\n<p>And a join table:</p>\n<p><strong>AssignedItemUser</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;new_assigned_item_users&quot;)\npublic class AssignedItemUser {\n  @Id\n  private BigInteger id;\n\n  @ManyToOne\n  @JoinColumn(name = &quot;user_id&quot;)\n  User user;\n\n  @ManyToOne\n  @JoinColumn(name = &quot;item_id&quot;)\n  Item item;\n}\n</code></pre>\n<p>When I test the association on an item side - it works. f.ex.</p>\n<pre><code>item.getAssignedItemUsers().size() //101\n</code></pre>\n<p>However, on a user side -  I get an error:</p>\n<pre><code>user.getAssignedItemUsers().size()\n/// ArrayIndexOutOfBoundsException@132 &quot;java.lang.ArrayIndexOutOfBoundsException: Index 3 out of bounds for length 3&quot;\n</code></pre>\n<p>Forgive me being stupid, but I couldn't find anything helpful overt the internet, stacktrace is not helpful either.</p>\n<p>Am I doing something wrong? I can't really spot what I am missing here.</p>\n<p>Edit :\nso I called <code>printStackTrace()</code> on the exception:</p>\n<pre><code>java.lang.ArrayIndexOutOfBoundsException: Index 3 out of bounds for length 3\n  at org.hibernate.type.descriptor.java.EnumJavaType.fromInteger(EnumJavaType.java:178)\n  at org.hibernate.type.descriptor.java.EnumJavaType.fromOrdinal(EnumJavaType.java:195)\n  at org.hibernate.metamodel.model.convert.internal.OrdinalEnumValueConverter.toDomainValue(OrdinalEnumValueConverter.java:52)\n  at org.hibernate.metamodel.model.convert.internal.OrdinalEnumValueConverter.toDomainValue(OrdinalEnumValueConverter.java:29)\n  at org.hibernate.sql.results.graph.basic.BasicResultAssembler.assemble(BasicResultAssembler.java:80)\n  at org.hibernate.sql.results.graph.DomainResultAssembler.assemble(DomainResultAssembler.java:33)\n  at org.hibernate.sql.results.graph.entity.AbstractEntityInitializer.extractConcreteTypeStateValues(AbstractEntityInitializer.java:1037)\n  at org.hibernate.sql.results.graph.entity.AbstractEntityInitializer.initializeEntity(AbstractEntityInitializer.java:831)\n  at org.hibernate.sql.results.graph.entity.AbstractEntityInitializer.initializeInstance(AbstractEntityInitializer.java:787)\n  at org.hibernate.sql.results.internal.StandardRowReader.coordinateInitializers(StandardRowReader.java:152)\n  at org.hibernate.sql.results.internal.StandardRowReader.readRow(StandardRowReader.java:97)\n  at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:178)\n  at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)\n  at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:443)\n  at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:166)\n  at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:91)\n  at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)\n  at org.hibernate.loader.ast.internal.CollectionLoaderSingleKey.load(CollectionLoaderSingleKey.java:121)\n  at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:789)\n  at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:75)\n  at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\n  at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:1710)\n  at org.hibernate.collection.spi.AbstractPersistentCollection.lambda$initialize$3(AbstractPersistentCollection.java:617)\n  at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:265)\n  at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)\n  at org.hibernate.collection.spi.AbstractPersistentCollection.read(AbstractPersistentCollection.java:136)\n  at org.hibernate.collection.spi.PersistentSet.toString(PersistentSet.java:295)\n</code></pre>\n<p>As it is calling <code>EnumJavaType</code> it may be worth noting, that both Item, and User model have enum fields, but there is no enum field on AssignedItemUser.</p>\n<hr />\n<p>Finally, the root cause of the issue, turned out to be an integer db column, mapped to an enum, on java end. As values in the column were not consecutive (0, 2, 3) it didn't match ORDINAL enum type on java end. Adding a converter resolved the issue.</p>\n"},{"tags":["java","single-sign-on","keycloak","openid-connect","keycloak-connect"],"comment_count":0,"is_answered":false,"view_count":111,"answer_count":0,"score":1,"last_activity_date":1701961667,"creation_date":1687365142,"question_id":76525421,"body_markdown":"I am using Keycloak to connect to an external Identity Providers via OIDC.\r\n\r\nStep 1 : I created standard mappers &#171; Attribute Importer &#187; to retrieve attributes using the claims supported by the IDP.\r\n\r\nExamples of simple mappings :\r\n\r\n- Name of my attribute in Keycloak : lastName\r\n- Claim returned by the IDP : name\r\n\r\n\\-\\&gt;Easy, that works.\r\n\r\nStep 2 : I need to perform more complex mapping. That&#39;s where I need help.\r\n\r\nThe IDP has added in the userInfo nested arrays that I have to parse. From this parsing, I need to retrieve multiple values and return this to the client through the Keycloak JWT token.\r\n\r\nIn a nutshell what I need to do :\r\n\r\n- in the userInfo returned by the IDP, I get nested arrays such as :\r\n\r\n```\r\n&quot;claim&quot;: { // the claim\r\n        &quot;id&quot;: 1,\r\n        &quot;arrayOfAttributes&quot;: {\r\n            &quot;attribute1&quot;: XX,\r\n            &quot;attribute2&quot;: [\r\n                {\r\n                    &quot;**attributeIWant1**&quot;: 12,\r\n                    &quot;dateXX&quot;: &quot;2023-01-01&quot;,\r\n                    &quot;attributeYY&quot;: XXX,\r\n                },\r\n            &quot;attribute3&quot;: [\r\n                {\r\n                    &quot;**attributeIWant2**&quot;: 13,\r\n                    &quot;dateXX&quot;: &quot;2023-01-01&quot;,\r\n                    &quot;attributeYY&quot;: XXX,\r\n                },\r\n            &quot;attribute4&quot;: [\r\n                {\r\n                    &quot;**attributeIWant3**&quot;: 14,\r\n                    &quot;dateXX&quot;: &quot;2023-01-01&quot;,\r\n                    &quot;attributeYY&quot;: XXX,\r\n                },\r\n         },\r\n}\r\n```\r\n\r\n- I would like to retrieve the values from **attributeIWant1**, **attributeIWant2** and **attributeIWant3**\r\n- map these values to a multi-valued attribute in Keycloak (I read that the delimiter should be &#171; ## &#187; but not sure),\r\n- and have this multi-valued attribute returned in the JWT token to the client.\r\n\r\n\\-\\&gt; Can you please guide me to the best/simplest solution ?\r\nCan I do that using the UI ? Or do I need to code a custom mapping ?\r\n\r\nThanks for your help,","link":"https://stackoverflow.com/questions/76525421/keycloak-trying-to-map-nested-arrays-returned-in-the-userprofile-of-the-idp","title":"Keycloak - trying to map nested arrays (returned in the userProfile of the IDP) to a multi-values attribute","body":"<p>I am using Keycloak to connect to an external Identity Providers via OIDC.</p>\n<p>Step 1 : I created standard mappers  Attribute Importer  to retrieve attributes using the claims supported by the IDP.</p>\n<p>Examples of simple mappings :</p>\n<ul>\n<li>Name of my attribute in Keycloak : lastName</li>\n<li>Claim returned by the IDP : name</li>\n</ul>\n<p>-&gt;Easy, that works.</p>\n<p>Step 2 : I need to perform more complex mapping. That's where I need help.</p>\n<p>The IDP has added in the userInfo nested arrays that I have to parse. From this parsing, I need to retrieve multiple values and return this to the client through the Keycloak JWT token.</p>\n<p>In a nutshell what I need to do :</p>\n<ul>\n<li>in the userInfo returned by the IDP, I get nested arrays such as :</li>\n</ul>\n<pre><code>&quot;claim&quot;: { // the claim\n        &quot;id&quot;: 1,\n        &quot;arrayOfAttributes&quot;: {\n            &quot;attribute1&quot;: XX,\n            &quot;attribute2&quot;: [\n                {\n                    &quot;**attributeIWant1**&quot;: 12,\n                    &quot;dateXX&quot;: &quot;2023-01-01&quot;,\n                    &quot;attributeYY&quot;: XXX,\n                },\n            &quot;attribute3&quot;: [\n                {\n                    &quot;**attributeIWant2**&quot;: 13,\n                    &quot;dateXX&quot;: &quot;2023-01-01&quot;,\n                    &quot;attributeYY&quot;: XXX,\n                },\n            &quot;attribute4&quot;: [\n                {\n                    &quot;**attributeIWant3**&quot;: 14,\n                    &quot;dateXX&quot;: &quot;2023-01-01&quot;,\n                    &quot;attributeYY&quot;: XXX,\n                },\n         },\n}\n</code></pre>\n<ul>\n<li>I would like to retrieve the values from <strong>attributeIWant1</strong>, <strong>attributeIWant2</strong> and <strong>attributeIWant3</strong></li>\n<li>map these values to a multi-valued attribute in Keycloak (I read that the delimiter should be  ##  but not sure),</li>\n<li>and have this multi-valued attribute returned in the JWT token to the client.</li>\n</ul>\n<p>-&gt; Can you please guide me to the best/simplest solution ?\nCan I do that using the UI ? Or do I need to code a custom mapping ?</p>\n<p>Thanks for your help,</p>\n"},{"tags":["java","spring-boot","netflix-eureka"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1694777601,"creation_date":1694777601,"answer_id":77112010,"question_id":77092308,"body_markdown":"You error is because your DNS does not resolve `inventory-service` to any IPv4/6.\r\n\r\nI don&#39;t know what this service is, but it is called/configured from your `OrderService`:\r\n\r\n```java\r\nInventoryResponse[] inventoryResponses = webClientBuilder.build().get()\r\n                .uri(&quot;http://inventory-service/api/inventory&quot;,\r\n                        uriBuilder -&gt; uriBuilder.queryParam(&quot;skuCode&quot;, skuCodes).build())\r\n                .retrieve()\r\n                .bodyToMono(InventoryResponse[].class)\r\n                .block();\r\n```\r\n\r\nYou have to change this appropriately: from your configuration, we can see that your use a local database from a similar named service:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3307/inventory-service\r\n\r\nIf both service are started on the same machine, then you probably have to change `http://inventory-service` to `http://localhost:?/`:\r\n\r\n- I used `?` because your inventory-service application.properties use `server.port=0`;\r\n- I don&#39;t know for Spring Boot, but in most case, this will use a random port.\r\n\r\nYou could try to fix a port and use it in `OrderService`.\r\n\r\nHowever, your `discovery-server` probably means that each of your service your use it to &quot;discover&quot; the actual end point.\r\n\r\nFor this, I can&#39;t help as I don&#39;t know Eureka (I suppose this is the discovery service from the name of the properties being configured).","link":"https://stackoverflow.com/questions/77092308/java-net-unknownhostexception-failed-to-resolve-inventory-service-a1-aaaa/77112010#77112010","title":"java.net.UnknownHostException: Failed to resolve &#39;inventory-service&#39; [A(1), AAAA(28)] after 6 queries","body":"<p>You error is because your DNS does not resolve <code>inventory-service</code> to any IPv4/6.</p>\n<p>I don't know what this service is, but it is called/configured from your <code>OrderService</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>InventoryResponse[] inventoryResponses = webClientBuilder.build().get()\n                .uri(&quot;http://inventory-service/api/inventory&quot;,\n                        uriBuilder -&gt; uriBuilder.queryParam(&quot;skuCode&quot;, skuCodes).build())\n                .retrieve()\n                .bodyToMono(InventoryResponse[].class)\n                .block();\n</code></pre>\n<p>You have to change this appropriately: from your configuration, we can see that your use a local database from a similar named service:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3307/inventory-service\n</code></pre>\n<p>If both service are started on the same machine, then you probably have to change <code>http://inventory-service</code> to <code>http://localhost:?/</code>:</p>\n<ul>\n<li>I used <code>?</code> because your inventory-service application.properties use <code>server.port=0</code>;</li>\n<li>I don't know for Spring Boot, but in most case, this will use a random port.</li>\n</ul>\n<p>You could try to fix a port and use it in <code>OrderService</code>.</p>\n<p>However, your <code>discovery-server</code> probably means that each of your service your use it to &quot;discover&quot; the actual end point.</p>\n<p>For this, I can't help as I don't know Eureka (I suppose this is the discovery service from the name of the properties being configured).</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1697570678,"post_id":77234572,"comment_id":136295776,"body_markdown":"It&#39;s giving the same error &quot;2023-10-17T16:23:22.438-03:00 ERROR 26900 --- [nio-8081-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.reactive.function.client.WebClientRequestException: Failed to resolve &#39;inventory-service&#39; [A(1), AAAA(28)] after 6 queries ] with root cause\njava.net.UnknownHostException: Failed to resolve &#39;inventory-service&#39; [A(1), AAAA(28)] after 6 queries&quot;","link":"https://stackoverflow.com/questions/77092308/java-net-unknownhostexception-failed-to-resolve-inventory-service-a1-aaaa/77234572#comment136295776_77234572","body":"It&#39;s giving the same error &quot;2023-10-17T16:23:22.438-03:00 ERROR 26900 --- [nio-8081-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.web.reactive.function.client.WebClientRe&zwnj;&#8203;questException: Failed to resolve &#39;inventory-service&#39; [A(1), AAAA(28)] after 6 queries ] with root cause java.net.UnknownHostException: Failed to resolve &#39;inventory-service&#39; [A(1), AAAA(28)] after 6 queries&quot;"}],"comment_count":1,"score":0,"last_activity_date":1696485879,"creation_date":1696485879,"answer_id":77234572,"question_id":77092308,"body_markdown":"try to use:\r\n```java\r\n@Autowired\r\nprivate WebClient.Builder webClientBuilder;\r\n```\r\n\r\ninstead of:\r\n```java\r\nprivate WebClient.Builder webClientBuilder;\r\n```","link":"https://stackoverflow.com/questions/77092308/java-net-unknownhostexception-failed-to-resolve-inventory-service-a1-aaaa/77234572#77234572","title":"java.net.UnknownHostException: Failed to resolve &#39;inventory-service&#39; [A(1), AAAA(28)] after 6 queries","body":"<p>try to use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nprivate WebClient.Builder webClientBuilder;\n</code></pre>\n<p>instead of:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private WebClient.Builder webClientBuilder;\n</code></pre>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1699368636,"post_id":77437428,"comment_id":136521173,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","link":"https://stackoverflow.com/questions/77092308/java-net-unknownhostexception-failed-to-resolve-inventory-service-a1-aaaa/77437428#comment136521173_77437428","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77437428/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"comment_count":1,"score":0,"last_activity_date":1699352820,"creation_date":1699352820,"answer_id":77437428,"question_id":77092308,"body_markdown":"do the given changes in the WebClientConfig \r\n\r\n    @Bean\r\n    @LoadBalanced\r\n    public WebClient.Builder webClient() {\r\n        HttpClient httpClient = HttpClient.create().resolver(DefaultAddressResolverGroup.INSTANCE);\r\n        return WebClient.builder()\r\n                .clientConnector(new ReactorClientHttpConnector(httpClient));\r\n    }","link":"https://stackoverflow.com/questions/77092308/java-net-unknownhostexception-failed-to-resolve-inventory-service-a1-aaaa/77437428#77437428","title":"java.net.UnknownHostException: Failed to resolve &#39;inventory-service&#39; [A(1), AAAA(28)] after 6 queries","body":"<p>do the given changes in the WebClientConfig</p>\n<pre><code>@Bean\n@LoadBalanced\npublic WebClient.Builder webClient() {\n    HttpClient httpClient = HttpClient.create().resolver(DefaultAddressResolverGroup.INSTANCE);\n    return WebClient.builder()\n            .clientConnector(new ReactorClientHttpConnector(httpClient));\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":952,"answer_count":3,"score":1,"last_activity_date":1701960851,"creation_date":1694548480,"question_id":77092308,"body_markdown":"I&#39;m using Java 17, Spring Boot v3.1.3 and Spring Cloud stack to perform interservice communication.\r\n\r\nI&#39;m receiving this error when I make a POST request to http://localhost:8081/api/order\r\n\r\norder-service error:\r\n\r\n```java\r\n\tjava.net.UnknownHostException: Failed to resolve &#39;inventory-service&#39; [A(1), AAAA(28)] after 6 queries \r\n\tat io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.resolver.dns.DnsResolveContext.onResponse(DnsResolveContext.java:662) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.resolver.dns.DnsResolveContext.access$500(DnsResolveContext.java:66) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:489) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1392) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103) ~[netty-codec-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\r\n\r\n```\r\n\r\npom.xml\r\n\r\n```java\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-loadbalancer&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\nWebClientConfig class:\r\n\r\n```java\r\n@Configuration\r\npublic class WebClientConfig {\r\n\r\n    @Bean\r\n    @LoadBalanced\r\n    public WebClient.Builder webClientBuilder() {\r\n        return WebClient.builder();\r\n    }\r\n}\r\n```\r\n\r\nOrderService class:\r\n\r\n```java\r\n    private final WebClient.Builder webClientBuilder;\r\n\r\n    public void placeOrder(OrderRequest orderRequest) {\r\n        Order order = new Order();\r\n        order.setOrderNumber(UUID.randomUUID().toString());\r\n\r\n        List&lt;OrderLineItems&gt; orderLineItems = orderRequest.getOrderLineItemsDto()\r\n                .stream()\r\n                .map(this::mapToDto)\r\n                .toList();\r\n        order.setOrderLineItems(orderLineItems);\r\n\r\n        List&lt;String&gt; skuCodes = order.getOrderLineItems().stream()\r\n                .map(OrderLineItems::getSkuCode)\r\n                .toList();\r\n\r\n        InventoryResponse[] inventoryResponses = webClientBuilder.build().get()\r\n                .uri(&quot;http://inventory-service/api/inventory&quot;,\r\n                        uriBuilder -&gt; uriBuilder.queryParam(&quot;skuCode&quot;, skuCodes).build())\r\n                .retrieve()\r\n                .bodyToMono(InventoryResponse[].class)\r\n                .block();\r\n```\r\n\r\napplication.properties:\r\n\r\n```java\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.datasource.url=jdbc:mysql://localhost:3306/order-service\r\nspring.datasource.username=username\r\nspring.datasource.password=password\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.application.name=order-service\r\n\r\nserver.port=8081\r\n\r\neureka.client.service-url.default-zone=http://localhost:8761/eureka\r\neureka.instance.prefer-ip-address=true\r\neureka.instance.hostname=localhost\r\n```\r\n\r\napplication.properties from inventory-service:\r\n\r\n```java\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.datasource.url=jdbc:mysql://localhost:3307/inventory-service\r\nspring.datasource.username=root\r\nspring.datasource.password=1234\r\nspring.jpa.hibernate.ddl-auto=create-drop\r\nspring.application.name=inventory-service\r\n\r\nserver.port=0\r\n\r\neureka.client.service-url.default-zone=http://localhost:8761/eureka\r\n```\r\n\r\napplication.properties from discovery-server:\r\n\r\n```java\r\nserver.port=8761\r\n\r\neureka.instance.hostname=localhost\r\neureka.client.register-with-eureka=false\r\neureka.client.fetch-registry=false\r\neureka.client.service-url.defaultZone=http://localhost:${server.port}/eureka/\r\neureka.instance.prefer-ip-address=true\r\n```\r\n\r\nI really don&#39;t know what I&#39;m doing wrong.\r\n\r\n","link":"https://stackoverflow.com/questions/77092308/java-net-unknownhostexception-failed-to-resolve-inventory-service-a1-aaaa","title":"java.net.UnknownHostException: Failed to resolve &#39;inventory-service&#39; [A(1), AAAA(28)] after 6 queries","body":"<p>I'm using Java 17, Spring Boot v3.1.3 and Spring Cloud stack to perform interservice communication.</p>\n<p>I'm receiving this error when I make a POST request to http://localhost:8081/api/order</p>\n<p>order-service error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    java.net.UnknownHostException: Failed to resolve 'inventory-service' [A(1), AAAA(28)] after 6 queries \n    at io.netty.resolver.dns.DnsResolveContext.finishResolve(DnsResolveContext.java:1097) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.resolver.dns.DnsResolveContext.tryToFinishResolve(DnsResolveContext.java:1044) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.resolver.dns.DnsResolveContext.query(DnsResolveContext.java:432) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.resolver.dns.DnsResolveContext.onResponse(DnsResolveContext.java:662) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.resolver.dns.DnsResolveContext.access$500(DnsResolveContext.java:66) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.resolver.dns.DnsResolveContext$2.operationComplete(DnsResolveContext.java:489) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:590) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:583) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:559) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:492) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:636) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.util.concurrent.DefaultPromise.setSuccess0(DefaultPromise.java:625) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.util.concurrent.DefaultPromise.trySuccess(DefaultPromise.java:105) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.resolver.dns.DnsQueryContext.trySuccess(DnsQueryContext.java:317) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.resolver.dns.DnsQueryContext.finishSuccess(DnsQueryContext.java:309) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.resolver.dns.DnsNameResolver$DnsResponseHandler.channelRead(DnsNameResolver.java:1392) ~[netty-resolver-dns-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103) ~[netty-codec-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.nio.AbstractNioMessageChannel$NioMessageUnsafe.read(AbstractNioMessageChannel.java:97) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.97.Final.jar:4.1.97.Final]\n    at java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\n\n</code></pre>\n<p>pom.xml</p>\n<pre class=\"lang-java prettyprint-override\"><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\n            &lt;version&gt;4.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-loadbalancer&lt;/artifactId&gt;\n            &lt;version&gt;3.1.6&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>WebClientConfig class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class WebClientConfig {\n\n    @Bean\n    @LoadBalanced\n    public WebClient.Builder webClientBuilder() {\n        return WebClient.builder();\n    }\n}\n</code></pre>\n<p>OrderService class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private final WebClient.Builder webClientBuilder;\n\n    public void placeOrder(OrderRequest orderRequest) {\n        Order order = new Order();\n        order.setOrderNumber(UUID.randomUUID().toString());\n\n        List&lt;OrderLineItems&gt; orderLineItems = orderRequest.getOrderLineItemsDto()\n                .stream()\n                .map(this::mapToDto)\n                .toList();\n        order.setOrderLineItems(orderLineItems);\n\n        List&lt;String&gt; skuCodes = order.getOrderLineItems().stream()\n                .map(OrderLineItems::getSkuCode)\n                .toList();\n\n        InventoryResponse[] inventoryResponses = webClientBuilder.build().get()\n                .uri(&quot;http://inventory-service/api/inventory&quot;,\n                        uriBuilder -&gt; uriBuilder.queryParam(&quot;skuCode&quot;, skuCodes).build())\n                .retrieve()\n                .bodyToMono(InventoryResponse[].class)\n                .block();\n</code></pre>\n<p>application.properties:</p>\n<pre class=\"lang-java prettyprint-override\"><code>spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.datasource.url=jdbc:mysql://localhost:3306/order-service\nspring.datasource.username=username\nspring.datasource.password=password\nspring.jpa.hibernate.ddl-auto=update\nspring.application.name=order-service\n\nserver.port=8081\n\neureka.client.service-url.default-zone=http://localhost:8761/eureka\neureka.instance.prefer-ip-address=true\neureka.instance.hostname=localhost\n</code></pre>\n<p>application.properties from inventory-service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.datasource.url=jdbc:mysql://localhost:3307/inventory-service\nspring.datasource.username=root\nspring.datasource.password=1234\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.application.name=inventory-service\n\nserver.port=0\n\neureka.client.service-url.default-zone=http://localhost:8761/eureka\n</code></pre>\n<p>application.properties from discovery-server:</p>\n<pre class=\"lang-java prettyprint-override\"><code>server.port=8761\n\neureka.instance.hostname=localhost\neureka.client.register-with-eureka=false\neureka.client.fetch-registry=false\neureka.client.service-url.defaultZone=http://localhost:${server.port}/eureka/\neureka.instance.prefer-ip-address=true\n</code></pre>\n<p>I really don't know what I'm doing wrong.</p>\n"},{"tags":["java","spring","spring-boot","spring-cloud-sleuth","micrometer"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701959973,"creation_date":1701959973,"answer_id":77620886,"question_id":77547115,"body_markdown":"You need the Brave bridge and actuator.\r\nIf you are using Boot 3.2 or higher `logging.pattern.level` is not needed.","link":"https://stackoverflow.com/questions/77547115/which-dependencies-to-add-mitigating-from-spring-cloud-sleuth-to-micrometer/77620886#77620886","title":"which dependencies to add mitigating from spring cloud sleuth to micrometer","body":"<p>You need the Brave bridge and actuator.\nIf you are using Boot 3.2 or higher <code>logging.pattern.level</code> is not needed.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":36,"answer_count":1,"score":-1,"last_activity_date":1701959973,"creation_date":1700899968,"question_id":77547115,"body_markdown":"so as spring cloud sleuth is discontinued for spring boot 3.0 im shifiting to micrometer. i read about two dependencies to add \r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n    &lt;artifactId&gt;micrometer-observation&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n    &lt;artifactId&gt;micrometer-tracing-bridge-brave&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\ni used slueth auto configuration to add all trace and span ids in the logs of all services, propagating the ids in the headers of calls via feign and adding them to logs. Also i used tracer to get current trace id for custom logs.\r\n\r\nNow which of these dependency do i need to add for spring to autoconfigure these 2 things that i need? (tracer and adding trace and span ids to logs and headers of downstream services) and also if im missing anything. \r\nEdit: already added these 2 config properties \r\n\r\n```\r\n#to trace all calls (micrometer only does 10% of calls by default)\r\nmanagement.tracing.sampling.probability=1.0\r\n#to add trace and span id in all calls (isnt done by default)\r\nlogging.pattern.level= &quot;%5p [${spring.application.name:},%X{traceId:-},%X{spanId:-}]&quot;\r\n```","link":"https://stackoverflow.com/questions/77547115/which-dependencies-to-add-mitigating-from-spring-cloud-sleuth-to-micrometer","title":"which dependencies to add mitigating from spring cloud sleuth to micrometer","body":"<p>so as spring cloud sleuth is discontinued for spring boot 3.0 im shifiting to micrometer. i read about two dependencies to add</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-observation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-tracing-bridge-brave&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>i used slueth auto configuration to add all trace and span ids in the logs of all services, propagating the ids in the headers of calls via feign and adding them to logs. Also i used tracer to get current trace id for custom logs.</p>\n<p>Now which of these dependency do i need to add for spring to autoconfigure these 2 things that i need? (tracer and adding trace and span ids to logs and headers of downstream services) and also if im missing anything.\nEdit: already added these 2 config properties</p>\n<pre><code>#to trace all calls (micrometer only does 10% of calls by default)\nmanagement.tracing.sampling.probability=1.0\n#to add trace and span id in all calls (isnt done by default)\nlogging.pattern.level= &quot;%5p [${spring.application.name:},%X{traceId:-},%X{spanId:-}]&quot;\n</code></pre>\n"},{"tags":["java","amazon-web-services","maven","aws-codeartifact"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1693395964,"creation_date":1693395964,"answer_id":77007686,"question_id":77006968,"body_markdown":"My issue was that I needed to set my AWS access keys in the `~/.aws/credentials` file. It just had the default keys from aws cli installation, so I set it to the keys for my AWS user that set up codeDeploy, ad now it can generate the token successfully.\r\n\r\ne.g. \r\n\r\n    aws_access_key_id=xxx\r\n    aws_secret_access_key=xxxx","link":"https://stackoverflow.com/questions/77006968/aws-codeartifact-maven-deploy-failing-with-unauthorized-401/77007686#77007686","title":"AWS CodeArtifact maven deploy failing with Unauthorized (401)","body":"<p>My issue was that I needed to set my AWS access keys in the <code>~/.aws/credentials</code> file. It just had the default keys from aws cli installation, so I set it to the keys for my AWS user that set up codeDeploy, ad now it can generate the token successfully.</p>\n<p>e.g.</p>\n<pre><code>aws_access_key_id=xxx\naws_secret_access_key=xxxx\n</code></pre>\n"},{"comment_count":0,"score":1,"last_activity_date":1701959637,"last_edit_date":1701959637,"creation_date":1701710439,"answer_id":77601376,"question_id":77006968,"body_markdown":"#1. Make sure you have the right access to AWS:\r\n\r\n    echo $AWS_ACCESS_KEY_ID\r\n\r\n    echo $AWS_SECRET_ACCESS_KEY\r\n\r\n    export CODEARTIFACT_AUTH_TOKEN=&#39;aws codeartifact get-authorization-token --domain my_domain --domain-owner 111122223333 --query authorizationToken --output text&#39;\r\n\r\n#2. You can also try to setup an AWS profile on your environment [Configure the AWS CLI][1]\r\n\r\n    export CODEARTIFACT_AUTH_TOKEN=&#39;aws codeartifact get-authorization-token --domain my_domain --domain-owner 111122223333 --query authorizationToken --output text **--profile profile-name**&#39;\r\n\r\n#3. Print your token before use it\r\n\r\n    echo $CODEARTIFACT_AUTH_TOKEN\r\n    \r\n    cat .m2/settings.xml\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html\r\n","link":"https://stackoverflow.com/questions/77006968/aws-codeartifact-maven-deploy-failing-with-unauthorized-401/77601376#77601376","title":"AWS CodeArtifact maven deploy failing with Unauthorized (401)","body":"<p>#1. Make sure you have the right access to AWS:</p>\n<pre><code>echo $AWS_ACCESS_KEY_ID\n\necho $AWS_SECRET_ACCESS_KEY\n\nexport CODEARTIFACT_AUTH_TOKEN='aws codeartifact get-authorization-token --domain my_domain --domain-owner 111122223333 --query authorizationToken --output text'\n</code></pre>\n<p>#2. You can also try to setup an AWS profile on your environment <a href=\"https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html\" rel=\"nofollow noreferrer\">Configure the AWS CLI</a></p>\n<pre><code>export CODEARTIFACT_AUTH_TOKEN='aws codeartifact get-authorization-token --domain my_domain --domain-owner 111122223333 --query authorizationToken --output text **--profile profile-name**'\n</code></pre>\n<p>#3. Print your token before use it</p>\n<pre><code>echo $CODEARTIFACT_AUTH_TOKEN\n\ncat .m2/settings.xml\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":303,"answer_count":2,"score":1,"last_activity_date":1701959637,"creation_date":1693389672,"last_edit_date":1693393655,"question_id":77006968,"body_markdown":"I have created a AWS CodeArtifact repository, and would like to upload some artefacts to it, however when I try do so I get the following error:\r\n\r\n**Error**\r\n\r\n    status code: 401, reason phrase: Unauthorized (401)\r\n\r\nI have the following configuration on AWS CodeDeploy (using [this][1] AWS documentation as a guideline).\r\n\r\nDomain: `uat-myco` and Repository: `uat-myco-repository`.\r\n\r\nOn my local machine, I try to use `mvn deploy` to upload an artefact to the repo.\r\n\r\n**.m2/settings.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;settings xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.1.0 http://maven.apache.org/xsd/settings-1.1.0.xsd&quot;\r\n      xmlns=&quot;http://maven.apache.org/SETTINGS/1.1.0&quot;\r\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\r\n      &lt;servers&gt;\r\n        &lt;server&gt;\r\n          &lt;id&gt;uat-myco-uat-myco-repository&lt;/id&gt;\r\n          &lt;username&gt;aws&lt;/username&gt;\r\n          &lt;password&gt;${env.CODEARTIFACT_AUTH_TOKEN}&lt;/password&gt;\r\n        &lt;/server&gt;\r\n      &lt;/servers&gt;\r\n      &lt;mirrors&gt;\r\n        &lt;mirror&gt;\r\n          &lt;id&gt;uat-myco-uat-myco-repository&lt;/id&gt;\r\n          &lt;name&gt;uat-myco-uat-myco-repository&lt;/name&gt;\r\n          &lt;url&gt;https://uat-myco-domainownerid.d.codeartifact.us-east-1.amazonaws.com/maven/uat-myco-repository/&lt;/url&gt;\r\n          &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;\r\n        &lt;/mirror&gt;\r\n      &lt;/mirrors&gt;\r\n      &lt;proxies&gt;\r\n      &lt;/proxies&gt;\r\n      &lt;activeProfiles&gt;\r\n        &lt;!--make the profile active all the time --&gt;\r\n        &lt;activeProfile&gt;uat-myco-uat-myco-repository&lt;/activeProfile&gt;\r\n      &lt;/activeProfiles&gt;\r\n      &lt;profiles&gt;\r\n        &lt;profile&gt;\r\n          &lt;id&gt;uat-myco-uat-myco-repository&lt;/id&gt;\r\n          &lt;activation&gt;\r\n            &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n          &lt;/activation&gt;\r\n          &lt;repositories&gt;\r\n            &lt;repository&gt;\r\n              &lt;id&gt;uat-myco-uat-myco-repository&lt;/id&gt;\r\n              &lt;url&gt;https://uat-myco-domainownerid.d.codeartifact.us-east-1.amazonaws.com/maven/uat-myco-repository/&lt;/url&gt;\r\n            &lt;/repository&gt;\r\n          &lt;/repositories&gt;\r\n        &lt;/profile&gt;\r\n      &lt;/profiles&gt;\r\n    &lt;/settings&gt;\r\n\r\nAs per the AWS CodeDeploy instructions, I set up the `CODEARTIFACT_AUTH_TOKEN` as follows (valid for 12 hrs):\r\n\r\n    export CODEARTIFACT_AUTH_TOKEN=&#39;aws codeartifact get-authorization-token --domain uat-myco --domain-owner domainownerid --region us-east-1 --query authorizationToken --output text&#39;\r\n\r\nNote: `domainownerid` = the Domain owner id (number removed for privacy reasons)\r\n\r\nI then try deploy an artefact to the repo:\r\n\r\n    mvn deploy:deploy-file -DgroupId=myco-osgi-bom          \\\r\n    -DartifactId=myco-osgi-bom       \\\r\n    -Dversion=1.0                  \\\r\n    -Dfile=/Users/user/.m2/repository/com/myco/integration/myco-osgi-bom/1.0/myco-osgi-bom-1.0.pom   \\\r\n    -Dpackaging=xml                \\\r\n    -DrepositoryId=uat-myco-uat-myco-repository    \\\r\n    -Durl=https://uat-myco-domainownerid.d.codeartifact.us-east-1.amazonaws.com/maven/uat-myco-repository/\r\n\r\n**Output**\r\n\r\n    [INFO] Scanning for projects...\r\n    Downloading from uat-myco-uat-myco-repository: https://uat-myco-domainownerid.d.codeartifact.us-east-1.amazonaws.com/maven/uat-myco-repository/org/apache/maven/plugins/maven-clean-plugin/3.2.0/maven-clean-plugin-3.2.0.pom\r\n    [WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:maven-clean-plugin:3.2.0: Plugin org.apache.maven.plugins:maven-clean-plugin:3.2.0 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-clean-plugin:jar:3.2.0\r\n\r\n    [WARNING] org.codehaus.mojo/maven-metadata.xml failed to transfer from https://uat-myco-domainownerid.d.codeartifact.us-east-1.amazonaws.com/maven/uat-myco-repository/ during a previous attempt. This failure was cached in the local repository and resolution will not be reattempted until the update interval of uat-myco-uat-myco-repository has elapsed or updates are forced. Original error: Could not transfer metadata org.codehaus.mojo/maven-metadata.xml from/to uat-myco-uat-myco-repository (https://uat-myco-domainownerid.d.codeartifact.us-east-1.amazonaws.com/maven/uat-myco-repository/): status code: 401, reason phrase: Unauthorized (401)\r\n    \r\n    [ERROR] No plugin found for prefix &#39;deploy&#39; in the current project and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] available from the repositories [local (/Users/richardmarais/.m2/repository), uat-myco-uat-myco-repository (https://uat-myco-domainownerid.d.codeartifact.us-east-1.amazonaws.com/maven/uat-myco-repository/)] -&gt; [Help 1]\r\n\r\n**More Info**\r\n\r\nI run the following from the cmd line to see if the token can be generated.\r\n\r\n    $ aws codeartifact get-authorization-token --domain uat-myco --domain-owner domainownerid --region us-east-1 --query authorizationToken --output text\r\n    \r\n    An error occurred (UnrecognizedClientException) when calling the GetAuthorizationToken operation: The security token included in the request is invalid.\r\n\r\n**Policy**\r\n\r\nI did try setting up a Repository policy to give full access, but this made no difference:\r\n\r\n    {\r\n        &quot;Version&quot;: &quot;2012-10-17&quot;,\r\n        &quot;Statement&quot;: [\r\n            {\r\n                &quot;Effect&quot;: &quot;Allow&quot;,\r\n                &quot;Principal&quot;: {\r\n                    &quot;AWS&quot;: &quot;arn:aws:iam::domainownerid:root&quot;\r\n                },\r\n                &quot;Action&quot;: [\r\n                    &quot;codeartifact:AssociateExternalConnection&quot;,\r\n                    &quot;codeartifact:CopyPackageVersions&quot;,\r\n                    &quot;codeartifact:DeletePackageVersions&quot;,\r\n                    &quot;codeartifact:DeletePackage&quot;,\r\n                    &quot;codeartifact:DeleteRepository&quot;,\r\n                    &quot;codeartifact:DeleteRepositoryPermissionsPolicy&quot;,\r\n                    &quot;codeartifact:DescribePackageVersion&quot;,\r\n                    &quot;codeartifact:DescribeRepository&quot;,\r\n                    &quot;codeartifact:DisassociateExternalConnection&quot;,\r\n                    &quot;codeartifact:DisposePackageVersions&quot;,\r\n                    &quot;codeartifact:GetPackageVersionReadme&quot;,\r\n                    &quot;codeartifact:GetRepositoryEndpoint&quot;,\r\n                    &quot;codeartifact:ListPackageVersionAssets&quot;,\r\n                    &quot;codeartifact:ListPackageVersionDependencies&quot;,\r\n                    &quot;codeartifact:ListPackageVersions&quot;,\r\n                    &quot;codeartifact:ListPackages&quot;,\r\n                    &quot;codeartifact:PublishPackageVersion&quot;,\r\n                    &quot;codeartifact:PutPackageMetadata&quot;,\r\n                    &quot;codeartifact:PutRepositoryPermissionsPolicy&quot;,\r\n                    &quot;codeartifact:ReadFromRepository&quot;,\r\n                    &quot;codeartifact:UpdatePackageVersionsStatus&quot;,\r\n                    &quot;codeartifact:UpdateRepository&quot;\r\n                ],\r\n                &quot;Resource&quot;: &quot;*&quot;\r\n            }\r\n        ]\r\n    }\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/codeartifact/latest/ug/maven-mvn.html","link":"https://stackoverflow.com/questions/77006968/aws-codeartifact-maven-deploy-failing-with-unauthorized-401","title":"AWS CodeArtifact maven deploy failing with Unauthorized (401)","body":"<p>I have created a AWS CodeArtifact repository, and would like to upload some artefacts to it, however when I try do so I get the following error:</p>\n<p><strong>Error</strong></p>\n<pre><code>status code: 401, reason phrase: Unauthorized (401)\n</code></pre>\n<p>I have the following configuration on AWS CodeDeploy (using <a href=\"https://docs.aws.amazon.com/codeartifact/latest/ug/maven-mvn.html\" rel=\"nofollow noreferrer\">this</a> AWS documentation as a guideline).</p>\n<p>Domain: <code>uat-myco</code> and Repository: <code>uat-myco-repository</code>.</p>\n<p>On my local machine, I try to use <code>mvn deploy</code> to upload an artefact to the repo.</p>\n<p><strong>.m2/settings.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;settings xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.1.0 http://maven.apache.org/xsd/settings-1.1.0.xsd&quot;\n  xmlns=&quot;http://maven.apache.org/SETTINGS/1.1.0&quot;\n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\n  &lt;servers&gt;\n    &lt;server&gt;\n      &lt;id&gt;uat-myco-uat-myco-repository&lt;/id&gt;\n      &lt;username&gt;aws&lt;/username&gt;\n      &lt;password&gt;${env.CODEARTIFACT_AUTH_TOKEN}&lt;/password&gt;\n    &lt;/server&gt;\n  &lt;/servers&gt;\n  &lt;mirrors&gt;\n    &lt;mirror&gt;\n      &lt;id&gt;uat-myco-uat-myco-repository&lt;/id&gt;\n      &lt;name&gt;uat-myco-uat-myco-repository&lt;/name&gt;\n      &lt;url&gt;https://uat-myco-domainownerid.d.codeartifact.us-east-1.amazonaws.com/maven/uat-myco-repository/&lt;/url&gt;\n      &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;\n    &lt;/mirror&gt;\n  &lt;/mirrors&gt;\n  &lt;proxies&gt;\n  &lt;/proxies&gt;\n  &lt;activeProfiles&gt;\n    &lt;!--make the profile active all the time --&gt;\n    &lt;activeProfile&gt;uat-myco-uat-myco-repository&lt;/activeProfile&gt;\n  &lt;/activeProfiles&gt;\n  &lt;profiles&gt;\n    &lt;profile&gt;\n      &lt;id&gt;uat-myco-uat-myco-repository&lt;/id&gt;\n      &lt;activation&gt;\n        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n      &lt;/activation&gt;\n      &lt;repositories&gt;\n        &lt;repository&gt;\n          &lt;id&gt;uat-myco-uat-myco-repository&lt;/id&gt;\n          &lt;url&gt;https://uat-myco-domainownerid.d.codeartifact.us-east-1.amazonaws.com/maven/uat-myco-repository/&lt;/url&gt;\n        &lt;/repository&gt;\n      &lt;/repositories&gt;\n    &lt;/profile&gt;\n  &lt;/profiles&gt;\n&lt;/settings&gt;\n</code></pre>\n<p>As per the AWS CodeDeploy instructions, I set up the <code>CODEARTIFACT_AUTH_TOKEN</code> as follows (valid for 12 hrs):</p>\n<pre><code>export CODEARTIFACT_AUTH_TOKEN='aws codeartifact get-authorization-token --domain uat-myco --domain-owner domainownerid --region us-east-1 --query authorizationToken --output text'\n</code></pre>\n<p>Note: <code>domainownerid</code> = the Domain owner id (number removed for privacy reasons)</p>\n<p>I then try deploy an artefact to the repo:</p>\n<pre><code>mvn deploy:deploy-file -DgroupId=myco-osgi-bom          \\\n-DartifactId=myco-osgi-bom       \\\n-Dversion=1.0                  \\\n-Dfile=/Users/user/.m2/repository/com/myco/integration/myco-osgi-bom/1.0/myco-osgi-bom-1.0.pom   \\\n-Dpackaging=xml                \\\n-DrepositoryId=uat-myco-uat-myco-repository    \\\n-Durl=https://uat-myco-domainownerid.d.codeartifact.us-east-1.amazonaws.com/maven/uat-myco-repository/\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>[INFO] Scanning for projects...\nDownloading from uat-myco-uat-myco-repository: https://uat-myco-domainownerid.d.codeartifact.us-east-1.amazonaws.com/maven/uat-myco-repository/org/apache/maven/plugins/maven-clean-plugin/3.2.0/maven-clean-plugin-3.2.0.pom\n[WARNING] Failed to retrieve plugin descriptor for org.apache.maven.plugins:maven-clean-plugin:3.2.0: Plugin org.apache.maven.plugins:maven-clean-plugin:3.2.0 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-clean-plugin:jar:3.2.0\n\n[WARNING] org.codehaus.mojo/maven-metadata.xml failed to transfer from https://uat-myco-domainownerid.d.codeartifact.us-east-1.amazonaws.com/maven/uat-myco-repository/ during a previous attempt. This failure was cached in the local repository and resolution will not be reattempted until the update interval of uat-myco-uat-myco-repository has elapsed or updates are forced. Original error: Could not transfer metadata org.codehaus.mojo/maven-metadata.xml from/to uat-myco-uat-myco-repository (https://uat-myco-domainownerid.d.codeartifact.us-east-1.amazonaws.com/maven/uat-myco-repository/): status code: 401, reason phrase: Unauthorized (401)\n\n[ERROR] No plugin found for prefix 'deploy' in the current project and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] available from the repositories [local (/Users/richardmarais/.m2/repository), uat-myco-uat-myco-repository (https://uat-myco-domainownerid.d.codeartifact.us-east-1.amazonaws.com/maven/uat-myco-repository/)] -&gt; [Help 1]\n</code></pre>\n<p><strong>More Info</strong></p>\n<p>I run the following from the cmd line to see if the token can be generated.</p>\n<pre><code>$ aws codeartifact get-authorization-token --domain uat-myco --domain-owner domainownerid --region us-east-1 --query authorizationToken --output text\n\nAn error occurred (UnrecognizedClientException) when calling the GetAuthorizationToken operation: The security token included in the request is invalid.\n</code></pre>\n<p><strong>Policy</strong></p>\n<p>I did try setting up a Repository policy to give full access, but this made no difference:</p>\n<pre><code>{\n    &quot;Version&quot;: &quot;2012-10-17&quot;,\n    &quot;Statement&quot;: [\n        {\n            &quot;Effect&quot;: &quot;Allow&quot;,\n            &quot;Principal&quot;: {\n                &quot;AWS&quot;: &quot;arn:aws:iam::domainownerid:root&quot;\n            },\n            &quot;Action&quot;: [\n                &quot;codeartifact:AssociateExternalConnection&quot;,\n                &quot;codeartifact:CopyPackageVersions&quot;,\n                &quot;codeartifact:DeletePackageVersions&quot;,\n                &quot;codeartifact:DeletePackage&quot;,\n                &quot;codeartifact:DeleteRepository&quot;,\n                &quot;codeartifact:DeleteRepositoryPermissionsPolicy&quot;,\n                &quot;codeartifact:DescribePackageVersion&quot;,\n                &quot;codeartifact:DescribeRepository&quot;,\n                &quot;codeartifact:DisassociateExternalConnection&quot;,\n                &quot;codeartifact:DisposePackageVersions&quot;,\n                &quot;codeartifact:GetPackageVersionReadme&quot;,\n                &quot;codeartifact:GetRepositoryEndpoint&quot;,\n                &quot;codeartifact:ListPackageVersionAssets&quot;,\n                &quot;codeartifact:ListPackageVersionDependencies&quot;,\n                &quot;codeartifact:ListPackageVersions&quot;,\n                &quot;codeartifact:ListPackages&quot;,\n                &quot;codeartifact:PublishPackageVersion&quot;,\n                &quot;codeartifact:PutPackageMetadata&quot;,\n                &quot;codeartifact:PutRepositoryPermissionsPolicy&quot;,\n                &quot;codeartifact:ReadFromRepository&quot;,\n                &quot;codeartifact:UpdatePackageVersionsStatus&quot;,\n                &quot;codeartifact:UpdateRepository&quot;\n            ],\n            &quot;Resource&quot;: &quot;*&quot;\n        }\n    ]\n}\n</code></pre>\n"},{"tags":["java","flutter","android-sdk-tools"],"comment_count":0,"is_answered":false,"view_count":78,"answer_count":0,"score":0,"last_activity_date":1701949950,"creation_date":1696541490,"question_id":77240693,"body_markdown":"I am following the start up [documentation](https://docs.flutter.dev/get-started/install/macos#update-your-path) here to set up Flutter on Mac.\r\n\r\nI get the following from running `flutter doctor`\r\n\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n```\r\n[] Flutter (Channel stable, 3.13.6, on macOS 14.0 23A344 darwin-arm64, locale\r\n    en)\r\n[!] Android toolchain - develop for Android devices (Android SDK version 33.0.0)\r\n     Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https://flutter.dev/docs/get-started/install/macos#android-setup for\r\n      more details.\r\n[] Xcode - develop for iOS and macOS (Xcode 14.3.1)\r\n[] Chrome - develop for the web\r\n[] Android Studio (version 2021.3)\r\n[] VS Code (version 1.81.1)\r\n[] VS Code (version 1.82.2)\r\n[] Connected device (2 available)\r\n[] Network resources\r\n\r\n! Doctor found issues in 1 category.\r\n```\r\n\r\nWhen I run `flutter doctor --android-licenses` I get the following:\r\n\r\n```\r\nAndroid sdkmanager tool was found, but failed to run\r\n(/Users/mia/Library/Android/sdk/cmdline-tools/latest/bin/sdkmanager): &quot;exited\r\ncode 1&quot;.\r\nTry re-installing or updating your Android SDK,\r\nvisit https://flutter.dev/docs/get-started/install/macos#android-setup for\r\ndetailed instructions.\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI have tried re-installing and updating the Android SDK through android studio multiple times. I also tried updating my path to Java and installing a new JDK. This is in my .zshrc\r\n\r\n`export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-21.jdk/Contents/Home `\r\n\r\nThis is the output of flutter doctor --android-licenses --vv\r\n\r\n```\r\n[   +2 ms] Android sdkmanager tool was found, but failed to run\r\n           (/Users/mia/Library/Android/sdk/cmdline-tools/latest/bin/sdkmanager):\r\n&quot;exited\r\n           code 1&quot;.\r\n           Try re-installing or updating your Android SDK,\r\n           visit\r\nhttps://flutter.dev/docs/get-started/install/macos#android-setup for\r\n           detailed instructions.\r\n[   +1 ms] \r\n           #0      throwToolExit\r\n(package:flutter_tools/src/base/common.dart:10:3)\r\n           #1      AndroidLicenseValidator.runLicenseManager\r\n           (package:flutter_tools/src/android/android_workflow.dart:406:9)\r\n           &lt;asynchronous suspension&gt;\r\n           #2      DoctorCommand.runCommand\r\n           (package:flutter_tools/src/commands/doctor.dart:49:26)\r\n           &lt;asynchronous suspension&gt;\r\n           #3      FlutterCommand.run.&lt;anonymous closure&gt;\r\n           (package:flutter_tools/src/runner/flutter_command.dart:1297:27)\r\n           &lt;asynchronous suspension&gt;\r\n           #4      AppContext.run.&lt;anonymous closure&gt;\r\n           (package:flutter_tools/src/base/context.dart:150:19)\r\n           &lt;asynchronous suspension&gt;\r\n           #5      CommandRunner.runCommand\r\n(package:args/command_runner.dart:212:13)\r\n           &lt;asynchronous suspension&gt;\r\n           #6      FlutterCommandRunner.runCommand.&lt;anonymous closure&gt;\r\n           (package:flutter_tools/src/runner/flutter_command_runner.dart:339:9)\r\n           &lt;asynchronous suspension&gt;\r\n           #7      AppContext.run.&lt;anonymous closure&gt;\r\n           (package:flutter_tools/src/base/context.dart:150:19)\r\n           &lt;asynchronous suspension&gt;\r\n           #8      FlutterCommandRunner.runCommand\r\n           (package:flutter_tools/src/runner/flutter_command_runner.dart:285:5)\r\n           &lt;asynchronous suspension&gt;\r\n           #9      run.&lt;anonymous closure&gt;.&lt;anonymous closure&gt;\r\n           (package:flutter_tools/runner.dart:115:9)\r\n           &lt;asynchronous suspension&gt;\r\n           #10     AppContext.run.&lt;anonymous closure&gt;\r\n           (package:flutter_tools/src/base/context.dart:150:19)\r\n           &lt;asynchronous suspension&gt;\r\n           #11     main (package:flutter_tools/executable.dart:90:3)\r\n           &lt;asynchronous suspension&gt;\r\n           \r\n           \r\n[ +255 ms] ensureAnalyticsSent: 252ms\r\n[        ] Running 0 shutdown hooks\r\n[        ] Shutdown hooks complete\r\n[        ] exiting with code 1\r\n```\r\n\r\nI have MacOS Sonoma and a M1 mac I installed java jdk 21.","link":"https://stackoverflow.com/questions/77240693/error-accepting-android-licenses-on-mac-trying-to-set-up-for-flutter-developmen","title":"Error accepting android licenses on mac. Trying to set up for Flutter development on Mac","body":"<p>I am following the start up <a href=\"https://docs.flutter.dev/get-started/install/macos#update-your-path\" rel=\"nofollow noreferrer\">documentation</a> here to set up Flutter on Mac.</p>\n<p>I get the following from running <code>flutter doctor</code></p>\n<p>Doctor summary (to see all details, run flutter doctor -v):</p>\n<pre><code>[] Flutter (Channel stable, 3.13.6, on macOS 14.0 23A344 darwin-arm64, locale\n    en)\n[!] Android toolchain - develop for Android devices (Android SDK version 33.0.0)\n     Android license status unknown.\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\n      See https://flutter.dev/docs/get-started/install/macos#android-setup for\n      more details.\n[] Xcode - develop for iOS and macOS (Xcode 14.3.1)\n[] Chrome - develop for the web\n[] Android Studio (version 2021.3)\n[] VS Code (version 1.81.1)\n[] VS Code (version 1.82.2)\n[] Connected device (2 available)\n[] Network resources\n\n! Doctor found issues in 1 category.\n</code></pre>\n<p>When I run <code>flutter doctor --android-licenses</code> I get the following:</p>\n<pre><code>Android sdkmanager tool was found, but failed to run\n(/Users/mia/Library/Android/sdk/cmdline-tools/latest/bin/sdkmanager): &quot;exited\ncode 1&quot;.\nTry re-installing or updating your Android SDK,\nvisit https://flutter.dev/docs/get-started/install/macos#android-setup for\ndetailed instructions.\n</code></pre>\n<p>I have tried re-installing and updating the Android SDK through android studio multiple times. I also tried updating my path to Java and installing a new JDK. This is in my .zshrc</p>\n<p><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-21.jdk/Contents/Home </code></p>\n<p>This is the output of flutter doctor --android-licenses --vv</p>\n<pre><code>[   +2 ms] Android sdkmanager tool was found, but failed to run\n           (/Users/mia/Library/Android/sdk/cmdline-tools/latest/bin/sdkmanager):\n&quot;exited\n           code 1&quot;.\n           Try re-installing or updating your Android SDK,\n           visit\nhttps://flutter.dev/docs/get-started/install/macos#android-setup for\n           detailed instructions.\n[   +1 ms] \n           #0      throwToolExit\n(package:flutter_tools/src/base/common.dart:10:3)\n           #1      AndroidLicenseValidator.runLicenseManager\n           (package:flutter_tools/src/android/android_workflow.dart:406:9)\n           &lt;asynchronous suspension&gt;\n           #2      DoctorCommand.runCommand\n           (package:flutter_tools/src/commands/doctor.dart:49:26)\n           &lt;asynchronous suspension&gt;\n           #3      FlutterCommand.run.&lt;anonymous closure&gt;\n           (package:flutter_tools/src/runner/flutter_command.dart:1297:27)\n           &lt;asynchronous suspension&gt;\n           #4      AppContext.run.&lt;anonymous closure&gt;\n           (package:flutter_tools/src/base/context.dart:150:19)\n           &lt;asynchronous suspension&gt;\n           #5      CommandRunner.runCommand\n(package:args/command_runner.dart:212:13)\n           &lt;asynchronous suspension&gt;\n           #6      FlutterCommandRunner.runCommand.&lt;anonymous closure&gt;\n           (package:flutter_tools/src/runner/flutter_command_runner.dart:339:9)\n           &lt;asynchronous suspension&gt;\n           #7      AppContext.run.&lt;anonymous closure&gt;\n           (package:flutter_tools/src/base/context.dart:150:19)\n           &lt;asynchronous suspension&gt;\n           #8      FlutterCommandRunner.runCommand\n           (package:flutter_tools/src/runner/flutter_command_runner.dart:285:5)\n           &lt;asynchronous suspension&gt;\n           #9      run.&lt;anonymous closure&gt;.&lt;anonymous closure&gt;\n           (package:flutter_tools/runner.dart:115:9)\n           &lt;asynchronous suspension&gt;\n           #10     AppContext.run.&lt;anonymous closure&gt;\n           (package:flutter_tools/src/base/context.dart:150:19)\n           &lt;asynchronous suspension&gt;\n           #11     main (package:flutter_tools/executable.dart:90:3)\n           &lt;asynchronous suspension&gt;\n           \n           \n[ +255 ms] ensureAnalyticsSent: 252ms\n[        ] Running 0 shutdown hooks\n[        ] Shutdown hooks complete\n[        ] exiting with code 1\n</code></pre>\n<p>I have MacOS Sonoma and a M1 mac I installed java jdk 21.</p>\n"},{"tags":["java","android"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701378339,"post_id":77580680,"comment_id":136771696,"body_markdown":"is there any other way without the whole method cause it is deprecated i mean, onOptionsItemSelected(MenuItem item) is deprecated, and the return super.onOptionsItemSelected(item); is also deprecated. any other solution? \nI will try this one and get back to u? \n\nI appreciate your time Ars","link":"https://stackoverflow.com/questions/77580188/how-to-pop-back-to-the-previous-fragment-in-java-android/77580680#comment136771696_77580680","body":"is there any other way without the whole method cause it is deprecated i mean, onOptionsItemSelected(MenuItem item) is deprecated, and the return super.onOptionsItemSelected(item); is also deprecated. any other solution?  I will try this one and get back to u?   I appreciate your time Ars"},{"score":0,"post_type":"answer","creation_date":1701454545,"post_id":77580680,"comment_id":136781876,"body_markdown":"I&#39;m not certain why you&#39;re seeing that it is deprecated... I&#39;m using Android Studio Giraffe  2022.3.1 Patch 4 with a `compileSdk` in the build.gradle of level 33 and I&#39;m not seeing the strike-through code. Perhaps right-click and add to your question what the context menu has to say.","link":"https://stackoverflow.com/questions/77580188/how-to-pop-back-to-the-previous-fragment-in-java-android/77580680#comment136781876_77580680","body":"I&#39;m not certain why you&#39;re seeing that it is deprecated... I&#39;m using Android Studio Giraffe  2022.3.1 Patch 4 with a <code>compileSdk</code> in the build.gradle of level 33 and I&#39;m not seeing the strike-through code. Perhaps right-click and add to your question what the context menu has to say."}],"comment_count":2,"score":2,"last_activity_date":1701366800,"creation_date":1701366800,"answer_id":77580680,"question_id":77580188,"body_markdown":"You could update your code like this:\r\n\r\n```\r\n@Override\r\npublic boolean onOptionsItemSelected(MenuItem item) {\r\n    switch (item.getItemId()){\r\n        case android.R.id.home:\r\n            getFragmentManager().popBackStack();\r\n            return true;\r\n        default:\r\n            return super.onOptionsItemSelected(item);\r\n    }\r\n}\r\n```\r\n\r\n`getFragmentManager().popBackStack()` does the &quot;magic&quot; and will return to the previous fragment.","link":"https://stackoverflow.com/questions/77580188/how-to-pop-back-to-the-previous-fragment-in-java-android/77580680#77580680","title":"how to pop back to the previous fragment in Java Android","body":"<p>You could update your code like this:</p>\n<pre><code>@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    switch (item.getItemId()){\n        case android.R.id.home:\n            getFragmentManager().popBackStack();\n            return true;\n        default:\n            return super.onOptionsItemSelected(item);\n    }\n}\n</code></pre>\n<p><code>getFragmentManager().popBackStack()</code> does the &quot;magic&quot; and will return to the previous fragment.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701946237,"creation_date":1701946237,"answer_id":77619406,"question_id":77580188,"body_markdown":"so basically these onOptionsItemSelected() has been deprecated for Fragment class only. (still available for Activity class)\r\n\r\nso the substitute is to provide a menuProvider as follows \r\nnote: as I have used this menu provider in a lot of classes I seperate it to reuse it. \r\n\r\n```\r\npublic class MenuProviderManager implements MenuProvider {\r\n    private final FragmentManager fragmentManager;\r\n\r\n    public MenuProviderManager(FragmentManager fragmentManager) {\r\n        this.fragmentManager = fragmentManager;\r\n    }\r\n\r\n    public void onCreateMenu(@NonNull Menu menu, @NonNull MenuInflater menuInflater) {\r\n    }\r\n\r\n    public boolean onMenuItemSelected(@NonNull MenuItem menuItem) {\r\n        if (menuItem.getItemId() == android.R.id.home) {\r\n            fragmentManager.popBackStack();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\r\n```\r\n\r\nin your &quot;FRAGMENT&quot; you can do as follows\r\n\r\n```\r\nprivate void setMenuOptions() {\r\n        MenuProviderManager menuProvider = new MenuProviderManager(getParentFragmentManager());\r\n        MenuHost menuHost = getActivity();\r\n        menuHost.addMenuProvider(menuProvider, getViewLifecycleOwner(), Lifecycle.State.RESUMED);\r\n    }\r\n```\r\n\r\nnow in you this function has to be called from somewhere I used the onViewCreated(). Because I wanted to be sure that the menu is not created unless the view has it should be on. is created.","link":"https://stackoverflow.com/questions/77580188/how-to-pop-back-to-the-previous-fragment-in-java-android/77619406#77619406","title":"how to pop back to the previous fragment in Java Android","body":"<p>so basically these onOptionsItemSelected() has been deprecated for Fragment class only. (still available for Activity class)</p>\n<p>so the substitute is to provide a menuProvider as follows\nnote: as I have used this menu provider in a lot of classes I seperate it to reuse it.</p>\n<pre><code>public class MenuProviderManager implements MenuProvider {\n    private final FragmentManager fragmentManager;\n\n    public MenuProviderManager(FragmentManager fragmentManager) {\n        this.fragmentManager = fragmentManager;\n    }\n\n    public void onCreateMenu(@NonNull Menu menu, @NonNull MenuInflater menuInflater) {\n    }\n\n    public boolean onMenuItemSelected(@NonNull MenuItem menuItem) {\n        if (menuItem.getItemId() == android.R.id.home) {\n            fragmentManager.popBackStack();\n            return true;\n        }\n        return false;\n    }\n}\n\n</code></pre>\n<p>in your &quot;FRAGMENT&quot; you can do as follows</p>\n<pre><code>private void setMenuOptions() {\n        MenuProviderManager menuProvider = new MenuProviderManager(getParentFragmentManager());\n        MenuHost menuHost = getActivity();\n        menuHost.addMenuProvider(menuProvider, getViewLifecycleOwner(), Lifecycle.State.RESUMED);\n    }\n</code></pre>\n<p>now in you this function has to be called from somewhere I used the onViewCreated(). Because I wanted to be sure that the menu is not created unless the view has it should be on. is created.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701952620,"post_id":77619571,"comment_id":136839998,"body_markdown":"deprecated methods in Fragment class in Java\nsee solution below","link":"https://stackoverflow.com/questions/77580188/how-to-pop-back-to-the-previous-fragment-in-java-android/77619571#comment136839998_77619571","body":"deprecated methods in Fragment class in Java see solution below"}],"comment_count":1,"score":0,"last_activity_date":1701947707,"creation_date":1701947707,"answer_id":77619571,"question_id":77580188,"body_markdown":"Using in your Activity onBackPressed Method\r\n\r\n     override fun onBackPressed() {\r\n     \r\n        val count = supportFragmentManager.backStackEntryCount\r\n        if (count == 0) {\r\n            super.onBackPressed();\r\n            //additional code\r\n        } else {\r\n            getSupportFragmentManager().popBackStack();\r\n        }\r\n    }","link":"https://stackoverflow.com/questions/77580188/how-to-pop-back-to-the-previous-fragment-in-java-android/77619571#77619571","title":"how to pop back to the previous fragment in Java Android","body":"<p>Using in your Activity onBackPressed Method</p>\n<pre><code> override fun onBackPressed() {\n \n    val count = supportFragmentManager.backStackEntryCount\n    if (count == 0) {\n        super.onBackPressed();\n        //additional code\n    } else {\n        getSupportFragmentManager().popBackStack();\n    }\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":65,"answer_count":3,"score":0,"last_activity_date":1701947707,"creation_date":1701362724,"last_edit_date":1701688323,"question_id":77580188,"body_markdown":"so basically I am trying to remove the deprecation any advices.  \r\non how to roll back to the previous fragment.\r\n\r\n[![enter image description here](https://i.stack.imgur.com/yCW1F.png)](https://i.stack.imgur.com/yCW1F.png)\r\n\r\nthis is  what i tried but everything is deprecated. is there any way to perform the back press with not Deprecated code\r\n\r\nnote: this method is deprecated on the Fragment class only","link":"https://stackoverflow.com/questions/77580188/how-to-pop-back-to-the-previous-fragment-in-java-android","title":"how to pop back to the previous fragment in Java Android","body":"<p>so basically I am trying to remove the deprecation any advices.<br />\non how to roll back to the previous fragment.</p>\n<p><a href=\"https://i.stack.imgur.com/yCW1F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yCW1F.png\" alt=\"enter image description here\" /></a></p>\n<p>this is  what i tried but everything is deprecated. is there any way to perform the back press with not Deprecated code</p>\n<p>note: this method is deprecated on the Fragment class only</p>\n"},{"tags":["java","android","gradle"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701947193,"creation_date":1701947193,"answer_id":77619522,"question_id":77555213,"body_markdown":"It seems there is no good answer here, basically the only strategies Gradle provides are forcing a single version onto all dependencies.\r\n\r\nYou can find a short resume of the strategies here:\r\n\r\nhttps://ospfranco.com/how-to-resolve-duplicated-libraries-on-android/","link":"https://stackoverflow.com/questions/77555213/android-gradle-de-duplicate-shared-library-libcrypto-so/77619522#77619522","title":"Android Gradle, de-duplicate shared library libcrypto.so","body":"<p>It seems there is no good answer here, basically the only strategies Gradle provides are forcing a single version onto all dependencies.</p>\n<p>You can find a short resume of the strategies here:</p>\n<p><a href=\"https://ospfranco.com/how-to-resolve-duplicated-libraries-on-android/\" rel=\"nofollow noreferrer\">https://ospfranco.com/how-to-resolve-duplicated-libraries-on-android/</a></p>\n"}],"comment_count":0,"is_answered":true,"view_count":42,"answer_count":1,"score":1,"last_activity_date":1701947193,"creation_date":1701070924,"question_id":77555213,"body_markdown":"I have a question about the gradle build system. I have a library (for React Native) which depends on OpenSSL, I have declared my dependency as such:\r\n\r\n```groovy\r\ndependencies {\r\n  //noinspection GradleDynamicVersion\r\n  implementation &#39;com.facebook.react:react-android:+&#39;\r\n  implementation &#39;com.android.ndk.thirdparty:openssl:1.1.1q-beta-1&#39;\r\n}\r\n```\r\n\r\nIf my library is the only one in the build process that uses this dependency, then everything compiles fine. However, if another library also depends on openssl, it will also generate it&#39;s own `libcrypto.so` and then the build process fails with duplicated symbols:\r\n\r\n```\r\nExecution failed for task &#39;:app:mergeDebugNativeLibs&#39;.\r\n\r\nA failure occurred while executing com.android.build.gradle.internal.tasks.MergeNativeLibsTask$MergeNativeLibsTaskWorkAction\r\n2 files found with path &#39;lib/arm64-v8a/libcrypto.so&#39; from inputs:\r\n- D:\\Project\\sqlst\\node_modules@op-engineering\\op-sqlcipher\\android\\build\\intermediates\\library_jni\\debug\\jni\\arm64-v8a\\libcrypto.so\r\n- C:\\Users\\shiroze\\.gradle\\caches\\transforms-3\\e13f88164840fe641a466d05cd8edac7\\transformed\\jetified-flipper-0.182.0\\jni\\arm64-v8a\\libcrypto.so\r\nIf you are using jniLibs and CMake IMPORTED targets, see\r\ndeveloper.android.com/r/tools/jniLibs-vs-imported-targets\r\n```\r\n\r\nOne solution is to add the `libcrypto.so` from my library to the exclude list, but this means if there is no other library that generates the .so, then it will be missing from the runtime and the app will crash.\r\n\r\n```groovy\r\npackagingOptions {\r\n        doNotStrip resolveBuildType() == &#39;debug&#39; ? &quot;**/**/*.so&quot; : &#39;&#39;\r\n        excludes = [\r\n                &quot;META-INF&quot;,\r\n                &quot;META-INF/**&quot;,\r\n                &quot;**/libjsi.so&quot;,\r\n                &quot;**/libreact_nativemodule_core.so&quot;,\r\n                &quot;**/libturbomodulejsijni.so&quot;,\r\n                &quot;**/libc++_shared.so&quot;,\r\n                &quot;**/libfbjni.so&quot;,\r\n                &quot;**/libcrypto.so&quot;\r\n        ]\r\n}\r\n```\r\n\r\nThe other options is to use `pickFirst` function:\r\n\r\n```groovy\r\npickFirst &#39;**/x86/libcrypto.so&#39;\r\npickFirst &#39;**/x86_64/libcrypto.so&#39;\r\npickFirst &#39;**/armeabi-v7a/libcrypto.so&#39;\r\npickFirst &#39;**/arm64-v8a/libcrypto.so&#39;\r\n```\r\n\r\nBut from what I understand, this just tells the compiler, just pick the first one that appears when linking the library. What if it picks an incorrect version from another dependency and there are missing symbols or incorrect function signatures.\r\n\r\nJust trying to understand what is going on here and if there is any way to guarantee my library will be correctly linked. Thanks a lot!","link":"https://stackoverflow.com/questions/77555213/android-gradle-de-duplicate-shared-library-libcrypto-so","title":"Android Gradle, de-duplicate shared library libcrypto.so","body":"<p>I have a question about the gradle build system. I have a library (for React Native) which depends on OpenSSL, I have declared my dependency as such:</p>\n<pre><code>dependencies {\n  //noinspection GradleDynamicVersion\n  implementation 'com.facebook.react:react-android:+'\n  implementation 'com.android.ndk.thirdparty:openssl:1.1.1q-beta-1'\n}\n</code></pre>\n<p>If my library is the only one in the build process that uses this dependency, then everything compiles fine. However, if another library also depends on openssl, it will also generate it's own <code>libcrypto.so</code> and then the build process fails with duplicated symbols:</p>\n<pre><code>Execution failed for task ':app:mergeDebugNativeLibs'.\n\nA failure occurred while executing com.android.build.gradle.internal.tasks.MergeNativeLibsTask$MergeNativeLibsTaskWorkAction\n2 files found with path 'lib/arm64-v8a/libcrypto.so' from inputs:\n- D:\\Project\\sqlst\\node_modules@op-engineering\\op-sqlcipher\\android\\build\\intermediates\\library_jni\\debug\\jni\\arm64-v8a\\libcrypto.so\n- C:\\Users\\shiroze\\.gradle\\caches\\transforms-3\\e13f88164840fe641a466d05cd8edac7\\transformed\\jetified-flipper-0.182.0\\jni\\arm64-v8a\\libcrypto.so\nIf you are using jniLibs and CMake IMPORTED targets, see\ndeveloper.android.com/r/tools/jniLibs-vs-imported-targets\n</code></pre>\n<p>One solution is to add the <code>libcrypto.so</code> from my library to the exclude list, but this means if there is no other library that generates the .so, then it will be missing from the runtime and the app will crash.</p>\n<pre><code>packagingOptions {\n        doNotStrip resolveBuildType() == 'debug' ? &quot;**/**/*.so&quot; : ''\n        excludes = [\n                &quot;META-INF&quot;,\n                &quot;META-INF/**&quot;,\n                &quot;**/libjsi.so&quot;,\n                &quot;**/libreact_nativemodule_core.so&quot;,\n                &quot;**/libturbomodulejsijni.so&quot;,\n                &quot;**/libc++_shared.so&quot;,\n                &quot;**/libfbjni.so&quot;,\n                &quot;**/libcrypto.so&quot;\n        ]\n}\n</code></pre>\n<p>The other options is to use <code>pickFirst</code> function:</p>\n<pre><code>pickFirst '**/x86/libcrypto.so'\npickFirst '**/x86_64/libcrypto.so'\npickFirst '**/armeabi-v7a/libcrypto.so'\npickFirst '**/arm64-v8a/libcrypto.so'\n</code></pre>\n<p>But from what I understand, this just tells the compiler, just pick the first one that appears when linking the library. What if it picks an incorrect version from another dependency and there are missing symbols or incorrect function signatures.</p>\n<p>Just trying to understand what is going on here and if there is any way to guarantee my library will be correctly linked. Thanks a lot!</p>\n"},{"tags":["java","regex","replace","utf-8"],"comments":[{"score":0,"post_type":"question","creation_date":1687972825,"post_id":76575294,"comment_id":135012782,"body_markdown":"replaceAll(&quot;&#226;&quot;, &quot; &quot;) maybe?","link":"https://stackoverflow.com/questions/76575294/replace-non-utf-8-character-from-string-xml-by-space-in-java#comment135012782_76575294","body":"replaceAll(&quot;&#226;&quot;, &quot; &quot;) maybe?"},{"score":0,"post_type":"question","creation_date":1687973417,"post_id":76575294,"comment_id":135012873,"body_markdown":"@Mar-Z I already tried that, please see the updated post","link":"https://stackoverflow.com/questions/76575294/replace-non-utf-8-character-from-string-xml-by-space-in-java#comment135012873_76575294","body":"@Mar-Z I already tried that, please see the updated post"},{"score":1,"post_type":"question","creation_date":1687973744,"post_id":76575294,"comment_id":135012929,"body_markdown":"`replaceAll(&quot;[^\\\\x00-\\\\x7F]+&quot;,&quot; &quot;)` ?! (just added a `+` to match once or more) || BTW be aware that `^\\x00-\\x7F` is more like non-ASCII instead on non-UTF-8","link":"https://stackoverflow.com/questions/76575294/replace-non-utf-8-character-from-string-xml-by-space-in-java#comment135012929_76575294","body":"<code>replaceAll(&quot;[^\\\\x00-\\\\x7F]+&quot;,&quot; &quot;)</code> ?! (just added a <code>+</code> to match once or more) || BTW be aware that <code>^\\x00-\\x7F</code> is more like non-ASCII instead on non-UTF-8"}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1687973846,"creation_date":1687973846,"answer_id":76575523,"question_id":76575294,"body_markdown":"You can use `+` quantifier:\r\n\r\n        String s = &quot;abc&#226;s house.&quot;;\r\n        s = s.replaceAll(&quot;[^\\\\x00-\\\\x7F]+&quot;,&quot; &quot;);\r\n        System.out.println(s);\r\n\r\nprints:\r\n\r\n&gt; abc s house.","link":"https://stackoverflow.com/questions/76575294/replace-non-utf-8-character-from-string-xml-by-space-in-java/76575523#76575523","title":"Replace non-UTF-8 character from String XML by space in java","body":"<p>You can use <code>+</code> quantifier:</p>\n<pre><code>    String s = &quot;abcs house.&quot;;\n    s = s.replaceAll(&quot;[^\\\\x00-\\\\x7F]+&quot;,&quot; &quot;);\n    System.out.println(s);\n</code></pre>\n<p>prints:</p>\n<blockquote>\n<p>abc s house.</p>\n</blockquote>\n"},{"comment_count":0,"score":0,"last_activity_date":1701947012,"last_edit_date":1701947012,"creation_date":1701946558,"answer_id":77619444,"question_id":76575294,"body_markdown":"You can use the below to remove Non-UTF-8 Characters and replace them with some value.\r\n\r\n\t\tif(fields!=null&amp;&amp;!(&quot;&quot;).equals(fields)) {\r\n\t\t\treturn (fields.replaceAll(&quot;[^\\\\x00-\\\\xFF]+&quot;,&quot; ?&quot;));\r\n\t\t}else {\r\n\t\t\treturn fields;\r\n\t\t}\r\n\r\n\t","link":"https://stackoverflow.com/questions/76575294/replace-non-utf-8-character-from-string-xml-by-space-in-java/77619444#77619444","title":"Replace non-UTF-8 character from String XML by space in java","body":"<p>You can use the below to remove Non-UTF-8 Characters and replace them with some value.</p>\n<pre><code>    if(fields!=null&amp;&amp;!(&quot;&quot;).equals(fields)) {\n        return (fields.replaceAll(&quot;[^\\\\x00-\\\\xFF]+&quot;,&quot; ?&quot;));\n    }else {\n        return fields;\n    }\n</code></pre>\n"}],"comment_count":3,"is_answered":true,"view_count":222,"answer_count":2,"score":0,"last_activity_date":1701947012,"creation_date":1687971569,"last_edit_date":1687977533,"question_id":76575294,"body_markdown":"Checking this [post][1], I&#39;m able to replace the `&#226;` character which is the apostrophe character `` from my String XML by space:\r\n\r\n    String s = &quot;&lt;content&gt;abc&#226;s house.&lt;/content&gt;&quot;;\t\t\r\n    s = s.replaceAll(&quot;[^\\\\x00-\\\\x7F]&quot;,&quot; &quot;);\r\n    System.out.println(s);\r\n\r\nThe issue is that it produces 3 spaces: `abc   s house.`, I&#39;d say because of `&#226;` having 3 characters maybe? But I need for that character to be replaced by just one space: `abc s house.`\r\n\r\nIf I use below approach, it works while running from eclipse, but when I compile it to an executable jar, then it converts the `&#226;` by the `` and since the string doesn&#39;t have the `` it doesn&#39;t work. (I&#39;m able to see this behavior by decompiling the jar and see the code):\r\n\r\n    s = s.replace(&quot;&#226;&quot;, &quot; &quot;);\r\n\r\n  [1]: https://stackoverflow.com/a/31891207/808891","link":"https://stackoverflow.com/questions/76575294/replace-non-utf-8-character-from-string-xml-by-space-in-java","title":"Replace non-UTF-8 character from String XML by space in java","body":"<p>Checking this <a href=\"https://stackoverflow.com/a/31891207/808891\">post</a>, I'm able to replace the <code></code> character which is the apostrophe character <code></code> from my String XML by space:</p>\n<pre><code>String s = &quot;&lt;content&gt;abcs house.&lt;/content&gt;&quot;;     \ns = s.replaceAll(&quot;[^\\\\x00-\\\\x7F]&quot;,&quot; &quot;);\nSystem.out.println(s);\n</code></pre>\n<p>The issue is that it produces 3 spaces: <code>abc   s house.</code>, I'd say because of <code></code> having 3 characters maybe? But I need for that character to be replaced by just one space: <code>abc s house.</code></p>\n<p>If I use below approach, it works while running from eclipse, but when I compile it to an executable jar, then it converts the <code></code> by the <code></code> and since the string doesn't have the <code></code> it doesn't work. (I'm able to see this behavior by decompiling the jar and see the code):</p>\n<pre><code>s = s.replace(&quot;&quot;, &quot; &quot;);\n</code></pre>\n"},{"tags":["java","sql","spring-boot","spring-data-jpa","querydsl"],"comment_count":0,"is_answered":false,"view_count":41,"answer_count":0,"score":0,"last_activity_date":1701944931,"creation_date":1700056387,"last_edit_date":1700060652,"question_id":77488288,"body_markdown":"I&#39;m trying to convert the c# linq query to java querydsl query.\r\nBut I&#39;m struggling with it.\r\nHere is the c# code:\r\n\r\n    var ssiDeclarationMasters = UnitOfWork.CurrentSession.SsiDeclarationMasters\r\n    .Where(x =&gt; x.year == 2023)\r\n    .Select(x =&gt; new\r\n    {\r\n        Id = x.Id,\r\n        Name = x.Name,\r\n        IsConfirmed = x.IsConfirmed,\r\n        SsiDeclarationPromotionLaws = x.SsiDeclarationPromotionLaws\r\n        .Where(y =&gt; y.PromotionLawId == 5)\r\n        .ToList()\r\n    })\r\n    .ToList();\r\n\r\nHere is my java code to do that:\r\n\r\n    var c2 = queryFactory.selectFrom(ssiMaster)\r\n                .rightJoin(ssiMaster.SsiDeclarationPromotionLaws, promotionLaw)\r\n                .where(\r\n                        ssiMaster.year.eq(2023),\r\n                        promotionLaw.promotionLawId.eq(5)\r\n                )\r\n               .select(\r\n                        ssiMaster.isConfirmed,\r\n                        ssiMaster.name,\r\n                        ssiMaster.SsiDeclarationPromotionLaws\r\n\r\n                        );\r\n\r\nThis code doesnt filter ssiMaster.SsiDeclarationPromotionLaws table. It just gets all promotion results.\r\nWhat am I missing?\r\n","link":"https://stackoverflow.com/questions/77488288/filter-child-entities-in-querydsl-query","title":"Filter child entities in querydsl query","body":"<p>I'm trying to convert the c# linq query to java querydsl query.\nBut I'm struggling with it.\nHere is the c# code:</p>\n<pre><code>var ssiDeclarationMasters = UnitOfWork.CurrentSession.SsiDeclarationMasters\n.Where(x =&gt; x.year == 2023)\n.Select(x =&gt; new\n{\n    Id = x.Id,\n    Name = x.Name,\n    IsConfirmed = x.IsConfirmed,\n    SsiDeclarationPromotionLaws = x.SsiDeclarationPromotionLaws\n    .Where(y =&gt; y.PromotionLawId == 5)\n    .ToList()\n})\n.ToList();\n</code></pre>\n<p>Here is my java code to do that:</p>\n<pre><code>var c2 = queryFactory.selectFrom(ssiMaster)\n            .rightJoin(ssiMaster.SsiDeclarationPromotionLaws, promotionLaw)\n            .where(\n                    ssiMaster.year.eq(2023),\n                    promotionLaw.promotionLawId.eq(5)\n            )\n           .select(\n                    ssiMaster.isConfirmed,\n                    ssiMaster.name,\n                    ssiMaster.SsiDeclarationPromotionLaws\n\n                    );\n</code></pre>\n<p>This code doesnt filter ssiMaster.SsiDeclarationPromotionLaws table. It just gets all promotion results.\nWhat am I missing?</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-mvc"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1682076233,"creation_date":1682076233,"answer_id":76072689,"question_id":75995461,"body_markdown":"**I finally fixed it** by replacing all @ManyToOne fetchtype with LAZY and changing some configuration.\r\n\r\n so, this:\r\n\r\n    @ManyToOne\r\n    private MyObject myObjectReference\r\n\r\nbecame: \r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    private MyObject myObjectReference\r\n\r\n(I have 1641 `@ManyToOne` replaced by `@ManyToOne(fetch = FetchType.LAZY)`)\r\n\r\nI Also changed my ApplicationConfiguration class: instead of using `LocalSessionFactoryBean` and `HibernateTransactionManager`, I use `LocalContainerEntityManagerFactoryBean` and `JpaTransactionManager`:\r\n\r\n    @SpringBootApplication\r\n    @EnableAutoConfiguration(\r\n        excludeName = { \r\n            &quot;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration&quot;\r\n        }\r\n    )\r\n    @ComponentScan( ... )\r\n    @PropertySource\r\n    @EnableCaching\r\n    @EnableTransactionManagement\r\n    @Configuration\r\n    public class ApplicationConfiguration {\r\n    \r\n        @Primary\r\n        @Autowired\r\n        @Bean\r\n        public LocalContainerEntityManagerFactoryBean entityManagerFactory(@Qualifier(&quot;dataSource&quot;) DataSource dataSource,\r\n                                                             MultiTenantConnectionProvider multiTenantConnectionProviderImpl,\r\n                                                             CurrentTenantIdentifierResolver currentTenantIdentifierResolverImpl) {\r\n            \r\n            LocalContainerEntityManagerFactoryBean entityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();\r\n\t        entityManagerFactoryBean.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\r\n\t\t    entityManagerFactoryBean.setDataSource(dataSource);\t\t\r\n            entityManagerFactoryBean.setPersistenceProviderClass(HibernatePersistenceProvider.class);\r\n\t\t    entityManagerFactoryBean.setPackagesToScan(packagesToScan); \r\n\r\n\t        Properties hibernateProperties = hibernateProperties();\r\n\t        hibernateProperties.put(AvailableSettings.MULTI_TENANT_CONNECTION_PROVIDER, multiTenantConnectionProviderImpl);\r\n\t        hibernateProperties.put(AvailableSettings.MULTI_TENANT_IDENTIFIER_RESOLVER, currentTenantIdentifierResolverImpl);\r\n\r\n\t        entityManagerFactoryBean.setJpaProperties(hibernateProperties);\r\n\r\n\t        return entityManagerFactoryBean;\r\n        }\r\n    \r\n        @Bean\r\n        @Autowired\r\n        @Primary\r\n        public TransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\r\n            JpaTransactionManager jpaTransactionManager = new JpaTransactionManager();\r\n            jpaTransactionManager.setDataSource(dataSource());\r\n            jpaTransactionManager.setEntityManagerFactory(entityManagerFactory);\r\n            return jpaTransactionManager;\r\n        }\r\n    }\r\n\r\nI also changed MyCustomDAO to use EntityManager instead of HibernateTransactionManager: \r\n\r\n    public class MyCustomDAO {\r\n    \r\n    \t@PersistenceContext \r\n    \tprotected EntityManager entityManager;\r\n    \r\n    \t@Transactional\r\n    \tpublic void myCustomMethod() {\r\n    \t\r\n    \t\t// Some transactional code\r\n    \r\n    \t}\r\n    }\r\n\r\nIt works now.\r\nI think when hibernate trying to create requests at runtime for CRUD operations, OneToOne and ManyToOne not Lazy fetched is included into requests so when there is many foreign key deeply/circular linked (Ex: TableA -&gt; TableB -&gt; TableC -&gt; TableA), requests generated became so big or maybe with an infinite recursion (caused by circular Join) that an OutOfMemoryEdxception is raised  ","link":"https://stackoverflow.com/questions/75995461/outofmemoryerror-after-migrating-to-spring-6-hibernate-6-spring-boot-3-with/76072689#76072689","title":"OutOfMemoryError after migrating to spring 6 / hibernate 6 / spring boot 3 with multiple datasources, caused by TransactionManagement","body":"<p><strong>I finally fixed it</strong> by replacing all @ManyToOne fetchtype with LAZY and changing some configuration.</p>\n<p>so, this:</p>\n<pre><code>@ManyToOne\nprivate MyObject myObjectReference\n</code></pre>\n<p>became:</p>\n<pre><code>@ManyToOne(fetch = FetchType.LAZY)\nprivate MyObject myObjectReference\n</code></pre>\n<p>(I have 1641 <code>@ManyToOne</code> replaced by <code>@ManyToOne(fetch = FetchType.LAZY)</code>)</p>\n<p>I Also changed my ApplicationConfiguration class: instead of using <code>LocalSessionFactoryBean</code> and <code>HibernateTransactionManager</code>, I use <code>LocalContainerEntityManagerFactoryBean</code> and <code>JpaTransactionManager</code>:</p>\n<pre><code>@SpringBootApplication\n@EnableAutoConfiguration(\n    excludeName = { \n        &quot;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration&quot;\n    }\n)\n@ComponentScan( ... )\n@PropertySource\n@EnableCaching\n@EnableTransactionManagement\n@Configuration\npublic class ApplicationConfiguration {\n\n    @Primary\n    @Autowired\n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(@Qualifier(&quot;dataSource&quot;) DataSource dataSource,\n                                                         MultiTenantConnectionProvider multiTenantConnectionProviderImpl,\n                                                         CurrentTenantIdentifierResolver currentTenantIdentifierResolverImpl) {\n        \n        LocalContainerEntityManagerFactoryBean entityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();\n        entityManagerFactoryBean.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n        entityManagerFactoryBean.setDataSource(dataSource);     \n        entityManagerFactoryBean.setPersistenceProviderClass(HibernatePersistenceProvider.class);\n        entityManagerFactoryBean.setPackagesToScan(packagesToScan); \n\n        Properties hibernateProperties = hibernateProperties();\n        hibernateProperties.put(AvailableSettings.MULTI_TENANT_CONNECTION_PROVIDER, multiTenantConnectionProviderImpl);\n        hibernateProperties.put(AvailableSettings.MULTI_TENANT_IDENTIFIER_RESOLVER, currentTenantIdentifierResolverImpl);\n\n        entityManagerFactoryBean.setJpaProperties(hibernateProperties);\n\n        return entityManagerFactoryBean;\n    }\n\n    @Bean\n    @Autowired\n    @Primary\n    public TransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\n        JpaTransactionManager jpaTransactionManager = new JpaTransactionManager();\n        jpaTransactionManager.setDataSource(dataSource());\n        jpaTransactionManager.setEntityManagerFactory(entityManagerFactory);\n        return jpaTransactionManager;\n    }\n}\n</code></pre>\n<p>I also changed MyCustomDAO to use EntityManager instead of HibernateTransactionManager:</p>\n<pre><code>public class MyCustomDAO {\n\n    @PersistenceContext \n    protected EntityManager entityManager;\n\n    @Transactional\n    public void myCustomMethod() {\n    \n        // Some transactional code\n\n    }\n}\n</code></pre>\n<p>It works now.\nI think when hibernate trying to create requests at runtime for CRUD operations, OneToOne and ManyToOne not Lazy fetched is included into requests so when there is many foreign key deeply/circular linked (Ex: TableA -&gt; TableB -&gt; TableC -&gt; TableA), requests generated became so big or maybe with an infinite recursion (caused by circular Join) that an OutOfMemoryEdxception is raised</p>\n"}],"comment_count":0,"is_answered":false,"view_count":324,"answer_count":1,"score":3,"last_activity_date":1701933934,"creation_date":1681302541,"last_edit_date":1681306203,"question_id":75995461,"body_markdown":"can someone help me please: I trying to migrate huge java project from hibernate 5, spring 5 &amp; spring boot 2 to hibernate 6, spring 6 &amp; spring boot 3 but I&#39;m stuck with an OutOfMemory exception that seems to be a circular dependency problem, caused by @PostConstruct annotation.\r\n\r\n\r\n\r\nHere is my **ApplicationConfiguration** class (Class and methods names was changed and useless code for this topic was removed): \r\n\r\n&lt;pre&gt;\r\n\r\n    @SpringBootApplication\r\n    @EnableAutoConfiguration(\r\n    \texcludeName = { \r\n    \t\t&quot;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration&quot;\r\n    \t}\r\n    )\r\n    @ComponentScan( ... )\r\n    @PropertySource\r\n    @EnableCaching\r\n    @EnableTransactionManagement\r\n    @Configuration\r\n    public class ApplicationConfiguration {\r\n    \r\n    \t@Primary\r\n    \t@Autowired\r\n    \t@Bean\r\n    \tpublic LocalSessionFactoryBean sessionFactory(@Qualifier(&quot;dataSource&quot;) DataSource dataSource,\r\n                                                             MultiTenantConnectionProvider multiTenantConnectionProviderImpl,\r\n                                                             CurrentTenantIdentifierResolver currentTenantIdentifierResolverImpl) {\r\n            \r\n            // Some code: Creation of LocalSessionFactoryBean for primary datasource\r\n        }\r\n    \r\n    \t@Bean\r\n    \t@Autowired\r\n    \t@Primary\r\n    \tpublic HibernateTransactionManager transactionManager(@Qualifier(&quot;sessionFactory&quot;) SessionFactory sessionFactory) {\r\n    \t\t\t\t\r\n    \t\t// Some code: Creation of primary transaction manager\r\n    \t}\r\n    }\r\n\r\n&lt;/pre&gt;\r\n\r\nHere is **MyCustomDAO** class\r\n&lt;pre&gt;\r\n\r\n    public class MyCustomDAO {\r\n    \r\n    \t@Autowired(required = false)\r\n    \t@Qualifier(&quot;transactionManager&quot;)\r\n    \t@Lazy\r\n    \tprotected HibernateTransactionManager transactionManager;\r\n    \r\n        @Transactional\r\n        public void myCustomMethod() {\r\n        \r\n            // Some transactional code\r\n    \r\n        }\r\n    }\r\n\r\n&lt;/pre&gt;\r\n\r\nLast, but not least, **MyCustomService** class with a `@PostConstruct` method that throw Exception:\r\n&lt;pre&gt;\r\n\r\n    @Service\r\n    public class MyCustomService {\r\n       \r\n        @Autowired\r\n    \tprivate MyCustomDAO myCustomDAO;\r\n    \r\n    \t@PostConstruct\r\n        public void updateStatus() {\r\n            \r\n            // since &#39;myCustomMethod&#39; is transactional, it need a transaction\r\n            // then throw an OutOfMemoryException\r\n            myCustomDAO.myCustomMethod();\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n&lt;/pre&gt;\r\n\r\nI faced the following error:\r\n\r\n&gt; `Error creating bean with name &#39;myCustomService&#39;: Invocation of init\r\n&gt; method failed` (begin of the message) \r\n&gt; and `java.lang.OutOfMemoryError: Java heap space` (end of the message)\r\n\r\n&lt;pre&gt;\r\n12/04/23 13:28:01 demolocal-i10_demo   [main] ERROR t.i.SpringBootApplicationLauncher - Error creating bean with name &#39;myCustomService&#39;: Invocation of init method failed\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;myCustomService &#39;: Invocation of init method failed\r\n\tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:195)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:420)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1754)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:917)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:310)\r\n\tat stackoverflow.example.SpringBootApplicationLauncher.initialize(SpringBootApplicationLauncher.java:335)\r\n\tat stackoverflow.example.SpringBootApplicationLauncher.main(SpringBootApplicationLauncher.java:152)\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;transactionManager&#39; defined in stackoverflow.example.config.ApplicationConfiguration: Unsatisfied dependency expressed through method &#39;transactionManager&#39; parameter 0: Error creating bean with name &#39;sessionFactory&#39; defined in stackoverflow.example.config.ApplicationConfiguration: Java heap space\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:548)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:225)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1298)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1282)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:483)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:338)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:331)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.determineTransactionManager(TransactionAspectSupport.java:505)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:344)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702)\r\n\tat stackoverflow.example.society.MyCustomDAO$$SpringCGLIB$$1.myCustomMethod(&lt;generated&gt;)\r\n\tat stackoverflow.example.accountinggeneral.MyCustomService.lambda$0(MyCustomService.java:153)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat java.base/java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1092)\r\n\tat stackoverflow.example.accountinggeneral.MyCustomService.updateStatus(MyCustomService.java:150)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:424)\r\n\tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:368)\r\n\tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:192)\r\n\t... 17 more\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sessionFactory&#39; defined in stackoverflow.example.config.ApplicationConfiguration: Java heap space\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:885)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)\r\n\t... 49 more\r\nCaused by: java.lang.OutOfMemoryError: Java heap space\r\n\tat java.base/jdk.internal.misc.Unsafe.allocateUninitializedArray0(Unsafe.java:1382)\r\n\tat java.base/jdk.internal.misc.Unsafe.allocateUninitializedArray(Unsafe.java:1375)\r\n\tat java.base/java.lang.StringConcatHelper.newArray(StringConcatHelper.java:494)\r\n\tat java.base/java.lang.StringConcatHelper.simpleConcat(StringConcatHelper.java:421)\r\n\tat java.base/java.lang.invoke.DirectMethodHandle$Holder.invokeStatic(DirectMethodHandle$Holder)\r\n\tat java.base/java.lang.invoke.LambdaForm$MH/0x0000000800c04400.invoke(LambdaForm$MH)\r\n\tat java.base/java.lang.invoke.Invokers$Holder.linkToTargetMethod(Invokers$Holder)\r\n\tat org.hibernate.sql.ast.SqlTreePrinter.logSqlAst(SqlTreePrinter.java:46)\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translateSelect(AbstractSqlAstTranslator.java:828)\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translate(AbstractSqlAstTranslator.java:780)\r\n\tat org.hibernate.loader.ast.internal.SingleIdLoadPlan.&lt;init&gt;(SingleIdLoadPlan.java:65)\r\n\tat org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.createLoadPlan(SingleIdEntityLoaderStandardImpl.java:195)\r\n\tat org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.prepare(SingleIdEntityLoaderStandardImpl.java:54)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.prepareLoader(AbstractEntityPersister.java:3332)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.postInstantiate(AbstractEntityPersister.java:3326)\r\n\tat org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.finishInitialization(MappingMetamodelImpl.java:204)\r\n\tat org.hibernate.internal.SessionFactoryImpl.initializeMappingModel(SessionFactoryImpl.java:319)\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:269)\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:431)\r\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:894)\r\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:913)\r\n\tat org.springframework.orm.hibernate5.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:612)\r\n\tat org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:596)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1808)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1758)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$461/0x0000000800f44b08.getObject(Unknown Source)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n\r\n12/04/23 13:28:01 demolocal-i10_demo   [main] ERROR t.i.SpringBootApplicationLauncher - Error creating bean with name &#39;myCustomService&#39;: Invocation of init method failed\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;myCustomService &#39;: Invocation of init method failed\r\n\tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:195)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:420)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1754)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:917)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:310)\r\n\tat stackoverflow.example.SpringBootApplicationLauncher.initialize(SpringBootApplicationLauncher.java:335)\r\n\tat stackoverflow.example.SpringBootApplicationLauncher.main(SpringBootApplicationLauncher.java:152)\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;transactionManager&#39; defined in stackoverflow.example.config.ApplicationConfiguration: Unsatisfied dependency expressed through method &#39;transactionManager&#39; parameter 0: Error creating bean with name &#39;sessionFactory&#39; defined in stackoverflow.example.config.ApplicationConfiguration: Java heap space\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:548)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:225)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1298)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1282)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:483)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:338)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:331)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.determineTransactionManager(TransactionAspectSupport.java:505)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:344)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702)\r\n\tat stackoverflow.example.society.MyCustomDAO$$SpringCGLIB$$1.myCustomMethod(&lt;generated&gt;)\r\n\tat stackoverflow.example.accountinggeneral.MyCustomService.lambda$0(MyCustomService.java:153)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat java.base/java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1092)\r\n\tat stackoverflow.example.accountinggeneral.MyCustomService.updateStatus(MyCustomService.java:150)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:424)\r\n\tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:368)\r\n\tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:192)\r\n\t... 17 more\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sessionFactory&#39; defined in stackoverflow.example.config.ApplicationConfiguration: Java heap space\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:885)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)\r\n\t... 49 more\r\nCaused by: java.lang.OutOfMemoryError: Java heap space\r\n\tat java.base/jdk.internal.misc.Unsafe.allocateUninitializedArray0(Unsafe.java:1382)\r\n\tat java.base/jdk.internal.misc.Unsafe.allocateUninitializedArray(Unsafe.java:1375)\r\n\tat java.base/java.lang.StringConcatHelper.newArray(StringConcatHelper.java:494)\r\n\tat java.base/java.lang.StringConcatHelper.simpleConcat(StringConcatHelper.java:421)\r\n\tat java.base/java.lang.invoke.DirectMethodHandle$Holder.invokeStatic(DirectMethodHandle$Holder)\r\n\tat java.base/java.lang.invoke.LambdaForm$MH/0x0000000800c04400.invoke(LambdaForm$MH)\r\n\tat java.base/java.lang.invoke.Invokers$Holder.linkToTargetMethod(Invokers$Holder)\r\n\tat org.hibernate.sql.ast.SqlTreePrinter.logSqlAst(SqlTreePrinter.java:46)\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translateSelect(AbstractSqlAstTranslator.java:828)\r\n\tat org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translate(AbstractSqlAstTranslator.java:780)\r\n\tat org.hibernate.loader.ast.internal.SingleIdLoadPlan.&lt;init&gt;(SingleIdLoadPlan.java:65)\r\n\tat org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.createLoadPlan(SingleIdEntityLoaderStandardImpl.java:195)\r\n\tat org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.prepare(SingleIdEntityLoaderStandardImpl.java:54)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.prepareLoader(AbstractEntityPersister.java:3332)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.postInstantiate(AbstractEntityPersister.java:3326)\r\n\tat org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.finishInitialization(MappingMetamodelImpl.java:204)\r\n\tat org.hibernate.internal.SessionFactoryImpl.initializeMappingModel(SessionFactoryImpl.java:319)\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:269)\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:431)\r\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:894)\r\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:913)\r\n\tat org.springframework.orm.hibernate5.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:612)\r\n\tat org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:596)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1808)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1758)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$461/0x0000000800f44b08.getObject(Unknown Source)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n&lt;/pre&gt;\r\n\r\nNotice that if I put `SpringApplication.setLazyInitialization(true)`, it works, also none of my webservice is available. But @PostConstruct method is not called until bean is created so I guess it is a circular dependency problem.\r\n","link":"https://stackoverflow.com/questions/75995461/outofmemoryerror-after-migrating-to-spring-6-hibernate-6-spring-boot-3-with","title":"OutOfMemoryError after migrating to spring 6 / hibernate 6 / spring boot 3 with multiple datasources, caused by TransactionManagement","body":"<p>can someone help me please: I trying to migrate huge java project from hibernate 5, spring 5 &amp; spring boot 2 to hibernate 6, spring 6 &amp; spring boot 3 but I'm stuck with an OutOfMemory exception that seems to be a circular dependency problem, caused by @PostConstruct annotation.</p>\n<p>Here is my <strong>ApplicationConfiguration</strong> class (Class and methods names was changed and useless code for this topic was removed):</p>\n<pre>\n\n    @SpringBootApplication\n    @EnableAutoConfiguration(\n        excludeName = { \n            \"org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration\"\n        }\n    )\n    @ComponentScan( ... )\n    @PropertySource\n    @EnableCaching\n    @EnableTransactionManagement\n    @Configuration\n    public class ApplicationConfiguration {\n    \n        @Primary\n        @Autowired\n        @Bean\n        public LocalSessionFactoryBean sessionFactory(@Qualifier(\"dataSource\") DataSource dataSource,\n                                                             MultiTenantConnectionProvider multiTenantConnectionProviderImpl,\n                                                             CurrentTenantIdentifierResolver currentTenantIdentifierResolverImpl) {\n            \n            // Some code: Creation of LocalSessionFactoryBean for primary datasource\n        }\n    \n        @Bean\n        @Autowired\n        @Primary\n        public HibernateTransactionManager transactionManager(@Qualifier(\"sessionFactory\") SessionFactory sessionFactory) {\n                    \n            // Some code: Creation of primary transaction manager\n        }\n    }\n\n</pre>\n<p>Here is <strong>MyCustomDAO</strong> class</p>\n<pre>\n\n    public class MyCustomDAO {\n    \n        @Autowired(required = false)\n        @Qualifier(\"transactionManager\")\n        @Lazy\n        protected HibernateTransactionManager transactionManager;\n    \n        @Transactional\n        public void myCustomMethod() {\n        \n            // Some transactional code\n    \n        }\n    }\n\n</pre>\n<p>Last, but not least, <strong>MyCustomService</strong> class with a <code>@PostConstruct</code> method that throw Exception:</p>\n<pre>\n\n    @Service\n    public class MyCustomService {\n       \n        @Autowired\n        private MyCustomDAO myCustomDAO;\n    \n        @PostConstruct\n        public void updateStatus() {\n            \n            // since 'myCustomMethod' is transactional, it need a transaction\n            // then throw an OutOfMemoryException\n            myCustomDAO.myCustomMethod();\n    \n        }\n    \n    }\n\n</pre>\n<p>I faced the following error:</p>\n<blockquote>\n<p><code>Error creating bean with name 'myCustomService': Invocation of init method failed</code> (begin of the message)\nand <code>java.lang.OutOfMemoryError: Java heap space</code> (end of the message)</p>\n</blockquote>\n<pre>\n12/04/23 13:28:01 demolocal-i10_demo   [main] ERROR t.i.SpringBootApplicationLauncher - Error creating bean with name 'myCustomService': Invocation of init method failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myCustomService ': Invocation of init method failed\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:420)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1754)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:917)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:310)\n    at stackoverflow.example.SpringBootApplicationLauncher.initialize(SpringBootApplicationLauncher.java:335)\n    at stackoverflow.example.SpringBootApplicationLauncher.main(SpringBootApplicationLauncher.java:152)\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'transactionManager' defined in stackoverflow.example.config.ApplicationConfiguration: Unsatisfied dependency expressed through method 'transactionManager' parameter 0: Error creating bean with name 'sessionFactory' defined in stackoverflow.example.config.ApplicationConfiguration: Java heap space\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:548)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:225)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1298)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1282)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:483)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:338)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:331)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.determineTransactionManager(TransactionAspectSupport.java:505)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:344)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702)\n    at stackoverflow.example.society.MyCustomDAO$$SpringCGLIB$$1.myCustomMethod()\n    at stackoverflow.example.accountinggeneral.MyCustomService.lambda$0(MyCustomService.java:153)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at java.base/java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1092)\n    at stackoverflow.example.accountinggeneral.MyCustomService.updateStatus(MyCustomService.java:150)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:424)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:368)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:192)\n    ... 17 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in stackoverflow.example.config.ApplicationConfiguration: Java heap space\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:885)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)\n    ... 49 more\nCaused by: java.lang.OutOfMemoryError: Java heap space\n    at java.base/jdk.internal.misc.Unsafe.allocateUninitializedArray0(Unsafe.java:1382)\n    at java.base/jdk.internal.misc.Unsafe.allocateUninitializedArray(Unsafe.java:1375)\n    at java.base/java.lang.StringConcatHelper.newArray(StringConcatHelper.java:494)\n    at java.base/java.lang.StringConcatHelper.simpleConcat(StringConcatHelper.java:421)\n    at java.base/java.lang.invoke.DirectMethodHandle$Holder.invokeStatic(DirectMethodHandle$Holder)\n    at java.base/java.lang.invoke.LambdaForm$MH/0x0000000800c04400.invoke(LambdaForm$MH)\n    at java.base/java.lang.invoke.Invokers$Holder.linkToTargetMethod(Invokers$Holder)\n    at org.hibernate.sql.ast.SqlTreePrinter.logSqlAst(SqlTreePrinter.java:46)\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translateSelect(AbstractSqlAstTranslator.java:828)\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translate(AbstractSqlAstTranslator.java:780)\n    at org.hibernate.loader.ast.internal.SingleIdLoadPlan.(SingleIdLoadPlan.java:65)\n    at org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.createLoadPlan(SingleIdEntityLoaderStandardImpl.java:195)\n    at org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.prepare(SingleIdEntityLoaderStandardImpl.java:54)\n    at org.hibernate.persister.entity.AbstractEntityPersister.prepareLoader(AbstractEntityPersister.java:3332)\n    at org.hibernate.persister.entity.AbstractEntityPersister.postInstantiate(AbstractEntityPersister.java:3326)\n    at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.finishInitialization(MappingMetamodelImpl.java:204)\n    at org.hibernate.internal.SessionFactoryImpl.initializeMappingModel(SessionFactoryImpl.java:319)\n    at org.hibernate.internal.SessionFactoryImpl.(SessionFactoryImpl.java:269)\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:431)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:894)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:913)\n    at org.springframework.orm.hibernate5.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:612)\n    at org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:596)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1808)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1758)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$461/0x0000000800f44b08.getObject(Unknown Source)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n\n12/04/23 13:28:01 demolocal-i10_demo   [main] ERROR t.i.SpringBootApplicationLauncher - Error creating bean with name 'myCustomService': Invocation of init method failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myCustomService ': Invocation of init method failed\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:420)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1754)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:917)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:310)\n    at stackoverflow.example.SpringBootApplicationLauncher.initialize(SpringBootApplicationLauncher.java:335)\n    at stackoverflow.example.SpringBootApplicationLauncher.main(SpringBootApplicationLauncher.java:152)\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'transactionManager' defined in stackoverflow.example.config.ApplicationConfiguration: Unsatisfied dependency expressed through method 'transactionManager' parameter 0: Error creating bean with name 'sessionFactory' defined in stackoverflow.example.config.ApplicationConfiguration: Java heap space\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:548)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:225)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1298)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1282)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:483)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:338)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:331)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.determineTransactionManager(TransactionAspectSupport.java:505)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:344)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702)\n    at stackoverflow.example.society.MyCustomDAO$$SpringCGLIB$$1.myCustomMethod()\n    at stackoverflow.example.accountinggeneral.MyCustomService.lambda$0(MyCustomService.java:153)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at java.base/java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1092)\n    at stackoverflow.example.accountinggeneral.MyCustomService.updateStatus(MyCustomService.java:150)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:424)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:368)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:192)\n    ... 17 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in stackoverflow.example.config.ApplicationConfiguration: Java heap space\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:885)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)\n    ... 49 more\nCaused by: java.lang.OutOfMemoryError: Java heap space\n    at java.base/jdk.internal.misc.Unsafe.allocateUninitializedArray0(Unsafe.java:1382)\n    at java.base/jdk.internal.misc.Unsafe.allocateUninitializedArray(Unsafe.java:1375)\n    at java.base/java.lang.StringConcatHelper.newArray(StringConcatHelper.java:494)\n    at java.base/java.lang.StringConcatHelper.simpleConcat(StringConcatHelper.java:421)\n    at java.base/java.lang.invoke.DirectMethodHandle$Holder.invokeStatic(DirectMethodHandle$Holder)\n    at java.base/java.lang.invoke.LambdaForm$MH/0x0000000800c04400.invoke(LambdaForm$MH)\n    at java.base/java.lang.invoke.Invokers$Holder.linkToTargetMethod(Invokers$Holder)\n    at org.hibernate.sql.ast.SqlTreePrinter.logSqlAst(SqlTreePrinter.java:46)\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translateSelect(AbstractSqlAstTranslator.java:828)\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translate(AbstractSqlAstTranslator.java:780)\n    at org.hibernate.loader.ast.internal.SingleIdLoadPlan.(SingleIdLoadPlan.java:65)\n    at org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.createLoadPlan(SingleIdEntityLoaderStandardImpl.java:195)\n    at org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.prepare(SingleIdEntityLoaderStandardImpl.java:54)\n    at org.hibernate.persister.entity.AbstractEntityPersister.prepareLoader(AbstractEntityPersister.java:3332)\n    at org.hibernate.persister.entity.AbstractEntityPersister.postInstantiate(AbstractEntityPersister.java:3326)\n    at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.finishInitialization(MappingMetamodelImpl.java:204)\n    at org.hibernate.internal.SessionFactoryImpl.initializeMappingModel(SessionFactoryImpl.java:319)\n    at org.hibernate.internal.SessionFactoryImpl.(SessionFactoryImpl.java:269)\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:431)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:894)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:913)\n    at org.springframework.orm.hibernate5.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:612)\n    at org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:596)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1808)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1758)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$461/0x0000000800f44b08.getObject(Unknown Source)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n</pre>\n<p>Notice that if I put <code>SpringApplication.setLazyInitialization(true)</code>, it works, also none of my webservice is available. But @PostConstruct method is not called until bean is created so I guess it is a circular dependency problem.</p>\n"},{"tags":["java","spring","design-patterns","factory"],"comments":[{"score":0,"post_type":"question","creation_date":1700682488,"post_id":77532576,"comment_id":136685903,"body_markdown":"Maybe use a `Map&lt;String,String&gt;` that maps from the `type` to the format string generated by `String.format(&quot;%s.%s&quot;, A_PACKAGE , A_CLASS )` and `String.format(&quot;%s.%s&quot;, B_PACKAGE , B_CLASS )` respectively?","link":"https://stackoverflow.com/questions/77532576/java-factory-pattern#comment136685903_77532576","body":"Maybe use a <code>Map&lt;String,String&gt;</code> that maps from the <code>type</code> to the format string generated by <code>String.format(&quot;%s.%s&quot;, A_PACKAGE , A_CLASS )</code> and <code>String.format(&quot;%s.%s&quot;, B_PACKAGE , B_CLASS )</code> respectively?"},{"score":0,"post_type":"question","creation_date":1700688972,"post_id":77532576,"comment_id":136686873,"body_markdown":"It&#39;s always possible to do better, but what do you really mean by &quot;cleaner way&quot;?","link":"https://stackoverflow.com/questions/77532576/java-factory-pattern#comment136686873_77532576","body":"It&#39;s always possible to do better, but what do you really mean by &quot;cleaner way&quot;?"},{"score":0,"post_type":"question","creation_date":1700696007,"post_id":77532576,"comment_id":136687672,"body_markdown":"i don&#39;t want to work with java reflection due to its performance degradation problem","link":"https://stackoverflow.com/questions/77532576/java-factory-pattern#comment136687672_77532576","body":"i don&#39;t want to work with java reflection due to its performance degradation problem"},{"score":0,"post_type":"question","creation_date":1700839666,"post_id":77532576,"comment_id":136705799,"body_markdown":"Why don&#39;t you create the exact type without the reflection?","link":"https://stackoverflow.com/questions/77532576/java-factory-pattern#comment136705799_77532576","body":"Why don&#39;t you create the exact type without the reflection?"},{"score":1,"post_type":"question","creation_date":1702546332,"post_id":77532576,"comment_id":136910150,"body_markdown":"Side note: when you use a `StringBuilder`, use it consistently. Instead of `new StringBuilder(frontUrl + &quot;/public/payment/status?success=&quot;);`, use `new StringBuilder().append(frontUrl).append(&quot;/public/payment/status?success=&quot;);`","link":"https://stackoverflow.com/questions/77532576/java-factory-pattern#comment136910150_77532576","body":"Side note: when you use a <code>StringBuilder</code>, use it consistently. Instead of <code>new StringBuilder(frontUrl + &quot;&#47;public&#47;payment&#47;status?success=&quot;);</code>, use <code>new StringBuilder().append(frontUrl).append(&quot;&#47;public&#47;payment&#47;sta&zwnj;&#8203;tus?success=&quot;);</code>"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1700742218,"post_id":77532733,"comment_id":136693285,"body_markdown":"Why do you use a paramerize type for **FactoryProducer** instead of using **ThirdPartyCallsStrategy** as a return type of create method?","link":"https://stackoverflow.com/questions/77532576/java-factory-pattern/77532733#comment136693285_77532733","body":"Why do you use a paramerize type for <b>FactoryProducer</b> instead of using <b>ThirdPartyCallsStrategy</b> as a return type of create method?"},{"score":0,"post_type":"answer","creation_date":1701098803,"post_id":77532733,"comment_id":136729762,"body_markdown":"@Abned The FactoryPattern as I&#39;ve written it here removes the use of reflection, and parameterizing the FactoryPattern you make sure that if you only want FactoryPatterns that create objects of type `Foo`, you can parameterize the FactoryPattern and the Factory","link":"https://stackoverflow.com/questions/77532576/java-factory-pattern/77532733#comment136729762_77532733","body":"@Abned The FactoryPattern as I&#39;ve written it here removes the use of reflection, and parameterizing the FactoryPattern you make sure that if you only want FactoryPatterns that create objects of type <code>Foo</code>, you can parameterize the FactoryPattern and the Factory"}],"comment_count":2,"score":0,"last_activity_date":1700910137,"last_edit_date":1700910137,"creation_date":1700682444,"answer_id":77532733,"question_id":77532576,"body_markdown":"The best way to do this is like:\r\n\r\n    public interface FactoryProducer&lt;T&gt; {\r\n      public T create(String param);\r\n    }\r\n    \r\n    public class Factory&lt;T&gt; {\r\n      Map producers = new HashMap&lt;string, FactoryProducer&lt;T&gt;&gt;();\r\n      public void registerFactory(String key, FactoryProducer&lt;T&gt; producer) {\r\n        producers.put(key, producer);\r\n      }\r\n      public FactoryProducer&lt;T&gt; getFactory(String key) {\r\n        return producers.get(key);\r\n      }\r\n    }\r\n\r\nThis way you can build FactoryProducers and Factories and keep everything decoupled.\r\n","link":"https://stackoverflow.com/questions/77532576/java-factory-pattern/77532733#77532733","title":"Java Factory pattern","body":"<p>The best way to do this is like:</p>\n<pre><code>public interface FactoryProducer&lt;T&gt; {\n  public T create(String param);\n}\n\npublic class Factory&lt;T&gt; {\n  Map producers = new HashMap&lt;string, FactoryProducer&lt;T&gt;&gt;();\n  public void registerFactory(String key, FactoryProducer&lt;T&gt; producer) {\n    producers.put(key, producer);\n  }\n  public FactoryProducer&lt;T&gt; getFactory(String key) {\n    return producers.get(key);\n  }\n}\n</code></pre>\n<p>This way you can build FactoryProducers and Factories and keep everything decoupled.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1702546619,"post_id":77617410,"comment_id":136910190,"body_markdown":"This is the right way to go. But when the OP is using Java modules (its not clear whether this is meant by module in the question), there is no need to deal with `META-INF/services/` resources. Instead, module A will declare `provides ThirdPartyCallsStrategy with AStrategy;` in its `module-info.java` and likewise module B declares `provides ThirdPartyCallsStrategy with BStrategy;`, and module C has to declare `uses ThirdPartyCallsStrategy;` in its `module-info.java`","link":"https://stackoverflow.com/questions/77532576/java-factory-pattern/77617410#comment136910190_77617410","body":"This is the right way to go. But when the OP is using Java modules (its not clear whether this is meant by module in the question), there is no need to deal with <code>META-INF&#47;services&#47;</code> resources. Instead, module A will declare <code>provides ThirdPartyCallsStrategy with AStrategy;</code> in its <code>module-info.java</code> and likewise module B declares <code>provides ThirdPartyCallsStrategy with BStrategy;</code>, and module C has to declare <code>uses ThirdPartyCallsStrategy;</code> in its <code>module-info.java</code>"}],"comment_count":1,"score":0,"last_activity_date":1701918024,"last_edit_date":1701918024,"creation_date":1701917677,"answer_id":77617410,"question_id":77532576,"body_markdown":"**Use Java SPI.**\r\n\r\n## Define the interface `com.modelc.ThirdPartyCallsStrategy` in model C.\r\n```Java\r\npublic interface ThirdPartyCallsStrategy {\r\n    void apply(String orderId);\r\n\r\n    String type();\r\n}\r\n```\r\n## Implement `ThirdPartyCallsStrategy` in model A and model B.\r\n```java\r\npublic class AStrategy implements ThirdPartyCallsStrategy {\r\n    public void apply(String orderId) {\r\n        // Do something here.\r\n    }\r\n    public String type() {\r\n        return &quot;A&quot;;\r\n    }\r\n}\r\npublic class BStrategy implements ThirdPartyCallsStrategy {\r\n    public void apply(String orderId) {\r\n        // Do something different here.\r\n    }\r\n    public String type() {\r\n        return &quot;B&quot;;\r\n    }\r\n}\r\n```\r\n## Register your implements in META-INF.\r\nIn the file of model A `resources/META-INF/services/com.modelc.ThirdPartyCallsStrategy`:\r\n```\r\ncom.modela.AStrategy\r\n```\r\nIn the file of model B `resources/META-INF/services/com.modelc.ThirdPartyCallsStrategy`:\r\n```\r\ncom.modelb.BStrategy\r\n```\r\n## Create your factory in model C.\r\n```java\r\npublic class CoreCallsFactory {\r\n    private final Map&lt;String, ThirdPartyCallsStrategy&gt; strategyMap;\r\n\r\n    public CoreCallsFactory() {\r\n        strategyMap = new HashMap&lt;&gt;();\r\n        ServiceLoader&lt;ThirdPartyCallsStrategy&gt; strategies = ServiceLoader.load(ThirdPartyCallsStrategy.class);\r\n        for (ThirdPartyCallsStrategy strategy : strategies) {\r\n            strategyMap.put(strategy.type(), strategy);\r\n        }\r\n    }\r\n\r\n    public ThirdPartyCallsStrategy createThirdPartyCallsStrategy(String type) {\r\n        ThirdPartyCallsStrategy strategy = strategyMap.get(type);\r\n        if (strategy == null) {\r\n            throw new IllegalArgumentException(&quot;There is no strategy for this type: &quot; + type);\r\n        }\r\n        return strategy;\r\n    }\r\n}\r\n```\r\n\r\nmodel A and B depend on the interface in model C, but model C don&#39;t know model A or B.\r\n","link":"https://stackoverflow.com/questions/77532576/java-factory-pattern/77617410#77617410","title":"Java Factory pattern","body":"<p><strong>Use Java SPI.</strong></p>\n<h2>Define the interface <code>com.modelc.ThirdPartyCallsStrategy</code> in model C.</h2>\n<pre><code>public interface ThirdPartyCallsStrategy {\n    void apply(String orderId);\n\n    String type();\n}\n</code></pre>\n<h2>Implement <code>ThirdPartyCallsStrategy</code> in model A and model B.</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public class AStrategy implements ThirdPartyCallsStrategy {\n    public void apply(String orderId) {\n        // Do something here.\n    }\n    public String type() {\n        return &quot;A&quot;;\n    }\n}\npublic class BStrategy implements ThirdPartyCallsStrategy {\n    public void apply(String orderId) {\n        // Do something different here.\n    }\n    public String type() {\n        return &quot;B&quot;;\n    }\n}\n</code></pre>\n<h2>Register your implements in META-INF.</h2>\n<p>In the file of model A <code>resources/META-INF/services/com.modelc.ThirdPartyCallsStrategy</code>:</p>\n<pre><code>com.modela.AStrategy\n</code></pre>\n<p>In the file of model B <code>resources/META-INF/services/com.modelc.ThirdPartyCallsStrategy</code>:</p>\n<pre><code>com.modelb.BStrategy\n</code></pre>\n<h2>Create your factory in model C.</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public class CoreCallsFactory {\n    private final Map&lt;String, ThirdPartyCallsStrategy&gt; strategyMap;\n\n    public CoreCallsFactory() {\n        strategyMap = new HashMap&lt;&gt;();\n        ServiceLoader&lt;ThirdPartyCallsStrategy&gt; strategies = ServiceLoader.load(ThirdPartyCallsStrategy.class);\n        for (ThirdPartyCallsStrategy strategy : strategies) {\n            strategyMap.put(strategy.type(), strategy);\n        }\n    }\n\n    public ThirdPartyCallsStrategy createThirdPartyCallsStrategy(String type) {\n        ThirdPartyCallsStrategy strategy = strategyMap.get(type);\n        if (strategy == null) {\n            throw new IllegalArgumentException(&quot;There is no strategy for this type: &quot; + type);\n        }\n        return strategy;\n    }\n}\n</code></pre>\n<p>model A and B depend on the interface in model C, but model C don't know model A or B.</p>\n"}],"comment_count":5,"is_answered":false,"view_count":114,"answer_count":2,"score":1,"last_activity_date":1701918024,"creation_date":1700680484,"last_edit_date":1700739371,"question_id":77532576,"body_markdown":"I have module A and module B each one have some specific services and i have a module C that don&#39;t have any dependencies to A and B so what i want is to call services from modules A and B and I want to acheive that using factory pattern.\r\n\r\nin module C i have created this interface and it will be a common interface to be implemented in modules A and B\r\n\r\n```java\r\npublic interface ThirdPartyCallsStrategy {\r\n\tvoid apply(String orderId);\r\n}\r\n```\r\n\r\nAnd this is example of factory class and will provide the appropriate instance needed based on type parameter\r\n\r\n```\r\n@Component\r\n@AllArgsConstructor\r\npublic class CoreCallsFactory {\r\n\r\n\tprivate static final String A_PACKAGE = &quot;com.testA.service&quot;;\r\n\tprivate static final String A_CLASS = &quot;TestClassA&quot;;\r\n\t\r\n\tprivate static final String B_PACKAGE = &quot;com.testB.service&quot;;\r\n\tprivate static final String B_CLASS = &quot;TestClassA&quot;;\r\n    \r\n\t@SneakyThrows\r\n\tpublic ThirdPartyCallsStrategy createThirdPartyCallsStrategy(String type) {\r\n\t\tClass&lt;?&gt; clazz;\r\n\t\tif (type.equals(&quot;A&quot;)) {\r\n\t\t\tclazz = Class.forName(String.format(&quot;%s.%s&quot;, A_PACKAGE , A_CLASS ));\r\n\t\t\treturn (ThirdPartyCallsStrategy) clazz.getDeclaredConstructor().newInstance();\r\n\t\t}\r\n\r\n\t\tif (type.equals(&quot;B&quot;)) {\r\n\t\t\tclazz = Class.forName(String.format(&quot;%s.%s&quot;, B_PACKAGE , B_CLASS ));\r\n\t\t\treturn (ThirdPartyCallsStrategy) clazz.getDeclaredConstructor().newInstance();\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n}\r\n```\r\n\r\n`ThirdPartyCallsStrategy` is implemented in different services in different modules\r\n\r\nAnd finally in module C, i make the instanciation through java reflection but this will be at runtime and it can through exceptions later at runtime and not at compile time\r\n\r\n```java\r\npublic String checkStatusAndRedirect(String orderId, String type) {\r\n\tboolean status = checkStatus(orderId);\r\n\tStringBuilder paymentResultUrl = new StringBuilder(frontUrl + &quot;/public/payment/status?success=&quot;);\r\n    \r\n\tif (status) {\r\n\r\n\t\tcoreCallsFactory.createThirdPartyCallsStrategy(type).apply(orderId);\r\n\t\tpaymentResultUrl.append(Boolean.TRUE);\r\n\t} else {\r\n\t\tpaymentResultUrl.append(Boolean.FALSE);\r\n\t}\r\n\treturn paymentResultUrl.toString();\r\n}\r\n```\r\n\r\nSo what i need is a cleaner way to change this implementation.","link":"https://stackoverflow.com/questions/77532576/java-factory-pattern","title":"Java Factory pattern","body":"<p>I have module A and module B each one have some specific services and i have a module C that don't have any dependencies to A and B so what i want is to call services from modules A and B and I want to acheive that using factory pattern.</p>\n<p>in module C i have created this interface and it will be a common interface to be implemented in modules A and B</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface ThirdPartyCallsStrategy {\n    void apply(String orderId);\n}\n</code></pre>\n<p>And this is example of factory class and will provide the appropriate instance needed based on type parameter</p>\n<pre><code>@Component\n@AllArgsConstructor\npublic class CoreCallsFactory {\n\n    private static final String A_PACKAGE = &quot;com.testA.service&quot;;\n    private static final String A_CLASS = &quot;TestClassA&quot;;\n    \n    private static final String B_PACKAGE = &quot;com.testB.service&quot;;\n    private static final String B_CLASS = &quot;TestClassA&quot;;\n    \n    @SneakyThrows\n    public ThirdPartyCallsStrategy createThirdPartyCallsStrategy(String type) {\n        Class&lt;?&gt; clazz;\n        if (type.equals(&quot;A&quot;)) {\n            clazz = Class.forName(String.format(&quot;%s.%s&quot;, A_PACKAGE , A_CLASS ));\n            return (ThirdPartyCallsStrategy) clazz.getDeclaredConstructor().newInstance();\n        }\n\n        if (type.equals(&quot;B&quot;)) {\n            clazz = Class.forName(String.format(&quot;%s.%s&quot;, B_PACKAGE , B_CLASS ));\n            return (ThirdPartyCallsStrategy) clazz.getDeclaredConstructor().newInstance();\n        }\n\n        return null;\n    }\n}\n</code></pre>\n<p><code>ThirdPartyCallsStrategy</code> is implemented in different services in different modules</p>\n<p>And finally in module C, i make the instanciation through java reflection but this will be at runtime and it can through exceptions later at runtime and not at compile time</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String checkStatusAndRedirect(String orderId, String type) {\n    boolean status = checkStatus(orderId);\n    StringBuilder paymentResultUrl = new StringBuilder(frontUrl + &quot;/public/payment/status?success=&quot;);\n    \n    if (status) {\n\n        coreCallsFactory.createThirdPartyCallsStrategy(type).apply(orderId);\n        paymentResultUrl.append(Boolean.TRUE);\n    } else {\n        paymentResultUrl.append(Boolean.FALSE);\n    }\n    return paymentResultUrl.toString();\n}\n</code></pre>\n<p>So what i need is a cleaner way to change this implementation.</p>\n"},{"tags":["java","generics"],"comments":[{"score":1,"post_type":"question","creation_date":1700961412,"post_id":77549396,"comment_id":136716071,"body_markdown":"You can&#39;t in Java you either specify all or none. It&#39;s a language limitation.","link":"https://stackoverflow.com/questions/77549396/specify-only-a-subset-of-type-arguments-when-calling-a-generic-method-java#comment136716071_77549396","body":"You can&#39;t in Java you either specify all or none. It&#39;s a language limitation."},{"score":0,"post_type":"question","creation_date":1701291089,"post_id":77549396,"comment_id":136758976,"body_markdown":"@RaduSebastianLAZIN I see, thank you. If you could write this as an answer, I&#39;ll mark it as the answer.","link":"https://stackoverflow.com/questions/77549396/specify-only-a-subset-of-type-arguments-when-calling-a-generic-method-java#comment136758976_77549396","body":"@RaduSebastianLAZIN I see, thank you. If you could write this as an answer, I&#39;ll mark it as the answer."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701917092,"last_edit_date":1701917092,"creation_date":1701437103,"answer_id":77585573,"question_id":77549396,"body_markdown":"You can&#39;t in Java. You either specify all or none. It&#39;s a language limitation.\r\n\r\n(as of Java 21, maybe some day)","link":"https://stackoverflow.com/questions/77549396/specify-only-a-subset-of-type-arguments-when-calling-a-generic-method-java/77585573#77585573","title":"Specify only a subset of Type Arguments when calling a Generic Method? (Java)","body":"<p>You can't in Java. You either specify all or none. It's a language limitation.</p>\n<p>(as of Java 21, maybe some day)</p>\n"}],"comment_count":2,"is_answered":true,"view_count":41,"answer_count":1,"score":0,"last_activity_date":1701917092,"creation_date":1700942000,"question_id":77549396,"body_markdown":"Suppose I have the following method declaration:\r\n``` java\r\npublic static &lt;E, RetType&gt; RetType doSomething(\r\n            E instance,\r\n            String methodName,\r\n            Object... params\r\n    ) {...}\r\n```\r\n\r\nOne of the argument types may not always be correctly inferred by the compiler.\r\n\r\nIs there a way to specify only one (or a subset) of the type arguments when calling the method?\r\n\r\n\r\n\r\nI could call this method either specifying all the type arguments:\r\n``` java\r\nDoSomethingClass.&lt;InstanceType, ReturnType&gt;doSomething(...);\r\n```\r\nOr without type arguments:\r\n``` java\r\nDoSomethingClass.doSomething(...);\r\n```\r\n\r\nYet I would like to achieve something like\r\n``` java\r\n&lt;RetType = SpecificType&gt;doSomething(...);\r\n```\r\n","link":"https://stackoverflow.com/questions/77549396/specify-only-a-subset-of-type-arguments-when-calling-a-generic-method-java","title":"Specify only a subset of Type Arguments when calling a Generic Method? (Java)","body":"<p>Suppose I have the following method declaration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;E, RetType&gt; RetType doSomething(\n            E instance,\n            String methodName,\n            Object... params\n    ) {...}\n</code></pre>\n<p>One of the argument types may not always be correctly inferred by the compiler.</p>\n<p>Is there a way to specify only one (or a subset) of the type arguments when calling the method?</p>\n<p>I could call this method either specifying all the type arguments:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DoSomethingClass.&lt;InstanceType, ReturnType&gt;doSomething(...);\n</code></pre>\n<p>Or without type arguments:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DoSomethingClass.doSomething(...);\n</code></pre>\n<p>Yet I would like to achieve something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;RetType = SpecificType&gt;doSomething(...);\n</code></pre>\n"},{"tags":["java","tdengine"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701913088,"creation_date":1701913088,"answer_id":77617208,"question_id":77513204,"body_markdown":"TDengine&#39;s client does indeed have a reconnection mechanism. It is based on a fixed number of attempts or a fixed time period. If all reconnection attempts fail within this period, only then will it return an error code to you.","link":"https://stackoverflow.com/questions/77513204/java-service-is-starting-up-but-tdengine-crashes-will-it-automatically-reconnec/77617208#77617208","title":"Java service is starting up but TDengine crashes, will it automatically reconnect once it recovers?","body":"<p>TDengine's client does indeed have a reconnection mechanism. It is based on a fixed number of attempts or a fixed time period. If all reconnection attempts fail within this period, only then will it return an error code to you.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":22,"answer_count":1,"score":0,"last_activity_date":1701913088,"creation_date":1700446369,"question_id":77513204,"body_markdown":"If a Java application is in the midst of its startup process and encounters a situation where TDengine, the database system it relies on, unexpectedly fails or crashes, what happens upon TDengine&#39;s recovery? Will TDengine automatically reconnect once it recovers?","link":"https://stackoverflow.com/questions/77513204/java-service-is-starting-up-but-tdengine-crashes-will-it-automatically-reconnec","title":"Java service is starting up but TDengine crashes, will it automatically reconnect once it recovers?","body":"<p>If a Java application is in the midst of its startup process and encounters a situation where TDengine, the database system it relies on, unexpectedly fails or crashes, what happens upon TDengine's recovery? Will TDengine automatically reconnect once it recovers?</p>\n"},{"tags":["java","unity-game-engine","android-build"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1674053541,"post_id":75155380,"comment_id":132633137,"body_markdown":"Sadly, it didn&#39;t work.","link":"https://stackoverflow.com/questions/75154839/why-is-there-a-problem-with-my-jdk-even-though-i-installed-it-with-unity/75155380#comment132633137_75155380","body":"Sadly, it didn&#39;t work."},{"score":0,"post_type":"answer","creation_date":1674065768,"post_id":75155380,"comment_id":132637569,"body_markdown":"that&#39;s unfortunate @EthanTuininga ... please share whatever ends up working","link":"https://stackoverflow.com/questions/75154839/why-is-there-a-problem-with-my-jdk-even-though-i-installed-it-with-unity/75155380#comment132637569_75155380","body":"that&#39;s unfortunate @EthanTuininga ... please share whatever ends up working"}],"comment_count":2,"score":0,"last_activity_date":1674023178,"creation_date":1674023178,"answer_id":75155380,"question_id":75154839,"body_markdown":"You should try these steps:\r\n1. Update Unity hub to latest version.\r\n2. Uninstall Unity.\r\n3. Restart your PC.\r\n4. Re-install unity without unity hub (get the file from the archive directory at https://unity.com/releases/editor/archive ).\r\n5. Point the unity hub to your download path.\r\n\r\nThis has worked for me before so hopefully it works for you as well.","link":"https://stackoverflow.com/questions/75154839/why-is-there-a-problem-with-my-jdk-even-though-i-installed-it-with-unity/75155380#75155380","title":"Why is there a problem with my JDK even though I installed it with Unity?","body":"<p>You should try these steps:</p>\n<ol>\n<li>Update Unity hub to latest version.</li>\n<li>Uninstall Unity.</li>\n<li>Restart your PC.</li>\n<li>Re-install unity without unity hub (get the file from the archive directory at <a href=\"https://unity.com/releases/editor/archive\" rel=\"nofollow noreferrer\">https://unity.com/releases/editor/archive</a> ).</li>\n<li>Point the unity hub to your download path.</li>\n</ol>\n<p>This has worked for me before so hopefully it works for you as well.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1698240789,"creation_date":1698240789,"answer_id":77359958,"question_id":75154839,"body_markdown":"TLDR: ensure the **bin** folder is mentioned in the PATH Environment Variables.\r\n\r\nIf you copy the path verify that it exists (via windows explorer), then you need to make sure PATH variable knows about it.\r\n\r\n - Copy the path to the bin folder. In my case it was: `C:\\ProgramFiles\\Unity\\Hub\\Editor\\2023.1.11f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\OpenJDK\\bin\\`\r\n - [![enter image description here][1]][1]\r\n - Open the Windows Start Menu, search for &quot;Environment Variables,&quot; and select &quot;Edit the system environment variables.&quot;\r\n - In the System Properties window that appears, click the &quot;Environment Variables&quot; button.\r\n - Under the &quot;System variables&quot; section, find and select the &quot;Path&quot; variable, then click &quot;Edit.&quot;\r\n - In the Edit Environment Variable window, click &quot;New&quot; and paste the copied path.\r\n - Click &quot;OK&quot; to close all of the windows.\r\n\r\nAfter updating the PATH, you&#39;ll need to restart any command prompts or possibly even your IDE for the change to take effect. You can test whether it&#39;s been successfully added by opening a new command prompt and running `java -version`. If it shows the Java version, then it&#39;s in the PATH correctly.\r\n\r\nThen restart unity, visual studio, unity hub, close any command prompt if you had it open. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Zi8Be.jpg","link":"https://stackoverflow.com/questions/75154839/why-is-there-a-problem-with-my-jdk-even-though-i-installed-it-with-unity/77359958#77359958","title":"Why is there a problem with my JDK even though I installed it with Unity?","body":"<p>TLDR: ensure the <strong>bin</strong> folder is mentioned in the PATH Environment Variables.</p>\n<p>If you copy the path verify that it exists (via windows explorer), then you need to make sure PATH variable knows about it.</p>\n<ul>\n<li>Copy the path to the bin folder. In my case it was: <code>C:\\ProgramFiles\\Unity\\Hub\\Editor\\2023.1.11f1\\Editor\\Data\\PlaybackEngines\\AndroidPlayer\\OpenJDK\\bin\\</code></li>\n<li><a href=\"https://i.stack.imgur.com/Zi8Be.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zi8Be.jpg\" alt=\"enter image description here\" /></a></li>\n<li>Open the Windows Start Menu, search for &quot;Environment Variables,&quot; and select &quot;Edit the system environment variables.&quot;</li>\n<li>In the System Properties window that appears, click the &quot;Environment Variables&quot; button.</li>\n<li>Under the &quot;System variables&quot; section, find and select the &quot;Path&quot; variable, then click &quot;Edit.&quot;</li>\n<li>In the Edit Environment Variable window, click &quot;New&quot; and paste the copied path.</li>\n<li>Click &quot;OK&quot; to close all of the windows.</li>\n</ul>\n<p>After updating the PATH, you'll need to restart any command prompts or possibly even your IDE for the change to take effect. You can test whether it's been successfully added by opening a new command prompt and running <code>java -version</code>. If it shows the Java version, then it's in the PATH correctly.</p>\n<p>Then restart unity, visual studio, unity hub, close any command prompt if you had it open.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":742,"answer_count":2,"score":1,"last_activity_date":1701912499,"creation_date":1674017822,"last_edit_date":1674191867,"question_id":75154839,"body_markdown":"### JDK Problems\r\n\r\nI am making a mobile game in Unity 2022.2.2f1 and every time I open the editor, or press play it shows the error:\r\n&quot;Unable to find java in the system path. This tool is required to process Android libraries. Please configure your JDK location under the &#39;Unity Preferences \\&gt; External Tools&#39; menu.&quot;\r\n\r\n![The error that pops up](https://i.stack.imgur.com/SMhiz.jpg)\r\n\r\nWhen I go to the External Tools menu there are no errors or warnings.\r\n\r\n![The External Tools menu](https://i.stack.imgur.com/t5aA6.jpg)\r\n\r\nI don&#39;t know why it is doing this. I don&#39;t know if it is because of something I did, or if it is a Unity problem, or something else.\r\n\r\nI tried to uncheck the boxes that said installed with Unity and selected the paths manually.\r\n\r\nI tried to reinstall the editor with the modules.\r\n\r\nI tried uninstalling all the editors I had and only reinstalling this one (2022.2.2f1).","link":"https://stackoverflow.com/questions/75154839/why-is-there-a-problem-with-my-jdk-even-though-i-installed-it-with-unity","title":"Why is there a problem with my JDK even though I installed it with Unity?","body":"<h3>JDK Problems</h3>\n<p>I am making a mobile game in Unity 2022.2.2f1 and every time I open the editor, or press play it shows the error:\n&quot;Unable to find java in the system path. This tool is required to process Android libraries. Please configure your JDK location under the 'Unity Preferences &gt; External Tools' menu.&quot;</p>\n<p><img src=\"https://i.stack.imgur.com/SMhiz.jpg\" alt=\"The error that pops up\" /></p>\n<p>When I go to the External Tools menu there are no errors or warnings.</p>\n<p><img src=\"https://i.stack.imgur.com/t5aA6.jpg\" alt=\"The External Tools menu\" /></p>\n<p>I don't know why it is doing this. I don't know if it is because of something I did, or if it is a Unity problem, or something else.</p>\n<p>I tried to uncheck the boxes that said installed with Unity and selected the paths manually.</p>\n<p>I tried to reinstall the editor with the modules.</p>\n<p>I tried uninstalling all the editors I had and only reinstalling this one (2022.2.2f1).</p>\n"},{"tags":["java","java-8","functional-programming","java-stream"],"comments":[{"score":6,"post_type":"question","creation_date":1696561003,"post_id":77241606,"comment_id":136171964,"body_markdown":"Streams aren&#39;t supposed to be applied *everywhere*. It is *especially* unsuitable if you are doing modifications in place, like what you are doing here. You *should not* change this code to use streams.","link":"https://stackoverflow.com/questions/77241606/converting-nested-loop-into-idiomatic-java-8-stream-operators#comment136171964_77241606","body":"Streams aren&#39;t supposed to be applied <i>everywhere</i>. It is <i>especially</i> unsuitable if you are doing modifications in place, like what you are doing here. You <i>should not</i> change this code to use streams."},{"score":0,"post_type":"question","creation_date":1696561449,"post_id":77241606,"comment_id":136171995,"body_markdown":"If you actually want to write code in a more &quot;functional&quot; way, you would make `AchBatch`, `AchBatchEntry` and `AchBatchEntryDetail` all immutable. Instead of using setters, you would be creating new instances of these types. And since you are working with such deeply nested data, you&#39;d need a *lot* of effort to do this.","link":"https://stackoverflow.com/questions/77241606/converting-nested-loop-into-idiomatic-java-8-stream-operators#comment136171995_77241606","body":"If you actually want to write code in a more &quot;functional&quot; way, you would make <code>AchBatch</code>, <code>AchBatchEntry</code> and <code>AchBatchEntryDetail</code> all immutable. Instead of using setters, you would be creating new instances of these types. And since you are working with such deeply nested data, you&#39;d need a <i>lot</i> of effort to do this."},{"score":0,"post_type":"question","creation_date":1696563718,"post_id":77241606,"comment_id":136172134,"body_markdown":"Why?  Streams are supposed to make your coding easier.  But why replace working code with a potentially less efficient stream solution.  Streams incur quite a bit of overhead to do what they do.","link":"https://stackoverflow.com/questions/77241606/converting-nested-loop-into-idiomatic-java-8-stream-operators#comment136172134_77241606","body":"Why?  Streams are supposed to make your coding easier.  But why replace working code with a potentially less efficient stream solution.  Streams incur quite a bit of overhead to do what they do."},{"score":2,"post_type":"question","creation_date":1696576578,"post_id":77241606,"comment_id":136173414,"body_markdown":"Why are you using a manual `Iterator` loop instead of for-each? If `getBatchEntryDetails()` does not return an `Iterable`, i.e. a `Collection`, its important to include the actual type in the question. Besides that, what does `detail.setAmount(detail.getAmount());` do? It looks like an entirely redundant operation.","link":"https://stackoverflow.com/questions/77241606/converting-nested-loop-into-idiomatic-java-8-stream-operators#comment136173414_77241606","body":"Why are you using a manual <code>Iterator</code> loop instead of for-each? If <code>getBatchEntryDetails()</code> does not return an <code>Iterable</code>, i.e. a <code>Collection</code>, its important to include the actual type in the question. Besides that, what does <code>detail.setAmount(detail.getAmount());</code> do? It looks like an entirely redundant operation."},{"score":0,"post_type":"question","creation_date":1696592178,"post_id":77241606,"comment_id":136176241,"body_markdown":"@Sweeper no what is forbidden is structural modification of a stream (aka removing elements from the source for example), not modifications of individual elements of a stream.","link":"https://stackoverflow.com/questions/77241606/converting-nested-loop-into-idiomatic-java-8-stream-operators#comment136176241_77241606","body":"@Sweeper no what is forbidden is structural modification of a stream (aka removing elements from the source for example), not modifications of individual elements of a stream."},{"score":0,"post_type":"question","creation_date":1696592404,"post_id":77241606,"comment_id":136176280,"body_markdown":"@Jean-BaptisteYun&#232;s I know. I didnt say it was forbidden. Its just unsuitable.","link":"https://stackoverflow.com/questions/77241606/converting-nested-loop-into-idiomatic-java-8-stream-operators#comment136176280_77241606","body":"@Jean-BaptisteYun&#232;s I know. I didnt say it was forbidden. Its just unsuitable."},{"score":0,"post_type":"question","creation_date":1696593655,"post_id":77241606,"comment_id":136176497,"body_markdown":"I concur with the &#39;leave it alone&#39; approach.  Why rewrite working code into an unsuitable form?","link":"https://stackoverflow.com/questions/77241606/converting-nested-loop-into-idiomatic-java-8-stream-operators#comment136176497_77241606","body":"I concur with the &#39;leave it alone&#39; approach.  Why rewrite working code into an unsuitable form?"},{"score":0,"post_type":"question","creation_date":1701909664,"post_id":77241606,"comment_id":136834803,"body_markdown":"Note that we prefer a technical style of writing here. We gently discourage greetings, hope-you-can-helps, thanks, advance thanks, notes of appreciation, regards, kind regards, signatures, please-can-you-helps, chatty material and abbreviated txtspk, pleading, how long you&#39;ve been stuck, voting advice, meta commentary, etc. Just explain your problem, and show what you&#39;ve tried, what you expected, and what actually happened.","link":"https://stackoverflow.com/questions/77241606/converting-nested-loop-into-idiomatic-java-8-stream-operators#comment136834803_77241606","body":"Note that we prefer a technical style of writing here. We gently discourage greetings, hope-you-can-helps, thanks, advance thanks, notes of appreciation, regards, kind regards, signatures, please-can-you-helps, chatty material and abbreviated txtspk, pleading, how long you&#39;ve been stuck, voting advice, meta commentary, etc. Just explain your problem, and show what you&#39;ve tried, what you expected, and what actually happened."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1696592865,"last_edit_date":1696592865,"creation_date":1696592097,"answer_id":77244106,"question_id":77241606,"body_markdown":"The real problem to stream your code is the use of the counter and the log.\r\nAnyway a simple/readble solution would be not to stream from the beginning.\r\nSomething like this should work (can&#39;t test obviously):\r\n\r\n    \r\n    AtomicInteger cntr = null;\r\n\r\n    Consumer&lt;AchBatchEntryDetail&gt; setCompany = d -&gt; { int c = cntr.IncrementAndGet(); d.setReceivingIndividualCompanyName(&quot;Client Name&quot;+c); log.info(&quot;Masked detail record #{}&quot;, c); };\r\n    Consumer&lt;AchBatchEntryDetail&gt; setAmount =  d -&gt; d.setAmount(d.getAmount());\r\n    Consumer&lt;AchBatchEntryDetail&gt; setAccount = d -&gt; d.setDfiAccountNumber(randomizeAccountNumber(d);\r\n    for (AchBatch batch : batches) {\r\n        cntr = new AtomicInteger(); // new counter on each batch\r\n        batch.stream()\r\n             .map(AchBatch::getBatchEntries)\r\n             .flatMap(Collection::stream)\r\n             .map(AchBatchEntry::getBatchEntryDetails)\r\n             .forEach(setCompany.andThen(setAmount).andThen(setAccount));\r\n    }","link":"https://stackoverflow.com/questions/77241606/converting-nested-loop-into-idiomatic-java-8-stream-operators/77244106#77244106","title":"Converting nested loop into idiomatic Java 8 stream operators","body":"<p>The real problem to stream your code is the use of the counter and the log.\nAnyway a simple/readble solution would be not to stream from the beginning.\nSomething like this should work (can't test obviously):</p>\n<pre><code>AtomicInteger cntr = null;\n\nConsumer&lt;AchBatchEntryDetail&gt; setCompany = d -&gt; { int c = cntr.IncrementAndGet(); d.setReceivingIndividualCompanyName(&quot;Client Name&quot;+c); log.info(&quot;Masked detail record #{}&quot;, c); };\nConsumer&lt;AchBatchEntryDetail&gt; setAmount =  d -&gt; d.setAmount(d.getAmount());\nConsumer&lt;AchBatchEntryDetail&gt; setAccount = d -&gt; d.setDfiAccountNumber(randomizeAccountNumber(d);\nfor (AchBatch batch : batches) {\n    cntr = new AtomicInteger(); // new counter on each batch\n    batch.stream()\n         .map(AchBatch::getBatchEntries)\n         .flatMap(Collection::stream)\n         .map(AchBatchEntry::getBatchEntryDetails)\n         .forEach(setCompany.andThen(setAmount).andThen(setAccount));\n}\n</code></pre>\n"}],"comment_count":8,"is_answered":true,"view_count":112,"answer_count":1,"score":-1,"last_activity_date":1701912451,"creation_date":1696560503,"last_edit_date":1701912451,"question_id":77241606,"body_markdown":"The following legacy logic needs to be converted into Java 8 functional approach:\r\n\r\n```\r\nAchFile dataRoot = unmarshalled.stream().findFirst().get();\r\n\t\t\r\n\t\tList&lt;AchBatch&gt; batches = dataRoot.getBatchRecords();\r\n\t\t//batches.stream().flatMap(b -&gt; b.getBatchEntries().stream().flatMap(e -&gt; e.getBatchEntryDetails().stream().map(d -&gt; d.setReceivingIndividualCompanyName(&quot;Client&quot;))));\r\n\t\t\r\n\t\tfor (AchBatch batch : batches) {\r\n\t\t\tint cntr = 1;\r\n\t\t\tfor (AchBatchEntry entry : batch.getBatchEntries()) {\r\n\t\t\t\tIterator&lt;AchBatchEntryDetail&gt; it = entry.getBatchEntryDetails().iterator();\r\n\t\t\t\tfor (; it.hasNext(); cntr++ ) {\r\n\t\t\t\t\tAchBatchEntryDetail detail = it.next();\r\n\t\t\t\t\tdetail.setReceivingIndividualCompanyName(&quot;Client Name&quot;+cntr);\r\n\t\t\t\t\tdetail.setAmount(detail.getAmount());\r\n\t\t\t\t\t\r\n\t\t\t\t\tString maskedAccount = randomizeAccountNumber(detail);\r\n\t\t\t\t\t\r\n\t\t\t        detail.setDfiAccountNumber(maskedAccount);\r\n\t\t\t        \r\n\t\t\t        log.info(&quot;Masked detail record #{}&quot;, cntr);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n```\r\n\r\nWhat would be an equivalent and idiomatic Java 8 syntax of unwinding such nested loop structure?\r\n\r\nI&#39;ve started applying `flatMap` together with regular `map` operations (as can be seen in the commented out portion) but am not quite sure I&#39;m on the right track and would appreciate some guidance.\r\n\r\nThank you in advance.\r\n\r\n","link":"https://stackoverflow.com/questions/77241606/converting-nested-loop-into-idiomatic-java-8-stream-operators","title":"Converting nested loop into idiomatic Java 8 stream operators","body":"<p>The following legacy logic needs to be converted into Java 8 functional approach:</p>\n<pre><code>AchFile dataRoot = unmarshalled.stream().findFirst().get();\n        \n        List&lt;AchBatch&gt; batches = dataRoot.getBatchRecords();\n        //batches.stream().flatMap(b -&gt; b.getBatchEntries().stream().flatMap(e -&gt; e.getBatchEntryDetails().stream().map(d -&gt; d.setReceivingIndividualCompanyName(&quot;Client&quot;))));\n        \n        for (AchBatch batch : batches) {\n            int cntr = 1;\n            for (AchBatchEntry entry : batch.getBatchEntries()) {\n                Iterator&lt;AchBatchEntryDetail&gt; it = entry.getBatchEntryDetails().iterator();\n                for (; it.hasNext(); cntr++ ) {\n                    AchBatchEntryDetail detail = it.next();\n                    detail.setReceivingIndividualCompanyName(&quot;Client Name&quot;+cntr);\n                    detail.setAmount(detail.getAmount());\n                    \n                    String maskedAccount = randomizeAccountNumber(detail);\n                    \n                    detail.setDfiAccountNumber(maskedAccount);\n                    \n                    log.info(&quot;Masked detail record #{}&quot;, cntr);\n                }\n            }\n        }\n</code></pre>\n<p>What would be an equivalent and idiomatic Java 8 syntax of unwinding such nested loop structure?</p>\n<p>I've started applying <code>flatMap</code> together with regular <code>map</code> operations (as can be seen in the commented out portion) but am not quite sure I'm on the right track and would appreciate some guidance.</p>\n<p>Thank you in advance.</p>\n"},{"tags":["java","ascii","non-ascii-characters"],"comments":[{"score":4,"post_type":"question","creation_date":1696529228,"post_id":77239562,"comment_id":136168347,"body_markdown":"ASCII is universal (there is only one ASCII table, with 128 values), so what would those constants be useful for when you can already use `char` values and (provided you used sensible variable names) be instantly understandable to others reading the code?","link":"https://stackoverflow.com/questions/77239562/java-constants-for-common-ascii-characters#comment136168347_77239562","body":"ASCII is universal (there is only one ASCII table, with 128 values), so what would those constants be useful for when you can already use <code>char</code> values and (provided you used sensible variable names) be instantly understandable to others reading the code?"},{"score":1,"post_type":"question","creation_date":1696530632,"post_id":77239562,"comment_id":136168598,"body_markdown":"Unfortunately, no.","link":"https://stackoverflow.com/questions/77239562/java-constants-for-common-ascii-characters#comment136168598_77239562","body":"Unfortunately, no."},{"score":0,"post_type":"question","creation_date":1696532100,"post_id":77239562,"comment_id":136168858,"body_markdown":"@Mike&#39;Pomax&#39;Kamermans Convenience. Readability. Not having to rely on memorizing numbers.","link":"https://stackoverflow.com/questions/77239562/java-constants-for-common-ascii-characters#comment136168858_77239562","body":"@Mike&#39;Pomax&#39;Kamermans Convenience. Readability. Not having to rely on memorizing numbers."},{"score":1,"post_type":"question","creation_date":1696532236,"post_id":77239562,"comment_id":136168885,"body_markdown":"[*Does Java define constants for any characters such as SPACE?*](https://stackoverflow.com/q/33183525/642706)","link":"https://stackoverflow.com/questions/77239562/java-constants-for-common-ascii-characters#comment136168885_77239562","body":"<a href=\"https://stackoverflow.com/q/33183525/642706\"><i>Does Java define constants for any characters such as SPACE?</i></a>"},{"score":1,"post_type":"question","creation_date":1696533304,"post_id":77239562,"comment_id":136169053,"body_markdown":"There are no constants, but `Character.codePointOf(&quot;SUBSTITUTE&quot;)` will return 26.  See https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Character.html#codePointOf(java.lang.String).  (The character name &quot;SUBSTITUTE&quot; is in the Unicode Character Database.)","link":"https://stackoverflow.com/questions/77239562/java-constants-for-common-ascii-characters#comment136169053_77239562","body":"There are no constants, but <code>Character.codePointOf(&quot;SUBSTITUTE&quot;)</code> will return 26.  See <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Character.html#codePointOf(java.lang.String)\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/21/docs/api/java.base/java/la&zwnj;&#8203;ng/&hellip;</a>.  (The character name &quot;SUBSTITUTE&quot; is in the Unicode Character Database.)"},{"score":0,"post_type":"question","creation_date":1696534051,"post_id":77239562,"comment_id":136169195,"body_markdown":"As a small pushback: if you&#39;re working with ASCII control codes, memorizing them makes just as much sense as knowing that alt-0235 is &#235;, i.e. quite a lot of sense if that&#39;s what you need to work with a lot ;)","link":"https://stackoverflow.com/questions/77239562/java-constants-for-common-ascii-characters#comment136169195_77239562","body":"As a small pushback: if you&#39;re working with ASCII control codes, memorizing them makes just as much sense as knowing that alt-0235 is &#235;, i.e. quite a lot of sense if that&#39;s what you need to work with a lot ;)"},{"score":0,"post_type":"question","creation_date":1698245755,"post_id":77239562,"comment_id":136381347,"body_markdown":"I see some of them defined here as well: https://guava.dev/releases/22.0/api/docs/constant-values.html#com.google.common.base.Ascii.SUB and https://github.com/google/guava/blob/master/guava/src/com/google/common/base/Ascii.java","link":"https://stackoverflow.com/questions/77239562/java-constants-for-common-ascii-characters#comment136381347_77239562","body":"I see some of them defined here as well: <a href=\"https://guava.dev/releases/22.0/api/docs/constant-values.html#com.google.common.base.Ascii.SUB\" rel=\"nofollow noreferrer\">guava.dev/releases/22.0/api/docs/&hellip;</a> and <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/base/Ascii.java\" rel=\"nofollow noreferrer\">github.com/google/guava/blob/master/guava/src/com/google/com&zwnj;&#8203;mon/&hellip;</a>"},{"score":0,"post_type":"question","creation_date":1701910611,"post_id":77239562,"comment_id":136834875,"body_markdown":"**Character.getName(int codePoint)** = standard Jave has full Unicode metadata! And ASCII is a subset.You could generate code with official constant names","link":"https://stackoverflow.com/questions/77239562/java-constants-for-common-ascii-characters#comment136834875_77239562","body":"<b>Character.getName(int codePoint)</b> = standard Jave has full Unicode metadata! And ASCII is a subset.You could generate code with official constant names"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1696532487,"last_edit_date":1696532487,"creation_date":1696530629,"answer_id":77239737,"question_id":77239562,"body_markdown":"Check out [KeyEvent](https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/java/awt/event/KeyEvent.html).  It has something similar to what you want and are used for interpreting keyboard input.  But they are declared as `ints` and they aren&#39;t consistently (or intuitively) named.  Imo, you would be better off constructing your own and putting them in a library declared as code points.","link":"https://stackoverflow.com/questions/77239562/java-constants-for-common-ascii-characters/77239737#77239737","title":"Java constants for common ASCII characters","body":"<p>Check out <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/java/awt/event/KeyEvent.html\" rel=\"nofollow noreferrer\">KeyEvent</a>.  It has something similar to what you want and are used for interpreting keyboard input.  But they are declared as <code>ints</code> and they aren't consistently (or intuitively) named.  Imo, you would be better off constructing your own and putting them in a library declared as code points.</p>\n"},{"comment_count":0,"score":1,"last_activity_date":1696534331,"creation_date":1696534331,"answer_id":77240072,"question_id":77239562,"body_markdown":"Java itself provides a way to represent ASCII characters as constants using escape sequences like &#39;\\u001a&#39; for the ASCII SUB character (hexadecimal value 1A). However, Java doesn&#39;t provide a predefined library for constants representing all ASCII characters. You would need to define these constants yourself in your code.\r\n\r\nIf you want to make your code more readable and maintainable, you can define these constants in a utility class or an interface, like this:\r\n\r\n    public interface ASCIIConstants {\r\n        char SUB = &#39;\\u001a&#39;;\r\n        char SOH = &#39;\\u0001&#39;;\r\n        // Define other ASCII constants here...\r\n    }\r\n\r\nThen, you can use these constants in your code without having to remember the Unicode escape sequences:\r\n\r\n    char subChar = ASCIIConstants.SUB;\r\n    char sohChar = ASCIIConstants.SOH;\r\n\r\nIf you need a wide range of ASCII constants, you can generate them programmatically or create a text file with the values and write a script to generate the Java code for the constants. This way, you can ensure accuracy and reduce the chances of errors when defining these constants manually.\r\n\r\n","link":"https://stackoverflow.com/questions/77239562/java-constants-for-common-ascii-characters/77240072#77240072","title":"Java constants for common ASCII characters","body":"<p>Java itself provides a way to represent ASCII characters as constants using escape sequences like '\\u001a' for the ASCII SUB character (hexadecimal value 1A). However, Java doesn't provide a predefined library for constants representing all ASCII characters. You would need to define these constants yourself in your code.</p>\n<p>If you want to make your code more readable and maintainable, you can define these constants in a utility class or an interface, like this:</p>\n<pre><code>public interface ASCIIConstants {\n    char SUB = '\\u001a';\n    char SOH = '\\u0001';\n    // Define other ASCII constants here...\n}\n</code></pre>\n<p>Then, you can use these constants in your code without having to remember the Unicode escape sequences:</p>\n<pre><code>char subChar = ASCIIConstants.SUB;\nchar sohChar = ASCIIConstants.SOH;\n</code></pre>\n<p>If you need a wide range of ASCII constants, you can generate them programmatically or create a text file with the values and write a script to generate the Java code for the constants. This way, you can ensure accuracy and reduce the chances of errors when defining these constants manually.</p>\n"}],"comment_count":8,"is_answered":true,"view_count":128,"answer_count":2,"score":0,"last_activity_date":1701912438,"creation_date":1696529034,"last_edit_date":1701912438,"question_id":77239562,"body_markdown":"Is there a library, in Java, i.e. Apache Commons or similar, where various ASCII character constants are defined to be reused?  Or, perhaps somewhere in Java itself?\r\n\r\nFor example, I&#39;m looking for something like `public final static String ASCII_SUB_CHAR = &quot;\\u001a&quot;;` and similarly for other ASCII control characters, already defined somewhere for reuse.\r\n\r\nRationale is that it&#39;s quite unobvious how, and why, for example `SUB` corresponds to `26` and how that then becomes `&quot;\\u001a&quot;`.  There are also ranges to those characters (control vs printable, etc.) so they can be arranged based on a need.  Sounded like a good candidate to be expressed in some structure akin to `Enum`s, hence the question.\r\n\r\nThank you in advance.\r\n\r\n","link":"https://stackoverflow.com/questions/77239562/java-constants-for-common-ascii-characters","title":"Java constants for common ASCII characters","body":"<p>Is there a library, in Java, i.e. Apache Commons or similar, where various ASCII character constants are defined to be reused?  Or, perhaps somewhere in Java itself?</p>\n<p>For example, I'm looking for something like <code>public final static String ASCII_SUB_CHAR = &quot;\\u001a&quot;;</code> and similarly for other ASCII control characters, already defined somewhere for reuse.</p>\n<p>Rationale is that it's quite unobvious how, and why, for example <code>SUB</code> corresponds to <code>26</code> and how that then becomes <code>&quot;\\u001a&quot;</code>.  There are also ranges to those characters (control vs printable, etc.) so they can be arranged based on a need.  Sounded like a good candidate to be expressed in some structure akin to <code>Enum</code>s, hence the question.</p>\n<p>Thank you in advance.</p>\n"},{"tags":["java","regex","replaceall"],"comments":[{"score":2,"post_type":"question","creation_date":1696522379,"post_id":77238795,"comment_id":136167003,"body_markdown":"Go to https://regex101.com/ and the site will explain it to you. I am not familiar with what `\\p{Cntrl}` does, also I am not aware of any special meaning of `&amp;&amp;` or that nested character classes even exist.","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java#comment136167003_77238795","body":"Go to <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a> and the site will explain it to you. I am not familiar with what <code>\\p{Cntrl}</code> does, also I am not aware of any special meaning of <code>&amp;&amp;</code> or that nested character classes even exist."},{"score":1,"post_type":"question","creation_date":1696525084,"post_id":77238795,"comment_id":136167535,"body_markdown":"None of this appears to be standard regex.  You would be better off using `[\\x00-\\x1F]` since the set of control characters are the first 32 (hexadecimal 20) non_printable ASCII characters.  That range includes \\r (ctl-M), \\n (ctl-J), and \\t (ctl-I).","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java#comment136167535_77238795","body":"None of this appears to be standard regex.  You would be better off using <code>[\\x00-\\x1F]</code> since the set of control characters are the first 32 (hexadecimal 20) non_printable ASCII characters.  That range includes \\r (ctl-M), \\n (ctl-J), and \\t (ctl-I)."},{"score":0,"post_type":"question","creation_date":1696531370,"post_id":77238795,"comment_id":136168746,"body_markdown":"Possible duplicates: *[Regex java. Why using intersection?](https://stackoverflow.com/questions/15930181/regex-java-why-using-intersection)*, *[What is the point behind character class intersections in Java&#39;s Regex?](https://stackoverflow.com/questions/1106387)*, *[Character class subtraction, converting from Java syntax to RegexBuddy](https://stackoverflow.com/q/3201689)*.","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java#comment136168746_77238795","body":"Possible duplicates: <i><a href=\"https://stackoverflow.com/questions/15930181/regex-java-why-using-intersection\">Regex java. Why using intersection?</a></i>, <i><a href=\"https://stackoverflow.com/questions/1106387\">What is the point behind character class intersections in Java&#39;s Regex?</a></i>, <i><a href=\"https://stackoverflow.com/q/3201689\">Character class subtraction, converting from Java syntax to RegexBuddy</a></i>."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1696525888,"post_id":77239146,"comment_id":136167698,"body_markdown":"Interesting. afaicr ops on character classes isn&#39;t even documented..?","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239146#comment136167698_77239146","body":"Interesting. afaicr ops on character classes isn&#39;t even documented..?"},{"score":0,"post_type":"answer","creation_date":1696526127,"post_id":77239146,"comment_id":136167741,"body_markdown":"Looks like [JDK20 doc](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html) does mention them briefly, not sure about older JDK","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239146#comment136167741_77239146","body":"Looks like <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">JDK20 doc</a> does mention them briefly, not sure about older JDK"},{"score":0,"post_type":"answer","creation_date":1696526557,"post_id":77239146,"comment_id":136167837,"body_markdown":"Does `intercept` mean `except` in English?  Or does it mean something else, i.e. AND?","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239146#comment136167837_77239146","body":"Does <code>intercept</code> mean <code>except</code> in English?  Or does it mean something else, i.e. AND?"},{"score":0,"post_type":"answer","creation_date":1696527073,"post_id":77239146,"comment_id":136167935,"body_markdown":"@SimeonLeyzerzon  I think you might be thinking of *intersect*, which is what sets do (think Venn diagram) What we have here though is *exclusion* (AND NOT)","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239146#comment136167935_77239146","body":"@SimeonLeyzerzon  I think you might be thinking of <i>intersect</i>, which is what sets do (think Venn diagram) What we have here though is <i>exclusion</i> (AND NOT)"},{"score":0,"post_type":"answer","creation_date":1696527446,"post_id":77239146,"comment_id":136168012,"body_markdown":"@SimeonLeyzerzon The action is like AND and applies when defining the character class, but because the second part of the expression starts `[^` it defines the second set as not in this group of characters","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239146#comment136168012_77239146","body":"@SimeonLeyzerzon The action is like AND and applies when defining the character class, but because the second part of the expression starts <code>[^</code> it defines the second set as not in this group of characters"}],"comment_count":5,"score":1,"last_activity_date":1696525188,"last_edit_date":1696525188,"creation_date":1696524805,"answer_id":77239146,"question_id":77238795,"body_markdown":"The pattern matches a character which is in the set of control characters `\\\\p{Cntrl}` intersected (by `&amp;&amp;`) with the set of characters that are not line break , carriage return or tab `[^\\r\\n\\t]`. Example:\r\n\r\n    &quot;a\\u0001b\\u0002c\\rd\\te\\nf&quot;.replaceAll(&quot;[\\\\p{Cntrl}&amp;&amp;[^\\r\\n\\t]]&quot;,&quot;-&quot;);\r\n    =&gt; control codes 0001 and 0002 are removed: &quot;a-b-c\\rd\\te\\nf&quot;\r\n\r\nTo help explain, consider swapping `\\\\p{Cntrl}` for `[a-z]` and `[^\\r\\n\\t]` with `[^aeiou]`, and then you will have a pattern that can be used to filter out consonants:\r\n\r\n    &quot;123abcdef&quot;.replaceAll(&quot;[[a-z]&amp;&amp;[^aeiou]]&quot;,&quot;-&quot;);\r\n    =&gt; &quot;123a---e-&quot;","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239146#77239146","title":"Regular expression to remove ASCII control characters in Java","body":"<p>The pattern matches a character which is in the set of control characters <code>\\\\p{Cntrl}</code> intersected (by <code>&amp;&amp;</code>) with the set of characters that are not line break , carriage return or tab <code>[^\\r\\n\\t]</code>. Example:</p>\n<pre><code>&quot;a\\u0001b\\u0002c\\rd\\te\\nf&quot;.replaceAll(&quot;[\\\\p{Cntrl}&amp;&amp;[^\\r\\n\\t]]&quot;,&quot;-&quot;);\n=&gt; control codes 0001 and 0002 are removed: &quot;a-b-c\\rd\\te\\nf&quot;\n</code></pre>\n<p>To help explain, consider swapping <code>\\\\p{Cntrl}</code> for <code>[a-z]</code> and <code>[^\\r\\n\\t]</code> with <code>[^aeiou]</code>, and then you will have a pattern that can be used to filter out consonants:</p>\n<pre><code>&quot;123abcdef&quot;.replaceAll(&quot;[[a-z]&amp;&amp;[^aeiou]]&quot;,&quot;-&quot;);\n=&gt; &quot;123a---e-&quot;\n</code></pre>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1696525395,"post_id":77239175,"comment_id":136167604,"body_markdown":"That &quot;intersection&quot; is gold! Thanks for this explanation. Can&#39;t say how much I love this site, everyday a new thing :)","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239175#comment136167604_77239175","body":"That &quot;intersection&quot; is gold! Thanks for this explanation. Can&#39;t say how much I love this site, everyday a new thing :)"},{"score":1,"post_type":"answer","creation_date":1696530484,"post_id":77239175,"comment_id":136168575,"body_markdown":"&quot;*[...] not in JavaScript or Perl.*&quot;: I don&#39;t know about Perl, but the ECMAScript engine [does support](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/unicodeSets) Unicode set operations. The regex needs to be rewritten as [`[[\\p{Control}]&amp;&amp;[^\\r\\n\\t]]`](https://regex101.com/r/Jg4dQS/1), though.","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239175#comment136168575_77239175","body":"&quot;<i>[...] not in JavaScript or Perl.</i>&quot;: I don&#39;t know about Perl, but the ECMAScript engine <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/unicodeSets\" rel=\"nofollow noreferrer\">does support</a> Unicode set operations. The regex needs to be rewritten as <a href=\"https://regex101.com/r/Jg4dQS/1\" rel=\"nofollow noreferrer\"><code>[[\\p{Control}]&amp;&amp;[^\\r\\n\\t]]</code></a>, though."},{"score":0,"post_type":"answer","creation_date":1696532212,"post_id":77239175,"comment_id":136168882,"body_markdown":"@InSync While `\\p{Control}` may be interpreted by ECMAScript as expected, nesting and intersecting classes will fail.  Test your regex and see.","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239175#comment136168882_77239175","body":"@InSync While <code>\\p{Control}</code> may be interpreted by ECMAScript as expected, nesting and intersecting classes will fail.  Test your regex and see."},{"score":0,"post_type":"answer","creation_date":1696532371,"post_id":77239175,"comment_id":136168907,"body_markdown":"[Fail how](https://regex101.com/r/Jg4dQS/2)?","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239175#comment136168907_77239175","body":"<a href=\"https://regex101.com/r/Jg4dQS/2\" rel=\"nofollow noreferrer\">Fail how</a>?"},{"score":0,"post_type":"answer","creation_date":1696532477,"post_id":77239175,"comment_id":136168924,"body_markdown":"@InSync Fail to work as expected.  The `&amp;&amp;` will, for example, be interpreted as a literal.","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239175#comment136168924_77239175","body":"@InSync Fail to work as expected.  The <code>&amp;&amp;</code> will, for example, be interpreted as a literal."},{"score":0,"post_type":"answer","creation_date":1696532586,"post_id":77239175,"comment_id":136168940,"body_markdown":"Does your browser support the new-ish `v` flag? If it does, you should see something [like this](https://i.stack.imgur.com/GPlMD.png).","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239175#comment136168940_77239175","body":"Does your browser support the new-ish <code>v</code> flag? If it does, you should see something <a href=\"https://i.stack.imgur.com/GPlMD.png\" rel=\"nofollow noreferrer\">like this</a>."},{"score":0,"post_type":"answer","creation_date":1696533722,"post_id":77239175,"comment_id":136169137,"body_markdown":"@InSync I wasn&#39;t aware of the `v` flag.  Do you know if that&#39;s supported in `nodejs`?","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239175#comment136169137_77239175","body":"@InSync I wasn&#39;t aware of the <code>v</code> flag.  Do you know if that&#39;s supported in <code>nodejs</code>?"},{"score":0,"post_type":"answer","creation_date":1696533833,"post_id":77239175,"comment_id":136169161,"body_markdown":"[Node.js 20+](https://github.com/nodejs/node/blob/main/doc/changelogs/CHANGELOG_V20.md#v8-113), yes.","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239175#comment136169161_77239175","body":"<a href=\"https://github.com/nodejs/node/blob/main/doc/changelogs/CHANGELOG_V20.md#v8-113\" rel=\"nofollow noreferrer\">Node.js 20+</a>, yes."},{"score":0,"post_type":"answer","creation_date":1696560893,"post_id":77239175,"comment_id":136171957,"body_markdown":"Why is JavaScript being discussed when the question is about Java?","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239175#comment136171957_77239175","body":"Why is JavaScript being discussed when the question is about Java?"}],"comment_count":9,"score":3,"last_activity_date":1696539953,"last_edit_date":1696539953,"creation_date":1696525095,"answer_id":77239175,"question_id":77238795,"body_markdown":"There are a few things going on here that are only available in some flavors of regex.  You may encounter differences in implementation or availability in different languages.\r\n\r\nWhere supported, you can define a character class with multiple classes within it.  For example, `[[a-z][0-9]]` is a valid equivalent to `[a-z0-9]`.\r\n\r\nWhere the `&amp;&amp;` operator is supported, it can be used to create a character class that is the intersection of two character classes.  For example, `[[a-z]&amp;&amp;[^d-w]]` would be equivalent to `[abcxyz]`.  \r\n\r\nThere are a bunch of predefined character classes that can be referenced with `\\p{category_name}`.  In Java, the category `\\p{Cntrl}` represents `[\\x00-\\x1F\\x7F]`.  You can find examples within the Java Docs for `java.util.regex.Pattern`.  \r\n(See : https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html)\r\n\r\nSo, your regex matches every character in the range `[\\x00-\\x1F\\x7F]` except for characters `[\\r\\n\\t]`.","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239175#77239175","title":"Regular expression to remove ASCII control characters in Java","body":"<p>There are a few things going on here that are only available in some flavors of regex.  You may encounter differences in implementation or availability in different languages.</p>\n<p>Where supported, you can define a character class with multiple classes within it.  For example, <code>[[a-z][0-9]]</code> is a valid equivalent to <code>[a-z0-9]</code>.</p>\n<p>Where the <code>&amp;&amp;</code> operator is supported, it can be used to create a character class that is the intersection of two character classes.  For example, <code>[[a-z]&amp;&amp;[^d-w]]</code> would be equivalent to <code>[abcxyz]</code>.</p>\n<p>There are a bunch of predefined character classes that can be referenced with <code>\\p{category_name}</code>.  In Java, the category <code>\\p{Cntrl}</code> represents <code>[\\x00-\\x1F\\x7F]</code>.  You can find examples within the Java Docs for <code>java.util.regex.Pattern</code>.<br />\n(See : <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html</a>)</p>\n<p>So, your regex matches every character in the range <code>[\\x00-\\x1F\\x7F]</code> except for characters <code>[\\r\\n\\t]</code>.</p>\n"},{"comment_count":0,"score":2,"last_activity_date":1696526182,"creation_date":1696526182,"answer_id":77239266,"question_id":77238795,"body_markdown":"&gt; _&quot;... which characters are included as part of those control chars to be removed? ...&quot;_\r\n\r\nYou can find this information in the _Pattern_ class _JavaDoc_.\r\n\r\n_[Pattern &amp;ndash; POSIX character classes (US-ASCII only) &amp;ndash; (Java SE 20 &amp;amp; JDK 20)](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html#sum)_.\r\n\r\n&gt; _\\p{Cntrl}&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;A control character: [\\x00-\\x1F\\x7F]_\r\n\r\nWhich is, from values _0 through 1f_, and value _7f_.\r\n\r\n&gt; _&quot;... what does the `&amp;&amp;` stand for? ...&quot;_\r\n\r\nThe `&amp;&amp;` is part of the syntax for a _character class intersection_.\r\n\r\nFor example, the following will match any character, _a_ through _z_, except for _x_ and _y_.\r\n\r\n```none\r\n[a-z&amp;&amp;[^xy]]\r\n```\r\n\r\n&gt; _&quot;... does `^` mean it only looks at the beginning of the line? ...&quot;_\r\n\r\nNot when within a _character class_, `[ ]`.","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java/77239266#77239266","title":"Regular expression to remove ASCII control characters in Java","body":"<blockquote>\n<p><em>&quot;... which characters are included as part of those control chars to be removed? ...&quot;</em></p>\n</blockquote>\n<p>You can find this information in the <em>Pattern</em> class <em>JavaDoc</em>.</p>\n<p><em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html#sum\" rel=\"nofollow noreferrer\">Pattern  POSIX character classes (US-ASCII only)  (Java SE 20 &amp; JDK 20)</a></em>.</p>\n<blockquote>\n<p><em>\\p{Cntrl}A control character: [\\x00-\\x1F\\x7F]</em></p>\n</blockquote>\n<p>Which is, from values <em>0 through 1f</em>, and value <em>7f</em>.</p>\n<blockquote>\n<p><em>&quot;... what does the <code>&amp;&amp;</code> stand for? ...&quot;</em></p>\n</blockquote>\n<p>The <code>&amp;&amp;</code> is part of the syntax for a <em>character class intersection</em>.</p>\n<p>For example, the following will match any character, <em>a</em> through <em>z</em>, except for <em>x</em> and <em>y</em>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>[a-z&amp;&amp;[^xy]]\n</code></pre>\n<blockquote>\n<p><em>&quot;... does <code>^</code> mean it only looks at the beginning of the line? ...&quot;</em></p>\n</blockquote>\n<p>Not when within a <em>character class</em>, <code>[ ]</code>.</p>\n"}],"comment_count":3,"is_answered":true,"view_count":140,"answer_count":3,"score":-2,"last_activity_date":1701912425,"creation_date":1696521752,"last_edit_date":1701912425,"question_id":77238795,"body_markdown":"I&#39;ve been reading that the below pattern used as part of `String#replaceAll()` in Java \r\n\r\n```\r\n&quot;[\\\\p{Cntrl}&amp;&amp;[^\\r\\n\\t]]&quot;\r\n```\r\n\r\nremoves various non-printable ASCII characters from it.\r\n\r\nHow does one interpret the above incantation:\r\n- which characters are included as part of those control chars to be removed?\r\n- what does the `&amp;&amp;` stand for?\r\n- does `^` mean it only looks at the beginning of the line?\r\n\r\nCan someone please provide a comprehensive **non-technical** explanation of the above expression?\r\n\r\nThank you in advance.","link":"https://stackoverflow.com/questions/77238795/regular-expression-to-remove-ascii-control-characters-in-java","title":"Regular expression to remove ASCII control characters in Java","body":"<p>I've been reading that the below pattern used as part of <code>String#replaceAll()</code> in Java</p>\n<pre><code>&quot;[\\\\p{Cntrl}&amp;&amp;[^\\r\\n\\t]]&quot;\n</code></pre>\n<p>removes various non-printable ASCII characters from it.</p>\n<p>How does one interpret the above incantation:</p>\n<ul>\n<li>which characters are included as part of those control chars to be removed?</li>\n<li>what does the <code>&amp;&amp;</code> stand for?</li>\n<li>does <code>^</code> mean it only looks at the beginning of the line?</li>\n</ul>\n<p>Can someone please provide a comprehensive <strong>non-technical</strong> explanation of the above expression?</p>\n<p>Thank you in advance.</p>\n"},{"tags":["java","android","android-studio","mobile-development"],"comments":[{"score":1,"post_type":"question","creation_date":1697018224,"post_id":77271961,"comment_id":136225656,"body_markdown":"The error is pretty clear: You are using a dependency that only works with compileSdk &gt;= 34, and you are on 33. Either downgrade the dependency or update your own compileSdk to 34.","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de#comment136225656_77271961","body":"The error is pretty clear: You are using a dependency that only works with compileSdk &gt;= 34, and you are on 33. Either downgrade the dependency or update your own compileSdk to 34."},{"score":1,"post_type":"question","creation_date":1697019428,"post_id":77271961,"comment_id":136225848,"body_markdown":"Thank you for your help. I have changed the material version from &quot;implementation &#39;com.google.android.material:material:1.10.0&#39; to implementation &#39;com.google.android.material:material:1.5.0&#39;. and currently the project is running.","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de#comment136225848_77271961","body":"Thank you for your help. I have changed the material version from &quot;implementation &#39;com.google.android.material:material:1.10.0&#39; to implementation &#39;com.google.android.material:material:1.5.0&#39;. and currently the project is running."},{"score":5,"post_type":"question","creation_date":1697121271,"post_id":77271961,"comment_id":136242319,"body_markdown":"@jorn with all due respect, its not clear because it does not say what that dependency is. As has been commented com.google.android.material:material 1.10.0 was the problem, but you can&#39;t tell that from the error.","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de#comment136242319_77271961","body":"@jorn with all due respect, its not clear because it does not say what that dependency is. As has been commented com.google.android.material:material 1.10.0 was the problem, but you can&#39;t tell that from the error."},{"score":0,"post_type":"question","creation_date":1699118163,"post_id":77271961,"comment_id":136492265,"body_markdown":"Does this answer your question? [Android Studio error: &quot;6 issues were found when checking AAR metadata&quot;](https://stackoverflow.com/questions/75122196/android-studio-error-6-issues-were-found-when-checking-aar-metadata) Same issue just update to v34 instead of 33 in that question from just 9 months ago.","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de#comment136492265_77271961","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75122196/android-studio-error-6-issues-were-found-when-checking-aar-metadata\">Android Studio error: &quot;6 issues were found when checking AAR metadata&quot;</a> Same issue just update to v34 instead of 33 in that question from just 9 months ago."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1697464217,"post_id":77274626,"comment_id":136279622,"body_markdown":"Do you know what I can change if I have a compose project?","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77274626#comment136279622_77274626","body":"Do you know what I can change if I have a compose project?"},{"score":1,"post_type":"answer","creation_date":1699372979,"post_id":77274626,"comment_id":136522105,"body_markdown":"Saved me a lot of headace!","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77274626#comment136522105_77274626","body":"Saved me a lot of headace!"},{"score":0,"post_type":"answer","creation_date":1699985167,"post_id":77274626,"comment_id":136598440,"body_markdown":"worked for me, THANKS","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77274626#comment136598440_77274626","body":"worked for me, THANKS"}],"comment_count":3,"score":63,"last_activity_date":1701901332,"last_edit_date":1701901332,"creation_date":1697039672,"answer_id":77274626,"question_id":77271961,"body_markdown":"Replace this implementation:\r\n\r\n    implementation &#39;com.google.android.material:material:1.10.0&#39;\r\n\r\nwith:\r\n\r\n    implementation &#39;com.google.android.material:material:1.8.0&#39;\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77274626#77274626","title":"Dependency &#39;androidx.activity:activity:1.8.0&#39; requires libraries or apps that depend on it to compile against version 34 or later of the Android APIs","body":"<p>Replace this implementation:</p>\n<pre><code>implementation 'com.google.android.material:material:1.10.0'\n</code></pre>\n<p>with:</p>\n<pre><code>implementation 'com.google.android.material:material:1.8.0'\n</code></pre>\n"},{"comment_count":0,"score":4,"last_activity_date":1697123240,"creation_date":1697123240,"answer_id":77281803,"question_id":77271961,"body_markdown":"If you visit the Maven repository page for [material 1.10.0][1], you will notice a section called &#39;Compile Dependencies.&#39; This section lists the dependencies required for the material dependency to compile and function properly. Typically, these compile dependencies are automatically included when you declare the main dependency in your project.\r\n\r\nThe first dependency in the list is &#39;activity 1.8.0,&#39; which is only compatible with &#39;compileSdk&#39; versions greater than or equal to 34. To resolve this compatibility issue, you can either downgrade the material dependency or upgrade your project&#39;s &#39;compileSdk&#39; version.\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/com.google.android.material/material/1.10.0","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77281803#77281803","title":"Dependency &#39;androidx.activity:activity:1.8.0&#39; requires libraries or apps that depend on it to compile against version 34 or later of the Android APIs","body":"<p>If you visit the Maven repository page for <a href=\"https://mvnrepository.com/artifact/com.google.android.material/material/1.10.0\" rel=\"nofollow noreferrer\">material 1.10.0</a>, you will notice a section called 'Compile Dependencies.' This section lists the dependencies required for the material dependency to compile and function properly. Typically, these compile dependencies are automatically included when you declare the main dependency in your project.</p>\n<p>The first dependency in the list is 'activity 1.8.0,' which is only compatible with 'compileSdk' versions greater than or equal to 34. To resolve this compatibility issue, you can either downgrade the material dependency or upgrade your project's 'compileSdk' version.</p>\n"},{"comment_count":0,"score":20,"last_activity_date":1701901465,"last_edit_date":1701901465,"creation_date":1697140445,"answer_id":77283505,"question_id":77271961,"body_markdown":"You only need to update `compileSdk = 33 to 34` in `build.gradle.kts`.\r\n","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77283505#77283505","title":"Dependency &#39;androidx.activity:activity:1.8.0&#39; requires libraries or apps that depend on it to compile against version 34 or later of the Android APIs","body":"<p>You only need to update <code>compileSdk = 33 to 34</code> in <code>build.gradle.kts</code>.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1700238303,"post_id":77285522,"comment_id":136633692,"body_markdown":"You can also change it to 1.7.2","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77285522#comment136633692_77285522","body":"You can also change it to 1.7.2"},{"score":0,"post_type":"answer","creation_date":1700879892,"post_id":77285522,"comment_id":136709814,"body_markdown":"1.8.0 is supported","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77285522#comment136709814_77285522","body":"1.8.0 is supported"}],"comment_count":2,"score":11,"last_activity_date":1697178701,"creation_date":1697178701,"answer_id":77285522,"question_id":77271961,"body_markdown":"I was facing the same issue and downgraded material plugin from \r\n\r\n    implementation &#39;com.google.android.material:material:1.10.0&#39;\r\n\r\nto\r\n\r\n    implementation &#39;com.google.android.material:material:1.6.1&#39;\r\n\r\nNow it&#39;s working fine.","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77285522#77285522","title":"Dependency &#39;androidx.activity:activity:1.8.0&#39; requires libraries or apps that depend on it to compile against version 34 or later of the Android APIs","body":"<p>I was facing the same issue and downgraded material plugin from</p>\n<pre><code>implementation 'com.google.android.material:material:1.10.0'\n</code></pre>\n<p>to</p>\n<pre><code>implementation 'com.google.android.material:material:1.6.1'\n</code></pre>\n<p>Now it's working fine.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1698046657,"post_id":77292947,"comment_id":136350688,"body_markdown":"I&#39;m just wondering: if the activity version is set to a certain value *automatically*, why wouldn&#39;t they just make it so the `compileSdk`&#39;s value is set to a certain value (34 in this case), too, so you don&#39;t have to change it by hand on every new project creation?","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77292947#comment136350688_77292947","body":"I&#39;m just wondering: if the activity version is set to a certain value <i>automatically</i>, why wouldn&#39;t they just make it so the <code>compileSdk</code>&#39;s value is set to a certain value (34 in this case), too, so you don&#39;t have to change it by hand on every new project creation?"},{"score":0,"post_type":"answer","creation_date":1700238380,"post_id":77292947,"comment_id":136633710,"body_markdown":"@bighugedev you are right. Google pretends everyone has the priviledge they have. Most of their apps that are recently made are like that and fail to make it in the market.","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77292947#comment136633710_77292947","body":"@bighugedev you are right. Google pretends everyone has the priviledge they have. Most of their apps that are recently made are like that and fail to make it in the market."}],"comment_count":2,"score":1,"last_activity_date":1697289297,"creation_date":1697289297,"answer_id":77292947,"question_id":77271961,"body_markdown":"Since last week, Android updated their activity version to 1.8.0 which requires you have the minimum sdkVersion of 34. If you change your version from 1.8.0 to 1.7.2, it will solve the problem because that version requires a minimum sdkVersion of 33.","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77292947#77292947","title":"Dependency &#39;androidx.activity:activity:1.8.0&#39; requires libraries or apps that depend on it to compile against version 34 or later of the Android APIs","body":"<p>Since last week, Android updated their activity version to 1.8.0 which requires you have the minimum sdkVersion of 34. If you change your version from 1.8.0 to 1.7.2, it will solve the problem because that version requires a minimum sdkVersion of 33.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701901598,"last_edit_date":1701901598,"creation_date":1697623061,"answer_id":77315274,"question_id":77271961,"body_markdown":"I had the same problem, but I used the `compileSDK=34` already.\r\n\r\nThe problem was solved by checking all the implementations of mine. I had some older implementations which were still using the `android.*` dependency and not `androidx.*`. After I cleaned the implementations and changed them to `androidx`, the [Gradle][1] build ran fine.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Gradle\r\n","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77315274#77315274","title":"Dependency &#39;androidx.activity:activity:1.8.0&#39; requires libraries or apps that depend on it to compile against version 34 or later of the Android APIs","body":"<p>I had the same problem, but I used the <code>compileSDK=34</code> already.</p>\n<p>The problem was solved by checking all the implementations of mine. I had some older implementations which were still using the <code>android.*</code> dependency and not <code>androidx.*</code>. After I cleaned the implementations and changed them to <code>androidx</code>, the <a href=\"https://en.wikipedia.org/wiki/Gradle\" rel=\"nofollow noreferrer\">Gradle</a> build ran fine.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701901639,"last_edit_date":1701901639,"creation_date":1697719925,"answer_id":77323919,"question_id":77271961,"body_markdown":"I had the same issue. The recommended action is to update the project to use a newer *compileSdk*.\r\n\r\nIn order to do this, navigate to *Gradle Scripts* &amp;rarr; *build.gradle.kts (Module.app)*. Replace compileSdk from 33 to 34. Press &quot;Sync now&quot; in the top right corner and you should be fine.\r\n\r\n","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77323919#77323919","title":"Dependency &#39;androidx.activity:activity:1.8.0&#39; requires libraries or apps that depend on it to compile against version 34 or later of the Android APIs","body":"<p>I had the same issue. The recommended action is to update the project to use a newer <em>compileSdk</em>.</p>\n<p>In order to do this, navigate to <em>Gradle Scripts</em>  <em>build.gradle.kts (Module.app)</em>. Replace compileSdk from 33 to 34. Press &quot;Sync now&quot; in the top right corner and you should be fine.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701901669,"last_edit_date":1701901669,"creation_date":1697990500,"answer_id":77340707,"question_id":77271961,"body_markdown":"I had the same issue. I changed the compiler version to SDK 34, and now it is working fine.","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77340707#77340707","title":"Dependency &#39;androidx.activity:activity:1.8.0&#39; requires libraries or apps that depend on it to compile against version 34 or later of the Android APIs","body":"<p>I had the same issue. I changed the compiler version to SDK 34, and now it is working fine.</p>\n"},{"comment_count":0,"score":5,"last_activity_date":1698927946,"last_edit_date":1698927946,"creation_date":1698046470,"answer_id":77343386,"question_id":77271961,"body_markdown":"Everyone&#39;s got the same issue these days, as a new version of Android Studio was released. All you&#39;ve got to do is either change the value of `compileSdk` from 33 to 34, or downgrade the version of `com.google.android.material:material` from 10 to 9, that is, replace the line\r\n\r\n&gt; implementation &#39;com.google.android.material:material:1.**10**.0&#39;\r\n\r\nwith line\r\n\r\n&gt; implementation &#39;com.google.android.material:material:1.**9**.0&#39;\r\n\r\nEither of the solutions are supposed to be applied in your *module*&#39;s `build.gradle` file, not in your *project*&#39;s one.","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77343386#77343386","title":"Dependency &#39;androidx.activity:activity:1.8.0&#39; requires libraries or apps that depend on it to compile against version 34 or later of the Android APIs","body":"<p>Everyone's got the same issue these days, as a new version of Android Studio was released. All you've got to do is either change the value of <code>compileSdk</code> from 33 to 34, or downgrade the version of <code>com.google.android.material:material</code> from 10 to 9, that is, replace the line</p>\n<blockquote>\n<p>implementation 'com.google.android.material:material:1.<strong>10</strong>.0'</p>\n</blockquote>\n<p>with line</p>\n<blockquote>\n<p>implementation 'com.google.android.material:material:1.<strong>9</strong>.0'</p>\n</blockquote>\n<p>Either of the solutions are supposed to be applied in your <em>module</em>'s <code>build.gradle</code> file, not in your <em>project</em>'s one.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701901706,"last_edit_date":1701901706,"creation_date":1699444159,"answer_id":77445266,"question_id":77271961,"body_markdown":"If you want to keep the latest material library version and also don&#39;t want to target compile SDK to 34 then this is the solution for you.\r\n\r\nExclude activity from the material library as below:\r\n\r\n    implementation(&quot;com.google.android.material:material:1.10.0&quot;) {\r\n        exclude(&quot;androidx.activity&quot;, &quot;activity&quot;)\r\n    }\r\n","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77445266#77445266","title":"Dependency &#39;androidx.activity:activity:1.8.0&#39; requires libraries or apps that depend on it to compile against version 34 or later of the Android APIs","body":"<p>If you want to keep the latest material library version and also don't want to target compile SDK to 34 then this is the solution for you.</p>\n<p>Exclude activity from the material library as below:</p>\n<pre><code>implementation(&quot;com.google.android.material:material:1.10.0&quot;) {\n    exclude(&quot;androidx.activity&quot;, &quot;activity&quot;)\n}\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1700477237,"creation_date":1700477237,"answer_id":77515234,"question_id":77271961,"body_markdown":"I changed compileSdk = 33 to compileSdk = 34 in the build.gradle.kts file. After making this modification, I rebuilt the project and run the app. `compileSdk = 33 to 34`","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77515234#77515234","title":"Dependency &#39;androidx.activity:activity:1.8.0&#39; requires libraries or apps that depend on it to compile against version 34 or later of the Android APIs","body":"<p>I changed compileSdk = 33 to compileSdk = 34 in the build.gradle.kts file. After making this modification, I rebuilt the project and run the app. <code>compileSdk = 33 to 34</code></p>\n"},{"comments":[{"score":2,"post_type":"answer","creation_date":1701684823,"post_id":77593668,"comment_id":136801921,"body_markdown":"It&#39;s great to give an understanding of why the change is required, maybe mentioning how the dependency is now restricted to targeting SDK 34 so you have to match that if you want to use the library?","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77593668#comment136801921_77593668","body":"It&#39;s great to give an understanding of why the change is required, maybe mentioning how the dependency is now restricted to targeting SDK 34 so you have to match that if you want to use the library?"},{"score":0,"post_type":"answer","creation_date":1701901753,"post_id":77593668,"comment_id":136833923,"body_markdown":"Where? In what file, GUI place, or project setting? An answer should be self-contained (or at least contain the necessary references).","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77593668#comment136833923_77593668","body":"Where? In what file, GUI place, or project setting? An answer should be self-contained (or at least contain the necessary references)."}],"comment_count":2,"score":0,"last_activity_date":1701901721,"last_edit_date":1701901721,"creation_date":1701595247,"answer_id":77593668,"question_id":77271961,"body_markdown":"Change compileSdk to 34.\r\n\r\nChange targetSdk to 34.\r\n\r\n","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de/77593668#77593668","title":"Dependency &#39;androidx.activity:activity:1.8.0&#39; requires libraries or apps that depend on it to compile against version 34 or later of the Android APIs","body":"<p>Change compileSdk to 34.</p>\n<p>Change targetSdk to 34.</p>\n"}],"comment_count":4,"is_answered":true,"view_count":48827,"answer_count":12,"score":32,"last_activity_date":1701901721,"creation_date":1697018073,"last_edit_date":1701901427,"question_id":77271961,"body_markdown":"I&#39;ve created a new project in Android Studio, but when I run the application to test it, it shows me this error:\r\n\r\n```none\r\nAn issue was found when checking AAR metadata:\r\n\r\n  1.  Dependency &#39;androidx.activity:activity:1.8.0&#39; requires libraries and applications that\r\n      depend on it to compile against version 34 or later of the\r\n      Android APIs.\r\n\r\n      :app is currently compiled against android-33.\r\n\r\n      Also, the maximum recommended compile SDK version for Android Gradle\r\n      plugin 8.0.2 is 33.\r\n\r\n      Recommended action: Update this project&#39;s version of the Android Gradle\r\n      plugin to one that supports 34, then update this project to use\r\n      compileSdk of at least 34.\r\n\r\n      Note that updating a library or application&#39;s compileSdk (which\r\n      allows newer APIs to be used) can be done separately from updating\r\n      targetSdk (which opts the app in to new runtime behavior) and\r\n      minSdk (which determines which devices the app can be installed\r\n      on).\r\n```\r\n\r\nI don&#39;t know what is going on, but currently I&#39;m using the latest updates and libraries.\r\n\r\nThese are dependencies:\r\n\r\n```lang-none\r\ndependencies {\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.10.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    implementation &#39;com.github.bumptech.glide:glide:4.16.0&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n}\r\n```\r\n\r\nThis is the code:\r\n\r\n```java\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class AllBook extends AppCompatActivity {\r\n\r\n    private RecyclerView bookRecView;\r\n    BookRecAdapter bookAdapter;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_all_book);\r\n        bookAdapter = new BookRecAdapter(this);\r\n        bookRecView = findViewById(R.id.booksRecView);\r\n        bookRecView.setAdapter(bookAdapter);\r\n        bookRecView.setLayoutManager(new GridLayoutManager(this, 2));\r\n\r\n        ArrayList&lt;Book&gt; books = new ArrayList&lt;&gt;();\r\n        books.add(new Book(1, &quot;1Q84&quot;, &quot;Haruki Murakumi&quot;, 135, &quot;https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1483103331l/10357575.jpg&quot;, &quot;1Q84 is a novel written by Japanese writer Haruki Murakami, first published in three volumes in Japan in 200910.&quot;\r\n        , &quot;1Q84 is a novel written by Japanese writer Haruki Murakami, first published in three volumes in Japan in 200910. It covers a fictionalized year of 1984 in parallel with a \\&quot;real\\&quot; one. The novel is a story of how a woman named Aomame begins to notice strange changes occurring in the world&quot;));\r\n\r\n        bookAdapter.setBooks(books);\r\n    }\r\n}\r\n```\r\n\r\n","link":"https://stackoverflow.com/questions/77271961/dependency-androidx-activityactivity1-8-0-requires-libraries-or-apps-that-de","title":"Dependency &#39;androidx.activity:activity:1.8.0&#39; requires libraries or apps that depend on it to compile against version 34 or later of the Android APIs","body":"<p>I've created a new project in Android Studio, but when I run the application to test it, it shows me this error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>An issue was found when checking AAR metadata:\n\n  1.  Dependency 'androidx.activity:activity:1.8.0' requires libraries and applications that\n      depend on it to compile against version 34 or later of the\n      Android APIs.\n\n      :app is currently compiled against android-33.\n\n      Also, the maximum recommended compile SDK version for Android Gradle\n      plugin 8.0.2 is 33.\n\n      Recommended action: Update this project's version of the Android Gradle\n      plugin to one that supports 34, then update this project to use\n      compileSdk of at least 34.\n\n      Note that updating a library or application's compileSdk (which\n      allows newer APIs to be used) can be done separately from updating\n      targetSdk (which opts the app in to new runtime behavior) and\n      minSdk (which determines which devices the app can be installed\n      on).\n</code></pre>\n<p>I don't know what is going on, but currently I'm using the latest updates and libraries.</p>\n<p>These are dependencies:</p>\n<pre class=\"lang-none prettyprint-override\"><code>dependencies {\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.10.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'com.github.bumptech.glide:glide:4.16.0'\n    testImplementation 'junit:junit:4.13.2'\n\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n}\n</code></pre>\n<p>This is the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import androidx.appcompat.app.AppCompatActivity;\nimport androidx.recyclerview.widget.GridLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport android.os.Bundle;\n\nimport java.util.ArrayList;\n\npublic class AllBook extends AppCompatActivity {\n\n    private RecyclerView bookRecView;\n    BookRecAdapter bookAdapter;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_all_book);\n        bookAdapter = new BookRecAdapter(this);\n        bookRecView = findViewById(R.id.booksRecView);\n        bookRecView.setAdapter(bookAdapter);\n        bookRecView.setLayoutManager(new GridLayoutManager(this, 2));\n\n        ArrayList&lt;Book&gt; books = new ArrayList&lt;&gt;();\n        books.add(new Book(1, &quot;1Q84&quot;, &quot;Haruki Murakumi&quot;, 135, &quot;https://i.gr-assets.com/images/S/compressed.photo.goodreads.com/books/1483103331l/10357575.jpg&quot;, &quot;1Q84 is a novel written by Japanese writer Haruki Murakami, first published in three volumes in Japan in 200910.&quot;\n        , &quot;1Q84 is a novel written by Japanese writer Haruki Murakami, first published in three volumes in Japan in 200910. It covers a fictionalized year of 1984 in parallel with a \\&quot;real\\&quot; one. The novel is a story of how a woman named Aomame begins to notice strange changes occurring in the world&quot;));\n\n        bookAdapter.setBooks(books);\n    }\n}\n</code></pre>\n"},{"tags":["java","xml","class"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1686208174,"post_id":76429360,"comment_id":134768267,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","link":"https://stackoverflow.com/questions/76352101/duplicate-class-error-when-building-android-project-in-java-using-android-studi/76429360#comment134768267_76429360","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76429360/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"score":0,"post_type":"answer","creation_date":1686208188,"post_id":76429360,"comment_id":134768268,"body_markdown":"Credit to jbaez\n\nhttps://github.com/facebook/react-native/issues/35979","link":"https://stackoverflow.com/questions/76352101/duplicate-class-error-when-building-android-project-in-java-using-android-studi/76429360#comment134768268_76429360","body":"Credit to jbaez  <a href=\"https://github.com/facebook/react-native/issues/35979\" rel=\"nofollow noreferrer\">github.com/facebook/react-native/issues/35979</a>"}],"comment_count":2,"score":0,"last_activity_date":1686207839,"creation_date":1686207839,"answer_id":76429360,"question_id":76352101,"body_markdown":"In your build.gradle file add some stuff:\r\n\r\n    ...\r\n    dependencies {\r\n         constraints {\r\n            implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.8.0&quot;)\r\n            implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.8.0&quot;)\r\n        }\r\n    }\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    ...\r\n\r\n","link":"https://stackoverflow.com/questions/76352101/duplicate-class-error-when-building-android-project-in-java-using-android-studi/76429360#76429360","title":"Duplicate class error when building Android project in Java. Using Android Studio flamingo 2022.2.1 patch2","body":"<p>In your build.gradle file add some stuff:</p>\n<pre><code>...\ndependencies {\n     constraints {\n        implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.8.0&quot;)\n        implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.8.0&quot;)\n    }\n}\nimplementation 'androidx.appcompat:appcompat:1.6.1'\n...\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":143,"answer_count":1,"score":0,"last_activity_date":1701901555,"creation_date":1685285967,"last_edit_date":1701901555,"question_id":76352101,"body_markdown":"I&#39;m encountering a lot of errors while trying to build my Android project, and I&#39;m seeking assistance in resolving it. The error message I&#39;m receiving is:\r\n\r\n    Caused by: org.gradle.workers.internal.DefaultWorkerExecutor$WorkExecutionException: A failure occurred while executing com.android.build.gradle.internal.tasks.CheckDuplicatesRunnable\r\n    Caused by: java.lang.RuntimeException: Duplicate class android.support.v4.app.INotificationSideChannel found in modules core-1.9.0-runtime (androidx.core:core:1.9.0) and support-v4-22.2.0-runtime (com.android.support:support-v4:22.2.0)\r\n    Duplicate class android.support.v4.app.INotificationSideChannel found in modules core-1.9.0-runtime (androidx.core:core:1.9.0) and support-v4-22.2.0-runtime (com.android.support:support-v4:22.2.0)\r\n    Duplicate class android.support.v4.app.INotificationSideChannel$Stub found in modules core-1.9.0-runtime (androidx.core:core:1.9.0) and support-v4-22.2.0-runtime (com.android.support:support-v4:22.2.0)\r\n    Duplicate class android.support.v4.app.INotificationSideChannel$Stub$Proxy found in modules core-1.9.0-runtime (androidx.core:core:1.9.0) and support-v4-22.2.0-runtime (com.android.support:support-v4:22.2.0)\r\n    Go to the documentation to learn how to Fix dependency resolution errors.\r\n    Caused by: com.android.aaptcompiler.ResourceCompilationException: Failed to compile values resource file D:\\PracticaTehnologica2023\\MyApplicationCP\\app\\build\\intermediates\\incremental\\debug\\mergeDebugResources\\merged.dir\\values\\values.xml\r\n\r\n\r\nI&#39;ve already tried cleaning and rebuilding my project, as well as modifying the implementation versions, but the issue persists. As a beginner, I would appreciate any guidance on resolving these errors.\r\nAdditionally, I have a question about the relationship between styles.xml and themes.xml files. When I initially created my project, it included themes.xml files, but I added a styles.xml file to define my custom items. I&#39;m unsure if these files are supposed to be separate or if they should be consolidated in some way.\r\n\r\n\r\nbuild.gradle (Project: MyApplicationCp)\r\n```\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nbuildscript {\r\n    repositories {\r\n        // Make sure that you have the following two repositories\r\n        google()  // Google&#39;s Maven repository\r\n\r\n        mavenCentral()  // Maven Central repository\r\n\r\n    }\r\n    dependencies {\r\n        // Add the dependency for the Google services Gradle plugin\r\n        classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n\r\n    }\r\n}\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;8.0.2&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;8.0.2&#39; apply false\r\n}\r\n\r\n```\r\n\r\nbuild.gradle (Module :app)\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n    id &#39;com.google.gms.google-services&#39;\r\n\r\n}\r\n`your text`\r\nandroid {\r\n    namespace &#39;com.example.myapplicationcp&#39;\r\n    compileSdk 33\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.myapplicationcp&quot;\r\n        minSdk 21\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.9.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n\r\n    implementation platform(&#39;com.google.firebase:firebase-bom:32.0.0&#39;)\r\n    implementation &#39;com.google.firebase:firebase-auth:22.0.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-database:20.2.2&#39;\r\n    implementation &#39;com.google.firebase:firebase-core:21.1.1&#39;\r\n    implementation &#39;androidx.cardview:cardview:1.0.0&#39;\r\n\r\n    implementation &#39;com.rengwuxian.materialedittext:library:2.1.4&#39;\r\n\r\n\r\n\r\n\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n}\r\n```\r\n","link":"https://stackoverflow.com/questions/76352101/duplicate-class-error-when-building-android-project-in-java-using-android-studi","title":"Duplicate class error when building Android project in Java. Using Android Studio flamingo 2022.2.1 patch2","body":"<p>I'm encountering a lot of errors while trying to build my Android project, and I'm seeking assistance in resolving it. The error message I'm receiving is:</p>\n<pre><code>Caused by: org.gradle.workers.internal.DefaultWorkerExecutor$WorkExecutionException: A failure occurred while executing com.android.build.gradle.internal.tasks.CheckDuplicatesRunnable\nCaused by: java.lang.RuntimeException: Duplicate class android.support.v4.app.INotificationSideChannel found in modules core-1.9.0-runtime (androidx.core:core:1.9.0) and support-v4-22.2.0-runtime (com.android.support:support-v4:22.2.0)\nDuplicate class android.support.v4.app.INotificationSideChannel found in modules core-1.9.0-runtime (androidx.core:core:1.9.0) and support-v4-22.2.0-runtime (com.android.support:support-v4:22.2.0)\nDuplicate class android.support.v4.app.INotificationSideChannel$Stub found in modules core-1.9.0-runtime (androidx.core:core:1.9.0) and support-v4-22.2.0-runtime (com.android.support:support-v4:22.2.0)\nDuplicate class android.support.v4.app.INotificationSideChannel$Stub$Proxy found in modules core-1.9.0-runtime (androidx.core:core:1.9.0) and support-v4-22.2.0-runtime (com.android.support:support-v4:22.2.0)\nGo to the documentation to learn how to Fix dependency resolution errors.\nCaused by: com.android.aaptcompiler.ResourceCompilationException: Failed to compile values resource file D:\\PracticaTehnologica2023\\MyApplicationCP\\app\\build\\intermediates\\incremental\\debug\\mergeDebugResources\\merged.dir\\values\\values.xml\n</code></pre>\n<p>I've already tried cleaning and rebuilding my project, as well as modifying the implementation versions, but the issue persists. As a beginner, I would appreciate any guidance on resolving these errors.\nAdditionally, I have a question about the relationship between styles.xml and themes.xml files. When I initially created my project, it included themes.xml files, but I added a styles.xml file to define my custom items. I'm unsure if these files are supposed to be separate or if they should be consolidated in some way.</p>\n<p>build.gradle (Project: MyApplicationCp)</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\nbuildscript {\n    repositories {\n        // Make sure that you have the following two repositories\n        google()  // Google's Maven repository\n\n        mavenCentral()  // Maven Central repository\n\n    }\n    dependencies {\n        // Add the dependency for the Google services Gradle plugin\n        classpath 'com.google.gms:google-services:4.3.15'\n\n    }\n}\nplugins {\n    id 'com.android.application' version '8.0.2' apply false\n    id 'com.android.library' version '8.0.2' apply false\n}\n\n</code></pre>\n<p>build.gradle (Module :app)</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'com.google.gms.google-services'\n\n}\n`your text`\nandroid {\n    namespace 'com.example.myapplicationcp'\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example.myapplicationcp&quot;\n        minSdk 21\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.9.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n\n    implementation platform('com.google.firebase:firebase-bom:32.0.0')\n    implementation 'com.google.firebase:firebase-auth:22.0.0'\n    implementation 'com.google.firebase:firebase-database:20.2.2'\n    implementation 'com.google.firebase:firebase-core:21.1.1'\n    implementation 'androidx.cardview:cardview:1.0.0'\n\n    implementation 'com.rengwuxian.materialedittext:library:2.1.4'\n\n\n\n\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","wiremock","feign"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701897858,"creation_date":1701897858,"answer_id":77616393,"question_id":76896438,"body_markdown":"Why are you trying to autowire the WireMockServer at the Config Class?\r\n\r\nthe config class is the one that your WireMockServer will be using. \r\n\r\nRemove the following lines:  \r\n\r\n    @Autowired\r\n    private WireMockServer wireMockServer;\r\n\r\nand test\r\n","link":"https://stackoverflow.com/questions/76896438/wire-mock-spring-cloud-feign-integration-test/77616393#77616393","title":"Wire Mock - Spring Cloud Feign Integration Test","body":"<p>Why are you trying to autowire the WireMockServer at the Config Class?</p>\n<p>the config class is the one that your WireMockServer will be using.</p>\n<p>Remove the following lines:</p>\n<pre><code>@Autowired\nprivate WireMockServer wireMockServer;\n</code></pre>\n<p>and test</p>\n"}],"comment_count":0,"is_answered":false,"view_count":114,"answer_count":1,"score":0,"last_activity_date":1701897858,"creation_date":1691990645,"last_edit_date":1692117057,"question_id":76896438,"body_markdown":"I have a rest controller that talks with a service class, which calls the feign client. The spring application starts fine and works fine. Now I am trying to write integration tests for the spring feign client using wire mock; by following the guide from [here](https://www.baeldung.com/spring-cloud-feign-integration-tests). When running the test, I am seeing Bean Currently in Creation exception. Could anyone tell me what am I missing?\r\n\r\nHere is the wire mock config class:\r\n\r\n```\r\n@TestConfiguration\r\n@ActiveProfiles(&quot;test&quot;)\r\npublic class WireMockConfig {\r\n    @Autowired\r\n    private WireMockServer wireMockServer;\r\n\r\n    @Bean(initMethod = &quot;start&quot;, destroyMethod = &quot;stop&quot;)\r\n    public WireMockServer mockServer(){\r\n        return new WireMockServer(options().dynamicPort());\r\n    }\r\n}\r\n```\r\n\r\nI stubbed the response as shown below:\r\n\r\n```\r\npublic class DataMocks {\r\n    public static void setUpTypesResponse(WireMockServer mockService) throws Exception{\r\n        mockService.stubFor(WireMock.get(WireMock.urlEqualTo(&quot;/endpoint&quot;))\r\n                .willReturn(WireMock.aResponse()\r\n                        .withStatus(HttpStatus.OK.value())\r\n                        .withHeader(Header.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\r\n                        .withBody(\r\n                                copyToString(\r\n                                        DataMocks.class.getClassLoader().getResourceAsStream(&quot;payload/Response.json&quot;),\r\n                                        Charset.defaultCharset()))));\r\n    }\r\n```\r\n\r\nHere is my integration testing class:\r\n\r\n```\r\n@SpringBootTest\r\n@ActiveProfiles(&quot;test&quot;)\r\n@EnableConfigurationProperties\r\n@ExtendWith(SpringExtension.class)\r\n@ContextConfiguration(classes = {WireMockConfig.class})\r\nclass DataFeignClientIntegrationTest{\r\n    @Autowired\r\n    private WireMockServer mockServer;\r\n\r\n    @Autowired\r\n    private FeignClient feignClient;\r\n\r\n    @BeforeEach\r\n    void setup() throws Exception {\r\n        DataMocks.setUpTypesResponse(mockServer);\r\n    }\r\n\r\n    @Test\r\n    public void findTypesTest() throws Exception{\r\n        RequestParams requestParams = RequestParams.builder().build();\r\n        assertEquals(feignClient.findTypes(requestParams).getClass(),Response.class);\r\n    }\r\n```\r\nThe error is:\r\n\r\n&gt; Error creating bean with name &#39;wireMockConfig&#39;: Requested bean is currently in creation: Is there an unresolvable circular reference?","link":"https://stackoverflow.com/questions/76896438/wire-mock-spring-cloud-feign-integration-test","title":"Wire Mock - Spring Cloud Feign Integration Test","body":"<p>I have a rest controller that talks with a service class, which calls the feign client. The spring application starts fine and works fine. Now I am trying to write integration tests for the spring feign client using wire mock; by following the guide from <a href=\"https://www.baeldung.com/spring-cloud-feign-integration-tests\" rel=\"nofollow noreferrer\">here</a>. When running the test, I am seeing Bean Currently in Creation exception. Could anyone tell me what am I missing?</p>\n<p>Here is the wire mock config class:</p>\n<pre><code>@TestConfiguration\n@ActiveProfiles(&quot;test&quot;)\npublic class WireMockConfig {\n    @Autowired\n    private WireMockServer wireMockServer;\n\n    @Bean(initMethod = &quot;start&quot;, destroyMethod = &quot;stop&quot;)\n    public WireMockServer mockServer(){\n        return new WireMockServer(options().dynamicPort());\n    }\n}\n</code></pre>\n<p>I stubbed the response as shown below:</p>\n<pre><code>public class DataMocks {\n    public static void setUpTypesResponse(WireMockServer mockService) throws Exception{\n        mockService.stubFor(WireMock.get(WireMock.urlEqualTo(&quot;/endpoint&quot;))\n                .willReturn(WireMock.aResponse()\n                        .withStatus(HttpStatus.OK.value())\n                        .withHeader(Header.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                        .withBody(\n                                copyToString(\n                                        DataMocks.class.getClassLoader().getResourceAsStream(&quot;payload/Response.json&quot;),\n                                        Charset.defaultCharset()))));\n    }\n</code></pre>\n<p>Here is my integration testing class:</p>\n<pre><code>@SpringBootTest\n@ActiveProfiles(&quot;test&quot;)\n@EnableConfigurationProperties\n@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = {WireMockConfig.class})\nclass DataFeignClientIntegrationTest{\n    @Autowired\n    private WireMockServer mockServer;\n\n    @Autowired\n    private FeignClient feignClient;\n\n    @BeforeEach\n    void setup() throws Exception {\n        DataMocks.setUpTypesResponse(mockServer);\n    }\n\n    @Test\n    public void findTypesTest() throws Exception{\n        RequestParams requestParams = RequestParams.builder().build();\n        assertEquals(feignClient.findTypes(requestParams).getClass(),Response.class);\n    }\n</code></pre>\n<p>The error is:</p>\n<blockquote>\n<p>Error creating bean with name 'wireMockConfig': Requested bean is currently in creation: Is there an unresolvable circular reference?</p>\n</blockquote>\n"},{"tags":["java","multithreading","raytracing"],"comments":[{"score":2,"post_type":"question","creation_date":1701276709,"post_id":77573058,"comment_id":136756630,"body_markdown":"Maybe I&#39;m missing something, but as far as I can tell, you&#39;re not splitting the work, so those threads all do the same work. Also, have you checked the cost of `world.createCopy();`","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded#comment136756630_77573058","body":"Maybe I&#39;m missing something, but as far as I can tell, you&#39;re not splitting the work, so those threads all do the same work. Also, have you checked the cost of <code>world.createCopy();</code>"},{"score":0,"post_type":"question","creation_date":1701277107,"post_id":77573058,"comment_id":136756700,"body_markdown":"That is, likely the setup of threads, doing _thread_ times the work (compared to just doing it once), and then combining _thread_ times the work afterwards (compared to having only one result) is where the real cost is.","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded#comment136756700_77573058","body":"That is, likely the setup of threads, doing <i>thread</i> times the work (compared to just doing it once), and then combining <i>thread</i> times the work afterwards (compared to having only one result) is where the real cost is."},{"score":0,"post_type":"question","creation_date":1701284237,"post_id":77573058,"comment_id":136757877,"body_markdown":"@MarkRotteveel I&#39;m rendering the same image multiple times at a lower samples per pixel, then combining them together. That&#39;s why I divide the samplesPerPixel by the number of threads. The rendering itself is slow. Also, check createCopy for what?\n```\nDone.                           \nRender time (ms): 19787\nDone.                           \nRender time (ms): 19816\nDone.                           \nRender time (ms): 19826\nDone.                           \nRender time (ms): 19867\nTotal time: 20242\n```","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded#comment136757877_77573058","body":"@MarkRotteveel I&#39;m rendering the same image multiple times at a lower samples per pixel, then combining them together. That&#39;s why I divide the samplesPerPixel by the number of threads. The rendering itself is slow. Also, check createCopy for what? ``` Done.                            Render time (ms): 19787 Done.                            Render time (ms): 19816 Done.                            Render time (ms): 19826 Done.                            Render time (ms): 19867 Total time: 20242 ```"},{"score":0,"post_type":"question","creation_date":1701285512,"post_id":77573058,"comment_id":136758096,"body_markdown":"The information you shared is good to have but doesn&#39;t seem very useful. Memory related metrics seem to indicate that there is no bottleneck there. Profiling CPU usage would be useful to identify potential performance bottlenecks. And how many cores does your CPU have?","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded#comment136758096_77573058","body":"The information you shared is good to have but doesn&#39;t seem very useful. Memory related metrics seem to indicate that there is no bottleneck there. Profiling CPU usage would be useful to identify potential performance bottlenecks. And how many cores does your CPU have?"},{"score":0,"post_type":"question","creation_date":1701285750,"post_id":77573058,"comment_id":136758138,"body_markdown":"I believe the m1 mac has 4 efficiency cores and 4 performance cores. Also, I don&#39;t think there is much of an overhead. I could be wrong, but the output I posted shows that most of the total time is rendering.","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded#comment136758138_77573058","body":"I believe the m1 mac has 4 efficiency cores and 4 performance cores. Also, I don&#39;t think there is much of an overhead. I could be wrong, but the output I posted shows that most of the total time is rendering."},{"score":0,"post_type":"question","creation_date":1701369115,"post_id":77573058,"comment_id":136770155,"body_markdown":"@aled I wrote a simple implementation of multiprocessing that seems to work. Creating four processes cuts the render time in half. I&#39;ll add the code to the original post. I still don&#39;t understand why the multithreading isn&#39;t working though.","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded#comment136770155_77573058","body":"@aled I wrote a simple implementation of multiprocessing that seems to work. Creating four processes cuts the render time in half. I&#39;ll add the code to the original post. I still don&#39;t understand why the multithreading isn&#39;t working though."},{"score":0,"post_type":"question","creation_date":1701370011,"post_id":77573058,"comment_id":136770307,"body_markdown":"Since the only thing that scales down is `samplesPerPixel`, are the two lines in that var&#39;s for loop (the `getRay(...)` and `pixelColor.plusEquals(...)` calls) the main bottleneck for your processing? That is, do they represent the majority of the work? You&#39;re doing everything else N times (in particular, going over each pixel), so you need to make sure that cost is worth it.","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded#comment136770307_77573058","body":"Since the only thing that scales down is <code>samplesPerPixel</code>, are the two lines in that var&#39;s for loop (the <code>getRay(...)</code> and <code>pixelColor.plusEquals(...)</code> calls) the main bottleneck for your processing? That is, do they represent the majority of the work? You&#39;re doing everything else N times (in particular, going over each pixel), so you need to make sure that cost is worth it."},{"score":0,"post_type":"question","creation_date":1701370015,"post_id":77573058,"comment_id":136770308,"body_markdown":"Rough analogy: imagine you&#39;re tryig to paint your house, so you hire 4 people to (a) all paint everything except the door frame, and then (b) each paint one side of the door frame. You wouldn&#39;t be surprised that takes more time than just one person painting everything. Instead, you should have had each painter paint one side of the house.","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded#comment136770308_77573058","body":"Rough analogy: imagine you&#39;re tryig to paint your house, so you hire 4 people to (a) all paint everything except the door frame, and then (b) each paint one side of the door frame. You wouldn&#39;t be surprised that takes more time than just one person painting everything. Instead, you should have had each painter paint one side of the house."},{"score":1,"post_type":"question","creation_date":1701377657,"post_id":77573058,"comment_id":136771593,"body_markdown":"@yshavit The plusEquals calls is the majority of the work about 95%. Also, rayColor is recursive. The reason I went with my current method is because it was suggested in the original guide. \n&gt;Parallelism  Run &#119873; copies of your code on &#119873; cores with different random seeds. &gt;Average the &#119873; runs. This averaging can also be done hierarchically where &#119873;/2 &gt;pairs can be averaged to get &#119873;/4 images, and pairs of those can be averaged. &gt;That method of parallelism should extend well into the thousands of cores with &gt;very little coding.","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded#comment136771593_77573058","body":"@yshavit The plusEquals calls is the majority of the work about 95%. Also, rayColor is recursive. The reason I went with my current method is because it was suggested in the original guide.  &gt;Parallelism  Run  copies of your code on  cores with different random seeds. &gt;Average the  runs. This averaging can also be done hierarchically where /2 &gt;pairs can be averaged to get /4 images, and pairs of those can be averaged. &gt;That method of parallelism should extend well into the thousands of cores with &gt;very little coding."},{"score":0,"post_type":"question","creation_date":1701392641,"post_id":77573058,"comment_id":136773243,"body_markdown":"Interesting! That&#39;s the first thing that jumped out to me, but from what you&#39;re describing, it does seem like where you&#39;d want the parallelism.","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded#comment136773243_77573058","body":"Interesting! That&#39;s the first thing that jumped out to me, but from what you&#39;re describing, it does seem like where you&#39;d want the parallelism."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701470159,"post_id":77588153,"comment_id":136784019,"body_markdown":"1. I ran my code with 1 thread and 1 job, it took 8900 ms to render. Then, I ran the code with 1 thread and 4 jobs in sequence. Each job took about 2200 ms, with a total time of about 9200 ms. (As a reminder, each thread rendered the image at 1/4 of of the samples compared to a single job). If I use same amount of samples per pixel, then each job takes around 8900 ms (the same as 1 job, 1 thread).\n\nThe world.createCopy takes almost zero time at all (around 4000 nanoseconds).\n\nAs for your other questions. I&#39;ll look into those when I have time.","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded/77588153#comment136784019_77588153","body":"1. I ran my code with 1 thread and 1 job, it took 8900 ms to render. Then, I ran the code with 1 thread and 4 jobs in sequence. Each job took about 2200 ms, with a total time of about 9200 ms. (As a reminder, each thread rendered the image at 1/4 of of the samples compared to a single job). If I use same amount of samples per pixel, then each job takes around 8900 ms (the same as 1 job, 1 thread).  The world.createCopy takes almost zero time at all (around 4000 nanoseconds).  As for your other questions. I&#39;ll look into those when I have time."},{"score":0,"post_type":"answer","creation_date":1701895855,"post_id":77588153,"comment_id":136833100,"body_markdown":"I think I found the issue. It turns out that Math.random isn&#39;t thread safe. I&#39;m happy it&#39;s fixed, but also kind of disappointed in myself.","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded/77588153#comment136833100_77588153","body":"I think I found the issue. It turns out that Math.random isn&#39;t thread safe. I&#39;m happy it&#39;s fixed, but also kind of disappointed in myself."}],"comment_count":2,"score":0,"last_activity_date":1701465855,"creation_date":1701465855,"answer_id":77588153,"question_id":77573058,"body_markdown":"&gt; Lastly, at an image width of 400 pixels and samples per pixel at 128 in single threaded mode, the total render time is about 12 seconds. With multi-threading (run at 4 threads) it takes about 21 seconds. Run on a 16GB M1 Macbook Air.\r\n\r\nSomething is really wrong that the multi-threaded case takes almost twice as long.  I just tried a whittled down test:\r\n\r\n\tint numThreads = 1;\r\n\tint numJobs = 4;\r\n\tExecutorService executorService = executors.newFixedThreadPool(numThreads);\r\n\tfor (int jobC = 0; jobC &lt; numJobs; jobC++) {\r\n\t\tCallable&lt;Void&gt; renderTask = () -&gt; {\r\n\t\t\tlong total = 0;\r\n\t\t\tfor (long i = 0; i &lt; 100000000000L; i++) {\r\n\t\t\t\ttotal += i;\r\n\t\t\t}\r\n\t\t\tSystem.err.print(&quot;Done, total = &quot; + total + &quot;\\n&quot;);\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\texecutorService.submit(renderTask);\r\n\t}\r\n\texecutorService.shutdown();\r\n\tlong start = System.currentTimeMillis();\r\n\texecutorService.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);\r\n\tSystem.out.println(&quot;Took &quot; + ( System.currentTimeMillis() - start));\r\n\r\nWith numThreads set to 1, the program took 130 seconds and with 4 it took 36 seconds.  This is my macbook pro running Chrome, etc..\r\n\r\nSo Java threads work in general (duh).  Here&#39;s what to look for in your application to see what&#39;s screwing up the parallelism:\r\n\r\n* First off, does running the same code with threads = 1 actually run faster?  Try separating the number of jobs from the number of threads.  Does 1 thread running each of the 4 jobs serially really run faster?  Make sure you are comparing apples to apples.\r\n* Although you seem to be doing a copy of the working data, maybe the threads are sharing a complex data structure so what you are seeing is [cache coherence][1] conflicts that is killing your performance.  I&#39;d be surprised that it would take twice as long but I guess it&#39;s possible.\r\n* As others have mentioned, be careful of `world.createCopy(...)` and other calls that aren&#39;t being run in parallel but may take longer than you think.  Same question with the final image generation.  Maybe adding some `println(...)` messages with timestamps around some of these calls to see if one is taking longer than you expect.\r\n* Is there some way that the `getRay(...)` or other shared methods synchronize on common data?  Similar to the cache coherence question.\r\n\r\nHope something in here helps.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Cache_coherence","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded/77588153#77588153","title":"Java multithreading is performing worse than single threaded","body":"<blockquote>\n<p>Lastly, at an image width of 400 pixels and samples per pixel at 128 in single threaded mode, the total render time is about 12 seconds. With multi-threading (run at 4 threads) it takes about 21 seconds. Run on a 16GB M1 Macbook Air.</p>\n</blockquote>\n<p>Something is really wrong that the multi-threaded case takes almost twice as long.  I just tried a whittled down test:</p>\n<pre><code>int numThreads = 1;\nint numJobs = 4;\nExecutorService executorService = executors.newFixedThreadPool(numThreads);\nfor (int jobC = 0; jobC &lt; numJobs; jobC++) {\n    Callable&lt;Void&gt; renderTask = () -&gt; {\n        long total = 0;\n        for (long i = 0; i &lt; 100000000000L; i++) {\n            total += i;\n        }\n        System.err.print(&quot;Done, total = &quot; + total + &quot;\\n&quot;);\n        return null;\n    };\n    executorService.submit(renderTask);\n}\nexecutorService.shutdown();\nlong start = System.currentTimeMillis();\nexecutorService.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);\nSystem.out.println(&quot;Took &quot; + ( System.currentTimeMillis() - start));\n</code></pre>\n<p>With numThreads set to 1, the program took 130 seconds and with 4 it took 36 seconds.  This is my macbook pro running Chrome, etc..</p>\n<p>So Java threads work in general (duh).  Here's what to look for in your application to see what's screwing up the parallelism:</p>\n<ul>\n<li>First off, does running the same code with threads = 1 actually run faster?  Try separating the number of jobs from the number of threads.  Does 1 thread running each of the 4 jobs serially really run faster?  Make sure you are comparing apples to apples.</li>\n<li>Although you seem to be doing a copy of the working data, maybe the threads are sharing a complex data structure so what you are seeing is <a href=\"https://en.wikipedia.org/wiki/Cache_coherence\" rel=\"nofollow noreferrer\">cache coherence</a> conflicts that is killing your performance.  I'd be surprised that it would take twice as long but I guess it's possible.</li>\n<li>As others have mentioned, be careful of <code>world.createCopy(...)</code> and other calls that aren't being run in parallel but may take longer than you think.  Same question with the final image generation.  Maybe adding some <code>println(...)</code> messages with timestamps around some of these calls to see if one is taking longer than you expect.</li>\n<li>Is there some way that the <code>getRay(...)</code> or other shared methods synchronize on common data?  Similar to the cache coherence question.</li>\n</ul>\n<p>Hope something in here helps.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701902084,"post_id":77616251,"comment_id":136833969,"body_markdown":"It *is* thread-safe, and it says so specifically in the [Javadoc](https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#random--).","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded/77616251#comment136833969_77616251","body":"It <i>is</i> thread-safe, and it says so specifically in the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#random--\" rel=\"nofollow noreferrer\">Javadoc</a>."},{"score":0,"post_type":"answer","creation_date":1701913617,"post_id":77616251,"comment_id":136835148,"body_markdown":"Thats weird because when I changed my code to use ThreadLocalRandom it fixed it. I literally didnt change any other part of my code.","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded/77616251#comment136835148_77616251","body":"Thats weird because when I changed my code to use ThreadLocalRandom it fixed it. I literally didnt change any other part of my code."},{"score":0,"post_type":"answer","creation_date":1701916851,"post_id":77616251,"comment_id":136835446,"body_markdown":"@user207421 It says this in the javadoc However, if many threads need to generate pseudorandom numbers at a great rate, it may reduce contention for each thread to have its own pseudorandom-number generator.","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded/77616251#comment136835446_77616251","body":"@user207421 It says this in the javadoc However, if many threads need to generate pseudorandom numbers at a great rate, it may reduce contention for each thread to have its own pseudorandom-number generator."}],"comment_count":3,"score":-1,"last_activity_date":1701896143,"creation_date":1701896143,"answer_id":77616251,"question_id":77573058,"body_markdown":"The issue turns out to be that Math.random() is not thread safe. I fixed it by replacing Math.random() with ThreadLocalRandom.current().nextDouble()","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded/77616251#77616251","title":"Java multithreading is performing worse than single threaded","body":"<p>The issue turns out to be that Math.random() is not thread safe. I fixed it by replacing Math.random() with ThreadLocalRandom.current().nextDouble()</p>\n"}],"comment_count":10,"is_answered":false,"view_count":157,"answer_count":2,"score":1,"last_activity_date":1701896143,"creation_date":1701276411,"last_edit_date":1701369199,"question_id":77573058,"body_markdown":"I have been translating the Ray Tracing in One Weekend guide into Java as a personal project and to get better at java. Obviously, Java is slower than C++, so I&#39;m trying to implement multi-threading to improve performance. However, with multi-threading, the code is running slower than it does with a single thread.\r\n\r\nI&#39;ve tried to ensure that each thread is independent of each other (tested via visualvm) so that they aren&#39;t waiting. \r\n[Thread Timeline](https://i.stack.imgur.com/d1kCT.png)\r\n\r\nI&#39;m not completely sure what to make of the results of sampling the memory. \r\n\r\n[Memory Heap Histogram](https://i.stack.imgur.com/bHhHS.png)\r\n\r\n[Per Thread Allocation](https://i.stack.imgur.com/Br3fQ.png)\r\n\r\n[VisualVM Overview](https://i.stack.imgur.com/f5XXZ.png)\r\n\r\nThe code below is the multi-threaded render function. Essentially, I render the whole image N times with samples/N samples where N is the number of threads. Then, the images are averaged into one final image. Lastly each pixel is printed (this occurs outside of the thread, in main). I have a slightly older version of the code (without the multi-threading) on github if you need extra context. [Java Raytracer](https://github.com/BobcatNoah/java-raytracer)\r\n\r\n```\r\npublic void multiThreadedRender(final HittableList world, int threads) {\r\n    initialize();\r\n    samplesPerPixel /= threads;\r\n    \r\n    System.out.print(&quot;P3\\n&quot; + imageWidth + &#39; &#39; + imageHeight + &quot;\\n255\\n&quot;);\r\n    Vec3[] finalImage = new Vec3[imageWidth * imageHeight];\r\n    for (int i = 0; i &lt; finalImage.length; i++) {\r\n        finalImage[i] = new Vec3();\r\n    }\r\n\r\n    ExecutorService executorService = Executors.newFixedThreadPool(threads);\r\n    List&lt;Future&lt;Vec3[]&gt;&gt; futures = new ArrayList&lt;&gt;();\r\n\r\n    for (int thread = 0; thread &lt; threads; thread++) {\r\n        HittableList worldCopy = world.createCopy();\r\n\r\n        Callable&lt;Vec3[]&gt; renderTask = () -&gt; {\r\n            Vec3[] partialImage = new Vec3[imageWidth * imageHeight];\r\n\r\n            for (int j = 0; j &lt; imageHeight; j++) {\r\n                //System.err.print(&quot;\\rScanlines remaining: &quot; + (imageHeight - j) + &#39; &#39;);\r\n                //System.err.flush();\r\n                for (int i = 0; i &lt; imageWidth; i++) {\r\n                    Vec3 pixelColor = new Vec3(0,0,0);\r\n                    Vec3 pixelCenter = pixel00Loc\r\n                    .plus(\r\n                        pixelDeltaU.multiply(i)\r\n                    ).plus(\r\n                        pixelDeltaV.multiply(j)  \r\n                    );\r\n                    for (int sample = 0; sample &lt; samplesPerPixel; sample++) {\r\n                        Ray r = getRay(i, j, pixelCenter);\r\n                        pixelColor.plusEquals(rayColor(r, maxDepth, worldCopy));\r\n                    }\r\n                    partialImage[j*imageWidth+i] = pixelColor;\r\n                }\r\n            }\r\n            System.err.print(&quot;\\rDone.                           \\n&quot;);\r\n            return partialImage;\r\n        };  \r\n        futures.add(executorService.submit(renderTask));            \r\n    }\r\n\r\n    executorService.shutdown();\r\n\r\n    try {\r\n        executorService.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);\r\n    } catch (InterruptedException e) {\r\n        // Handle interruption\r\n        e.printStackTrace();\r\n    }\r\n\r\n     for (Future&lt;Vec3[]&gt; future : futures) {\r\n        try {\r\n            Vec3[] partialImage = future.get();\r\n            for (int i = 0; i &lt; finalImage.length; i++) {\r\n                finalImage[i].plusEquals(partialImage[i]);\r\n            }\r\n        } catch (InterruptedException | ExecutionException e) {\r\n            // Handle exceptions\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    for (int i = 0; i &lt; finalImage.length; i++) {\r\n        System.out.print(Color.getColor(finalImage[i], samplesPerPixel * threads));\r\n    }\r\n}\r\n```\r\nLastly, at an image width of 400 pixels and samples per pixel at 128 in single threaded mode, the total render time is about 12 seconds. With multi-threading (run at 4 threads) it takes about 21 seconds. Run on a 16GB M1 Macbook Air.\r\n\r\nWhy is the multi-threaded code performing worse than the single thread code? How can I fix it?\r\n\r\nMultiprocessing works however and cut the render time in half when creating four processes.\r\n```\r\nimport java.io.File;\r\nimport java.io.IOException;\r\n\r\nclass Main {\r\n    public static void main(String[] args) {\r\n        long start = System.currentTimeMillis();\r\n        for (int i = 0; i &lt; 4; i++) {\r\n            ProcessBuilder processBuilder = new ProcessBuilder(&quot;java&quot;, &quot;-cp&quot;, &quot;Documents/Code/java ray tracer/&quot;, &quot;Main&quot;);\r\n            try {\r\n                processBuilder.redirectOutput(new File(String.format(&quot;image%d.ppm&quot;, i)));\r\n                Process process = processBuilder.start();\r\n                if (i == 3) {\r\n                    try {\r\n                        process.waitFor();\r\n                    } catch (InterruptedException e) {\r\n                        // TODO: handle exception\r\n                    }\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        System.out.println(&quot;Total Time (ms): &quot; + (System.currentTimeMillis() - start));\r\n    }\r\n}\r\n```\r\n","link":"https://stackoverflow.com/questions/77573058/java-multithreading-is-performing-worse-than-single-threaded","title":"Java multithreading is performing worse than single threaded","body":"<p>I have been translating the Ray Tracing in One Weekend guide into Java as a personal project and to get better at java. Obviously, Java is slower than C++, so I'm trying to implement multi-threading to improve performance. However, with multi-threading, the code is running slower than it does with a single thread.</p>\n<p>I've tried to ensure that each thread is independent of each other (tested via visualvm) so that they aren't waiting.\n<a href=\"https://i.stack.imgur.com/d1kCT.png\" rel=\"nofollow noreferrer\">Thread Timeline</a></p>\n<p>I'm not completely sure what to make of the results of sampling the memory.</p>\n<p><a href=\"https://i.stack.imgur.com/bHhHS.png\" rel=\"nofollow noreferrer\">Memory Heap Histogram</a></p>\n<p><a href=\"https://i.stack.imgur.com/Br3fQ.png\" rel=\"nofollow noreferrer\">Per Thread Allocation</a></p>\n<p><a href=\"https://i.stack.imgur.com/f5XXZ.png\" rel=\"nofollow noreferrer\">VisualVM Overview</a></p>\n<p>The code below is the multi-threaded render function. Essentially, I render the whole image N times with samples/N samples where N is the number of threads. Then, the images are averaged into one final image. Lastly each pixel is printed (this occurs outside of the thread, in main). I have a slightly older version of the code (without the multi-threading) on github if you need extra context. <a href=\"https://github.com/BobcatNoah/java-raytracer\" rel=\"nofollow noreferrer\">Java Raytracer</a></p>\n<pre><code>public void multiThreadedRender(final HittableList world, int threads) {\n    initialize();\n    samplesPerPixel /= threads;\n    \n    System.out.print(&quot;P3\\n&quot; + imageWidth + ' ' + imageHeight + &quot;\\n255\\n&quot;);\n    Vec3[] finalImage = new Vec3[imageWidth * imageHeight];\n    for (int i = 0; i &lt; finalImage.length; i++) {\n        finalImage[i] = new Vec3();\n    }\n\n    ExecutorService executorService = Executors.newFixedThreadPool(threads);\n    List&lt;Future&lt;Vec3[]&gt;&gt; futures = new ArrayList&lt;&gt;();\n\n    for (int thread = 0; thread &lt; threads; thread++) {\n        HittableList worldCopy = world.createCopy();\n\n        Callable&lt;Vec3[]&gt; renderTask = () -&gt; {\n            Vec3[] partialImage = new Vec3[imageWidth * imageHeight];\n\n            for (int j = 0; j &lt; imageHeight; j++) {\n                //System.err.print(&quot;\\rScanlines remaining: &quot; + (imageHeight - j) + ' ');\n                //System.err.flush();\n                for (int i = 0; i &lt; imageWidth; i++) {\n                    Vec3 pixelColor = new Vec3(0,0,0);\n                    Vec3 pixelCenter = pixel00Loc\n                    .plus(\n                        pixelDeltaU.multiply(i)\n                    ).plus(\n                        pixelDeltaV.multiply(j)  \n                    );\n                    for (int sample = 0; sample &lt; samplesPerPixel; sample++) {\n                        Ray r = getRay(i, j, pixelCenter);\n                        pixelColor.plusEquals(rayColor(r, maxDepth, worldCopy));\n                    }\n                    partialImage[j*imageWidth+i] = pixelColor;\n                }\n            }\n            System.err.print(&quot;\\rDone.                           \\n&quot;);\n            return partialImage;\n        };  \n        futures.add(executorService.submit(renderTask));            \n    }\n\n    executorService.shutdown();\n\n    try {\n        executorService.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);\n    } catch (InterruptedException e) {\n        // Handle interruption\n        e.printStackTrace();\n    }\n\n     for (Future&lt;Vec3[]&gt; future : futures) {\n        try {\n            Vec3[] partialImage = future.get();\n            for (int i = 0; i &lt; finalImage.length; i++) {\n                finalImage[i].plusEquals(partialImage[i]);\n            }\n        } catch (InterruptedException | ExecutionException e) {\n            // Handle exceptions\n            e.printStackTrace();\n        }\n    }\n\n    for (int i = 0; i &lt; finalImage.length; i++) {\n        System.out.print(Color.getColor(finalImage[i], samplesPerPixel * threads));\n    }\n}\n</code></pre>\n<p>Lastly, at an image width of 400 pixels and samples per pixel at 128 in single threaded mode, the total render time is about 12 seconds. With multi-threading (run at 4 threads) it takes about 21 seconds. Run on a 16GB M1 Macbook Air.</p>\n<p>Why is the multi-threaded code performing worse than the single thread code? How can I fix it?</p>\n<p>Multiprocessing works however and cut the render time in half when creating four processes.</p>\n<pre><code>import java.io.File;\nimport java.io.IOException;\n\nclass Main {\n    public static void main(String[] args) {\n        long start = System.currentTimeMillis();\n        for (int i = 0; i &lt; 4; i++) {\n            ProcessBuilder processBuilder = new ProcessBuilder(&quot;java&quot;, &quot;-cp&quot;, &quot;Documents/Code/java ray tracer/&quot;, &quot;Main&quot;);\n            try {\n                processBuilder.redirectOutput(new File(String.format(&quot;image%d.ppm&quot;, i)));\n                Process process = processBuilder.start();\n                if (i == 3) {\n                    try {\n                        process.waitFor();\n                    } catch (InterruptedException e) {\n                        // TODO: handle exception\n                    }\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n        System.out.println(&quot;Total Time (ms): &quot; + (System.currentTimeMillis() - start));\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-jms","solace"],"comments":[{"score":0,"post_type":"question","creation_date":1694485879,"post_id":77012385,"comment_id":135893740,"body_markdown":"I have tried this, I m not sure why but it is constantly in an inactive flow state, even after the replay is &quot;completed&quot; and there are no more events to be replayed","link":"https://stackoverflow.com/questions/77012385/how-can-i-check-if-solace-replay-has-completed-and-rejoined-the-live-data-stream#comment135893740_77012385","body":"I have tried this, I m not sure why but it is constantly in an inactive flow state, even after the replay is &quot;completed&quot; and there are no more events to be replayed"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701912220,"post_id":77615379,"comment_id":136835006,"body_markdown":"thanks for responding. In my case, as the data is being replayed from solace, it could be considered that the data is incomplete, and I should not be showing the data until replay has completed because it can have different implications if a user sees the incomplete data and thinks it is current data","link":"https://stackoverflow.com/questions/77012385/how-can-i-check-if-solace-replay-has-completed-and-rejoined-the-live-data-stream/77615379#comment136835006_77615379","body":"thanks for responding. In my case, as the data is being replayed from solace, it could be considered that the data is incomplete, and I should not be showing the data until replay has completed because it can have different implications if a user sees the incomplete data and thinks it is current data"},{"score":0,"post_type":"answer","creation_date":1702062647,"post_id":77615379,"comment_id":136855574,"body_markdown":"Thanks for sharing that. That makes sense to me. You need all the historical data before you can start allowing users to access it. If you have access to Solace support or an account team I would suggest making a feature request for adding an API event that notifies you of this.","link":"https://stackoverflow.com/questions/77012385/how-can-i-check-if-solace-replay-has-completed-and-rejoined-the-live-data-stream/77615379#comment136855574_77615379","body":"Thanks for sharing that. That makes sense to me. You need all the historical data before you can start allowing users to access it. If you have access to Solace support or an account team I would suggest making a feature request for adding an API event that notifies you of this."},{"score":0,"post_type":"answer","creation_date":1702280380,"post_id":77615379,"comment_id":136872372,"body_markdown":"Hmm, thats nice to know. Though I dont directly have access since I will have to go through my companys solace team and only if they think its a valid/urgent issue before they bring it up with the solace vendor. Not only that, we will have to have a good case to make a change to production solace versions assuming this feature is added to a new version. I ll see what I can do, thanks!","link":"https://stackoverflow.com/questions/77012385/how-can-i-check-if-solace-replay-has-completed-and-rejoined-the-live-data-stream/77615379#comment136872372_77615379","body":"Hmm, thats nice to know. Though I dont directly have access since I will have to go through my companys solace team and only if they think its a valid/urgent issue before they bring it up with the solace vendor. Not only that, we will have to have a good case to make a change to production solace versions assuming this feature is added to a new version. I ll see what I can do, thanks!"}],"comment_count":3,"score":0,"last_activity_date":1701895332,"last_edit_date":1701895332,"creation_date":1701885978,"answer_id":77615379,"question_id":77012385,"body_markdown":"There is currently no way of knowing this. Can you elaborate on why you would need to know? \r\n\r\nIf you absolutely needed to you can capture the time you start your consumer and check the msg timestamps as they come in. Note that timestamps will be set by the clients so you&#39;ll want to ensure clocks are synced if you go this route.  \r\n\r\n","link":"https://stackoverflow.com/questions/77012385/how-can-i-check-if-solace-replay-has-completed-and-rejoined-the-live-data-stream/77615379#77615379","title":"How can I check if Solace replay has completed and rejoined the live data stream","body":"<p>There is currently no way of knowing this. Can you elaborate on why you would need to know?</p>\n<p>If you absolutely needed to you can capture the time you start your consumer and check the msg timestamps as they come in. Note that timestamps will be set by the clients so you'll want to ensure clocks are synced if you go this route.</p>\n"}],"comment_count":1,"is_answered":false,"view_count":146,"answer_count":1,"score":4,"last_activity_date":1701895332,"creation_date":1693445855,"last_edit_date":1697598730,"question_id":77012385,"body_markdown":"In my [previous question][1], the codebase I am working on uses Solace&#39;s JCSMP API to trigger a replay, and uses the Spring JMS Listener annotated method to consume the replayed events. \r\n\r\nI would like to ask, how can I check either via JMS or the Solace JCSMP Api in my spring boot application whether my client-initiated replay has completed? \r\n\r\nI have read up from these following links that suggest that on replay completion it switches to live data stream but does not say anything about any flags or method to detect this switch.\r\n\r\n 1. https://docs.solace.com/Features/Replay/Message-Replay-Overview.htm#:~:text=During%20replay%2C%20new%20live%20messages,Broker%20Manager%2C%20or%20SEMP%20commands\r\n 2. https://docs.solace.com/Features/Replay/Msg-Replay-Playback.htm#:~:text=What%20happens%20to%20live%20messages%20received%20with%20a%20replaying%20endpoint%20destination%3F\r\n\r\nedit: I have gotten approval to switch from JMS to the JCSMP api fully. However, I am still unable to detect any switch to live data stream from replayed messages.\r\n\r\n  [1]: https://stackoverflow.com/q/76666897/21324690","link":"https://stackoverflow.com/questions/77012385/how-can-i-check-if-solace-replay-has-completed-and-rejoined-the-live-data-stream","title":"How can I check if Solace replay has completed and rejoined the live data stream","body":"<p>In my <a href=\"https://stackoverflow.com/q/76666897/21324690\">previous question</a>, the codebase I am working on uses Solace's JCSMP API to trigger a replay, and uses the Spring JMS Listener annotated method to consume the replayed events.</p>\n<p>I would like to ask, how can I check either via JMS or the Solace JCSMP Api in my spring boot application whether my client-initiated replay has completed?</p>\n<p>I have read up from these following links that suggest that on replay completion it switches to live data stream but does not say anything about any flags or method to detect this switch.</p>\n<ol>\n<li><a href=\"https://docs.solace.com/Features/Replay/Message-Replay-Overview.htm#:%7E:text=During%20replay%2C%20new%20live%20messages,Broker%20Manager%2C%20or%20SEMP%20commands\" rel=\"nofollow noreferrer\">https://docs.solace.com/Features/Replay/Message-Replay-Overview.htm#:~:text=During%20replay%2C%20new%20live%20messages,Broker%20Manager%2C%20or%20SEMP%20commands</a></li>\n<li><a href=\"https://docs.solace.com/Features/Replay/Msg-Replay-Playback.htm#:%7E:text=What%20happens%20to%20live%20messages%20received%20with%20a%20replaying%20endpoint%20destination%3F\" rel=\"nofollow noreferrer\">https://docs.solace.com/Features/Replay/Msg-Replay-Playback.htm#:~:text=What%20happens%20to%20live%20messages%20received%20with%20a%20replaying%20endpoint%20destination%3F</a></li>\n</ol>\n<p>edit: I have gotten approval to switch from JMS to the JCSMP api fully. However, I am still unable to detect any switch to live data stream from replayed messages.</p>\n"},{"tags":["java","swing","jtable"],"comments":[{"score":1,"post_type":"question","creation_date":1701429939,"post_id":77581966,"comment_id":136777422,"body_markdown":"Looking at your picture, the only column where a total makes sense is the Total column.  Edit your question to include a [mre] that displays a `JTable` with some made up quantities and prices.  It&#39;s visually easier to create a separate `JPanel` placed under the `JTable` to display the total row,  You would calculate the total separately from your table model.","link":"https://stackoverflow.com/questions/77581966/how-to-create-summing-row-in-jtable-java#comment136777422_77581966","body":"Looking at your picture, the only column where a total makes sense is the Total column.  Edit your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that displays a <code>JTable</code> with some made up quantities and prices.  It&#39;s visually easier to create a separate <code>JPanel</code> placed under the <code>JTable</code> to display the total row,  You would calculate the total separately from your table model."},{"score":0,"post_type":"question","creation_date":1701445610,"post_id":77581966,"comment_id":136780282,"body_markdown":"Images should be posted on this site so they can be viewed with the question.","link":"https://stackoverflow.com/questions/77581966/how-to-create-summing-row-in-jtable-java#comment136780282_77581966","body":"Images should be posted on this site so they can be viewed with the question."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701894899,"creation_date":1701894899,"answer_id":77616151,"question_id":77581966,"body_markdown":"First of all, you should avoid putting a summary row as the last row of the table, because you will be altering the data model. That will avoid the need of moving the row if you add/delete rows from the model.\r\nThat being said, you can easily put the totals in a JLabel or other component elsewhere.\r\nJust add a TableModelListener to catch changes in the model and recalculate the totals:\r\n\r\n    dataTable.getModel().addTableModelListener(new TableModelListener() {\r\n        @Override\r\n        public void tableChanged(TableModelEvent e) {\r\n            updateSummary();\r\n        }\r\n    });\r\n\r\n    private void updateSummary(){\r\n        Double sum = (double) 0;\r\n        for (int row = 0; row &lt; dataTable.getRowCount(); row++){\r\n            int rowModel = dataTable.convertRowIndexToModel(row);\r\n            // Make sure the cast is possible here, or convert the Object appropiately to Double\r\n            Double value = (Double) tblResults.getModel().getValueAt(rowModel, 5);\r\n            sum += value;\r\n        }\r\n        // Format the number appropiately here if you need\r\n        lblSummary.setText(sum.toString());\r\n    }\r\n\r\nThis method will work even if you have a RowFilter, because it works with all visible rows.\r\n\r\n  ","link":"https://stackoverflow.com/questions/77581966/how-to-create-summing-row-in-jtable-java/77616151#77616151","title":"How to create summing row in JTable Java","body":"<p>First of all, you should avoid putting a summary row as the last row of the table, because you will be altering the data model. That will avoid the need of moving the row if you add/delete rows from the model.\nThat being said, you can easily put the totals in a JLabel or other component elsewhere.\nJust add a TableModelListener to catch changes in the model and recalculate the totals:</p>\n<pre><code>dataTable.getModel().addTableModelListener(new TableModelListener() {\n    @Override\n    public void tableChanged(TableModelEvent e) {\n        updateSummary();\n    }\n});\n\nprivate void updateSummary(){\n    Double sum = (double) 0;\n    for (int row = 0; row &lt; dataTable.getRowCount(); row++){\n        int rowModel = dataTable.convertRowIndexToModel(row);\n        // Make sure the cast is possible here, or convert the Object appropiately to Double\n        Double value = (Double) tblResults.getModel().getValueAt(rowModel, 5);\n        sum += value;\n    }\n    // Format the number appropiately here if you need\n    lblSummary.setText(sum.toString());\n}\n</code></pre>\n<p>This method will work even if you have a RowFilter, because it works with all visible rows.</p>\n"}],"comment_count":2,"is_answered":false,"view_count":56,"answer_count":1,"score":0,"last_activity_date":1701894899,"creation_date":1701381991,"last_edit_date":1701429586,"question_id":77581966,"body_markdown":"[enter image description here][1]I have stack somewhere\r\n\r\nHelp me creating row calculating some of values in column no. 5\r\n\r\nI use the model below but I failed to create a row that summing up the data in column number five, please if someone know how to, help me. \r\n\r\nI need too when data is trigger from button the row increase in number of rows as well as the last row for the total \r\n\r\nThank you in advance.\r\n\r\ni\r\n\r\n```\r\nsetModel ( new DefaultTableModel () {\r\n            private static final long serialVersionUID = 1L;\r\n            private final String[] columnNames = { &quot;&quot; , &quot;&quot; , &quot;&quot; , &quot;&quot; , &quot;&quot; , &quot;&quot; };\r\n\r\n            @Override\r\n            public Class&lt;?&gt; getColumnClass ( int columnIndex ) {\r\n                switch ( columnIndex ) {\r\n                    case 3:\r\n                    case 4:\r\n                    case 5:\r\n                        return Double.class;\r\n                }\r\n                return super.getColumnClass ( columnIndex );\r\n            }\r\n\r\n            @Override\r\n            public Object getValueAt ( int row ,\r\n                    int column ) {\r\n                if ( column == 5 ) {\r\n                    Double i = ( Double ) getValueAt ( row ,\r\n                            3 );\r\n                    Double d = ( Double ) getValueAt ( row ,\r\n                            4 );\r\n\r\n                    if ( i != null &amp;&amp; d != null ) {\r\n                        return i * d;\r\n                    } else {\r\n\r\n                    }\r\n                }\r\n                return super.getValueAt ( row ,\r\n                        column );\r\n            }\r\n\r\n            @Override\r\n            public boolean isCellEditable ( int row ,\r\n                    int column ) {\r\n                return column == 1 || column == 2 || column == 3 || column == 4;\r\n\r\n            }\r\n\r\n            @Override\r\n            public void setValueAt ( Object aValue ,\r\n                    int row ,\r\n                    int column ) {\r\n                super.setValueAt ( aValue ,\r\n                        row ,\r\n                        column );\r\n                fireTableCellUpdated ( row ,\r\n                        5 );\r\n            }\r\n\r\n            @Override\r\n            public String getColumnName ( int column ) {\r\n                switch ( column ) {\r\n                    case 0:\r\n                        return &quot;S/N&quot;;\r\n                    case 1:\r\n                        return &quot;Product&quot;;\r\n                    case 2:\r\n                        return &quot;UoM&quot;;\r\n                    case 3:\r\n                        return &quot;Quantity&quot;;\r\n                    case 4:\r\n                        return &quot;Price&quot;;\r\n                    case 5:\r\n                        return &quot;Total&quot;;\r\n\r\n                }\r\n                return super.getColumnName ( column );\r\n            }\r\n\r\n            @Override\r\n            public int getColumnCount () {\r\n                return columnNames.length;\r\n            }\r\n\r\n        } );\r\n\r\n        setTable ( new JTable ( getModel () ) );\r\n        getTable ().\r\n                setFillsViewportHeight ( true );\r\n        getTable ().\r\n                addMouseListener ( new MouseAdapter () {\r\n\r\n                    @Override\r\n                    public void mouseClicked ( MouseEvent e ) {\r\n                        if ( e.getClickCount () == 1 ) {\r\n                            if ( getTable ().\r\n                                    rowAtPoint ( e.getPoint () ) &lt; 0 ) {\r\n                                getModel ().\r\n                                        addRow ( new Vector () );\r\n                                model.setValueAt ( getLine () + 1 ,\r\n                                        getLine () ,\r\n                                        0 );\r\n                                setLine ( getLine () + 1 );\r\n\r\n                            }\r\n                        }\r\n                    }\r\n                } );\r\n\r\n        tcm = table.getColumnModel ();\r\n        tc1 = tcm.getColumn ( 0 );\r\n        tc2 = tcm.getColumn ( 2 );\r\n        tc1.setMaxWidth ( 100 );\r\n        tc2.setMaxWidth ( 100 );\r\n\r\n        getTable ().\r\n                setRowHeight ( getTable ().\r\n                        getRowHeight () + 15 );\r\n        getTable ().\r\n                getTableHeader ().\r\n                setFont ( new Font ( &quot;Arial&quot; ,\r\n                        Font.BOLD ,\r\n                        18 ) );\r\n        table.setFont ( new Font ( &quot;Arial&quot; ,\r\n                Font.PLAIN ,\r\n                18 ) );\r\n        getTable ().\r\n                setGridColor ( new java.awt.Color ( 150 ,\r\n                        150 ,\r\n                        150 ) );\r\n        table.setForeground ( new java.awt.Color ( 0 ,\r\n                0 ,\r\n                0 ) );\r\n        table.setBackground ( Color.WHITE );\r\n        table.getTableHeader ().\r\n                setBackground ( new java.awt.Color ( 60 ,\r\n                        130 ,\r\n                        160 ) );\r\n        table.getTableHeader ().\r\n                setForeground ( new java.awt.Color ( 255 ,\r\n                        255 ,\r\n                        255 ) );\r\n\r\n        getTd ().\r\n                setBackground ( new java.awt.Color ( 60 ,\r\n                        130 ,\r\n                        160 ) );\r\n        getTd ().\r\n                setForeground ( Color.WHITE );\r\n        getTd ().\r\n                setFont ( new Font ( &quot;Arial&quot; ,\r\n                        Font.PLAIN ,\r\n                        20 ) );\r\n\r\n        getBtn1 ().\r\n                setBackground ( new java.awt.Color ( 60 ,\r\n                        130 ,\r\n                        160 ) );\r\n        getBtn1 ().\r\n                setFont ( new Font ( &quot;Arial&quot; ,\r\n                        Font.BOLD ,\r\n                        20 ) );\r\n        getBtn1 ().\r\n                setForeground ( new java.awt.Color ( 250 ,\r\n                        250 ,\r\n                        250 ) );\r\n        getBtn2 ().\r\n                setBackground ( new java.awt.Color ( 60 ,\r\n                        130 ,\r\n                        160 ) );\r\n        getBtn2 ().\r\n                setFont ( new Font ( &quot;Arial&quot; ,\r\n                        Font.BOLD ,\r\n                        20 ) );\r\n        getBtn2 ().\r\n                setForeground ( new java.awt.Color ( 250 ,\r\n                        250 ,\r\n                        250 ) );\r\n        getBtn4 ().\r\n                setBackground ( new java.awt.Color ( 60 ,\r\n                        130 ,\r\n                        160 ) );\r\n        getBtn4 ().\r\n                setFont ( new Font ( &quot;Arial&quot; ,\r\n                        Font.BOLD ,\r\n                        20 ) );\r\n        getBtn4 ().\r\n                setForeground ( new java.awt.Color ( 250 ,\r\n                        250 ,\r\n                        250 ) );\r\n        getBtn5 ().\r\n                setBackground ( new java.awt.Color ( 60 ,\r\n                        130 ,\r\n                        160 ) );\r\n        getBtn5 ().\r\n                setFont ( new Font ( &quot;Arial&quot; ,\r\n                        Font.BOLD ,\r\n                        20 ) );\r\n        getBtn5 ().\r\n                setForeground ( new java.awt.Color ( 250 ,\r\n                        250 ,\r\n                        250 ) );\r\n\r\n        getBtn4 ().\r\n                addActionListener ( ( ActionEvent e ) -&gt; {\r\n                    saveTable ();\r\n                } );\r\n        getBtn1 ().\r\n                addActionListener ( ( ActionEvent e ) -&gt; {\r\n                    loadTable ();\r\n                } );\r\n        getBtn2 ().\r\n                addActionListener ( ( ActionEvent e ) -&gt; {\r\n                    getModel ().\r\n                            addRow ( new Vector () );\r\n                    double total = 0;\r\n                    model.setValueAt ( total ,\r\n                            model.getRowCount () - 1 ,\r\n                            5 );\r\n                    model.setValueAt ( getLine () + 1 ,\r\n                            getLine () ,\r\n                            0 );\r\n                    setLine ( getLine () + 1 );\r\n                } );\r\n\r\n        getBtn5 ().\r\n                addActionListener ( new ActionListener () {\r\n                    @Override\r\n                    public void actionPerformed ( ActionEvent e ) {\r\n                        MessageFormat header = new MessageFormat ( &quot;INVOICE&quot; );\r\n                        MessageFormat footer = new MessageFormat ( &quot;-{0}-\\n&quot; + new Date () );\r\n                        try {\r\n                            table.print ( JTable.PrintMode.FIT_WIDTH ,\r\n                                    header ,\r\n                                    footer );\r\n                        } catch ( Exception ae ) {\r\n                            System.err.println ( &quot;Error printing: &quot; + ae.getMessage () );\r\n\r\n                        }\r\n                    }\r\n                } );\r\n\r\n        getJb ().\r\n                add ( getBtn5 () );\r\n        getJb ().\r\n                add ( getBtn1 () );\r\n        getJb ().\r\n                add ( getBtn4 () );\r\n        getJb ().\r\n                add ( getBtn2 () );\r\n\r\n        setScrollPane2 ( new JScrollPane ( getTable () ) );\r\n\r\n        frame.add ( getScrollPane2 () ,\r\n                BorderLayout.CENTER );\r\n        frame.add ( getTd () ,\r\n                BorderLayout.NORTH );\r\n        frame.add ( getJb () ,\r\n                BorderLayout.SOUTH );\r\n        frame.setDefaultCloseOperation ( EXIT_ON_CLOSE );\r\n        frame.pack ();\r\n        frame.setSize ( 1300 ,\r\n                900 );\r\n        frame.setLocationRelativeTo ( null );\r\n        frame.setVisible ( true );\r\n\r\n  The image can be viewed here \r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oRD57.png","link":"https://stackoverflow.com/questions/77581966/how-to-create-summing-row-in-jtable-java","title":"How to create summing row in JTable Java","body":"<p><a href=\"https://i.stack.imgur.com/oRD57.png\" rel=\"nofollow noreferrer\">enter image description here</a>I have stack somewhere</p>\n<p>Help me creating row calculating some of values in column no. 5</p>\n<p>I use the model below but I failed to create a row that summing up the data in column number five, please if someone know how to, help me.</p>\n<p>I need too when data is trigger from button the row increase in number of rows as well as the last row for the total</p>\n<p>Thank you in advance.</p>\n<p>i</p>\n<pre><code>setModel ( new DefaultTableModel () {\n            private static final long serialVersionUID = 1L;\n            private final String[] columnNames = { &quot;&quot; , &quot;&quot; , &quot;&quot; , &quot;&quot; , &quot;&quot; , &quot;&quot; };\n\n            @Override\n            public Class&lt;?&gt; getColumnClass ( int columnIndex ) {\n                switch ( columnIndex ) {\n                    case 3:\n                    case 4:\n                    case 5:\n                        return Double.class;\n                }\n                return super.getColumnClass ( columnIndex );\n            }\n\n            @Override\n            public Object getValueAt ( int row ,\n                    int column ) {\n                if ( column == 5 ) {\n                    Double i = ( Double ) getValueAt ( row ,\n                            3 );\n                    Double d = ( Double ) getValueAt ( row ,\n                            4 );\n\n                    if ( i != null &amp;&amp; d != null ) {\n                        return i * d;\n                    } else {\n\n                    }\n                }\n                return super.getValueAt ( row ,\n                        column );\n            }\n\n            @Override\n            public boolean isCellEditable ( int row ,\n                    int column ) {\n                return column == 1 || column == 2 || column == 3 || column == 4;\n\n            }\n\n            @Override\n            public void setValueAt ( Object aValue ,\n                    int row ,\n                    int column ) {\n                super.setValueAt ( aValue ,\n                        row ,\n                        column );\n                fireTableCellUpdated ( row ,\n                        5 );\n            }\n\n            @Override\n            public String getColumnName ( int column ) {\n                switch ( column ) {\n                    case 0:\n                        return &quot;S/N&quot;;\n                    case 1:\n                        return &quot;Product&quot;;\n                    case 2:\n                        return &quot;UoM&quot;;\n                    case 3:\n                        return &quot;Quantity&quot;;\n                    case 4:\n                        return &quot;Price&quot;;\n                    case 5:\n                        return &quot;Total&quot;;\n\n                }\n                return super.getColumnName ( column );\n            }\n\n            @Override\n            public int getColumnCount () {\n                return columnNames.length;\n            }\n\n        } );\n\n        setTable ( new JTable ( getModel () ) );\n        getTable ().\n                setFillsViewportHeight ( true );\n        getTable ().\n                addMouseListener ( new MouseAdapter () {\n\n                    @Override\n                    public void mouseClicked ( MouseEvent e ) {\n                        if ( e.getClickCount () == 1 ) {\n                            if ( getTable ().\n                                    rowAtPoint ( e.getPoint () ) &lt; 0 ) {\n                                getModel ().\n                                        addRow ( new Vector () );\n                                model.setValueAt ( getLine () + 1 ,\n                                        getLine () ,\n                                        0 );\n                                setLine ( getLine () + 1 );\n\n                            }\n                        }\n                    }\n                } );\n\n        tcm = table.getColumnModel ();\n        tc1 = tcm.getColumn ( 0 );\n        tc2 = tcm.getColumn ( 2 );\n        tc1.setMaxWidth ( 100 );\n        tc2.setMaxWidth ( 100 );\n\n        getTable ().\n                setRowHeight ( getTable ().\n                        getRowHeight () + 15 );\n        getTable ().\n                getTableHeader ().\n                setFont ( new Font ( &quot;Arial&quot; ,\n                        Font.BOLD ,\n                        18 ) );\n        table.setFont ( new Font ( &quot;Arial&quot; ,\n                Font.PLAIN ,\n                18 ) );\n        getTable ().\n                setGridColor ( new java.awt.Color ( 150 ,\n                        150 ,\n                        150 ) );\n        table.setForeground ( new java.awt.Color ( 0 ,\n                0 ,\n                0 ) );\n        table.setBackground ( Color.WHITE );\n        table.getTableHeader ().\n                setBackground ( new java.awt.Color ( 60 ,\n                        130 ,\n                        160 ) );\n        table.getTableHeader ().\n                setForeground ( new java.awt.Color ( 255 ,\n                        255 ,\n                        255 ) );\n\n        getTd ().\n                setBackground ( new java.awt.Color ( 60 ,\n                        130 ,\n                        160 ) );\n        getTd ().\n                setForeground ( Color.WHITE );\n        getTd ().\n                setFont ( new Font ( &quot;Arial&quot; ,\n                        Font.PLAIN ,\n                        20 ) );\n\n        getBtn1 ().\n                setBackground ( new java.awt.Color ( 60 ,\n                        130 ,\n                        160 ) );\n        getBtn1 ().\n                setFont ( new Font ( &quot;Arial&quot; ,\n                        Font.BOLD ,\n                        20 ) );\n        getBtn1 ().\n                setForeground ( new java.awt.Color ( 250 ,\n                        250 ,\n                        250 ) );\n        getBtn2 ().\n                setBackground ( new java.awt.Color ( 60 ,\n                        130 ,\n                        160 ) );\n        getBtn2 ().\n                setFont ( new Font ( &quot;Arial&quot; ,\n                        Font.BOLD ,\n                        20 ) );\n        getBtn2 ().\n                setForeground ( new java.awt.Color ( 250 ,\n                        250 ,\n                        250 ) );\n        getBtn4 ().\n                setBackground ( new java.awt.Color ( 60 ,\n                        130 ,\n                        160 ) );\n        getBtn4 ().\n                setFont ( new Font ( &quot;Arial&quot; ,\n                        Font.BOLD ,\n                        20 ) );\n        getBtn4 ().\n                setForeground ( new java.awt.Color ( 250 ,\n                        250 ,\n                        250 ) );\n        getBtn5 ().\n                setBackground ( new java.awt.Color ( 60 ,\n                        130 ,\n                        160 ) );\n        getBtn5 ().\n                setFont ( new Font ( &quot;Arial&quot; ,\n                        Font.BOLD ,\n                        20 ) );\n        getBtn5 ().\n                setForeground ( new java.awt.Color ( 250 ,\n                        250 ,\n                        250 ) );\n\n        getBtn4 ().\n                addActionListener ( ( ActionEvent e ) -&gt; {\n                    saveTable ();\n                } );\n        getBtn1 ().\n                addActionListener ( ( ActionEvent e ) -&gt; {\n                    loadTable ();\n                } );\n        getBtn2 ().\n                addActionListener ( ( ActionEvent e ) -&gt; {\n                    getModel ().\n                            addRow ( new Vector () );\n                    double total = 0;\n                    model.setValueAt ( total ,\n                            model.getRowCount () - 1 ,\n                            5 );\n                    model.setValueAt ( getLine () + 1 ,\n                            getLine () ,\n                            0 );\n                    setLine ( getLine () + 1 );\n                } );\n\n        getBtn5 ().\n                addActionListener ( new ActionListener () {\n                    @Override\n                    public void actionPerformed ( ActionEvent e ) {\n                        MessageFormat header = new MessageFormat ( &quot;INVOICE&quot; );\n                        MessageFormat footer = new MessageFormat ( &quot;-{0}-\\n&quot; + new Date () );\n                        try {\n                            table.print ( JTable.PrintMode.FIT_WIDTH ,\n                                    header ,\n                                    footer );\n                        } catch ( Exception ae ) {\n                            System.err.println ( &quot;Error printing: &quot; + ae.getMessage () );\n\n                        }\n                    }\n                } );\n\n        getJb ().\n                add ( getBtn5 () );\n        getJb ().\n                add ( getBtn1 () );\n        getJb ().\n                add ( getBtn4 () );\n        getJb ().\n                add ( getBtn2 () );\n\n        setScrollPane2 ( new JScrollPane ( getTable () ) );\n\n        frame.add ( getScrollPane2 () ,\n                BorderLayout.CENTER );\n        frame.add ( getTd () ,\n                BorderLayout.NORTH );\n        frame.add ( getJb () ,\n                BorderLayout.SOUTH );\n        frame.setDefaultCloseOperation ( EXIT_ON_CLOSE );\n        frame.pack ();\n        frame.setSize ( 1300 ,\n                900 );\n        frame.setLocationRelativeTo ( null );\n        frame.setVisible ( true );\n\n  The image can be viewed here \n</code></pre>\n"},{"tags":["java","rx-java","vert.x"],"comments":[{"score":0,"post_type":"question","creation_date":1701878796,"post_id":77571436,"comment_id":136830042,"body_markdown":"There should be an [alternative method](https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/Vertx.java#L587) generated, that use a `Callable` param. If it&#39;s not present, it&#39;s a bug.","link":"https://stackoverflow.com/questions/77571436/what-should-i-use-instead-of-the-deprecated-vertexrxexecuteblocking-starting#comment136830042_77571436","body":"There should be an <a href=\"https://github.com/eclipse-vertx/vert.x/blob/master/src/main/java/io/vertx/core/Vertx.java#L587\" rel=\"nofollow noreferrer\">alternative method</a> generated, that use a <code>Callable</code> param. If it&#39;s not present, it&#39;s a bug."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701266014,"last_edit_date":1701266014,"creation_date":1701265324,"answer_id":77571669,"question_id":77571436,"body_markdown":"## This isn&#39;t the answer I&#39;m looking for, but is an answer nonetheless\r\n\r\nI imagine that there must somewhere be a function that turns a `Future` to a `Maybe` or even an `Observable` straight away. That&#39;s what I&#39;m looking for!\r\n\r\n---\r\n\r\n## The option I figured out\r\n\r\nHere&#39;s an option, although I&#39;m not sure it is the most appropriate one:\r\n\r\nWhere you would get a Vert.x `Future` from some computation-intensive activity (such as `Thread#sleep` &#128521;) from a method defined as follows:\r\n```java\r\nprivate static final Vertx VERTX = Vertx.vertx();\r\n\r\nprivate static Future&lt;String&gt; compute() {\r\n  return VERTX.executeBlocking(() -&gt; {\r\n    Thread.sleep(1000);\r\n    return &quot;Done.&quot;;\r\n  });\r\n}\r\n```\r\n\r\nYou could get a `Maybe` like so:\r\n```java\r\nfinal Maybe&lt;String&gt; maybe = MaybeHelper\r\n  .toMaybe(handler -&gt; compute().onComplete(handler));\r\n```\r\n\r\n---\r\n\r\nAs an additional note, I&#39;d like to point out that the `Maybe`-to-`Observable` conversion seems to be trivially resolved using `Maybe#toObservable`, thus allowing the following way to obtain an `Observable` out of `Vertx#executeBlocking`:\r\n\r\n```java\r\nfinal Observable&lt;String&gt; observable = MaybeHelper\r\n  .toMaybe(handler -&gt; compute().onComplete(handler))\r\n  .toObservable();\r\n```\r\n\r\n---\r\n\r\nHere&#39;s a small helper class that may assist you in converting a **Vert.x `Future`** to an **RxJava `Observable`** (which I think should exist in the `vertx-rx-java3` package but I can&#39;t locate):\r\n\r\n```java\r\nimport io.reactivex.rxjava3.core.Observable;\r\nimport io.vertx.core.Future;\r\nimport io.vertx.rxjava3.MaybeHelper;\r\n\r\npublic class Observables {\r\n\r\n  public static &lt;T&gt; Observable&lt;T&gt; from(final Future&lt;T&gt; future) {\r\n    return MaybeHelper.&lt;T&gt;toMaybe(future::onComplete).toObservable();\r\n  }\r\n\r\n}\r\n\r\n```","link":"https://stackoverflow.com/questions/77571436/what-should-i-use-instead-of-the-deprecated-vertexrxexecuteblocking-starting/77571669#77571669","title":"What should I use instead of the deprecated `Vertex#rxExecuteBlocking`, starting with Vert.x 4.5?","body":"<h2>This isn't the answer I'm looking for, but is an answer nonetheless</h2>\n<p>I imagine that there must somewhere be a function that turns a <code>Future</code> to a <code>Maybe</code> or even an <code>Observable</code> straight away. That's what I'm looking for!</p>\n<hr />\n<h2>The option I figured out</h2>\n<p>Here's an option, although I'm not sure it is the most appropriate one:</p>\n<p>Where you would get a Vert.x <code>Future</code> from some computation-intensive activity (such as <code>Thread#sleep</code> ) from a method defined as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final Vertx VERTX = Vertx.vertx();\n\nprivate static Future&lt;String&gt; compute() {\n  return VERTX.executeBlocking(() -&gt; {\n    Thread.sleep(1000);\n    return &quot;Done.&quot;;\n  });\n}\n</code></pre>\n<p>You could get a <code>Maybe</code> like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Maybe&lt;String&gt; maybe = MaybeHelper\n  .toMaybe(handler -&gt; compute().onComplete(handler));\n</code></pre>\n<hr />\n<p>As an additional note, I'd like to point out that the <code>Maybe</code>-to-<code>Observable</code> conversion seems to be trivially resolved using <code>Maybe#toObservable</code>, thus allowing the following way to obtain an <code>Observable</code> out of <code>Vertx#executeBlocking</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Observable&lt;String&gt; observable = MaybeHelper\n  .toMaybe(handler -&gt; compute().onComplete(handler))\n  .toObservable();\n</code></pre>\n<hr />\n<p>Here's a small helper class that may assist you in converting a <strong>Vert.x <code>Future</code></strong> to an <strong>RxJava <code>Observable</code></strong> (which I think should exist in the <code>vertx-rx-java3</code> package but I can't locate):</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.reactivex.rxjava3.core.Observable;\nimport io.vertx.core.Future;\nimport io.vertx.rxjava3.MaybeHelper;\n\npublic class Observables {\n\n  public static &lt;T&gt; Observable&lt;T&gt; from(final Future&lt;T&gt; future) {\n    return MaybeHelper.&lt;T&gt;toMaybe(future::onComplete).toObservable();\n  }\n\n}\n\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1701894824,"creation_date":1701894824,"answer_id":77616148,"question_id":77571436,"body_markdown":"This is a [bug][1] that will be fixed in Vert.x 4.5.1\r\n\r\n\r\n  [1]: https://github.com/vert-x3/vertx-rx/issues/302","link":"https://stackoverflow.com/questions/77571436/what-should-i-use-instead-of-the-deprecated-vertexrxexecuteblocking-starting/77616148#77616148","title":"What should I use instead of the deprecated `Vertex#rxExecuteBlocking`, starting with Vert.x 4.5?","body":"<p>This is a <a href=\"https://github.com/vert-x3/vertx-rx/issues/302\" rel=\"nofollow noreferrer\">bug</a> that will be fixed in Vert.x 4.5.1</p>\n"}],"comment_count":1,"is_answered":true,"view_count":44,"answer_count":2,"score":0,"last_activity_date":1701894824,"creation_date":1701263391,"last_edit_date":1701265341,"question_id":77571436,"body_markdown":"Starting with **Vert.x 4.5.0**, `Vertx#rxExecuteBlocking` (and the signatures of `executeBlocking` that return a `Maybe`) [are deprecated](https://vertx.io/docs/apidocs/deprecated-list.html).\r\n\r\nHow should I go from a **Vert.x `Future`** (with `Vertx#executeBlocking`) to an **RxJava `Maybe`** (or an `Observable`)?","link":"https://stackoverflow.com/questions/77571436/what-should-i-use-instead-of-the-deprecated-vertexrxexecuteblocking-starting","title":"What should I use instead of the deprecated `Vertex#rxExecuteBlocking`, starting with Vert.x 4.5?","body":"<p>Starting with <strong>Vert.x 4.5.0</strong>, <code>Vertx#rxExecuteBlocking</code> (and the signatures of <code>executeBlocking</code> that return a <code>Maybe</code>) <a href=\"https://vertx.io/docs/apidocs/deprecated-list.html\" rel=\"nofollow noreferrer\">are deprecated</a>.</p>\n<p>How should I go from a <strong>Vert.x <code>Future</code></strong> (with <code>Vertx#executeBlocking</code>) to an <strong>RxJava <code>Maybe</code></strong> (or an <code>Observable</code>)?</p>\n"},{"tags":["java","spring","spring-boot","java-8","spring-initializr"],"comments":[{"score":1,"post_type":"question","creation_date":1701254831,"post_id":77570193,"comment_id":136752061,"body_markdown":"The project is open source (https://github.com/spring-io/initializr) and there is even documentation how you can configure your own instance","link":"https://stackoverflow.com/questions/77570193/alternative-website-for-spring-initializr-for-java-8-start-spring-io-now-only#comment136752061_77570193","body":"The project is open source (<a href=\"https://github.com/spring-io/initializr\" rel=\"nofollow noreferrer\">github.com/spring-io/initializr</a>) and there is even documentation how you can configure your own instance"},{"score":1,"post_type":"question","creation_date":1701254985,"post_id":77570193,"comment_id":136752082,"body_markdown":"Just write the pom yourself. `start.spring.io` only lists the supported versions of Spring Boot, which are 3.x which require java17. Anything lower isn&#39;t supported anymore (only commercially). You can launch the application yourself and reintroduce this feature or, as mentioned in the beginning, just write the `pom.xml` yourself. That being said it is really time to upgrade as Java8 doesn&#39;t have any support from Oracle anymore (except Commercially) so it is really time to move on.","link":"https://stackoverflow.com/questions/77570193/alternative-website-for-spring-initializr-for-java-8-start-spring-io-now-only#comment136752082_77570193","body":"Just write the pom yourself. <code>start.spring.io</code> only lists the supported versions of Spring Boot, which are 3.x which require java17. Anything lower isn&#39;t supported anymore (only commercially). You can launch the application yourself and reintroduce this feature or, as mentioned in the beginning, just write the <code>pom.xml</code> yourself. That being said it is really time to upgrade as Java8 doesn&#39;t have any support from Oracle anymore (except Commercially) so it is really time to move on."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701881651,"creation_date":1701881651,"answer_id":77614939,"question_id":77570193,"body_markdown":"I&#39;m facing the same problem, what you can do is go to your pom.xml file, change the spring version on your parent tag (I used the 2.5.9 version). Also change your java.version tag to &quot;8&quot; in the properties tag. Then you can click the maven tab on the right (if you use IntelliJ) and click the Reload All Maven Project. What it do is that it will reconfigure all the dependencies based on the version and when you compile, the system will recompile it based on the new changes you have made. Hope this help.","link":"https://stackoverflow.com/questions/77570193/alternative-website-for-spring-initializr-for-java-8-start-spring-io-now-only/77614939#77614939","title":"Alternative website for Spring Initializr for java 8? (start.spring.io now only allow Java 17+)","body":"<p>I'm facing the same problem, what you can do is go to your pom.xml file, change the spring version on your parent tag (I used the 2.5.9 version). Also change your java.version tag to &quot;8&quot; in the properties tag. Then you can click the maven tab on the right (if you use IntelliJ) and click the Reload All Maven Project. What it do is that it will reconfigure all the dependencies based on the version and when you compile, the system will recompile it based on the new changes you have made. Hope this help.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1702461376,"post_id":77615021,"comment_id":136898365,"body_markdown":"@HoangMinhQuangFX15045 what you also could try: create the project for Spring Boot 3.1.x and change the Java version in the generated files (pom.xml since you selected Maven in your screenshot)","link":"https://stackoverflow.com/questions/77570193/alternative-website-for-spring-initializr-for-java-8-start-spring-io-now-only/77615021#comment136898365_77615021","body":"@HoangMinhQuangFX15045 what you also could try: create the project for Spring Boot 3.1.x and change the Java version in the generated files (pom.xml since you selected Maven in your screenshot)"}],"comment_count":1,"score":1,"last_activity_date":1701882953,"last_edit_date":1701882953,"creation_date":1701882562,"answer_id":77615021,"question_id":77570193,"body_markdown":"As you can see on the [Spring Boot Roadmap][1], OSS support for Spring Boot &lt; 3.1 ended a few days ago (2023-11-24).\r\n\r\n[![Screenshot Spring Boot Roadmap][2]][1]\r\n\r\nIf you do plan to continue using Java 8, you should definitely think about buying commercial support for Spring Boot, otherwise you will not receive any security updates for that. On the long term it might get cheaper to migrate to a more modern Java version - 21 LTS is probably going to be supported for a longer time.\r\n\r\nPlease note also that in [version 3.2.0-RC1][3] support for Java 8 was removed. 3.2.0 was released one day before the OSS support end of 2.7.x and 3.0.x\r\n\r\n\r\n  [1]: https://spring.io/projects/spring-boot#support\r\n  [2]: https://i.stack.imgur.com/wwKtc.png\r\n  [3]: https://github.com/spring-projects/spring-boot/releases/tag/v3.2.0-RC1","link":"https://stackoverflow.com/questions/77570193/alternative-website-for-spring-initializr-for-java-8-start-spring-io-now-only/77615021#77615021","title":"Alternative website for Spring Initializr for java 8? (start.spring.io now only allow Java 17+)","body":"<p>As you can see on the <a href=\"https://spring.io/projects/spring-boot#support\" rel=\"nofollow noreferrer\">Spring Boot Roadmap</a>, OSS support for Spring Boot &lt; 3.1 ended a few days ago (2023-11-24).</p>\n<p><a href=\"https://spring.io/projects/spring-boot#support\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wwKtc.png\" alt=\"Screenshot Spring Boot Roadmap\" /></a></p>\n<p>If you do plan to continue using Java 8, you should definitely think about buying commercial support for Spring Boot, otherwise you will not receive any security updates for that. On the long term it might get cheaper to migrate to a more modern Java version - 21 LTS is probably going to be supported for a longer time.</p>\n<p>Please note also that in <a href=\"https://github.com/spring-projects/spring-boot/releases/tag/v3.2.0-RC1\" rel=\"nofollow noreferrer\">version 3.2.0-RC1</a> support for Java 8 was removed. 3.2.0 was released one day before the OSS support end of 2.7.x and 3.0.x</p>\n"}],"comment_count":2,"is_answered":true,"view_count":784,"answer_count":2,"score":-1,"last_activity_date":1701882953,"creation_date":1701252492,"question_id":77570193,"body_markdown":"I&#39;m trying to develop a Spring Boot App. I want to start with **https://start.spring.io/** but now it only supports **Java17+** (it used to support Java8 years ago I think). \r\n\r\n[![spring initializr][1]][1]\r\n\r\n\r\nMy company is using **Java8** and it can&#39;t be changed, Is there any other website, or is there any way to access an older version of this website, so that I can choose **Java8** for Spring Boot Project instead?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7Fytq.png","link":"https://stackoverflow.com/questions/77570193/alternative-website-for-spring-initializr-for-java-8-start-spring-io-now-only","title":"Alternative website for Spring Initializr for java 8? (start.spring.io now only allow Java 17+)","body":"<p>I'm trying to develop a Spring Boot App. I want to start with <strong><a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">https://start.spring.io/</a></strong> but now it only supports <strong>Java17+</strong> (it used to support Java8 years ago I think).</p>\n<p><a href=\"https://i.stack.imgur.com/7Fytq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Fytq.png\" alt=\"spring initializr\" /></a></p>\n<p>My company is using <strong>Java8</strong> and it can't be changed, Is there any other website, or is there any way to access an older version of this website, so that I can choose <strong>Java8</strong> for Spring Boot Project instead?</p>\n"},{"tags":["java","record","java-record"],"comments":[{"score":15,"post_type":"question","creation_date":1700136267,"post_id":77494540,"comment_id":136618931,"body_markdown":"To quote for [JEP 395: Records](https://openjdk.org/jeps/395): _&quot;Enhance the Java programming language with records, which are **classes** that act as transparent carriers for immutable data.&quot;_ (emphasis mine). In total JEP 395 mentions the words &quot;class&quot; 86 times and &quot;classes&quot; 63 times. Basically everything (except primitives) are classes in Java, so it shouldn&#39;t come as a surprise that records are as well.","link":"https://stackoverflow.com/questions/77494540/are-records-syntactic-sugar-for-classes#comment136618931_77494540","body":"To quote for <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">JEP 395: Records</a>: <i>&quot;Enhance the Java programming language with records, which are <b>classes</b> that act as transparent carriers for immutable data.&quot;</i> (emphasis mine). In total JEP 395 mentions the words &quot;class&quot; 86 times and &quot;classes&quot; 63 times. Basically everything (except primitives) are classes in Java, so it shouldn&#39;t come as a surprise that records are as well."},{"score":0,"post_type":"question","creation_date":1700136588,"post_id":77494540,"comment_id":136618980,"body_markdown":"[Java class vs. record](https://www.google.com/search?q=java+class+vs+record+site:stackoverflow.com)","link":"https://stackoverflow.com/questions/77494540/are-records-syntactic-sugar-for-classes#comment136618980_77494540","body":"<a href=\"https://www.google.com/search?q=java+class+vs+record+site:stackoverflow.com\" rel=\"nofollow noreferrer\">Java class vs. record</a>"},{"score":4,"post_type":"question","creation_date":1700138508,"post_id":77494540,"comment_id":136619290,"body_markdown":"It really depends on what exactly you mean by &quot;syntactic sugar&quot;, most people don&#39;t have a good definition of what they actually mean by that. Records *are* classes, as Mark pointed out. But whether or not they are &quot;just syntactic sugar for regular classes&quot; is really hard to answer without a firm definition.","link":"https://stackoverflow.com/questions/77494540/are-records-syntactic-sugar-for-classes#comment136619290_77494540","body":"It really depends on what exactly you mean by &quot;syntactic sugar&quot;, most people don&#39;t have a good definition of what they actually mean by that. Records <i>are</i> classes, as Mark pointed out. But whether or not they are &quot;just syntactic sugar for regular classes&quot; is really hard to answer without a firm definition."},{"score":5,"post_type":"question","creation_date":1700138800,"post_id":77494540,"comment_id":136619343,"body_markdown":"Given how record patterns ([JEP 440: Record Patterns](https://openjdk.org/jeps/440)) only work for records, I would say that records are _not_ just syntactic sugar for classes, as they offer features that are not available for &quot;normal&quot; classes.","link":"https://stackoverflow.com/questions/77494540/are-records-syntactic-sugar-for-classes#comment136619343_77494540","body":"Given how record patterns (<a href=\"https://openjdk.org/jeps/440\" rel=\"nofollow noreferrer\">JEP 440: Record Patterns</a>) only work for records, I would say that records are <i>not</i> just syntactic sugar for classes, as they offer features that are not available for &quot;normal&quot; classes."},{"score":0,"post_type":"question","creation_date":1700171509,"post_id":77494540,"comment_id":136625248,"body_markdown":"@MarkRotteveel: It looks like it&#39;s still syntactic sugar. It looks like they enable it via: 1) All `Record`s inherit from a single common superclass (`java.lang.Record`). 2) They provide a function, `Class.getRecordComponents`, that checks if the thing in question is a `Record` (via `Class.isRecord`, though I&#39;m fairly sure that&#39;s equivalent to just checking if the superclass is `java.lang.Record`, due to the restrictive nature of `Record`s), and if so, knows it can use reflection in a defined way to determine the components it can extract.","link":"https://stackoverflow.com/questions/77494540/are-records-syntactic-sugar-for-classes#comment136625248_77494540","body":"@MarkRotteveel: It looks like it&#39;s still syntactic sugar. It looks like they enable it via: 1) All <code>Record</code>s inherit from a single common superclass (<code>java.lang.Record</code>). 2) They provide a function, <code>Class.getRecordComponents</code>, that checks if the thing in question is a <code>Record</code> (via <code>Class.isRecord</code>, though I&#39;m fairly sure that&#39;s equivalent to just checking if the superclass is <code>java.lang.Record</code>, due to the restrictive nature of <code>Record</code>s), and if so, knows it can use reflection in a defined way to determine the components it can extract."},{"score":1,"post_type":"question","creation_date":1700171621,"post_id":77494540,"comment_id":136625269,"body_markdown":"I suspect the unique features of `Record`s could be simulated by a user-defined class, so long as they directly inherited from `java.lang.Record` *and* adhered to all the other narrow requirements of `Record`s that enable that reflection to figure out how to unpack it. The special `Record` declaration syntax just does all that work for you.","link":"https://stackoverflow.com/questions/77494540/are-records-syntactic-sugar-for-classes#comment136625269_77494540","body":"I suspect the unique features of <code>Record</code>s could be simulated by a user-defined class, so long as they directly inherited from <code>java.lang.Record</code> <i>and</i> adhered to all the other narrow requirements of <code>Record</code>s that enable that reflection to figure out how to unpack it. The special <code>Record</code> declaration syntax just does all that work for you."},{"score":0,"post_type":"question","creation_date":1700173796,"post_id":77494540,"comment_id":136625506,"body_markdown":"@ShadowRanger: Would the range of operations on records types be sufficiently constrained to allow the JVM to refrain from creating object instances in cases where it could track and pass data around via other means?  If so, that would seem like something much more significant than syntactic sugar.","link":"https://stackoverflow.com/questions/77494540/are-records-syntactic-sugar-for-classes#comment136625506_77494540","body":"@ShadowRanger: Would the range of operations on records types be sufficiently constrained to allow the JVM to refrain from creating object instances in cases where it could track and pass data around via other means?  If so, that would seem like something much more significant than syntactic sugar."},{"score":2,"post_type":"question","creation_date":1700175240,"post_id":77494540,"comment_id":136625659,"body_markdown":"@supercat: That&#39;s kind of a meaningless guideline? The JIT optimizer can *always* do stuff if it can determine the parameters of the scenario let it skip work (a la the C++ as-if rule). The limitations of `Record`s might make it easier for the compiler authors to do stuff, but as the answer indicates, under-the-hood, it&#39;s *just* a class with a specific design, the only thing that is unique is that inherits from `java.lang.Record` (which has no meaningful behaviors of its own, it&#39;s just recognized specially by serialization and record patterns).","link":"https://stackoverflow.com/questions/77494540/are-records-syntactic-sugar-for-classes#comment136625659_77494540","body":"@supercat: That&#39;s kind of a meaningless guideline? The JIT optimizer can <i>always</i> do stuff if it can determine the parameters of the scenario let it skip work (a la the C++ as-if rule). The limitations of <code>Record</code>s might make it easier for the compiler authors to do stuff, but as the answer indicates, under-the-hood, it&#39;s <i>just</i> a class with a specific design, the only thing that is unique is that inherits from <code>java.lang.Record</code> (which has no meaningful behaviors of its own, it&#39;s just recognized specially by serialization and record patterns)."},{"score":3,"post_type":"question","creation_date":1700210753,"post_id":77494540,"comment_id":136628757,"body_markdown":"If you drive that argument to the extreme then all programming languages are just syntactic sugar for assembler language (which is itself just syntactic sugar for machine code which is itself just syntactic sugar for bits in memory which is ...). That&#39;s why working with a vague/flexible definition of &quot;syntactic sugar&quot; is often pointless: you get to vacuously true statements. They aren *not wrong* but also don&#39;t tell you anything useful about the feature you&#39;re inspecting.","link":"https://stackoverflow.com/questions/77494540/are-records-syntactic-sugar-for-classes#comment136628757_77494540","body":"If you drive that argument to the extreme then all programming languages are just syntactic sugar for assembler language (which is itself just syntactic sugar for machine code which is itself just syntactic sugar for bits in memory which is ...). That&#39;s why working with a vague/flexible definition of &quot;syntactic sugar&quot; is often pointless: you get to vacuously true statements. They aren <i>not wrong</i> but also don&#39;t tell you anything useful about the feature you&#39;re inspecting."},{"score":1,"post_type":"question","creation_date":1700214942,"post_id":77494540,"comment_id":136629486,"body_markdown":"@JoachimSauer statements &quot;X is syntactic sugar for Y&quot; are usually only made when X and Y are both constructs in the same language. Lots of things thus aren&#39;t syntactic sugar because what they desugar to can&#39;t be expressed in the same language at all. Furthermore, there is typically an assumption that the transformation be essentially injective. Every possible `record` you could define maps uniquely to a subclass of `java.lang.Record`, and thus you could transform it back to the original `record` declaration (modulo whitespace etc.). Most other compiler transformations aren&#39;t injective.","link":"https://stackoverflow.com/questions/77494540/are-records-syntactic-sugar-for-classes#comment136629486_77494540","body":"@JoachimSauer statements &quot;X is syntactic sugar for Y&quot; are usually only made when X and Y are both constructs in the same language. Lots of things thus aren&#39;t syntactic sugar because what they desugar to can&#39;t be expressed in the same language at all. Furthermore, there is typically an assumption that the transformation be essentially injective. Every possible <code>record</code> you could define maps uniquely to a subclass of <code>java.lang.Record</code>, and thus you could transform it back to the original <code>record</code> declaration (modulo whitespace etc.). Most other compiler transformations aren&#39;t injective."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1700174005,"post_id":77494625,"comment_id":136625533,"body_markdown":"What about at the machine code level?  If e.g. a function creates and returns a `Record` with particular fields values, without persisting any other reference to the object, and the caller retrieves the fields and discards all references to the object after having done so, would the JVM be able to generate machine code that avoids the creation and abandonment of the object instance?","link":"https://stackoverflow.com/questions/77494540/are-records-syntactic-sugar-for-classes/77494625#comment136625533_77494625","body":"What about at the machine code level?  If e.g. a function creates and returns a <code>Record</code> with particular fields values, without persisting any other reference to the object, and the caller retrieves the fields and discards all references to the object after having done so, would the JVM be able to generate machine code that avoids the creation and abandonment of the object instance?"},{"score":16,"post_type":"answer","creation_date":1700210916,"post_id":77494625,"comment_id":136628782,"body_markdown":"Java does not concern itself with the machine code level, that&#39;s an implementation detail of the JVM. Obviously a `record` won&#39;t magically make use of some previously unused instruction on your CPU or access previously unaccessible registers or memory areas, they are in the end just a special kind of class. But defining whether a feature is &quot;syntactic sugar&quot; in Java by inspecting the machine code level is like asking how to build an Airplane by inspecting individual welding points with a raster electron microscope: You will find *something*, but you might be missing the entire point.","link":"https://stackoverflow.com/questions/77494540/are-records-syntactic-sugar-for-classes/77494625#comment136628782_77494625","body":"Java does not concern itself with the machine code level, that&#39;s an implementation detail of the JVM. Obviously a <code>record</code> won&#39;t magically make use of some previously unused instruction on your CPU or access previously unaccessible registers or memory areas, they are in the end just a special kind of class. But defining whether a feature is &quot;syntactic sugar&quot; in Java by inspecting the machine code level is like asking how to build an Airplane by inspecting individual welding points with a raster electron microscope: You will find <i>something</i>, but you might be missing the entire point."}],"comment_count":2,"score":37,"last_activity_date":1700138550,"last_edit_date":1700138550,"creation_date":1700136078,"answer_id":77494625,"question_id":77494540,"body_markdown":"Under the hood it will still create a class (that&#39;s derived from [`java.lang.Record`][1]). \r\n\r\nYou can try it out yourself:\r\n\r\n```java\r\n// test.java\r\nrecord Test(int foo, String bar) {}\r\n```\r\n\r\nWhen you compile this with `javac test.java` and disassemble it again with `javap Test` you&#39;ll get this code:\r\n\r\n```java\r\nfinal class Test extends java.lang.Record {\r\n  Test(int, java.lang.String);\r\n  public final java.lang.String toString();\r\n  public final int hashCode();\r\n  public final boolean equals(java.lang.Object);\r\n  public int foo();\r\n  public java.lang.String bar();\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Record.html","link":"https://stackoverflow.com/questions/77494540/are-records-syntactic-sugar-for-classes/77494625#77494625","title":"Are records syntactic sugar for classes?","body":"<p>Under the hood it will still create a class (that's derived from <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Record.html\" rel=\"noreferrer\"><code>java.lang.Record</code></a>).</p>\n<p>You can try it out yourself:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// test.java\nrecord Test(int foo, String bar) {}\n</code></pre>\n<p>When you compile this with <code>javac test.java</code> and disassemble it again with <code>javap Test</code> you'll get this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final class Test extends java.lang.Record {\n  Test(int, java.lang.String);\n  public final java.lang.String toString();\n  public final int hashCode();\n  public final boolean equals(java.lang.Object);\n  public int foo();\n  public java.lang.String bar();\n}\n</code></pre>\n"}],"comment_count":10,"is_answered":true,"view_count":2104,"answer_count":1,"score":22,"last_activity_date":1701882503,"creation_date":1700135294,"last_edit_date":1701882503,"question_id":77494540,"body_markdown":"I recently discovered Java [records][1], and it was amazing to learn about their existence and purpose.\r\n\r\nHowever, I began to wonder if they are essentially just classes behind the scenes.\r\n\r\nDoes this mean that during compilation, they get converted into an explicit class with final private fields, a public constructor, and the necessary getters?\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/395","link":"https://stackoverflow.com/questions/77494540/are-records-syntactic-sugar-for-classes","title":"Are records syntactic sugar for classes?","body":"<p>I recently discovered Java <a href=\"https://openjdk.org/jeps/395\" rel=\"noreferrer\">records</a>, and it was amazing to learn about their existence and purpose.</p>\n<p>However, I began to wonder if they are essentially just classes behind the scenes.</p>\n<p>Does this mean that during compilation, they get converted into an explicit class with final private fields, a public constructor, and the necessary getters?</p>\n"},{"tags":["java","android","kotlin","cannot-find-symbol"],"comments":[{"score":0,"post_type":"question","creation_date":1673493191,"post_id":75090817,"comment_id":132513353,"body_markdown":"Could u edit ur post to include ur gradle/maven file? By default, java files are parsed from `src/main/java` and kotlin files from `src/main/kotlin`. In order to use a single sources directory for both files, u need to configure your IDE or build script to look for kotlin/java sources in the same directory.","link":"https://stackoverflow.com/questions/75090817/android-studio-kotlin-class-not-found-when-implementing-in-java-file-error#comment132513353_75090817","body":"Could u edit ur post to include ur gradle/maven file? By default, java files are parsed from <code>src&#47;main&#47;java</code> and kotlin files from <code>src&#47;main&#47;kotlin</code>. In order to use a single sources directory for both files, u need to configure your IDE or build script to look for kotlin/java sources in the same directory."},{"score":0,"post_type":"question","creation_date":1673500731,"post_id":75090817,"comment_id":132514414,"body_markdown":"Does it really say`lass KotlinClass` or is that a typo in the question?","link":"https://stackoverflow.com/questions/75090817/android-studio-kotlin-class-not-found-when-implementing-in-java-file-error#comment132514414_75090817","body":"Does it really say<code>lass KotlinClass</code> or is that a typo in the question?"},{"score":0,"post_type":"question","creation_date":1673824503,"post_id":75090817,"comment_id":132578180,"body_markdown":"@StanvanderBend Thanks for your reply! I think i have made the adjustments to the question.","link":"https://stackoverflow.com/questions/75090817/android-studio-kotlin-class-not-found-when-implementing-in-java-file-error#comment132578180_75090817","body":"@StanvanderBend Thanks for your reply! I think i have made the adjustments to the question."},{"score":0,"post_type":"question","creation_date":1673824528,"post_id":75090817,"comment_id":132578187,"body_markdown":"@TylerV Thanks, it was a typo. I have update it.","link":"https://stackoverflow.com/questions/75090817/android-studio-kotlin-class-not-found-when-implementing-in-java-file-error#comment132578187_75090817","body":"@TylerV Thanks, it was a typo. I have update it."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1673823882,"post_id":75091219,"comment_id":132578088,"body_markdown":"Hi, thank you so much for your response. I have tried the steps you have shown but for some reason, i get a new error in the logcat tab &quot;Could not remove dir &#39;/data/data/com.example.testingkotlinwithjava/code_cache/.ll/&#39;: No such file or directory&quot;","link":"https://stackoverflow.com/questions/75090817/android-studio-kotlin-class-not-found-when-implementing-in-java-file-error/75091219#comment132578088_75091219","body":"Hi, thank you so much for your response. I have tried the steps you have shown but for some reason, i get a new error in the logcat tab &quot;Could not remove dir &#39;/data/data/com.example.testingkotlinwithjava/code_cache/.ll&zwnj;&#8203;/&#39;: No such file or directory&quot;"},{"score":0,"post_type":"answer","creation_date":1673825636,"post_id":75091219,"comment_id":132578345,"body_markdown":"I&#39;m not sure what is going wrong. I am deleting the kotlin main activity and then inserting a new java main activity. I think this might be where the issue is with this method. Is there a different way I should be doing it?","link":"https://stackoverflow.com/questions/75090817/android-studio-kotlin-class-not-found-when-implementing-in-java-file-error/75091219#comment132578345_75091219","body":"I&#39;m not sure what is going wrong. I am deleting the kotlin main activity and then inserting a new java main activity. I think this might be where the issue is with this method. Is there a different way I should be doing it?"},{"score":0,"post_type":"answer","creation_date":1673845821,"post_id":75091219,"comment_id":132580485,"body_markdown":"@harrypowers Activities need to be defined in the manifest or not if they have been removed.","link":"https://stackoverflow.com/questions/75090817/android-studio-kotlin-class-not-found-when-implementing-in-java-file-error/75091219#comment132580485_75091219","body":"@harrypowers Activities need to be defined in the manifest or not if they have been removed."}],"comment_count":3,"score":0,"last_activity_date":1673493602,"creation_date":1673493602,"answer_id":75091219,"question_id":75090817,"body_markdown":"I believe that your issue is that you have created the project as a Java project and a Java project doesn&#39;t support Kotlin directly.\r\n\r\nIf you create the project as a Kotlin Project e.g.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThen Kotlin supports Java from the onset. The only issue is that the Activity will then be in Kotlin.\r\n\r\nTo circumvent this, as was done below, you could add another Activity set it to be Java, and then use this to replace the Kotlin activity (not sure why other than to do it though).\r\n\r\nThe following demonstrates:-\r\n\r\n[![enter image description here][2]][2]\r\n\r\n- i.e. the project comppiled and ran on the emulator.\r\n- as can be seen MainActivity (with some manipulation) is Java\r\n- KotlinClass is Kotlin\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rXWyS.png\r\n  [2]: https://i.stack.imgur.com/TfLOD.png","link":"https://stackoverflow.com/questions/75090817/android-studio-kotlin-class-not-found-when-implementing-in-java-file-error/75091219#75091219","title":"Android studio - kotlin class not found when implementing in java file - error &quot;cannot find symbol class&quot;","body":"<p>I believe that your issue is that you have created the project as a Java project and a Java project doesn't support Kotlin directly.</p>\n<p>If you create the project as a Kotlin Project e.g.</p>\n<p><a href=\"https://i.stack.imgur.com/rXWyS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rXWyS.png\" alt=\"enter image description here\" /></a></p>\n<p>Then Kotlin supports Java from the onset. The only issue is that the Activity will then be in Kotlin.</p>\n<p>To circumvent this, as was done below, you could add another Activity set it to be Java, and then use this to replace the Kotlin activity (not sure why other than to do it though).</p>\n<p>The following demonstrates:-</p>\n<p><a href=\"https://i.stack.imgur.com/TfLOD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TfLOD.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>i.e. the project comppiled and ran on the emulator.</li>\n<li>as can be seen MainActivity (with some manipulation) is Java</li>\n<li>KotlinClass is Kotlin</li>\n</ul>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1673824713,"post_id":75091831,"comment_id":132578220,"body_markdown":"Thanks for your response. This is what i did and it didn&#39;t work.","link":"https://stackoverflow.com/questions/75090817/android-studio-kotlin-class-not-found-when-implementing-in-java-file-error/75091831#comment132578220_75091831","body":"Thanks for your response. This is what i did and it didn&#39;t work."}],"comment_count":1,"score":0,"last_activity_date":1673499925,"creation_date":1673499925,"answer_id":75091831,"question_id":75090817,"body_markdown":"Create `Kotlin class` like this and keep rest the same.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nTtuu.png","link":"https://stackoverflow.com/questions/75090817/android-studio-kotlin-class-not-found-when-implementing-in-java-file-error/75091831#75091831","title":"Android studio - kotlin class not found when implementing in java file - error &quot;cannot find symbol class&quot;","body":"<p>Create <code>Kotlin class</code> like this and keep rest the same.</p>\n<p><a href=\"https://i.stack.imgur.com/nTtuu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nTtuu.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1673824661,"post_id":75098420,"comment_id":132578208,"body_markdown":"Thanks for the respons! This did not work for me either i get the error &quot;InvalidPluginRequestException: Plugin with id &#39;org.jetbrains.kotlin.android&#39; was already requested&quot;","link":"https://stackoverflow.com/questions/75090817/android-studio-kotlin-class-not-found-when-implementing-in-java-file-error/75098420#comment132578208_75098420","body":"Thanks for the respons! This did not work for me either i get the error &quot;InvalidPluginRequestException: Plugin with id &#39;org.jetbrains.kotlin.android&#39; was already requested&quot;"}],"comment_count":1,"score":0,"last_activity_date":1673536041,"creation_date":1673536041,"answer_id":75098420,"question_id":75090817,"body_markdown":"For this issue, I have a simple solution that works for me.\r\n\r\nadd below id in build.gradle app level gradle\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    plugins {\r\n          id &#39;org.jetbrains.kotlin.android&#39;\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n\r\nAdd below line in project level gradle file\r\n\r\n\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    plugins {\r\n        id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.6.21&#39; apply false\r\n       }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","link":"https://stackoverflow.com/questions/75090817/android-studio-kotlin-class-not-found-when-implementing-in-java-file-error/75098420#75098420","title":"Android studio - kotlin class not found when implementing in java file - error &quot;cannot find symbol class&quot;","body":"<p>For this issue, I have a simple solution that works for me.</p>\n<p>add below id in build.gradle app level gradle</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>plugins {\n      id 'org.jetbrains.kotlin.android'\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>plugins {\n    id 'org.jetbrains.kotlin.android' version '1.6.21' apply false\n   }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701878314,"creation_date":1701878314,"answer_id":77614589,"question_id":75090817,"body_markdown":"This maybe will be a late answer. I had this issue yesterday and I solved this way:\r\n\r\n1.- Add kotlin plugin to your Project `build.gradle`. I&#39;m using kotlin version `1.7.20`\r\n\r\n    buildscript {\r\n      ext.kotlin_version = &quot;1.7.20&quot;\r\n      repositories {\r\n        google()\r\n        mavenCentral()\r\n      }\r\n      dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:8.0.2&#39;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n        classpath &quot;org.jetbrains.kotlin:kotlin-serialization:$kotlin_version&quot;\r\n    \r\n      }\r\n    }\r\n\r\n2.- Add kotlin plugins at the top of your App `build.gradle` like this:\r\n\r\n    plugins {\r\n      id &#39;com.android.application&#39;\r\n      id &#39;kotlin-android&#39;\r\n      id &#39;kotlin-kapt&#39;\r\n      id &#39;kotlinx-serialization&#39;\r\n      id &#39;kotlin-parcelize&#39;\r\n    }\r\n\r\n3.- Clean, Rebuild, Compile. If any other error jumps, try to Clear Cache/Restart.\r\n\r\n\r\nPs: Maybe you won&#39;t need all the plugins, but I posted all, just in case.","link":"https://stackoverflow.com/questions/75090817/android-studio-kotlin-class-not-found-when-implementing-in-java-file-error/77614589#77614589","title":"Android studio - kotlin class not found when implementing in java file - error &quot;cannot find symbol class&quot;","body":"<p>This maybe will be a late answer. I had this issue yesterday and I solved this way:</p>\n<p>1.- Add kotlin plugin to your Project <code>build.gradle</code>. I'm using kotlin version <code>1.7.20</code></p>\n<pre><code>buildscript {\n  ext.kotlin_version = &quot;1.7.20&quot;\n  repositories {\n    google()\n    mavenCentral()\n  }\n  dependencies {\n    classpath 'com.android.tools.build:gradle:8.0.2'\n    classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    classpath &quot;org.jetbrains.kotlin:kotlin-serialization:$kotlin_version&quot;\n\n  }\n}\n</code></pre>\n<p>2.- Add kotlin plugins at the top of your App <code>build.gradle</code> like this:</p>\n<pre><code>plugins {\n  id 'com.android.application'\n  id 'kotlin-android'\n  id 'kotlin-kapt'\n  id 'kotlinx-serialization'\n  id 'kotlin-parcelize'\n}\n</code></pre>\n<p>3.- Clean, Rebuild, Compile. If any other error jumps, try to Clear Cache/Restart.</p>\n<p>Ps: Maybe you won't need all the plugins, but I posted all, just in case.</p>\n"}],"comment_count":4,"is_answered":false,"view_count":1476,"answer_count":4,"score":0,"last_activity_date":1701878314,"creation_date":1673488737,"last_edit_date":1673824434,"question_id":75090817,"body_markdown":"I am trying to use a kotlin class in my java class in android studio. But I get the following error twice... \r\n\r\n&quot;cannot find symbol class KotlinClass&quot;\r\n\r\nKotlinClass is the file name of the kotlin class I am trying to implement.\r\n\r\nBoth the java and kotlin file are in the same package.\r\n\r\nI have tried to put them in different packages but it caused me more problems and so i kept them in the same package but i might have done this so if this is a potential solution, i can try again but i would need more detailed steps if possible.\r\n\r\nThis error occurs in the build tab.\r\n\r\nI have looked into this quite a bit but nothing seems to work.\r\n\r\n\r\n\r\nThis is my java class\r\n\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n\r\n        KotlinClass x = new KotlinClass();\r\n        x.kotlinMethod();\r\n    }\r\n}\r\n```\r\n\r\nThis is my kotlin class\r\n\r\n```\r\nclass KotlinClass {\r\n    fun kotlinMethod() {\r\n        println(&quot;You did it again!!!&quot;)\r\n    }\r\n}\r\n```\r\n\r\nIm very new to android studio, any help will be appreciated\r\n\r\n&lt;Update&gt;\r\n\r\nHere is my project level gradle file\r\n```\r\n    plugins {\r\n    id &#39;com.android.application&#39; version &#39;7.3.1&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;7.3.1&#39; apply false\r\n}\r\n```\r\nHere is my module level gradle file\r\n```\r\n    plugins {\r\n    id &#39;com.android.application&#39;\r\n}\r\n\r\nandroid {\r\n    namespace &#39;com.example.testingjava&#39;\r\n    compileSdk 32\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.testingjava&quot;\r\n        minSdk 29\r\n        targetSdk 32\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;androidx.appcompat:appcompat:1.5.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.7.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n}\r\n```","link":"https://stackoverflow.com/questions/75090817/android-studio-kotlin-class-not-found-when-implementing-in-java-file-error","title":"Android studio - kotlin class not found when implementing in java file - error &quot;cannot find symbol class&quot;","body":"<p>I am trying to use a kotlin class in my java class in android studio. But I get the following error twice...</p>\n<p>&quot;cannot find symbol class KotlinClass&quot;</p>\n<p>KotlinClass is the file name of the kotlin class I am trying to implement.</p>\n<p>Both the java and kotlin file are in the same package.</p>\n<p>I have tried to put them in different packages but it caused me more problems and so i kept them in the same package but i might have done this so if this is a potential solution, i can try again but i would need more detailed steps if possible.</p>\n<p>This error occurs in the build tab.</p>\n<p>I have looked into this quite a bit but nothing seems to work.</p>\n<p>This is my java class</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        KotlinClass x = new KotlinClass();\n        x.kotlinMethod();\n    }\n}\n</code></pre>\n<p>This is my kotlin class</p>\n<pre><code>class KotlinClass {\n    fun kotlinMethod() {\n        println(&quot;You did it again!!!&quot;)\n    }\n}\n</code></pre>\n<p>Im very new to android studio, any help will be appreciated</p>\n\n<p>Here is my project level gradle file</p>\n<pre><code>    plugins {\n    id 'com.android.application' version '7.3.1' apply false\n    id 'com.android.library' version '7.3.1' apply false\n}\n</code></pre>\n<p>Here is my module level gradle file</p>\n<pre><code>    plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    namespace 'com.example.testingjava'\n    compileSdk 32\n\n    defaultConfig {\n        applicationId &quot;com.example.testingjava&quot;\n        minSdk 29\n        targetSdk 32\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.5.1'\n    implementation 'com.google.android.material:material:1.7.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n}\n</code></pre>\n"},{"tags":["java","microservices","domain-driven-design","cqrs","event-sourcing"],"comments":[{"score":3,"post_type":"question","creation_date":1698400558,"post_id":77323853,"comment_id":136403624,"body_markdown":"Is the requirement that you can lookup the aggregate by a previously used mail address or only the current one?\nIn any case, I would opt to create an &#39;internal&#39; projection, aka Materialized Model, to map the mail address to the AggregateID.","link":"https://stackoverflow.com/questions/77323853/loading-an-aggregate-with-a-field-other-than-its-id-from-an-event-sourcing-event#comment136403624_77323853","body":"Is the requirement that you can lookup the aggregate by a previously used mail address or only the current one? In any case, I would opt to create an &#39;internal&#39; projection, aka Materialized Model, to map the mail address to the AggregateID."}],"comment_count":1,"is_answered":false,"view_count":61,"answer_count":0,"score":0,"last_activity_date":1701875498,"creation_date":1697719307,"last_edit_date":1701875498,"question_id":77323853,"body_markdown":"I am diving deeper into CQRS and event sourcing architecture. I am a bit confused about loading an aggregate (write model) into my application.\r\n\r\nI push all my events to my Kafka event bus and also save the read projection in my application local database as events. While I don&#39;t have any problems loading my aggregate to its latest state from my event store, I am at trouble when I need to find an aggregate or validate commands to be applied on it by something other then its ID, which may change over time (e.g. email address). I can, however, find older events with old email addresses by querying my read model database with a query like ```Where mail = given_mail```.\r\n\r\nMaybe my concept is wrong and I should publish event only to event bus and store Materialized Models in Database (event if it is command parts)?\r\nMaybe while my Query part is kafka-listner and create ReadOnly Projections I should use the same repository to fetch data from Read-Database even on Command side?\r\n\r\nI am considering which approach is better/correct and if you have any documents about it feel free to share with me :)\r\n\r\nI tried to find a out of articles about event sourcing.","link":"https://stackoverflow.com/questions/77323853/loading-an-aggregate-with-a-field-other-than-its-id-from-an-event-sourcing-event","title":"Loading an aggregate with a field other than its id from an event sourcing event store","body":"<p>I am diving deeper into CQRS and event sourcing architecture. I am a bit confused about loading an aggregate (write model) into my application.</p>\n<p>I push all my events to my Kafka event bus and also save the read projection in my application local database as events. While I don't have any problems loading my aggregate to its latest state from my event store, I am at trouble when I need to find an aggregate or validate commands to be applied on it by something other then its ID, which may change over time (e.g. email address). I can, however, find older events with old email addresses by querying my read model database with a query like <code>Where mail = given_mail</code>.</p>\n<p>Maybe my concept is wrong and I should publish event only to event bus and store Materialized Models in Database (event if it is command parts)?\nMaybe while my Query part is kafka-listner and create ReadOnly Projections I should use the same repository to fetch data from Read-Database even on Command side?</p>\n<p>I am considering which approach is better/correct and if you have any documents about it feel free to share with me :)</p>\n<p>I tried to find a out of articles about event sourcing.</p>\n"},{"tags":["java","select","zooming"],"comments":[{"score":0,"post_type":"question","creation_date":1700867096,"post_id":77545821,"comment_id":136708958,"body_markdown":"Maybe something like [this](https://stackoverflow.com/questions/18158550/zoom-box-for-area-around-mouse-location-on-screen/18158845#18158845); You could also make use of the `JLayer` APIs [for example](https://stackoverflow.com/questions/21174997/how-to-add-mouselistener-to-item-on-java-swing-canvas/21175125#21175125)","link":"https://stackoverflow.com/questions/77545821/java-zooming-around-mousepoint-and-selection-afterwards#comment136708958_77545821","body":"Maybe something like <a href=\"https://stackoverflow.com/questions/18158550/zoom-box-for-area-around-mouse-location-on-screen/18158845#18158845\">this</a>; You could also make use of the <code>JLayer</code> APIs <a href=\"https://stackoverflow.com/questions/21174997/how-to-add-mouselistener-to-item-on-java-swing-canvas/21175125#21175125\">for example</a>"},{"score":0,"post_type":"question","creation_date":1700868551,"post_id":77545821,"comment_id":136709042,"body_markdown":"I can&#39;t used pop Up I have to directly zoom in the drawing","link":"https://stackoverflow.com/questions/77545821/java-zooming-around-mousepoint-and-selection-afterwards#comment136709042_77545821","body":"I can&#39;t used pop Up I have to directly zoom in the drawing"},{"score":0,"post_type":"question","creation_date":1700869522,"post_id":77545821,"comment_id":136709103,"body_markdown":"Maybe, it will give you some ideas","link":"https://stackoverflow.com/questions/77545821/java-zooming-around-mousepoint-and-selection-afterwards#comment136709103_77545821","body":"Maybe, it will give you some ideas"}],"comment_count":3,"is_answered":false,"view_count":23,"answer_count":0,"score":0,"last_activity_date":1701875409,"creation_date":1700863012,"last_edit_date":1701875409,"question_id":77545821,"body_markdown":"I want to add the zooming function around the MOUSE, but I want to keep the unscaled values because I need to used it to selected item afterwards. The select item works perfectly before the zooming around the mousePoint:\r\n\r\n        @Override protected void paintComponent(Graphics g) {    \r\n        if (mainWindow != null) {\r\n            super.paintComponent(g);\r\n            \r\n            int zoomX = (int)(intialDimension.width * mainWindow.controller.getScaleZoom());\r\n            int zoomY = (int)(intialDimension.height* mainWindow.controller.getScaleZoom());\r\n            \r\n            Graphics2D g2d = (Graphics2D)g;\r\n    \r\n            g2d.scale(mainWindow.controller.getScaleZoom(), mainWindow.controller.getScaleZoom());\r\n        \r\n            MainDrawer mainDrawer = new MainDrawer(mainWindow.controller, this.chaletDrawer, new   Dimension(zoomX, zoomY));\r\n            mainDrawer.draw(g2d);\r\n            \r\n            g2d.dispose();\r\n    \r\n        }\r\n    }\r\n\r\nMoussePressed :\r\n\r\n        Point mousePoint = evt.getPoint(); double scaleZoom = controller.getScaleZoom();\r\n        // Convert the mouse coordinates back to the unscaled (original) coordinates\r\n        // 100 is the initial point of the drawing\r\n        // 4 is the scale of the drawing\r\n        int unscaledX = (int) ((mousePoint.x / scaleZoom - 100) / 4);\r\n        int unscaledY = (int) ((mousePoint.y / scaleZoom - 100) / 4);\r\n    \r\n        System.out.println(&quot;Unscaled Mouse Point: (&quot; + unscaledX + &quot;, &quot; + unscaledY + &quot;)&quot;);\r\n    \r\n        this.controller.switchSelectionStatusAccessoire(unscaledX, unscaledY, viewType);\r\n        this.drawingPanel.repaint();`\r\n\r\nMouseWheel :\r\n\r\n    double amount = Math.pow(1.1, evt.getScrollAmount());       `\r\n    \r\n    if (evt.getWheelRotation() &gt; 0) {             \r\n        controller.setScaleZoom(oldzoom * amount);         \r\n    } else {             \r\n        controller.setScaleZoom(oldzoom / amount);         \r\n    }            \r\n    this.drawingPanel.repaint();\r\n\r\nI can easily adapt the code to zoom aroud the mousePoint using AffineTransform. The problem is, afterward when I select it&#39;s not selecting at the good place and because I call the repaint in the MousePressed it will redraw the entire drawing at the initial position.\r\n\r\n    @Override protected void paintComponent(Graphics g) {    \r\n            if (mainWindow != null) {\r\n            super.paintComponent(g);\r\n    \r\n            int zoomX = (int) (intialDimension.width * mainWindow.controller.getScaleZoom());\r\n            int zoomY = (int) (intialDimension.height * mainWindow.controller.getScaleZoom());\r\n    \r\n            Graphics2D g2d = (Graphics2D) g;\r\n    \r\n            Point mousePosition = getMousePosition();\r\n            AffineTransform at = g2d.getTransform();\r\n            if (mousePosition != null) {\r\n                at.translate(mousePosition.getX(), mousePosition.getY());\r\n            }\r\n            at.scale(mainWindow.controller.getScaleZoom(), mainWindow.controller.getScaleZoom());\r\n            if (mousePosition != null) {\r\n    \r\n                at.translate(-mousePosition.getX(), -mousePosition.getY());\r\n            }\r\n            g2d.setTransform(at);\r\n    \r\n            revalidate();\r\n            \r\n            MainDrawer mainDrawer = new MainDrawer(mainWindow.controller, this.chaletDrawer, new Dimension(zoomX, zoomY));\r\n            mainDrawer.draw(g2d);\r\n    \r\n    \r\n            g2d.dispose();\r\n    \r\n        }\r\n    }`","link":"https://stackoverflow.com/questions/77545821/java-zooming-around-mousepoint-and-selection-afterwards","title":"Java- Zooming around mousePoint and Selection afterwards","body":"<p>I want to add the zooming function around the MOUSE, but I want to keep the unscaled values because I need to used it to selected item afterwards. The select item works perfectly before the zooming around the mousePoint:</p>\n<pre><code>    @Override protected void paintComponent(Graphics g) {    \n    if (mainWindow != null) {\n        super.paintComponent(g);\n        \n        int zoomX = (int)(intialDimension.width * mainWindow.controller.getScaleZoom());\n        int zoomY = (int)(intialDimension.height* mainWindow.controller.getScaleZoom());\n        \n        Graphics2D g2d = (Graphics2D)g;\n\n        g2d.scale(mainWindow.controller.getScaleZoom(), mainWindow.controller.getScaleZoom());\n    \n        MainDrawer mainDrawer = new MainDrawer(mainWindow.controller, this.chaletDrawer, new   Dimension(zoomX, zoomY));\n        mainDrawer.draw(g2d);\n        \n        g2d.dispose();\n\n    }\n}\n</code></pre>\n<p>MoussePressed :</p>\n<pre><code>    Point mousePoint = evt.getPoint(); double scaleZoom = controller.getScaleZoom();\n    // Convert the mouse coordinates back to the unscaled (original) coordinates\n    // 100 is the initial point of the drawing\n    // 4 is the scale of the drawing\n    int unscaledX = (int) ((mousePoint.x / scaleZoom - 100) / 4);\n    int unscaledY = (int) ((mousePoint.y / scaleZoom - 100) / 4);\n\n    System.out.println(&quot;Unscaled Mouse Point: (&quot; + unscaledX + &quot;, &quot; + unscaledY + &quot;)&quot;);\n\n    this.controller.switchSelectionStatusAccessoire(unscaledX, unscaledY, viewType);\n    this.drawingPanel.repaint();`\n</code></pre>\n<p>MouseWheel :</p>\n<pre><code>double amount = Math.pow(1.1, evt.getScrollAmount());       `\n\nif (evt.getWheelRotation() &gt; 0) {             \n    controller.setScaleZoom(oldzoom * amount);         \n} else {             \n    controller.setScaleZoom(oldzoom / amount);         \n}            \nthis.drawingPanel.repaint();\n</code></pre>\n<p>I can easily adapt the code to zoom aroud the mousePoint using AffineTransform. The problem is, afterward when I select it's not selecting at the good place and because I call the repaint in the MousePressed it will redraw the entire drawing at the initial position.</p>\n<pre><code>@Override protected void paintComponent(Graphics g) {    \n        if (mainWindow != null) {\n        super.paintComponent(g);\n\n        int zoomX = (int) (intialDimension.width * mainWindow.controller.getScaleZoom());\n        int zoomY = (int) (intialDimension.height * mainWindow.controller.getScaleZoom());\n\n        Graphics2D g2d = (Graphics2D) g;\n\n        Point mousePosition = getMousePosition();\n        AffineTransform at = g2d.getTransform();\n        if (mousePosition != null) {\n            at.translate(mousePosition.getX(), mousePosition.getY());\n        }\n        at.scale(mainWindow.controller.getScaleZoom(), mainWindow.controller.getScaleZoom());\n        if (mousePosition != null) {\n\n            at.translate(-mousePosition.getX(), -mousePosition.getY());\n        }\n        g2d.setTransform(at);\n\n        revalidate();\n        \n        MainDrawer mainDrawer = new MainDrawer(mainWindow.controller, this.chaletDrawer, new Dimension(zoomX, zoomY));\n        mainDrawer.draw(g2d);\n\n\n        g2d.dispose();\n\n    }\n}`\n</code></pre>\n"}],"has_more":true,"quota_max":300,"quota_remaining":294}