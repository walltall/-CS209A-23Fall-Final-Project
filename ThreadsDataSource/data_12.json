{"items":[{"tags":["java","unit-testing","mockito","completable-future","powermockito"],"comments":[{"score":0,"post_type":"question","creation_date":1701160951,"post_id":77557045,"comment_id":136737832,"body_markdown":"One suggestion i got was to instead use `ExecutorService` for parallelization so that we can leverage [`MoreExecutors.newDirectExecutorService()`](https://guava.dev/releases/19.0/api/docs/com/google/common/util/concurrent/MoreExecutors.html#newDirectExecutorService()) for unit-tests (which will then run sequentially). While it certainly works, I don&#39;t want to do it because then effectively we run async computation in production while our unit-tests use synchronous computation, so such tests won&#39;t be very confident-inspiring.","link":"https://stackoverflow.com/questions/77557045/powermockito-verifystatic-validating-async-call-to-static-method#comment136737832_77557045","body":"One suggestion i got was to instead use <code>ExecutorService</code> for parallelization so that we can leverage <a href=\"https://guava.dev/releases/19.0/api/docs/com/google/common/util/concurrent/MoreExecutors.html#newDirectExecutorService()\" rel=\"nofollow noreferrer\"><code>MoreExecutors.newDirectExecutorService()</code></a> for unit-tests (which will then run sequentially). While it certainly works, I don&#39;t want to do it because then effectively we run async computation in production while our unit-tests use synchronous computation, so such tests won&#39;t be very confident-inspiring."},{"score":0,"post_type":"question","creation_date":1701161050,"post_id":77557045,"comment_id":136737853,"body_markdown":"I also had a similar idea to try to somehow override the behaviour of `CompletableFuture.runAsync(..)` for tests so as to effectively make the underlying computation synchronous","link":"https://stackoverflow.com/questions/77557045/powermockito-verifystatic-validating-async-call-to-static-method#comment136737853_77557045","body":"I also had a similar idea to try to somehow override the behaviour of <code>CompletableFuture.runAsync(..)</code> for tests so as to effectively make the underlying computation synchronous"},{"score":2,"post_type":"question","creation_date":1701193483,"post_id":77557045,"comment_id":136744108,"body_markdown":"When you use `CompletableFuture.runAsync(…)` without specifying an executor, the [default Fork/Join pool](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#commonPool()) will be used. In that case, your unit test can use [`ForkJoinPool.commonPool().awaitQuiescence(your own timeout)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#awaitQuiescence(long,java.util.concurrent.TimeUnit)) to wait for all asynchronous jobs to complete, before checking whether the expected methods have been invoked.","link":"https://stackoverflow.com/questions/77557045/powermockito-verifystatic-validating-async-call-to-static-method#comment136744108_77557045","body":"When you use <code>CompletableFuture.runAsync(…)</code> without specifying an executor, the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#commonPool()\" rel=\"nofollow noreferrer\">default Fork/Join pool</a> will be used. In that case, your unit test can use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#awaitQuiescence(long,java.util.concurrent.TimeUnit)\" rel=\"nofollow noreferrer\"><code>ForkJoinPool.commonPool().awaitQuiescence(your own timeout)</code></a> to wait for all asynchronous jobs to complete, before checking whether the expected methods have been invoked."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701097330,"last_edit_date":1701097330,"creation_date":1701095834,"answer_id":77557713,"question_id":77557045,"body_markdown":"I *think* I might&#39;ve found a fix by using *a non-static method call being made after my static method call* as a &#39;proxy&#39; for hinting that our static method call must&#39;ve also happened\r\n\r\nI was logging an error metric in case my static method call fails as follows\r\n\r\n```\r\nimport java.util.concurrent.CompletableFuture;\r\n\r\nCompletableFuture.runAsync(() -&gt; {\r\n    try {\r\n        MyExternalServiceAccessor.myMethod(param1, param2);\r\n    } catch (final Exception e) {\r\n        // here metricLogger is injected into MyClass from outside so can be mocked for tests\r\n        metricLogger.logCounter(&quot;MyExternalServiceAccessor.myMethod:failure&quot;, 1);\r\n    }\r\n});\r\n```\r\n\r\nNow in above code\r\n - `metricLogger.logCounter(..)` call is a non-static call for which we can leverage mockito&#39;s [verification with timeout][1]\r\n - and since it occurs *after* our static `MyExternalServiceAccessor.myMethod(..)` call so we can be sure that if `logCounter` call has happened then `myMethod` call must&#39;ve also happened\r\n   - *although above statement is true only when we are unit-testing an error scenario where `myMethod` throws an exception*\r\n\r\nTherefore for an error scenario we write our test like this for waiting 100ms  before validating that expected methods invoked\r\n\r\n```\r\nverify(mockMetricLogger, timeout(100).times(1)).logCounter(eq(&quot;MyExternalServiceAccessor.myMethod:failure&quot;), eq(1));\r\nverifyStatic();\r\nMyExternalService.myMethod(eq(arg1), eq(arg2));\r\n```\r\n\r\nAnd for non-error scenario we can use the trick suggested in [this thread][2] to wait-and-verify that our mock was called &#39;zero&#39; times, i.e., not called even after waiting\r\n\r\n```\r\nverify(mockMetricLogger, timeout(100).times(0)).logCounter(eq(&quot;MyExternalServiceAccessor.myMethod:failure&quot;), eq(1));\r\nverifyStatic();\r\nMyExternalService.myMethod(eq(arg1), eq(arg2));\r\n```\r\n\r\nSo far my tests have been passing, but since (a) they were not too flaky to begin with and (b) we&#39;re dealing with notorious async issues that can show up intermittently, I&#39;m not certain if for non-error scenarios the flakiness has been completely eliminated or not.\r\n\r\n*(I can of course completely do away with the flakiness for example by also publishing a counter metric in success scenario and using that as a proxy, but don&#39;t want to do that just yet)*\r\n\r\n##### UPDATE-1\r\n\r\nI also had to test out the scenario where this entire block of async code is never called (due to upstream conditional expressions preventing flow from reaching up till this point where async block is triggered)\r\n\r\nFor that I leveraged `Mockito.never()` as suggested in [this thread][3]\r\n\r\n```\r\nverify(mockMetricLogger, timeout(100).times(0)).logCounter(eq(&quot;MyExternalServiceAccessor.myMethod:failure&quot;), eq(1));\r\nverifyStatic(never());\r\nMyExternalService.myMethod(eq(arg1), eq(arg2));\r\n```\r\n\r\n\r\n  [1]: https://javadoc.io/static/org.mockito/mockito-core/5.7.0/org/mockito/Mockito.html#22\r\n  [2]: https://stackoverflow.com/a/64460897/3679900\r\n  [3]: https://stackoverflow.com/q/50255565/3679900","link":"https://stackoverflow.com/questions/77557045/powermockito-verifystatic-validating-async-call-to-static-method/77557713#77557713","title":"PowerMockito verifyStatic: validating async call to static method","body":"<p>I <em>think</em> I might've found a fix by using <em>a non-static method call being made after my static method call</em> as a 'proxy' for hinting that our static method call must've also happened</p>\n<p>I was logging an error metric in case my static method call fails as follows</p>\n<pre><code>import java.util.concurrent.CompletableFuture;\n\nCompletableFuture.runAsync(() -&gt; {\n    try {\n        MyExternalServiceAccessor.myMethod(param1, param2);\n    } catch (final Exception e) {\n        // here metricLogger is injected into MyClass from outside so can be mocked for tests\n        metricLogger.logCounter(&quot;MyExternalServiceAccessor.myMethod:failure&quot;, 1);\n    }\n});\n</code></pre>\n<p>Now in above code</p>\n<ul>\n<li><code>metricLogger.logCounter(..)</code> call is a non-static call for which we can leverage mockito's <a href=\"https://javadoc.io/static/org.mockito/mockito-core/5.7.0/org/mockito/Mockito.html#22\" rel=\"nofollow noreferrer\">verification with timeout</a></li>\n<li>and since it occurs <em>after</em> our static <code>MyExternalServiceAccessor.myMethod(..)</code> call so we can be sure that if <code>logCounter</code> call has happened then <code>myMethod</code> call must've also happened\n<ul>\n<li><em>although above statement is true only when we are unit-testing an error scenario where <code>myMethod</code> throws an exception</em></li>\n</ul>\n</li>\n</ul>\n<p>Therefore for an error scenario we write our test like this for waiting 100ms  before validating that expected methods invoked</p>\n<pre><code>verify(mockMetricLogger, timeout(100).times(1)).logCounter(eq(&quot;MyExternalServiceAccessor.myMethod:failure&quot;), eq(1));\nverifyStatic();\nMyExternalService.myMethod(eq(arg1), eq(arg2));\n</code></pre>\n<p>And for non-error scenario we can use the trick suggested in <a href=\"https://stackoverflow.com/a/64460897/3679900\">this thread</a> to wait-and-verify that our mock was called 'zero' times, i.e., not called even after waiting</p>\n<pre><code>verify(mockMetricLogger, timeout(100).times(0)).logCounter(eq(&quot;MyExternalServiceAccessor.myMethod:failure&quot;), eq(1));\nverifyStatic();\nMyExternalService.myMethod(eq(arg1), eq(arg2));\n</code></pre>\n<p>So far my tests have been passing, but since (a) they were not too flaky to begin with and (b) we're dealing with notorious async issues that can show up intermittently, I'm not certain if for non-error scenarios the flakiness has been completely eliminated or not.</p>\n<p><em>(I can of course completely do away with the flakiness for example by also publishing a counter metric in success scenario and using that as a proxy, but don't want to do that just yet)</em></p>\n<h5>UPDATE-1</h5>\n<p>I also had to test out the scenario where this entire block of async code is never called (due to upstream conditional expressions preventing flow from reaching up till this point where async block is triggered)</p>\n<p>For that I leveraged <code>Mockito.never()</code> as suggested in <a href=\"https://stackoverflow.com/q/50255565/3679900\">this thread</a></p>\n<pre><code>verify(mockMetricLogger, timeout(100).times(0)).logCounter(eq(&quot;MyExternalServiceAccessor.myMethod:failure&quot;), eq(1));\nverifyStatic(never());\nMyExternalService.myMethod(eq(arg1), eq(arg2));\n</code></pre>\n"}],"comment_count":3,"is_answered":false,"view_count":47,"answer_count":1,"score":0,"last_activity_date":1701097330,"creation_date":1701089518,"last_edit_date":1701091696,"question_id":77557045,"body_markdown":"I&#39;m making call to an external system via a `static` method\r\n\r\n```\r\nMyExternalServiceAccessor.myMethod(param1, param2);\r\n```\r\n\r\nAnd so far I&#39;ve been [unit-testing above using `PowerMockito`&#39;s `verifyStatic`][1] as follows\r\n\r\n```\r\nimport static org.mockito.Matchers.eq;\r\nimport static org.powermock.api.mockito.PowerMockito.mockStatic;\r\nimport static org.powermock.api.mockito.PowerMockito.verifyStatic;\r\n..\r\n\r\nmockStatic(MyExternalServiceAccessor.class);\r\n\r\n..\r\n\r\nverifyStatic();\r\nMyExternalService.myMethod(eq(arg1), eq(arg2));\r\n```\r\n\r\n---\r\n\r\nI now want to make above call &#39;async&#39; (*best-effort* call with *fire-and-forget* semantics, I don&#39;t care for the response); so taking reference from [here][2] I wrapped it inside `CompletableFuture.runAsync(..)` as follows\r\n\r\n```\r\nimport java.util.concurrent.CompletableFuture;\r\n\r\nCompletableFuture.runAsync(() -&gt; {\r\n    MyExternalServiceAccessor.myMethod(param1, param2);\r\n});\r\n```\r\n\r\nBut with this change as expected the unit-test has become flaky because due to the async invocation of `MyExternalServiceAccessor.myMethod(..)`, sometimes validation fails with following error\r\n\r\n```\r\njava.lang.RuntimeException: Wanted but not invoked com.company.team.service.serviceutils.MyClass.myFunctionBeingUnitTested(\r\n    null,\r\n    null\r\n);\r\nActually, there were zero interactions with this mock.\r\n```\r\n\r\n----\r\n\r\n - I&#39;m aware that `Mockito` supports [*verification with timeout*][3] for *non-`static`* methods; is there a `PowerMockito` (or `Mockito`) equivalent of the same for `static` methods?\r\n - If not then what are the alternatives? Can I cleverly rewrite my code and tests in a way to keep it async while still having unit-tests pass everytime?\r\n\r\n\r\n  [1]: https://import%20static%20org.powermock.api.mockito.PowerMockito.mockStatic;%20import%20static%20org.powermock.api.mockito.PowerMockito.verifyStatic;\r\n  [2]: https://sumantmishra.medium.com/java-asynchronous-process-using-completablefuture-755f08d98106\r\n  [3]: https://javadoc.io/static/org.mockito/mockito-core/5.7.0/org/mockito/Mockito.html#22","link":"https://stackoverflow.com/questions/77557045/powermockito-verifystatic-validating-async-call-to-static-method","title":"PowerMockito verifyStatic: validating async call to static method","body":"<p>I'm making call to an external system via a <code>static</code> method</p>\n<pre><code>MyExternalServiceAccessor.myMethod(param1, param2);\n</code></pre>\n<p>And so far I've been <a href=\"https://import%20static%20org.powermock.api.mockito.PowerMockito.mockStatic;%20import%20static%20org.powermock.api.mockito.PowerMockito.verifyStatic;\" rel=\"nofollow noreferrer\">unit-testing above using <code>PowerMockito</code>'s <code>verifyStatic</code></a> as follows</p>\n<pre><code>import static org.mockito.Matchers.eq;\nimport static org.powermock.api.mockito.PowerMockito.mockStatic;\nimport static org.powermock.api.mockito.PowerMockito.verifyStatic;\n..\n\nmockStatic(MyExternalServiceAccessor.class);\n\n..\n\nverifyStatic();\nMyExternalService.myMethod(eq(arg1), eq(arg2));\n</code></pre>\n<hr />\n<p>I now want to make above call 'async' (<em>best-effort</em> call with <em>fire-and-forget</em> semantics, I don't care for the response); so taking reference from <a href=\"https://sumantmishra.medium.com/java-asynchronous-process-using-completablefuture-755f08d98106\" rel=\"nofollow noreferrer\">here</a> I wrapped it inside <code>CompletableFuture.runAsync(..)</code> as follows</p>\n<pre><code>import java.util.concurrent.CompletableFuture;\n\nCompletableFuture.runAsync(() -&gt; {\n    MyExternalServiceAccessor.myMethod(param1, param2);\n});\n</code></pre>\n<p>But with this change as expected the unit-test has become flaky because due to the async invocation of <code>MyExternalServiceAccessor.myMethod(..)</code>, sometimes validation fails with following error</p>\n<pre><code>java.lang.RuntimeException: Wanted but not invoked com.company.team.service.serviceutils.MyClass.myFunctionBeingUnitTested(\n    null,\n    null\n);\nActually, there were zero interactions with this mock.\n</code></pre>\n<hr />\n<ul>\n<li>I'm aware that <code>Mockito</code> supports <a href=\"https://javadoc.io/static/org.mockito/mockito-core/5.7.0/org/mockito/Mockito.html#22\" rel=\"nofollow noreferrer\"><em>verification with timeout</em></a> for <em>non-<code>static</code></em> methods; is there a <code>PowerMockito</code> (or <code>Mockito</code>) equivalent of the same for <code>static</code> methods?</li>\n<li>If not then what are the alternatives? Can I cleverly rewrite my code and tests in a way to keep it async while still having unit-tests pass everytime?</li>\n</ul>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comment_count":0,"is_answered":false,"view_count":50,"answer_count":0,"score":0,"last_activity_date":1701096878,"creation_date":1701096849,"last_edit_date":1701096878,"question_id":77557834,"body_markdown":"I have a little problem I can&#39;t work around. The idea is to have some generic controllers (and services) like this:\r\n\r\n**GenericPagingController** class that has a method like this: &lt;br&gt;\r\n`public ResponseEntity&lt;Page&lt;T1&gt;&gt; GetEntityPagedList(int page)`\r\n\r\n**GenericListController** class that has a method: &lt;br&gt;\r\n`public ResponseEntity&lt;List&lt;T1&gt;&gt; GetEntityList(int page)`\r\n\r\nand a **GenericCrudController** with methods like this: &lt;br&gt;\r\n`@PostMapping(&quot;&quot;) public ResponseEntity&lt;T1&gt; AddEntity(@RequestBody T3 entityDto)` &lt;br&gt;\r\n`@PutMapping(&quot;/{id}&quot;) public ResponseEntity&lt;T1&gt; UpdateEntity(@PathVariable ID id, @RequestBody T3 entityDto)` &lt;br&gt;\r\n`@DeleteMapping(&quot;/{id}&quot;) public ResponseEntity&lt;String&gt; DeleteEntity(@PathVariable ID id)` &lt;br&gt;\r\n\r\nAnd I want to have a base controller that uses those generic blocks something like this:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;testing&quot;)\r\npublic class TestingController {\r\n    private GenericPagingController&lt;Test, TestRepository, Long&gt; genericPagingController;\r\n    private GenericCrudController&lt;Test, TestRepository, Long, TestRequestDTO&gt; genericCrudController;\r\n    public TestingController(TestRepository repository) {\r\n        genericPagingService = new GenericPagingService&lt;&gt;(repository);\r\n        genericCrudController = new GenericCrudController&lt;&gt;(repository);\r\n    }\r\n}\r\n```\r\n\r\nIs there a way to achieve this? I don&#39;t want to use interfaces, because I have a plenty of pretty much identical controllers and I think using some composition stuff can work\r\n\r\n\r\nI originally tried to extend multiple generic classes, but obviously Java can&#39;t do that.\r\nI also tried to come up with something with interfaces, but I don&#39;t think it can work well in this case","link":"https://stackoverflow.com/questions/77557834/spring-rest-controller-but-with-composition","title":"Spring Rest Controller, but with composition","body":"<p>I have a little problem I can't work around. The idea is to have some generic controllers (and services) like this:</p>\n<p><strong>GenericPagingController</strong> class that has a method like this: <br>\n<code>public ResponseEntity&lt;Page&lt;T1&gt;&gt; GetEntityPagedList(int page)</code></p>\n<p><strong>GenericListController</strong> class that has a method: <br>\n<code>public ResponseEntity&lt;List&lt;T1&gt;&gt; GetEntityList(int page)</code></p>\n<p>and a <strong>GenericCrudController</strong> with methods like this: <br>\n<code>@PostMapping(&quot;&quot;) public ResponseEntity&lt;T1&gt; AddEntity(@RequestBody T3 entityDto)</code> <br>\n<code>@PutMapping(&quot;/{id}&quot;) public ResponseEntity&lt;T1&gt; UpdateEntity(@PathVariable ID id, @RequestBody T3 entityDto)</code> <br>\n<code>@DeleteMapping(&quot;/{id}&quot;) public ResponseEntity&lt;String&gt; DeleteEntity(@PathVariable ID id)</code> <br></p>\n<p>And I want to have a base controller that uses those generic blocks something like this:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;testing&quot;)\npublic class TestingController {\n    private GenericPagingController&lt;Test, TestRepository, Long&gt; genericPagingController;\n    private GenericCrudController&lt;Test, TestRepository, Long, TestRequestDTO&gt; genericCrudController;\n    public TestingController(TestRepository repository) {\n        genericPagingService = new GenericPagingService&lt;&gt;(repository);\n        genericCrudController = new GenericCrudController&lt;&gt;(repository);\n    }\n}\n</code></pre>\n<p>Is there a way to achieve this? I don't want to use interfaces, because I have a plenty of pretty much identical controllers and I think using some composition stuff can work</p>\n<p>I originally tried to extend multiple generic classes, but obviously Java can't do that.\nI also tried to come up with something with interfaces, but I don't think it can work well in this case</p>\n"},{"tags":["java","r","rjava"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701185208,"post_id":77555939,"comment_id":136742337,"body_markdown":"Thank you for your suggestion.  I tried to change the double to Double using rJava&#39;s functions:  .jcall(curvefit_dbl, returnSig = &quot;S&quot;, method = &quot;performCurveFitting&quot;, \n            .jcast(.jarray(c(0.0001, 0.002, 0.01, 0.5)), &quot;[Ljava/lang/Double;&quot;, check = FALSE, convert.array = TRUE),\n            .jcast(.jarray(c(2,4,6,100)), &quot;[Ljava/lang/Double;&quot;, check = FALSE, convert.array = TRUE), \n            .jnew( &quot;java/lang/Double&quot;, 5), \n            .jnew(&quot;java/lang/Double&quot;, 10))","link":"https://stackoverflow.com/questions/77544492/rjava-jcall-java-method-parameters-input-issue-with-signature-ddddljava-la/77555939#comment136742337_77555939","body":"Thank you for your suggestion.  I tried to change the double to Double using rJava&#39;s functions:  .jcall(curvefit_dbl, returnSig = &quot;S&quot;, method = &quot;performCurveFitting&quot;,              .jcast(.jarray(c(0.0001, 0.002, 0.01, 0.5)), &quot;[Ljava/lang/Double;&quot;, check = FALSE, convert.array = TRUE),             .jcast(.jarray(c(2,4,6,100)), &quot;[Ljava/lang/Double;&quot;, check = FALSE, convert.array = TRUE),              .jnew( &quot;java/lang/Double&quot;, 5),              .jnew(&quot;java/lang/Double&quot;, 10))"},{"score":0,"post_type":"answer","creation_date":1701185394,"post_id":77555939,"comment_id":136742388,"body_markdown":"The signature looks to be correct but JRE crashed.  # Problematic frame:\n# j  gov.nih.ncats.ifx.qhts.curvefitting.service.CurveFittingServiceImpl.toLog10([Ljava/lang/Double;)[D+19  any idea? Thank you!","link":"https://stackoverflow.com/questions/77544492/rjava-jcall-java-method-parameters-input-issue-with-signature-ddddljava-la/77555939#comment136742388_77555939","body":"The signature looks to be correct but JRE crashed.  # Problematic frame: # j  gov.nih.ncats.ifx.qhts.curvefitting.service.CurveFittingServ&zwnj;&#8203;iceImpl.toLog10([Lja&zwnj;&#8203;va/lang/Double;)[D+1&zwnj;&#8203;9  any idea? Thank you!"},{"score":0,"post_type":"answer","creation_date":1701190728,"post_id":77555939,"comment_id":136743567,"body_markdown":"I am pretty sure it will be easier to force your `Java` code to be compliant with `R`. Note that below the `R` level there is probably some nasty `JNI` stuff.","link":"https://stackoverflow.com/questions/77544492/rjava-jcall-java-method-parameters-input-issue-with-signature-ddddljava-la/77555939#comment136743567_77555939","body":"I am pretty sure it will be easier to force your <code>Java</code> code to be compliant with <code>R</code>. Note that below the <code>R</code> level there is probably some nasty <code>JNI</code> stuff."},{"score":1,"post_type":"answer","creation_date":1701192260,"post_id":77555939,"comment_id":136743905,"body_markdown":"thanks a lot! I modified the java code to accept double as the input and it is working!","link":"https://stackoverflow.com/questions/77544492/rjava-jcall-java-method-parameters-input-issue-with-signature-ddddljava-la/77555939#comment136743905_77555939","body":"thanks a lot! I modified the java code to accept double as the input and it is working!"}],"comment_count":4,"score":1,"last_activity_date":1701078655,"creation_date":1701078655,"answer_id":77555939,"question_id":77544492,"body_markdown":"The reason here is that your code looks for a method with `double` and you are defining it with `Double`\r\n\r\n```\r\n&gt; javap -s  Simple\r\nCompiled from &quot;Simple.java&quot;\r\npublic class Simple {\r\n  public Simple();\r\n    descriptor: ()V\r\n\r\n  public static java.lang.String performCurveFitting(java.lang.Double[], java.lang.Double[], java.lang.Double, java.lang.Double);\r\n    descriptor: ([Ljava/lang/Double;[Ljava/lang/Double;Ljava/lang/Double;Ljava/lang/Double;)Ljava/lang/String;\r\n\r\n  public static java.lang.String performCurveFitting2(double[], double[], double, double);\r\n    descriptor: ([D[DDD)Ljava/lang/String;\r\n}\r\n}\r\n```\r\n\r\nTry using `double` instead. Should be visible to your `R` code.\r\n\r\nWith `javap` command you can see the exact signature of your code. As you can see. Your signature is:\r\n\r\n```\r\n[Ljava/lang/Double;[Ljava/lang/Double;Ljava/lang/Double;Ljava/lang/Double;)Ljava/lang/String;\r\n```\r\n\r\nwhile your `R` code is looking for:\r\n\r\n```\r\n[D[DDD)Ljava/lang/String; \r\n```\r\n\r\nMost probably, `R` uses small Java&#39;s `doubles` whenever you are using `R` doubles passed to `Java`.","link":"https://stackoverflow.com/questions/77544492/rjava-jcall-java-method-parameters-input-issue-with-signature-ddddljava-la/77555939#77555939","title":"rJava .jcall java method parameters input issue: with signature ([D[DDD)Ljava/lang/String; not found","body":"<p>The reason here is that your code looks for a method with <code>double</code> and you are defining it with <code>Double</code></p>\n<pre><code>&gt; javap -s  Simple\nCompiled from &quot;Simple.java&quot;\npublic class Simple {\n  public Simple();\n    descriptor: ()V\n\n  public static java.lang.String performCurveFitting(java.lang.Double[], java.lang.Double[], java.lang.Double, java.lang.Double);\n    descriptor: ([Ljava/lang/Double;[Ljava/lang/Double;Ljava/lang/Double;Ljava/lang/Double;)Ljava/lang/String;\n\n  public static java.lang.String performCurveFitting2(double[], double[], double, double);\n    descriptor: ([D[DDD)Ljava/lang/String;\n}\n}\n</code></pre>\n<p>Try using <code>double</code> instead. Should be visible to your <code>R</code> code.</p>\n<p>With <code>javap</code> command you can see the exact signature of your code. As you can see. Your signature is:</p>\n<pre><code>[Ljava/lang/Double;[Ljava/lang/Double;Ljava/lang/Double;Ljava/lang/Double;)Ljava/lang/String;\n</code></pre>\n<p>while your <code>R</code> code is looking for:</p>\n<pre><code>[D[DDD)Ljava/lang/String; \n</code></pre>\n<p>Most probably, <code>R</code> uses small Java's <code>doubles</code> whenever you are using <code>R</code> doubles passed to <code>Java</code>.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":30,"answer_count":1,"score":0,"last_activity_date":1701095440,"creation_date":1700843067,"last_edit_date":1701095440,"question_id":77544492,"body_markdown":"Here is my original java code with method of &quot;performCurveFitting&quot; method\r\n```\r\npublic static String performCurveFitting(Double[] conc, Double[] resp, Double classificationSD, Double minYrange) {\r\n        CurveFittingService fittingService = new CurveFittingServiceImpl();\r\n        FittingResult fittingResult = fittingService.doFit(conc, resp, classificationSD, minYrange);\r\n        \r\n        // Convert the fitting result to a String representation\r\n        return fittingResult.toString(); // Assuming FittingResult has overridden toString() method\r\n    }\r\n```\r\n\r\nIn R code, \r\n\r\nI did the following commands with no errors\r\n\r\n```\r\n.jinit(&#39;.&#39;)\r\n.jaddClassPath(&#39;inst/java/curve-fitting.jar&#39;)\r\ncurvefit &lt;- .jnew(&#39;gov/nih/ncats/ifx/qhts/curvefitting/CurveClassFit&#39;)\r\n.DollarNames(curvefit)\r\n```\r\n\r\nHowever, when I tested the method using the following command\r\n\r\n```\r\n.jcall(curvefit, returnSig = &quot;Ljava/lang/String;&quot;, method = &quot;performCurveFitting&quot;, c(5.5707525685E-10, 4.5123095805E-8, 1.2183235867E-6, 3.2894736842E-5),c(2,4,6,100), 5, 10)\r\n```\r\n\r\nI got this error\r\n&gt; Error in .jcall(curvefit, returnSig = &quot;Ljava/lang/String;&quot;, method = &quot;performCurveFitting&quot;,  : \r\n  method performCurveFitting with signature ([D[DDD)Ljava/lang/String; not found\r\n\r\nHow can I fix this error?\r\n\r\nThank you!\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77544492/rjava-jcall-java-method-parameters-input-issue-with-signature-ddddljava-la","title":"rJava .jcall java method parameters input issue: with signature ([D[DDD)Ljava/lang/String; not found","body":"<p>Here is my original java code with method of &quot;performCurveFitting&quot; method</p>\n<pre><code>public static String performCurveFitting(Double[] conc, Double[] resp, Double classificationSD, Double minYrange) {\n        CurveFittingService fittingService = new CurveFittingServiceImpl();\n        FittingResult fittingResult = fittingService.doFit(conc, resp, classificationSD, minYrange);\n        \n        // Convert the fitting result to a String representation\n        return fittingResult.toString(); // Assuming FittingResult has overridden toString() method\n    }\n</code></pre>\n<p>In R code,</p>\n<p>I did the following commands with no errors</p>\n<pre><code>.jinit('.')\n.jaddClassPath('inst/java/curve-fitting.jar')\ncurvefit &lt;- .jnew('gov/nih/ncats/ifx/qhts/curvefitting/CurveClassFit')\n.DollarNames(curvefit)\n</code></pre>\n<p>However, when I tested the method using the following command</p>\n<pre><code>.jcall(curvefit, returnSig = &quot;Ljava/lang/String;&quot;, method = &quot;performCurveFitting&quot;, c(5.5707525685E-10, 4.5123095805E-8, 1.2183235867E-6, 3.2894736842E-5),c(2,4,6,100), 5, 10)\n</code></pre>\n<p>I got this error</p>\n<blockquote>\n<p>Error in .jcall(curvefit, returnSig = &quot;Ljava/lang/String;&quot;, method = &quot;performCurveFitting&quot;,  :\nmethod performCurveFitting with signature ([D[DDD)Ljava/lang/String; not found</p>\n</blockquote>\n<p>How can I fix this error?</p>\n<p>Thank you!</p>\n"},{"tags":["java","gradle","module","okhttp"],"comments":[{"score":0,"post_type":"question","creation_date":1701025342,"post_id":77008227,"comment_id":136721074,"body_markdown":"Works for me...","link":"https://stackoverflow.com/questions/77008227/java-okhttp-i-get-these-exception-java-lang-noclassdeffounderror-okio-buffer#comment136721074_77008227","body":"Works for me..."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1700775024,"last_edit_date":1700775024,"creation_date":1700606662,"answer_id":77526350,"question_id":77008227,"body_markdown":"What worked for me was this version combination:\r\n\r\n* `okio-3.5.0`\r\n* `okio-jvm-3.5.0`\r\n* `okhttp-4.11.0`\r\n* `kotlin-stdlib-1.6.20`","link":"https://stackoverflow.com/questions/77008227/java-okhttp-i-get-these-exception-java-lang-noclassdeffounderror-okio-buffer/77526350#77526350","title":"java, okhttp, I get these exception: java.lang.NoClassDefFoundError: okio/Buffer, without module not","body":"<p>What worked for me was this version combination:</p>\n<ul>\n<li><code>okio-3.5.0</code></li>\n<li><code>okio-jvm-3.5.0</code></li>\n<li><code>okhttp-4.11.0</code></li>\n<li><code>kotlin-stdlib-1.6.20</code></li>\n</ul>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701158510,"post_id":77557654,"comment_id":136737387,"body_markdown":"is module support a true need: yes, i added it to all progs.","link":"https://stackoverflow.com/questions/77008227/java-okhttp-i-get-these-exception-java-lang-noclassdeffounderror-okio-buffer/77557654#comment136737387_77557654","body":"is module support a true need: yes, i added it to all progs."},{"score":0,"post_type":"answer","creation_date":1701166043,"post_id":77557654,"comment_id":136738741,"body_markdown":"Since `requires okio;` loads the `okio-jvm` declared module, I&#39;m pretty sure the problem is that the `okio` library doesn&#39;t get his classes loaded since both shared the same `package`. Did you try upgrading to latest version of okhttp / okio / okio-jvm / kotlin-stdlib ?","link":"https://stackoverflow.com/questions/77008227/java-okhttp-i-get-these-exception-java-lang-noclassdeffounderror-okio-buffer/77557654#comment136738741_77557654","body":"Since <code>requires okio;</code> loads the <code>okio-jvm</code> declared module, I&#39;m pretty sure the problem is that the <code>okio</code> library doesn&#39;t get his classes loaded since both shared the same <code>package</code>. Did you try upgrading to latest version of okhttp / okio / okio-jvm / kotlin-stdlib ?"}],"comment_count":2,"score":0,"last_activity_date":1701095319,"creation_date":1701095319,"answer_id":77557654,"question_id":77008227,"body_markdown":"Not sure it&#39;ll answer your question but found this [issue][1] in okhttp repository discussing that okio and related dependencies does not support Java 9 Platform Module System (aka JPMS).\r\n\r\nAlso see that [other issue][2] which is related to the first one.\r\n\r\nMoreover, when you look at `okio-3.3.0.jar`&#39;s `MANIFEST.MF` file, you&#39;ll find that there&#39;s no `Automatic-Module-Name` directive (which is `Automatic-Module-Name: okio` in `okio-jvm-3.3.0.jar`). Since the `Builder` class is located in the okio&#39;s jar, that would explain why it can&#39;t resolve it with current configuration.\r\n\r\nKnowing that, is module support a *true* need in your project since it works without it ? \r\n\r\n  [1]: https://github.com/square/okhttp/issues/4184\r\n  [2]: https://github.com/square/okhttp/issues/6857","link":"https://stackoverflow.com/questions/77008227/java-okhttp-i-get-these-exception-java-lang-noclassdeffounderror-okio-buffer/77557654#77557654","title":"java, okhttp, I get these exception: java.lang.NoClassDefFoundError: okio/Buffer, without module not","body":"<p>Not sure it'll answer your question but found this <a href=\"https://github.com/square/okhttp/issues/4184\" rel=\"nofollow noreferrer\">issue</a> in okhttp repository discussing that okio and related dependencies does not support Java 9 Platform Module System (aka JPMS).</p>\n<p>Also see that <a href=\"https://github.com/square/okhttp/issues/6857\" rel=\"nofollow noreferrer\">other issue</a> which is related to the first one.</p>\n<p>Moreover, when you look at <code>okio-3.3.0.jar</code>'s <code>MANIFEST.MF</code> file, you'll find that there's no <code>Automatic-Module-Name</code> directive (which is <code>Automatic-Module-Name: okio</code> in <code>okio-jvm-3.3.0.jar</code>). Since the <code>Builder</code> class is located in the okio's jar, that would explain why it can't resolve it with current configuration.</p>\n<p>Knowing that, is module support a <em>true</em> need in your project since it works without it ?</p>\n"}],"comment_count":1,"is_answered":false,"view_count":482,"answer_count":2,"score":4,"last_activity_date":1701095319,"creation_date":1693399957,"last_edit_date":1693428886,"question_id":77008227,"body_markdown":"I use java 17 and okhttp-4.9.3. The call is:\r\n\r\n```java\r\nOkHttpClient httpClient = new OkHttpClient.Builder().build();\r\n```\r\n\r\nRunning the program, i get the exception:\r\n\r\n```\r\nException in thread &quot;ReadStationsThread&quot; java.lang.NoClassDefFoundError: okio/Buffer\r\nat okhttp3@4.9.3/okhttp3.ResponseBody$Companion.create(ResponseBody.kt:248)\r\nat okhttp3@4.9.3/okhttp3.ResponseBody$Companion.create$default(ResponseBody.kt:247)\r\nat okhttp3@4.9.3/okhttp3.internal.Util.\\&lt;clinit\\&gt;(Util.kt:65)\r\n```\r\n\r\nThe program can be build without error. I use gradle with these dependencies:\r\n\r\n```\r\nimplementation &#39;:okhttp-4.9.3&#39;\r\nimplementation &#39;:okio-3.3.0&#39;\r\nimplementation &#39;:okio-jvm-3.3.0&#39;\r\nimplementation &#39;:kotlin-stdlib-1.8.21&#39;\r\n```\r\n\r\nin the module-info.java is these:\r\n\r\n```\r\nrequires okhttp3; \r\nrequires okio; \r\nrequires kotlin.stdlib;\r\n```\r\n\r\nrunning the program, calls the exception. When i remove the mdule-info.java file, also running the program without modules, it works without problems. Anny idea what the module-info misses?","link":"https://stackoverflow.com/questions/77008227/java-okhttp-i-get-these-exception-java-lang-noclassdeffounderror-okio-buffer","title":"java, okhttp, I get these exception: java.lang.NoClassDefFoundError: okio/Buffer, without module not","body":"<p>I use java 17 and okhttp-4.9.3. The call is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>OkHttpClient httpClient = new OkHttpClient.Builder().build();\n</code></pre>\n<p>Running the program, i get the exception:</p>\n<pre><code>Exception in thread &quot;ReadStationsThread&quot; java.lang.NoClassDefFoundError: okio/Buffer\nat okhttp3@4.9.3/okhttp3.ResponseBody$Companion.create(ResponseBody.kt:248)\nat okhttp3@4.9.3/okhttp3.ResponseBody$Companion.create$default(ResponseBody.kt:247)\nat okhttp3@4.9.3/okhttp3.internal.Util.\\&lt;clinit\\&gt;(Util.kt:65)\n</code></pre>\n<p>The program can be build without error. I use gradle with these dependencies:</p>\n<pre><code>implementation ':okhttp-4.9.3'\nimplementation ':okio-3.3.0'\nimplementation ':okio-jvm-3.3.0'\nimplementation ':kotlin-stdlib-1.8.21'\n</code></pre>\n<p>in the module-info.java is these:</p>\n<pre><code>requires okhttp3; \nrequires okio; \nrequires kotlin.stdlib;\n</code></pre>\n<p>running the program, calls the exception. When i remove the mdule-info.java file, also running the program without modules, it works without problems. Anny idea what the module-info misses?</p>\n"},{"tags":["java","methods","draw"],"comments":[{"score":1,"post_type":"question","creation_date":1701107058,"post_id":77557579,"comment_id":136731446,"body_markdown":"Add `System.out.println (` code at various key locations in your code. Have those line output where in the program they are along with values of variables that are key at those points. And / or use a debugger: Set breakpoints, and run the code (debugging mode). When the run hits a break point, check the values of variables. Run the code one-step-at-a-time while monitoring the values of variables and noting where the code goes.","link":"https://stackoverflow.com/questions/77557579/im-unsure-of-how-i-should-be-calling-my-methods-to-draw-my-snake-with-stddraw#comment136731446_77557579","body":"Add <code>System.out.println (</code> code at various key locations in your code. Have those line output where in the program they are along with values of variables that are key at those points. And / or use a debugger: Set breakpoints, and run the code (debugging mode). When the run hits a break point, check the values of variables. Run the code one-step-at-a-time while monitoring the values of variables and noting where the code goes."}],"comment_count":1,"is_answered":false,"view_count":20,"answer_count":0,"score":0,"last_activity_date":1701094541,"creation_date":1701094541,"question_id":77557579,"body_markdown":"I&#39;m using StdDraw to create a snake program. When I run my program it jumps to the game over display without actually entering the game. I&#39;m sure there are quite a few things I have to fix, but please point me in the right direction\r\n\r\n\r\n```\r\n\r\nimport java.awt.event.KeyEvent;\r\nimport java.awt.Color;\r\nimport java.awt.Font;\r\nimport java.util.Random;\r\n\r\npublic final class Snake {\r\n   \r\n   // Enum for user input &amp; snake movement\r\n   enum Direction { UP, DOWN, LEFT, RIGHT }\r\n   private static Direction direction;\r\n   \r\n   // Declare game constants\r\n   private static int WIDTH = 800;\r\n   private static int HEIGHT = 800;\r\n   private static int UNIT_SIZE = 40;\r\n   private static int GAME_UNITS = (WIDTH * HEIGHT) / UNIT_SIZE;\r\n\r\n   // Grid for snake &amp; food coordinates\r\n   private static int[][] grid;          // Game board\r\n   private static int[] snakeX, snakeY;  // Arrays to store snake&#39;s body&#39;s coordinates\r\n   private static int foodX, foodY;      // Food&#39;s coordinates\r\n   \r\n   private static boolean gameOver;\r\n   private static int snakeLength;\r\n   private static int score;\r\n   private static Random random = new Random();\r\n   \r\n   // Main calls game methods\r\n   public static void main (final String[] args) { \r\n      StdDraw.enableDoubleBuffering();   // Smoother graphics\r\n      launchGame();                      // Launch game\r\n\r\n      // Loop to play game with functions\r\n      while (!gameOver) {\r\n         handleInput();                  // Controls\r\n         updateSnake();                  // Move snake\r\n         draw();                         // Draw game elements; snake, food, &amp; score\r\n         StdDraw.show();                 // Show graphics\r\n         StdDraw.pause (100);            // Pause to control game speed\r\n      }\r\n      \r\n      gameOverDisplay();                 // Game over display\r\n   }\r\n   \r\n   // Method initializes elements in game launch\r\n   private static void launchGame () {\r\n      // Create game window\r\n      StdDraw.setCanvasSize (WIDTH, HEIGHT);  // Canvas size\r\n      StdDraw.setXscale (0, WIDTH);           // X-axis scale\r\n      StdDraw.setYscale (0, HEIGHT);          // Y-axis scale\r\n\r\n      // Initialize game elements\r\n      direction = Direction.RIGHT;       // Default direction\r\n      gameOver = false;                  // Game over flag\r\n      snakeLength = 3;                   // Snake&#39;s initial length\r\n      score = 0;\r\n      \r\n      grid = new int[WIDTH / UNIT_SIZE][HEIGHT / UNIT_SIZE];\r\n      snakeX = new int[GAME_UNITS];      // Store x position of snake&#39;s body\r\n      snakeY = new int[GAME_UNITS];             // Store y position of snake&#39;s body\r\n      \r\n      // Initialize snake&#39;s position\r\n      for (int i = 0; i &lt; snakeLength; i++) {\r\n         // Place snake in the middle of the board\r\n         snakeX[i] = GAME_UNITS / 2 - i;   // Snake&#39;s body blocks\r\n         snakeY[i] = GAME_UNITS / 2;  \r\n      }\r\n      \r\n      spawnFood();\r\n   }\r\n   \r\n   // Method handles user input &amp; direction\r\n   private static void handleInput () {\r\n      // Check for arrow key presses\r\n      if (StdDraw.isKeyPressed (KeyEvent.VK_UP) &amp;&amp; direction != Direction.DOWN) {\r\n         direction = Direction.UP;\r\n      } else if (StdDraw.isKeyPressed (KeyEvent.VK_DOWN) &amp;&amp; direction != Direction.UP) {\r\n         direction = Direction.DOWN;\r\n      } else if (StdDraw.isKeyPressed (KeyEvent.VK_LEFT) &amp;&amp; direction != Direction.RIGHT) {\r\n         direction = Direction.LEFT;\r\n      } else if (StdDraw.isKeyPressed (KeyEvent.VK_RIGHT) &amp;&amp; direction != Direction.LEFT) {\r\n         direction = Direction.RIGHT;\r\n      }\r\n   }\r\n   \r\n   // Method updates game elements\r\n   private static void updateSnake () {\r\n      // Move snake&#39;s body\r\n      for (int i = snakeLength - 1; i &gt; 0; i--) {\r\n         // Block updates to next block&#39;s last position\r\n         snakeX[i] = snakeX[i - 1];\r\n         snakeY[i] = snakeY[i - 1];\r\n      }\r\n\r\n      // Move snake&#39;s head\r\n      if (direction == Direction.UP) {\r\n         snakeY[0]++;\r\n      } else if (direction == Direction.DOWN) {\r\n         snakeY[0]--;\r\n      } else if (direction == Direction.LEFT) {\r\n         snakeX[0]--;\r\n      } else if (direction == Direction.RIGHT) {\r\n         snakeX[0]++;\r\n      }  \r\n      \r\n      // Check for collisions\r\n      checkCollisions();\r\n      \r\n      // Check if food is eaten\r\n      if (snakeX[0] == foodX &amp;&amp; snakeY[0] == foodY) {\r\n         snakeLength++;\r\n         score++;\r\n         spawnFood();\r\n      }\r\n   }\r\n   \r\n   private static void checkCollisions () {\r\n      // Check if snake collides with walls\r\n      if (snakeX[0] &lt; 0 || snakeX[0] &gt;= WIDTH || snakeY[0] &lt; 0 || snakeY[0] &gt;= HEIGHT) {\r\n         gameOver = true;\r\n      }\r\n      \r\n      // Check if snake collides with itself\r\n      for (int i = 1; i &lt; snakeLength; i++) {\r\n         if (snakeX[0] == snakeX[i] || snakeY[0] == snakeY[i]) {\r\n            gameOver = true;\r\n         }\r\n      }\r\n   }\r\n   \r\n   private static void spawnFood () {\r\n      foodX = random.nextInt (WIDTH / UNIT_SIZE);\r\n      foodY = random.nextInt (HEIGHT / UNIT_SIZE);\r\n   }\r\n   \r\n   private static void draw () {\r\n      StdDraw.clear();\r\n      \r\n      // Draw snake\r\n      StdDraw.setPenColor (Color.GREEN);\r\n      for (int i = 0; i &lt; snakeLength; i++) {\r\n         StdDraw.filledSquare (snakeX[i] * UNIT_SIZE + UNIT_SIZE / 2.0,\r\n               snakeY[i] * UNIT_SIZE + UNIT_SIZE / 2.0, UNIT_SIZE / 2.0);\r\n      }      \r\n      \r\n      // Draw food\r\n      StdDraw.setPenColor (Color.RED); \r\n      StdDraw.filledSquare (foodX * UNIT_SIZE + UNIT_SIZE / 2.0,\r\n            foodY * UNIT_SIZE + UNIT_SIZE / 2.0, UNIT_SIZE / 2.0);      \r\n      \r\n      // Display score\r\n      StdDraw.setPenColor (Color.WHITE);\r\n      StdDraw.setFont (new Font (&quot;Arial&quot;, Font.BOLD, 20));\r\n      StdDraw.text (700, 780, &quot;Score: &quot; + score);      \r\n   }\r\n   \r\n   // Game over display\r\n   private static void gameOverDisplay () {\r\n      StdDraw.clear();\r\n\r\n      StdDraw.setPenColor (Color.BLACK);\r\n      StdDraw.setFont (new Font (&quot;Arial&quot;, Font.BOLD, 40));\r\n      StdDraw.text (400, 400, &quot;Game Over!&quot;);\r\n      StdDraw.text (400, 350, &quot;Score: &quot; + score);\r\n      StdDraw.setFont(new Font (&quot;Arial&quot;, Font.PLAIN, 20));\r\n      StdDraw.text (400, 300, &quot;Press Enter to Play Again&quot;);\r\n      \r\n      StdDraw.show();\r\n      StdDraw.pause (100);\r\n      \r\n      if (StdDraw.isKeyPressed (KeyEvent.VK_ENTER)) {\r\n         StdDraw.clear();\r\n         launchGame();\r\n      }\r\n   }\r\n}\r\n```\r\n\r\n\r\nThis is what I have so far. It&#39;s a work in progress but I want to start with actually getting my snake moving. Thank you","link":"https://stackoverflow.com/questions/77557579/im-unsure-of-how-i-should-be-calling-my-methods-to-draw-my-snake-with-stddraw","title":"I&#39;m unsure of how I should be calling my methods to draw my snake with StdDraw","body":"<p>I'm using StdDraw to create a snake program. When I run my program it jumps to the game over display without actually entering the game. I'm sure there are quite a few things I have to fix, but please point me in the right direction</p>\n<pre><code>\nimport java.awt.event.KeyEvent;\nimport java.awt.Color;\nimport java.awt.Font;\nimport java.util.Random;\n\npublic final class Snake {\n   \n   // Enum for user input &amp; snake movement\n   enum Direction { UP, DOWN, LEFT, RIGHT }\n   private static Direction direction;\n   \n   // Declare game constants\n   private static int WIDTH = 800;\n   private static int HEIGHT = 800;\n   private static int UNIT_SIZE = 40;\n   private static int GAME_UNITS = (WIDTH * HEIGHT) / UNIT_SIZE;\n\n   // Grid for snake &amp; food coordinates\n   private static int[][] grid;          // Game board\n   private static int[] snakeX, snakeY;  // Arrays to store snake's body's coordinates\n   private static int foodX, foodY;      // Food's coordinates\n   \n   private static boolean gameOver;\n   private static int snakeLength;\n   private static int score;\n   private static Random random = new Random();\n   \n   // Main calls game methods\n   public static void main (final String[] args) { \n      StdDraw.enableDoubleBuffering();   // Smoother graphics\n      launchGame();                      // Launch game\n\n      // Loop to play game with functions\n      while (!gameOver) {\n         handleInput();                  // Controls\n         updateSnake();                  // Move snake\n         draw();                         // Draw game elements; snake, food, &amp; score\n         StdDraw.show();                 // Show graphics\n         StdDraw.pause (100);            // Pause to control game speed\n      }\n      \n      gameOverDisplay();                 // Game over display\n   }\n   \n   // Method initializes elements in game launch\n   private static void launchGame () {\n      // Create game window\n      StdDraw.setCanvasSize (WIDTH, HEIGHT);  // Canvas size\n      StdDraw.setXscale (0, WIDTH);           // X-axis scale\n      StdDraw.setYscale (0, HEIGHT);          // Y-axis scale\n\n      // Initialize game elements\n      direction = Direction.RIGHT;       // Default direction\n      gameOver = false;                  // Game over flag\n      snakeLength = 3;                   // Snake's initial length\n      score = 0;\n      \n      grid = new int[WIDTH / UNIT_SIZE][HEIGHT / UNIT_SIZE];\n      snakeX = new int[GAME_UNITS];      // Store x position of snake's body\n      snakeY = new int[GAME_UNITS];             // Store y position of snake's body\n      \n      // Initialize snake's position\n      for (int i = 0; i &lt; snakeLength; i++) {\n         // Place snake in the middle of the board\n         snakeX[i] = GAME_UNITS / 2 - i;   // Snake's body blocks\n         snakeY[i] = GAME_UNITS / 2;  \n      }\n      \n      spawnFood();\n   }\n   \n   // Method handles user input &amp; direction\n   private static void handleInput () {\n      // Check for arrow key presses\n      if (StdDraw.isKeyPressed (KeyEvent.VK_UP) &amp;&amp; direction != Direction.DOWN) {\n         direction = Direction.UP;\n      } else if (StdDraw.isKeyPressed (KeyEvent.VK_DOWN) &amp;&amp; direction != Direction.UP) {\n         direction = Direction.DOWN;\n      } else if (StdDraw.isKeyPressed (KeyEvent.VK_LEFT) &amp;&amp; direction != Direction.RIGHT) {\n         direction = Direction.LEFT;\n      } else if (StdDraw.isKeyPressed (KeyEvent.VK_RIGHT) &amp;&amp; direction != Direction.LEFT) {\n         direction = Direction.RIGHT;\n      }\n   }\n   \n   // Method updates game elements\n   private static void updateSnake () {\n      // Move snake's body\n      for (int i = snakeLength - 1; i &gt; 0; i--) {\n         // Block updates to next block's last position\n         snakeX[i] = snakeX[i - 1];\n         snakeY[i] = snakeY[i - 1];\n      }\n\n      // Move snake's head\n      if (direction == Direction.UP) {\n         snakeY[0]++;\n      } else if (direction == Direction.DOWN) {\n         snakeY[0]--;\n      } else if (direction == Direction.LEFT) {\n         snakeX[0]--;\n      } else if (direction == Direction.RIGHT) {\n         snakeX[0]++;\n      }  \n      \n      // Check for collisions\n      checkCollisions();\n      \n      // Check if food is eaten\n      if (snakeX[0] == foodX &amp;&amp; snakeY[0] == foodY) {\n         snakeLength++;\n         score++;\n         spawnFood();\n      }\n   }\n   \n   private static void checkCollisions () {\n      // Check if snake collides with walls\n      if (snakeX[0] &lt; 0 || snakeX[0] &gt;= WIDTH || snakeY[0] &lt; 0 || snakeY[0] &gt;= HEIGHT) {\n         gameOver = true;\n      }\n      \n      // Check if snake collides with itself\n      for (int i = 1; i &lt; snakeLength; i++) {\n         if (snakeX[0] == snakeX[i] || snakeY[0] == snakeY[i]) {\n            gameOver = true;\n         }\n      }\n   }\n   \n   private static void spawnFood () {\n      foodX = random.nextInt (WIDTH / UNIT_SIZE);\n      foodY = random.nextInt (HEIGHT / UNIT_SIZE);\n   }\n   \n   private static void draw () {\n      StdDraw.clear();\n      \n      // Draw snake\n      StdDraw.setPenColor (Color.GREEN);\n      for (int i = 0; i &lt; snakeLength; i++) {\n         StdDraw.filledSquare (snakeX[i] * UNIT_SIZE + UNIT_SIZE / 2.0,\n               snakeY[i] * UNIT_SIZE + UNIT_SIZE / 2.0, UNIT_SIZE / 2.0);\n      }      \n      \n      // Draw food\n      StdDraw.setPenColor (Color.RED); \n      StdDraw.filledSquare (foodX * UNIT_SIZE + UNIT_SIZE / 2.0,\n            foodY * UNIT_SIZE + UNIT_SIZE / 2.0, UNIT_SIZE / 2.0);      \n      \n      // Display score\n      StdDraw.setPenColor (Color.WHITE);\n      StdDraw.setFont (new Font (&quot;Arial&quot;, Font.BOLD, 20));\n      StdDraw.text (700, 780, &quot;Score: &quot; + score);      \n   }\n   \n   // Game over display\n   private static void gameOverDisplay () {\n      StdDraw.clear();\n\n      StdDraw.setPenColor (Color.BLACK);\n      StdDraw.setFont (new Font (&quot;Arial&quot;, Font.BOLD, 40));\n      StdDraw.text (400, 400, &quot;Game Over!&quot;);\n      StdDraw.text (400, 350, &quot;Score: &quot; + score);\n      StdDraw.setFont(new Font (&quot;Arial&quot;, Font.PLAIN, 20));\n      StdDraw.text (400, 300, &quot;Press Enter to Play Again&quot;);\n      \n      StdDraw.show();\n      StdDraw.pause (100);\n      \n      if (StdDraw.isKeyPressed (KeyEvent.VK_ENTER)) {\n         StdDraw.clear();\n         launchGame();\n      }\n   }\n}\n</code></pre>\n<p>This is what I have so far. It's a work in progress but I want to start with actually getting my snake moving. Thank you</p>\n"},{"tags":["java","compiler-errors","lombok"],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701092300,"creation_date":1701092300,"answer_id":77557349,"question_id":77556592,"body_markdown":"As the docs of `SuperBuilder` explain, you can&#39;t handwrite parts of the builder. It&#39;s way too complex, which is why you can&#39;t do it.\r\n\r\nif you absolutely insist, remove the handwritten `EventFinderBuilder`, throw the result through delombok (`java -jar lombok.jar delombok`), study that _very_ carefully, and then handroll things. And be aware it&#39;s not recommended. In the end wanting the complications of builders that can build across a type hierarchy with custom bells and whistles exceeds the lombok target of &quot;make boilerplate less annoying&quot; because it&#39;s no longer boilerplate at that point.\r\n","link":"https://stackoverflow.com/questions/77556592/lombok-not-compiling-an-abstract-generic-superclass/77557349#77557349","title":"Lombok not compiling an abstract generic superclass","body":"<p>As the docs of <code>SuperBuilder</code> explain, you can't handwrite parts of the builder. It's way too complex, which is why you can't do it.</p>\n<p>if you absolutely insist, remove the handwritten <code>EventFinderBuilder</code>, throw the result through delombok (<code>java -jar lombok.jar delombok</code>), study that <em>very</em> carefully, and then handroll things. And be aware it's not recommended. In the end wanting the complications of builders that can build across a type hierarchy with custom bells and whistles exceeds the lombok target of &quot;make boilerplate less annoying&quot; because it's no longer boilerplate at that point.</p>\n"},{"comment_count":0,"score":2,"last_activity_date":1701094398,"creation_date":1701094398,"answer_id":77557566,"question_id":77556592,"body_markdown":"When your class has generic type parameters, The builders that lombok generates will also have those type parameters. The builders are static classes, and so the `EventType` type parameter of `EventFinder` is not in scope in the builder classes.\r\n\r\nIf you want to write your own implementation for a part of the code that Lombok generates, the signature has to match exactly. You should declare the `EventType` type parameter too.\r\n\r\n```\r\npublic static abstract class EventFinderBuilder&lt;\r\n    EventType,\r\n    C extends EventFinder&lt;EventType&gt;, \r\n    B extends EventFinderBuilder&lt;EventType, C, B&gt;\r\n&gt; { ... }\r\n```\r\n\r\nBut as rzwitserloot said in their answer. This kind of defeats the purpose of Lombok. If you are adding a log for every field in your class, you might as well handwrite the entire builder yourself.","link":"https://stackoverflow.com/questions/77556592/lombok-not-compiling-an-abstract-generic-superclass/77557566#77557566","title":"Lombok not compiling an abstract generic superclass","body":"<p>When your class has generic type parameters, The builders that lombok generates will also have those type parameters. The builders are static classes, and so the <code>EventType</code> type parameter of <code>EventFinder</code> is not in scope in the builder classes.</p>\n<p>If you want to write your own implementation for a part of the code that Lombok generates, the signature has to match exactly. You should declare the <code>EventType</code> type parameter too.</p>\n<pre><code>public static abstract class EventFinderBuilder&lt;\n    EventType,\n    C extends EventFinder&lt;EventType&gt;, \n    B extends EventFinderBuilder&lt;EventType, C, B&gt;\n&gt; { ... }\n</code></pre>\n<p>But as rzwitserloot said in their answer. This kind of defeats the purpose of Lombok. If you are adding a log for every field in your class, you might as well handwrite the entire builder yourself.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":37,"answer_count":2,"score":1,"last_activity_date":1701094398,"creation_date":1701085112,"question_id":77556592,"body_markdown":"I have this class:\r\n```java\r\n@SuperBuilder\r\npublic abstract class EventFinder&lt;EventType&gt; {\r\n    private final String accountId;\r\n\r\npublic abstract List&lt;EventType&gt; find();\r\n\r\n    public static abstract class EventFinderBuilder&lt;C extends EventFinder&lt;?&gt;, B extends EventFinderBuilder&lt;C, B&gt;&gt; {\r\n        public B accountId(String accountId) {\r\n            log.trace(&quot;Account ID: %1s&quot;.formatted(accountId));\r\n            this.accountId = accountId;\r\n            return self();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBeen trying to make `@SuperBuilder` work with it but to no avail, \r\nI&#39;m overriding some of the builder methods to include logs, which works great, \r\nCompiling outputs:\r\n```\r\nerror: wrong number of type arguments; required 2\r\n@SuperBuilder\r\n^\r\n```\r\n\r\n\r\nI can do it just fine by removing the abstract method from the class and simply implementing it in the subclasses, but I would like to declare it here as this is the parent.\r\n\r\n\r\n\r\nTried to play with the @SuperBuilder parameters, nothing helps, tried to remove the abstract method, which worked, but did not solve the issue.","link":"https://stackoverflow.com/questions/77556592/lombok-not-compiling-an-abstract-generic-superclass","title":"Lombok not compiling an abstract generic superclass","body":"<p>I have this class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SuperBuilder\npublic abstract class EventFinder&lt;EventType&gt; {\n    private final String accountId;\n\npublic abstract List&lt;EventType&gt; find();\n\n    public static abstract class EventFinderBuilder&lt;C extends EventFinder&lt;?&gt;, B extends EventFinderBuilder&lt;C, B&gt;&gt; {\n        public B accountId(String accountId) {\n            log.trace(&quot;Account ID: %1s&quot;.formatted(accountId));\n            this.accountId = accountId;\n            return self();\n        }\n    }\n}\n</code></pre>\n<p>Been trying to make <code>@SuperBuilder</code> work with it but to no avail,\nI'm overriding some of the builder methods to include logs, which works great,\nCompiling outputs:</p>\n<pre><code>error: wrong number of type arguments; required 2\n@SuperBuilder\n^\n</code></pre>\n<p>I can do it just fine by removing the abstract method from the class and simply implementing it in the subclasses, but I would like to declare it here as this is the parent.</p>\n<p>Tried to play with the @SuperBuilder parameters, nothing helps, tried to remove the abstract method, which worked, but did not solve the issue.</p>\n"},{"tags":["java","performance","hibernate","hazelcast","second-level-cache"],"comments":[{"score":0,"post_type":"question","creation_date":1701242782,"post_id":77557334,"comment_id":136749928,"body_markdown":"You are seeing a jump from 0.000311366 seconds to 0.001093001 seconds, but the jump is insignificant.  With two members, half of the keys will be distributed to 2nd member, this adds the serialization and network overhead. Also in embedded mode HZ is running within the JVM of your application, using its resources. This means that anything happening in your app can affect HZ","link":"https://stackoverflow.com/questions/77557334/hazelcast-hibernate-query-slowdown-when-using-second-level-cache#comment136749928_77557334","body":"You are seeing a jump from 0.000311366 seconds to 0.001093001 seconds, but the jump is insignificant.  With two members, half of the keys will be distributed to 2nd member, this adds the serialization and network overhead. Also in embedded mode HZ is running within the JVM of your application, using its resources. This means that anything happening in your app can affect HZ"}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701093667,"creation_date":1701093667,"answer_id":77557475,"question_id":77557334,"body_markdown":"As a distributed cache, once Hazelcast grows beyond a single node you will start to see network performance impact the time needed for gets and puts, and this will always result in performance less than what can be achieved on a purely local (single node) solution. \r\n\r\nThere are configuration options that can improve the performance, but at the cost of less consistency/accuracy.\r\n\r\nWhen reading, a single-node cluster will always find the record locally (if it exists).  In a two-node cluster, we expect that 50% of gets will be satisfied locally, and 50% will require a network call.  As clusters get larger, an even larger percentage of gets will be remote.  So the performance degradation you see is a natural consequence of distributing data across the network.  With an embedded Hazelcast configuration, you can set the &#39;read-from-backups&#39; flag true, and this will allow a higher percentage of calls to be resolved locally - but some of those reads may be stale values if the primary copy of the data has been modified and the modification has not yet been propagated to the backup.  \r\n\r\nWhen writing, on a single node configuration Hazelcast writes the value and returns to the caller.  On a multi-node configuration, Hazelcast will write first to the primary node, and then to the configured number of synchronous backup nodes, before returning to the caller - so writes will take longer as there will always be a backup copy to write (assuming default configuration).  You can improve performance by switching from synchronous to asynchronous backups, or by turning off backups altogether, but each of these changes increases the chance of data loss in the event of a node outage.  If all cached data is known to be safely stored in a system of record where it can be reloaded after a failure, then this may be an acceptable risk.","link":"https://stackoverflow.com/questions/77557334/hazelcast-hibernate-query-slowdown-when-using-second-level-cache/77557475#77557475","title":"Hazelcast + Hibernate query slowdown when using second level cache","body":"<p>As a distributed cache, once Hazelcast grows beyond a single node you will start to see network performance impact the time needed for gets and puts, and this will always result in performance less than what can be achieved on a purely local (single node) solution.</p>\n<p>There are configuration options that can improve the performance, but at the cost of less consistency/accuracy.</p>\n<p>When reading, a single-node cluster will always find the record locally (if it exists).  In a two-node cluster, we expect that 50% of gets will be satisfied locally, and 50% will require a network call.  As clusters get larger, an even larger percentage of gets will be remote.  So the performance degradation you see is a natural consequence of distributing data across the network.  With an embedded Hazelcast configuration, you can set the 'read-from-backups' flag true, and this will allow a higher percentage of calls to be resolved locally - but some of those reads may be stale values if the primary copy of the data has been modified and the modification has not yet been propagated to the backup.</p>\n<p>When writing, on a single node configuration Hazelcast writes the value and returns to the caller.  On a multi-node configuration, Hazelcast will write first to the primary node, and then to the configured number of synchronous backup nodes, before returning to the caller - so writes will take longer as there will always be a backup copy to write (assuming default configuration).  You can improve performance by switching from synchronous to asynchronous backups, or by turning off backups altogether, but each of these changes increases the chance of data loss in the event of a node outage.  If all cached data is known to be safely stored in a system of record where it can be reloaded after a failure, then this may be an acceptable risk.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":33,"answer_count":1,"score":0,"last_activity_date":1701093667,"creation_date":1701092206,"question_id":77557334,"body_markdown":"we are currently using in Hibernate 6.3.1 as a second level cache Hazelcast 5.3.6.\r\n\r\nwe are experiencing a significant slow down in performance when a second node joins the cluster. currently Hazelcast is configured in embedded mode (`hazelcast.jcache.provider.type=member`) and in hibernate config we have `hibernate.cache.region.factory_class=jcache`, `hibernate.cache.use_second_level_cache=true` and `hibernate.cache.use_query_cache=true`\r\n\r\nHazelcast is configured in this way:\r\n\r\n```xml\r\n    &lt;advanced-network enabled=&quot;true&quot;&gt;\r\n        &lt;join&gt;\r\n            &lt;auto-detection enabled=&quot;false&quot;/&gt;\r\n            &lt;multicast enabled=&quot;true&quot;&gt;\r\n                &lt;multicast-group&gt;224.2.2.3&lt;/multicast-group&gt;\r\n                &lt;multicast-port&gt;54327&lt;/multicast-port&gt;\r\n                &lt;multicast-time-to-live&gt;32&lt;/multicast-time-to-live&gt;\r\n                &lt;multicast-timeout-seconds&gt;5&lt;/multicast-timeout-seconds&gt;\r\n            &lt;/multicast&gt;\r\n        &lt;/join&gt;\r\n\r\n        &lt;member-server-socket-endpoint-config&gt;\r\n            &lt;port&gt;5701&lt;/port&gt;\r\n            &lt;socket-options&gt;\r\n                &lt;keep-alive&gt;true&lt;/keep-alive&gt;\r\n                &lt;tcp-no-delay&gt;true&lt;/tcp-no-delay&gt;\r\n                &lt;buffer-direct&gt;true&lt;/buffer-direct&gt;\r\n            &lt;/socket-options&gt;\r\n        &lt;/member-server-socket-endpoint-config&gt;\r\n        &lt;client-server-socket-endpoint-config&gt;\r\n            &lt;port&gt;9090&lt;/port&gt;\r\n            &lt;socket-options&gt;\r\n                &lt;keep-alive&gt;true&lt;/keep-alive&gt;\r\n                &lt;tcp-no-delay&gt;true&lt;/tcp-no-delay&gt;\r\n                &lt;buffer-direct&gt;true&lt;/buffer-direct&gt;\r\n            &lt;/socket-options&gt;\r\n        &lt;/client-server-socket-endpoint-config&gt;\r\n    &lt;/advanced-network&gt;\r\n\r\n    &lt;cache name=&quot;*&quot;&gt;\r\n        &lt;statistics-enabled&gt;false&lt;/statistics-enabled&gt;\r\n        &lt;management-enabled&gt;false&lt;/management-enabled&gt;\r\n        &lt;in-memory-format&gt;BINARY&lt;/in-memory-format&gt;\r\n        &lt;expiry-policy-factory&gt;\r\n            &lt;timed-expiry-policy-factory expiry-policy-type=&quot;ETERNAL&quot;/&gt;\r\n        &lt;/expiry-policy-factory&gt;\r\n        &lt;eviction eviction-policy=&quot;LRU&quot; max-size-policy=&quot;ENTRY_COUNT&quot; size=&quot;10000&quot;/&gt;\r\n    &lt;/cache&gt;\r\n```\r\n\r\nwhen only one server is started we see in the Hibernate statistics output for one particular query:\r\n\r\n```\r\no.h.e.i.StatisticalLoggingSessionEventListener - Session Metrics {\r\n    13365 nanoseconds spent acquiring 3 JDBC connections;\r\n    9838 nanoseconds spent releasing 3 JDBC connections;\r\n    80964 nanoseconds spent preparing 3 JDBC statements;\r\n    1092652 nanoseconds spent executing 3 JDBC statements;\r\n    0 nanoseconds spent executing 0 JDBC batches;\r\n    311366 nanoseconds spent performing 2 L2C puts;\r\n    6779427 nanoseconds spent performing 45 L2C hits;\r\n    181972 nanoseconds spent performing 2 L2C misses;\r\n    0 nanoseconds spent executing 0 flushes (flushing a total of 0 entities and 0 collections);\r\n    0 nanoseconds spent executing 0 partial-flushes (flushing a total of 0 entities and 0 collections)\r\n}\r\n```\r\n\r\nwhen second server joins the same query produces:\r\n\r\n```\r\nINFO  o.h.e.i.StatisticalLoggingSessionEventListener - Session Metrics {\r\n    11922 nanoseconds spent acquiring 3 JDBC connections;\r\n    7064 nanoseconds spent releasing 3 JDBC connections;\r\n    69741 nanoseconds spent preparing 3 JDBC statements;\r\n    1039659 nanoseconds spent executing 3 JDBC statements;\r\n    0 nanoseconds spent executing 0 JDBC batches;\r\n    1093001 nanoseconds spent performing 2 L2C puts;\r\n    10632154 nanoseconds spent performing 45 L2C hits;\r\n    126368 nanoseconds spent performing 2 L2C misses;\r\n    0 nanoseconds spent executing 0 flushes (flushing a total of 0 entities and 0 collections);\r\n    0 nanoseconds spent executing 0 partial-flushes (flushing a total of 0 entities and 0 collections)\r\n}\r\n```\r\n\r\nL2C puts and hits taking 2 up to 3 times longer. As this is not the only query the time accumulates more and more and is then also noticeable in the UI.\r\n\r\nAny suggestion how to speed up the L2C hits and puts?","link":"https://stackoverflow.com/questions/77557334/hazelcast-hibernate-query-slowdown-when-using-second-level-cache","title":"Hazelcast + Hibernate query slowdown when using second level cache","body":"<p>we are currently using in Hibernate 6.3.1 as a second level cache Hazelcast 5.3.6.</p>\n<p>we are experiencing a significant slow down in performance when a second node joins the cluster. currently Hazelcast is configured in embedded mode (<code>hazelcast.jcache.provider.type=member</code>) and in hibernate config we have <code>hibernate.cache.region.factory_class=jcache</code>, <code>hibernate.cache.use_second_level_cache=true</code> and <code>hibernate.cache.use_query_cache=true</code></p>\n<p>Hazelcast is configured in this way:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;advanced-network enabled=&quot;true&quot;&gt;\n        &lt;join&gt;\n            &lt;auto-detection enabled=&quot;false&quot;/&gt;\n            &lt;multicast enabled=&quot;true&quot;&gt;\n                &lt;multicast-group&gt;224.2.2.3&lt;/multicast-group&gt;\n                &lt;multicast-port&gt;54327&lt;/multicast-port&gt;\n                &lt;multicast-time-to-live&gt;32&lt;/multicast-time-to-live&gt;\n                &lt;multicast-timeout-seconds&gt;5&lt;/multicast-timeout-seconds&gt;\n            &lt;/multicast&gt;\n        &lt;/join&gt;\n\n        &lt;member-server-socket-endpoint-config&gt;\n            &lt;port&gt;5701&lt;/port&gt;\n            &lt;socket-options&gt;\n                &lt;keep-alive&gt;true&lt;/keep-alive&gt;\n                &lt;tcp-no-delay&gt;true&lt;/tcp-no-delay&gt;\n                &lt;buffer-direct&gt;true&lt;/buffer-direct&gt;\n            &lt;/socket-options&gt;\n        &lt;/member-server-socket-endpoint-config&gt;\n        &lt;client-server-socket-endpoint-config&gt;\n            &lt;port&gt;9090&lt;/port&gt;\n            &lt;socket-options&gt;\n                &lt;keep-alive&gt;true&lt;/keep-alive&gt;\n                &lt;tcp-no-delay&gt;true&lt;/tcp-no-delay&gt;\n                &lt;buffer-direct&gt;true&lt;/buffer-direct&gt;\n            &lt;/socket-options&gt;\n        &lt;/client-server-socket-endpoint-config&gt;\n    &lt;/advanced-network&gt;\n\n    &lt;cache name=&quot;*&quot;&gt;\n        &lt;statistics-enabled&gt;false&lt;/statistics-enabled&gt;\n        &lt;management-enabled&gt;false&lt;/management-enabled&gt;\n        &lt;in-memory-format&gt;BINARY&lt;/in-memory-format&gt;\n        &lt;expiry-policy-factory&gt;\n            &lt;timed-expiry-policy-factory expiry-policy-type=&quot;ETERNAL&quot;/&gt;\n        &lt;/expiry-policy-factory&gt;\n        &lt;eviction eviction-policy=&quot;LRU&quot; max-size-policy=&quot;ENTRY_COUNT&quot; size=&quot;10000&quot;/&gt;\n    &lt;/cache&gt;\n</code></pre>\n<p>when only one server is started we see in the Hibernate statistics output for one particular query:</p>\n<pre><code>o.h.e.i.StatisticalLoggingSessionEventListener - Session Metrics {\n    13365 nanoseconds spent acquiring 3 JDBC connections;\n    9838 nanoseconds spent releasing 3 JDBC connections;\n    80964 nanoseconds spent preparing 3 JDBC statements;\n    1092652 nanoseconds spent executing 3 JDBC statements;\n    0 nanoseconds spent executing 0 JDBC batches;\n    311366 nanoseconds spent performing 2 L2C puts;\n    6779427 nanoseconds spent performing 45 L2C hits;\n    181972 nanoseconds spent performing 2 L2C misses;\n    0 nanoseconds spent executing 0 flushes (flushing a total of 0 entities and 0 collections);\n    0 nanoseconds spent executing 0 partial-flushes (flushing a total of 0 entities and 0 collections)\n}\n</code></pre>\n<p>when second server joins the same query produces:</p>\n<pre><code>INFO  o.h.e.i.StatisticalLoggingSessionEventListener - Session Metrics {\n    11922 nanoseconds spent acquiring 3 JDBC connections;\n    7064 nanoseconds spent releasing 3 JDBC connections;\n    69741 nanoseconds spent preparing 3 JDBC statements;\n    1039659 nanoseconds spent executing 3 JDBC statements;\n    0 nanoseconds spent executing 0 JDBC batches;\n    1093001 nanoseconds spent performing 2 L2C puts;\n    10632154 nanoseconds spent performing 45 L2C hits;\n    126368 nanoseconds spent performing 2 L2C misses;\n    0 nanoseconds spent executing 0 flushes (flushing a total of 0 entities and 0 collections);\n    0 nanoseconds spent executing 0 partial-flushes (flushing a total of 0 entities and 0 collections)\n}\n</code></pre>\n<p>L2C puts and hits taking 2 up to 3 times longer. As this is not the only query the time accumulates more and more and is then also noticeable in the UI.</p>\n<p>Any suggestion how to speed up the L2C hits and puts?</p>\n"},{"tags":["java","c++","swig"],"comments":[{"score":0,"post_type":"question","creation_date":1701025779,"post_id":77538537,"comment_id":136721109,"body_markdown":"In your Update 2.0, what&#39;s your line supposed to do? I can&#39;t parse it too.","link":"https://stackoverflow.com/questions/77538537/convert-c-custom-unit-type-to-primative-java-type-with-swig#comment136721109_77538537","body":"In your Update 2.0, what&#39;s your line supposed to do? I can&#39;t parse it too."},{"score":1,"post_type":"question","creation_date":1701032515,"post_id":77538537,"comment_id":136721777,"body_markdown":"It&#39;s a constructor definition for my class `Foo`, with an argument of `meters_t`, defaulting to 0 meters. `meters_t` is wrapped to a Java double, so I imagine the problem relates to `boost::units::si::meters`, but sadly I don&#39;t have much more information to the error than what is currently posted.","link":"https://stackoverflow.com/questions/77538537/convert-c-custom-unit-type-to-primative-java-type-with-swig#comment136721777_77538537","body":"It&#39;s a constructor definition for my class <code>Foo</code>, with an argument of <code>meters_t</code>, defaulting to 0 meters. <code>meters_t</code> is wrapped to a Java double, so I imagine the problem relates to <code>boost::units::si::meters</code>, but sadly I don&#39;t have much more information to the error than what is currently posted."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701084471,"post_id":77555451,"comment_id":136726940,"body_markdown":"Thanks for the answer I appreciate the nice breakdown here! :) \n\nUnfortunately this hasn&#39;t corrected my current outstanding issue. I have actually already attempted what you suggested with ignoring the constructor and providing another. \n\n`C:\\my_project\\src\\inc\\foo.h(line of the foo ctor): Syntax error in input(3).`\n\nGiven the error is in the `foo.h`, I feel like SWIG is unable to parse the default argument for whatever reason, where ignoring the code won&#39;t help; I imagine SWIG reading `foo.h` is independent of any directives in the SWIG Interface file?","link":"https://stackoverflow.com/questions/77538537/convert-c-custom-unit-type-to-primative-java-type-with-swig/77555451#comment136726940_77555451","body":"Thanks for the answer I appreciate the nice breakdown here! :)   Unfortunately this hasn&#39;t corrected my current outstanding issue. I have actually already attempted what you suggested with ignoring the constructor and providing another.   <code>C:\\my_project\\src\\inc\\foo.h(line of the foo ctor): Syntax error in input(3).</code>  Given the error is in the <code>foo.h</code>, I feel like SWIG is unable to parse the default argument for whatever reason, where ignoring the code won&#39;t help; I imagine SWIG reading <code>foo.h</code> is independent of any directives in the SWIG Interface file?"},{"score":0,"post_type":"answer","creation_date":1701090335,"post_id":77555451,"comment_id":136727950,"body_markdown":"Yeah, modifying the ctor to provide a `Foo()` and `Foo(meters_t meters)`, where moving the initialisation of `Foo::meters` (`meters = meters_t{ 0.0 * boost::units::si::meters }`) to  `Foo.cpp` corrects the issue. I would really much prefer to SWIG wrap the code in question without having to alter the source code.\n\nI feel like I am missing a boost header, but I have added the includes used in the `.h` file into my SWIG interface `%module MyModule { //some boost headers }`\n\nIn short, SWIG doesn&#39;t know what `boost::units::si::meter` is when it reads `Foo.h`","link":"https://stackoverflow.com/questions/77538537/convert-c-custom-unit-type-to-primative-java-type-with-swig/77555451#comment136727950_77555451","body":"Yeah, modifying the ctor to provide a <code>Foo()</code> and <code>Foo(meters_t meters)</code>, where moving the initialisation of <code>Foo::meters</code> (<code>meters = meters_t{ 0.0 * boost::units::si::meters }</code>) to  <code>Foo.cpp</code> corrects the issue. I would really much prefer to SWIG wrap the code in question without having to alter the source code.  I feel like I am missing a boost header, but I have added the includes used in the <code>.h</code> file into my SWIG interface <code>%module MyModule { &#47;&#47;some boost headers }</code>  In short, SWIG doesn&#39;t know what <code>boost::units::si::meter</code> is when it reads <code>Foo.h</code>"},{"score":0,"post_type":"answer","creation_date":1701093603,"post_id":77555451,"comment_id":136728553,"body_markdown":"@bleuj I have edited the answer to address your comments.","link":"https://stackoverflow.com/questions/77538537/convert-c-custom-unit-type-to-primative-java-type-with-swig/77555451#comment136728553_77555451","body":"@bleuj I have edited the answer to address your comments."}],"comment_count":3,"score":1,"last_activity_date":1701093589,"last_edit_date":1701093589,"creation_date":1701073737,"answer_id":77555451,"question_id":77538537,"body_markdown":"You have started on the right track with [typemaps](https://www.swig.org/Doc1.3/Typemaps.html). These are crucial for converting types between C++ and Java. But the errors suggest that SWIG is having trouble automatically converting between `meters_t` and `jdouble`. \r\n\r\nYou might need to provide *custom* typemaps to handle this conversion explicitly. You need to provide a way for SWIG to understand how to convert `meters_t` to `jdouble` and vice versa.\r\n\r\nTry and implement `%typemap(in)` and `%typemap(out)` for `meters_t`. These typemaps will define how to convert a `meters_t` object to a Java `double` when passing from C++ to Java, and vice versa.\r\n\r\nSWIG has limited support for parsing complex [default arguments](https://www.swig.org/Doc1.3/SWIG.html#SWIG_default_args)]. One solution is to simplify the default argument in the SWIG interface file, or provide an overloaded version of the constructor without the default argument for SWIG to wrap.\r\n\r\nIn your [SWIG interface file](https://www.swig.org/Doc1.3/SWIG.html#SWIG_nn47), implement the typemaps:\r\n\r\n```cpp\r\n%typemap(in) meters_t {\r\n    // Code to convert from jdouble to meters_t\r\n}\r\n\r\n%typemap(out) meters_t {\r\n    // Code to convert from meters_t to jdouble\r\n}\r\n\r\n// For the constructor issue\r\n%ignore Foo::Foo(meters_t);\r\n%extend Foo {\r\n    Foo() {\r\n        return new Foo(meters_t{0.0 * boost::units::si::meters});\r\n    }\r\n}\r\n```\r\n\r\nYou  need to fill in the conversion logic based on how `meters_t` can be converted to and from a `double`.\r\n\r\n```bash\r\nJava Side                     JNI Bridge                    C++ Side\r\n──────────                     ──────────                    ────────\r\n   jdouble                         |                     meters_t Object\r\n   (double)                        |                           |\r\n     |                             |                           |\r\n     |      [ JNI Conversion ]     |                           |\r\n     |----------------------------&gt;|                           |\r\n     |                             |    Construct meters_t     |\r\n     |                             |  using jdouble value      |\r\n     |                             |&lt;--------------------------|\r\n     |                             |                           |\r\n     |                             |      Extract double       |\r\n     |                             |  value from meters_t      |\r\n     |                             |--------------------------&gt;|\r\n     |                             |                           |\r\n     |&lt;----------------------------|                           |\r\n     |                             |                           |\r\n```\r\n\r\n------\r\n\r\nRegarding &quot;`Code to convert from jdouble to meters_t`&quot;, when converting from Java to C++, you will receive a Java `double` (represented as `jdouble` in C++ JNI code). You need to convert this to a `meters_t` object.  \r\nAssuming `meters_t` can be constructed or assigned from a `double`, the typemap might look like this:\r\n\r\n```cpp\r\n%typemap(in) meters_t {\r\n    $1 = meters_t($input * boost::units::si::meter);\r\n}\r\n```\r\n\r\nIn this typemap:\r\n- `$1` is the placeholder for the C++ argument (in this case, `meters_t`).\r\n- `$input` represents the input from Java (a `jdouble`).\r\n- The expression `$input * boost::units::si::meter` constructs a `meters_t` object from the Java double, assuming that `meters_t` can be initialized in this way.\r\n\r\n--------\r\n\r\nFor &quot;`Code to convert from meters_t to jdouble`&quot;:\r\n\r\nWhen converting from C++ to Java, you need to extract a `double` value from your `meters_t` object:\r\n\r\n```cpp\r\n%typemap(out) meters_t {\r\n    $result = (jdouble)$1.value();\r\n}\r\n```\r\n\r\nIn this typemap:\r\n- `$1` is the placeholder for the C++ `meters_t` object.\r\n- `$result` is the JNI representation of the Java type you are mapping to (`jdouble` in this case).\r\n- `$1.value()` is a hypothetical method or way to extract the `double` value from a `meters_t` object. You will need to replace this with the actual method or approach for extracting the numeric value from your `meters_t` type.\r\n\r\nMake sure that `meters_t` can be constructed from a `double` and has a method to extract its value as a `double`. If not, you will need to adapt the code to suit the actual interface of `meters_t`.  \r\nThese typemaps assume that `boost::units::si::meter` is the appropriate unit for conversion. Adjust if necessary based on your specific implementation of `meters_t`.\r\n\r\n----\r\n\r\n&gt; Unfortunately this has not corrected my current outstanding issue. I have actually already attempted what you suggested with ignoring the constructor and providing another.  \r\n`C:\\my_project\\src\\inc\\foo.h(line of the foo ctor): Syntax error in input(3)`. Given the error is in the `foo.h`, I feel like SWIG is unable to parse the default argument for whatever reason, where ignoring the code will not help; I imagine SWIG reading foo.h is independent of any directives in the SWIG Interface file?\r\n\r\nThe error `Syntax error in input(3)` does indeed suggest that SWIG is having trouble parsing the C++ code in your header file, specifically the constructor with the default argument in `foo.h`. That can happen when the syntax or constructs used in the C++ code are too complex or unfamiliar to SWIG.\r\n\r\nIf possible, simplify the constructor in the C++ header file. That means removing or altering the default argument in a way that SWIG can understand. For example, you could split the constructor into two: one without arguments and another taking a `meters_t` argument, handling the default case in the implementation rather than in the declaration.\r\n\r\n```cpp\r\n// Original:\r\n// Foo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\r\n\r\n// Simplified:\r\nFoo();\r\nFoo(meters_t meters);\r\n```\r\n\r\nCreate an overloaded version of the constructor specifically for SWIG. That version would not have the complex default argument. Use [SWIG&#39;s `%ignore` directive](https://www.swig.org/Doc1.3/SWIG.html#SWIG_rename_ignore) to ignore the problematic constructor and expose only the simplified version.\r\n\r\nIn your SWIG interface file:\r\n```cpp\r\n%ignore Foo::Foo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\r\n\r\n%extend Foo {\r\n    Foo() {\r\n        return new Foo(meters_t{0.0 * boost::units::si::meters});\r\n    }\r\n}\r\n```\r\n\r\nYou can also use [`%inline`](https://www.swig.org/Doc1.3/SWIG.html#SWIG_nn43) to provide an alternative, SWIG-friendly version of the problematic code directly in the interface file. That allows you to keep the original C++ code as is but provide a simplified version for SWIG to process.\r\n\r\n```cpp\r\n%inline %{\r\nclass Foo {\r\n    public:\r\n    Foo() : Foo(meters_t{0.0 * boost::units::si::meters}) {}\r\n    Foo(meters_t meters) { /* Constructor implementation */ }\r\n};\r\n%}\r\n```\r\n\r\nThe key is to create an interface that SWIG can parse without losing the functionality you need in the Java bindings.\r\n\r\n-------------\r\n\r\n&gt; Yeah, modifying the `ctor` to provide a `Foo()` and `Foo(meters_t meters)`, where moving the initialisation of `Foo::meters (meters = meters_t{ 0.0 * boost::units::si::meters })` to `Foo.cpp` corrects the issue.  \r\nI would really much prefer to SWIG wrap the code in question without having to alter the source code.  \r\nI feel like I am missing a boost header, but I have added the includes used in the `.h` file into my SWIG interface `%module MyModule { //some boost headers }`. In short, SWIG does not know what `boost::units::si::meter` is when it reads `Foo.h`!?\r\n\r\nI agree: you would prefer not to modify the original C++ source code to accommodate SWIG. The issue (where SWIG does not recognize `boost::units::si::meter`) is likely due to SWIG&#39;s limited understanding of complex C++ constructs, especially from libraries like [Boost](https://www.boost.org/).\r\n\r\nIncluding Boost headers in the SWIG interface file is a good start. However (again), SWIG might not fully understand or parse complex Boost constructs. Make sure you include the necessary Boost headers in your SWIG interface file, similar to how they are included in your C++ header files (though this might not always be feasible with complex templated types like those in Boost).\r\n\r\n```cpp\r\n%module MyModule\r\n%{\r\n#include &quot;foo.h&quot;\r\n#include &lt;boost/units/systems/si/length.hpp&gt;\r\n#include &lt;boost/units/systems/si/prefixes.hpp&gt;\r\n%}\r\n```\r\nAs mentioned before, use `%ignore` to exclude the problematic constructor from SWIG&#39;s processing.  \r\nThen, either use [`%extend`](https://www.swig.org/Doc1.3/SWIG.html#SWIG_adding_member_functions) to define a SWIG-friendly version of the constructor or [`%rename`](https://www.swig.org/Doc1.3/SWIG.html#SWIG_rename_ignore) to expose a different, simplified constructor to Java.\r\n\r\n```cpp\r\n%ignore Foo::Foo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\r\n```\r\nAs a last resort, if SWIG struggles with the Boost types, consider creating a wrapper class in C++ that presents a simpler interface to SWIG. That wrapper would internally handle the Boost types and complexities, exposing only SWIG-friendly types and methods.\r\n\r\n- Create a `FooWrapper` class that simplifies the interface for SWIG.\r\n- Inside `FooWrapper`, manage the complex Boost interactions, exposing simpler methods for SWIG.\r\n\r\n```cpp\r\nclass FooWrapper {\r\npublic:\r\n    FooWrapper() : foo(0.0 * boost::units::si::meters) {}\r\n    explicit FooWrapper(double meters) : foo(meters * boost::units::si::meters) {}\r\n\r\nprivate:\r\n    Foo foo;\r\n};\r\n```\r\n\r\nThen in the SWIG interface file:\r\n\r\n```cpp\r\n%include &quot;FooWrapper.h&quot;\r\n```\r\n\r\nThe goal remains to find a balance between preserving the original C++ source code and providing SWIG with a form it can understand. In that context, creating a simplified interface or wrapper for SWIG can often be a practical solution, especially when dealing with complex libraries like Boost.\r\n","link":"https://stackoverflow.com/questions/77538537/convert-c-custom-unit-type-to-primative-java-type-with-swig/77555451#77555451","title":"Convert C++ custom unit type to primative Java type with SWIG","body":"<p>You have started on the right track with <a href=\"https://www.swig.org/Doc1.3/Typemaps.html\" rel=\"nofollow noreferrer\">typemaps</a>. These are crucial for converting types between C++ and Java. But the errors suggest that SWIG is having trouble automatically converting between <code>meters_t</code> and <code>jdouble</code>.</p>\n<p>You might need to provide <em>custom</em> typemaps to handle this conversion explicitly. You need to provide a way for SWIG to understand how to convert <code>meters_t</code> to <code>jdouble</code> and vice versa.</p>\n<p>Try and implement <code>%typemap(in)</code> and <code>%typemap(out)</code> for <code>meters_t</code>. These typemaps will define how to convert a <code>meters_t</code> object to a Java <code>double</code> when passing from C++ to Java, and vice versa.</p>\n<p>SWIG has limited support for parsing complex <a href=\"https://www.swig.org/Doc1.3/SWIG.html#SWIG_default_args\" rel=\"nofollow noreferrer\">default arguments</a>]. One solution is to simplify the default argument in the SWIG interface file, or provide an overloaded version of the constructor without the default argument for SWIG to wrap.</p>\n<p>In your <a href=\"https://www.swig.org/Doc1.3/SWIG.html#SWIG_nn47\" rel=\"nofollow noreferrer\">SWIG interface file</a>, implement the typemaps:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%typemap(in) meters_t {\n    // Code to convert from jdouble to meters_t\n}\n\n%typemap(out) meters_t {\n    // Code to convert from meters_t to jdouble\n}\n\n// For the constructor issue\n%ignore Foo::Foo(meters_t);\n%extend Foo {\n    Foo() {\n        return new Foo(meters_t{0.0 * boost::units::si::meters});\n    }\n}\n</code></pre>\n<p>You  need to fill in the conversion logic based on how <code>meters_t</code> can be converted to and from a <code>double</code>.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>Java Side                     JNI Bridge                    C++ Side\n──────────                     ──────────                    ────────\n   jdouble                         |                     meters_t Object\n   (double)                        |                           |\n     |                             |                           |\n     |      [ JNI Conversion ]     |                           |\n     |----------------------------&gt;|                           |\n     |                             |    Construct meters_t     |\n     |                             |  using jdouble value      |\n     |                             |&lt;--------------------------|\n     |                             |                           |\n     |                             |      Extract double       |\n     |                             |  value from meters_t      |\n     |                             |--------------------------&gt;|\n     |                             |                           |\n     |&lt;----------------------------|                           |\n     |                             |                           |\n</code></pre>\n<hr />\n<p>Regarding &quot;<code>Code to convert from jdouble to meters_t</code>&quot;, when converting from Java to C++, you will receive a Java <code>double</code> (represented as <code>jdouble</code> in C++ JNI code). You need to convert this to a <code>meters_t</code> object.<br />\nAssuming <code>meters_t</code> can be constructed or assigned from a <code>double</code>, the typemap might look like this:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%typemap(in) meters_t {\n    $1 = meters_t($input * boost::units::si::meter);\n}\n</code></pre>\n<p>In this typemap:</p>\n<ul>\n<li><code>$1</code> is the placeholder for the C++ argument (in this case, <code>meters_t</code>).</li>\n<li><code>$input</code> represents the input from Java (a <code>jdouble</code>).</li>\n<li>The expression <code>$input * boost::units::si::meter</code> constructs a <code>meters_t</code> object from the Java double, assuming that <code>meters_t</code> can be initialized in this way.</li>\n</ul>\n<hr />\n<p>For &quot;<code>Code to convert from meters_t to jdouble</code>&quot;:</p>\n<p>When converting from C++ to Java, you need to extract a <code>double</code> value from your <code>meters_t</code> object:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%typemap(out) meters_t {\n    $result = (jdouble)$1.value();\n}\n</code></pre>\n<p>In this typemap:</p>\n<ul>\n<li><code>$1</code> is the placeholder for the C++ <code>meters_t</code> object.</li>\n<li><code>$result</code> is the JNI representation of the Java type you are mapping to (<code>jdouble</code> in this case).</li>\n<li><code>$1.value()</code> is a hypothetical method or way to extract the <code>double</code> value from a <code>meters_t</code> object. You will need to replace this with the actual method or approach for extracting the numeric value from your <code>meters_t</code> type.</li>\n</ul>\n<p>Make sure that <code>meters_t</code> can be constructed from a <code>double</code> and has a method to extract its value as a <code>double</code>. If not, you will need to adapt the code to suit the actual interface of <code>meters_t</code>.<br />\nThese typemaps assume that <code>boost::units::si::meter</code> is the appropriate unit for conversion. Adjust if necessary based on your specific implementation of <code>meters_t</code>.</p>\n<hr />\n<blockquote>\n<p>Unfortunately this has not corrected my current outstanding issue. I have actually already attempted what you suggested with ignoring the constructor and providing another.<br />\n<code>C:\\my_project\\src\\inc\\foo.h(line of the foo ctor): Syntax error in input(3)</code>. Given the error is in the <code>foo.h</code>, I feel like SWIG is unable to parse the default argument for whatever reason, where ignoring the code will not help; I imagine SWIG reading foo.h is independent of any directives in the SWIG Interface file?</p>\n</blockquote>\n<p>The error <code>Syntax error in input(3)</code> does indeed suggest that SWIG is having trouble parsing the C++ code in your header file, specifically the constructor with the default argument in <code>foo.h</code>. That can happen when the syntax or constructs used in the C++ code are too complex or unfamiliar to SWIG.</p>\n<p>If possible, simplify the constructor in the C++ header file. That means removing or altering the default argument in a way that SWIG can understand. For example, you could split the constructor into two: one without arguments and another taking a <code>meters_t</code> argument, handling the default case in the implementation rather than in the declaration.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>// Original:\n// Foo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\n\n// Simplified:\nFoo();\nFoo(meters_t meters);\n</code></pre>\n<p>Create an overloaded version of the constructor specifically for SWIG. That version would not have the complex default argument. Use <a href=\"https://www.swig.org/Doc1.3/SWIG.html#SWIG_rename_ignore\" rel=\"nofollow noreferrer\">SWIG's <code>%ignore</code> directive</a> to ignore the problematic constructor and expose only the simplified version.</p>\n<p>In your SWIG interface file:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%ignore Foo::Foo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\n\n%extend Foo {\n    Foo() {\n        return new Foo(meters_t{0.0 * boost::units::si::meters});\n    }\n}\n</code></pre>\n<p>You can also use <a href=\"https://www.swig.org/Doc1.3/SWIG.html#SWIG_nn43\" rel=\"nofollow noreferrer\"><code>%inline</code></a> to provide an alternative, SWIG-friendly version of the problematic code directly in the interface file. That allows you to keep the original C++ code as is but provide a simplified version for SWIG to process.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%inline %{\nclass Foo {\n    public:\n    Foo() : Foo(meters_t{0.0 * boost::units::si::meters}) {}\n    Foo(meters_t meters) { /* Constructor implementation */ }\n};\n%}\n</code></pre>\n<p>The key is to create an interface that SWIG can parse without losing the functionality you need in the Java bindings.</p>\n<hr />\n<blockquote>\n<p>Yeah, modifying the <code>ctor</code> to provide a <code>Foo()</code> and <code>Foo(meters_t meters)</code>, where moving the initialisation of <code>Foo::meters (meters = meters_t{ 0.0 * boost::units::si::meters })</code> to <code>Foo.cpp</code> corrects the issue.<br />\nI would really much prefer to SWIG wrap the code in question without having to alter the source code.<br />\nI feel like I am missing a boost header, but I have added the includes used in the <code>.h</code> file into my SWIG interface <code>%module MyModule { //some boost headers }</code>. In short, SWIG does not know what <code>boost::units::si::meter</code> is when it reads <code>Foo.h</code>!?</p>\n</blockquote>\n<p>I agree: you would prefer not to modify the original C++ source code to accommodate SWIG. The issue (where SWIG does not recognize <code>boost::units::si::meter</code>) is likely due to SWIG's limited understanding of complex C++ constructs, especially from libraries like <a href=\"https://www.boost.org/\" rel=\"nofollow noreferrer\">Boost</a>.</p>\n<p>Including Boost headers in the SWIG interface file is a good start. However (again), SWIG might not fully understand or parse complex Boost constructs. Make sure you include the necessary Boost headers in your SWIG interface file, similar to how they are included in your C++ header files (though this might not always be feasible with complex templated types like those in Boost).</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%module MyModule\n%{\n#include &quot;foo.h&quot;\n#include &lt;boost/units/systems/si/length.hpp&gt;\n#include &lt;boost/units/systems/si/prefixes.hpp&gt;\n%}\n</code></pre>\n<p>As mentioned before, use <code>%ignore</code> to exclude the problematic constructor from SWIG's processing.<br />\nThen, either use <a href=\"https://www.swig.org/Doc1.3/SWIG.html#SWIG_adding_member_functions\" rel=\"nofollow noreferrer\"><code>%extend</code></a> to define a SWIG-friendly version of the constructor or <a href=\"https://www.swig.org/Doc1.3/SWIG.html#SWIG_rename_ignore\" rel=\"nofollow noreferrer\"><code>%rename</code></a> to expose a different, simplified constructor to Java.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%ignore Foo::Foo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\n</code></pre>\n<p>As a last resort, if SWIG struggles with the Boost types, consider creating a wrapper class in C++ that presents a simpler interface to SWIG. That wrapper would internally handle the Boost types and complexities, exposing only SWIG-friendly types and methods.</p>\n<ul>\n<li>Create a <code>FooWrapper</code> class that simplifies the interface for SWIG.</li>\n<li>Inside <code>FooWrapper</code>, manage the complex Boost interactions, exposing simpler methods for SWIG.</li>\n</ul>\n<pre class=\"lang-cpp prettyprint-override\"><code>class FooWrapper {\npublic:\n    FooWrapper() : foo(0.0 * boost::units::si::meters) {}\n    explicit FooWrapper(double meters) : foo(meters * boost::units::si::meters) {}\n\nprivate:\n    Foo foo;\n};\n</code></pre>\n<p>Then in the SWIG interface file:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>%include &quot;FooWrapper.h&quot;\n</code></pre>\n<p>The goal remains to find a balance between preserving the original C++ source code and providing SWIG with a form it can understand. In that context, creating a simplified interface or wrapper for SWIG can often be a practical solution, especially when dealing with complex libraries like Boost.</p>\n"}],"comment_count":2,"is_answered":true,"view_count":190,"answer_count":1,"score":5,"last_activity_date":1701093589,"creation_date":1700758213,"last_edit_date":1700849705,"question_id":77538537,"body_markdown":"I have C++ code that I am attempting to provide Java bindings using SWIG.\r\n```\r\nstruct meters_t : public boost::units::quantity&lt;boost::units::si::length&gt; {};\r\n```\r\n\r\nI am hoping to try replace all references of `meters_t` to just be a `double` or `Java.lang.Double`.\r\n\r\nI&#39;ve attempted the following in my SWIG interface `.i` file:\r\n```\r\n%typemap(jstype) meters_t &quot;java.lang.Double&quot;\r\n%typemap(jtype) meters_t &quot;java.lang.Double&quot;\r\n%typemap(jni) meters_t &quot;jdouble&quot;\r\n...\r\n// Duplicated for const, const&amp;, &amp;\r\n%ignore meters_t\r\n%include &quot;my_include.h&quot;\r\n```\r\nHowever I am currently getting a typecast error\r\n```\r\nerror C2440: &#39;type cast&#39;: cannot convert from &#39;meters_t *&#39; to &#39;jdouble&#39;\r\nerror C2440: &#39;type cast&#39;: cannot convert from `jdouble` to `meters_t *`\r\n```\r\n\r\nDoes anyone have any advice to correct this? I am quickly losing hope that the idea of converting `meters_t` into a simple `double` will be possible :/\r\n\r\n**UPDATE:**\r\nI have also added the following\r\n```\r\n%typemap(javain) meters_t &quot;$javainput&quot;\r\n```\r\nWhich enables the Java bindings to be built, however when I attempt to use the Java bindings (on a different `struct` that takes `meters_t` as a constructor arg, it immediately throws an error\r\n```\r\nA fatal error has been detected by the Java Runtime Environment\r\nEXCEPTION_ACCESS_VIOLATION\r\n``` \r\n\r\n**UPDATE 2.0**\r\n\r\nI now have `meters_t` SWIG wrapped. My new problem is a class with a boost default argument, and I&#39;m getting the elusive `Syntax error in input(3).` error\r\n```\r\nFoo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\r\n```","link":"https://stackoverflow.com/questions/77538537/convert-c-custom-unit-type-to-primative-java-type-with-swig","title":"Convert C++ custom unit type to primative Java type with SWIG","body":"<p>I have C++ code that I am attempting to provide Java bindings using SWIG.</p>\n<pre><code>struct meters_t : public boost::units::quantity&lt;boost::units::si::length&gt; {};\n</code></pre>\n<p>I am hoping to try replace all references of <code>meters_t</code> to just be a <code>double</code> or <code>Java.lang.Double</code>.</p>\n<p>I've attempted the following in my SWIG interface <code>.i</code> file:</p>\n<pre><code>%typemap(jstype) meters_t &quot;java.lang.Double&quot;\n%typemap(jtype) meters_t &quot;java.lang.Double&quot;\n%typemap(jni) meters_t &quot;jdouble&quot;\n...\n// Duplicated for const, const&amp;, &amp;\n%ignore meters_t\n%include &quot;my_include.h&quot;\n</code></pre>\n<p>However I am currently getting a typecast error</p>\n<pre><code>error C2440: 'type cast': cannot convert from 'meters_t *' to 'jdouble'\nerror C2440: 'type cast': cannot convert from `jdouble` to `meters_t *`\n</code></pre>\n<p>Does anyone have any advice to correct this? I am quickly losing hope that the idea of converting <code>meters_t</code> into a simple <code>double</code> will be possible :/</p>\n<p><strong>UPDATE:</strong>\nI have also added the following</p>\n<pre><code>%typemap(javain) meters_t &quot;$javainput&quot;\n</code></pre>\n<p>Which enables the Java bindings to be built, however when I attempt to use the Java bindings (on a different <code>struct</code> that takes <code>meters_t</code> as a constructor arg, it immediately throws an error</p>\n<pre><code>A fatal error has been detected by the Java Runtime Environment\nEXCEPTION_ACCESS_VIOLATION\n</code></pre>\n<p><strong>UPDATE 2.0</strong></p>\n<p>I now have <code>meters_t</code> SWIG wrapped. My new problem is a class with a boost default argument, and I'm getting the elusive <code>Syntax error in input(3).</code> error</p>\n<pre><code>Foo(meters_t meters = meters_t{ 0.0 * boost::units::si::meters });\n</code></pre>\n"},{"tags":["java","jax-rs","wildfly","resteasy","provider"],"comments":[{"score":0,"post_type":"question","creation_date":1700843902,"post_id":77537708,"comment_id":136706422,"body_markdown":"Can you post a stacktrace?","link":"https://stackoverflow.com/questions/77537708/jax-rs-provider-randomly-acts-server-wide#comment136706422_77537708","body":"Can you post a stacktrace?"},{"score":0,"post_type":"question","creation_date":1700933614,"post_id":77537708,"comment_id":136713799,"body_markdown":"I can post one when I get back to work, but there really isn&#39;t anything useful to see there. It&#39;s just endless lines of wildfly/resteasy interceptor stuff and then 2 lines of my filter being called.","link":"https://stackoverflow.com/questions/77537708/jax-rs-provider-randomly-acts-server-wide#comment136713799_77537708","body":"I can post one when I get back to work, but there really isn&#39;t anything useful to see there. It&#39;s just endless lines of wildfly/resteasy interceptor stuff and then 2 lines of my filter being called."},{"score":0,"post_type":"question","creation_date":1701092396,"post_id":77537708,"comment_id":136728319,"body_markdown":"@JamesR.Perkins added one\nCurrently pondering whether to just implement a requestfilter in all deployments instead. whatever resteasy does, the one defined within the deployment itself should always be prioritized. At least thats what I hope/think","link":"https://stackoverflow.com/questions/77537708/jax-rs-provider-randomly-acts-server-wide#comment136728319_77537708","body":"@JamesR.Perkins added one Currently pondering whether to just implement a requestfilter in all deployments instead. whatever resteasy does, the one defined within the deployment itself should always be prioritized. At least thats what I hope/think"},{"score":0,"post_type":"question","creation_date":1701104948,"post_id":77537708,"comment_id":136731070,"body_markdown":"What are you using to schedule jobs? It looks like the CDI context is not set. IoW what kind of executor are you using?","link":"https://stackoverflow.com/questions/77537708/jax-rs-provider-randomly-acts-server-wide#comment136731070_77537708","body":"What are you using to schedule jobs? It looks like the CDI context is not set. IoW what kind of executor are you using?"},{"score":0,"post_type":"question","creation_date":1701170270,"post_id":77537708,"comment_id":136739469,"body_markdown":"Im using the quartz scheduler. Jobs created by quartz arent CDI managed so that tracks (Class.newInstance() ). I can modify the job Factory to use CDi created instances (by CDI.current().select(xyz.class).get() ) However, the real issue is that the filter shouldn&#39;t be used in the first place.","link":"https://stackoverflow.com/questions/77537708/jax-rs-provider-randomly-acts-server-wide#comment136739469_77537708","body":"Im using the quartz scheduler. Jobs created by quartz arent CDI managed so that tracks (Class.newInstance() ). I can modify the job Factory to use CDi created instances (by CDI.current().select(xyz.class).get() ) However, the real issue is that the filter shouldn&#39;t be used in the first place."},{"score":0,"post_type":"question","creation_date":1701187667,"post_id":77537708,"comment_id":136742866,"body_markdown":"It&#39;s hard to say what&#39;s really happening when the thread is created out of the scope of the container. Do you know the error is coming from a specific failure? The only way I&#39;d be able to see what is happening is with a reproducer which I assume is nearly impossible. I&#39;d highly suggest looking at Jakarta Concurrency for scheduling threads.","link":"https://stackoverflow.com/questions/77537708/jax-rs-provider-randomly-acts-server-wide#comment136742866_77537708","body":"It&#39;s hard to say what&#39;s really happening when the thread is created out of the scope of the container. Do you know the error is coming from a specific failure? The only way I&#39;d be able to see what is happening is with a reproducer which I assume is nearly impossible. I&#39;d highly suggest looking at Jakarta Concurrency for scheduling threads."},{"score":0,"post_type":"question","creation_date":1701255089,"post_id":77537708,"comment_id":136752103,"body_markdown":"I&#39;m not entirely sure what you&#39;re asking. The error itself occurs because the invoked RequestFilter injects HttpServletRequest, and the injections fails in the filter because there is no request to inject (since the actual call came from a scheduled thread). Why the filter is even invoked is my question so no clue there.\n\nTransitioning to jakarta concurrency is not an option for us for several reason im afraid, I also cannot share a reproducer because the container and code rely on company internal resources.","link":"https://stackoverflow.com/questions/77537708/jax-rs-provider-randomly-acts-server-wide#comment136752103_77537708","body":"I&#39;m not entirely sure what you&#39;re asking. The error itself occurs because the invoked RequestFilter injects HttpServletRequest, and the injections fails in the filter because there is no request to inject (since the actual call came from a scheduled thread). Why the filter is even invoked is my question so no clue there.  Transitioning to jakarta concurrency is not an option for us for several reason im afraid, I also cannot share a reproducer because the container and code rely on company internal resources."},{"score":0,"post_type":"question","creation_date":1701255220,"post_id":77537708,"comment_id":136752127,"body_markdown":"In the end I just ended up removing the provider annotation and manually registering the filter to every restclient / restproxy (eclipse microprofile) via .register/@registerprovider in the wildlfy27 environment.\nFortunately, there weren&#39;t that many since there&#39;s a massive amount of calls/methods but not that many different targets, meaning they use the same client/proxy.\n\nFor some reason, wildfly10 still works fine even with the provider annotation in more than 5 deployments. I&#39;m guessing something changed in resteasy between these versions.\n\nThanks for trying to help though!","link":"https://stackoverflow.com/questions/77537708/jax-rs-provider-randomly-acts-server-wide#comment136752127_77537708","body":"In the end I just ended up removing the provider annotation and manually registering the filter to every restclient / restproxy (eclipse microprofile) via .register/@registerprovider in the wildlfy27 environment. Fortunately, there weren&#39;t that many since there&#39;s a massive amount of calls/methods but not that many different targets, meaning they use the same client/proxy.  For some reason, wildfly10 still works fine even with the provider annotation in more than 5 deployments. I&#39;m guessing something changed in resteasy between these versions.  Thanks for trying to help though!"},{"score":0,"post_type":"question","creation_date":1701281885,"post_id":77537708,"comment_id":136757525,"body_markdown":"I figured a reproducer would not be easy to do :) It would just be the only way I could see how the filter is getting registered. However, since it&#39;s coming from a deployment it should get discovered and added to the RESTEasy context. Given it is executed outside of a request, that&#39;s why the CDI context is out scope as you noted. I think your fix is the only way to do this. Even using a `ManagedExecutorService` would not work in this case. Sorry about the confusion there.","link":"https://stackoverflow.com/questions/77537708/jax-rs-provider-randomly-acts-server-wide#comment136757525_77537708","body":"I figured a reproducer would not be easy to do :) It would just be the only way I could see how the filter is getting registered. However, since it&#39;s coming from a deployment it should get discovered and added to the RESTEasy context. Given it is executed outside of a request, that&#39;s why the CDI context is out scope as you noted. I think your fix is the only way to do this. Even using a <code>ManagedExecutorService</code> would not work in this case. Sorry about the confusion there."}],"comment_count":9,"is_answered":false,"view_count":39,"answer_count":0,"score":0,"last_activity_date":1701092342,"creation_date":1700750274,"last_edit_date":1701092342,"question_id":77537708,"body_markdown":"I need some help understanding how Resteasy messes up my registered Providers\r\n\r\nI have 2 services, lets call them Scheduler and Process.\r\nProcess has a ClientRequestFilter annotated with @Provider that adds some headers to Rest Requests.\r\nScheduler regularly calls an entirely different service via Rest.It does not have a requestfilter, nor any dependency to Process. \r\n\r\nStill, *sometimes* when I start my wildfly27 container that contains these Services, my Scheduler will permanently throw Exceptions, whose stacktraces contain the Filter of my Process. (The filter injects HttpServletRequest, which isn&#39;t available there )\r\n\r\nNow as far as hours of googling got me, I think that all classes registered as providers are registered to the entire Resteasy runtime within wildfly, not just the specific deployment they&#39;re contained in.\r\n\r\nNow what I dont understand is why this behaviour appears to be completely random. Sometimes the container and services start just fine, sometimes they have this issue. The order in which they are deployed seems to have no effect on this.\r\nUndeploying the process which contains the requestfilter afterwards also does not change anything about this.\r\n\r\nRemoving the Provider annotation and instead listing the filter in the jakarta.ws.rs.ext.Providers file also had no effect.\r\n\r\nIt seems that a solution to this would be to manually register all resources and providers in the Application Class of the deployments, but I&#39;m not really that fond of manually adjusting numerous services that run within the same wildfly server and copying every single rest resource there.\r\nManually registering providers to every single rest client is also out of the question for the same reason.\r\n\r\nCan anyone clear up my confusion, and maybe even suggest a proper solution?\r\nThanks in advance\r\n\r\nstacktrace:\r\n```\r\njakarta.ws.rs.ProcessingException: org.jboss.weld.contexts.ContextNotActiveException: WELD-001303: No active contexts for scope type jakarta.enterprise.context.RequestScoped]\r\nwildfly27_1   | \tat deployment.scheduler.war//.scheduler.jobs.AbstractRestJob.execute(AbstractRestJob.java:61)\r\nwildfly27_1   | \tat deployment.scheduler.war//org.quartz.core.JobRunShell.run(JobRunShell.java:202)\r\nwildfly27_1   | \tat deployment.scheduler.war//org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\r\nwildfly27_1   | Caused by: jakarta.ws.rs.ProcessingException: org.jboss.weld.contexts.ContextNotActiveException: WELD-001303: No active contexts for scope type jakarta.enterprise.context.RequestScoped\r\nwildfly27_1   | \tat org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.filterRequest(ClientInvocation.java:767)\r\nwildfly27_1   | \tat org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.invoke(ClientInvocation.java:499)\r\nwildfly27_1   | \tat org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.invoke(ClientInvocation.java:71)\r\nwildfly27_1   | \tat org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocationBuilder.get(ClientInvocationBuilder.java:198)\r\nwildfly27_1   | \tat deployment.scheduler.war//scheduler.jobs.RestGetJob.performRequest(RestGetJob.java:16)\r\nwildfly27_1   | \tat deployment.scheduler.war//scheduler.jobs.AbstractRestJob.execute(AbstractRestJob.java:45)\r\nwildfly27_1   | \t... 2 more\r\nwildfly27_1   | Caused by: org.jboss.weld.contexts.ContextNotActiveException: WELD-001303: No active contexts for scope type jakarta.enterprise.context.RequestScoped\r\nwildfly27_1   | \tat org.jboss.weld.core@5.1.0.Final//org.jboss.weld.manager.BeanManagerImpl.getContext(BeanManagerImpl.java:628)\r\nwildfly27_1   | \tat org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.ContextualInstanceStrategy$DefaultContextualInstanceStrategy.getIfExists(ContextualInstanceStrategy.java:89)\r\nwildfly27_1   | \tat org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.ContextualInstance.getIfExists(ContextualInstance.java:63)\r\nwildfly27_1   | \tat org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:87)\r\nwildfly27_1   | \tat org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105)\r\nwildfly27_1   | \tat org.jboss.weld.core@5.1.0.Final//org.jboss.weld.generated.proxies.servlet.http.HttpServletRequest$Proxy$_$$_WeldClientProxy.getRemoteUser(Unknown Source)\r\nwildfly27_1   | \tat deployment.process.war//process.core.remote.RequestFilter.filter(RequestFilter.java:20)\r\nwildfly27_1   | \tat deployment.process.war//process.core.remote.RequestFilter$Proxy$_$$_WeldClientProxy.filter(Unknown Source)\r\nwildfly27_1   | \tat org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.filterRequest(ClientInvocation.java:754)\r\nwildfly27_1   | \t... 7 more\r\n```","link":"https://stackoverflow.com/questions/77537708/jax-rs-provider-randomly-acts-server-wide","title":"JAX-RS Provider randomly acts server-wide","body":"<p>I need some help understanding how Resteasy messes up my registered Providers</p>\n<p>I have 2 services, lets call them Scheduler and Process.\nProcess has a ClientRequestFilter annotated with @Provider that adds some headers to Rest Requests.\nScheduler regularly calls an entirely different service via Rest.It does not have a requestfilter, nor any dependency to Process.</p>\n<p>Still, <em>sometimes</em> when I start my wildfly27 container that contains these Services, my Scheduler will permanently throw Exceptions, whose stacktraces contain the Filter of my Process. (The filter injects HttpServletRequest, which isn't available there )</p>\n<p>Now as far as hours of googling got me, I think that all classes registered as providers are registered to the entire Resteasy runtime within wildfly, not just the specific deployment they're contained in.</p>\n<p>Now what I dont understand is why this behaviour appears to be completely random. Sometimes the container and services start just fine, sometimes they have this issue. The order in which they are deployed seems to have no effect on this.\nUndeploying the process which contains the requestfilter afterwards also does not change anything about this.</p>\n<p>Removing the Provider annotation and instead listing the filter in the jakarta.ws.rs.ext.Providers file also had no effect.</p>\n<p>It seems that a solution to this would be to manually register all resources and providers in the Application Class of the deployments, but I'm not really that fond of manually adjusting numerous services that run within the same wildfly server and copying every single rest resource there.\nManually registering providers to every single rest client is also out of the question for the same reason.</p>\n<p>Can anyone clear up my confusion, and maybe even suggest a proper solution?\nThanks in advance</p>\n<p>stacktrace:</p>\n<pre><code>jakarta.ws.rs.ProcessingException: org.jboss.weld.contexts.ContextNotActiveException: WELD-001303: No active contexts for scope type jakarta.enterprise.context.RequestScoped]\nwildfly27_1   |     at deployment.scheduler.war//.scheduler.jobs.AbstractRestJob.execute(AbstractRestJob.java:61)\nwildfly27_1   |     at deployment.scheduler.war//org.quartz.core.JobRunShell.run(JobRunShell.java:202)\nwildfly27_1   |     at deployment.scheduler.war//org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\nwildfly27_1   | Caused by: jakarta.ws.rs.ProcessingException: org.jboss.weld.contexts.ContextNotActiveException: WELD-001303: No active contexts for scope type jakarta.enterprise.context.RequestScoped\nwildfly27_1   |     at org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.filterRequest(ClientInvocation.java:767)\nwildfly27_1   |     at org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.invoke(ClientInvocation.java:499)\nwildfly27_1   |     at org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.invoke(ClientInvocation.java:71)\nwildfly27_1   |     at org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocationBuilder.get(ClientInvocationBuilder.java:198)\nwildfly27_1   |     at deployment.scheduler.war//scheduler.jobs.RestGetJob.performRequest(RestGetJob.java:16)\nwildfly27_1   |     at deployment.scheduler.war//scheduler.jobs.AbstractRestJob.execute(AbstractRestJob.java:45)\nwildfly27_1   |     ... 2 more\nwildfly27_1   | Caused by: org.jboss.weld.contexts.ContextNotActiveException: WELD-001303: No active contexts for scope type jakarta.enterprise.context.RequestScoped\nwildfly27_1   |     at org.jboss.weld.core@5.1.0.Final//org.jboss.weld.manager.BeanManagerImpl.getContext(BeanManagerImpl.java:628)\nwildfly27_1   |     at org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.ContextualInstanceStrategy$DefaultContextualInstanceStrategy.getIfExists(ContextualInstanceStrategy.java:89)\nwildfly27_1   |     at org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.ContextualInstance.getIfExists(ContextualInstance.java:63)\nwildfly27_1   |     at org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:87)\nwildfly27_1   |     at org.jboss.weld.core@5.1.0.Final//org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105)\nwildfly27_1   |     at org.jboss.weld.core@5.1.0.Final//org.jboss.weld.generated.proxies.servlet.http.HttpServletRequest$Proxy$_$$_WeldClientProxy.getRemoteUser(Unknown Source)\nwildfly27_1   |     at deployment.process.war//process.core.remote.RequestFilter.filter(RequestFilter.java:20)\nwildfly27_1   |     at deployment.process.war//process.core.remote.RequestFilter$Proxy$_$$_WeldClientProxy.filter(Unknown Source)\nwildfly27_1   |     at org.jboss.resteasy.resteasy-client@6.2.1.Final//org.jboss.resteasy.client.jaxrs.internal.ClientInvocation.filterRequest(ClientInvocation.java:754)\nwildfly27_1   |     ... 7 more\n</code></pre>\n"},{"tags":["java","apache-kafka","azure-functions","avro"],"comments":[{"score":0,"post_type":"question","creation_date":1700847159,"post_id":77544241,"comment_id":136706892,"body_markdown":"What exactly is incomplete? What do you &quot;malformed&quot;. Looks like every field is there from the schema. Everything in the meeting record has a default of null... Have you tried using `ConsumerRecord&lt;K, Meeting&gt;`?","link":"https://stackoverflow.com/questions/77544241/azure-functions-kafkatrigger-deserialize-composite-object-with-avro-return-n#comment136706892_77544241","body":"What exactly is incomplete? What do you &quot;malformed&quot;. Looks like every field is there from the schema. Everything in the meeting record has a default of null... Have you tried using <code>ConsumerRecord&lt;K, Meeting&gt;</code>?"},{"score":0,"post_type":"question","creation_date":1701071690,"post_id":77544241,"comment_id":136724862,"body_markdown":"When I use:\n\n                  dataType = &quot;string&quot;,\n                    avroSchema = avro,\n                    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\n                    consumerGroup=&quot;%ConsumerGroup%&quot;) String kafkaEventData\n\nI give String which contains data only for first level. Next level contains only schema.\n\n{&quot;correlationId&quot;:&quot;iaymjxnlpnocbe&quot;,&quot;meeting&quot;:{&quot;Schema&quot;:{&quot;Fields&quot;:[{&quot;Name&quot;:&quot;assistanceType&quot;,&quot;aliases&quot;:null,&quot;Aliases&quot;:null,&quot;Pos&quot;:0,&quot;Documentation&quot;:&quot;Typ asistence na schuzce.&quot;,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schemas&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;Tag&quot;:0,&quot;Fullname&quot;:&quot;null&quot;},","link":"https://stackoverflow.com/questions/77544241/azure-functions-kafkatrigger-deserialize-composite-object-with-avro-return-n#comment136724862_77544241","body":"When I use:                    dataType = &quot;string&quot;,                     avroSchema = avro,                     schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,                     consumerGroup=&quot;%ConsumerGroup%&quot;) String kafkaEventData  I give String which contains data only for first level. Next level contains only schema.  {&quot;correlationId&quot;:&quot;iaymjxnlpnocbe&quot;,&quot;meeting&quot;:{&quot;Schema&quot;:{&quot;Fiel&zwnj;&#8203;ds&quot;:[{&quot;Name&quot;:&quot;assist&zwnj;&#8203;anceType&quot;,&quot;aliases&quot;:&zwnj;&#8203;null,&quot;Aliases&quot;:null,&zwnj;&#8203;&quot;Pos&quot;:0,&quot;Documentati&zwnj;&#8203;on&quot;:&quot;Typ asistence na schuzce.&quot;,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schema&zwnj;&#8203;s&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;&zwnj;&#8203;Tag&quot;:0,&quot;Fullname&quot;:&quot;n&zwnj;&#8203;ull&quot;},"},{"score":0,"post_type":"question","creation_date":1701071818,"post_id":77544241,"comment_id":136724878,"body_markdown":"When I use:\n\n                   avroSchema = avro,\n                    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\n                    consumerGroup=&quot;%ConsumerGroup%&quot;) ConsumerRecord&lt;Object, Meeting&gt; kafkaEventData\n\nI give exception:\n\nMethod threw &#39;java.lang.NullPointerException&#39; exception. Cannot evaluate org.apache.kafka.clients.consumer.ConsumerRecord.toString()","link":"https://stackoverflow.com/questions/77544241/azure-functions-kafkatrigger-deserialize-composite-object-with-avro-return-n#comment136724878_77544241","body":"When I use:                     avroSchema = avro,                     schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,                     consumerGroup=&quot;%ConsumerGroup%&quot;) ConsumerRecord&lt;Object, Meeting&gt; kafkaEventData  I give exception:  Method threw &#39;java.lang.NullPointerException&#39; exception. Cannot evaluate org.apache.kafka.clients.consumer.ConsumerRecord.toString()"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701090658,"creation_date":1701090658,"answer_id":77557166,"question_id":77544241,"body_markdown":"Ultimately, I think it&#39;s working as documented... You&#39;ll need to contact Azure support to get anything different... \r\n\r\nAccording to the documentation, if you use string, then you&#39;ll always get the whole record as json, and must manually deserialize using json first before you can process anything else. \r\n\r\nIf you don&#39;t want json, you can also supply datatype as binary, in which case, you&#39;ll still need to manually deserialize the data using Confluent deserializer class, but still, that may only be the value \r\n\r\nWhen using avro datatype, you can only supply a schema for the value, not also a key, assuming it were Avro as well.\r\n\r\n---\r\n\r\nYou can find an example here for getting the record headers and you&#39;ll have to do something similar to get the key\r\n\r\nhttps://github.com/Azure/azure-functions-kafka-extension/blob/dev/samples/java/confluent/src/main/java/com/contoso/kafka/KafkaTriggerWithHeaders.java\r\n\r\n","link":"https://stackoverflow.com/questions/77544241/azure-functions-kafkatrigger-deserialize-composite-object-with-avro-return-n/77557166#77557166","title":"Azure Functions - KafkaTrigger - Deserialize composite object with avro return null values on second level","body":"<p>Ultimately, I think it's working as documented... You'll need to contact Azure support to get anything different...</p>\n<p>According to the documentation, if you use string, then you'll always get the whole record as json, and must manually deserialize using json first before you can process anything else.</p>\n<p>If you don't want json, you can also supply datatype as binary, in which case, you'll still need to manually deserialize the data using Confluent deserializer class, but still, that may only be the value</p>\n<p>When using avro datatype, you can only supply a schema for the value, not also a key, assuming it were Avro as well.</p>\n<hr />\n<p>You can find an example here for getting the record headers and you'll have to do something similar to get the key</p>\n<p><a href=\"https://github.com/Azure/azure-functions-kafka-extension/blob/dev/samples/java/confluent/src/main/java/com/contoso/kafka/KafkaTriggerWithHeaders.java\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-functions-kafka-extension/blob/dev/samples/java/confluent/src/main/java/com/contoso/kafka/KafkaTriggerWithHeaders.java</a></p>\n"}],"comment_count":3,"is_answered":true,"view_count":54,"answer_count":1,"score":0,"last_activity_date":1701090658,"creation_date":1700839989,"last_edit_date":1701072453,"question_id":77544241,"body_markdown":"I&#39;am creating Azure Functions using KafkaTrigger to consume data from Kafka, where an Avro schema is registered. When i use dataType = &quot;binary&quot;, i can deserialize the message, but I&#39;m unable to get the message key, only value. When I use avroSchema = myAvro, I can get an object containing the key, but the data is in a malformed string format.\r\n\r\nI need deserialize complex object. Ideal with use schema registry.\r\n\r\n```\r\n@KafkaTrigger(\r\n    name = &quot;kafkaMeetingTrigger&quot;,\r\n    topic = &quot;topicName&quot;,\r\n    brokerList = &quot;%BrokerList%&quot;,\r\n    cardinality = Cardinality.ONE,\r\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\r\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\r\n    sslCaLocation = &quot;%KafkaCert%&quot;,\r\n    protocol = BrokerProtocol.SSL,\r\n    dataType = &quot;binary&quot;,\r\n    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\r\n    consumerGroup=&quot;%ConsumerGroup%&quot;) byte[] kafkaEventData,\r\n```\r\n\r\nThis return byte array with value from Kafka. Then I able to deserialize to my object, but key is lost.\r\n\r\n```\r\n@KafkaTrigger(\r\n    name = &quot;kafkaMeetingTrigger&quot;,\r\n    topic = &quot;topicName&quot;,\r\n    brokerList = &quot;%BrokerList%&quot;,\r\n    cardinality = Cardinality.ONE,\r\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\r\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\r\n    sslCaLocation = &quot;%KafkaCert%&quot;,\r\n    protocol = BrokerProtocol.SSL,\r\n    avroSchema = avro,\r\n    consumerGroup=&quot;%ConsumerGroup%&quot;) Meeting kafkaEventData\r\n```\r\n\r\nThis return incomplete object.\r\n\r\n    {\r\n    &quot;correlationId&quot;: &quot;iaymjxnlpnocbe&quot;,\r\n    &quot;meeting&quot;:\r\n    {\r\n        &quot;assistanceType&quot;: null,\r\n        &quot;attendanceType&quot;: null,\r\n        &quot;clients&quot;: null,\r\n        &quot;communicationType&quot;: null\r\n    },\r\n    &quot;published&quot;: &quot;2023-11-24T11:31:05.105Z&quot;,\r\n    &quot;transactionId&quot;: &quot;ipdsrntgklkvliyt&quot;\r\n}\r\n\r\nExample of avro:\r\n\r\n```\r\n{\r\n  &quot;type&quot;: &quot;record&quot;,\r\n  &quot;name&quot;: &quot;Meeting_keyDataChanged&quot;,\r\n  &quot;namespace&quot;: &quot;cz.csas.avroschemas.meeting_keydatachanged.v03_02&quot;,\r\n  &quot;fields&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;correlationId&quot;,\r\n      &quot;type&quot;: &quot;string&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;meeting&quot;,\r\n      &quot;type&quot;: {\r\n        &quot;type&quot;: &quot;record&quot;,\r\n        &quot;name&quot;: &quot;Meeting&quot;,\r\n        &quot;fields&quot;: [\r\n          {\r\n            &quot;name&quot;: &quot;assistanceType&quot;,\r\n            &quot;type&quot;: [\r\n              &quot;null&quot;,\r\n              &quot;string&quot;\r\n            ],\r\n            &quot;default&quot;: null\r\n          },\r\n          {\r\n            &quot;name&quot;: &quot;attendanceType&quot;,\r\n            &quot;type&quot;: [\r\n              &quot;null&quot;,\r\n              &quot;string&quot;\r\n            ],\r\n            &quot;default&quot;: null\r\n          },\r\n          {\r\n            &quot;name&quot;: &quot;clients&quot;,\r\n            &quot;type&quot;: [\r\n              &quot;null&quot;,\r\n              {\r\n                &quot;type&quot;: &quot;array&quot;,\r\n                &quot;items&quot;: {\r\n                  &quot;type&quot;: &quot;record&quot;,\r\n                  &quot;name&quot;: &quot;Client&quot;,\r\n                  &quot;fields&quot;: [\r\n                    {\r\n                      &quot;name&quot;: &quot;clientType&quot;,\r\n                      &quot;type&quot;: &quot;string&quot;\r\n                    },\r\n                    {\r\n                      &quot;name&quot;: &quot;isPrimary&quot;,\r\n                      &quot;type&quot;: &quot;boolean&quot;\r\n                    }\r\n                  ]\r\n                }\r\n              }\r\n            ],\r\n            &quot;default&quot;: null\r\n          },\r\n       .........\r\n    {\r\n      &quot;name&quot;: &quot;published&quot;,\r\n      &quot;type&quot;: {\r\n        &quot;type&quot;: &quot;long&quot;,\r\n        &quot;logicalType&quot;: &quot;timestamp-millis&quot;\r\n      }\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;transactionId&quot;,\r\n      &quot;type&quot;: &quot;string&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n```\r\n@KafkaTrigger(\r\n   name = &quot;kafkaMeetingTrigger&quot;,\r\n   topic = &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\r\n   brokerList = &quot;%BrokerList%&quot;,\r\n   cardinality = Cardinality.ONE,\r\n   sslCertificateLocation = &quot;%KafkaCert%&quot;,\r\n   sslKeyLocation = &quot;%KafkaCert%&quot;,\r\n   sslCaLocation = &quot;%KafkaCert%&quot;,\r\n   protocol = BrokerProtocol.SSL,\r\n   avroSchema = avro,\r\n   schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\r\n   consumerGroup=&quot;%ConsumerGroup%&quot;) ConsumerRecord&lt;Object, Meeting&gt; kafkaEventData\r\n```\r\n\r\nThis return exception: Cannot evaluate org.apache.kafka.clients.consumer.ConsumerRecord.toString()\r\n\r\n```\r\n@KafkaTrigger(\r\n    name = &quot;kafkaMeetingTrigger&quot;,\r\n    topic = &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\r\n    brokerList = &quot;%BrokerList%&quot;,\r\n    cardinality = Cardinality.ONE,\r\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\r\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\r\n    sslCaLocation = &quot;%KafkaCert%&quot;,\r\n    protocol = BrokerProtocol.SSL,\r\n    dataType = &quot;string&quot;,\r\n    avroSchema = avro,\r\n    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\r\n    consumerGroup=&quot;%ConsumerGroup%&quot;) String kafkaEventData\r\n```\r\n\r\nThis return String which contains data only for first level. Next level contains only schema.\r\n\r\n```\r\n{&quot;correlationId&quot;:&quot;iaymjxnlpnocbe&quot;,&quot;meeting&quot;:{&quot;Schema&quot;:{&quot;Fields&quot;:[{&quot;Name&quot;:&quot;assistanceType&quot;,&quot;aliases&quot;:null,&quot;Aliases&quot;:null,&quot;Pos&quot;:0,&quot;Documentation&quot;:&quot;Typ asistence na schuzce.&quot;,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schemas&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;Tag&quot;:0,&quot;Fullname&quot;:&quot;null&quot;},{&quot;Name&quot;:&quot;string&quot;,&quot;Tag&quot;:7,&quot;Fullname&quot;:&quot;string&quot;}],&quot;Count&quot;:2,&quot;Name&quot;:&quot;union&quot;,&quot;Tag&quot;:12,&quot;Fullname&quot;:&quot;union&quot;}},{&quot;Name&quot;:&quot;attendanceType&quot;,&quot;aliases&quot;:null,&quot;Aliases&quot;:null,&quot;Pos&quot;:1,&quot;Documentation&quot;:&quot;Typ doprovodu na schuzce.&quot;,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schemas&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;Tag&quot;:0,&quot;Fullname&quot;:&quot;null&quot;},{&quot;Name&quot;:&quot;string&quot;,&quot;Tag&quot;:7,&quot;Fullname&quot;:&quot;string&quot;}],&quot;Count&quot;:2,&quot;Name&quot;:&quot;union&quot;,&quot;Tag&quot;:12,&quot;Fullname&quot;:&quot;union&quot;}},{&quot;Name&quot;:&quot;clients&quot;,&quot;aliases&quot;:null,&quot;Aliases&quot;:null,&quot;Pos&quot;:2,&quot;Documentation&quot;:null,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schemas&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;Tag&quot;:0,......\r\n```\r\n\r\nWhen I don&#39;t use avro I give whole object with key and offset, but Object can&#39;t deserialize.\r\n\r\n```\r\n@KafkaTrigger(\r\n    name = &quot;kafkaMeetingTrigger&quot;,\r\n    topic = &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\r\n    brokerList = &quot;%BrokerList%&quot;,\r\n    cardinality = Cardinality.ONE,\r\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\r\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\r\n    sslCaLocation = &quot;%KafkaCert%&quot;,\r\n    protocol = BrokerProtocol.SSL,\r\n    dataType = &quot;string&quot;,\r\n    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\r\n    consumerGroup=&quot;%ConsumerGroup%&quot;) String kafkaEventData\r\n```\r\n\r\nExample of result\r\n```\r\n{\r\n    &quot;Offset&quot;: 323,\r\n    &quot;Partition&quot;: 0,\r\n    &quot;Topic&quot;: &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\r\n    &quot;Timestamp&quot;: &quot;2023-11-27T07:46:12.435Z&quot;,\r\n    &quot;Value&quot;: &quot;\\u0000\\u0000\\u0000\\bE\\u001ciaymjxnlpnocbe\\u0002\\u0016kbsdkmeyalo\\u00022urhywvxlrixyuqhhmrioqvpxv\\u0002\\u0002&lt;mcxbasjpxwfbjmogfdlmyucmtkiffpHnmysbemqgyeqnelyhjboneshwjufsulyfpfv\\u0001\\u0000\\u0002.tslhjfloiepkmuneymnqbjc\\u0002(fxjlobrtqoaymkfwurqm\\u0002\\brxsy��ȑ�c\\u0000\\u0002Bsqnsoblhpfkobciourcjtpwxrgqnvdtrq\\u0002\\u001ewwntnicjjvcsglu\\u0002&amp;sdpdptdflhjlkrhxlls\\u00020msrqlxpjbdkkgbwsuslaeeql\\u0002&lt;nvttxsgwwlmgvtbhflbmdvtfceasvm\\u0002Nakybxmgwxlapymnfymqytjwdqcwfipivsnmjpmi\\u0002\\u0002\\bselt\\bpmep\\u0002:gcpxjxwrqtceoysrirqvdnllmhcdv\\u0002\\u001accbfdnjyrbtxi\\u0004tr��ȑ�cBxouriawfhfevlthfcfikpuaarjxfmmwkl\\u0002.gvoiukbrporvptduebdvucb\\u0002\\u0006xsp\\b\\u0002\\u0002(mfiudurtxmiejnynnjis\\u0002@qcohlkrkprlkuydljhpkilaxoxsvrrbg\\u0002\\u001anptiwyholnpfr\\u0001@usyyfhyjfoyoaulsvnyjnxcqicfscbkl\\u0002\\u0002Hsgduxxraimgjsduecbgyvypeupuhmvuqcwkc\\u0002\\u001ehxhupdrenujqcrx\\u00028khjhnbyjeihfkfrmkuuyepvxdhbv\\u00016vijyhthrgatcjxqbimfslksnrti\\u0002\\u0002Hrbudwdqichgdgwwgnscljauphjclxbrjpmoe\\u00024jxkknmcltpitgocsfdcrwjuvoc\\u0002\\bklpd\\u0001Jkuwvteymnagdcjvtjwlnvktwjfqbncgpxbhnh\\u0002\\u0002Jjgsfdxrsujpbkdbewkuudtsdajvmexniuwpxu\\u0002Fgerujewxkcnmexffsujlyibkbidnjxyiedr\\u0002\\u0000\\u0001.bdfyrklhntdbknmuxvrgwjc\\u0000��ȑ�c ipdsrntgklkvliyt&quot;,\r\n    &quot;Key&quot;: null,\r\n    &quot;Headers&quot;:\r\n    []\r\n}\r\n```\r\n\r\n","link":"https://stackoverflow.com/questions/77544241/azure-functions-kafkatrigger-deserialize-composite-object-with-avro-return-n","title":"Azure Functions - KafkaTrigger - Deserialize composite object with avro return null values on second level","body":"<p>I'am creating Azure Functions using KafkaTrigger to consume data from Kafka, where an Avro schema is registered. When i use dataType = &quot;binary&quot;, i can deserialize the message, but I'm unable to get the message key, only value. When I use avroSchema = myAvro, I can get an object containing the key, but the data is in a malformed string format.</p>\n<p>I need deserialize complex object. Ideal with use schema registry.</p>\n<pre><code>@KafkaTrigger(\n    name = &quot;kafkaMeetingTrigger&quot;,\n    topic = &quot;topicName&quot;,\n    brokerList = &quot;%BrokerList%&quot;,\n    cardinality = Cardinality.ONE,\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\n    sslCaLocation = &quot;%KafkaCert%&quot;,\n    protocol = BrokerProtocol.SSL,\n    dataType = &quot;binary&quot;,\n    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\n    consumerGroup=&quot;%ConsumerGroup%&quot;) byte[] kafkaEventData,\n</code></pre>\n<p>This return byte array with value from Kafka. Then I able to deserialize to my object, but key is lost.</p>\n<pre><code>@KafkaTrigger(\n    name = &quot;kafkaMeetingTrigger&quot;,\n    topic = &quot;topicName&quot;,\n    brokerList = &quot;%BrokerList%&quot;,\n    cardinality = Cardinality.ONE,\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\n    sslCaLocation = &quot;%KafkaCert%&quot;,\n    protocol = BrokerProtocol.SSL,\n    avroSchema = avro,\n    consumerGroup=&quot;%ConsumerGroup%&quot;) Meeting kafkaEventData\n</code></pre>\n<p>This return incomplete object.</p>\n<pre><code>{\n&quot;correlationId&quot;: &quot;iaymjxnlpnocbe&quot;,\n&quot;meeting&quot;:\n{\n    &quot;assistanceType&quot;: null,\n    &quot;attendanceType&quot;: null,\n    &quot;clients&quot;: null,\n    &quot;communicationType&quot;: null\n},\n&quot;published&quot;: &quot;2023-11-24T11:31:05.105Z&quot;,\n&quot;transactionId&quot;: &quot;ipdsrntgklkvliyt&quot;\n</code></pre>\n<p>}</p>\n<p>Example of avro:</p>\n<pre><code>{\n  &quot;type&quot;: &quot;record&quot;,\n  &quot;name&quot;: &quot;Meeting_keyDataChanged&quot;,\n  &quot;namespace&quot;: &quot;cz.csas.avroschemas.meeting_keydatachanged.v03_02&quot;,\n  &quot;fields&quot;: [\n    {\n      &quot;name&quot;: &quot;correlationId&quot;,\n      &quot;type&quot;: &quot;string&quot;\n    },\n    {\n      &quot;name&quot;: &quot;meeting&quot;,\n      &quot;type&quot;: {\n        &quot;type&quot;: &quot;record&quot;,\n        &quot;name&quot;: &quot;Meeting&quot;,\n        &quot;fields&quot;: [\n          {\n            &quot;name&quot;: &quot;assistanceType&quot;,\n            &quot;type&quot;: [\n              &quot;null&quot;,\n              &quot;string&quot;\n            ],\n            &quot;default&quot;: null\n          },\n          {\n            &quot;name&quot;: &quot;attendanceType&quot;,\n            &quot;type&quot;: [\n              &quot;null&quot;,\n              &quot;string&quot;\n            ],\n            &quot;default&quot;: null\n          },\n          {\n            &quot;name&quot;: &quot;clients&quot;,\n            &quot;type&quot;: [\n              &quot;null&quot;,\n              {\n                &quot;type&quot;: &quot;array&quot;,\n                &quot;items&quot;: {\n                  &quot;type&quot;: &quot;record&quot;,\n                  &quot;name&quot;: &quot;Client&quot;,\n                  &quot;fields&quot;: [\n                    {\n                      &quot;name&quot;: &quot;clientType&quot;,\n                      &quot;type&quot;: &quot;string&quot;\n                    },\n                    {\n                      &quot;name&quot;: &quot;isPrimary&quot;,\n                      &quot;type&quot;: &quot;boolean&quot;\n                    }\n                  ]\n                }\n              }\n            ],\n            &quot;default&quot;: null\n          },\n       .........\n    {\n      &quot;name&quot;: &quot;published&quot;,\n      &quot;type&quot;: {\n        &quot;type&quot;: &quot;long&quot;,\n        &quot;logicalType&quot;: &quot;timestamp-millis&quot;\n      }\n    },\n    {\n      &quot;name&quot;: &quot;transactionId&quot;,\n      &quot;type&quot;: &quot;string&quot;\n    }\n  ]\n}\n</code></pre>\n<pre><code>@KafkaTrigger(\n   name = &quot;kafkaMeetingTrigger&quot;,\n   topic = &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\n   brokerList = &quot;%BrokerList%&quot;,\n   cardinality = Cardinality.ONE,\n   sslCertificateLocation = &quot;%KafkaCert%&quot;,\n   sslKeyLocation = &quot;%KafkaCert%&quot;,\n   sslCaLocation = &quot;%KafkaCert%&quot;,\n   protocol = BrokerProtocol.SSL,\n   avroSchema = avro,\n   schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\n   consumerGroup=&quot;%ConsumerGroup%&quot;) ConsumerRecord&lt;Object, Meeting&gt; kafkaEventData\n</code></pre>\n<p>This return exception: Cannot evaluate org.apache.kafka.clients.consumer.ConsumerRecord.toString()</p>\n<pre><code>@KafkaTrigger(\n    name = &quot;kafkaMeetingTrigger&quot;,\n    topic = &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\n    brokerList = &quot;%BrokerList%&quot;,\n    cardinality = Cardinality.ONE,\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\n    sslCaLocation = &quot;%KafkaCert%&quot;,\n    protocol = BrokerProtocol.SSL,\n    dataType = &quot;string&quot;,\n    avroSchema = avro,\n    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\n    consumerGroup=&quot;%ConsumerGroup%&quot;) String kafkaEventData\n</code></pre>\n<p>This return String which contains data only for first level. Next level contains only schema.</p>\n<pre><code>{&quot;correlationId&quot;:&quot;iaymjxnlpnocbe&quot;,&quot;meeting&quot;:{&quot;Schema&quot;:{&quot;Fields&quot;:[{&quot;Name&quot;:&quot;assistanceType&quot;,&quot;aliases&quot;:null,&quot;Aliases&quot;:null,&quot;Pos&quot;:0,&quot;Documentation&quot;:&quot;Typ asistence na schuzce.&quot;,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schemas&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;Tag&quot;:0,&quot;Fullname&quot;:&quot;null&quot;},{&quot;Name&quot;:&quot;string&quot;,&quot;Tag&quot;:7,&quot;Fullname&quot;:&quot;string&quot;}],&quot;Count&quot;:2,&quot;Name&quot;:&quot;union&quot;,&quot;Tag&quot;:12,&quot;Fullname&quot;:&quot;union&quot;}},{&quot;Name&quot;:&quot;attendanceType&quot;,&quot;aliases&quot;:null,&quot;Aliases&quot;:null,&quot;Pos&quot;:1,&quot;Documentation&quot;:&quot;Typ doprovodu na schuzce.&quot;,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schemas&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;Tag&quot;:0,&quot;Fullname&quot;:&quot;null&quot;},{&quot;Name&quot;:&quot;string&quot;,&quot;Tag&quot;:7,&quot;Fullname&quot;:&quot;string&quot;}],&quot;Count&quot;:2,&quot;Name&quot;:&quot;union&quot;,&quot;Tag&quot;:12,&quot;Fullname&quot;:&quot;union&quot;}},{&quot;Name&quot;:&quot;clients&quot;,&quot;aliases&quot;:null,&quot;Aliases&quot;:null,&quot;Pos&quot;:2,&quot;Documentation&quot;:null,&quot;DefaultValue&quot;:null,&quot;Ordering&quot;:2,&quot;Schema&quot;:{&quot;Schemas&quot;:[{&quot;Name&quot;:&quot;null&quot;,&quot;Tag&quot;:0,......\n</code></pre>\n<p>When I don't use avro I give whole object with key and offset, but Object can't deserialize.</p>\n<pre><code>@KafkaTrigger(\n    name = &quot;kafkaMeetingTrigger&quot;,\n    topic = &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\n    brokerList = &quot;%BrokerList%&quot;,\n    cardinality = Cardinality.ONE,\n    sslCertificateLocation = &quot;%KafkaCert%&quot;,\n    sslKeyLocation = &quot;%KafkaCert%&quot;,\n    sslCaLocation = &quot;%KafkaCert%&quot;,\n    protocol = BrokerProtocol.SSL,\n    dataType = &quot;string&quot;,\n    schemaRegistryUrl = &quot;%SchemaRegistry%&quot;,\n    consumerGroup=&quot;%ConsumerGroup%&quot;) String kafkaEventData\n</code></pre>\n<p>Example of result</p>\n<pre><code>{\n    &quot;Offset&quot;: 323,\n    &quot;Partition&quot;: 0,\n    &quot;Topic&quot;: &quot;EVT.Meeting_keyDataChanged_v03_02&quot;,\n    &quot;Timestamp&quot;: &quot;2023-11-27T07:46:12.435Z&quot;,\n    &quot;Value&quot;: &quot;\\u0000\\u0000\\u0000\\bE\\u001ciaymjxnlpnocbe\\u0002\\u0016kbsdkmeyalo\\u00022urhywvxlrixyuqhhmrioqvpxv\\u0002\\u0002&lt;mcxbasjpxwfbjmogfdlmyucmtkiffpHnmysbemqgyeqnelyhjboneshwjufsulyfpfv\\u0001\\u0000\\u0002.tslhjfloiepkmuneymnqbjc\\u0002(fxjlobrtqoaymkfwurqm\\u0002\\brxsy��ȑ�c\\u0000\\u0002Bsqnsoblhpfkobciourcjtpwxrgqnvdtrq\\u0002\\u001ewwntnicjjvcsglu\\u0002&amp;sdpdptdflhjlkrhxlls\\u00020msrqlxpjbdkkgbwsuslaeeql\\u0002&lt;nvttxsgwwlmgvtbhflbmdvtfceasvm\\u0002Nakybxmgwxlapymnfymqytjwdqcwfipivsnmjpmi\\u0002\\u0002\\bselt\\bpmep\\u0002:gcpxjxwrqtceoysrirqvdnllmhcdv\\u0002\\u001accbfdnjyrbtxi\\u0004tr��ȑ�cBxouriawfhfevlthfcfikpuaarjxfmmwkl\\u0002.gvoiukbrporvptduebdvucb\\u0002\\u0006xsp\\b\\u0002\\u0002(mfiudurtxmiejnynnjis\\u0002@qcohlkrkprlkuydljhpkilaxoxsvrrbg\\u0002\\u001anptiwyholnpfr\\u0001@usyyfhyjfoyoaulsvnyjnxcqicfscbkl\\u0002\\u0002Hsgduxxraimgjsduecbgyvypeupuhmvuqcwkc\\u0002\\u001ehxhupdrenujqcrx\\u00028khjhnbyjeihfkfrmkuuyepvxdhbv\\u00016vijyhthrgatcjxqbimfslksnrti\\u0002\\u0002Hrbudwdqichgdgwwgnscljauphjclxbrjpmoe\\u00024jxkknmcltpitgocsfdcrwjuvoc\\u0002\\bklpd\\u0001Jkuwvteymnagdcjvtjwlnvktwjfqbncgpxbhnh\\u0002\\u0002Jjgsfdxrsujpbkdbewkuudtsdajvmexniuwpxu\\u0002Fgerujewxkcnmexffsujlyibkbidnjxyiedr\\u0002\\u0000\\u0001.bdfyrklhntdbknmuxvrgwjc\\u0000��ȑ�c ipdsrntgklkvliyt&quot;,\n    &quot;Key&quot;: null,\n    &quot;Headers&quot;:\n    []\n}\n</code></pre>\n"},{"tags":["java","eclipse","tomcat","servlets"],"comments":[{"score":0,"post_type":"question","creation_date":1700937080,"post_id":77549052,"comment_id":136714136,"body_markdown":"What do you mean with it &quot;generating&quot; the URL?","link":"https://stackoverflow.com/questions/77549052/in-eclipse-when-i-try-to-create-a-servlet-by-implementing-the-servlet-interface#comment136714136_77549052","body":"What do you mean with it &quot;generating&quot; the URL?"},{"score":0,"post_type":"question","creation_date":1700937625,"post_id":77549052,"comment_id":136714205,"body_markdown":"@dan1st on eclipse when we press run on server.. it automatically opens the web browzer with the correct url that is used to run the particular servlet we r trying to execute","link":"https://stackoverflow.com/questions/77549052/in-eclipse-when-i-try-to-create-a-servlet-by-implementing-the-servlet-interface#comment136714205_77549052","body":"@dan1st on eclipse when we press run on server.. it automatically opens the web browzer with the correct url that is used to run the particular servlet we r trying to execute"},{"score":0,"post_type":"question","creation_date":1700977746,"post_id":77549052,"comment_id":136716835,"body_markdown":"What version of Eclipse is it?","link":"https://stackoverflow.com/questions/77549052/in-eclipse-when-i-try-to-create-a-servlet-by-implementing-the-servlet-interface#comment136716835_77549052","body":"What version of Eclipse is it?"},{"score":0,"post_type":"question","creation_date":1700996874,"post_id":77549052,"comment_id":136718138,"body_markdown":"@nitind Version: 2023-09 (4.29.0)","link":"https://stackoverflow.com/questions/77549052/in-eclipse-when-i-try-to-create-a-servlet-by-implementing-the-servlet-interface#comment136718138_77549052","body":"@nitind Version: 2023-09 (4.29.0)"},{"score":0,"post_type":"question","creation_date":1701108316,"post_id":77549052,"comment_id":136731682,"body_markdown":"Is there a reason you&#39;re not extending `HttpServlet`?","link":"https://stackoverflow.com/questions/77549052/in-eclipse-when-i-try-to-create-a-servlet-by-implementing-the-servlet-interface#comment136731682_77549052","body":"Is there a reason you&#39;re not extending <code>HttpServlet</code>?"},{"score":0,"post_type":"question","creation_date":1701280934,"post_id":77549052,"comment_id":136757389,"body_markdown":"@nitind Just trying to learn all the ways to create a servlet","link":"https://stackoverflow.com/questions/77549052/in-eclipse-when-i-try-to-create-a-servlet-by-implementing-the-servlet-interface#comment136757389_77549052","body":"@nitind Just trying to learn all the ways to create a servlet"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701281147,"post_id":77557104,"comment_id":136757422,"body_markdown":"My project just has the code I have provided above.. in a project folder named firstwebsite and the code is saved in a file named impSer.java in the src/main/java folder of the java project","link":"https://stackoverflow.com/questions/77549052/in-eclipse-when-i-try-to-create-a-servlet-by-implementing-the-servlet-interface/77557104#comment136757422_77557104","body":"My project just has the code I have provided above.. in a project folder named firstwebsite and the code is saved in a file named impSer.java in the src/main/java folder of the java project"},{"score":0,"post_type":"answer","creation_date":1701284944,"post_id":77557104,"comment_id":136757996,"body_markdown":"Right, but the surrounding metadata files are also of interest.","link":"https://stackoverflow.com/questions/77549052/in-eclipse-when-i-try-to-create-a-servlet-by-implementing-the-servlet-interface/77557104#comment136757996_77557104","body":"Right, but the surrounding metadata files are also of interest."}],"comment_count":2,"score":1,"last_activity_date":1701090505,"last_edit_date":1701090505,"creation_date":1701090175,"answer_id":77557104,"question_id":77549052,"body_markdown":"Odd. Sounds similar to [bug 577703][1], but I fixed that one. Can you open an issue at https://github.com/eclipse-servertools/servertools/issues and attach this project, or another minimal project that reproduces the problem? \r\n\r\n\r\n  [1]: https://bugs.eclipse.org/577703","link":"https://stackoverflow.com/questions/77549052/in-eclipse-when-i-try-to-create-a-servlet-by-implementing-the-servlet-interface/77557104#77557104","title":"In eclipse when I try to create a Servlet by implementing the Servlet interface then the annotation method does not create the correct link on running","body":"<p>Odd. Sounds similar to <a href=\"https://bugs.eclipse.org/577703\" rel=\"nofollow noreferrer\">bug 577703</a>, but I fixed that one. Can you open an issue at <a href=\"https://github.com/eclipse-servertools/servertools/issues\" rel=\"nofollow noreferrer\">https://github.com/eclipse-servertools/servertools/issues</a> and attach this project, or another minimal project that reproduces the problem?</p>\n"}],"comment_count":6,"is_answered":true,"view_count":56,"answer_count":1,"score":0,"last_activity_date":1701090505,"creation_date":1700936041,"question_id":77549052,"body_markdown":"```My code is as follows:\r\n\r\nimport java.io.IOException;\r\n\r\nimport javax.servlet.Servlet;\r\nimport javax.servlet.ServletConfig;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.ServletRequest;\r\nimport javax.servlet.ServletResponse;\r\nimport javax.servlet.annotation.WebServlet;\r\n\r\n@WebServlet(&quot;/impSer&quot;)\r\npublic class impSer implements Servlet {\r\n\t private transient ServletConfig config;\r\n\r\n\t    @Override\r\n\t    public void init(ServletConfig config) throws ServletException {\r\n\t        this.config = config;\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException {\r\n\t        System.out.println(&quot;Hello world&quot;);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public void destroy() {\r\n\t        System.out.println(&quot;h&quot;);\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public ServletConfig getServletConfig() {\r\n\t        return this.config;\r\n\t    }\r\n\r\n\t    @Override\r\n\t    public String getServletInfo() {\r\n\t        return &quot;TheServletInter&quot;;\r\n\t    }\r\n}\r\n```\r\n\r\nI have saved my code in the src/main/java folder in the default package in my eclipse project named firstwebsite..\r\nWhen i run my code on the Tomcat server it generates this url \r\nhttp://localhost:8080/firstwebsite/WEB-INF/classes/impSer.java\r\nand gives Http Status 404-Not found error..\r\n\r\nI have used the annotation method so shouldnt it generate the correct url on running on server i.e. http://localhost:8080/firstwebsite/impSer \r\n\r\nWhen i type this manually it gives correct output.. but eclipse on running does not run the above url..\r\n\r\nI have Tomcat 9.. \r\n\r\nThe annotation method is working perfectly for Servlets created by extending GenericServlet and extending HttpServlet.. only the implementing Servlet interface is giving issues..\r\n\r\nI am new to Servlet programming so the helpp will be really appreciated.. Thank you","link":"https://stackoverflow.com/questions/77549052/in-eclipse-when-i-try-to-create-a-servlet-by-implementing-the-servlet-interface","title":"In eclipse when I try to create a Servlet by implementing the Servlet interface then the annotation method does not create the correct link on running","body":"<pre><code>\nimport java.io.IOException;\n\nimport javax.servlet.Servlet;\nimport javax.servlet.ServletConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport javax.servlet.annotation.WebServlet;\n\n@WebServlet(&quot;/impSer&quot;)\npublic class impSer implements Servlet {\n     private transient ServletConfig config;\n\n        @Override\n        public void init(ServletConfig config) throws ServletException {\n            this.config = config;\n        }\n\n        @Override\n        public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException {\n            System.out.println(&quot;Hello world&quot;);\n        }\n\n        @Override\n        public void destroy() {\n            System.out.println(&quot;h&quot;);\n        }\n\n        @Override\n        public ServletConfig getServletConfig() {\n            return this.config;\n        }\n\n        @Override\n        public String getServletInfo() {\n            return &quot;TheServletInter&quot;;\n        }\n}\n</code></pre>\n<p>I have saved my code in the src/main/java folder in the default package in my eclipse project named firstwebsite..\nWhen i run my code on the Tomcat server it generates this url\nhttp://localhost:8080/firstwebsite/WEB-INF/classes/impSer.java\nand gives Http Status 404-Not found error..</p>\n<p>I have used the annotation method so shouldnt it generate the correct url on running on server i.e. http://localhost:8080/firstwebsite/impSer</p>\n<p>When i type this manually it gives correct output.. but eclipse on running does not run the above url..</p>\n<p>I have Tomcat 9..</p>\n<p>The annotation method is working perfectly for Servlets created by extending GenericServlet and extending HttpServlet.. only the implementing Servlet interface is giving issues..</p>\n<p>I am new to Servlet programming so the helpp will be really appreciated.. Thank you</p>\n"},{"tags":["java","apache-poi"],"comments":[{"score":1,"post_type":"question","creation_date":1701078246,"post_id":77555737,"comment_id":136725938,"body_markdown":"See https://stackoverflow.com/questions/6686753/nosuchfielderror-java. Make sure you don&#39;t have older versions than `2.0.4` of `&lt;artifactId&gt;fr.opensagres.poi.xwpf.converter.core&lt;/artifactId&gt;` or of \n `&lt;artifactId&gt;xdocreport&lt;/artifactId&gt;` in your classpath. And recheck you compile-time classpath vs. run-time classpath.","link":"https://stackoverflow.com/questions/77555737/java-lang-nosuchfielderror-factory-when-trying-to-convert-word-to-pdf-using-apa#comment136725938_77555737","body":"See <a href=\"https://stackoverflow.com/questions/6686753/nosuchfielderror-java\" title=\"nosuchfielderror java\">stackoverflow.com/questions/6686753/nosuchfielderror-java</a>. Make sure you don&#39;t have older versions than <code>2.0.4</code> of <code>&lt;artifactId&gt;fr.opensagres.poi.xwpf.converter.core&lt;&#47;artifactI&zwnj;&#8203;d&gt;</code> or of   <code>&lt;artifactId&gt;xdocreport&lt;&#47;artifactId&gt;</code> in your classpath. And recheck you compile-time classpath vs. run-time classpath."},{"score":0,"post_type":"question","creation_date":1701080164,"post_id":77555737,"comment_id":136726266,"body_markdown":"@AxelRichter, I only have a single version of the artifact and tried doing a maven clean install. It did not resolve the issue.","link":"https://stackoverflow.com/questions/77555737/java-lang-nosuchfielderror-factory-when-trying-to-convert-word-to-pdf-using-apa#comment136726266_77555737","body":"@AxelRichter, I only have a single version of the artifact and tried doing a maven clean install. It did not resolve the issue."},{"score":0,"post_type":"question","creation_date":1701090392,"post_id":77555737,"comment_id":136727965,"body_markdown":"Remove your dependency on Apache POI, so it is pulled in through opensagres, or make sure to use Apache POI 5.2.0, the version that opensagres xdocreport 2.0.4 is compiled against.","link":"https://stackoverflow.com/questions/77555737/java-lang-nosuchfielderror-factory-when-trying-to-convert-word-to-pdf-using-apa#comment136727965_77555737","body":"Remove your dependency on Apache POI, so it is pulled in through opensagres, or make sure to use Apache POI 5.2.0, the version that opensagres xdocreport 2.0.4 is compiled against."}],"comment_count":3,"is_answered":false,"view_count":49,"answer_count":0,"score":-1,"last_activity_date":1701090277,"creation_date":1701076803,"last_edit_date":1701090277,"question_id":77555737,"body_markdown":"I am trying to convert a word document to PDF using Apache POI and `fr.opensagres.poi.xwpf.converter.pdf` in Java, but I&#39;m getting the below error\r\n\r\n```none\r\nException in thread &quot;main&quot; java.lang.NoSuchFieldError: Factory\r\n\tat fr.opensagres.poi.xwpf.converter.core.styles.XWPFStylesDocument$ThemeDocumentVisitor.visitDocumentPart(XWPFStylesDocument.java:1564)\r\n\tat fr.opensagres.poi.xwpf.converter.core.styles.XWPFStylesDocument$DocumentVisitor.visitDocument(XWPFStylesDocument.java:1496)\r\n```\r\n\r\nIn the POM the following dependencies are present\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n\t&lt;version&gt;5.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n\t&lt;version&gt;5.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;fr.opensagres.poi.xwpf.converter.pdf&lt;/artifactId&gt;\r\n\t&lt;version&gt;2.0.4&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThe line of code throwing the error is\r\n`PdfConverter.getInstance().convert(doc, outputStream, options);`\r\n\r\n","link":"https://stackoverflow.com/questions/77555737/java-lang-nosuchfielderror-factory-when-trying-to-convert-word-to-pdf-using-apa","title":"java.lang.NoSuchFieldError: Factory when trying to convert word to pdf using Apache POI and opensagres","body":"<p>I am trying to convert a word document to PDF using Apache POI and <code>fr.opensagres.poi.xwpf.converter.pdf</code> in Java, but I'm getting the below error</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.NoSuchFieldError: Factory\n    at fr.opensagres.poi.xwpf.converter.core.styles.XWPFStylesDocument$ThemeDocumentVisitor.visitDocumentPart(XWPFStylesDocument.java:1564)\n    at fr.opensagres.poi.xwpf.converter.core.styles.XWPFStylesDocument$DocumentVisitor.visitDocument(XWPFStylesDocument.java:1496)\n</code></pre>\n<p>In the POM the following dependencies are present</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi&lt;/artifactId&gt;\n    &lt;version&gt;5.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n    &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n    &lt;version&gt;5.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;fr.opensagres.xdocreport&lt;/groupId&gt;\n    &lt;artifactId&gt;fr.opensagres.poi.xwpf.converter.pdf&lt;/artifactId&gt;\n    &lt;version&gt;2.0.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The line of code throwing the error is\n<code>PdfConverter.getInstance().convert(doc, outputStream, options);</code></p>\n"},{"tags":["java","mysql","spring","spring-boot","jpa"],"comments":[{"score":0,"post_type":"question","creation_date":1701008282,"post_id":77552017,"comment_id":136719217,"body_markdown":"can you change `spring.jpa.hibernate.ddl-auto=create-drop` to `spring.jpa.hibernate.ddl-auto=create` ? because `create-drop:` drop the schema at the end of the session","link":"https://stackoverflow.com/questions/77552017/java-jpa-doesn%c2%b4t-create-new-table-mysql#comment136719217_77552017","body":"can you change <code>spring.jpa.hibernate.ddl-auto=create-drop</code> to <code>spring.jpa.hibernate.ddl-auto=create</code> ? because <code>create-drop:</code> drop the schema at the end of the session"},{"score":0,"post_type":"question","creation_date":1701022892,"post_id":77552017,"comment_id":136720770,"body_markdown":"witch version of spring-boot are you using ?","link":"https://stackoverflow.com/questions/77552017/java-jpa-doesn%c2%b4t-create-new-table-mysql#comment136720770_77552017","body":"witch version of spring-boot are you using ?"},{"score":0,"post_type":"question","creation_date":1701027917,"post_id":77552017,"comment_id":136721301,"body_markdown":"some version of mysql needs you to create the DB first where the app will not create it and after that you will find your table","link":"https://stackoverflow.com/questions/77552017/java-jpa-doesn%c2%b4t-create-new-table-mysql#comment136721301_77552017","body":"some version of mysql needs you to create the DB first where the app will not create it and after that you will find your table"},{"score":1,"post_type":"question","creation_date":1701083759,"post_id":77552017,"comment_id":136726835,"body_markdown":"Most probably you have a version conflict. You can&#39;t mix javax-persistence with spring boot 3+ JPA (aka Jakarta). The best way to generate a clean pom.xml is to use https://start.spring.io/ and add only the dependencies needed like data-jpa and mysql.","link":"https://stackoverflow.com/questions/77552017/java-jpa-doesn%c2%b4t-create-new-table-mysql#comment136726835_77552017","body":"Most probably you have a version conflict. You can&#39;t mix javax-persistence with spring boot 3+ JPA (aka Jakarta). The best way to generate a clean pom.xml is to use <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">start.spring.io</a> and add only the dependencies needed like data-jpa and mysql."},{"score":0,"post_type":"question","creation_date":1701126480,"post_id":77552017,"comment_id":136734359,"body_markdown":"@Mar-Z         that was the issue, I switched to Jakarta and it works now, thanks!","link":"https://stackoverflow.com/questions/77552017/java-jpa-doesn%c2%b4t-create-new-table-mysql#comment136734359_77552017","body":"@Mar-Z         that was the issue, I switched to Jakarta and it works now, thanks!"},{"score":0,"post_type":"question","creation_date":1701160089,"post_id":77552017,"comment_id":136737676,"body_markdown":"Cool. Thanks for feedback.","link":"https://stackoverflow.com/questions/77552017/java-jpa-doesn%c2%b4t-create-new-table-mysql#comment136737676_77552017","body":"Cool. Thanks for feedback."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701017538,"post_id":77552354,"comment_id":136720168,"body_markdown":"Thanks for the replies. i&#180;ve tried all options on spring.jpa.hibernate.ddl-auto, but none worked. It&#180;s not that it creates and then deletes the table, it just doesn&#180;t create it. The start log shows it&#180;s connected to the database, but there&#180;s no query in sight, and no table in my local database","link":"https://stackoverflow.com/questions/77552017/java-jpa-doesn%c2%b4t-create-new-table-mysql/77552354#comment136720168_77552354","body":"Thanks for the replies. i&#180;ve tried all options on spring.jpa.hibernate.ddl-auto, but none worked. It&#180;s not that it creates and then deletes the table, it just doesn&#180;t create it. The start log shows it&#180;s connected to the database, but there&#180;s no query in sight, and no table in my local database"}],"comment_count":1,"score":0,"last_activity_date":1701013289,"creation_date":1701013289,"answer_id":77552354,"question_id":77552017,"body_markdown":"In the application.properties file\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/(my database)\r\n    spring.datasource.username=(my username)\r\n    spring.datasource.password=(my password)\r\n    spring.jpa.hibernate.ddl-auto=create-drop\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.jpa.properties.hibernate.show_sql=true\r\n    spring.jpa.generate-ddl=true\r\n\r\nHere, spring.jpa.hibernate.ddl-auto=create-drop means that the application creates tables when it starts and drops them when it exits. To view the tables after the application ends, you can change it to spring.jpa.hibernate.ddl-auto=update. The modified configuration would look like this:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/(my database)\r\n    spring.datasource.username=(my username)\r\n    spring.datasource.password=(my password)\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.jpa.properties.hibernate.show_sql=true\r\n    spring.jpa.generate-ddl=true\r\n\r\nWith this change, the application retains the tables after it exits, allowing you to view them later.\r\n","link":"https://stackoverflow.com/questions/77552017/java-jpa-doesn%c2%b4t-create-new-table-mysql/77552354#77552354","title":"Java JPA doesn&#180;t create new table (MySQL)","body":"<p>In the application.properties file</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/(my database)\nspring.datasource.username=(my username)\nspring.datasource.password=(my password)\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.properties.hibernate.format_sql=true\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.properties.hibernate.show_sql=true\nspring.jpa.generate-ddl=true\n</code></pre>\n<p>Here, spring.jpa.hibernate.ddl-auto=create-drop means that the application creates tables when it starts and drops them when it exits. To view the tables after the application ends, you can change it to spring.jpa.hibernate.ddl-auto=update. The modified configuration would look like this:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/(my database)\nspring.datasource.username=(my username)\nspring.datasource.password=(my password)\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.properties.hibernate.format_sql=true\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.properties.hibernate.show_sql=true\nspring.jpa.generate-ddl=true\n</code></pre>\n<p>With this change, the application retains the tables after it exits, allowing you to view them later.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701165530,"post_id":77555089,"comment_id":136738663,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","link":"https://stackoverflow.com/questions/77552017/java-jpa-doesn%c2%b4t-create-new-table-mysql/77555089#comment136738663_77555089","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77555089/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"comment_count":1,"score":0,"last_activity_date":1701069508,"creation_date":1701069508,"answer_id":77555089,"question_id":77552017,"body_markdown":"you use create-drop so table is created when you start application and dropped when you stop and if your application is runnig and still doesn&#39;t show table so try to do this : check database name is match to spring database , and try to do refresh in mysqlworkbench  ","link":"https://stackoverflow.com/questions/77552017/java-jpa-doesn%c2%b4t-create-new-table-mysql/77555089#77555089","title":"Java JPA doesn&#180;t create new table (MySQL)","body":"<p>you use create-drop so table is created when you start application and dropped when you stop and if your application is runnig and still doesn't show table so try to do this : check database name is match to spring database , and try to do refresh in mysqlworkbench</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701086638,"creation_date":1701086638,"answer_id":77556752,"question_id":77552017,"body_markdown":"\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\ntry this in pom file","link":"https://stackoverflow.com/questions/77552017/java-jpa-doesn%c2%b4t-create-new-table-mysql/77556752#77556752","title":"Java JPA doesn&#180;t create new table (MySQL)","body":"<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>try this in pom file</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701090183,"creation_date":1701090183,"answer_id":77557106,"question_id":77552017,"body_markdown":"Seems like your sql is not connected make sure you add the mysql connector jar file\r\nOr can simply add this command in your pom.xml file\r\n\r\n`&lt;groupId&gt;mysql&lt;/groupId&gt; \r\n&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n&lt;version&gt;8.0.23&lt;/version&gt; &lt;!-- Use the latest version available --&gt; \r\n&lt;/dependency&gt;`\r\n\r\n \r\nSometimes it is cause you don&#39;t have relevant port, check your port in mysql client command line \r\nby this code \r\nmysql -h your_host -P your_port -u your_username -p -e &quot;SELECT @@port;&quot;\r\n\r\nI hope this helps!\r\n","link":"https://stackoverflow.com/questions/77552017/java-jpa-doesn%c2%b4t-create-new-table-mysql/77557106#77557106","title":"Java JPA doesn&#180;t create new table (MySQL)","body":"<p>Seems like your sql is not connected make sure you add the mysql connector jar file\nOr can simply add this command in your pom.xml file</p>\n<p><code>&lt;groupId&gt;mysql&lt;/groupId&gt;  &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;8.0.23&lt;/version&gt; &lt;!-- Use the latest version available --&gt;  &lt;/dependency&gt;</code></p>\n<p>Sometimes it is cause you don't have relevant port, check your port in mysql client command line\nby this code\nmysql -h your_host -P your_port -u your_username -p -e &quot;SELECT @@port;&quot;</p>\n<p>I hope this helps!</p>\n"}],"comment_count":6,"is_answered":false,"view_count":86,"answer_count":4,"score":0,"last_activity_date":1701090183,"creation_date":1701007742,"question_id":77552017,"body_markdown":"i&#180;m currently learning Spring Boot, and trying to set up JPA with a MySQL database. Everything looks fine, the project starts correctly, no visible errors, but...no table is created on my db. I&#180;ve checked everywhere and everything seems fine, i have no clue what&#180;s causing that behaviour...\r\nI&#180;ll leave the relevant parts of the code: \r\nProjectApplication.java:\r\n\r\n    package com.first.project;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class ProjectApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(ProjectApplication.class, args);\r\n    \t}\r\n    \r\n    \r\n    }\r\n\r\nMy Student class: \r\n\r\n    package com.first.project.student;\r\n    \r\n    import org.springframework.data.annotation.Id;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Table;\r\n    import java.time.LocalDate;\r\n    \r\n    @Entity\r\n    @Table\r\n    public class Student {\r\n      @Id\r\n      @GeneratedValue(\r\n              strategy = GenerationType.IDENTITY\r\n      )\r\n      private Long id;\r\n      private String name;\r\n      private String email;\r\n      private LocalDate dateOfBirth;\r\n      private Integer age;\r\n    \r\n      public Student() {\r\n      }\r\n      public Student(Long studentId, String studentName, String studentEmail, LocalDate studentDoB, Integer studentAge) {\r\n        this.id = studentId;\r\n        this.name = studentName;\r\n        this.email = studentEmail;\r\n        this.dateOfBirth = studentDoB;\r\n        this.age = studentAge;\r\n      }\r\n    \r\n      public Student(String studentName, String studentEmail, LocalDate studentDoB, Integer studentAge) {\r\n        this.name = studentName;\r\n        this.email = studentEmail;\r\n        this.dateOfBirth = studentDoB;\r\n        this.age = studentAge;\r\n      }\r\n    \r\n      public Long getId() {\r\n        return id;\r\n      }\r\n    \r\n      public void setId(Long id) {\r\n        this.id = id;\r\n      }\r\n    \r\n      public String getName() {\r\n        return name;\r\n      }\r\n    \r\n      public void setName(String name) {\r\n        this.name = name;\r\n      }\r\n    \r\n      public String getEmail() {\r\n        return email;\r\n      }\r\n    \r\n      public void setEmail(String email) {\r\n        this.email = email;\r\n      }\r\n    \r\n      public LocalDate getDateOfBirth() {\r\n        return dateOfBirth;\r\n      }\r\n    \r\n      public void setDateOfBirth(LocalDate dateOfBirth) {\r\n        this.dateOfBirth = dateOfBirth;\r\n      }\r\n    \r\n      public Integer getAge() {\r\n        return age;\r\n      }\r\n    \r\n      public void setAge(Integer age) {\r\n        this.age = age;\r\n      }\r\n    \r\n      @Override\r\n      public String toString() {\r\n        return &quot;Student{&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                &quot;, email=&#39;&quot; + email + &#39;\\&#39;&#39; +\r\n                &quot;, dateOfBirth=&quot; + dateOfBirth +\r\n                &quot;, age=&quot; + age +\r\n                &#39;}&#39;;\r\n      }\r\n    }\r\napplication.properties: \r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/(my database)\r\n    spring.datasource.username=(my username)\r\n    spring.datasource.password=(my password)\r\n    spring.jpa.hibernate.ddl-auto=create-drop\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.jpa.properties.hibernate.show_sql=true\r\n    spring.jpa.generate-ddl=true\r\n\r\nThe dependencies from my pom.xml file: \r\n\r\n        &lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n\r\nInside the main package i have ProjectAplication, and a subpackage with the Student class inside. \r\n\r\nAny thoughts?\r\n\r\n","link":"https://stackoverflow.com/questions/77552017/java-jpa-doesn%c2%b4t-create-new-table-mysql","title":"Java JPA doesn&#180;t create new table (MySQL)","body":"<p>i´m currently learning Spring Boot, and trying to set up JPA with a MySQL database. Everything looks fine, the project starts correctly, no visible errors, but...no table is created on my db. I´ve checked everywhere and everything seems fine, i have no clue what´s causing that behaviour...\nI´ll leave the relevant parts of the code:\nProjectApplication.java:</p>\n<pre><code>package com.first.project;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class ProjectApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ProjectApplication.class, args);\n    }\n\n\n}\n</code></pre>\n<p>My Student class:</p>\n<pre><code>package com.first.project.student;\n\nimport org.springframework.data.annotation.Id;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Table;\nimport java.time.LocalDate;\n\n@Entity\n@Table\npublic class Student {\n  @Id\n  @GeneratedValue(\n          strategy = GenerationType.IDENTITY\n  )\n  private Long id;\n  private String name;\n  private String email;\n  private LocalDate dateOfBirth;\n  private Integer age;\n\n  public Student() {\n  }\n  public Student(Long studentId, String studentName, String studentEmail, LocalDate studentDoB, Integer studentAge) {\n    this.id = studentId;\n    this.name = studentName;\n    this.email = studentEmail;\n    this.dateOfBirth = studentDoB;\n    this.age = studentAge;\n  }\n\n  public Student(String studentName, String studentEmail, LocalDate studentDoB, Integer studentAge) {\n    this.name = studentName;\n    this.email = studentEmail;\n    this.dateOfBirth = studentDoB;\n    this.age = studentAge;\n  }\n\n  public Long getId() {\n    return id;\n  }\n\n  public void setId(Long id) {\n    this.id = id;\n  }\n\n  public String getName() {\n    return name;\n  }\n\n  public void setName(String name) {\n    this.name = name;\n  }\n\n  public String getEmail() {\n    return email;\n  }\n\n  public void setEmail(String email) {\n    this.email = email;\n  }\n\n  public LocalDate getDateOfBirth() {\n    return dateOfBirth;\n  }\n\n  public void setDateOfBirth(LocalDate dateOfBirth) {\n    this.dateOfBirth = dateOfBirth;\n  }\n\n  public Integer getAge() {\n    return age;\n  }\n\n  public void setAge(Integer age) {\n    this.age = age;\n  }\n\n  @Override\n  public String toString() {\n    return &quot;Student{&quot; +\n            &quot;id=&quot; + id +\n            &quot;, name='&quot; + name + '\\'' +\n            &quot;, email='&quot; + email + '\\'' +\n            &quot;, dateOfBirth=&quot; + dateOfBirth +\n            &quot;, age=&quot; + age +\n            '}';\n  }\n}\n</code></pre>\n<p>application.properties:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/(my database)\nspring.datasource.username=(my username)\nspring.datasource.password=(my password)\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.properties.hibernate.format_sql=true\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.properties.hibernate.show_sql=true\nspring.jpa.generate-ddl=true\n</code></pre>\n<p>The dependencies from my pom.xml file:</p>\n<pre><code>    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>Inside the main package i have ProjectAplication, and a subpackage with the Student class inside.</p>\n<p>Any thoughts?</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database","firebase-authentication"],"comments":[{"score":1,"post_type":"question","creation_date":1701085218,"post_id":77556539,"comment_id":136727055,"body_markdown":"Is `onComplete` even triggered? Or are you getting any errors?","link":"https://stackoverflow.com/questions/77556539/firebase-authentication-with-google-sign-in-not-writing-data-to-realtime-databas#comment136727055_77556539","body":"Is <code>onComplete</code> even triggered? Or are you getting any errors?"},{"score":0,"post_type":"question","creation_date":1701087076,"post_id":77556539,"comment_id":136727370,"body_markdown":"It&#39;s not getting any error and also not triggering the database onComplete","link":"https://stackoverflow.com/questions/77556539/firebase-authentication-with-google-sign-in-not-writing-data-to-realtime-databas#comment136727370_77556539","body":"It&#39;s not getting any error and also not triggering the database onComplete"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701087838,"post_id":77556605,"comment_id":136727500,"body_markdown":"I was updated the google-services.json. But I do it before creating the Realtime Database, lol. By the way thanks for remind me about it","link":"https://stackoverflow.com/questions/77556539/firebase-authentication-with-google-sign-in-not-writing-data-to-realtime-databas/77556605#comment136727500_77556605","body":"I was updated the google-services.json. But I do it before creating the Realtime Database, lol. By the way thanks for remind me about it"}],"comment_count":1,"score":1,"last_activity_date":1701090172,"last_edit_date":1701090172,"creation_date":1701085253,"answer_id":77556605,"question_id":77556539,"body_markdown":"Since neither the `onComplete` or `onFailure` log is written, most likely your app is not connected to the database. A common way for this to happen is when your `google-services.json` file was downloaded before you created the database.\r\n\r\nThe way to fix this is to re-download `google-services.json` and replace the one in your app with an up to date version.\r\n\r\nAn alternative way to work around the problem is by specifying the URL of your database in your code when you get your `FirebaseDatabase` instance:\r\n```\r\nprivate FirebaseDatabase database = FirebaseDatabase.getInstance(&quot;your database URL here&quot;);\r\n```\r\n\r\nAlso see:\r\n\r\n* https://stackoverflow.com/questions/68173632/google-firebase-real-time-database-not-working-as-everything-is-set-correctly/68179677#68179677\r\n* https://stackoverflow.com/questions/68806876/firebase-realtime-database-connection-killed-different-region/68807113#68807113\r\n* https://stackoverflow.com/questions/67858941/database-reference-works-only-by-url/67860298#67860298","link":"https://stackoverflow.com/questions/77556539/firebase-authentication-with-google-sign-in-not-writing-data-to-realtime-databas/77556605#77556605","title":"Firebase Authentication with Google Sign-In not Writing Data to Realtime Database","body":"<p>Since neither the <code>onComplete</code> or <code>onFailure</code> log is written, most likely your app is not connected to the database. A common way for this to happen is when your <code>google-services.json</code> file was downloaded before you created the database.</p>\n<p>The way to fix this is to re-download <code>google-services.json</code> and replace the one in your app with an up to date version.</p>\n<p>An alternative way to work around the problem is by specifying the URL of your database in your code when you get your <code>FirebaseDatabase</code> instance:</p>\n<pre><code>private FirebaseDatabase database = FirebaseDatabase.getInstance(&quot;your database URL here&quot;);\n</code></pre>\n<p>Also see:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/68173632/google-firebase-real-time-database-not-working-as-everything-is-set-correctly/68179677#68179677\">Google Firebase Real-time Database Not Working as everything is set correctly</a></li>\n<li><a href=\"https://stackoverflow.com/questions/68806876/firebase-realtime-database-connection-killed-different-region/68807113#68807113\">Firebase Realtime Database connection killed: Different Region</a></li>\n<li><a href=\"https://stackoverflow.com/questions/67858941/database-reference-works-only-by-url/67860298#67860298\">database reference works only by URL</a></li>\n</ul>\n"}],"comment_count":2,"is_answered":true,"view_count":55,"answer_count":1,"score":0,"last_activity_date":1701090172,"creation_date":1701084598,"last_edit_date":1701085216,"question_id":77556539,"body_markdown":"I am encountering an issue with my Android app&#39;s Firebase authentication using Google Sign-In. The authentication process works correctly, but the user data is not being written to the Firebase Realtime Database as expected.\r\n\r\nI have ensured that the Firebase Realtime Database rules allow both read and write operations when the user is authenticated. Here are my current rules:\r\n\r\n     {\r\n      &quot;rules&quot;: {\r\n        &quot;.read&quot;: &quot;auth != null&quot;,\r\n        &quot;.write&quot;: &quot;auth != null&quot;\r\n       }\r\n     }\r\n\r\nDespite this, when a user successfully signs in with Google, the app logs the correct user information, but the data is not reflected in the Firebase Realtime Database.\r\n\r\nHere is a snippet of the relevant code:\r\n\r\n\r\n    public class SignInActivity extends AppCompatActivity {    \r\n        private SignInViewModel signInViewModel;\r\n        private FirebaseAuth auth = FirebaseAuth.getInstance();\r\n        private ActivitySignInBinding binding;\r\n        private SignInClickHandler clickHandler;\r\n        private Button googleSignInBtn;\r\n        private GoogleSignInOptions gso;\r\n        private GoogleSignInClient gsc;\r\n        private FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        private int RC_SIGN_IN = 20;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_sign_in);\r\n            binding = DataBindingUtil.setContentView(this, R.layout.activity_sign_in);\r\n            signInViewModel = new ViewModelProvider(this).get(SignInViewModel.class);\r\n            clickHandler = new SignInClickHandler(this, signInViewModel);\r\n            binding.setClickHandler(clickHandler);\r\n    \r\n            googleSignInBtn = binding.googleLogInButton;\r\n            gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN).requestEmail().\r\n                    requestIdToken(getString(R.string.default_web_client_id))\r\n                    .requestEmail().build();\r\n    \r\n            gsc = GoogleSignIn.getClient(this, gso);\r\n    \r\n            googleSignInBtn.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    googleSignIn();\r\n                }\r\n            });\r\n    \r\n    \r\n        }\r\n    \r\n        private void googleSignIn() {\r\n            Intent signInIntent = gsc.getSignInIntent();\r\n            startActivityForResult(signInIntent, RC_SIGN_IN);\r\n        }\r\n    \r\n        @Override\r\n        protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n            super.onActivityResult(requestCode, resultCode, data);\r\n    \r\n            if (requestCode == RC_SIGN_IN){\r\n                Task&lt;GoogleSignInAccount&gt; task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n    \r\n                try {\r\n                    GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                    firebaseAuth(account.getIdToken());\r\n                } catch (ApiException e) {\r\n                    Toast.makeText(this, &quot;&quot;+e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n    \r\n        }\r\n    \r\n        private void firebaseAuth(String idToken) {\r\n            AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\r\n            auth.signInWithCredential(credential)\r\n                    .addOnCompleteListener(this, new OnCompleteListener&lt;AuthResult&gt;() {\r\n                        @Override\r\n                        public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\r\n                            if (task.isSuccessful()) {\r\n                                FirebaseUser user = auth.getCurrentUser();\r\n    \r\n                                Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n                                map.put(&quot;id&quot;, user.getUid());\r\n                                map.put(&quot;name&quot;, user.getDisplayName());\r\n                                String photoUrl = (user.getPhotoUrl() != null) ? user.getPhotoUrl().toString() : &quot;&quot;;\r\n                                map.put(&quot;profile&quot;, photoUrl);\r\n    \r\n                                Log.d(&quot;FirebaseGoogleAuth&quot;, &quot;id&quot; + user.getUid() + &quot; &quot; + user.getDisplayName() + &quot; &quot; + photoUrl);\r\n                                database.getReference()\r\n                                        .child(&quot;users&quot;)\r\n                                        .child(user.getUid())\r\n                                        .setValue(map)\r\n                                        .addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n                                            @Override\r\n                                            public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                                                Log.d(&quot;FirebaseGoogleAuth&quot;, &quot;Data write successful&quot;);\r\n                                                Intent intent = new Intent(getApplicationContext(), FeedActivity.class);\r\n                                                startActivity(intent);\r\n                                                finish();\r\n                                            }\r\n                                        })\r\n                                        .addOnFailureListener(new OnFailureListener() {\r\n                                            @Override\r\n                                            public void onFailure(@NonNull Exception e) {\r\n                                                Log.d(&quot;FirebaseGoogleAuth&quot;, &quot;error realtime database &quot; + e.getMessage().toString());\r\n                                            }\r\n                                        });\r\n                            } else {\r\n                                Toast.makeText(SignInActivity.this, &quot;Authentication failed.&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }\r\n                    });\r\n        }\r\n        \r\n    \r\n        @Override\r\n        protected void onStart() {\r\n            super.onStart();\r\n            FirebaseUser currentUser = auth.getCurrentUser();\r\n            if (currentUser != null){\r\n                startActivity(new Intent(SignInActivity.this, FeedActivity.class));\r\n                finish();\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nBuild Gradle (App level):\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39;\r\n        id &#39;com.google.gms.google-services&#39;\r\n    }\r\n    \r\n    android {\r\n        namespace &#39;com.arsoftltd.lolipop&#39;\r\n        compileSdk 34\r\n    \r\n        defaultConfig {\r\n            applicationId &quot;com.arsoftltd.lolipop&quot;\r\n            minSdk 24\r\n            targetSdk 34\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n    \r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        }\r\n    \r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n        buildFeatures{\r\n            dataBinding true\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n    \r\n        implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n        implementation &#39;com.google.android.material:material:1.10.0&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n        testImplementation &#39;junit:junit:4.13.2&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n    \r\n    \r\n        // Import the Firebase BoM\r\n        implementation platform(&#39;com.google.firebase:firebase-bom:32.6.0&#39;)\r\n    \r\n        // When using the BoM, don&#39;t specify versions in Firebase dependencies\r\n        implementation &#39;com.google.firebase:firebase-analytics&#39;\r\n    \r\n        // Firebase Authentication\r\n        implementation &#39;com.google.firebase:firebase-auth&#39;\r\n        implementation &quot;com.google.android.gms:play-services-auth:20.7.0&quot;\r\n    \r\n        implementation &#39;com.firebaseui:firebase-ui-auth:8.0.2&#39;\r\n    \r\n        // Firebase realtime database\r\n        implementation &quot;com.google.firebase:firebase-database&quot;\r\n    \r\n    \r\n        // Facebook Sdk\r\n        implementation &#39;com.facebook.android:facebook-android-sdk:[8,9)&#39;\r\n    \r\n        // SSP SDP library\r\n        implementation &#39;com.intuit.ssp:ssp-android:1.1.0&#39;\r\n        implementation &#39;com.intuit.sdp:sdp-android:1.1.0&#39;\r\n    \r\n    \r\n    \r\n    }\r\nThe log output during authentication shows the correct user information:\r\n\r\n    2023-11-27 17:17:59.062 28378-28378 FirebaseGoogleAuth com.arsoftltd.lolipop D idpuhGxZmHw7YfW49R4ZGfHJsLmus2 Md Abu Rayhan https://lh3.googleusercontent.com/a/ACg8ocIujr5T5CNmjjEps2SKElmg5ROz0Qbdl0cNcfPAUwcnvQ=s96-c\r\n\r\nI would appreciate any insights or suggestions on why the user data is not being written to the Firebase Realtime Database despite successful authentication. Thank you in advance!","link":"https://stackoverflow.com/questions/77556539/firebase-authentication-with-google-sign-in-not-writing-data-to-realtime-databas","title":"Firebase Authentication with Google Sign-In not Writing Data to Realtime Database","body":"<p>I am encountering an issue with my Android app's Firebase authentication using Google Sign-In. The authentication process works correctly, but the user data is not being written to the Firebase Realtime Database as expected.</p>\n<p>I have ensured that the Firebase Realtime Database rules allow both read and write operations when the user is authenticated. Here are my current rules:</p>\n<pre><code> {\n  &quot;rules&quot;: {\n    &quot;.read&quot;: &quot;auth != null&quot;,\n    &quot;.write&quot;: &quot;auth != null&quot;\n   }\n }\n</code></pre>\n<p>Despite this, when a user successfully signs in with Google, the app logs the correct user information, but the data is not reflected in the Firebase Realtime Database.</p>\n<p>Here is a snippet of the relevant code:</p>\n<pre><code>public class SignInActivity extends AppCompatActivity {    \n    private SignInViewModel signInViewModel;\n    private FirebaseAuth auth = FirebaseAuth.getInstance();\n    private ActivitySignInBinding binding;\n    private SignInClickHandler clickHandler;\n    private Button googleSignInBtn;\n    private GoogleSignInOptions gso;\n    private GoogleSignInClient gsc;\n    private FirebaseDatabase database = FirebaseDatabase.getInstance();\n    private int RC_SIGN_IN = 20;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_sign_in);\n        binding = DataBindingUtil.setContentView(this, R.layout.activity_sign_in);\n        signInViewModel = new ViewModelProvider(this).get(SignInViewModel.class);\n        clickHandler = new SignInClickHandler(this, signInViewModel);\n        binding.setClickHandler(clickHandler);\n\n        googleSignInBtn = binding.googleLogInButton;\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN).requestEmail().\n                requestIdToken(getString(R.string.default_web_client_id))\n                .requestEmail().build();\n\n        gsc = GoogleSignIn.getClient(this, gso);\n\n        googleSignInBtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                googleSignIn();\n            }\n        });\n\n\n    }\n\n    private void googleSignIn() {\n        Intent signInIntent = gsc.getSignInIntent();\n        startActivityForResult(signInIntent, RC_SIGN_IN);\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        if (requestCode == RC_SIGN_IN){\n            Task&lt;GoogleSignInAccount&gt; task = GoogleSignIn.getSignedInAccountFromIntent(data);\n\n            try {\n                GoogleSignInAccount account = task.getResult(ApiException.class);\n                firebaseAuth(account.getIdToken());\n            } catch (ApiException e) {\n                Toast.makeText(this, &quot;&quot;+e.getMessage(), Toast.LENGTH_SHORT).show();\n            }\n        }\n\n    }\n\n    private void firebaseAuth(String idToken) {\n        AuthCredential credential = GoogleAuthProvider.getCredential(idToken, null);\n        auth.signInWithCredential(credential)\n                .addOnCompleteListener(this, new OnCompleteListener&lt;AuthResult&gt;() {\n                    @Override\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n                        if (task.isSuccessful()) {\n                            FirebaseUser user = auth.getCurrentUser();\n\n                            Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\n                            map.put(&quot;id&quot;, user.getUid());\n                            map.put(&quot;name&quot;, user.getDisplayName());\n                            String photoUrl = (user.getPhotoUrl() != null) ? user.getPhotoUrl().toString() : &quot;&quot;;\n                            map.put(&quot;profile&quot;, photoUrl);\n\n                            Log.d(&quot;FirebaseGoogleAuth&quot;, &quot;id&quot; + user.getUid() + &quot; &quot; + user.getDisplayName() + &quot; &quot; + photoUrl);\n                            database.getReference()\n                                    .child(&quot;users&quot;)\n                                    .child(user.getUid())\n                                    .setValue(map)\n                                    .addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                                        @Override\n                                        public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                                            Log.d(&quot;FirebaseGoogleAuth&quot;, &quot;Data write successful&quot;);\n                                            Intent intent = new Intent(getApplicationContext(), FeedActivity.class);\n                                            startActivity(intent);\n                                            finish();\n                                        }\n                                    })\n                                    .addOnFailureListener(new OnFailureListener() {\n                                        @Override\n                                        public void onFailure(@NonNull Exception e) {\n                                            Log.d(&quot;FirebaseGoogleAuth&quot;, &quot;error realtime database &quot; + e.getMessage().toString());\n                                        }\n                                    });\n                        } else {\n                            Toast.makeText(SignInActivity.this, &quot;Authentication failed.&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    }\n                });\n    }\n    \n\n    @Override\n    protected void onStart() {\n        super.onStart();\n        FirebaseUser currentUser = auth.getCurrentUser();\n        if (currentUser != null){\n            startActivity(new Intent(SignInActivity.this, FeedActivity.class));\n            finish();\n        }\n\n    }\n}\n</code></pre>\n<p>Build Gradle (App level):</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'com.google.gms.google-services'\n}\n\nandroid {\n    namespace 'com.arsoftltd.lolipop'\n    compileSdk 34\n\n    defaultConfig {\n        applicationId &quot;com.arsoftltd.lolipop&quot;\n        minSdk 24\n        targetSdk 34\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    buildFeatures{\n        dataBinding true\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.10.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n\n\n    // Import the Firebase BoM\n    implementation platform('com.google.firebase:firebase-bom:32.6.0')\n\n    // When using the BoM, don't specify versions in Firebase dependencies\n    implementation 'com.google.firebase:firebase-analytics'\n\n    // Firebase Authentication\n    implementation 'com.google.firebase:firebase-auth'\n    implementation &quot;com.google.android.gms:play-services-auth:20.7.0&quot;\n\n    implementation 'com.firebaseui:firebase-ui-auth:8.0.2'\n\n    // Firebase realtime database\n    implementation &quot;com.google.firebase:firebase-database&quot;\n\n\n    // Facebook Sdk\n    implementation 'com.facebook.android:facebook-android-sdk:[8,9)'\n\n    // SSP SDP library\n    implementation 'com.intuit.ssp:ssp-android:1.1.0'\n    implementation 'com.intuit.sdp:sdp-android:1.1.0'\n\n\n\n}\n</code></pre>\n<p>The log output during authentication shows the correct user information:</p>\n<pre><code>2023-11-27 17:17:59.062 28378-28378 FirebaseGoogleAuth com.arsoftltd.lolipop D idpuhGxZmHw7YfW49R4ZGfHJsLmus2 Md Abu Rayhan https://lh3.googleusercontent.com/a/ACg8ocIujr5T5CNmjjEps2SKElmg5ROz0Qbdl0cNcfPAUwcnvQ=s96-c\n</code></pre>\n<p>I would appreciate any insights or suggestions on why the user data is not being written to the Firebase Realtime Database despite successful authentication. Thank you in advance!</p>\n"},{"tags":["java","user-interface","javasound"],"comments":[{"score":2,"post_type":"question","creation_date":1701089467,"post_id":77556997,"comment_id":136727796,"body_markdown":"Which Java GUI? There are several - SWT, JavaFX, Swing...","link":"https://stackoverflow.com/questions/77556997/sound-effects-to-radio-buttons-in-java-gui#comment136727796_77556997","body":"Which Java GUI? There are several - SWT, JavaFX, Swing..."},{"score":0,"post_type":"question","creation_date":1701103064,"post_id":77556997,"comment_id":136730684,"body_markdown":"Check out: https://stackoverflow.com/a/64509714/131872 for an example that will replay the sound every time a button is clicked.","link":"https://stackoverflow.com/questions/77556997/sound-effects-to-radio-buttons-in-java-gui#comment136730684_77556997","body":"Check out: <a href=\"https://stackoverflow.com/a/64509714/131872\">stackoverflow.com/a/64509714/131872</a> for an example that will replay the sound every time a button is clicked."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701089814,"creation_date":1701089814,"answer_id":77557077,"question_id":77556997,"body_markdown":"Its been a while since I did this.\r\nI would say in your action handler that is where you want to get your sound and then play it.\r\nSo somthing like this:\r\n\r\n      JButton b1 = new JButton(&quot;Cool button&quot;); // Make button\r\n\r\n      // Create action listener -  play the sound when the button is pressed\r\n      ActionListener listener = new ActionListener() {\r\n         File localSoundFile = new File(&quot;path_to_sound&quot;);\r\n         AudioInputStream audioIn = AudioSystem.getAudioInputStream(localSoundFile);   \r\n         Clip clip = AudioSystem.getClip();\r\n         clip.open(audioIn);\r\n         clip.start();   \r\n         // Other action handler stuff\r\n      }\r\n      b1.addActionListener(listener); // Attatch listener to the button\r\n      \r\n\r\nChange the code to work with whatever gui framwork you are using, but the overall design should be something similar","link":"https://stackoverflow.com/questions/77556997/sound-effects-to-radio-buttons-in-java-gui/77557077#77557077","title":"Sound effects to Radio Buttons in Java GUI","body":"<p>Its been a while since I did this.\nI would say in your action handler that is where you want to get your sound and then play it.\nSo somthing like this:</p>\n<pre><code>  JButton b1 = new JButton(&quot;Cool button&quot;); // Make button\n\n  // Create action listener -  play the sound when the button is pressed\n  ActionListener listener = new ActionListener() {\n     File localSoundFile = new File(&quot;path_to_sound&quot;);\n     AudioInputStream audioIn = AudioSystem.getAudioInputStream(localSoundFile);   \n     Clip clip = AudioSystem.getClip();\n     clip.open(audioIn);\n     clip.start();   \n     // Other action handler stuff\n  }\n  b1.addActionListener(listener); // Attatch listener to the button\n  \n</code></pre>\n<p>Change the code to work with whatever gui framwork you are using, but the overall design should be something similar</p>\n"}],"comment_count":2,"is_answered":true,"view_count":33,"answer_count":1,"score":0,"last_activity_date":1701089814,"creation_date":1701089097,"question_id":77556997,"body_markdown":"How do you add sounds effects  to radio Buttons in Java GUI? For example the click sounds when clicking the radio Buttons. Please tell me and explain how.\r\n\r\nI didn&#39;t try or copied all of those examples and explanations in YouTube years ago are cause they&#39;re somewhat Vague and not really exaggerated I just really want to know how. I just wanna know what are the basics. Please do Share. Thank you.","link":"https://stackoverflow.com/questions/77556997/sound-effects-to-radio-buttons-in-java-gui","title":"Sound effects to Radio Buttons in Java GUI","body":"<p>How do you add sounds effects  to radio Buttons in Java GUI? For example the click sounds when clicking the radio Buttons. Please tell me and explain how.</p>\n<p>I didn't try or copied all of those examples and explanations in YouTube years ago are cause they're somewhat Vague and not really exaggerated I just really want to know how. I just wanna know what are the basics. Please do Share. Thank you.</p>\n"},{"tags":["java","jwt","jjwt"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701089153,"creation_date":1701089153,"answer_id":77556999,"question_id":77350596,"body_markdown":"Can you try this:\r\n\r\n    var parser = Jwts.parser().verifyWith(getKey()).build();\r\n    return  parser.parseSignedClaims(token).getPayload();","link":"https://stackoverflow.com/questions/77350596/cannot-parse-jwt-by-new-version-of-jjwt-library/77556999#77556999","title":"Cannot parse JWT by new version of jjwt library","body":"<p>Can you try this:</p>\n<pre><code>var parser = Jwts.parser().verifyWith(getKey()).build();\nreturn  parser.parseSignedClaims(token).getPayload();\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":422,"answer_count":1,"score":1,"last_activity_date":1701089153,"creation_date":1698136469,"question_id":77350596,"body_markdown":"I&#39;ve updated jjwt to version 0.12.3. I use a keystore PKCS12 to sign jwt and validate it. But now I&#39;m getting errror: ***JWS verification key must be either a SecretKey (for MAC algorithms) or a PublicKey (for Signature algorithms).*** Everything works fine on the version 0.9.1\r\n\r\n```\r\nprivate static Key getKey() throws Exception {\r\n        KeyStore keystore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n        keystore.load(GenerateValidateKey.class.getResourceAsStream(&quot;/test.p12&quot;), &quot;test&quot;.toCharArray());\r\n        Enumeration aliases = keystore.aliases();\r\n        String keyAlias = &quot;&quot;;\r\n        while (aliases.hasMoreElements()) {\r\n            keyAlias = (String) aliases.nextElement();\r\n        }\r\n        return keystore.getKey(keyAlias, &quot;test&quot;.toCharArray());\r\n    }\r\n```\r\n\r\n```\r\nMap&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n            claims.put(&quot;aud&quot;, &quot;test&quot;);\r\n            claims.put(&quot;sub&quot;, &quot;test&quot;);\r\n\r\nString token = Jwts.builder().signWith(SignatureAlgorithm.RS256, getKey())\r\n                    .setSubject(&quot;test&quot;)\r\n                    .setExpiration(Date.from(expiration.atStartOfDay(ZoneId.systemDefault()).toInstant()))\r\n                    .setIssuedAt(Date.from(now.atStartOfDay(ZoneId.systemDefault()).toInstant()))\r\n                    .setClaims(claims)\r\n                    .compact();\r\n```\r\n\r\n```\r\nClaims claims = Jwts.parser()\r\n                                .setSigningKey(getKey())\r\n                                .requireAudience(&quot;test&quot;)\r\n                                .build()\r\n                                .parseClaimsJws(token)\r\n                                .getBody();\r\n```","link":"https://stackoverflow.com/questions/77350596/cannot-parse-jwt-by-new-version-of-jjwt-library","title":"Cannot parse JWT by new version of jjwt library","body":"<p>I've updated jjwt to version 0.12.3. I use a keystore PKCS12 to sign jwt and validate it. But now I'm getting errror: <em><strong>JWS verification key must be either a SecretKey (for MAC algorithms) or a PublicKey (for Signature algorithms).</strong></em> Everything works fine on the version 0.9.1</p>\n<pre><code>private static Key getKey() throws Exception {\n        KeyStore keystore = KeyStore.getInstance(&quot;PKCS12&quot;);\n        keystore.load(GenerateValidateKey.class.getResourceAsStream(&quot;/test.p12&quot;), &quot;test&quot;.toCharArray());\n        Enumeration aliases = keystore.aliases();\n        String keyAlias = &quot;&quot;;\n        while (aliases.hasMoreElements()) {\n            keyAlias = (String) aliases.nextElement();\n        }\n        return keystore.getKey(keyAlias, &quot;test&quot;.toCharArray());\n    }\n</code></pre>\n<pre><code>Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n            claims.put(&quot;aud&quot;, &quot;test&quot;);\n            claims.put(&quot;sub&quot;, &quot;test&quot;);\n\nString token = Jwts.builder().signWith(SignatureAlgorithm.RS256, getKey())\n                    .setSubject(&quot;test&quot;)\n                    .setExpiration(Date.from(expiration.atStartOfDay(ZoneId.systemDefault()).toInstant()))\n                    .setIssuedAt(Date.from(now.atStartOfDay(ZoneId.systemDefault()).toInstant()))\n                    .setClaims(claims)\n                    .compact();\n</code></pre>\n<pre><code>Claims claims = Jwts.parser()\n                                .setSigningKey(getKey())\n                                .requireAudience(&quot;test&quot;)\n                                .build()\n                                .parseClaimsJws(token)\n                                .getBody();\n</code></pre>\n"},{"tags":["java","spring-boot","kotlin","spring-data-jpa"],"comments":[{"score":0,"post_type":"question","creation_date":1701088387,"post_id":77556876,"comment_id":136727619,"body_markdown":"are there any jpa related entries in application.properties file? Is it packaged into the jar? Adjust class path settings if running from cmdline to include the properties file","link":"https://stackoverflow.com/questions/77556876/springboot-application-does-not-find-jpa-repositories-when-run-from-command-line#comment136727619_77556876","body":"are there any jpa related entries in application.properties file? Is it packaged into the jar? Adjust class path settings if running from cmdline to include the properties file"},{"score":0,"post_type":"question","creation_date":1701088955,"post_id":77556876,"comment_id":136727712,"body_markdown":"Yes, the application.yaml is packaged in the jar. The JPA entries are here :","link":"https://stackoverflow.com/questions/77556876/springboot-application-does-not-find-jpa-repositories-when-run-from-command-line#comment136727712_77556876","body":"Yes, the application.yaml is packaged in the jar. The JPA entries are here :"},{"score":0,"post_type":"question","creation_date":1701089857,"post_id":77556876,"comment_id":136727874,"body_markdown":"Which Spring version are you using? Can you reproduce the issue using a new project from Spring Initializr? Does changing `@ConfigurationPropertiesScan( &quot;com.myapp.workspace.config&quot; )` to `@ConfigurationPropertiesScan( &quot;com.myapp.workspace&quot; )` change anything?","link":"https://stackoverflow.com/questions/77556876/springboot-application-does-not-find-jpa-repositories-when-run-from-command-line#comment136727874_77556876","body":"Which Spring version are you using? Can you reproduce the issue using a new project from Spring Initializr? Does changing <code>@ConfigurationPropertiesScan( &quot;com.myapp.workspace.config&quot; )</code> to <code>@ConfigurationPropertiesScan( &quot;com.myapp.workspace&quot; )</code> change anything?"},{"score":0,"post_type":"question","creation_date":1701090501,"post_id":77556876,"comment_id":136727983,"body_markdown":"Spring boot v 3.1.2 . Using @ConfigurationPropertiesScan( &quot;com.myapp.workspace&quot; ) does not change anything. Apparently it is something to do with the way the jar got generated or the dependencies associated with it since the code runs fine when i do a gradlew bootRun","link":"https://stackoverflow.com/questions/77556876/springboot-application-does-not-find-jpa-repositories-when-run-from-command-line#comment136727983_77556876","body":"Spring boot v 3.1.2 . Using @ConfigurationPropertiesScan( &quot;com.myapp.workspace&quot; ) does not change anything. Apparently it is something to do with the way the jar got generated or the dependencies associated with it since the code runs fine when i do a gradlew bootRun"},{"score":1,"post_type":"question","creation_date":1701100861,"post_id":77556876,"comment_id":136730264,"body_markdown":"Almost assured that something is getting omitted from your jar. I would inspect your  jar to make sure everything you expect is there. There&#39;s not enough information here to answer your question. Would need to see how you&#39;re building your jar. When you run in IntelliJ by the way, you can see the launch parameters in the first line. It&#39;s truncated by default.","link":"https://stackoverflow.com/questions/77556876/springboot-application-does-not-find-jpa-repositories-when-run-from-command-line#comment136730264_77556876","body":"Almost assured that something is getting omitted from your jar. I would inspect your  jar to make sure everything you expect is there. There&#39;s not enough information here to answer your question. Would need to see how you&#39;re building your jar. When you run in IntelliJ by the way, you can see the launch parameters in the first line. It&#39;s truncated by default."},{"score":0,"post_type":"question","creation_date":1701144923,"post_id":77556876,"comment_id":136735978,"body_markdown":"Resolved the issue by using the plain jar generated by the gradle build and pointing to dependencies jar folder in the classpath, instead of using the fat jar generated by gradle bootJar. Thanks for the inputs.","link":"https://stackoverflow.com/questions/77556876/springboot-application-does-not-find-jpa-repositories-when-run-from-command-line#comment136735978_77556876","body":"Resolved the issue by using the plain jar generated by the gradle build and pointing to dependencies jar folder in the classpath, instead of using the fat jar generated by gradle bootJar. Thanks for the inputs."}],"comment_count":6,"is_answered":false,"view_count":49,"answer_count":0,"score":0,"last_activity_date":1701089074,"creation_date":1701087828,"last_edit_date":1701089074,"question_id":77556876,"body_markdown":"I have a springboot application that runs fine  (using JPA) from IntelliJ and also using gradlew bootRun from the command line. \r\nHowwever, when I generate jars for the application using bootJar and run the application using java -cp &lt;path to the folder with all dependencies including spring&gt; I see that Spring does not find the JPA repositories : \r\n\r\n    @SpringBootApplication\r\n    @EnableAutoConfiguration\r\n    @ComponentScan( basePackages = [ &quot;com.myapp.workspace&quot;] )\r\n    @ConfigurationPropertiesScan( &quot;com.myapp.workspace.config&quot; )\r\n    @EnableConfigurationProperties(Settings::class, Git::class, RTC::class)\r\n    public class MyMain(\r\n           @Autowired\r\n    \t\tprivate val projectAreaRepository: ProjectAreaRepository,\r\n\r\n\r\nThe projectAreaRespository is in com.myapp.workspace.repository. The command line I am using is:\r\n\r\n    java -cp c:\\jars\\* com.myapp.workspace.MyMain\r\n\r\nThis code runs perfectly fine when I do a gradlew bootRun from the command line. Also from inside IntelliJ. So I assume all my annotations are correct.\r\n\r\nThe log shows : \r\n\r\n    2023-11-27T17:20:09.145+05:30 DEBUG 26900 --- [           main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@30ea8c23\r\n    2023-11-27T17:20:09.689+05:30  INFO 26900 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n    2023-11-27T17:20:09.705+05:30  INFO 26900 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 JPA repository interfaces.\r\nAnd further down : \r\n\r\n    Parameter 2 of constructor in com.myapp.workspace.MyMain required a bean of type &#39;com.myapp.workspace.repository.ProjectAreaRepository&#39; that could not be found.\r\n    \r\n    The injection point has the following annotations:\r\n            - @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n    \r\n    \r\n        Action:\r\n        \r\n        Consider defining a bean of type &#39;com.myapp.workspace.repository.ProjectAreaRepository&#39; in your configuration.\r\n        \r\n        2023-11-27T17:20:11.503+05:30 ERROR 26900 --- [           main] c.i.r.workspace.MyMain$Companion  : Error creating bean with name &#39;myMain&#39;: Unsatisfied dependency expressed through constructor parameter 2: No qualifying bean of type &#39;com.myapp.workspace.repository.ProjectAreaRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n        \r\n        org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;myMain&#39;: Unsatisfied dependency expressed through constructor parameter 2: No qualifying bean of type &#39;com.myapp.workspace.repository.ProjectAreaRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n                at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\r\nAny hints on what could be wrong is highly appreciated.\r\n\r\n Following JPA entries are in the application.yaml and the yaml is as well part of the jar :\r\n\r\nThe JPA entries are here :\r\n\r\n  \r\n\r\n      datasource:\r\n            driverClassName: org.h2.Driver\r\n            url: jdbc:h2:./DataSpring/rtc.workspace.h2;AUTO_SERVER=TRUE\r\n            username: sa\r\n            password: sa\r\n        jpa:\r\n            database-platform: org.hibernate.dialect.H2Dialect\r\n            hibernate:\r\n                ddl-auto: update\r\n            open-in-view: false\r\n            show-sql: false\r\n            properties:\r\n                hibernate:\r\n                    enable_lazy_load_no_trans: true\r\n        h2:\r\n            console:\r\n                enabled: true\r\n                path:    /h2-console\r\n                settings:\r\n                    trace: true\r\n                    web-allow-others: true\r\n\r\n","link":"https://stackoverflow.com/questions/77556876/springboot-application-does-not-find-jpa-repositories-when-run-from-command-line","title":"Springboot application does not find JPA repositories when run from command line jar","body":"<p>I have a springboot application that runs fine  (using JPA) from IntelliJ and also using gradlew bootRun from the command line.\nHowwever, when I generate jars for the application using bootJar and run the application using java -cp  I see that Spring does not find the JPA repositories :</p>\n<pre><code>@SpringBootApplication\n@EnableAutoConfiguration\n@ComponentScan( basePackages = [ &quot;com.myapp.workspace&quot;] )\n@ConfigurationPropertiesScan( &quot;com.myapp.workspace.config&quot; )\n@EnableConfigurationProperties(Settings::class, Git::class, RTC::class)\npublic class MyMain(\n       @Autowired\n        private val projectAreaRepository: ProjectAreaRepository,\n</code></pre>\n<p>The projectAreaRespository is in com.myapp.workspace.repository. The command line I am using is:</p>\n<pre><code>java -cp c:\\jars\\* com.myapp.workspace.MyMain\n</code></pre>\n<p>This code runs perfectly fine when I do a gradlew bootRun from the command line. Also from inside IntelliJ. So I assume all my annotations are correct.</p>\n<p>The log shows :</p>\n<pre><code>2023-11-27T17:20:09.145+05:30 DEBUG 26900 --- [           main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@30ea8c23\n2023-11-27T17:20:09.689+05:30  INFO 26900 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-11-27T17:20:09.705+05:30  INFO 26900 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 JPA repository interfaces.\n</code></pre>\n<p>And further down :</p>\n<pre><code>Parameter 2 of constructor in com.myapp.workspace.MyMain required a bean of type 'com.myapp.workspace.repository.ProjectAreaRepository' that could not be found.\n\nThe injection point has the following annotations:\n        - @org.springframework.beans.factory.annotation.Autowired(required=true)\n\n\n    Action:\n    \n    Consider defining a bean of type 'com.myapp.workspace.repository.ProjectAreaRepository' in your configuration.\n    \n    2023-11-27T17:20:11.503+05:30 ERROR 26900 --- [           main] c.i.r.workspace.MyMain$Companion  : Error creating bean with name 'myMain': Unsatisfied dependency expressed through constructor parameter 2: No qualifying bean of type 'com.myapp.workspace.repository.ProjectAreaRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    \n    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'myMain': Unsatisfied dependency expressed through constructor parameter 2: No qualifying bean of type 'com.myapp.workspace.repository.ProjectAreaRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n            at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-6.0.11.jar:6.0.11]\n</code></pre>\n<p>Any hints on what could be wrong is highly appreciated.</p>\n<p>Following JPA entries are in the application.yaml and the yaml is as well part of the jar :</p>\n<p>The JPA entries are here :</p>\n<pre><code>  datasource:\n        driverClassName: org.h2.Driver\n        url: jdbc:h2:./DataSpring/rtc.workspace.h2;AUTO_SERVER=TRUE\n        username: sa\n        password: sa\n    jpa:\n        database-platform: org.hibernate.dialect.H2Dialect\n        hibernate:\n            ddl-auto: update\n        open-in-view: false\n        show-sql: false\n        properties:\n            hibernate:\n                enable_lazy_load_no_trans: true\n    h2:\n        console:\n            enabled: true\n            path:    /h2-console\n            settings:\n                trace: true\n                web-allow-others: true\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-context"],"comments":[{"score":0,"post_type":"question","creation_date":1701088825,"post_id":77556963,"comment_id":136727691,"body_markdown":"Your test doesn&#39;t make sense. You are using `@SpringBootTest` but are starting the application yourself in an `@BeforeClass`. You should ditch your `@BeforeClass` as that doesn&#39;t make sense and renders the `@SpringBootTest` useless.","link":"https://stackoverflow.com/questions/77556963/config-properties-are-not-loaded-with-springboottest#comment136727691_77556963","body":"Your test doesn&#39;t make sense. You are using <code>@SpringBootTest</code> but are starting the application yourself in an <code>@BeforeClass</code>. You should ditch your <code>@BeforeClass</code> as that doesn&#39;t make sense and renders the <code>@SpringBootTest</code> useless."},{"score":0,"post_type":"question","creation_date":1701089435,"post_id":77556963,"comment_id":136727792,"body_markdown":"How Can I do that, I am not able to understand since this code was written by old age developers. :) ? please help","link":"https://stackoverflow.com/questions/77556963/config-properties-are-not-loaded-with-springboottest#comment136727792_77556963","body":"How Can I do that, I am not able to understand since this code was written by old age developers. :) ? please help"},{"score":0,"post_type":"question","creation_date":1701090047,"post_id":77556963,"comment_id":136727904,"body_markdown":"As stated your test is pointless. The `@SpringBootTest` is useless due to the code in the `@BeforeClass` start by removing that method, as that will use the `@SpringBootTest` your current test doesn&#39;t. I also wonder what it tests, as it looks like an integration tests but a lot of mocking is going on.","link":"https://stackoverflow.com/questions/77556963/config-properties-are-not-loaded-with-springboottest#comment136727904_77556963","body":"As stated your test is pointless. The <code>@SpringBootTest</code> is useless due to the code in the <code>@BeforeClass</code> start by removing that method, as that will use the <code>@SpringBootTest</code> your current test doesn&#39;t. I also wonder what it tests, as it looks like an integration tests but a lot of mocking is going on."}],"comment_count":3,"is_answered":false,"view_count":31,"answer_count":0,"score":0,"last_activity_date":1701088720,"creation_date":1701088720,"question_id":77556963,"body_markdown":"I have my Test cases written like this\r\n\r\n```\r\n@RunWith(SpringJUnit4ClassRunner.class)\r\n@SpringBootTest(classes = { Application.class }, webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_CLASS)\r\n@TestPropertySource(locations = {&quot;file:../config/abc.properties&quot;,\r\n        &quot;classpath:abc-override.properties&quot;})\r\npublic abstract class AbstractTest\r\n{\r\n    static final Mockery mockery = new Mockery()\r\n    {\r\n        {\r\n            setImposteriser(ClassImposteriser.INSTANCE);\r\n        }\r\n    };\r\n\r\n    static RestTemplate restTemplate = mockery.mock(RestTemplate.class);\r\n\r\n    private static MongoClient mongoClient;\r\n\r\n    static ConfigurableApplicationContext context;\r\n\r\n    @BeforeClass\r\n    public static void start()\r\n    {\r\n \r\n        EmbeddedMongo embeddedMongo = new EmbeddedMongo(EmbeddedMongoDefaultConfiguration.instance());\r\n        mongoClient = embeddedMongo.start();\r\n\r\n        String[] args = { &quot;--server.port=&quot; + SocketUtils.findAvailableTcpPort(8000, 9000) };\r\n        // below is line #131\r\n        context = SpringApplication.run(Application.class, args);//Error coming on this line\r\n        \r\n        Module&lt;?&gt; module = context.getBean(Module.class);\r\n       \r\n    }\r\n\r\n    @Test\r\n    public void sample_test() {\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nGetting below issue:\r\n```\r\norg.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor$ImportException: No spring.config.import set\r\n\r\nat org.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor.postProcessEnvironment(ConfigDataMissingEnvironmentPostProcessor.java:79)\r\nat com.abc.AbstractTest.start(AbstractTest.java:131) -&gt; I have indicated in previous code the line no 131, please see\r\n```\r\n\r\n\r\nMy Project structure looks like this:\r\n\r\n[project structure][1]\r\n\r\n\r\nMy abc-override.properties has this content:\r\n```\r\n# Logging levels across packages (optional)\r\nlogging.level.root=WARN\r\nspring.cloud.config.import-check.enabled=false\r\n\r\n```\r\n\r\n\r\nIn the test case I am confident that @TestPropertySource is correct and it will load the properties properly since I have used this lot of times.\r\n```\r\n@TestPropertySource(locations = {&quot;file:../config/abc.properties&quot;,\r\n        &quot;classpath:abc-override.properties&quot;})\r\n\r\n```\r\n\r\nI have investigated the issue of **No spring.config.import set**.\r\n\r\n**Issue is** my test is loading the context in static way and that is creating the problem and and it&#39;s not loading config so spring.cloud.import set to false is not active\r\n\r\nIt is loading context like this:\r\n\r\n ```\r\n// below is line #131\r\n context = SpringApplication.run(Application.class, args);//Error coming on this line\r\n Module&lt;?&gt; module = context.getBean(Module.class);\r\n```\r\n\r\nMy Goal is how can I write this test in better way so that context will be loaded properly.\r\nI want to rewrite this unit test and load the context in a way the **abc.propertie**s and **abc-override.properties** are loaded first\r\n\r\nAny help would be highly appreciated. Thanks!\r\n\r\n  [1]: https://i.stack.imgur.com/S7zCn.pnga","link":"https://stackoverflow.com/questions/77556963/config-properties-are-not-loaded-with-springboottest","title":"Config properties are not loaded with @SpringBootTest","body":"<p>I have my Test cases written like this</p>\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@SpringBootTest(classes = { Application.class }, webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_CLASS)\n@TestPropertySource(locations = {&quot;file:../config/abc.properties&quot;,\n        &quot;classpath:abc-override.properties&quot;})\npublic abstract class AbstractTest\n{\n    static final Mockery mockery = new Mockery()\n    {\n        {\n            setImposteriser(ClassImposteriser.INSTANCE);\n        }\n    };\n\n    static RestTemplate restTemplate = mockery.mock(RestTemplate.class);\n\n    private static MongoClient mongoClient;\n\n    static ConfigurableApplicationContext context;\n\n    @BeforeClass\n    public static void start()\n    {\n \n        EmbeddedMongo embeddedMongo = new EmbeddedMongo(EmbeddedMongoDefaultConfiguration.instance());\n        mongoClient = embeddedMongo.start();\n\n        String[] args = { &quot;--server.port=&quot; + SocketUtils.findAvailableTcpPort(8000, 9000) };\n        // below is line #131\n        context = SpringApplication.run(Application.class, args);//Error coming on this line\n        \n        Module&lt;?&gt; module = context.getBean(Module.class);\n       \n    }\n\n    @Test\n    public void sample_test() {\n\n    }\n}\n</code></pre>\n<p>Getting below issue:</p>\n<pre><code>org.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor$ImportException: No spring.config.import set\n\nat org.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor.postProcessEnvironment(ConfigDataMissingEnvironmentPostProcessor.java:79)\nat com.abc.AbstractTest.start(AbstractTest.java:131) -&gt; I have indicated in previous code the line no 131, please see\n</code></pre>\n<p>My Project structure looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/S7zCn.pnga\" rel=\"nofollow noreferrer\">project structure</a></p>\n<p>My abc-override.properties has this content:</p>\n<pre><code># Logging levels across packages (optional)\nlogging.level.root=WARN\nspring.cloud.config.import-check.enabled=false\n\n</code></pre>\n<p>In the test case I am confident that @TestPropertySource is correct and it will load the properties properly since I have used this lot of times.</p>\n<pre><code>@TestPropertySource(locations = {&quot;file:../config/abc.properties&quot;,\n        &quot;classpath:abc-override.properties&quot;})\n\n</code></pre>\n<p>I have investigated the issue of <strong>No spring.config.import set</strong>.</p>\n<p><strong>Issue is</strong> my test is loading the context in static way and that is creating the problem and and it's not loading config so spring.cloud.import set to false is not active</p>\n<p>It is loading context like this:</p>\n<pre><code>// below is line #131\ncontext = SpringApplication.run(Application.class, args);//Error coming on this line\nModule&lt;?&gt; module = context.getBean(Module.class);\n</code></pre>\n<p>My Goal is how can I write this test in better way so that context will be loaded properly.\nI want to rewrite this unit test and load the context in a way the <strong>abc.propertie</strong>s and <strong>abc-override.properties</strong> are loaded first</p>\n<p>Any help would be highly appreciated. Thanks!</p>\n"},{"tags":["java","spring-boot","spring-webflux","reactive-programming"],"comments":[{"score":0,"post_type":"question","creation_date":1701084827,"post_id":77554885,"comment_id":136727000,"body_markdown":"Does `processStreamDataFlux` return Flux and `discordClient. ... .createMessage` - Mono?","link":"https://stackoverflow.com/questions/77554885/how-to-overcome-blockoptional-is-blocking-in-spring-web-flux#comment136727000_77554885","body":"Does <code>processStreamDataFlux</code> return Flux and <code>discordClient. ... .createMessage</code> - Mono?"},{"score":0,"post_type":"question","creation_date":1701086983,"post_id":77554885,"comment_id":136727353,"body_markdown":"processStreamDataFlux returns flux and discordClient. ... .createMessage.  doesn&#39;t return anything. It just sends a message on doOnCompleteCall @gdomo","link":"https://stackoverflow.com/questions/77554885/how-to-overcome-blockoptional-is-blocking-in-spring-web-flux#comment136727353_77554885","body":"processStreamDataFlux returns flux and discordClient. ... .createMessage.  doesn&#39;t return anything. It just sends a message on doOnCompleteCall @gdomo"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701088719,"creation_date":1701088719,"answer_id":77556962,"question_id":77554885,"body_markdown":"Instead of using `doOnComplete` which is using a Runnable as parameter, you can use `collectList` which will return a Mono&lt;List&lt;?&gt;&gt;. After that, you can use `flatMap` on this Mono and call the `createMessage` as the return statement of the flat map.","link":"https://stackoverflow.com/questions/77554885/how-to-overcome-blockoptional-is-blocking-in-spring-web-flux/77556962#77556962","title":"how to overcome blockOptional is blocking in spring web flux","body":"<p>Instead of using <code>doOnComplete</code> which is using a Runnable as parameter, you can use <code>collectList</code> which will return a Mono&lt;List&lt;?&gt;&gt;. After that, you can use <code>flatMap</code> on this Mono and call the <code>createMessage</code> as the return statement of the flat map.</p>\n"}],"comment_count":2,"is_answered":false,"view_count":66,"answer_count":1,"score":0,"last_activity_date":1701088719,"creation_date":1701066468,"last_edit_date":1701067483,"question_id":77554885,"body_markdown":"I&#39;m currently working on a streaming exercise, and here&#39;s the situation: I&#39;m receiving a stream of tokens when I hit an endpoint, and my job is to save each of these tokens as they arrive. After the entire stream is processed, I need to use the Discord client to send the collected tokens to a Discord channel. I&#39;ve included the code signature below. The problem I&#39;m encountering is that `blockOptional() is causing blocking, and it&#39;s not supported in the reactor-http-nio-15 thread`. Any advice on how to address this issue would be greatly appreciated.\r\n\r\n\r\n```\r\nvar dataStream = chatBotRPCService.getResponseUsingStreaming(message.getContent());\r\n\r\n\r\n// data stream is of type Flux&lt;Object&gt;\r\n\r\n\r\nprocessStreamDataFlux(dataStream, message, chatBot, dmMessage, externalFunctionCallCount, answer, response)\r\n    .doOnComplete(() -&gt; {\r\n          \r\n           //send the accumulated tokens to discord  \r\n           \r\n           // The issue happens at the below line of code. \r\n\r\n           messageData = discordClient\r\n                    .getChannelById(Snowflake.of(message.getThreadId()))\r\n                    .createMessage(\r\n                            MultipartRequest.ofRequest(messageRequest\r\n                            )).blockOptional();\r\n       \r\n    })\r\n    .subscribe(tokens -&gt; {\r\n    });\r\n\r\n\r\n```\r\n\r\n\r\n`Issue: blockOptional() is blocking, which is not supported in thread reactor-http-nio-15`\r\n\r\n\r\ndiscord client is built on the package `https://github.com/Discord4J/Discord4J`\r\n","link":"https://stackoverflow.com/questions/77554885/how-to-overcome-blockoptional-is-blocking-in-spring-web-flux","title":"how to overcome blockOptional is blocking in spring web flux","body":"<p>I'm currently working on a streaming exercise, and here's the situation: I'm receiving a stream of tokens when I hit an endpoint, and my job is to save each of these tokens as they arrive. After the entire stream is processed, I need to use the Discord client to send the collected tokens to a Discord channel. I've included the code signature below. The problem I'm encountering is that <code>blockOptional() is causing blocking, and it's not supported in the reactor-http-nio-15 thread</code>. Any advice on how to address this issue would be greatly appreciated.</p>\n<pre><code>var dataStream = chatBotRPCService.getResponseUsingStreaming(message.getContent());\n\n\n// data stream is of type Flux&lt;Object&gt;\n\n\nprocessStreamDataFlux(dataStream, message, chatBot, dmMessage, externalFunctionCallCount, answer, response)\n    .doOnComplete(() -&gt; {\n          \n           //send the accumulated tokens to discord  \n           \n           // The issue happens at the below line of code. \n\n           messageData = discordClient\n                    .getChannelById(Snowflake.of(message.getThreadId()))\n                    .createMessage(\n                            MultipartRequest.ofRequest(messageRequest\n                            )).blockOptional();\n       \n    })\n    .subscribe(tokens -&gt; {\n    });\n\n\n</code></pre>\n<p><code>Issue: blockOptional() is blocking, which is not supported in thread reactor-http-nio-15</code></p>\n<p>discord client is built on the package <code>https://github.com/Discord4J/Discord4J</code></p>\n"},{"tags":["java","multithreading","synchronization"],"comments":[{"score":0,"post_type":"question","creation_date":1701085486,"post_id":77556278,"comment_id":136727099,"body_markdown":"Comparing the result from `collatzLength()` with some sample value from https://challenges.wolframcloud.com/challenge/length-of-the-collatz-sequence it seems that `collatzLength()` returns the correct length. The question is: what should your counts A and B signify? Why do you expect the values 17 and 15 for those counts for the specified inputs?","link":"https://stackoverflow.com/questions/77556278/multi-threading-with-odd-numbers#comment136727099_77556278","body":"Comparing the result from <code>collatzLength()</code> with some sample value from <a href=\"https://challenges.wolframcloud.com/challenge/length-of-the-collatz-sequence\" rel=\"nofollow noreferrer\">challenges.wolframcloud.com/challenge/&hellip;</a> it seems that <code>collatzLength()</code> returns the correct length. The question is: what should your counts A and B signify? Why do you expect the values 17 and 15 for those counts for the specified inputs?"},{"score":0,"post_type":"question","creation_date":1701086050,"post_id":77556278,"comment_id":136727184,"body_markdown":"Count A signifies a list length that is at least as large as half of the integer itself, and Count B signifies a list length that is less than half of the integer itself if that makes sense. And I expected 17 and 15 because I thought it would be logically correct.","link":"https://stackoverflow.com/questions/77556278/multi-threading-with-odd-numbers#comment136727184_77556278","body":"Count A signifies a list length that is at least as large as half of the integer itself, and Count B signifies a list length that is less than half of the integer itself if that makes sense. And I expected 17 and 15 because I thought it would be logically correct."},{"score":0,"post_type":"question","creation_date":1701088104,"post_id":77556278,"comment_id":136727550,"body_markdown":"Your current code `if (length &gt;= i) incrementCountA();` increments count A if the list length is at least as large as integer itself. If I replace that with `if (length &gt;= i / 2) incrementCountA();` (that would match your description) and the corresponding condition for count B I get 23 for count A and 9 for count B.","link":"https://stackoverflow.com/questions/77556278/multi-threading-with-odd-numbers#comment136727550_77556278","body":"Your current code <code>if (length &gt;= i) incrementCountA();</code> increments count A if the list length is at least as large as integer itself. If I replace that with <code>if (length &gt;= i &#47; 2) incrementCountA();</code> (that would match your description) and the corresponding condition for count B I get 23 for count A and 9 for count B."},{"score":0,"post_type":"question","creation_date":1701088168,"post_id":77556278,"comment_id":136727563,"body_markdown":"BTW it would be easier to change the conditions for count A and count B if you where using and if - else construct: `if (length &gt;= i) incrementCountA(); else incrementCountB();`","link":"https://stackoverflow.com/questions/77556278/multi-threading-with-odd-numbers#comment136727563_77556278","body":"BTW it would be easier to change the conditions for count A and count B if you where using and if - else construct: <code>if (length &gt;= i) incrementCountA(); else incrementCountB();</code>"},{"score":1,"post_type":"question","creation_date":1701092090,"post_id":77556278,"comment_id":136728264,"body_markdown":"&quot;Is there something wrong with my Collatz sequence...?&quot; Have you tested your `CollatzRunner` class in a single-threaded test program? That would be my first step.","link":"https://stackoverflow.com/questions/77556278/multi-threading-with-odd-numbers#comment136728264_77556278","body":"&quot;Is there something wrong with my Collatz sequence...?&quot; Have you tested your <code>CollatzRunner</code> class in a single-threaded test program? That would be my first step."}],"comment_count":5,"is_answered":false,"view_count":65,"answer_count":0,"score":-2,"last_activity_date":1701088438,"creation_date":1701082048,"last_edit_date":1701088438,"question_id":77556278,"body_markdown":"I&#39;m practicing using multi-threading in Java using a command line, but I&#39;ve been stuck for a while. Here is what I have so far:\r\n\r\n```\r\npublic class MultithreadPractice {\r\n\r\n    // Shared counters for criteria A and B, initialized to 0\r\n    private static int countA = 0;\r\n    private static int countB = 0;\r\n\r\n    // Synchronized methods to update counts safely\r\n    private static synchronized void incrementCountA() {\r\n        countA++;\r\n    }\r\n\r\n    private static synchronized void incrementCountB() {\r\n        countB++;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        if (args.length != 3) {\r\n            System.out.println(&quot;Please provide three arguments: a, b, and n&quot;);\r\n            return;\r\n        }\r\n\r\n        int a = Integer.parseInt(args[0]);\r\n        int b = Integer.parseInt(args[1]);\r\n        int n = Integer.parseInt(args[2]);\r\n\r\n        // Validate input\r\n        if (a % 2 == 0 || b % 2 == 0 || a &gt; b || n &lt;= 0) {\r\n            System.out.println(&quot;Invalid input. Ensure a and b are odd and a &lt; b, and n is positive.&quot;);\r\n            return;\r\n        }\r\n\r\n        int range = (b - a) / 2 + 1; // Number of odd integers in the range\r\n        int chunkSize = range / n; // Size of each chunk to be processed by each thread\r\n        int remainder = range % n; // Remaining numbers after even division\r\n\r\n        Thread[] threads = new Thread[n];\r\n\r\n        for (int i = 0; i &lt; n; i++) {\r\n            int start = a + 2 * (i * chunkSize);\r\n            int end = start + 2 * chunkSize - 2;\r\n            if (i == n - 1) {\r\n                end += 2 * remainder; // Add the remaining numbers to the last thread\r\n            }\r\n\r\n            threads[i] = new Thread(new CollatzRunner(start, end));\r\n            threads[i].start();\r\n        }\r\n\r\n        // Wait for all threads to finish\r\n        try {\r\n            for (Thread thread : threads) {\r\n                thread.join();\r\n            }\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        // Print results\r\n        System.out.println(&quot;Using &quot; + n + &quot; threads.&quot;);\r\n        System.out.println(&quot;Count for (A) is &quot; + countA + &quot;.&quot;);\r\n        System.out.println(&quot;Count for (B) is &quot; + countB + &quot;.&quot;);\r\n    }\r\n\r\n    static class CollatzRunner implements Runnable {\r\n        private final int start;\r\n        private final int end;\r\n\r\n        CollatzRunner(int start, int end) {\r\n            this.start = start;\r\n            this.end = end;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            for (int i = start; i &lt;= end; i += 2) {\r\n                int length = collatzLength(i);\r\n                if (length &gt;= i) incrementCountA();\r\n                if (length &lt; i) incrementCountB();\r\n            }\r\n        }\r\n\r\n        private int collatzLength(int n) {\r\n            int steps = 0;\r\n            long num = n;\r\n            while (num != 1) {\r\n                if (num % 2 == 0) num /= 2;\r\n                else num = 3 * num + 1;\r\n                steps++;\r\n            }\r\n            return steps;\r\n        }\r\n    }\r\n}\r\n```\r\nI expect my result to give me something like this in the command line:\r\n\r\njava MultithreadPractice 11 73 4\r\n\r\n \r\n**Using 4 threads.**\r\n\r\n**Count for (A) is 17.**\r\n\r\n**Count for (B) is 15.**\r\n\r\nBut instead, I got 11 for A and 21 for B. Is there something wrong with my Collatz sequence or am I missing something?\r\n\r\n","link":"https://stackoverflow.com/questions/77556278/multi-threading-with-odd-numbers","title":"Multi-threading with odd numbers","body":"<p>I'm practicing using multi-threading in Java using a command line, but I've been stuck for a while. Here is what I have so far:</p>\n<pre><code>public class MultithreadPractice {\n\n    // Shared counters for criteria A and B, initialized to 0\n    private static int countA = 0;\n    private static int countB = 0;\n\n    // Synchronized methods to update counts safely\n    private static synchronized void incrementCountA() {\n        countA++;\n    }\n\n    private static synchronized void incrementCountB() {\n        countB++;\n    }\n\n    public static void main(String[] args) {\n        if (args.length != 3) {\n            System.out.println(&quot;Please provide three arguments: a, b, and n&quot;);\n            return;\n        }\n\n        int a = Integer.parseInt(args[0]);\n        int b = Integer.parseInt(args[1]);\n        int n = Integer.parseInt(args[2]);\n\n        // Validate input\n        if (a % 2 == 0 || b % 2 == 0 || a &gt; b || n &lt;= 0) {\n            System.out.println(&quot;Invalid input. Ensure a and b are odd and a &lt; b, and n is positive.&quot;);\n            return;\n        }\n\n        int range = (b - a) / 2 + 1; // Number of odd integers in the range\n        int chunkSize = range / n; // Size of each chunk to be processed by each thread\n        int remainder = range % n; // Remaining numbers after even division\n\n        Thread[] threads = new Thread[n];\n\n        for (int i = 0; i &lt; n; i++) {\n            int start = a + 2 * (i * chunkSize);\n            int end = start + 2 * chunkSize - 2;\n            if (i == n - 1) {\n                end += 2 * remainder; // Add the remaining numbers to the last thread\n            }\n\n            threads[i] = new Thread(new CollatzRunner(start, end));\n            threads[i].start();\n        }\n\n        // Wait for all threads to finish\n        try {\n            for (Thread thread : threads) {\n                thread.join();\n            }\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n        // Print results\n        System.out.println(&quot;Using &quot; + n + &quot; threads.&quot;);\n        System.out.println(&quot;Count for (A) is &quot; + countA + &quot;.&quot;);\n        System.out.println(&quot;Count for (B) is &quot; + countB + &quot;.&quot;);\n    }\n\n    static class CollatzRunner implements Runnable {\n        private final int start;\n        private final int end;\n\n        CollatzRunner(int start, int end) {\n            this.start = start;\n            this.end = end;\n        }\n\n        @Override\n        public void run() {\n            for (int i = start; i &lt;= end; i += 2) {\n                int length = collatzLength(i);\n                if (length &gt;= i) incrementCountA();\n                if (length &lt; i) incrementCountB();\n            }\n        }\n\n        private int collatzLength(int n) {\n            int steps = 0;\n            long num = n;\n            while (num != 1) {\n                if (num % 2 == 0) num /= 2;\n                else num = 3 * num + 1;\n                steps++;\n            }\n            return steps;\n        }\n    }\n}\n</code></pre>\n<p>I expect my result to give me something like this in the command line:</p>\n<p>java MultithreadPractice 11 73 4</p>\n<p><strong>Using 4 threads.</strong></p>\n<p><strong>Count for (A) is 17.</strong></p>\n<p><strong>Count for (B) is 15.</strong></p>\n<p>But instead, I got 11 for A and 21 for B. Is there something wrong with my Collatz sequence or am I missing something?</p>\n"},{"tags":["java","firebase-cloud-messaging","progressive-web-apps"],"comment_count":0,"is_answered":false,"view_count":26,"answer_count":0,"score":0,"last_activity_date":1701088312,"creation_date":1701088312,"question_id":77556921,"body_markdown":"I have installed my Progressive Web App on my Android mobile phone. When I send a push notification to this app (with my user token), a bell appears in the top bar. When I pull down the bar, I see the notification box with the title and text. When I tap this box, the window closes, but the app in the background does not come to the foreground! What do I have to do so that my installed app, which is in the background, comes to the foreground? \r\n\r\nI would also like to prevent this notification from asking whether the URL should be opened in the browser! This has already happened. The default browser should not be opened, but the already installed app should be brought to the foreground. \r\n\r\nI send the message via the Firebase SDK with a Java app on my server.  Here I can only specify a title and text for the notification message, but no click action. Or can I? \r\n\r\n\r\nMy method for creating the notification\r\n```\r\npublic static Message.Builder createMessage(String title, String body, String user_token) {\r\n\t\tNotification notification = Notification.builder().setTitle(title).setBody(body).build();\r\n\t\t\t\t\r\n\t\tMessage.Builder message = Message.builder().setNotification(notification).setToken(user_token);\r\n\t\t\r\n\t\treturn message;\r\n\t}\r\n```\r\n\r\nHere is the url to the document I used for orientation [FirebaseMessagingSnippet](https://github.com/firebase/firebase-admin-java/blob/b4ab5903fb337b6023e331feb317f0866872c439/src/test/java/com/google/firebase/snippets/FirebaseMessagingSnippets.java)\r\n\r\n\r\n\r\n\r\nWhen I tap on the notification box, I expect the pwa to be brought to the foreground.","link":"https://stackoverflow.com/questions/77556921/how-to-define-the-click-action-in-a-push-notification-for-progressive-web-app-p","title":"How to define the click action in a push notification for Progressive Web App (PWA)?","body":"<p>I have installed my Progressive Web App on my Android mobile phone. When I send a push notification to this app (with my user token), a bell appears in the top bar. When I pull down the bar, I see the notification box with the title and text. When I tap this box, the window closes, but the app in the background does not come to the foreground! What do I have to do so that my installed app, which is in the background, comes to the foreground?</p>\n<p>I would also like to prevent this notification from asking whether the URL should be opened in the browser! This has already happened. The default browser should not be opened, but the already installed app should be brought to the foreground.</p>\n<p>I send the message via the Firebase SDK with a Java app on my server.  Here I can only specify a title and text for the notification message, but no click action. Or can I?</p>\n<p>My method for creating the notification</p>\n<pre><code>public static Message.Builder createMessage(String title, String body, String user_token) {\n        Notification notification = Notification.builder().setTitle(title).setBody(body).build();\n                \n        Message.Builder message = Message.builder().setNotification(notification).setToken(user_token);\n        \n        return message;\n    }\n</code></pre>\n<p>Here is the url to the document I used for orientation <a href=\"https://github.com/firebase/firebase-admin-java/blob/b4ab5903fb337b6023e331feb317f0866872c439/src/test/java/com/google/firebase/snippets/FirebaseMessagingSnippets.java\" rel=\"nofollow noreferrer\">FirebaseMessagingSnippet</a></p>\n<p>When I tap on the notification box, I expect the pwa to be brought to the foreground.</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa","jpql"],"comments":[{"score":0,"post_type":"question","creation_date":1701086776,"post_id":77556669,"comment_id":136727320,"body_markdown":"Probably because delete all expects an Iterable. Why not call it `deleteBy...`?","link":"https://stackoverflow.com/questions/77556669/how-does-deleteallby-method-work-in-spring-data-jpa-why-does-it-it-make-more#comment136727320_77556669","body":"Probably because delete all expects an Iterable. Why not call it <code>deleteBy...</code>?"},{"score":4,"post_type":"question","creation_date":1701088307,"post_id":77556669,"comment_id":136727603,"body_markdown":"The delete query is generated by Spring Data **not** hibernate. Next to that what might seem logical to you, might not be to hibernate as that only has the metadata it can operate on.","link":"https://stackoverflow.com/questions/77556669/how-does-deleteallby-method-work-in-spring-data-jpa-why-does-it-it-make-more#comment136727603_77556669","body":"The delete query is generated by Spring Data <b>not</b> hibernate. Next to that what might seem logical to you, might not be to hibernate as that only has the metadata it can operate on."},{"score":0,"post_type":"question","creation_date":1701089427,"post_id":77556669,"comment_id":136727790,"body_markdown":"@MuratKarag&#246;z because i want to delete all entities with one go, will `deleteBy...` handle this?","link":"https://stackoverflow.com/questions/77556669/how-does-deleteallby-method-work-in-spring-data-jpa-why-does-it-it-make-more#comment136727790_77556669","body":"@MuratKarag&#246;z because i want to delete all entities with one go, will <code>deleteBy...</code> handle this?"},{"score":0,"post_type":"question","creation_date":1701089568,"post_id":77556669,"comment_id":136727813,"body_markdown":"@M.Deinum oh, i didnt know about this, but still whats the difference between my custom query and `deleteAllBy...` method? How does it work?","link":"https://stackoverflow.com/questions/77556669/how-does-deleteallby-method-work-in-spring-data-jpa-why-does-it-it-make-more#comment136727813_77556669","body":"@M.Deinum oh, i didnt know about this, but still whats the difference between my custom query and <code>deleteAllBy...</code> method? How does it work?"},{"score":1,"post_type":"question","creation_date":1701090002,"post_id":77556669,"comment_id":136727896,"body_markdown":"You would need to look at the query builder in Spring Data to determine what that is doing. I would suspect that there is even a `SELECT` before the `DELETE` instances. Why, because else Hibernate won&#39;t know what to delete as it would need the entity mapping to determine if nested relationships need to be deleted as well.","link":"https://stackoverflow.com/questions/77556669/how-does-deleteallby-method-work-in-spring-data-jpa-why-does-it-it-make-more#comment136727896_77556669","body":"You would need to look at the query builder in Spring Data to determine what that is doing. I would suspect that there is even a <code>SELECT</code> before the <code>DELETE</code> instances. Why, because else Hibernate won&#39;t know what to delete as it would need the entity mapping to determine if nested relationships need to be deleted as well."},{"score":0,"post_type":"question","creation_date":1701091458,"post_id":77556669,"comment_id":136728159,"body_markdown":"@M.Deinum just checked it out, yeah, there is really a `SELECT` query before deleting entity, now i understand why, but I also noticed that if i am using custom query for deleting department entities, there is no such query, so is it better to use custom queries for updating / deleting entities? Or maybe there is not such query because I am executing this query first: `@Query(value = &quot;DELETE FROM Employee e WHERE e.department.id IN (SELECT d.id from Department d where d.companyBranch.id = :companyBranchId)&quot;)` ?","link":"https://stackoverflow.com/questions/77556669/how-does-deleteallby-method-work-in-spring-data-jpa-why-does-it-it-make-more#comment136728159_77556669","body":"@M.Deinum just checked it out, yeah, there is really a <code>SELECT</code> query before deleting entity, now i understand why, but I also noticed that if i am using custom query for deleting department entities, there is no such query, so is it better to use custom queries for updating / deleting entities? Or maybe there is not such query because I am executing this query first: <code>@Query(value = &quot;DELETE FROM Employee e WHERE e.department.id IN (SELECT d.id from Department d where d.companyBranch.id = :companyBranchId)&quot;)</code> ?"},{"score":2,"post_type":"question","creation_date":1701091948,"post_id":77556669,"comment_id":136728239,"body_markdown":"If you provide a query that will be executed as is, it will not use the JPA metamodel then to traverse relations etc. etc.","link":"https://stackoverflow.com/questions/77556669/how-does-deleteallby-method-work-in-spring-data-jpa-why-does-it-it-make-more#comment136728239_77556669","body":"If you provide a query that will be executed as is, it will not use the JPA metamodel then to traverse relations etc. etc."}],"comment_count":7,"is_answered":false,"view_count":62,"answer_count":0,"score":0,"last_activity_date":1701088309,"creation_date":1701085920,"last_edit_date":1701088309,"question_id":77556669,"body_markdown":"In my project I was using this method for my entity repository\r\n\r\n    void deleteAllByCompanyBranch_Id(Long companyBranchId);\r\n\r\nAnd the result was a little bit weird, Hibernate generated DELETE query for each entity, instead of doing it only once and I can&#39;t understand why. Here is Hibernate&#39;s log\r\n\r\n    Hibernate: \r\n        delete \r\n        from\r\n            department \r\n        where\r\n            id=?\r\n    Hibernate: \r\n        delete \r\n        from\r\n            department \r\n        where\r\n            id=?\r\n    Hibernate: \r\n        delete \r\n        from\r\n            department \r\n        where\r\n            id=?\r\n    Hibernate: \r\n        delete \r\n        from\r\n            department \r\n        where\r\n            id=?\r\n\r\nAs you can see Hibernate generates four delete queries for each row related to company branch.\r\n\r\nIf I am using a custom query like this\r\n\r\n    @Modifying\r\n    @Query(value = &quot;DELETE Department d WHERE d.companyBranch.id = :companyBranchId&quot;)\r\n    void deleteAllByCompanyBranch_Id(Long companyBranchId);\r\n\r\nHibernate generates only one query\r\n\r\n    Hibernate: \r\n        delete \r\n        from\r\n            department \r\n        where\r\n            company_branch_id=?\r\n\r\nWhy can&#39;t hibernate do the same for `deleteAllBy...` method from Spring Data JPA? What&#39;s the point of this query method if it can not delete all entities with one query? When should I use it and when should I not?","link":"https://stackoverflow.com/questions/77556669/how-does-deleteallby-method-work-in-spring-data-jpa-why-does-it-it-make-more","title":"How does deleteAllBy... method work in Spring Data JPA? Why does it it make more DELETE queries then needed?","body":"<p>In my project I was using this method for my entity repository</p>\n<pre><code>void deleteAllByCompanyBranch_Id(Long companyBranchId);\n</code></pre>\n<p>And the result was a little bit weird, Hibernate generated DELETE query for each entity, instead of doing it only once and I can't understand why. Here is Hibernate's log</p>\n<pre><code>Hibernate: \n    delete \n    from\n        department \n    where\n        id=?\nHibernate: \n    delete \n    from\n        department \n    where\n        id=?\nHibernate: \n    delete \n    from\n        department \n    where\n        id=?\nHibernate: \n    delete \n    from\n        department \n    where\n        id=?\n</code></pre>\n<p>As you can see Hibernate generates four delete queries for each row related to company branch.</p>\n<p>If I am using a custom query like this</p>\n<pre><code>@Modifying\n@Query(value = &quot;DELETE Department d WHERE d.companyBranch.id = :companyBranchId&quot;)\nvoid deleteAllByCompanyBranch_Id(Long companyBranchId);\n</code></pre>\n<p>Hibernate generates only one query</p>\n<pre><code>Hibernate: \n    delete \n    from\n        department \n    where\n        company_branch_id=?\n</code></pre>\n<p>Why can't hibernate do the same for <code>deleteAllBy...</code> method from Spring Data JPA? What's the point of this query method if it can not delete all entities with one query? When should I use it and when should I not?</p>\n"},{"tags":["java","swing","vlc"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701313021,"post_id":77556901,"comment_id":136761303,"body_markdown":"Thank you. I&#39;ll try to find another solution. No longer through vlc itself.","link":"https://stackoverflow.com/questions/77541885/vlc-when-the-video-list-is-played-a-black-screen-remains-for-1s/77556901#comment136761303_77556901","body":"Thank you. I&#39;ll try to find another solution. No longer through vlc itself."}],"comment_count":1,"score":0,"last_activity_date":1701088097,"creation_date":1701088097,"answer_id":77556901,"question_id":77541885,"body_markdown":"This is a bug. One of the main developers mentioned in the [VLC forum][1] that you cannot do anything about it (except a massive refactoring of VLC itself)\r\n\r\n\r\n  [1]: https://forum.videolan.org/viewtopic.php?f=14&amp;t=163540&amp;p=540959&amp;hilit=black%20screen#p540959","link":"https://stackoverflow.com/questions/77541885/vlc-when-the-video-list-is-played-a-black-screen-remains-for-1s/77556901#77556901","title":"VLC When the video list is played, a black screen remains for 1s","body":"<p>This is a bug. One of the main developers mentioned in the <a href=\"https://forum.videolan.org/viewtopic.php?f=14&amp;t=163540&amp;p=540959&amp;hilit=black%20screen#p540959\" rel=\"nofollow noreferrer\">VLC forum</a> that you cannot do anything about it (except a massive refactoring of VLC itself)</p>\n"}],"comment_count":0,"is_answered":false,"view_count":67,"answer_count":1,"score":0,"last_activity_date":1701088097,"creation_date":1700816544,"last_edit_date":1700816818,"question_id":77541885,"body_markdown":"When recirculating a playlist video, there will be a black screen for about 1 second each time a video is played while switching to the next video\r\n\r\nversion\r\nvlcj: 3.8.0\r\njava: 1.8.0_131 Oracle Corporation\r\nvlc: 3.0.8 Vetinari, changeset 3.0.8-0-gf350b6b5a7\r\n\r\n\r\n    mediaPlayerComponent.getMediaPlayer().addMediaPlayerEventListener(new MediaPlayerEventAdapter() {\r\n            @Override\r\n            public void finished(MediaPlayer mediaPlayer) {\r\n                 // loop play\r\n                if (LIST_PROGRAM_PLAY_LOOP.equals(playMode)) {\r\n                    if (mrlList.size() == 1) {\r\n                        mediaPlayer.setRepeat(true);\r\n                    } else {\r\n                        if (++playIndex &gt;= mrlList.size()) {\r\n                            playIndex = 0;\r\n                        }\r\n                        mediaPlayer.prepareMedia(mrlList.get(playIndex));\r\n                        playingMrl = mrlList.get(playIndex);\r\n                        mediaPlayer.play();\r\n                    }\r\n\r\n                }\r\n            }\r\n    }\r\n\r\n\r\n\r\nOn a computer with a core display, the problem will be more prominent, is there any way I can optimize it","link":"https://stackoverflow.com/questions/77541885/vlc-when-the-video-list-is-played-a-black-screen-remains-for-1s","title":"VLC When the video list is played, a black screen remains for 1s","body":"<p>When recirculating a playlist video, there will be a black screen for about 1 second each time a video is played while switching to the next video</p>\n<p>version\nvlcj: 3.8.0\njava: 1.8.0_131 Oracle Corporation\nvlc: 3.0.8 Vetinari, changeset 3.0.8-0-gf350b6b5a7</p>\n<pre><code>mediaPlayerComponent.getMediaPlayer().addMediaPlayerEventListener(new MediaPlayerEventAdapter() {\n        @Override\n        public void finished(MediaPlayer mediaPlayer) {\n             // loop play\n            if (LIST_PROGRAM_PLAY_LOOP.equals(playMode)) {\n                if (mrlList.size() == 1) {\n                    mediaPlayer.setRepeat(true);\n                } else {\n                    if (++playIndex &gt;= mrlList.size()) {\n                        playIndex = 0;\n                    }\n                    mediaPlayer.prepareMedia(mrlList.get(playIndex));\n                    playingMrl = mrlList.get(playIndex);\n                    mediaPlayer.play();\n                }\n\n            }\n        }\n}\n</code></pre>\n<p>On a computer with a core display, the problem will be more prominent, is there any way I can optimize it</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa"],"comments":[{"score":0,"post_type":"question","creation_date":1700813834,"post_id":77541229,"comment_id":136701542,"body_markdown":"It looks like this is a bug in spring-boot 3.2 =&gt; \nhttps://github.com/spring-projects/spring-data-jpa/issues/3239 and will be fixed soon. \nThe bug is already closed.\nHibernate 6.3 had the bug and spring did not support 6.4 where it was fixed. So the delivery of the above issue will hopefully fix my problem.","link":"https://stackoverflow.com/questions/77541229/validation-failed-for-query-for-method-upgrading-from-spring-boot-3-1-5-to-3-2-0#comment136701542_77541229","body":"It looks like this is a bug in spring-boot 3.2 =&gt;  <a href=\"https://github.com/spring-projects/spring-data-jpa/issues/3239\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-data-jpa/issues/3239</a> and will be fixed soon.  The bug is already closed. Hibernate 6.3 had the bug and spring did not support 6.4 where it was fixed. So the delivery of the above issue will hopefully fix my problem."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701087395,"creation_date":1701087395,"answer_id":77556825,"question_id":77541229,"body_markdown":"We found the problem.\r\nWe are using an abstract super class for all Entities. In this class we use generics for the ID class (with `Entity` being an interface with `T getId();` method:\r\n\r\n    public abstract class AbstractEntity&lt;T&gt; implements Entity&lt;T&gt; {\r\n    @Id\r\n    private T id;\r\n\r\nThis worked until Spring Boot Data 3.1.5.\r\n\r\nFrom 3.2.0 on the `T` class must not be a generic type. **In our case it must `extend Long`** in order to work, since we use a `Long` for all ids... :\r\n\r\n    public abstract class AbstractEntity&lt;T extends Long&gt; implements Entity&lt;T&gt; {\r\n    @Id\r\n    private T id;\r\n\r\nThe generic was introduced with composite Id-classes in mind.\r\n\r\nWe will change the code and use `Long` directly, since we never use composite ids in this project.\r\n\r\nThat was all. Not a spring boot / spring data jpa bug or the like.\r\n\r\nHope this helps somebody else.","link":"https://stackoverflow.com/questions/77541229/validation-failed-for-query-for-method-upgrading-from-spring-boot-3-1-5-to-3-2-0/77556825#77556825","title":"Validation failed for query for method upgrading from Spring Boot 3.1.5 to 3.2.0","body":"<p>We found the problem.\nWe are using an abstract super class for all Entities. In this class we use generics for the ID class (with <code>Entity</code> being an interface with <code>T getId();</code> method:</p>\n<pre><code>public abstract class AbstractEntity&lt;T&gt; implements Entity&lt;T&gt; {\n@Id\nprivate T id;\n</code></pre>\n<p>This worked until Spring Boot Data 3.1.5.</p>\n<p>From 3.2.0 on the <code>T</code> class must not be a generic type. <strong>In our case it must <code>extend Long</code></strong> in order to work, since we use a <code>Long</code> for all ids... :</p>\n<pre><code>public abstract class AbstractEntity&lt;T extends Long&gt; implements Entity&lt;T&gt; {\n@Id\nprivate T id;\n</code></pre>\n<p>The generic was introduced with composite Id-classes in mind.</p>\n<p>We will change the code and use <code>Long</code> directly, since we never use composite ids in this project.</p>\n<p>That was all. Not a spring boot / spring data jpa bug or the like.</p>\n<p>Hope this helps somebody else.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":509,"answer_count":1,"score":2,"last_activity_date":1701087395,"creation_date":1700809119,"question_id":77541229,"body_markdown":"I upgraded from Spring Boot (Data) 3.1.5 to 3.2.0.\r\n\r\nSeveral of my queries in the Repositories throw exceptions now on application start in the validation phase:\r\n\r\n`Caused by: Cannot compare left expression of type &#39;java.lang.Object&#39; with right expression of type &#39;java.lang.Long&#39;.`\r\n\r\n\r\n\r\nE.g.:\r\n\r\n            @Query(value = &quot;SELECT new com.my.service.crud.ReferencedObject(p.id, p.name, r.name) FROM MyEntityA p join MyEntityB r on (p.aId = r.id) WHERE &quot; +\r\n                           &quot; p.aId = :projectId and exists (select id from EntityC where cId = p.id and dTypeId = :uutId)&quot;)\r\n            List&lt;ReferencedObject&gt; findReferencesToUtilType(@Param(&quot;projectId&quot;) Long projectId, @Param(&quot;uutId&quot;) Long utilTypeId);\r\n\r\nThis (anonymized) Code worked fine with 3.1.5 and returned a list of ReferencedObjects.\r\nI even get errors on finders that return `Optional&lt;Entity&gt;` and e.g. `findByIdAndOtherAttr(...)`.\r\n\r\n\r\n\r\nThe underlying cause is\r\n\r\n    Caused by: org.hibernate.query.SemanticException: Cannot compare left expression of type &#39;java.lang.Long&#39; with right expression of type &#39;java.lang.Object&#39;\r\n\r\n\tat org.hibernate.query.sqm.internal.TypecheckUtil.assertComparable(TypecheckUtil.java:338)\r\n\tat org.hibernate.query.sqm.tree.predicate.SqmComparisonPredicate.&lt;init&gt;(SqmComparisonPredicate.java:48)\r\n\tat org.hibernate.query.sqm.tree.predicate.SqmComparisonPredicate.&lt;init&gt;(SqmComparisonPredicate.java:34)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.createComparisonPredicate(SemanticQueryBuilder.java:2447)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitComparisonPredicate(SemanticQueryBuilder.java:2391)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitComparisonPredicate(SemanticQueryBuilder.java:268)\r\n\tat org.hibernate.grammars.hql.HqlParser$ComparisonPredicateContext.accept(HqlParser.java:6071)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitGroupedPredicate(SemanticQueryBuilder.java:2251)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitGroupedPredicate(SemanticQueryBuilder.java:268)\r\n\tat org.hibernate.grammars.hql.HqlParser$GroupedPredicateContext.accept(HqlParser.java:5994)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.consumeJoin(SemanticQueryBuilder.java:2129)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1921)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1900)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1147)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:940)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:268)\r\n\tat org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1844)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:925)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:268)\r\n\tat org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1718)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:442)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:401)\r\n\tat org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:310)\r\n\tat org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:71)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:744)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:794)\r\n\t... 43 common frames omitted\r\n\r\n\r\nI found this https://discourse.hibernate.org/t/upgrade-to-6-3-rc1-cannot-compare-left-expression-of-type-java-sql-timestamp-with-right-expression-of-type-com-model-entity-impl-user/8034/5\r\nwhere the Hibernate Team member said, that one is comparing apples with oranges...\r\n\r\nDoes anyone have a link to a migration guide?\r\n\r\nWhat do I have to do to get my queries working again?\r\n\r\nIn the release notes of Spring Boot 3.2.0 I only found a hint that &quot;deprecated features have been dereleased now&quot;.\r\n\r\nThanks for any hint!","link":"https://stackoverflow.com/questions/77541229/validation-failed-for-query-for-method-upgrading-from-spring-boot-3-1-5-to-3-2-0","title":"Validation failed for query for method upgrading from Spring Boot 3.1.5 to 3.2.0","body":"<p>I upgraded from Spring Boot (Data) 3.1.5 to 3.2.0.</p>\n<p>Several of my queries in the Repositories throw exceptions now on application start in the validation phase:</p>\n<p><code>Caused by: Cannot compare left expression of type 'java.lang.Object' with right expression of type 'java.lang.Long'.</code></p>\n<p>E.g.:</p>\n<pre><code>        @Query(value = &quot;SELECT new com.my.service.crud.ReferencedObject(p.id, p.name, r.name) FROM MyEntityA p join MyEntityB r on (p.aId = r.id) WHERE &quot; +\n                       &quot; p.aId = :projectId and exists (select id from EntityC where cId = p.id and dTypeId = :uutId)&quot;)\n        List&lt;ReferencedObject&gt; findReferencesToUtilType(@Param(&quot;projectId&quot;) Long projectId, @Param(&quot;uutId&quot;) Long utilTypeId);\n</code></pre>\n<p>This (anonymized) Code worked fine with 3.1.5 and returned a list of ReferencedObjects.\nI even get errors on finders that return <code>Optional&lt;Entity&gt;</code> and e.g. <code>findByIdAndOtherAttr(...)</code>.</p>\n<p>The underlying cause is</p>\n<pre><code>Caused by: org.hibernate.query.SemanticException: Cannot compare left expression of type 'java.lang.Long' with right expression of type 'java.lang.Object'\n\nat org.hibernate.query.sqm.internal.TypecheckUtil.assertComparable(TypecheckUtil.java:338)\nat org.hibernate.query.sqm.tree.predicate.SqmComparisonPredicate.&lt;init&gt;(SqmComparisonPredicate.java:48)\nat org.hibernate.query.sqm.tree.predicate.SqmComparisonPredicate.&lt;init&gt;(SqmComparisonPredicate.java:34)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.createComparisonPredicate(SemanticQueryBuilder.java:2447)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitComparisonPredicate(SemanticQueryBuilder.java:2391)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitComparisonPredicate(SemanticQueryBuilder.java:268)\nat org.hibernate.grammars.hql.HqlParser$ComparisonPredicateContext.accept(HqlParser.java:6071)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitGroupedPredicate(SemanticQueryBuilder.java:2251)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitGroupedPredicate(SemanticQueryBuilder.java:268)\nat org.hibernate.grammars.hql.HqlParser$GroupedPredicateContext.accept(HqlParser.java:5994)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.consumeJoin(SemanticQueryBuilder.java:2129)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitEntityWithJoins(SemanticQueryBuilder.java:1921)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitFromClause(SemanticQueryBuilder.java:1900)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuery(SemanticQueryBuilder.java:1147)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:940)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitQuerySpecExpression(SemanticQueryBuilder.java:268)\nat org.hibernate.grammars.hql.HqlParser$QuerySpecExpressionContext.accept(HqlParser.java:1844)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:925)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimpleQueryGroup(SemanticQueryBuilder.java:268)\nat org.hibernate.grammars.hql.HqlParser$SimpleQueryGroupContext.accept(HqlParser.java:1718)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSelectStatement(SemanticQueryBuilder.java:442)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:401)\nat org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:310)\nat org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:71)\nat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165)\nat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147)\nat org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:744)\nat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:794)\n... 43 common frames omitted\n</code></pre>\n<p>I found this <a href=\"https://discourse.hibernate.org/t/upgrade-to-6-3-rc1-cannot-compare-left-expression-of-type-java-sql-timestamp-with-right-expression-of-type-com-model-entity-impl-user/8034/5\" rel=\"nofollow noreferrer\">https://discourse.hibernate.org/t/upgrade-to-6-3-rc1-cannot-compare-left-expression-of-type-java-sql-timestamp-with-right-expression-of-type-com-model-entity-impl-user/8034/5</a>\nwhere the Hibernate Team member said, that one is comparing apples with oranges...</p>\n<p>Does anyone have a link to a migration guide?</p>\n<p>What do I have to do to get my queries working again?</p>\n<p>In the release notes of Spring Boot 3.2.0 I only found a hint that &quot;deprecated features have been dereleased now&quot;.</p>\n<p>Thanks for any hint!</p>\n"},{"tags":["java","jpa","spring-data-jpa"],"comments":[{"score":0,"post_type":"question","creation_date":1701073644,"post_id":77555439,"comment_id":136725102,"body_markdown":"Related: [Are there out of the box solutions for persisting a whole object graph by its node?](https://stackoverflow.com/questions/77523406/are-there-out-of-the-box-solutions-for-persisting-a-whole-object-graph-by-its-no)","link":"https://stackoverflow.com/questions/77555439/can-i-ever-get-my-persister-work-its-intended-to-persist-a-graph-by-a-graph-n#comment136725102_77555439","body":"Related: <a href=\"https://stackoverflow.com/questions/77523406/are-there-out-of-the-box-solutions-for-persisting-a-whole-object-graph-by-its-no\">Are there out of the box solutions for persisting a whole object graph by its node?</a>"},{"score":0,"post_type":"question","creation_date":1701083947,"post_id":77555439,"comment_id":136726860,"body_markdown":"You can drop a comment, &quot;Dude, you&#39;re on the wrong track, here&#39;s what you need to do instead&quot;. It would be appreciated too. I really need feedback","link":"https://stackoverflow.com/questions/77555439/can-i-ever-get-my-persister-work-its-intended-to-persist-a-graph-by-a-graph-n#comment136726860_77555439","body":"You can drop a comment, &quot;Dude, you&#39;re on the wrong track, here&#39;s what you need to do instead&quot;. It would be appreciated too. I really need feedback"},{"score":0,"post_type":"question","creation_date":1701096280,"post_id":77555439,"comment_id":136729164,"body_markdown":"This isn&#39;t a great post for stack overflow as there is far too much effort to debug your code, and warning that it isn&#39;t very readable is certainly a deterrent - people are more willing to read and help if you run the code and show the errors, and maybe narrow down issues to one specific problem. Id suggest you start small and build up or you&#39;ll be overwhelmed with small problems and get to a point where fixing one may cause others that aren&#39;t noticed right away, and those willing to help will be as well.","link":"https://stackoverflow.com/questions/77555439/can-i-ever-get-my-persister-work-its-intended-to-persist-a-graph-by-a-graph-n#comment136729164_77555439","body":"This isn&#39;t a great post for stack overflow as there is far too much effort to debug your code, and warning that it isn&#39;t very readable is certainly a deterrent - people are more willing to read and help if you run the code and show the errors, and maybe narrow down issues to one specific problem. Id suggest you start small and build up or you&#39;ll be overwhelmed with small problems and get to a point where fixing one may cause others that aren&#39;t noticed right away, and those willing to help will be as well."}],"comment_count":3,"is_answered":false,"view_count":23,"answer_count":0,"score":-1,"last_activity_date":1701086478,"creation_date":1701073539,"last_edit_date":1701086478,"question_id":77555439,"body_markdown":"`@Sql` scripts are error-prone and not OOP. I want my tests to be rid of them. This would be perfect:\r\n```java\r\n@DataJpaTest\r\n@ActiveProfiles(&quot;test&quot;)\r\n@Import(value = BasicPersister.class)\r\nclass CardRepositoryTest {\r\n    @Autowired\r\n    private CardRepository cardRepository;\r\n    private FieldInspector fieldInspector;\r\n    private DataGenerator dataGenerator;\r\n    @Autowired\r\n    private Persister persister;\r\n    private Card expectedCard;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        dataGenerator = new BasicDataGenerator();\r\n        expectedCard = dataGenerator.generateRandomCard();\r\n        persister.persistGraph(expectedCard);\r\n    }\r\n\r\n    @Test\r\n    void testSomething() {\r\n    // it&#39;s an MRE, let leave it like that for now\r\n    }\r\n}\r\n```\r\n`DataGenerator` implementation is out of scope of this question. The general idea is:\r\n```java\r\npublic class BasicDataGenerator implements DataGenerator {\r\n    private static final Faker faker = new Faker();\r\n    @Override\r\n    public Card generateRandomCard() {\r\n        Card card = Card.builder()\r\n                .id(UUID.randomUUID())\r\n                .cardNumber(getRandomLongAsString())\r\n                .holderName(faker.name().fullName())\r\n                .expirationDate(getRandomFutureLocalDate())\r\n                .paymentSystem(getRandomEnumConstant(PaymentSystem.class))\r\n                .cardBalance(getRandomBigDecimal())\r\n                .cardStatus(getRandomEnumConstant(CardStatus.class))\r\n                .transactionLimit(getRandomBigDecimal())\r\n                .deliveryPoint(faker.address().fullAddress())\r\n                .isDigitalWallet(getRandomBoolean())\r\n                .isVirtual(getRandomBoolean())\r\n                .coBrand(faker.company().name())\r\n                .cardAlias(faker.funnyName().name())\r\n                .build();\r\n        Account account = generateRandomAccountFor(card);\r\n        card.setAccount(account);\r\n        return card;\r\n    }\r\n\r\n// ...\r\n```\r\nLet&#39;s make it simpler and also simplify the graph. Simplified `DataGenerator`:\r\n```java\r\npublic class SimplifiedDataGenerator implements DataGenerator {\r\n\r\n    @Override\r\n    public Card generateRandomCard() {\r\n        Card card = Card.builder()\r\n                .id(UUID.randomUUID())\r\n                .build();\r\n        Account account = generateRandomAccountFor(card);\r\n        card.setAccount(account);\r\n        return card;\r\n    }\r\n\r\n    @Override\r\n    public Account generateRandomAccountFor(Card card) {\r\n        Account account = Account.builder()\r\n                .id(UUID.randomUUID())\r\n                .cards(List.of(card))\r\n                .build();\r\n        PaymentSchedule paymentSchedule = generateRandomPaymentScheduleFor(account);\r\n        Agreement agreement = generateRandomAgreementFor(account);\r\n        Credit credit = generateRandomCreditFor(agreement, account);\r\n        account.setPaymentSchedules(List.of(paymentSchedule));\r\n        account.setCredit(credit);\r\n        card.setAccount(account);\r\n        return account;\r\n    }\r\n\r\n    @Override\r\n    public Agreement generateRandomAgreementFor(Account account) {\r\n        Agreement agreement = Agreement.builder()\r\n                .id(UUID.randomUUID())\r\n                .build();\r\n        Credit credit = generateRandomCreditFor(agreement, account);\r\n        agreement.setCredit(credit);\r\n        account.setCredit(credit);\r\n        return agreement;\r\n    }\r\n\r\n    @Override\r\n    public PaymentSchedule generateRandomPaymentScheduleFor(Account account) {\r\n        PaymentSchedule paymentSchedule = PaymentSchedule.builder()\r\n                .id(UUID.randomUUID())\r\n                .account(account)\r\n                .build();\r\n        account.setPaymentSchedules(new ArrayList&lt;&gt;(List.of(paymentSchedule)));\r\n        return paymentSchedule;\r\n    }\r\n\r\n    @Override\r\n    public Credit generateRandomCreditFor(Agreement agreement, Account account) {\r\n        Credit credit = Credit.builder()\r\n                .id(UUID.randomUUID())\r\n                .account(account)\r\n                .agreement(agreement)\r\n                .build();\r\n        agreement.setCredit(credit);\r\n        account.setCredit(credit);\r\n        return credit;\r\n    }\r\n\r\n    @Override\r\n    public CreditOrder generateRandomCreditOrder() {\r\n        return CreditOrder.builder()\r\n                .id(UUID.randomUUID())\r\n                .product(generateRandomProduct())\r\n                .build();\r\n    }\r\n\r\n    @Override\r\n    public Product generateRandomProduct() {\r\n        return Product.builder()\r\n                .id(new Random().nextInt(100))\r\n                .build();\r\n    }\r\n}\r\n```\r\nThe simplified graph:\r\n```java\r\n/* I&#39;ll include these class annotations only for \r\nthe first entity to keep it short */\r\n\r\n@Entity\r\n@Table(name = &quot;card&quot;)\r\n@Getter\r\n@Setter(AccessLevel.PUBLIC)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Card {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name = &quot;id&quot;)\r\n    private UUID id;\r\n\r\n    @ManyToOne(cascade = CascadeType.MERGE)\r\n    @JoinColumn(name = &quot;account_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private Account account;\r\n}\r\n```\r\n```java\r\npublic class Account {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name = &quot;id&quot;)\r\n    private UUID id;\r\n\r\n    @OneToOne(cascade = CascadeType.MERGE)\r\n    @JoinColumn(name = &quot;credit_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private Credit credit;\r\n\r\n    @OneToMany(mappedBy = &quot;account&quot;)\r\n    private List&lt;Card&gt; cards;\r\n\r\n    @OneToMany(mappedBy = &quot;account&quot;)\r\n    private List&lt;PaymentSchedule&gt; paymentSchedules;\r\n}\r\n```\r\n```java\r\npublic class PaymentSchedule {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name = &quot;id&quot;)\r\n    private UUID id;\r\n\r\n    @ManyToOne(cascade = CascadeType.MERGE)\r\n    @JoinColumn(name = &quot;account_id&quot;)\r\n    private Account account;\r\n}\r\n```\r\n```java\r\npublic class Credit {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name = &quot;id&quot;)\r\n    private UUID id;\r\n\r\n    @OneToOne(mappedBy = &quot;credit&quot;)\r\n    private Account account;\r\n\r\n    @OneToOne(mappedBy = &quot;credit&quot;)\r\n    private Agreement agreement;\r\n\r\n    @OneToOne\r\n    @JoinColumn(name = &quot;order_id&quot;)\r\n    private CreditOrder creditOrder;\r\n}\r\n```\r\n```java\r\npublic class Agreement {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name = &quot;id&quot;)\r\n    private UUID id;\r\n\r\n    @OneToOne(cascade = CascadeType.MERGE)\r\n    @JoinColumn(name = &quot;credit_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private Credit credit;\r\n}\r\n```\r\n```java\r\npublic class CreditOrder {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name = &quot;id&quot;)\r\n    private UUID id;\r\n\r\n    @ManyToOne(cascade = {CascadeType.MERGE, CascadeType.PERSIST})\r\n    @JoinColumn(name = &quot;product_id&quot;)\r\n    private Product product;\r\n}\r\n```\r\n```java\r\npublic class Product implements Serializable { // I have no idea why it implements Serializable\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name = &quot;id&quot;)\r\n    private Integer id;\r\n    \r\n    // it doesn&#39;t have any association fields\r\n}\r\n```\r\nSo let&#39;s get to my `Persister` implementation. My priorities were:\r\n1. I want to persist a whole graph by any graph node (hence it&#39;s generic)\r\n2. I want my API to be tolerant to whether cascade configuration is properly set up (as in `@ManyToOne(cascade = ...`)\r\n\r\nI warn you, it&#39;s not very readable. The general idea is &quot;deeply&quot; counting foreign keys (foreign keys of entities referenced by foreign keys are counted too), prioritizing entities for persistence (those that have more keys have lower priority, persisted later), then finding a `Repository` and a method, and then invoking it on each entity. Consider the code below a draft. It doesn&#39;t work yet:\r\n```java\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class BasicPersister implements Persister {\r\n    private final List&lt;Repository&lt;?, ?&gt;&gt; repositories;\r\n    private final Map&lt;Object, Integer&gt; foreignKeyMap = new HashMap&lt;&gt;();\r\n    private final List&lt;Object&gt; processedObjects = new ArrayList&lt;&gt;();\r\n\r\n    @Override\r\n    public &lt;T&gt; void persistGraph(T graphNode) {\r\n        if (graphNode == null) {\r\n            return;\r\n        }\r\n        TreeSet&lt;Object&gt; sortedEntities = sortGraphNodes(graphNode);\r\n        persistInOrder(sortedEntities);\r\n    }\r\n\r\n    private TreeSet&lt;Object&gt; sortGraphNodes(Object graphNode) {\r\n        countForeignKeys(graphNode);\r\n        TreeSet&lt;Object&gt; set = new TreeSet&lt;&gt;(Comparator.comparingInt(foreignKeyMap::get));\r\n        set.addAll(foreignKeyMap.keySet());\r\n        return set;\r\n    }\r\n\r\n    private void countForeignKeys(Object graphNode) {\r\n        if (processedObjects.contains(graphNode)) {\r\n            return;\r\n        }\r\n        int foreignKeyCount = 0;\r\n        List&lt;Field&gt; relationshipFields = new ArrayList&lt;&gt;();\r\n        for (Field field : graphNode.getClass().getDeclaredFields()) {\r\n            if (hasRelationshipAnnotation(field)) {\r\n                relationshipFields.add(field);\r\n            }\r\n        }\r\n        processedObjects.add(graphNode);\r\n        for (Field relationshipField : relationshipFields) {\r\n            relationshipField.setAccessible(true);\r\n            Object fieldValue = ReflectionUtils.getField(relationshipField, graphNode);\r\n            if (fieldValue != null) {\r\n                if (!(fieldValue instanceof Collection)) {\r\n                    countForeignKeys(fieldValue);\r\n                    if (relationshipField.getAnnotation(JoinColumn.class) != null) {\r\n                        foreignKeyCount = 1 + foreignKeyMap.get(fieldValue);\r\n                    }\r\n                } else if (!((Collection&lt;?&gt;) fieldValue).isEmpty()) {\r\n                    ((Collection&lt;?&gt;) fieldValue).forEach(this::countForeignKeys);\r\n                    if (relationshipField.getAnnotation(JoinColumn.class) != null) {\r\n                        foreignKeyCount = 1 + foreignKeyMap.get(\r\n                                ((Collection&lt;?&gt;) fieldValue).stream().findAny().orElseThrow()\r\n                        );\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        foreignKeyMap.put(graphNode, foreignKeyCount);\r\n    }\r\n\r\n    private boolean hasRelationshipAnnotation(Field field) {\r\n        List&lt;Class&lt;? extends Annotation&gt;&gt; relationshipAnnotations = List.of(\r\n                OneToOne.class, OneToMany.class, ManyToOne.class, ManyToMany.class\r\n        );\r\n        return Arrays.stream(field.getAnnotations())\r\n                .map(Annotation::annotationType)\r\n                .anyMatch(relationshipAnnotations::contains);\r\n    }\r\n\r\n    private void persistInOrder(TreeSet&lt;Object&gt; sortedEntities) {\r\n        for (Object entity : sortedEntities) {\r\n            Repository&lt;?, ?&gt; matchingRepository = null;\r\n            for (Repository&lt;?, ?&gt; repository : repositories) {\r\n                String repositoryName = repository.getClass().getInterfaces()[0].getName();\r\n                if (isMatchingRepository(repository, entity)) {\r\n                    matchingRepository = repository;\r\n                    break;\r\n                }\r\n            }\r\n            assert matchingRepository != null;\r\n            Method matchingSaveMethod = ReflectionUtils.findMethod(matchingRepository.getClass(), &quot;save&quot;, Object.class);\r\n            assert matchingSaveMethod != null;\r\n            Object invocationResult = null;\r\n            try { // it fails here\r\n                invocationResult = ReflectionUtils.invokeMethod(matchingSaveMethod, matchingRepository, entity);\r\n            } catch (Exception ignored) {\r\n                System.out.println(); // dummy statement to stop a debugger and analyze the exception\r\n            }\r\n            assert invocationResult != null;\r\n            List&lt;Field&gt; idFields = findIdFields(invocationResult);\r\n            for (Field idField : idFields) {\r\n                idField.setAccessible(true);\r\n                Object newIdValue = ReflectionUtils.getField(idField, invocationResult);\r\n                ReflectionUtils.setField(idField, entity, newIdValue);\r\n            }\r\n        }\r\n    }\r\n\r\n    private boolean isMatchingRepository(Repository&lt;?, ?&gt; repository, Object entity) {\r\n        return AbstractRepositoryMetadata.getMetadata(repository.getClass().getInterfaces()[0])\r\n                .getDomainType()\r\n                .equals(entity.getClass());\r\n    }\r\n\r\n    private List&lt;Field&gt; findIdFields(Object entity) {\r\n        return Arrays.stream(entity.getClass().getDeclaredFields())\r\n                .filter(field -&gt; field.getAnnotation(Id.class) != null)\r\n                .collect(Collectors.toList());\r\n    }\r\n}\r\n```\r\nCan I get this monstrosity work? How?\r\n\r\n","link":"https://stackoverflow.com/questions/77555439/can-i-ever-get-my-persister-work-its-intended-to-persist-a-graph-by-a-graph-n","title":"Can I ever get my Persister work? (it&#39;s intended to persist a graph by a graph node)","body":"<p><code>@Sql</code> scripts are error-prone and not OOP. I want my tests to be rid of them. This would be perfect:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@DataJpaTest\n@ActiveProfiles(&quot;test&quot;)\n@Import(value = BasicPersister.class)\nclass CardRepositoryTest {\n    @Autowired\n    private CardRepository cardRepository;\n    private FieldInspector fieldInspector;\n    private DataGenerator dataGenerator;\n    @Autowired\n    private Persister persister;\n    private Card expectedCard;\n\n    @BeforeEach\n    void setUp() {\n        dataGenerator = new BasicDataGenerator();\n        expectedCard = dataGenerator.generateRandomCard();\n        persister.persistGraph(expectedCard);\n    }\n\n    @Test\n    void testSomething() {\n    // it's an MRE, let leave it like that for now\n    }\n}\n</code></pre>\n<p><code>DataGenerator</code> implementation is out of scope of this question. The general idea is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BasicDataGenerator implements DataGenerator {\n    private static final Faker faker = new Faker();\n    @Override\n    public Card generateRandomCard() {\n        Card card = Card.builder()\n                .id(UUID.randomUUID())\n                .cardNumber(getRandomLongAsString())\n                .holderName(faker.name().fullName())\n                .expirationDate(getRandomFutureLocalDate())\n                .paymentSystem(getRandomEnumConstant(PaymentSystem.class))\n                .cardBalance(getRandomBigDecimal())\n                .cardStatus(getRandomEnumConstant(CardStatus.class))\n                .transactionLimit(getRandomBigDecimal())\n                .deliveryPoint(faker.address().fullAddress())\n                .isDigitalWallet(getRandomBoolean())\n                .isVirtual(getRandomBoolean())\n                .coBrand(faker.company().name())\n                .cardAlias(faker.funnyName().name())\n                .build();\n        Account account = generateRandomAccountFor(card);\n        card.setAccount(account);\n        return card;\n    }\n\n// ...\n</code></pre>\n<p>Let's make it simpler and also simplify the graph. Simplified <code>DataGenerator</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SimplifiedDataGenerator implements DataGenerator {\n\n    @Override\n    public Card generateRandomCard() {\n        Card card = Card.builder()\n                .id(UUID.randomUUID())\n                .build();\n        Account account = generateRandomAccountFor(card);\n        card.setAccount(account);\n        return card;\n    }\n\n    @Override\n    public Account generateRandomAccountFor(Card card) {\n        Account account = Account.builder()\n                .id(UUID.randomUUID())\n                .cards(List.of(card))\n                .build();\n        PaymentSchedule paymentSchedule = generateRandomPaymentScheduleFor(account);\n        Agreement agreement = generateRandomAgreementFor(account);\n        Credit credit = generateRandomCreditFor(agreement, account);\n        account.setPaymentSchedules(List.of(paymentSchedule));\n        account.setCredit(credit);\n        card.setAccount(account);\n        return account;\n    }\n\n    @Override\n    public Agreement generateRandomAgreementFor(Account account) {\n        Agreement agreement = Agreement.builder()\n                .id(UUID.randomUUID())\n                .build();\n        Credit credit = generateRandomCreditFor(agreement, account);\n        agreement.setCredit(credit);\n        account.setCredit(credit);\n        return agreement;\n    }\n\n    @Override\n    public PaymentSchedule generateRandomPaymentScheduleFor(Account account) {\n        PaymentSchedule paymentSchedule = PaymentSchedule.builder()\n                .id(UUID.randomUUID())\n                .account(account)\n                .build();\n        account.setPaymentSchedules(new ArrayList&lt;&gt;(List.of(paymentSchedule)));\n        return paymentSchedule;\n    }\n\n    @Override\n    public Credit generateRandomCreditFor(Agreement agreement, Account account) {\n        Credit credit = Credit.builder()\n                .id(UUID.randomUUID())\n                .account(account)\n                .agreement(agreement)\n                .build();\n        agreement.setCredit(credit);\n        account.setCredit(credit);\n        return credit;\n    }\n\n    @Override\n    public CreditOrder generateRandomCreditOrder() {\n        return CreditOrder.builder()\n                .id(UUID.randomUUID())\n                .product(generateRandomProduct())\n                .build();\n    }\n\n    @Override\n    public Product generateRandomProduct() {\n        return Product.builder()\n                .id(new Random().nextInt(100))\n                .build();\n    }\n}\n</code></pre>\n<p>The simplified graph:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/* I'll include these class annotations only for \nthe first entity to keep it short */\n\n@Entity\n@Table(name = &quot;card&quot;)\n@Getter\n@Setter(AccessLevel.PUBLIC)\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Card {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;)\n    private UUID id;\n\n    @ManyToOne(cascade = CascadeType.MERGE)\n    @JoinColumn(name = &quot;account_id&quot;, referencedColumnName = &quot;id&quot;)\n    private Account account;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Account {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;)\n    private UUID id;\n\n    @OneToOne(cascade = CascadeType.MERGE)\n    @JoinColumn(name = &quot;credit_id&quot;, referencedColumnName = &quot;id&quot;)\n    private Credit credit;\n\n    @OneToMany(mappedBy = &quot;account&quot;)\n    private List&lt;Card&gt; cards;\n\n    @OneToMany(mappedBy = &quot;account&quot;)\n    private List&lt;PaymentSchedule&gt; paymentSchedules;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class PaymentSchedule {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;)\n    private UUID id;\n\n    @ManyToOne(cascade = CascadeType.MERGE)\n    @JoinColumn(name = &quot;account_id&quot;)\n    private Account account;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Credit {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;)\n    private UUID id;\n\n    @OneToOne(mappedBy = &quot;credit&quot;)\n    private Account account;\n\n    @OneToOne(mappedBy = &quot;credit&quot;)\n    private Agreement agreement;\n\n    @OneToOne\n    @JoinColumn(name = &quot;order_id&quot;)\n    private CreditOrder creditOrder;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Agreement {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;)\n    private UUID id;\n\n    @OneToOne(cascade = CascadeType.MERGE)\n    @JoinColumn(name = &quot;credit_id&quot;, referencedColumnName = &quot;id&quot;)\n    private Credit credit;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class CreditOrder {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;)\n    private UUID id;\n\n    @ManyToOne(cascade = {CascadeType.MERGE, CascadeType.PERSIST})\n    @JoinColumn(name = &quot;product_id&quot;)\n    private Product product;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Product implements Serializable { // I have no idea why it implements Serializable\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;)\n    private Integer id;\n    \n    // it doesn't have any association fields\n}\n</code></pre>\n<p>So let's get to my <code>Persister</code> implementation. My priorities were:</p>\n<ol>\n<li>I want to persist a whole graph by any graph node (hence it's generic)</li>\n<li>I want my API to be tolerant to whether cascade configuration is properly set up (as in <code>@ManyToOne(cascade = ...</code>)</li>\n</ol>\n<p>I warn you, it's not very readable. The general idea is &quot;deeply&quot; counting foreign keys (foreign keys of entities referenced by foreign keys are counted too), prioritizing entities for persistence (those that have more keys have lower priority, persisted later), then finding a <code>Repository</code> and a method, and then invoking it on each entity. Consider the code below a draft. It doesn't work yet:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@RequiredArgsConstructor\npublic class BasicPersister implements Persister {\n    private final List&lt;Repository&lt;?, ?&gt;&gt; repositories;\n    private final Map&lt;Object, Integer&gt; foreignKeyMap = new HashMap&lt;&gt;();\n    private final List&lt;Object&gt; processedObjects = new ArrayList&lt;&gt;();\n\n    @Override\n    public &lt;T&gt; void persistGraph(T graphNode) {\n        if (graphNode == null) {\n            return;\n        }\n        TreeSet&lt;Object&gt; sortedEntities = sortGraphNodes(graphNode);\n        persistInOrder(sortedEntities);\n    }\n\n    private TreeSet&lt;Object&gt; sortGraphNodes(Object graphNode) {\n        countForeignKeys(graphNode);\n        TreeSet&lt;Object&gt; set = new TreeSet&lt;&gt;(Comparator.comparingInt(foreignKeyMap::get));\n        set.addAll(foreignKeyMap.keySet());\n        return set;\n    }\n\n    private void countForeignKeys(Object graphNode) {\n        if (processedObjects.contains(graphNode)) {\n            return;\n        }\n        int foreignKeyCount = 0;\n        List&lt;Field&gt; relationshipFields = new ArrayList&lt;&gt;();\n        for (Field field : graphNode.getClass().getDeclaredFields()) {\n            if (hasRelationshipAnnotation(field)) {\n                relationshipFields.add(field);\n            }\n        }\n        processedObjects.add(graphNode);\n        for (Field relationshipField : relationshipFields) {\n            relationshipField.setAccessible(true);\n            Object fieldValue = ReflectionUtils.getField(relationshipField, graphNode);\n            if (fieldValue != null) {\n                if (!(fieldValue instanceof Collection)) {\n                    countForeignKeys(fieldValue);\n                    if (relationshipField.getAnnotation(JoinColumn.class) != null) {\n                        foreignKeyCount = 1 + foreignKeyMap.get(fieldValue);\n                    }\n                } else if (!((Collection&lt;?&gt;) fieldValue).isEmpty()) {\n                    ((Collection&lt;?&gt;) fieldValue).forEach(this::countForeignKeys);\n                    if (relationshipField.getAnnotation(JoinColumn.class) != null) {\n                        foreignKeyCount = 1 + foreignKeyMap.get(\n                                ((Collection&lt;?&gt;) fieldValue).stream().findAny().orElseThrow()\n                        );\n                    }\n                }\n            }\n        }\n        foreignKeyMap.put(graphNode, foreignKeyCount);\n    }\n\n    private boolean hasRelationshipAnnotation(Field field) {\n        List&lt;Class&lt;? extends Annotation&gt;&gt; relationshipAnnotations = List.of(\n                OneToOne.class, OneToMany.class, ManyToOne.class, ManyToMany.class\n        );\n        return Arrays.stream(field.getAnnotations())\n                .map(Annotation::annotationType)\n                .anyMatch(relationshipAnnotations::contains);\n    }\n\n    private void persistInOrder(TreeSet&lt;Object&gt; sortedEntities) {\n        for (Object entity : sortedEntities) {\n            Repository&lt;?, ?&gt; matchingRepository = null;\n            for (Repository&lt;?, ?&gt; repository : repositories) {\n                String repositoryName = repository.getClass().getInterfaces()[0].getName();\n                if (isMatchingRepository(repository, entity)) {\n                    matchingRepository = repository;\n                    break;\n                }\n            }\n            assert matchingRepository != null;\n            Method matchingSaveMethod = ReflectionUtils.findMethod(matchingRepository.getClass(), &quot;save&quot;, Object.class);\n            assert matchingSaveMethod != null;\n            Object invocationResult = null;\n            try { // it fails here\n                invocationResult = ReflectionUtils.invokeMethod(matchingSaveMethod, matchingRepository, entity);\n            } catch (Exception ignored) {\n                System.out.println(); // dummy statement to stop a debugger and analyze the exception\n            }\n            assert invocationResult != null;\n            List&lt;Field&gt; idFields = findIdFields(invocationResult);\n            for (Field idField : idFields) {\n                idField.setAccessible(true);\n                Object newIdValue = ReflectionUtils.getField(idField, invocationResult);\n                ReflectionUtils.setField(idField, entity, newIdValue);\n            }\n        }\n    }\n\n    private boolean isMatchingRepository(Repository&lt;?, ?&gt; repository, Object entity) {\n        return AbstractRepositoryMetadata.getMetadata(repository.getClass().getInterfaces()[0])\n                .getDomainType()\n                .equals(entity.getClass());\n    }\n\n    private List&lt;Field&gt; findIdFields(Object entity) {\n        return Arrays.stream(entity.getClass().getDeclaredFields())\n                .filter(field -&gt; field.getAnnotation(Id.class) != null)\n                .collect(Collectors.toList());\n    }\n}\n</code></pre>\n<p>Can I get this monstrosity work? How?</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa","jpql"],"answers":[{"comments":[{"score":1,"post_type":"answer","creation_date":1701085197,"post_id":77553686,"comment_id":136727052,"body_markdown":"Thank you for your answer! It helped me, but instead of using &#39;=&#39; I needed to use &#39;IN&#39;, otherwise there was an exception, the final query looks like this `DELETE FROM Employee e WHERE e.department.id IN (SELECT d.id from Department d where d.companyBranch.id = :companyBranchId)`","link":"https://stackoverflow.com/questions/77553610/exception-when-i-am-trying-to-execute-delete-query/77553686#comment136727052_77553686","body":"Thank you for your answer! It helped me, but instead of using &#39;=&#39; I needed to use &#39;IN&#39;, otherwise there was an exception, the final query looks like this <code>DELETE FROM Employee e WHERE e.department.id IN (SELECT d.id from Department d where d.companyBranch.id = :companyBranchId)</code>"},{"score":0,"post_type":"answer","creation_date":1701085597,"post_id":77553686,"comment_id":136727112,"body_markdown":"I was a bit afraid of that point, I&#39;ll edit my answer to fit the final query :)","link":"https://stackoverflow.com/questions/77553610/exception-when-i-am-trying-to-execute-delete-query/77553686#comment136727112_77553686","body":"I was a bit afraid of that point, I&#39;ll edit my answer to fit the final query :)"}],"comment_count":2,"score":2,"last_activity_date":1701085609,"last_edit_date":1701085609,"creation_date":1701037051,"answer_id":77553686,"question_id":77553610,"body_markdown":"I&#39;m not sure you can use this level of nested queries.\r\n\r\nI&#39;d try to go with something like :\r\n```java\r\n@Query(value = &quot;DELETE FROM Employee e WHERE e.department.id IN (SELECT d.id from Departement d where d.companyBranch.id = :companyBranchId&quot;))\r\n```\r\n\r\nThat&#39;s the kind of query you would normally do in plain sql.\r\n","link":"https://stackoverflow.com/questions/77553610/exception-when-i-am-trying-to-execute-delete-query/77553686#77553686","title":"Exception when i am trying to execute delete @Query","body":"<p>I'm not sure you can use this level of nested queries.</p>\n<p>I'd try to go with something like :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(value = &quot;DELETE FROM Employee e WHERE e.department.id IN (SELECT d.id from Departement d where d.companyBranch.id = :companyBranchId&quot;))\n</code></pre>\n<p>That's the kind of query you would normally do in plain sql.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":34,"answer_count":1,"score":0,"last_activity_date":1701085609,"creation_date":1701035320,"question_id":77553610,"body_markdown":"I am trying to execute this @Query in my EmployeeRepository class\r\n\r\n        @Modifying\r\n        @Query(value = &quot;DELETE FROM Employee e WHERE e.department.companyBranch.id = :companyBranchId&quot;)\r\n        void deleteAllByCompanyBranchId(@Param(&quot;companyBranchId&quot;) Long companyBranchId);\r\n\r\nBut I am getting this exception\r\n\r\n    Column &quot;D1_0.COMPANY_BRANCH_ID&quot; not found; SQL statement:\r\n    delete from employee where d1_0.company_branch_id=? [42122-214]] [delete from employee where d1_0.company_branch_id=?]; SQL [delete from employee where d1_0.company_branch_id=?]] with root cause\r\n    \r\n    org.h2.jdbc.JdbcSQLSyntaxErrorException: Столбец &quot;D1_0.COMPANY_BRANCH_ID&quot; не найден\r\n    Column &quot;D1_0.COMPANY_BRANCH_ID&quot; not found; SQL statement:\r\n    delete from employee where d1_0.company_branch_id=? [42122-214]\r\n\r\nI think it is somehow connected to JPQL conventions, but I am not sure. By looking at my exception I can say that the query is trying to find the `COMPANY_BRANCH_ID` field in `EMPLOYEE` table, but I am not sure about it.\r\n\r\nThis is my entity classes:\r\n\r\nEmployee:\r\n\r\n    @Entity\r\n    @Table(name = &quot;EMPLOYEE&quot;)\r\n    @Getter\r\n    @Setter\r\n    public class Employee {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;DEPARTMENT_ID&quot;, nullable = false)\r\n        private Department department;\r\n    }\r\n\r\nDepartment\r\n\r\n    @Entity\r\n    @Table(name = &quot;DEPARTMENT&quot;)\r\n    @Getter\r\n    @Setter\r\n    public class Department {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;COMPANY_BRANCH_ID&quot;, nullable = false)\r\n        private CompanyBranch companyBranch;\r\n    }\r\n\r\nCompanyBranch\r\n\r\n    @Entity\r\n    @Table(name = &quot;COMPANY_BRANCH&quot;)\r\n    @Getter\r\n    @Setter\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class CompanyBranch {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    }\r\n\r\n","link":"https://stackoverflow.com/questions/77553610/exception-when-i-am-trying-to-execute-delete-query","title":"Exception when i am trying to execute delete @Query","body":"<p>I am trying to execute this @Query in my EmployeeRepository class</p>\n<pre><code>    @Modifying\n    @Query(value = &quot;DELETE FROM Employee e WHERE e.department.companyBranch.id = :companyBranchId&quot;)\n    void deleteAllByCompanyBranchId(@Param(&quot;companyBranchId&quot;) Long companyBranchId);\n</code></pre>\n<p>But I am getting this exception</p>\n<pre><code>Column &quot;D1_0.COMPANY_BRANCH_ID&quot; not found; SQL statement:\ndelete from employee where d1_0.company_branch_id=? [42122-214]] [delete from employee where d1_0.company_branch_id=?]; SQL [delete from employee where d1_0.company_branch_id=?]] with root cause\n\norg.h2.jdbc.JdbcSQLSyntaxErrorException: Столбец &quot;D1_0.COMPANY_BRANCH_ID&quot; не найден\nColumn &quot;D1_0.COMPANY_BRANCH_ID&quot; not found; SQL statement:\ndelete from employee where d1_0.company_branch_id=? [42122-214]\n</code></pre>\n<p>I think it is somehow connected to JPQL conventions, but I am not sure. By looking at my exception I can say that the query is trying to find the <code>COMPANY_BRANCH_ID</code> field in <code>EMPLOYEE</code> table, but I am not sure about it.</p>\n<p>This is my entity classes:</p>\n<p>Employee:</p>\n<pre><code>@Entity\n@Table(name = &quot;EMPLOYEE&quot;)\n@Getter\n@Setter\npublic class Employee {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;DEPARTMENT_ID&quot;, nullable = false)\n    private Department department;\n}\n</code></pre>\n<p>Department</p>\n<pre><code>@Entity\n@Table(name = &quot;DEPARTMENT&quot;)\n@Getter\n@Setter\npublic class Department {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;COMPANY_BRANCH_ID&quot;, nullable = false)\n    private CompanyBranch companyBranch;\n}\n</code></pre>\n<p>CompanyBranch</p>\n<pre><code>@Entity\n@Table(name = &quot;COMPANY_BRANCH&quot;)\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class CompanyBranch {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n}\n</code></pre>\n"},{"tags":["java","numeric","exp"],"comments":[{"score":5,"post_type":"question","creation_date":1701074623,"post_id":77555495,"comment_id":136725248,"body_markdown":"Which Java version did you use? Since Java 17 the strict behaviour is the standard behaviour, and `Math` and `StrictMath` do exactly the same since Java 17 (`Math` calls the equivalent function in `StrictMath`). Though `Math.exp` may be intrinsified, which can cloud that assessment","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp#comment136725248_77555495","body":"Which Java version did you use? Since Java 17 the strict behaviour is the standard behaviour, and <code>Math</code> and <code>StrictMath</code> do exactly the same since Java 17 (<code>Math</code> calls the equivalent function in <code>StrictMath</code>). Though <code>Math.exp</code> may be intrinsified, which can cloud that assessment"},{"score":0,"post_type":"question","creation_date":1701080314,"post_id":77555495,"comment_id":136726284,"body_markdown":"I think the interfaces and the javadocs have not changed in the past Java versions. It is also not a problem that Math.exp can be intrinsified, as its error is explicitly stated in the interface. I am also not sure if really all Java implementations delegate to StrictMath. However, if they do, the StrictMath implementation must of course provide the same error guarantee.","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp#comment136726284_77555495","body":"I think the interfaces and the javadocs have not changed in the past Java versions. It is also not a problem that Math.exp can be intrinsified, as its error is explicitly stated in the interface. I am also not sure if really all Java implementations delegate to StrictMath. However, if they do, the StrictMath implementation must of course provide the same error guarantee."},{"score":1,"post_type":"question","creation_date":1701080414,"post_id":77555495,"comment_id":136726304,"body_markdown":"Again, since Java 17, there is only the strict behaviour. See [JEP 306: Restore Always-Strict Floating-Point Semantics](https://openjdk.org/jeps/306), as far as I&#39;m aware that also means that `Math` and `StrictMath` should now always produce the exact same result.","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp#comment136726304_77555495","body":"Again, since Java 17, there is only the strict behaviour. See <a href=\"https://openjdk.org/jeps/306\" rel=\"nofollow noreferrer\">JEP 306: Restore Always-Strict Floating-Point Semantics</a>, as far as I&#39;m aware that also means that <code>Math</code> and <code>StrictMath</code> should now always produce the exact same result."},{"score":0,"post_type":"question","creation_date":1701081021,"post_id":77555495,"comment_id":136726407,"body_markdown":"I am currently using Java 11. I know about the strict behavior of Java 17 which makes the strictfp keyword obsolete. However, I have not yet found anything that states the equivalence of Math and StrictMath.","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp#comment136726407_77555495","body":"I am currently using Java 11. I know about the strict behavior of Java 17 which makes the strictfp keyword obsolete. However, I have not yet found anything that states the equivalence of Math and StrictMath."},{"score":0,"post_type":"question","creation_date":1701100395,"post_id":77555495,"comment_id":136730147,"body_markdown":"As Stephen C pointed out below, there is no reason to assume that `Math` and `StrictMath` will give the same result in Java 17.","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp#comment136730147_77555495","body":"As Stephen C pointed out below, there is no reason to assume that <code>Math</code> and <code>StrictMath</code> will give the same result in Java 17."},{"score":0,"post_type":"question","creation_date":1701157831,"post_id":77555495,"comment_id":136737271,"body_markdown":"Given the implementation of `Math.exp` by default calls `StrictMath.exp`, I think it is safe to assume that it fulfills the requirements, otherwise `Math.exp` calling it would break its own contract.","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp#comment136737271_77555495","body":"Given the implementation of <code>Math.exp</code> by default calls <code>StrictMath.exp</code>, I think it is safe to assume that it fulfills the requirements, otherwise <code>Math.exp</code> calling it would break its own contract."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701084424,"post_id":77556405,"comment_id":136726935,"body_markdown":"The question was if the error guarantee is the same (1ulp) and not if the error is the same. I know that the results may be different. In my opinion, the specification is not entirely clear whether the 1ulp error also applies to StrictMath.exp.","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp/77556405#comment136726935_77556405","body":"The question was if the error guarantee is the same (1ulp) and not if the error is the same. I know that the results may be different. In my opinion, the specification is not entirely clear whether the 1ulp error also applies to StrictMath.exp."},{"score":0,"post_type":"answer","creation_date":1701085168,"post_id":77556405,"comment_id":136727048,"body_markdown":"1) I answered that in the first sentence of my answer.  In my opinion it is facially clear.  2) You said: *&quot;However, I have not yet found anything that states the **equivalence** of Math and StrictMath.&quot;*.","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp/77556405#comment136727048_77556405","body":"1) I answered that in the first sentence of my answer.  In my opinion it is facially clear.  2) You said: <i>&quot;However, I have not yet found anything that states the <b>equivalence</b> of Math and StrictMath.&quot;</i>."},{"score":0,"post_type":"answer","creation_date":1701090984,"post_id":77556405,"comment_id":136728084,"body_markdown":"If the fdlibm exp-function written in C guarantees an error of 1ulp, it is not obvious to me that the same algorithm implemented in Java &quot;with all floating-point operations following the rules of Java floating-point arithmetic&quot; also gives an error of 1ulp.","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp/77556405#comment136728084_77556405","body":"If the fdlibm exp-function written in C guarantees an error of 1ulp, it is not obvious to me that the same algorithm implemented in Java &quot;with all floating-point operations following the rules of Java floating-point arithmetic&quot; also gives an error of 1ulp."},{"score":0,"post_type":"answer","creation_date":1701094266,"post_id":77556405,"comment_id":136728697,"body_markdown":"The javadoc for `Math.exp` **specifies** that it does.   You quoted that text in your question!   Like I said, it is facially clear: on the face of the respective specifications.","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp/77556405#comment136728697_77556405","body":"The javadoc for <code>Math.exp</code> <b>specifies</b> that it does.   You quoted that text in your question!   Like I said, it is facially clear: on the face of the respective specifications."},{"score":0,"post_type":"answer","creation_date":1701095325,"post_id":77556405,"comment_id":136728927,"body_markdown":"Unfortunately, the javadoc for `StrictMath.exp` does not.","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp/77556405#comment136728927_77556405","body":"Unfortunately, the javadoc for <code>StrictMath.exp</code> does not."},{"score":0,"post_type":"answer","creation_date":1701098028,"post_id":77556405,"comment_id":136729555,"body_markdown":"But ... as your OTHER quoted text points out, the spec for fdlibm version 5.4 **does**.   All the information is in the text of your question.","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp/77556405#comment136729555_77556405","body":"But ... as your OTHER quoted text points out, the spec for fdlibm version 5.4 <b>does</b>.   All the information is in the text of your question."},{"score":0,"post_type":"answer","creation_date":1701099898,"post_id":77556405,"comment_id":136730034,"body_markdown":"Repeating my comment above, I am not sure if the same error guarantee also applies to a Java port of the fdlibm algorithm, as the &quot;Java floating-point-arithmetic&quot; is not necessarily equivalent to that of C. In my opinion, this is missing in the argumentation or at least not obvious.","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp/77556405#comment136730034_77556405","body":"Repeating my comment above, I am not sure if the same error guarantee also applies to a Java port of the fdlibm algorithm, as the &quot;Java floating-point-arithmetic&quot; is not necessarily equivalent to that of C. In my opinion, this is missing in the argumentation or at least not obvious."},{"score":2,"post_type":"answer","creation_date":1701101245,"post_id":77556405,"comment_id":136730345,"body_markdown":"Nah.  1)  The text you quoted say clearly that the purpose of `StrictMath` is to behave like `fdlibm` version 5.4.  If it differs in the slightest detail, it does not meet those requirements ... and you run into the kind of computational inconsistencies that `fdlibm` and `StrictMath` are designed to avoid.  2) Indeed in Java 8 and earlier, `StrictMath.exp()` is a `native` method call to the `fdlibm` implementation.  (Via a shim that deals with exceptions, etctera ... if I recollect correctly.)  Check the source code.","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp/77556405#comment136730345_77556405","body":"Nah.  1)  The text you quoted say clearly that the purpose of <code>StrictMath</code> is to behave like <code>fdlibm</code> version 5.4.  If it differs in the slightest detail, it does not meet those requirements ... and you run into the kind of computational inconsistencies that <code>fdlibm</code> and <code>StrictMath</code> are designed to avoid.  2) Indeed in Java 8 and earlier, <code>StrictMath.exp()</code> is a <code>native</code> method call to the <code>fdlibm</code> implementation.  (Via a shim that deals with exceptions, etctera ... if I recollect correctly.)  Check the source code."}],"comment_count":8,"score":1,"last_activity_date":1701085585,"last_edit_date":1701085585,"creation_date":1701083144,"answer_id":77556405,"question_id":77555495,"body_markdown":"&gt; Does the combination of all this information really imply that `StrictMath.exp` has the same error guarantee as `Math.exp`?\r\n\r\nOn the face of it&lt;sup&gt;1&lt;/sup&gt;, the error guarantee is the same; i.e. it is less than 1 ulp.  But that isn&#39;t the same as saying that the error is the same!\r\n\r\nThe point of using `StrictMath` was not to guarantee that the error was the absolute minimum possible.  Rather, the point was to guarantee *reproducible* results, independent of programming language, hardware implementation and so on.\r\n\r\nAnd the flip-side is that the `Math` methods are (still&lt;sup&gt;2&lt;/sup&gt;) not specified to produce bit-for-bit identical results to their `StrictMath` equivalents.  As the [javadoc][1] in Java 17 states:\r\n\r\n&gt; *&quot;Unlike some of the numeric methods of class `StrictMath`, all implementations of the equivalent functions of class `Math` are not defined to return the bit-for-bit same results. This relaxation permits better-performing implementations **where strict reproducibility is not required**.&quot;* \r\n\r\n---------------------\r\n\r\n&gt; However, I have not yet found anything that states the equivalence of `Math` and `StrictMath`.\r\n\r\nI don&#39;t think they are guaranteed to be equivalent: not in any version of Java.  Indeed, that would *contradict* the above javadoc quote. \r\n\r\n---------------------\r\n\r\n&lt;sup&gt;1 - This is based on the text that you quoted in your question.&lt;br&gt;\r\n2 - While all floating point arithmetic operations in Java 17 and later have `strictfp` semantics (see [JEP 306][2]), this doesn&#39;t automatically extend to `Math`.&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html\r\n  [2]: https://openjdk.org/jeps/306","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp/77556405#77556405","title":"Does the same error guarantee of Java&#39;s Math.exp also apply to StrictMath.exp?","body":"<blockquote>\n<p>Does the combination of all this information really imply that <code>StrictMath.exp</code> has the same error guarantee as <code>Math.exp</code>?</p>\n</blockquote>\n<p>On the face of it<sup>1</sup>, the error guarantee is the same; i.e. it is less than 1 ulp.  But that isn't the same as saying that the error is the same!</p>\n<p>The point of using <code>StrictMath</code> was not to guarantee that the error was the absolute minimum possible.  Rather, the point was to guarantee <em>reproducible</em> results, independent of programming language, hardware implementation and so on.</p>\n<p>And the flip-side is that the <code>Math</code> methods are (still<sup>2</sup>) not specified to produce bit-for-bit identical results to their <code>StrictMath</code> equivalents.  As the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html\" rel=\"nofollow noreferrer\">javadoc</a> in Java 17 states:</p>\n<blockquote>\n<p><em>&quot;Unlike some of the numeric methods of class <code>StrictMath</code>, all implementations of the equivalent functions of class <code>Math</code> are not defined to return the bit-for-bit same results. This relaxation permits better-performing implementations <strong>where strict reproducibility is not required</strong>.&quot;</em></p>\n</blockquote>\n<hr />\n<blockquote>\n<p>However, I have not yet found anything that states the equivalence of <code>Math</code> and <code>StrictMath</code>.</p>\n</blockquote>\n<p>I don't think they are guaranteed to be equivalent: not in any version of Java.  Indeed, that would <em>contradict</em> the above javadoc quote.</p>\n<hr />\n<p><sup>1 - This is based on the text that you quoted in your question.<br>\n2 - While all floating point arithmetic operations in Java 17 and later have <code>strictfp</code> semantics (see <a href=\"https://openjdk.org/jeps/306\" rel=\"nofollow noreferrer\">JEP 306</a>), this doesn't automatically extend to <code>Math</code>.</sup></p>\n"}],"comment_count":6,"is_answered":true,"view_count":81,"answer_count":1,"score":1,"last_activity_date":1701085585,"creation_date":1701074294,"last_edit_date":1701084618,"question_id":77555495,"body_markdown":"In Java, I need to compute `(int)Math.exp(x)` in a platform independent way. To achieve platform independency, I have to use StrictMath instead: `(int)StrictMath.exp(x)`. Unfortunately, my measurements have shown that `StrictMath.exp` is significantly slower than `Math.exp`.\r\n\r\nTherefore, I had the idea to compute `y = Math.exp(x)` first. [The interface of `Math.exp`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html#exp(double)) states that\r\n\r\n&gt; The computed result must be within 1 ulp of the exact result. Results must be semi-monotonic.\r\n\r\nSo, if `(int)(Math.nextDown(y)) == (int)(Math.nextUp(y))`, I can use `(int)y` as result. Only in the very rare case that `(int)(StrictMath.nextDown(y)) != (int)(StrictMath.nextUp(y))` (the result is expected to be in the `int` range), I need to additionally evaluate `(int)StrictMath.exp(x)`. \r\n\r\nThis strategy would be correct if `StrictMath.exp` had the same error guarantees as `Math.exp`.\r\nUnfortunately, a corresponding statement is missing in the [`StrictMath.exp` interface](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StrictMath.html#exp(double)). [The javadoc of StrictMath](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StrictMath.html) just says\r\n\r\n&gt; To help ensure portability of Java programs, the definitions of some of the numeric functions in this package require that they produce the same results as certain published algorithms. These algorithms are available from the well-known network library netlib as the package &quot;Freely Distributable Math Library,&quot; fdlibm. These algorithms, which are written in the C programming language, are then to be understood as executed with all floating-point operations following the rules of Java floating-point arithmetic.\r\n&gt;\r\n&gt; The Java math library is defined with respect to fdlibm version 5.3. Where fdlibm provides more than one definition for a function (such as acos), use the &quot;IEEE 754 core function&quot; version (residing in a file whose name begins with the letter e). The methods which require fdlibm semantics are sin, cos, tan, asin, acos, atan, exp, log, log10, cbrt, atan2, pow, sinh, cosh, tanh, hypot, expm1, and log1p.\r\n\r\nFurthermore, the interface of the [exp function in the fdlibm library](https://www.netlib.org/fdlibm/e_exp.c) says that \r\n\r\n&gt; Accuracy: according to an error analysis, the error is always less than 1 ulp (unit in the last place).\r\n\r\nDoes the combination of all this information really imply that `StrictMath.exp` has the same error guarantee as `Math.exp`? Only a 100% guarantee would allow me to do the optimization described above.","link":"https://stackoverflow.com/questions/77555495/does-the-same-error-guarantee-of-javas-math-exp-also-apply-to-strictmath-exp","title":"Does the same error guarantee of Java&#39;s Math.exp also apply to StrictMath.exp?","body":"<p>In Java, I need to compute <code>(int)Math.exp(x)</code> in a platform independent way. To achieve platform independency, I have to use StrictMath instead: <code>(int)StrictMath.exp(x)</code>. Unfortunately, my measurements have shown that <code>StrictMath.exp</code> is significantly slower than <code>Math.exp</code>.</p>\n<p>Therefore, I had the idea to compute <code>y = Math.exp(x)</code> first. <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html#exp(double)\" rel=\"nofollow noreferrer\">The interface of <code>Math.exp</code></a> states that</p>\n<blockquote>\n<p>The computed result must be within 1 ulp of the exact result. Results must be semi-monotonic.</p>\n</blockquote>\n<p>So, if <code>(int)(Math.nextDown(y)) == (int)(Math.nextUp(y))</code>, I can use <code>(int)y</code> as result. Only in the very rare case that <code>(int)(StrictMath.nextDown(y)) != (int)(StrictMath.nextUp(y))</code> (the result is expected to be in the <code>int</code> range), I need to additionally evaluate <code>(int)StrictMath.exp(x)</code>.</p>\n<p>This strategy would be correct if <code>StrictMath.exp</code> had the same error guarantees as <code>Math.exp</code>.\nUnfortunately, a corresponding statement is missing in the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StrictMath.html#exp(double)\" rel=\"nofollow noreferrer\"><code>StrictMath.exp</code> interface</a>. <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StrictMath.html\" rel=\"nofollow noreferrer\">The javadoc of StrictMath</a> just says</p>\n<blockquote>\n<p>To help ensure portability of Java programs, the definitions of some of the numeric functions in this package require that they produce the same results as certain published algorithms. These algorithms are available from the well-known network library netlib as the package &quot;Freely Distributable Math Library,&quot; fdlibm. These algorithms, which are written in the C programming language, are then to be understood as executed with all floating-point operations following the rules of Java floating-point arithmetic.</p>\n<p>The Java math library is defined with respect to fdlibm version 5.3. Where fdlibm provides more than one definition for a function (such as acos), use the &quot;IEEE 754 core function&quot; version (residing in a file whose name begins with the letter e). The methods which require fdlibm semantics are sin, cos, tan, asin, acos, atan, exp, log, log10, cbrt, atan2, pow, sinh, cosh, tanh, hypot, expm1, and log1p.</p>\n</blockquote>\n<p>Furthermore, the interface of the <a href=\"https://www.netlib.org/fdlibm/e_exp.c\" rel=\"nofollow noreferrer\">exp function in the fdlibm library</a> says that</p>\n<blockquote>\n<p>Accuracy: according to an error analysis, the error is always less than 1 ulp (unit in the last place).</p>\n</blockquote>\n<p>Does the combination of all this information really imply that <code>StrictMath.exp</code> has the same error guarantee as <code>Math.exp</code>? Only a 100% guarantee would allow me to do the optimization described above.</p>\n"},{"tags":["java","android","kotlin","android-recyclerview","z-index"],"comments":[{"score":0,"post_type":"question","creation_date":1701085422,"post_id":77556567,"comment_id":136727084,"body_markdown":"Is it actually added or is it simply made visible?","link":"https://stackoverflow.com/questions/77556567/previously-created-viewbutton-is-overlapping-the-newly-generated-viewrecycler#comment136727084_77556567","body":"Is it actually added or is it simply made visible?"},{"score":1,"post_type":"question","creation_date":1701085706,"post_id":77556567,"comment_id":136727129,"body_markdown":"Can you provide the code of your layout?","link":"https://stackoverflow.com/questions/77556567/previously-created-viewbutton-is-overlapping-the-newly-generated-viewrecycler#comment136727129_77556567","body":"Can you provide the code of your layout?"},{"score":0,"post_type":"question","creation_date":1701086726,"post_id":77556567,"comment_id":136727312,"body_markdown":"@Ivo It&#39;s actually added","link":"https://stackoverflow.com/questions/77556567/previously-created-viewbutton-is-overlapping-the-newly-generated-viewrecycler#comment136727312_77556567","body":"@Ivo It&#39;s actually added"},{"score":0,"post_type":"question","creation_date":1701086752,"post_id":77556567,"comment_id":136727316,"body_markdown":"@MikhailGuliaev sorry, due to some constraits, can&#39;t provide the code","link":"https://stackoverflow.com/questions/77556567/previously-created-viewbutton-is-overlapping-the-newly-generated-viewrecycler#comment136727316_77556567","body":"@MikhailGuliaev sorry, due to some constraits, can&#39;t provide the code"},{"score":1,"post_type":"question","creation_date":1701090394,"post_id":77556567,"comment_id":136727967,"body_markdown":"@Jatinguglani, Without XML code and knowing layout properties it&#39;s hard to tell what&#39;s the solution.","link":"https://stackoverflow.com/questions/77556567/previously-created-viewbutton-is-overlapping-the-newly-generated-viewrecycler#comment136727967_77556567","body":"@Jatinguglani, Without XML code and knowing layout properties it&#39;s hard to tell what&#39;s the solution."}],"comment_count":5,"is_answered":false,"view_count":61,"answer_count":0,"score":3,"last_activity_date":1701084879,"creation_date":1701084879,"question_id":77556567,"body_markdown":"I have programatically created the following layout using absolute positioning:-\r\n \r\n[![enter image description here][1]][1]\r\n\r\nWhen user enters 3 or more characters in the EditView (TextEdit: 107), a Selection List(RecyclerView) will appear below the Editview. \r\nBut the button is overlapping the RecyclerView as shown:-\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UVpKwl.png\r\n  [2]: https://i.stack.imgur.com/sHrvSl.png\r\n\r\nNow, According the my understanding if the position of views overlaps then they appears in in the order they have been generated i.e. added to the parent view. So acc. to that RecyclerView that&#39;s added to the RelativeLayout at last should have overlapped the button and the button should be hidden below it. but that&#39;s not happening, could someone explain the reason behind this? ","link":"https://stackoverflow.com/questions/77556567/previously-created-viewbutton-is-overlapping-the-newly-generated-viewrecycler","title":"Previously created view(Button) is overlapping the newly generated View(RecyclerView)","body":"<p>I have programatically created the following layout using absolute positioning:-</p>\n<p><a href=\"https://i.stack.imgur.com/UVpKwl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UVpKwl.png\" alt=\"enter image description here\" /></a></p>\n<p>When user enters 3 or more characters in the EditView (TextEdit: 107), a Selection List(RecyclerView) will appear below the Editview.\nBut the button is overlapping the RecyclerView as shown:-</p>\n<p><a href=\"https://i.stack.imgur.com/sHrvSl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sHrvSl.png\" alt=\"enter image description here\" /></a></p>\n<p>Now, According the my understanding if the position of views overlaps then they appears in in the order they have been generated i.e. added to the parent view. So acc. to that RecyclerView that's added to the RelativeLayout at last should have overlapped the button and the button should be hidden below it. but that's not happening, could someone explain the reason behind this?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"score":1,"post_type":"question","creation_date":1701085262,"post_id":77556542,"comment_id":136727062,"body_markdown":"Those are milliseconds. The difference of them tells you how many milliseconds there are between start and end. 1,000 ms is one second, 60 seconds is one minute, 60 minutes is one hour, 24 hours is one day and 7 days is a week. So, the difference between these two values divided by (7*24*60*60*1000) should give you the number of weeks between the two.","link":"https://stackoverflow.com/questions/77556542/how-to-calculate-week-wise-duration-in-seconds-between-two-epoch-times-in-java#comment136727062_77556542","body":"Those are milliseconds. The difference of them tells you how many milliseconds there are between start and end. 1,000 ms is one second, 60 seconds is one minute, 60 minutes is one hour, 24 hours is one day and 7 days is a week. So, the difference between these two values divided by (7*24*60*60*1000) should give you the number of weeks between the two."},{"score":0,"post_type":"question","creation_date":1701094293,"post_id":77556542,"comment_id":136728708,"body_markdown":"I don&#39;t want number of weeks in between, I want week wise seconds","link":"https://stackoverflow.com/questions/77556542/how-to-calculate-week-wise-duration-in-seconds-between-two-epoch-times-in-java#comment136728708_77556542","body":"I don&#39;t want number of weeks in between, I want week wise seconds"},{"score":0,"post_type":"question","creation_date":1701171509,"post_id":77556542,"comment_id":136739679,"body_markdown":"Can you explain what week wise seconds are?","link":"https://stackoverflow.com/questions/77556542/how-to-calculate-week-wise-duration-in-seconds-between-two-epoch-times-in-java#comment136739679_77556542","body":"Can you explain what week wise seconds are?"},{"score":1,"post_type":"question","creation_date":1701184792,"post_id":77556542,"comment_id":136742262,"body_markdown":"@vatbub I think he wants a breakdown by week of how many seconds there are between the two instants. Something like what he showed on his example that I now understand (Week 48 = X seconds, Week 49 seconds = Y seconds etc.)","link":"https://stackoverflow.com/questions/77556542/how-to-calculate-week-wise-duration-in-seconds-between-two-epoch-times-in-java#comment136742262_77556542","body":"@vatbub I think he wants a breakdown by week of how many seconds there are between the two instants. Something like what he showed on his example that I now understand (Week 48 = X seconds, Week 49 seconds = Y seconds etc.)"},{"score":0,"post_type":"question","creation_date":1701208986,"post_id":77556542,"comment_id":136746583,"body_markdown":"Ok, then the next question: What are `startEpoch` and `endEpoch`? Is it unix time? Is it something else? And if you are right @MatteoNNZ , wouldn&#39;t that then just be 7*24*60*60 for all whole weeks plus how many seconds are in the starting and in the ending week?","link":"https://stackoverflow.com/questions/77556542/how-to-calculate-week-wise-duration-in-seconds-between-two-epoch-times-in-java#comment136746583_77556542","body":"Ok, then the next question: What are <code>startEpoch</code> and <code>endEpoch</code>? Is it unix time? Is it something else? And if you are right @MatteoNNZ , wouldn&#39;t that then just be 7*24*60*60 for all whole weeks plus how many seconds are in the starting and in the ending week?"},{"score":1,"post_type":"question","creation_date":1701212213,"post_id":77556542,"comment_id":136747039,"body_markdown":"@vatbub I think what he needs to do is: 1) determine in which week (of the year, I guess?) fall the start and end dates; 2) identify the beginning of each week; 3) split the total seconds between end and start into those buckets.","link":"https://stackoverflow.com/questions/77556542/how-to-calculate-week-wise-duration-in-seconds-between-two-epoch-times-in-java#comment136747039_77556542","body":"@vatbub I think what he needs to do is: 1) determine in which week (of the year, I guess?) fall the start and end dates; 2) identify the beginning of each week; 3) split the total seconds between end and start into those buckets."},{"score":0,"post_type":"question","creation_date":1701250746,"post_id":77556542,"comment_id":136751277,"body_markdown":"That sounds reasonable, but either way, we need confirmation from @PranavGirwalkar , otherwise this is all guesswork :)","link":"https://stackoverflow.com/questions/77556542/how-to-calculate-week-wise-duration-in-seconds-between-two-epoch-times-in-java#comment136751277_77556542","body":"That sounds reasonable, but either way, we need confirmation from @PranavGirwalkar , otherwise this is all guesswork :)"},{"score":0,"post_type":"question","creation_date":1701260063,"post_id":77556542,"comment_id":136753051,"body_markdown":"Yes, @MatteoNNZ you are right, you elaborated my problem exactly. startEpoch and endEpoch are Unix times.","link":"https://stackoverflow.com/questions/77556542/how-to-calculate-week-wise-duration-in-seconds-between-two-epoch-times-in-java#comment136753051_77556542","body":"Yes, @MatteoNNZ you are right, you elaborated my problem exactly. startEpoch and endEpoch are Unix times."},{"score":0,"post_type":"question","creation_date":1701260130,"post_id":77556542,"comment_id":136753068,"body_markdown":"@PranavGirwalkar you should try to write some code yourself and then ask for help if you&#39;re stuck on a specific issue. In my comment I gave you some tips of how you may split your problem into sub-problems and try to implement them.","link":"https://stackoverflow.com/questions/77556542/how-to-calculate-week-wise-duration-in-seconds-between-two-epoch-times-in-java#comment136753068_77556542","body":"@PranavGirwalkar you should try to write some code yourself and then ask for help if you&#39;re stuck on a specific issue. In my comment I gave you some tips of how you may split your problem into sub-problems and try to implement them."},{"score":0,"post_type":"question","creation_date":1701269859,"post_id":77556542,"comment_id":136755077,"body_markdown":"@MatteoNNZ sure, actually I&#39;m trying it in parallel. Thank you &#128591;","link":"https://stackoverflow.com/questions/77556542/how-to-calculate-week-wise-duration-in-seconds-between-two-epoch-times-in-java#comment136755077_77556542","body":"@MatteoNNZ sure, actually I&#39;m trying it in parallel. Thank you 🙏"}],"comment_count":10,"is_answered":false,"view_count":44,"answer_count":0,"score":-3,"last_activity_date":1701084648,"creation_date":1701084648,"question_id":77556542,"body_markdown":"I&#39;ve an input of 2 epoch dates and I want to calculate week wise duration between this time frame\r\nfor example:\r\nInput:\r\nlong startEpoch = 1701054000;\r\nlong endEpoch = 1701054000;\r\n\r\nExpected output:\r\nW48 - X seconds\r\nW49 - Y seconds\r\nW50 - Z seconds \r\nand so on\r\n\r\nI don&#39;t know, where to start","link":"https://stackoverflow.com/questions/77556542/how-to-calculate-week-wise-duration-in-seconds-between-two-epoch-times-in-java","title":"how to calculate Week wise duration in seconds between two epoch times in java?","body":"<p>I've an input of 2 epoch dates and I want to calculate week wise duration between this time frame\nfor example:\nInput:\nlong startEpoch = 1701054000;\nlong endEpoch = 1701054000;</p>\n<p>Expected output:\nW48 - X seconds\nW49 - Y seconds\nW50 - Z seconds\nand so on</p>\n<p>I don't know, where to start</p>\n"},{"tags":["java","android","android-billing","play-billing-library"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701104752,"post_id":77556370,"comment_id":136731021,"body_markdown":"Still nothing happens after the purchase is done, the purchase window just closes.","link":"https://stackoverflow.com/questions/77553433/android-studio-java-in-app-purchase-bugs-issue/77556370#comment136731021_77556370","body":"Still nothing happens after the purchase is done, the purchase window just closes."}],"comment_count":1,"score":0,"last_activity_date":1701082857,"creation_date":1701082857,"answer_id":77556370,"question_id":77553433,"body_markdown":"Check Acknowledgment Status Before Processing:\r\n\r\n    @Override\r\n    public void onPurchasedProductsFetched(@NonNull ProductType productType, @NonNull List&lt;PurchaseInfo&gt; purchases) {\r\n        for (PurchaseInfo purchaseInfo : purchases) {\r\n            String purchasedProduct = purchaseInfo.getProduct();\r\n            if (!isPro() &amp;&amp; purchasedProduct.equalsIgnoreCase(&quot;com.xxxx.pro&quot;)) {\r\n                if (!billingConnector.isPurchasedItemAcknowledged(purchaseInfo)) {\r\n                    // here is the code of purchase processing\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nAlso move the acknowledgment logic from the onPurchaseAcknowledged method to the onPurchasedProductsFetched method. This might be helpful.\r\n\r\n\r\n    @Override\r\n    public void onPurchasedProductsFetched(@NonNull ProductType productType, @NonNull List&lt;PurchaseInfo&gt; purchases) {\r\n        for (PurchaseInfo purchaseInfo : purchases) {\r\n            String purchasedProduct = purchaseInfo.getProduct();\r\n            if (!isPro() &amp;&amp; purchasedProduct.equalsIgnoreCase(&quot;com.xxxx.pro&quot;)) {\r\n                // here is the code of purchase processing\r\n                handlePurchase(purchaseInfo);\r\n            }\r\n        }\r\n    }\r\n    \r\n    private void handlePurchase(PurchaseInfo purchaseInfo) {\r\n        String acknowledgedProduct = purchaseInfo.getProduct();\r\n        if (acknowledgedProduct.equalsIgnoreCase(&quot;com.xxxx.pro&quot;)) {\r\n            Toast.makeText(InfoController.this, &quot;The purchase was successfully made.&quot;, Toast.LENGTH_SHORT).show();\r\n            setProUser(true);\r\n            upgradeButton.setEnabled(false);\r\n            upgradeButton.setText(&quot;User is Pro&quot;);\r\n        }\r\n    }\r\n\r\n","link":"https://stackoverflow.com/questions/77553433/android-studio-java-in-app-purchase-bugs-issue/77556370#77556370","title":"Android Studio Java - In app purchase bugs/issue","body":"<p>Check Acknowledgment Status Before Processing:</p>\n<pre><code>@Override\npublic void onPurchasedProductsFetched(@NonNull ProductType productType, @NonNull List&lt;PurchaseInfo&gt; purchases) {\n    for (PurchaseInfo purchaseInfo : purchases) {\n        String purchasedProduct = purchaseInfo.getProduct();\n        if (!isPro() &amp;&amp; purchasedProduct.equalsIgnoreCase(&quot;com.xxxx.pro&quot;)) {\n            if (!billingConnector.isPurchasedItemAcknowledged(purchaseInfo)) {\n                // here is the code of purchase processing\n            }\n        }\n    }\n}\n</code></pre>\n<p>Also move the acknowledgment logic from the onPurchaseAcknowledged method to the onPurchasedProductsFetched method. This might be helpful.</p>\n<pre><code>@Override\npublic void onPurchasedProductsFetched(@NonNull ProductType productType, @NonNull List&lt;PurchaseInfo&gt; purchases) {\n    for (PurchaseInfo purchaseInfo : purchases) {\n        String purchasedProduct = purchaseInfo.getProduct();\n        if (!isPro() &amp;&amp; purchasedProduct.equalsIgnoreCase(&quot;com.xxxx.pro&quot;)) {\n            // here is the code of purchase processing\n            handlePurchase(purchaseInfo);\n        }\n    }\n}\n\nprivate void handlePurchase(PurchaseInfo purchaseInfo) {\n    String acknowledgedProduct = purchaseInfo.getProduct();\n    if (acknowledgedProduct.equalsIgnoreCase(&quot;com.xxxx.pro&quot;)) {\n        Toast.makeText(InfoController.this, &quot;The purchase was successfully made.&quot;, Toast.LENGTH_SHORT).show();\n        setProUser(true);\n        upgradeButton.setEnabled(false);\n        upgradeButton.setText(&quot;User is Pro&quot;);\n    }\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":55,"answer_count":1,"score":0,"last_activity_date":1701084648,"creation_date":1701031536,"last_edit_date":1701084648,"question_id":77553433,"body_markdown":"In my app I am adding In App Purchase using [this][1] library.\r\n\r\nThis is what my activity code looks like:\r\n    \r\n    public class InfoController extends AppCompatActivity {\r\n    \r\n        private static final String PREFS_NAME = &quot;TEST_MyPrefsFile&quot;;\r\n    \r\n        private static final String FIRST_TIME_KEY = &quot;TEST_isFirstLaunch&quot;;\r\n    \r\n        private static final String IS_PRO_KEY = &quot;TEST_isPro&quot;;\r\n        private boolean isPro() {\r\n            SharedPreferences preferences = getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE);\r\n            return preferences.getBoolean(IS_PRO_KEY, false);\r\n        }\r\n    \r\n        private void setProUser(boolean isPro) {\r\n            SharedPreferences preferences = getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE);\r\n            SharedPreferences.Editor editor = preferences.edit();\r\n            editor.putBoolean(IS_PRO_KEY, isPro);\r\n            editor.apply();\r\n        }\r\n    \r\n        private Button upgradeButton;\r\n    \r\n        String base64String = &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;;\r\n    \r\n        private BillingConnector billingConnector;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_info);\r\n    \r\n            upgradeButton = findViewById(R.id.upgradeButton);\r\n    \r\n            if (!isPro()) {\r\n                upgradeButton.setText(&quot;Click here to upgrade to Pro&quot;);\r\n                initializeBillingClient();\r\n            } else {\r\n                upgradeButton.setEnabled(false);\r\n                upgradeButton.setText(&quot;User is Pro&quot;);\r\n            }\r\n        }\r\n    \r\n    \r\n        private void initializeBillingClient() {\r\n            List&lt;String&gt; nonConsumableIds = new ArrayList&lt;&gt;();\r\n            nonConsumableIds.add(&quot;com.xxxx.pro&quot;);  // Replace with your actual non-consumable product ID\r\n    \r\n            billingConnector = new BillingConnector(this, base64String)\r\n                    .setNonConsumableIds(nonConsumableIds)\r\n                    .autoAcknowledge()\r\n                    .enableLogging()\r\n                    .connect();\r\n    \r\n            billingConnector.setBillingEventListener(new BillingEventListener() {\r\n                @Override\r\n                public void onProductsFetched(@NonNull List&lt;ProductInfo&gt; productDetails) {\r\n    \r\n                }\r\n    \r\n                //this IS the listener in which we can restore previous purchases.\r\n                // Code will execute on InfoController.java appear. If pro is already purchased, unlock pro features.\r\n                @Override\r\n                public void onPurchasedProductsFetched(@NonNull ProductType productType, @NonNull List&lt;PurchaseInfo&gt; purchases) {\r\n                    String purchasedProduct;\r\n                    boolean isAcknowledged;\r\n    \r\n                    for (PurchaseInfo purchaseInfo : purchases) {\r\n                        purchasedProduct = purchaseInfo.getProduct();\r\n                        isAcknowledged = purchaseInfo.isAcknowledged();\r\n    \r\n                        if (!isPro()) {\r\n                            if (purchasedProduct.equalsIgnoreCase(&quot;com.xxxx.pro&quot;)) {\r\n                                if (isAcknowledged) {\r\n    \r\n                                    // CustomToast.makeText(InfoController.this, &quot;The previous purchase was successfully restored.&quot;, Toast.LENGTH_SHORT).show();\r\n    \r\n                                    // setProUser(true);\r\n    \r\n                                    Toast.makeText(InfoController.this, &quot;isAcknowledged&quot;, Toast.LENGTH_SHORT).show();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                //this IS NOT the listener in which we&#39;ll give user entitlement for purchases (see ReadMe.md why)\r\n                @Override\r\n                public void onProductsPurchased(@NonNull List&lt;PurchaseInfo&gt; purchases) {\r\n    \r\n                }\r\n    \r\n                //this IS the listener in which we&#39;ll give user entitlement for purchases (the ReadMe.md explains why)\r\n                @Override\r\n                public void onPurchaseAcknowledged(@NonNull PurchaseInfo purchase) {\r\n                    String acknowledgedProduct = purchase.getProduct();\r\n    \r\n                    if (acknowledgedProduct.equalsIgnoreCase(&quot;com.xxxx.pro&quot;)) {\r\n    \r\n                        Toast.makeText(InfoController.this, &quot;The purchase was successfully made.&quot;, Toast.LENGTH_SHORT).show();\r\n    \r\n                        setProUser(true);\r\n    \r\n                        upgradeButton.setEnabled(false);\r\n                        upgradeButton.setText(&quot;User is Pro&quot;);\r\n                    }\r\n                }\r\n    \r\n                @Override\r\n                public void onPurchaseConsumed(@NonNull PurchaseInfo purchase) {\r\n    \r\n                }\r\n    \r\n                @Override\r\n                public void onBillingError(@NonNull BillingConnector billingConnector, @NonNull BillingResponse response) {\r\n                    switch (response.getErrorType()) {\r\n                        case ACKNOWLEDGE_WARNING:\r\n                            //this response will be triggered when the purchase is still PENDING\r\n                            CustomToast.makeText(InfoController.this, &quot;The transaction is still pending. Please come back later to receive the purchase!&quot;, Toast.LENGTH_SHORT).show();\r\n                            break;\r\n                        case BILLING_UNAVAILABLE:\r\n                        case SERVICE_UNAVAILABLE:\r\n                            CustomToast.makeText(InfoController.this, &quot;Billing is unavailable at the moment. Check your internet connection!&quot;, Toast.LENGTH_SHORT).show();\r\n                            break;\r\n                        case ERROR:\r\n                            CustomToast.makeText(InfoController.this, &quot;Something happened, the transaction was canceled!&quot;, Toast.LENGTH_SHORT).show();\r\n                            break;\r\n                        case ITEM_ALREADY_OWNED:\r\n                            Toast.makeText(InfoController.this, &quot;The purchase has already been made.&quot;, Toast.LENGTH_SHORT).show();\r\n                            setProUser(true);\r\n                            upgradeButton.setEnabled(false);\r\n                            upgradeButton.setText(&quot;User is Pro&quot;);\r\n                                break;\r\n                        case ITEM_NOT_OWNED:\r\n                            //TODO - failure to consume since item is not owned\r\n                            break;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    \r\n        public void onUpgradeButtonClick(View view) {\r\n            billingConnector.purchase(InfoController.this, &quot;com.xxxx.pro&quot;);\r\n        }\r\n    }\r\n\r\nWhen I am testing in app purchase I am using promo codes (since I do not have a card connected to my account).\r\n\r\nSo when I open up this activity, nothing shows up. I press the `upgradeButton`, the upgrade prompt pops up, I select promo code and type in the promo code, click next and it tells me that the price is 0 and I press confirm. After this, the purchase prompt window just closes and nothing happens. No Toast message shows up, the upgradeButton text still says: `Click here to upgrade to Pro`.\r\n\r\nIf I now close the app, open it back up and go to the InfoController (this activity), the Toast message `isAcknowledged` shows up.\r\n\r\nSo my question is: How come nothing happens after the purchase is done, but when I open up the activity again after the purchase, it shows `isAcknowledged`?\r\n\r\n\r\n  [1]: https://github.com/moisoni97/google-inapp-billing","link":"https://stackoverflow.com/questions/77553433/android-studio-java-in-app-purchase-bugs-issue","title":"Android Studio Java - In app purchase bugs/issue","body":"<p>In my app I am adding In App Purchase using <a href=\"https://github.com/moisoni97/google-inapp-billing\" rel=\"nofollow noreferrer\">this</a> library.</p>\n<p>This is what my activity code looks like:</p>\n<pre><code>public class InfoController extends AppCompatActivity {\n\n    private static final String PREFS_NAME = &quot;TEST_MyPrefsFile&quot;;\n\n    private static final String FIRST_TIME_KEY = &quot;TEST_isFirstLaunch&quot;;\n\n    private static final String IS_PRO_KEY = &quot;TEST_isPro&quot;;\n    private boolean isPro() {\n        SharedPreferences preferences = getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE);\n        return preferences.getBoolean(IS_PRO_KEY, false);\n    }\n\n    private void setProUser(boolean isPro) {\n        SharedPreferences preferences = getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE);\n        SharedPreferences.Editor editor = preferences.edit();\n        editor.putBoolean(IS_PRO_KEY, isPro);\n        editor.apply();\n    }\n\n    private Button upgradeButton;\n\n    String base64String = &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;;\n\n    private BillingConnector billingConnector;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_info);\n\n        upgradeButton = findViewById(R.id.upgradeButton);\n\n        if (!isPro()) {\n            upgradeButton.setText(&quot;Click here to upgrade to Pro&quot;);\n            initializeBillingClient();\n        } else {\n            upgradeButton.setEnabled(false);\n            upgradeButton.setText(&quot;User is Pro&quot;);\n        }\n    }\n\n\n    private void initializeBillingClient() {\n        List&lt;String&gt; nonConsumableIds = new ArrayList&lt;&gt;();\n        nonConsumableIds.add(&quot;com.xxxx.pro&quot;);  // Replace with your actual non-consumable product ID\n\n        billingConnector = new BillingConnector(this, base64String)\n                .setNonConsumableIds(nonConsumableIds)\n                .autoAcknowledge()\n                .enableLogging()\n                .connect();\n\n        billingConnector.setBillingEventListener(new BillingEventListener() {\n            @Override\n            public void onProductsFetched(@NonNull List&lt;ProductInfo&gt; productDetails) {\n\n            }\n\n            //this IS the listener in which we can restore previous purchases.\n            // Code will execute on InfoController.java appear. If pro is already purchased, unlock pro features.\n            @Override\n            public void onPurchasedProductsFetched(@NonNull ProductType productType, @NonNull List&lt;PurchaseInfo&gt; purchases) {\n                String purchasedProduct;\n                boolean isAcknowledged;\n\n                for (PurchaseInfo purchaseInfo : purchases) {\n                    purchasedProduct = purchaseInfo.getProduct();\n                    isAcknowledged = purchaseInfo.isAcknowledged();\n\n                    if (!isPro()) {\n                        if (purchasedProduct.equalsIgnoreCase(&quot;com.xxxx.pro&quot;)) {\n                            if (isAcknowledged) {\n\n                                // CustomToast.makeText(InfoController.this, &quot;The previous purchase was successfully restored.&quot;, Toast.LENGTH_SHORT).show();\n\n                                // setProUser(true);\n\n                                Toast.makeText(InfoController.this, &quot;isAcknowledged&quot;, Toast.LENGTH_SHORT).show();\n                            }\n                        }\n                    }\n                }\n            }\n\n            //this IS NOT the listener in which we'll give user entitlement for purchases (see ReadMe.md why)\n            @Override\n            public void onProductsPurchased(@NonNull List&lt;PurchaseInfo&gt; purchases) {\n\n            }\n\n            //this IS the listener in which we'll give user entitlement for purchases (the ReadMe.md explains why)\n            @Override\n            public void onPurchaseAcknowledged(@NonNull PurchaseInfo purchase) {\n                String acknowledgedProduct = purchase.getProduct();\n\n                if (acknowledgedProduct.equalsIgnoreCase(&quot;com.xxxx.pro&quot;)) {\n\n                    Toast.makeText(InfoController.this, &quot;The purchase was successfully made.&quot;, Toast.LENGTH_SHORT).show();\n\n                    setProUser(true);\n\n                    upgradeButton.setEnabled(false);\n                    upgradeButton.setText(&quot;User is Pro&quot;);\n                }\n            }\n\n            @Override\n            public void onPurchaseConsumed(@NonNull PurchaseInfo purchase) {\n\n            }\n\n            @Override\n            public void onBillingError(@NonNull BillingConnector billingConnector, @NonNull BillingResponse response) {\n                switch (response.getErrorType()) {\n                    case ACKNOWLEDGE_WARNING:\n                        //this response will be triggered when the purchase is still PENDING\n                        CustomToast.makeText(InfoController.this, &quot;The transaction is still pending. Please come back later to receive the purchase!&quot;, Toast.LENGTH_SHORT).show();\n                        break;\n                    case BILLING_UNAVAILABLE:\n                    case SERVICE_UNAVAILABLE:\n                        CustomToast.makeText(InfoController.this, &quot;Billing is unavailable at the moment. Check your internet connection!&quot;, Toast.LENGTH_SHORT).show();\n                        break;\n                    case ERROR:\n                        CustomToast.makeText(InfoController.this, &quot;Something happened, the transaction was canceled!&quot;, Toast.LENGTH_SHORT).show();\n                        break;\n                    case ITEM_ALREADY_OWNED:\n                        Toast.makeText(InfoController.this, &quot;The purchase has already been made.&quot;, Toast.LENGTH_SHORT).show();\n                        setProUser(true);\n                        upgradeButton.setEnabled(false);\n                        upgradeButton.setText(&quot;User is Pro&quot;);\n                            break;\n                    case ITEM_NOT_OWNED:\n                        //TODO - failure to consume since item is not owned\n                        break;\n                }\n            }\n        });\n    }\n\n    public void onUpgradeButtonClick(View view) {\n        billingConnector.purchase(InfoController.this, &quot;com.xxxx.pro&quot;);\n    }\n}\n</code></pre>\n<p>When I am testing in app purchase I am using promo codes (since I do not have a card connected to my account).</p>\n<p>So when I open up this activity, nothing shows up. I press the <code>upgradeButton</code>, the upgrade prompt pops up, I select promo code and type in the promo code, click next and it tells me that the price is 0 and I press confirm. After this, the purchase prompt window just closes and nothing happens. No Toast message shows up, the upgradeButton text still says: <code>Click here to upgrade to Pro</code>.</p>\n<p>If I now close the app, open it back up and go to the InfoController (this activity), the Toast message <code>isAcknowledged</code> shows up.</p>\n<p>So my question is: How come nothing happens after the purchase is done, but when I open up the activity again after the purchase, it shows <code>isAcknowledged</code>?</p>\n"},{"tags":["java","android","cordova","timertask"],"comments":[{"score":2,"post_type":"question","creation_date":1701085216,"post_id":77556533,"comment_id":136727054,"body_markdown":"Nothing glaringly wrong with the code, it should execute every 5 seconds as expected. Could `callbackContext.sendPluginResult()` throw an exception? I can&#39;t think of anything else disrupting the task.","link":"https://stackoverflow.com/questions/77556533/timertask-only-returns-once#comment136727054_77556533","body":"Nothing glaringly wrong with the code, it should execute every 5 seconds as expected. Could <code>callbackContext.sendPluginResult()</code> throw an exception? I can&#39;t think of anything else disrupting the task."},{"score":0,"post_type":"question","creation_date":1701085555,"post_id":77556533,"comment_id":136727104,"body_markdown":"I am scratching my head...can&#39;t find why is not working.","link":"https://stackoverflow.com/questions/77556533/timertask-only-returns-once#comment136727104_77556533","body":"I am scratching my head...can&#39;t find why is not working."},{"score":0,"post_type":"question","creation_date":1701087475,"post_id":77556533,"comment_id":136727437,"body_markdown":"Try printing a message instead of sending a plugin result. Its possible that might be causing an issue.","link":"https://stackoverflow.com/questions/77556533/timertask-only-returns-once#comment136727437_77556533","body":"Try printing a message instead of sending a plugin result. Its possible that might be causing an issue."},{"score":1,"post_type":"question","creation_date":1701097538,"post_id":77556533,"comment_id":136729422,"body_markdown":"The behavior would be expected if `sendPluginResult` or one of the other calls in the `run()` method do not return (block execution). The timer will wait for the first TimerTask to finish before the second is executed, even if it is already time to execute it.","link":"https://stackoverflow.com/questions/77556533/timertask-only-returns-once#comment136729422_77556533","body":"The behavior would be expected if <code>sendPluginResult</code> or one of the other calls in the <code>run()</code> method do not return (block execution). The timer will wait for the first TimerTask to finish before the second is executed, even if it is already time to execute it."}],"comment_count":4,"is_answered":false,"view_count":31,"answer_count":0,"score":-1,"last_activity_date":1701084541,"creation_date":1701084541,"question_id":77556533,"body_markdown":"I need to return the result of a recurring code to Cordova. The code is this:\r\n\r\n    private void startAsking() {\r\n\r\n        t = new Timer();\r\n        t.schedule(new TimerTask() {\r\n            @Override\r\n            public void run() {\r\n                \r\n                    callbackContext.sendPluginResult(new PluginResult(PluginResult.Status.OK, &quot;OK&quot;));\r\n                \r\n\r\n            }\r\n        }, 0, 5000);\r\n\r\n    }\r\n\r\nThis code should run every 5 seconds, if I am not mistaken, but is only sent once to Cordova. Am I doing something wrong?","link":"https://stackoverflow.com/questions/77556533/timertask-only-returns-once","title":"TimerTask only returns once","body":"<p>I need to return the result of a recurring code to Cordova. The code is this:</p>\n<pre><code>private void startAsking() {\n\n    t = new Timer();\n    t.schedule(new TimerTask() {\n        @Override\n        public void run() {\n            \n                callbackContext.sendPluginResult(new PluginResult(PluginResult.Status.OK, &quot;OK&quot;));\n            \n\n        }\n    }, 0, 5000);\n\n}\n</code></pre>\n<p>This code should run every 5 seconds, if I am not mistaken, but is only sent once to Cordova. Am I doing something wrong?</p>\n"},{"tags":["java","android","kotlin","multi-module","kotlin-java-interop"],"comments":[{"score":0,"post_type":"question","creation_date":1701084835,"post_id":77556515,"comment_id":136727002,"body_markdown":"In fact, I have some interface implements `LifecycleOwner` (simply call Foo). Few days ago, I converted `AFragment extends Fragment implements Foo` to kotlin code. And then `AFragment` warns like avobe. Since my project has dependencies for &#39;androidx.lifecycle:lifecycle-common:2.5.0&#39; and &#39;androidx.lifecycle:lifecycle-common:2.6.1&#39; both.","link":"https://stackoverflow.com/questions/77556515/androidstudiofix-not-implemented-exception-when-using-java-and-kotlin-in-multi#comment136727002_77556515","body":"In fact, I have some interface implements <code>LifecycleOwner</code> (simply call Foo). Few days ago, I converted <code>AFragment extends Fragment implements Foo</code> to kotlin code. And then <code>AFragment</code> warns like avobe. Since my project has dependencies for &#39;androidx.lifecycle:lifecycle-common:2.5.0&#39; and &#39;androidx.lifecycle:lifecycle-common:2.6.1&#39; both."}],"comment_count":1,"is_answered":false,"view_count":17,"answer_count":0,"score":0,"last_activity_date":1701084354,"creation_date":1701084354,"question_id":77556515,"body_markdown":"This is sample code for multi-module project of mine.\r\n\r\nModule A\r\n```java\r\n// Test.java\r\npackage com.test\r\n\r\npublic interface Test {\r\n  @NonNull\r\n  String getTestName();\r\n}\r\n```\r\n\r\nModule B\r\n```kotlin\r\n// Test.kt\r\npackage com.test\r\n\r\ninterface Test {\r\n  val testName: String\r\n}\r\n```\r\n```java\r\n// ATest.java\r\npackage com.test.impl\r\n\r\npublic class ATest implements Test {\r\n  @NonNull\r\n  @Override\r\n  public String getTestName() {\r\n    return &quot;It`s ATest&quot;;\r\n  }\r\n}\r\n```\r\n```kotlin\r\n// BTest.kt\r\npackage com.test.impl\r\n\r\ninterface BTest : Test\r\n```\r\n```\r\n// FinalTest.kt\r\npackage com.test.impl\r\n\r\nclass FinalTest : ATest(), BTest\r\n```\r\n\r\nFor `FinalTest`, IDE warns that `Class &#39;FinalTest&#39; is not abstract and does not implement abstract member public abstract val testName: String defined in com.test.impl.BTest`. But it works without compliation error. What should I do to remove that waring.\r\n\r\n&gt; I know a simple way is remove Test in Module A. But, assume there is some reason, so that we can&#39;t edit ATest or Test in Module A\r\n\r\nI want use `FinalTest` without warning","link":"https://stackoverflow.com/questions/77556515/androidstudiofix-not-implemented-exception-when-using-java-and-kotlin-in-multi","title":"(AndroidStudio)Fix not Implemented exception when using Java and Kotlin in multi-module project","body":"<p>This is sample code for multi-module project of mine.</p>\n<p>Module A</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Test.java\npackage com.test\n\npublic interface Test {\n  @NonNull\n  String getTestName();\n}\n</code></pre>\n<p>Module B</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// Test.kt\npackage com.test\n\ninterface Test {\n  val testName: String\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// ATest.java\npackage com.test.impl\n\npublic class ATest implements Test {\n  @NonNull\n  @Override\n  public String getTestName() {\n    return &quot;It`s ATest&quot;;\n  }\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// BTest.kt\npackage com.test.impl\n\ninterface BTest : Test\n</code></pre>\n<pre><code>// FinalTest.kt\npackage com.test.impl\n\nclass FinalTest : ATest(), BTest\n</code></pre>\n<p>For <code>FinalTest</code>, IDE warns that <code>Class 'FinalTest' is not abstract and does not implement abstract member public abstract val testName: String defined in com.test.impl.BTest</code>. But it works without compliation error. What should I do to remove that waring.</p>\n<blockquote>\n<p>I know a simple way is remove Test in Module A. But, assume there is some reason, so that we can't edit ATest or Test in Module A</p>\n</blockquote>\n<p>I want use <code>FinalTest</code> without warning</p>\n"},{"tags":["java","soap","digital-signature","x509certificate","soap-client"],"comment_count":0,"is_answered":false,"view_count":89,"answer_count":0,"score":0,"last_activity_date":1701084348,"creation_date":1700818054,"last_edit_date":1701084348,"question_id":77542043,"body_markdown":"hello i am developing a service for a SOAP call with x509 authentication and i need to sign the body and timestamp, but i can&#39;t get it to work java side while in SoapUI it does.\r\n\r\n\r\nThe error (with java code) is SSF_API_SIGNER_ERORS A signing opration not be performed or failed\r\n\r\n\r\nthe configuration in soapUi is this\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HXtLp.png\r\n\r\nwhile my signature code is this\r\n\r\n\r\n          private void createDetachedSignature(SOAPElement signatureElement, PrivateKey privateKey, SOAPElement securityTokenReference, SOAPBody soapBody, SOAPElement timestamp) throws Exception {\r\n            \r\n            \r\n                String providerName = System.getProperty\r\n                        (&quot;jsr105Provider&quot;, &quot;org.jcp.xml.dsig.internal.dom.XMLDSigRI&quot;);\r\n                XMLSignatureFactory xmlSignatureFactory = XMLSignatureFactory.getInstance(&quot;DOM&quot;,\r\n                        (Provider) Class.forName(providerName).newInstance());\r\n            \r\n            \r\n                //Digest method\r\n                javax.xml.crypto.dsig.DigestMethod digestMethod = xmlSignatureFactory.newDigestMethod(&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;, null);\r\n                ArrayList&lt;Transform&gt; transformList = new ArrayList&lt;Transform&gt;();\r\n            \r\n            \r\n                //Transform\r\n                Transform envTransform = xmlSignatureFactory.newTransform(&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;, (TransformParameterSpec) null);\r\n                transformList.add(envTransform);\r\n            \r\n            \r\n                //References\r\n            \r\n                ArrayList&lt;Reference&gt; refList = new ArrayList&lt;Reference&gt;();\r\n                Reference refTS = xmlSignatureFactory.newReference(&quot;#TS&quot;+UUID, digestMethod, transformList, null, null);\r\n                Reference refBody = xmlSignatureFactory.newReference(&quot;#Body&quot;+UUID, digestMethod, transformList, null, null);\r\n            \r\n            \r\n                refList.add(refBody);\r\n                refList.add(refTS);\r\n            \r\n            \r\n                javax.xml.crypto.dsig.CanonicalizationMethod cm = xmlSignatureFactory.newCanonicalizationMethod(&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;,\r\n                        (C14NMethodParameterSpec) null);\r\n            \r\n                javax.xml.crypto.dsig.SignatureMethod sm = xmlSignatureFactory.newSignatureMethod(&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot;, null);\r\n                SignedInfo signedInfo = xmlSignatureFactory.newSignedInfo(cm, sm, refList);\r\n            \r\n                signatureElement.setAttribute(&quot;Id&quot;, &quot;SIG&quot; + UUID);\r\n            \r\n                DOMSignContext signContext = new DOMSignContext(privateKey, signatureElement);\r\n                signContext.setDefaultNamespacePrefix(&quot;ds&quot;);\r\n                signContext.putNamespacePrefix(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;ds&quot;);\r\n            \r\n            \r\n                //These are required for new Java versions\r\n                signContext.setIdAttributeNS\r\n                        (soapBody,\r\n                                &quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;, &quot;Id&quot;);\r\n            \r\n            \r\n                signContext.setIdAttributeNS\r\n                        (timestamp,\r\n                                &quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;, &quot;Id&quot;);\r\n            \r\n            \r\n                KeyInfoFactory keyFactory = KeyInfoFactory.getInstance();\r\n                DOMStructure domKeyInfo = new DOMStructure(securityTokenReference);\r\n                javax.xml.crypto.dsig.keyinfo.KeyInfo keyInfo = keyFactory.newKeyInfo(java.util.Collections.singletonList(domKeyInfo));\r\n                if (securityTokenReference instanceof Element) {\r\n                    Element keyInfoElement = (Element) securityTokenReference;\r\n                    keyInfoElement.setAttribute(&quot;Id&quot;, &quot;KI&quot; + UUID);\r\n                }\r\n                javax.xml.crypto.dsig.XMLSignature signature = xmlSignatureFactory.newXMLSignature(signedInfo, keyInfo);\r\n                signContext.setBaseURI(&quot;&quot;);\r\n            \r\n            \r\n                signature.sign(signContext);\r\n                String signatureValue = getSignatureValueAsString(signatureElement);\r\n                System.out.println(&quot;Signature Value: &quot; + signatureValue);\r\n            \r\n            \r\n                Element canonicalizationMethodElement = (Element) signatureElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;CanonicalizationMethod&quot;).item(0);\r\n                addInclusiveNamespaces(canonicalizationMethodElement, &quot;soapenv urn&quot;);\r\n            \r\n                NodeList referenceNodes = signatureElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Reference&quot;);\r\n                for (int i = 0; i &lt; referenceNodes.getLength(); i++) {\r\n                    Element referenceElement = (Element) referenceNodes.item(i);\r\n                    Element transformsElement = (Element) referenceElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Transforms&quot;).item(0);\r\n                    Element transformElement = (Element) transformsElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Transform&quot;).item(0);\r\n            \r\n                    addInclusiveNamespaces(transformElement, &quot;wsse soapenv urn&quot;);\r\n                }\r\n            \r\n            \r\n            }\r\n\r\nI tried to compare the two requests and now I attach them to you\r\n\r\n\r\nSOAP UI REQUEST \r\n\r\n            &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\r\n            xmlns:urn=&quot;urn:sap-com:document:sap:rfc:functions&quot;&gt;\r\n            &lt;soapenv:Header&gt;\r\n                &lt;wsse:Security\r\n                    xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;\r\n                    xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&gt;\r\n                    &lt;wsse:BinarySecurityToken\r\n                        EncodingType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary&quot;\r\n                        ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot;\r\n                        wsu:Id=&quot;X509-8C92EF6DC231D5F4321700816423308691&quot;&gt;\r\n                        MIIIEjCCBfqgAwIBAgITHQAAZ/wkXidRhqKJ2wADAABn/DANBgkqhkiG...........&lt;/wsse:BinarySecurityToken&gt;\r\n                    &lt;wsu:Timestamp wsu:Id=&quot;TS-8C92EF6DC231D5F4321700816423307690&quot;&gt;\r\n                        &lt;wsu:Created&gt;2023-11-24T09:00:23Z&lt;/wsu:Created&gt;\r\n                        &lt;wsu:Expires&gt;2024-02-15T17:00:23Z&lt;/wsu:Expires&gt;\r\n                    &lt;/wsu:Timestamp&gt;\r\n                    &lt;ds:Signature Id=&quot;SIG-8C92EF6DC231D5F4321700816423348695&quot;\r\n                        xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;\r\n                        &lt;ds:SignedInfo&gt;\r\n                            &lt;ds:CanonicalizationMethod Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\r\n                                &lt;ec:InclusiveNamespaces PrefixList=&quot;soapenv urn&quot;\r\n                                    xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\r\n                            &lt;/ds:CanonicalizationMethod&gt;\r\n                            &lt;ds:SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot; /&gt;\r\n                            &lt;ds:Reference URI=&quot;#TS-8C92EF6DC231D5F4321700816423307690&quot;&gt;\r\n                                &lt;ds:Transforms&gt;\r\n                                    &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\r\n                                        &lt;ec:InclusiveNamespaces PrefixList=&quot;wsse soapenv urn&quot;\r\n                                            xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\r\n                                    &lt;/ds:Transform&gt;\r\n                                &lt;/ds:Transforms&gt;\r\n                                &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\r\n                                &lt;ds:DigestValue&gt;7KhZ1yTPuNhQ7OtTn32HcJQQ04U=&lt;/ds:DigestValue&gt;\r\n                            &lt;/ds:Reference&gt;\r\n                            &lt;ds:Reference URI=&quot;#id-8C92EF6DC231D5F4321700816423308694&quot;&gt;\r\n                                &lt;ds:Transforms&gt;\r\n                                    &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\r\n                                        &lt;ec:InclusiveNamespaces PrefixList=&quot;&quot;\r\n                                            xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\r\n                                    &lt;/ds:Transform&gt;\r\n                                &lt;/ds:Transforms&gt;\r\n                                &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\r\n                                &lt;ds:DigestValue&gt;t5f22r+WwrehIN/rbI7EFwLq7tM=&lt;/ds:DigestValue&gt;\r\n                            &lt;/ds:Reference&gt;\r\n                        &lt;/ds:SignedInfo&gt;\r\n                        &lt;ds:SignatureValue&gt;\r\n                            KRttsmdFmqCRQyTmo6/Cgs1Vj8EZ1y9YbObETjtcvhNQUBRny7tIKZE3bH4TwR69L2x0MsosaAcefeuT/OkowAa............&lt;/ds:SignatureValue&gt;\r\n                        &lt;ds:KeyInfo Id=&quot;KI-8C92EF6DC231D5F4321700816423308692&quot;&gt;\r\n                            &lt;wsse:SecurityTokenReference wsu:Id=&quot;STR-8C92EF6DC231D5F4321700816423308693&quot;&gt;\r\n                                &lt;wsse:Reference URI=&quot;#X509-8C92EF6DC231D5F4321700816423308691&quot;\r\n                                    ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot; /&gt;\r\n                            &lt;/wsse:SecurityTokenReference&gt;\r\n                        &lt;/ds:KeyInfo&gt;\r\n                    &lt;/ds:Signature&gt;\r\n                &lt;/wsse:Security&gt;\r\n            &lt;/soapenv:Header&gt;\r\n            &lt;soapenv:Body wsu:Id=&quot;id-8C92EF6DC231D5F4321700816423308694&quot;\r\n                xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&gt;\r\n                &lt;urn:SCHEMA_CC&gt;\r\n                    &lt;IV_BP&gt;3960915933&lt;/IV_BP&gt;\r\n                &lt;/urn:SCHEMA_CC&gt;\r\n            &lt;/soapenv:Body&gt;\r\n        &lt;/soapenv:Envelope&gt;\r\n\r\n\r\nMy request java \r\n\r\n \r\n\r\n                &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\r\n                xmlns:urn=&quot;urn:sap-com:document:sap:rfc:functions&quot;&gt;\r\n                &lt;soapenv:Header&gt;\r\n                    &lt;wsse:Security\r\n                        xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;\r\n                        xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;\r\n                        Id=&quot;SIG-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\r\n                        &lt;wsu:Timestamp wsu:Id=&quot;TS-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\r\n                            &lt;wsu:Created&gt;2023-11-24T08:18:32Z&lt;/wsu:Created&gt;\r\n                            &lt;wsu:Expires&gt;2023-11-24T08:19:02Z&lt;/wsu:Expires&gt;\r\n                        &lt;/wsu:Timestamp&gt;\r\n                        &lt;wsse:BinarySecurityToken\r\n                            EncodingType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary&quot;\r\n                            ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot;\r\n                            wsu:Id=&quot;X509Token-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\r\n                            MIIIEjCCBfqgAwIBAgITHQAAZ/wkXidRhqKJ2wADAABn..........&lt;/wsse:BinarySecurityToken&gt;\r\n                        &lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;\r\n                            &lt;ds:SignedInfo&gt;\r\n                                &lt;ds:CanonicalizationMethod Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\r\n                                    &lt;ec:InclusiveNamespaces xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;\r\n                                        PrefixList=&quot;soapenv urn&quot; /&gt;\r\n                                &lt;/ds:CanonicalizationMethod&gt;\r\n                                &lt;ds:SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot; /&gt;\r\n                                &lt;ds:Reference URI=&quot;#Body-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\r\n                                    &lt;ds:Transforms&gt;\r\n                                        &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\r\n                                            &lt;ec:InclusiveNamespaces\r\n                                                xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;\r\n                                                PrefixList=&quot;wsse soapenv urn&quot; /&gt;\r\n                                        &lt;/ds:Transform&gt;\r\n                                    &lt;/ds:Transforms&gt;\r\n                                    &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\r\n                                    &lt;ds:DigestValue&gt;qOQ+Nv9QAe63RePMKZkCfn2a8xI=&lt;/ds:DigestValue&gt;\r\n                                &lt;/ds:Reference&gt;\r\n                                &lt;ds:Reference URI=&quot;#TS-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\r\n                                    &lt;ds:Transforms&gt;\r\n                                        &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\r\n                                            &lt;ec:InclusiveNamespaces\r\n                                                xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;\r\n                                                PrefixList=&quot;wsse soapenv urn&quot; /&gt;\r\n                                        &lt;/ds:Transform&gt;\r\n                                    &lt;/ds:Transforms&gt;\r\n                                    &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\r\n                                    &lt;ds:DigestValue&gt;grbt4GpvYhKKUaetcW2HHMm91Mw=&lt;/ds:DigestValue&gt;\r\n                                &lt;/ds:Reference&gt;\r\n                            &lt;/ds:SignedInfo&gt;\r\n                            &lt;ds:SignatureValue&gt;agesPe4aOZPE9m1aI17MDz+oE5V7YNk7ox6q1WvmHWjd7EdH4XdqVq62dMnqkE2RRbI5TafX1qnK&amp;#13;\r\n                                udGLnMFcZu/gIYMUYmZ1RrwO6y39tLDWii8hEIZMYj/jIzAqi6d1jXh8GOjtmflYnIsRnidFgokV&amp;#13;\r\n                                /fgoMn7c548QlvEPyCokgFlS/aF4OF5uKqnb/yJ2ilRbeJBlG9QCO5rEUGmgeZ0untABzP+w76yg&amp;#13;\r\n                                PTkPaDTC8UHDQsG4XWMTYL+dyGfnHpYdqz5v+4BI53KfG0V7eqbdCZj9dzYN2MEel1NrgqQP2uQ8&amp;#13;\r\n                                .........&lt;/ds:SignatureValue&gt;\r\n                            &lt;ds:KeyInfo&gt;\r\n                                &lt;wsse:SecurityTokenReference Id=&quot;KI-1B1352404FC17AFA99AD1B962FA2A67E&quot;\r\n                                    wsu:Id=&quot;STR-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\r\n                                    &lt;wsse:Reference URI=&quot;#X509Token-1B1352404FC17AFA99AD1B962FA2A67E&quot;\r\n                                        ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot; /&gt;\r\n                                &lt;/wsse:SecurityTokenReference&gt;\r\n                            &lt;/ds:KeyInfo&gt;\r\n                        &lt;/ds:Signature&gt;\r\n                    &lt;/wsse:Security&gt;\r\n                &lt;/soapenv:Header&gt;\r\n                &lt;soapenv:Body\r\n                    xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;\r\n                    wsu:Id=&quot;Body-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\r\n                    &lt;urn:GET_SCHEMA_CC xmlns:urn=&quot;http://www.example.com/urn&quot;&gt;\r\n                            &lt;IV_BP&gt;3960915933&lt;/IV_BP&gt;\r\n                    \r\n                    &lt;/urn:GET_SCHEMA_CC&gt;\r\n                &lt;/soapenv:Body&gt;\r\n            &lt;/soapenv:Envelope&gt;\r\n\r\nThe way to put the certificate in the securityBinaryToken seems correct to me, while the signature I don&#39;t know if it is the correct way to do it.\r\n\r\n","link":"https://stackoverflow.com/questions/77542043/soap-x509-signature-and-digest","title":"SOAP x509 signature and digest","body":"<p>hello i am developing a service for a SOAP call with x509 authentication and i need to sign the body and timestamp, but i can't get it to work java side while in SoapUI it does.</p>\n<p>The error (with java code) is SSF_API_SIGNER_ERORS A signing opration not be performed or failed</p>\n<p>the configuration in soapUi is this</p>\n<p><a href=\"https://i.stack.imgur.com/HXtLp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HXtLp.png\" alt=\"enter image description here\" /></a></p>\n<p>while my signature code is this</p>\n<pre><code>      private void createDetachedSignature(SOAPElement signatureElement, PrivateKey privateKey, SOAPElement securityTokenReference, SOAPBody soapBody, SOAPElement timestamp) throws Exception {\n        \n        \n            String providerName = System.getProperty\n                    (&quot;jsr105Provider&quot;, &quot;org.jcp.xml.dsig.internal.dom.XMLDSigRI&quot;);\n            XMLSignatureFactory xmlSignatureFactory = XMLSignatureFactory.getInstance(&quot;DOM&quot;,\n                    (Provider) Class.forName(providerName).newInstance());\n        \n        \n            //Digest method\n            javax.xml.crypto.dsig.DigestMethod digestMethod = xmlSignatureFactory.newDigestMethod(&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;, null);\n            ArrayList&lt;Transform&gt; transformList = new ArrayList&lt;Transform&gt;();\n        \n        \n            //Transform\n            Transform envTransform = xmlSignatureFactory.newTransform(&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;, (TransformParameterSpec) null);\n            transformList.add(envTransform);\n        \n        \n            //References\n        \n            ArrayList&lt;Reference&gt; refList = new ArrayList&lt;Reference&gt;();\n            Reference refTS = xmlSignatureFactory.newReference(&quot;#TS&quot;+UUID, digestMethod, transformList, null, null);\n            Reference refBody = xmlSignatureFactory.newReference(&quot;#Body&quot;+UUID, digestMethod, transformList, null, null);\n        \n        \n            refList.add(refBody);\n            refList.add(refTS);\n        \n        \n            javax.xml.crypto.dsig.CanonicalizationMethod cm = xmlSignatureFactory.newCanonicalizationMethod(&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;,\n                    (C14NMethodParameterSpec) null);\n        \n            javax.xml.crypto.dsig.SignatureMethod sm = xmlSignatureFactory.newSignatureMethod(&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot;, null);\n            SignedInfo signedInfo = xmlSignatureFactory.newSignedInfo(cm, sm, refList);\n        \n            signatureElement.setAttribute(&quot;Id&quot;, &quot;SIG&quot; + UUID);\n        \n            DOMSignContext signContext = new DOMSignContext(privateKey, signatureElement);\n            signContext.setDefaultNamespacePrefix(&quot;ds&quot;);\n            signContext.putNamespacePrefix(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;ds&quot;);\n        \n        \n            //These are required for new Java versions\n            signContext.setIdAttributeNS\n                    (soapBody,\n                            &quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;, &quot;Id&quot;);\n        \n        \n            signContext.setIdAttributeNS\n                    (timestamp,\n                            &quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;, &quot;Id&quot;);\n        \n        \n            KeyInfoFactory keyFactory = KeyInfoFactory.getInstance();\n            DOMStructure domKeyInfo = new DOMStructure(securityTokenReference);\n            javax.xml.crypto.dsig.keyinfo.KeyInfo keyInfo = keyFactory.newKeyInfo(java.util.Collections.singletonList(domKeyInfo));\n            if (securityTokenReference instanceof Element) {\n                Element keyInfoElement = (Element) securityTokenReference;\n                keyInfoElement.setAttribute(&quot;Id&quot;, &quot;KI&quot; + UUID);\n            }\n            javax.xml.crypto.dsig.XMLSignature signature = xmlSignatureFactory.newXMLSignature(signedInfo, keyInfo);\n            signContext.setBaseURI(&quot;&quot;);\n        \n        \n            signature.sign(signContext);\n            String signatureValue = getSignatureValueAsString(signatureElement);\n            System.out.println(&quot;Signature Value: &quot; + signatureValue);\n        \n        \n            Element canonicalizationMethodElement = (Element) signatureElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;CanonicalizationMethod&quot;).item(0);\n            addInclusiveNamespaces(canonicalizationMethodElement, &quot;soapenv urn&quot;);\n        \n            NodeList referenceNodes = signatureElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Reference&quot;);\n            for (int i = 0; i &lt; referenceNodes.getLength(); i++) {\n                Element referenceElement = (Element) referenceNodes.item(i);\n                Element transformsElement = (Element) referenceElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Transforms&quot;).item(0);\n                Element transformElement = (Element) transformsElement.getElementsByTagNameNS(&quot;http://www.w3.org/2000/09/xmldsig#&quot;, &quot;Transform&quot;).item(0);\n        \n                addInclusiveNamespaces(transformElement, &quot;wsse soapenv urn&quot;);\n            }\n        \n        \n        }\n</code></pre>\n<p>I tried to compare the two requests and now I attach them to you</p>\n<p>SOAP UI REQUEST</p>\n<pre><code>        &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\n        xmlns:urn=&quot;urn:sap-com:document:sap:rfc:functions&quot;&gt;\n        &lt;soapenv:Header&gt;\n            &lt;wsse:Security\n                xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;\n                xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&gt;\n                &lt;wsse:BinarySecurityToken\n                    EncodingType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary&quot;\n                    ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot;\n                    wsu:Id=&quot;X509-8C92EF6DC231D5F4321700816423308691&quot;&gt;\n                    MIIIEjCCBfqgAwIBAgITHQAAZ/wkXidRhqKJ2wADAABn/DANBgkqhkiG...........&lt;/wsse:BinarySecurityToken&gt;\n                &lt;wsu:Timestamp wsu:Id=&quot;TS-8C92EF6DC231D5F4321700816423307690&quot;&gt;\n                    &lt;wsu:Created&gt;2023-11-24T09:00:23Z&lt;/wsu:Created&gt;\n                    &lt;wsu:Expires&gt;2024-02-15T17:00:23Z&lt;/wsu:Expires&gt;\n                &lt;/wsu:Timestamp&gt;\n                &lt;ds:Signature Id=&quot;SIG-8C92EF6DC231D5F4321700816423348695&quot;\n                    xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;\n                    &lt;ds:SignedInfo&gt;\n                        &lt;ds:CanonicalizationMethod Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\n                            &lt;ec:InclusiveNamespaces PrefixList=&quot;soapenv urn&quot;\n                                xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\n                        &lt;/ds:CanonicalizationMethod&gt;\n                        &lt;ds:SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot; /&gt;\n                        &lt;ds:Reference URI=&quot;#TS-8C92EF6DC231D5F4321700816423307690&quot;&gt;\n                            &lt;ds:Transforms&gt;\n                                &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\n                                    &lt;ec:InclusiveNamespaces PrefixList=&quot;wsse soapenv urn&quot;\n                                        xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\n                                &lt;/ds:Transform&gt;\n                            &lt;/ds:Transforms&gt;\n                            &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\n                            &lt;ds:DigestValue&gt;7KhZ1yTPuNhQ7OtTn32HcJQQ04U=&lt;/ds:DigestValue&gt;\n                        &lt;/ds:Reference&gt;\n                        &lt;ds:Reference URI=&quot;#id-8C92EF6DC231D5F4321700816423308694&quot;&gt;\n                            &lt;ds:Transforms&gt;\n                                &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\n                                    &lt;ec:InclusiveNamespaces PrefixList=&quot;&quot;\n                                        xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot; /&gt;\n                                &lt;/ds:Transform&gt;\n                            &lt;/ds:Transforms&gt;\n                            &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\n                            &lt;ds:DigestValue&gt;t5f22r+WwrehIN/rbI7EFwLq7tM=&lt;/ds:DigestValue&gt;\n                        &lt;/ds:Reference&gt;\n                    &lt;/ds:SignedInfo&gt;\n                    &lt;ds:SignatureValue&gt;\n                        KRttsmdFmqCRQyTmo6/Cgs1Vj8EZ1y9YbObETjtcvhNQUBRny7tIKZE3bH4TwR69L2x0MsosaAcefeuT/OkowAa............&lt;/ds:SignatureValue&gt;\n                    &lt;ds:KeyInfo Id=&quot;KI-8C92EF6DC231D5F4321700816423308692&quot;&gt;\n                        &lt;wsse:SecurityTokenReference wsu:Id=&quot;STR-8C92EF6DC231D5F4321700816423308693&quot;&gt;\n                            &lt;wsse:Reference URI=&quot;#X509-8C92EF6DC231D5F4321700816423308691&quot;\n                                ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot; /&gt;\n                        &lt;/wsse:SecurityTokenReference&gt;\n                    &lt;/ds:KeyInfo&gt;\n                &lt;/ds:Signature&gt;\n            &lt;/wsse:Security&gt;\n        &lt;/soapenv:Header&gt;\n        &lt;soapenv:Body wsu:Id=&quot;id-8C92EF6DC231D5F4321700816423308694&quot;\n            xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&gt;\n            &lt;urn:SCHEMA_CC&gt;\n                &lt;IV_BP&gt;3960915933&lt;/IV_BP&gt;\n            &lt;/urn:SCHEMA_CC&gt;\n        &lt;/soapenv:Body&gt;\n    &lt;/soapenv:Envelope&gt;\n</code></pre>\n<p>My request java</p>\n<pre><code>            &lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\n            xmlns:urn=&quot;urn:sap-com:document:sap:rfc:functions&quot;&gt;\n            &lt;soapenv:Header&gt;\n                &lt;wsse:Security\n                    xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot;\n                    xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;\n                    Id=&quot;SIG-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\n                    &lt;wsu:Timestamp wsu:Id=&quot;TS-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\n                        &lt;wsu:Created&gt;2023-11-24T08:18:32Z&lt;/wsu:Created&gt;\n                        &lt;wsu:Expires&gt;2023-11-24T08:19:02Z&lt;/wsu:Expires&gt;\n                    &lt;/wsu:Timestamp&gt;\n                    &lt;wsse:BinarySecurityToken\n                        EncodingType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary&quot;\n                        ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot;\n                        wsu:Id=&quot;X509Token-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\n                        MIIIEjCCBfqgAwIBAgITHQAAZ/wkXidRhqKJ2wADAABn..........&lt;/wsse:BinarySecurityToken&gt;\n                    &lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;\n                        &lt;ds:SignedInfo&gt;\n                            &lt;ds:CanonicalizationMethod Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\n                                &lt;ec:InclusiveNamespaces xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;\n                                    PrefixList=&quot;soapenv urn&quot; /&gt;\n                            &lt;/ds:CanonicalizationMethod&gt;\n                            &lt;ds:SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot; /&gt;\n                            &lt;ds:Reference URI=&quot;#Body-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\n                                &lt;ds:Transforms&gt;\n                                    &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\n                                        &lt;ec:InclusiveNamespaces\n                                            xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;\n                                            PrefixList=&quot;wsse soapenv urn&quot; /&gt;\n                                    &lt;/ds:Transform&gt;\n                                &lt;/ds:Transforms&gt;\n                                &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\n                                &lt;ds:DigestValue&gt;qOQ+Nv9QAe63RePMKZkCfn2a8xI=&lt;/ds:DigestValue&gt;\n                            &lt;/ds:Reference&gt;\n                            &lt;ds:Reference URI=&quot;#TS-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\n                                &lt;ds:Transforms&gt;\n                                    &lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;&gt;\n                                        &lt;ec:InclusiveNamespaces\n                                            xmlns:ec=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;\n                                            PrefixList=&quot;wsse soapenv urn&quot; /&gt;\n                                    &lt;/ds:Transform&gt;\n                                &lt;/ds:Transforms&gt;\n                                &lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot; /&gt;\n                                &lt;ds:DigestValue&gt;grbt4GpvYhKKUaetcW2HHMm91Mw=&lt;/ds:DigestValue&gt;\n                            &lt;/ds:Reference&gt;\n                        &lt;/ds:SignedInfo&gt;\n                        &lt;ds:SignatureValue&gt;agesPe4aOZPE9m1aI17MDz+oE5V7YNk7ox6q1WvmHWjd7EdH4XdqVq62dMnqkE2RRbI5TafX1qnK&amp;#13;\n                            udGLnMFcZu/gIYMUYmZ1RrwO6y39tLDWii8hEIZMYj/jIzAqi6d1jXh8GOjtmflYnIsRnidFgokV&amp;#13;\n                            /fgoMn7c548QlvEPyCokgFlS/aF4OF5uKqnb/yJ2ilRbeJBlG9QCO5rEUGmgeZ0untABzP+w76yg&amp;#13;\n                            PTkPaDTC8UHDQsG4XWMTYL+dyGfnHpYdqz5v+4BI53KfG0V7eqbdCZj9dzYN2MEel1NrgqQP2uQ8&amp;#13;\n                            .........&lt;/ds:SignatureValue&gt;\n                        &lt;ds:KeyInfo&gt;\n                            &lt;wsse:SecurityTokenReference Id=&quot;KI-1B1352404FC17AFA99AD1B962FA2A67E&quot;\n                                wsu:Id=&quot;STR-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\n                                &lt;wsse:Reference URI=&quot;#X509Token-1B1352404FC17AFA99AD1B962FA2A67E&quot;\n                                    ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot; /&gt;\n                            &lt;/wsse:SecurityTokenReference&gt;\n                        &lt;/ds:KeyInfo&gt;\n                    &lt;/ds:Signature&gt;\n                &lt;/wsse:Security&gt;\n            &lt;/soapenv:Header&gt;\n            &lt;soapenv:Body\n                xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;\n                wsu:Id=&quot;Body-1B1352404FC17AFA99AD1B962FA2A67E&quot;&gt;\n                &lt;urn:GET_SCHEMA_CC xmlns:urn=&quot;http://www.example.com/urn&quot;&gt;\n                        &lt;IV_BP&gt;3960915933&lt;/IV_BP&gt;\n                \n                &lt;/urn:GET_SCHEMA_CC&gt;\n            &lt;/soapenv:Body&gt;\n        &lt;/soapenv:Envelope&gt;\n</code></pre>\n<p>The way to put the certificate in the securityBinaryToken seems correct to me, while the signature I don't know if it is the correct way to do it.</p>\n"},{"tags":["java","android","libgdx"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701083985,"post_id":77525021,"comment_id":136726870,"body_markdown":"Hi! Thanks for your answer! I Found more detailed example in libgdx library. Although your answer is much smaller","link":"https://stackoverflow.com/questions/77489393/debug-grid-for-libgdx/77525021#comment136726870_77525021","body":"Hi! Thanks for your answer! I Found more detailed example in libgdx library. Although your answer is much smaller"}],"comment_count":1,"score":0,"last_activity_date":1700589909,"creation_date":1700589909,"answer_id":77525021,"question_id":77489393,"body_markdown":"You can use &#39;createLineGrid&#39; on `ModelBuilder` to create a grid that (unless you rotate it) extends in the **X-Z** plane.\r\n\r\nFor example:\r\n\r\n    grid = modelBuilder.createLineGrid(\r\n\t   32, 32, 10.0f, 10.0f, \r\n\t\tnew Material(ColorAttribute.createDiffuse(Color.RED)), \r\n\t\tVertexAttributes.Usage.Position | VertexAttributes.Usage.Normal);\r\n\r\n    gridInstance = new ModelInstance(grid);\r\n\r\nWhere `grid` is a `Model` and `gridInstance` is a `ModelInstance`.\r\nThen you just have to include a `render` call to your `ModelBatch`:\r\n\r\n    modelBatch.render(gridInstance);\r\n\r\nDoing that on you code yields this render:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nYou can customize how many grid lines and their spacing to fit your need.\r\n\r\n  [1]: https://i.stack.imgur.com/STmef.png","link":"https://stackoverflow.com/questions/77489393/debug-grid-for-libgdx/77525021#77525021","title":"Debug grid for libgdx","body":"<p>You can use 'createLineGrid' on <code>ModelBuilder</code> to create a grid that (unless you rotate it) extends in the <strong>X-Z</strong> plane.</p>\n<p>For example:</p>\n<pre><code>grid = modelBuilder.createLineGrid(\n   32, 32, 10.0f, 10.0f, \n    new Material(ColorAttribute.createDiffuse(Color.RED)), \n    VertexAttributes.Usage.Position | VertexAttributes.Usage.Normal);\n\ngridInstance = new ModelInstance(grid);\n</code></pre>\n<p>Where <code>grid</code> is a <code>Model</code> and <code>gridInstance</code> is a <code>ModelInstance</code>.\nThen you just have to include a <code>render</code> call to your <code>ModelBatch</code>:</p>\n<pre><code>modelBatch.render(gridInstance);\n</code></pre>\n<p>Doing that on you code yields this render:</p>\n<p><a href=\"https://i.stack.imgur.com/STmef.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/STmef.png\" alt=\"enter image description here\" /></a></p>\n<p>You can customize how many grid lines and their spacing to fit your need.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701083951,"creation_date":1701083951,"answer_id":77556477,"question_id":77489393,"body_markdown":"After a little bit of seraching, I found this amazing list of examples for libgdx, including grid with axis: \r\n\r\n    private void createAxes() {\r\n            final float GRID_MIN = -viewPortWidth;\r\n            final float GRID_MAX = viewPortWidth;\r\n            final float GRID_STEP = viewPortWidth / 10;\r\n    \r\n            ModelBuilder modelBuilder = new ModelBuilder();\r\n            modelBuilder.begin();\r\n            MeshPartBuilder builder = modelBuilder.part(&quot;grid&quot;, GL20.GL_LINES, Usage.Position | Usage.ColorUnpacked, new Material());\r\n            builder.setColor(Color.LIGHT_GRAY);\r\n            for (float t = GRID_MIN; t &lt;= GRID_MAX; t += GRID_STEP) {\r\n                builder.line(t, 0, GRID_MIN, t, 0, GRID_MAX);\r\n                builder.line(GRID_MIN, 0, t, GRID_MAX, 0, t);\r\n            }\r\n            builder = modelBuilder.part(&quot;axes&quot;, GL20.GL_LINES, Usage.Position | Usage.ColorUnpacked, new Material());\r\n            builder.setColor(Color.RED);\r\n            builder.line(0, 0, 0, 100, 0, 0);\r\n            builder.setColor(Color.GREEN);\r\n            builder.line(0, 0, 0, 0, 100, 0);\r\n            builder.setColor(Color.BLUE);\r\n            builder.line(0, 0, 0, 0, 0, 100);\r\n            Model axesModel = modelBuilder.end();\r\n            models.add(axesModel);\r\n            ModelInstance instance = new ModelInstance(axesModel);\r\n            instances.add(instance);\r\n        }\r\n\r\n\r\nAnd here is an example how to use it: https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/g3d/BaseG3dTest.java\r\n","link":"https://stackoverflow.com/questions/77489393/debug-grid-for-libgdx/77556477#77556477","title":"Debug grid for libgdx","body":"<p>After a little bit of seraching, I found this amazing list of examples for libgdx, including grid with axis:</p>\n<pre><code>private void createAxes() {\n        final float GRID_MIN = -viewPortWidth;\n        final float GRID_MAX = viewPortWidth;\n        final float GRID_STEP = viewPortWidth / 10;\n\n        ModelBuilder modelBuilder = new ModelBuilder();\n        modelBuilder.begin();\n        MeshPartBuilder builder = modelBuilder.part(&quot;grid&quot;, GL20.GL_LINES, Usage.Position | Usage.ColorUnpacked, new Material());\n        builder.setColor(Color.LIGHT_GRAY);\n        for (float t = GRID_MIN; t &lt;= GRID_MAX; t += GRID_STEP) {\n            builder.line(t, 0, GRID_MIN, t, 0, GRID_MAX);\n            builder.line(GRID_MIN, 0, t, GRID_MAX, 0, t);\n        }\n        builder = modelBuilder.part(&quot;axes&quot;, GL20.GL_LINES, Usage.Position | Usage.ColorUnpacked, new Material());\n        builder.setColor(Color.RED);\n        builder.line(0, 0, 0, 100, 0, 0);\n        builder.setColor(Color.GREEN);\n        builder.line(0, 0, 0, 0, 100, 0);\n        builder.setColor(Color.BLUE);\n        builder.line(0, 0, 0, 0, 0, 100);\n        Model axesModel = modelBuilder.end();\n        models.add(axesModel);\n        ModelInstance instance = new ModelInstance(axesModel);\n        instances.add(instance);\n    }\n</code></pre>\n<p>And here is an example how to use it: <a href=\"https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/g3d/BaseG3dTest.java\" rel=\"nofollow noreferrer\">https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/g3d/BaseG3dTest.java</a></p>\n"}],"comment_count":0,"is_answered":true,"view_count":18,"answer_count":2,"score":1,"last_activity_date":1701083951,"creation_date":1700065550,"question_id":77489393,"body_markdown":"Can I somehow draw a 3d grid in my libgdx app, so I can zoom in and out of this grid in order to see what is going on with my application? \r\nFor example, I&#39;m trying to create a simple sphere, that should be in the middle of the screen, but it is not, and it is squished or somethig.\r\n\r\n\r\nI want to know, where my camera is and what is the camera&#39;s view angle, all inside the scene. Here is the code, because stackoverflow asks for the code.\r\n\r\n    @Override\r\n        public void create() {\r\n            modelBatch = new ModelBatch();\r\n            environment = new Environment();\r\n            environment.set(new ColorAttribute(ColorAttribute.AmbientLight, 0.4f, 0.4f, 0.4f, 1f));\r\n            environment.add(new DirectionalLight().set(0.8f, 0.8f, 0.8f, 10f, 10f, 20f));\r\n    \r\n            cam = new PerspectiveCamera(67, Gdx.graphics.getWidth(), Gdx.graphics.getHeight());\r\n            cam.position.set(150f, -9f, 200f);\r\n            cam.lookAt(0, 0, 0);\r\n            cam.near = 1f;\r\n            cam.far = 300f;\r\n            cam.update();\r\n    \r\n    \r\n            ModelBuilder modelBuilder = new ModelBuilder();\r\n            model = modelBuilder.createSphere(120f, 120f, 120, 32, 32,\r\n                    new Material(ColorAttribute.createDiffuse(Color.GREEN)),\r\n                    VertexAttributes.Usage.Position | VertexAttributes.Usage.Normal);\r\n            instance = new ModelInstance(model);\r\n            instance.transform.set(new Vector3(100, 100, 0), new Quaternion());\r\n        }\r\n\r\n\r\nCan I do that?\r\n","link":"https://stackoverflow.com/questions/77489393/debug-grid-for-libgdx","title":"Debug grid for libgdx","body":"<p>Can I somehow draw a 3d grid in my libgdx app, so I can zoom in and out of this grid in order to see what is going on with my application?\nFor example, I'm trying to create a simple sphere, that should be in the middle of the screen, but it is not, and it is squished or somethig.</p>\n<p>I want to know, where my camera is and what is the camera's view angle, all inside the scene. Here is the code, because stackoverflow asks for the code.</p>\n<pre><code>@Override\n    public void create() {\n        modelBatch = new ModelBatch();\n        environment = new Environment();\n        environment.set(new ColorAttribute(ColorAttribute.AmbientLight, 0.4f, 0.4f, 0.4f, 1f));\n        environment.add(new DirectionalLight().set(0.8f, 0.8f, 0.8f, 10f, 10f, 20f));\n\n        cam = new PerspectiveCamera(67, Gdx.graphics.getWidth(), Gdx.graphics.getHeight());\n        cam.position.set(150f, -9f, 200f);\n        cam.lookAt(0, 0, 0);\n        cam.near = 1f;\n        cam.far = 300f;\n        cam.update();\n\n\n        ModelBuilder modelBuilder = new ModelBuilder();\n        model = modelBuilder.createSphere(120f, 120f, 120, 32, 32,\n                new Material(ColorAttribute.createDiffuse(Color.GREEN)),\n                VertexAttributes.Usage.Position | VertexAttributes.Usage.Normal);\n        instance = new ModelInstance(model);\n        instance.transform.set(new Vector3(100, 100, 0), new Quaternion());\n    }\n</code></pre>\n<p>Can I do that?</p>\n"},{"tags":["java","android","c++","java-native-interface"],"comments":[{"score":0,"post_type":"question","creation_date":1701085150,"post_id":77556356,"comment_id":136727046,"body_markdown":"This is a common gotcha: only the main thread has the correct class loader set up.","link":"https://stackoverflow.com/questions/77556356/jni-call-to-findclass-returns-null-when-run-on-a-new-thread#comment136727046_77556356","body":"This is a common gotcha: only the main thread has the correct class loader set up."},{"score":0,"post_type":"question","creation_date":1701175967,"post_id":77556356,"comment_id":136740473,"body_markdown":"What Java exception is thrown?","link":"https://stackoverflow.com/questions/77556356/jni-call-to-findclass-returns-null-when-run-on-a-new-thread#comment136740473_77556356","body":"What Java exception is thrown?"}],"comment_count":2,"is_answered":false,"view_count":44,"answer_count":0,"score":0,"last_activity_date":1701083575,"creation_date":1701082743,"question_id":77556356,"body_markdown":"I am writing an Android appliction and am using JNI to call Java functions from C++. The following code works as expected, retrieving a reference to a static Java method and then calling it.\r\n```cpp\r\n_JNIEnv *env = g_globalJniEnv;\r\njclass clazz = env-&gt;FindClass( &quot;com/company/ClassName&quot; );\r\njmethodID method = env-&gt;GetStaticMethodID( clazz, &quot;methodName&quot;, &quot;()V&quot; );\r\nenv-&gt;CallStaticVoidMethod( clazz, method );\r\n```\r\nHowever when I try to do the same thing on a `std::thread` the call to `FindClass` is returning NULL.\r\n```cpp\r\nstd::thread callMethod( [] {\r\n    JNIEnv *env;\r\n    g_jvm-&gt;AttachCurrentThread( &amp;env, NULL );\r\n    jclass clazz = env-&gt;FindClass( &quot;com/company/ClassName&quot; );\r\n    jmethodID method = env-&gt;GetStaticMethodID( clazz, &quot;methodName&quot;, &quot;()V&quot; );\r\n    env-&gt;CallStaticVoidMethod( clazz, method );\r\n    g_jvm-&gt;DetachCurrentThread();\r\n} );\r\ncallMethod.detach();\r\n```\r\nIs there something missing from my implementation?","link":"https://stackoverflow.com/questions/77556356/jni-call-to-findclass-returns-null-when-run-on-a-new-thread","title":"JNI call to FindClass returns null when run on a new thread","body":"<p>I am writing an Android appliction and am using JNI to call Java functions from C++. The following code works as expected, retrieving a reference to a static Java method and then calling it.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>_JNIEnv *env = g_globalJniEnv;\njclass clazz = env-&gt;FindClass( &quot;com/company/ClassName&quot; );\njmethodID method = env-&gt;GetStaticMethodID( clazz, &quot;methodName&quot;, &quot;()V&quot; );\nenv-&gt;CallStaticVoidMethod( clazz, method );\n</code></pre>\n<p>However when I try to do the same thing on a <code>std::thread</code> the call to <code>FindClass</code> is returning NULL.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>std::thread callMethod( [] {\n    JNIEnv *env;\n    g_jvm-&gt;AttachCurrentThread( &amp;env, NULL );\n    jclass clazz = env-&gt;FindClass( &quot;com/company/ClassName&quot; );\n    jmethodID method = env-&gt;GetStaticMethodID( clazz, &quot;methodName&quot;, &quot;()V&quot; );\n    env-&gt;CallStaticVoidMethod( clazz, method );\n    g_jvm-&gt;DetachCurrentThread();\n} );\ncallMethod.detach();\n</code></pre>\n<p>Is there something missing from my implementation?</p>\n"},{"tags":["java","vaadin","hilla"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701729663,"post_id":77556392,"comment_id":136809786,"body_markdown":"Thanks, after adding maven to the path issue get resolved.","link":"https://stackoverflow.com/questions/77551620/hilla-app-launch-error-no-valid-executable-found/77556392#comment136809786_77556392","body":"Thanks, after adding maven to the path issue get resolved."}],"comment_count":1,"score":1,"last_activity_date":1701083054,"creation_date":1701083054,"answer_id":77556392,"question_id":77551620,"body_markdown":"You can get more details about the issue by setting a more detailed log level in `application.properties`, for example:\r\n```\r\nlogging.level.dev.hilla=trace\r\n```\r\nBut it seems that Maven cannot be found, and I see that the application you&#39;re trying to run misses the Maven Wrapper.\r\n\r\nEither add the wrapper to the application or make sure your local Maven is available on PATH.","link":"https://stackoverflow.com/questions/77551620/hilla-app-launch-error-no-valid-executable-found/77556392#77556392","title":"Hilla app launch error. No valid executable found","body":"<p>You can get more details about the issue by setting a more detailed log level in <code>application.properties</code>, for example:</p>\n<pre><code>logging.level.dev.hilla=trace\n</code></pre>\n<p>But it seems that Maven cannot be found, and I see that the application you're trying to run misses the Maven Wrapper.</p>\n<p>Either add the wrapper to the application or make sure your local Maven is available on PATH.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":70,"answer_count":1,"score":-2,"last_activity_date":1701083054,"creation_date":1701000977,"question_id":77551620,"body_markdown":"Trying to launch the hilla app and getting below error message:\r\n\r\nI am trying to launch the application from this github repo: https://github.com/marcushellberg/customer-support-agent\r\n\r\n```\r\ndev.hilla.engine.commandrunner.CommandNotFoundException: No valid executable found\r\n\tat dev.hilla.engine.commandrunner.CommandRunner.lambda$run$0(CommandRunner.java:72) ~[engine-core-2.2.0.jar:na]\r\n\tat java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]\r\n\tat dev.hilla.engine.commandrunner.CommandRunner.run(CommandRunner.java:72) ~[engine-core-2.2.0.jar:na]\r\n\tat dev.hilla.internal.AbstractTaskEndpointGenerator.prepareEngineConfiguration(AbstractTaskEndpointGenerator.java:87) ~[engine-runtime-2.2.0.jar:na]\r\n\tat dev.hilla.internal.AbstractTaskEndpointGenerator.getEngineConfiguration(AbstractTaskEndpointGenerator.java:59) ~[engine-runtime-2.2.0.jar:na]\r\n\tat dev.hilla.internal.TaskGenerateOpenAPIImpl.execute(TaskGenerateOpenAPIImpl.java:67) ~[engine-runtime-2.2.0.jar:na]\r\n\tat com.vaadin.flow.server.frontend.NodeTasks.execute(NodeTasks.java:312) ~[flow-server-24.1.11.jar:24.1.11]\r\n\tat com.vaadin.base.devserver.startup.DevModeInitializer.runNodeTasks(DevModeInitializer.java:352) ~[vaadin-dev-server-24.1.11.jar:na]\r\n\tat com.vaadin.base.devserver.startup.DevModeInitializer.lambda$initDevModeHandler$0(DevModeInitializer.java:293) ~[vaadin-dev-server-24.1.11.jar:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804) ~[na:na]\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796) ~[na:na]\r\n\tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387) ~[na:na]\r\n\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1312) ~[na:na]\r\n\tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1843) ~[na:na]\r\n\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1808) ~[na:na]\r\n\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188) ~[na:na]```","link":"https://stackoverflow.com/questions/77551620/hilla-app-launch-error-no-valid-executable-found","title":"Hilla app launch error. No valid executable found","body":"<p>Trying to launch the hilla app and getting below error message:</p>\n<p>I am trying to launch the application from this github repo: <a href=\"https://github.com/marcushellberg/customer-support-agent\" rel=\"nofollow noreferrer\">https://github.com/marcushellberg/customer-support-agent</a></p>\n<pre><code>dev.hilla.engine.commandrunner.CommandNotFoundException: No valid executable found\n    at dev.hilla.engine.commandrunner.CommandRunner.lambda$run$0(CommandRunner.java:72) ~[engine-core-2.2.0.jar:na]\n    at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]\n    at dev.hilla.engine.commandrunner.CommandRunner.run(CommandRunner.java:72) ~[engine-core-2.2.0.jar:na]\n    at dev.hilla.internal.AbstractTaskEndpointGenerator.prepareEngineConfiguration(AbstractTaskEndpointGenerator.java:87) ~[engine-runtime-2.2.0.jar:na]\n    at dev.hilla.internal.AbstractTaskEndpointGenerator.getEngineConfiguration(AbstractTaskEndpointGenerator.java:59) ~[engine-runtime-2.2.0.jar:na]\n    at dev.hilla.internal.TaskGenerateOpenAPIImpl.execute(TaskGenerateOpenAPIImpl.java:67) ~[engine-runtime-2.2.0.jar:na]\n    at com.vaadin.flow.server.frontend.NodeTasks.execute(NodeTasks.java:312) ~[flow-server-24.1.11.jar:24.1.11]\n    at com.vaadin.base.devserver.startup.DevModeInitializer.runNodeTasks(DevModeInitializer.java:352) ~[vaadin-dev-server-24.1.11.jar:na]\n    at com.vaadin.base.devserver.startup.DevModeInitializer.lambda$initDevModeHandler$0(DevModeInitializer.java:293) ~[vaadin-dev-server-24.1.11.jar:na]\n    at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1804) ~[na:na]\n    at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796) ~[na:na]\n    at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387) ~[na:na]\n    at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1312) ~[na:na]\n    at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1843) ~[na:na]\n    at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1808) ~[na:na]\n    at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188) ~[na:na]```\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"score":5,"post_type":"question","creation_date":1701081880,"post_id":77556196,"comment_id":136726538,"body_markdown":"As presented, the controller has no endpoints","link":"https://stackoverflow.com/questions/77556196/spring-boot-3-endpoint-404#comment136726538_77556196","body":"As presented, the controller has no endpoints"},{"score":1,"post_type":"question","creation_date":1701081962,"post_id":77556196,"comment_id":136726553,"body_markdown":"Add a method to your controller with for example a `@GetMapping` annotation that returns the data you want the web service to return.","link":"https://stackoverflow.com/questions/77556196/spring-boot-3-endpoint-404#comment136726553_77556196","body":"Add a method to your controller with for example a <code>@GetMapping</code> annotation that returns the data you want the web service to return."},{"score":0,"post_type":"question","creation_date":1701084850,"post_id":77556196,"comment_id":136727006,"body_markdown":"Which endpoint are you calling? i dont see any defined on your controller.","link":"https://stackoverflow.com/questions/77556196/spring-boot-3-endpoint-404#comment136727006_77556196","body":"Which endpoint are you calling? i dont see any defined on your controller."}],"comment_count":3,"is_answered":false,"view_count":42,"answer_count":0,"score":0,"last_activity_date":1701081709,"creation_date":1701081219,"last_edit_date":1701081709,"question_id":77556196,"body_markdown":"When I call the endpoint, I receive a 404 error. The problem may be that the annotation SpringBootApplication cannot find the controller.      \r\n\r\nFor information I use spring-boot 3.2 and IDE intellij.  \r\n```\r\n@SpringBootApplication\r\npublic class TaskManagementApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(TaskManagementApplication.class, args);\r\n    }\r\n}\r\n```\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/users&quot;)\r\npublic class UserController {\r\n\r\n    private final UserService userService;\r\n\r\n    @Autowired\r\n    public UserController(UserService userService) {\r\n        this.userService = userService;\r\n    }\r\n}\r\n```\r\n[project structure ](https://i.stack.imgur.com/zKsBh.png)\r\n\r\nI tried this, but it didn&#39;t work.\r\n```\r\n@SpringBootApplication(scanBasePackages = {&quot;com.other.packages&quot;,&quot;com.other&quot;})\r\n```","link":"https://stackoverflow.com/questions/77556196/spring-boot-3-endpoint-404","title":"Spring boot 3 endpoint 404","body":"<p>When I call the endpoint, I receive a 404 error. The problem may be that the annotation SpringBootApplication cannot find the controller.</p>\n<p>For information I use spring-boot 3.2 and IDE intellij.</p>\n<pre><code>@SpringBootApplication\npublic class TaskManagementApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(TaskManagementApplication.class, args);\n    }\n}\n</code></pre>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/users&quot;)\npublic class UserController {\n\n    private final UserService userService;\n\n    @Autowired\n    public UserController(UserService userService) {\n        this.userService = userService;\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zKsBh.png\" rel=\"nofollow noreferrer\">project structure </a></p>\n<p>I tried this, but it didn't work.</p>\n<pre><code>@SpringBootApplication(scanBasePackages = {&quot;com.other.packages&quot;,&quot;com.other&quot;})\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-cloud"],"comments":[{"score":0,"post_type":"question","creation_date":1701080084,"post_id":77541216,"comment_id":136726252,"body_markdown":"The fact that you have that messy excludes and manual includes makes me believe you are mxing wrong versions. You should have a spring cloud dependency import and now versions or excludes for anything else.","link":"https://stackoverflow.com/questions/77541216/even-though-property-is-set-but-still-this-issue-no-spring-config-import-propert#comment136726252_77541216","body":"The fact that you have that messy excludes and manual includes makes me believe you are mxing wrong versions. You should have a spring cloud dependency import and now versions or excludes for anything else."}],"comment_count":1,"is_answered":false,"view_count":103,"answer_count":0,"score":0,"last_activity_date":1701081624,"creation_date":1700808846,"last_edit_date":1701081624,"question_id":77541216,"body_markdown":"Below is my *application.properties*:\r\n\r\n```lang-none\r\nspring.profiles.active=test\r\nmodule.name=abc\r\n\r\n# Logging levels across packages (optional)\r\nlogging.level.root=WARN\r\n\r\nspring.cloud.config.import-check.enabled=false\r\n```\r\n\r\nI have these dependency in my [POM][1] file:\r\n\r\n```lang-xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-cloud-config-client&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-config-client&lt;/artifactId&gt; \r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;-org.springframework.cloud&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.4&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.4&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-commons --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nBut still I am getting this error:\r\n\r\n```lang-xml\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nNo spring.config.import property has been defined\r\n\r\nAction:\r\n\r\nAdd a spring.config.import=configserver: property to your configuration.\r\n\r\nIf configuration is not required add spring.config.import=optional:configserver: instead.\r\nTo disable this check, set spring.cloud.config.enabled=false or\r\nspring.cloud.config.import-check.enabled=false.\r\n\r\norg.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor$ImportException: No spring.config.import set\r\n\r\n\tat org.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor.postProcessEnvironment(ConfigDataMissingEnvironmentPostProcessor.java:79)\r\n\tat org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:102)\r\n\tat org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:87)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:82)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:63)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:117)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:111)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:62)\r\n\tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:375)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:333)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1365)\r\n\r\n```\r\n\r\nAs you can see, I have already added the `config(spring.cloud.config.import-check.enabled=false)` in my *application.properties*, but I am still getting the issue, can anyone please suggest what should I do?\r\n\r\nFYI, I tried the below stuff as well:\r\n\r\n1. adding spring.cloud.config.enabled=false\r\n2. adding spring.config.import=optional:configserver:\r\n\r\nBut none of these were helpful.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Maven#Project_Object_Model\r\n","link":"https://stackoverflow.com/questions/77541216/even-though-property-is-set-but-still-this-issue-no-spring-config-import-propert","title":"Even though property is set but still this issue No spring.config.import property has been defined","body":"<p>Below is my <em>application.properties</em>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.profiles.active=test\nmodule.name=abc\n\n# Logging levels across packages (optional)\nlogging.level.root=WARN\n\nspring.cloud.config.import-check.enabled=false\n</code></pre>\n<p>I have these dependency in my <a href=\"https://en.wikipedia.org/wiki/Apache_Maven#Project_Object_Model\" rel=\"nofollow noreferrer\">POM</a> file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-config-client&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-config-client&lt;/artifactId&gt; \n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;-org.springframework.cloud&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n            &lt;version&gt;4.0.4&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n            &lt;version&gt;4.0.4&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-commons --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-commons&lt;/artifactId&gt;\n            &lt;version&gt;3.0.5&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>But still I am getting this error:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nNo spring.config.import property has been defined\n\nAction:\n\nAdd a spring.config.import=configserver: property to your configuration.\n\nIf configuration is not required add spring.config.import=optional:configserver: instead.\nTo disable this check, set spring.cloud.config.enabled=false or\nspring.cloud.config.import-check.enabled=false.\n\norg.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor$ImportException: No spring.config.import set\n\n    at org.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor.postProcessEnvironment(ConfigDataMissingEnvironmentPostProcessor.java:79)\n    at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:102)\n    at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:87)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\n    at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:82)\n    at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:63)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:117)\n    at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:111)\n    at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:62)\n    at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:375)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:333)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1365)\n\n</code></pre>\n<p>As you can see, I have already added the <code>config(spring.cloud.config.import-check.enabled=false)</code> in my <em>application.properties</em>, but I am still getting the issue, can anyone please suggest what should I do?</p>\n<p>FYI, I tried the below stuff as well:</p>\n<ol>\n<li>adding spring.cloud.config.enabled=false</li>\n<li>adding spring.config.import=optional:configserver:</li>\n</ol>\n<p>But none of these were helpful.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"score":0,"post_type":"question","creation_date":1701082456,"post_id":77556239,"comment_id":136726637,"body_markdown":"`which approach should be used at what scenario` - form submit sends a request (mostly post) to the server, while 302 redirection is a response (to a request), they are not interchangeable.","link":"https://stackoverflow.com/questions/77556239/difference-between-form-submit-and-302-redirection-in-spring#comment136726637_77556239","body":"<code>which approach should be used at what scenario</code> - form submit sends a request (mostly post) to the server, while 302 redirection is a response (to a request), they are not interchangeable."}],"comment_count":1,"is_answered":false,"view_count":16,"answer_count":0,"score":0,"last_activity_date":1701081578,"creation_date":1701081578,"question_id":77556239,"body_markdown":"want to understand what is the difference between a form submit by creating a jsp page in Spring and doing a 302 API redirect\r\n\r\nfor example I can create a get or post API redirect by redirecting to other url \r\n\t\t \r\n\r\n    httpServletResponse.setHeader(&quot;Location&quot;, fun.generateEnrolURL());\r\n    httpServletResponse.setStatus(302);\r\n\r\n \r\n\r\nsimilarly I can create a get api with return type ModelAndView and in the jsp create submit \r\n\r\n    &lt;script&gt;\r\n        $(document).ready(function () {\r\n            $(&quot;body&quot;).append(&#39;&lt;form method=&quot;post&quot; action=&quot;&#39; + &#39;${endPoint}&#39; + &#39;&quot; id=&quot;superMan&quot;&gt;&lt;/form&gt;&#39;);\r\n            $(&quot;#superMan&quot;).append(&#39;&lt;input type=&quot;hidden&quot; name=&quot;SITE&quot; value=&quot;&#39; + &#39;${abc.site}&#39; + &#39;&quot;/&gt;\r\n    \t\t&lt;input type=&quot;hidden&quot; name=&quot;LANGUAGE&quot; value=&quot;&#39; + &#39;${abc.language}&#39; + &#39;&quot;/&gt;\r\n            $(&quot;#superMan&quot;).submit();\r\n        });\r\n    &lt;/script&gt;\r\n\r\n\r\nsince both of these can redirect to another page which approach should be used at what scenario ","link":"https://stackoverflow.com/questions/77556239/difference-between-form-submit-and-302-redirection-in-spring","title":"Difference between form submit and 302 redirection in spring","body":"<p>want to understand what is the difference between a form submit by creating a jsp page in Spring and doing a 302 API redirect</p>\n<p>for example I can create a get or post API redirect by redirecting to other url</p>\n<pre><code>httpServletResponse.setHeader(&quot;Location&quot;, fun.generateEnrolURL());\nhttpServletResponse.setStatus(302);\n</code></pre>\n<p>similarly I can create a get api with return type ModelAndView and in the jsp create submit</p>\n<pre><code>&lt;script&gt;\n    $(document).ready(function () {\n        $(&quot;body&quot;).append('&lt;form method=&quot;post&quot; action=&quot;' + '${endPoint}' + '&quot; id=&quot;superMan&quot;&gt;&lt;/form&gt;');\n        $(&quot;#superMan&quot;).append('&lt;input type=&quot;hidden&quot; name=&quot;SITE&quot; value=&quot;' + '${abc.site}' + '&quot;/&gt;\n        &lt;input type=&quot;hidden&quot; name=&quot;LANGUAGE&quot; value=&quot;' + '${abc.language}' + '&quot;/&gt;\n        $(&quot;#superMan&quot;).submit();\n    });\n&lt;/script&gt;\n</code></pre>\n<p>since both of these can redirect to another page which approach should be used at what scenario</p>\n"},{"tags":["java","hashmap","binary-tree","subtree"],"comments":[{"score":3,"post_type":"question","creation_date":1701081576,"post_id":77556195,"comment_id":136726500,"body_markdown":"If `m` doesn&#39;t contain any mapping for `str`, `m.get(str)` will return `null`. That would cause `NPE` when auto unboxing in `m.get(str)==1`","link":"https://stackoverflow.com/questions/77556195/why-am-i-getting-java-lang-nullpointerexception-at-line-30#comment136726500_77556195","body":"If <code>m</code> doesn&#39;t contain any mapping for <code>str</code>, <code>m.get(str)</code> will return <code>null</code>. That would cause <code>NPE</code> when auto unboxing in <code>m.get(str)==1</code>"}],"comment_count":1,"is_answered":false,"view_count":34,"answer_count":0,"score":-1,"last_activity_date":1701081218,"creation_date":1701081218,"question_id":77556195,"body_markdown":"We have a binary tree, find all duplicate subtrees. For each duplicate subtree, we only need to return the root node of any one of them. Two trees are duplicates if they have the same structure with the same node values.\r\n\r\ni tried below code. i expected to return - &quot;4 2&quot; but code is giving null pointer exception at line 30. i traversed the tree in inorder traversal. Stored each subtree in hashmap &#39;m&#39; in the form of string &#39;str&#39; and then updating their value by 1. if a subtree is encountered again then i print the root of that subtree and then update its value by one in hashmap. \r\n\r\n```\r\n// A java program to find all duplicate subtrees \r\n// in a binary tree.\r\nimport java.util.HashMap;\r\npublic class Duplicate_subtress {\r\n\r\n\t/* A binary tree node has data, pointer to\r\n\tleft child and a pointer to right child */\r\n\tstatic HashMap&lt;String, Integer&gt; m;\r\n\tstatic class Node {\r\n\t\tint data;\r\n\t\tNode left;\r\n\t\tNode right;\r\n\t\tNode(int data){\r\n\t\t\tthis.data = data;\r\n\t\t\tleft = null;\r\n\t\t\tright = null;\r\n\t\t}\r\n\t}\r\n\tstatic String inorder(Node node)\r\n\t{\r\n\t\tif (node == null)\r\n\t\t\treturn &quot;&quot;;\r\n\t\r\n\t\tString str = &quot;(&quot;;\r\n\t\tstr += inorder(node.left);\r\n\t\tstr += Integer.toString(node.data);\r\n\t\tstr += inorder(node.right);\r\n\t\tstr += &quot;)&quot;;\r\n\t\t\r\n\t\tif ( m.get(str)==1 ) // line 30\r\n\t\t\tSystem.out.print( node.data + &quot; &quot;);\r\n\t\r\n\t\tif (m.containsKey(str))\r\n\t\t\tm.put(str, m.get(str) + 1);\r\n\t\telse\r\n\t\t\tm.put(str, 1);\r\n\t\t\r\n\t\t\r\n\t\treturn str;\r\n\t}\r\n\t\r\n\t// Wrapper over inorder()\r\n\tstatic void printAllDups(Node root)\r\n\t{\r\n\t\tm = new HashMap&lt;&gt;();\r\n\t\tinorder(root);\r\n\t} \r\n\t// Driver code\r\n\tpublic static void main(String args[])\r\n\t{\r\n\t\tNode root = null;\r\n\t\troot = new Node(1);\r\n\t\troot.left = new Node(2);\r\n\t\troot.right = new Node(3);\r\n\t\troot.left.left = new Node(4);\r\n\t\troot.right.left = new Node(2);\r\n\t\troot.right.left.left = new Node(4);\r\n\t\troot.right.right = new Node(4);\r\n\t\tprintAllDups(root);\r\n\t}\r\n}\r\n\r\n \r\n```","link":"https://stackoverflow.com/questions/77556195/why-am-i-getting-java-lang-nullpointerexception-at-line-30","title":"why am i getting java.lang.NullPointerException at line 30?","body":"<p>We have a binary tree, find all duplicate subtrees. For each duplicate subtree, we only need to return the root node of any one of them. Two trees are duplicates if they have the same structure with the same node values.</p>\n<p>i tried below code. i expected to return - &quot;4 2&quot; but code is giving null pointer exception at line 30. i traversed the tree in inorder traversal. Stored each subtree in hashmap 'm' in the form of string 'str' and then updating their value by 1. if a subtree is encountered again then i print the root of that subtree and then update its value by one in hashmap.</p>\n<pre><code>// A java program to find all duplicate subtrees \n// in a binary tree.\nimport java.util.HashMap;\npublic class Duplicate_subtress {\n\n    /* A binary tree node has data, pointer to\n    left child and a pointer to right child */\n    static HashMap&lt;String, Integer&gt; m;\n    static class Node {\n        int data;\n        Node left;\n        Node right;\n        Node(int data){\n            this.data = data;\n            left = null;\n            right = null;\n        }\n    }\n    static String inorder(Node node)\n    {\n        if (node == null)\n            return &quot;&quot;;\n    \n        String str = &quot;(&quot;;\n        str += inorder(node.left);\n        str += Integer.toString(node.data);\n        str += inorder(node.right);\n        str += &quot;)&quot;;\n        \n        if ( m.get(str)==1 ) // line 30\n            System.out.print( node.data + &quot; &quot;);\n    \n        if (m.containsKey(str))\n            m.put(str, m.get(str) + 1);\n        else\n            m.put(str, 1);\n        \n        \n        return str;\n    }\n    \n    // Wrapper over inorder()\n    static void printAllDups(Node root)\n    {\n        m = new HashMap&lt;&gt;();\n        inorder(root);\n    } \n    // Driver code\n    public static void main(String args[])\n    {\n        Node root = null;\n        root = new Node(1);\n        root.left = new Node(2);\n        root.right = new Node(3);\n        root.left.left = new Node(4);\n        root.right.left = new Node(2);\n        root.right.left.left = new Node(4);\n        root.right.right = new Node(4);\n        printAllDups(root);\n    }\n}\n\n \n</code></pre>\n"},{"tags":["java","windows","jboss","ejb-3.0","wildfly-10"],"comment_count":0,"is_answered":false,"view_count":28,"answer_count":0,"score":-1,"last_activity_date":1701081116,"creation_date":1701063351,"last_edit_date":1701081116,"question_id":77554704,"body_markdown":"I am trying to deploy an ear on Wildfly server using standalone.bat executable in standalone/deployment. I have added required configuration in standalone.xml file but when deploying I get following error. Is there anything that I am missing here?\r\nSame error occurs when I try to deploy ear using admin console.\r\n\r\n    ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;deploy&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;my-rest-service-ear-1.0-SNAPSHOT.ear&quot;)]) - failure description: {\r\n    &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.ejb.pool-config.StrictMaxPool&quot;],\r\n\r\nHere is my standalone.xml config for the same:\r\n\r\n    &lt;session-bean&gt;\r\n                &lt;stateless&gt;\r\n                    &lt;bean-instance-pool-ref pool-name=&quot;mdb-strict-max-pool&quot;/&gt;\r\n\t\t\t\t\t&lt;bean-instance-pool-ref pool-name=&quot;slsb-strict-max-pool&quot;/&gt;\r\n                &lt;/stateless&gt;\r\n                &lt;stateful default-access-timeout=&quot;5000&quot; cache-ref=&quot;simple&quot; passivation-disabled-cache-ref=&quot;simple&quot;/&gt;\r\n                &lt;singleton default-access-timeout=&quot;5000&quot;/&gt;\r\n            &lt;/session-bean&gt;\r\n            &lt;pools&gt;\r\n                &lt;bean-instance-pools&gt;\r\n                    &lt;strict-max-pool name=&quot;mdb-strict-max-pool&quot; max-pool-size=&quot;20&quot; instance-acquisition-timeout=&quot;5&quot; instance-acquisition-timeout-unit=&quot;MINUTES&quot;/&gt;\r\n                    &lt;strict-max-pool name=&quot;slsb-strict-max-pool&quot; max-pool-size=&quot;20&quot; instance-acquisition-timeout=&quot;5&quot; instance-acquisition-timeout-unit=&quot;MINUTES&quot;/&gt;\r\n                &lt;/bean-instance-pools&gt;\r\n            &lt;/pools&gt;\r\n\r\nAny help would be much appreciated, thank you!","link":"https://stackoverflow.com/questions/77554704/wildfly-jboss-error-required-services-that-are-not-installed-jboss-ejb-pool-co","title":"Wildfly/JBoss error - Required services that are not installed jboss.ejb.pool-config.StrictMaxPool","body":"<p>I am trying to deploy an ear on Wildfly server using standalone.bat executable in standalone/deployment. I have added required configuration in standalone.xml file but when deploying I get following error. Is there anything that I am missing here?\nSame error occurs when I try to deploy ear using admin console.</p>\n<pre><code>ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;deploy&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;my-rest-service-ear-1.0-SNAPSHOT.ear&quot;)]) - failure description: {\n&quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.ejb.pool-config.StrictMaxPool&quot;],\n</code></pre>\n<p>Here is my standalone.xml config for the same:</p>\n<pre><code>&lt;session-bean&gt;\n            &lt;stateless&gt;\n                &lt;bean-instance-pool-ref pool-name=&quot;mdb-strict-max-pool&quot;/&gt;\n                &lt;bean-instance-pool-ref pool-name=&quot;slsb-strict-max-pool&quot;/&gt;\n            &lt;/stateless&gt;\n            &lt;stateful default-access-timeout=&quot;5000&quot; cache-ref=&quot;simple&quot; passivation-disabled-cache-ref=&quot;simple&quot;/&gt;\n            &lt;singleton default-access-timeout=&quot;5000&quot;/&gt;\n        &lt;/session-bean&gt;\n        &lt;pools&gt;\n            &lt;bean-instance-pools&gt;\n                &lt;strict-max-pool name=&quot;mdb-strict-max-pool&quot; max-pool-size=&quot;20&quot; instance-acquisition-timeout=&quot;5&quot; instance-acquisition-timeout-unit=&quot;MINUTES&quot;/&gt;\n                &lt;strict-max-pool name=&quot;slsb-strict-max-pool&quot; max-pool-size=&quot;20&quot; instance-acquisition-timeout=&quot;5&quot; instance-acquisition-timeout-unit=&quot;MINUTES&quot;/&gt;\n            &lt;/bean-instance-pools&gt;\n        &lt;/pools&gt;\n</code></pre>\n<p>Any help would be much appreciated, thank you!</p>\n"},{"tags":["java","spring","hibernate"],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701079360,"last_edit_date":1701079360,"creation_date":1701076848,"answer_id":77555746,"question_id":77554940,"body_markdown":"&quot;Job Post Table does not have a List applications field&quot; &lt; that is correct in 1:N relationship.\r\n\r\n&gt;     JobPosting &quot;owns many&quot; Application \r\n&gt;     Many Application belong to &quot;one&quot; JobPosting\r\n\r\nIn database that is represented as a column (**id**) in ***applications*** table.\r\nJPA then load all related applications with special query/(queries).\r\n\r\nI would also recommend to have a look on FetchType which tells whether the list will be load directly when loading JobPosting or after you use *get method*. The default type as well as behavior depends on the particular implementation of JPA.\r\n\r\n    EAGER\r\n    Defines that data must be eagerly fetched.\r\n    LAZY\r\n    Defines that data can be lazily fetched.\r\n\r\n","link":"https://stackoverflow.com/questions/77554940/listtype-applications-is-not-listed-in-postgres-java-spring-boot-jpa-hiber/77555746#77555746","title":"List&lt;type&gt; applications is not listed in postgres. Java, spring boot, jpa, hibernate","body":"<p>&quot;Job Post Table does not have a List applications field&quot; &lt; that is correct in 1:N relationship.</p>\n<blockquote>\n<pre><code>JobPosting &quot;owns many&quot; Application \nMany Application belong to &quot;one&quot; JobPosting\n</code></pre>\n</blockquote>\n<p>In database that is represented as a column (<strong>id</strong>) in <em><strong>applications</strong></em> table.\nJPA then load all related applications with special query/(queries).</p>\n<p>I would also recommend to have a look on FetchType which tells whether the list will be load directly when loading JobPosting or after you use <em>get method</em>. The default type as well as behavior depends on the particular implementation of JPA.</p>\n<pre><code>EAGER\nDefines that data must be eagerly fetched.\nLAZY\nDefines that data can be lazily fetched.\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":39,"answer_count":1,"score":0,"last_activity_date":1701079360,"creation_date":1701067273,"last_edit_date":1701075161,"question_id":77554940,"body_markdown":"I&#39;m not familiar with using hibernate as much as I should be. I am able to Create a Job Post, I am also able to Send in an application for that. However, there seems to not be a connection between the two. The database has a &quot;jobs_id&quot; field, but the Job Post Table does not have a List&lt;Application&gt; applications field. I have done so many different combinations of code to figure this out and asked gpt 4 for help to no avail. See when I do a GET on postman for the candidates for the Job Post. Nothing shows up.\r\n\r\n\r\n    @Data\r\n    @Entity\r\n    @Table(name = &quot;applications&quot;, uniqueConstraints = {\r\n    @UniqueConstraint(columnNames = {&quot;email&quot;, &quot;jobs_id&quot;})})\r\n\r\n    public class Application {\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;jobs_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    @JsonBackReference\r\n    private JobPosting jobPosting;\r\n\r\n\r\n\r\n    @Data\r\n    @Entity\r\n    @Table(name = &quot;jobs&quot;)\r\n    public class JobPosting {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n\r\n\r\n    @OneToMany(mappedBy = &quot;jobPosting&quot;, cascade = CascadeType.ALL)\r\n    @JsonManagedReference\r\n    private List&lt;Application&gt; applications = new ArrayList&lt;&gt;();\r\n\r\n\r\nThe Above code is the part that is not showing up in postgres. I saw another post on stackoverflow that faced a similar issue to this. But was not able to find a solution to my problem.\r\n\r\n","link":"https://stackoverflow.com/questions/77554940/listtype-applications-is-not-listed-in-postgres-java-spring-boot-jpa-hiber","title":"List&lt;type&gt; applications is not listed in postgres. Java, spring boot, jpa, hibernate","body":"<p>I'm not familiar with using hibernate as much as I should be. I am able to Create a Job Post, I am also able to Send in an application for that. However, there seems to not be a connection between the two. The database has a &quot;jobs_id&quot; field, but the Job Post Table does not have a List applications field. I have done so many different combinations of code to figure this out and asked gpt 4 for help to no avail. See when I do a GET on postman for the candidates for the Job Post. Nothing shows up.</p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;applications&quot;, uniqueConstraints = {\n@UniqueConstraint(columnNames = {&quot;email&quot;, &quot;jobs_id&quot;})})\n\npublic class Application {\n\n@ManyToOne\n@JoinColumn(name = &quot;jobs_id&quot;, referencedColumnName = &quot;id&quot;)\n@JsonBackReference\nprivate JobPosting jobPosting;\n\n\n\n@Data\n@Entity\n@Table(name = &quot;jobs&quot;)\npublic class JobPosting {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Long id;\n\n\n\n@OneToMany(mappedBy = &quot;jobPosting&quot;, cascade = CascadeType.ALL)\n@JsonManagedReference\nprivate List&lt;Application&gt; applications = new ArrayList&lt;&gt;();\n</code></pre>\n<p>The Above code is the part that is not showing up in postgres. I saw another post on stackoverflow that faced a similar issue to this. But was not able to find a solution to my problem.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"score":0,"post_type":"question","creation_date":1701078764,"post_id":77555898,"comment_id":136726019,"body_markdown":"You need the datasource to initialze it. YOu now, indirectly, have a dependency of the datasource on the datasource.","link":"https://stackoverflow.com/questions/77555898/springboot-dependsondatabaseinitialization-throwing-cicular-dependecy-excepti#comment136726019_77555898","body":"You need the datasource to initialze it. YOu now, indirectly, have a dependency of the datasource on the datasource."},{"score":0,"post_type":"question","creation_date":1701078903,"post_id":77555898,"comment_id":136726039,"body_markdown":"Do you mean i have to remove `@DependsOnDatabaseInitialization`","link":"https://stackoverflow.com/questions/77555898/springboot-dependsondatabaseinitialization-throwing-cicular-dependecy-excepti#comment136726039_77555898","body":"Do you mean i have to remove <code>@DependsOnDatabaseInitialization</code>"},{"score":1,"post_type":"question","creation_date":1701078974,"post_id":77555898,"comment_id":136726059,"body_markdown":"Yes, from the datasource. The `dataSourceScriptDatabaseInitializer` needs the `DataSource` but the `DataSource` now depends on the `dataSourceScriptDatabaseInitializer`, thus a cycle. But why do you have this configuraiton at all if you are using Spring Boot? Spring Boot will automatically configure the datasource and entitymanager for you already? Also you shouldn&#39;t be using a `validationQuery` JDBC4+ have better means which are automatically used.","link":"https://stackoverflow.com/questions/77555898/springboot-dependsondatabaseinitialization-throwing-cicular-dependecy-excepti#comment136726059_77555898","body":"Yes, from the datasource. The <code>dataSourceScriptDatabaseInitializer</code> needs the <code>DataSource</code> but the <code>DataSource</code> now depends on the <code>dataSourceScriptDatabaseInitializer</code>, thus a cycle. But why do you have this configuraiton at all if you are using Spring Boot? Spring Boot will automatically configure the datasource and entitymanager for you already? Also you shouldn&#39;t be using a <code>validationQuery</code> JDBC4+ have better means which are automatically used."},{"score":0,"post_type":"question","creation_date":1701079141,"post_id":77555898,"comment_id":136726088,"body_markdown":"Thanks for your. Its existing code and working fine with the Springboot2.7..2 ,now with Latest Springboot release its started failing. Any example you can share how datasource can be configure in latest release.","link":"https://stackoverflow.com/questions/77555898/springboot-dependsondatabaseinitialization-throwing-cicular-dependecy-excepti#comment136726088_77555898","body":"Thanks for your. Its existing code and working fine with the Springboot2.7..2 ,now with Latest Springboot release its started failing. Any example you can share how datasource can be configure in latest release."},{"score":0,"post_type":"question","creation_date":1701079400,"post_id":77555898,"comment_id":136726129,"body_markdown":"You shouldn&#39;t have that code but just use `spring.datasource` properties. Remove that annotation from the method will make it work. Next I would work on removing code you don&#39;t actually need that Spring Boot already provides through auto configuration.","link":"https://stackoverflow.com/questions/77555898/springboot-dependsondatabaseinitialization-throwing-cicular-dependecy-excepti#comment136726129_77555898","body":"You shouldn&#39;t have that code but just use <code>spring.datasource</code> properties. Remove that annotation from the method will make it work. Next I would work on removing code you don&#39;t actually need that Spring Boot already provides through auto configuration."},{"score":0,"post_type":"question","creation_date":1701081003,"post_id":77555898,"comment_id":136726400,"body_markdown":"Removing the `@DependsOnDatabaseInitialization` now throwing this exception `Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;jpaSharedEM_entityManagerFactory&#39;: Cannot resolve reference to bean &#39;entityManagerFactory&#39; while setting constructor argument` and in details `Class org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider does not implement the requested interface jakarta.persistence.spi.PersistenceProvider`","link":"https://stackoverflow.com/questions/77555898/springboot-dependsondatabaseinitialization-throwing-cicular-dependecy-excepti#comment136726400_77555898","body":"Removing the <code>@DependsOnDatabaseInitialization</code> now throwing this exception <code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;jpaSharedEM_entityManagerFactory&#39;: Cannot resolve reference to bean &#39;entityManagerFactory&#39; while setting constructor argument</code> and in details <code>Class org.springframework.orm.jpa.vendor.SpringHibernateJpaPersist&zwnj;&#8203;enceProvider does not implement the requested interface jakarta.persistence.spi.PersistenceProvider</code>"},{"score":1,"post_type":"question","creation_date":1701081648,"post_id":77555898,"comment_id":136726511,"body_markdown":"You removed it from where? And as stated I would remove those beans and create the proper configuration in your `application.properties` or `yaml`. Next to that the error you now have feels like you are also mixing incompatible versions of Hiberate with Spring (the fact that you have all those beans makes me wonder what you have in your dependencies...).","link":"https://stackoverflow.com/questions/77555898/springboot-dependsondatabaseinitialization-throwing-cicular-dependecy-excepti#comment136726511_77555898","body":"You removed it from where? And as stated I would remove those beans and create the proper configuration in your <code>application.properties</code> or <code>yaml</code>. Next to that the error you now have feels like you are also mixing incompatible versions of Hiberate with Spring (the fact that you have all those beans makes me wonder what you have in your dependencies...)."},{"score":0,"post_type":"question","creation_date":1701090408,"post_id":77555898,"comment_id":136727969,"body_markdown":"I am using `Springboot3.2.0,spring-orm-6.1.1,jakarata-persitance-api-3.1.0,hibernate-core-6.3.1`","link":"https://stackoverflow.com/questions/77555898/springboot-dependsondatabaseinitialization-throwing-cicular-dependecy-excepti#comment136727969_77555898","body":"I am using <code>Springboot3.2.0,spring-orm-6.1.1,jakarata-persitance-api-3.1&zwnj;&#8203;.0,hibernate-core-6.&zwnj;&#8203;3.1</code>"}],"comment_count":8,"is_answered":false,"view_count":65,"answer_count":0,"score":0,"last_activity_date":1701078330,"creation_date":1701078330,"question_id":77555898,"body_markdown":"In my existing code base when i am migrating from Springboot2.7.2 to Springboot3.2.0 and java8 to java17 .Spring-boot application failing with the error.\r\n\r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    The dependencies of some of the beans in the application context form a cycle:\r\n    \r\n       webSecurityConfig (field private &lt;PackageName&gt;.WebSecurityConfig.securityService)\r\n          ↓\r\n       securityService (field private &lt;PackageName&gt;.SecurityService.authenticationService)\r\n          ↓\r\n       authenticationService (field private &lt;PackageName&gt;.AuthenticationService.systemParameterService)\r\n          ↓\r\n       systemInitialService defined in file [C:\\&lt;PackageName&gt;\\SystemInitialService.class]\r\n          ↓\r\n       userRepository1 defined in &lt;PackageName&gt;.UserRepository1 defined in @EnableJpaRepositories declared on WsApplication\r\n          ↓\r\n       jpaSharedEM_entityManagerFactory\r\n    ┌─────┐\r\n    |  dataSourceScriptDatabaseInitializer defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]\r\n    └─────┘\r\n    \r\n     \r\n    Action:\r\n    \r\n    Despite circular references being allowed, the dependency cycle between beans could not be broken. Update your application to remove the dependency cycle.\r\n\r\nIf i removed the `@DependsOnDatabaseInitialization` annotation ,this issue will not appear again.\r\n\r\n    @Configuration\r\n    @EnableTransactionManagement\r\n    public class DatabaseConfig {\r\n    \r\n      private Properties hibernateProperties() {\r\n            Properties properties = new Properties();\r\n            properties.put(HIBERNATE_DIALECT, dialectMapping.get(dbType));\r\n            properties.put(HIBERNATE_JDBC_BATCH_SIZE, 20);\r\n            properties.put(HIBERNATE_JDBC_FATCH_SIZE, 20);\r\n            properties.put(HIBERNATE_GLOBALLY_QUOTED_IDENTIFIERS, false);\r\n            properties.put(HIBERNATE_ENABLE_LAZY_LOAD_NO_TRANS, true);\r\n            properties.put(HIBERNATE_CACHE_USE_SECOND_LEVEL_CACHE, false);\r\n            properties.put(HIBERNATE_CACHE_USE_QUERY_CACHE, false);\r\n            properties.put(JAVAX_PERSISTENCE_SHARED_CACHE_MODE, SharedCacheMode.ENABLE_SELECTIVE);\r\n    \r\n            if ((dbType).equalsIgnoreCase(Constants.Database.PSQL)) {\r\n                dbSchema = StringUtils.isBlank(dbSchema) ? dbUsername : dbSchema;\r\n                properties.put(HIBERNATE_DEFAULT_SCHEMA, dbSchema);\r\n            }\r\n            return properties;\r\n        }\r\n    \r\n        @Bean\r\n        @DependsOnDatabaseInitialization\r\n        public DataSource dataSource() {\r\n            DataSource ds = new DataSource();\r\n            ds.setDriverClassName(driverMapping.get(dbType));\r\n            ds.setUrl(dbUrl);\r\n            ds.setUsername(dbUsername);\r\n            ds.setPassword(decryptPassword(dbPassword));\r\n            ds.setInitialSize(initialSize);\r\n            ds.setMaxActive(maxActive);\r\n            ds.setMaxIdle(maxIdle);\r\n            ds.setMinIdle(minIdle);\r\n            ds.setTestWhileIdle(testWhileIdle);\r\n            ds.setMinEvictableIdleTimeMillis(minEvictableIdleTimeMillis);\r\n            ds.setTimeBetweenEvictionRunsMillis(timeBetweenEvicRunsMillis);\r\n            ds.setTestOnBorrow(testOnBorrow);\r\n            if(StringUtils.isNotBlank(validationQuery)){\r\n                ds.setValidationQuery(validationQuery);\r\n            }else if (dbType.equalsIgnoreCase(Constants.Database.ORACLE)){\r\n                ds.setValidationQuery(&quot;SELECT 1 FROM DUAL&quot;);\r\n            } else {\r\n                ds.setValidationQuery(&quot;SELECT 1&quot;);\r\n            }\r\n            ds.setValidationInterval(validationInterval);\r\n    \r\n            ds.setRemoveAbandoned(removeAbandoned);\r\n            ds.setRemoveAbandonedTimeout(removeAbandonedTimeOut);\r\n            ds.setMaxAge(maxAge);\r\n            ds.setLogValidationErrors(logValidationErrors);\r\n    \r\n            return ds;\r\n        }\r\n    \r\n        @Bean\r\n        public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n            LocalContainerEntityManagerFactoryBean entityManagerFactory = new LocalContainerEntityManagerFactoryBean();\r\n            entityManagerFactory.setDataSource(dataSource());\r\n            entityManagerFactory.setPackagesToScan(&quot;com.comptel&quot;);\r\n            entityManagerFactory.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\r\n            entityManagerFactory.setJpaProperties(hibernateProperties());\r\n            entityManagerFactory.setSharedCacheMode(SharedCacheMode.ALL);\r\n            return entityManagerFactory;\r\n        }\r\n    \r\n        @Bean\r\n        @DependsOnDatabaseInitialization\r\n        public JpaTransactionManager transactionManager(LocalContainerEntityManagerFactoryBean entityManagerFactory) {\r\n            JpaTransactionManager transactionManager = new JpaTransactionManager();\r\n            transactionManager.setEntityManagerFactory(entityManagerFactory.getObject());\r\n            return transactionManager;\r\n        }\r\n    }\r\n\r\nthen it will start throwing \r\n\r\n&gt; defined in @EnableJpaRepositories declared on WsApplication: Cannot\r\n&gt; resolve reference to bean &#39;jpaSharedEM_entityManagerFactory&#39; while\r\n&gt; setting bean property &#39;entityManager&#39; Caused by:\r\n&gt; java.lang.IncompatibleClassChangeError: Class\r\n&gt; org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider\r\n&gt; does not implement the requested interface\r\n&gt; jakarta.persistence.spi.PersistenceProvider\r\n\r\nWhile i am using jakarta*. libraries in place of javax*.","link":"https://stackoverflow.com/questions/77555898/springboot-dependsondatabaseinitialization-throwing-cicular-dependecy-excepti","title":"SpringBoot : @DependsOnDatabaseInitialization throwing Cicular Dependecy Exception","body":"<p>In my existing code base when i am migrating from Springboot2.7.2 to Springboot3.2.0 and java8 to java17 .Spring-boot application failing with the error.</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nThe dependencies of some of the beans in the application context form a cycle:\n\n   webSecurityConfig (field private &lt;PackageName&gt;.WebSecurityConfig.securityService)\n      ↓\n   securityService (field private &lt;PackageName&gt;.SecurityService.authenticationService)\n      ↓\n   authenticationService (field private &lt;PackageName&gt;.AuthenticationService.systemParameterService)\n      ↓\n   systemInitialService defined in file [C:\\&lt;PackageName&gt;\\SystemInitialService.class]\n      ↓\n   userRepository1 defined in &lt;PackageName&gt;.UserRepository1 defined in @EnableJpaRepositories declared on WsApplication\n      ↓\n   jpaSharedEM_entityManagerFactory\n┌─────┐\n|  dataSourceScriptDatabaseInitializer defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]\n└─────┘\n\n \nAction:\n\nDespite circular references being allowed, the dependency cycle between beans could not be broken. Update your application to remove the dependency cycle.\n</code></pre>\n<p>If i removed the <code>@DependsOnDatabaseInitialization</code> annotation ,this issue will not appear again.</p>\n<pre><code>@Configuration\n@EnableTransactionManagement\npublic class DatabaseConfig {\n\n  private Properties hibernateProperties() {\n        Properties properties = new Properties();\n        properties.put(HIBERNATE_DIALECT, dialectMapping.get(dbType));\n        properties.put(HIBERNATE_JDBC_BATCH_SIZE, 20);\n        properties.put(HIBERNATE_JDBC_FATCH_SIZE, 20);\n        properties.put(HIBERNATE_GLOBALLY_QUOTED_IDENTIFIERS, false);\n        properties.put(HIBERNATE_ENABLE_LAZY_LOAD_NO_TRANS, true);\n        properties.put(HIBERNATE_CACHE_USE_SECOND_LEVEL_CACHE, false);\n        properties.put(HIBERNATE_CACHE_USE_QUERY_CACHE, false);\n        properties.put(JAVAX_PERSISTENCE_SHARED_CACHE_MODE, SharedCacheMode.ENABLE_SELECTIVE);\n\n        if ((dbType).equalsIgnoreCase(Constants.Database.PSQL)) {\n            dbSchema = StringUtils.isBlank(dbSchema) ? dbUsername : dbSchema;\n            properties.put(HIBERNATE_DEFAULT_SCHEMA, dbSchema);\n        }\n        return properties;\n    }\n\n    @Bean\n    @DependsOnDatabaseInitialization\n    public DataSource dataSource() {\n        DataSource ds = new DataSource();\n        ds.setDriverClassName(driverMapping.get(dbType));\n        ds.setUrl(dbUrl);\n        ds.setUsername(dbUsername);\n        ds.setPassword(decryptPassword(dbPassword));\n        ds.setInitialSize(initialSize);\n        ds.setMaxActive(maxActive);\n        ds.setMaxIdle(maxIdle);\n        ds.setMinIdle(minIdle);\n        ds.setTestWhileIdle(testWhileIdle);\n        ds.setMinEvictableIdleTimeMillis(minEvictableIdleTimeMillis);\n        ds.setTimeBetweenEvictionRunsMillis(timeBetweenEvicRunsMillis);\n        ds.setTestOnBorrow(testOnBorrow);\n        if(StringUtils.isNotBlank(validationQuery)){\n            ds.setValidationQuery(validationQuery);\n        }else if (dbType.equalsIgnoreCase(Constants.Database.ORACLE)){\n            ds.setValidationQuery(&quot;SELECT 1 FROM DUAL&quot;);\n        } else {\n            ds.setValidationQuery(&quot;SELECT 1&quot;);\n        }\n        ds.setValidationInterval(validationInterval);\n\n        ds.setRemoveAbandoned(removeAbandoned);\n        ds.setRemoveAbandonedTimeout(removeAbandonedTimeOut);\n        ds.setMaxAge(maxAge);\n        ds.setLogValidationErrors(logValidationErrors);\n\n        return ds;\n    }\n\n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n        LocalContainerEntityManagerFactoryBean entityManagerFactory = new LocalContainerEntityManagerFactoryBean();\n        entityManagerFactory.setDataSource(dataSource());\n        entityManagerFactory.setPackagesToScan(&quot;com.comptel&quot;);\n        entityManagerFactory.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n        entityManagerFactory.setJpaProperties(hibernateProperties());\n        entityManagerFactory.setSharedCacheMode(SharedCacheMode.ALL);\n        return entityManagerFactory;\n    }\n\n    @Bean\n    @DependsOnDatabaseInitialization\n    public JpaTransactionManager transactionManager(LocalContainerEntityManagerFactoryBean entityManagerFactory) {\n        JpaTransactionManager transactionManager = new JpaTransactionManager();\n        transactionManager.setEntityManagerFactory(entityManagerFactory.getObject());\n        return transactionManager;\n    }\n}\n</code></pre>\n<p>then it will start throwing</p>\n<blockquote>\n<p>defined in @EnableJpaRepositories declared on WsApplication: Cannot\nresolve reference to bean 'jpaSharedEM_entityManagerFactory' while\nsetting bean property 'entityManager' Caused by:\njava.lang.IncompatibleClassChangeError: Class\norg.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider\ndoes not implement the requested interface\njakarta.persistence.spi.PersistenceProvider</p>\n</blockquote>\n<p>While i am using jakarta*. libraries in place of javax*.</p>\n"},{"tags":["java","android","google-cloud-firestore","material-design","android-jetpack-compose-material3"],"comments":[{"score":0,"post_type":"question","creation_date":1701078805,"post_id":77555875,"comment_id":136726029,"body_markdown":"I&#39;m not sure I understand.\nWhat exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","link":"https://stackoverflow.com/questions/77555875/how-can-i-listen-to-mdc-search-bar-typed-in-string-in-order-to-display-results#comment136726029_77555875","body":"I&#39;m not sure I understand. What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"},{"score":0,"post_type":"question","creation_date":1701416678,"post_id":77555875,"comment_id":136775320,"body_markdown":"@AlexMamo sorry, what I meant to ask is how can I listen to the typed string onto search bar. Seems like my ```searchView.getEditText().addTextChangedListener(new TextWatcher()``` is not working","link":"https://stackoverflow.com/questions/77555875/how-can-i-listen-to-mdc-search-bar-typed-in-string-in-order-to-display-results#comment136775320_77555875","body":"@AlexMamo sorry, what I meant to ask is how can I listen to the typed string onto search bar. Seems like my <code>searchView.getEditText().addTextChangedListener(new TextWatcher()</code> is not working"},{"score":0,"post_type":"question","creation_date":1701436144,"post_id":77555875,"comment_id":136778422,"body_markdown":"&quot;is not working&quot; doesn&#39;t provide enough information so we can help. What exactly doesn&#39;t work? Do you have any errors?","link":"https://stackoverflow.com/questions/77555875/how-can-i-listen-to-mdc-search-bar-typed-in-string-in-order-to-display-results#comment136778422_77555875","body":"&quot;is not working&quot; doesn&#39;t provide enough information so we can help. What exactly doesn&#39;t work? Do you have any errors?"}],"comment_count":3,"is_answered":false,"view_count":16,"answer_count":0,"score":0,"last_activity_date":1701078089,"creation_date":1701078089,"question_id":77555875,"body_markdown":"I&#39;ve tried to connect the Material Design Component Search Bar component into my Android Studio, but I have difficulties doing so.\r\n\r\n- Firstly, I&#39;m not sure whether `searchView.getEditText().setOnEditorActionListener` let me listen to the current typed string in the search Bar.\r\n\r\n- Secondly, I want to know how I can correctly display the list of results I put in a HashMap called ``` `searchResults ``` within the method ``` `updateSearchResultUI ```  .If the implementation is wrong, please correct me.\r\n\r\nonCreateView method in my fragment\r\n\r\n```\r\n@Override\r\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                         Bundle savedInstanceState) {\r\n    View view =inflater.inflate(R.layout.fragment_home_page, container, false);\r\n\r\n\r\n    //INSTANTIATE FIRESTORE\r\n    Firestore=FirebaseFirestore.getInstance();\r\n\r\n\r\n    //SEARCH BAR DECLARATION\r\n    searchBar=(SearchBar) view.findViewById(R.id.search_bar);\r\n    searchView=(SearchView)view.findViewById(R.id.search_view);\r\n\r\n    searchView.getEditText().setOnEditorActionListener(\r\n            (v, actionId, event) -&gt; {\r\n                searchBar.setText(searchView.getText());\r\n                searchView.getEditText().addTextChangedListener(new TextWatcher() {\r\n                    @Override\r\n                    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {}\r\n                    @Override\r\n                    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {}\r\n                    @Override\r\n                    public void afterTextChanged(Editable editable) {\r\n                        String searchText = editable.toString();\r\n                        performSearch(searchText, view);\r\n                    }\r\n                });\r\n                return false;\r\n            });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    return view;\r\n}\r\n```\r\n\r\nperformSearch() method to search string currently typed in searchbar inside Firestore\r\n\r\n```\r\n\r\nprivate void performSearch(String searchText, View view) {\r\n    CollectionReference usersRef = Firestore.collection(&quot;Users&quot;);\r\n\r\n    Query query = usersRef.whereEqualTo(&quot;username&quot;, searchText);\r\n\r\n    query.get().addOnCompleteListener(task -&gt; {\r\n        if (task.isSuccessful()) {\r\n            List&lt;Map&lt;String, Object&gt;&gt; searchResults = new ArrayList&lt;&gt;();  // Directly work with Map\r\n\r\n            for (QueryDocumentSnapshot document : task.getResult()) {\r\n                Map&lt;String, Object&gt; userData = document.getData();\r\n                searchResults.add(userData);\r\n            }\r\n\r\n            updateSearchResultUI(searchResults, view);\r\n\r\n            // Update your UI with searchResults\r\n        } else {\r\n            // Handle errors\r\n            Log.e(TAG, &quot;Error getting documents: &quot;, task.getException());\r\n        }\r\n    });\r\n}\r\n```\r\n\r\nupdateSearchResultUI() to update the list of results from Firestore onto a List, then to update in SearchView UI\r\n\r\n```\r\npublic void updateSearchResultUI(List&lt;Map&lt;String, Object&gt;&gt; searchResults, View view) {\r\n    ListView listView = view.findViewById(R.id.listView);\r\n\r\n    // Create a list of strings to store the usernames\r\n    List&lt;String&gt; usernames = new ArrayList&lt;&gt;();\r\n\r\n    // Iterate through each search result map\r\n    for (Map&lt;String, Object&gt; result : searchResults) {\r\n        // Assuming &quot;username&quot; is the key for the username in the map\r\n        String username = (String) result.get(&quot;username&quot;);\r\n\r\n        // Add the username to the list\r\n        if (username != null) {\r\n            usernames.add(username);\r\n        }\r\n    }\r\n\r\n    // Create an ArrayAdapter to bind the data to the ListView\r\n    ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(view.getContext(), android.R.layout.simple_list_item_1, usernames);\r\n\r\n    // Set the adapter to the ListView\r\n    listView.setAdapter(adapter);\r\n}\r\n```\r\n\r\nI&#39;m new in using Android Material Components, and I wish that I could get any help on how I can display my Firestore results seamlessly onto my UI. Thank you very much for your help.","link":"https://stackoverflow.com/questions/77555875/how-can-i-listen-to-mdc-search-bar-typed-in-string-in-order-to-display-results","title":"How can I listen to MDC search bar typed-in String, in order to display results onto SearchView UI?","body":"<p>I've tried to connect the Material Design Component Search Bar component into my Android Studio, but I have difficulties doing so.</p>\n<ul>\n<li><p>Firstly, I'm not sure whether <code>searchView.getEditText().setOnEditorActionListener</code> let me listen to the current typed string in the search Bar.</p>\n</li>\n<li><p>Secondly, I want to know how I can correctly display the list of results I put in a HashMap called <code>`searchResults</code> within the method <code>`updateSearchResultUI</code>  .If the implementation is wrong, please correct me.</p>\n</li>\n</ul>\n<p>onCreateView method in my fragment</p>\n<pre><code>@Override\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\n                         Bundle savedInstanceState) {\n    View view =inflater.inflate(R.layout.fragment_home_page, container, false);\n\n\n    //INSTANTIATE FIRESTORE\n    Firestore=FirebaseFirestore.getInstance();\n\n\n    //SEARCH BAR DECLARATION\n    searchBar=(SearchBar) view.findViewById(R.id.search_bar);\n    searchView=(SearchView)view.findViewById(R.id.search_view);\n\n    searchView.getEditText().setOnEditorActionListener(\n            (v, actionId, event) -&gt; {\n                searchBar.setText(searchView.getText());\n                searchView.getEditText().addTextChangedListener(new TextWatcher() {\n                    @Override\n                    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {}\n                    @Override\n                    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {}\n                    @Override\n                    public void afterTextChanged(Editable editable) {\n                        String searchText = editable.toString();\n                        performSearch(searchText, view);\n                    }\n                });\n                return false;\n            });\n\n\n\n\n\n\n\n    return view;\n}\n</code></pre>\n<p>performSearch() method to search string currently typed in searchbar inside Firestore</p>\n<pre><code>\nprivate void performSearch(String searchText, View view) {\n    CollectionReference usersRef = Firestore.collection(&quot;Users&quot;);\n\n    Query query = usersRef.whereEqualTo(&quot;username&quot;, searchText);\n\n    query.get().addOnCompleteListener(task -&gt; {\n        if (task.isSuccessful()) {\n            List&lt;Map&lt;String, Object&gt;&gt; searchResults = new ArrayList&lt;&gt;();  // Directly work with Map\n\n            for (QueryDocumentSnapshot document : task.getResult()) {\n                Map&lt;String, Object&gt; userData = document.getData();\n                searchResults.add(userData);\n            }\n\n            updateSearchResultUI(searchResults, view);\n\n            // Update your UI with searchResults\n        } else {\n            // Handle errors\n            Log.e(TAG, &quot;Error getting documents: &quot;, task.getException());\n        }\n    });\n}\n</code></pre>\n<p>updateSearchResultUI() to update the list of results from Firestore onto a List, then to update in SearchView UI</p>\n<pre><code>public void updateSearchResultUI(List&lt;Map&lt;String, Object&gt;&gt; searchResults, View view) {\n    ListView listView = view.findViewById(R.id.listView);\n\n    // Create a list of strings to store the usernames\n    List&lt;String&gt; usernames = new ArrayList&lt;&gt;();\n\n    // Iterate through each search result map\n    for (Map&lt;String, Object&gt; result : searchResults) {\n        // Assuming &quot;username&quot; is the key for the username in the map\n        String username = (String) result.get(&quot;username&quot;);\n\n        // Add the username to the list\n        if (username != null) {\n            usernames.add(username);\n        }\n    }\n\n    // Create an ArrayAdapter to bind the data to the ListView\n    ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(view.getContext(), android.R.layout.simple_list_item_1, usernames);\n\n    // Set the adapter to the ListView\n    listView.setAdapter(adapter);\n}\n</code></pre>\n<p>I'm new in using Android Material Components, and I wish that I could get any help on how I can display my Firestore results seamlessly onto my UI. Thank you very much for your help.</p>\n"},{"tags":["java","android","firebase"],"comments":[{"score":0,"post_type":"question","creation_date":1700778369,"post_id":77539435,"comment_id":136698670,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","link":"https://stackoverflow.com/questions/77539435/image-file-does-not-exist-at-uri#comment136698670_77539435","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"score":0,"post_type":"question","creation_date":1700835396,"post_id":77539435,"comment_id":136705111,"body_markdown":"I&#39;m not sure I understand.\nWhat exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors? Please respond using @AlexMamo","link":"https://stackoverflow.com/questions/77539435/image-file-does-not-exist-at-uri#comment136705111_77539435","body":"I&#39;m not sure I understand. What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors? Please respond using @AlexMamo"},{"score":0,"post_type":"question","creation_date":1700852635,"post_id":77539435,"comment_id":136707543,"body_markdown":"@AlexMamo image file does not exist at uri but that said image is already in my firebase realtime database and already display in my application","link":"https://stackoverflow.com/questions/77539435/image-file-does-not-exist-at-uri#comment136707543_77539435","body":"@AlexMamo image file does not exist at uri but that said image is already in my firebase realtime database and already display in my application"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701160559,"post_id":77554621,"comment_id":136737761,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","link":"https://stackoverflow.com/questions/77539435/image-file-does-not-exist-at-uri/77554621#comment136737761_77554621","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77554621/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"comment_count":1,"score":0,"last_activity_date":1701061662,"creation_date":1701061662,"answer_id":77554621,"question_id":77539435,"body_markdown":"You&#39;re updating various fields such as name, address, etc. and also handling the upload of images to Firebase Storage.\r\n\r\n - Ensure that the fileExists() method is working as expected. If the imageUri is coming from the gallery or camera, it might not represent a local file path directly. You may need to handle different types of Uri schemes, such as content:// and file://.\r\n\r\n- The code uses a CountDownLatch to wait for all image uploads to complete. While this approach works, you might want to explore using Firebase&#39;s Tasks.whenAllComplete() or Tasks.whenAllSuccess() for a more streamlined way to handle multiple asynchronous tasks.\r\n\r\nPlease try this to might it solve your problem. Thanks.","link":"https://stackoverflow.com/questions/77539435/image-file-does-not-exist-at-uri/77554621#77554621","title":"image file does not exist at uri","body":"<p>You're updating various fields such as name, address, etc. and also handling the upload of images to Firebase Storage.</p>\n<ul>\n<li><p>Ensure that the fileExists() method is working as expected. If the imageUri is coming from the gallery or camera, it might not represent a local file path directly. You may need to handle different types of Uri schemes, such as content:// and file://.</p>\n</li>\n<li><p>The code uses a CountDownLatch to wait for all image uploads to complete. While this approach works, you might want to explore using Firebase's Tasks.whenAllComplete() or Tasks.whenAllSuccess() for a more streamlined way to handle multiple asynchronous tasks.</p>\n</li>\n</ul>\n<p>Please try this to might it solve your problem. Thanks.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701078082,"creation_date":1701078082,"answer_id":77555874,"question_id":77539435,"body_markdown":"Add additional logging statements to trace the flow of execution and identify where the code might be failing.\r\n\r\n    Log.d(TAG, &quot;Checking file existence for Uri: &quot; + imageUri.toString());\r\n    if (fileExists(imageUri)) {\r\n        Log.d(TAG, &quot;File exists. Proceeding with upload.&quot;);\r\n        // your ccode\r\n    } else {\r\n        Log.e(TAG, &quot;Image file does not exist at Uri: &quot; + imageUri.toString());\r\n     \r\n\r\n   latch.countDown();\r\n}\r\n\r\n\r\nalso check the existence of a file like this:\r\n\r\n    private boolean fileExists(Uri uri) {\r\n        if (uri != null) {\r\n            try (InputStream inputStream = getContentResolver().openInputStream(uri)) {\r\n                return inputStream != null;\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\nFinally, make sure that your Firebase Storage rules allow read and write operations.\r\n\r\n","link":"https://stackoverflow.com/questions/77539435/image-file-does-not-exist-at-uri/77555874#77555874","title":"image file does not exist at uri","body":"<p>Add additional logging statements to trace the flow of execution and identify where the code might be failing.</p>\n<pre><code>Log.d(TAG, &quot;Checking file existence for Uri: &quot; + imageUri.toString());\nif (fileExists(imageUri)) {\n    Log.d(TAG, &quot;File exists. Proceeding with upload.&quot;);\n    // your ccode\n} else {\n    Log.e(TAG, &quot;Image file does not exist at Uri: &quot; + imageUri.toString());\n \n</code></pre>\n<p>latch.countDown();\n}</p>\n<p>also check the existence of a file like this:</p>\n<pre><code>private boolean fileExists(Uri uri) {\n    if (uri != null) {\n        try (InputStream inputStream = getContentResolver().openInputStream(uri)) {\n            return inputStream != null;\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n    return false;\n}\n</code></pre>\n<p>Finally, make sure that your Firebase Storage rules allow read and write operations.</p>\n"}],"comment_count":3,"is_answered":false,"view_count":54,"answer_count":2,"score":0,"last_activity_date":1701078082,"creation_date":1700770534,"last_edit_date":1701061210,"question_id":77539435,"body_markdown":"The issue i am facing is that the image that it is saying not exist is the one that&#39;s already in the app or display on the app also it&#39;s already in the firebase realtime database\r\n\r\nThe code are:\r\n\r\n\r\n```\r\n\r\n\r\n private void update(String hotelName, String hotelAddress, String hotelDescription, List&lt;Uri&gt; imageUris, String hotelContact,\r\n\r\n                        String hotelEmail, List&lt;String&gt; roomTypes, String cancellationPolicy, String hotelId, String amenitiesHotel,\r\n\r\n                        String gcashNumber, String gcashName, String reservationFee, double latitude, double longitude) {\r\n\r\n        DatabaseReference hotelsRef = databaseReference.child(&quot;hotels&quot;);\r\n\r\n        Query query = hotelsRef.orderByChild(&quot;user_id&quot;).equalTo(userId);\r\n\r\n        query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n\r\n            @Override\r\n\r\n            public void onDataChange(@NonNull com.google.firebase.database.DataSnapshot dataSnapshot) {\r\n\r\n                if (dataSnapshot.exists()) {\r\n\r\n                    for (com.google.firebase.database.DataSnapshot childSnapshot : dataSnapshot.getChildren()) {\r\n\r\n                        String hotelId = childSnapshot.getKey();\r\n\r\n                        DatabaseReference hotelRef = hotelsRef.child(hotelId);\r\n\r\n                        hotelRef.child(&quot;name&quot;).setValue(hotelName);\r\n\r\n                        hotelRef.child(&quot;address&quot;).setValue(hotelAddress);\r\n\r\n                        hotelRef.child(&quot;description&quot;).setValue(hotelDescription);\r\n\r\n                        hotelRef.child(&quot;contact&quot;).setValue(hotelContact);\r\n\r\n                        hotelRef.child(&quot;email&quot;).setValue(hotelEmail);\r\n\r\n                        hotelRef.child(&quot;cancellationPolicy&quot;).setValue(cancellationPolicy);\r\n\r\n                        hotelRef.child(&quot;amenities&quot;).setValue(amenitiesHotel);\r\n\r\n                        hotelRef.child(&quot;gcashNumber&quot;).setValue(gcashNumber);\r\n\r\n                        hotelRef.child(&quot;gcashName&quot;).setValue(gcashName);\r\n\r\n                        hotelRef.child(&quot;reservationFee&quot;).setValue(reservationFee);\r\n\r\n                        hotelRef.child(&quot;latitude&quot;).setValue(latitude);\r\n\r\n                        hotelRef.child(&quot;longitude&quot;).setValue(longitude);\r\n\r\n                        saveRoomTypes(hotelId, roomTypes);\r\n\r\n                        if (!imageUris.isEmpty()) {\r\n\r\n                            List&lt;String&gt; imageUrls = new ArrayList&lt;&gt;();\r\n\r\n                            AtomicInteger uploadCount = new AtomicInteger(0);\r\n\r\n                            // Use a CountDownLatch to wait for all uploads to complete\r\n\r\n                            CountDownLatch latch = new CountDownLatch(imageUris.size());\r\n\r\n                            for (int i = 0; i &lt; imageUris.size(); i++) {\r\n\r\n                                Uri imageUri = imageUris.get(i);\r\n\r\n                                if (imageUri != null) {\r\n\r\n                                    // Check if the file exists before attempting to upload\r\n\r\n                                    if (fileExists(imageUri)) {\r\n\r\n                                        StorageReference imageRef = storageReference.child(&quot;hotel_images/&quot; + hotelId + &quot;/image&quot; + (i + 1));\r\n\r\n                                        UploadTask uploadTask = imageRef.putFile(imageUri);\r\n\r\n                                        uploadTask.addOnSuccessListener(taskSnapshot -&gt; {\r\n\r\n                                            imageRef.getDownloadUrl().addOnSuccessListener(downloadUri -&gt; {\r\n\r\n                                                String imageUrl = downloadUri.toString();\r\n\r\n                                                imageUrls.add(imageUrl);\r\n\r\n                                                if (uploadCount.incrementAndGet() == imageUris.size()) {\r\n\r\n                                                    // All images uploaded, update the database\r\n\r\n                                                    save(hotelId, imageUrls, hotelName, hotelAddress, hotelDescription, hotelContact,\r\n\r\n                                                            hotelEmail, roomTypes, cancellationPolicy, amenitiesHotel, gcashNumber, gcashName, reservationFee, latitude, longitude);\r\n\r\n                                                    // Release the latch when all uploads are complete\r\n\r\n                                                    latch.countDown();\r\n\r\n                                                }\r\n\r\n                                            }).addOnFailureListener(e -&gt; {\r\n\r\n                                                Log.e(&quot;image upload&quot;, &quot;Firebase Storage Error: &quot; + e.getMessage());\r\n\r\n                                                latch.countDown(); // Release the latch even if there&#39;s an error\r\n\r\n                                            });\r\n\r\n                                        }).addOnFailureListener(e -&gt; {\r\n\r\n                                            Log.e(&quot;image upload&quot;, &quot;Error during upload: &quot; + e.getMessage());\r\n\r\n                                            latch.countDown(); // Release the latch even if there&#39;s an error\r\n\r\n                                        });\r\n\r\n                                    } else {\r\n\r\n                                        Log.e(TAG, &quot;Image file does not exist at Uri: &quot; + imageUri.toString());\r\n\r\n                                        latch.countDown(); // Release the latch in case of file not found\r\n\r\n                                    }\r\n\r\n                                } else {\r\n\r\n                                    Log.e(TAG, &quot;ImageUri is null. Handle this case accordingly.&quot;);\r\n\r\n                                    latch.countDown(); // Release the latch in case of null Uri\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                            try {\r\n\r\n                                // Wait for all uploads to complete before proceeding\r\n\r\n                                latch.await();\r\n\r\n                            } catch (InterruptedException e) {\r\n\r\n                                e.printStackTrace();\r\n\r\n                            }\r\n\r\n                        } else {\r\n\r\n                            // If no images, update the database directly\r\n\r\n                            save(hotelId, null, hotelName, hotelAddress, hotelDescription, hotelContact,\r\n\r\n                                    hotelEmail, roomTypes, cancellationPolicy, amenitiesHotel, gcashNumber, gcashName, reservationFee, latitude, longitude);\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                Log.e(&quot;update&quot;, &quot;error&quot; + databaseError.getMessage());\r\n\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n    \r\n\r\n    // Function to check if a file exists at the given Uri\r\n\r\n    private boolean fileExists(Uri uri) {\r\n\r\n        if (uri != null) {\r\n\r\n            File file = new File(uri.getPath());\r\n\r\n            return file.exists();\r\n\r\n        }\r\n\r\n        return false;\r\n\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\nI already check the rules etc..\r\n\r\nAlso if I upload the the second or more images it&#39;s not updating or its not going to the storage or realtime database.\r\nThankyou","link":"https://stackoverflow.com/questions/77539435/image-file-does-not-exist-at-uri","title":"image file does not exist at uri","body":"<p>The issue i am facing is that the image that it is saying not exist is the one that's already in the app or display on the app also it's already in the firebase realtime database</p>\n<p>The code are:</p>\n<pre><code>\n\n private void update(String hotelName, String hotelAddress, String hotelDescription, List&lt;Uri&gt; imageUris, String hotelContact,\n\n                        String hotelEmail, List&lt;String&gt; roomTypes, String cancellationPolicy, String hotelId, String amenitiesHotel,\n\n                        String gcashNumber, String gcashName, String reservationFee, double latitude, double longitude) {\n\n        DatabaseReference hotelsRef = databaseReference.child(&quot;hotels&quot;);\n\n        Query query = hotelsRef.orderByChild(&quot;user_id&quot;).equalTo(userId);\n\n        query.addListenerForSingleValueEvent(new ValueEventListener() {\n\n            @Override\n\n            public void onDataChange(@NonNull com.google.firebase.database.DataSnapshot dataSnapshot) {\n\n                if (dataSnapshot.exists()) {\n\n                    for (com.google.firebase.database.DataSnapshot childSnapshot : dataSnapshot.getChildren()) {\n\n                        String hotelId = childSnapshot.getKey();\n\n                        DatabaseReference hotelRef = hotelsRef.child(hotelId);\n\n                        hotelRef.child(&quot;name&quot;).setValue(hotelName);\n\n                        hotelRef.child(&quot;address&quot;).setValue(hotelAddress);\n\n                        hotelRef.child(&quot;description&quot;).setValue(hotelDescription);\n\n                        hotelRef.child(&quot;contact&quot;).setValue(hotelContact);\n\n                        hotelRef.child(&quot;email&quot;).setValue(hotelEmail);\n\n                        hotelRef.child(&quot;cancellationPolicy&quot;).setValue(cancellationPolicy);\n\n                        hotelRef.child(&quot;amenities&quot;).setValue(amenitiesHotel);\n\n                        hotelRef.child(&quot;gcashNumber&quot;).setValue(gcashNumber);\n\n                        hotelRef.child(&quot;gcashName&quot;).setValue(gcashName);\n\n                        hotelRef.child(&quot;reservationFee&quot;).setValue(reservationFee);\n\n                        hotelRef.child(&quot;latitude&quot;).setValue(latitude);\n\n                        hotelRef.child(&quot;longitude&quot;).setValue(longitude);\n\n                        saveRoomTypes(hotelId, roomTypes);\n\n                        if (!imageUris.isEmpty()) {\n\n                            List&lt;String&gt; imageUrls = new ArrayList&lt;&gt;();\n\n                            AtomicInteger uploadCount = new AtomicInteger(0);\n\n                            // Use a CountDownLatch to wait for all uploads to complete\n\n                            CountDownLatch latch = new CountDownLatch(imageUris.size());\n\n                            for (int i = 0; i &lt; imageUris.size(); i++) {\n\n                                Uri imageUri = imageUris.get(i);\n\n                                if (imageUri != null) {\n\n                                    // Check if the file exists before attempting to upload\n\n                                    if (fileExists(imageUri)) {\n\n                                        StorageReference imageRef = storageReference.child(&quot;hotel_images/&quot; + hotelId + &quot;/image&quot; + (i + 1));\n\n                                        UploadTask uploadTask = imageRef.putFile(imageUri);\n\n                                        uploadTask.addOnSuccessListener(taskSnapshot -&gt; {\n\n                                            imageRef.getDownloadUrl().addOnSuccessListener(downloadUri -&gt; {\n\n                                                String imageUrl = downloadUri.toString();\n\n                                                imageUrls.add(imageUrl);\n\n                                                if (uploadCount.incrementAndGet() == imageUris.size()) {\n\n                                                    // All images uploaded, update the database\n\n                                                    save(hotelId, imageUrls, hotelName, hotelAddress, hotelDescription, hotelContact,\n\n                                                            hotelEmail, roomTypes, cancellationPolicy, amenitiesHotel, gcashNumber, gcashName, reservationFee, latitude, longitude);\n\n                                                    // Release the latch when all uploads are complete\n\n                                                    latch.countDown();\n\n                                                }\n\n                                            }).addOnFailureListener(e -&gt; {\n\n                                                Log.e(&quot;image upload&quot;, &quot;Firebase Storage Error: &quot; + e.getMessage());\n\n                                                latch.countDown(); // Release the latch even if there's an error\n\n                                            });\n\n                                        }).addOnFailureListener(e -&gt; {\n\n                                            Log.e(&quot;image upload&quot;, &quot;Error during upload: &quot; + e.getMessage());\n\n                                            latch.countDown(); // Release the latch even if there's an error\n\n                                        });\n\n                                    } else {\n\n                                        Log.e(TAG, &quot;Image file does not exist at Uri: &quot; + imageUri.toString());\n\n                                        latch.countDown(); // Release the latch in case of file not found\n\n                                    }\n\n                                } else {\n\n                                    Log.e(TAG, &quot;ImageUri is null. Handle this case accordingly.&quot;);\n\n                                    latch.countDown(); // Release the latch in case of null Uri\n\n                                }\n\n                            }\n\n                            try {\n\n                                // Wait for all uploads to complete before proceeding\n\n                                latch.await();\n\n                            } catch (InterruptedException e) {\n\n                                e.printStackTrace();\n\n                            }\n\n                        } else {\n\n                            // If no images, update the database directly\n\n                            save(hotelId, null, hotelName, hotelAddress, hotelDescription, hotelContact,\n\n                                    hotelEmail, roomTypes, cancellationPolicy, amenitiesHotel, gcashNumber, gcashName, reservationFee, latitude, longitude);\n\n                        }\n\n                    }\n\n                }\n\n            }\n\n            @Override\n\n            public void onCancelled(@NonNull DatabaseError databaseError) {\n\n                Log.e(&quot;update&quot;, &quot;error&quot; + databaseError.getMessage());\n\n            }\n\n        });\n\n    }\n\n    \n\n    // Function to check if a file exists at the given Uri\n\n    private boolean fileExists(Uri uri) {\n\n        if (uri != null) {\n\n            File file = new File(uri.getPath());\n\n            return file.exists();\n\n        }\n\n        return false;\n\n    }\n</code></pre>\n<p>I already check the rules etc..</p>\n<p>Also if I upload the the second or more images it's not updating or its not going to the storage or realtime database.\nThankyou</p>\n"},{"tags":["java","selenium-webdriver","selenium-firefoxdriver"],"comment_count":0,"is_answered":false,"view_count":14,"answer_count":0,"score":0,"last_activity_date":1701076548,"creation_date":1701076548,"question_id":77555708,"body_markdown":"here is the snippet of the code which is causing problem.\r\n\r\n```\r\n        //list of trains after clicking on the search button\r\n        List&lt;WebElement&gt; listOfTrains = driver.findElements(By.xpath(&quot;//div[@class=&#39;form-group no-pad col-xs-12 bull-back border-all&#39;]&quot;));\r\n\r\n        //filtering the specific train you want to book\r\n        WebElement desiredTrain=listOfTrains.stream()\r\n                                            .filter(train-&gt;train.findElement(By.xpath(&quot;//div[@class=&#39;col-sm-5 col-xs-11 train-heading&#39;]/strong&quot;))\r\n                                            .getText()\r\n                                            .contains(&quot;AADR VANDEBHARAT (22448)&quot;))\r\n                                            .findFirst()\r\n                                            .orElse(null);\r\n```\r\n\r\nIn above case, &#39;AADR VANDEBHARAT (22448)&#39; is the first WebElement in the list of WebElements (listOfTrains). listOfTrains has already 38 WebElements in it, which are the different trains appeared after clicking on search button.\r\n\r\nThe **main problem** is that, when choosing first element of the list (viz., the div containing &#39;AADR VANDEBHARAT (22448)&#39;), it&#39;s working fine, and I&#39;m able to automate till payment page. But the thing turns south, when I choose train other than the first one (like &#39;SVDK VANDEBHARAT (22440)&#39;). It&#39;ll give me the NullPointerException. I&#39;ve attached some images for your reference.\r\n\r\n[NullPointerException](https://i.stack.imgur.com/wVz2m.png) \r\n\r\n[IRCTC webpage](https://i.stack.imgur.com/5sAwg.png)","link":"https://stackoverflow.com/questions/77555708/trying-to-automate-the-irctc-site-but-facing-nullpointerexception-while-filterin","title":"Trying to automate the IRCTC site but facing NullPointerException while filtering the train from the search results","body":"<p>here is the snippet of the code which is causing problem.</p>\n<pre><code>        //list of trains after clicking on the search button\n        List&lt;WebElement&gt; listOfTrains = driver.findElements(By.xpath(&quot;//div[@class='form-group no-pad col-xs-12 bull-back border-all']&quot;));\n\n        //filtering the specific train you want to book\n        WebElement desiredTrain=listOfTrains.stream()\n                                            .filter(train-&gt;train.findElement(By.xpath(&quot;//div[@class='col-sm-5 col-xs-11 train-heading']/strong&quot;))\n                                            .getText()\n                                            .contains(&quot;AADR VANDEBHARAT (22448)&quot;))\n                                            .findFirst()\n                                            .orElse(null);\n</code></pre>\n<p>In above case, 'AADR VANDEBHARAT (22448)' is the first WebElement in the list of WebElements (listOfTrains). listOfTrains has already 38 WebElements in it, which are the different trains appeared after clicking on search button.</p>\n<p>The <strong>main problem</strong> is that, when choosing first element of the list (viz., the div containing 'AADR VANDEBHARAT (22448)'), it's working fine, and I'm able to automate till payment page. But the thing turns south, when I choose train other than the first one (like 'SVDK VANDEBHARAT (22440)'). It'll give me the NullPointerException. I've attached some images for your reference.</p>\n<p><a href=\"https://i.stack.imgur.com/wVz2m.png\" rel=\"nofollow noreferrer\">NullPointerException</a></p>\n<p><a href=\"https://i.stack.imgur.com/5sAwg.png\" rel=\"nofollow noreferrer\">IRCTC webpage</a></p>\n"},{"tags":["java","spring","mongodb","spring-boot"],"comments":[{"score":0,"post_type":"question","creation_date":1701078872,"post_id":77555687,"comment_id":136726037,"body_markdown":"Remove the surefire plugin (spring boot already has this). Remove the `version` for the `spring-boot-maven-plugin` it will be managed by Spring BOot (and currently you are mixing versions of Spring Boot).","link":"https://stackoverflow.com/questions/77555687/maven-failed-to-execute-goal-org-springframework-bootspring-boot-maven-plugin#comment136726037_77555687","body":"Remove the surefire plugin (spring boot already has this). Remove the <code>version</code> for the <code>spring-boot-maven-plugin</code> it will be managed by Spring BOot (and currently you are mixing versions of Spring Boot)."},{"score":0,"post_type":"question","creation_date":1701083930,"post_id":77555687,"comment_id":136726855,"body_markdown":"okay, thank you I will try this!!","link":"https://stackoverflow.com/questions/77555687/maven-failed-to-execute-goal-org-springframework-bootspring-boot-maven-plugin#comment136726855_77555687","body":"okay, thank you I will try this!!"}],"comment_count":2,"is_answered":false,"view_count":148,"answer_count":0,"score":0,"last_activity_date":1701076343,"creation_date":1701076343,"question_id":77555687,"body_markdown":"I am working with springboot, and I get this error. Have been fixing this for hours but I still cannot find the solution. The error shows when I try to `mvn clean install`,\r\n\r\n\r\n```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0:test (default-test) on project mdb-spring-boot:\r\n```\r\n\r\nand when I try to mvn spring-boot:run, this error shows\r\n\r\n\r\n```\r\n[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.7.2:run (default-cli) on project mdb-spring-boot: Application finished with exit code: 1 -&gt; [Help 1]\r\n```\r\n\r\n\r\n\r\nthis is my `pom.xml`\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.14&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;mdb-spring-boot&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;mdb-spring-boot&lt;/name&gt;\r\n\t&lt;description&gt;Spring boot mongodb&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\r\n        &lt;version&gt;4.11.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.7.2&lt;/version&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t &lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nthanks a lot!!\r\n\r\n\r\n&gt; I have searched a lot of solutions here, but nothing fixes my error. ","link":"https://stackoverflow.com/questions/77555687/maven-failed-to-execute-goal-org-springframework-bootspring-boot-maven-plugin","title":"MAVEN - Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.7.2:run (default-cli)","body":"<p>I am working with springboot, and I get this error. Have been fixing this for hours but I still cannot find the solution. The error shows when I try to <code>mvn clean install</code>,</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0:test (default-test) on project mdb-spring-boot:\n</code></pre>\n<p>and when I try to mvn spring-boot:run, this error shows</p>\n<pre><code>[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.7.2:run (default-cli) on project mdb-spring-boot: Application finished with exit code: 1 -&gt; [Help 1]\n</code></pre>\n<p>this is my <code>pom.xml</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.14&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;mdb-spring-boot&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;mdb-spring-boot&lt;/name&gt;\n    &lt;description&gt;Spring boot mongodb&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n            &lt;dependency&gt;\n        &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n        &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\n        &lt;version&gt;4.11.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.7.2&lt;/version&gt;\n            &lt;/plugin&gt;\n             &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>thanks a lot!!</p>\n<blockquote>\n<p>I have searched a lot of solutions here, but nothing fixes my error.</p>\n</blockquote>\n"},{"tags":["java","spring-cloud","spring-kafka","spring-cloud-stream"],"comment_count":0,"is_answered":false,"view_count":11,"answer_count":0,"score":-1,"last_activity_date":1701075416,"creation_date":1701075416,"question_id":77555604,"body_markdown":"There is main funtional flow for intra day processing and which is processed via kafka-streams binder.\n\nAs a peripheral, when an API is invoked within the application. A message should be pushed to a topic.\n\nhow can I achieve this.\nsince, either of the binders can be used\nbinder-kafka or binder-kafka-streams\n\n\nhave tried stream bridge but can only use of the binder","link":"https://stackoverflow.com/questions/77555604/how-to-publish-to-a-separate-topic-in-a-spring-cloud-streams","title":"How to publish to a separate topic In a spring cloud streams?","body":"<p>There is main funtional flow for intra day processing and which is processed via kafka-streams binder.</p>\n<p>As a peripheral, when an API is invoked within the application. A message should be pushed to a topic.</p>\n<p>how can I achieve this.\nsince, either of the binders can be used\nbinder-kafka or binder-kafka-streams</p>\n<p>have tried stream bridge but can only use of the binder</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","apache-flink","flink-streaming"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701113017,"post_id":77555602,"comment_id":136732461,"body_markdown":"`FileSystem.initialize(config, null)` did the trick, thank you!","link":"https://stackoverflow.com/questions/77540049/how-can-i-pass-aws-configs-to-flinks-flink-s3-fs-hadoop-plugin-in-local-tests/77555602#comment136732461_77555602","body":"<code>FileSystem.initialize(config, null)</code> did the trick, thank you!"}],"comment_count":1,"score":3,"last_activity_date":1701075410,"creation_date":1701075410,"answer_id":77555602,"question_id":77540049,"body_markdown":"You could try this:\r\n\r\n1- Create your test config file (flink-config.yaml) with\r\n\r\n    ## S3 config\r\n    s3.access-key: test\r\n    s3.secret-key: test\r\n    s3.endpoint: http://awslocal:4566\r\n    s3.endpoint.region: us-east-1\r\n    s3.path.style.access: true\r\n\r\n2- Load this configuration with\r\n\r\n    import org.apache.flink.configuration.Configuration;\r\n    import org.apache.flink.configuration.GlobalConfiguration;\r\n    import org.apache.flink.core.fs.FileSystem;\r\n    import org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\r\n    \r\n    Configuration loadedConfig = GlobalConfiguration.loadConfiguration(&quot;directory/where/is/flinkconfig&quot;);\r\n    FileSystem.initialize(config, null);\r\n    StreamExecutionEnvironment environment = StreamExecutionEnvironment.createLocalEnvironmentWithWebUI(loadedConfig);\r\n\r\n\r\nThe important part is `FileSystem.initialize(config, null);`\r\n\r\n","link":"https://stackoverflow.com/questions/77540049/how-can-i-pass-aws-configs-to-flinks-flink-s3-fs-hadoop-plugin-in-local-tests/77555602#77555602","title":"How can I pass AWS Configs to Flink&#39;s flink-s3-fs-hadoop plugin in local tests?","body":"<p>You could try this:</p>\n<p>1- Create your test config file (flink-config.yaml) with</p>\n<pre><code>## S3 config\ns3.access-key: test\ns3.secret-key: test\ns3.endpoint: http://awslocal:4566\ns3.endpoint.region: us-east-1\ns3.path.style.access: true\n</code></pre>\n<p>2- Load this configuration with</p>\n<pre><code>import org.apache.flink.configuration.Configuration;\nimport org.apache.flink.configuration.GlobalConfiguration;\nimport org.apache.flink.core.fs.FileSystem;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\n\nConfiguration loadedConfig = GlobalConfiguration.loadConfiguration(&quot;directory/where/is/flinkconfig&quot;);\nFileSystem.initialize(config, null);\nStreamExecutionEnvironment environment = StreamExecutionEnvironment.createLocalEnvironmentWithWebUI(loadedConfig);\n</code></pre>\n<p>The important part is <code>FileSystem.initialize(config, null);</code></p>\n"}],"comment_count":0,"is_answered":true,"view_count":60,"answer_count":1,"score":0,"last_activity_date":1701075410,"creation_date":1700782435,"question_id":77540049,"body_markdown":"**Problem Summary**\r\n\r\n - I am trying to run a local integration test for my flink app, which reads parquet files from AWS s3, does some transformations, and writes the output back to s3; I am using the below:\r\n    - Flink&#39;s parquet format for the source: https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/connectors/datastream/formats/parquet/\r\n    - localstack/testcontainers to spin up a local s3 on localhost\r\n    - junit5 to run my tests\r\n    - Flink minicluster to run my app during the test\r\n    - IntelliJ IDEA\r\n    - Flink version 1.17.0, maven, and java 11\r\n - Because the flink app interacts with s3 (I believe the parquet format above requires it), I have `flink-s3-fs-hadoop` as a test dependency in my project\r\n - **The issue**: \r\n    - There seems to be no way to pass all required AWS configs to the S3 client that the `flink-s3-fs-hadoop` plugin uses\r\n    - Due to the above, a local test using Flink &amp; AWS s3 is not currently possible; I run into `AmazonS3Exception 403 Forbidden` when my source tries to read the parquet files that I put in localstack s3\r\n    - The AWS configs I need to pass are below:\r\n       - s3.access-key\r\n       - s3.secret-key\r\n       - s3.endpoint\r\n       - s3.endpoint.region\r\n       - s3.path.style.access\r\n- Note: the application works in &quot;prod&quot; because it runs on EMR; it&#39;s just locally that this issue occurs\r\n\r\n**What I Have Tried**\r\n1.  Adding AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, AWS_ENDPOINT_URL, and AWS_REGION as environment variables (IntelliJ run configurations)\r\n    - Before I set these I was getting an error that the access key and secret key could not be found, so I believe these were able to get picked up (makes sense given https://hadoop.apache.org/docs/stable/hadoop-aws/tools/hadoop-aws/index.html#Authenticating_via_the_AWS_Environment_Variables) \r\n    - The other environment variables are not getting picked up; I confirmed by running my app in debug mode and looking at the AmazonS3 client params\r\n\r\n2.  Adding a `conf/flink-conf.yaml` under my test resources folder and setting the following environment variable `FLINK_CONF_DIR=src/test/resources/conf`\r\n    -  It seemed that Flink could find the file, but it did not pass any of the values to the plugin\r\n\r\n3.  Creating a local execution environment with the aws configs specified (see code below)\r\n```\r\n        Properties props = new Properties();\r\n        props.put(&quot;s3.access-key&quot;, &quot;test&quot;);\r\n        props.put(&quot;s3.secret-key&quot;,  &quot;test&quot;);\r\n        props.put(&quot;s3.endpoint&quot;, &quot;http://localstack:4566&quot;);\r\n        props.put(&quot;s3.endpoint.region&quot;, &quot;us-east-1&quot;);\r\n        props.put(&quot;s3.path.style.access&quot;, &quot;true&quot;);\r\n        Configuration configuration = ConfigurationUtils.createConfiguration(props);\r\n        final StreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironment(16, configuration);\r\n```\r\n4.  I spun up a Flink cluster (jobmanager + taskmanager) locally using docker-compose, added the AWS configs as k,v pairs within the FLINK_PROPERTIES environment variable (which then appends to the flink-conf), enabled the `flink-s3-fs-hadoop` plugin, and confirmed that the flink app works correctly when submitted to this cluster (i.e. this confirmed that the app works when the configs are added and available to the plugin)\r\n     - Note: even though this way works, it is not good enough for my use-case; I need to be able to run a test within an automated test suite like Junit\r\n```\r\nservices:\r\n  localstack:\r\n    container_name: &quot;awslocal&quot;\r\n    image: localstack/localstack:1.4.0\r\n    ports:\r\n      - &quot;127.0.0.1:4510-4559:4510-4559&quot;\r\n      - &quot;127.0.0.1:4566:4566&quot;\r\n      - &quot;127.0.0.1:4571:4571&quot;\r\n    environment:\r\n      - SERVICES=s3\r\n      - DEBUG=1\r\n      - LS_LOG=trace\r\n      - AWS_ACCESS_KEY_ID=test\r\n      - AWS_SECRET_ACCESS_KEY=test\r\n      - AWS_DEFAULT_REGION=us-east-1\r\n      - HOST_TMP_FOLDER=${TMPDIR:-/tmp/}localstack\r\n      - DOCKER_HOST=unix:///var/run/docker.sock\r\n    volumes:\r\n      - &quot;${TMPDIR:-/tmp}/localstack:/var/lib/localstack&quot;\r\n      - &quot;/var/run/docker.sock:/var/run/docker.sock&quot;\r\n  jobmanager:\r\n    container_name: &quot;jobmanager&quot;\r\n    image: flink:1.17.0-java11\r\n    ports:\r\n      - &quot;8081:8081&quot;\r\n    command: jobmanager\r\n    environment:\r\n      - |\r\n        FLINK_PROPERTIES=\r\n        jobmanager.rpc.address: jobmanager\r\n        s3.access-key: test\r\n        s3.secret-key: test\r\n        s3.endpoint: http://awslocal:4566\r\n        s3.endpoint.region: us-east-1\r\n        s3.path.style.access: true\r\n      - ENABLE_BUILT_IN_PLUGINS=flink-s3-fs-hadoop-1.17.0.jar\r\n    volumes:\r\n      - /Users/myname/IdeaProjects/my-flink-app/target:/opt/flink/usrlib\r\n  taskmanager:\r\n    container_name: &quot;taskmanager&quot;\r\n    image: flink:1.17.0-java11\r\n    depends_on:\r\n      - jobmanager\r\n    command: taskmanager\r\n    environment:\r\n      - |\r\n        FLINK_PROPERTIES=\r\n        jobmanager.rpc.address: jobmanager\r\n        taskmanager.numberOfTaskSlots: 2\r\n        s3.access-key: test\r\n        s3.secret-key: test\r\n        s3.endpoint: http://awslocal:4566\r\n        s3.endpoint.region: us-east-1\r\n        s3.path.style.access: true\r\n      - ENABLE_BUILT_IN_PLUGINS=flink-s3-fs-hadoop-1.17.0.jar\r\n```\r\n","link":"https://stackoverflow.com/questions/77540049/how-can-i-pass-aws-configs-to-flinks-flink-s3-fs-hadoop-plugin-in-local-tests","title":"How can I pass AWS Configs to Flink&#39;s flink-s3-fs-hadoop plugin in local tests?","body":"<p><strong>Problem Summary</strong></p>\n<ul>\n<li>I am trying to run a local integration test for my flink app, which reads parquet files from AWS s3, does some transformations, and writes the output back to s3; I am using the below:\n<ul>\n<li>Flink's parquet format for the source: <a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/connectors/datastream/formats/parquet/\" rel=\"nofollow noreferrer\">https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/connectors/datastream/formats/parquet/</a></li>\n<li>localstack/testcontainers to spin up a local s3 on localhost</li>\n<li>junit5 to run my tests</li>\n<li>Flink minicluster to run my app during the test</li>\n<li>IntelliJ IDEA</li>\n<li>Flink version 1.17.0, maven, and java 11</li>\n</ul>\n</li>\n<li>Because the flink app interacts with s3 (I believe the parquet format above requires it), I have <code>flink-s3-fs-hadoop</code> as a test dependency in my project</li>\n<li><strong>The issue</strong>:\n<ul>\n<li>There seems to be no way to pass all required AWS configs to the S3 client that the <code>flink-s3-fs-hadoop</code> plugin uses</li>\n<li>Due to the above, a local test using Flink &amp; AWS s3 is not currently possible; I run into <code>AmazonS3Exception 403 Forbidden</code> when my source tries to read the parquet files that I put in localstack s3</li>\n<li>The AWS configs I need to pass are below:\n<ul>\n<li>s3.access-key</li>\n<li>s3.secret-key</li>\n<li>s3.endpoint</li>\n<li>s3.endpoint.region</li>\n<li>s3.path.style.access</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Note: the application works in &quot;prod&quot; because it runs on EMR; it's just locally that this issue occurs</li>\n</ul>\n<p><strong>What I Have Tried</strong></p>\n<ol>\n<li><p>Adding AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, AWS_ENDPOINT_URL, and AWS_REGION as environment variables (IntelliJ run configurations)</p>\n<ul>\n<li>Before I set these I was getting an error that the access key and secret key could not be found, so I believe these were able to get picked up (makes sense given <a href=\"https://hadoop.apache.org/docs/stable/hadoop-aws/tools/hadoop-aws/index.html#Authenticating_via_the_AWS_Environment_Variables\" rel=\"nofollow noreferrer\">https://hadoop.apache.org/docs/stable/hadoop-aws/tools/hadoop-aws/index.html#Authenticating_via_the_AWS_Environment_Variables</a>)</li>\n<li>The other environment variables are not getting picked up; I confirmed by running my app in debug mode and looking at the AmazonS3 client params</li>\n</ul>\n</li>\n<li><p>Adding a <code>conf/flink-conf.yaml</code> under my test resources folder and setting the following environment variable <code>FLINK_CONF_DIR=src/test/resources/conf</code></p>\n<ul>\n<li>It seemed that Flink could find the file, but it did not pass any of the values to the plugin</li>\n</ul>\n</li>\n<li><p>Creating a local execution environment with the aws configs specified (see code below)</p>\n</li>\n</ol>\n<pre><code>        Properties props = new Properties();\n        props.put(&quot;s3.access-key&quot;, &quot;test&quot;);\n        props.put(&quot;s3.secret-key&quot;,  &quot;test&quot;);\n        props.put(&quot;s3.endpoint&quot;, &quot;http://localstack:4566&quot;);\n        props.put(&quot;s3.endpoint.region&quot;, &quot;us-east-1&quot;);\n        props.put(&quot;s3.path.style.access&quot;, &quot;true&quot;);\n        Configuration configuration = ConfigurationUtils.createConfiguration(props);\n        final StreamExecutionEnvironment env = StreamExecutionEnvironment.createLocalEnvironment(16, configuration);\n</code></pre>\n<ol start=\"4\">\n<li>I spun up a Flink cluster (jobmanager + taskmanager) locally using docker-compose, added the AWS configs as k,v pairs within the FLINK_PROPERTIES environment variable (which then appends to the flink-conf), enabled the <code>flink-s3-fs-hadoop</code> plugin, and confirmed that the flink app works correctly when submitted to this cluster (i.e. this confirmed that the app works when the configs are added and available to the plugin)\n<ul>\n<li>Note: even though this way works, it is not good enough for my use-case; I need to be able to run a test within an automated test suite like Junit</li>\n</ul>\n</li>\n</ol>\n<pre><code>services:\n  localstack:\n    container_name: &quot;awslocal&quot;\n    image: localstack/localstack:1.4.0\n    ports:\n      - &quot;127.0.0.1:4510-4559:4510-4559&quot;\n      - &quot;127.0.0.1:4566:4566&quot;\n      - &quot;127.0.0.1:4571:4571&quot;\n    environment:\n      - SERVICES=s3\n      - DEBUG=1\n      - LS_LOG=trace\n      - AWS_ACCESS_KEY_ID=test\n      - AWS_SECRET_ACCESS_KEY=test\n      - AWS_DEFAULT_REGION=us-east-1\n      - HOST_TMP_FOLDER=${TMPDIR:-/tmp/}localstack\n      - DOCKER_HOST=unix:///var/run/docker.sock\n    volumes:\n      - &quot;${TMPDIR:-/tmp}/localstack:/var/lib/localstack&quot;\n      - &quot;/var/run/docker.sock:/var/run/docker.sock&quot;\n  jobmanager:\n    container_name: &quot;jobmanager&quot;\n    image: flink:1.17.0-java11\n    ports:\n      - &quot;8081:8081&quot;\n    command: jobmanager\n    environment:\n      - |\n        FLINK_PROPERTIES=\n        jobmanager.rpc.address: jobmanager\n        s3.access-key: test\n        s3.secret-key: test\n        s3.endpoint: http://awslocal:4566\n        s3.endpoint.region: us-east-1\n        s3.path.style.access: true\n      - ENABLE_BUILT_IN_PLUGINS=flink-s3-fs-hadoop-1.17.0.jar\n    volumes:\n      - /Users/myname/IdeaProjects/my-flink-app/target:/opt/flink/usrlib\n  taskmanager:\n    container_name: &quot;taskmanager&quot;\n    image: flink:1.17.0-java11\n    depends_on:\n      - jobmanager\n    command: taskmanager\n    environment:\n      - |\n        FLINK_PROPERTIES=\n        jobmanager.rpc.address: jobmanager\n        taskmanager.numberOfTaskSlots: 2\n        s3.access-key: test\n        s3.secret-key: test\n        s3.endpoint: http://awslocal:4566\n        s3.endpoint.region: us-east-1\n        s3.path.style.access: true\n      - ENABLE_BUILT_IN_PLUGINS=flink-s3-fs-hadoop-1.17.0.jar\n</code></pre>\n"},{"tags":["java","gradle"],"comments":[{"score":0,"post_type":"question","creation_date":1700253698,"post_id":77503129,"comment_id":136636211,"body_markdown":"It is not clear what you are asking. Please read [How to Ask](https://stackoverflow.com/help/how-to-ask) and improve the question.","link":"https://stackoverflow.com/questions/77503129/how-to-use-source-code-inside-gradle-task-for-create-file-and-then-make-jar-with#comment136636211_77503129","body":"It is not clear what you are asking. Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a> and improve the question."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701073604,"creation_date":1701073604,"answer_id":77555445,"question_id":77503129,"body_markdown":"Finally, I found solution only using reflection\r\n\r\n```\r\npublic abstract class SoqTask extends DefaultTask {\r\n    @Input\r\n    public abstract Property&lt;File&gt; getOutputDir();\r\n    @Input\r\n    public abstract ListProperty&lt;URL&gt; getInputUrls();\r\n    @Input\r\n    public abstract Property&lt;String&gt; getSerializerFileName();\r\n\r\n    @TaskAction\r\n    public void generate() {\r\n        URL[] urls = getInputUrls().get().toArray(new URL[0]);\r\n        try (URLClassLoader urlClassLoader = new URLClassLoader(urls)) {\r\n            Class&lt;?&gt; factoryClass =\r\n                    urlClassLoader.loadClass(&quot;my.org.GoodRecordFactory&quot;);\r\n            Method getInstanceMethod = factoryClass.getMethod(&quot;instance&quot;);\r\n            Object recordSerializer = getInstanceMethod.invoke(factoryClass);\r\n            Objects.requireNonNull(recordSerializer);\r\n\r\n            Class&lt;?&gt; serializerUtils =\r\n                    urlClassLoader.loadClass(&quot;my.org.Util&quot;);\r\n            Method serializeMethod = Arrays.stream(serializerUtils.getMethods())\r\n                    .filter(e -&gt; &quot;serialize&quot;.equals(e.getName()))\r\n                    .findFirst().orElseThrow(RuntimeException::new);\r\n            byte[] serializedBytes = (byte[]) serializeMethod.invoke(serializerUtils, recordSerializer);\r\n            \r\n            File outputFile = new File(getOutputDir().get(), getSerializerFileName().get());\r\n            try (FileOutputStream outputStream = new FileOutputStream(outputFile)) {\r\n                outputStream.write(serializedBytes);\r\n            }\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nand in gradle using:\r\n\r\n```\r\nimport one.ids.gradle.SoqTask\r\ntasks.register(&quot;oqTask&quot;, SoqTask) {\r\n    dependsOn(serverJava)\r\n    inputUrls = (sourceSets.server.output.getClassesDirs() + sourceSets.server.runtimeClasspath.files)\r\n            .collect(f -&gt; f.toURI().toURL() as URL)\r\n    outputDir = sourceSets.server.java.destinationDirectory.get().asFile\r\n    serializerFileName = &quot;serializer.bin&quot;\r\n}\r\n```\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77503129/how-to-use-source-code-inside-gradle-task-for-create-file-and-then-make-jar-with/77555445#77555445","title":"How to use source code inside gradle task for create file and then make jar with all of them?","body":"<p>Finally, I found solution only using reflection</p>\n<pre><code>public abstract class SoqTask extends DefaultTask {\n    @Input\n    public abstract Property&lt;File&gt; getOutputDir();\n    @Input\n    public abstract ListProperty&lt;URL&gt; getInputUrls();\n    @Input\n    public abstract Property&lt;String&gt; getSerializerFileName();\n\n    @TaskAction\n    public void generate() {\n        URL[] urls = getInputUrls().get().toArray(new URL[0]);\n        try (URLClassLoader urlClassLoader = new URLClassLoader(urls)) {\n            Class&lt;?&gt; factoryClass =\n                    urlClassLoader.loadClass(&quot;my.org.GoodRecordFactory&quot;);\n            Method getInstanceMethod = factoryClass.getMethod(&quot;instance&quot;);\n            Object recordSerializer = getInstanceMethod.invoke(factoryClass);\n            Objects.requireNonNull(recordSerializer);\n\n            Class&lt;?&gt; serializerUtils =\n                    urlClassLoader.loadClass(&quot;my.org.Util&quot;);\n            Method serializeMethod = Arrays.stream(serializerUtils.getMethods())\n                    .filter(e -&gt; &quot;serialize&quot;.equals(e.getName()))\n                    .findFirst().orElseThrow(RuntimeException::new);\n            byte[] serializedBytes = (byte[]) serializeMethod.invoke(serializerUtils, recordSerializer);\n            \n            File outputFile = new File(getOutputDir().get(), getSerializerFileName().get());\n            try (FileOutputStream outputStream = new FileOutputStream(outputFile)) {\n                outputStream.write(serializedBytes);\n            }\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n}\n</code></pre>\n<p>and in gradle using:</p>\n<pre><code>import one.ids.gradle.SoqTask\ntasks.register(&quot;oqTask&quot;, SoqTask) {\n    dependsOn(serverJava)\n    inputUrls = (sourceSets.server.output.getClassesDirs() + sourceSets.server.runtimeClasspath.files)\n            .collect(f -&gt; f.toURI().toURL() as URL)\n    outputDir = sourceSets.server.java.destinationDirectory.get().asFile\n    serializerFileName = &quot;serializer.bin&quot;\n}\n</code></pre>\n"}],"comment_count":1,"is_answered":false,"view_count":23,"answer_count":1,"score":0,"last_activity_date":1701073604,"creation_date":1700237898,"question_id":77503129,"body_markdown":"I have task in projectRoot/buildSrc\r\n\r\n```\r\npackage myapp.gradle;\r\n\r\nimport myapp.Utils;\r\nimport myapp.GoodRecord;\r\nimport myapp.GoodRecordFactory;\r\nimport org.apache.commons.io.FileUtils;\r\nimport org.gradle.api.DefaultTask;\r\nimport org.gradle.api.tasks.TaskAction;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\n\r\npublic class SoqTask extends DefaultTask {\r\n    private File saveToDir;\r\n\r\n    public void setSaveToDir(File saveToDir) {\r\n        this.saveToDir = saveToDir;\r\n    }\r\n    @TaskAction\r\n    public void run() {\r\n        try {\r\n            GoodRecord instance = GoodRecordFactory.instance();\r\n            byte[] serialize = Utils.serialize(instance);\r\n            FileUtils.writeByteArrayToFile(new File(saveToDir, &quot;goodrecord.bin&quot;), serialize);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nbut SoqTask doesn&#39;t have access for necessary imported classes. \r\n\r\nHow to use project code for create the file and then build it together in one jar?","link":"https://stackoverflow.com/questions/77503129/how-to-use-source-code-inside-gradle-task-for-create-file-and-then-make-jar-with","title":"How to use source code inside gradle task for create file and then make jar with all of them?","body":"<p>I have task in projectRoot/buildSrc</p>\n<pre><code>package myapp.gradle;\n\nimport myapp.Utils;\nimport myapp.GoodRecord;\nimport myapp.GoodRecordFactory;\nimport org.apache.commons.io.FileUtils;\nimport org.gradle.api.DefaultTask;\nimport org.gradle.api.tasks.TaskAction;\n\nimport java.io.File;\nimport java.io.IOException;\n\npublic class SoqTask extends DefaultTask {\n    private File saveToDir;\n\n    public void setSaveToDir(File saveToDir) {\n        this.saveToDir = saveToDir;\n    }\n    @TaskAction\n    public void run() {\n        try {\n            GoodRecord instance = GoodRecordFactory.instance();\n            byte[] serialize = Utils.serialize(instance);\n            FileUtils.writeByteArrayToFile(new File(saveToDir, &quot;goodrecord.bin&quot;), serialize);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>but SoqTask doesn't have access for necessary imported classes.</p>\n<p>How to use project code for create the file and then build it together in one jar?</p>\n"},{"tags":["java","elasticsearch","hibernate-search","hibernate-search-6"],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701073297,"creation_date":1701073297,"answer_id":77555419,"question_id":77552121,"body_markdown":"You can [target multiple fields explicitly](https://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-dsl-predicate-simpleQueryString-multiple-fields) when you define your predicate:\r\n\r\n\r\n```java\r\nSearchResult&lt;Employee&gt; searchResult = searchSession.search(Employee.class)\r\n        .where(f -&gt; f.simpleQueryString()\r\n                .fields(&quot;employee_key&quot;, &quot;first_name&quot;, &quot;addresses.address_key&quot;)\r\n                .matching(queryString))\r\n        .fetch(Math.toIntExact(page.getOffset()), page.getPageSize());\r\n```\r\n\r\nThere is no option to just target &quot;all text fields&quot; at the moment; see https://hibernate.atlassian.net/browse/HSEARCH-3926 .\r\n\r\n---\r\n\r\n\r\nAlso, just to be clear, the simple-query-string syntax does not support explicitly referring to fields in the query string.\r\n\r\nIn this example:\r\n\r\n```java\r\nf.simpleQueryString().fields(&quot;addresses.address_key&quot;)\r\n        .matching(&quot;addresses.address_key:123&quot;)\r\n```\r\n\r\n... the &quot;addresses.address_key:&quot; prefix in the searched string (&quot;addresses.address_key:123&quot;) has not particular meaning and will just be interpreted as terms to be found in the document.\r\n\r\nYou might as well have written it like this:\r\n\r\n\r\n```java\r\nf.simpleQueryString().fields(&quot;addresses.address_key&quot;)\r\n        .matching(&quot;addresses.address_key 123&quot;)\r\n```\r\n\r\nBut really, I think what you want is this:\r\n\r\n\r\n```java\r\nf.simpleQueryString().fields(&quot;addresses.address_key&quot;)\r\n        .matching(&quot;123&quot;)\r\n```","link":"https://stackoverflow.com/questions/77552121/how-to-search-in-all-fields-of-indexed-entities-in-elasticseacrch-using-hibernat/77555419#77555419","title":"How to search in all fields of indexed entities in ElasticSeacrch using hibernateSearch 6","body":"<p>You can <a href=\"https://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-dsl-predicate-simpleQueryString-multiple-fields\" rel=\"nofollow noreferrer\">target multiple fields explicitly</a> when you define your predicate:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SearchResult&lt;Employee&gt; searchResult = searchSession.search(Employee.class)\n        .where(f -&gt; f.simpleQueryString()\n                .fields(&quot;employee_key&quot;, &quot;first_name&quot;, &quot;addresses.address_key&quot;)\n                .matching(queryString))\n        .fetch(Math.toIntExact(page.getOffset()), page.getPageSize());\n</code></pre>\n<p>There is no option to just target &quot;all text fields&quot; at the moment; see <a href=\"https://hibernate.atlassian.net/browse/HSEARCH-3926\" rel=\"nofollow noreferrer\">https://hibernate.atlassian.net/browse/HSEARCH-3926</a> .</p>\n<hr />\n<p>Also, just to be clear, the simple-query-string syntax does not support explicitly referring to fields in the query string.</p>\n<p>In this example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>f.simpleQueryString().fields(&quot;addresses.address_key&quot;)\n        .matching(&quot;addresses.address_key:123&quot;)\n</code></pre>\n<p>... the &quot;addresses.address_key:&quot; prefix in the searched string (&quot;addresses.address_key:123&quot;) has not particular meaning and will just be interpreted as terms to be found in the document.</p>\n<p>You might as well have written it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>f.simpleQueryString().fields(&quot;addresses.address_key&quot;)\n        .matching(&quot;addresses.address_key 123&quot;)\n</code></pre>\n<p>But really, I think what you want is this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>f.simpleQueryString().fields(&quot;addresses.address_key&quot;)\n        .matching(&quot;123&quot;)\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":41,"answer_count":1,"score":0,"last_activity_date":1701073297,"creation_date":1701009591,"last_edit_date":1701010156,"question_id":77552121,"body_markdown":"   \r\nI have following method which searches in ElasticSearch using Hibernate Search API. I pass queryString value as &quot;addresses.address_key:123&quot; which searches in addresses.address_key as mentioned in fields(addresses.address_key).\r\n\r\nHow can I make this method take any input in queryString, for example: first_name:john\r\nand make it search in all FullTextFields.\r\n\r\nElasticSearch version: 8.10\r\nHibernateSearch version: 6.2.2\r\n\r\n    public Page&lt;Employee&gt; searchEmployee(String queryString) {\r\n           try {\r\n                SearchSession searchSession = Search.session(entityManager);\r\n    \r\n                SearchResult&lt;Employee&gt; searchResult = searchSession.search(Employee.class)\r\n                        .extension(ElasticsearchExtension.get())\r\n                        .where(f -&gt; f.simpleQueryString().fields(&quot;addresses.address_key&quot;).matching(queryString))\r\n                        .fetch(Math.toIntExact(page.getOffset()), page.getPageSize());\r\n    \r\n                Page&lt;Employee&gt; pageResult = new PageImpl&lt;&gt;(searchResult.hits(), page, searchResult.total().hitCount());\r\n                return pageResult;\r\n            } catch (SearchException pe) {\r\n               throw pe;\r\n            }\r\n    }\r\n\r\nEntity classes which are indexed:\r\n\r\n    @Indexed(index = &quot;employee&quot;)\r\n    public class Employee {\r\n    \r\n      @FullTextField(name = &quot;employee_key&quot;)\r\n      private String employeeKey;\r\n    \r\n      @FullTextField(name = &quot;first_name&quot;)\r\n      private String firstName;\r\n    \t\r\n      @IndexedEmbedded(includeEmbeddedObjectId = true, includeDepth = 2)\r\n      private Address addresses;\r\n    }\r\n    \r\n    public class Address {\r\n    \t\r\n      @FullTextField(name = &quot;address_key&quot;)\r\n      private String addressKey;\r\n    \r\n      @FullTextField(name = &quot;street_name&quot;)\r\n      private String streetName;\r\n    \r\n    } ","link":"https://stackoverflow.com/questions/77552121/how-to-search-in-all-fields-of-indexed-entities-in-elasticseacrch-using-hibernat","title":"How to search in all fields of indexed entities in ElasticSeacrch using hibernateSearch 6","body":"<p>I have following method which searches in ElasticSearch using Hibernate Search API. I pass queryString value as &quot;addresses.address_key:123&quot; which searches in addresses.address_key as mentioned in fields(addresses.address_key).</p>\n<p>How can I make this method take any input in queryString, for example: first_name:john\nand make it search in all FullTextFields.</p>\n<p>ElasticSearch version: 8.10\nHibernateSearch version: 6.2.2</p>\n<pre><code>public Page&lt;Employee&gt; searchEmployee(String queryString) {\n       try {\n            SearchSession searchSession = Search.session(entityManager);\n\n            SearchResult&lt;Employee&gt; searchResult = searchSession.search(Employee.class)\n                    .extension(ElasticsearchExtension.get())\n                    .where(f -&gt; f.simpleQueryString().fields(&quot;addresses.address_key&quot;).matching(queryString))\n                    .fetch(Math.toIntExact(page.getOffset()), page.getPageSize());\n\n            Page&lt;Employee&gt; pageResult = new PageImpl&lt;&gt;(searchResult.hits(), page, searchResult.total().hitCount());\n            return pageResult;\n        } catch (SearchException pe) {\n           throw pe;\n        }\n}\n</code></pre>\n<p>Entity classes which are indexed:</p>\n<pre><code>@Indexed(index = &quot;employee&quot;)\npublic class Employee {\n\n  @FullTextField(name = &quot;employee_key&quot;)\n  private String employeeKey;\n\n  @FullTextField(name = &quot;first_name&quot;)\n  private String firstName;\n    \n  @IndexedEmbedded(includeEmbeddedObjectId = true, includeDepth = 2)\n  private Address addresses;\n}\n\npublic class Address {\n    \n  @FullTextField(name = &quot;address_key&quot;)\n  private String addressKey;\n\n  @FullTextField(name = &quot;street_name&quot;)\n  private String streetName;\n\n} \n</code></pre>\n"},{"tags":["java","spring","graphql","spring-graphql"],"comments":[{"score":0,"post_type":"question","creation_date":1700576226,"post_id":77523076,"comment_id":136669820,"body_markdown":"Could you share the error you&#39;re getting?","link":"https://stackoverflow.com/questions/77523076/how-to-implement-union-in-spring-graphql-i-get-error-that-im-requesting-object#comment136669820_77523076","body":"Could you share the error you&#39;re getting?"},{"score":0,"post_type":"question","creation_date":1700638210,"post_id":77523076,"comment_id":136677803,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","link":"https://stackoverflow.com/questions/77523076/how-to-implement-union-in-spring-graphql-i-get-error-that-im-requesting-object#comment136677803_77523076","body":"Please provide enough code so others can better understand or reproduce the problem."},{"score":0,"post_type":"question","creation_date":1700648550,"post_id":77523076,"comment_id":136679529,"body_markdown":"@BrianClozel, I&#39;ve added the error message. Could you please check again?","link":"https://stackoverflow.com/questions/77523076/how-to-implement-union-in-spring-graphql-i-get-error-that-im-requesting-object#comment136679529_77523076","body":"@BrianClozel, I&#39;ve added the error message. Could you please check again?"},{"score":0,"post_type":"question","creation_date":1700834278,"post_id":77523076,"comment_id":136704898,"body_markdown":"I can&#39;t reproduce this problem with Spring Boot 2.7.18. Can you create a sample application that shows the problem?","link":"https://stackoverflow.com/questions/77523076/how-to-implement-union-in-spring-graphql-i-get-error-that-im-requesting-object#comment136704898_77523076","body":"I can&#39;t reproduce this problem with Spring Boot 2.7.18. Can you create a sample application that shows the problem?"},{"score":0,"post_type":"question","creation_date":1701074319,"post_id":77523076,"comment_id":136725197,"body_markdown":"@BrianClozel I should&#39;ve posted the entire related code, but couldn&#39;t due to some reasons. I&#39;ve found the solution, and hope you can confirm it too. Thanks for your time.","link":"https://stackoverflow.com/questions/77523076/how-to-implement-union-in-spring-graphql-i-get-error-that-im-requesting-object#comment136725197_77523076","body":"@BrianClozel I should&#39;ve posted the entire related code, but couldn&#39;t due to some reasons. I&#39;ve found the solution, and hope you can confirm it too. Thanks for your time."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701073264,"creation_date":1701073264,"answer_id":77555416,"question_id":77523076,"body_markdown":"**TLDR:**\r\nMatch the name of your object in the GraphQL schema to your Java class (along with case sensitivity), and you&#39;ll have a working code. \r\n\r\n---\r\nI solved the error I was getting. \r\nApparently, for the normal GraphQL queries, it doesn&#39;t matter if the name of your entity in the GraphQL schema, as well as the Java class, is the same or not. \r\n\r\nHowever, when you create a union with the same entities, the names in the GraphQL schema and Java class must match with case sensitivity. \r\n\r\nBasically, if you have an object Address, and you make the GraphQL schema like this:\r\n\r\n    type address{\r\n    .....\r\n    }\r\n\r\nand the Java Object like this:\r\n\r\n    Class Address{\r\n    ....\r\n    }\r\n\r\na simple GraphQL query like this would still work:\r\n\r\n    type Query{\r\n       getAddress: address\r\n    }\r\n\r\nHowever, if you create a union of the Tables as I did, it&#39;ll throw an error.  \r\n\r\nThe following code won&#39;t work and will throw the error that I had been receiving. \r\n\r\n   \r\n\r\n    type Query{ \r\n       getData: [Tables]\r\n    }\r\n    \r\n    type address{\r\n       .....\r\n    }\r\n        \r\n    union Tables = address | identifier\r\n\r\n**You need the name of your object in the GraphQL schema and the Java class to be exactly the same (along with case sensitivity).**\r\nI changed &#39;address&#39; to &#39;Address&#39; in the GraphQL schema, and voila!!\r\n\r\n**The final code that worked is as follows:**\r\n\r\nJava class:\r\n\r\n    Class Address{\r\n    ....\r\n    }\r\n\r\nGraphQL schema:\r\n\r\n    type Address{\r\n        .....\r\n    }\r\n\r\n    type Query{ \r\n       getData: [Tables]\r\n    }\r\n        \r\n    union Tables = Address | Identifier\r\n","link":"https://stackoverflow.com/questions/77523076/how-to-implement-union-in-spring-graphql-i-get-error-that-im-requesting-object/77555416#77555416","title":"How to implement union in spring-graphql? I get error that I&#39;m requesting object but its rather a &#39;graphql.schema.GraphQLUnionType&#39;","body":"<p><strong>TLDR:</strong>\nMatch the name of your object in the GraphQL schema to your Java class (along with case sensitivity), and you'll have a working code.</p>\n<hr />\n<p>I solved the error I was getting.\nApparently, for the normal GraphQL queries, it doesn't matter if the name of your entity in the GraphQL schema, as well as the Java class, is the same or not.</p>\n<p>However, when you create a union with the same entities, the names in the GraphQL schema and Java class must match with case sensitivity.</p>\n<p>Basically, if you have an object Address, and you make the GraphQL schema like this:</p>\n<pre><code>type address{\n.....\n}\n</code></pre>\n<p>and the Java Object like this:</p>\n<pre><code>Class Address{\n....\n}\n</code></pre>\n<p>a simple GraphQL query like this would still work:</p>\n<pre><code>type Query{\n   getAddress: address\n}\n</code></pre>\n<p>However, if you create a union of the Tables as I did, it'll throw an error.</p>\n<p>The following code won't work and will throw the error that I had been receiving.</p>\n<pre><code>type Query{ \n   getData: [Tables]\n}\n\ntype address{\n   .....\n}\n    \nunion Tables = address | identifier\n</code></pre>\n<p><strong>You need the name of your object in the GraphQL schema and the Java class to be exactly the same (along with case sensitivity).</strong>\nI changed 'address' to 'Address' in the GraphQL schema, and voila!!</p>\n<p><strong>The final code that worked is as follows:</strong></p>\n<p>Java class:</p>\n<pre><code>Class Address{\n....\n}\n</code></pre>\n<p>GraphQL schema:</p>\n<pre><code>type Address{\n    .....\n}\n\ntype Query{ \n   getData: [Tables]\n}\n    \nunion Tables = Address | Identifier\n</code></pre>\n"}],"comment_count":5,"is_answered":true,"view_count":76,"answer_count":1,"score":0,"last_activity_date":1701073264,"creation_date":1700572055,"last_edit_date":1701071467,"question_id":77523076,"body_markdown":"I wanted to create a union named Tables, that holds all the other tables and the user can request the table accordingly.\r\nI get the error:\r\nYou have asked for named object type &#39;Tables&#39;, but it&#39;s not an object type but rather a &#39;graphql.schema.GraphQLUnionType&#39;\r\n\r\n\r\nHere is my graphql schema:\r\n\r\n```\r\ntype Query{ \r\n  getData: [Tables]\r\n}\r\nunion Tables = address | identifier\r\n```\r\nMy query is a simple one: \r\n```\r\nquery allData{ \r\n getData{ \r\n  __typename \r\n } \r\n}\r\n```\r\n\r\nMy Java method looks like this:\r\n```\r\n@QueryMapping \r\npublic List getData() { \r\n return List.of(new Address());\r\n}\r\n```\r\n\r\nHere is the error I&#39;m receiving:\r\n\r\n```\r\nERROR 14724 - [nio-8880-exec-1] o.a.c.c.[. [. [/].[dispatcherServlet] : Servlet.service() for servlet\r\n[dispatcherServlet] threw exception\r\n\r\njava.util.concurrent.CompletionException Create breakpoint: graphql.AssertException: You have asked for named object type &#39;Tables&#39; but its not an object type but rather a &#39;graphql.schema.GraphQLUnionType&#39;\r\n\r\nat java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331) ~[na:na]\r\n\r\nat java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346) ~[na:na] at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete (CompletableFuture.java:870) ~[na:na]\r\n\r\njava.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883) -[na:na]\r\n\r\nat at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251) ~[na:na]\r\n\r\nat graphql.execution.Execution.executeoperation(Execution.java:174) ~[graphql-java-18.5.jar:na]\r\n\r\nat graphql.execution.Execution.execute(Execution.java:105) -[graphql-java-18.5.jar:na]\r\n\r\nat graphql.GraphQL.execute(GraphQL.java:641) [graphql-java-18.5.jar:na]\r\n\r\nat graphql.GraphQL.LambdasparseValidateAndExecute$11(GraphQL.java:561) -[graphql-java-18.5.jar:na] at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1106)-[na:na]\r\n\r\nat java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2235)-[na:na]\r\n\r\nat graphql.GraphQL.parseValidateAndExecute(GraphQL.java:556) -[graphql-java-18.5.jar:na] at graphql.GraphQL.executeAsync(Graphq.java:524) [graphql-java-18.5.jar:na]\r\n\r\nat org.springframework.graphql.execution.DefaultExecutionGraphql.Service.Lambda$execute$2(DefaultExecution@nave -[spring-graphql-1.0.6.jar:1.0.6]\r\n\r\nat reactor.core.publisher.MonoDeferContextual.subscribe(MongDeferContextual.java:47) -[ reactor-core-3.4.33.jar:3.4.33]\r\n```\r\n\r\nI saw some implementations and this should work, but throws an error in my case. \r\n\r\n**My Classes Address and Identifier are Hibernate Entities**. \r\n\r\nI simply wanted to create a generic controller that can serve as an entry point for all the tables. \r\nI thought union would do the job, what can I do in this case? ","link":"https://stackoverflow.com/questions/77523076/how-to-implement-union-in-spring-graphql-i-get-error-that-im-requesting-object","title":"How to implement union in spring-graphql? I get error that I&#39;m requesting object but its rather a &#39;graphql.schema.GraphQLUnionType&#39;","body":"<p>I wanted to create a union named Tables, that holds all the other tables and the user can request the table accordingly.\nI get the error:\nYou have asked for named object type 'Tables', but it's not an object type but rather a 'graphql.schema.GraphQLUnionType'</p>\n<p>Here is my graphql schema:</p>\n<pre><code>type Query{ \n  getData: [Tables]\n}\nunion Tables = address | identifier\n</code></pre>\n<p>My query is a simple one:</p>\n<pre><code>query allData{ \n getData{ \n  __typename \n } \n}\n</code></pre>\n<p>My Java method looks like this:</p>\n<pre><code>@QueryMapping \npublic List getData() { \n return List.of(new Address());\n}\n</code></pre>\n<p>Here is the error I'm receiving:</p>\n<pre><code>ERROR 14724 - [nio-8880-exec-1] o.a.c.c.[. [. [/].[dispatcherServlet] : Servlet.service() for servlet\n[dispatcherServlet] threw exception\n\njava.util.concurrent.CompletionException Create breakpoint: graphql.AssertException: You have asked for named object type 'Tables' but its not an object type but rather a 'graphql.schema.GraphQLUnionType'\n\nat java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:331) ~[na:na]\n\nat java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:346) ~[na:na] at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete (CompletableFuture.java:870) ~[na:na]\n\njava.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:883) -[na:na]\n\nat at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2251) ~[na:na]\n\nat graphql.execution.Execution.executeoperation(Execution.java:174) ~[graphql-java-18.5.jar:na]\n\nat graphql.execution.Execution.execute(Execution.java:105) -[graphql-java-18.5.jar:na]\n\nat graphql.GraphQL.execute(GraphQL.java:641) [graphql-java-18.5.jar:na]\n\nat graphql.GraphQL.LambdasparseValidateAndExecute$11(GraphQL.java:561) -[graphql-java-18.5.jar:na] at java.base/java.util.concurrent.CompletableFuture.uniComposeStage(CompletableFuture.java:1106)-[na:na]\n\nat java.base/java.util.concurrent.CompletableFuture.thenCompose(CompletableFuture.java:2235)-[na:na]\n\nat graphql.GraphQL.parseValidateAndExecute(GraphQL.java:556) -[graphql-java-18.5.jar:na] at graphql.GraphQL.executeAsync(Graphq.java:524) [graphql-java-18.5.jar:na]\n\nat org.springframework.graphql.execution.DefaultExecutionGraphql.Service.Lambda$execute$2(DefaultExecution@nave -[spring-graphql-1.0.6.jar:1.0.6]\n\nat reactor.core.publisher.MonoDeferContextual.subscribe(MongDeferContextual.java:47) -[ reactor-core-3.4.33.jar:3.4.33]\n</code></pre>\n<p>I saw some implementations and this should work, but throws an error in my case.</p>\n<p><strong>My Classes Address and Identifier are Hibernate Entities</strong>.</p>\n<p>I simply wanted to create a generic controller that can serve as an entry point for all the tables.\nI thought union would do the job, what can I do in this case?</p>\n"},{"tags":["java","elasticsearch","hibernate-search","hibernate-search-6"],"answers":[{"comment_count":0,"score":2,"last_activity_date":1701072653,"creation_date":1701072653,"answer_id":77555357,"question_id":77553472,"body_markdown":"Hibernate Search expects that you&#39;d pass the query itself without the wrapper JSON object. See an example [here][1]. So in your case you should pass a:\r\n\r\n```json\r\n{\r\n   &quot;query_string&quot;:{\r\n      &quot;fields&quot;:[\r\n         &quot;addresses.address_key&quot;\r\n      ],\r\n      &quot;query&quot;:&quot;3g5g36ee-45b0-4636-79fe-9aaf446b7ab6&quot;\r\n   }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-dsl-predicate-extensions-elasticsearch-from-json","link":"https://stackoverflow.com/questions/77553472/named-object-not-found-exception-while-querying-elasticsearch/77555357#77555357","title":"named_object_not_found_exception while querying ElasticSearch","body":"<p>Hibernate Search expects that you'd pass the query itself without the wrapper JSON object. See an example <a href=\"https://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#search-dsl-predicate-extensions-elasticsearch-from-json\" rel=\"nofollow noreferrer\">here</a>. So in your case you should pass a:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n   &quot;query_string&quot;:{\n      &quot;fields&quot;:[\n         &quot;addresses.address_key&quot;\n      ],\n      &quot;query&quot;:&quot;3g5g36ee-45b0-4636-79fe-9aaf446b7ab6&quot;\n   }\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":20,"answer_count":1,"score":0,"last_activity_date":1701072653,"creation_date":1701032226,"question_id":77553472,"body_markdown":"I am trying to query ElasticSearch using hibernateSearh 6. Following is the Json query which is sent to ElasticSearch. It looks fine as per documentation here : https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html\r\n\r\n    {&quot;query&quot;:{&quot;query_string&quot;:{&quot;fields&quot;:[&quot;addresses.address_key&quot;],&quot;query&quot;:&quot;3g5g36ee-45b0-4636-79fe-9aaf446b7ab6&quot;}}}\r\n\r\nHowver, getting following Exception with message:\r\n\r\n    org.hibernate.search.util.common.SearchException: HSEARCH400007: Elasticsearch request failed: HSEARCH400090: Elasticsearch response indicates a failure.\r\n    Request: POST /employee-read/_search with parameters {from=0, size=10, track_total_hits=true}\r\n    Response: 400 &#39;Bad Request&#39; from &#39;http://localhost:9200&#39; with body \r\n    {\r\n      &quot;error&quot;: {\r\n        &quot;root_cause&quot;: [\r\n          {\r\n            &quot;type&quot;: &quot;parsing_exception&quot;,\r\n            &quot;reason&quot;: &quot;unknown query [query]&quot;,\r\n            &quot;line&quot;: 1,\r\n            &quot;col&quot;: 19\r\n          }\r\n        ],\r\n        &quot;type&quot;: &quot;parsing_exception&quot;,\r\n        &quot;reason&quot;: &quot;unknown query [query]&quot;,\r\n        &quot;line&quot;: 1,\r\n        &quot;col&quot;: 19,\r\n        &quot;caused_by&quot;: {\r\n          &quot;type&quot;: &quot;named_object_not_found_exception&quot;,\r\n          &quot;reason&quot;: &quot;[1:19] unknown field [query]&quot;\r\n        }\r\n      },\r\n      &quot;status&quot;: 400\r\n    }\r\n\r\n\r\nHere are the entities:\r\n\r\n    @Indexed(index = &quot;employee&quot;)\r\n    public class Employee {\r\n    \r\n      @FullTextField(name = &quot;employee_key&quot;)\r\n      private String employeeKey;\r\n    \r\n      @FullTextField(name = &quot;first_name&quot;)\r\n      private String firstName;\r\n        \r\n      @IndexedEmbedded(includeEmbeddedObjectId = true, includeDepth = 2)\r\n      private Address addresses;\r\n    }\r\n    \r\n    public class Address {\r\n        \r\n      @FullTextField(name = &quot;address_key&quot;)\r\n      private String addressKey;\r\n    \r\n      @FullTextField(name = &quot;street_name&quot;)\r\n      private String streetName;\r\n    \r\n    } \r\n\r\nand following is the code to fetch data from Elastic where predicateFunction is: `(ElasticsearchSearchPredicateFactory f) -&gt;  f.fromJson(queryJson)`\r\n\r\n    SearchSession searchSession = Search.session(entityManager);\r\n    \r\n                SearchResult&lt;Employee&gt; searchResult = searchSession.search(Employee.class)\r\n                        .extension(ElasticsearchExtension.get())\r\n                        .where(searchPredicateFactory -&gt; {\r\n                            return predicateFunction.apply(searchPredicateFactory);\r\n                        })\r\n                        .fetch(Math.toIntExact(page.getOffset()), page.getPageSize());\r\n\r\n","link":"https://stackoverflow.com/questions/77553472/named-object-not-found-exception-while-querying-elasticsearch","title":"named_object_not_found_exception while querying ElasticSearch","body":"<p>I am trying to query ElasticSearch using hibernateSearh 6. Following is the Json query which is sent to ElasticSearch. It looks fine as per documentation here : <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html\" rel=\"nofollow noreferrer\">https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html</a></p>\n<pre><code>{&quot;query&quot;:{&quot;query_string&quot;:{&quot;fields&quot;:[&quot;addresses.address_key&quot;],&quot;query&quot;:&quot;3g5g36ee-45b0-4636-79fe-9aaf446b7ab6&quot;}}}\n</code></pre>\n<p>Howver, getting following Exception with message:</p>\n<pre><code>org.hibernate.search.util.common.SearchException: HSEARCH400007: Elasticsearch request failed: HSEARCH400090: Elasticsearch response indicates a failure.\nRequest: POST /employee-read/_search with parameters {from=0, size=10, track_total_hits=true}\nResponse: 400 'Bad Request' from 'http://localhost:9200' with body \n{\n  &quot;error&quot;: {\n    &quot;root_cause&quot;: [\n      {\n        &quot;type&quot;: &quot;parsing_exception&quot;,\n        &quot;reason&quot;: &quot;unknown query [query]&quot;,\n        &quot;line&quot;: 1,\n        &quot;col&quot;: 19\n      }\n    ],\n    &quot;type&quot;: &quot;parsing_exception&quot;,\n    &quot;reason&quot;: &quot;unknown query [query]&quot;,\n    &quot;line&quot;: 1,\n    &quot;col&quot;: 19,\n    &quot;caused_by&quot;: {\n      &quot;type&quot;: &quot;named_object_not_found_exception&quot;,\n      &quot;reason&quot;: &quot;[1:19] unknown field [query]&quot;\n    }\n  },\n  &quot;status&quot;: 400\n}\n</code></pre>\n<p>Here are the entities:</p>\n<pre><code>@Indexed(index = &quot;employee&quot;)\npublic class Employee {\n\n  @FullTextField(name = &quot;employee_key&quot;)\n  private String employeeKey;\n\n  @FullTextField(name = &quot;first_name&quot;)\n  private String firstName;\n    \n  @IndexedEmbedded(includeEmbeddedObjectId = true, includeDepth = 2)\n  private Address addresses;\n}\n\npublic class Address {\n    \n  @FullTextField(name = &quot;address_key&quot;)\n  private String addressKey;\n\n  @FullTextField(name = &quot;street_name&quot;)\n  private String streetName;\n\n} \n</code></pre>\n<p>and following is the code to fetch data from Elastic where predicateFunction is: <code>(ElasticsearchSearchPredicateFactory f) -&gt;  f.fromJson(queryJson)</code></p>\n<pre><code>SearchSession searchSession = Search.session(entityManager);\n\n            SearchResult&lt;Employee&gt; searchResult = searchSession.search(Employee.class)\n                    .extension(ElasticsearchExtension.get())\n                    .where(searchPredicateFactory -&gt; {\n                        return predicateFunction.apply(searchPredicateFactory);\n                    })\n                    .fetch(Math.toIntExact(page.getOffset()), page.getPageSize());\n</code></pre>\n"},{"tags":["java","android","arrays","json","sketchware"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701075190,"post_id":77553643,"comment_id":136725327,"body_markdown":"How to add all the key in user array to the listmap and view to the recyclerview","link":"https://stackoverflow.com/questions/77553467/begin-array-but-was-string-at-line-1-column-1-java-android-sketchware/77553643#comment136725327_77553643","body":"How to add all the key in user array to the listmap and view to the recyclerview"},{"score":0,"post_type":"answer","creation_date":1701108031,"post_id":77553643,"comment_id":136731631,"body_markdown":"@inshanityina, just the _keys_, or the _values_ as well?","link":"https://stackoverflow.com/questions/77553467/begin-array-but-was-string-at-line-1-column-1-java-android-sketchware/77553643#comment136731631_77553643","body":"@inshanityina, just the <i>keys</i>, or the <i>values</i> as well?"}],"comment_count":2,"score":0,"last_activity_date":1701036083,"creation_date":1701036083,"answer_id":77553643,"question_id":77553467,"body_markdown":"If you know the _JSON_ _values_, you can be explicit.\r\n\r\nHere is an example, where _s_ is the _String_.\r\n\r\n```java\r\nGson g = new Gson();\r\nMap&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt; m\r\n    = g.&lt;Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt;fromJson(s, Map.class);\r\n\r\nSystem.out.println(m);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n{user=[{id=string, address=string, contact=string, name=string, description=string, image_url=}], next=string}\r\n```\r\n\r\nIf not, define the _type-parameter_ as _Object_, and cast the _Map_ _value_.\r\n\r\n```java\r\nGson g = new Gson();\r\nMap&lt;String, Object&gt; m = g.&lt;Map&lt;String, Object&gt;&gt;fromJson(s, Map.class);\r\n\r\n@SuppressWarnings(&quot;unchecked&quot;)\r\nList&lt;Map&lt;String, Object&gt;&gt; users = (List&lt;Map&lt;String, Object&gt;&gt;) m.get(&quot;user&quot;);\r\nSystem.out.println(users);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[{id=string, address=string, contact=string, name=string, description=string, image_url=}]\r\n```","link":"https://stackoverflow.com/questions/77553467/begin-array-but-was-string-at-line-1-column-1-java-android-sketchware/77553643#77553643","title":"BEGIN_ARRAY but was STRING at line 1 column 1 java android sketchware","body":"<p>If you know the <em>JSON</em> <em>values</em>, you can be explicit.</p>\n<p>Here is an example, where <em>s</em> is the <em>String</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Gson g = new Gson();\nMap&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt; m\n    = g.&lt;Map&lt;String, List&lt;Map&lt;String, String&gt;&gt;&gt;&gt;fromJson(s, Map.class);\n\nSystem.out.println(m);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>{user=[{id=string, address=string, contact=string, name=string, description=string, image_url=}], next=string}\n</code></pre>\n<p>If not, define the <em>type-parameter</em> as <em>Object</em>, and cast the <em>Map</em> <em>value</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Gson g = new Gson();\nMap&lt;String, Object&gt; m = g.&lt;Map&lt;String, Object&gt;&gt;fromJson(s, Map.class);\n\n@SuppressWarnings(&quot;unchecked&quot;)\nList&lt;Map&lt;String, Object&gt;&gt; users = (List&lt;Map&lt;String, Object&gt;&gt;) m.get(&quot;user&quot;);\nSystem.out.println(users);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[{id=string, address=string, contact=string, name=string, description=string, image_url=}]\n</code></pre>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701075135,"post_id":77553664,"comment_id":136725317,"body_markdown":"how to add the key and value to listmap and show to the recyclerview","link":"https://stackoverflow.com/questions/77553467/begin-array-but-was-string-at-line-1-column-1-java-android-sketchware/77553664#comment136725317_77553664","body":"how to add the key and value to listmap and show to the recyclerview"}],"comment_count":1,"score":2,"last_activity_date":1701037198,"last_edit_date":1701037198,"creation_date":1701036580,"answer_id":77553664,"question_id":77553467,"body_markdown":"The warning is there, Array was expected but found string, please show your response model for more context. \r\nFrom your json response model class or model data class, user should be an array like below. \r\n\r\n   For Kotlin\r\n   \r\n\r\n    data class Data (\r\n\r\n     @SerializedName(&quot;user&quot; ) var user : ArrayList&lt;User&gt; = arrayListOf(),\r\n     @SerializedName(&quot;next&quot; ) var next : String?         = null\r\n\r\n     )\r\n\r\n\r\n    data class User (\r\n      @SerializedName(&quot;id&quot;          ) var id          : String? = null,\r\n      @SerializedName(&quot;address&quot;     ) var address     : String? = null,\r\n      @SerializedName(&quot;contact&quot;     ) var contact     : String? = null,\r\n      @SerializedName(&quot;name&quot;        ) var name        : String? = null,\r\n      @SerializedName(&quot;description&quot; ) var description : String? = null,\r\n      @SerializedName(&quot;image_url&quot;   ) var imageUrl    : String? = null\r\n    )\r\n\r\n\r\nJava Should be:\r\n\r\n     public class Data{\r\n      public ArrayList&lt;User&gt; user;\r\n      public String next;\r\n     }\r\n\r\n     public class User{\r\n      public String id;\r\n      public String address;\r\n      public String contact;\r\n      public String name;\r\n      public String description;\r\n      public String image_url;\r\n     }\r\n\r\n","link":"https://stackoverflow.com/questions/77553467/begin-array-but-was-string-at-line-1-column-1-java-android-sketchware/77553664#77553664","title":"BEGIN_ARRAY but was STRING at line 1 column 1 java android sketchware","body":"<p>The warning is there, Array was expected but found string, please show your response model for more context.\nFrom your json response model class or model data class, user should be an array like below.</p>\n<p>For Kotlin</p>\n<pre><code>data class Data (\n\n @SerializedName(&quot;user&quot; ) var user : ArrayList&lt;User&gt; = arrayListOf(),\n @SerializedName(&quot;next&quot; ) var next : String?         = null\n\n )\n\n\ndata class User (\n  @SerializedName(&quot;id&quot;          ) var id          : String? = null,\n  @SerializedName(&quot;address&quot;     ) var address     : String? = null,\n  @SerializedName(&quot;contact&quot;     ) var contact     : String? = null,\n  @SerializedName(&quot;name&quot;        ) var name        : String? = null,\n  @SerializedName(&quot;description&quot; ) var description : String? = null,\n  @SerializedName(&quot;image_url&quot;   ) var imageUrl    : String? = null\n)\n</code></pre>\n<p>Java Should be:</p>\n<pre><code> public class Data{\n  public ArrayList&lt;User&gt; user;\n  public String next;\n }\n\n public class User{\n  public String id;\n  public String address;\n  public String contact;\n  public String name;\n  public String description;\n  public String image_url;\n }\n</code></pre>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701075053,"post_id":77555306,"comment_id":136725309,"body_markdown":"card_list = new Gson().fromJson(array.toString(), new TypeToken&lt;List&lt;Map&lt;String, String&gt;&gt;&gt;(){}.getType());\n\t                                                      ^^^^^^^^^\nTypeToken cannot be resolved to a type\n----------\n\tcard_list = new Gson().fromJson(array.toString(), new TypeToken&lt;List&lt;Map&lt;String, String&gt;&gt;&gt;(){}.getType());\n\t                                                                                               ^^^^^^^\nThe method getType() is undefined for the type new TypeToken&lt;List&lt;Map&lt;String,String&gt;&gt;&gt;(){}","link":"https://stackoverflow.com/questions/77553467/begin-array-but-was-string-at-line-1-column-1-java-android-sketchware/77555306#comment136725309_77555306","body":"card_list = new Gson().fromJson(array.toString(), new TypeToken&lt;List&lt;Map&lt;String, String&gt;&gt;&gt;(){}.getType()); \t                                                      ^^^^^^^^^ TypeToken cannot be resolved to a type ---------- \tcard_list = new Gson().fromJson(array.toString(), new TypeToken&lt;List&lt;Map&lt;String, String&gt;&gt;&gt;(){}.getType()); \t                                                                                               ^^^^^^^ The method getType() is undefined for the type new TypeToken&lt;List&lt;Map&lt;String,String&gt;&gt;&gt;(){}"},{"score":0,"post_type":"answer","creation_date":1701163108,"post_id":77555306,"comment_id":136738183,"body_markdown":"Thank you, That really helps to understand","link":"https://stackoverflow.com/questions/77553467/begin-array-but-was-string-at-line-1-column-1-java-android-sketchware/77555306#comment136738183_77555306","body":"Thank you, That really helps to understand"}],"comment_count":2,"score":0,"last_activity_date":1701071981,"creation_date":1701071981,"answer_id":77555306,"question_id":77553467,"body_markdown":"Try your code this way:\r\n\r\n\r\n    try {\r\n        JSONObject jsonResponse = new JSONObject(_response);\r\n    \r\n        JSONArray userArray = jsonResponse.getJSONArray(&quot;user&quot;);\r\n        \r\n        card_list = new Gson().fromJson(userArray.toString(), new TypeToken&lt;List&lt;Map&lt;String, String&gt;&gt;&gt;(){}.getType());\r\n    \r\n        if (card_list.size() &gt; 5) {\r\n            recyclerview1.setAdapter(new Recyclerview1Adapter(card_list));\r\n        } else {\r\n            SketchwareUtil.showMessage(getApplicationContext(), &quot;Not enough data for RecyclerView&quot;);\r\n        }\r\n    } catch (JSONException e) {\r\n        e.printStackTrace();\r\n        SketchwareUtil.showMessage(getApplicationContext(), &quot;Error parsing JSON&quot;);\r\n    }\r\n\r\n","link":"https://stackoverflow.com/questions/77553467/begin-array-but-was-string-at-line-1-column-1-java-android-sketchware/77555306#77555306","title":"BEGIN_ARRAY but was STRING at line 1 column 1 java android sketchware","body":"<p>Try your code this way:</p>\n<pre><code>try {\n    JSONObject jsonResponse = new JSONObject(_response);\n\n    JSONArray userArray = jsonResponse.getJSONArray(&quot;user&quot;);\n    \n    card_list = new Gson().fromJson(userArray.toString(), new TypeToken&lt;List&lt;Map&lt;String, String&gt;&gt;&gt;(){}.getType());\n\n    if (card_list.size() &gt; 5) {\n        recyclerview1.setAdapter(new Recyclerview1Adapter(card_list));\n    } else {\n        SketchwareUtil.showMessage(getApplicationContext(), &quot;Not enough data for RecyclerView&quot;);\n    }\n} catch (JSONException e) {\n    e.printStackTrace();\n    SketchwareUtil.showMessage(getApplicationContext(), &quot;Error parsing JSON&quot;);\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":64,"answer_count":3,"score":0,"last_activity_date":1701071981,"creation_date":1701032091,"last_edit_date":1701071219,"question_id":77553467,"body_markdown":"OnResponse code :\r\n\r\n\r\n&lt;pre&gt;card_list = new Gson().fromJson(_response, new TypeToken&lt;ArrayList&lt;HashMap&lt;String, Object&gt;&gt;&gt;(){}.getType());\r\n\r\n\r\nif (card_list.size() &gt; 5) {\r\n\r\n\trecyclerview1.setAdapter(new Recyclerview1Adapter(card_list));\r\n\r\n}else{\r\n\r\nSketchwareUtil.showMessage(getApplicationContext(), _response);\r\n\r\n}&lt;/pre&gt;\r\n\r\nJson 200 Result like :\r\n\r\n\r\n\r\n&lt;pre&gt;{\r\n\r\n  &quot;user&quot;: [\r\n\r\n    {\r\n\r\n      &quot;id&quot;: &quot;string&quot;,\r\n\r\n      &quot;address&quot;: &quot;string&quot;,\r\n\r\n      &quot;contact&quot;: &quot;string&quot;,\r\n\r\n      &quot;name&quot;: &quot;string&quot;,\r\n\r\n      &quot;description&quot;: &quot;string&quot;,\r\n\r\n      &quot;image_url&quot;: &quot;&quot;\r\n\r\n    },{...},{...}\r\n\r\n  ],\r\n\r\n  &quot;next&quot;: &quot;string&quot;\r\n\r\n}&lt;/pre&gt;\r\n\r\nBut have the error when opening an activity :\r\n\r\nBEGIN_ARRAY but was STRING at line 1 column 1\r\n\r\nPlease help me solve the code to retrieve json array to listmap for recyclerview in java android or sketchware","link":"https://stackoverflow.com/questions/77553467/begin-array-but-was-string-at-line-1-column-1-java-android-sketchware","title":"BEGIN_ARRAY but was STRING at line 1 column 1 java android sketchware","body":"<p>OnResponse code :</p>\n<pre>card_list = new Gson().fromJson(_response, new TypeToken>>(){}.getType());\n\n\nif (card_list.size() > 5) {\n\n    recyclerview1.setAdapter(new Recyclerview1Adapter(card_list));\n\n}else{\n\nSketchwareUtil.showMessage(getApplicationContext(), _response);\n\n}</pre>\n<p>Json 200 Result like :</p>\n<pre>{\n\n  \"user\": [\n\n    {\n\n      \"id\": \"string\",\n\n      \"address\": \"string\",\n\n      \"contact\": \"string\",\n\n      \"name\": \"string\",\n\n      \"description\": \"string\",\n\n      \"image_url\": \"\"\n\n    },{...},{...}\n\n  ],\n\n  \"next\": \"string\"\n\n}</pre>\n<p>But have the error when opening an activity :</p>\n<p>BEGIN_ARRAY but was STRING at line 1 column 1</p>\n<p>Please help me solve the code to retrieve json array to listmap for recyclerview in java android or sketchware</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-data"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1699201504,"post_id":77426590,"comment_id":136498969,"body_markdown":"Thank you for help. Unfortunately It doesn&#39;t works. SQL syntax error still occurs..","link":"https://stackoverflow.com/questions/77426497/is-there-any-way-to-select-specific-columns-and-make-them-entity-without-creatin/77426590#comment136498969_77426590","body":"Thank you for help. Unfortunately It doesn&#39;t works. SQL syntax error still occurs.."},{"score":0,"post_type":"answer","creation_date":1699201566,"post_id":77426590,"comment_id":136498977,"body_markdown":"have you removed `nativeQuery = true` ?","link":"https://stackoverflow.com/questions/77426497/is-there-any-way-to-select-specific-columns-and-make-them-entity-without-creatin/77426590#comment136498977_77426590","body":"have you removed <code>nativeQuery = true</code> ?"},{"score":1,"post_type":"answer","creation_date":1699203187,"post_id":77426590,"comment_id":136499171,"body_markdown":"oh.. oh...!!! I really appreciate!! Since the entity package path was already imported, I changed query to &quot;SELECT new MemberEntity(m.password, m.refreshToken) FROM MemberEntity m where m.id = :memberId&quot;.  And also removed the &quot;nativeQuery = true&quot; as you informed me!!! Finally!!! I really really appreciate!!!! Have a good day my hero!!","link":"https://stackoverflow.com/questions/77426497/is-there-any-way-to-select-specific-columns-and-make-them-entity-without-creatin/77426590#comment136499171_77426590","body":"oh.. oh...!!! I really appreciate!! Since the entity package path was already imported, I changed query to &quot;SELECT new MemberEntity(m.password, m.refreshToken) FROM MemberEntity m where m.id = :memberId&quot;.  And also removed the &quot;nativeQuery = true&quot; as you informed me!!! Finally!!! I really really appreciate!!!! Have a good day my hero!!"},{"score":0,"post_type":"answer","creation_date":1699203302,"post_id":77426590,"comment_id":136499189,"body_markdown":"you are welcome, also don`t forget to upvote and also accept my answer, if someone in the future will have the same problem.","link":"https://stackoverflow.com/questions/77426497/is-there-any-way-to-select-specific-columns-and-make-them-entity-without-creatin/77426590#comment136499189_77426590","body":"you are welcome, also don`t forget to upvote and also accept my answer, if someone in the future will have the same problem."},{"score":0,"post_type":"answer","creation_date":1699203641,"post_id":77426590,"comment_id":136499243,"body_markdown":"I&#39;m sorry about upvote... I really want to upvote, but the system says I need 15 reputation.","link":"https://stackoverflow.com/questions/77426497/is-there-any-way-to-select-specific-columns-and-make-them-entity-without-creatin/77426590#comment136499243_77426590","body":"I&#39;m sorry about upvote... I really want to upvote, but the system says I need 15 reputation."},{"score":0,"post_type":"answer","creation_date":1699203915,"post_id":77426590,"comment_id":136499279,"body_markdown":"ok, no problem.","link":"https://stackoverflow.com/questions/77426497/is-there-any-way-to-select-specific-columns-and-make-them-entity-without-creatin/77426590#comment136499279_77426590","body":"ok, no problem."}],"comment_count":6,"score":1,"last_activity_date":1699199171,"creation_date":1699199171,"answer_id":77426590,"question_id":77426497,"body_markdown":"Based on your information that you provide I can suggest you to do something like next one approach.\r\n\r\nIn `MemberEntity` create a Constructor that match your requirements about fields.\r\n\r\n    public class MemberEntity {\r\n         \r\n         //fields\r\n           ...\r\n          public MemberEntity(String password, String refreshToken) {\r\n            this.password = password;\r\n            this.refreshToken = refreshToken;\r\n          }\r\n    }\r\n\r\nTo know if the query is a native one it cannot use framework features as(DTO Projection) or anything else and based on it the query now should be as next one.\r\n\r\n      @Query(value = &quot;SELECT new com.project.myProject.member.domain.entity.MemberEntity(m.password, m.refreshToken) FROM MemberEntity m WHERE m.id = :memberId &quot;)\r\n      MemberEntity findByMemberId(@Param(&quot;memberId&quot;) String memberId);\r\n\r\nAnd I should fix your current problem.\r\n\r\n","link":"https://stackoverflow.com/questions/77426497/is-there-any-way-to-select-specific-columns-and-make-them-entity-without-creatin/77426590#77426590","title":"Is there any way to select specific columns and make them entity without creating any interface or DTO class?","body":"<p>Based on your information that you provide I can suggest you to do something like next one approach.</p>\n<p>In <code>MemberEntity</code> create a Constructor that match your requirements about fields.</p>\n<pre><code>public class MemberEntity {\n     \n     //fields\n       ...\n      public MemberEntity(String password, String refreshToken) {\n        this.password = password;\n        this.refreshToken = refreshToken;\n      }\n}\n</code></pre>\n<p>To know if the query is a native one it cannot use framework features as(DTO Projection) or anything else and based on it the query now should be as next one.</p>\n<pre><code>  @Query(value = &quot;SELECT new com.project.myProject.member.domain.entity.MemberEntity(m.password, m.refreshToken) FROM MemberEntity m WHERE m.id = :memberId &quot;)\n  MemberEntity findByMemberId(@Param(&quot;memberId&quot;) String memberId);\n</code></pre>\n<p>And I should fix your current problem.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701071327,"creation_date":1701071327,"answer_id":77555245,"question_id":77426497,"body_markdown":"if You want to select some specific column as response than \r\nYou Can try using @JsonIgnore(on field you dont want) or @JsonIgnoreProperties (class level) but it filters response for all beans if you want custom(dynamic) filter for differnt bean than use @JsonFilter &lt;br /&gt;\r\nYou can Search for this anotation and how to use it.","link":"https://stackoverflow.com/questions/77426497/is-there-any-way-to-select-specific-columns-and-make-them-entity-without-creatin/77555245#77555245","title":"Is there any way to select specific columns and make them entity without creating any interface or DTO class?","body":"<p>if You want to select some specific column as response than\nYou Can try using @JsonIgnore(on field you dont want) or @JsonIgnoreProperties (class level) but it filters response for all beans if you want custom(dynamic) filter for differnt bean than use @JsonFilter <br />\nYou can Search for this anotation and how to use it.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":82,"answer_count":2,"score":0,"last_activity_date":1701071327,"creation_date":1699197366,"question_id":77426497,"body_markdown":"I would like to select only some specific columns from the table. And I want to receive the result as an entity without creating any interface or DTO to projection.\r\n\r\nHere&#39;s my entity and query\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@Table(name = &quot;member&quot;)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\npublic class MemberEntity {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;member_num&quot;)\r\n    private Integer memberNum;\r\n\r\n    @Column(name = &quot;member_id&quot;)\r\n    private String id;\r\n\r\n    @Column(name = &quot;member_password&quot;)\r\n    private String password;\r\n\r\n    @Column(name = &quot;member_name&quot;)\r\n    private String name;\r\n\r\n    @Column(name = &quot;member_email&quot;)\r\n    private String email;\r\n\r\n    @Column(name = &quot;member_phone&quot;)\r\n    private String phone;\r\n\r\n    @Column(name = &quot;member_student_num&quot;)\r\n    private String studentNum;\r\n\r\n    @Column(name = &quot;member_type&quot;)\r\n    private String type;\r\n\r\n    @Column(name = &quot;member_refresh_token&quot;)\r\n    private String refreshToken;\r\n\r\n    @Column(name = &quot;member_dormitory&quot;)\r\n    private Integer dormitoryNum;\r\n}\r\n```\r\n\r\n```\r\n@Query(value = &quot;SELECT new com.project.myProject.member.domain.entity.MemberEntity(,,m.member_password,,,,,,m.member_refresh_token,) FROM myProject.member as m WHERE m.member_id = :memberId&quot;, nativeQuery = true)\r\n    MemberEntity findByMemberId(@Param(&quot;memberId&quot;) String memberId);\r\n```\r\n\r\nWhen I run this query an error occurs.\r\n\r\n&gt; 2023-11-05T22:55:32.027+09:00 ERROR 58940 --- \\[ main\\] o.h.engine.jdbc.spi.SqlExceptionHelper : You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;.project.myProject.member.domain.entity.MemberEntity(,,m.member_password,,,,,,m.me&#39; at line 1\r\n&gt;\r\n&gt; org.springframework.dao.InvalidDataAccessResourceUsageException: JDBC exception executing SQL \\[SELECT new com.project.myProject.member.domain.entity.MemberEntity(,,m.member_password,,,,,,m.member_refresh_token,) FROM myProject.member as m WHERE m.member_id = ?\\] \\[You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;.project.myProject.member.domain.entity.MemberEntity(,,m.member_password,,,,,,m.me&#39; at line 1\\] \\[n/a\\]; SQL \\[n/a\\]\r\n\r\nHere&#39;s what I&#39;ve tried\r\n\r\n1. Replace @NoArgsConstructor, @AllArgsConstructor to @RequiredArgsConstructor in MemberEntity Class\r\n2. change **&quot;new com.project.myProject.member.domain.entity.MemberEntity(, , m.member_password, , , , , , m.member_refresh_token, )&quot;** to **&quot;new com.project.myProject.member.domain.entity.MemberEntity(m.member_password, m.member_refresh_token)&quot;** in query","link":"https://stackoverflow.com/questions/77426497/is-there-any-way-to-select-specific-columns-and-make-them-entity-without-creatin","title":"Is there any way to select specific columns and make them entity without creating any interface or DTO class?","body":"<p>I would like to select only some specific columns from the table. And I want to receive the result as an entity without creating any interface or DTO to projection.</p>\n<p>Here's my entity and query</p>\n<pre><code>@Getter\n@Setter\n@Table(name = &quot;member&quot;)\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\npublic class MemberEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;member_num&quot;)\n    private Integer memberNum;\n\n    @Column(name = &quot;member_id&quot;)\n    private String id;\n\n    @Column(name = &quot;member_password&quot;)\n    private String password;\n\n    @Column(name = &quot;member_name&quot;)\n    private String name;\n\n    @Column(name = &quot;member_email&quot;)\n    private String email;\n\n    @Column(name = &quot;member_phone&quot;)\n    private String phone;\n\n    @Column(name = &quot;member_student_num&quot;)\n    private String studentNum;\n\n    @Column(name = &quot;member_type&quot;)\n    private String type;\n\n    @Column(name = &quot;member_refresh_token&quot;)\n    private String refreshToken;\n\n    @Column(name = &quot;member_dormitory&quot;)\n    private Integer dormitoryNum;\n}\n</code></pre>\n<pre><code>@Query(value = &quot;SELECT new com.project.myProject.member.domain.entity.MemberEntity(,,m.member_password,,,,,,m.member_refresh_token,) FROM myProject.member as m WHERE m.member_id = :memberId&quot;, nativeQuery = true)\n    MemberEntity findByMemberId(@Param(&quot;memberId&quot;) String memberId);\n</code></pre>\n<p>When I run this query an error occurs.</p>\n<blockquote>\n<p>2023-11-05T22:55:32.027+09:00 ERROR 58940 --- [ main] o.h.engine.jdbc.spi.SqlExceptionHelper : You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.project.myProject.member.domain.entity.MemberEntity(,,m.member_password,,,,,,m.me' at line 1</p>\n<p>org.springframework.dao.InvalidDataAccessResourceUsageException: JDBC exception executing SQL [SELECT new com.project.myProject.member.domain.entity.MemberEntity(,,m.member_password,,,,,,m.member_refresh_token,) FROM myProject.member as m WHERE m.member_id = ?] [You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.project.myProject.member.domain.entity.MemberEntity(,,m.member_password,,,,,,m.me' at line 1] [n/a]; SQL [n/a]</p>\n</blockquote>\n<p>Here's what I've tried</p>\n<ol>\n<li>Replace @NoArgsConstructor, @AllArgsConstructor to @RequiredArgsConstructor in MemberEntity Class</li>\n<li>change <strong>&quot;new com.project.myProject.member.domain.entity.MemberEntity(, , m.member_password, , , , , , m.member_refresh_token, )&quot;</strong> to <strong>&quot;new com.project.myProject.member.domain.entity.MemberEntity(m.member_password, m.member_refresh_token)&quot;</strong> in query</li>\n</ol>\n"},{"tags":["java","java-stream","string-formatting"],"comments":[{"score":1,"post_type":"question","creation_date":1701087197,"post_id":77554522,"comment_id":136727391,"body_markdown":"The meaning of a string is determined by the way you use it. In this specific example, the string is passed as first argument to [`replaceAll`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html#replaceAll(java.lang.String,java.lang.String)) which expects a regex pattern string. But note that this entire method can be shorted to `return text.replaceAll(&quot;(?m) *([&quot; + String.join(&quot;&quot;, commentSymbols) + &quot;].*)?$&quot;, &quot;&quot;);` which does not use the `format` method, showing that this method is not relevant here (and probably the most abused method ever).","link":"https://stackoverflow.com/questions/77554522/is-a-formatted-string-still-a-string-is-it-still-printable-or-it-is-just-a-bun#comment136727391_77554522","body":"The meaning of a string is determined by the way you use it. In this specific example, the string is passed as first argument to <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html#replaceAll(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\"><code>replaceAll</code></a> which expects a regex pattern string. But note that this entire method can be shorted to <code>return text.replaceAll(&quot;(?m) *([&quot; + String.join(&quot;&quot;, commentSymbols) + &quot;].*)?$&quot;, &quot;&quot;);</code> which does not use the <code>format</code> method, showing that this method is not relevant here (and probably the most abused method ever)."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701061964,"post_id":77554627,"comment_id":136723833,"body_markdown":"BTW, I recommend making a small `public static void main(String[] args) {...}` program with the code and try it out.  Start with small parts of the code and see what they are doing.","link":"https://stackoverflow.com/questions/77554522/is-a-formatted-string-still-a-string-is-it-still-printable-or-it-is-just-a-bun/77554627#comment136723833_77554627","body":"BTW, I recommend making a small <code>public static void main(String[] args) {...}</code> program with the code and try it out.  Start with small parts of the code and see what they are doing."},{"score":5,"post_type":"answer","creation_date":1701065224,"post_id":77554627,"comment_id":136724131,"body_markdown":"Also note that one could replace `Arrays.stream( commentSymbols ).collect( Collectors.joining() )` with the shorter and simpler `String.join(&quot;&quot;, commentSymbols)`","link":"https://stackoverflow.com/questions/77554522/is-a-formatted-string-still-a-string-is-it-still-printable-or-it-is-just-a-bun/77554627#comment136724131_77554627","body":"Also note that one could replace <code>Arrays.stream( commentSymbols ).collect( Collectors.joining() )</code> with the shorter and simpler <code>String.join(&quot;&quot;, commentSymbols)</code>"},{"score":1,"post_type":"answer","creation_date":1701087279,"post_id":77554627,"comment_id":136727401,"body_markdown":"@ThomasKl&#228;ger the entire method can be shortened to `return text.replaceAll(&quot;(?m) *([&quot; + String.join(&quot;&quot;, commentSymbols) + &quot;].*)?$&quot;, &quot;&quot;);`","link":"https://stackoverflow.com/questions/77554522/is-a-formatted-string-still-a-string-is-it-still-printable-or-it-is-just-a-bun/77554627#comment136727401_77554627","body":"@ThomasKl&#228;ger the entire method can be shortened to <code>return text.replaceAll(&quot;(?m) *([&quot; + String.join(&quot;&quot;, commentSymbols) + &quot;].*)?$&quot;, &quot;&quot;);</code>"}],"comment_count":3,"score":4,"last_activity_date":1701061853,"creation_date":1701061853,"answer_id":77554627,"question_id":77554522,"body_markdown":"It helps to break down the steps in the code.  There is a lot in that example packed into a small space.\r\n\r\nThe `x -&gt; x.replaceAll( pattern, &quot;&quot; )` expression is calling the `replaceAll` method on a string named `x`.  If you look at that method definition, you will see how the regular expression, `[ ]*([#!].*)?$`, is used.  Yes, that regular expression is being passed in as a String.\r\n\r\nAnd, yes, if you hard-code the same string and pass it to `replaceAll` it will produce the same result.\r\n\r\nThe `Arrays.stream()` call is using minimal syntax to iterate over the elements of the array `commentSymbols`.  If you look up the `Collectors.joining()` method call, you will find that concatenates all of the strings it is fed.  So if you input 2 strings, `&quot;a&quot;` and `&quot;b&quot;`, it will end up producing a single String, `&quot;ab&quot;`.\r\n\r\nThen the return value of `Arrays.stream()` is passed to `String.format` where the `%s` in the first, format, argument is replaced with that value.","link":"https://stackoverflow.com/questions/77554522/is-a-formatted-string-still-a-string-is-it-still-printable-or-it-is-just-a-bun/77554627#77554627","title":"Is a formatted string still a string? Is it still printable, or it is just a bunch of rules?","body":"<p>It helps to break down the steps in the code.  There is a lot in that example packed into a small space.</p>\n<p>The <code>x -&gt; x.replaceAll( pattern, &quot;&quot; )</code> expression is calling the <code>replaceAll</code> method on a string named <code>x</code>.  If you look at that method definition, you will see how the regular expression, <code>[ ]*([#!].*)?$</code>, is used.  Yes, that regular expression is being passed in as a String.</p>\n<p>And, yes, if you hard-code the same string and pass it to <code>replaceAll</code> it will produce the same result.</p>\n<p>The <code>Arrays.stream()</code> call is using minimal syntax to iterate over the elements of the array <code>commentSymbols</code>.  If you look up the <code>Collectors.joining()</code> method call, you will find that concatenates all of the strings it is fed.  So if you input 2 strings, <code>&quot;a&quot;</code> and <code>&quot;b&quot;</code>, it will end up producing a single String, <code>&quot;ab&quot;</code>.</p>\n<p>Then the return value of <code>Arrays.stream()</code> is passed to <code>String.format</code> where the <code>%s</code> in the first, format, argument is replaced with that value.</p>\n"},{"comment_count":0,"score":1,"last_activity_date":1701070666,"last_edit_date":1701070666,"creation_date":1701062369,"answer_id":77554652,"question_id":77554522,"body_markdown":"Yes, the two patterns you provided are functionally equivalent. Both patterns, `[ ]*([%s].*)?$ and [ ]*([#!].*)?$`, serve the same purpose in the context of the stripComments method. They are designed to match and remove any characters following the specified comment symbols (`#` and `!` in this case) until the end of the line.\r\n\r\nThe `%s` in the first pattern is a placeholder for the characters in the commentSymbols array, and when you substitute it with actual values using String.format, it becomes `[ ]*([#!].*)?$`, which is the same as the second pattern.\r\n\r\nSo, both patterns are equivalent and will produce the same result when used in the `stripComments` method for the given input.","link":"https://stackoverflow.com/questions/77554522/is-a-formatted-string-still-a-string-is-it-still-printable-or-it-is-just-a-bun/77554652#77554652","title":"Is a formatted string still a string? Is it still printable, or it is just a bunch of rules?","body":"<p>Yes, the two patterns you provided are functionally equivalent. Both patterns, <code>[ ]*([%s].*)?$ and [ ]*([#!].*)?$</code>, serve the same purpose in the context of the stripComments method. They are designed to match and remove any characters following the specified comment symbols (<code>#</code> and <code>!</code> in this case) until the end of the line.</p>\n<p>The <code>%s</code> in the first pattern is a placeholder for the characters in the commentSymbols array, and when you substitute it with actual values using String.format, it becomes <code>[ ]*([#!].*)?$</code>, which is the same as the second pattern.</p>\n<p>So, both patterns are equivalent and will produce the same result when used in the <code>stripComments</code> method for the given input.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":100,"answer_count":2,"score":1,"last_activity_date":1701070824,"creation_date":1701058963,"last_edit_date":1701070824,"question_id":77554522,"body_markdown":"I am looking at other code on a Java practice. Here is his code:\r\n\r\n```\r\nimport java.util.Arrays;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class StripComments {\r\n\r\n\tpublic static String stripComments(String text, String[] commentSymbols) {\r\n\t\tString pattern = String.format(\r\n\t\t\t\t&quot;[ ]*([%s].*)?$&quot;,\r\n\t\t\t\tArrays.stream( commentSymbols ).collect( Collectors.joining() )\r\n\t\t);\r\n\t\treturn Arrays.stream( text.split( &quot;\\n&quot; ) )\r\n\t\t\t\t.map( x -&gt; x.replaceAll( pattern, &quot;&quot; ) )\r\n\t\t\t\t.collect( Collectors.joining( &quot;\\n&quot; ) );\r\n\t}\r\n\r\n}\r\n```\r\nIn his code, the pattern is representing something after whatever in the commentSymbols, right? If I decide to print the pattern right after the string creation, what would the pattern be like? If pattern is a printable string, why in the later sentence we can use it to filter out the sentence we want to delete?\r\n\r\nI used debug mode and it showed pattern looks like this `&quot;[ ]*([#!].*)?$&quot;` while the inputs are `(&quot;apples, pears # and bananas\\ngrapes\\nbananas !apples&quot;, new String[]{&quot;#&quot;, &quot;!&quot;})`. Does this string have any meaning? If I just initialize a new string and assign this value `&quot;[ ]*([#!].*)?$&quot;` to it, would it work same?","link":"https://stackoverflow.com/questions/77554522/is-a-formatted-string-still-a-string-is-it-still-printable-or-it-is-just-a-bun","title":"Is a formatted string still a string? Is it still printable, or it is just a bunch of rules?","body":"<p>I am looking at other code on a Java practice. Here is his code:</p>\n<pre><code>import java.util.Arrays;\nimport java.util.stream.Collectors;\n\npublic class StripComments {\n\n    public static String stripComments(String text, String[] commentSymbols) {\n        String pattern = String.format(\n                &quot;[ ]*([%s].*)?$&quot;,\n                Arrays.stream( commentSymbols ).collect( Collectors.joining() )\n        );\n        return Arrays.stream( text.split( &quot;\\n&quot; ) )\n                .map( x -&gt; x.replaceAll( pattern, &quot;&quot; ) )\n                .collect( Collectors.joining( &quot;\\n&quot; ) );\n    }\n\n}\n</code></pre>\n<p>In his code, the pattern is representing something after whatever in the commentSymbols, right? If I decide to print the pattern right after the string creation, what would the pattern be like? If pattern is a printable string, why in the later sentence we can use it to filter out the sentence we want to delete?</p>\n<p>I used debug mode and it showed pattern looks like this <code>&quot;[ ]*([#!].*)?$&quot;</code> while the inputs are <code>(&quot;apples, pears # and bananas\\ngrapes\\nbananas !apples&quot;, new String[]{&quot;#&quot;, &quot;!&quot;})</code>. Does this string have any meaning? If I just initialize a new string and assign this value <code>&quot;[ ]*([#!].*)?$&quot;</code> to it, would it work same?</p>\n"},{"tags":["java","android","arrays"],"comments":[{"score":0,"post_type":"question","creation_date":1700979413,"post_id":77550641,"comment_id":136716921,"body_markdown":"put the whole generation code in a try catch so you what is the error since it ain&#39;t provided in the post.","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136716921_77550641","body":"put the whole generation code in a try catch so you what is the error since it ain&#39;t provided in the post."},{"score":0,"post_type":"question","creation_date":1700979454,"post_id":77550641,"comment_id":136716926,"body_markdown":"you sure int has enough space ?","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136716926_77550641","body":"you sure int has enough space ?"},{"score":0,"post_type":"question","creation_date":1700979460,"post_id":77550641,"comment_id":136716927,"body_markdown":"What is the maximum possible value of an `int`? How many digits in that max number?","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136716927_77550641","body":"What is the maximum possible value of an <code>int</code>? How many digits in that max number?"},{"score":0,"post_type":"question","creation_date":1700979539,"post_id":77550641,"comment_id":136716930,"body_markdown":"[`Integer.MAX_VALUE`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#MAX_VALUE)","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136716930_77550641","body":"<a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#MAX_VALUE\" rel=\"nofollow noreferrer\"><code>Integer.MAX_VALUE</code></a>"},{"score":0,"post_type":"question","creation_date":1700979784,"post_id":77550641,"comment_id":136716943,"body_markdown":"See this code: https://ideone.com/AwxQ35","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136716943_77550641","body":"See this code: <a href=\"https://ideone.com/AwxQ35\" rel=\"nofollow noreferrer\">ideone.com/AwxQ35</a>"},{"score":0,"post_type":"question","creation_date":1700979808,"post_id":77550641,"comment_id":136716944,"body_markdown":"In Logcat following error show me   java.lang.NumberFormatException: For input string: &quot;03336241441&quot;","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136716944_77550641","body":"In Logcat following error show me   java.lang.NumberFormatException: For input string: &quot;03336241441&quot;"},{"score":0,"post_type":"question","creation_date":1700980045,"post_id":77550641,"comment_id":136716959,"body_markdown":"int max value is up to 10 .(2147483647)","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136716959_77550641","body":"int max value is up to 10 .(2147483647)"},{"score":0,"post_type":"question","creation_date":1700980101,"post_id":77550641,"comment_id":136716961,"body_markdown":"What substitutes can be used instead of int?","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136716961_77550641","body":"What substitutes can be used instead of int?"},{"score":0,"post_type":"question","creation_date":1700980254,"post_id":77550641,"comment_id":136716968,"body_markdown":"`long` would work well.  You&#39;ll need to write `Long.parseLong` instead of `Integer.parseInt`.","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136716968_77550641","body":"<code>long</code> would work well.  You&#39;ll need to write <code>Long.parseLong</code> instead of <code>Integer.parseInt</code>."},{"score":0,"post_type":"question","creation_date":1700981600,"post_id":77550641,"comment_id":136717043,"body_markdown":"for (long i = value1; i &lt;= value2; i++) {\n                list.add(String.format(&quot;%011d&quot;, i));","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136717043_77550641","body":"for (long i = value1; i &lt;= value2; i++) {                 list.add(String.format(&quot;%011d&quot;, i));"},{"score":0,"post_type":"question","creation_date":1700982118,"post_id":77550641,"comment_id":136717077,"body_markdown":"anybody have solution for this.  Long Using is also useless .","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136717077_77550641","body":"anybody have solution for this.  Long Using is also useless ."},{"score":0,"post_type":"question","creation_date":1700982803,"post_id":77550641,"comment_id":136717123,"body_markdown":"Isn&#39;t there a bigint ? And how would a list be able to host so many strings?","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136717123_77550641","body":"Isn&#39;t there a bigint ? And how would a list be able to host so many strings?"},{"score":0,"post_type":"question","creation_date":1700982861,"post_id":77550641,"comment_id":136717129,"body_markdown":"I have made the following changes in the code. This time also the value contains 11 characters such as 03336241441 but the answer is coming in 10 digits and the leading zero has been removed( such as 3336241441) for(Long i = (Long) value1; i&lt;=value2; i++){","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136717129_77550641","body":"I have made the following changes in the code. This time also the value contains 11 characters such as 03336241441 but the answer is coming in 10 digits and the leading zero has been removed( such as 3336241441) for(Long i = (Long) value1; i&lt;=value2; i++){"},{"score":0,"post_type":"question","creation_date":1700983571,"post_id":77550641,"comment_id":136717166,"body_markdown":"With value1=0 and value2=10000000 you will put only ten million values in a list. Any use for that?","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136717166_77550641","body":"With value1=0 and value2=10000000 you will put only ten million values in a list. Any use for that?"},{"score":0,"post_type":"question","creation_date":1700983717,"post_id":77550641,"comment_id":136717173,"body_markdown":"Any child can tell you the next value of 543234789456783453. It&quot;s pretty easy to write some code that does the same and comes up with 543234789456783454.","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136717173_77550641","body":"Any child can tell you the next value of 543234789456783453. It&quot;s pretty easy to write some code that does the same and comes up with 543234789456783454."},{"score":0,"post_type":"question","creation_date":1700984030,"post_id":77550641,"comment_id":136717206,"body_markdown":"Also any child can add up 543234789456783453 and 3234789456783. It wil just write them below each other on a piece of paper and start at the right adding up two digits. You can write code to do the same.","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136717206_77550641","body":"Also any child can add up 543234789456783453 and 3234789456783. It wil just write them below each other on a piece of paper and start at the right adding up two digits. You can write code to do the same."},{"score":0,"post_type":"question","creation_date":1700984755,"post_id":77550641,"comment_id":136717252,"body_markdown":"There is some work in my office in which sometimes I have to prepare a list of mobile numbers of users and you know that some countries have 10 digit mobile numbers and some have 11 digits etc.","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits#comment136717252_77550641","body":"There is some work in my office in which sometimes I have to prepare a list of mobile numbers of users and you know that some countries have 10 digit mobile numbers and some have 11 digits etc."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1700984920,"post_id":77550798,"comment_id":136717262,"body_markdown":"I have already thought so. I know we need to check the difference between the digits we want to get the list by difference. But  I want to make today&#39;s experience the reason for my knowledge growth.","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits/77550798#comment136717262_77550798","body":"I have already thought so. I know we need to check the difference between the digits we want to get the list by difference. But  I want to make today&#39;s experience the reason for my knowledge growth."}],"comment_count":1,"score":1,"last_activity_date":1700983186,"creation_date":1700983186,"answer_id":77550798,"question_id":77550641,"body_markdown":"This is a totally broken idea for how to code this.  You&#39;re creating an array that can be every number that&#39;s 11 digits long.  That&#39;s 11 billion items.  Even if every object only takes up 8 bytes (4 for the value, 4 for the reference.  And it will be more than that in reality), that&#39;s 88 billion bytes, or approximately 9.5 GB.  That will never fit in memory, you&#39;re going OOM WAY before that.\r\n\r\nThere&#39;s ways to do this.  Your adapter doesn&#39;t need to have an array of every item in it, since it&#39;s one continuous range it only needs the start and end index and can calculate the value of each index from the start index and offset.  But having a list of every value is not ever going to work.","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits/77550798#77550798","title":"How to generate serial numbers up to a specified range of 11 digits?","body":"<p>This is a totally broken idea for how to code this.  You're creating an array that can be every number that's 11 digits long.  That's 11 billion items.  Even if every object only takes up 8 bytes (4 for the value, 4 for the reference.  And it will be more than that in reality), that's 88 billion bytes, or approximately 9.5 GB.  That will never fit in memory, you're going OOM WAY before that.</p>\n<p>There's ways to do this.  Your adapter doesn't need to have an array of every item in it, since it's one continuous range it only needs the start and end index and can calculate the value of each index from the start index and offset.  But having a list of every value is not ever going to work.</p>\n"},{"comment_count":0,"score":1,"last_activity_date":1701069956,"last_edit_date":1701069956,"creation_date":1700987854,"answer_id":77550989,"question_id":77550641,"body_markdown":"I have solved the solution that I needed by myself and with the help of all of you. I am presenting it here so that someone else can get information about it. Anyway, thank you all from the bottom of my heart۔\r\n\r\n```java\r\nbtngenerate.setOnClickListener(new View.OnClickListener() {\r\n\t@SuppressLint(&quot;DefaultLocale&quot;)\r\n\t@Override\r\n\tpublic void onClick(View view) {\r\n\t\ttry {\r\n\t\t\tlong value1;\r\n\t\t\tlong value2;\r\n\t\t\tvalue1 = Long.parseLong(txtfirst.getText().toString());\r\n\t\t\tvalue2 = Long.parseLong(txtsecond.getText().toString());\r\n\r\n\t\t\tfor(Long i = (Long) value1; i&lt;=value2; i++) {\r\n\t\t\t\tlist.add(String.format(&quot;%011d&quot;, i));\r\n\t\t\t\tli.setAdapter(arrayAdapter);\r\n\t\t\t}\r\n\r\n\t\t} catch (NumberFormatException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n});","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits/77550989#77550989","title":"How to generate serial numbers up to a specified range of 11 digits?","body":"<p>I have solved the solution that I needed by myself and with the help of all of you. I am presenting it here so that someone else can get information about it. Anyway, thank you all from the bottom of my heart۔</p>\n<pre class=\"lang-java prettyprint-override\"><code>btngenerate.setOnClickListener(new View.OnClickListener() {\n    @SuppressLint(&quot;DefaultLocale&quot;)\n    @Override\n    public void onClick(View view) {\n        try {\n            long value1;\n            long value2;\n            value1 = Long.parseLong(txtfirst.getText().toString());\n            value2 = Long.parseLong(txtsecond.getText().toString());\n\n            for(Long i = (Long) value1; i&lt;=value2; i++) {\n                list.add(String.format(&quot;%011d&quot;, i));\n                li.setAdapter(arrayAdapter);\n            }\n\n        } catch (NumberFormatException e) {\n            e.printStackTrace();\n        }\n    }\n});\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1701042750,"last_edit_date":1701042750,"creation_date":1701042444,"answer_id":77553917,"question_id":77550641,"body_markdown":"In _Java_, the _[int](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)_ _data-type_ utilizes a _32-bit_ _[container](https://en.wikipedia.org/wiki/Call_stack)_, reserving a bit for a signum, when negative.\\\r\nThe maximum value, would be _2&lt;sup&gt; 31&lt;/sup&gt; &amp;minus; 1_, or _2,147,483,647_.\\\r\n_[Integer (Java SE 21 &amp;amp; JDK 21) &amp;ndash; MAX_VALUE](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#MAX_VALUE)_.\r\n\r\nThe typical solution here, is to use the _[BigInteger](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/math/BigInteger.html)_ _class_, which provides an unlimited accuracy.\r\n\r\nHere is an example.\r\n\r\n```java\r\nList&lt;String&gt; generate(String a, String b) {\r\n    BigInteger x = new BigInteger(a), y = new BigInteger(b), i = x;\r\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n    int w = Math.max(a.length(), b.length());\r\n    String f = &quot;%0&quot; + w + &quot;d&quot;;\r\n    while (i.compareTo(y) &lt;= 0) {\r\n        list.add(f.formatted(i));\r\n        i = i.add(BigInteger.ONE);\r\n    }\r\n    return list;\r\n}\r\n```\r\n\r\nAnd, here is an example usage.\r\n\r\n```java\r\nfor (String s : generate(&quot;03336241441&quot;, &quot;03336241450&quot;))\r\n    System.out.println(s);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n03336241441\r\n03336241442\r\n03336241443\r\n03336241444\r\n03336241445\r\n03336241446\r\n03336241447\r\n03336241448\r\n03336241449\r\n03336241450\r\n```","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits/77553917#77553917","title":"How to generate serial numbers up to a specified range of 11 digits?","body":"<p>In <em>Java</em>, the <em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html\" rel=\"nofollow noreferrer\">int</a></em> <em>data-type</em> utilizes a <em>32-bit</em> <em><a href=\"https://en.wikipedia.org/wiki/Call_stack\" rel=\"nofollow noreferrer\">container</a></em>, reserving a bit for a signum, when negative.<br />\nThe maximum value, would be <em>2<sup> 31</sup> − 1</em>, or <em>2,147,483,647</em>.<br />\n<em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#MAX_VALUE\" rel=\"nofollow noreferrer\">Integer (Java SE 21 &amp; JDK 21) – MAX_VALUE</a></em>.</p>\n<p>The typical solution here, is to use the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/math/BigInteger.html\" rel=\"nofollow noreferrer\">BigInteger</a></em> <em>class</em>, which provides an unlimited accuracy.</p>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; generate(String a, String b) {\n    BigInteger x = new BigInteger(a), y = new BigInteger(b), i = x;\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\n    int w = Math.max(a.length(), b.length());\n    String f = &quot;%0&quot; + w + &quot;d&quot;;\n    while (i.compareTo(y) &lt;= 0) {\n        list.add(f.formatted(i));\n        i = i.add(BigInteger.ONE);\n    }\n    return list;\n}\n</code></pre>\n<p>And, here is an example usage.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (String s : generate(&quot;03336241441&quot;, &quot;03336241450&quot;))\n    System.out.println(s);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>03336241441\n03336241442\n03336241443\n03336241444\n03336241445\n03336241446\n03336241447\n03336241448\n03336241449\n03336241450\n</code></pre>\n"}],"comment_count":17,"is_answered":true,"view_count":104,"answer_count":3,"score":2,"last_activity_date":1701069956,"creation_date":1700978793,"last_edit_date":1700998077,"question_id":77550641,"body_markdown":"I am using the given code to generate a serial number into Listview up to a specific range of 11 digits. Up to ten digits, the serial is generated like 0333624140 to 0333624160 (such as 0333624140,0333624141,0333624142,0333624143 etc.), but if we change the required value to 11 digits like 03336241441 to 03336241450 then the app crashes.\r\n\r\n    btngenerate.setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View view) {\r\n            int value1;\r\n            int value2;\r\n            value1 = Integer.parseInt(txtfirst.getText().toString());\r\n            value2 = Integer.parseInt(txtsecond.getText().toString());\r\n            for(int i=value1;i&lt;=value2;i++){\r\n                list.add(&quot;&quot;+i);\r\n                li.setAdapter(arrayAdapter);\r\n            }\r\n\r\n        }\r\n    });","link":"https://stackoverflow.com/questions/77550641/how-to-generate-serial-numbers-up-to-a-specified-range-of-11-digits","title":"How to generate serial numbers up to a specified range of 11 digits?","body":"<p>I am using the given code to generate a serial number into Listview up to a specific range of 11 digits. Up to ten digits, the serial is generated like 0333624140 to 0333624160 (such as 0333624140,0333624141,0333624142,0333624143 etc.), but if we change the required value to 11 digits like 03336241441 to 03336241450 then the app crashes.</p>\n<pre><code>btngenerate.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        int value1;\n        int value2;\n        value1 = Integer.parseInt(txtfirst.getText().toString());\n        value2 = Integer.parseInt(txtsecond.getText().toString());\n        for(int i=value1;i&lt;=value2;i++){\n            list.add(&quot;&quot;+i);\n            li.setAdapter(arrayAdapter);\n        }\n\n    }\n});\n</code></pre>\n"},{"tags":["java","maven","mapstruct"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701069812,"last_edit_date":1701069812,"creation_date":1701025009,"answer_id":77553057,"question_id":77284916,"body_markdown":"This warning can be safely ignore : you can manage to not show this error anymore with a simple configuration tag and adding a default profile inside \r\nlike : \r\n\r\n```xml\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t&lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;id&gt;default-compile&lt;/id&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;annotationProcessorPaths&gt;\r\n\t\t\t\t\t&lt;path&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;${mapstruct.version}&lt;/version&gt;\r\n\t\t\t\t\t&lt;/path&gt;\r\n\t\t\t\t\t&lt;path&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;${lombok.version}&lt;/version&gt;\r\n\t\t\t\t\t&lt;/path&gt;\r\n\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;0.2.0&lt;/version&gt;\r\n\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t&lt;/annotationProcessorPaths&gt;\r\n\t\t\t\t&lt;compilerArgs&gt;\r\n\t\t\t\t\t&lt;compilerArg&gt;\r\n                        -Amapstruct.defaultComponentModel=spring\r\n\t\t\t\t\t&lt;/compilerArg&gt;\r\n\t\t\t\t&lt;/compilerArgs&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nHowever you&#39;ll get another issue when testing, some mappers will not be implementated without the package stage from maven.\r\nMy advice is to simply ignore this warning","link":"https://stackoverflow.com/questions/77284916/the-option-mapstruct-defaultcomponentmodel-is-not-being-recognized/77553057#77553057","title":"The option mapstruct.defaultComponentModel is not being recognized","body":"<p>This warning can be safely ignore : you can manage to not show this error anymore with a simple configuration tag and adding a default profile inside\nlike :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;default-compile&lt;/id&gt;\n            &lt;configuration&gt;\n                &lt;annotationProcessorPaths&gt;\n                    &lt;path&gt;\n                        &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                        &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                        &lt;version&gt;${mapstruct.version}&lt;/version&gt;\n                    &lt;/path&gt;\n                    &lt;path&gt;\n                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;version&gt;${lombok.version}&lt;/version&gt;\n                    &lt;/path&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                        &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n                        &lt;version&gt;0.2.0&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/annotationProcessorPaths&gt;\n                &lt;compilerArgs&gt;\n                    &lt;compilerArg&gt;\n                        -Amapstruct.defaultComponentModel=spring\n                    &lt;/compilerArg&gt;\n                &lt;/compilerArgs&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>However you'll get another issue when testing, some mappers will not be implementated without the package stage from maven.\nMy advice is to simply ignore this warning</p>\n"}],"comment_count":0,"is_answered":false,"view_count":94,"answer_count":1,"score":0,"last_activity_date":1701069812,"creation_date":1697167935,"question_id":77284916,"body_markdown":"I have this configuration in my `pom.xml` file:\r\n```xml\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;11&lt;/java.version&gt;\r\n        &lt;org.mapstruct.version&gt;1.4.2.Final&lt;/org.mapstruct.version&gt;\r\n&lt;!-- more pom code --&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;11&lt;/source&gt;\r\n                    &lt;target&gt;11&lt;/target&gt;\r\n                    &lt;annotationProcessorPaths&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n                            &lt;version&gt;${org.mapstruct.version}&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                            &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\r\n                            &lt;version&gt;0.2.0&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                        &lt;path&gt;\r\n                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n                            &lt;version&gt;2.6.6&lt;/version&gt;\r\n                        &lt;/path&gt;\r\n                    &lt;/annotationProcessorPaths&gt;\r\n                    &lt;compilerArgs&gt;\r\n                        &lt;arg&gt;\r\n                            -Amapstruct.defaultComponentModel=spring\r\n                        &lt;/arg&gt;\r\n                    &lt;/compilerArgs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n```\r\nBut I still get the warning during building `java: The following options were not recognized by any processor: &#39;[mapstruct.defaultComponentModel]&#39;`\r\n\r\nI believe my configuration follows the [Mapstruct documentation][1]\r\n\r\nWhy is the option not recognized?\r\n\r\n[This question][2] doesn&#39;t appear to be helpful\r\n\r\n\r\n  [1]: https://mapstruct.org/documentation/stable/reference/html/\r\n  [2]: https://stackoverflow.com/questions/74853001/warning-the-following-options-were-not-recognized-by-any-processor-for-mapstr","link":"https://stackoverflow.com/questions/77284916/the-option-mapstruct-defaultcomponentmodel-is-not-being-recognized","title":"The option mapstruct.defaultComponentModel is not being recognized","body":"<p>I have this configuration in my <code>pom.xml</code> file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;org.mapstruct.version&gt;1.4.2.Final&lt;/org.mapstruct.version&gt;\n&lt;!-- more pom code --&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;\n                    &lt;annotationProcessorPaths&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                            &lt;version&gt;${org.mapstruct.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                            &lt;version&gt;${lombok.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n                            &lt;version&gt;0.2.0&lt;/version&gt;\n                        &lt;/dependency&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n                            &lt;version&gt;2.6.6&lt;/version&gt;\n                        &lt;/path&gt;\n                    &lt;/annotationProcessorPaths&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;arg&gt;\n                            -Amapstruct.defaultComponentModel=spring\n                        &lt;/arg&gt;\n                    &lt;/compilerArgs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>But I still get the warning during building <code>java: The following options were not recognized by any processor: '[mapstruct.defaultComponentModel]'</code></p>\n<p>I believe my configuration follows the <a href=\"https://mapstruct.org/documentation/stable/reference/html/\" rel=\"nofollow noreferrer\">Mapstruct documentation</a></p>\n<p>Why is the option not recognized?</p>\n<p><a href=\"https://stackoverflow.com/questions/74853001/warning-the-following-options-were-not-recognized-by-any-processor-for-mapstr\">This question</a> doesn't appear to be helpful</p>\n"},{"tags":["java"],"comments":[{"score":0,"post_type":"question","creation_date":1701172931,"post_id":77554125,"comment_id":136739930,"body_markdown":"The root cause seems to be around MIME type, for which your infrastructure is not prepared to handle Excel files. See https://stackoverflow.com/a/1964182/1111895","link":"https://stackoverflow.com/questions/77554125/how-to-solve-no-converter-for-xxx-with-preset-content-type-application-octet#comment136739930_77554125","body":"The root cause seems to be around MIME type, for which your infrastructure is not prepared to handle Excel files. See <a href=\"https://stackoverflow.com/a/1964182/1111895\">stackoverflow.com/a/1964182/1111895</a>"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701069588,"last_edit_date":1701069588,"creation_date":1701048647,"answer_id":77554128,"question_id":77554125,"body_markdown":"I tried to solve the problem and found that some of the reasons for the problem were the response logic of the whole package of my system, so I also returned the success and failure logic after downloading the file. But it doesn&#39;t support\r\n\r\n\r\n\r\n---\r\n\r\n\r\n&#127822;Solution: Add a converter！it does work and solves the problem！\r\n\r\n**Here is a reference code:**\r\n\r\n\r\n```java\r\n@Override\r\npublic void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n\r\n\tWebMvcConfigurer.super.configureMessageConverters(converters);\r\n           \r\n\tFastJsonHttpMessageConverter convert = new FastJsonHttpMessageConverter();\r\n           \r\n\tFastJsonConfig config = new FastJsonConfig();\r\n            \r\n\tconfig.setSerializerFeatures(SerializerFeature.PrettyFormat,\r\n\tSerializerFeature.WriteNullStringAsEmpty,\r\n\tSerializerFeature.WriteNullNumberAsZero,\r\n\tSerializerFeature.WriteNullListAsEmpty,\r\n\tSerializerFeature.WriteNullBooleanAsFalse,\r\n\tSerializerFeature.WriteMapNullValue,\r\n                  \r\n\tSerializerFeature.DisableCircularReferenceDetect);\r\n\tconfig.setDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n\tconfig.setCharset(Charset.forName(&quot;UTF-8&quot;));\r\n\tconvert.setFastJsonConfig(config);\r\n\tconvert.setSupportedMediaTypes(getSupportedMediaTypes());\r\n\tconverters.add(convert);\r\n}\r\n\r\npublic List&lt;MediaType&gt; getSupportedMediaTypes() {\r\n\r\n\tList&lt;MediaType&gt; supportedMediaTypes = new ArrayList&lt;&gt;();\r\n\tsupportedMediaTypes.add(MediaType.APPLICATION_JSON);\r\n\tsupportedMediaTypes.add(MediaType.APPLICATION_JSON_UTF8);\r\n\tsupportedMediaTypes.add(MediaType.APPLICATION_ATOM_XML);\r\n\tsupportedMediaTypes.add(MediaType.APPLICATION_FORM_URLENCODED);\r\n\tsupportedMediaTypes.add(MediaType.APPLICATION_OCTET_STREAM);\r\n\tsupportedMediaTypes.add(MediaType.APPLICATION_PDF);\r\n\tsupportedMediaTypes.add(MediaType.APPLICATION_RSS_XML);\r\n\tsupportedMediaTypes.add(MediaType.APPLICATION_XHTML_XML);\r\n\tsupportedMediaTypes.add(MediaType.APPLICATION_XML);\r\n\tsupportedMediaTypes.add(MediaType.IMAGE_GIF);\r\n\tsupportedMediaTypes.add(MediaType.IMAGE_JPEG);\r\n\tsupportedMediaTypes.add(MediaType.IMAGE_PNG);\r\n\tsupportedMediaTypes.add(MediaType.TEXT_EVENT_STREAM);\r\n\tsupportedMediaTypes.add(MediaType.TEXT_HTML);\r\n\tsupportedMediaTypes.add(MediaType.TEXT_MARKDOWN);\r\n\tsupportedMediaTypes.add(MediaType.TEXT_PLAIN);\r\n\tsupportedMediaTypes.add(MediaType.TEXT_XML);\r\n\tsupportedMediaTypes.add(MediaType.ALL);\r\n\treturn supportedMediaTypes;\r\n}\r\n```\r\n","link":"https://stackoverflow.com/questions/77554125/how-to-solve-no-converter-for-xxx-with-preset-content-type-application-octet/77554128#77554128","title":"How to solve &quot; No converter for XXX with preset Content-Type ‘application/octet-stream；charset=UTF-8‘ &quot;","body":"<p>I tried to solve the problem and found that some of the reasons for the problem were the response logic of the whole package of my system, so I also returned the success and failure logic after downloading the file. But it doesn't support</p>\n<hr />\n<p>🍎Solution: Add a converter！it does work and solves the problem！</p>\n<p><strong>Here is a reference code:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n\n    WebMvcConfigurer.super.configureMessageConverters(converters);\n           \n    FastJsonHttpMessageConverter convert = new FastJsonHttpMessageConverter();\n           \n    FastJsonConfig config = new FastJsonConfig();\n            \n    config.setSerializerFeatures(SerializerFeature.PrettyFormat,\n    SerializerFeature.WriteNullStringAsEmpty,\n    SerializerFeature.WriteNullNumberAsZero,\n    SerializerFeature.WriteNullListAsEmpty,\n    SerializerFeature.WriteNullBooleanAsFalse,\n    SerializerFeature.WriteMapNullValue,\n                  \n    SerializerFeature.DisableCircularReferenceDetect);\n    config.setDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n    config.setCharset(Charset.forName(&quot;UTF-8&quot;));\n    convert.setFastJsonConfig(config);\n    convert.setSupportedMediaTypes(getSupportedMediaTypes());\n    converters.add(convert);\n}\n\npublic List&lt;MediaType&gt; getSupportedMediaTypes() {\n\n    List&lt;MediaType&gt; supportedMediaTypes = new ArrayList&lt;&gt;();\n    supportedMediaTypes.add(MediaType.APPLICATION_JSON);\n    supportedMediaTypes.add(MediaType.APPLICATION_JSON_UTF8);\n    supportedMediaTypes.add(MediaType.APPLICATION_ATOM_XML);\n    supportedMediaTypes.add(MediaType.APPLICATION_FORM_URLENCODED);\n    supportedMediaTypes.add(MediaType.APPLICATION_OCTET_STREAM);\n    supportedMediaTypes.add(MediaType.APPLICATION_PDF);\n    supportedMediaTypes.add(MediaType.APPLICATION_RSS_XML);\n    supportedMediaTypes.add(MediaType.APPLICATION_XHTML_XML);\n    supportedMediaTypes.add(MediaType.APPLICATION_XML);\n    supportedMediaTypes.add(MediaType.IMAGE_GIF);\n    supportedMediaTypes.add(MediaType.IMAGE_JPEG);\n    supportedMediaTypes.add(MediaType.IMAGE_PNG);\n    supportedMediaTypes.add(MediaType.TEXT_EVENT_STREAM);\n    supportedMediaTypes.add(MediaType.TEXT_HTML);\n    supportedMediaTypes.add(MediaType.TEXT_MARKDOWN);\n    supportedMediaTypes.add(MediaType.TEXT_PLAIN);\n    supportedMediaTypes.add(MediaType.TEXT_XML);\n    supportedMediaTypes.add(MediaType.ALL);\n    return supportedMediaTypes;\n}\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1701054721,"last_edit_date":1701054721,"creation_date":1701054006,"answer_id":77554309,"question_id":77554125,"body_markdown":"You set the response Content-Type to application/octet-stream,\r\nBut what you responded to was a custom object ResultBean. Spring tried to convert the ResultBean object into a response body in application/octet-stream format, but did not find a suitable converter, so it threw an HttpMessageNotWritableException. \r\n\r\n    @GetMapping(&quot;/common/download&quot;)\r\n    public void download(HttpServletResponse httpServletReesponse){\r\n    \ttry {\r\n    \t\t// ... download\r\n    \t} catch (Exception e){\r\n    \r\n    \t\te.printStackTrace();\r\n    \t\thttpServletResponse.reset();\r\n    \t\tResultBean&lt;T&gt; result = new ResultBean&lt;&gt;(HttpSStatus.ERROR, e.getM\r\n    \t\tString str = JSON.toJSONString(result);\r\n    \t\tServletUtils.renderString(httpServletResponse, str)\r\n    \t}\r\n    }\r\n    public static void renderString(HttpServletResponsse response, String str){\r\n        \t\ttry {\r\n        \t\t\tresponse.setStatus(200);\r\n        \t\t\tresponse.setContentType(&quot;application/json&quot;);\r\n        \t\t\tresponse.setCharacterEncoding(&quot;utf-8&quot;);\r\n        \t\t\tresponse.getWriter().print(string);\r\n        \t\t} catch (IOException e) {\r\n        \t\t\te.printStackTrace();\r\n        \t}\r\n    }\r\n\r\n","link":"https://stackoverflow.com/questions/77554125/how-to-solve-no-converter-for-xxx-with-preset-content-type-application-octet/77554309#77554309","title":"How to solve &quot; No converter for XXX with preset Content-Type ‘application/octet-stream；charset=UTF-8‘ &quot;","body":"<p>You set the response Content-Type to application/octet-stream,\nBut what you responded to was a custom object ResultBean. Spring tried to convert the ResultBean object into a response body in application/octet-stream format, but did not find a suitable converter, so it threw an HttpMessageNotWritableException.</p>\n<pre><code>@GetMapping(&quot;/common/download&quot;)\npublic void download(HttpServletResponse httpServletReesponse){\n    try {\n        // ... download\n    } catch (Exception e){\n\n        e.printStackTrace();\n        httpServletResponse.reset();\n        ResultBean&lt;T&gt; result = new ResultBean&lt;&gt;(HttpSStatus.ERROR, e.getM\n        String str = JSON.toJSONString(result);\n        ServletUtils.renderString(httpServletResponse, str)\n    }\n}\npublic static void renderString(HttpServletResponsse response, String str){\n            try {\n                response.setStatus(200);\n                response.setContentType(&quot;application/json&quot;);\n                response.setCharacterEncoding(&quot;utf-8&quot;);\n                response.getWriter().print(string);\n            } catch (IOException e) {\n                e.printStackTrace();\n        }\n}\n</code></pre>\n"}],"comment_count":1,"is_answered":false,"view_count":42,"answer_count":2,"score":0,"last_activity_date":1701069588,"creation_date":1701048575,"last_edit_date":1701064910,"question_id":77554125,"body_markdown":"When I encapsulated the interface logic for downloading excel in the background, the response returned success after the file stream was closed, but the background reported an error\r\n\r\n\r\nI ran into a problem when I tried to use a tool or library with the following error message: \r\n\r\n&gt; No converter for XXX with preset Content-Type &#39;application/octet-stream; charset=UTF-8&#39;\r\n\r\nI&#39;m trying to do some kind of conversion or processing operation, but I can&#39;t find a suitable converter. The error appears to be content-type related and specifies &quot;application/octet-stream; charset=UTF-8&quot; as the default content type.\r\n\r\nHow to solve this problem so that I can successfully complete the operation? What tool or library am I using? Do I need to configure or add specific converters? Are there other possible solutions?\r\n\r\nPlease provide detailed steps and sample code so that I can better understand and try to solve this problem. Thank you!\r\n\r\n\r\nError message:\r\n```\r\norg.springframework.http.converter.HttpMessageNotWritableException: No converter for [class com.foxconn.common.beans.ResultBean] with preset Content-Type &#39;application/octet-stream&#39;\r\n\tat org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:299)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.handleReturnValue(RequestResponseBodyMethodProcessor.java:181)\r\n\tat org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:82)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:123)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:626)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n```\r\nWhen I encapsulated the interface logic for downloading excel in the background, the response returned success after the file stream was closed, but the background reported an error","link":"https://stackoverflow.com/questions/77554125/how-to-solve-no-converter-for-xxx-with-preset-content-type-application-octet","title":"How to solve &quot; No converter for XXX with preset Content-Type ‘application/octet-stream；charset=UTF-8‘ &quot;","body":"<p>When I encapsulated the interface logic for downloading excel in the background, the response returned success after the file stream was closed, but the background reported an error</p>\n<p>I ran into a problem when I tried to use a tool or library with the following error message:</p>\n<blockquote>\n<p>No converter for XXX with preset Content-Type 'application/octet-stream; charset=UTF-8'</p>\n</blockquote>\n<p>I'm trying to do some kind of conversion or processing operation, but I can't find a suitable converter. The error appears to be content-type related and specifies &quot;application/octet-stream; charset=UTF-8&quot; as the default content type.</p>\n<p>How to solve this problem so that I can successfully complete the operation? What tool or library am I using? Do I need to configure or add specific converters? Are there other possible solutions?</p>\n<p>Please provide detailed steps and sample code so that I can better understand and try to solve this problem. Thank you!</p>\n<p>Error message:</p>\n<pre><code>org.springframework.http.converter.HttpMessageNotWritableException: No converter for [class com.foxconn.common.beans.ResultBean] with preset Content-Type 'application/octet-stream'\n    at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:299)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.handleReturnValue(RequestResponseBodyMethodProcessor.java:181)\n    at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:82)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:123)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:878)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:792)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:626)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n</code></pre>\n<p>When I encapsulated the interface logic for downloading excel in the background, the response returned success after the file stream was closed, but the background reported an error</p>\n"},{"tags":["java","temporal","temporal-workflow"],"comments":[{"score":0,"post_type":"question","creation_date":1701098765,"post_id":77554961,"comment_id":136729752,"body_markdown":"I&#39;m having a lot of difficulty understanding your question as it currently stand.","link":"https://stackoverflow.com/questions/77554961/temporal-query-on-promise-with-get-method-call#comment136729752_77554961","body":"I&#39;m having a lot of difficulty understanding your question as it currently stand."},{"score":0,"post_type":"question","creation_date":1701098801,"post_id":77554961,"comment_id":136729760,"body_markdown":"Do I understand correctly that you mean the following: &quot;I&#39;m writing a Temporal Workflow using the Java SDK. In my Workflow code, I have some Promise object, on which I call `.get()` to await for that promise completion. Q1: Will this block the Worker&#39;s main thread until the promise resolves? Q2: Will this cause resource usage (for example: threads, memory or CPU) on the worker machine until that Promise resolves? Q3: Will the Worker be able to fall into some kind of sleep mode until the Promise resolves?&quot;","link":"https://stackoverflow.com/questions/77554961/temporal-query-on-promise-with-get-method-call#comment136729760_77554961","body":"Do I understand correctly that you mean the following: &quot;I&#39;m writing a Temporal Workflow using the Java SDK. In my Workflow code, I have some Promise object, on which I call <code>.get()</code> to await for that promise completion. Q1: Will this block the Worker&#39;s main thread until the promise resolves? Q2: Will this cause resource usage (for example: threads, memory or CPU) on the worker machine until that Promise resolves? Q3: Will the Worker be able to fall into some kind of sleep mode until the Promise resolves?&quot;"},{"score":0,"post_type":"question","creation_date":1701100414,"post_id":77554961,"comment_id":136730150,"body_markdown":"If my understanding of your question is not correct, please reformulate your question by yourself. You may want to use some automated tool to translate your question from your own language to English.","link":"https://stackoverflow.com/questions/77554961/temporal-query-on-promise-with-get-method-call#comment136730150_77554961","body":"If my understanding of your question is not correct, please reformulate your question by yourself. You may want to use some automated tool to translate your question from your own language to English."},{"score":0,"post_type":"question","creation_date":1701101207,"post_id":77554961,"comment_id":136730334,"body_markdown":"Also, get a look at advices given on [this page](https://meta.stackoverflow.com/questions/291362/advice-for-non-native-english-speakers). In particular, **avoid politeness constructs**. They are not required (this is a help site and people expect you to ask for help), and makes your question confusing. For example, you use the word &quot;query&quot; twice in your question... Is your question specifically about sending a query to a workflow?","link":"https://stackoverflow.com/questions/77554961/temporal-query-on-promise-with-get-method-call#comment136730334_77554961","body":"Also, get a look at advices given on <a href=\"https://meta.stackoverflow.com/questions/291362/advice-for-non-native-english-speakers\">this page</a>. In particular, <b>avoid politeness constructs</b>. They are not required (this is a help site and people expect you to ask for help), and makes your question confusing. For example, you use the word &quot;query&quot; twice in your question... Is your question specifically about sending a query to a workflow?"}],"comment_count":4,"is_answered":false,"view_count":32,"answer_count":0,"score":0,"last_activity_date":1701067603,"creation_date":1701067603,"question_id":77554961,"body_markdown":"SDK : Temporal Java SDK\r\n\r\n\r\nIn the workflow code, we&#39;re trying to resolve the promise with get() method call, since its blocking call, i&#39;ve below queries team, can you please clarify on this -\r\n\r\nwhether the workflow worker&#39;s main thread will be blocked or will it initiate new thread and resolve that promise.\r\nwhether the workflow worker will get into sleep mode and it will get invoked when promise gets resolved.\r\n\r\nIn high level, we understand that get() method will block the main workflow thread.","link":"https://stackoverflow.com/questions/77554961/temporal-query-on-promise-with-get-method-call","title":"Temporal : Query on Promise with get() method call","body":"<p>SDK : Temporal Java SDK</p>\n<p>In the workflow code, we're trying to resolve the promise with get() method call, since its blocking call, i've below queries team, can you please clarify on this -</p>\n<p>whether the workflow worker's main thread will be blocked or will it initiate new thread and resolve that promise.\nwhether the workflow worker will get into sleep mode and it will get invoked when promise gets resolved.</p>\n<p>In high level, we understand that get() method will block the main workflow thread.</p>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"comments":[{"score":1,"post_type":"question","creation_date":1675066965,"post_id":75281727,"comment_id":132840561,"body_markdown":"in the Query you wrote, I see no &quot;order by&quot;. Does Spring adds this by its own?","link":"https://stackoverflow.com/questions/75281727/spring-boot-unknown-column-inner-in-order-clause#comment132840561_75281727","body":"in the Query you wrote, I see no &quot;order by&quot;. Does Spring adds this by its own?"},{"score":0,"post_type":"question","creation_date":1675067069,"post_id":75281727,"comment_id":132840594,"body_markdown":"yes, it adds it by its own, I&#39;ve enabled spring.jpa.show-sql=true and can see it. it generates my sql then just adds that order by","link":"https://stackoverflow.com/questions/75281727/spring-boot-unknown-column-inner-in-order-clause#comment132840594_75281727","body":"yes, it adds it by its own, I&#39;ve enabled spring.jpa.show-sql=true and can see it. it generates my sql then just adds that order by"},{"score":0,"post_type":"question","creation_date":1675067575,"post_id":75281727,"comment_id":132840724,"body_markdown":"I&#39;m not sure, but I believe that is always done for native queries. Could you write instead a non-native query? Something like @Query(value = &quot;SELECT * FROM  Treatments INNER JOIN Animals ON Treatments.animal_id = Animals.animal_id WHERE Animals.owner_id = :ownerId AND Treatments.enddate &gt; curdate()&quot;)\n        Page&lt;Treatments&gt; findAll(@Param(&quot;ownerId&quot;) Optional&lt;Owner&gt; owner, Pageable pageable);","link":"https://stackoverflow.com/questions/75281727/spring-boot-unknown-column-inner-in-order-clause#comment132840724_75281727","body":"I&#39;m not sure, but I believe that is always done for native queries. Could you write instead a non-native query? Something like @Query(value = &quot;SELECT * FROM  Treatments INNER JOIN Animals ON Treatments.animal_id = Animals.animal_id WHERE Animals.owner_id = :ownerId AND Treatments.enddate &gt; curdate()&quot;)         Page&lt;Treatments&gt; findAll(@Param(&quot;ownerId&quot;) Optional&lt;Owner&gt; owner, Pageable pageable);"},{"score":1,"post_type":"question","creation_date":1675069324,"post_id":75281727,"comment_id":132841219,"body_markdown":"It seems like it somehow interprets &quot;INNER&quot; as an alias to the table name &quot;Treatments&quot;. You don&#39;t have an explicit alias for that table, so perhaps adding one would help the interpreter? I.e. change the query to &quot;SELECT * FROM  Treatments as t INNER JOIN...&quot;","link":"https://stackoverflow.com/questions/75281727/spring-boot-unknown-column-inner-in-order-clause#comment132841219_75281727","body":"It seems like it somehow interprets &quot;INNER&quot; as an alias to the table name &quot;Treatments&quot;. You don&#39;t have an explicit alias for that table, so perhaps adding one would help the interpreter? I.e. change the query to &quot;SELECT * FROM  Treatments as t INNER JOIN...&quot;"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1675083767,"post_id":75281856,"comment_id":132845648,"body_markdown":"works good now with countQuery and aliases","link":"https://stackoverflow.com/questions/75281727/spring-boot-unknown-column-inner-in-order-clause/75281856#comment132845648_75281856","body":"works good now with countQuery and aliases"}],"comment_count":1,"score":1,"last_activity_date":1675067565,"creation_date":1675067565,"answer_id":75281856,"question_id":75281727,"body_markdown":"I suppose Spring modifies your query because you use `Page` as the return type. When you use a native query together with `Page`, you should add a `countQuery`, see [Spring Documentation][1].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.at-query.native","link":"https://stackoverflow.com/questions/75281727/spring-boot-unknown-column-inner-in-order-clause/75281856#75281856","title":"Spring Boot unknown column &#39;INNER. &#39; in order clause","body":"<p>I suppose Spring modifies your query because you use <code>Page</code> as the return type. When you use a native query together with <code>Page</code>, you should add a <code>countQuery</code>, see <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.at-query.native\" rel=\"nofollow noreferrer\">Spring Documentation</a>.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701066890,"last_edit_date":1701066890,"creation_date":1700979076,"answer_id":77550659,"question_id":75281727,"body_markdown":"My version spring boot: 2.3.12.RELEASE\r\n\r\nDefine exactly which columns need to be selected and redefine column name again(`SELECT Treatments.animal_id AS animal_id,..`). Trust me, don&#39;t missing `AS`\r\n\r\nNot working with `SELECT Treatments.animal_id,..` OR `SELECT Treatments.animal_id animal_id,..`\r\n\r\nYou need this native query:\r\n```sql\r\nSELECT Treatments.animal_id AS animal_id, Treatments.enddate AS enddate, Animals.owner_id AS owner_id\r\nFROM  Treatments INNER JOIN Animals\r\nON Treatments.animal_id = Animals.animal_id\r\nWHERE Animals.owner_id = ?1 AND Treatments.enddate &gt; curdate()\r\n```\r\n\r\nOr:\r\n```sql\r\nSELECT m.* FROM (\r\n\tSELECT a.animal_id AS animal_id, a.enddate AS enddate, b.owner_id AS owner_id\r\n\tFROM  Treatments a INNER JOIN Animals b ON a.animal_id = b.animal_id\r\n) AS m WHERE owner_id = ?1 AND enddate &gt; curdate()\r\n```","link":"https://stackoverflow.com/questions/75281727/spring-boot-unknown-column-inner-in-order-clause/77550659#77550659","title":"Spring Boot unknown column &#39;INNER. &#39; in order clause","body":"<p>My version spring boot: 2.3.12.RELEASE</p>\n<p>Define exactly which columns need to be selected and redefine column name again(<code>SELECT Treatments.animal_id AS animal_id,..</code>). Trust me, don't missing <code>AS</code></p>\n<p>Not working with <code>SELECT Treatments.animal_id,..</code> OR <code>SELECT Treatments.animal_id animal_id,..</code></p>\n<p>You need this native query:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT Treatments.animal_id AS animal_id, Treatments.enddate AS enddate, Animals.owner_id AS owner_id\nFROM  Treatments INNER JOIN Animals\nON Treatments.animal_id = Animals.animal_id\nWHERE Animals.owner_id = ?1 AND Treatments.enddate &gt; curdate()\n</code></pre>\n<p>Or:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT m.* FROM (\n    SELECT a.animal_id AS animal_id, a.enddate AS enddate, b.owner_id AS owner_id\n    FROM  Treatments a INNER JOIN Animals b ON a.animal_id = b.animal_id\n) AS m WHERE owner_id = ?1 AND enddate &gt; curdate()\n</code></pre>\n"}],"comment_count":4,"is_answered":true,"view_count":399,"answer_count":2,"score":1,"last_activity_date":1701066890,"creation_date":1675066735,"last_edit_date":1675067576,"question_id":75281727,"body_markdown":"I am using Spring Data JPA to get data from a MySQL database. I have this function adnotated with @Query in a repository\r\n\r\n    @Query(value = &quot;SELECT * FROM  Treatments INNER JOIN Animals ON Treatments.animal_id = Animals.animal_id WHERE Animals.owner_id = ?1 AND Treatments.enddate &gt; curdate()&quot;, nativeQuery = true)\r\n        \tPage&lt;Treatments&gt; findAll(@Param(&quot;ownerId&quot;) Optional&lt;Owner&gt; owner, Pageable pageable);\r\n\r\nSpring generates the SQL as it is, then adds `order by INNER.startdate asc limit ?`\r\nAnd then it throws this error \r\n`Unknown column &#39;INNER.startdate&#39; in &#39;order clause&#39;`\r\nWhy is this happening? I tried adding an orderby clause myself but it will just add its own orderby clause anyway and throw the error. The query works inside MySql.","link":"https://stackoverflow.com/questions/75281727/spring-boot-unknown-column-inner-in-order-clause","title":"Spring Boot unknown column &#39;INNER. &#39; in order clause","body":"<p>I am using Spring Data JPA to get data from a MySQL database. I have this function adnotated with @Query in a repository</p>\n<pre><code>@Query(value = &quot;SELECT * FROM  Treatments INNER JOIN Animals ON Treatments.animal_id = Animals.animal_id WHERE Animals.owner_id = ?1 AND Treatments.enddate &gt; curdate()&quot;, nativeQuery = true)\n        Page&lt;Treatments&gt; findAll(@Param(&quot;ownerId&quot;) Optional&lt;Owner&gt; owner, Pageable pageable);\n</code></pre>\n<p>Spring generates the SQL as it is, then adds <code>order by INNER.startdate asc limit ?</code>\nAnd then it throws this error\n<code>Unknown column 'INNER.startdate' in 'order clause'</code>\nWhy is this happening? I tried adding an orderby clause myself but it will just add its own orderby clause anyway and throw the error. The query works inside MySql.</p>\n"},{"tags":["java","spring-boot","spring-webflux"],"comments":[{"score":0,"post_type":"question","creation_date":1701094536,"post_id":77554769,"comment_id":136728760,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking. &quot;Code is not getting called&quot; is too broad. be specific, please.","link":"https://stackoverflow.com/questions/77554769/webflux-bodytomono-code-block-not-getting-called#comment136728760_77554769","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking. &quot;Code is not getting called&quot; is too broad. be specific, please."}],"comment_count":1,"is_answered":false,"view_count":17,"answer_count":0,"score":0,"last_activity_date":1701064628,"creation_date":1701064628,"question_id":77554769,"body_markdown":"I am having following code, which is not being called, I tried it debugging it, but the code is not getting called in any way.\r\n\r\n    private Mono&lt;ServerResponse&gt; validateRequestData(ServerRequest serverRequest)\r\n    {\r\n     return serverRequest.bodyToMono(this.validationClass)\r\n      .flatMap(body -&gt; {\r\n       Errors errors = new BeanPropertyBindingResult(body,this.validationClass.getName());\r\n       this.validator.validate(body, errors);\r\n       if (!errors.getAllErrors().isEmpty()) {\r\n       return onValidationErrors(errors, body, serverRequest);\r\n    }\r\n      return Mono.empty();\r\n     });\r\n   }\r\n\r\n\r\n\r\nAnything I am missing in this? \r\n\r\nPlease guide,\r\nRegards,\r\nGaurav\r\n\r\nI tried debugging it, this code is actually meant for validating the Server Request from the POST call from postman.","link":"https://stackoverflow.com/questions/77554769/webflux-bodytomono-code-block-not-getting-called","title":"webflux bodyToMono code block not getting called","body":"<p>I am having following code, which is not being called, I tried it debugging it, but the code is not getting called in any way.</p>\n<pre><code>private Mono&lt;ServerResponse&gt; validateRequestData(ServerRequest serverRequest)\n{\n return serverRequest.bodyToMono(this.validationClass)\n  .flatMap(body -&gt; {\n   Errors errors = new BeanPropertyBindingResult(body,this.validationClass.getName());\n   this.validator.validate(body, errors);\n   if (!errors.getAllErrors().isEmpty()) {\n   return onValidationErrors(errors, body, serverRequest);\n}\n  return Mono.empty();\n });\n</code></pre>\n<p>}</p>\n<p>Anything I am missing in this?</p>\n<p>Please guide,\nRegards,\nGaurav</p>\n<p>I tried debugging it, this code is actually meant for validating the Server Request from the POST call from postman.</p>\n"},{"tags":["java","spring"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701063132,"creation_date":1701063132,"answer_id":77554697,"question_id":76658826,"body_markdown":"I was facing the same issue.\r\n\r\n**I fixed this by doing the following**\r\n\r\n 1. Reduced my java SDK version to 1.8 (File -&gt; Project Structure)\r\n 2. Edited source, target properties to 1.8","link":"https://stackoverflow.com/questions/76658826/beandefinitionstoreexception-failed-to-read-candidate-component-class-unsuppo/77554697#77554697","title":"BeanDefinitionStoreException: Failed to read candidate component class : Unsupported class file major version 64","body":"<p>I was facing the same issue.</p>\n<p><strong>I fixed this by doing the following</strong></p>\n<ol>\n<li>Reduced my java SDK version to 1.8 (File -&gt; Project Structure)</li>\n<li>Edited source, target properties to 1.8</li>\n</ol>\n"}],"comment_count":0,"is_answered":false,"view_count":152,"answer_count":1,"score":1,"last_activity_date":1701063132,"creation_date":1689051579,"question_id":76658826,"body_markdown":"When I was creating a component and scanning it in XML, the following error was thrown\r\n```\r\nBeanDefinitionStoreException: Failed to read candidate component class : nested exception is java.lang.IllegalArgumentException: Unsupported class file major version 64\r\n```\r\nI am currently using Java 20 with the spring-context version of 5.3.14 and IntelliJ IDE. The error keeps happening even if I upgrade or downgrade the spring-context version.\r\n\r\nEverything is properly working when I am defining a bean and its property in XML, the error occurs when using the @Component.\r\n\r\nThis is the class where I am creating the component.\r\n\r\n```\r\npackage com.javaLearn;\r\n\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class Doctor  implements Staff{\r\n    public void assist() {\r\n        System.out.println(&quot;Doctor is assisting&quot;);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nThis is my XML file.\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n       xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n\r\n    &lt;!--    Search for all the components in this package   --&gt;\r\n    &lt;context:component-scan base-package=&quot;com.javaLearn&quot;&gt; &lt;/context:component-scan&gt;\r\n&lt;/beans&gt;\r\n```\r\n\r\nThe entire error description\r\n```\r\nException in thread &quot;main&quot; org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [E:\\JavaLearn\\SpringFrameworkDemo\\target\\classes\\com\\javaLearn\\Doctor.class]; nested exception is org.springframework.core.NestedIOException: ASM ClassReader failed to parse class file - probably due to a new Java class file version that isn&#39;t supported yet: file [E:\\JavaLearn\\SpringFrameworkDemo\\target\\classes\\com\\javaLearn\\Doctor.class]; nested exception is java.lang.IllegalArgumentException: Unsupported class file major version 64\r\n\tat org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:454)\r\n\tat org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:316)\r\n\tat org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:276)\r\n\tat org.springframework.context.annotation.ComponentScanBeanDefinitionParser.parse(ComponentScanBeanDefinitionParser.java:90)\r\n\tat org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:74)\r\n\tat org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1391)\r\n\tat org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1371)\r\n\tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:179)\r\n\tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:149)\r\n\tat org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:96)\r\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:514)\r\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:394)\r\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:337)\r\n\tat org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:305)\r\n\tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:188)\r\n\tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:224)\r\n\tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:195)\r\n\tat org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:257)\r\n\tat org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:128)\r\n\tat org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:94)\r\n\tat org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:133)\r\n\tat org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:637)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:522)\r\n\tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\r\n\tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:85)\r\n\tat com.javaLearn.Main.main(Main.java:15)\r\nCaused by: org.springframework.core.NestedIOException: ASM ClassReader failed to parse class file - probably due to a new Java class file version that isn&#39;t supported yet: file [E:\\JavaLearn\\SpringFrameworkDemo\\target\\classes\\com\\javaLearn\\Doctor.class]; nested exception is java.lang.IllegalArgumentException: Unsupported class file major version 64\r\n\tat org.springframework.core.type.classreading.SimpleMetadataReader.getClassReader(SimpleMetadataReader.java:61)\r\n\tat org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:50)\r\n\tat org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103)\r\n\tat org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:123)\r\n\tat org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:430)\r\n\t... 25 more\r\nCaused by: java.lang.IllegalArgumentException: Unsupported class file major version 64\r\n\tat org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:195)\r\n\tat org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:176)\r\n\tat org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:162)\r\n\tat org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:283)\r\n\tat org.springframework.core.type.classreading.SimpleMetadataReader.getClassReader(SimpleMetadataReader.java:58)\r\n\t... 29 more\r\n```\r\n\r\n","link":"https://stackoverflow.com/questions/76658826/beandefinitionstoreexception-failed-to-read-candidate-component-class-unsuppo","title":"BeanDefinitionStoreException: Failed to read candidate component class : Unsupported class file major version 64","body":"<p>When I was creating a component and scanning it in XML, the following error was thrown</p>\n<pre><code>BeanDefinitionStoreException: Failed to read candidate component class : nested exception is java.lang.IllegalArgumentException: Unsupported class file major version 64\n</code></pre>\n<p>I am currently using Java 20 with the spring-context version of 5.3.14 and IntelliJ IDE. The error keeps happening even if I upgrade or downgrade the spring-context version.</p>\n<p>Everything is properly working when I am defining a bean and its property in XML, the error occurs when using the @Component.</p>\n<p>This is the class where I am creating the component.</p>\n<pre><code>package com.javaLearn;\n\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class Doctor  implements Staff{\n    public void assist() {\n        System.out.println(&quot;Doctor is assisting&quot;);\n    }\n\n}\n\n</code></pre>\n<p>This is my XML file.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n       xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\n\n    &lt;!--    Search for all the components in this package   --&gt;\n    &lt;context:component-scan base-package=&quot;com.javaLearn&quot;&gt; &lt;/context:component-scan&gt;\n&lt;/beans&gt;\n</code></pre>\n<p>The entire error description</p>\n<pre><code>Exception in thread &quot;main&quot; org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [E:\\JavaLearn\\SpringFrameworkDemo\\target\\classes\\com\\javaLearn\\Doctor.class]; nested exception is org.springframework.core.NestedIOException: ASM ClassReader failed to parse class file - probably due to a new Java class file version that isn't supported yet: file [E:\\JavaLearn\\SpringFrameworkDemo\\target\\classes\\com\\javaLearn\\Doctor.class]; nested exception is java.lang.IllegalArgumentException: Unsupported class file major version 64\n    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:454)\n    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:316)\n    at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:276)\n    at org.springframework.context.annotation.ComponentScanBeanDefinitionParser.parse(ComponentScanBeanDefinitionParser.java:90)\n    at org.springframework.beans.factory.xml.NamespaceHandlerSupport.parse(NamespaceHandlerSupport.java:74)\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1391)\n    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1371)\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:179)\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:149)\n    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:96)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:514)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:394)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:337)\n    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:305)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:188)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:224)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:195)\n    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:257)\n    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:128)\n    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:94)\n    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:133)\n    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:637)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:522)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:85)\n    at com.javaLearn.Main.main(Main.java:15)\nCaused by: org.springframework.core.NestedIOException: ASM ClassReader failed to parse class file - probably due to a new Java class file version that isn't supported yet: file [E:\\JavaLearn\\SpringFrameworkDemo\\target\\classes\\com\\javaLearn\\Doctor.class]; nested exception is java.lang.IllegalArgumentException: Unsupported class file major version 64\n    at org.springframework.core.type.classreading.SimpleMetadataReader.getClassReader(SimpleMetadataReader.java:61)\n    at org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:50)\n    at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103)\n    at org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:123)\n    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:430)\n    ... 25 more\nCaused by: java.lang.IllegalArgumentException: Unsupported class file major version 64\n    at org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:195)\n    at org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:176)\n    at org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:162)\n    at org.springframework.asm.ClassReader.&lt;init&gt;(ClassReader.java:283)\n    at org.springframework.core.type.classreading.SimpleMetadataReader.getClassReader(SimpleMetadataReader.java:58)\n    ... 29 more\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-test"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701062610,"creation_date":1701062610,"answer_id":77554667,"question_id":77554605,"body_markdown":"If those factories are a compile-time dependency for `A` then it won&#39;t be possible to exclude them only at test time for `B`.  However, if they are not needed at compile time, but only at runtime, then you may be able to use the `runtime` scope for those dependencies to solve the problem.\r\n\r\nWith that said, I personally avoid this type of grey-box testing.  Here&#39;s a link to a blog that may help: https://github.com/savoirtech/black-box-system-test.\r\n","link":"https://stackoverflow.com/questions/77554605/exclude-spring-factories-dependencies-for-spring-boot-test/77554667#77554667","title":"Exclude spring.factories dependencies for Spring Boot test","body":"<p>If those factories are a compile-time dependency for <code>A</code> then it won't be possible to exclude them only at test time for <code>B</code>.  However, if they are not needed at compile time, but only at runtime, then you may be able to use the <code>runtime</code> scope for those dependencies to solve the problem.</p>\n<p>With that said, I personally avoid this type of grey-box testing.  Here's a link to a blog that may help: <a href=\"https://github.com/savoirtech/black-box-system-test\" rel=\"nofollow noreferrer\">https://github.com/savoirtech/black-box-system-test</a>.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":41,"answer_count":1,"score":0,"last_activity_date":1701062610,"creation_date":1701061342,"last_edit_date":1701061402,"question_id":77554605,"body_markdown":"There is one parent project A and the project which is using A&#39;s dependencies let&#39;s called it as B.\r\nEverything is working fine except testcases. I am using SpringBootTest which is fetching all the dependencies from spring.factories of project A. I want to disable these dependencies for project B for testcases but need it to run project B.\r\nThe spring.factories file present in META-INF of project A contains - \r\n\r\n    1. org.springframework.cloud.bootstrap.BootstrapConfiguration\r\n    2. org.springframework.boot.autoconfigure.EnableAutoConfiguration\r\n    3. org.springframework.boot.env.EnvironmentPostProcessor.\r\n\r\nEach with packages of project A.\r\n\r\n\r\nI tried using Import annotation and passed my own configuration. ConponentScan annotation with project B base package. But nothing really helped. ","link":"https://stackoverflow.com/questions/77554605/exclude-spring-factories-dependencies-for-spring-boot-test","title":"Exclude spring.factories dependencies for Spring Boot test","body":"<p>There is one parent project A and the project which is using A's dependencies let's called it as B.\nEverything is working fine except testcases. I am using SpringBootTest which is fetching all the dependencies from spring.factories of project A. I want to disable these dependencies for project B for testcases but need it to run project B.\nThe spring.factories file present in META-INF of project A contains -</p>\n<pre><code>1. org.springframework.cloud.bootstrap.BootstrapConfiguration\n2. org.springframework.boot.autoconfigure.EnableAutoConfiguration\n3. org.springframework.boot.env.EnvironmentPostProcessor.\n</code></pre>\n<p>Each with packages of project A.</p>\n<p>I tried using Import annotation and passed my own configuration. ConponentScan annotation with project B base package. But nothing really helped.</p>\n"},{"tags":["java","spring-boot","gradle","lombok","querydsl"],"comment_count":0,"is_answered":false,"view_count":47,"answer_count":0,"score":0,"last_activity_date":1701061728,"creation_date":1701061728,"question_id":77554623,"body_markdown":"This question has been shown up on stackoverflow for multiple times, but it doesn&#39;t solve my issue, I am using Java 17 with queryDSL 5.0 and Spring boot 3.2.0 with lombok 1.18.30 and gradle 7.4.1 distribution.\r\n\r\nThe annotation processing is such that it generates the QClasses for the Java POJOs, but the gradle build causes the issue stating that\r\n`Attempt to recreate a file for type com.example.project.domain.QXXXXX`\r\n\r\nThe entire stack trace via build --debug appears to be a such \r\n\r\n```\r\nException is:\r\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task &#39;:compileJava&#39;.\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:147)\r\n\tat org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:282)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:145)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:133)\r\n\tat org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\r\n\tat org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n\tat org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\r\n\tat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n\tat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\r\n\tat org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\r\n\tat org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:74)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:333)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:320)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:313)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:299)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:143)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:227)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:218)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:140)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\nCaused by: org.gradle.api.internal.tasks.compile.CompilationFailedException: Compilation failed; see the compiler error output for details.\r\n\tat org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:56)\r\n\tat org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:39)\r\n\tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)\r\n\tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:51)\r\n\tat org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:37)\r\n\tat org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:51)\r\n\tat org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:37)\r\n\tat org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:46)\r\n\tat org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:36)\r\n\tat org.gradle.jvm.toolchain.internal.DefaultToolchainJavaCompiler.execute(DefaultToolchainJavaCompiler.java:57)\r\n\tat org.gradle.api.tasks.compile.JavaCompile.lambda$createToolchainCompiler$1(JavaCompile.java:232)\r\n\tat org.gradle.api.internal.tasks.compile.CleaningJavaCompiler.execute(CleaningJavaCompiler.java:53)\r\n\tat org.gradle.api.internal.tasks.compile.incremental.IncrementalCompilerFactory.lambda$createRebuildAllCompiler$0(IncrementalCompilerFactory.java:52)\r\n\tat org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:67)\r\n\tat org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:41)\r\n\tat org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:66)\r\n\tat org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:52)\r\n\tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:59)\r\n\tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:51)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n\tat org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler.execute(CompileJavaBuildOperationReportingCompiler.java:51)\r\n\tat org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:279)\r\n\tat org.gradle.api.tasks.compile.JavaCompile.performIncrementalCompilation(JavaCompile.java:165)\r\n\tat org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:146)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor499.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:104)\r\n\tat org.gradle.api.internal.project.taskfactory.IncrementalInputsTaskAction.doExecute(IncrementalInputsTaskAction.java:32)\r\n\tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)\r\n\tat org.gradle.api.internal.project.taskfactory.AbstractIncrementalTaskAction.execute(AbstractIncrementalTaskAction.java:25)\r\n\tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)\r\n\tat org.gradle.api.internal.tasks.execution.TaskExecution$3.run(TaskExecution.java:242)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\r\n\tat org.gradle.api.internal.tasks.execution.TaskExecution.executeAction(TaskExecution.java:227)\r\n\tat org.gradle.api.internal.tasks.execution.TaskExecution.executeActions(TaskExecution.java:210)\r\n\tat org.gradle.api.internal.tasks.execution.TaskExecution.executeWithPreviousOutputFiles(TaskExecution.java:193)\r\n\tat org.gradle.api.internal.tasks.execution.TaskExecution.execute(TaskExecution.java:171)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:89)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:40)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:53)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:50)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:50)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:40)\r\n\tat org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:68)\r\n\tat org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:38)\r\n\tat org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:48)\r\n\tat org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:36)\r\n\tat org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)\r\n\tat org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)\r\n\tat org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)\r\n\tat org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)\r\n\tat org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:29)\r\n\tat org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:61)\r\n\tat org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:42)\r\n\tat org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:60)\r\n\tat org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:27)\r\n\tat org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:180)\r\n\tat org.gradle.internal.execution.steps.BuildCacheStep.lambda$execute$1(BuildCacheStep.java:75)\r\n\tat org.gradle.internal.Either$Right.fold(Either.java:175)\r\n\tat org.gradle.internal.execution.caching.CachingState.fold(CachingState.java:59)\r\n\tat org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:73)\r\n\tat org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:48)\r\n\tat org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:36)\r\n\tat org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:25)\r\n\tat org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:36)\r\n\tat org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:22)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:110)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$2(SkipUpToDateStep.java:56)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:56)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:38)\r\n\tat org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:73)\r\n\tat org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:44)\r\n\tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)\r\n\tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)\r\n\tat org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:89)\r\n\tat org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:50)\r\n\tat org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:114)\r\n\tat org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:57)\r\n\tat org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:76)\r\n\tat org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:50)\r\n\tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.executeWithNoEmptySources(SkipEmptyWorkStep.java:249)\r\n\tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.executeWithNoEmptySources(SkipEmptyWorkStep.java:204)\r\n\tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:83)\r\n\tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:54)\r\n\tat org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:32)\r\n\tat org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:21)\r\n\tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)\r\n\tat org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:43)\r\n\tat org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:31)\r\n\tat org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:40)\r\n\tat org.gradle.api.internal.tasks.execution.TaskExecution$4.withWorkspace(TaskExecution.java:287)\r\n\tat org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:40)\r\n\tat org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:30)\r\n\tat org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:37)\r\n\tat org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:27)\r\n\tat org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:44)\r\n\tat org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:33)\r\n\tat org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:76)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:144)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:133)\r\n\tat org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\r\n\tat org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n\tat org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\r\n\tat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n\tat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\r\n\tat org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\r\n\tat org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:74)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:333)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:320)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:313)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:299)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:143)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:227)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:218)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:140)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\n```\r\n\r\n\r\nI understand the due files are getting created multiple times, but I am not sure which task is causes the duplicate creation of the same QClasses.\r\n\r\n\r\nHereby I am attaching the build.gradle for your reference\r\n\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;3.2.0&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.0.11.RELEASE&#39;\r\n    id &#39;com.ewerk.gradle.plugins.querydsl&#39; version &#39;1.0.10&#39;\r\n    id &quot;io.freefair.lombok&quot; version &quot;8.4&quot;\r\n}\r\n\r\ngroup = &#39;com.speed&#39;\r\nversion = &#39;0.0.1&#39;\r\nsourceCompatibility = &#39;17&#39;\r\n\r\n\r\nrepositories {\r\n    maven {\r\n        url &quot;https://plugins.gradle.org/m2/&quot;\r\n    }\r\n    mavenCentral()\r\n}\r\n\r\nconfigurations {\r\n    compileOnly {\r\n        extendsFrom annotationProcessor\r\n    }\r\n}\r\nconfigurations {\r\n    querydsl.extendsFrom implementation, compileClasspath\r\n}\r\n\r\ncompileQuerydsl {\r\n    options.annotationProcessorPath = configurations.querydsl\r\n}\r\n\r\nquerydsl {\r\n    library = &#39;com.querydsl:querydsl-apt:5.0.0&#39;\r\n    jpa = true\r\n}\r\n\r\nafterEvaluate {\r\n    project.tasks.compileQuerydsl.options.compilerArgs = [\r\n            &quot;-proc:only&quot;,\r\n            &quot;-processor&quot;, project.querydsl.processors() +\r\n                    &#39;,lombok.launch.AnnotationProcessorHider$AnnotationProcessor&#39;\r\n    ]\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-actuator&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    implementation &#39;org.hibernate:hibernate-core:6.2.13.Final&#39;\r\n    implementation &#39;com.mysql:mysql-connector-j:8.2.0&#39;\r\n    implementation &#39;org.json:json:20231013&#39;\r\n    implementation &#39;com.querydsl:querydsl-jpa:5.0.0:jakarta&#39;\r\n    annotationProcessor &#39;com.querydsl:querydsl-apt:5.0.0:jakarta&#39;\r\n    annotationProcessor &#39;jakarta.persistence:jakarta.persistence-api:3.1.0&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n}\r\n\r\njar {\r\n    enabled = false\r\n}\r\n\r\nsourceSets {\r\n    main {\r\n        java {\r\n            srcDirs = [&#39;src/main/java&#39;, &#39;src/querydsl/java&#39;]\r\n        }\r\n    }\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n```\r\n","link":"https://stackoverflow.com/questions/77554623/qclasses-not-generated-for-entities-with-java-17","title":"QClasses not generated for Entities with Java 17","body":"<p>This question has been shown up on stackoverflow for multiple times, but it doesn't solve my issue, I am using Java 17 with queryDSL 5.0 and Spring boot 3.2.0 with lombok 1.18.30 and gradle 7.4.1 distribution.</p>\n<p>The annotation processing is such that it generates the QClasses for the Java POJOs, but the gradle build causes the issue stating that\n<code>Attempt to recreate a file for type com.example.project.domain.QXXXXX</code></p>\n<p>The entire stack trace via build --debug appears to be a such</p>\n<pre><code>Exception is:\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task ':compileJava'.\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:147)\n    at org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:282)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:145)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:133)\n    at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\n    at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\n    at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:74)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:333)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:320)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:313)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:299)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:143)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:227)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:218)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:140)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\nCaused by: org.gradle.api.internal.tasks.compile.CompilationFailedException: Compilation failed; see the compiler error output for details.\n    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:56)\n    at org.gradle.api.internal.tasks.compile.JdkJavaCompiler.execute(JdkJavaCompiler.java:39)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.delegateAndHandleErrors(NormalizingJavaCompiler.java:97)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:51)\n    at org.gradle.api.internal.tasks.compile.NormalizingJavaCompiler.execute(NormalizingJavaCompiler.java:37)\n    at org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:51)\n    at org.gradle.api.internal.tasks.compile.AnnotationProcessorDiscoveringCompiler.execute(AnnotationProcessorDiscoveringCompiler.java:37)\n    at org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:46)\n    at org.gradle.api.internal.tasks.compile.ModuleApplicationNameWritingCompiler.execute(ModuleApplicationNameWritingCompiler.java:36)\n    at org.gradle.jvm.toolchain.internal.DefaultToolchainJavaCompiler.execute(DefaultToolchainJavaCompiler.java:57)\n    at org.gradle.api.tasks.compile.JavaCompile.lambda$createToolchainCompiler$1(JavaCompile.java:232)\n    at org.gradle.api.internal.tasks.compile.CleaningJavaCompiler.execute(CleaningJavaCompiler.java:53)\n    at org.gradle.api.internal.tasks.compile.incremental.IncrementalCompilerFactory.lambda$createRebuildAllCompiler$0(IncrementalCompilerFactory.java:52)\n    at org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:67)\n    at org.gradle.api.internal.tasks.compile.incremental.SelectiveCompiler.execute(SelectiveCompiler.java:41)\n    at org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:66)\n    at org.gradle.api.internal.tasks.compile.incremental.IncrementalResultStoringCompiler.execute(IncrementalResultStoringCompiler.java:52)\n    at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:59)\n    at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler$2.call(CompileJavaBuildOperationReportingCompiler.java:51)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n    at org.gradle.api.internal.tasks.compile.CompileJavaBuildOperationReportingCompiler.execute(CompileJavaBuildOperationReportingCompiler.java:51)\n    at org.gradle.api.tasks.compile.JavaCompile.performCompilation(JavaCompile.java:279)\n    at org.gradle.api.tasks.compile.JavaCompile.performIncrementalCompilation(JavaCompile.java:165)\n    at org.gradle.api.tasks.compile.JavaCompile.compile(JavaCompile.java:146)\n    at jdk.internal.reflect.GeneratedMethodAccessor499.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:104)\n    at org.gradle.api.internal.project.taskfactory.IncrementalInputsTaskAction.doExecute(IncrementalInputsTaskAction.java:32)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)\n    at org.gradle.api.internal.project.taskfactory.AbstractIncrementalTaskAction.execute(AbstractIncrementalTaskAction.java:25)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)\n    at org.gradle.api.internal.tasks.execution.TaskExecution$3.run(TaskExecution.java:242)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\n    at org.gradle.api.internal.tasks.execution.TaskExecution.executeAction(TaskExecution.java:227)\n    at org.gradle.api.internal.tasks.execution.TaskExecution.executeActions(TaskExecution.java:210)\n    at org.gradle.api.internal.tasks.execution.TaskExecution.executeWithPreviousOutputFiles(TaskExecution.java:193)\n    at org.gradle.api.internal.tasks.execution.TaskExecution.execute(TaskExecution.java:171)\n    at org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:89)\n    at org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:40)\n    at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:53)\n    at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:50)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n    at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:50)\n    at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:40)\n    at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:68)\n    at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:38)\n    at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:48)\n    at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:36)\n    at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)\n    at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)\n    at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)\n    at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)\n    at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:29)\n    at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:61)\n    at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:42)\n    at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:60)\n    at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:27)\n    at org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:180)\n    at org.gradle.internal.execution.steps.BuildCacheStep.lambda$execute$1(BuildCacheStep.java:75)\n    at org.gradle.internal.Either$Right.fold(Either.java:175)\n    at org.gradle.internal.execution.caching.CachingState.fold(CachingState.java:59)\n    at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:73)\n    at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:48)\n    at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:36)\n    at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:25)\n    at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:36)\n    at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:22)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:110)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$2(SkipUpToDateStep.java:56)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:56)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:38)\n    at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:73)\n    at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:44)\n    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)\n    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)\n    at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:89)\n    at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:50)\n    at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:114)\n    at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:57)\n    at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:76)\n    at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:50)\n    at org.gradle.internal.execution.steps.SkipEmptyWorkStep.executeWithNoEmptySources(SkipEmptyWorkStep.java:249)\n    at org.gradle.internal.execution.steps.SkipEmptyWorkStep.executeWithNoEmptySources(SkipEmptyWorkStep.java:204)\n    at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:83)\n    at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:54)\n    at org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:32)\n    at org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:21)\n    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)\n    at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:43)\n    at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:31)\n    at org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:40)\n    at org.gradle.api.internal.tasks.execution.TaskExecution$4.withWorkspace(TaskExecution.java:287)\n    at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:40)\n    at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:30)\n    at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:37)\n    at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:27)\n    at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:44)\n    at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:33)\n    at org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:76)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:144)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:133)\n    at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\n    at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\n    at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:74)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:333)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:320)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:313)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:299)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.lambda$run$0(DefaultPlanExecutor.java:143)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:227)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.executeNextNode(DefaultPlanExecutor.java:218)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:140)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\n</code></pre>\n<p>I understand the due files are getting created multiple times, but I am not sure which task is causes the duplicate creation of the same QClasses.</p>\n<p>Hereby I am attaching the build.gradle for your reference</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.2.0'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id 'com.ewerk.gradle.plugins.querydsl' version '1.0.10'\n    id &quot;io.freefair.lombok&quot; version &quot;8.4&quot;\n}\n\ngroup = 'com.speed'\nversion = '0.0.1'\nsourceCompatibility = '17'\n\n\nrepositories {\n    maven {\n        url &quot;https://plugins.gradle.org/m2/&quot;\n    }\n    mavenCentral()\n}\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\nconfigurations {\n    querydsl.extendsFrom implementation, compileClasspath\n}\n\ncompileQuerydsl {\n    options.annotationProcessorPath = configurations.querydsl\n}\n\nquerydsl {\n    library = 'com.querydsl:querydsl-apt:5.0.0'\n    jpa = true\n}\n\nafterEvaluate {\n    project.tasks.compileQuerydsl.options.compilerArgs = [\n            &quot;-proc:only&quot;,\n            &quot;-processor&quot;, project.querydsl.processors() +\n                    ',lombok.launch.AnnotationProcessorHider$AnnotationProcessor'\n    ]\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-actuator'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.hibernate:hibernate-core:6.2.13.Final'\n    implementation 'com.mysql:mysql-connector-j:8.2.0'\n    implementation 'org.json:json:20231013'\n    implementation 'com.querydsl:querydsl-jpa:5.0.0:jakarta'\n    annotationProcessor 'com.querydsl:querydsl-apt:5.0.0:jakarta'\n    annotationProcessor 'jakarta.persistence:jakarta.persistence-api:3.1.0'\n    implementation 'org.springframework.boot:spring-boot-starter'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n\njar {\n    enabled = false\n}\n\nsourceSets {\n    main {\n        java {\n            srcDirs = ['src/main/java', 'src/querydsl/java']\n        }\n    }\n}\n\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate"],"comments":[{"score":0,"post_type":"question","creation_date":1701079130,"post_id":77554568,"comment_id":136726083,"body_markdown":"Can you please reduce that to a [mcve]?","link":"https://stackoverflow.com/questions/77554568/spring-boot-3-1-0-hibernate-6-2-unable-to-generate-the-count-query-from-jp#comment136726083_77554568","body":"Can you please reduce that to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}],"comment_count":1,"is_answered":false,"view_count":66,"answer_count":0,"score":0,"last_activity_date":1701060395,"creation_date":1701060395,"question_id":77554568,"body_markdown":"My project is currently working properly in spring-boot version 3.0.6 with Hibernate 6.1.7.\r\n\r\nSince the release of spring-boot 3.1, which upgrade Hibernate to 6.2.2 (issue still present with spring-boot 3.2 and hibernate 6.3.1), the application is failing at start up because hibernate don&#39;t generate some COUNT request correctly from the JPQL.\r\n\r\nWe use postgresQL 15\r\n\r\nI get the following error :\r\n\r\n    org.hibernate.query.SyntaxException: At 1:28 and token &#39;as&#39;, no viable alternative at input &#39;SELECT count(DISTINCT f.id *as fooId, .....]\r\n\tat org.hibernate.query.hql.internal.StandardHqlTranslator$1.syntaxError(StandardHqlTranslator.java:108) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\r\n\r\nThe COUNT query is not specified and is automatically generated by hibernate for the following method :\r\n\r\n    @Query(&quot;&quot;&quot;\r\n    SELECT DISTINCT\r\n        qr.id as fooId,\r\n        MAX(c.name) as fooGroupName,\r\n        MAX(d.lastUpdatedDate) as fooDate,\r\n        MAX(l.startDepartureDate) as fooSecondDate,\r\n        MAX(d.destination.code) as destination,\r\n        MAX(d.origin.code) as origin,\r\n        f.type as fooType,\r\n        f.status as fooStatus\r\n    FROM FooEntity f\r\n        JOIN f.fooUser u\r\n        JOIN f.fooDetails d\r\n        JOIN f.fooCategory c\r\n        JOIN d.fooLines l\r\n        JOIN f.userCompany uc\r\n    WHERE\r\n        d.status IN (:fooDetailStatuses)\r\n        AND f.status IN (:fooStatuses)\r\n        AND (:source = &#39;ALL&#39; OR f.source = :source)\r\n        AND (:fromDate IS NULL OR cast(l.fromDate as String) &gt;= :fromDate)\r\n        AND (:toDate IS NULL OR cast(l.toDate as String) &lt;= :toDate)\r\n        AND (:#{#origins.size} = 0 OR d.origin.code IN :origins)\r\n        AND (:#{#destinations.size} = 0 OR d.destination.code IN :destinations)\r\n        AND (:#{#brands.size} = 0 OR d.brands.code IN :brands)\r\n        AND c.level = 1\r\n        AND (:#{#categories.size} = 0 OR c.id IN :categories)\r\n    GROUP BY f.id, f.type, f.status\r\n    &quot;&quot;&quot;)\r\n        Page&lt;Map&lt;String, Object&gt;&gt; findPaginatedId(Pageable pageable, String source, \r\n                                              @Param(&quot;fooDetailStatuses&quot;) List&lt;FooDetailStatus&gt; fooDetailStatuses,\r\n                                              @Param(&quot;fooStatuses&quot;) List&lt;FooStatus&gt; fooStatuses,\r\n                                              String fromDate, String toDate, List&lt;String&gt; origins, List&lt;String&gt; destinations, List&lt;String&gt; brands, List&lt;Integer&gt; categories);\r\n\r\nI didn&#39;t find anything on the hibernate documentation that would indicate that my request is not valid.\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77554568/spring-boot-3-1-0-hibernate-6-2-unable-to-generate-the-count-query-from-jp","title":"Spring-boot 3.1.0+ / Hibernate 6.2+ - Unable to generate the COUNT query from JPQL","body":"<p>My project is currently working properly in spring-boot version 3.0.6 with Hibernate 6.1.7.</p>\n<p>Since the release of spring-boot 3.1, which upgrade Hibernate to 6.2.2 (issue still present with spring-boot 3.2 and hibernate 6.3.1), the application is failing at start up because hibernate don't generate some COUNT request correctly from the JPQL.</p>\n<p>We use postgresQL 15</p>\n<p>I get the following error :</p>\n<pre><code>org.hibernate.query.SyntaxException: At 1:28 and token 'as', no viable alternative at input 'SELECT count(DISTINCT f.id *as fooId, .....]\nat org.hibernate.query.hql.internal.StandardHqlTranslator$1.syntaxError(StandardHqlTranslator.java:108) ~[hibernate-core-6.3.1.Final.jar:6.3.1.Final]\n</code></pre>\n<p>The COUNT query is not specified and is automatically generated by hibernate for the following method :</p>\n<pre><code>@Query(&quot;&quot;&quot;\nSELECT DISTINCT\n    qr.id as fooId,\n    MAX(c.name) as fooGroupName,\n    MAX(d.lastUpdatedDate) as fooDate,\n    MAX(l.startDepartureDate) as fooSecondDate,\n    MAX(d.destination.code) as destination,\n    MAX(d.origin.code) as origin,\n    f.type as fooType,\n    f.status as fooStatus\nFROM FooEntity f\n    JOIN f.fooUser u\n    JOIN f.fooDetails d\n    JOIN f.fooCategory c\n    JOIN d.fooLines l\n    JOIN f.userCompany uc\nWHERE\n    d.status IN (:fooDetailStatuses)\n    AND f.status IN (:fooStatuses)\n    AND (:source = 'ALL' OR f.source = :source)\n    AND (:fromDate IS NULL OR cast(l.fromDate as String) &gt;= :fromDate)\n    AND (:toDate IS NULL OR cast(l.toDate as String) &lt;= :toDate)\n    AND (:#{#origins.size} = 0 OR d.origin.code IN :origins)\n    AND (:#{#destinations.size} = 0 OR d.destination.code IN :destinations)\n    AND (:#{#brands.size} = 0 OR d.brands.code IN :brands)\n    AND c.level = 1\n    AND (:#{#categories.size} = 0 OR c.id IN :categories)\nGROUP BY f.id, f.type, f.status\n&quot;&quot;&quot;)\n    Page&lt;Map&lt;String, Object&gt;&gt; findPaginatedId(Pageable pageable, String source, \n                                          @Param(&quot;fooDetailStatuses&quot;) List&lt;FooDetailStatus&gt; fooDetailStatuses,\n                                          @Param(&quot;fooStatuses&quot;) List&lt;FooStatus&gt; fooStatuses,\n                                          String fromDate, String toDate, List&lt;String&gt; origins, List&lt;String&gt; destinations, List&lt;String&gt; brands, List&lt;Integer&gt; categories);\n</code></pre>\n<p>I didn't find anything on the hibernate documentation that would indicate that my request is not valid.</p>\n"},{"tags":["javascript","java","ajax","spring-boot"],"comments":[{"score":0,"post_type":"question","creation_date":1701063731,"post_id":77554426,"comment_id":136723989,"body_markdown":"Did you try to return instance new ResponseEntity&lt;&gt;(&quot;Custom message&quot;, HttpStatus.BAD_REQUEST) ? Modifying the header http status &gt; 400","link":"https://stackoverflow.com/questions/77554426/ajax-callback-for-file-download-including-error-handling#comment136723989_77554426","body":"Did you try to return instance new ResponseEntity&lt;&gt;(&quot;Custom message&quot;, HttpStatus.BAD_REQUEST) ? Modifying the header http status &gt; 400"}],"comment_count":1,"is_answered":false,"view_count":26,"answer_count":0,"score":1,"last_activity_date":1701057305,"creation_date":1701056766,"last_edit_date":1701057305,"question_id":77554426,"body_markdown":"jsp \r\n```lang-html\r\n&lt;button\r\n  type=&quot;submit&quot;\r\n  id=&quot;btn_load&quot;\r\n  value=&quot;Search&quot;\r\n  class=&quot;btn btn-primary&quot;\r\n&gt;Generate I-618&lt;/button&gt;\r\n```\r\njs\r\n```lang-js\r\n$(&quot;#btn_load&quot;).click(function (e) {\r\n  event.preventDefault();\r\n  form = $(&quot;#bookList&quot;);\r\n  var post_url = form.attr(&quot;action&quot;);\r\n  let form_data = form.serialize();\r\n\r\n  $.ajax({\r\n    url: post_url,\r\n    type: &quot;POST&quot;,\r\n    data: form_data,\r\n    success: function (data, textStatus, jqX) {\r\n      // Create a Blob from the data\r\n      var blob = new Blob([data], { type: &quot;text/plain&quot; });\r\n\r\n      // Create a link element\r\n      var link = document.createElement(&quot;a&quot;);\r\n\r\n      // Set the download attribute and create a URL for the file\r\n      link.download = &quot;your_filename.txt&quot;;\r\n      link.href = window.URL.createObjectURL(blob);\r\n\r\n      // Append the link to the document\r\n      document.body.appendChild(link);\r\n\r\n      // Trigger a click on the link to initiate the download\r\n      link.click();\r\n\r\n      // Remove the link from the document\r\n      document.body.removeChild(link);\r\n      $(&quot;.alert.alert-danger&quot;).text(&quot;Alert:success&quot;);\r\n    },\r\n    error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n      // Handle errors by Displaying a message to user????\r\n      $(&quot;.alert.alert-danger&quot;).text(&quot;Alert: Failure&quot;);\r\n    },\r\n  });\r\n});\r\n```\r\n\r\njava\r\n```lang-java\r\n@RequestMapping(value = &quot;/book.htm&quot;)\r\npublic ResponseEntity&lt;InputStreamResource&gt; bookselection(\r\n        @ModelAttribute(&quot;books&quot;) Books book, Model model,\r\n        HttpServletRequest request, BindingResult result) {\r\n    List&lt;InputStreamResource&gt; listStream = new ArrayList&lt;InputStreamResource&gt;();\r\n    String fileName = &quot;book.txt&quot;\r\n    if (CollectionUtils.isNotEmpty(bookList)) {\r\n        File file = File.createTempFile(fileName, &quot;.txt&quot;);\r\n        FileWriter interfaceFileWriter = new FileWriter(file);\r\n        BufferedWriter interfaceBufferedWriter = new BufferedWriter(interfaceFileWriter);\r\n        //write to file\r\n        for (Book list : bookList) {\r\n        interfaceBufferedWriter.write(list.getDelimitedRecord(delimiter, nullValue));\r\n        }\r\n        interfaceBufferedWriter.close();\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setCacheControl(&quot;must-revalidate, post-check=0, pre-check=0&quot;);\r\n        headers.setContentDispositionFormData(fileName + &quot;.txt&quot;, fileName + &quot;.txt&quot;);\r\n\r\n        InputStreamResource resource = new InputStreamResource(new FileInputStream(file));\r\n        if (file != null &amp;&amp; file.exists()) {\r\n            listStream.add(resource);\r\n            return ResponseEntity.ok().contentType(MediaType.TEXT_PLAIN).headers(headers).body(resource);\r\n        }\r\n    }\r\n    return null; //HOW TO RETURN ERROR STRING OR OBJECT??\r\n}\r\n```\r\nif there is an error in Java code while writing to file, I would like return error string. Since the method returns `ResponseEntity&lt;InputStreamResource&gt;`, how do I handle sending error message from java to ajax. \r\n\r\n- How to return error message/error object from java ??\r\n- How to read error Ajax &quot;error:&quot; that was returned by server??\r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77554426/ajax-callback-for-file-download-including-error-handling","title":"AJAX callback for file download including error handling","body":"<p>jsp</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;button\n  type=&quot;submit&quot;\n  id=&quot;btn_load&quot;\n  value=&quot;Search&quot;\n  class=&quot;btn btn-primary&quot;\n&gt;Generate I-618&lt;/button&gt;\n</code></pre>\n<p>js</p>\n<pre class=\"lang-js prettyprint-override\"><code>$(&quot;#btn_load&quot;).click(function (e) {\n  event.preventDefault();\n  form = $(&quot;#bookList&quot;);\n  var post_url = form.attr(&quot;action&quot;);\n  let form_data = form.serialize();\n\n  $.ajax({\n    url: post_url,\n    type: &quot;POST&quot;,\n    data: form_data,\n    success: function (data, textStatus, jqX) {\n      // Create a Blob from the data\n      var blob = new Blob([data], { type: &quot;text/plain&quot; });\n\n      // Create a link element\n      var link = document.createElement(&quot;a&quot;);\n\n      // Set the download attribute and create a URL for the file\n      link.download = &quot;your_filename.txt&quot;;\n      link.href = window.URL.createObjectURL(blob);\n\n      // Append the link to the document\n      document.body.appendChild(link);\n\n      // Trigger a click on the link to initiate the download\n      link.click();\n\n      // Remove the link from the document\n      document.body.removeChild(link);\n      $(&quot;.alert.alert-danger&quot;).text(&quot;Alert:success&quot;);\n    },\n    error: function (XMLHttpRequest, textStatus, errorThrown) {\n      // Handle errors by Displaying a message to user????\n      $(&quot;.alert.alert-danger&quot;).text(&quot;Alert: Failure&quot;);\n    },\n  });\n});\n</code></pre>\n<p>java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value = &quot;/book.htm&quot;)\npublic ResponseEntity&lt;InputStreamResource&gt; bookselection(\n        @ModelAttribute(&quot;books&quot;) Books book, Model model,\n        HttpServletRequest request, BindingResult result) {\n    List&lt;InputStreamResource&gt; listStream = new ArrayList&lt;InputStreamResource&gt;();\n    String fileName = &quot;book.txt&quot;\n    if (CollectionUtils.isNotEmpty(bookList)) {\n        File file = File.createTempFile(fileName, &quot;.txt&quot;);\n        FileWriter interfaceFileWriter = new FileWriter(file);\n        BufferedWriter interfaceBufferedWriter = new BufferedWriter(interfaceFileWriter);\n        //write to file\n        for (Book list : bookList) {\n        interfaceBufferedWriter.write(list.getDelimitedRecord(delimiter, nullValue));\n        }\n        interfaceBufferedWriter.close();\n        HttpHeaders headers = new HttpHeaders();\n        headers.setCacheControl(&quot;must-revalidate, post-check=0, pre-check=0&quot;);\n        headers.setContentDispositionFormData(fileName + &quot;.txt&quot;, fileName + &quot;.txt&quot;);\n\n        InputStreamResource resource = new InputStreamResource(new FileInputStream(file));\n        if (file != null &amp;&amp; file.exists()) {\n            listStream.add(resource);\n            return ResponseEntity.ok().contentType(MediaType.TEXT_PLAIN).headers(headers).body(resource);\n        }\n    }\n    return null; //HOW TO RETURN ERROR STRING OR OBJECT??\n}\n</code></pre>\n<p>if there is an error in Java code while writing to file, I would like return error string. Since the method returns <code>ResponseEntity&lt;InputStreamResource&gt;</code>, how do I handle sending error message from java to ajax.</p>\n<ul>\n<li>How to return error message/error object from java ??</li>\n<li>How to read error Ajax &quot;error:&quot; that was returned by server??</li>\n</ul>\n"},{"tags":["java","intellij-idea","compilation","bytecode"],"comments":[{"score":1,"post_type":"question","creation_date":1701046634,"post_id":77554025,"comment_id":136722868,"body_markdown":"From the [FernFlower](https://github.com/fesh0r/fernflower) GitHub: _&quot;Fernflower is the first actually working analytical decompiler for Java and probably for a high-level programming language in general. ***Naturally it is still under development, please send your bug reports and improvement suggestions to the issue tracker.***&quot;_","link":"https://stackoverflow.com/questions/77554025/why-is-there-a-mismatch-between-show-bytecode-and-class-file#comment136722868_77554025","body":"From the <a href=\"https://github.com/fesh0r/fernflower\" rel=\"nofollow noreferrer\">FernFlower</a> GitHub: <i>&quot;Fernflower is the first actually working analytical decompiler for Java and probably for a high-level programming language in general. <b>*Naturally it is still under development, please send your bug reports and improvement suggestions to the issue tracker.*</b>&quot;</i>"},{"score":0,"post_type":"question","creation_date":1701047367,"post_id":77554025,"comment_id":136722919,"body_markdown":"what discrepancy are you referring to? That the generated java code, called &quot;**.class file**&quot;, 2nd snippet above, is different than the &quot;**original .java file**&quot;? Or do you mean the difference between the 2nd snippet (&quot;**.class file**&quot;) and the last snippet, &quot;**show bytecode result**&quot;? || Mind that what is called &quot;**.class file**&quot; above is actually the decompiled code, not the real .class file content (aka bytecode); neither is the last one, called &quot;**show bytecode result**&quot;, is not *just* the bytecode  - it is some representation of bytecode, augmented with additional information","link":"https://stackoverflow.com/questions/77554025/why-is-there-a-mismatch-between-show-bytecode-and-class-file#comment136722919_77554025","body":"what discrepancy are you referring to? That the generated java code, called &quot;<b>.class file</b>&quot;, 2nd snippet above, is different than the &quot;<b>original .java file</b>&quot;? Or do you mean the difference between the 2nd snippet (&quot;<b>.class file</b>&quot;) and the last snippet, &quot;<b>show bytecode result</b>&quot;? || Mind that what is called &quot;<b>.class file</b>&quot; above is actually the decompiled code, not the real .class file content (aka bytecode); neither is the last one, called &quot;<b>show bytecode result</b>&quot;, is not <i>just</i> the bytecode  - it is some representation of bytecode, augmented with additional information"},{"score":0,"post_type":"question","creation_date":1701047547,"post_id":77554025,"comment_id":136722934,"body_markdown":"This refers to the discrepancy between the class file and show bytecode results.","link":"https://stackoverflow.com/questions/77554025/why-is-there-a-mismatch-between-show-bytecode-and-class-file#comment136722934_77554025","body":"This refers to the discrepancy between the class file and show bytecode results."},{"score":1,"post_type":"question","creation_date":1701047679,"post_id":77554025,"comment_id":136722943,"body_markdown":"well, as already written, the 2nd one is not showing bytecode, but as its header states: &quot;*Source code recreated from a .class file*&quot;. While the last one is, as explained in first answer, showing bytecode in a more readable form (kind of disassembled)","link":"https://stackoverflow.com/questions/77554025/why-is-there-a-mismatch-between-show-bytecode-and-class-file#comment136722943_77554025","body":"well, as already written, the 2nd one is not showing bytecode, but as its header states: &quot;<i>Source code recreated from a .class file</i>&quot;. While the last one is, as explained in first answer, showing bytecode in a more readable form (kind of disassembled)"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701046883,"last_edit_date":1701046883,"creation_date":1701046546,"answer_id":77554050,"question_id":77554025,"body_markdown":"What you&#39;re referring to as the `.class` file is actually, as the FernFlower comment explains, recreated source code. The `.class` file was run through a decompiler that attempts to convert the bytecode back into its original source code.\r\n\r\nThe &quot;show bytecode result&quot; code that you pasted is just a readable representation of the contents of the file","link":"https://stackoverflow.com/questions/77554025/why-is-there-a-mismatch-between-show-bytecode-and-class-file/77554050#77554050","title":"Why is there a mismatch between show bytecode and class file?","body":"<p>What you're referring to as the <code>.class</code> file is actually, as the FernFlower comment explains, recreated source code. The <code>.class</code> file was run through a decompiler that attempts to convert the bytecode back into its original source code.</p>\n<p>The &quot;show bytecode result&quot; code that you pasted is just a readable representation of the contents of the file</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701070717,"post_id":77554160,"comment_id":136724717,"body_markdown":"That&#39;s not a correct analysis.  While the value of `i` cannot be observed using &quot;pure Java&quot; code, you should be able to use reflection to get hold of the `java.lang.Field` for the `i` field and then use that to interrogate `i`s value at runtime.  The decompilation is incorrect.   (If the JIT compiler was somehow able to determine that the field was never access, it could be eliminated *at runtime*.  But that&#39;s a different issue.  And ... I don&#39;t think it is feasible to even do that.)","link":"https://stackoverflow.com/questions/77554025/why-is-there-a-mismatch-between-show-bytecode-and-class-file/77554160#comment136724717_77554160","body":"That&#39;s not a correct analysis.  While the value of <code>i</code> cannot be observed using &quot;pure Java&quot; code, you should be able to use reflection to get hold of the <code>java.lang.Field</code> for the <code>i</code> field and then use that to interrogate <code>i</code>s value at runtime.  The decompilation is incorrect.   (If the JIT compiler was somehow able to determine that the field was never access, it could be eliminated <i>at runtime</i>.  But that&#39;s a different issue.  And ... I don&#39;t think it is feasible to even do that.)"},{"score":0,"post_type":"answer","creation_date":1701071180,"post_id":77554160,"comment_id":136724776,"body_markdown":"I don&#39;t think that this is the decompiler trying to be smart.  I think it is just plain wrong.  But it is not unusual for decompilers to get things wrong.  They are typically implemented as a bunch of heuristics and pattern matches.  They don&#39;t have a deep understanding of the meaning of code they are working on.","link":"https://stackoverflow.com/questions/77554025/why-is-there-a-mismatch-between-show-bytecode-and-class-file/77554160#comment136724776_77554160","body":"I don&#39;t think that this is the decompiler trying to be smart.  I think it is just plain wrong.  But it is not unusual for decompilers to get things wrong.  They are typically implemented as a bunch of heuristics and pattern matches.  They don&#39;t have a deep understanding of the meaning of code they are working on."},{"score":0,"post_type":"answer","creation_date":1701071935,"post_id":77554160,"comment_id":136724886,"body_markdown":"Anyway: https://youtrack.jetbrains.com/issue/IDEA-339031","link":"https://stackoverflow.com/questions/77554025/why-is-there-a-mismatch-between-show-bytecode-and-class-file/77554160#comment136724886_77554160","body":"Anyway: <a href=\"https://youtrack.jetbrains.com/issue/IDEA-339031\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-339031</a>"},{"score":0,"post_type":"answer","creation_date":1701073319,"post_id":77554160,"comment_id":136725053,"body_markdown":"We have no control over what the OP puts in his Intellij bug reports.  (I assume it was him ... based on the wording and the timing.)","link":"https://stackoverflow.com/questions/77554025/why-is-there-a-mismatch-between-show-bytecode-and-class-file/77554160#comment136725053_77554160","body":"We have no control over what the OP puts in his Intellij bug reports.  (I assume it was him ... based on the wording and the timing.)"}],"comment_count":4,"score":2,"last_activity_date":1701057220,"last_edit_date":1701057220,"creation_date":1701049559,"answer_id":77554160,"question_id":77554025,"body_markdown":"&gt; Why is there a discrepancy between the two?\r\n\r\nIf you are asking why there is a discrepancy between &quot;.class file&quot; and &quot;show bytecode result&quot;, that is because they are showing different things:\r\n\r\n  - the former shows the decompiler&#39;s attempt to reconstruct source code from the bytecodes.\r\n  - the latter shows a disassembly of the bytecodes; i.e. the bytecodes rendered as (an approximation to) bytecode assembly language.  This is designed for people who want to&lt;sup&gt;1&lt;/sup&gt; **read the bytecodes** output by the Java compiler with the aid of the JVM spec.\r\n\r\nIf you are asking why &quot;original .java file&quot; and &quot;.class file&quot; are different, they are (once again) showing different things.\r\n\r\n  - the former shows the Java source code that you wrote\r\n  - the latter shows *reconstructed* Java code, that was generated by the decompiler.  Basically, the original code was compiled to bytecodes, and then it was *decompiled* back to Java source code.  This code may or may not be correct&lt;sup&gt;2&lt;/sup&gt;.\r\n\r\n----------------------\r\n\r\nIn this case, the decompiled code is different to the original.  It looks like the decompiler was not able to reconstruct the constructor for the `enum` and its `private int` variable.  That is a *limitation* of the decompiler that Intellij is using.  I imagine that that limitation *could* be fixed&lt;sup&gt;3&lt;/sup&gt;.  However decompilers limitations are inherent, and can&#39;t be fixed.  These include:\r\n\r\n  - Decompilers cannot reconstruct the original code layout, javadocs, comments and so forth that are not present in the &quot;.class&quot; file.\r\n  - If two different Java source constructs compile to the same bytecodes, the decompiler can&#39;t tell which one was used originally.\r\n  - Bytecode obfuscators, deliberately do things to the bytecodes to make it harder to reconstruct valid Java source code ... let alone code that is readable. \r\n\r\n----------------------\r\n\r\n&lt;sup&gt;1 - This is not as useful as you might think.  The &quot;problem&quot; is that bytecodes are (deliberately) not optimized.  Instead the JIT compiler will (eventually) compile + optimize the bytecodes to native code.  Often the transformations performed by the JIT compiler are pretty radical; e.g. inlining methods, optimizing away unnecessary loops, and so on.  This means that supposed performance insights you might get from reading the bytecodes are (at best) unreliable.&lt;br&gt;\r\n2 - It may not be functionally identical to the original code.  Indeed, it may not even be valid Java source code.  There are various reasons for this.&lt;br&gt;\r\n3 - ... if someone is willing to put in the work.  Indeed, it is possible that the problem is already addressed in a (hypothetical) more recent version of the decompiler.&lt;/sup&gt;\r\n","link":"https://stackoverflow.com/questions/77554025/why-is-there-a-mismatch-between-show-bytecode-and-class-file/77554160#77554160","title":"Why is there a mismatch between show bytecode and class file?","body":"<blockquote>\n<p>Why is there a discrepancy between the two?</p>\n</blockquote>\n<p>If you are asking why there is a discrepancy between &quot;.class file&quot; and &quot;show bytecode result&quot;, that is because they are showing different things:</p>\n<ul>\n<li>the former shows the decompiler's attempt to reconstruct source code from the bytecodes.</li>\n<li>the latter shows a disassembly of the bytecodes; i.e. the bytecodes rendered as (an approximation to) bytecode assembly language.  This is designed for people who want to<sup>1</sup> <strong>read the bytecodes</strong> output by the Java compiler with the aid of the JVM spec.</li>\n</ul>\n<p>If you are asking why &quot;original .java file&quot; and &quot;.class file&quot; are different, they are (once again) showing different things.</p>\n<ul>\n<li>the former shows the Java source code that you wrote</li>\n<li>the latter shows <em>reconstructed</em> Java code, that was generated by the decompiler.  Basically, the original code was compiled to bytecodes, and then it was <em>decompiled</em> back to Java source code.  This code may or may not be correct<sup>2</sup>.</li>\n</ul>\n<hr />\n<p>In this case, the decompiled code is different to the original.  It looks like the decompiler was not able to reconstruct the constructor for the <code>enum</code> and its <code>private int</code> variable.  That is a <em>limitation</em> of the decompiler that Intellij is using.  I imagine that that limitation <em>could</em> be fixed<sup>3</sup>.  However decompilers limitations are inherent, and can't be fixed.  These include:</p>\n<ul>\n<li>Decompilers cannot reconstruct the original code layout, javadocs, comments and so forth that are not present in the &quot;.class&quot; file.</li>\n<li>If two different Java source constructs compile to the same bytecodes, the decompiler can't tell which one was used originally.</li>\n<li>Bytecode obfuscators, deliberately do things to the bytecodes to make it harder to reconstruct valid Java source code ... let alone code that is readable.</li>\n</ul>\n<hr />\n<p><sup>1 - This is not as useful as you might think.  The &quot;problem&quot; is that bytecodes are (deliberately) not optimized.  Instead the JIT compiler will (eventually) compile + optimize the bytecodes to native code.  Often the transformations performed by the JIT compiler are pretty radical; e.g. inlining methods, optimizing away unnecessary loops, and so on.  This means that supposed performance insights you might get from reading the bytecodes are (at best) unreliable.<br>\n2 - It may not be functionally identical to the original code.  Indeed, it may not even be valid Java source code.  There are various reasons for this.<br>\n3 - ... if someone is willing to put in the work.  Indeed, it is possible that the problem is already addressed in a (hypothetical) more recent version of the decompiler.</sup></p>\n"}],"comment_count":4,"is_answered":true,"view_count":83,"answer_count":2,"score":-2,"last_activity_date":1701057220,"creation_date":1701045809,"question_id":77554025,"body_markdown":"## original .java file\r\n\r\n```java\r\npublic enum Fruit {\r\n    ORANGE(1), APPLE(2);\r\n    private final int i;\r\n    Fruit(int i){\r\n        this.i=i;\r\n    }\r\n}\r\n\r\n```\r\n\r\n## .class file\r\n\r\n```java\r\n//\r\n// Source code recreated from a .class file by IntelliJ IDEA\r\n// (powered by FernFlower decompiler)\r\n//\r\n\r\npublic enum Fruit {\r\n    ORANGE,\r\n    APPLE;\r\n\r\n    private Fruit() {\r\n    }\r\n}\r\n\r\n```\r\n\r\n## show bytecode result \r\n\r\n```java\r\n// class version 61.0 (61)\r\n// access flags 0x4031\r\n// signature Ljava/lang/Enum&lt;LFruit;&gt;;\r\n// declaration: Fruit extends java.lang.Enum&lt;Fruit&gt;\r\npublic final enum Fruit extends java/lang/Enum {\r\n\r\n  // compiled from: Fruit.java\r\n\r\n  // access flags 0x4019\r\n  public final static enum LFruit; ORANGE\r\n\r\n  // access flags 0x4019\r\n  public final static enum LFruit; APPLE\r\n\r\n  // access flags 0x12\r\n  private final I i\r\n\r\n  // access flags 0x101A\r\n  private final static synthetic [LFruit; $VALUES\r\n\r\n  // access flags 0x9\r\n  public static values()[LFruit;\r\n   L0\r\n    LINENUMBER 1 L0\r\n    GETSTATIC Fruit.$VALUES : [LFruit;\r\n    INVOKEVIRTUAL [LFruit;.clone ()Ljava/lang/Object;\r\n    CHECKCAST [LFruit;\r\n    ARETURN\r\n    MAXSTACK = 1\r\n    MAXLOCALS = 0\r\n\r\n  // access flags 0x9\r\n  public static valueOf(Ljava/lang/String;)LFruit;\r\n   L0\r\n    LINENUMBER 1 L0\r\n    LDC LFruit;.class\r\n    ALOAD 0\r\n    INVOKESTATIC java/lang/Enum.valueOf (Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum;\r\n    CHECKCAST Fruit\r\n    ARETURN\r\n   L1\r\n    LOCALVARIABLE name Ljava/lang/String; L0 L1 0\r\n    MAXSTACK = 2\r\n    MAXLOCALS = 1\r\n\r\n  // access flags 0x2\r\n  // signature (I)V\r\n  // declaration: void &lt;init&gt;(int)\r\n  private &lt;init&gt;(Ljava/lang/String;II)V\r\n   L0\r\n    LINENUMBER 4 L0\r\n    ALOAD 0\r\n    ALOAD 1\r\n    ILOAD 2\r\n    INVOKESPECIAL java/lang/Enum.&lt;init&gt; (Ljava/lang/String;I)V\r\n   L1\r\n    LINENUMBER 5 L1\r\n    ALOAD 0\r\n    ILOAD 3\r\n    PUTFIELD Fruit.i : I\r\n   L2\r\n    LINENUMBER 6 L2\r\n    RETURN\r\n   L3\r\n    LOCALVARIABLE this LFruit; L0 L3 0\r\n    LOCALVARIABLE i I L0 L3 3\r\n    MAXSTACK = 3\r\n    MAXLOCALS = 4\r\n\r\n  // access flags 0x100A\r\n  private static synthetic $values()[LFruit;\r\n   L0\r\n    LINENUMBER 1 L0\r\n    ICONST_2\r\n    ANEWARRAY Fruit\r\n    DUP\r\n    ICONST_0\r\n    GETSTATIC Fruit.ORANGE : LFruit;\r\n    AASTORE\r\n    DUP\r\n    ICONST_1\r\n    GETSTATIC Fruit.APPLE : LFruit;\r\n    AASTORE\r\n    ARETURN\r\n    MAXSTACK = 4\r\n    MAXLOCALS = 0\r\n\r\n  // access flags 0x8\r\n  static &lt;clinit&gt;()V\r\n   L0\r\n    LINENUMBER 2 L0\r\n    NEW Fruit\r\n    DUP\r\n    LDC &quot;ORANGE&quot;\r\n    ICONST_0\r\n    ICONST_1\r\n    INVOKESPECIAL Fruit.&lt;init&gt; (Ljava/lang/String;II)V\r\n    PUTSTATIC Fruit.ORANGE : LFruit;\r\n    NEW Fruit\r\n    DUP\r\n    LDC &quot;APPLE&quot;\r\n    ICONST_1\r\n    ICONST_2\r\n    INVOKESPECIAL Fruit.&lt;init&gt; (Ljava/lang/String;II)V\r\n    PUTSTATIC Fruit.APPLE : LFruit;\r\n   L1\r\n    LINENUMBER 1 L1\r\n    INVOKESTATIC Fruit.$values ()[LFruit;\r\n    PUTSTATIC Fruit.$VALUES : [LFruit;\r\n    RETURN\r\n    MAXSTACK = 5\r\n    MAXLOCALS = 0\r\n}\r\n\r\n```\r\n\r\nWhy is there a mismatch between show bytecode and class file?\r\n\r\n\r\nI looked into how to proceed with the Decompile process in intellij, but I couldn&#39;t find any official reference.\r\n\r\nI believe the result of show bytecode is not the raw ByteCode. This is because the raw bytecode is not human-readable.\r\n\r\nSo, as a result of Show bytecode, the decompiled version of the class file is both in processed form. Why is there a discrepancy between the two?\r\n\r\n(I also heard that class files are composed of bytecode)\r\n\r\nIs this a problem caused by a difference between the decompilation process and the show bytecode process, and the latter being more resilient of the two? (guess)","link":"https://stackoverflow.com/questions/77554025/why-is-there-a-mismatch-between-show-bytecode-and-class-file","title":"Why is there a mismatch between show bytecode and class file?","body":"<h2>original .java file</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public enum Fruit {\n    ORANGE(1), APPLE(2);\n    private final int i;\n    Fruit(int i){\n        this.i=i;\n    }\n}\n\n</code></pre>\n<h2>.class file</h2>\n<pre class=\"lang-java prettyprint-override\"><code>//\n// Source code recreated from a .class file by IntelliJ IDEA\n// (powered by FernFlower decompiler)\n//\n\npublic enum Fruit {\n    ORANGE,\n    APPLE;\n\n    private Fruit() {\n    }\n}\n\n</code></pre>\n<h2>show bytecode result</h2>\n<pre class=\"lang-java prettyprint-override\"><code>// class version 61.0 (61)\n// access flags 0x4031\n// signature Ljava/lang/Enum&lt;LFruit;&gt;;\n// declaration: Fruit extends java.lang.Enum&lt;Fruit&gt;\npublic final enum Fruit extends java/lang/Enum {\n\n  // compiled from: Fruit.java\n\n  // access flags 0x4019\n  public final static enum LFruit; ORANGE\n\n  // access flags 0x4019\n  public final static enum LFruit; APPLE\n\n  // access flags 0x12\n  private final I i\n\n  // access flags 0x101A\n  private final static synthetic [LFruit; $VALUES\n\n  // access flags 0x9\n  public static values()[LFruit;\n   L0\n    LINENUMBER 1 L0\n    GETSTATIC Fruit.$VALUES : [LFruit;\n    INVOKEVIRTUAL [LFruit;.clone ()Ljava/lang/Object;\n    CHECKCAST [LFruit;\n    ARETURN\n    MAXSTACK = 1\n    MAXLOCALS = 0\n\n  // access flags 0x9\n  public static valueOf(Ljava/lang/String;)LFruit;\n   L0\n    LINENUMBER 1 L0\n    LDC LFruit;.class\n    ALOAD 0\n    INVOKESTATIC java/lang/Enum.valueOf (Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Enum;\n    CHECKCAST Fruit\n    ARETURN\n   L1\n    LOCALVARIABLE name Ljava/lang/String; L0 L1 0\n    MAXSTACK = 2\n    MAXLOCALS = 1\n\n  // access flags 0x2\n  // signature (I)V\n  // declaration: void &lt;init&gt;(int)\n  private &lt;init&gt;(Ljava/lang/String;II)V\n   L0\n    LINENUMBER 4 L0\n    ALOAD 0\n    ALOAD 1\n    ILOAD 2\n    INVOKESPECIAL java/lang/Enum.&lt;init&gt; (Ljava/lang/String;I)V\n   L1\n    LINENUMBER 5 L1\n    ALOAD 0\n    ILOAD 3\n    PUTFIELD Fruit.i : I\n   L2\n    LINENUMBER 6 L2\n    RETURN\n   L3\n    LOCALVARIABLE this LFruit; L0 L3 0\n    LOCALVARIABLE i I L0 L3 3\n    MAXSTACK = 3\n    MAXLOCALS = 4\n\n  // access flags 0x100A\n  private static synthetic $values()[LFruit;\n   L0\n    LINENUMBER 1 L0\n    ICONST_2\n    ANEWARRAY Fruit\n    DUP\n    ICONST_0\n    GETSTATIC Fruit.ORANGE : LFruit;\n    AASTORE\n    DUP\n    ICONST_1\n    GETSTATIC Fruit.APPLE : LFruit;\n    AASTORE\n    ARETURN\n    MAXSTACK = 4\n    MAXLOCALS = 0\n\n  // access flags 0x8\n  static &lt;clinit&gt;()V\n   L0\n    LINENUMBER 2 L0\n    NEW Fruit\n    DUP\n    LDC &quot;ORANGE&quot;\n    ICONST_0\n    ICONST_1\n    INVOKESPECIAL Fruit.&lt;init&gt; (Ljava/lang/String;II)V\n    PUTSTATIC Fruit.ORANGE : LFruit;\n    NEW Fruit\n    DUP\n    LDC &quot;APPLE&quot;\n    ICONST_1\n    ICONST_2\n    INVOKESPECIAL Fruit.&lt;init&gt; (Ljava/lang/String;II)V\n    PUTSTATIC Fruit.APPLE : LFruit;\n   L1\n    LINENUMBER 1 L1\n    INVOKESTATIC Fruit.$values ()[LFruit;\n    PUTSTATIC Fruit.$VALUES : [LFruit;\n    RETURN\n    MAXSTACK = 5\n    MAXLOCALS = 0\n}\n\n</code></pre>\n<p>Why is there a mismatch between show bytecode and class file?</p>\n<p>I looked into how to proceed with the Decompile process in intellij, but I couldn't find any official reference.</p>\n<p>I believe the result of show bytecode is not the raw ByteCode. This is because the raw bytecode is not human-readable.</p>\n<p>So, as a result of Show bytecode, the decompiled version of the class file is both in processed form. Why is there a discrepancy between the two?</p>\n<p>(I also heard that class files are composed of bytecode)</p>\n<p>Is this a problem caused by a difference between the decompilation process and the show bytecode process, and the latter being more resilient of the two? (guess)</p>\n"},{"tags":["java","database","swing","jtable"],"comments":[{"score":0,"post_type":"question","creation_date":1701018628,"post_id":77552555,"comment_id":136720268,"body_markdown":"You&#39;re not &quot;updating&quot; afaics. Where is the method `upload_data` called?","link":"https://stackoverflow.com/questions/77552555/how-to-update-a-jtable#comment136720268_77552555","body":"You&#39;re not &quot;updating&quot; afaics. Where is the method <code>upload_data</code> called?"},{"score":0,"post_type":"question","creation_date":1701018724,"post_id":77552555,"comment_id":136720280,"body_markdown":"It&#39;s odd that TableData extends JFrame, shouldn&#39;t it be just a data-container? Are you sure that the connection is referencing the same JTable, that you have in your PanelForm?","link":"https://stackoverflow.com/questions/77552555/how-to-update-a-jtable#comment136720280_77552555","body":"It&#39;s odd that TableData extends JFrame, shouldn&#39;t it be just a data-container? Are you sure that the connection is referencing the same JTable, that you have in your PanelForm?"},{"score":0,"post_type":"question","creation_date":1701019268,"post_id":77552555,"comment_id":136720348,"body_markdown":"the `upload_data` method is used to upload data in the database, I use the `get_data` method, to get data from database. @ValerijDobler I&#39;m not sure about that, I think that is the problem, but I don&#39;t know how to solve it.","link":"https://stackoverflow.com/questions/77552555/how-to-update-a-jtable#comment136720348_77552555","body":"the <code>upload_data</code> method is used to upload data in the database, I use the <code>get_data</code> method, to get data from database. @ValerijDobler I&#39;m not sure about that, I think that is the problem, but I don&#39;t know how to solve it."},{"score":0,"post_type":"question","creation_date":1701019963,"post_id":77552555,"comment_id":136720448,"body_markdown":"yes, I have deleted some not relevant object and I uploaded the code about visible component","link":"https://stackoverflow.com/questions/77552555/how-to-update-a-jtable#comment136720448_77552555","body":"yes, I have deleted some not relevant object and I uploaded the code about visible component"},{"score":0,"post_type":"question","creation_date":1701020529,"post_id":77552555,"comment_id":136720523,"body_markdown":"What you posted is incomplete. Nothing has added `TableData` to anything here so as far as we&#39;re concerned, you shouldn&#39;t see *anything*","link":"https://stackoverflow.com/questions/77552555/how-to-update-a-jtable#comment136720523_77552555","body":"What you posted is incomplete. Nothing has added <code>TableData</code> to anything here so as far as we&#39;re concerned, you shouldn&#39;t see <i>anything</i>"},{"score":1,"post_type":"question","creation_date":1701021207,"post_id":77552555,"comment_id":136720594,"body_markdown":"You have two separate and unconnected instances of `TableData`. The one you display is *not* the one owned by the connection-bound class, so will do nothing","link":"https://stackoverflow.com/questions/77552555/how-to-update-a-jtable#comment136720594_77552555","body":"You have two separate and unconnected instances of <code>TableData</code>. The one you display is <i>not</i> the one owned by the connection-bound class, so will do nothing"},{"score":0,"post_type":"question","creation_date":1701021217,"post_id":77552555,"comment_id":136720597,"body_markdown":"As @user85421 has requested, please create and post your [mre] with this question. You are asking about code that runs but that misbehaves, and the best way for us to figure out why is to have working code that reproduces the problem. This is not a request for the entire program but rather for a new small program. Please read or re-read the link. Comment if you have any questions about the construct.","link":"https://stackoverflow.com/questions/77552555/how-to-update-a-jtable#comment136720597_77552555","body":"As @user85421 has requested, please create and post your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with this question. You are asking about code that runs but that misbehaves, and the best way for us to figure out why is to have working code that reproduces the problem. This is not a request for the entire program but rather for a new small program. Please read or re-read the link. Comment if you have any questions about the construct."},{"score":0,"post_type":"question","creation_date":1701021511,"post_id":77552555,"comment_id":136720623,"body_markdown":"@g00se how can I connect the two instances of TableData? Sorry, but I&#39;m still a novice","link":"https://stackoverflow.com/questions/77552555/how-to-update-a-jtable#comment136720623_77552555","body":"@g00se how can I connect the two instances of TableData? Sorry, but I&#39;m still a novice"},{"score":1,"post_type":"question","creation_date":1701022753,"post_id":77552555,"comment_id":136720753,"body_markdown":"You don&#39;t want to connect them. You need to get rid of one of them. I think your shortest route for now is to get rid of `ConnectionDB` but to incorporate its code into `TableData`. Make sure you only create *one* instance of that class. Every query should close all db objects","link":"https://stackoverflow.com/questions/77552555/how-to-update-a-jtable#comment136720753_77552555","body":"You don&#39;t want to connect them. You need to get rid of one of them. I think your shortest route for now is to get rid of <code>ConnectionDB</code> but to incorporate its code into <code>TableData</code>. Make sure you only create <i>one</i> instance of that class. Every query should close all db objects"},{"score":1,"post_type":"question","creation_date":1701028092,"post_id":77552555,"comment_id":136721317,"body_markdown":"1. You might want to investigate concepts like dependency injection and the observer pattern.  2. Your `ConnectionDB` should be generating a data model.  This would then be either be wrapped in or update a `TableModel` which would be attached to the `JTable` itself","link":"https://stackoverflow.com/questions/77552555/how-to-update-a-jtable#comment136721317_77552555","body":"1. You might want to investigate concepts like dependency injection and the observer pattern.  2. Your <code>ConnectionDB</code> should be generating a data model.  This would then be either be wrapped in or update a <code>TableModel</code> which would be attached to the <code>JTable</code> itself"}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701057175,"creation_date":1701057175,"answer_id":77554442,"question_id":77552555,"body_markdown":"So immediately, you&#39;re creating multiple instances of `TableData`....\r\n\r\n    public class ConnectionDB {\r\n        //...\r\n        TableData tableData = new TableData();\r\n\r\n    public class HomePage extends JFrame {\r\n        private PanelForm panelForm;\r\n        private TableData tableData;\r\n        HomePage(){\r\n            //..\r\n            tableData = new TableData();\r\n\r\nNeither of these two instances have anything to do with each other, so updating one will not update the other.\r\n\r\nThis suggests that you need to spend some more time researching concepts like\r\n\r\n* [Dependency injection](https://www.google.com/search?q=java+dependency+injection&amp;oq=java+dependency+injection)\r\n* [Single Responsibility Principle](https://www.google.com/search?q=java+single+responsibility+principle)\r\n* [Model-View-Controller](https://www.google.com/search?q=java+model+view+controller)\r\n\r\nLet&#39;s start with, you&#39;re using an Object Oriented language, this means, you should be trying to describe your data more as &quot;objects&quot; rather then a lose connection of elements in an array.\r\n\r\nLet&#39;s start with a &quot;book&quot; concept...\r\n\r\n    public interface Book {\r\n        public String getTitle();\r\n        public String getAuthor();\r\n        public int getPrice();\r\n    }\r\n\r\nI like `interface`s they free your code from changes which might occur at an implementation level, should you need to shift your data source from say something like a local database to a web API.\r\n\r\nHaving said that, we&#39;re still going to need a concrete implement...\r\n\r\n    public class DefaultBook implements Book {\r\n        private String title;\r\n        private String author;\r\n        private int price;\r\n\r\n        public DefaultBook(String title, String author, int price) {\r\n            this.title = title;\r\n            this.author = author;\r\n            this.price = price;\r\n        }\r\n        \r\n        @Override\r\n        public String getTitle() {\r\n            return title;\r\n        }\r\n\r\n        @Override\r\n        public String getAuthor() {\r\n            return author;\r\n        }\r\n\r\n        @Override\r\n        public int getPrice() {\r\n            return price;\r\n        }\r\n    }\r\n\r\nI might be tempted to also inject that the records database key into an implementation, but that&#39;s details you can address later.\r\n\r\nNext, lets take a look at the `ConnectionDB`...\r\n\r\n    public class ConnectionDB {\r\n        //...\r\n        public void upload_data(String titolo, String autore, int prezzo){\r\n            try{\r\n                Connection con = DriverManager.getConnection(url, user, password);\r\n                Statement statement = con.createStatement();\r\n                String query = &quot;insert into libri(titolo, autore, prezzo)&quot; +\r\n                               &quot;values (&#39;&quot;+titolo+&quot;&#39;,&#39;&quot;+autore+&quot;&#39;,&#39;&quot;+prezzo+&quot;&#39;)&quot;;\r\n                statement.executeUpdate(query);\r\n                System.out.println(&quot;success&quot;);\r\n            }\r\n            catch(Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\nThis is not only inefficient and slow, it&#39;s also dangerous.\r\n\r\nCreate a new instance of the `Connection` each time is slow and you&#39;re leaving yourself open to [sql injection](https://www.google.com/search?q=java+sql+injection) attacks.  You&#39;re also not closing any of the resources, which could mean that the connection will keep them open, degrading the performance of your database.\r\n\r\nStart by taking a look at [The try-with-resources Statement](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) and [Using Prepared Statements](https://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html).\r\n\r\nInstead, you should be making use of dependency injection to pass in a reference to the `Connection`.  This resolves the class of the responsibility of creating the connection, allow you to create what ever connection you need to what ever database you want.\r\n\r\n    public class ConnectionDB {\r\n        private Connection connection;\r\n\r\n        public ConnectionDB(Connection connction) {\r\n            this.connection = connction;\r\n        }\r\n\r\n        protected Connection getConnection() {\r\n            return connection;\r\n        }\r\n\r\n        public void uploadData(Book book) throws SQLException {\r\n            try(PreparedStatement statement = getConnection().prepareStatement(&quot;insert into libri(titolo, autore, prezzo) values (?, ?, ?)&quot;)) {\r\n                statement.setString(1, book.getTitle());\r\n                statement.setString(2, book.getAuthor());\r\n                statement.setInt(3, book.getPrice());\r\n                statement.executeUpdate();\r\n                System.out.println(&quot;success&quot;);\r\n            }\r\n        }\r\n\r\n        public List&lt;Book&gt; getData() throws SQLException {\r\n            List&lt;Book&gt; books = new ArrayList&lt;&gt;(32);\r\n            try (Statement statement = getConnection().createStatement()) {\r\n                ResultSet resultSet = statement.executeQuery(&quot;select titolo, autore, prezzo from libri&quot;);\r\n                while (resultSet.next()) {\r\n                    String title = resultSet.getString(1);\r\n                    String author = resultSet.getString(2);\r\n                    int price = resultSet.getInt(3);\r\n                    \r\n                    books.add(new DefaultBook(title, author, price));\r\n                }\r\n            }\r\n            return books;\r\n        }\r\n    }\r\n\r\nYou will note that `getData` returns a `List` of `Book`s, this is important, as it removes any implementation details that previously existed.  The `ConnectionDB` doesn&#39;t care how you might use the data, only that when requested, it will return a `List` of data for you.\r\n\r\nAlso note, I&#39;m not consuming the errors.  Error management (beyond cleaning up the resources) isn&#39;t this classes responsibility, the caller will want to know when something goes wrong.\r\n\r\nOkay, let&#39;s move onto the UI by stating with how you would model the data from `ConnectionDB` for the UI.\r\n\r\nI would, personally, create a custom `TableModel` which could take a `List` of `Book`s and model it as I needed, for example...\r\n\r\n    public class BookTableModel extends AbstractTableModel {\r\n        private List&lt;Book&gt; books;\r\n        private String[] columnNames = new String[] {\r\n            &quot;Title&quot;, &quot;Author&quot;, &quot;Price&quot;\r\n        };\r\n\r\n        public BookTableModel(List&lt;Book&gt; books) {\r\n            this.books = books;\r\n        }\r\n\r\n        public List&lt;Book&gt; getBooks() {\r\n            return books;\r\n        }\r\n        \r\n        @Override\r\n        public int getRowCount() {\r\n            return getBooks().size();\r\n        }\r\n\r\n        @Override\r\n        public int getColumnCount() {\r\n            return columnNames.length;\r\n        }\r\n\r\n        @Override\r\n        public String getColumnName(int column) {\r\n            return columnNames[column];\r\n        }\r\n\r\n        @Override\r\n        public Object getValueAt(int rowIndex, int columnIndex) {\r\n            Book book = getBooks().get(rowIndex);\r\n            switch (columnIndex) {\r\n                case 0: return book.getTitle();\r\n                case 1: return book.getAuthor();\r\n                case 2: return book.getPrice();\r\n            }\r\n            return null;\r\n        }\r\n\r\n        @Override\r\n        public Class&lt;?&gt; getColumnClass(int columnIndex) {\r\n            switch (columnIndex) {\r\n                case 0: return String.class;\r\n                case 1: return String.class;\r\n                case 2: return Integer.class;\r\n            }\r\n            return Object.class;\r\n        }        \r\n    }\r\n\r\nThis is important, because I could use a `ListModel` instead if I wanted to!  Same data, different presentation!\r\n\r\n    public class BookTable extends JPanel {\r\n        private JTable table;\r\n        \r\n        public BookTable(BookTableModel model) {\r\n            setLayout(new BorderLayout());\r\n            table = new JTable(model);\r\n            add(new JScrollPane(table));\r\n        }\r\n\r\n        protected JTable getTable() {\r\n            return table;\r\n        }\r\n\r\n        public BookTableModel getModel() {\r\n            return (BookTableModel) getTable().getModel();\r\n        }\r\n\r\n        public void setModel(BookTableModel model) {\r\n            getTable().setModel(model);\r\n        }\r\n    }\r\n\r\nNow, unless my UI was suitably complex, I might not seperate the table management to a seperate class, instead, I might just do something like...\r\n\r\n    public class BookPane extends JPanel {\r\n        private ConnectionDB connectionDB;\r\n        \r\n        private JTable bookTable;\r\n\r\n        public BookPane(ConnectionDB connectionDB) {\r\n            this.connectionDB = connectionDB;\r\n            setLayout(new BorderLayout());\r\n            \r\n            // You could add a empty constructor to the\r\n            // BookTableModel to make this a bit easier\r\n            bookTable = new JTable(new BookTableModel(new ArrayList&lt;&gt;()));\r\n            \r\n            add(new JScrollPane(bookTable));\r\n            \r\n            JButton loadButton = new JButton(&quot;Load&quot;);\r\n            loadButton.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    try {\r\n                        List&lt;Book&gt; data = getConnectionDB().getData();\r\n                        // You could just replace the `List` managed by\r\n                        // BookTableModel, but this is just simpler\r\n                        getBookTable().setModel(new BookTableModel(data));\r\n                    } catch (SQLException ex) {\r\n                        ex.printStackTrace();\r\n                        JOptionPane.showMessageDialog(BookPane.this, &quot;Failed to load data&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        public ConnectionDB getConnectionDB() {\r\n            return connectionDB;\r\n        }\r\n\r\n        protected JTable getBookTable() {\r\n            return bookTable;\r\n        }               \r\n    }\r\n\r\nSo, how does this all tie together?  Well, maybe something like...\r\n\r\n    Connection connection = ...; // Create an instance of a Connection for your database\r\n    ConnectionDB connectionDB = new ConnectionDB(connection);\r\n\r\n    EventQueue.invokeLater(new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            JFrame frame = new JFrame();\r\n            frame.add(new BookPane(connectionDB));\r\n            frame.pack();\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setVisible(true);\r\n        }\r\n    });\r\n","link":"https://stackoverflow.com/questions/77552555/how-to-update-a-jtable/77554442#77554442","title":"How to update a Jtable?","body":"<p>So immediately, you're creating multiple instances of <code>TableData</code>....</p>\n<pre><code>public class ConnectionDB {\n    //...\n    TableData tableData = new TableData();\n\npublic class HomePage extends JFrame {\n    private PanelForm panelForm;\n    private TableData tableData;\n    HomePage(){\n        //..\n        tableData = new TableData();\n</code></pre>\n<p>Neither of these two instances have anything to do with each other, so updating one will not update the other.</p>\n<p>This suggests that you need to spend some more time researching concepts like</p>\n<ul>\n<li><a href=\"https://www.google.com/search?q=java+dependency+injection&amp;oq=java+dependency+injection\" rel=\"nofollow noreferrer\">Dependency injection</a></li>\n<li><a href=\"https://www.google.com/search?q=java+single+responsibility+principle\" rel=\"nofollow noreferrer\">Single Responsibility Principle</a></li>\n<li><a href=\"https://www.google.com/search?q=java+model+view+controller\" rel=\"nofollow noreferrer\">Model-View-Controller</a></li>\n</ul>\n<p>Let's start with, you're using an Object Oriented language, this means, you should be trying to describe your data more as &quot;objects&quot; rather then a lose connection of elements in an array.</p>\n<p>Let's start with a &quot;book&quot; concept...</p>\n<pre><code>public interface Book {\n    public String getTitle();\n    public String getAuthor();\n    public int getPrice();\n}\n</code></pre>\n<p>I like <code>interface</code>s they free your code from changes which might occur at an implementation level, should you need to shift your data source from say something like a local database to a web API.</p>\n<p>Having said that, we're still going to need a concrete implement...</p>\n<pre><code>public class DefaultBook implements Book {\n    private String title;\n    private String author;\n    private int price;\n\n    public DefaultBook(String title, String author, int price) {\n        this.title = title;\n        this.author = author;\n        this.price = price;\n    }\n    \n    @Override\n    public String getTitle() {\n        return title;\n    }\n\n    @Override\n    public String getAuthor() {\n        return author;\n    }\n\n    @Override\n    public int getPrice() {\n        return price;\n    }\n}\n</code></pre>\n<p>I might be tempted to also inject that the records database key into an implementation, but that's details you can address later.</p>\n<p>Next, lets take a look at the <code>ConnectionDB</code>...</p>\n<pre><code>public class ConnectionDB {\n    //...\n    public void upload_data(String titolo, String autore, int prezzo){\n        try{\n            Connection con = DriverManager.getConnection(url, user, password);\n            Statement statement = con.createStatement();\n            String query = &quot;insert into libri(titolo, autore, prezzo)&quot; +\n                           &quot;values ('&quot;+titolo+&quot;','&quot;+autore+&quot;','&quot;+prezzo+&quot;')&quot;;\n            statement.executeUpdate(query);\n            System.out.println(&quot;success&quot;);\n        }\n        catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>This is not only inefficient and slow, it's also dangerous.</p>\n<p>Create a new instance of the <code>Connection</code> each time is slow and you're leaving yourself open to <a href=\"https://www.google.com/search?q=java+sql+injection\" rel=\"nofollow noreferrer\">sql injection</a> attacks.  You're also not closing any of the resources, which could mean that the connection will keep them open, degrading the performance of your database.</p>\n<p>Start by taking a look at <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">The try-with-resources Statement</a> and <a href=\"https://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html\" rel=\"nofollow noreferrer\">Using Prepared Statements</a>.</p>\n<p>Instead, you should be making use of dependency injection to pass in a reference to the <code>Connection</code>.  This resolves the class of the responsibility of creating the connection, allow you to create what ever connection you need to what ever database you want.</p>\n<pre><code>public class ConnectionDB {\n    private Connection connection;\n\n    public ConnectionDB(Connection connction) {\n        this.connection = connction;\n    }\n\n    protected Connection getConnection() {\n        return connection;\n    }\n\n    public void uploadData(Book book) throws SQLException {\n        try(PreparedStatement statement = getConnection().prepareStatement(&quot;insert into libri(titolo, autore, prezzo) values (?, ?, ?)&quot;)) {\n            statement.setString(1, book.getTitle());\n            statement.setString(2, book.getAuthor());\n            statement.setInt(3, book.getPrice());\n            statement.executeUpdate();\n            System.out.println(&quot;success&quot;);\n        }\n    }\n\n    public List&lt;Book&gt; getData() throws SQLException {\n        List&lt;Book&gt; books = new ArrayList&lt;&gt;(32);\n        try (Statement statement = getConnection().createStatement()) {\n            ResultSet resultSet = statement.executeQuery(&quot;select titolo, autore, prezzo from libri&quot;);\n            while (resultSet.next()) {\n                String title = resultSet.getString(1);\n                String author = resultSet.getString(2);\n                int price = resultSet.getInt(3);\n                \n                books.add(new DefaultBook(title, author, price));\n            }\n        }\n        return books;\n    }\n}\n</code></pre>\n<p>You will note that <code>getData</code> returns a <code>List</code> of <code>Book</code>s, this is important, as it removes any implementation details that previously existed.  The <code>ConnectionDB</code> doesn't care how you might use the data, only that when requested, it will return a <code>List</code> of data for you.</p>\n<p>Also note, I'm not consuming the errors.  Error management (beyond cleaning up the resources) isn't this classes responsibility, the caller will want to know when something goes wrong.</p>\n<p>Okay, let's move onto the UI by stating with how you would model the data from <code>ConnectionDB</code> for the UI.</p>\n<p>I would, personally, create a custom <code>TableModel</code> which could take a <code>List</code> of <code>Book</code>s and model it as I needed, for example...</p>\n<pre><code>public class BookTableModel extends AbstractTableModel {\n    private List&lt;Book&gt; books;\n    private String[] columnNames = new String[] {\n        &quot;Title&quot;, &quot;Author&quot;, &quot;Price&quot;\n    };\n\n    public BookTableModel(List&lt;Book&gt; books) {\n        this.books = books;\n    }\n\n    public List&lt;Book&gt; getBooks() {\n        return books;\n    }\n    \n    @Override\n    public int getRowCount() {\n        return getBooks().size();\n    }\n\n    @Override\n    public int getColumnCount() {\n        return columnNames.length;\n    }\n\n    @Override\n    public String getColumnName(int column) {\n        return columnNames[column];\n    }\n\n    @Override\n    public Object getValueAt(int rowIndex, int columnIndex) {\n        Book book = getBooks().get(rowIndex);\n        switch (columnIndex) {\n            case 0: return book.getTitle();\n            case 1: return book.getAuthor();\n            case 2: return book.getPrice();\n        }\n        return null;\n    }\n\n    @Override\n    public Class&lt;?&gt; getColumnClass(int columnIndex) {\n        switch (columnIndex) {\n            case 0: return String.class;\n            case 1: return String.class;\n            case 2: return Integer.class;\n        }\n        return Object.class;\n    }        \n}\n</code></pre>\n<p>This is important, because I could use a <code>ListModel</code> instead if I wanted to!  Same data, different presentation!</p>\n<pre><code>public class BookTable extends JPanel {\n    private JTable table;\n    \n    public BookTable(BookTableModel model) {\n        setLayout(new BorderLayout());\n        table = new JTable(model);\n        add(new JScrollPane(table));\n    }\n\n    protected JTable getTable() {\n        return table;\n    }\n\n    public BookTableModel getModel() {\n        return (BookTableModel) getTable().getModel();\n    }\n\n    public void setModel(BookTableModel model) {\n        getTable().setModel(model);\n    }\n}\n</code></pre>\n<p>Now, unless my UI was suitably complex, I might not seperate the table management to a seperate class, instead, I might just do something like...</p>\n<pre><code>public class BookPane extends JPanel {\n    private ConnectionDB connectionDB;\n    \n    private JTable bookTable;\n\n    public BookPane(ConnectionDB connectionDB) {\n        this.connectionDB = connectionDB;\n        setLayout(new BorderLayout());\n        \n        // You could add a empty constructor to the\n        // BookTableModel to make this a bit easier\n        bookTable = new JTable(new BookTableModel(new ArrayList&lt;&gt;()));\n        \n        add(new JScrollPane(bookTable));\n        \n        JButton loadButton = new JButton(&quot;Load&quot;);\n        loadButton.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                try {\n                    List&lt;Book&gt; data = getConnectionDB().getData();\n                    // You could just replace the `List` managed by\n                    // BookTableModel, but this is just simpler\n                    getBookTable().setModel(new BookTableModel(data));\n                } catch (SQLException ex) {\n                    ex.printStackTrace();\n                    JOptionPane.showMessageDialog(BookPane.this, &quot;Failed to load data&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);\n                }\n            }\n        });\n    }\n\n    public ConnectionDB getConnectionDB() {\n        return connectionDB;\n    }\n\n    protected JTable getBookTable() {\n        return bookTable;\n    }               \n}\n</code></pre>\n<p>So, how does this all tie together?  Well, maybe something like...</p>\n<pre><code>Connection connection = ...; // Create an instance of a Connection for your database\nConnectionDB connectionDB = new ConnectionDB(connection);\n\nEventQueue.invokeLater(new Runnable() {\n    @Override\n    public void run() {\n        JFrame frame = new JFrame();\n        frame.add(new BookPane(connectionDB));\n        frame.pack();\n        frame.setLocationRelativeTo(null);\n        frame.setVisible(true);\n    }\n});\n</code></pre>\n"}],"comment_count":10,"is_answered":true,"view_count":85,"answer_count":1,"score":0,"last_activity_date":1701057175,"creation_date":1701016494,"last_edit_date":1701019912,"question_id":77552555,"body_markdown":"I created a java swing application, which takes data from a database, and displays it in a JTable. I&#39;m currently just trying to view all the data in my database. But when I click the button to send the query to the database and view the obtained data on the jtable, the table does not update. This is my code:\r\n\r\n``` TableData.java``` \r\n``` import com.mysql.cj.xdevapi.Table;\r\n\r\nimport javax.swing.*;\r\nimport javax.swing.border.Border;\r\nimport javax.swing.table.DefaultTableModel;\r\nimport java.awt.*;\r\n\r\npublic class TableData extends JPanel {\r\n    private JTable table;\r\n    private DefaultTableModel model;\r\n    private final Object Column[] = {&quot;id&quot;, &quot;titolo&quot;, &quot;autore&quot;, &quot;prezzo&quot;};\r\n    TableData(){\r\n        model = new DefaultTableModel();\r\n        table = new JTable(model);\r\n        model.setColumnIdentifiers(Column);\r\n        setLayout(new BorderLayout());\r\n        add(new JScrollPane(table), BorderLayout.CENTER);\r\n    }\r\n    public void updateTable(Object row[]){\r\n        model.addRow(row);\r\n    }\r\n}\r\n``` \r\n\r\n``` ConnectionDB.java``` \r\n\r\n``` import java.sql.Connection;\r\nimport java.sql.Statement;\r\nimport java.sql.DriverManager;\r\nimport java.sql.ResultSet;\r\n\r\npublic class ConnectionDB {\r\n    private String url = &quot;jdbc:mysql://localhost:4444/database_name&quot;;\r\n    private String user = &quot;root&quot;;\r\n    private String password = &quot;password&quot;;\r\n    TableData tableData = new TableData();\r\n    //id titolo autore prezzo\r\n    public void upload_data(String titolo, String autore, int prezzo){\r\n        try{\r\n            Connection con = DriverManager.getConnection(url, user, password);\r\n            Statement statement = con.createStatement();\r\n            String query = &quot;insert into libri(titolo, autore, prezzo)&quot; +\r\n                           &quot;values (&#39;&quot;+titolo+&quot;&#39;,&#39;&quot;+autore+&quot;&#39;,&#39;&quot;+prezzo+&quot;&#39;)&quot;;\r\n            statement.executeUpdate(query);\r\n            System.out.println(&quot;success&quot;);\r\n        }\r\n        catch(Exception e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    public void get_data(){\r\n        Object row[] = new Object[4];\r\n        try{\r\n            Connection conn = DriverManager.getConnection(url, user, password);\r\n            Statement statement = conn.createStatement();\r\n            ResultSet resultSet = statement.executeQuery(&quot;select * from libri&quot;);\r\n            while(resultSet.next()){\r\n                for(int i = 1; i&lt;=4; i++){\r\n                    row[i-1] = resultSet.getString(i);\r\n                }\r\n                tableData.updateTable(row);\r\n            }\r\n        }\r\n        catch(Exception e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n``` \r\n``` PanelForm.java``` \r\n``` import javax.swing.*;\r\nimport javax.swing.border.Border;\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.util.jar.JarEntry;\r\n\r\npublic class PanelForm extends JPanel {\r\n    ....somebutton.....\r\n    ConnectionDB conn = new ConnectionDB();\r\n\r\n    ....some board....\r\n        buttonVisualizza.addActionListener(new ActionListener() {\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n                conn.get_data();\r\n            }\r\n        });\r\n    }\r\n}\r\n``` \r\nThis is my ```HomePage.java ``` \r\n```import javax.swing.*;\r\nimport javax.swing.text.AbstractDocument;\r\nimport java.awt.*;\r\n\r\npublic class HomePage extends JFrame {\r\n    private PanelForm panelForm;\r\n    private TableData tableData;\r\n    HomePage(){\r\n        super(&quot;Home&quot;);\r\n        setSize(800,500);\r\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\r\n        setLocation(200,200);\r\n        setLayout(new BorderLayout());\r\n\r\n        panelForm = new PanelForm();\r\n        tableData = new TableData();\r\n        add(panelForm, BorderLayout.LINE_START);\r\n        add(tableData, BorderLayout.CENTER);\r\n        setVisible(true);\r\n\r\n    }\r\n}\r\n ``` \r\nI have already tried to reload the model, and this command: ``` model.fireTableDataChanged();``` \r\n","link":"https://stackoverflow.com/questions/77552555/how-to-update-a-jtable","title":"How to update a Jtable?","body":"<p>I created a java swing application, which takes data from a database, and displays it in a JTable. I'm currently just trying to view all the data in my database. But when I click the button to send the query to the database and view the obtained data on the jtable, the table does not update. This is my code:</p>\n<p><code> TableData.java</code></p>\n<pre><code>\nimport javax.swing.*;\nimport javax.swing.border.Border;\nimport javax.swing.table.DefaultTableModel;\nimport java.awt.*;\n\npublic class TableData extends JPanel {\n    private JTable table;\n    private DefaultTableModel model;\n    private final Object Column[] = {&quot;id&quot;, &quot;titolo&quot;, &quot;autore&quot;, &quot;prezzo&quot;};\n    TableData(){\n        model = new DefaultTableModel();\n        table = new JTable(model);\n        model.setColumnIdentifiers(Column);\n        setLayout(new BorderLayout());\n        add(new JScrollPane(table), BorderLayout.CENTER);\n    }\n    public void updateTable(Object row[]){\n        model.addRow(row);\n    }\n}\n</code></pre>\n<p><code> ConnectionDB.java</code></p>\n<pre><code>import java.sql.Statement;\nimport java.sql.DriverManager;\nimport java.sql.ResultSet;\n\npublic class ConnectionDB {\n    private String url = &quot;jdbc:mysql://localhost:4444/database_name&quot;;\n    private String user = &quot;root&quot;;\n    private String password = &quot;password&quot;;\n    TableData tableData = new TableData();\n    //id titolo autore prezzo\n    public void upload_data(String titolo, String autore, int prezzo){\n        try{\n            Connection con = DriverManager.getConnection(url, user, password);\n            Statement statement = con.createStatement();\n            String query = &quot;insert into libri(titolo, autore, prezzo)&quot; +\n                           &quot;values ('&quot;+titolo+&quot;','&quot;+autore+&quot;','&quot;+prezzo+&quot;')&quot;;\n            statement.executeUpdate(query);\n            System.out.println(&quot;success&quot;);\n        }\n        catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n    public void get_data(){\n        Object row[] = new Object[4];\n        try{\n            Connection conn = DriverManager.getConnection(url, user, password);\n            Statement statement = conn.createStatement();\n            ResultSet resultSet = statement.executeQuery(&quot;select * from libri&quot;);\n            while(resultSet.next()){\n                for(int i = 1; i&lt;=4; i++){\n                    row[i-1] = resultSet.getString(i);\n                }\n                tableData.updateTable(row);\n            }\n        }\n        catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p><code> PanelForm.java</code></p>\n<pre><code>import javax.swing.border.Border;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.util.jar.JarEntry;\n\npublic class PanelForm extends JPanel {\n    ....somebutton.....\n    ConnectionDB conn = new ConnectionDB();\n\n    ....some board....\n        buttonVisualizza.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                conn.get_data();\n            }\n        });\n    }\n}\n</code></pre>\n<p>This is my <code>HomePage.java </code></p>\n<pre><code>import javax.swing.text.AbstractDocument;\nimport java.awt.*;\n\npublic class HomePage extends JFrame {\n    private PanelForm panelForm;\n    private TableData tableData;\n    HomePage(){\n        super(&quot;Home&quot;);\n        setSize(800,500);\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\n        setLocation(200,200);\n        setLayout(new BorderLayout());\n\n        panelForm = new PanelForm();\n        tableData = new TableData();\n        add(panelForm, BorderLayout.LINE_START);\n        add(tableData, BorderLayout.CENTER);\n        setVisible(true);\n\n    }\n}\n</code></pre>\n<p>I have already tried to reload the model, and this command: <code> model.fireTableDataChanged();</code></p>\n"},{"tags":["java","azure","intune"],"comments":[{"score":0,"post_type":"question","creation_date":1700930936,"post_id":77547136,"comment_id":136713489,"body_markdown":"Hi @Burdarper you are trying to execute all uninstall commands at once using `cmd /c &quot;$Deinstallcommands&quot;` . However, you should iterate over each uninstall command separately.","link":"https://stackoverflow.com/questions/77547136/create-remediation-script-for-deinstalling-oracle-java-on-every-azure-managed-cl#comment136713489_77547136","body":"Hi @Burdarper you are trying to execute all uninstall commands at once using <code>cmd &#47;c &quot;$Deinstallcommands&quot;</code> . However, you should iterate over each uninstall command separately."},{"score":1,"post_type":"question","creation_date":1700990515,"post_id":77547136,"comment_id":136717641,"body_markdown":"Hello Suresh,\nthank you for your answer. @SureshChikkam\n\nI guess this is what ForEach is already doing:\n\nwrite-Output $Deinstallcommands is :\n\n\nMsiExec.exe /x{71324AE4-039E-4CA4-87B4-2F64180391F0}\nMsiExec.exe /x{4A03706F-666A-4037-7777-5F2748764D10}\n\n\nWrite-output $IdentifyingNumber after foreach only shows the first entry so this is already correct in my opinion:\n\nIf I copy&amp;paste the $Deinstallcommands output manually in CMD is works and asks me whether I want to deinstall.","link":"https://stackoverflow.com/questions/77547136/create-remediation-script-for-deinstalling-oracle-java-on-every-azure-managed-cl#comment136717641_77547136","body":"Hello Suresh, thank you for your answer. @SureshChikkam  I guess this is what ForEach is already doing:  write-Output $Deinstallcommands is :   MsiExec.exe /x{71324AE4-039E-4CA4-87B4-2F64180391F0} MsiExec.exe /x{4A03706F-666A-4037-7777-5F2748764D10}   Write-output $IdentifyingNumber after foreach only shows the first entry so this is already correct in my opinion:  If I copy&amp;paste the $Deinstallcommands output manually in CMD is works and asks me whether I want to deinstall."},{"score":0,"post_type":"question","creation_date":1700990521,"post_id":77547136,"comment_id":136717643,"body_markdown":"If it is done through &amp;cmd /c via powershell like in my case it prompts me with wrong msiexec command spelling like described before.","link":"https://stackoverflow.com/questions/77547136/create-remediation-script-for-deinstalling-oracle-java-on-every-azure-managed-cl#comment136717643_77547136","body":"If it is done through &amp;cmd /c via powershell like in my case it prompts me with wrong msiexec command spelling like described before."},{"score":0,"post_type":"question","creation_date":1700991714,"post_id":77547136,"comment_id":136717742,"body_markdown":"Use this cmdlet `Start-Process` to execute the `msiexec.exe` command with the appropriate arguments.\n\n`Start-Process -FilePath &quot;$env:SystemRoot\\system32\\msiexec.exe&quot; -ArgumentList &quot;/x $IdentifyingNumber /quiet&quot; -Wait -PassThru`","link":"https://stackoverflow.com/questions/77547136/create-remediation-script-for-deinstalling-oracle-java-on-every-azure-managed-cl#comment136717742_77547136","body":"Use this cmdlet <code>Start-Process</code> to execute the <code>msiexec.exe</code> command with the appropriate arguments.  <code>Start-Process -FilePath &quot;$env:SystemRoot\\system32\\msiexec.exe&quot; -ArgumentList &quot;&#47;x $IdentifyingNumber &#47;quiet&quot; -Wait -PassThru</code>"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701066567,"post_id":77554428,"comment_id":136724251,"body_markdown":"Thanks for your efforts.\nWas jsut trying your prevous suggestions, but instead of prompting for wrong msiexec parameters like before it just listed the following and did nothing else:","link":"https://stackoverflow.com/questions/77547136/create-remediation-script-for-deinstalling-oracle-java-on-every-azure-managed-cl/77554428#comment136724251_77554428","body":"Thanks for your efforts. Was jsut trying your prevous suggestions, but instead of prompting for wrong msiexec parameters like before it just listed the following and did nothing else:"},{"score":0,"post_type":"answer","creation_date":1701066589,"post_id":77554428,"comment_id":136724255,"body_markdown":"Handles  NPM(K)    PM(K)      WS(K)     CPU(s)     Id  SI ProcessName                                                                                                                \n-------  ------    -----      -----     ------     --  -- -----------                                                                                                                \n      0       2      432       1632       0,00  33300   1 msiexec                                                                 \n      0       2      428       1632       0,02  25396   1 msiexec","link":"https://stackoverflow.com/questions/77547136/create-remediation-script-for-deinstalling-oracle-java-on-every-azure-managed-cl/77554428#comment136724255_77554428","body":"Handles  NPM(K)    PM(K)      WS(K)     CPU(s)     Id  SI ProcessName                                                                                                                 -------  ------    -----      -----     ------     --  -- -----------                                                                                                                       0       2      432       1632       0,00  33300   1 msiexec                                                                        0       2      428       1632       0,02  25396   1 msiexec"},{"score":0,"post_type":"answer","creation_date":1701067641,"post_id":77554428,"comment_id":136724352,"body_markdown":"Testing your last suggestion now.\n\nTwo times a cmd window popped up and immediately vanished:\n\n\nOutput: \n&#39;\nRunning: MsiExec.exe /x @{IdentifyingNumber={71324AE4-039E-4CA4-87B4-2F64180391F0}} /qn \nRunning: MsiExec.exe /x @{IdentifyingNumber={4A03706F-666A-4037-7777-5F2748764D10}} /qn \nOracle Java uninstallation complete\n&#39;\n\n\nBut oracle Java is still installed ( PS is running in adm mode )","link":"https://stackoverflow.com/questions/77547136/create-remediation-script-for-deinstalling-oracle-java-on-every-azure-managed-cl/77554428#comment136724352_77554428","body":"Testing your last suggestion now.  Two times a cmd window popped up and immediately vanished:   Output:  &#39; Running: MsiExec.exe /x @{IdentifyingNumber={71324AE4-039E-4CA4-87B4-2F64180391F0}} /qn  Running: MsiExec.exe /x @{IdentifyingNumber={4A03706F-666A-4037-7777-5F2748764D10}} /qn  Oracle Java uninstallation complete &#39;   But oracle Java is still installed ( PS is running in adm mode )"},{"score":0,"post_type":"answer","creation_date":1701067736,"post_id":77554428,"comment_id":136724363,"body_markdown":"sry I was trying to edit the textblock in a more readeable manner, but it doesn&#180;t let me","link":"https://stackoverflow.com/questions/77547136/create-remediation-script-for-deinstalling-oracle-java-on-every-azure-managed-cl/77554428#comment136724363_77554428","body":"sry I was trying to edit the textblock in a more readeable manner, but it doesn&#180;t let me"}],"comment_count":4,"score":0,"last_activity_date":1701056793,"creation_date":1701056793,"answer_id":77554428,"question_id":77547136,"body_markdown":"&gt;`ForEach($IdentifyingNumber in $Deinstallcommands) {&amp; cmd /c &quot;$Deinstallcommands&quot;}`\r\n\r\n- Actually, the loop in the remediation script seems to be incorrect, and you are using the entire array of `IdentifyingNumber` for each iteration.\r\n\r\n```powershell\r\n# Detection\r\n$MSICode = Get-WmiObject Win32_Product -Filter &quot;name like &#39;Java%&#39; AND vendor like &#39;Oracle%&#39;&quot; | Select-Object -ExpandProperty IdentifyingNumber\r\n\r\nif ($MSICode -eq $null) {\r\n    Write-Host &quot;Oracle Java installations not found&quot;\r\n    Exit 0\r\n} else {\r\n    Write-Host &quot;Oracle Java installations found&quot;\r\n    Exit 1\r\n}\r\n\r\n# Remediation\r\nforeach ($IdentifyingNumber in $MSICode) {\r\n    $DeinstallCommand = &quot;MsiExec.exe /x $IdentifyingNumber /qn&quot;\r\n    Write-Host &quot;Running: $DeinstallCommand&quot;\r\n    Start-Process -FilePath &quot;cmd.exe&quot; -ArgumentList &quot;/c $DeinstallCommand&quot; -Wait\r\n}\r\n\r\nWrite-Host &quot;Oracle Java uninstallation complete&quot;\r\nExit 0\r\n```\r\n\r\n- `Get-WmiObject`, which is a more modern and PowerShell-native way of retrieving WMI information and `Select-Object -ExpandProperty IdentifyingNumber` to extract the IdentifyingNumber from the WMI query resu\tlt.\r\n\r\n- I modified the loop to use each individual `IdentifyingNumber` in the uninstallation command and added `/qn` to the `MsiExec.exe` command for silent uninstallation (no user interface).\r\n\r\n![enter image description here](https://i.imgur.com/9Fd2dr4.png)","link":"https://stackoverflow.com/questions/77547136/create-remediation-script-for-deinstalling-oracle-java-on-every-azure-managed-cl/77554428#77554428","title":"Create remediation script for deinstalling oracle java on every azure-managed client","body":"<blockquote>\n<p><code>ForEach($IdentifyingNumber in $Deinstallcommands) {&amp; cmd /c &quot;$Deinstallcommands&quot;}</code></p>\n</blockquote>\n<ul>\n<li>Actually, the loop in the remediation script seems to be incorrect, and you are using the entire array of <code>IdentifyingNumber</code> for each iteration.</li>\n</ul>\n<pre><code># Detection\n$MSICode = Get-WmiObject Win32_Product -Filter &quot;name like 'Java%' AND vendor like 'Oracle%'&quot; | Select-Object -ExpandProperty IdentifyingNumber\n\nif ($MSICode -eq $null) {\n    Write-Host &quot;Oracle Java installations not found&quot;\n    Exit 0\n} else {\n    Write-Host &quot;Oracle Java installations found&quot;\n    Exit 1\n}\n\n# Remediation\nforeach ($IdentifyingNumber in $MSICode) {\n    $DeinstallCommand = &quot;MsiExec.exe /x $IdentifyingNumber /qn&quot;\n    Write-Host &quot;Running: $DeinstallCommand&quot;\n    Start-Process -FilePath &quot;cmd.exe&quot; -ArgumentList &quot;/c $DeinstallCommand&quot; -Wait\n}\n\nWrite-Host &quot;Oracle Java uninstallation complete&quot;\nExit 0\n</code></pre>\n<ul>\n<li><p><code>Get-WmiObject</code>, which is a more modern and PowerShell-native way of retrieving WMI information and <code>Select-Object -ExpandProperty IdentifyingNumber</code> to extract the IdentifyingNumber from the WMI query resu    lt.</p>\n</li>\n<li><p>I modified the loop to use each individual <code>IdentifyingNumber</code> in the uninstallation command and added <code>/qn</code> to the <code>MsiExec.exe</code> command for silent uninstallation (no user interface).</p>\n</li>\n</ul>\n<p><img src=\"https://i.imgur.com/9Fd2dr4.png\" alt=\"enter image description here\" /></p>\n"}],"comment_count":4,"is_answered":false,"view_count":86,"answer_count":1,"score":1,"last_activity_date":1701056793,"creation_date":1700900481,"last_edit_date":1701021220,"question_id":77547136,"body_markdown":"while silently reading here for half an eternity, now comes the point where I&#180;d like to ask a question.\r\n\r\nWe have been carved out from a big company lately and one of the endless things we have to solve is caring for sw-licensing.\r\n\r\nHowever in this process it turned out that oracle is not a software company having at least a slight interest in senseful co-existing but a plain mafia-gang. \r\nSo after a few meetings with those self-righteous mobsters I just quitted and promised to wipe and extinct their SW from each server/client in order to not step in their criminal-licensing-traps.\r\nWhile we already got rid of all oracleDBs, oracle java is still a problem also because employees keep installing it here and there not caring for consequences. (worldwide ~7500clients azure-managed).\r\n\r\nSo I want to come up with an remediation script looking for oracle java periodicly and deleting it.\r\n\r\nWhile detection is working I cannot figure out why remediation is not working; So after two days of struggling around (I&#180;m quite new to remediation methods and not a pro in powershell ) I&#180;d like to know how you would do it:\r\n\r\n\r\nDetection (works)\r\n\r\n```\r\n$MSICode = gwmi Win32_Product -filter &quot;name like &#39;Java%&#39; AND vendor like &#39;Oracle%&#39;&quot; | select IdentifyingNumber\r\n\r\nif ($MSICode -eq $null){\r\n    Write-Host &quot;oracle java installations not found&quot;\r\n    Exit 0\r\n}else{\r\n    Write-Host &quot;oracle java installations found&quot;\r\n    Exit 1\r\n}\r\n```\r\n\r\n\r\nRemediation (Always prompts me with msiexec error asking for the right syntax while &quot;write-Output $Deinstallcommands&quot; shows the right values\r\n\r\n```\r\n$MSICode = gwmi Win32_Product -filter &quot;name like &#39;Java%&#39; AND vendor like &#39;Oracle%&#39;&quot; | select IdentifyingNumber\r\n\r\n# Variable &quot;Deinstallcommands&quot; bereinigt die MSICode Variable ( + silent deinstall ) sodass sie wie cmd ausgef&#252;hrt werden kann.\r\n\r\n$Deinstallcommands = $MSICode.IdentifyingNumber -replace &quot;{&quot;,&quot;MsiExec.exe /x{&quot;\r\n\r\n# Alle Deinstallcommands ausf&#252;hren\r\n \r\n#write-Output $Deinstallcommands\r\n\r\nForEach($IdentifyingNumber in $Deinstallcommands) {&amp; cmd /c &quot;$Deinstallcommands&quot;}\r\n```\r\n\r\n\r\nLooking forward to your replies\r\n\r\n","link":"https://stackoverflow.com/questions/77547136/create-remediation-script-for-deinstalling-oracle-java-on-every-azure-managed-cl","title":"Create remediation script for deinstalling oracle java on every azure-managed client","body":"<p>while silently reading here for half an eternity, now comes the point where I´d like to ask a question.</p>\n<p>We have been carved out from a big company lately and one of the endless things we have to solve is caring for sw-licensing.</p>\n<p>However in this process it turned out that oracle is not a software company having at least a slight interest in senseful co-existing but a plain mafia-gang.\nSo after a few meetings with those self-righteous mobsters I just quitted and promised to wipe and extinct their SW from each server/client in order to not step in their criminal-licensing-traps.\nWhile we already got rid of all oracleDBs, oracle java is still a problem also because employees keep installing it here and there not caring for consequences. (worldwide ~7500clients azure-managed).</p>\n<p>So I want to come up with an remediation script looking for oracle java periodicly and deleting it.</p>\n<p>While detection is working I cannot figure out why remediation is not working; So after two days of struggling around (I´m quite new to remediation methods and not a pro in powershell ) I´d like to know how you would do it:</p>\n<p>Detection (works)</p>\n<pre><code>$MSICode = gwmi Win32_Product -filter &quot;name like 'Java%' AND vendor like 'Oracle%'&quot; | select IdentifyingNumber\n\nif ($MSICode -eq $null){\n    Write-Host &quot;oracle java installations not found&quot;\n    Exit 0\n}else{\n    Write-Host &quot;oracle java installations found&quot;\n    Exit 1\n}\n</code></pre>\n<p>Remediation (Always prompts me with msiexec error asking for the right syntax while &quot;write-Output $Deinstallcommands&quot; shows the right values</p>\n<pre><code>$MSICode = gwmi Win32_Product -filter &quot;name like 'Java%' AND vendor like 'Oracle%'&quot; | select IdentifyingNumber\n\n# Variable &quot;Deinstallcommands&quot; bereinigt die MSICode Variable ( + silent deinstall ) sodass sie wie cmd ausgeführt werden kann.\n\n$Deinstallcommands = $MSICode.IdentifyingNumber -replace &quot;{&quot;,&quot;MsiExec.exe /x{&quot;\n\n# Alle Deinstallcommands ausführen\n \n#write-Output $Deinstallcommands\n\nForEach($IdentifyingNumber in $Deinstallcommands) {&amp; cmd /c &quot;$Deinstallcommands&quot;}\n</code></pre>\n<p>Looking forward to your replies</p>\n"},{"tags":["java","ajax"],"comments":[{"score":1,"post_type":"question","creation_date":1701053930,"post_id":77554295,"comment_id":136723360,"body_markdown":"how about opening the url using `window.open` while the server giving `application/octet-stream` as mime type?","link":"https://stackoverflow.com/questions/77554295/ajax-call-back-to-download-file-by-browser#comment136723360_77554295","body":"how about opening the url using <code>window.open</code> while the server giving <code>application&#47;octet-stream</code> as mime type?"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701055519,"post_id":77554305,"comment_id":136723459,"body_markdown":"hi Adrid - That&#39;s worked. thank you so much. Follow up question, if there is an error in Java code while writing to file, I would like return error string. Since the method returns ResponseEntity&lt;InputStreamResource&gt;, how do I handle sending error message from java to ajax error: section. I would like to display the message to user.","link":"https://stackoverflow.com/questions/77554295/ajax-call-back-to-download-file-by-browser/77554305#comment136723459_77554305","body":"hi Adrid - That&#39;s worked. thank you so much. Follow up question, if there is an error in Java code while writing to file, I would like return error string. Since the method returns ResponseEntity&lt;InputStreamResource&gt;, how do I handle sending error message from java to ajax error: section. I would like to display the message to user."},{"score":0,"post_type":"answer","creation_date":1701055730,"post_id":77554305,"comment_id":136723470,"body_markdown":"My answer is too long to add as a comment. Why don&#39;t you make a new question? And could you accept my answer if it works correctly?","link":"https://stackoverflow.com/questions/77554295/ajax-call-back-to-download-file-by-browser/77554305#comment136723470_77554305","body":"My answer is too long to add as a comment. Why don&#39;t you make a new question? And could you accept my answer if it works correctly?"}],"comment_count":2,"score":1,"last_activity_date":1701053895,"creation_date":1701053895,"answer_id":77554305,"question_id":77554295,"body_markdown":"To trigger an automatic download of a file in response to an AJAX call, you can dynamically create a link with the download attribute and trigger a click on that link. Here&#39;s how you can modify your success callback to achieve this:\r\n\r\n    $(&quot;#btn_load&quot;).click(function (e) {\r\n      event.preventDefault();\r\n      form = $(&quot;#bookList&quot;);\r\n      var post_url = form.attr(&quot;action&quot;);\r\n      let form_data = form.serialize();\r\n\r\n      $.ajax({\r\n        url: post_url,\r\n        type: &quot;POST&quot;,\r\n        data: form_data,\r\n        success: function (data, textStatus, jqX) {\r\n          // Create a Blob from the data\r\n          var blob = new Blob([data], { type: &quot;text/plain&quot; });\r\n\r\n          // Create a link element\r\n          var link = document.createElement(&quot;a&quot;);\r\n\r\n          // Set the download attribute and create a URL for the file\r\n          link.download = &quot;your_filename.txt&quot;;\r\n          link.href = window.URL.createObjectURL(blob);\r\n\r\n          // Append the link to the document\r\n          document.body.appendChild(link);\r\n\r\n          // Trigger a click on the link to initiate the download\r\n          link.click();\r\n\r\n          // Remove the link from the document\r\n          document.body.removeChild(link);\r\n        },\r\n        error: function (XMLHttpRequest, textStatus, errorThrown) {\r\n          // Handle errors\r\n        },\r\n      });\r\n    });\r\n\r\n\r\nThis code creates a `Blob` from the data received in the AJAX response, creates a link element, sets the `download` attribute and a URL for the file, appends the link to the document, triggers a click on the link, and finally removes the link from the document.\r\n\r\nMake sure to replace `&#39;your_filename.txt&#39;` with the desired filename for the downloaded file.","link":"https://stackoverflow.com/questions/77554295/ajax-call-back-to-download-file-by-browser/77554305#77554305","title":"AJAX call back to download file by browser","body":"<p>To trigger an automatic download of a file in response to an AJAX call, you can dynamically create a link with the download attribute and trigger a click on that link. Here's how you can modify your success callback to achieve this:</p>\n<pre><code>$(&quot;#btn_load&quot;).click(function (e) {\n  event.preventDefault();\n  form = $(&quot;#bookList&quot;);\n  var post_url = form.attr(&quot;action&quot;);\n  let form_data = form.serialize();\n\n  $.ajax({\n    url: post_url,\n    type: &quot;POST&quot;,\n    data: form_data,\n    success: function (data, textStatus, jqX) {\n      // Create a Blob from the data\n      var blob = new Blob([data], { type: &quot;text/plain&quot; });\n\n      // Create a link element\n      var link = document.createElement(&quot;a&quot;);\n\n      // Set the download attribute and create a URL for the file\n      link.download = &quot;your_filename.txt&quot;;\n      link.href = window.URL.createObjectURL(blob);\n\n      // Append the link to the document\n      document.body.appendChild(link);\n\n      // Trigger a click on the link to initiate the download\n      link.click();\n\n      // Remove the link from the document\n      document.body.removeChild(link);\n    },\n    error: function (XMLHttpRequest, textStatus, errorThrown) {\n      // Handle errors\n    },\n  });\n});\n</code></pre>\n<p>This code creates a <code>Blob</code> from the data received in the AJAX response, creates a link element, sets the <code>download</code> attribute and a URL for the file, appends the link to the document, triggers a click on the link, and finally removes the link from the document.</p>\n<p>Make sure to replace <code>'your_filename.txt'</code> with the desired filename for the downloaded file.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":41,"answer_count":1,"score":0,"last_activity_date":1701054618,"creation_date":1701053635,"last_edit_date":1701054618,"question_id":77554295,"body_markdown":"When user clicks the button, there is ajax calls to server. The server returns a text file. \r\nI would like browser to download the file automatically.\r\n\r\n    .jsp button\r\n    &lt;button type=&quot;submit&quot; id=&quot;btn_load&quot; value=&quot;Search&quot; class=&quot;btn btn-primary&quot;&gt;Generate I-618&lt;/button&gt;\r\n    \r\n    .js file - when button is click \r\n    $(&quot;#btn_load&quot;).click(function(e) {\r\n    \t \t\tevent.preventDefault(); \r\n                form = $(&#39;#bookList&#39;);\r\n                var post_url = form.attr(&quot;action&quot;); \r\n                let form_data = form.serialize();  \r\n                 $.ajax({\r\n                    url: post_url,\r\n                    type: &quot;POST&quot;,\r\n                    data: form_data,\r\n                    success: function(data, textStatus, jqX) {\r\n                    \t// **data is a .txt file. HOW TO TELL BROWSER TO DOWNLOAD THE .TXT FILE ?**\r\n                        console.log(data); //print the data from the file\r\n                    },\r\n                    error: function(XMLHttpRequest, textStatus,  errorThrown) {\r\n                    }\r\n                });\r\n    \t});\r\n    });\r\n\r\njava: function returns a .text file that would like to download from browser when user click the button\r\n\r\n\t@RequestMapping(value = &quot;/book.htm&quot;)\r\n\tpublic ResponseEntity&lt;InputStreamResource&gt; bookselection(\r\n\t\t\t@ModelAttribute(&quot;books&quot;) Books book, Model model,\r\n\t\t\tHttpServletRequest request, BindingResult result) {\r\n\t\tList&lt;InputStreamResource&gt; listStream = new ArrayList&lt;InputStreamResource&gt;();\r\n\t\tString fileName = &quot;book.txt&quot;\r\n\t\tif (CollectionUtils.isNotEmpty(bookList)) {\r\n\t\t\tFile file = File.createTempFile(fileName, &quot;.txt&quot;);\r\n\t\t\tFileWriter interfaceFileWriter = new FileWriter(file);\r\n\t\t\tBufferedWriter interfaceBufferedWriter = new BufferedWriter(interfaceFileWriter);\r\n\t\t\t//write to file\r\n\t\t\tfor (Book list : bookList) {\r\n\t\t\tinterfaceBufferedWriter.write(list.getDelimitedRecord(delimiter, nullValue));\r\n\t\t\t}\r\n\t\t\tinterfaceBufferedWriter.close();\r\n\t\t\tHttpHeaders headers = new HttpHeaders();\r\n\t\t\theaders.setCacheControl(&quot;must-revalidate, post-check=0, pre-check=0&quot;);\r\n\t\t\theaders.setContentDispositionFormData(fileName + &quot;.txt&quot;, fileName + &quot;.txt&quot;);\r\n\r\n\t\t\tInputStreamResource resource = new InputStreamResource(new FileInputStream(file));\r\n\t\t\tif (file != null &amp;&amp; file.exists()) {\r\n\t\t\t\tlistStream.add(resource);\r\n\t\t\t\treturn ResponseEntity.ok().contentType(MediaType.TEXT_PLAIN).headers(headers).body(resource);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\r\nHow to tell browser to download the file automatically which is ajax response (data)?\r\n","link":"https://stackoverflow.com/questions/77554295/ajax-call-back-to-download-file-by-browser","title":"AJAX call back to download file by browser","body":"<p>When user clicks the button, there is ajax calls to server. The server returns a text file.\nI would like browser to download the file automatically.</p>\n<pre><code>.jsp button\n&lt;button type=&quot;submit&quot; id=&quot;btn_load&quot; value=&quot;Search&quot; class=&quot;btn btn-primary&quot;&gt;Generate I-618&lt;/button&gt;\n\n.js file - when button is click \n$(&quot;#btn_load&quot;).click(function(e) {\n            event.preventDefault(); \n            form = $('#bookList');\n            var post_url = form.attr(&quot;action&quot;); \n            let form_data = form.serialize();  \n             $.ajax({\n                url: post_url,\n                type: &quot;POST&quot;,\n                data: form_data,\n                success: function(data, textStatus, jqX) {\n                    // **data is a .txt file. HOW TO TELL BROWSER TO DOWNLOAD THE .TXT FILE ?**\n                    console.log(data); //print the data from the file\n                },\n                error: function(XMLHttpRequest, textStatus,  errorThrown) {\n                }\n            });\n    });\n});\n</code></pre>\n<p>java: function returns a .text file that would like to download from browser when user click the button</p>\n<pre><code>@RequestMapping(value = &quot;/book.htm&quot;)\npublic ResponseEntity&lt;InputStreamResource&gt; bookselection(\n        @ModelAttribute(&quot;books&quot;) Books book, Model model,\n        HttpServletRequest request, BindingResult result) {\n    List&lt;InputStreamResource&gt; listStream = new ArrayList&lt;InputStreamResource&gt;();\n    String fileName = &quot;book.txt&quot;\n    if (CollectionUtils.isNotEmpty(bookList)) {\n        File file = File.createTempFile(fileName, &quot;.txt&quot;);\n        FileWriter interfaceFileWriter = new FileWriter(file);\n        BufferedWriter interfaceBufferedWriter = new BufferedWriter(interfaceFileWriter);\n        //write to file\n        for (Book list : bookList) {\n        interfaceBufferedWriter.write(list.getDelimitedRecord(delimiter, nullValue));\n        }\n        interfaceBufferedWriter.close();\n        HttpHeaders headers = new HttpHeaders();\n        headers.setCacheControl(&quot;must-revalidate, post-check=0, pre-check=0&quot;);\n        headers.setContentDispositionFormData(fileName + &quot;.txt&quot;, fileName + &quot;.txt&quot;);\n\n        InputStreamResource resource = new InputStreamResource(new FileInputStream(file));\n        if (file != null &amp;&amp; file.exists()) {\n            listStream.add(resource);\n            return ResponseEntity.ok().contentType(MediaType.TEXT_PLAIN).headers(headers).body(resource);\n        }\n    }\n    return null;\n}\n</code></pre>\n<p>How to tell browser to download the file automatically which is ajax response (data)?</p>\n"},{"tags":["java","list","arraylist"],"comments":[{"score":0,"post_type":"question","creation_date":1701096964,"post_id":77554313,"comment_id":136729302,"body_markdown":"Have the answers to the question, of which this was judged to be a duplicate, solved the problem? If not, can you, please, edit the question to explain why they didn&#39;t help?","link":"https://stackoverflow.com/questions/77554313/get-sublist-of-java-list-without-creating-a-new-list#comment136729302_77554313","body":"Have the answers to the question, of which this was judged to be a duplicate, solved the problem? If not, can you, please, edit the question to explain why they didn&#39;t help?"}],"comment_count":1,"is_answered":false,"view_count":64,"answer_count":0,"score":-1,"last_activity_date":1701054437,"creation_date":1701054117,"question_id":77554313,"body_markdown":"I have a list in Java, and I need to get a sublist of it. I am trying to avoid creating a new list and populating that, is it possible to create a list that is at the same point in memory, just shorter?\r\n```java\r\ndouble[] list1 = {1, 2, 3, 4};\r\n\r\n// later:\r\ndouble[] list2 = list1[0:2] //?\r\n````\r\nIn the example above, I want `list2` to be a sublist of 0 to 2 (`{1, 2}`).\r\nIs this possible? Or should I switch to using ArrayLists `sublist` method? I am trying to avoid this.\r\n\r\nI am trying to avoid ArrayLists, because I am using a library that requires an argument to be a `double[]` list.","link":"https://stackoverflow.com/questions/77554313/get-sublist-of-java-list-without-creating-a-new-list","title":"Get Sublist of Java List, Without Creating a New List?","body":"<p>I have a list in Java, and I need to get a sublist of it. I am trying to avoid creating a new list and populating that, is it possible to create a list that is at the same point in memory, just shorter?</p>\n<pre class=\"lang-java prettyprint-override\"><code>double[] list1 = {1, 2, 3, 4};\n\n// later:\ndouble[] list2 = list1[0:2] //?\n</code></pre>\n<p>In the example above, I want <code>list2</code> to be a sublist of 0 to 2 (<code>{1, 2}</code>).\nIs this possible? Or should I switch to using ArrayLists <code>sublist</code> method? I am trying to avoid this.</p>\n<p>I am trying to avoid ArrayLists, because I am using a library that requires an argument to be a <code>double[]</code> list.</p>\n"},{"tags":["java","list","arraylist"],"comments":[{"score":0,"post_type":"question","creation_date":1701054483,"post_id":77554315,"comment_id":136723397,"body_markdown":"Java is not Python, so that&#39;s not a list. It&#39;s an array. If you don&#39;t want to use (`Array`)`List`s, and you don&#39;t want to create a new array and populate that, I&#39;m afraid you&#39;re out of options.","link":"https://stackoverflow.com/questions/77554315/get-sublist-of-java-list-without-creating-a-new-list#comment136723397_77554315","body":"Java is not Python, so that&#39;s not a list. It&#39;s an array. If you don&#39;t want to use (<code>Array</code>)<code>List</code>s, and you don&#39;t want to create a new array and populate that, I&#39;m afraid you&#39;re out of options."},{"score":0,"post_type":"question","creation_date":1701057066,"post_id":77554315,"comment_id":136723554,"body_markdown":"No, but you could implement one for read-only.  But if you want read and write but share structures, you will want to look at https://en.wikipedia.org/wiki/Persistent_data_structure","link":"https://stackoverflow.com/questions/77554315/get-sublist-of-java-list-without-creating-a-new-list#comment136723554_77554315","body":"No, but you could implement one for read-only.  But if you want read and write but share structures, you will want to look at <a href=\"https://en.wikipedia.org/wiki/Persistent_data_structure\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Persistent_data_structure</a>"},{"score":0,"post_type":"question","creation_date":1701096322,"post_id":77554315,"comment_id":136729170,"body_markdown":"I suggest comments be at https://stackoverflow.com/questions/77554313/get-sublist-of-java-list-without-creating-a-new-list , which was closed for being a duplicate of an already existing question with answers.  (This was closed because it is a duplicate of that question.)","link":"https://stackoverflow.com/questions/77554315/get-sublist-of-java-list-without-creating-a-new-list#comment136729170_77554315","body":"I suggest comments be at <a href=\"https://stackoverflow.com/questions/77554313/get-sublist-of-java-list-without-creating-a-new-list\" title=\"get sublist of java list without creating a new list\">stackoverflow.com/questions/77554313/&hellip;</a> , which was closed for being a duplicate of an already existing question with answers.  (This was closed because it is a duplicate of that question.)"}],"comment_count":3,"is_answered":false,"view_count":35,"answer_count":0,"score":0,"last_activity_date":1701054124,"creation_date":1701054124,"question_id":77554315,"body_markdown":"I have a list in Java, and I need to get a sublist of it. I am trying to avoid creating a new list and populating that, is it possible to create a list that is at the same point in memory, just shorter?\r\n```java\r\ndouble[] list1 = {1, 2, 3, 4};\r\n\r\n// later:\r\ndouble[] list2 = list1[0:2] //?\r\n````\r\nIn the example above, I want `list2` to be a sublist of 0 to 2 (`{1, 2}`).\r\nIs this possible? Or should I switch to using ArrayLists `sublist` method? I am trying to avoid this.\r\n\r\nI am trying to avoid ArrayLists, because I am using a library that requires an argument to be a `double[]` list.","link":"https://stackoverflow.com/questions/77554315/get-sublist-of-java-list-without-creating-a-new-list","title":"Get Sublist of Java List, Without Creating a New List?","body":"<p>I have a list in Java, and I need to get a sublist of it. I am trying to avoid creating a new list and populating that, is it possible to create a list that is at the same point in memory, just shorter?</p>\n<pre class=\"lang-java prettyprint-override\"><code>double[] list1 = {1, 2, 3, 4};\n\n// later:\ndouble[] list2 = list1[0:2] //?\n</code></pre>\n<p>In the example above, I want <code>list2</code> to be a sublist of 0 to 2 (<code>{1, 2}</code>).\nIs this possible? Or should I switch to using ArrayLists <code>sublist</code> method? I am trying to avoid this.</p>\n<p>I am trying to avoid ArrayLists, because I am using a library that requires an argument to be a <code>double[]</code> list.</p>\n"},{"tags":["java","list","arraylist"],"comments":[{"score":0,"post_type":"question","creation_date":1701096349,"post_id":77554312,"comment_id":136729176,"body_markdown":"I suggest comments be at https://stackoverflow.com/questions/77554313/get-sublist-of-java-list-without-creating-a-new-list , which was closed for being a duplicate of an already existing question with answers.  (This was closed because it is a duplicate of that question.)","link":"https://stackoverflow.com/questions/77554312/get-sublist-of-java-list-without-creating-a-new-list#comment136729176_77554312","body":"I suggest comments be at <a href=\"https://stackoverflow.com/questions/77554313/get-sublist-of-java-list-without-creating-a-new-list\" title=\"get sublist of java list without creating a new list\">stackoverflow.com/questions/77554313/&hellip;</a> , which was closed for being a duplicate of an already existing question with answers.  (This was closed because it is a duplicate of that question.)"}],"comment_count":1,"is_answered":false,"view_count":20,"answer_count":0,"score":-1,"last_activity_date":1701054109,"creation_date":1701054109,"question_id":77554312,"body_markdown":"I have a list in Java, and I need to get a sublist of it. I am trying to avoid creating a new list and populating that, is it possible to create a list that is at the same point in memory, just shorter?\r\n```java\r\ndouble[] list1 = {1, 2, 3, 4};\r\n\r\n// later:\r\ndouble[] list2 = list1[0:2] //?\r\n````\r\nIn the example above, I want `list2` to be a sublist of 0 to 2 (`{1, 2}`).\r\nIs this possible? Or should I switch to using ArrayLists `sublist` method? I am trying to avoid this.\r\n\r\nI am trying to avoid ArrayLists, because I am using a library that requires an argument to be a `double[]` list.","link":"https://stackoverflow.com/questions/77554312/get-sublist-of-java-list-without-creating-a-new-list","title":"Get Sublist of Java List, Without Creating a New List?","body":"<p>I have a list in Java, and I need to get a sublist of it. I am trying to avoid creating a new list and populating that, is it possible to create a list that is at the same point in memory, just shorter?</p>\n<pre class=\"lang-java prettyprint-override\"><code>double[] list1 = {1, 2, 3, 4};\n\n// later:\ndouble[] list2 = list1[0:2] //?\n</code></pre>\n<p>In the example above, I want <code>list2</code> to be a sublist of 0 to 2 (<code>{1, 2}</code>).\nIs this possible? Or should I switch to using ArrayLists <code>sublist</code> method? I am trying to avoid this.</p>\n<p>I am trying to avoid ArrayLists, because I am using a library that requires an argument to be a <code>double[]</code> list.</p>\n"},{"tags":["java","pageobjects"],"comments":[{"score":0,"post_type":"question","creation_date":1701045563,"post_id":77553866,"comment_id":136722787,"body_markdown":"`data1` and `data2` are local variables inside the `testData` method.  `TestData.data1`  refers to a static member of class `TestData`.  These are two completely different things.","link":"https://stackoverflow.com/questions/77553866/how-to-use-test-data-from-excel-file-with-page-object-model-in-java-appium#comment136722787_77553866","body":"<code>data1</code> and <code>data2</code> are local variables inside the <code>testData</code> method.  <code>TestData.data1</code>  refers to a static member of class <code>TestData</code>.  These are two completely different things."}],"comment_count":1,"is_answered":false,"view_count":27,"answer_count":0,"score":0,"last_activity_date":1701053630,"creation_date":1701041131,"question_id":77553866,"body_markdown":"I wanted to use testdata from excel file with page object model here is the code:\r\n`TestData.java`\r\n\r\n```\r\npublic class TestData {\r\n\r\n\tpublic void testData() throws Exception {\r\n\t\t\r\n        String filePath = &quot;C:\\\\eclipes\\\\testdata\\\\testdata.xlsx&quot;;\r\n        FileInputStream fis = new FileInputStream(filePath);\r\n        XSSFWorkbook workbook = new XSSFWorkbook(fis);\r\n        \r\n        //get cell data\r\n        XSSFCell data1 = workbook.getSheetAt(0).getRow(1).getCell(0); //A2  \r\n        XSSFCell data2 = workbook.getSheetAt(0).getRow(2).getCell(0); //B2\r\n\r\n\r\n```\r\n\r\nin my `Test.java` file\r\n\r\n```\r\npublic class TestSample extends BaseClass {\r\n\t\r\n\t@Test\r\n    public void tc_01() throws Exception {\r\n    \r\n    String excelData1 = TestData.data1;\r\n    }\r\n\r\n```\r\n\r\nAm I missing something?   \r\nTestData class does not return the data1 value.\r\nor should I need to initialize data1 and 2 in TestData class?","link":"https://stackoverflow.com/questions/77553866/how-to-use-test-data-from-excel-file-with-page-object-model-in-java-appium","title":"how to use test data from excel file with page object model in java appium","body":"<p>I wanted to use testdata from excel file with page object model here is the code:\n<code>TestData.java</code></p>\n<pre><code>public class TestData {\n\n    public void testData() throws Exception {\n        \n        String filePath = &quot;C:\\\\eclipes\\\\testdata\\\\testdata.xlsx&quot;;\n        FileInputStream fis = new FileInputStream(filePath);\n        XSSFWorkbook workbook = new XSSFWorkbook(fis);\n        \n        //get cell data\n        XSSFCell data1 = workbook.getSheetAt(0).getRow(1).getCell(0); //A2  \n        XSSFCell data2 = workbook.getSheetAt(0).getRow(2).getCell(0); //B2\n\n\n</code></pre>\n<p>in my <code>Test.java</code> file</p>\n<pre><code>public class TestSample extends BaseClass {\n    \n    @Test\n    public void tc_01() throws Exception {\n    \n    String excelData1 = TestData.data1;\n    }\n\n</code></pre>\n<p>Am I missing something?<br />\nTestData class does not return the data1 value.\nor should I need to initialize data1 and 2 in TestData class?</p>\n"},{"tags":["java","groovy"],"comments":[{"score":0,"post_type":"question","creation_date":1701053768,"post_id":77554271,"comment_id":136723357,"body_markdown":"&quot;I can use the included annotations to limit the runtime of the script&quot; to which annotations are your referring? Provide the example in your code. Note that the page for the [groovy-sandbox source](https://github.com/jenkinsci/groovy-sandbox) says it is deprecated, it is insecure and should not be used. Not sure how are you using because your code misses the imports. Provide a https://stackoverflow.com/help/minimal-reproducible-example","link":"https://stackoverflow.com/questions/77554271/how-to-go-about-limiting-memory-usage-javas-groovy-executor#comment136723357_77554271","body":"&quot;I can use the included annotations to limit the runtime of the script&quot; to which annotations are your referring? Provide the example in your code. Note that the page for the <a href=\"https://github.com/jenkinsci/groovy-sandbox\" rel=\"nofollow noreferrer\">groovy-sandbox source</a> says it is deprecated, it is insecure and should not be used. Not sure how are you using because your code misses the imports. Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"},{"score":0,"post_type":"question","creation_date":1701062977,"post_id":77554271,"comment_id":136723906,"body_markdown":"I only use &#39;groovy-sandbox &#39; to do some code-level restrictions, such as restricting the file manipulation class &#39;java.io.File&#39; to irrelevant time restrictions.\nThe time restriction annotation I&#39;m talking about is reflected in this code &#39;config.addCompilationCustomizers(new ASTTransformationCustomizer(Collections.singletonMap(&quot;value&quot;, maxCpuTime), TimedInterrupt.class));&#39;, the sample code has.\nThe annotation is &#39;groovy.transform.TimedInterrupt&#39;.","link":"https://stackoverflow.com/questions/77554271/how-to-go-about-limiting-memory-usage-javas-groovy-executor#comment136723906_77554271","body":"I only use &#39;groovy-sandbox &#39; to do some code-level restrictions, such as restricting the file manipulation class &#39;java.io.File&#39; to irrelevant time restrictions. The time restriction annotation I&#39;m talking about is reflected in this code &#39;config.addCompilationCustomizers(new ASTTransformationCustomizer(Collections.singletonMap(&quot;value&quot;&zwnj;&#8203;, maxCpuTime), TimedInterrupt.class));&#39;, the sample code has. The annotation is &#39;groovy.transform.TimedInterrupt&#39;."},{"score":0,"post_type":"question","creation_date":1701079226,"post_id":77554271,"comment_id":136726096,"body_markdown":"Please add the details to the question.","link":"https://stackoverflow.com/questions/77554271/how-to-go-about-limiting-memory-usage-javas-groovy-executor#comment136726096_77554271","body":"Please add the details to the question."},{"score":0,"post_type":"question","creation_date":1701137382,"post_id":77554271,"comment_id":136735443,"body_markdown":"Here is my sample code &#39;public class GroovyTest {\n    public static void main(String[] args) throws Exception {   \n        String groovy = &quot; def call(int a,int b) { &quot; +\n                &quot;   return a + b &quot; +\n                &quot;}&quot;;\n \n        GroovyClassLoader loader = new GroovyClassLoader();\n        Class scriptClass = loader.parseClass(groovy);\n        GroovyObject scriptInstance = (GroovyObject)         scriptClass.newInstance();\n        result = scriptInstance.invokeMethod(&quot;call&quot;,new Object[] {1,2});\n        System.out.println(&quot;Groovy result=&quot; + result);\n    }\n}&#39;,","link":"https://stackoverflow.com/questions/77554271/how-to-go-about-limiting-memory-usage-javas-groovy-executor#comment136735443_77554271","body":"Here is my sample code &#39;public class GroovyTest {     public static void main(String[] args) throws Exception {            String groovy = &quot; def call(int a,int b) { &quot; +                 &quot;   return a + b &quot; +                 &quot;}&quot;;           GroovyClassLoader loader = new GroovyClassLoader();         Class scriptClass = loader.parseClass(groovy);         GroovyObject scriptInstance = (GroovyObject)         scriptClass.newInstance();         result = scriptInstance.invokeMethod(&quot;call&quot;,new Object[] {1,2});         System.out.println(&quot;Groovy result=&quot; + result);     } }&#39;,"},{"score":0,"post_type":"question","creation_date":1701137450,"post_id":77554271,"comment_id":136735450,"body_markdown":"Close the script if it uses too much memory while it is running.Calling methods may result in a high memory footprint due to the script code written","link":"https://stackoverflow.com/questions/77554271/how-to-go-about-limiting-memory-usage-javas-groovy-executor#comment136735450_77554271","body":"Close the script if it uses too much memory while it is running.Calling methods may result in a high memory footprint due to the script code written"}],"comment_count":5,"is_answered":false,"view_count":51,"answer_count":0,"score":0,"last_activity_date":1701052935,"creation_date":1701052935,"question_id":77554271,"body_markdown":"In using the Groovy executor for Java, I need to limit the script execution time and the memory size of the variables in the groovy objects.\r\nHere is my part code,The groovy object here is groovy.lang.GroovyObject\r\n\r\n```\r\n        final ImportCustomizer imports = new ImportCustomizer();\r\n        imports.addImports(concatArrays(DEFAULT_IMPORTS, importClasses));\r\n        imports.addStarImports(concatArrays(DEFAULT_STAR_IMPORTS, starImports));\r\n\r\n        final SecureASTCustomizer secure = new SecureASTCustomizer();\r\n        secure.setClosuresAllowed(true);\r\n        secure.setIndirectImportCheckEnabled(true);\r\n\r\n        secure.setTokensBlacklist(concatList(new Integer[0], TOKEN_BLACK_LIST));\r\n\r\n        final CompilerConfiguration config = new CompilerConfiguration();\r\n        config.addCompilationCustomizers(imports, secure);\r\n        if (maxCpuTime &gt; 0) {\r\n            config.addCompilationCustomizers(new ASTTransformationCustomizer(Collections.singletonMap(&quot;value&quot;, maxCpuTime), TimedInterrupt.class));\r\n        }\r\n        config.addCompilationCustomizers(new SandboxTransformer());\r\n        new SandboxInterceptor().register();\r\n\r\n        loader = new GroovyClassLoader(Thread.currentThread().getContextClassLoader(), config);\r\n        Class&lt;?&gt; clazz = loader.parseClass(scriptBuilder.toString());\r\n        groovy = (GroovyObject) clazz.newInstance();\r\n        for (Map.Entry&lt;String, Object&gt; prop : scriptProperties.entrySet()) {\r\n            groovy.setProperty(prop.getKey(), prop.getValue());\r\n        }\r\n```\r\n\r\nThe maven dependencies I referenced are as follows:\r\n\r\n```\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;groovy&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.kohsuke&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;groovy-sandbox&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.19&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\nI can use the included annotations to limit the runtime of the script, but I don&#39;t know how to limit the memory.I put external custom variables into the script via &#39;groovy.setProperty(prop.getKey(), prop.getValue());&#39; and the script runs to set the value, even an infinite loop to set values.\r\n\r\n\r\nWhat I want is to just terminate the script when the memory reaches a specified threshold, just like the &#39;TimedInterrupt&#39; annotation above, and when the specified time is exceeded, it will &#39;TimeoutException&#39;.","link":"https://stackoverflow.com/questions/77554271/how-to-go-about-limiting-memory-usage-javas-groovy-executor","title":"How to Go About Limiting Memory Usage, Java&#39;s Groovy Executor","body":"<p>In using the Groovy executor for Java, I need to limit the script execution time and the memory size of the variables in the groovy objects.\nHere is my part code,The groovy object here is groovy.lang.GroovyObject</p>\n<pre><code>        final ImportCustomizer imports = new ImportCustomizer();\n        imports.addImports(concatArrays(DEFAULT_IMPORTS, importClasses));\n        imports.addStarImports(concatArrays(DEFAULT_STAR_IMPORTS, starImports));\n\n        final SecureASTCustomizer secure = new SecureASTCustomizer();\n        secure.setClosuresAllowed(true);\n        secure.setIndirectImportCheckEnabled(true);\n\n        secure.setTokensBlacklist(concatList(new Integer[0], TOKEN_BLACK_LIST));\n\n        final CompilerConfiguration config = new CompilerConfiguration();\n        config.addCompilationCustomizers(imports, secure);\n        if (maxCpuTime &gt; 0) {\n            config.addCompilationCustomizers(new ASTTransformationCustomizer(Collections.singletonMap(&quot;value&quot;, maxCpuTime), TimedInterrupt.class));\n        }\n        config.addCompilationCustomizers(new SandboxTransformer());\n        new SandboxInterceptor().register();\n\n        loader = new GroovyClassLoader(Thread.currentThread().getContextClassLoader(), config);\n        Class&lt;?&gt; clazz = loader.parseClass(scriptBuilder.toString());\n        groovy = (GroovyObject) clazz.newInstance();\n        for (Map.Entry&lt;String, Object&gt; prop : scriptProperties.entrySet()) {\n            groovy.setProperty(prop.getKey(), prop.getValue());\n        }\n</code></pre>\n<p>The maven dependencies I referenced are as follows:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\n            &lt;artifactId&gt;groovy&lt;/artifactId&gt;\n            &lt;version&gt;3.0.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.kohsuke&lt;/groupId&gt;\n            &lt;artifactId&gt;groovy-sandbox&lt;/artifactId&gt;\n            &lt;version&gt;1.19&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I can use the included annotations to limit the runtime of the script, but I don't know how to limit the memory.I put external custom variables into the script via 'groovy.setProperty(prop.getKey(), prop.getValue());' and the script runs to set the value, even an infinite loop to set values.</p>\n<p>What I want is to just terminate the script when the memory reaches a specified threshold, just like the 'TimedInterrupt' annotation above, and when the specified time is exceeded, it will 'TimeoutException'.</p>\n"},{"tags":["java","multithreading","concurrency","datetimeformatter"],"comments":[{"score":2,"post_type":"question","creation_date":1701037230,"post_id":77553562,"comment_id":136722191,"body_markdown":"Are new elements added after that constructor initialization?  If no, then only reading from the Map would be thread safe.","link":"https://stackoverflow.com/questions/77553562/should-i-use-a-thread-safe-map-implementation-with-datetimeformatter#comment136722191_77553562","body":"Are new elements added after that constructor initialization?  If no, then only reading from the Map would be thread safe."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701041074,"last_edit_date":1701041074,"creation_date":1701037467,"answer_id":77553706,"question_id":77553562,"body_markdown":"# tl;dr\r\n\r\nIf your intent is a single instance, pre-populated, and unmodified, then the following code should be thread-safe. \r\n\r\nIf `final` and unmodifiable, you can provide direct access to the map, if that is helpful in your code situation.\r\n\r\n```java\r\npublic class DateService\r\n{\r\n    // Member fields.\r\n    public final Map&lt; String, DateTimeFormatter &gt; formatsByPurpose;\r\n    \r\n    // Constructor\r\n    public DateService( … )\r\n    {\r\n        this.formatsByPurpose = \r\n                Map.of(\r\n                        &quot;gui&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\r\n                        &quot;print&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\r\n                        &quot;json&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\r\n                        &quot;html&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\r\n                );\r\n        …\r\n    }\r\n}\r\n```\r\n\r\nIf you intend to have only a single map created, but may modify its contents, then perhaps this code. \r\n\r\nWe use `Map.of` here for its convenient literals-syntax, but pass it to a constructor for another map. \r\n\r\nNotice that we define the member field as `ConcurrentMap` to advertise to the reader its thread-safety, and to double-check our code to ensure we assign only an object that implements `ConcurrentMap`.\r\n\r\n```java\r\npublic class DateService\r\n{\r\n    // Member fields.\r\n    public final ConcurrentMap&lt; String, DateTimeFormatter &gt; formatsByPurpose;\r\n    \r\n    // Constructor\r\n    public DateService( … )\r\n    {\r\n        Map&lt; String , DateTimeFormatter &gt; map = \r\n                Map.of(\r\n                        &quot;gui&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\r\n                        &quot;print&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\r\n                        &quot;json&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\r\n                        &quot;html&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\r\n                );\r\n        this.formatsByPurpose = new ConcurrentHashMap&lt;&gt;( map ) ;\r\n        …\r\n    }\r\n}\r\n```\r\n\r\nIf you intend to possibly replace the entire map with another map object, then use [`AtomicReference`][1] (or, alternatively, mark it `volatile`).\r\n\r\nNotice the `…Ref` added to the member field name to remind the reader of it being an atomic reference, meaning it takes us one step away from the payload we actually care about (the map).\r\n\r\nWe mark the atomic reference as `final` to prevent our member field from ever being assigned to any other `AtomicReference` object. So the payload (the map object’s reference) may be changed out, but its container (the `AtomicReference` object) remains fixed.\r\n\r\n```java\r\npublic class DateService\r\n{\r\n    // Member fields.\r\n    public final AtomicReference&lt; ConcurrentMap&lt; String, DateTimeFormatter &gt; &gt; formatsByPurposeRef = new AtomicReference&lt;&gt;() ;\r\n    \r\n    // Constructor\r\n    public DateService( … )\r\n    {\r\n        ConcurrentMap&lt; String , DateTimeFormatter &gt; map = \r\n                Map.of(\r\n                        &quot;gui&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\r\n                        &quot;print&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\r\n                        &quot;json&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\r\n                        &quot;html&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\r\n                );\r\n        this.formatsByPurposeRef.set( new ConcurrentHashMap&lt;&gt;( map ) ) ;\r\n        …\r\n    }\r\n}\r\n```\r\n\r\nTo modify the map stored away inside an atomic reference, go through the atomic.\r\n\r\n```java\r\nmyDateService.formatsByPurposeRef.get().remove( &quot;html&quot; ) ;  // Optionally capture the returned (and now removed) `DateTimeFormatter` object.\r\n```\r\n\r\nCaveat: All that code is untested, off the top of my head.\r\n\r\n# Details\r\n\r\nRegarding [thread-safety][2], two considerations:\r\n\r\n - `DateTimeFormatter` objects themselves are guaranteed by the the Javadoc to be thread-safe. Being immutable contributes towards being thread-safe. To quote the Javadoc: ***Implementation Requirements:** This class is immutable and thread-safe.*\r\n - Any `Map` implementation that you (a) populate ahead of usage, and (b) do not modify (no puts, no removes), is thread-safe for retrieval. \r\n\r\nSo key part here, which you did not explain, is your intention to (a) modify or not modify the map, and (b) replace or not replace the map.\r\n\r\n - If you might possibly modify the map, be sure to use a thread-safe implementation of `Map`. The `HashMap` implementation is *not* thread-safe under possibly modified. Use a `Map` class that implements [`ConcurrentMap`][3]. Java comes bundled with two such implementations: `ConcurrentHashMap` &amp; `ConcurrentSkipListMap`. You may find third-party ones, perhaps in *Eclipse Collections* and/or *Google Guava*.\r\n - If you intend to *not* modify the map, use an implementation that is [unmodifiable][4]. Then, no thread-safety worries.\r\n\r\n\r\n&gt; Should I make it `ConcurrentHashMap`\r\n\r\nOnly if you intend to modify the elements of the map.\r\n\r\n&gt; Should I make it … volatile\r\n\r\nNot if you instantiate (once, and only once) and populate before any possible usage. I personally prefer this approach. Instantiating &amp; populating in a constructor is one good way to do this. \r\n\r\nIf your intention is to instantiate a single `Map` object, and keep it unmodifiable, then two tips:\r\n\r\n - Mark the `Map` field as `final` to ensure that another map object’s reference is never assigned to that variable. \r\n - Use `Map.of` or `Map.copyOf` to ensure your map cannot be modified. \r\n\r\nIf you intend to switch out one map object for another during runtime, then you definitely have an &quot;visibility&quot; issue. In that case, you can either (a) mark the field `volatile` or (b) use an `AtomicReference` variable to hold the current map object’s reference. I personally prefer the latter because I like how `Atomic…` screams out to the reader that we are protecting a resource under concurrent access. Having to use the `Atomic…` methods everywhere keeps us aware of being in a multi-threaded situation. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html\r\n  [2]: https://en.wikipedia.org/wiki/Thread_safety\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ConcurrentMap.html\r\n  [4]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html#unmodifiable","link":"https://stackoverflow.com/questions/77553562/should-i-use-a-thread-safe-map-implementation-with-datetimeformatter/77553706#77553706","title":"Should I use a thread-safe map implementation with DateTimeFormatter?","body":"<h1>tl;dr</h1>\n<p>If your intent is a single instance, pre-populated, and unmodified, then the following code should be thread-safe.</p>\n<p>If <code>final</code> and unmodifiable, you can provide direct access to the map, if that is helpful in your code situation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DateService\n{\n    // Member fields.\n    public final Map&lt; String, DateTimeFormatter &gt; formatsByPurpose;\n    \n    // Constructor\n    public DateService( … )\n    {\n        this.formatsByPurpose = \n                Map.of(\n                        &quot;gui&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\n                        &quot;print&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\n                        &quot;json&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\n                        &quot;html&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\n                );\n        …\n    }\n}\n</code></pre>\n<p>If you intend to have only a single map created, but may modify its contents, then perhaps this code.</p>\n<p>We use <code>Map.of</code> here for its convenient literals-syntax, but pass it to a constructor for another map.</p>\n<p>Notice that we define the member field as <code>ConcurrentMap</code> to advertise to the reader its thread-safety, and to double-check our code to ensure we assign only an object that implements <code>ConcurrentMap</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DateService\n{\n    // Member fields.\n    public final ConcurrentMap&lt; String, DateTimeFormatter &gt; formatsByPurpose;\n    \n    // Constructor\n    public DateService( … )\n    {\n        Map&lt; String , DateTimeFormatter &gt; map = \n                Map.of(\n                        &quot;gui&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\n                        &quot;print&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\n                        &quot;json&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\n                        &quot;html&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\n                );\n        this.formatsByPurpose = new ConcurrentHashMap&lt;&gt;( map ) ;\n        …\n    }\n}\n</code></pre>\n<p>If you intend to possibly replace the entire map with another map object, then use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html\" rel=\"nofollow noreferrer\"><code>AtomicReference</code></a> (or, alternatively, mark it <code>volatile</code>).</p>\n<p>Notice the <code>…Ref</code> added to the member field name to remind the reader of it being an atomic reference, meaning it takes us one step away from the payload we actually care about (the map).</p>\n<p>We mark the atomic reference as <code>final</code> to prevent our member field from ever being assigned to any other <code>AtomicReference</code> object. So the payload (the map object’s reference) may be changed out, but its container (the <code>AtomicReference</code> object) remains fixed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DateService\n{\n    // Member fields.\n    public final AtomicReference&lt; ConcurrentMap&lt; String, DateTimeFormatter &gt; &gt; formatsByPurposeRef = new AtomicReference&lt;&gt;() ;\n    \n    // Constructor\n    public DateService( … )\n    {\n        ConcurrentMap&lt; String , DateTimeFormatter &gt; map = \n                Map.of(\n                        &quot;gui&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\n                        &quot;print&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\n                        &quot;json&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\n                        &quot;html&quot; , DateTimeFormatter.of( … ).withLocale( … ) ,\n                );\n        this.formatsByPurposeRef.set( new ConcurrentHashMap&lt;&gt;( map ) ) ;\n        …\n    }\n}\n</code></pre>\n<p>To modify the map stored away inside an atomic reference, go through the atomic.</p>\n<pre class=\"lang-java prettyprint-override\"><code>myDateService.formatsByPurposeRef.get().remove( &quot;html&quot; ) ;  // Optionally capture the returned (and now removed) `DateTimeFormatter` object.\n</code></pre>\n<p>Caveat: All that code is untested, off the top of my head.</p>\n<h1>Details</h1>\n<p>Regarding <a href=\"https://en.wikipedia.org/wiki/Thread_safety\" rel=\"nofollow noreferrer\">thread-safety</a>, two considerations:</p>\n<ul>\n<li><code>DateTimeFormatter</code> objects themselves are guaranteed by the the Javadoc to be thread-safe. Being immutable contributes towards being thread-safe. To quote the Javadoc: <em><strong>Implementation Requirements:</strong> This class is immutable and thread-safe.</em></li>\n<li>Any <code>Map</code> implementation that you (a) populate ahead of usage, and (b) do not modify (no puts, no removes), is thread-safe for retrieval.</li>\n</ul>\n<p>So key part here, which you did not explain, is your intention to (a) modify or not modify the map, and (b) replace or not replace the map.</p>\n<ul>\n<li>If you might possibly modify the map, be sure to use a thread-safe implementation of <code>Map</code>. The <code>HashMap</code> implementation is <em>not</em> thread-safe under possibly modified. Use a <code>Map</code> class that implements <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ConcurrentMap.html\" rel=\"nofollow noreferrer\"><code>ConcurrentMap</code></a>. Java comes bundled with two such implementations: <code>ConcurrentHashMap</code> &amp; <code>ConcurrentSkipListMap</code>. You may find third-party ones, perhaps in <em>Eclipse Collections</em> and/or <em>Google Guava</em>.</li>\n<li>If you intend to <em>not</em> modify the map, use an implementation that is <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html#unmodifiable\" rel=\"nofollow noreferrer\">unmodifiable</a>. Then, no thread-safety worries.</li>\n</ul>\n<blockquote>\n<p>Should I make it <code>ConcurrentHashMap</code></p>\n</blockquote>\n<p>Only if you intend to modify the elements of the map.</p>\n<blockquote>\n<p>Should I make it … volatile</p>\n</blockquote>\n<p>Not if you instantiate (once, and only once) and populate before any possible usage. I personally prefer this approach. Instantiating &amp; populating in a constructor is one good way to do this.</p>\n<p>If your intention is to instantiate a single <code>Map</code> object, and keep it unmodifiable, then two tips:</p>\n<ul>\n<li>Mark the <code>Map</code> field as <code>final</code> to ensure that another map object’s reference is never assigned to that variable.</li>\n<li>Use <code>Map.of</code> or <code>Map.copyOf</code> to ensure your map cannot be modified.</li>\n</ul>\n<p>If you intend to switch out one map object for another during runtime, then you definitely have an &quot;visibility&quot; issue. In that case, you can either (a) mark the field <code>volatile</code> or (b) use an <code>AtomicReference</code> variable to hold the current map object’s reference. I personally prefer the latter because I like how <code>Atomic…</code> screams out to the reader that we are protecting a resource under concurrent access. Having to use the <code>Atomic…</code> methods everywhere keeps us aware of being in a multi-threaded situation.</p>\n"}],"comment_count":1,"is_answered":false,"view_count":59,"answer_count":1,"score":0,"last_activity_date":1701041074,"creation_date":1701034476,"question_id":77553562,"body_markdown":"Please help me figure it out, I think I&#39;m confused. I have a class contains HashMap&lt;String, DateTimeFormatter&gt; that is populated when the application starts.\r\n```\r\npublic class DateService{\r\n   private final Map&lt;String, DateTimeFormatter&gt; map;\r\n   public PeopleService(String pattern){\r\n     map = new HashMap&lt;String, DateTimeFormatter&gt;();\r\n     map.put(pattern, DateTimeFormatter.ofPattern(pattern)); //it is only test example\r\n   }\r\n}\r\n```\r\nShould I make it `ConcurrentHashMap` or `volatile` to convert the date into multiple threads?\r\n\r\nA similar question if I want to use `List&lt;DateTimeFormatter&gt;`  to convert dates in multiple threads","link":"https://stackoverflow.com/questions/77553562/should-i-use-a-thread-safe-map-implementation-with-datetimeformatter","title":"Should I use a thread-safe map implementation with DateTimeFormatter?","body":"<p>Please help me figure it out, I think I'm confused. I have a class contains HashMap&lt;String, DateTimeFormatter&gt; that is populated when the application starts.</p>\n<pre><code>public class DateService{\n   private final Map&lt;String, DateTimeFormatter&gt; map;\n   public PeopleService(String pattern){\n     map = new HashMap&lt;String, DateTimeFormatter&gt;();\n     map.put(pattern, DateTimeFormatter.ofPattern(pattern)); //it is only test example\n   }\n}\n</code></pre>\n<p>Should I make it <code>ConcurrentHashMap</code> or <code>volatile</code> to convert the date into multiple threads?</p>\n<p>A similar question if I want to use <code>List&lt;DateTimeFormatter&gt;</code>  to convert dates in multiple threads</p>\n"},{"tags":["java","android","sqlite"],"comment_count":0,"is_answered":false,"view_count":18,"answer_count":0,"score":0,"last_activity_date":1701040558,"creation_date":1701040558,"question_id":77553829,"body_markdown":"I am reaching out regarding an issue that I have encountered in my development process. When attempting to open the local database /data/data/com.example.handwritingfontconverter/databases/SettingsDB, I receive the following error:\r\n\r\n\r\n\r\n```\r\nCan&#39;t open offline database `/data/data/com.example.handwritingfontconverter/databases/SettingsDB`: Device &#39;Pixel_XL_API_28 emulator-5554&#39; not found.\r\n```\r\n\r\n\r\n\r\nI seek your assistance in understanding and resolving this issue. There might be internal problems or conflicts that you can help address. I am prepared to provide additional data, logs, or any other information to facilitate the resolution of this situation.\r\n\r\nMy emulated Pixel XL API 28 system with the specified name &#39;emulator-5554&#39; is connected and fully loaded. I have confirmed this using the adb devices command and also tracked the connection to the process with the identifier 6816.","link":"https://stackoverflow.com/questions/77553829/request-for-assistance-database-access-issue-on-emulated-device","title":"Request for Assistance: Database Access Issue on Emulated Device","body":"<p>I am reaching out regarding an issue that I have encountered in my development process. When attempting to open the local database /data/data/com.example.handwritingfontconverter/databases/SettingsDB, I receive the following error:</p>\n<pre><code>Can't open offline database `/data/data/com.example.handwritingfontconverter/databases/SettingsDB`: Device 'Pixel_XL_API_28 emulator-5554' not found.\n</code></pre>\n<p>I seek your assistance in understanding and resolving this issue. There might be internal problems or conflicts that you can help address. I am prepared to provide additional data, logs, or any other information to facilitate the resolution of this situation.</p>\n<p>My emulated Pixel XL API 28 system with the specified name 'emulator-5554' is connected and fully loaded. I have confirmed this using the adb devices command and also tracked the connection to the process with the identifier 6816.</p>\n"},{"tags":["java","docker","apache-flink","amazon-emr","flink-sql"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701039343,"last_edit_date":1701039343,"creation_date":1700799748,"answer_id":77540711,"question_id":77539526,"body_markdown":"I checked `sql-client.sh` further and it writes to `/mnt/tmp` rather than `/tmp`. Creating the temporary directory before hand fixed the issue and I created a custom Docker image by adding the following.\r\n\r\n```\r\nRUN mkdir -p /mnt/tmp\r\n```\r\n\r\nIt would affect not only the SQL client but also other places where `getAvailablePort()` is applied. Therefore it&#39;s necessary to update the Docker image.","link":"https://stackoverflow.com/questions/77539526/fail-to-start-flink-sql-client-on-emr-on-eks-docker-image/77540711#77540711","title":"Fail to start Flink SQL client on EMR on EKS docker image","body":"<p>I checked <code>sql-client.sh</code> further and it writes to <code>/mnt/tmp</code> rather than <code>/tmp</code>. Creating the temporary directory before hand fixed the issue and I created a custom Docker image by adding the following.</p>\n<pre><code>RUN mkdir -p /mnt/tmp\n</code></pre>\n<p>It would affect not only the SQL client but also other places where <code>getAvailablePort()</code> is applied. Therefore it's necessary to update the Docker image.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":33,"answer_count":1,"score":0,"last_activity_date":1701039343,"creation_date":1700771837,"question_id":77539526,"body_markdown":"I&#39;m playing with the Flink docker image of EMR on EKS - *public.ecr.aws/emr-on-eks/flink/emr-6.15.0-flink:latest*. When I try to start the SQL client, I see the following error. (I don&#39;t see this error when I use the official flink image.)\r\n\r\n```\r\n06:33:00.495 [main] ERROR org.apache.flink.table.client.SqlClient - SQL Client must stop. Unexpected exception. This is a bug. Please consider filing an issue.\r\njava.lang.RuntimeException: Could not find a free permitted port on the machine.\r\n        at org.apache.flink.util.NetUtils.getAvailablePort(NetUtils.java:177) ~[flink-dist-1.17.1-amzn-1.jar:1.17.1-amzn-1]\r\n        at org.apache.flink.table.client.SqlClient$EmbeddedGateway.create(SqlClient.java:257) ~[flink-sql-client-1.17.1-amzn-1.jar:1.17.1-amzn-1]\r\n        at org.apache.flink.table.client.SqlClient.start(SqlClient.java:108) ~[flink-sql-client-1.17.1-amzn-1.jar:1.17.1-amzn-1]\r\n        at org.apache.flink.table.client.SqlClient.startClient(SqlClient.java:228) [flink-sql-client-1.17.1-amzn-1.jar:1.17.1-amzn-1]\r\n        at org.apache.flink.table.client.SqlClient.main(SqlClient.java:179) [flink-sql-client-1.17.1-amzn-1.jar:1.17.1-amzn-1]\r\nException in thread &quot;main&quot; org.apache.flink.table.client.SqlClientException: Unexpected exception. This is a bug. Please consider filing an issue.\r\n        at org.apache.flink.table.client.SqlClient.startClient(SqlClient.java:242)\r\n        at org.apache.flink.table.client.SqlClient.main(SqlClient.java:179)\r\nCaused by: java.lang.RuntimeException: Could not find a free permitted port on the machine.\r\n        at org.apache.flink.util.NetUtils.getAvailablePort(NetUtils.java:177)\r\n        at org.apache.flink.table.client.SqlClient$EmbeddedGateway.create(SqlClient.java:257)\r\n        at org.apache.flink.table.client.SqlClient.start(SqlClient.java:108)\r\n        at org.apache.flink.table.client.SqlClient.startClient(SqlClient.java:228)\r\n        ... 1 more\r\n```\r\n\r\nIt looks to be caused by the `getAvailablePort()` of the *NetUtils* class (*NetUtils.java*).\r\n\r\n```java\r\npublic static Port getAvailablePort() {\r\n\tfor (int i = 0; i &lt; 50; i++) {\r\n\t\ttry (ServerSocket serverSocket = new ServerSocket(0)) {\r\n\t\t\tint port = serverSocket.getLocalPort();\r\n\t\t\tif (port != 0) {\r\n\t\t\t\tFileLock fileLock = new FileLock(NetUtils.class.getName() + port);\r\n\t\t\t\tif (fileLock.tryLock()) {\r\n\t\t\t\t\treturn new Port(port, fileLock);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfileLock.unlockAndDestroy();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (IOException ignored) {\r\n\t\t}\r\n\t}\r\n\r\n\tthrow new RuntimeException(&quot;Could not find a free permitted port on the machine.&quot;);\r\n}\r\n```\r\n\r\nI see a related Jira ticket (https://issues.apache.org/jira/browse/FLINK-28613) and it seems to be resolved by changing file permission. However it doesn&#39;t work for me. Basically I&#39;m not sure why it fails to do FileLock on the `/tmp` folder.\r\n\r\nCould you please inform me how I may be able to fix it?\r\n\r\nThanks!","link":"https://stackoverflow.com/questions/77539526/fail-to-start-flink-sql-client-on-emr-on-eks-docker-image","title":"Fail to start Flink SQL client on EMR on EKS docker image","body":"<p>I'm playing with the Flink docker image of EMR on EKS - <em>public.ecr.aws/emr-on-eks/flink/emr-6.15.0-flink:latest</em>. When I try to start the SQL client, I see the following error. (I don't see this error when I use the official flink image.)</p>\n<pre><code>06:33:00.495 [main] ERROR org.apache.flink.table.client.SqlClient - SQL Client must stop. Unexpected exception. This is a bug. Please consider filing an issue.\njava.lang.RuntimeException: Could not find a free permitted port on the machine.\n        at org.apache.flink.util.NetUtils.getAvailablePort(NetUtils.java:177) ~[flink-dist-1.17.1-amzn-1.jar:1.17.1-amzn-1]\n        at org.apache.flink.table.client.SqlClient$EmbeddedGateway.create(SqlClient.java:257) ~[flink-sql-client-1.17.1-amzn-1.jar:1.17.1-amzn-1]\n        at org.apache.flink.table.client.SqlClient.start(SqlClient.java:108) ~[flink-sql-client-1.17.1-amzn-1.jar:1.17.1-amzn-1]\n        at org.apache.flink.table.client.SqlClient.startClient(SqlClient.java:228) [flink-sql-client-1.17.1-amzn-1.jar:1.17.1-amzn-1]\n        at org.apache.flink.table.client.SqlClient.main(SqlClient.java:179) [flink-sql-client-1.17.1-amzn-1.jar:1.17.1-amzn-1]\nException in thread &quot;main&quot; org.apache.flink.table.client.SqlClientException: Unexpected exception. This is a bug. Please consider filing an issue.\n        at org.apache.flink.table.client.SqlClient.startClient(SqlClient.java:242)\n        at org.apache.flink.table.client.SqlClient.main(SqlClient.java:179)\nCaused by: java.lang.RuntimeException: Could not find a free permitted port on the machine.\n        at org.apache.flink.util.NetUtils.getAvailablePort(NetUtils.java:177)\n        at org.apache.flink.table.client.SqlClient$EmbeddedGateway.create(SqlClient.java:257)\n        at org.apache.flink.table.client.SqlClient.start(SqlClient.java:108)\n        at org.apache.flink.table.client.SqlClient.startClient(SqlClient.java:228)\n        ... 1 more\n</code></pre>\n<p>It looks to be caused by the <code>getAvailablePort()</code> of the <em>NetUtils</em> class (<em>NetUtils.java</em>).</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Port getAvailablePort() {\n    for (int i = 0; i &lt; 50; i++) {\n        try (ServerSocket serverSocket = new ServerSocket(0)) {\n            int port = serverSocket.getLocalPort();\n            if (port != 0) {\n                FileLock fileLock = new FileLock(NetUtils.class.getName() + port);\n                if (fileLock.tryLock()) {\n                    return new Port(port, fileLock);\n                } else {\n                    fileLock.unlockAndDestroy();\n                }\n            }\n        } catch (IOException ignored) {\n        }\n    }\n\n    throw new RuntimeException(&quot;Could not find a free permitted port on the machine.&quot;);\n}\n</code></pre>\n<p>I see a related Jira ticket (<a href=\"https://issues.apache.org/jira/browse/FLINK-28613\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/FLINK-28613</a>) and it seems to be resolved by changing file permission. However it doesn't work for me. Basically I'm not sure why it fails to do FileLock on the <code>/tmp</code> folder.</p>\n<p>Could you please inform me how I may be able to fix it?</p>\n<p>Thanks!</p>\n"},{"tags":["java","eclipse","audio"],"comments":[{"score":0,"post_type":"question","creation_date":1701039755,"post_id":77553635,"comment_id":136722392,"body_markdown":"I added String[] args to main and was able to run your code without errors with an example .wav file I found online. Maybe you have an issue with your set up in your IDE? Try looking at \n\nhttps://stackoverflow.com/questions/49520858/error-occurred-during-initialization-of-boot-layer-findexception-module-not-fou\nDoes it run if you put a test print out and remove all your code?","link":"https://stackoverflow.com/questions/77553635/error-while-trying-to-play-a-sound-using-javax-sound-sampled-on-eclipse#comment136722392_77553635","body":"I added String[] args to main and was able to run your code without errors with an example .wav file I found online. Maybe you have an issue with your set up in your IDE? Try looking at   <a href=\"https://stackoverflow.com/questions/49520858/error-occurred-during-initialization-of-boot-layer-findexception-module-not-fou\" title=\"error occurred during initialization of boot layer findexception module not fou\">stackoverflow.com/questions/49520858/&hellip;</a> Does it run if you put a test print out and remove all your code?"},{"score":0,"post_type":"question","creation_date":1701072803,"post_id":77553635,"comment_id":136724984,"body_markdown":"Yes, if I try to run another code, it works, and I also added String[] args but I still have the same problem","link":"https://stackoverflow.com/questions/77553635/error-while-trying-to-play-a-sound-using-javax-sound-sampled-on-eclipse#comment136724984_77553635","body":"Yes, if I try to run another code, it works, and I also added String[] args but I still have the same problem"},{"score":0,"post_type":"question","creation_date":1701096526,"post_id":77553635,"comment_id":136729208,"body_markdown":"Your question still shows the broken main method. Please fix it. The error message `Package jdk.internal.jimage.decompressor in both module java.base and module jrt.fs` indicates that your project or launch configuration is broken. Please show what you have in _Project &gt; Properties: Java Build Path_ tab _Libraries_ and in the launch configuration in the tabs _Arguments_ and _Dependencies_.","link":"https://stackoverflow.com/questions/77553635/error-while-trying-to-play-a-sound-using-javax-sound-sampled-on-eclipse#comment136729208_77553635","body":"Your question still shows the broken main method. Please fix it. The error message <code>Package jdk.internal.jimage.decompressor in both module java.base and module jrt.fs</code> indicates that your project or launch configuration is broken. Please show what you have in <i>Project &gt; Properties: Java Build Path</i> tab <i>Libraries</i> and in the launch configuration in the tabs <i>Arguments</i> and <i>Dependencies</i>."}],"comment_count":3,"is_answered":false,"view_count":30,"answer_count":0,"score":-1,"last_activity_date":1701038693,"creation_date":1701035873,"last_edit_date":1701038693,"question_id":77553635,"body_markdown":"I am trying to play a wav sound on java on eclipse, and for that, I use javax.sound.sampled, here is the code I wrote for that :\r\n\r\n\r\n```\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.util.Scanner;\r\n\r\nimport javax.sound.sampled.*;\r\n\r\npublic class Son {\r\n\tpublic static void main() throws UnsupportedAudioFileException, IOException, LineUnavailableException {\r\n\t\tScanner scanner = new Scanner(System.in);\r\n\t\tFile file= new File(&quot;Hotlanta-Track-Tribe.wav&quot;);\r\n\t\tAudioInputStream audioStream= AudioSystem.getAudioInputStream(file);\r\n\t\tClip clip= AudioSystem.getClip();\r\n\t\tclip.open(audioStream);\r\n\t\tclip.start();\r\n\t\tString response= scanner.next();\r\n\t}\r\n}\r\n\r\n```\r\n\r\nthe error I get is : Error occurred during initialization of boot layer\r\njava.lang.LayerInstantiationException: Package jdk.internal.jimage.decompressor in both module java.base and module jrt.fs\r\n\r\n\r\nCan someone help?","link":"https://stackoverflow.com/questions/77553635/error-while-trying-to-play-a-sound-using-javax-sound-sampled-on-eclipse","title":"error while trying to play a sound using javax.sound.sampled on eclipse","body":"<p>I am trying to play a wav sound on java on eclipse, and for that, I use javax.sound.sampled, here is the code I wrote for that :</p>\n<pre><code>import java.io.File;\nimport java.io.IOException;\nimport java.util.Scanner;\n\nimport javax.sound.sampled.*;\n\npublic class Son {\n    public static void main() throws UnsupportedAudioFileException, IOException, LineUnavailableException {\n        Scanner scanner = new Scanner(System.in);\n        File file= new File(&quot;Hotlanta-Track-Tribe.wav&quot;);\n        AudioInputStream audioStream= AudioSystem.getAudioInputStream(file);\n        Clip clip= AudioSystem.getClip();\n        clip.open(audioStream);\n        clip.start();\n        String response= scanner.next();\n    }\n}\n\n</code></pre>\n<p>the error I get is : Error occurred during initialization of boot layer\njava.lang.LayerInstantiationException: Package jdk.internal.jimage.decompressor in both module java.base and module jrt.fs</p>\n<p>Can someone help?</p>\n"}],"has_more":true,"quota_max":300,"quota_remaining":284}