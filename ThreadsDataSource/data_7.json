{"items":[{"tags":["java","mapstruct"],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701293602,"creation_date":1701293602,"answer_id":77574610,"question_id":77571332,"body_markdown":"BaseMapper is not a `@Mapper`, is a `@MapperConfig`\r\n\r\n    @MapperConfig\r\n    public interface BaseMapperConfig {\r\n    \t\r\n    \t@Mapping(target = &quot;name.firstName&quot;, source = &quot;firstName&quot;)\r\n    \t@Mapping(target = &quot;name.lastName&quot;, source = &quot;lastName&quot;)\r\n    \tBaseDTO toDTO(BaseEntity entity);\r\n    \t\r\n    }\r\n\r\nand the ChildMapper has to use the BaseMapperConfig as configuration, and on the method level, you need to add the @InheritConfiguration\r\n\r\n    @Mapper(config = BaseMapperConfig.class)\r\n    public interface ChildMapper {\r\n    \t\r\n    \tChildMapper INSTANCE = Mappers.getMapper(ChildMapper.class);\r\n    \t\r\n    \t@InheritConfiguration\r\n    \tChildDTO toDTO(ChildEntity entity);\r\n    \t\r\n    }\r\n\r\nthe generated mapper will be:\r\n\r\n    public class ChildMapperImpl implements ChildMapper {\r\n    \r\n        @Override\r\n        public ChildDTO toDTO(ChildEntity entity) {\r\n            if ( entity == null ) {\r\n                return null;\r\n            }\r\n    \r\n            ChildDTO.ChildDTOBuilder&lt;?, ?&gt; childDTO = ChildDTO.builder();\r\n    \r\n            childDTO.name( childEntityToFullNameDTO( entity ) );\r\n            childDTO.id( entity.getId() );\r\n            childDTO.childName( entity.getChildName() );\r\n    \r\n            return childDTO.build();\r\n        }\r\n    \r\n        protected FullNameDTO childEntityToFullNameDTO(ChildEntity childEntity) {\r\n            if ( childEntity == null ) {\r\n                return null;\r\n            }\r\n    \r\n            FullNameDTO fullNameDTO = new FullNameDTO();\r\n    \r\n            fullNameDTO.setFirstName( childEntity.getFirstName() );\r\n            fullNameDTO.setLastName( childEntity.getLastName() );\r\n    \r\n            return fullNameDTO;\r\n        }\r\n    }","link":"https://stackoverflow.com/questions/77571332/not-able-to-map-superclass-with-a-nested-object-while-mapping-child-class/77574610#77574610","title":"Not able to map SuperClass with a nested Object, while mapping child class","body":"<p>BaseMapper is not a <code>@Mapper</code>, is a <code>@MapperConfig</code></p>\n<pre><code>@MapperConfig\npublic interface BaseMapperConfig {\n    \n    @Mapping(target = &quot;name.firstName&quot;, source = &quot;firstName&quot;)\n    @Mapping(target = &quot;name.lastName&quot;, source = &quot;lastName&quot;)\n    BaseDTO toDTO(BaseEntity entity);\n    \n}\n</code></pre>\n<p>and the ChildMapper has to use the BaseMapperConfig as configuration, and on the method level, you need to add the @InheritConfiguration</p>\n<pre><code>@Mapper(config = BaseMapperConfig.class)\npublic interface ChildMapper {\n    \n    ChildMapper INSTANCE = Mappers.getMapper(ChildMapper.class);\n    \n    @InheritConfiguration\n    ChildDTO toDTO(ChildEntity entity);\n    \n}\n</code></pre>\n<p>the generated mapper will be:</p>\n<pre><code>public class ChildMapperImpl implements ChildMapper {\n\n    @Override\n    public ChildDTO toDTO(ChildEntity entity) {\n        if ( entity == null ) {\n            return null;\n        }\n\n        ChildDTO.ChildDTOBuilder&lt;?, ?&gt; childDTO = ChildDTO.builder();\n\n        childDTO.name( childEntityToFullNameDTO( entity ) );\n        childDTO.id( entity.getId() );\n        childDTO.childName( entity.getChildName() );\n\n        return childDTO.build();\n    }\n\n    protected FullNameDTO childEntityToFullNameDTO(ChildEntity childEntity) {\n        if ( childEntity == null ) {\n            return null;\n        }\n\n        FullNameDTO fullNameDTO = new FullNameDTO();\n\n        fullNameDTO.setFirstName( childEntity.getFirstName() );\n        fullNameDTO.setLastName( childEntity.getLastName() );\n\n        return fullNameDTO;\n    }\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":50,"answer_count":1,"score":0,"last_activity_date":1701293918,"creation_date":1701262555,"question_id":77571332,"body_markdown":"I am trying to map classes using MapStruct. I have Super class and child class extending it. The fields are mapped correctly in BaseMapper generated code, but in the ChildMapperImpl, the fields from Parent are not mapped and missing. \r\n\r\n\r\nClass and Mapper code are below:\r\n\r\n```java\r\n@Data\r\n@SuperBuilder\r\npublic class BaseDTO {\r\n  private Long id;\r\n  private FullNameDTO name;\r\n} \r\n```\r\n```\r\n@Data\r\n@SuperBuilder\r\npublic class BaseEntity {\r\n  private Long id;\r\n  private String firstName;\r\n  private String lastName;\r\n}\r\n```\r\n```\r\n@Data\r\n@Getter\r\npublic class FullNameDTO {\r\n  private String firstName;\r\n  private String lastName;\r\n}\r\n```\r\n\r\n```\r\n@Data\r\n@SuperBuilder\r\npublic class ChildDTO extends BaseDTO{\r\n  private String childName;\r\n}\r\n```\r\n```\r\n@Data\r\n@SuperBuilder\r\npublic class ChildEntity extends BaseEntity{\r\n  private String childName;\r\n}\r\n```\r\nMapper for Base Classes: \r\n```\r\n@Mapper\r\npublic interface BaseMapper {\r\n  @Mapping(target = &quot;name.firstName&quot;,source = &quot;firstName&quot;)\r\n  @Mapping(target = &quot;name.lastName&quot;,source = &quot;lastName&quot;)\r\n  BaseDTO toDTO(BaseEntity entity);\r\n  BaseMapper INSTANCE = Mappers.getMapper(BaseMapper.class);\r\n}\r\n```\r\n\r\nMapper for Child classes:\r\n```\r\n@Mapper(uses = BaseMapper.class)\r\npublic interface ChildMapper {\r\n  ChildDTO toDTO(ChildEntity entity);\r\n  ChildMapper INSTANCE = Mappers.getMapper(ChildMapper.class);\r\n}\r\n```\r\n\r\nThe fields are mapped correctly in BaseMapper, but in the ChildMapper, the fields from Parent are not mapped and missing. \r\n\r\nChildMapperImpl:\r\n```\r\npublic ChildDTO toDTO(ChildEntity entity) {\r\n        if ( entity == null ) {\r\n            return null;\r\n        }\r\n\r\n        ChildDTO.ChildDTOBuilder&lt;?, ?&gt; childDTO = ChildDTO.builder();\r\n\r\n        childDTO.id( entity.getId() );\r\n        childDTO.childName( entity.getChildName() );\r\n\r\n        return childDTO.build();\r\n    }\r\n```\r\n\r\nIf I have primitive type for firstName and lastName in BaseDTO, instead of custom object, fields are getting mapper correctly. \r\nPlease help. Thanks in advance.","link":"https://stackoverflow.com/questions/77571332/not-able-to-map-superclass-with-a-nested-object-while-mapping-child-class","title":"Not able to map SuperClass with a nested Object, while mapping child class","body":"<p>I am trying to map classes using MapStruct. I have Super class and child class extending it. The fields are mapped correctly in BaseMapper generated code, but in the ChildMapperImpl, the fields from Parent are not mapped and missing.</p>\n<p>Class and Mapper code are below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@SuperBuilder\npublic class BaseDTO {\n  private Long id;\n  private FullNameDTO name;\n} \n</code></pre>\n<pre><code>@Data\n@SuperBuilder\npublic class BaseEntity {\n  private Long id;\n  private String firstName;\n  private String lastName;\n}\n</code></pre>\n<pre><code>@Data\n@Getter\npublic class FullNameDTO {\n  private String firstName;\n  private String lastName;\n}\n</code></pre>\n<pre><code>@Data\n@SuperBuilder\npublic class ChildDTO extends BaseDTO{\n  private String childName;\n}\n</code></pre>\n<pre><code>@Data\n@SuperBuilder\npublic class ChildEntity extends BaseEntity{\n  private String childName;\n}\n</code></pre>\n<p>Mapper for Base Classes:</p>\n<pre><code>@Mapper\npublic interface BaseMapper {\n  @Mapping(target = &quot;name.firstName&quot;,source = &quot;firstName&quot;)\n  @Mapping(target = &quot;name.lastName&quot;,source = &quot;lastName&quot;)\n  BaseDTO toDTO(BaseEntity entity);\n  BaseMapper INSTANCE = Mappers.getMapper(BaseMapper.class);\n}\n</code></pre>\n<p>Mapper for Child classes:</p>\n<pre><code>@Mapper(uses = BaseMapper.class)\npublic interface ChildMapper {\n  ChildDTO toDTO(ChildEntity entity);\n  ChildMapper INSTANCE = Mappers.getMapper(ChildMapper.class);\n}\n</code></pre>\n<p>The fields are mapped correctly in BaseMapper, but in the ChildMapper, the fields from Parent are not mapped and missing.</p>\n<p>ChildMapperImpl:</p>\n<pre><code>public ChildDTO toDTO(ChildEntity entity) {\n        if ( entity == null ) {\n            return null;\n        }\n\n        ChildDTO.ChildDTOBuilder&lt;?, ?&gt; childDTO = ChildDTO.builder();\n\n        childDTO.id( entity.getId() );\n        childDTO.childName( entity.getChildName() );\n\n        return childDTO.build();\n    }\n</code></pre>\n<p>If I have primitive type for firstName and lastName in BaseDTO, instead of custom object, fields are getting mapper correctly.\nPlease help. Thanks in advance.</p>\n"},{"tags":["java","spring","hibernate","pom.xml","boot"],"comments":[{"score":0,"post_type":"question","creation_date":1701196436,"post_id":77565492,"comment_id":136744571,"body_markdown":"Hey, I just wrote an answer about the problem and about the solution that was able to help you. Please consider it as a starting point for every project that you are going to develop.","link":"https://stackoverflow.com/questions/77565492/error-creating-bean-with-name-platformtransactionmanagercustomizers#comment136744571_77565492","body":"Hey, I just wrote an answer about the problem and about the solution that was able to help you. Please consider it as a starting point for every project that you are going to develop."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701293820,"last_edit_date":1701293820,"creation_date":1701194654,"answer_id":77566167,"question_id":77565492,"body_markdown":"I&#39;ve fixed it! By using IntelliJ Idea, I&#39;ve found the dependency containing the **&quot;platformTransactionManagerCustomizers&quot;** :\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\r\n        &lt;version&gt;2.6.3&lt;/version&gt;\r\n    &lt;/dependency&gt;","link":"https://stackoverflow.com/questions/77565492/error-creating-bean-with-name-platformtransactionmanagercustomizers/77566167#77566167","title":"Error creating bean with name &#39;platformTransactionManagerCustomizers&#39;","body":"<p>I've fixed it! By using IntelliJ Idea, I've found the dependency containing the <strong>&quot;platformTransactionManagerCustomizers&quot;</strong> :</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n    &lt;version&gt;2.6.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1701196313,"creation_date":1701196313,"answer_id":77566334,"question_id":77565492,"body_markdown":"As you pointed the problem was in autoconfigution but you will have some miss configuration on `spring-boot` because of version&#39;s that you are going to use.\r\n\r\nHere you have to change \r\n\r\nthe version from `2.6.3` \r\n \r\nSomething like this:\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\r\n    &lt;version&gt;3.2.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nBecause the version of parent in your case is `3.2.0`\r\n\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2.0&lt;/version&gt;\r\n            &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n        &lt;/parent&gt;\r\n\r\nAnd also the best way in my opinion is Do NOT define the dependency versions in `pom.xml` if that dependency is managed by Spring. \r\n\r\nIt mean you have to remove all \r\n`version` tag where `groupId` is next one \r\n\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\r\nAlso as I mentioned above don’t mix the framework version here is why you should avoid it [Changes from 2.x to 3.x][1]\r\n\r\n\r\n  [1]: https://spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0","link":"https://stackoverflow.com/questions/77565492/error-creating-bean-with-name-platformtransactionmanagercustomizers/77566334#77566334","title":"Error creating bean with name &#39;platformTransactionManagerCustomizers&#39;","body":"<p>As you pointed the problem was in autoconfigution but you will have some miss configuration on <code>spring-boot</code> because of version's that you are going to use.</p>\n<p>Here you have to change</p>\n<p>the version from <code>2.6.3</code></p>\n<p>Something like this:</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n&lt;version&gt;3.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Because the version of parent in your case is <code>3.2.0</code></p>\n<pre><code>    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n</code></pre>\n<p>And also the best way in my opinion is Do NOT define the dependency versions in <code>pom.xml</code> if that dependency is managed by Spring.</p>\n<p>It mean you have to remove all\n<code>version</code> tag where <code>groupId</code> is next one</p>\n<pre><code>&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n</code></pre>\n<p>Also as I mentioned above don’t mix the framework version here is why you should avoid it <a href=\"https://spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0\" rel=\"nofollow noreferrer\">Changes from 2.x to 3.x</a></p>\n"}],"comment_count":1,"is_answered":false,"view_count":334,"answer_count":2,"score":0,"last_activity_date":1701293820,"creation_date":1701188372,"question_id":77565492,"body_markdown":"I am learning how to use Spring Boot. I am trying to connect my application with my database, but I am not entirely sure why I am getting this error and how to fix it. I can&#39;t find anything online. Please help me. If you need more information, please ask me and I will do everything I can.\r\n\r\npom.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.2.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;central&lt;/id&gt;\r\n\t\t\t&lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\r\n\t&lt;groupId&gt;com.notes&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;notes&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;name&gt;notes&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n            &lt;version&gt;6.1.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.0.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;8.0.33&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.18.30&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\napplication.properties, I do not know why but every propery except server.port is grayed out:\r\n\r\n```\r\n#GENERAL\r\nserver.port = 8080\r\n#\r\n#DATABASE\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\nspring.datasource.url=jdbc:mysql://localhost:3306/note_application\r\nspring.datasource.username=root\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n\r\n#JPA/Hibernate\r\nspring.jpa.show-sql=true\r\nspring.jpa.hibernate.ddl-auto=update\r\n\r\n#Transactions\r\nspring.jpa.properties.hibernate.transaction.manager_lookup_class=org.hibernate.transaction.JBossTransactionManagerLookup\r\n```\r\n\r\nFull error stack trace when running spring-boot:run\r\n\r\n```\r\n[INFO] \r\n[INFO] --- spring-boot:3.2.0:run (default-cli) @ notes ---\r\n[INFO] Attaching agents: []\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.2.0)\r\n2023-11-28T13:01:56.786-03:00  INFO 15356 --- [           main] com.notes.notes.NotesApplication         : Starting NotesApplication using Java 18.0.1.1 with PID 15356 (C:\\Users\\tobia\\Documents\\_proyectos\\Java\\notes\\target\\classes started by tobia in C:\\Users\\tobia\\Documents\\_proyectos\\Java\\notes)\r\n2023-11-28T13:01:56.793-03:00  INFO 15356 --- [           main] com.notes.notes.NotesApplication         : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-11-28T13:01:57.391-03:00  INFO 15356 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2023-11-28T13:01:57.412-03:00  INFO 15356 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 JPA repository interfaces.\r\n2023-11-28T13:01:57.960-03:00  INFO 15356 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)\r\n2023-11-28T13:01:57.969-03:00  INFO 15356 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-11-28T13:01:57.970-03:00  INFO 15356 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]\r\n2023-11-28T13:01:58.037-03:00  INFO 15356 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-11-28T13:01:58.038-03:00  INFO 15356 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1202 ms\r\n2023-11-28T13:01:58.199-03:00  INFO 15356 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2023-11-28T13:01:58.265-03:00  INFO 15356 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.3.1.Final\r\n2023-11-28T13:01:58.301-03:00  INFO 15356 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled\r\n2023-11-28T13:01:58.567-03:00  INFO 15356 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\r\n2023-11-28T13:01:58.596-03:00  INFO 15356 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-11-28T13:01:58.762-03:00  INFO 15356 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6b2aafbc\r\n2023-11-28T13:01:58.763-03:00  INFO 15356 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2023-11-28T13:01:58.806-03:00  WARN 15356 --- [           main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.0 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 5.7.0. Check the community dialects project for available legacy versions.\r\n2023-11-28T13:01:58.810-03:00  WARN 15356 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using &#39;hibernate.dialect&#39; (remove the property setting and it will be selected by default)\r\n2023-11-28T13:01:59.640-03:00  INFO 15356 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set &#39;hibernate.transaction.jta.platform&#39; to enable JTA platform integration)\r\n2023-11-28T13:01:59.687-03:00  INFO 15356 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2023-11-28T13:01:59.774-03:00  WARN 15356 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n2023-11-28T13:01:59.800-03:00  INFO 15356 --- [           main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]\r\n2023-11-28T13:02:00.013-03:00  WARN 15356 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;platformTransactionManagerCustomizers&#39; defined in class path resource [org/springframework/boot/autoconfigure/transaction/TransactionManagerCustomizationAutoConfiguration.class]: Failed to instantiate [org.springframework.boot.autoconfigure.transaction.TransactionManagerCustomizers]: Factory method &#39;platformTransactionManagerCustomizers&#39; threw exception with message: Type org.springframework.transaction.ConfigurableTransactionManager not present\r\n2023-11-28T13:02:00.014-03:00  INFO 15356 --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2023-11-28T13:02:00.016-03:00  INFO 15356 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\r\n2023-11-28T13:02:00.023-03:00  INFO 15356 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\r\n2023-11-28T13:02:00.024-03:00  INFO 15356 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2023-11-28T13:02:00.035-03:00  INFO 15356 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : \r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-11-28T13:02:00.052-03:00 ERROR 15356 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;platformTransactionManagerCustomizers&#39; defined in class path resource [org/springframework/boot/autoconfigure/transaction/TransactionManagerCustomizationAutoConfiguration.class]: Failed to instantiate [org.springframework.boot.autoconfigure.transaction.TransactionManagerCustomizers]: Factory method &#39;platformTransactionManagerCustomizers&#39; threw exception with message: Type org.springframework.transaction.ConfigurableTransactionManager not present\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:643) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1166) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946) ~[spring-context-6.1.1.jar:6.1.1]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.1.1.jar:6.1.1]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.0.jar:3.2.0]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753) ~[spring-boot-3.2.0.jar:3.2.0]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455) ~[spring-boot-3.2.0.jar:3.2.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:323) ~[spring-boot-3.2.0.jar:3.2.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1342) ~[spring-boot-3.2.0.jar:3.2.0]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1331) ~[spring-boot-3.2.0.jar:3.2.0]\r\n\tat com.notes.notes.NotesApplication.main(NotesApplication.java:10) ~[classes/:na]\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.transaction.TransactionManagerCustomizers]: Factory method &#39;platformTransactionManagerCustomizers&#39; threw exception with message: Type org.springframework.transaction.ConfigurableTransactionManager not present\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:178) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\t... 19 common frames omitted\r\nCaused by: java.lang.TypeNotPresentException: Type org.springframework.transaction.ConfigurableTransactionManager not present\r\n\tat java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117) ~[na:na]\r\n\tat java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125) ~[na:na]\r\n\tat java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49) ~[na:na]\r\n\tat java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68) ~[na:na]\r\n\tat java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138) ~[na:na]\r\n\tat java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49) ~[na:na]\r\n\tat java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117) ~[na:na]\r\n\tat java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95) ~[na:na]\r\n\tat java.base/java.lang.Class.getGenericInterfaces(Class.java:1243) ~[na:na]\r\n\tat org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:517) ~[spring-core-6.1.1.jar:6.1.1]\r\n\tat org.springframework.core.ResolvableType.as(ResolvableType.java:465) ~[spring-core-6.1.1.jar:6.1.1]\r\n\tat org.springframework.core.ResolvableType.isAssignableFrom(ResolvableType.java:368) ~[spring-core-6.1.1.jar:6.1.1]\r\n\tat org.springframework.core.ResolvableType.isAssignableFrom(ResolvableType.java:282) ~[spring-core-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.GenericTypeAwareAutowireCandidateResolver.checkGenericTypeMatch(GenericTypeAwareAutowireCandidateResolver.java:155) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.GenericTypeAwareAutowireCandidateResolver.isAutowireCandidate(GenericTypeAwareAutowireCandidateResolver.java:69) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.annotation.QualifierAnnotationAutowireCandidateResolver.isAutowireCandidate(QualifierAnnotationAutowireCandidateResolver.java:147) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.isAutowireCandidate(DefaultListableBeanFactory.java:883) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.isAutowireCandidate(DefaultListableBeanFactory.java:842) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.isAutowireCandidate(DefaultListableBeanFactory.java:825) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1650) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1468) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1390) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.resolveStream(DefaultListableBeanFactory.java:2196) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.orderedStream(DefaultListableBeanFactory.java:2190) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\tat org.springframework.boot.autoconfigure.transaction.TransactionManagerCustomizationAutoConfiguration.platformTransactionManagerCustomizers(TransactionManagerCustomizationAutoConfiguration.java:44) ~[spring-boot-autoconfigure-3.2.0.jar:3.2.0]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140) ~[spring-beans-6.1.1.jar:6.1.1]\r\n\t... 20 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: org.springframework.transaction.ConfigurableTransactionManager\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\r\n\tat java.base/java.lang.Class.forName0(Native Method) ~[na:na]\r\n\tat java.base/java.lang.Class.forName(Class.java:488) ~[na:na]\r\n\tat java.base/java.lang.Class.forName(Class.java:467) ~[na:na]\r\n\tat java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114) ~[na:na]\r\n\t... 47 common frames omitted\r\n```\r\n\r\n\r\nI am following this tutorial (it is in spanish): https://www.youtube.com/watch?v=7vHzVN0EiQc\r\nI am stuck at minute 2:23\r\n\r\nWhen I know the real error cause, I will update the title to help anyone with the same problem :)\r\n\r\n\r\n\r\nI tried adding this lines to application.properties\r\n\r\n```\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n#JPA/Hibernate\r\nspring.jpa.show-sql=true\r\nspring.jpa.hibernate.ddl-auto=update\r\n\r\n#Transactions\r\nspring.jpa.properties.hibernate.transaction.manager_lookup_class=org.hibernate.transaction.JBossTransactionManagerLookup\r\n\r\n\r\n```\r\n\r\n\r\nI also checked that the Resources folder was properly marked (and it is).","link":"https://stackoverflow.com/questions/77565492/error-creating-bean-with-name-platformtransactionmanagercustomizers","title":"Error creating bean with name &#39;platformTransactionManagerCustomizers&#39;","body":"<p>I am learning how to use Spring Boot. I am trying to connect my application with my database, but I am not entirely sure why I am getting this error and how to fix it. I can't find anything online. Please help me. If you need more information, please ask me and I will do everything I can.</p>\n<p>pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;central&lt;/id&gt;\n            &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;groupId&gt;com.notes&lt;/groupId&gt;\n    &lt;artifactId&gt;notes&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;notes&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n            &lt;version&gt;6.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n            &lt;version&gt;6.0.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;8.0.33&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.30&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>application.properties, I do not know why but every propery except server.port is grayed out:</p>\n<pre><code>#GENERAL\nserver.port = 8080\n#\n#DATABASE\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.datasource.url=jdbc:mysql://localhost:3306/note_application\nspring.datasource.username=root\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n\n#JPA/Hibernate\nspring.jpa.show-sql=true\nspring.jpa.hibernate.ddl-auto=update\n\n#Transactions\nspring.jpa.properties.hibernate.transaction.manager_lookup_class=org.hibernate.transaction.JBossTransactionManagerLookup\n</code></pre>\n<p>Full error stack trace when running spring-boot:run</p>\n<pre><code>[INFO] \n[INFO] --- spring-boot:3.2.0:run (default-cli) @ notes ---\n[INFO] Attaching agents: []\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.2.0)\n2023-11-28T13:01:56.786-03:00  INFO 15356 --- [           main] com.notes.notes.NotesApplication         : Starting NotesApplication using Java 18.0.1.1 with PID 15356 (C:\\Users\\tobia\\Documents\\_proyectos\\Java\\notes\\target\\classes started by tobia in C:\\Users\\tobia\\Documents\\_proyectos\\Java\\notes)\n2023-11-28T13:01:56.793-03:00  INFO 15356 --- [           main] com.notes.notes.NotesApplication         : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-11-28T13:01:57.391-03:00  INFO 15356 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-11-28T13:01:57.412-03:00  INFO 15356 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 JPA repository interfaces.\n2023-11-28T13:01:57.960-03:00  INFO 15356 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)\n2023-11-28T13:01:57.969-03:00  INFO 15356 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-11-28T13:01:57.970-03:00  INFO 15356 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]\n2023-11-28T13:01:58.037-03:00  INFO 15356 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-11-28T13:01:58.038-03:00  INFO 15356 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1202 ms\n2023-11-28T13:01:58.199-03:00  INFO 15356 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-11-28T13:01:58.265-03:00  INFO 15356 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.3.1.Final\n2023-11-28T13:01:58.301-03:00  INFO 15356 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled\n2023-11-28T13:01:58.567-03:00  INFO 15356 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\n2023-11-28T13:01:58.596-03:00  INFO 15356 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-11-28T13:01:58.762-03:00  INFO 15356 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6b2aafbc\n2023-11-28T13:01:58.763-03:00  INFO 15356 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-11-28T13:01:58.806-03:00  WARN 15356 --- [           main] org.hibernate.dialect.Dialect            : HHH000511: The 5.5.0 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 5.7.0. Check the community dialects project for available legacy versions.\n2023-11-28T13:01:58.810-03:00  WARN 15356 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)\n2023-11-28T13:01:59.640-03:00  INFO 15356 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)\n2023-11-28T13:01:59.687-03:00  INFO 15356 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2023-11-28T13:01:59.774-03:00  WARN 15356 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2023-11-28T13:01:59.800-03:00  INFO 15356 --- [           main] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page: class path resource [static/index.html]\n2023-11-28T13:02:00.013-03:00  WARN 15356 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'platformTransactionManagerCustomizers' defined in class path resource [org/springframework/boot/autoconfigure/transaction/TransactionManagerCustomizationAutoConfiguration.class]: Failed to instantiate [org.springframework.boot.autoconfigure.transaction.TransactionManagerCustomizers]: Factory method 'platformTransactionManagerCustomizers' threw exception with message: Type org.springframework.transaction.ConfigurableTransactionManager not present\n2023-11-28T13:02:00.014-03:00  INFO 15356 --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'\n2023-11-28T13:02:00.016-03:00  INFO 15356 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\n2023-11-28T13:02:00.023-03:00  INFO 15356 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\n2023-11-28T13:02:00.024-03:00  INFO 15356 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2023-11-28T13:02:00.035-03:00  INFO 15356 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : \nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-11-28T13:02:00.052-03:00 ERROR 15356 --- [           main] o.s.boot.SpringApplication               : Application run failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'platformTransactionManagerCustomizers' defined in class path resource [org/springframework/boot/autoconfigure/transaction/TransactionManagerCustomizationAutoConfiguration.class]: Failed to instantiate [org.springframework.boot.autoconfigure.transaction.TransactionManagerCustomizers]: Factory method 'platformTransactionManagerCustomizers' threw exception with message: Type org.springframework.transaction.ConfigurableTransactionManager not present\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:643) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1166) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946) ~[spring-context-6.1.1.jar:6.1.1]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.1.1.jar:6.1.1]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.0.jar:3.2.0]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753) ~[spring-boot-3.2.0.jar:3.2.0]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455) ~[spring-boot-3.2.0.jar:3.2.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:323) ~[spring-boot-3.2.0.jar:3.2.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342) ~[spring-boot-3.2.0.jar:3.2.0]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331) ~[spring-boot-3.2.0.jar:3.2.0]\n    at com.notes.notes.NotesApplication.main(NotesApplication.java:10) ~[classes/:na]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.transaction.TransactionManagerCustomizers]: Factory method 'platformTransactionManagerCustomizers' threw exception with message: Type org.springframework.transaction.ConfigurableTransactionManager not present\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:178) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651) ~[spring-beans-6.1.1.jar:6.1.1]\n    ... 19 common frames omitted\nCaused by: java.lang.TypeNotPresentException: Type org.springframework.transaction.ConfigurableTransactionManager not present\n    at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117) ~[na:na]\n    at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125) ~[na:na]\n    at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49) ~[na:na]\n    at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68) ~[na:na]\n    at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138) ~[na:na]\n    at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49) ~[na:na]\n    at java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117) ~[na:na]\n    at java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95) ~[na:na]\n    at java.base/java.lang.Class.getGenericInterfaces(Class.java:1243) ~[na:na]\n    at org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:517) ~[spring-core-6.1.1.jar:6.1.1]\n    at org.springframework.core.ResolvableType.as(ResolvableType.java:465) ~[spring-core-6.1.1.jar:6.1.1]\n    at org.springframework.core.ResolvableType.isAssignableFrom(ResolvableType.java:368) ~[spring-core-6.1.1.jar:6.1.1]\n    at org.springframework.core.ResolvableType.isAssignableFrom(ResolvableType.java:282) ~[spring-core-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.GenericTypeAwareAutowireCandidateResolver.checkGenericTypeMatch(GenericTypeAwareAutowireCandidateResolver.java:155) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.GenericTypeAwareAutowireCandidateResolver.isAutowireCandidate(GenericTypeAwareAutowireCandidateResolver.java:69) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.annotation.QualifierAnnotationAutowireCandidateResolver.isAutowireCandidate(QualifierAnnotationAutowireCandidateResolver.java:147) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.isAutowireCandidate(DefaultListableBeanFactory.java:883) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.isAutowireCandidate(DefaultListableBeanFactory.java:842) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.isAutowireCandidate(DefaultListableBeanFactory.java:825) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1650) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1468) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1390) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.resolveStream(DefaultListableBeanFactory.java:2196) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.orderedStream(DefaultListableBeanFactory.java:2190) ~[spring-beans-6.1.1.jar:6.1.1]\n    at org.springframework.boot.autoconfigure.transaction.TransactionManagerCustomizationAutoConfiguration.platformTransactionManagerCustomizers(TransactionManagerCustomizationAutoConfiguration.java:44) ~[spring-boot-autoconfigure-3.2.0.jar:3.2.0]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:577) ~[na:na]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140) ~[spring-beans-6.1.1.jar:6.1.1]\n    ... 20 common frames omitted\nCaused by: java.lang.ClassNotFoundException: org.springframework.transaction.ConfigurableTransactionManager\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\n    at java.base/java.lang.Class.forName0(Native Method) ~[na:na]\n    at java.base/java.lang.Class.forName(Class.java:488) ~[na:na]\n    at java.base/java.lang.Class.forName(Class.java:467) ~[na:na]\n    at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114) ~[na:na]\n    ... 47 common frames omitted\n</code></pre>\n<p>I am following this tutorial (it is in spanish): <a href=\"https://www.youtube.com/watch?v=7vHzVN0EiQc\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=7vHzVN0EiQc</a>\nI am stuck at minute 2:23</p>\n<p>When I know the real error cause, I will update the title to help anyone with the same problem :)</p>\n<p>I tried adding this lines to application.properties</p>\n<pre><code>spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\n#JPA/Hibernate\nspring.jpa.show-sql=true\nspring.jpa.hibernate.ddl-auto=update\n\n#Transactions\nspring.jpa.properties.hibernate.transaction.manager_lookup_class=org.hibernate.transaction.JBossTransactionManagerLookup\n\n\n</code></pre>\n<p>I also checked that the Resources folder was properly marked (and it is).</p>\n"},{"tags":["java","spring-boot","maven","microservices","entry-point"],"comments":[{"score":2,"post_type":"question","creation_date":1701288582,"post_id":77574142,"comment_id":136758580,"body_markdown":"It is unclear without some example. A program has to have an entry point. If it&#39;s a container, how is it launched? With Spring, you can tell with the first line in the logs. You&#39;ll see `INFO 53986 --- [main] c.a.Application      : Starting Application using Java 11.0.15 on ...` Here, `c.a.Application#main` is the entry point.","link":"https://stackoverflow.com/questions/77574142/doubts-about-spring-boot-microservice-without-entry-point#comment136758580_77574142","body":"It is unclear without some example. A program has to have an entry point. If it&#39;s a container, how is it launched? With Spring, you can tell with the first line in the logs. You&#39;ll see <code>INFO 53986 --- [main] c.a.Application      : Starting Application using Java 11.0.15 on ...</code> Here, <code>c.a.Application#main</code> is the entry point."},{"score":0,"post_type":"question","creation_date":1701289286,"post_id":77574142,"comment_id":136758706,"body_markdown":"@ChristopherSchneider Thanks for the comment, how it works in my case is unfortunately unclear to me (I only have access to the git repository where the microservice code is, startup will be managed somewhere in the CI/CD process I imagine, where I don&#39;t have access), so I still tried to ask a general question, that is, in which cases is this approach used and how does it all actually work?","link":"https://stackoverflow.com/questions/77574142/doubts-about-spring-boot-microservice-without-entry-point#comment136758706_77574142","body":"@ChristopherSchneider Thanks for the comment, how it works in my case is unfortunately unclear to me (I only have access to the git repository where the microservice code is, startup will be managed somewhere in the CI/CD process I imagine, where I don&#39;t have access), so I still tried to ask a general question, that is, in which cases is this approach used and how does it all actually work?"},{"score":0,"post_type":"question","creation_date":1701291363,"post_id":77574142,"comment_id":136759017,"body_markdown":"Usage of &quot;container&quot; here is unclear. maybe you mean docker container? or servlet container? and who knows how this works, maybe this is set up with an old school web.xml that specifies a spring application context that is configured to do component scanning? are you even sure it is spring-boot? there is very little to go on here.","link":"https://stackoverflow.com/questions/77574142/doubts-about-spring-boot-microservice-without-entry-point#comment136759017_77574142","body":"Usage of &quot;container&quot; here is unclear. maybe you mean docker container? or servlet container? and who knows how this works, maybe this is set up with an old school web.xml that specifies a spring application context that is configured to do component scanning? are you even sure it is spring-boot? there is very little to go on here."},{"score":0,"post_type":"question","creation_date":1701292051,"post_id":77574142,"comment_id":136759125,"body_markdown":"@NathanHughes by container I meant docker container; in the pom.xml I have the spring boot dependencies so I would say yes for this","link":"https://stackoverflow.com/questions/77574142/doubts-about-spring-boot-microservice-without-entry-point#comment136759125_77574142","body":"@NathanHughes by container I meant docker container; in the pom.xml I have the spring boot dependencies so I would say yes for this"},{"score":0,"post_type":"question","creation_date":1701292355,"post_id":77574142,"comment_id":136759170,"body_markdown":"However, I didn&#39;t ask you to tell me how it works in my case, I wrote the first lines to justify my question, the question to the community is the general one of how to make a microservice work without those entry points and if something like this makes sense.","link":"https://stackoverflow.com/questions/77574142/doubts-about-spring-boot-microservice-without-entry-point#comment136759170_77574142","body":"However, I didn&#39;t ask you to tell me how it works in my case, I wrote the first lines to justify my question, the question to the community is the general one of how to make a microservice work without those entry points and if something like this makes sense."},{"score":1,"post_type":"question","creation_date":1701292357,"post_id":77574142,"comment_id":136759171,"body_markdown":"ok. so the thing that has to have an entry point is tomcat (or jetty or whatever is serving your application code). the spring-boot entry point is there so that it can boot up tomcat. if you were deploying to a running application server then you wouldn&#39;t need a spring boot entry point. although it would still be useful for running locally and getting rid of it is crazy.","link":"https://stackoverflow.com/questions/77574142/doubts-about-spring-boot-microservice-without-entry-point#comment136759171_77574142","body":"ok. so the thing that has to have an entry point is tomcat (or jetty or whatever is serving your application code). the spring-boot entry point is there so that it can boot up tomcat. if you were deploying to a running application server then you wouldn&#39;t need a spring boot entry point. although it would still be useful for running locally and getting rid of it is crazy."},{"score":0,"post_type":"question","creation_date":1701292716,"post_id":77574142,"comment_id":136759222,"body_markdown":"Ok, so if I have to deploy the microservice for example on an application server I may not have the entry point in spring boot, but if I had a main it wouldn&#39;t change anything anyway","link":"https://stackoverflow.com/questions/77574142/doubts-about-spring-boot-microservice-without-entry-point#comment136759222_77574142","body":"Ok, so if I have to deploy the microservice for example on an application server I may not have the entry point in spring boot, but if I had a main it wouldn&#39;t change anything anyway"}],"comment_count":7,"is_answered":false,"view_count":53,"answer_count":0,"score":0,"last_activity_date":1701292078,"creation_date":1701287752,"last_edit_date":1701292078,"question_id":77574142,"body_markdown":"Lately I found myself with a spring boot microservice maven project with a simple MVC (controller, service, repository) flow but without an entry point, i.e. without an annotated @SpringBootApplication class or a main method;\r\n\r\nNow I&#39;m not clear on the ways to make the microservice work and what the logical loop is that makes everything work.\r\n\r\nThe microservice in my case runs on a docker container and in the pom.xml file it has the declaration of a pom parent (I don&#39;t know if this last information has any relevance)\r\n\r\nHowever, with these premises my question is to understand, having a spring project of this type, what are the different ways to use it and put it into operation, and above all, what is the reason that leads to this choice? What are the benefits if any?\r\n\r\nI hope I have been as clear as possible, Thank you all in advance.","link":"https://stackoverflow.com/questions/77574142/doubts-about-spring-boot-microservice-without-entry-point","title":"Doubts about Spring Boot microservice without entry point","body":"<p>Lately I found myself with a spring boot microservice maven project with a simple MVC (controller, service, repository) flow but without an entry point, i.e. without an annotated @SpringBootApplication class or a main method;</p>\n<p>Now I'm not clear on the ways to make the microservice work and what the logical loop is that makes everything work.</p>\n<p>The microservice in my case runs on a docker container and in the pom.xml file it has the declaration of a pom parent (I don't know if this last information has any relevance)</p>\n<p>However, with these premises my question is to understand, having a spring project of this type, what are the different ways to use it and put it into operation, and above all, what is the reason that leads to this choice? What are the benefits if any?</p>\n<p>I hope I have been as clear as possible, Thank you all in advance.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"score":1,"post_type":"question","creation_date":1700496837,"post_id":77517386,"comment_id":136658802,"body_markdown":"could you share the stacktrace?","link":"https://stackoverflow.com/questions/77517386/http-request-returns-404-in-spring-boot#comment136658802_77517386","body":"could you share the stacktrace?"},{"score":0,"post_type":"question","creation_date":1700497271,"post_id":77517386,"comment_id":136658870,"body_markdown":"stacktrace doesnt show any errors obviously. can paste it if you really want","link":"https://stackoverflow.com/questions/77517386/http-request-returns-404-in-spring-boot#comment136658870_77517386","body":"stacktrace doesnt show any errors obviously. can paste it if you really want"},{"score":0,"post_type":"question","creation_date":1700497464,"post_id":77517386,"comment_id":136658910,"body_markdown":"You can [enable debug logging](https://docs.spring.io/spring-boot/docs/3.1.5/reference/html/features.html#features.logging) in your application and see what happens when it receives the request.","link":"https://stackoverflow.com/questions/77517386/http-request-returns-404-in-spring-boot#comment136658910_77517386","body":"You can <a href=\"https://docs.spring.io/spring-boot/docs/3.1.5/reference/html/features.html#features.logging\" rel=\"nofollow noreferrer\">enable debug logging</a> in your application and see what happens when it receives the request."},{"score":0,"post_type":"question","creation_date":1700499193,"post_id":77517386,"comment_id":136659245,"body_markdown":"Try adding an Accept header of text/plain. I don&#39;t know if that will fix it or not. From curl -H &quot;Accept: text/plain&quot;.","link":"https://stackoverflow.com/questions/77517386/http-request-returns-404-in-spring-boot#comment136659245_77517386","body":"Try adding an Accept header of text/plain. I don&#39;t know if that will fix it or not. From curl -H &quot;Accept: text/plain&quot;."},{"score":0,"post_type":"question","creation_date":1700499517,"post_id":77517386,"comment_id":136659311,"body_markdown":"Not sure if this is the same but in tomcat access log i get :\n0:0:0:0:0:0:0:1 - - [20/Nov/2023:17:56:21 +0100] &quot;GET /plain-text HTTP/1.1&quot; 404 700\n\nwhich adds basically nothing","link":"https://stackoverflow.com/questions/77517386/http-request-returns-404-in-spring-boot#comment136659311_77517386","body":"Not sure if this is the same but in tomcat access log i get : 0:0:0:0:0:0:0:1 - - [20/Nov/2023:17:56:21 +0100] &quot;GET /plain-text HTTP/1.1&quot; 404 700  which adds basically nothing"},{"score":0,"post_type":"question","creation_date":1700499932,"post_id":77517386,"comment_id":136659410,"body_markdown":"What is the context?  Maybe the URL needs to be: http://localhost:8080/demo/plain-text","link":"https://stackoverflow.com/questions/77517386/http-request-returns-404-in-spring-boot#comment136659410_77517386","body":"What is the context?  Maybe the URL needs to be: <a href=\"http://localhost:8080/demo/plain-text\" rel=\"nofollow noreferrer\">localhost:8080/demo/plain-text</a>"},{"score":0,"post_type":"question","creation_date":1700500496,"post_id":77517386,"comment_id":136659539,"body_markdown":"FWIW I recreated your application with the same structure (on Linux) and couldn&#39;t reproduce your issue. Maybe you&#39;ve got a firewall that&#39;s blocking port 8080?","link":"https://stackoverflow.com/questions/77517386/http-request-returns-404-in-spring-boot#comment136659539_77517386","body":"FWIW I recreated your application with the same structure (on Linux) and couldn&#39;t reproduce your issue. Maybe you&#39;ve got a firewall that&#39;s blocking port 8080?"},{"score":0,"post_type":"question","creation_date":1700559643,"post_id":77517386,"comment_id":136666649,"body_markdown":"Port 8080 is open and well, accept header didnt change anything","link":"https://stackoverflow.com/questions/77517386/http-request-returns-404-in-spring-boot#comment136666649_77517386","body":"Port 8080 is open and well, accept header didnt change anything"},{"score":1,"post_type":"question","creation_date":1700564689,"post_id":77517386,"comment_id":136667595,"body_markdown":"executing the project without tomcat works just fine, i guess its a configuration problem from my side though I cant figure out what","link":"https://stackoverflow.com/questions/77517386/http-request-returns-404-in-spring-boot#comment136667595_77517386","body":"executing the project without tomcat works just fine, i guess its a configuration problem from my side though I cant figure out what"},{"score":0,"post_type":"question","creation_date":1700566614,"post_id":77517386,"comment_id":136667925,"body_markdown":"Were you running a separate instance of Tomcat? By default, Spring Boot includes a Tomcat instance inside your application. So if your separate Tomcat instance was already listening on port 8080, your application would have failed to also listen on that port because that was already allocated to the separate Tomcat instance.","link":"https://stackoverflow.com/questions/77517386/http-request-returns-404-in-spring-boot#comment136667925_77517386","body":"Were you running a separate instance of Tomcat? By default, Spring Boot includes a Tomcat instance inside your application. So if your separate Tomcat instance was already listening on port 8080, your application would have failed to also listen on that port because that was already allocated to the separate Tomcat instance."},{"score":0,"post_type":"question","creation_date":1700641173,"post_id":77517386,"comment_id":136678266,"body_markdown":"I used a separate instance but even changing port didn&#39;t help it","link":"https://stackoverflow.com/questions/77517386/http-request-returns-404-in-spring-boot#comment136678266_77517386","body":"I used a separate instance but even changing port didn&#39;t help it"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701291716,"creation_date":1701291716,"answer_id":77574473,"question_id":77517386,"body_markdown":"You should use @RequestMapping annotation.\r\n\r\n    @RestController\r\n    @RequestMapping\r\n    public class ctrl \r\n    {\r\n    @GetMapping(value = &quot;/plain-text&quot;, produces = MediaType.TEXT_PLAIN_VALUE)\r\n    public ResponseEntity&lt;String&gt; getPlainText() \r\n    {\r\n        System.out.println(&quot;Hit me!&quot;);\r\n        return ResponseEntity.ok(&quot;This is plain text to be displayed in the page.&quot;);\r\n    }}","link":"https://stackoverflow.com/questions/77517386/http-request-returns-404-in-spring-boot/77574473#77574473","title":"HTTP Request returns 404 in Spring Boot","body":"<p>You should use @RequestMapping annotation.</p>\n<pre><code>@RestController\n@RequestMapping\npublic class ctrl \n{\n@GetMapping(value = &quot;/plain-text&quot;, produces = MediaType.TEXT_PLAIN_VALUE)\npublic ResponseEntity&lt;String&gt; getPlainText() \n{\n    System.out.println(&quot;Hit me!&quot;);\n    return ResponseEntity.ok(&quot;This is plain text to be displayed in the page.&quot;);\n}}\n</code></pre>\n"}],"comment_count":11,"is_answered":false,"view_count":87,"answer_count":1,"score":0,"last_activity_date":1701291716,"creation_date":1700496656,"last_edit_date":1700497071,"question_id":77517386,"body_markdown":"I have the simplest of architectures as follows, just for the sake of testing :\r\n\r\n![Project architecture](https://i.stack.imgur.com/6E4b0.png)\r\n\r\nctrl.java :\r\n\r\n```\r\n@RestController\r\npublic class ctrl {\r\n    @GetMapping(value = &quot;/plain-text&quot;, produces = MediaType.TEXT_PLAIN_VALUE)\r\n    public ResponseEntity&lt;String&gt; getPlainText() {\r\n        System.out.println(&quot;Hit me!&quot;);\r\n        return ResponseEntity.ok(&quot;This is plain text to be displayed in the page.&quot;);\r\n    }\r\n}\r\n\r\n```\r\nDemoApplication.java :\r\n\r\n```\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(DemoApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nRequesting http://localhost:8080/plain-text\r\n\r\nreturns a 404 error. I can&#39;t wrap my head around it.\r\n\r\nI have all the needed dependencies : JPA, Spring Web, Spring starter web...etc\r\n","link":"https://stackoverflow.com/questions/77517386/http-request-returns-404-in-spring-boot","title":"HTTP Request returns 404 in Spring Boot","body":"<p>I have the simplest of architectures as follows, just for the sake of testing :</p>\n<p><img src=\"https://i.stack.imgur.com/6E4b0.png\" alt=\"Project architecture\" /></p>\n<p>ctrl.java :</p>\n<pre><code>@RestController\npublic class ctrl {\n    @GetMapping(value = &quot;/plain-text&quot;, produces = MediaType.TEXT_PLAIN_VALUE)\n    public ResponseEntity&lt;String&gt; getPlainText() {\n        System.out.println(&quot;Hit me!&quot;);\n        return ResponseEntity.ok(&quot;This is plain text to be displayed in the page.&quot;);\n    }\n}\n\n</code></pre>\n<p>DemoApplication.java :</p>\n<pre><code>@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>Requesting http://localhost:8080/plain-text</p>\n<p>returns a 404 error. I can't wrap my head around it.</p>\n<p>I have all the needed dependencies : JPA, Spring Web, Spring starter web...etc</p>\n"},{"tags":["java","android","hotspot"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1677077312,"post_id":75533571,"comment_id":133266426,"body_markdown":"Does this work only if the other devices are Android as well?","link":"https://stackoverflow.com/questions/75531586/how-can-i-programmatically-get-information-about-local-hotspot/75533571#comment133266426_75533571","body":"Does this work only if the other devices are Android as well?"},{"score":0,"post_type":"answer","creation_date":1677081775,"post_id":75533571,"comment_id":133268025,"body_markdown":"Docs doesn&#39;t say it shouldn&#39;t. Also check [WiFi Direct](https://developer.android.com/training/connect-devices-wirelessly/wifi-direct) as well.","link":"https://stackoverflow.com/questions/75531586/how-can-i-programmatically-get-information-about-local-hotspot/75533571#comment133268025_75533571","body":"Docs doesn&#39;t say it shouldn&#39;t. Also check <a href=\"https://developer.android.com/training/connect-devices-wirelessly/wifi-direct\" rel=\"nofollow noreferrer\">WiFi Direct</a> as well."}],"comment_count":2,"score":0,"last_activity_date":1677073419,"creation_date":1677073419,"answer_id":75533571,"question_id":75531586,"body_markdown":"One possible solution is to use the Android Network Service Discovery (NSD) API [doc][1]. NSD allows devices on a local network to discover and communicate with each other without requiring any configuration. With NSD, you can advertise your service (e.g., your mobile hotspot) and discover other devices that are connected to it.\r\n\r\nHere is an example code to advertise your service:\r\n\r\n\r\n\r\n    NsdServiceInfo serviceInfo  = new NsdServiceInfo();\r\n    serviceInfo.setServiceName(&quot;My Hotspot&quot;);\r\n    serviceInfo.setServiceType(&quot;_http._tcp.&quot;);\r\n    serviceInfo.setPort(8080);\r\n    NsdManager nsdManager = (NsdManager) getSystemService(Context.NSD_SERVICE);\r\n    nsdManager.registerService(serviceInfo, NsdManager.PROTOCOL_DNS_SD, new NsdManager.RegistrationListener() {\r\n        @Override\r\n        public void onServiceRegistered(NsdServiceInfo serviceInfo) {\r\n            Log.d(TAG, &quot;Service registered: &quot; + serviceInfo);\r\n        }\r\n    \r\n        @Override\r\n        public void onRegistrationFailed(NsdServiceInfo serviceInfo, int errorCode) {\r\n            Log.e(TAG, &quot;Registration failed: &quot; + errorCode);\r\n        }\r\n    \r\n        @Override\r\n        public void onServiceUnregistered(NsdServiceInfo serviceInfo) {\r\n            Log.d(TAG, &quot;Service unregistered: &quot; + serviceInfo);\r\n        }\r\n    \r\n        @Override\r\n        public void onUnregistrationFailed(NsdServiceInfo serviceInfo, int errorCode) {\r\n            Log.e(TAG, &quot;Unregistration failed: &quot; + errorCode);\r\n        }\r\n    });\r\n\r\nThis code advertises a service with the name &quot;My Hotspot&quot; and the type &quot;_http._tcp.&quot; on port 8080. Other devices on the local network can discover this service by using the NSD API.\r\n\r\nTo discover other devices that are connected to your hotspot, you can use the NSD discovery API:\r\n\r\n\r\n    nsdManager.discoverServices(&quot;_http._tcp.&quot;, NsdManager.PROTOCOL_DNS_SD, new NsdManager.DiscoveryListener() {\r\n        @Override\r\n        public void onStartDiscoveryFailed(String serviceType, int errorCode) {\r\n            Log.e(TAG, &quot;Discovery failed: &quot; + errorCode);\r\n        }\r\n    \r\n        @Override\r\n        public void onStopDiscoveryFailed(String serviceType, int errorCode) {\r\n            Log.e(TAG, &quot;Discovery stopped: &quot; + errorCode);\r\n        }\r\n    \r\n        @Override\r\n        public void onDiscoveryStarted(String serviceType) {\r\n            Log.d(TAG, &quot;Discovery started&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void onDiscoveryStopped(String serviceType) {\r\n            Log.d(TAG, &quot;Discovery stopped&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void onServiceFound(NsdServiceInfo serviceInfo) {\r\n            Log.d(TAG, &quot;Service found: &quot; + serviceInfo);\r\n            // Get the IP address of the device that advertises this service\r\n            InetAddress deviceAddress = serviceInfo.getHost();\r\n            String deviceIpAddress = deviceAddress.getHostAddress();\r\n            // Do something with the IP address\r\n        }\r\n    \r\n        @Override\r\n        public void onServiceLost(NsdServiceInfo serviceInfo) {\r\n            Log.d(TAG, &quot;Service lost: &quot; + serviceInfo);\r\n        }\r\n    });\r\n\r\nThis code discovers services of the type &quot;_http._tcp.&quot; and logs the IP address of the device that advertises each service. You can use this IP address to communicate with the device.\r\n\r\nNote that NSD requires the ACCESS_WIFI_STATE and CHANGE_WIFI_STATE permissions, as well as the NSD API level 16 or higher.\r\n\r\n\r\n  [1]: https://developer.android.com/training/connect-devices-wirelessly/nsd\r\n\r\n","link":"https://stackoverflow.com/questions/75531586/how-can-i-programmatically-get-information-about-local-hotspot/75533571#75533571","title":"How can I programmatically get information about local hotspot?","body":"<p>One possible solution is to use the Android Network Service Discovery (NSD) API <a href=\"https://developer.android.com/training/connect-devices-wirelessly/nsd\" rel=\"nofollow noreferrer\">doc</a>. NSD allows devices on a local network to discover and communicate with each other without requiring any configuration. With NSD, you can advertise your service (e.g., your mobile hotspot) and discover other devices that are connected to it.</p>\n<p>Here is an example code to advertise your service:</p>\n<pre><code>NsdServiceInfo serviceInfo  = new NsdServiceInfo();\nserviceInfo.setServiceName(&quot;My Hotspot&quot;);\nserviceInfo.setServiceType(&quot;_http._tcp.&quot;);\nserviceInfo.setPort(8080);\nNsdManager nsdManager = (NsdManager) getSystemService(Context.NSD_SERVICE);\nnsdManager.registerService(serviceInfo, NsdManager.PROTOCOL_DNS_SD, new NsdManager.RegistrationListener() {\n    @Override\n    public void onServiceRegistered(NsdServiceInfo serviceInfo) {\n        Log.d(TAG, &quot;Service registered: &quot; + serviceInfo);\n    }\n\n    @Override\n    public void onRegistrationFailed(NsdServiceInfo serviceInfo, int errorCode) {\n        Log.e(TAG, &quot;Registration failed: &quot; + errorCode);\n    }\n\n    @Override\n    public void onServiceUnregistered(NsdServiceInfo serviceInfo) {\n        Log.d(TAG, &quot;Service unregistered: &quot; + serviceInfo);\n    }\n\n    @Override\n    public void onUnregistrationFailed(NsdServiceInfo serviceInfo, int errorCode) {\n        Log.e(TAG, &quot;Unregistration failed: &quot; + errorCode);\n    }\n});\n</code></pre>\n<p>This code advertises a service with the name &quot;My Hotspot&quot; and the type &quot;_http._tcp.&quot; on port 8080. Other devices on the local network can discover this service by using the NSD API.</p>\n<p>To discover other devices that are connected to your hotspot, you can use the NSD discovery API:</p>\n<pre><code>nsdManager.discoverServices(&quot;_http._tcp.&quot;, NsdManager.PROTOCOL_DNS_SD, new NsdManager.DiscoveryListener() {\n    @Override\n    public void onStartDiscoveryFailed(String serviceType, int errorCode) {\n        Log.e(TAG, &quot;Discovery failed: &quot; + errorCode);\n    }\n\n    @Override\n    public void onStopDiscoveryFailed(String serviceType, int errorCode) {\n        Log.e(TAG, &quot;Discovery stopped: &quot; + errorCode);\n    }\n\n    @Override\n    public void onDiscoveryStarted(String serviceType) {\n        Log.d(TAG, &quot;Discovery started&quot;);\n    }\n\n    @Override\n    public void onDiscoveryStopped(String serviceType) {\n        Log.d(TAG, &quot;Discovery stopped&quot;);\n    }\n\n    @Override\n    public void onServiceFound(NsdServiceInfo serviceInfo) {\n        Log.d(TAG, &quot;Service found: &quot; + serviceInfo);\n        // Get the IP address of the device that advertises this service\n        InetAddress deviceAddress = serviceInfo.getHost();\n        String deviceIpAddress = deviceAddress.getHostAddress();\n        // Do something with the IP address\n    }\n\n    @Override\n    public void onServiceLost(NsdServiceInfo serviceInfo) {\n        Log.d(TAG, &quot;Service lost: &quot; + serviceInfo);\n    }\n});\n</code></pre>\n<p>This code discovers services of the type &quot;_http._tcp.&quot; and logs the IP address of the device that advertises each service. You can use this IP address to communicate with the device.</p>\n<p>Note that NSD requires the ACCESS_WIFI_STATE and CHANGE_WIFI_STATE permissions, as well as the NSD API level 16 or higher.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":454,"answer_count":1,"score":0,"last_activity_date":1701291417,"creation_date":1677062662,"last_edit_date":1701291417,"question_id":75531586,"body_markdown":"I need to perform a scan of the devices connected to the hotspot I broadcast with my mobile in order to start a communication only with these devices. The basic information I need is the broadcast address, but any other information leading to that would be good (the IP address of a connected device, for instance).\r\n\r\nOn my mobile it is actually straightforward: the NetworkInterface has always the name &quot;wlan1&quot;, so it is pretty easy to get IP information (&quot;wlan0&quot; being the main WiFi interface).\r\n\r\nHowever this name might change on other mobiles (for instance becoming &quot;ap0&quot; or &quot;ap1&quot;).\r\nEven worse, on one model I have verified that if both WiFi and hotspot are enabled, they are respectively &quot;wlan0&quot; and &quot;wlan1&quot; but, if I turn off WiFi, the hotspot interface becomes &quot;wlan0&quot;!\r\n\r\nThis is the code I use:\r\n\r\n     for (Enumeration&lt;InetAddress&gt; enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements(); ) {\r\n                    InetAddress inetAddress = enumIpAddr.nextElement();\r\n                    if (!inetAddress.isLoopbackAddress() &amp;&amp; inetAddress instanceof Inet4Address) {\r\n                        String ipadd = inetAddress.getHostAddress();\r\n                        if (name.equals(&quot;wlan0&quot;) || name.equals(&quot;wlan1&quot;))\r\n                        {\r\n                            System.out.println(&quot;Found WLAN= &quot; + name);\r\n                            System.out.println(&quot;IP Address = &quot; + ipadd);\r\n                            for (InterfaceAddress interfaceAddress : intf.getInterfaceAddresses()) {\r\n                                if (interfaceAddress != null) {\r\n                                    InetAddress broadcastadd = interfaceAddress.getBroadcast();\r\n                                    if (broadcastadd != null) {\r\n                                        found_bcast_address = broadcastadd.toString();\r\n                                        found_bcast_address = found_bcast_address.substring(1);\r\n                                        System.out.println(&quot;Broadcast Address = &quot; + found_bcast_address);\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\nThe main problem is that I do not know which is the name of the Interface related to the hotspot, so with this code I don&#39;t know if the device that will answer when I send messages to the broadcast address is connected to my mobile hotspot or the WLAN my mobile is connected.\r\n\r\nIn other posts I&#39;ve seen solutions based on:\r\n\r\n1) reading the file &quot;/proc/net/arp&quot; -&gt; but on modern Android this is not feasible\r\n2) using reflection and calling &quot;getWifiApConfiguration&quot;, but again this is not feasible anymore on modern Android\r\n\r\nAny way to get this information on recent Android?","link":"https://stackoverflow.com/questions/75531586/how-can-i-programmatically-get-information-about-local-hotspot","title":"How can I programmatically get information about local hotspot?","body":"<p>I need to perform a scan of the devices connected to the hotspot I broadcast with my mobile in order to start a communication only with these devices. The basic information I need is the broadcast address, but any other information leading to that would be good (the IP address of a connected device, for instance).</p>\n<p>On my mobile it is actually straightforward: the NetworkInterface has always the name &quot;wlan1&quot;, so it is pretty easy to get IP information (&quot;wlan0&quot; being the main WiFi interface).</p>\n<p>However this name might change on other mobiles (for instance becoming &quot;ap0&quot; or &quot;ap1&quot;).\nEven worse, on one model I have verified that if both WiFi and hotspot are enabled, they are respectively &quot;wlan0&quot; and &quot;wlan1&quot; but, if I turn off WiFi, the hotspot interface becomes &quot;wlan0&quot;!</p>\n<p>This is the code I use:</p>\n<pre><code> for (Enumeration&lt;InetAddress&gt; enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements(); ) {\n                InetAddress inetAddress = enumIpAddr.nextElement();\n                if (!inetAddress.isLoopbackAddress() &amp;&amp; inetAddress instanceof Inet4Address) {\n                    String ipadd = inetAddress.getHostAddress();\n                    if (name.equals(&quot;wlan0&quot;) || name.equals(&quot;wlan1&quot;))\n                    {\n                        System.out.println(&quot;Found WLAN= &quot; + name);\n                        System.out.println(&quot;IP Address = &quot; + ipadd);\n                        for (InterfaceAddress interfaceAddress : intf.getInterfaceAddresses()) {\n                            if (interfaceAddress != null) {\n                                InetAddress broadcastadd = interfaceAddress.getBroadcast();\n                                if (broadcastadd != null) {\n                                    found_bcast_address = broadcastadd.toString();\n                                    found_bcast_address = found_bcast_address.substring(1);\n                                    System.out.println(&quot;Broadcast Address = &quot; + found_bcast_address);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n</code></pre>\n<p>The main problem is that I do not know which is the name of the Interface related to the hotspot, so with this code I don't know if the device that will answer when I send messages to the broadcast address is connected to my mobile hotspot or the WLAN my mobile is connected.</p>\n<p>In other posts I've seen solutions based on:</p>\n<ol>\n<li>reading the file &quot;/proc/net/arp&quot; -&gt; but on modern Android this is not feasible</li>\n<li>using reflection and calling &quot;getWifiApConfiguration&quot;, but again this is not feasible anymore on modern Android</li>\n</ol>\n<p>Any way to get this information on recent Android?</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-security"],"comments":[{"score":0,"post_type":"question","creation_date":1701291387,"post_id":77574440,"comment_id":136759022,"body_markdown":"You could try to temporarily include both Java EE and Jakarta EE dependencies and then remove the Java EE dependencies before running the project (after you have done the migration so far that it compiles). But for Spring itself, you either need to use Spring Boot 2 or Spring Boot 3. Also, you might want to use half-automated migration tools to take care about things like changing package names.","link":"https://stackoverflow.com/questions/77574440/springboot-3-migration#comment136759022_77574440","body":"You could try to temporarily include both Java EE and Jakarta EE dependencies and then remove the Java EE dependencies before running the project (after you have done the migration so far that it compiles). But for Spring itself, you either need to use Spring Boot 2 or Spring Boot 3. Also, you might want to use half-automated migration tools to take care about things like changing package names."},{"score":1,"post_type":"question","creation_date":1701291569,"post_id":77574440,"comment_id":136759053,"body_markdown":"For example, the [migration guide](https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide) mentions the following tools that might help with migration: https://docs.openrewrite.org/recipes/java/migrate/jakarta/javaxmigrationtojakarta, https://github.com/spring-projects-experimental/spring-boot-migrator and https://blog.jetbrains.com/idea/2021/06/intellij-idea-eap-6/","link":"https://stackoverflow.com/questions/77574440/springboot-3-migration#comment136759053_77574440","body":"For example, the <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide\" rel=\"nofollow noreferrer\">migration guide</a> mentions the following tools that might help with migration: <a href=\"https://docs.openrewrite.org/recipes/java/migrate/jakarta/javaxmigrationtojakarta\" rel=\"nofollow noreferrer\">docs.openrewrite.org/recipes/java/migrate/jakarta/&hellip;</a>, <a href=\"https://github.com/spring-projects-experimental/spring-boot-migrator\" rel=\"nofollow noreferrer\">github.com/spring-projects-experimental/spring-boot-migrator</a> and <a href=\"https://blog.jetbrains.com/idea/2021/06/intellij-idea-eap-6/\" rel=\"nofollow noreferrer\">blog.jetbrains.com/idea/2021/06/intellij-idea-eap-6</a>"},{"score":1,"post_type":"question","creation_date":1701310942,"post_id":77574440,"comment_id":136761146,"body_markdown":"First what you need is to make sure that your project is working with JDK17, since that is the lowest JDK required for Spring Boot 3, after your project is compiling and your tests are not failing, then you can upgrade the libraries. At least that is what we did when we upgraded our project.","link":"https://stackoverflow.com/questions/77574440/springboot-3-migration#comment136761146_77574440","body":"First what you need is to make sure that your project is working with JDK17, since that is the lowest JDK required for Spring Boot 3, after your project is compiling and your tests are not failing, then you can upgrade the libraries. At least that is what we did when we upgraded our project."},{"score":1,"post_type":"question","creation_date":1701327348,"post_id":77574440,"comment_id":136762514,"body_markdown":"You can upgrade to the new Spring Security configuration already (the old one is already deprecated in Spring Boot 2.7). Moving to JDK17 is also already possible.  JakartaEE upgrade is not something you can easily do that has to be a big bang.","link":"https://stackoverflow.com/questions/77574440/springboot-3-migration#comment136762514_77574440","body":"You can upgrade to the new Spring Security configuration already (the old one is already deprecated in Spring Boot 2.7). Moving to JDK17 is also already possible.  JakartaEE upgrade is not something you can easily do that has to be a big bang."},{"score":0,"post_type":"question","creation_date":1701428314,"post_id":77574440,"comment_id":136777125,"body_markdown":"Project has been upgraded to SpringBoot 2.7.17 JDK17, all tests etc + project run is OK. I&#39;ve solved all depreacted like WebSecurityConfigurerAdapter...\n\nI believe effectilvy that migration to SpringBoot 3 has to be BigBang","link":"https://stackoverflow.com/questions/77574440/springboot-3-migration#comment136777125_77574440","body":"Project has been upgraded to SpringBoot 2.7.17 JDK17, all tests etc + project run is OK. I&#39;ve solved all depreacted like WebSecurityConfigurerAdapter...  I believe effectilvy that migration to SpringBoot 3 has to be BigBang"}],"comment_count":5,"is_answered":false,"view_count":74,"answer_count":0,"score":-2,"last_activity_date":1701291310,"creation_date":1701291310,"question_id":77574440,"body_markdown":"I&#39;ve upgraded all my dependencies to go up to SpringBoot 2.7 and now I want to upgraded to SpringBoot 3.x. I saw that I&#39;ll to change javax.persistence.* and javax.servlet.* to jakarta.... and also update my SpringSecurity antMatchers to requestMasters.\r\n\r\nBut As I&#39;m trying to upgrade properly, commiting subject (Security, persistance, servlet) one by bon I wonder if there is a way to upgrade those things and preparing upgrade to SpringBoot 3 before upgrading it directly or if I have to upgrade and resolve all dependencies.\r\n\r\nThanks on advance.","link":"https://stackoverflow.com/questions/77574440/springboot-3-migration","title":"SpringBoot 3 migration","body":"<p>I've upgraded all my dependencies to go up to SpringBoot 2.7 and now I want to upgraded to SpringBoot 3.x. I saw that I'll to change javax.persistence.* and javax.servlet.* to jakarta.... and also update my SpringSecurity antMatchers to requestMasters.</p>\n<p>But As I'm trying to upgrade properly, commiting subject (Security, persistance, servlet) one by bon I wonder if there is a way to upgrade those things and preparing upgrade to SpringBoot 3 before upgrading it directly or if I have to upgrade and resolve all dependencies.</p>\n<p>Thanks on advance.</p>\n"},{"tags":["java","android","android-camera"],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701291126,"creation_date":1701291126,"answer_id":77574429,"question_id":77574380,"body_markdown":"Set an EXTRA_SIZE_LIMIT.  This is the maximum size in bytes.  Now its possible the camera app will ignore this flag (it&#39;s a request, not an enforced value), but it *should* work for most camera apps.","link":"https://stackoverflow.com/questions/77574380/android-camera-is-it-possible-to-restrict-image-size/77574429#77574429","title":"Android camera - Is it possible to restrict image size?","body":"<p>Set an EXTRA_SIZE_LIMIT.  This is the maximum size in bytes.  Now its possible the camera app will ignore this flag (it's a request, not an enforced value), but it <em>should</em> work for most camera apps.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":19,"answer_count":1,"score":0,"last_activity_date":1701291126,"creation_date":1701290576,"question_id":77574380,"body_markdown":"I am working on this app On android phone,    \r\nOn newer phones the images that are captured are sometimes 10MB -&gt; 8000 x 6000  pixels.     \r\nAnd this is an overkill for our application and usage. we need a smaller image size      \r\n\r\nThis is the code that captures the images,    \r\nIs it possible to restrict the camera to a specific dimensions ?   \r\nlets say maximum image size 4032 x 3024    \r\nOr   \r\nIs it possible to restrict the camera to a maximum image size 3MB  \r\nThank you!\r\n\r\n    private void dispatchTakePictureIntent() {\r\n        Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n        // Ensure that there&#39;s a camera activity to handle the intent\r\n        if (takePictureIntent.resolveActivity(getPackageManager()) != null) {\r\n            // Create the File where the photo should go\r\n            File photoFile = null;\r\n            try {\r\n                photoFile = createImageFile();\r\n            } catch (IOException ex) {\r\n                // Error occurred while creating the File\r\n                ...\r\n            }\r\n            // Continue only if the File was successfully created\r\n            if (photoFile != null) {\r\n                Uri photoURI = FileProvider.getUriForFile(this,\r\n                                                      &quot;com.example.android.fileprovider&quot;,\r\n                                                      photoFile);\r\n                takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoURI);\r\n                startActivityForResult(takePictureIntent, REQUEST_IMAGE_CAPTURE);\r\n            }\r\n        }\r\n    }\r\n\r\n","link":"https://stackoverflow.com/questions/77574380/android-camera-is-it-possible-to-restrict-image-size","title":"Android camera - Is it possible to restrict image size?","body":"<p>I am working on this app On android phone,<br />\nOn newer phones the images that are captured are sometimes 10MB -&gt; 8000 x 6000  pixels.<br />\nAnd this is an overkill for our application and usage. we need a smaller image size</p>\n<p>This is the code that captures the images,<br />\nIs it possible to restrict the camera to a specific dimensions ?<br />\nlets say maximum image size 4032 x 3024<br />\nOr<br />\nIs it possible to restrict the camera to a maximum image size 3MB<br />\nThank you!</p>\n<pre><code>private void dispatchTakePictureIntent() {\n    Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n    // Ensure that there's a camera activity to handle the intent\n    if (takePictureIntent.resolveActivity(getPackageManager()) != null) {\n        // Create the File where the photo should go\n        File photoFile = null;\n        try {\n            photoFile = createImageFile();\n        } catch (IOException ex) {\n            // Error occurred while creating the File\n            ...\n        }\n        // Continue only if the File was successfully created\n        if (photoFile != null) {\n            Uri photoURI = FileProvider.getUriForFile(this,\n                                                  &quot;com.example.android.fileprovider&quot;,\n                                                  photoFile);\n            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoURI);\n            startActivityForResult(takePictureIntent, REQUEST_IMAGE_CAPTURE);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","list","templates","integer","comparator"],"comments":[{"score":0,"post_type":"question","creation_date":1701238358,"post_id":77568900,"comment_id":136749407,"body_markdown":"What&#39;s the logic for the order of `listC`? It&#39;s not clear from your description, nor from your code.","link":"https://stackoverflow.com/questions/77568900/one-list-acts-as-a-template-to-sort-another-list#comment136749407_77568900","body":"What&#39;s the logic for the order of <code>listC</code>? It&#39;s not clear from your description, nor from your code."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701240759,"creation_date":1701240759,"answer_id":77569115,"question_id":77568900,"body_markdown":"I think, this code may help you\r\n\r\n```Java\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        List&lt;Integer&gt; listA = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 6, 5, 4, 3, 2, 1, 0);\r\n        List&lt;Integer&gt; listB = Arrays.asList(0,106,107,101,105,102,102,103,104,106,105,103,101,104);\r\n\r\n        // ensure, that sizes are equal\r\n        assert (listA.size() == listB.size());\r\n\r\n        // sort for better mapping\r\n        List&lt;Integer&gt; listAValues = listA.stream().sorted().toList();\r\n        List&lt;Integer&gt; listBValues = listB.stream().sorted().toList();\r\n\r\n        // map to ensure, that template completes\r\n        Map&lt;Integer, Integer&gt; template = new HashMap&lt;&gt;();\r\n        Set&lt;Integer&gt; processedB = new HashSet&lt;&gt;();\r\n        for (int i = 0; i &lt; listAValues.size(); i++) {\r\n            Integer key = listAValues.get(i);\r\n            Integer value = listBValues.get(i);\r\n            if (template.containsKey(key)) {\r\n                assert(template.get(key).equals(value));\r\n            } else {\r\n                assert(!processedB.contains(value));\r\n                template.put(key, value);\r\n                processedB.add(value);\r\n            }\r\n        }\r\n\r\n        // rearrange\r\n        List&lt;Integer&gt; rearrangedListB = listA\r\n                .stream()\r\n                .map(template::get)\r\n                .toList();\r\n        System.err.println(&quot;Rearranged listB: &quot; + rearrangedListB);\r\n    }\r\n}\r\n```\r\n\r\nI map values from A to B + ensure, that there is a correct number of every value. After I&#39;ve done this I rearrange List B.\r\n\r\nThis is, what code printed for me\r\n\r\n```\r\nRearranged listB: [101, 102, 103, 104, 105, 106, 107, 106, 105, 104, 103, 102, 101, 0]\r\n```","link":"https://stackoverflow.com/questions/77568900/one-list-acts-as-a-template-to-sort-another-list/77569115#77569115","title":"One list acts as a template to sort another list","body":"<p>I think, this code may help you</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        List&lt;Integer&gt; listA = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 6, 5, 4, 3, 2, 1, 0);\n        List&lt;Integer&gt; listB = Arrays.asList(0,106,107,101,105,102,102,103,104,106,105,103,101,104);\n\n        // ensure, that sizes are equal\n        assert (listA.size() == listB.size());\n\n        // sort for better mapping\n        List&lt;Integer&gt; listAValues = listA.stream().sorted().toList();\n        List&lt;Integer&gt; listBValues = listB.stream().sorted().toList();\n\n        // map to ensure, that template completes\n        Map&lt;Integer, Integer&gt; template = new HashMap&lt;&gt;();\n        Set&lt;Integer&gt; processedB = new HashSet&lt;&gt;();\n        for (int i = 0; i &lt; listAValues.size(); i++) {\n            Integer key = listAValues.get(i);\n            Integer value = listBValues.get(i);\n            if (template.containsKey(key)) {\n                assert(template.get(key).equals(value));\n            } else {\n                assert(!processedB.contains(value));\n                template.put(key, value);\n                processedB.add(value);\n            }\n        }\n\n        // rearrange\n        List&lt;Integer&gt; rearrangedListB = listA\n                .stream()\n                .map(template::get)\n                .toList();\n        System.err.println(&quot;Rearranged listB: &quot; + rearrangedListB);\n    }\n}\n</code></pre>\n<p>I map values from A to B + ensure, that there is a correct number of every value. After I've done this I rearrange List B.</p>\n<p>This is, what code printed for me</p>\n<pre><code>Rearranged listB: [101, 102, 103, 104, 105, 106, 107, 106, 105, 104, 103, 102, 101, 0]\n</code></pre>\n"}],"comment_count":1,"is_answered":true,"view_count":39,"answer_count":1,"score":0,"last_activity_date":1701290955,"creation_date":1701238030,"last_edit_date":1701290955,"question_id":77568900,"body_markdown":"Lets say there are two lists:\r\n\r\n`List&lt;Integer&gt; listA = Arrays.asList(1,2,3,4,5,6,7,6,5,4,3,2,1,0);`\r\nThis list is a template for sorting another `listB`.\r\n\r\n`List&lt;Integer&gt; listB = Arrays.asList(0,106,107,101,105,102,102,103,104,106,105,103,101,104);`\r\nThis list on the other hand is unsorted.\r\n\r\nThe final list lets say `listC` should be having the order (101,102,103,104,106,107,106,105,104,103,102,101,0)? I am using comparators but it fails for different usecases?\r\n\r\n```java\r\npublic class JavaComparators {\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tList&lt;Integer&gt; listA = Arrays.asList(1,2,3,4,5,6,7,6,5,4,3,2,1,0);\r\n\t\tList&lt;Integer&gt; listB = Arrays.asList(0,106,107,101,105,102,102,103,104,106,105,103,101,104);\r\n\t\t\r\n\t\tSystem.err.println(listA);\r\n\t\tSystem.err.println(listB);\r\n\r\n        // Create a set of elements present in listB for faster lookup\r\n        Set&lt;Integer&gt; setB = new HashSet&lt;&gt;(listB);\r\n\r\n        // Sort listA based on the index in listB or use a default index if not present\r\n        listB.sort(Comparator.comparingInt(a -&gt; {\r\n            int index = listA.indexOf(a);\r\n            \r\n            if (index == -1) {\r\n                // If the element is not in listB, check for nearby values\r\n                int indexPlusOne = listA.indexOf(a + 100);\r\n                int indexMinusOne = listA.indexOf(a - 100);\r\n\r\n                if (indexPlusOne != -1) {\r\n                    return indexPlusOne;\r\n                } else if (indexMinusOne != -1) {\r\n                    return indexMinusOne;\r\n                } else {\r\n                    // Use a default index if not present in listB or nearby\r\n                    return Integer.MAX_VALUE;\r\n                }\r\n            }\r\n\r\n            return index;\r\n        }));\r\n\r\n        System.err.println(&quot;Rearranged listB: &quot; + listB);\r\n\t}\r\n}\r\n```\r\n\r\nThis is what I tried and this is the solution that I get, which is incorrect\r\n\r\n```\r\n[1, 2, 3, 4, 5, 6, 7, 6, 5, 4, 3, 2, 1, 0]\r\n[0, 106, 107, 101, 105, 102, 102, 103, 104, 106, 105, 103, 101, 104]\r\nRearranged listB: [101, 101, 102, 102, 103, 103, 104, 104, 105, 105, 106, 106, 107, 0]\r\n```\r\n","link":"https://stackoverflow.com/questions/77568900/one-list-acts-as-a-template-to-sort-another-list","title":"One list acts as a template to sort another list","body":"<p>Lets say there are two lists:</p>\n<p><code>List&lt;Integer&gt; listA = Arrays.asList(1,2,3,4,5,6,7,6,5,4,3,2,1,0);</code>\nThis list is a template for sorting another <code>listB</code>.</p>\n<p><code>List&lt;Integer&gt; listB = Arrays.asList(0,106,107,101,105,102,102,103,104,106,105,103,101,104);</code>\nThis list on the other hand is unsorted.</p>\n<p>The final list lets say <code>listC</code> should be having the order (101,102,103,104,106,107,106,105,104,103,102,101,0)? I am using comparators but it fails for different usecases?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JavaComparators {\n    public static void main(String[] args) {\n        \n        List&lt;Integer&gt; listA = Arrays.asList(1,2,3,4,5,6,7,6,5,4,3,2,1,0);\n        List&lt;Integer&gt; listB = Arrays.asList(0,106,107,101,105,102,102,103,104,106,105,103,101,104);\n        \n        System.err.println(listA);\n        System.err.println(listB);\n\n        // Create a set of elements present in listB for faster lookup\n        Set&lt;Integer&gt; setB = new HashSet&lt;&gt;(listB);\n\n        // Sort listA based on the index in listB or use a default index if not present\n        listB.sort(Comparator.comparingInt(a -&gt; {\n            int index = listA.indexOf(a);\n            \n            if (index == -1) {\n                // If the element is not in listB, check for nearby values\n                int indexPlusOne = listA.indexOf(a + 100);\n                int indexMinusOne = listA.indexOf(a - 100);\n\n                if (indexPlusOne != -1) {\n                    return indexPlusOne;\n                } else if (indexMinusOne != -1) {\n                    return indexMinusOne;\n                } else {\n                    // Use a default index if not present in listB or nearby\n                    return Integer.MAX_VALUE;\n                }\n            }\n\n            return index;\n        }));\n\n        System.err.println(&quot;Rearranged listB: &quot; + listB);\n    }\n}\n</code></pre>\n<p>This is what I tried and this is the solution that I get, which is incorrect</p>\n<pre><code>[1, 2, 3, 4, 5, 6, 7, 6, 5, 4, 3, 2, 1, 0]\n[0, 106, 107, 101, 105, 102, 102, 103, 104, 106, 105, 103, 101, 104]\nRearranged listB: [101, 101, 102, 102, 103, 103, 104, 104, 105, 105, 106, 106, 107, 0]\n</code></pre>\n"},{"tags":["java","selenium-webdriver","webdrivermanager-java"],"comments":[{"score":0,"post_type":"question","creation_date":1701320294,"post_id":77573885,"comment_id":136761911,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","link":"https://stackoverflow.com/questions/77573885/getting-a-mismatch-with-the-chrome-version-for-selenium-project#comment136761911_77573885","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701320179,"post_id":77574327,"comment_id":136761900,"body_markdown":"I upgraded the selenium version but I was trying with webdrivermanager.\nSo you&#39;re saying I don&#39;t need to do chromedriver setup? Do I need to save chromedriver file like earlier selenium versions?","link":"https://stackoverflow.com/questions/77573885/getting-a-mismatch-with-the-chrome-version-for-selenium-project/77574327#comment136761900_77574327","body":"I upgraded the selenium version but I was trying with webdrivermanager. So you&#39;re saying I don&#39;t need to do chromedriver setup? Do I need to save chromedriver file like earlier selenium versions?"},{"score":0,"post_type":"answer","creation_date":1701337295,"post_id":77574327,"comment_id":136763984,"body_markdown":"Thanks, this worked.","link":"https://stackoverflow.com/questions/77573885/getting-a-mismatch-with-the-chrome-version-for-selenium-project/77574327#comment136763984_77574327","body":"Thanks, this worked."},{"score":0,"post_type":"answer","creation_date":1701338600,"post_id":77574327,"comment_id":136764210,"body_markdown":"Glad it worked. [What should I do when someone answers my question?](https://stackoverflow.com/help/someone-answers)","link":"https://stackoverflow.com/questions/77573885/getting-a-mismatch-with-the-chrome-version-for-selenium-project/77574327#comment136764210_77574327","body":"Glad it worked. <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}],"comment_count":3,"score":0,"last_activity_date":1701289810,"creation_date":1701289810,"answer_id":77574327,"question_id":77573885,"body_markdown":"````\r\nname: &#39;selenium-java&#39;, version: &#39;3.141.59&#39;\r\n````\r\nYou are using way too old selenium. Upgrade to the latest version of selenium i.e. `v4.15.0`.\r\n\r\nAnd once you upgrade to latest selenium, you no longer need `WebDriverManager` library. The new built-in tool [Selenium Manager](https://www.selenium.dev/documentation/selenium_manager/) will do what `WebDriverManager` used to do before.\r\n\r\nCode can be as simple as:\r\n````\r\npublic static void main(String[] args) {\r\n\tWebDriver driver = new ChromeDriver();\r\n\tdriver.manage().window().maximize();\r\n\tdriver.get(&quot;https://www.google.com/&quot;);\r\n\tdriver.quit();\r\n}\r\n````\r\n\r\nRefer below answers for more details on this topic:\r\n- https://stackoverflow.com/a/76463081/7598774\r\n- https://stackoverflow.com/a/76752843/7598774\r\n- https://stackoverflow.com/a/76912466/7598774\r\n- https://stackoverflow.com/a/77281456/7598774","link":"https://stackoverflow.com/questions/77573885/getting-a-mismatch-with-the-chrome-version-for-selenium-project/77574327#77574327","title":"Getting a mismatch with the chrome version for selenium project","body":"<pre><code>name: 'selenium-java', version: '3.141.59'\n</code></pre>\n<p>You are using way too old selenium. Upgrade to the latest version of selenium i.e. <code>v4.15.0</code>.</p>\n<p>And once you upgrade to latest selenium, you no longer need <code>WebDriverManager</code> library. The new built-in tool <a href=\"https://www.selenium.dev/documentation/selenium_manager/\" rel=\"nofollow noreferrer\">Selenium Manager</a> will do what <code>WebDriverManager</code> used to do before.</p>\n<p>Code can be as simple as:</p>\n<pre><code>public static void main(String[] args) {\n    WebDriver driver = new ChromeDriver();\n    driver.manage().window().maximize();\n    driver.get(&quot;https://www.google.com/&quot;);\n    driver.quit();\n}\n</code></pre>\n<p>Refer below answers for more details on this topic:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/76463081/7598774\">https://stackoverflow.com/a/76463081/7598774</a></li>\n<li><a href=\"https://stackoverflow.com/a/76752843/7598774\">https://stackoverflow.com/a/76752843/7598774</a></li>\n<li><a href=\"https://stackoverflow.com/a/76912466/7598774\">https://stackoverflow.com/a/76912466/7598774</a></li>\n<li><a href=\"https://stackoverflow.com/a/77281456/7598774\">https://stackoverflow.com/a/77281456/7598774</a></li>\n</ul>\n"}],"comment_count":1,"is_answered":false,"view_count":73,"answer_count":1,"score":0,"last_activity_date":1701290106,"creation_date":1701284642,"last_edit_date":1701290106,"question_id":77573885,"body_markdown":"My code was working earlier but when I used gradle command line to run the project, I got this error:\r\n[enter image description here](https://i.stack.imgur.com/Ha3Xk.png)\r\nI&#39;m using bonigarcia library so the incompatibility issue with the chrome version on my system should not arise.\r\n\r\nTried changing the selenium library and webdrivermanager library but then it renders the whole project unusable.\r\n\r\nGradle File:\r\n```plugins {\r\n    id &#39;java&#39;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation group: &#39;org.seleniumhq.selenium&#39;, name: &#39;selenium-java&#39;, version: &#39;3.141.59&#39;\r\n    testImplementation &#39;org.testng:testng:7.4.0&#39;\r\n    implementation group: &#39;io.github.bonigarcia&#39;, name: &#39;webdrivermanager&#39;, version: &#39;5.4.1&#39;\r\n    compileOnly group: &#39;org.projectlombok&#39;, name: &#39;lombok&#39;, version: &#39;1.18.22&#39;\r\n    implementation group: &#39;io.qameta.allure&#39;, name: &#39;allure-testng&#39;, version: &#39;2.17.1&#39;\r\n\r\n}\r\n\r\ntest {\r\n    useTestNG()\r\n}","link":"https://stackoverflow.com/questions/77573885/getting-a-mismatch-with-the-chrome-version-for-selenium-project","title":"Getting a mismatch with the chrome version for selenium project","body":"<p>My code was working earlier but when I used gradle command line to run the project, I got this error:\n<a href=\"https://i.stack.imgur.com/Ha3Xk.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nI'm using bonigarcia library so the incompatibility issue with the chrome version on my system should not arise.</p>\n<p>Tried changing the selenium library and webdrivermanager library but then it renders the whole project unusable.</p>\n<p>Gradle File:</p>\n<pre><code>    id 'java'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation group: 'org.seleniumhq.selenium', name: 'selenium-java', version: '3.141.59'\n    testImplementation 'org.testng:testng:7.4.0'\n    implementation group: 'io.github.bonigarcia', name: 'webdrivermanager', version: '5.4.1'\n    compileOnly group: 'org.projectlombok', name: 'lombok', version: '1.18.22'\n    implementation group: 'io.qameta.allure', name: 'allure-testng', version: '2.17.1'\n\n}\n\ntest {\n    useTestNG()\n}\n</code></pre>\n"},{"tags":["java","assert"],"comment_count":0,"is_answered":false,"view_count":9,"answer_count":0,"score":0,"last_activity_date":1701289978,"creation_date":1701289978,"question_id":77574344,"body_markdown":"I am trying: \r\n```\r\n\tpublic void assertIsDisplayed(WebElement element) {\r\n\t\t{\r\n\t\t   String actualText = element.getText();\r\n\t\t   \r\n\t\t   try {\r\n\t            Assert.assertTrue(element.isDisplayed(), actualText + &quot; is not displayed on the page&quot;);\r\n\t            Reporter.log(actualText + &quot; is displayed on the page&quot;,true);\r\n\t        \t} \r\n\t\t   catch (AssertionError e) {\r\n\t            Reporter.log(&quot;Assertion Error: &quot; + e.getMessage());\r\n\t            throw e;\r\n\t        }\r\n\t }\r\n\t }\r\n```\r\n\r\nbut in console output or logs failed message is not displayed.","link":"https://stackoverflow.com/questions/77574344/how-to-display-assert-message-of-assert-isdisplayed-in-logs-or-console-output-in","title":"how to display assert message of assert.isDisplayed in logs or console output in jenkins with java","body":"<p>I am trying:</p>\n<pre><code>    public void assertIsDisplayed(WebElement element) {\n        {\n           String actualText = element.getText();\n           \n           try {\n                Assert.assertTrue(element.isDisplayed(), actualText + &quot; is not displayed on the page&quot;);\n                Reporter.log(actualText + &quot; is displayed on the page&quot;,true);\n                } \n           catch (AssertionError e) {\n                Reporter.log(&quot;Assertion Error: &quot; + e.getMessage());\n                throw e;\n            }\n     }\n     }\n</code></pre>\n<p>but in console output or logs failed message is not displayed.</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver","undetected-chromedriver"],"comments":[{"score":0,"post_type":"question","creation_date":1701289322,"post_id":77573622,"comment_id":136758711,"body_markdown":"Can you edit the question and share your code.","link":"https://stackoverflow.com/questions/77573622/nosuchelementexception-java-and-selenium#comment136758711_77573622","body":"Can you edit the question and share your code."}],"comment_count":1,"is_answered":false,"view_count":38,"answer_count":0,"score":0,"last_activity_date":1701289275,"creation_date":1701281901,"last_edit_date":1701289275,"question_id":77573622,"body_markdown":"Implicit wait program codes in Java Selenium are correct, but there is some error in the console. This problem is with config of java and selenium.\r\n\r\nError:\r\n````\r\nNov 29, 2023 10:49:09 PM org.openqa.selenium.manager.SeleniumManager lambda$runCommand$1\r\nINFO: Driver path: C:\\\\Users\\\\IT.cache\\\\selenium\\\\chromedriver\\\\win64\\\\119.0.6045.105\\\\chromedriver.exe\r\nNov 29, 2023 10:49:09 PM org.openqa.selenium.manager.SeleniumManager lambda$runCommand$1\r\nINFO: Browser path: C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\r\nSLF4J: No SLF4J providers were found.\r\nSLF4J: Defaulting to no-operation (NOP) logger implementation\r\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\r\nNov 29, 2023 10:49:12 PM org.openqa.selenium.devtools.CdpVersionFinder findNearestMatch\r\nWARNING: Unable to find an exact match for CDP version 119, so returning the closest version found: 116\r\nException in thread &quot;main&quot; org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;xpath&quot;,&quot;selector&quot;:&quot;//input\\[@name=&#39;q&#39;\\]&quot;}\r\n(Session info: chrome=119.0.6045.160)\r\nFor documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception\r\nBuild info: version: &#39;4.12.0&#39;, revision: &#39;249f2a7d1b\\*&#39;\r\nSystem info: os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;17.0.8.1&#39;\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCommand: \\[3faa765842476d2db4414b0a4db4cf02, findElement {using=xpath, value=//input\\[@name=&#39;q&#39;\\]}\\]\r\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 119.0.6045.160, chrome: {chromedriverVersion: 119.0.6045.105 (38c72552c5e..., userDataDir: C:\\\\Users\\\\IT\\\\AppData\\\\Local\\\\T...}, fedcm:accounts: true, goog:chromeOptions: {debuggerAddress: localhost:59036}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: windows, proxy: Proxy(), se:cdp: ws://localhost:59036/devtoo..., se:cdpVersion: 119.0.6045.160, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}\r\nSession ID: 3faa765842476d2db4414b0a4db4cf02\r\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\nat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\nat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\nat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\nat org.openqa.selenium.remote.codec.w3c.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:200)\r\nat org.openqa.selenium.remote.codec.w3c.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:133)\r\nat org.openqa.selenium.remote.codec.w3c.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:52)\r\nat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:191)\r\nat org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:196)\r\nat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:171)\r\nat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:602)\r\nat org.openqa.selenium.remote.ElementLocation$ElementFinder$2.findElement(ElementLocation.java:165)\r\nat org.openqa.selenium.remote.ElementLocation.findElement(ElementLocation.java:59)\r\nat org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:359)\r\nat org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:353)\r\nat selenium.ImplicitWait.main(ImplicitWait.java:24)\r\n````","link":"https://stackoverflow.com/questions/77573622/nosuchelementexception-java-and-selenium","title":"NoSuchElementException - Java and selenium","body":"<p>Implicit wait program codes in Java Selenium are correct, but there is some error in the console. This problem is with config of java and selenium.</p>\n<p>Error:</p>\n<pre><code>Nov 29, 2023 10:49:09 PM org.openqa.selenium.manager.SeleniumManager lambda$runCommand$1\nINFO: Driver path: C:\\\\Users\\\\IT.cache\\\\selenium\\\\chromedriver\\\\win64\\\\119.0.6045.105\\\\chromedriver.exe\nNov 29, 2023 10:49:09 PM org.openqa.selenium.manager.SeleniumManager lambda$runCommand$1\nINFO: Browser path: C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\nSLF4J: No SLF4J providers were found.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\nNov 29, 2023 10:49:12 PM org.openqa.selenium.devtools.CdpVersionFinder findNearestMatch\nWARNING: Unable to find an exact match for CDP version 119, so returning the closest version found: 116\nException in thread &quot;main&quot; org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;xpath&quot;,&quot;selector&quot;:&quot;//input\\[@name='q'\\]&quot;}\n(Session info: chrome=119.0.6045.160)\nFor documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception\nBuild info: version: '4.12.0', revision: '249f2a7d1b\\*'\nSystem info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.8.1'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: \\[3faa765842476d2db4414b0a4db4cf02, findElement {using=xpath, value=//input\\[@name='q'\\]}\\]\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 119.0.6045.160, chrome: {chromedriverVersion: 119.0.6045.105 (38c72552c5e..., userDataDir: C:\\\\Users\\\\IT\\\\AppData\\\\Local\\\\T...}, fedcm:accounts: true, goog:chromeOptions: {debuggerAddress: localhost:59036}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: windows, proxy: Proxy(), se:cdp: ws://localhost:59036/devtoo..., se:cdpVersion: 119.0.6045.160, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}\nSession ID: 3faa765842476d2db4414b0a4db4cf02\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\nat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\nat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\nat org.openqa.selenium.remote.codec.w3c.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:200)\nat org.openqa.selenium.remote.codec.w3c.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:133)\nat org.openqa.selenium.remote.codec.w3c.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:52)\nat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:191)\nat org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:196)\nat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:171)\nat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:602)\nat org.openqa.selenium.remote.ElementLocation$ElementFinder$2.findElement(ElementLocation.java:165)\nat org.openqa.selenium.remote.ElementLocation.findElement(ElementLocation.java:59)\nat org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:359)\nat org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:353)\nat selenium.ImplicitWait.main(ImplicitWait.java:24)\n</code></pre>\n"},{"tags":["java","recursion","completable-future","chaining"],"comments":[{"score":0,"post_type":"question","creation_date":1701260905,"post_id":77569249,"comment_id":136753229,"body_markdown":"`iServiceReady` is has a spelling error, which is one source of compilation errors","link":"https://stackoverflow.com/questions/77569249/how-to-write-2-consequent-recursions-with-completable-future#comment136753229_77569249","body":"<code>iServiceReady</code> is has a spelling error, which is one source of compilation errors"},{"score":0,"post_type":"question","creation_date":1701287199,"post_id":77569249,"comment_id":136758353,"body_markdown":"@michid I updated the question. I am more interested in the approach that can be used to chain two recursions with completable future.  Please take another look at the updated question.","link":"https://stackoverflow.com/questions/77569249/how-to-write-2-consequent-recursions-with-completable-future#comment136758353_77569249","body":"@michid I updated the question. I am more interested in the approach that can be used to chain two recursions with completable future.  Please take another look at the updated question."},{"score":0,"post_type":"question","creation_date":1701288800,"post_id":77569249,"comment_id":136758620,"body_markdown":"You&#39;re returning a `CompletableFuture&lt;Boolean&gt;`, and this should _not_ block the method from returning. You also don&#39;t need the `Boolean` for this purpose, a `CompletableFuture&lt;Void&gt;` works fine (since completion is akin to being ready). The only lines in `#getServiceReady` that are needed are the `return healthOperations.getServiceReady()` and the entire `.whenComplete` block. Now you said &quot;recursive&quot; - I would hope that your posted `#getServiceReady` is not calling itself eventually, as that will stackoverflow.","link":"https://stackoverflow.com/questions/77569249/how-to-write-2-consequent-recursions-with-completable-future#comment136758620_77569249","body":"You&#39;re returning a <code>CompletableFuture&lt;Boolean&gt;</code>, and this should <i>not</i> block the method from returning. You also don&#39;t need the <code>Boolean</code> for this purpose, a <code>CompletableFuture&lt;Void&gt;</code> works fine (since completion is akin to being ready). The only lines in <code>#getServiceReady</code> that are needed are the <code>return healthOperations.getServiceReady()</code> and the entire <code>.whenComplete</code> block. Now you said &quot;recursive&quot; - I would hope that your posted <code>#getServiceReady</code> is not calling itself eventually, as that will stackoverflow."},{"score":0,"post_type":"question","creation_date":1701289634,"post_id":77569249,"comment_id":136758757,"body_markdown":"@Rogue, I amended the code, getServiceReady does call itself if the getReadiness() call returns false. it should stop the recursion once the getReadiness call returns true. Can you please give me a sample code how to achieve the 2 recursions call?","link":"https://stackoverflow.com/questions/77569249/how-to-write-2-consequent-recursions-with-completable-future#comment136758757_77569249","body":"@Rogue, I amended the code, getServiceReady does call itself if the getReadiness() call returns false. it should stop the recursion once the getReadiness call returns true. Can you please give me a sample code how to achieve the 2 recursions call?"},{"score":0,"post_type":"question","creation_date":1701289817,"post_id":77569249,"comment_id":136758790,"body_markdown":"I see then, you have a use-case for `CompletableFuture#thenApplyAsync`. I&#39;ll write up an example, though I&#39;ve just had something dropped in my lap for the next hour. You&#39;ll see that answer in a couple hours.","link":"https://stackoverflow.com/questions/77569249/how-to-write-2-consequent-recursions-with-completable-future#comment136758790_77569249","body":"I see then, you have a use-case for <code>CompletableFuture#thenApplyAsync</code>. I&#39;ll write up an example, though I&#39;ve just had something dropped in my lap for the next hour. You&#39;ll see that answer in a couple hours."},{"score":0,"post_type":"question","creation_date":1701291584,"post_id":77569249,"comment_id":136759058,"body_markdown":"One further question: Is it strictly necessary that you only retry when an exception occurs? Normally you&#39;d allow an exception to propagate up to whoever initiated the first `CompletableFuture&lt;T&gt;`, that way they can also be the ones to handle the exceptions that _do_ occur. In this same vein, does `healthOperations.getReadiness()` only ever return `true` when it completes normally?","link":"https://stackoverflow.com/questions/77569249/how-to-write-2-consequent-recursions-with-completable-future#comment136759058_77569249","body":"One further question: Is it strictly necessary that you only retry when an exception occurs? Normally you&#39;d allow an exception to propagate up to whoever initiated the first <code>CompletableFuture&lt;T&gt;</code>, that way they can also be the ones to handle the exceptions that <i>do</i> occur. In this same vein, does <code>healthOperations.getReadiness()</code> only ever return <code>true</code> when it completes normally?"},{"score":0,"post_type":"question","creation_date":1701293524,"post_id":77569249,"comment_id":136759356,"body_markdown":"@Rogue healthOperations.getReadiness() should only return true when it completes normally. It actually returns CompletableFuture&lt;Boolean&gt;, so either true or false. However, the API returns 200 OK is the service is ready to accept traffic and 503 if it isn&#39;t. This is what the getReadiness looks like. See in the next comment","link":"https://stackoverflow.com/questions/77569249/how-to-write-2-consequent-recursions-with-completable-future#comment136759356_77569249","body":"@Rogue healthOperations.getReadiness() should only return true when it completes normally. It actually returns CompletableFuture&lt;Boolean&gt;, so either true or false. However, the API returns 200 OK is the service is ready to accept traffic and 503 if it isn&#39;t. This is what the getReadiness looks like. See in the next comment"},{"score":0,"post_type":"question","creation_date":1701293565,"post_id":77569249,"comment_id":136759363,"body_markdown":"return CompletableFuture\n            .runAsync(() -&gt; {\n                if (isReady) {\n                    Response.ok().data(Boolean.TRUE.toString()).end(routingContext);\n                } else {\n                 Response.create().status(SERVICE_UNAVAILABLE).end(routingContext);\n                }\n            }, executor);","link":"https://stackoverflow.com/questions/77569249/how-to-write-2-consequent-recursions-with-completable-future#comment136759363_77569249","body":"return CompletableFuture             .runAsync(() -&gt; {                 if (isReady) {                     Response.ok().data(Boolean.TRUE.toString()).end(routingConte&zwnj;&#8203;xt);                 } else {                  Response.create().status(SERVICE_UNAVAILABLE).end(routingCon&zwnj;&#8203;text);                 }             }, executor);"},{"score":0,"post_type":"question","creation_date":1701293592,"post_id":77569249,"comment_id":136759367,"body_markdown":"It is necessary that we retry when the getReadiness does not return true (200 OK). @Rogue thank you for your help sincerely. I have been struggling with this for 2 days now.","link":"https://stackoverflow.com/questions/77569249/how-to-write-2-consequent-recursions-with-completable-future#comment136759367_77569249","body":"It is necessary that we retry when the getReadiness does not return true (200 OK). @Rogue thank you for your help sincerely. I have been struggling with this for 2 days now."},{"score":0,"post_type":"question","creation_date":1701294167,"post_id":77569249,"comment_id":136759447,"body_markdown":"@Rogue just to summarise what I said, the getReadiness() is a very simple method that returns 200 or 503. We need to retry until it returns 200. As far as I can see in the code, the response is deserialised to a boolean and you can see the getReadiness code sample above. Thank you once again.","link":"https://stackoverflow.com/questions/77569249/how-to-write-2-consequent-recursions-with-completable-future#comment136759447_77569249","body":"@Rogue just to summarise what I said, the getReadiness() is a very simple method that returns 200 or 503. We need to retry until it returns 200. As far as I can see in the code, the response is deserialised to a boolean and you can see the getReadiness code sample above. Thank you once again."}],"comment_count":10,"is_answered":false,"view_count":67,"answer_count":0,"score":0,"last_activity_date":1701289068,"creation_date":1701242662,"last_edit_date":1701289068,"question_id":77569249,"body_markdown":"I have the following code which tries to get a /ready endpoint of a service until it returns OK and then makes a call to that service when it is available:\r\n\r\n```\r\n  @PostConstruct\r\n  void registerMetadata() {\r\n    CompletableFuture.runAsync(this::getServiceReady, executor)\r\n        .thenRunAsync(() -&gt; registerWithRetry(0), executor);\r\n  }\r\n\r\n  private void registerWithRetry(int retryAttempt) {\r\n  serviceRegistrationOperations.registerService(serviceMetadataMedia)\r\n        .thenAccept(data -&gt; {\r\n          this.isMetadataRegistered = true;\r\n        }).whenComplete((data, ex) -&gt; {\r\n          if (ex != null) {\r\n            Throwable cause = ExceptionUtils.cleanseTop(ex);\r\n            String message = cause.getMessage();\r\n            }\r\n            int delayInSeconds = getDelaySecondsBeforeNextRetry(retryAttempt);\r\n            log.error(&quot;Failed to register metadata: {}, will retry again in {} seconds&quot;, message, delayInSeconds, cause);\r\n            CompletableFuture.runAsync(() -&gt; registerWithRetry(retryAttempt + 1), new DelayedExecutor(delayInSeconds, TimeUnit.SECONDS, executor));\r\n          }\r\n        });\r\n  }\r\n\r\n  private CompletableFuture&lt;Boolean&gt; getServiceReady() {\r\n    log.info(&quot;Getting the readiness of the service&quot;);\r\n    if (this.exitFlag) {\r\n      return CompletableFuture.completedFuture(null);\r\n    }\r\n    return healthOperations.getReadiness()\r\n        .thenApply(isServiceReady -&gt; {\r\n         this.exitFlag = true;\r\n          return true;\r\n        }).whenComplete((result, ex) -&gt; {\r\n          if (ex != null) {\r\n            log.error(&quot;service is not up&quot;);\r\n            CompletableFuture.runAsync(() -&gt; getServiceReady(), new DelayedExecutor(5, TimeUnit.SECONDS, executor));\r\n          }\r\n        });\r\n  }\r\n```\r\n\r\nHowever, it seems that the code never waits for the first recursion to complete (meaning the `healthOperations.getServiceReady()` to return true). I want to make it so that it first waits for the first recursion to finish and then to go to the registerWithRetry method. Can you help me figure out how to write the first recursion so that the program waits for it and then moves on with the second one?\r\n\r\nI tried different ways to achieve this. For my use case `block(healthOperations.getServiceReady())` doesn&#39;t work, so my guess is that it has to be a chain of events. ","link":"https://stackoverflow.com/questions/77569249/how-to-write-2-consequent-recursions-with-completable-future","title":"How to write 2 consequent recursions with Completable future?","body":"<p>I have the following code which tries to get a /ready endpoint of a service until it returns OK and then makes a call to that service when it is available:</p>\n<pre><code>  @PostConstruct\n  void registerMetadata() {\n    CompletableFuture.runAsync(this::getServiceReady, executor)\n        .thenRunAsync(() -&gt; registerWithRetry(0), executor);\n  }\n\n  private void registerWithRetry(int retryAttempt) {\n  serviceRegistrationOperations.registerService(serviceMetadataMedia)\n        .thenAccept(data -&gt; {\n          this.isMetadataRegistered = true;\n        }).whenComplete((data, ex) -&gt; {\n          if (ex != null) {\n            Throwable cause = ExceptionUtils.cleanseTop(ex);\n            String message = cause.getMessage();\n            }\n            int delayInSeconds = getDelaySecondsBeforeNextRetry(retryAttempt);\n            log.error(&quot;Failed to register metadata: {}, will retry again in {} seconds&quot;, message, delayInSeconds, cause);\n            CompletableFuture.runAsync(() -&gt; registerWithRetry(retryAttempt + 1), new DelayedExecutor(delayInSeconds, TimeUnit.SECONDS, executor));\n          }\n        });\n  }\n\n  private CompletableFuture&lt;Boolean&gt; getServiceReady() {\n    log.info(&quot;Getting the readiness of the service&quot;);\n    if (this.exitFlag) {\n      return CompletableFuture.completedFuture(null);\n    }\n    return healthOperations.getReadiness()\n        .thenApply(isServiceReady -&gt; {\n         this.exitFlag = true;\n          return true;\n        }).whenComplete((result, ex) -&gt; {\n          if (ex != null) {\n            log.error(&quot;service is not up&quot;);\n            CompletableFuture.runAsync(() -&gt; getServiceReady(), new DelayedExecutor(5, TimeUnit.SECONDS, executor));\n          }\n        });\n  }\n</code></pre>\n<p>However, it seems that the code never waits for the first recursion to complete (meaning the <code>healthOperations.getServiceReady()</code> to return true). I want to make it so that it first waits for the first recursion to finish and then to go to the registerWithRetry method. Can you help me figure out how to write the first recursion so that the program waits for it and then moves on with the second one?</p>\n<p>I tried different ways to achieve this. For my use case <code>block(healthOperations.getServiceReady())</code> doesn't work, so my guess is that it has to be a chain of events.</p>\n"},{"tags":["java","3d","game-engine","raycasting","bresenham"],"comment_count":0,"is_answered":false,"view_count":21,"answer_count":0,"score":0,"last_activity_date":1701288737,"creation_date":1701288737,"question_id":77574230,"body_markdown":"I&#39;m currently working on a raycaster engine in Java with Lanterna for a college project.\r\nMy engine was working, but now I would like to add different colors to different sides of walls.\r\n\r\nI&#39;m using the Bresenham&#39;s line algorithm:\r\n\r\n```\r\nprivate Pair&lt;List&lt;Position&gt;, Integer&gt; createLine(double angle, Position playerPosition, Map map) {\r\n    // Creates a line using the Bresenham&#39;s line algorithm.\r\n    List&lt;Position&gt; line = new ArrayList&lt;&gt;();\r\n\r\n    // Get the starting coordinates\r\n    int x1 = (int) playerPosition.getX();\r\n    int y1 = (int) playerPosition.getY();\r\n\r\n    // Set the maximum distance for the line\r\n    int distance = 1000;\r\n\r\n    // Calculate the ending coordinates based on the angle and distance\r\n    int x2 = (int) (x1 + distance * Math.cos(Math.toRadians(angle)));\r\n    int y2 = (int) -(y1 + distance * Math.sin(Math.toRadians(angle)));\r\n\r\n    // Calculate the differences between coordinates\r\n    int dx = Math.abs(x2 - x1);\r\n    int dy = Math.abs(y2 - y1);\r\n\r\n    // Determine the direction of movement (sx and sy are either 1 or -1)\r\n    int sx = (x1 &lt; x2) ? 1 : -1;\r\n    int sy = (y1 &lt; y2) ? 1 : -1;\r\n\r\n    // Initialize variables for tracking errors and the current side of the line\r\n    int side = 1; // 1 for top/bottom, 2 for left/right\r\n    int err = dx - dy;\r\n\r\n    // Bresenham&#39;s line algorithm\r\n    while (x1 != x2 || y1 != y2) {\r\n        // Check if the current position is occupied in the map\r\n        if (map.getXY(x1 / map.getCellsize(), y1 / map.getCellsize()) == 1) {\r\n            // Return the line and the side when an obstacle is encountered\r\n            return new ImmutablePair&lt;&gt;(line, side);\r\n        }\r\n\r\n        // Add the current position to the line\r\n        line.add(new Position(x1, y1, 0));\r\n\r\n        // Calculate error and update coordinates based on the algorithm\r\n        int e2 = 2 * err;\r\n        if (e2 &gt; -dy) {\r\n            err -= dy;\r\n            x1 += sx;\r\n            side = 2; // Set side to left/right\r\n        }\r\n        if (e2 &lt; dx) {\r\n            err += dx;\r\n            y1 += sy;\r\n            side = 1; // Set side to top/bottom\r\n        }\r\n    }\r\n    return new ImmutablePair&lt;&gt;(line, side);\r\n}\r\n```\r\n\r\nThe problem is that the side isn&#39;t being calculated correctly, and it&#39;s producing\r\n[this output](https://i.stack.imgur.com/qGjGG.png). As you can see, the left side is correct, but there are red stripes in the middle where everything should be green, and on the right side it should also be green.  \r\nI think that this behavior is caused when the angle between the player and the wall is very small, but I can&#39;t solve it.  \r\nEvery help is welcome!","link":"https://stackoverflow.com/questions/77574230/how-to-correctly-calculate-the-side-of-a-wall-in-bresenhams-algorithm","title":"How to correctly calculate the side of a wall in Bresenham&#39;s algorithm?","body":"<p>I'm currently working on a raycaster engine in Java with Lanterna for a college project.\nMy engine was working, but now I would like to add different colors to different sides of walls.</p>\n<p>I'm using the Bresenham's line algorithm:</p>\n<pre><code>private Pair&lt;List&lt;Position&gt;, Integer&gt; createLine(double angle, Position playerPosition, Map map) {\n    // Creates a line using the Bresenham's line algorithm.\n    List&lt;Position&gt; line = new ArrayList&lt;&gt;();\n\n    // Get the starting coordinates\n    int x1 = (int) playerPosition.getX();\n    int y1 = (int) playerPosition.getY();\n\n    // Set the maximum distance for the line\n    int distance = 1000;\n\n    // Calculate the ending coordinates based on the angle and distance\n    int x2 = (int) (x1 + distance * Math.cos(Math.toRadians(angle)));\n    int y2 = (int) -(y1 + distance * Math.sin(Math.toRadians(angle)));\n\n    // Calculate the differences between coordinates\n    int dx = Math.abs(x2 - x1);\n    int dy = Math.abs(y2 - y1);\n\n    // Determine the direction of movement (sx and sy are either 1 or -1)\n    int sx = (x1 &lt; x2) ? 1 : -1;\n    int sy = (y1 &lt; y2) ? 1 : -1;\n\n    // Initialize variables for tracking errors and the current side of the line\n    int side = 1; // 1 for top/bottom, 2 for left/right\n    int err = dx - dy;\n\n    // Bresenham's line algorithm\n    while (x1 != x2 || y1 != y2) {\n        // Check if the current position is occupied in the map\n        if (map.getXY(x1 / map.getCellsize(), y1 / map.getCellsize()) == 1) {\n            // Return the line and the side when an obstacle is encountered\n            return new ImmutablePair&lt;&gt;(line, side);\n        }\n\n        // Add the current position to the line\n        line.add(new Position(x1, y1, 0));\n\n        // Calculate error and update coordinates based on the algorithm\n        int e2 = 2 * err;\n        if (e2 &gt; -dy) {\n            err -= dy;\n            x1 += sx;\n            side = 2; // Set side to left/right\n        }\n        if (e2 &lt; dx) {\n            err += dx;\n            y1 += sy;\n            side = 1; // Set side to top/bottom\n        }\n    }\n    return new ImmutablePair&lt;&gt;(line, side);\n}\n</code></pre>\n<p>The problem is that the side isn't being calculated correctly, and it's producing\n<a href=\"https://i.stack.imgur.com/qGjGG.png\" rel=\"nofollow noreferrer\">this output</a>. As you can see, the left side is correct, but there are red stripes in the middle where everything should be green, and on the right side it should also be green.<br />\nI think that this behavior is caused when the angle between the player and the wall is very small, but I can't solve it.<br />\nEvery help is welcome!</p>\n"},{"tags":["java","graphviz","dot"],"comments":[{"score":0,"post_type":"question","creation_date":1701289366,"post_id":77574194,"comment_id":136758716,"body_markdown":"Check this links on adding Graphviz to Java: https://stackoverflow.com/questions/26481910/how-to-call-graphviz-from-java and https://github.com/nidi3/graphviz-java","link":"https://stackoverflow.com/questions/77574194/graphviz-course-visualization-map#comment136758716_77574194","body":"Check this links on adding Graphviz to Java: <a href=\"https://stackoverflow.com/questions/26481910/how-to-call-graphviz-from-java\" title=\"how to call graphviz from java\">stackoverflow.com/questions/26481910/&hellip;</a> and <a href=\"https://github.com/nidi3/graphviz-java\" rel=\"nofollow noreferrer\">github.com/nidi3/graphviz-java</a>"}],"comment_count":1,"is_answered":false,"view_count":24,"answer_count":0,"score":-1,"last_activity_date":1701288384,"creation_date":1701288384,"question_id":77574194,"body_markdown":"I have a project to create a course visualization program. This program should display a map of all the courses one has to take to complete their degree in college (say Engineering). I have been given all the courses in the degree program, prerequisites and, credits for each course.\r\n\r\nMy program should be be able to accept an input from the user. ie: their current major, courses they are currently taking.\r\nThe output should then be a visual map of their progress to completing the degree, this visual should include classes they need to take next. classes they cannot take at the moment, and their total credit so far.\r\n\r\nFor anyone who has an idea of what the process is going to be like, Where should I start? Also I am required to use graphviz for this visualization.\r\n\r\nWe brainstormed using an Excel file and formatting all of the courses and the amount of credits, but we were stuck on how to take the input the person gives when using the program and having that alter the elements of the Excel file. Should we just store all of the courses and credits within the program, or have it in an external file?","link":"https://stackoverflow.com/questions/77574194/graphviz-course-visualization-map","title":"Graphviz Course Visualization Map","body":"<p>I have a project to create a course visualization program. This program should display a map of all the courses one has to take to complete their degree in college (say Engineering). I have been given all the courses in the degree program, prerequisites and, credits for each course.</p>\n<p>My program should be be able to accept an input from the user. ie: their current major, courses they are currently taking.\nThe output should then be a visual map of their progress to completing the degree, this visual should include classes they need to take next. classes they cannot take at the moment, and their total credit so far.</p>\n<p>For anyone who has an idea of what the process is going to be like, Where should I start? Also I am required to use graphviz for this visualization.</p>\n<p>We brainstormed using an Excel file and formatting all of the courses and the amount of credits, but we were stuck on how to take the input the person gives when using the program and having that alter the elements of the Excel file. Should we just store all of the courses and credits within the program, or have it in an external file?</p>\n"},{"tags":["java","spring","spring-boot","controller-advice"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701288081,"creation_date":1701288081,"answer_id":77574168,"question_id":77573987,"body_markdown":"- The **@ControllerAdvice** annotation marks the class as a global exception handler.\r\n- The **@ExceptionHandler(Exception.class)** annotation on the **handleApiErrorException** method specifies that this method will handle exceptions of type **ApiErrorException**.\r\n- You can add more **@ExceptionHandler** methods for handling specific exceptions. And you can also add a general **@ExceptionHandler(Exception.class)** method to handle all types of Exceptions.\r\n- Ensure that your @ControllerAdvice class is within the package or subpackage that is **scanned** by your Spring application. If it&#39;s in a different package, you might need to use the basePackages attribute of @ComponentScan in your main application class @ComponentScan(basePackages = &quot;com.example&quot;), or specify the package in the @ControllerAdvice annotation.\r\n","link":"https://stackoverflow.com/questions/77573987/using-controlleradvice-exception-handler-as-a-standalone-library/77574168#77574168","title":"using @ControllerAdvice exception handler as a standalone library","body":"<ul>\n<li>The <strong>@ControllerAdvice</strong> annotation marks the class as a global exception handler.</li>\n<li>The <strong>@ExceptionHandler(Exception.class)</strong> annotation on the <strong>handleApiErrorException</strong> method specifies that this method will handle exceptions of type <strong>ApiErrorException</strong>.</li>\n<li>You can add more <strong>@ExceptionHandler</strong> methods for handling specific exceptions. And you can also add a general <strong>@ExceptionHandler(Exception.class)</strong> method to handle all types of Exceptions.</li>\n<li>Ensure that your @ControllerAdvice class is within the package or subpackage that is <strong>scanned</strong> by your Spring application. If it's in a different package, you might need to use the basePackages attribute of @ComponentScan in your main application class @ComponentScan(basePackages = &quot;com.example&quot;), or specify the package in the @ControllerAdvice annotation.</li>\n</ul>\n"}],"comment_count":0,"is_answered":true,"view_count":37,"answer_count":1,"score":-1,"last_activity_date":1701288081,"creation_date":1701285696,"question_id":77573987,"body_markdown":"I want to create a standalone Spring library that handles standard api exceptions via @ControllerAdvice. My approach is to make it easy to use in different modules without any additional configuration.\r\n\r\nThere is a code of my exception handler:\r\n\r\n``` lang-java\r\n@ControllerAdvice\r\npublic class ApiErrorControllerAdvice extends ResponseEntityExceptionHandler {\r\n\r\n    @ExceptionHandler(value = {ApiErrorException.class})\r\n    public ResponseEntity&lt;ErrorResponseTo&gt; handleApiErrorException(ApiErrorException apiError) {\r\n        return new ResponseEntity&lt;&gt;(\r\n                new ErrorResponseTo(apiError.getMessage()),\r\n                apiError.getHttpStatus()\r\n        );\r\n    }\r\n}\r\n```\r\n\r\nHow should I configure my application to make exception handler automatically picked up by Spring?","link":"https://stackoverflow.com/questions/77573987/using-controlleradvice-exception-handler-as-a-standalone-library","title":"using @ControllerAdvice exception handler as a standalone library","body":"<p>I want to create a standalone Spring library that handles standard api exceptions via @ControllerAdvice. My approach is to make it easy to use in different modules without any additional configuration.</p>\n<p>There is a code of my exception handler:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ControllerAdvice\npublic class ApiErrorControllerAdvice extends ResponseEntityExceptionHandler {\n\n    @ExceptionHandler(value = {ApiErrorException.class})\n    public ResponseEntity&lt;ErrorResponseTo&gt; handleApiErrorException(ApiErrorException apiError) {\n        return new ResponseEntity&lt;&gt;(\n                new ErrorResponseTo(apiError.getMessage()),\n                apiError.getHttpStatus()\n        );\n    }\n}\n</code></pre>\n<p>How should I configure my application to make exception handler automatically picked up by Spring?</p>\n"},{"tags":["java","antlr","antlr4","visitor-pattern"],"comments":[{"score":0,"post_type":"question","creation_date":1701266751,"post_id":77571236,"comment_id":136754341,"body_markdown":"What is the input? Are you sure the parser isn&#39;t using one of the other rules instead of `expression_fragment`? Have you debugged the execution? Are you sure `visitAddMinusOp()` is visited?","link":"https://stackoverflow.com/questions/77571236/trouble-with-antlr-visitor-pattern-not-entering-visitexpressfrag-method#comment136754341_77571236","body":"What is the input? Are you sure the parser isn&#39;t using one of the other rules instead of <code>expression_fragment</code>? Have you debugged the execution? Are you sure <code>visitAddMinusOp()</code> is visited?"},{"score":0,"post_type":"question","creation_date":1701273353,"post_id":77571236,"comment_id":136755895,"body_markdown":"(1) Ambiguous parse with &quot;(1+2)&quot;, using `LPAREN expression RPAREN #Parens`, or `LPAREN expression RPAREN #NestedExpression`. Don&#39;t do this. (2) `visitExpressFrag(0)` can&#39;t compile because you can&#39;t cast an integer into a parser node for `visit()`. You want `visitExpressFrag(ctx.expression_fragment(0))` or `visit(ctx.expression_fragment(0))`. (3) Can&#39;t parse &quot;1+2+3&quot; or `1 + -2`. Please study https://github.com/antlr/grammars-v4/blob/master/calculator/calculator.g4 or https://github.com/antlr/grammars-v4/blob/753536777d827ccc0c9b108531ea67375c2039ac/java/java/JavaParser.g4#L599-L660","link":"https://stackoverflow.com/questions/77571236/trouble-with-antlr-visitor-pattern-not-entering-visitexpressfrag-method#comment136755895_77571236","body":"(1) Ambiguous parse with &quot;(1+2)&quot;, using <code>LPAREN expression RPAREN #Parens</code>, or <code>LPAREN expression RPAREN #NestedExpression</code>. Don&#39;t do this. (2) <code>visitExpressFrag(0)</code> can&#39;t compile because you can&#39;t cast an integer into a parser node for <code>visit()</code>. You want <code>visitExpressFrag(ctx.expression_fragment(0))</code> or <code>visit(ctx.expression_fragment(0))</code>. (3) Can&#39;t parse &quot;1+2+3&quot; or <code>1 + -2</code>. Please study <a href=\"https://github.com/antlr/grammars-v4/blob/master/calculator/calculator.g4\" rel=\"nofollow noreferrer\">github.com/antlr/grammars-v4/blob/master/calculator/&hellip;</a> or <a href=\"https://github.com/antlr/grammars-v4/blob/753536777d827ccc0c9b108531ea67375c2039ac/java/java/JavaParser.g4#L599-L660\" rel=\"nofollow noreferrer\">github.com/antlr/grammars-v4/blob/&hellip;</a>"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701287856,"last_edit_date":1701287856,"creation_date":1701287519,"answer_id":77574126,"question_id":77571236,"body_markdown":"`visitExpressFrag(0)` is incorrect, because it expects a `ParserRuleContext` as a parameter, yet you provide an `int` as a parameter.\r\n\r\n&gt; However, when running my code, the visitExpressFrag method doesn&#39;t seem to be invoked\r\n\r\nIt does with me. Using the visitor like this:\r\n\r\n```java\r\nclass EvalVisitor extends CCALBaseVisitor&lt;Integer&gt; {\r\n\r\n    @Override\r\n    public Integer visitParse(CCALParser.ParseContext ctx) {\r\n        return visit(ctx.expression());\r\n    }\r\n\r\n    @Override\r\n    public Integer visitAddMinusOp(CCALParser.AddMinusOpContext ctx) {\r\n        Integer left = visit(ctx.expression_fragment(0));\r\n        Integer right = visit(ctx.expression_fragment(1));\r\n        return ctx.binary_arith_op().MINUS() == null ? left + right : left - right;\r\n    }\r\n\r\n    @Override\r\n    public Integer visitParens(CCALParser.ParensContext ctx) {\r\n        return visit(ctx.expression());\r\n    }\r\n\r\n    @Override\r\n    public Integer visitExpressFrag(CCALParser.ExpressFragContext ctx) {\r\n        return visit(ctx.expression_fragment());\r\n    }\r\n\r\n    @Override\r\n    public Integer visitNumberLiteral(CCALParser.NumberLiteralContext ctx) {\r\n        return Integer.valueOf(ctx.NUMBER().getText());\r\n    }\r\n\r\n    @Override\r\n    public Integer visitTrueLiteral(CCALParser.TrueLiteralContext ctx) {\r\n        return 1;\r\n    }\r\n\r\n    @Override\r\n    public Integer visitFalseLiteral(CCALParser.FalseLiteralContext ctx) {\r\n        return 0;\r\n    }\r\n\r\n    @Override\r\n    public Integer visitNestedExpression(CCALParser.NestedExpressionContext ctx) {\r\n        return visit(ctx.expression());\r\n    }\r\n}\r\n```\r\n\r\nand small driver class:\r\n\r\n```java\r\npublic class CCALDemo {\r\n    public static void main(String[] args) {\r\n        CCALLexer lexer = new CCALLexer(CharStreams.fromString(&quot;8 - 3&quot;));\r\n        CCALParser parser = new CCALParser(new CommonTokenStream(lexer));\r\n        Integer answer = new EvalVisitor().visit(parser.parse());\r\n        System.out.println(answer);\r\n    }\r\n}\r\n```\r\n\r\nwill print `5` as expected.\r\n\r\nYou really don&#39;t need a `expression_fragment` rule (which contains a duplicate nested expression) and I suspect you also want to account for `-(1+2)`, not just `-ID`. An `expression` rule like this would be better:\r\n\r\n```\r\nexpression\r\n : MINUS expression                      #Negated\r\n | expression binary_arith_op expression #AddMinusOp\r\n | LPAREN expression RPAREN              #Parens\r\n | ID LPAREN arg_list RPAREN             #FunctionCallOp\r\n | ID                                    #ID\r\n | NUMBER                                #NumberLiteral\r\n | TRUE                                  #TrueLiteral\r\n | FALSE                                 #FalseLiteral\r\n ;\r\n```","link":"https://stackoverflow.com/questions/77571236/trouble-with-antlr-visitor-pattern-not-entering-visitexpressfrag-method/77574126#77574126","title":"Trouble with ANTLR Visitor Pattern - Not Entering visitExpressFrag Method","body":"<p><code>visitExpressFrag(0)</code> is incorrect, because it expects a <code>ParserRuleContext</code> as a parameter, yet you provide an <code>int</code> as a parameter.</p>\n<blockquote>\n<p>However, when running my code, the visitExpressFrag method doesn't seem to be invoked</p>\n</blockquote>\n<p>It does with me. Using the visitor like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class EvalVisitor extends CCALBaseVisitor&lt;Integer&gt; {\n\n    @Override\n    public Integer visitParse(CCALParser.ParseContext ctx) {\n        return visit(ctx.expression());\n    }\n\n    @Override\n    public Integer visitAddMinusOp(CCALParser.AddMinusOpContext ctx) {\n        Integer left = visit(ctx.expression_fragment(0));\n        Integer right = visit(ctx.expression_fragment(1));\n        return ctx.binary_arith_op().MINUS() == null ? left + right : left - right;\n    }\n\n    @Override\n    public Integer visitParens(CCALParser.ParensContext ctx) {\n        return visit(ctx.expression());\n    }\n\n    @Override\n    public Integer visitExpressFrag(CCALParser.ExpressFragContext ctx) {\n        return visit(ctx.expression_fragment());\n    }\n\n    @Override\n    public Integer visitNumberLiteral(CCALParser.NumberLiteralContext ctx) {\n        return Integer.valueOf(ctx.NUMBER().getText());\n    }\n\n    @Override\n    public Integer visitTrueLiteral(CCALParser.TrueLiteralContext ctx) {\n        return 1;\n    }\n\n    @Override\n    public Integer visitFalseLiteral(CCALParser.FalseLiteralContext ctx) {\n        return 0;\n    }\n\n    @Override\n    public Integer visitNestedExpression(CCALParser.NestedExpressionContext ctx) {\n        return visit(ctx.expression());\n    }\n}\n</code></pre>\n<p>and small driver class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CCALDemo {\n    public static void main(String[] args) {\n        CCALLexer lexer = new CCALLexer(CharStreams.fromString(&quot;8 - 3&quot;));\n        CCALParser parser = new CCALParser(new CommonTokenStream(lexer));\n        Integer answer = new EvalVisitor().visit(parser.parse());\n        System.out.println(answer);\n    }\n}\n</code></pre>\n<p>will print <code>5</code> as expected.</p>\n<p>You really don't need a <code>expression_fragment</code> rule (which contains a duplicate nested expression) and I suspect you also want to account for <code>-(1+2)</code>, not just <code>-ID</code>. An <code>expression</code> rule like this would be better:</p>\n<pre><code>expression\n : MINUS expression                      #Negated\n | expression binary_arith_op expression #AddMinusOp\n | LPAREN expression RPAREN              #Parens\n | ID LPAREN arg_list RPAREN             #FunctionCallOp\n | ID                                    #ID\n | NUMBER                                #NumberLiteral\n | TRUE                                  #TrueLiteral\n | FALSE                                 #FalseLiteral\n ;\n</code></pre>\n"}],"comment_count":2,"is_answered":false,"view_count":45,"answer_count":1,"score":0,"last_activity_date":1701287856,"creation_date":1701261544,"last_edit_date":1701261620,"question_id":77571236,"body_markdown":"I am working on a lexical and syntax analyser that I amimplementing semantic analysis and intermediate representation generation using ANTLR, and I&#39;ve encountered a problem with my visitor implementation. Specifically, I&#39;m unable to successfully enter the visitExpressFrag method in my EvalVisitor class. This method is crucial for handling expressions in my language.\r\n\r\nHere&#39;s a simplified version of my problem:\r\n\r\nIn my EvalVisitor.java, I have the following methods:\r\n\r\n    @Override\r\n    public Integer visitAddMinusOp(CCALParser.AddMinusOpContext ctx) {\r\n        Integer left = visit(ctx.expression_fragment(0));\r\n        Integer right = visit(ctx.expression_fragment(1));\r\n        if (left == null || right == null) {\r\n            throw new RuntimeException(&quot;Left or right operand is null in AddMinusOp&quot;);\r\n        }\r\n        System.out.println(&quot;visitAddMinusOp - Left: &quot; + left + &quot;, Right: &quot; + right);\r\n        // ...\r\n    }\r\n    \r\n    @Override\r\n    public Integer visitExpressFrag(CCALParser.ExpressFragContext ctx) {\r\n        if (ctx.expression_fragment() == null) {\r\n            System.out.println(&quot;visitExpressFrag - Expression fragment context is null.&quot;);\r\n        } else {\r\n            System.out.println(&quot;visitExpressFrag - Expression Fragment Text: &quot; + ctx.expression_fragment().getText());\r\n        }\r\n        // ...\r\n    }\r\n\r\n\r\nHowever, when running my code, the visitExpressFrag method doesn&#39;t seem to be invoked as expected. I added print statements for debugging, but they don&#39;t get executed, indicating that the method isn&#39;t being entered.\r\n\r\nI tried directly calling visitExpressFrag like so:\r\n\r\n    @Override\r\n    public Integer visitAddMinusOp(CCALParser.AddMinusOpContext ctx) {\r\n        Integer left = visitExpressFrag(0);\r\n        // ...\r\n    }\r\n\r\n\r\nBut this results in a compilation error:\r\n\r\n    EvalVisitor.java:297: error: incompatible types: int cannot be converted to ExpressFragContext\r\n        Integer left = visitExpressFrag(0);\r\n                                    ^\r\n\r\n\r\nThis is the relevant part of my CCALParser.java (i am not fully sure if this is relevant):\r\n\r\n    // ExpressFragContext definition\r\n    public static class ExpressFragContext extends ExpressionContext {\r\n        public Expression_fragmentContext expression_fragment() {\r\n            return getRuleContext(Expression_fragmentContext.class,0);\r\n        }\r\n        // ...\r\n    }\r\n\r\nAnd my CCAL.g4 looks like this:\r\n\r\n    expression : expression_fragment binary_arith_op expression_fragment #AddMinusOp\r\n               | LPAREN expression RPAREN                       #Parens\r\n               | ID LPAREN arg_list RPAREN                      #FunctionCallOp\r\n               | expression_fragment                            #ExpressFrag\r\n               ;\r\n    \r\n    binary_arith_op : PLUS | MINUS;\r\n    \r\n    expression_fragment \r\n        : ID                                          #ID\r\n        | MINUS ID                                    #NegatedVariable\r\n        | NUMBER                                      #NumberLiteral\r\n        | TRUE                                        #TrueLiteral\r\n        | FALSE                                       #FalseLiteral\r\n        | LPAREN expression RPAREN                    #NestedExpression\r\n        ;\r\n\r\nI&#39;m not sure how to properly invoke visitExpressFrag or why it&#39;s not being called as expected. Any insights or suggestions on how to resolve this issue would be greatly appreciated.\r\n","link":"https://stackoverflow.com/questions/77571236/trouble-with-antlr-visitor-pattern-not-entering-visitexpressfrag-method","title":"Trouble with ANTLR Visitor Pattern - Not Entering visitExpressFrag Method","body":"<p>I am working on a lexical and syntax analyser that I amimplementing semantic analysis and intermediate representation generation using ANTLR, and I've encountered a problem with my visitor implementation. Specifically, I'm unable to successfully enter the visitExpressFrag method in my EvalVisitor class. This method is crucial for handling expressions in my language.</p>\n<p>Here's a simplified version of my problem:</p>\n<p>In my EvalVisitor.java, I have the following methods:</p>\n<pre><code>@Override\npublic Integer visitAddMinusOp(CCALParser.AddMinusOpContext ctx) {\n    Integer left = visit(ctx.expression_fragment(0));\n    Integer right = visit(ctx.expression_fragment(1));\n    if (left == null || right == null) {\n        throw new RuntimeException(&quot;Left or right operand is null in AddMinusOp&quot;);\n    }\n    System.out.println(&quot;visitAddMinusOp - Left: &quot; + left + &quot;, Right: &quot; + right);\n    // ...\n}\n\n@Override\npublic Integer visitExpressFrag(CCALParser.ExpressFragContext ctx) {\n    if (ctx.expression_fragment() == null) {\n        System.out.println(&quot;visitExpressFrag - Expression fragment context is null.&quot;);\n    } else {\n        System.out.println(&quot;visitExpressFrag - Expression Fragment Text: &quot; + ctx.expression_fragment().getText());\n    }\n    // ...\n}\n</code></pre>\n<p>However, when running my code, the visitExpressFrag method doesn't seem to be invoked as expected. I added print statements for debugging, but they don't get executed, indicating that the method isn't being entered.</p>\n<p>I tried directly calling visitExpressFrag like so:</p>\n<pre><code>@Override\npublic Integer visitAddMinusOp(CCALParser.AddMinusOpContext ctx) {\n    Integer left = visitExpressFrag(0);\n    // ...\n}\n</code></pre>\n<p>But this results in a compilation error:</p>\n<pre><code>EvalVisitor.java:297: error: incompatible types: int cannot be converted to ExpressFragContext\n    Integer left = visitExpressFrag(0);\n                                ^\n</code></pre>\n<p>This is the relevant part of my CCALParser.java (i am not fully sure if this is relevant):</p>\n<pre><code>// ExpressFragContext definition\npublic static class ExpressFragContext extends ExpressionContext {\n    public Expression_fragmentContext expression_fragment() {\n        return getRuleContext(Expression_fragmentContext.class,0);\n    }\n    // ...\n}\n</code></pre>\n<p>And my CCAL.g4 looks like this:</p>\n<pre><code>expression : expression_fragment binary_arith_op expression_fragment #AddMinusOp\n           | LPAREN expression RPAREN                       #Parens\n           | ID LPAREN arg_list RPAREN                      #FunctionCallOp\n           | expression_fragment                            #ExpressFrag\n           ;\n\nbinary_arith_op : PLUS | MINUS;\n\nexpression_fragment \n    : ID                                          #ID\n    | MINUS ID                                    #NegatedVariable\n    | NUMBER                                      #NumberLiteral\n    | TRUE                                        #TrueLiteral\n    | FALSE                                       #FalseLiteral\n    | LPAREN expression RPAREN                    #NestedExpression\n    ;\n</code></pre>\n<p>I'm not sure how to properly invoke visitExpressFrag or why it's not being called as expected. Any insights or suggestions on how to resolve this issue would be greatly appreciated.</p>\n"},{"tags":["java","soap"],"comment_count":0,"is_answered":false,"view_count":21,"answer_count":0,"score":0,"last_activity_date":1701287827,"creation_date":1701275730,"last_edit_date":1701287827,"question_id":77572989,"body_markdown":"I have received this exception when I call a SOAP app:\r\n\r\n&gt;&quot;Cannot write output after reading input&quot; \r\n\r\nMy implementation is:\r\n\r\n    RL obj = new URL(axaVerificationUrl);\r\n    HttpURLConnection con = (HttpURLConnection) obj.openConnection(); \r\n    con.setConnectTimeout(timeoutConnection);\r\n    con.setRequestMethod(&quot;POST&quot;);\r\n    con.setRequestProperty(&quot;Content-Type&quot;, &quot;application/soap+xml&quot;);\r\n    con.setRequestProperty(&quot;SOAPAction&quot;, &quot;EligibiliteService&quot;);\r\n    con.setDoOutput(true);\r\n    con.setDoInput(true);\r\n    OutputStream objOut = con.getOutputStream();\r\n    OutputStreamWriter wr = new OutputStreamWriter(objOut);\r\n    wr.write(replacePlaceHolder(request);\r\n    wr.flush();\r\n    wr.close();\r\n    String responseStatus = con.getResponseMessage();\r\n    BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));\r\n    String inputLine;\r\n    StringBuffer response = new StringBuffer();\r\n    while ((inputLine = in.readLine()) != null) {\r\n       response.append(inputLine);\r\n    }\r\n    in.close();\r\n\r\n\r\nI am getting this exception once I performed exactly this below line:\r\n\r\n`OutputStream objOut = con.getOutputStream();`\r\n\r\nBefore I write the request and get the response code. \r\n\r\n\r\nCan someone have any experience with this exception? \r\n\r\n\r\nI am expecting to call a soap API and get successful code. ","link":"https://stackoverflow.com/questions/77572989/cannot-write-output-after-reading-input-in-java","title":"Cannot write output after reading input in Java","body":"<p>I have received this exception when I call a SOAP app:</p>\n<blockquote>\n<p>&quot;Cannot write output after reading input&quot;</p>\n</blockquote>\n<p>My implementation is:</p>\n<pre><code>RL obj = new URL(axaVerificationUrl);\nHttpURLConnection con = (HttpURLConnection) obj.openConnection(); \ncon.setConnectTimeout(timeoutConnection);\ncon.setRequestMethod(&quot;POST&quot;);\ncon.setRequestProperty(&quot;Content-Type&quot;, &quot;application/soap+xml&quot;);\ncon.setRequestProperty(&quot;SOAPAction&quot;, &quot;EligibiliteService&quot;);\ncon.setDoOutput(true);\ncon.setDoInput(true);\nOutputStream objOut = con.getOutputStream();\nOutputStreamWriter wr = new OutputStreamWriter(objOut);\nwr.write(replacePlaceHolder(request);\nwr.flush();\nwr.close();\nString responseStatus = con.getResponseMessage();\nBufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));\nString inputLine;\nStringBuffer response = new StringBuffer();\nwhile ((inputLine = in.readLine()) != null) {\n   response.append(inputLine);\n}\nin.close();\n</code></pre>\n<p>I am getting this exception once I performed exactly this below line:</p>\n<p><code>OutputStream objOut = con.getOutputStream();</code></p>\n<p>Before I write the request and get the response code.</p>\n<p>Can someone have any experience with this exception?</p>\n<p>I am expecting to call a soap API and get successful code.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1700819428,"post_id":77539582,"comment_id":136702479,"body_markdown":"Thank you! Do you think there is some asynchronous alternative for `@DataJpaTest`? I&#39;m sure there&#39;s some &quot;official&quot; way of doing it","link":"https://stackoverflow.com/questions/77539142/async-methods-return-empty-lists-why/77539582#comment136702479_77539582","body":"Thank you! Do you think there is some asynchronous alternative for <code>@DataJpaTest</code>? I&#39;m sure there&#39;s some &quot;official&quot; way of doing it"},{"score":1,"post_type":"answer","creation_date":1700820166,"post_id":77539582,"comment_id":136702628,"body_markdown":"@Kodigas I don&#39;t think there is. But I also like to know why this happens and since your MRE is pretty detailed, I&#39;m going to add a bounty later today to ask for a more authoritative answer if I don&#39;t forget.","link":"https://stackoverflow.com/questions/77539142/async-methods-return-empty-lists-why/77539582#comment136702628_77539582","body":"@Kodigas I don&#39;t think there is. But I also like to know why this happens and since your MRE is pretty detailed, I&#39;m going to add a bounty later today to ask for a more authoritative answer if I don&#39;t forget."},{"score":0,"post_type":"answer","creation_date":1700902021,"post_id":77539582,"comment_id":136711105,"body_markdown":"A gentle reminder if you still want to do that","link":"https://stackoverflow.com/questions/77539142/async-methods-return-empty-lists-why/77539582#comment136711105_77539582","body":"A gentle reminder if you still want to do that"}],"comment_count":3,"score":3,"last_activity_date":1700777171,"last_edit_date":1700777171,"creation_date":1700772824,"answer_id":77539582,"question_id":77539142,"body_markdown":"While I don&#39;t know the exact cause, it seems to be related to how transactions are handled in `@DataJpaTest`. If you run the application regularly, the `findAll()` method works fine.\r\n\r\nSimilarly, if you use `@SpringBootTest` in stead of `@DataJpaTest`, your test also works:\r\n\r\n```java\r\n@SpringBootTest // Replace @DataJpaTest with @SpringBootTest\r\n@ActiveProfiles(&quot;test&quot;)\r\n@Sql(\r\n    executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD,\r\n    scripts = {&quot;/schema-h2.sql&quot;, &quot;/data-h2.sql&quot;}\r\n)\r\npublic class AsynchronousCardRepositoryTest {\r\n    // ...\r\n}\r\n```\r\n\r\nThe reason why I suspect that this is transaction related is because if I change the execution phase of the SQL to be `BEFORE_TEST_CLASS`, your test succeeds:\r\n\r\n```java\r\n@DataJpaTest\r\n@ActiveProfiles(&quot;test&quot;)\r\n// Replace BEFORE_TEST_METHOD with BEFORE_TEST_CLASS\r\n@Sql(\r\n    executionPhase = Sql.ExecutionPhase.BEFORE_TEST_CLASS,\r\n    scripts = {&quot;/schema-h2.sql&quot;, &quot;/data-h2.sql&quot;}\r\n)\r\npublic class AsynchronousCardRepositoryTest {\r\n    // ...\r\n}\r\n```\r\n\r\nAlternatively, if I annotate your test with `@Transactional(propagation = Propagation.NEVER)`, your test also succeeds:\r\n\r\n```java\r\n@DataJpaTest\r\n@ActiveProfiles(&quot;test&quot;)\r\n@Sql(\r\n    executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD,\r\n    scripts = {&quot;/schema-h2.sql&quot;, &quot;/data-h2.sql&quot;}\r\n)\r\n@Transactional(propagation = Propagation.NEVER) // Add this\r\npublic class AsynchronousCardRepositoryTest {\r\n    // ...\r\n}\r\n```","link":"https://stackoverflow.com/questions/77539142/async-methods-return-empty-lists-why/77539582#77539582","title":"@Async methods return empty lists. Why?","body":"<p>While I don't know the exact cause, it seems to be related to how transactions are handled in <code>@DataJpaTest</code>. If you run the application regularly, the <code>findAll()</code> method works fine.</p>\n<p>Similarly, if you use <code>@SpringBootTest</code> in stead of <code>@DataJpaTest</code>, your test also works:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest // Replace @DataJpaTest with @SpringBootTest\n@ActiveProfiles(&quot;test&quot;)\n@Sql(\n    executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD,\n    scripts = {&quot;/schema-h2.sql&quot;, &quot;/data-h2.sql&quot;}\n)\npublic class AsynchronousCardRepositoryTest {\n    // ...\n}\n</code></pre>\n<p>The reason why I suspect that this is transaction related is because if I change the execution phase of the SQL to be <code>BEFORE_TEST_CLASS</code>, your test succeeds:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@DataJpaTest\n@ActiveProfiles(&quot;test&quot;)\n// Replace BEFORE_TEST_METHOD with BEFORE_TEST_CLASS\n@Sql(\n    executionPhase = Sql.ExecutionPhase.BEFORE_TEST_CLASS,\n    scripts = {&quot;/schema-h2.sql&quot;, &quot;/data-h2.sql&quot;}\n)\npublic class AsynchronousCardRepositoryTest {\n    // ...\n}\n</code></pre>\n<p>Alternatively, if I annotate your test with <code>@Transactional(propagation = Propagation.NEVER)</code>, your test also succeeds:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@DataJpaTest\n@ActiveProfiles(&quot;test&quot;)\n@Sql(\n    executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD,\n    scripts = {&quot;/schema-h2.sql&quot;, &quot;/data-h2.sql&quot;}\n)\n@Transactional(propagation = Propagation.NEVER) // Add this\npublic class AsynchronousCardRepositoryTest {\n    // ...\n}\n</code></pre>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701167153,"post_id":77562030,"comment_id":136738949,"body_markdown":"Let me clarify please. Do you mean the actual method implementation in the proxy Spring Data creates is not marked with `@Async` and is not wrapped in an asynchronous proxy?","link":"https://stackoverflow.com/questions/77539142/async-methods-return-empty-lists-why/77562030#comment136738949_77562030","body":"Let me clarify please. Do you mean the actual method implementation in the proxy Spring Data creates is not marked with <code>@Async</code> and is not wrapped in an asynchronous proxy?"},{"score":0,"post_type":"answer","creation_date":1701212355,"post_id":77562030,"comment_id":136747062,"body_markdown":"The method itself is not invoked from the same class so this answer is irrelevant.","link":"https://stackoverflow.com/questions/77539142/async-methods-return-empty-lists-why/77562030#comment136747062_77562030","body":"The method itself is not invoked from the same class so this answer is irrelevant."}],"comment_count":2,"score":-1,"last_activity_date":1701157147,"creation_date":1701157147,"answer_id":77562030,"question_id":77539142,"body_markdown":"When you use @Async on a method, Spring creates a proxy around that method to handle the asynchronous behavior. However, if the method is called from within the same class, the proxy won&#39;t be invoked, and the asynchronous behavior may not take effect. \r\n\r\nThere are couple of thing that can be tried to get rid of the issue -\r\n\r\n1. Move the findAll() call to another class:\r\nCreate a separate service or component class, inject the AsynchronousCardRepository into that class, and call the findAll() method from there. This ensures that the proxy is invoked, and the asynchronous behavior is properly handled.\r\n\r\n       @Service\r\n       public class CardService {\r\n\r\n       private final AsynchronousCardRepository cardRepository;\r\n\r\n       @Autowired\r\n       public CardService(AsynchronousCardRepository cardRepository) {\r\n          this.cardRepository = cardRepository;\r\n       }\r\n\r\n        @Async\r\n        public CompletableFuture&lt;List&lt;Card&gt;&gt; findAll() {\r\n           return cardRepository.findAll();\r\n        }\r\n       }\r\n\r\nIn Test Class\r\n     @Autowired\r\n     private CardService cardService;\r\n\r\n     @Test\r\n     @SneakyThrows\r\n     void findAll() {\r\n        CompletableFuture&lt;List&lt;Card&gt;&gt; futureCards = cardService.findAll();\r\n        List&lt;Card&gt; cards = futureCards.get();\r\n        assertThat(cards).asList().hasSize(3);\r\n      }\r\n\r\n2. Use CompletableFuture instead of Future:\r\nYou can modify the return type of the findAll() method to use CompletableFuture directly. This might work more seamlessly with Spring&#39;s asynchronous processing.\r\n\r\n\r\nLet me know if this resolves your problem.","link":"https://stackoverflow.com/questions/77539142/async-methods-return-empty-lists-why/77562030#77562030","title":"@Async methods return empty lists. Why?","body":"<p>When you use @Async on a method, Spring creates a proxy around that method to handle the asynchronous behavior. However, if the method is called from within the same class, the proxy won't be invoked, and the asynchronous behavior may not take effect.</p>\n<p>There are couple of thing that can be tried to get rid of the issue -</p>\n<ol>\n<li><p>Move the findAll() call to another class:\nCreate a separate service or component class, inject the AsynchronousCardRepository into that class, and call the findAll() method from there. This ensures that the proxy is invoked, and the asynchronous behavior is properly handled.</p>\n<pre><code>@Service\npublic class CardService {\n\nprivate final AsynchronousCardRepository cardRepository;\n\n@Autowired\npublic CardService(AsynchronousCardRepository cardRepository) {\n   this.cardRepository = cardRepository;\n}\n\n @Async\n public CompletableFuture&lt;List&lt;Card&gt;&gt; findAll() {\n    return cardRepository.findAll();\n }\n}\n</code></pre>\n</li>\n</ol>\n<p>In Test Class\n@Autowired\nprivate CardService cardService;</p>\n<pre><code> @Test\n @SneakyThrows\n void findAll() {\n    CompletableFuture&lt;List&lt;Card&gt;&gt; futureCards = cardService.findAll();\n    List&lt;Card&gt; cards = futureCards.get();\n    assertThat(cards).asList().hasSize(3);\n  }\n</code></pre>\n<ol start=\"2\">\n<li>Use CompletableFuture instead of Future:\nYou can modify the return type of the findAll() method to use CompletableFuture directly. This might work more seamlessly with Spring's asynchronous processing.</li>\n</ol>\n<p>Let me know if this resolves your problem.</p>\n"},{"comment_count":0,"score":2,"last_activity_date":1701286773,"last_edit_date":1701286773,"creation_date":1701243830,"answer_id":77569338,"question_id":77539142,"body_markdown":"The cause of the test failure is due to a combination of:\r\n\r\n1. The `@DataJpaTest` annotation itself is annotated with `@Transactional`, this mean the test will run inside a transaction, also indicated by the Javadoc in `DataJpaTest`:\r\n   &gt; By default, tests annotated with `@DataJpaTest` are transactional and roll back at the end of each test.\r\n1. Your test is using `@Sql(executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD, ...)`, so the SQL scripts will run within the test&#39;s transaction, therefore any data created by the script is uncommitted data while the test is running.\r\n1. Your async `findAll()` will run in a different thread, outside of the test&#39;s transaction, and due to [transaction isolation](https://h2database.com/html/advanced.html#transaction_isolation) (default is read committed), it will not see uncommitted data created in the test, hence it will return nothing.\r\n\r\nAny one of the following can workaround this (mostly copied from the answer by @g00glen00b) and why they work:\r\n- Use `@SpringBootTest` instead of `@DataJpaTest` - this works because `@SpringBootTest` itself is not annotated with `@Transactional`, so there is no outer transaction wrapping the test, everything is committed as soon as their calls finish, so `findAll()` will see the committed test data.\r\n- Use `@Transactional(propagation = Propagation.NEVER)` or `Propagation.NOT_SUPPORTED` on the test, this essentially suspends the test transaction coming from `@DataJpaTest`, so will cause the test to run without a wrapping transaction, having similar affect as the above.\r\n- Use `@Sql(executionPhase = Sql.ExecutionPhase.BEFORE_TEST_CLASS, ...)` - this runs and commits the test data before the test starts, therefore not affected by the test&#39;s own transaction.\r\n- Remove `@Async` on `findAll()` - this will cause `findAll()` to run within the same transaction, therefore will see uncommitted data.","link":"https://stackoverflow.com/questions/77539142/async-methods-return-empty-lists-why/77569338#77569338","title":"@Async methods return empty lists. Why?","body":"<p>The cause of the test failure is due to a combination of:</p>\n<ol>\n<li>The <code>@DataJpaTest</code> annotation itself is annotated with <code>@Transactional</code>, this mean the test will run inside a transaction, also indicated by the Javadoc in <code>DataJpaTest</code>:\n<blockquote>\n<p>By default, tests annotated with <code>@DataJpaTest</code> are transactional and roll back at the end of each test.</p>\n</blockquote>\n</li>\n<li>Your test is using <code>@Sql(executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD, ...)</code>, so the SQL scripts will run within the test's transaction, therefore any data created by the script is uncommitted data while the test is running.</li>\n<li>Your async <code>findAll()</code> will run in a different thread, outside of the test's transaction, and due to <a href=\"https://h2database.com/html/advanced.html#transaction_isolation\" rel=\"nofollow noreferrer\">transaction isolation</a> (default is read committed), it will not see uncommitted data created in the test, hence it will return nothing.</li>\n</ol>\n<p>Any one of the following can workaround this (mostly copied from the answer by @g00glen00b) and why they work:</p>\n<ul>\n<li>Use <code>@SpringBootTest</code> instead of <code>@DataJpaTest</code> - this works because <code>@SpringBootTest</code> itself is not annotated with <code>@Transactional</code>, so there is no outer transaction wrapping the test, everything is committed as soon as their calls finish, so <code>findAll()</code> will see the committed test data.</li>\n<li>Use <code>@Transactional(propagation = Propagation.NEVER)</code> or <code>Propagation.NOT_SUPPORTED</code> on the test, this essentially suspends the test transaction coming from <code>@DataJpaTest</code>, so will cause the test to run without a wrapping transaction, having similar affect as the above.</li>\n<li>Use <code>@Sql(executionPhase = Sql.ExecutionPhase.BEFORE_TEST_CLASS, ...)</code> - this runs and commits the test data before the test starts, therefore not affected by the test's own transaction.</li>\n<li>Remove <code>@Async</code> on <code>findAll()</code> - this will cause <code>findAll()</code> to run within the same transaction, therefore will see uncommitted data.</li>\n</ul>\n"}],"comment_count":0,"is_answered":true,"view_count":146,"answer_count":3,"score":3,"last_activity_date":1701286773,"creation_date":1700765887,"question_id":77539142,"body_markdown":"I&#39;m trying to play around with `@Async`. My first experience with it isn&#39;t very positive. I get an empty list where results are definitely expected\r\n\r\nMRE:\r\n```java\r\npublic interface AsynchronousCardRepository extends Repository&lt;Card, UUID&gt; {\r\n    @Async\r\n    Future&lt;List&lt;Card&gt;&gt; findAll();\r\n}\r\n```\r\n```java\r\n@DataJpaTest\r\n@ActiveProfiles(&quot;test&quot;)\r\n@Sql(\r\n        executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD,\r\n        scripts = {&quot;/schema-h2.sql&quot;, &quot;/data-h2.sql&quot;}\r\n)\r\npublic class AsynchronousCardRepositoryTest {\r\n    @Autowired\r\n    AsynchronousCardRepository cardRepository;\r\n\r\n    @Test\r\n    @SneakyThrows\r\n    void findAll() {\r\n        Future&lt;List&lt;Card&gt;&gt; futureCards = cardRepository.findAll();\r\n        List&lt;Card&gt; cards = futureCards.get();\r\n        assertThat(cards).asList().hasSize(3);\r\n    }\r\n}\r\n```\r\n```sql\r\n-- schema\r\n\r\nCREATE TABLE IF NOT EXISTS PUBLIC.account\r\n(\r\n    id                        UUID           PRIMARY KEY\r\n);\r\nCREATE TABLE IF NOT EXISTS PUBLIC.card\r\n(\r\n    id                UUID             PRIMARY KEY,\r\n    account_id        UUID             NOT NULL REFERENCES account (id),\r\n    status            VARCHAR(30)      NOT NULL\r\n);\r\n```\r\n```sql\r\n-- data\r\n\r\nINSERT INTO PUBLIC.ACCOUNT\r\nVALUES (&#39;00000000-0000-0000-0000-000000000ac1&#39;);\r\n\r\nINSERT INTO PUBLIC.CARD\r\nVALUES (&#39;00000000-0000-0000-0000-0000000000c1&#39;, &#39;00000000-0000-0000-0000-000000000ac1&#39;, &#39;ACTIVE&#39;);\r\n\r\nINSERT INTO PUBLIC.CARD\r\nVALUES (&#39;00000000-0000-0000-0000-0000000000c2&#39;, &#39;00000000-0000-0000-0000-000000000ac1&#39;, &#39;ACTIVE&#39;);\r\n\r\nINSERT INTO PUBLIC.CARD\r\nVALUES (&#39;00000000-0000-0000-0000-0000000000c3&#39;, &#39;00000000-0000-0000-0000-000000000ac1&#39;, &#39;NON_ACTIVE&#39;);\r\n```\r\n```java\r\n@Entity\r\n@Table(name = &quot;card&quot;)\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Card {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private UUID id;\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;account_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private Account account;\r\n    @Enumerated(value = EnumType.STRING)\r\n    private CardStatus status;\r\n}\r\n```\r\n```java\r\npublic enum CardStatus {\r\n    ACTIVE, NON_ACTIVE\r\n}\r\n```\r\n```java\r\n@Entity\r\n@Table(name = &quot;account&quot;)\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Account {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name = &quot;id&quot;)\r\n    private UUID id;\r\n    @OneToMany(mappedBy = &quot;account&quot;)\r\n    private List&lt;Card&gt; cards;\r\n}\r\n```\r\n```java\r\n@SpringBootApplication\r\n@EnableAsync // funny enough, if you remove it, everything works\r\npublic class CreditServiceApplication {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(CreditServiceApplication.class, args);\r\n    }\r\n}\r\n```\r\n```yml\r\nspring:\r\n  datasource:\r\n    url: jdbc:h2:mem:db;DB_CLOSE_DELAY=-1;MODE=MySQL;DATABASE_TO_LOWER=TRUE\r\n    driver-class-name: org.h2.Driver\r\n    username: sa\r\n    password:\r\n  jpa:\r\n    hibernate:\r\n      ddl-auto: none\r\n    show-sql: true\r\n    database-platform: org.hibernate.dialect.H2Dialect\r\n    properties:\r\n      hibernate:\r\n        format_sql: true\r\n  h2:\r\n    console:\r\n      enabled: false\r\n      settings:\r\n        web-allow-others: true\r\n  config:\r\n    activate:\r\n      on-profile: test\r\n\r\nlogging:\r\n  level:\r\n    org:\r\n      hibernate:\r\n        type: TRACE\r\n      springframework:\r\n          jdbc:\r\n            core: TRACE\r\n            datasource:\r\n              init: DEBUG\r\n          test:\r\n            context:\r\n              jdbc: DEBUG\r\n```\r\nThe method doesn&#39;t return anything:\r\n```\r\njava.lang.AssertionError: \r\nExpected size: 3 but was: 0 in:\r\n[]\r\n\r\n\tat by.afinny.credit.unit.repository.AsynchronousCardRepositoryTest.findAll(AsynchronousCardRepositoryTest.java:32)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n```\r\nWhy is it happening?","link":"https://stackoverflow.com/questions/77539142/async-methods-return-empty-lists-why","title":"@Async methods return empty lists. Why?","body":"<p>I'm trying to play around with <code>@Async</code>. My first experience with it isn't very positive. I get an empty list where results are definitely expected</p>\n<p>MRE:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface AsynchronousCardRepository extends Repository&lt;Card, UUID&gt; {\n    @Async\n    Future&lt;List&lt;Card&gt;&gt; findAll();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@DataJpaTest\n@ActiveProfiles(&quot;test&quot;)\n@Sql(\n        executionPhase = Sql.ExecutionPhase.BEFORE_TEST_METHOD,\n        scripts = {&quot;/schema-h2.sql&quot;, &quot;/data-h2.sql&quot;}\n)\npublic class AsynchronousCardRepositoryTest {\n    @Autowired\n    AsynchronousCardRepository cardRepository;\n\n    @Test\n    @SneakyThrows\n    void findAll() {\n        Future&lt;List&lt;Card&gt;&gt; futureCards = cardRepository.findAll();\n        List&lt;Card&gt; cards = futureCards.get();\n        assertThat(cards).asList().hasSize(3);\n    }\n}\n</code></pre>\n<pre class=\"lang-sql prettyprint-override\"><code>-- schema\n\nCREATE TABLE IF NOT EXISTS PUBLIC.account\n(\n    id                        UUID           PRIMARY KEY\n);\nCREATE TABLE IF NOT EXISTS PUBLIC.card\n(\n    id                UUID             PRIMARY KEY,\n    account_id        UUID             NOT NULL REFERENCES account (id),\n    status            VARCHAR(30)      NOT NULL\n);\n</code></pre>\n<pre class=\"lang-sql prettyprint-override\"><code>-- data\n\nINSERT INTO PUBLIC.ACCOUNT\nVALUES ('00000000-0000-0000-0000-000000000ac1');\n\nINSERT INTO PUBLIC.CARD\nVALUES ('00000000-0000-0000-0000-0000000000c1', '00000000-0000-0000-0000-000000000ac1', 'ACTIVE');\n\nINSERT INTO PUBLIC.CARD\nVALUES ('00000000-0000-0000-0000-0000000000c2', '00000000-0000-0000-0000-000000000ac1', 'ACTIVE');\n\nINSERT INTO PUBLIC.CARD\nVALUES ('00000000-0000-0000-0000-0000000000c3', '00000000-0000-0000-0000-000000000ac1', 'NON_ACTIVE');\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;card&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Card {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private UUID id;\n    @ManyToOne\n    @JoinColumn(name = &quot;account_id&quot;, referencedColumnName = &quot;id&quot;)\n    private Account account;\n    @Enumerated(value = EnumType.STRING)\n    private CardStatus status;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public enum CardStatus {\n    ACTIVE, NON_ACTIVE\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;account&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Account {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;)\n    private UUID id;\n    @OneToMany(mappedBy = &quot;account&quot;)\n    private List&lt;Card&gt; cards;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableAsync // funny enough, if you remove it, everything works\npublic class CreditServiceApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(CreditServiceApplication.class, args);\n    }\n}\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  datasource:\n    url: jdbc:h2:mem:db;DB_CLOSE_DELAY=-1;MODE=MySQL;DATABASE_TO_LOWER=TRUE\n    driver-class-name: org.h2.Driver\n    username: sa\n    password:\n  jpa:\n    hibernate:\n      ddl-auto: none\n    show-sql: true\n    database-platform: org.hibernate.dialect.H2Dialect\n    properties:\n      hibernate:\n        format_sql: true\n  h2:\n    console:\n      enabled: false\n      settings:\n        web-allow-others: true\n  config:\n    activate:\n      on-profile: test\n\nlogging:\n  level:\n    org:\n      hibernate:\n        type: TRACE\n      springframework:\n          jdbc:\n            core: TRACE\n            datasource:\n              init: DEBUG\n          test:\n            context:\n              jdbc: DEBUG\n</code></pre>\n<p>The method doesn't return anything:</p>\n<pre><code>java.lang.AssertionError: \nExpected size: 3 but was: 0 in:\n[]\n\n    at by.afinny.credit.unit.repository.AsynchronousCardRepositoryTest.findAll(AsynchronousCardRepositoryTest.java:32)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n</code></pre>\n<p>Why is it happening?</p>\n"},{"tags":["java","xml","android-studio","onclick","attributes"],"comment_count":0,"is_answered":false,"view_count":13,"answer_count":0,"score":0,"last_activity_date":1701286679,"creation_date":1701286679,"question_id":77574058,"body_markdown":"How can this problem be solved? Also, there are many attributes for example (textColor, font, background, backgroundColor) that are not in the attribute box in Android Studio (https://i.stack.imgur.com/tDKS8.png)\r\n\r\nShould be (onClick attribute) it in the Attributes box in Android Studio ","link":"https://stackoverflow.com/questions/77574058/onclick-attribute-it-is-not-in-the-attribute-box-in-android-studio","title":"(onClick attribute) it is not in the attribute box in Android Studio","body":"<p>How can this problem be solved? Also, there are many attributes for example (textColor, font, background, backgroundColor) that are not in the attribute box in Android Studio (<a href=\"https://i.stack.imgur.com/tDKS8.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/tDKS8.png</a>)</p>\n<p>Should be (onClick attribute) it in the Attributes box in Android Studio</p>\n"},{"tags":["java","spring","spring-boot","security","spring-security"],"comments":[{"score":1,"post_type":"question","creation_date":1692869826,"post_id":76961444,"comment_id":135683670,"body_markdown":"Please provide the code for the apiKeyAuthFilter","link":"https://stackoverflow.com/questions/76961444/spring-security-combining-oauth2-and-api-key-filter#comment135683670_76961444","body":"Please provide the code for the apiKeyAuthFilter"},{"score":0,"post_type":"question","creation_date":1701313163,"post_id":76961444,"comment_id":136761325,"body_markdown":"are they request to the same endpoint? or else just set up 2 different filter chains that handles different endpoints.","link":"https://stackoverflow.com/questions/76961444/spring-security-combining-oauth2-and-api-key-filter#comment136761325_76961444","body":"are they request to the same endpoint? or else just set up 2 different filter chains that handles different endpoints."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1692875898,"creation_date":1692875898,"answer_id":76968733,"question_id":76961444,"body_markdown":"One option might be to make `apiKeyAuthFilter` extend `AbstractAuthenticationProcessingFilter` and to provide a suitable `RequestHeaderRequestMatcher`. This should then only apply any authentication you&#39;ve added in `attemptAuthentication` if the header is present.\r\n\r\n```\r\npublic class ApiKeyAuthFilter extends AbstractAuthenticationProcessingFilter {\r\n\r\n  public ApiKeyAuthFilter() {\r\n    super(new RequestHeaderRequestMatcher(&quot;X-API-KEY&quot;));\r\n  }\r\n```","link":"https://stackoverflow.com/questions/76961444/spring-security-combining-oauth2-and-api-key-filter/76968733#76968733","title":"Spring Security Combining oauth2 and api key filter","body":"<p>One option might be to make <code>apiKeyAuthFilter</code> extend <code>AbstractAuthenticationProcessingFilter</code> and to provide a suitable <code>RequestHeaderRequestMatcher</code>. This should then only apply any authentication you've added in <code>attemptAuthentication</code> if the header is present.</p>\n<pre><code>public class ApiKeyAuthFilter extends AbstractAuthenticationProcessingFilter {\n\n  public ApiKeyAuthFilter() {\n    super(new RequestHeaderRequestMatcher(&quot;X-API-KEY&quot;));\n  }\n</code></pre>\n"}],"comment_count":2,"is_answered":false,"view_count":236,"answer_count":1,"score":0,"last_activity_date":1701285551,"creation_date":1692794403,"question_id":76961444,"body_markdown":"currently I&#39;m facing the problem of allowing a user to authorize to a REST Api with either an X-API-KEY header **or** an oauth2 jwt token.\r\n\r\nThe current security config looks like this:\r\n\r\n```\r\n@Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\r\n        http.addFilterBefore(apiKeyAuthFilter, BasicAuthenticationFilter.class);\r\n\r\n        http.sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .csrf(AbstractHttpConfigurer::disable)\r\n                .cors(AbstractHttpConfigurer::disable)\r\n                .httpBasic(AbstractHttpConfigurer::disable)\r\n                .formLogin(AbstractHttpConfigurer::disable)\r\n                .headers(h -&gt; h.httpStrictTransportSecurity(c -&gt; c.requestMatcher(AnyRequestMatcher.INSTANCE)));\r\n\r\n        http.oauth2ResourceServer(server -&gt; server.jwt(jwt -&gt;\r\n                        jwt.jwtAuthenticationConverter(\r\n                                jwtGrantedAuthoritiesConverter()).decoder(jwtDecoder())\r\n                )\r\n        );\r\n\r\n        return http.build();\r\n    }\r\n\r\n```\r\n\r\nThe problem I have is that even though I provide a valid jwt and the oauth2ResourceServer is fine it still triggers the apiKeyFilter and then failes as the header is not set.\r\n\r\nI read a lot of stuff regarding multi authentication but spring security is hard to get. Maybe you have an idea or some ressources to look up.","link":"https://stackoverflow.com/questions/76961444/spring-security-combining-oauth2-and-api-key-filter","title":"Spring Security Combining oauth2 and api key filter","body":"<p>currently I'm facing the problem of allowing a user to authorize to a REST Api with either an X-API-KEY header <strong>or</strong> an oauth2 jwt token.</p>\n<p>The current security config looks like this:</p>\n<pre><code>@Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n\n        http.addFilterBefore(apiKeyAuthFilter, BasicAuthenticationFilter.class);\n\n        http.sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .csrf(AbstractHttpConfigurer::disable)\n                .cors(AbstractHttpConfigurer::disable)\n                .httpBasic(AbstractHttpConfigurer::disable)\n                .formLogin(AbstractHttpConfigurer::disable)\n                .headers(h -&gt; h.httpStrictTransportSecurity(c -&gt; c.requestMatcher(AnyRequestMatcher.INSTANCE)));\n\n        http.oauth2ResourceServer(server -&gt; server.jwt(jwt -&gt;\n                        jwt.jwtAuthenticationConverter(\n                                jwtGrantedAuthoritiesConverter()).decoder(jwtDecoder())\n                )\n        );\n\n        return http.build();\n    }\n\n</code></pre>\n<p>The problem I have is that even though I provide a valid jwt and the oauth2ResourceServer is fine it still triggers the apiKeyFilter and then failes as the header is not set.</p>\n<p>I read a lot of stuff regarding multi authentication but spring security is hard to get. Maybe you have an idea or some ressources to look up.</p>\n"},{"tags":["java","spring-boot","graalvm","graalvm-native-image"],"comments":[{"score":0,"post_type":"question","creation_date":1701289250,"post_id":77573972,"comment_id":136758696,"body_markdown":"That&#39;s an unusual way to build a native image for a Spring Boot app. Have you considered using the Maven or Gradle build plugins to do it instead?","link":"https://stackoverflow.com/questions/77573972/error-could-not-find-or-load-main-class-org-springframework-boot-loader-jarlau#comment136758696_77573972","body":"That&#39;s an unusual way to build a native image for a Spring Boot app. Have you considered using the Maven or Gradle build plugins to do it instead?"},{"score":0,"post_type":"question","creation_date":1701325832,"post_id":77573972,"comment_id":136762374,"body_markdown":"@AndyWilkinson I looked into the graalvm maven plugin. But that builds as a docker image. I don&#39;t want to use docker to build the native imagine. But this method I tried should also work right. The exe is functional when I place the jar file in the same folder. It&#39;s a problem with how the image is build. I have no clue what options I am missing.","link":"https://stackoverflow.com/questions/77573972/error-could-not-find-or-load-main-class-org-springframework-boot-loader-jarlau#comment136762374_77573972","body":"@AndyWilkinson I looked into the graalvm maven plugin. But that builds as a docker image. I don&#39;t want to use docker to build the native imagine. But this method I tried should also work right. The exe is functional when I place the jar file in the same folder. It&#39;s a problem with how the image is build. I have no clue what options I am missing."},{"score":0,"post_type":"question","creation_date":1701329445,"post_id":77573972,"comment_id":136762758,"body_markdown":"With build plugins, Docker is optional, you can build without it too. See [here](https://docs.spring.io/spring-boot/docs/current/reference/html/native-image.html#native-image.developing-your-first-application.native-build-tools). What you are missing is likely reflection/proxy/provider etc config files which can take quite some time to do properly. Plugins just (try to) do this work automatically for you.","link":"https://stackoverflow.com/questions/77573972/error-could-not-find-or-load-main-class-org-springframework-boot-loader-jarlau#comment136762758_77573972","body":"With build plugins, Docker is optional, you can build without it too. See <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/native-image.html#native-image.developing-your-first-application.native-build-tools\" rel=\"nofollow noreferrer\">here</a>. What you are missing is likely reflection/proxy/provider etc config files which can take quite some time to do properly. Plugins just (try to) do this work automatically for you."}],"comment_count":3,"is_answered":false,"view_count":65,"answer_count":0,"score":0,"last_activity_date":1701285531,"creation_date":1701285531,"question_id":77573972,"body_markdown":"I have created a Sprint Boot Application and exported it as a Jar file using &#39;mvn package&#39;. This Jar is a standalone executable file which do not need any other dependent files to run. The only dependent files the main class need are already packaged within the jar and I am using InputStream to load the dependent files during runtime. So basically the Jar file is looking for the dependent files within itself and this is all working fine.\r\n\r\nI want to convert this executable jar into a native imagine (exe file in my case) and so I ran the command\r\n\r\n&gt; *native-image -cp &quot;myJarFile.jar&quot; com.example.MyApp*\r\n\r\nAnd the exe gets build successfully. But when I run it, it&#39;s giving me the below error in the command prompt\r\n&gt;Error: could not find or load main class org.springframework.boot.loader.jar.JarLauncher caused by: java.lang.ClassNotFoundException\r\n\r\n```Note: But, when I place the orginal jar file in the same directory of the exe file and run the exe, the spring app gets deployed.```\r\n\r\nJust to be sure that something is not getting mishandled, I have put the jar file in a seperate location on my machine and ran it using the command:\r\n\r\n&gt; *java -cp &quot;myJarFile.jar&quot; com.example.MyApp*\r\n\r\nAnd the spring app deploys on port 8080 successfully. \r\n\r\nI have analysed the jar contents and could see the folders **BOOT-INF/** , **META-INF/** and all the other necessary lib folders.\r\n\r\nWhat could be going wrong and how to fix this issue? \r\n\r\nThanks in advance.","link":"https://stackoverflow.com/questions/77573972/error-could-not-find-or-load-main-class-org-springframework-boot-loader-jarlau","title":"&quot;Error: could not find or load main class org.springframework.boot.loader.JarLauncher.&quot; While running a native-image build using GraalVM","body":"<p>I have created a Sprint Boot Application and exported it as a Jar file using 'mvn package'. This Jar is a standalone executable file which do not need any other dependent files to run. The only dependent files the main class need are already packaged within the jar and I am using InputStream to load the dependent files during runtime. So basically the Jar file is looking for the dependent files within itself and this is all working fine.</p>\n<p>I want to convert this executable jar into a native imagine (exe file in my case) and so I ran the command</p>\n<blockquote>\n<p><em>native-image -cp &quot;myJarFile.jar&quot; com.example.MyApp</em></p>\n</blockquote>\n<p>And the exe gets build successfully. But when I run it, it's giving me the below error in the command prompt</p>\n<blockquote>\n<p>Error: could not find or load main class org.springframework.boot.loader.jar.JarLauncher caused by: java.lang.ClassNotFoundException</p>\n</blockquote>\n<p><code>Note: But, when I place the orginal jar file in the same directory of the exe file and run the exe, the spring app gets deployed.</code></p>\n<p>Just to be sure that something is not getting mishandled, I have put the jar file in a seperate location on my machine and ran it using the command:</p>\n<blockquote>\n<p><em>java -cp &quot;myJarFile.jar&quot; com.example.MyApp</em></p>\n</blockquote>\n<p>And the spring app deploys on port 8080 successfully.</p>\n<p>I have analysed the jar contents and could see the folders <strong>BOOT-INF/</strong> , <strong>META-INF/</strong> and all the other necessary lib folders.</p>\n<p>What could be going wrong and how to fix this issue?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","validation","exception"],"comments":[{"score":1,"post_type":"question","creation_date":1701585761,"post_id":77573802,"comment_id":136792771,"body_markdown":"Does this answer your question? [This application has no explicit mapping for /error](https://stackoverflow.com/questions/31134333/this-application-has-no-explicit-mapping-for-error)","link":"https://stackoverflow.com/questions/77573802/error-in-spring-boot-whitelabel-error-page-this-application-has-no-explicit-mapp#comment136792771_77573802","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/31134333/this-application-has-no-explicit-mapping-for-error\">This application has no explicit mapping for /error</a>"}],"comment_count":1,"is_answered":false,"view_count":47,"answer_count":0,"score":0,"last_activity_date":1701283770,"creation_date":1701283770,"question_id":77573802,"body_markdown":"In browser getting below error rather than JSON Error message but it is working in Postman.I need print the JSON Error message in Browser . Anyone can help here how to display the error message in JSON format in Browser\r\n\r\nBrowser :\r\n**Whitelabel Error Page\r\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\r\nWed Nov 29 17:10:21 UTC 2023\r\nThere was an unexpected error (type=Not Found, status=404).\r\nResource Not Found**\r\n\r\nPostman :\r\n\r\n    {\r\n        &quot;timestamp&quot;: &quot;2023-11-29T18:21:30.864+00:00&quot;,\r\n        &quot;status&quot;: 404,\r\n        &quot;error&quot;: &quot;Not Found&quot;,\r\n        &quot;message&quot;: &quot;Resource Not Found&quot;,\r\n        &quot;path&quot;: &quot;/getDetails&quot;\r\n    }\r\n    \r\n    Java code :\r\n    \r\n    Exception \r\n    @RestControllerAdvice\r\n    public class ValidationExceptionHandler {\r\n    \r\n        @ExceptionHandler(ConstraintViolationException.class)\r\n        @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n        public void constraintViolationException(HttpServletResponse response,ConstraintViolationException e) throws IOException {\r\n            Set&lt;ConstraintViolation&lt;?&gt;&gt; violations = e.getConstraintViolations();\r\n            StringBuilder strBuilder = new StringBuilder();\r\n            for (ConstraintViolation&lt;?&gt; violation : violations ) {\r\n                strBuilder.append(violation.getMessage() + &#39;\\n&#39;);\r\n            }\r\n             ResponseEntity.status(BAD_REQUEST);\r\n            response.sendError(HttpStatus.BAD_REQUEST.value());\r\n        }\r\n        @ExceptionHandler(ValidationException.class)\r\n        public void dateViolationException(HttpServletResponse response, ValidationException e) throws IOException {\r\n           if(e.getMessage().equalsIgnoreCase(&quot;Resource Not Found&quot;)){\r\n               ResponseEntity.status(NOT_FOUND);\r\n               response.sendError(NOT_FOUND.value(), e.getMessage());\r\n            }else{\r\n               if(e.getMessage().equalsIgnoreCase(&quot;User Not Found in the system&quot;)){\r\n                   ResponseEntity.status(UNAUTHORIZED);\r\n                   response.sendError(UNAUTHORIZED.value(), e.getMessage());\r\n           }\r\n            else{\r\n                ResponseEntity.status(BAD_REQUEST);\r\n                response.sendError(HttpStatus.BAD_REQUEST.value(), e.getMessage());\r\n            }\r\n        }\r\n    }}\r\n    \r\n    Controller :\r\n    \r\n    @RequestMapping(value = &quot;/getDetails&quot;, method = RequestMethod.GET)\r\n        @Validated\r\n        public Object getSearchCriteria(@RequestParam(value = &quot;Id&quot;) String Id,\r\n                                                @RequestParam(value = &quot;service&quot;, required = false) String service) throws ParseException, JsonProcessingException, javax.xml.bind.ValidationException {\r\n    \r\n            if (system != null &amp;&amp; !system.isEmpty())\r\n                documentMap.put(&quot;system&quot;, s);\r\n            List&lt;? extends Bson&gt; pipelines = getAggregate(queryLimit, projectFields, documentMap);\r\n           \r\n            List listDetails = collectionDB.aggregate(pipelines).into(Aggregate);\r\n            if (listDetails.isEmpty()) {\r\n                throw new ValidationException(RESOURCE_NOT_FOUND);\r\n            }\r\n            return getPrettyDocument(listDetails);\r\n        }\r\n\r\n","link":"https://stackoverflow.com/questions/77573802/error-in-spring-boot-whitelabel-error-page-this-application-has-no-explicit-mapp","title":"Error in Spring boot Whitelabel Error Page This application has no explicit mapping for /error, so you are seeing this as a fallback","body":"<p>In browser getting below error rather than JSON Error message but it is working in Postman.I need print the JSON Error message in Browser . Anyone can help here how to display the error message in JSON format in Browser</p>\n<p>Browser :\n<strong>Whitelabel Error Page\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\nWed Nov 29 17:10:21 UTC 2023\nThere was an unexpected error (type=Not Found, status=404).\nResource Not Found</strong></p>\n<p>Postman :</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2023-11-29T18:21:30.864+00:00&quot;,\n    &quot;status&quot;: 404,\n    &quot;error&quot;: &quot;Not Found&quot;,\n    &quot;message&quot;: &quot;Resource Not Found&quot;,\n    &quot;path&quot;: &quot;/getDetails&quot;\n}\n\nJava code :\n\nException \n@RestControllerAdvice\npublic class ValidationExceptionHandler {\n\n    @ExceptionHandler(ConstraintViolationException.class)\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    public void constraintViolationException(HttpServletResponse response,ConstraintViolationException e) throws IOException {\n        Set&lt;ConstraintViolation&lt;?&gt;&gt; violations = e.getConstraintViolations();\n        StringBuilder strBuilder = new StringBuilder();\n        for (ConstraintViolation&lt;?&gt; violation : violations ) {\n            strBuilder.append(violation.getMessage() + '\\n');\n        }\n         ResponseEntity.status(BAD_REQUEST);\n        response.sendError(HttpStatus.BAD_REQUEST.value());\n    }\n    @ExceptionHandler(ValidationException.class)\n    public void dateViolationException(HttpServletResponse response, ValidationException e) throws IOException {\n       if(e.getMessage().equalsIgnoreCase(&quot;Resource Not Found&quot;)){\n           ResponseEntity.status(NOT_FOUND);\n           response.sendError(NOT_FOUND.value(), e.getMessage());\n        }else{\n           if(e.getMessage().equalsIgnoreCase(&quot;User Not Found in the system&quot;)){\n               ResponseEntity.status(UNAUTHORIZED);\n               response.sendError(UNAUTHORIZED.value(), e.getMessage());\n       }\n        else{\n            ResponseEntity.status(BAD_REQUEST);\n            response.sendError(HttpStatus.BAD_REQUEST.value(), e.getMessage());\n        }\n    }\n}}\n\nController :\n\n@RequestMapping(value = &quot;/getDetails&quot;, method = RequestMethod.GET)\n    @Validated\n    public Object getSearchCriteria(@RequestParam(value = &quot;Id&quot;) String Id,\n                                            @RequestParam(value = &quot;service&quot;, required = false) String service) throws ParseException, JsonProcessingException, javax.xml.bind.ValidationException {\n\n        if (system != null &amp;&amp; !system.isEmpty())\n            documentMap.put(&quot;system&quot;, s);\n        List&lt;? extends Bson&gt; pipelines = getAggregate(queryLimit, projectFields, documentMap);\n       \n        List listDetails = collectionDB.aggregate(pipelines).into(Aggregate);\n        if (listDetails.isEmpty()) {\n            throw new ValidationException(RESOURCE_NOT_FOUND);\n        }\n        return getPrettyDocument(listDetails);\n    }\n</code></pre>\n"},{"tags":["java","visual-studio-code"],"comments":[{"score":1,"post_type":"question","creation_date":1700244560,"post_id":77500684,"comment_id":136634860,"body_markdown":"if you don&#39;t use those imports anywhere in your project, you could try using the `java.completion.filteredTypes` setting. Not sure if that works. But really what I&#39;m more interested in is why this is happening. Do classes named `Context` and `Action` show up in that file?","link":"https://stackoverflow.com/questions/77500684/vs-code-keeps-adding-incorrect-java-import-how-to-prevent-specific-imports-fro#comment136634860_77500684","body":"if you don&#39;t use those imports anywhere in your project, you could try using the <code>java.completion.filteredTypes</code> setting. Not sure if that works. But really what I&#39;m more interested in is why this is happening. Do classes named <code>Context</code> and <code>Action</code> show up in that file?"},{"score":0,"post_type":"question","creation_date":1700244606,"post_id":77500684,"comment_id":136634869,"body_markdown":"Try also doing an [extension bisect](//code.visualstudio.com/blogs/2021/02/16/extension-bisect) to figure out what extension is causing it.","link":"https://stackoverflow.com/questions/77500684/vs-code-keeps-adding-incorrect-java-import-how-to-prevent-specific-imports-fro#comment136634869_77500684","body":"Try also doing an <a href=\"//code.visualstudio.com/blogs/2021/02/16/extension-bisect\" rel=\"nofollow noreferrer\">extension bisect</a> to figure out what extension is causing it."},{"score":0,"post_type":"question","creation_date":1700394981,"post_id":77500684,"comment_id":136646859,"body_markdown":"Yes, the code contains classes with those names, but these are imported from other places (I don&#39;t think I can share the code); that&#39;s why the added imports cause conflicts.\n\nI&#39;ll see if I can do a bisect. It may take some time as the problem doesn&#39;t seem to occur on every save action and I don&#39;t yet have an exact sequence of actions that consistently triggers it.","link":"https://stackoverflow.com/questions/77500684/vs-code-keeps-adding-incorrect-java-import-how-to-prevent-specific-imports-fro#comment136646859_77500684","body":"Yes, the code contains classes with those names, but these are imported from other places (I don&#39;t think I can share the code); that&#39;s why the added imports cause conflicts.  I&#39;ll see if I can do a bisect. It may take some time as the problem doesn&#39;t seem to occur on every save action and I don&#39;t yet have an exact sequence of actions that consistently triggers it."},{"score":0,"post_type":"question","creation_date":1700471016,"post_id":77500684,"comment_id":136654115,"body_markdown":"Check whether there are other settings in settings.json to cause this phenomenon? Or restore the default settings to see if there is no longer an automatic introduction.","link":"https://stackoverflow.com/questions/77500684/vs-code-keeps-adding-incorrect-java-import-how-to-prevent-specific-imports-fro#comment136654115_77500684","body":"Check whether there are other settings in settings.json to cause this phenomenon? Or restore the default settings to see if there is no longer an automatic introduction."},{"score":0,"post_type":"question","creation_date":1701255814,"post_id":77500684,"comment_id":136752230,"body_markdown":"After setting `java.completion.filteredTypes` to exclude the added types, the problem has not appeared for at least a week, so that seems to have solved my problem.","link":"https://stackoverflow.com/questions/77500684/vs-code-keeps-adding-incorrect-java-import-how-to-prevent-specific-imports-fro#comment136752230_77500684","body":"After setting <code>java.completion.filteredTypes</code> to exclude the added types, the problem has not appeared for at least a week, so that seems to have solved my problem."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701543916,"post_id":77573792,"comment_id":136789908,"body_markdown":"Ah, right, I see now that organizing imports is mentioned in its description, even though its name doesn&#39;t really suggest that. Thanks!","link":"https://stackoverflow.com/questions/77500684/vs-code-keeps-adding-incorrect-java-import-how-to-prevent-specific-imports-fro/77573792#comment136789908_77573792","body":"Ah, right, I see now that organizing imports is mentioned in its description, even though its name doesn&#39;t really suggest that. Thanks!"}],"comment_count":1,"score":0,"last_activity_date":1701283612,"creation_date":1701283612,"answer_id":77573792,"question_id":77500684,"body_markdown":"(posting my comment as an answer since the asker seems satisfied with it)\r\n\r\nIf you don&#39;t use those imports anywhere in your project, you could try using the `java.completion.filteredTypes` setting. Its description reads as follows:\r\n\r\n&gt; Defines the type filters. All types whose fully qualified name matches the selected filter strings will be ignored in content assist or quick fix proposals and when organizing imports. For example &#39;java.awt.*&#39; will hide all types from the awt packages.\r\n\r\nIt takes an array. Its default value is this:\r\n\r\n```json\r\n[\r\n  &quot;java.awt.*&quot;,\r\n  &quot;com.sun.*&quot;,\r\n  &quot;sun.*&quot;,\r\n  &quot;jdk.*&quot;,\r\n  &quot;org.graalvm.*&quot;,\r\n  &quot;io.micrometer.shaded.*&quot;\r\n]\r\n```","link":"https://stackoverflow.com/questions/77500684/vs-code-keeps-adding-incorrect-java-import-how-to-prevent-specific-imports-fro/77573792#77573792","title":"VS Code keeps adding incorrect Java import / How to prevent specific imports from being added?","body":"<p>(posting my comment as an answer since the asker seems satisfied with it)</p>\n<p>If you don't use those imports anywhere in your project, you could try using the <code>java.completion.filteredTypes</code> setting. Its description reads as follows:</p>\n<blockquote>\n<p>Defines the type filters. All types whose fully qualified name matches the selected filter strings will be ignored in content assist or quick fix proposals and when organizing imports. For example 'java.awt.*' will hide all types from the awt packages.</p>\n</blockquote>\n<p>It takes an array. Its default value is this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  &quot;java.awt.*&quot;,\n  &quot;com.sun.*&quot;,\n  &quot;sun.*&quot;,\n  &quot;jdk.*&quot;,\n  &quot;org.graalvm.*&quot;,\n  &quot;io.micrometer.shaded.*&quot;\n]\n</code></pre>\n"}],"comment_count":5,"is_answered":true,"view_count":61,"answer_count":1,"score":0,"last_activity_date":1701283661,"creation_date":1700214502,"last_edit_date":1701283661,"question_id":77500684,"body_markdown":"VS Code&#39;s Red Hat Java extension keeps adding these two lines near the top of my source code every time I try to compile. These imports cause my compile to fail because they conflict with my code and other imports. How do I suppress this troublesome behaviour?\r\n\r\n```\r\nimport javax.naming.Context;\r\nimport javax.swing.Action;\r\n```\r\n\r\nI already disabled &quot;organize imports on save&quot;. This makes no difference.","link":"https://stackoverflow.com/questions/77500684/vs-code-keeps-adding-incorrect-java-import-how-to-prevent-specific-imports-fro","title":"VS Code keeps adding incorrect Java import / How to prevent specific imports from being added?","body":"<p>VS Code's Red Hat Java extension keeps adding these two lines near the top of my source code every time I try to compile. These imports cause my compile to fail because they conflict with my code and other imports. How do I suppress this troublesome behaviour?</p>\n<pre><code>import javax.naming.Context;\nimport javax.swing.Action;\n</code></pre>\n<p>I already disabled &quot;organize imports on save&quot;. This makes no difference.</p>\n"},{"tags":["java","hibernate","jpa","annotations","annotation-processing"],"comments":[{"score":0,"post_type":"question","creation_date":1701283610,"post_id":77573746,"comment_id":136757772,"body_markdown":"Does annotation processors also uses for this purpose?","link":"https://stackoverflow.com/questions/77573746/how-does-hibernate-check-wheather-of-basic-type-attribute-for-entity-is-used-or#comment136757772_77573746","body":"Does annotation processors also uses for this purpose?"}],"comment_count":1,"is_answered":false,"view_count":20,"answer_count":0,"score":0,"last_activity_date":1701283226,"creation_date":1701283226,"question_id":77573746,"body_markdown":"I would like to repeat a behavior of annotations like @Entity in Hibernate, @Override, e.t.c, to display warnings in coding time:\r\n\r\nI making the ORM library for working with Clickhouse DB, and i created my own annotation @Table, identifying classes related tables in database\r\n\r\nClickhouse only supports basic types like Integers, Boolean, Dates e.t.c, so i would like to check at coding time, does the user of my library use valid data types, or not, like it implemented in Hibernate\r\n\r\nHow difficult is this task and where should I start?\r\n\r\n[![enter image description here](https://i.stack.imgur.com/7SHVn.png)](https://i.stack.imgur.com/7SHVn.png)\r\n","link":"https://stackoverflow.com/questions/77573746/how-does-hibernate-check-wheather-of-basic-type-attribute-for-entity-is-used-or","title":"How does Hibernate check wheather of basic type attribute for @Entity is used or not?","body":"<p>I would like to repeat a behavior of annotations like @Entity in Hibernate, @Override, e.t.c, to display warnings in coding time:</p>\n<p>I making the ORM library for working with Clickhouse DB, and i created my own annotation @Table, identifying classes related tables in database</p>\n<p>Clickhouse only supports basic types like Integers, Boolean, Dates e.t.c, so i would like to check at coding time, does the user of my library use valid data types, or not, like it implemented in Hibernate</p>\n<p>How difficult is this task and where should I start?</p>\n<p><a href=\"https://i.stack.imgur.com/7SHVn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7SHVn.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","jasper-reports","xlsx"],"comments":[{"score":0,"post_type":"question","creation_date":1701320116,"post_id":77573697,"comment_id":136761892,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","link":"https://stackoverflow.com/questions/77573697/generate-a-group-by-report-and-sum-function-using-jasper-report#comment136761892_77573697","body":"Please provide enough code so others can better understand or reproduce the problem."},{"score":0,"post_type":"question","creation_date":1702655387,"post_id":77573697,"comment_id":136925300,"body_markdown":"The problem with your question is that you basically ask people to do the report for you. You need to show some effort. What have you tried?","link":"https://stackoverflow.com/questions/77573697/generate-a-group-by-report-and-sum-function-using-jasper-report#comment136925300_77573697","body":"The problem with your question is that you basically ask people to do the report for you. You need to show some effort. What have you tried?"}],"comment_count":2,"is_answered":false,"view_count":17,"answer_count":0,"score":-2,"last_activity_date":1701282728,"creation_date":1701282728,"question_id":77573697,"body_markdown":"I need to generate a report in Jasper like the one below:\r\n\r\n[REPORT](https://i.stack.imgur.com/EBfJ6.png)\r\n\r\nthis is my table in xlsx:[TABLE .XLSX](https://i.stack.imgur.com/FeOKe.png)\r\n\r\nI need to group by the [team description] column and list the materials below\r\nthat were used according to the report\r\n\r\n\r\ngrateful\r\n\r\nI&#39;m not able to generate the report in Jasper like the one in the image [REPORT]","link":"https://stackoverflow.com/questions/77573697/generate-a-group-by-report-and-sum-function-using-jasper-report","title":"Generate a group by report and sum function using jasper report","body":"<p>I need to generate a report in Jasper like the one below:</p>\n<p><a href=\"https://i.stack.imgur.com/EBfJ6.png\" rel=\"nofollow noreferrer\">REPORT</a></p>\n<p>this is my table in xlsx:<a href=\"https://i.stack.imgur.com/FeOKe.png\" rel=\"nofollow noreferrer\">TABLE .XLSX</a></p>\n<p>I need to group by the [team description] column and list the materials below\nthat were used according to the report</p>\n<p>grateful</p>\n<p>I'm not able to generate the report in Jasper like the one in the image [REPORT]</p>\n"},{"tags":["java","swing","jtable"],"comment_count":0,"is_answered":false,"view_count":9,"answer_count":0,"score":0,"last_activity_date":1701282450,"creation_date":1701282450,"question_id":77573671,"body_markdown":"i was working on a Java Project, but i found a problem when i was going to use the JTable in the Design section in Eclipse by using the Windows Pro Builder plug-in. \r\n\r\nI tried selecting the JTable in the &quot;Components&quot; section of WindowsProBuilder but after clicking on it, it doesn&#39;t get selected, just like an empty button, unlike all the other components. I also tried inserting the JTable via line of code.","link":"https://stackoverflow.com/questions/77573671/jtable-not-selectable-in-windows-pro-builder","title":"JTable not selectable in Windows Pro Builder","body":"<p>i was working on a Java Project, but i found a problem when i was going to use the JTable in the Design section in Eclipse by using the Windows Pro Builder plug-in.</p>\n<p>I tried selecting the JTable in the &quot;Components&quot; section of WindowsProBuilder but after clicking on it, it doesn't get selected, just like an empty button, unlike all the other components. I also tried inserting the JTable via line of code.</p>\n"},{"tags":["java","for-loop","if-statement","while-loop","logic"],"comments":[{"score":0,"post_type":"question","creation_date":1701281655,"post_id":77573495,"comment_id":136757482,"body_markdown":"You can always use arrays.","link":"https://stackoverflow.com/questions/77573495/how-can-i-decrease-the-number-of-variables#comment136757482_77573495","body":"You can always use arrays."},{"score":0,"post_type":"question","creation_date":1701286903,"post_id":77573495,"comment_id":136758308,"body_markdown":"Use an array for both the _n_ and _c_ values.","link":"https://stackoverflow.com/questions/77573495/how-can-i-decrease-the-number-of-variables#comment136758308_77573495","body":"Use an array for both the <i>n</i> and <i>c</i> values."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701282223,"creation_date":1701282223,"answer_id":77573647,"question_id":77573495,"body_markdown":"You can try this:\r\n\r\n    import java.util.Arrays;\r\n    import java.util.Scanner;\r\n\r\n    public class Mavenproject8 {\r\n       public static void main(String[] args) {\r\n        int num = 100 + (int) (Math.random() * 900);\r\n        Scanner scanner = new Scanner(System.in);\r\n\r\n        System.out.println(&quot;Enter 3 numbers from 1 to 9:&quot;);\r\n        int max = 9;\r\n\r\n        while (max-- &gt; 0) {\r\n            System.out.printf(&quot;You can try for %d times%nEnter 3 digits:%n&quot;, max + 1);\r\n\r\n            int[] userDigits = new int[3];\r\n            for (int i = 0; i &lt; 3; i++) {\r\n                userDigits[i] = scanner.nextInt();\r\n            }\r\n\r\n            int[] numDigits = new int[3];\r\n            for (int i = 0; i &lt; 3; i++) {\r\n                numDigits[i] = num % 10;\r\n                num /= 10;\r\n            }\r\n\r\n            if (Arrays.equals(userDigits, numDigits)) {\r\n                System.out.println(&quot;Congratulations, You Won !!!&quot;);\r\n                return;\r\n            }\r\n        }\r\n\r\n        System.out.println(&quot;You can try for 0 times&quot;);\r\n    }}\r\n\r\nChanges are:\r\n1. Replaced individual variables n1, n2, n3, c1, c2, c3 with arrays userDigits and numDigits.\r\n2. Used loops to read user input and extract digits from num.\r\n3. Utilized Arrays.equals() to compare arrays for equality.\r\n\r\nHope that helps...","link":"https://stackoverflow.com/questions/77573495/how-can-i-decrease-the-number-of-variables/77573647#77573647","title":"how can I decrease the number of variables?","body":"<p>You can try this:</p>\n<pre><code>import java.util.Arrays;\nimport java.util.Scanner;\n\npublic class Mavenproject8 {\n   public static void main(String[] args) {\n    int num = 100 + (int) (Math.random() * 900);\n    Scanner scanner = new Scanner(System.in);\n\n    System.out.println(&quot;Enter 3 numbers from 1 to 9:&quot;);\n    int max = 9;\n\n    while (max-- &gt; 0) {\n        System.out.printf(&quot;You can try for %d times%nEnter 3 digits:%n&quot;, max + 1);\n\n        int[] userDigits = new int[3];\n        for (int i = 0; i &lt; 3; i++) {\n            userDigits[i] = scanner.nextInt();\n        }\n\n        int[] numDigits = new int[3];\n        for (int i = 0; i &lt; 3; i++) {\n            numDigits[i] = num % 10;\n            num /= 10;\n        }\n\n        if (Arrays.equals(userDigits, numDigits)) {\n            System.out.println(&quot;Congratulations, You Won !!!&quot;);\n            return;\n        }\n    }\n\n    System.out.println(&quot;You can try for 0 times&quot;);\n}}\n</code></pre>\n<p>Changes are:</p>\n<ol>\n<li>Replaced individual variables n1, n2, n3, c1, c2, c3 with arrays userDigits and numDigits.</li>\n<li>Used loops to read user input and extract digits from num.</li>\n<li>Utilized Arrays.equals() to compare arrays for equality.</li>\n</ol>\n<p>Hope that helps...</p>\n"}],"comment_count":2,"is_answered":true,"view_count":47,"answer_count":1,"score":0,"last_activity_date":1701282223,"creation_date":1701280606,"question_id":77573495,"body_markdown":"\r\n```\r\npublic class Mavenproject8\r\n {\r\n\r\n public static void main(String[] args) {\r\n     int num=100+(int)(Math.random()*900);\r\n   Scanner blue=new Scanner(System.in);\r\n   System.out.println(&quot;enter 3 numbers from 1 to 9:&quot;);\r\n   int n1=blue.nextInt();\r\n   int n2=blue.nextInt();\r\n   int n3=blue.nextInt();\r\n   int c3=num%10;\r\n   num/=10;\r\n   int c2=num%10;\r\n   int c1=num/10;\r\n   int max=9;\r\n   while(max!=0){\r\n       if(n1==c1&amp;&amp;n2==c2&amp;&amp;n3==c3){max=0;System.out.println(&quot;Congratulations, You Won !!!&quot;);}\r\n       else{System.out.println(&quot;you can try for &quot;+max+&quot; times\\nenter 3 digits&quot;);\r\n       n1=blue.nextInt();\r\n       n2=blue.nextInt();      \r\n       n3=blue.nextInt();max--;}\r\n   }\r\n if(max==0){System.out.println(&quot;You can try for 0 times&quot;);}\r\n } \r\n}\r\n\r\n```\r\n//i think the code could be smaller and could done with better logic\r\n//how can i decrease the number of integers or maybe shrink the code with a better logic","link":"https://stackoverflow.com/questions/77573495/how-can-i-decrease-the-number-of-variables","title":"how can I decrease the number of variables?","body":"<pre><code>public class Mavenproject8\n {\n\n public static void main(String[] args) {\n     int num=100+(int)(Math.random()*900);\n   Scanner blue=new Scanner(System.in);\n   System.out.println(&quot;enter 3 numbers from 1 to 9:&quot;);\n   int n1=blue.nextInt();\n   int n2=blue.nextInt();\n   int n3=blue.nextInt();\n   int c3=num%10;\n   num/=10;\n   int c2=num%10;\n   int c1=num/10;\n   int max=9;\n   while(max!=0){\n       if(n1==c1&amp;&amp;n2==c2&amp;&amp;n3==c3){max=0;System.out.println(&quot;Congratulations, You Won !!!&quot;);}\n       else{System.out.println(&quot;you can try for &quot;+max+&quot; times\\nenter 3 digits&quot;);\n       n1=blue.nextInt();\n       n2=blue.nextInt();      \n       n3=blue.nextInt();max--;}\n   }\n if(max==0){System.out.println(&quot;You can try for 0 times&quot;);}\n } \n}\n\n</code></pre>\n<p>//i think the code could be smaller and could done with better logic\n//how can i decrease the number of integers or maybe shrink the code with a better logic</p>\n"},{"tags":["java"],"comments":[{"score":3,"post_type":"question","creation_date":1701269564,"post_id":77572190,"comment_id":136755007,"body_markdown":"Presumably you want to calculate the entire date/time, not *just* the hour.  Because I can&#39;t think of any value that&#39;s greater than 20 and less than 1.  Or alternatively maybe you meant to use `||` (or) instead of `&amp;&amp;` (and), if the set of hours is always &quot;overnight&quot;?","link":"https://stackoverflow.com/questions/77572190/determine-current-hour-is-between-hours#comment136755007_77572190","body":"Presumably you want to calculate the entire date/time, not <i>just</i> the hour.  Because I can&#39;t think of any value that&#39;s greater than 20 and less than 1.  Or alternatively maybe you meant to use <code>||</code> (or) instead of <code>&amp;&amp;</code> (and), if the set of hours is always &quot;overnight&quot;?"},{"score":1,"post_type":"question","creation_date":1701269975,"post_id":77572190,"comment_id":136755101,"body_markdown":"LocalDateTime has an isAfter and isBefore Method, maybe this helps you (if you want to compare a whole Date, not only the hour).","link":"https://stackoverflow.com/questions/77572190/determine-current-hour-is-between-hours#comment136755101_77572190","body":"LocalDateTime has an isAfter and isBefore Method, maybe this helps you (if you want to compare a whole Date, not only the hour)."},{"score":0,"post_type":"question","creation_date":1701270080,"post_id":77572190,"comment_id":136755126,"body_markdown":"This issue is if the endHour goes into the next day like my example.","link":"https://stackoverflow.com/questions/77572190/determine-current-hour-is-between-hours#comment136755126_77572190","body":"This issue is if the endHour goes into the next day like my example."},{"score":0,"post_type":"question","creation_date":1701270346,"post_id":77572190,"comment_id":136755182,"body_markdown":"Do you only do time ranges that are strictly &lt;= 24 h long?","link":"https://stackoverflow.com/questions/77572190/determine-current-hour-is-between-hours#comment136755182_77572190","body":"Do you only do time ranges that are strictly &lt;= 24 h long?"},{"score":0,"post_type":"question","creation_date":1701270852,"post_id":77572190,"comment_id":136755317,"body_markdown":"yes, just into the next day. Your response worked. Thanks.","link":"https://stackoverflow.com/questions/77572190/determine-current-hour-is-between-hours#comment136755317_77572190","body":"yes, just into the next day. Your response worked. Thanks."},{"score":0,"post_type":"question","creation_date":1701271042,"post_id":77572190,"comment_id":136755371,"body_markdown":"[`LocalDateTime#getHour()`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#getHour--) already returns the hour value in 24h format. If it returns 9, that means 9 in the morning – and 9 in the morning is not between 8 in the evening and 1 in the morning.","link":"https://stackoverflow.com/questions/77572190/determine-current-hour-is-between-hours#comment136755371_77572190","body":"<a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#getHour--\" rel=\"nofollow noreferrer\"><code>LocalDateTime#getHour()</code></a> already returns the hour value in 24h format. If it returns 9, that means 9 in the morning – and 9 in the morning is not between 8 in the evening and 1 in the morning."},{"score":1,"post_type":"question","creation_date":1701282058,"post_id":77572190,"comment_id":136757553,"body_markdown":"By the way, calling `LocalDateTime.now` is a bad habit. The result is inherently ambiguous as it lacks the context of an offset or time zone. Instead, call `ZonedDateTime.now( z )` while passing a time zone (`ZoneId`). To use the JVM’s current time zone, pass result of `ZoneId.systemDefault()`. So: `ZonedDateTime.now( ZoneId.systemDefault() )`","link":"https://stackoverflow.com/questions/77572190/determine-current-hour-is-between-hours#comment136757553_77572190","body":"By the way, calling <code>LocalDateTime.now</code> is a bad habit. The result is inherently ambiguous as it lacks the context of an offset or time zone. Instead, call <code>ZonedDateTime.now( z )</code> while passing a time zone (<code>ZoneId</code>). To use the JVM’s current time zone, pass result of <code>ZoneId.systemDefault()</code>. So: <code>ZonedDateTime.now( ZoneId.systemDefault() )</code>"},{"score":0,"post_type":"question","creation_date":1701282109,"post_id":77572190,"comment_id":136757561,"body_markdown":"My example isn&#39;t returning 9. I put &quot;9pm&quot; which means `currentHour` should be set to 21.","link":"https://stackoverflow.com/questions/77572190/determine-current-hour-is-between-hours#comment136757561_77572190","body":"My example isn&#39;t returning 9. I put &quot;9pm&quot; which means <code>currentHour</code> should be set to 21."},{"score":0,"post_type":"question","creation_date":1701282119,"post_id":77572190,"comment_id":136757563,"body_markdown":"If you want only time of day, call `LocalTime.now( ZoneId.systemDefault() )`. Or pass a specific time zone if you have one in mind.","link":"https://stackoverflow.com/questions/77572190/determine-current-hour-is-between-hours#comment136757563_77572190","body":"If you want only time of day, call <code>LocalTime.now( ZoneId.systemDefault() )</code>. Or pass a specific time zone if you have one in mind."},{"score":0,"post_type":"question","creation_date":1701282475,"post_id":77572190,"comment_id":136757611,"body_markdown":"In the source code for `LocalDateTime.now` it looks like it takes the timezone into account.","link":"https://stackoverflow.com/questions/77572190/determine-current-hour-is-between-hours#comment136757611_77572190","body":"In the source code for <code>LocalDateTime.now</code> it looks like it takes the timezone into account."}],"answers":[{"comment_count":0,"score":5,"last_activity_date":1701270978,"last_edit_date":1701270978,"creation_date":1701269802,"answer_id":77572255,"question_id":77572190,"body_markdown":"You need to account for ranges that cover midnight, e.g.\r\n\r\n```\r\nif (endHour &lt; startHour) {\r\n  endHour += 24;\r\n}\r\nif (currentHour &lt; startHour) {\r\n  currentHour += 24;\r\n}\r\n\r\n// now check if currentHour between start and end\r\n```\r\n\r\nDo note however that [`LocalDateTime#getHour()`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#getHour--) returns a value between 0 and 23 already. So 9 means 9AM and 21 means 9PM.","link":"https://stackoverflow.com/questions/77572190/determine-current-hour-is-between-hours/77572255#77572255","title":"Determine current hour is between hours","body":"<p>You need to account for ranges that cover midnight, e.g.</p>\n<pre><code>if (endHour &lt; startHour) {\n  endHour += 24;\n}\nif (currentHour &lt; startHour) {\n  currentHour += 24;\n}\n\n// now check if currentHour between start and end\n</code></pre>\n<p>Do note however that <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#getHour--\" rel=\"nofollow noreferrer\"><code>LocalDateTime#getHour()</code></a> returns a value between 0 and 23 already. So 9 means 9AM and 21 means 9PM.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701271185,"last_edit_date":1701271185,"creation_date":1701270368,"answer_id":77572323,"question_id":77572190,"body_markdown":"The value `9` does not mean the same thing as `9pm` or `21`; it means `9am` or simply `9`.\r\n\r\nYou need to use `21`.\r\n\r\n```java\r\nimport java.time.LocalDateTime;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class TimeRangeChecker {\r\n    private static final int HOURS_PER_DAY = (int) TimeUnit.DAYS.toHours(1); // 24\r\n\r\n    public static boolean isInBetween(LocalDateTime localDateTime, int startHour, int endHour) {\r\n        int computedEndHour = endHour &lt; startHour ? endHour + HOURS_PER_DAY: endHour;\r\n        int currHour = localDateTime.getHour();\r\n        return currHour &gt;= startHour &amp;&amp; currHour &lt; computedEndHour;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        LocalDateTime now = LocalDateTime.now().withHour(21); // 9pm\r\n        System.out.println(isInBetween(now, 20, 1)); // false\r\n    }\r\n}\r\n```","link":"https://stackoverflow.com/questions/77572190/determine-current-hour-is-between-hours/77572323#77572323","title":"Determine current hour is between hours","body":"<p>The value <code>9</code> does not mean the same thing as <code>9pm</code> or <code>21</code>; it means <code>9am</code> or simply <code>9</code>.</p>\n<p>You need to use <code>21</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.LocalDateTime;\nimport java.util.concurrent.TimeUnit;\n\npublic class TimeRangeChecker {\n    private static final int HOURS_PER_DAY = (int) TimeUnit.DAYS.toHours(1); // 24\n\n    public static boolean isInBetween(LocalDateTime localDateTime, int startHour, int endHour) {\n        int computedEndHour = endHour &lt; startHour ? endHour + HOURS_PER_DAY: endHour;\n        int currHour = localDateTime.getHour();\n        return currHour &gt;= startHour &amp;&amp; currHour &lt; computedEndHour;\n    }\n\n    public static void main(String[] args) {\n        LocalDateTime now = LocalDateTime.now().withHour(21); // 9pm\n        System.out.println(isInBetween(now, 20, 1)); // false\n    }\n}\n</code></pre>\n"}],"comment_count":10,"is_answered":true,"view_count":85,"answer_count":2,"score":-6,"last_activity_date":1701282217,"creation_date":1701269420,"last_edit_date":1701282217,"question_id":77572190,"body_markdown":"I feel this is really easy but my brain isn&#39;t working for some reason. I have a feature where the user can select a time period (in hours) for it to run. I need to check if the current hour is between those hours:\r\n\r\n\tint currentHour = LocalDateTime.now().getHour(); // 21 (9pm)\r\n\r\n\tint startHour = 20; // (8pm)\r\n\tint endHour = 1; // (1am)\r\n\r\n\tif (currentHour &gt;= startHour &amp;&amp; currentHour &lt; endHour)\r\n\t{\r\n\t\t...\r\n\t}","link":"https://stackoverflow.com/questions/77572190/determine-current-hour-is-between-hours","title":"Determine current hour is between hours","body":"<p>I feel this is really easy but my brain isn't working for some reason. I have a feature where the user can select a time period (in hours) for it to run. I need to check if the current hour is between those hours:</p>\n<pre><code>int currentHour = LocalDateTime.now().getHour(); // 21 (9pm)\n\nint startHour = 20; // (8pm)\nint endHour = 1; // (1am)\n\nif (currentHour &gt;= startHour &amp;&amp; currentHour &lt; endHour)\n{\n    ...\n}\n</code></pre>\n"},{"tags":["java","spring-boot","httpurlconnection"],"comment_count":0,"is_answered":false,"view_count":17,"answer_count":0,"score":0,"last_activity_date":1701282012,"creation_date":1701282012,"question_id":77573633,"body_markdown":"I need to read a Excel Sheet but when I am using URLConnection it is landing me on the login page.\r\n\r\n\r\n\r\n\r\n```\r\nURLConnection uc = url.openConnection();\r\nHttpURLConnection httpConnection = (HttpURLConnection) uc;\r\nString basicAuth =      Base64.getEncoder().encodeToString((username+&quot;:&quot;+password).getBytes(StandardCharsets.UTF_8));\r\nhttpConnection.setRequestProperty(&quot;Authorization&quot;,&quot;Basic &quot; + basicAuth);\r\nhttpConnection.setRequestProperty(&quot;User-Agent&quot;,&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36&quot;);\r\nhttpConnection.connect();\r\nBufferedReader r = new BufferedReader(new InputStreamReader(httpConnection.getInputStream(),    Charset.forName(&quot;UTF-8&quot;)));\r\nStringBuilder sb = new StringBuilder();\r\nString line;\r\nwhile((line = r.readLine())!= null){\r\n\tsb.append(line);\r\n\tsb.append(&quot;\\n&quot;);\r\n}\r\nSystem.out.println(sb.toString());\r\n```\r\n\r\nI tried setting Authorisation headers but still cannot achieve it. Can someone help me.\r\n","link":"https://stackoverflow.com/questions/77573633/how-to-read-excel-file-with-restricted-permissions-from-url-in-java","title":"How to read EXCEL FILE with RESTRICTED permissions from URL in java?","body":"<p>I need to read a Excel Sheet but when I am using URLConnection it is landing me on the login page.</p>\n<pre><code>URLConnection uc = url.openConnection();\nHttpURLConnection httpConnection = (HttpURLConnection) uc;\nString basicAuth =      Base64.getEncoder().encodeToString((username+&quot;:&quot;+password).getBytes(StandardCharsets.UTF_8));\nhttpConnection.setRequestProperty(&quot;Authorization&quot;,&quot;Basic &quot; + basicAuth);\nhttpConnection.setRequestProperty(&quot;User-Agent&quot;,&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36&quot;);\nhttpConnection.connect();\nBufferedReader r = new BufferedReader(new InputStreamReader(httpConnection.getInputStream(),    Charset.forName(&quot;UTF-8&quot;)));\nStringBuilder sb = new StringBuilder();\nString line;\nwhile((line = r.readLine())!= null){\n    sb.append(line);\n    sb.append(&quot;\\n&quot;);\n}\nSystem.out.println(sb.toString());\n</code></pre>\n<p>I tried setting Authorisation headers but still cannot achieve it. Can someone help me.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-data-jpa"],"comments":[{"score":0,"post_type":"question","creation_date":1701275944,"post_id":77572484,"comment_id":136756460,"body_markdown":"It looks like the list of items is lazy loaded. Try adding fetch = FetchType.EAGER to the annotation.","link":"https://stackoverflow.com/questions/77572484/why-json-deserialization-cause-problems-with-basejparepository#comment136756460_77572484","body":"It looks like the list of items is lazy loaded. Try adding fetch = FetchType.EAGER to the annotation."},{"score":0,"post_type":"question","creation_date":1701277876,"post_id":77572484,"comment_id":136756840,"body_markdown":"@Mar-Z There was additional error. Can you please check again? Thanks in advance.","link":"https://stackoverflow.com/questions/77572484/why-json-deserialization-cause-problems-with-basejparepository#comment136756840_77572484","body":"@Mar-Z There was additional error. Can you please check again? Thanks in advance."},{"score":0,"post_type":"question","creation_date":1701279956,"post_id":77572484,"comment_id":136757199,"body_markdown":"It is a bi-directional relationship. You must set the reference in the OrderItem entity programmatically. For example by adding a loop in the service method createOrder(). But be aware of possible infinite loop. Search SO for a complete solution.","link":"https://stackoverflow.com/questions/77572484/why-json-deserialization-cause-problems-with-basejparepository#comment136757199_77572484","body":"It is a bi-directional relationship. You must set the reference in the OrderItem entity programmatically. For example by adding a loop in the service method createOrder(). But be aware of possible infinite loop. Search SO for a complete solution."},{"score":0,"post_type":"question","creation_date":1701280756,"post_id":77572484,"comment_id":136757357,"body_markdown":"@Mar-Z Thanks a lot for the suggestion but alas, I am still unable to make program work as I wish it to work and I would really appreciate the programmatical way as an answer. So I can learn from it and also give you SO reputation in return for your efforts so far.","link":"https://stackoverflow.com/questions/77572484/why-json-deserialization-cause-problems-with-basejparepository#comment136757357_77572484","body":"@Mar-Z Thanks a lot for the suggestion but alas, I am still unable to make program work as I wish it to work and I would really appreciate the programmatical way as an answer. So I can learn from it and also give you SO reputation in return for your efforts so far."},{"score":0,"post_type":"question","creation_date":1701281722,"post_id":77572484,"comment_id":136757497,"body_markdown":"@Mar-Z Nevermind, I solved it but you can still answer the question if you want what I mentioned before. In any case, thank you.","link":"https://stackoverflow.com/questions/77572484/why-json-deserialization-cause-problems-with-basejparepository#comment136757497_77572484","body":"@Mar-Z Nevermind, I solved it but you can still answer the question if you want what I mentioned before. In any case, thank you."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701281752,"creation_date":1701281752,"answer_id":77573605,"question_id":77572484,"body_markdown":"It is a bi-directional relationship. You must set the reference in the `OrderItem` entity programmatically. For example by adding a loop in the service method createOrder():\r\n```\r\npublic Order createOrder(Order newOrder) {\r\n    for (OrderItem item : newOrder.getItems()) {\r\n        item.setOrder(newOrder);\r\n    }\r\n    return orderRepository.save(newOrder);\r\n}\r\n```\r\nBe aware of possible infinite loop. Use `@JsonManagedReference` and `@JsonBackReference` annotations in the entities to avoid it.\r\n```\r\n@OneToMany(mappedBy = &quot;order&quot;, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n@JsonManagedReference\r\nprivate List&lt;OrderItem&gt; items;\r\n// ...\r\n@ManyToOne\r\n@JsonBackReference\r\n@JoinColumn(name = &quot;parent_order_id&quot;)\r\nprivate Order order;\r\n```","link":"https://stackoverflow.com/questions/77572484/why-json-deserialization-cause-problems-with-basejparepository/77573605#77573605","title":"Why Json Deserialization cause problems with BaseJpaRepository?","body":"<p>It is a bi-directional relationship. You must set the reference in the <code>OrderItem</code> entity programmatically. For example by adding a loop in the service method createOrder():</p>\n<pre><code>public Order createOrder(Order newOrder) {\n    for (OrderItem item : newOrder.getItems()) {\n        item.setOrder(newOrder);\n    }\n    return orderRepository.save(newOrder);\n}\n</code></pre>\n<p>Be aware of possible infinite loop. Use <code>@JsonManagedReference</code> and <code>@JsonBackReference</code> annotations in the entities to avoid it.</p>\n<pre><code>@OneToMany(mappedBy = &quot;order&quot;, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n@JsonManagedReference\nprivate List&lt;OrderItem&gt; items;\n// ...\n@ManyToOne\n@JsonBackReference\n@JoinColumn(name = &quot;parent_order_id&quot;)\nprivate Order order;\n</code></pre>\n"}],"comment_count":5,"is_answered":true,"view_count":52,"answer_count":1,"score":0,"last_activity_date":1701281752,"creation_date":1701271611,"last_edit_date":1701277840,"question_id":77572484,"body_markdown":"Edit: By @Mar-z suggestion I have updated the code but it now has another problem, which is still related to same functionality.\r\n\r\nMy items list is always empty with a a payload like this one:\r\n\r\n```\r\n{\r\n  &quot;orderId&quot;: 1,\r\n  &quot;items&quot;: [\r\n    {\r\n      &quot;itemId&quot;: 3,\r\n      &quot;itemName&quot;: &quot;Product A&quot;,\r\n      &quot;quantity&quot;: 2,\r\n      &quot;price&quot;: 10.99\r\n    },\r\n    {\r\n      &quot;itemId&quot;: 4,\r\n      &quot;itemName&quot;: &quot;Product B&quot;,\r\n      &quot;quantity&quot;: 1,\r\n      &quot;price&quot;: 19.99\r\n    }\r\n  ],\r\n  &quot;status&quot;: &quot;PROCESSING&quot;\r\n}\r\n```\r\n\r\n\r\nI have 2 entity classes defined as here:\r\n\r\n\r\n```\r\n@Entity\r\npublic class OrderItem {\r\n\r\n    @Id\r\n    private Long itemId;\r\n    private String itemName;\r\n    private  int quantity;\r\n    private double price;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;parent_order_id&quot;)\r\n    private Order order;\r\n\r\n    public OrderItem () {\r\n\r\n    }\r\n    public OrderItem(Long itemId, String itemName, int quantity, double price) {\r\n        this.itemId = itemId;\r\n        this.itemName = itemName;\r\n        this.quantity = quantity;\r\n        this.price = price;\r\n    }\r\n\r\n```\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;`order`&quot;)\r\npublic class Order {\r\n\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long orderId;\r\n\r\n    @OneToMany(mappedBy = &quot;order&quot;, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    private List&lt;OrderItem&gt; items;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private OrderStatus status;\r\n\r\n    public Order() {\r\n        this.items = new ArrayList&lt;&gt;();\r\n    }\r\n    public Order(Long orderId, List&lt;OrderItem&gt; items, OrderStatus status) {\r\n        this.orderId = orderId;\r\n        this.items = items;\r\n        this.status = status;\r\n    }\r\n\r\n```\r\n```\r\n\r\n    public Order createOrder(Order newOrder) {\r\n        return orderRepository.merge(newOrder);\r\n    }\r\n```\r\nEDITED:\r\nThe issue is my response is always like this:\r\n\r\n    {\r\n        &quot;orderId&quot;: 1,\r\n        &quot;items&quot;: [\r\n            {\r\n                &quot;itemId&quot;: 103,\r\n                &quot;itemName&quot;: &quot;Product A&quot;,\r\n                &quot;quantity&quot;: 2,\r\n                &quot;price&quot;: 10.99,\r\n                &quot;order&quot;: null\r\n            },\r\n            {\r\n                &quot;itemId&quot;: 104,\r\n                &quot;itemName&quot;: &quot;Product B&quot;,\r\n                &quot;quantity&quot;: 1,\r\n                &quot;price&quot;: 19.99,\r\n                &quot;order&quot;: null\r\n            }\r\n        ],\r\n        &quot;status&quot;: &quot;PROCESSING&quot;\r\n    }\r\n\r\nAs you can see my order is null and in database my parent_order_id is also null.\r\n\r\nI use the repository class defined here but after soem trial and error i came to conclision it si not the problem: https://vladmihalcea.com/basejparepository-hypersistence-utils/\r\n","link":"https://stackoverflow.com/questions/77572484/why-json-deserialization-cause-problems-with-basejparepository","title":"Why Json Deserialization cause problems with BaseJpaRepository?","body":"<p>Edit: By @Mar-z suggestion I have updated the code but it now has another problem, which is still related to same functionality.</p>\n<p>My items list is always empty with a a payload like this one:</p>\n<pre><code>{\n  &quot;orderId&quot;: 1,\n  &quot;items&quot;: [\n    {\n      &quot;itemId&quot;: 3,\n      &quot;itemName&quot;: &quot;Product A&quot;,\n      &quot;quantity&quot;: 2,\n      &quot;price&quot;: 10.99\n    },\n    {\n      &quot;itemId&quot;: 4,\n      &quot;itemName&quot;: &quot;Product B&quot;,\n      &quot;quantity&quot;: 1,\n      &quot;price&quot;: 19.99\n    }\n  ],\n  &quot;status&quot;: &quot;PROCESSING&quot;\n}\n</code></pre>\n<p>I have 2 entity classes defined as here:</p>\n<pre><code>@Entity\npublic class OrderItem {\n\n    @Id\n    private Long itemId;\n    private String itemName;\n    private  int quantity;\n    private double price;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;parent_order_id&quot;)\n    private Order order;\n\n    public OrderItem () {\n\n    }\n    public OrderItem(Long itemId, String itemName, int quantity, double price) {\n        this.itemId = itemId;\n        this.itemName = itemName;\n        this.quantity = quantity;\n        this.price = price;\n    }\n\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;`order`&quot;)\npublic class Order {\n\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long orderId;\n\n    @OneToMany(mappedBy = &quot;order&quot;, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    private List&lt;OrderItem&gt; items;\n\n    @Enumerated(EnumType.STRING)\n    private OrderStatus status;\n\n    public Order() {\n        this.items = new ArrayList&lt;&gt;();\n    }\n    public Order(Long orderId, List&lt;OrderItem&gt; items, OrderStatus status) {\n        this.orderId = orderId;\n        this.items = items;\n        this.status = status;\n    }\n\n</code></pre>\n<pre><code>\n    public Order createOrder(Order newOrder) {\n        return orderRepository.merge(newOrder);\n    }\n</code></pre>\n<p>EDITED:\nThe issue is my response is always like this:</p>\n<pre><code>{\n    &quot;orderId&quot;: 1,\n    &quot;items&quot;: [\n        {\n            &quot;itemId&quot;: 103,\n            &quot;itemName&quot;: &quot;Product A&quot;,\n            &quot;quantity&quot;: 2,\n            &quot;price&quot;: 10.99,\n            &quot;order&quot;: null\n        },\n        {\n            &quot;itemId&quot;: 104,\n            &quot;itemName&quot;: &quot;Product B&quot;,\n            &quot;quantity&quot;: 1,\n            &quot;price&quot;: 19.99,\n            &quot;order&quot;: null\n        }\n    ],\n    &quot;status&quot;: &quot;PROCESSING&quot;\n}\n</code></pre>\n<p>As you can see my order is null and in database my parent_order_id is also null.</p>\n<p>I use the repository class defined here but after soem trial and error i came to conclision it si not the problem: <a href=\"https://vladmihalcea.com/basejparepository-hypersistence-utils/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/basejparepository-hypersistence-utils/</a></p>\n"},{"tags":["java","pdf","itext","pdfptable"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701281967,"post_id":77571551,"comment_id":136757539,"body_markdown":"I am sorry for not adding the version, thank you for not dowvoting my question. I think with the version I am using, I could also do it with cell.setColspan()","link":"https://stackoverflow.com/questions/77571418/create-a-itextpdf-pdfptable-in-java-with-one-row-without-a-border/77571551#comment136757539_77571551","body":"I am sorry for not adding the version, thank you for not dowvoting my question. I think with the version I am using, I could also do it with cell.setColspan()"}],"comment_count":1,"score":0,"last_activity_date":1701264445,"creation_date":1701264445,"answer_id":77571551,"question_id":77571418,"body_markdown":"You don&#39;t specify which version you use, nor an example but with itext8 you can use row and col span overload in `Cell`.\r\n\r\n\r\nSomething like this should do the trick:\r\n\r\n        PdfDocument pdfDoc = new PdfDocument(new PdfWriter(dest));\r\n        Document doc = new Document(pdfDoc);\r\n\r\n        Table table = new Table(UnitValue.createPercentArray(2)).useAllAvailableWidth();\r\n        Cell row = new Cell(1, 2).add(new Paragraph(&quot; Row 1 full &quot;));\r\n        table.addCell(row);\r\n\r\n        Cell row2Col1 = new Cell().add(new Paragraph(&quot; row 2 col 1 &quot;));\r\n        table.addCell(row2Col1);\r\n        Cell row2Col2 = new Cell().add(new Paragraph(&quot;row 2 col 2&quot;));\r\n        table.addCell(row2Col2);`\r\n        pdfDoc.close();\r\n\r\nMore advanced examples can be found here [itext examples](https://kb.itextpdf.com/home/it7kb/examples/colspan-and-rowspan)","link":"https://stackoverflow.com/questions/77571418/create-a-itextpdf-pdfptable-in-java-with-one-row-without-a-border/77571551#77571551","title":"Create a iTextPdf PdfPtable in Java with one row without a border","body":"<p>You don't specify which version you use, nor an example but with itext8 you can use row and col span overload in <code>Cell</code>.</p>\n<p>Something like this should do the trick:</p>\n<pre><code>    PdfDocument pdfDoc = new PdfDocument(new PdfWriter(dest));\n    Document doc = new Document(pdfDoc);\n\n    Table table = new Table(UnitValue.createPercentArray(2)).useAllAvailableWidth();\n    Cell row = new Cell(1, 2).add(new Paragraph(&quot; Row 1 full &quot;));\n    table.addCell(row);\n\n    Cell row2Col1 = new Cell().add(new Paragraph(&quot; row 2 col 1 &quot;));\n    table.addCell(row2Col1);\n    Cell row2Col2 = new Cell().add(new Paragraph(&quot;row 2 col 2&quot;));\n    table.addCell(row2Col2);`\n    pdfDoc.close();\n</code></pre>\n<p>More advanced examples can be found here <a href=\"https://kb.itextpdf.com/home/it7kb/examples/colspan-and-rowspan\" rel=\"nofollow noreferrer\">itext examples</a></p>\n"}],"comment_count":0,"is_answered":true,"view_count":32,"answer_count":1,"score":0,"last_activity_date":1701281726,"creation_date":1701263237,"last_edit_date":1701281726,"question_id":77571418,"body_markdown":"I am trying to generate a table in my pdf document that should have two rows. The first row should not be split in columns but the second row should be split in two columns. Something that looks like below:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SaQ8z.png\r\n\r\nSo far I have been able to create a table inside a PdfPCell but that is not how I want my table to look. Is there a way I can do this?\r\n\r\nEdited: I am using itextpdf-5.5.13.3 with pdfbox-3.0.0 and commons-lang3-3.14.0. ","link":"https://stackoverflow.com/questions/77571418/create-a-itextpdf-pdfptable-in-java-with-one-row-without-a-border","title":"Create a iTextPdf PdfPtable in Java with one row without a border","body":"<p>I am trying to generate a table in my pdf document that should have two rows. The first row should not be split in columns but the second row should be split in two columns. Something that looks like below:</p>\n<p><a href=\"https://i.stack.imgur.com/SaQ8z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SaQ8z.png\" alt=\"enter image description here\" /></a></p>\n<p>So far I have been able to create a table inside a PdfPCell but that is not how I want my table to look. Is there a way I can do this?</p>\n<p>Edited: I am using itextpdf-5.5.13.3 with pdfbox-3.0.0 and commons-lang3-3.14.0.</p>\n"},{"tags":["java","spring"],"comments":[{"score":3,"post_type":"question","creation_date":1701211157,"post_id":77566356,"comment_id":136746917,"body_markdown":"You&#39;re trying to do everything manually that spring will do for you automatically.  Is there a reason for not just adding @Component to BeanA and BeanB and adding the appropriate dependencies to the constructor?","link":"https://stackoverflow.com/questions/77566356/spring-create-one-bean-before-all-others#comment136746917_77566356","body":"You&#39;re trying to do everything manually that spring will do for you automatically.  Is there a reason for not just adding @Component to BeanA and BeanB and adding the appropriate dependencies to the constructor?"},{"score":0,"post_type":"question","creation_date":1701258490,"post_id":77566356,"comment_id":136752746,"body_markdown":"Thanks lane.maxwell. I do want to use @Component for BeanA and BeanB, as mentioned in the original question. Just not sure whether they will get the EnvrionmentConfig with the original setup as I am doing it manually here. That is the main issue, how to pass this state and make other bean instantiate after EnvironmentConfig Bean has been updated.","link":"https://stackoverflow.com/questions/77566356/spring-create-one-bean-before-all-others#comment136752746_77566356","body":"Thanks lane.maxwell. I do want to use @Component for BeanA and BeanB, as mentioned in the original question. Just not sure whether they will get the EnvrionmentConfig with the original setup as I am doing it manually here. That is the main issue, how to pass this state and make other bean instantiate after EnvironmentConfig Bean has been updated."},{"score":0,"post_type":"question","creation_date":1701265213,"post_id":77566356,"comment_id":136754035,"body_markdown":"What is the &quot;original question&quot;? Can you create a `@Configuration` and return your classes from a `@Bean` method?","link":"https://stackoverflow.com/questions/77566356/spring-create-one-bean-before-all-others#comment136754035_77566356","body":"What is the &quot;original question&quot;? Can you create a <code>@Configuration</code> and return your classes from a <code>@Bean</code> method?"},{"score":1,"post_type":"question","creation_date":1701280647,"post_id":77566356,"comment_id":136757329,"body_markdown":"If one of the beans needs setup before other beans use it, the init method of the beans can be used to ensure order.  This can be accomplished by putting an init method on the `EnvironmentConfig` bean that makes it ready for use, and then init methods on it&#39;s consuming beans that then make use of it.  Spring makes sure the order of init method calls is based on bean dependencies.","link":"https://stackoverflow.com/questions/77566356/spring-create-one-bean-before-all-others#comment136757329_77566356","body":"If one of the beans needs setup before other beans use it, the init method of the beans can be used to ensure order.  This can be accomplished by putting an init method on the <code>EnvironmentConfig</code> bean that makes it ready for use, and then init methods on it&#39;s consuming beans that then make use of it.  Spring makes sure the order of init method calls is based on bean dependencies."},{"score":1,"post_type":"question","creation_date":1701280852,"post_id":77566356,"comment_id":136757374,"body_markdown":"BTW, looking at the name `EnvironmentConfig` it sounds like functionality that Spring already provides.  You can have environment-specific config files, and in your beans just ignore the environment part (e.g. `$Value(&quot;configA&quot;)`).  Spring switches between the different environment-specific configuration files itself.","link":"https://stackoverflow.com/questions/77566356/spring-create-one-bean-before-all-others#comment136757374_77566356","body":"BTW, looking at the name <code>EnvironmentConfig</code> it sounds like functionality that Spring already provides.  You can have environment-specific config files, and in your beans just ignore the environment part (e.g. <code>$Value(&quot;configA&quot;)</code>).  Spring switches between the different environment-specific configuration files itself."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701280368,"creation_date":1701280368,"answer_id":77573478,"question_id":77566356,"body_markdown":"Assuming that `Environment` is a Bean, you can configure it like this.\r\n\r\n    @Component\r\n    public class EnvironmentConfig {\r\n      private final Environment environment;\r\n\r\n      public EnvironmentConfig (Environment environment) {\r\n        this.environment = environment;\r\n      }\r\n\r\n      // declare this method to return whatever type storage is, assuming it&#39;s an object of type Storage\r\n      public Storage getStorage() {\r\n        return storage from wherever it comes from\r\n      }\r\n    }\r\n\r\nIf `Environment` is not a Bean, then there are several options for creating it.  You could just construct it in the constructor.\r\n\r\n    @Component\r\n    public class EnvironmentConfig {\r\n      private final Environment environment;\r\n\r\n      public EnvironmentConfig() {\r\n        this.environment = new Environment();\r\n      }\r\n    }\r\n\r\nOr, you could implement `InitializingBean` and create it there.\r\n\r\n    @Component\r\n    public class EnvironmentConfig implements InitializingBean {\r\n      private Environment environment;\r\n\r\n      @Override\r\n      public void afterPropertiesSet() throws Exception {\r\n        this.environment = new Environment();\r\n      }\r\n    }\r\n\r\nOr, you can a `@PostConstruct` method and build it there.\r\n\r\n    @Component\r\n    public class EnvironmentConfig {\r\n      private Environment environment;\r\n\r\n      @PostConstruct\r\n      public void initializeMyCollaboratorsThatAreNotBeans() {\r\n        this.environment = new Environment();\r\n      }\r\n    }\r\n\r\nThe point here is that there are many ways to create a bean of your `EnvironmentConfig`, then you can inject it into your other beans as you normally would.  This definition of A and B would satisfy what you&#39;ve laid out here, I believe.\r\n\r\n    @Component\r\n    public class BeanA {\r\n      private final Storage storage;\r\n\r\n      public BeanA (EnvironmentConfig environmentConfig) {\r\n        this.storage = environmentConfig.getStorage();\r\n      }\r\n    }\r\n\r\n    @Component\r\n    public class BeanB {\r\n      private final BeanA beanA;\r\n\r\n      public BeanB (BeanA beanA) {\r\n        this.beanA = beanA;\r\n      }\r\n    }\r\n","link":"https://stackoverflow.com/questions/77566356/spring-create-one-bean-before-all-others/77573478#77573478","title":"Spring create One bean before all others","body":"<p>Assuming that <code>Environment</code> is a Bean, you can configure it like this.</p>\n<pre><code>@Component\npublic class EnvironmentConfig {\n  private final Environment environment;\n\n  public EnvironmentConfig (Environment environment) {\n    this.environment = environment;\n  }\n\n  // declare this method to return whatever type storage is, assuming it's an object of type Storage\n  public Storage getStorage() {\n    return storage from wherever it comes from\n  }\n}\n</code></pre>\n<p>If <code>Environment</code> is not a Bean, then there are several options for creating it.  You could just construct it in the constructor.</p>\n<pre><code>@Component\npublic class EnvironmentConfig {\n  private final Environment environment;\n\n  public EnvironmentConfig() {\n    this.environment = new Environment();\n  }\n}\n</code></pre>\n<p>Or, you could implement <code>InitializingBean</code> and create it there.</p>\n<pre><code>@Component\npublic class EnvironmentConfig implements InitializingBean {\n  private Environment environment;\n\n  @Override\n  public void afterPropertiesSet() throws Exception {\n    this.environment = new Environment();\n  }\n}\n</code></pre>\n<p>Or, you can a <code>@PostConstruct</code> method and build it there.</p>\n<pre><code>@Component\npublic class EnvironmentConfig {\n  private Environment environment;\n\n  @PostConstruct\n  public void initializeMyCollaboratorsThatAreNotBeans() {\n    this.environment = new Environment();\n  }\n}\n</code></pre>\n<p>The point here is that there are many ways to create a bean of your <code>EnvironmentConfig</code>, then you can inject it into your other beans as you normally would.  This definition of A and B would satisfy what you've laid out here, I believe.</p>\n<pre><code>@Component\npublic class BeanA {\n  private final Storage storage;\n\n  public BeanA (EnvironmentConfig environmentConfig) {\n    this.storage = environmentConfig.getStorage();\n  }\n}\n\n@Component\npublic class BeanB {\n  private final BeanA beanA;\n\n  public BeanB (BeanA beanA) {\n    this.beanA = beanA;\n  }\n}\n</code></pre>\n"}],"comment_count":5,"is_answered":true,"view_count":66,"answer_count":1,"score":0,"last_activity_date":1701280368,"creation_date":1701196525,"last_edit_date":1701258324,"question_id":77566356,"body_markdown":"Returning to Spring after a long time and trying to add it to an existing application. \r\n\r\nApp start point (assume there is an `Environment` object here, which provides configuration elements from a file):\r\n```\r\npublic static void main(final String... args) {\r\n  try (AnnotationConfigApplicationContext context =\r\n      new AnnotationConfigApplicationContext(AppConfig.class)) {\r\n    EnvironmentConfig environmentConfig = context.getBean(EnvironmentConfig.class);\r\n    environmentConfig.setEnvironment(environment);\r\n\r\n    // TODO move to being a bean with EnvironmentConfig being a dependency\r\n    final BeanA beanA = new BeanA(environmentConfig.getStorage());\r\n\r\n    // TODO move to being a bean with BeanA being a dependency\r\n    final BeanB beanB = new BeanB(BeanA);\r\n  }\r\n}\r\n```\r\n\r\nI have a AppConfig setup for component scan like:\r\n```\r\npackage com.company.packageX;\r\n\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\n@ComponentScan(basePackages = &quot;com.company.packageX&quot;)\r\npublic class AppConfig {}\r\n```\r\n\r\nSo I need to create two beans (as above) but also want them to be auto-wired with dependencies.\r\n\r\nProblem is that I am setting up `environment` in `EnvironmentConfig` only in the `main method`. If I move the creation of Beans by annotating the two with `@Component`, not sure that they will get the EnvironmentConfig with environment being already set, as Beans are created when `ComponentScan` runs.","link":"https://stackoverflow.com/questions/77566356/spring-create-one-bean-before-all-others","title":"Spring create One bean before all others","body":"<p>Returning to Spring after a long time and trying to add it to an existing application.</p>\n<p>App start point (assume there is an <code>Environment</code> object here, which provides configuration elements from a file):</p>\n<pre><code>public static void main(final String... args) {\n  try (AnnotationConfigApplicationContext context =\n      new AnnotationConfigApplicationContext(AppConfig.class)) {\n    EnvironmentConfig environmentConfig = context.getBean(EnvironmentConfig.class);\n    environmentConfig.setEnvironment(environment);\n\n    // TODO move to being a bean with EnvironmentConfig being a dependency\n    final BeanA beanA = new BeanA(environmentConfig.getStorage());\n\n    // TODO move to being a bean with BeanA being a dependency\n    final BeanB beanB = new BeanB(BeanA);\n  }\n}\n</code></pre>\n<p>I have a AppConfig setup for component scan like:</p>\n<pre><code>package com.company.packageX;\n\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ComponentScan(basePackages = &quot;com.company.packageX&quot;)\npublic class AppConfig {}\n</code></pre>\n<p>So I need to create two beans (as above) but also want them to be auto-wired with dependencies.</p>\n<p>Problem is that I am setting up <code>environment</code> in <code>EnvironmentConfig</code> only in the <code>main method</code>. If I move the creation of Beans by annotating the two with <code>@Component</code>, not sure that they will get the EnvironmentConfig with environment being already set, as Beans are created when <code>ComponentScan</code> runs.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","spring-data","auditing"],"comment_count":0,"is_answered":false,"view_count":26,"answer_count":0,"score":0,"last_activity_date":1701279670,"creation_date":1701279670,"question_id":77573411,"body_markdown":"I want to use SpringData annotations from package *org.springframework.data.annotation*\r\n\r\n    @CreatiedOn\r\n    @CreatedBy\r\n    @ModifiedOn\r\n    @ModifiedBy\r\n\r\nMy configuration is as well:\r\n\r\n    @Embeddable\r\n    public class AuditFields {\r\n    \r\n        @Column({...})\r\n        @CreatedBy\r\n        private String createdBy;\r\n    \r\n        @Column({...})\r\n        @CreatedDate\r\n        private Instant createdOn;\r\n    \r\n        @Column({...})\r\n        @LastModifiedBy\r\n        private String updatedBy;\r\n    \r\n        @Column({...})\r\n        @LastModifiedDate\r\n        private Instant updatedOn;\r\n\r\n... And the `AuditFileds` is applied as composition:\r\n\r\n\r\n    @Entity    \r\n    public class A {\r\n    \r\n       {...}\r\n     \r\n       @ElementCollection\r\n       @CollectionTable({...})\r\n       private Collection&lt;B&gt; b;\r\n\r\n       @Embedded\r\n       private AuditFields auditFields = new AuditFields();\r\n    \r\n    }\r\n\r\nand\r\n\r\n    @Embeddable  \r\n    public class B {\r\n    \r\n       {...}\r\n    \r\n       @Embedded\r\n       private AuditFields auditFields = new AuditFields();\r\n    \r\n    }\r\n\r\n... and I also have configured `@EnableJpaAuditing` bean\r\n\r\nThe framework works perfect when persists `class A` and the `@Entity` object has been successfully audited, but nothing happens on `class B` which is `@Embeddable` collection (record B is not audited into the table).\r\n\r\nAny ideas why SpringData audit neglect `@Embeddable` collection? Is it problem in SpringData?\r\n\r\nAny ideas for another aproach how to audit `@Embeddable` collection?\r\n\r\nP.S. `spring-data-jpa is version 2.7.15`\r\n","link":"https://stackoverflow.com/questions/77573411/audit-on-embeddable-objects-with-springboot-annotations","title":"Audit on @Embeddable objects with SpringBoot annotations","body":"<p>I want to use SpringData annotations from package <em>org.springframework.data.annotation</em></p>\n<pre><code>@CreatiedOn\n@CreatedBy\n@ModifiedOn\n@ModifiedBy\n</code></pre>\n<p>My configuration is as well:</p>\n<pre><code>@Embeddable\npublic class AuditFields {\n\n    @Column({...})\n    @CreatedBy\n    private String createdBy;\n\n    @Column({...})\n    @CreatedDate\n    private Instant createdOn;\n\n    @Column({...})\n    @LastModifiedBy\n    private String updatedBy;\n\n    @Column({...})\n    @LastModifiedDate\n    private Instant updatedOn;\n</code></pre>\n<p>... And the <code>AuditFileds</code> is applied as composition:</p>\n<pre><code>@Entity    \npublic class A {\n\n   {...}\n \n   @ElementCollection\n   @CollectionTable({...})\n   private Collection&lt;B&gt; b;\n\n   @Embedded\n   private AuditFields auditFields = new AuditFields();\n\n}\n</code></pre>\n<p>and</p>\n<pre><code>@Embeddable  \npublic class B {\n\n   {...}\n\n   @Embedded\n   private AuditFields auditFields = new AuditFields();\n\n}\n</code></pre>\n<p>... and I also have configured <code>@EnableJpaAuditing</code> bean</p>\n<p>The framework works perfect when persists <code>class A</code> and the <code>@Entity</code> object has been successfully audited, but nothing happens on <code>class B</code> which is <code>@Embeddable</code> collection (record B is not audited into the table).</p>\n<p>Any ideas why SpringData audit neglect <code>@Embeddable</code> collection? Is it problem in SpringData?</p>\n<p>Any ideas for another aproach how to audit <code>@Embeddable</code> collection?</p>\n<p>P.S. <code>spring-data-jpa is version 2.7.15</code></p>\n"},{"tags":["java","android","kotlin","android-relativelayout"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701279321,"creation_date":1701279321,"answer_id":77573380,"question_id":77537330,"body_markdown":"I think that issue generated when you tried to set `EditText` **x** and **y** from Kotlin side.\r\n\r\nthe property `android:windowSoftInputMode=&quot;adjustResize&quot;` into &lt;Activity&gt; in `Manifest.` that is work for all Android device, but in your case i noticed a difference when you set **X** and **Y** programmatically.\r\n\r\n&gt; You should try this one. i hope its work for you\r\n```kotlin\r\noverride fun onCreate(){\r\n    // ...\r\n    relativeLayout.addView(textField) // your last line add bellow of that code\r\n\r\n    val rootView = findViewById&lt;View&gt;(android.R.id.content)\r\n\r\n    rootView.viewTreeObserver.addOnPreDrawListener(object : ViewTreeObserver.OnPreDrawListener {\r\n        override fun onPreDraw(): Boolean {\r\n            val heightDiff = rootView.height - relativeLayout.height\r\n\r\n            if (heightDiff &gt; 100) { // Adjust this threshold according to your needs\r\n                // Soft keyboard is shown\r\n                val newTopMargin = 2200 - heightDiff\r\n                textField_layoutparams.topMargin = newTopMargin\r\n                textField.layoutParams = textField_layoutparams\r\n            } else {\r\n                // Soft keyboard is hidden\r\n                textField_layoutparams.topMargin = 2200\r\n                textField.layoutParams = textField_layoutparams\r\n            }\r\n\r\n            return true\r\n        }\r\n    })\r\n}\r\n```","link":"https://stackoverflow.com/questions/77537330/windowsoftinputmode-adjustresize-doesnt-seems-to-work-in-case-of-absolute-pos/77573380#77573380","title":"windowSoftInputMode=&quot;adjustResize&quot; doesn&#39;t seems to work in case of Absolute Positioning in Relative Layout","body":"<p>I think that issue generated when you tried to set <code>EditText</code> <strong>x</strong> and <strong>y</strong> from Kotlin side.</p>\n<p>the property <code>android:windowSoftInputMode=&quot;adjustResize&quot;</code> into  in <code>Manifest.</code> that is work for all Android device, but in your case i noticed a difference when you set <strong>X</strong> and <strong>Y</strong> programmatically.</p>\n<blockquote>\n<p>You should try this one. i hope its work for you</p>\n</blockquote>\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun onCreate(){\n    // ...\n    relativeLayout.addView(textField) // your last line add bellow of that code\n\n    val rootView = findViewById&lt;View&gt;(android.R.id.content)\n\n    rootView.viewTreeObserver.addOnPreDrawListener(object : ViewTreeObserver.OnPreDrawListener {\n        override fun onPreDraw(): Boolean {\n            val heightDiff = rootView.height - relativeLayout.height\n\n            if (heightDiff &gt; 100) { // Adjust this threshold according to your needs\n                // Soft keyboard is shown\n                val newTopMargin = 2200 - heightDiff\n                textField_layoutparams.topMargin = newTopMargin\n                textField.layoutParams = textField_layoutparams\n            } else {\n                // Soft keyboard is hidden\n                textField_layoutparams.topMargin = 2200\n                textField.layoutParams = textField_layoutparams\n            }\n\n            return true\n        }\n    })\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":31,"answer_count":1,"score":5,"last_activity_date":1701279321,"creation_date":1700746715,"last_edit_date":1700747637,"question_id":77537330,"body_markdown":"I have an EditText in the lower part of my Android screen as shown in image. Due to some project contraints I&#39;m supposed to use only Absolute positioning.\r\n\r\nWhen clicked on the EditText the soft keyboard hides the EditText as shown in the other image.\r\n\r\n[![enter image description here][1]][1] \r\n[![enter image description here][2]][2]\r\n\r\n\r\nI have tried putting android:windowSoftInputMode=&quot;adjustResize&quot; in the manifest file (also tried adjustPan) \r\nIt only works for relative positioning (commented textField_layoutparams code below) but doesn&#39;t seems to be working for absolute positioning.\r\n\r\nEven tried putting a ScrollView (commented code below) but it doesn&#39;t work.\r\n\r\nCode:\r\n\r\n    class MainActivity : AppCompatActivity() {\r\n\r\n    private lateinit var binding: ActivityMainBinding\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n            val scrollView: ScrollView\r\n            val relativeLayout: RelativeLayout\r\n            val textField: EditText\r\n\r\n        /*scrollView = ScrollView (this)\r\n        scrollView.layoutParams = RelativeLayout.LayoutParams(\r\n            RelativeLayout.LayoutParams.MATCH_PARENT,\r\n            RelativeLayout.LayoutParams.MATCH_PARENT\r\n        )*/\r\n        //scrollView.isFillViewport = true\r\n\r\n        //setContentView(scrollView)\r\n\r\n        relativeLayout = RelativeLayout(this)\r\n        relativeLayout.layoutParams = RelativeLayout.LayoutParams (\r\n            RelativeLayout.LayoutParams.MATCH_PARENT,\r\n            RelativeLayout.LayoutParams.MATCH_PARENT\r\n        )\r\n        relativeLayout.setBackgroundColor(Color.parseColor(&quot;#0000FF&quot;))\r\n\r\n        //scrollView.addView(relativeLayout)\r\n        setContentView (relativeLayout)\r\n\r\n        textField = EditText(this)\r\n\r\n        val textField_layoutparams: LayoutParams\r\n        textField_layoutparams = RelativeLayout.LayoutParams (\r\n            400,\r\n            150\r\n        )\r\n        textField.setBackgroundColor(Color.parseColor(&quot;#FFFFFF&quot;))\r\n\r\n        //textField_layoutparams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, RelativeLayout.TRUE)\r\n        //textField_layoutparams.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.TRUE)\r\n        //textField_layoutparams.setMargins(0, 0, 0, 200)\r\n        textField.layoutParams = textField_layoutparams\r\n        textField.hint = &quot;Enter Text&quot;\r\n        textField.x = 500F\r\n        textField.y = 2200F\r\n\r\n        relativeLayout.addView(textField)\r\n    }\r\n\r\n    /**\r\n     * A native method that is implemented by the &#39;scrollviewpoc&#39; native library,\r\n     * which is packaged with this application.\r\n     */\r\n    external fun stringFromJNI(): String\r\n\r\n    companion object {\r\n        // Used to load the &#39;scrollviewpoc&#39; library on application startup.\r\n        init {\r\n            System.loadLibrary(&quot;scrollviewpoc&quot;)\r\n        }\r\n    }\r\n    }\r\n\r\nIs there any way to achieve the desired behaviour in case of Absolute positioning?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2Tempm.png\r\n  [2]: https://i.stack.imgur.com/lJw4hm.png\r\n ","link":"https://stackoverflow.com/questions/77537330/windowsoftinputmode-adjustresize-doesnt-seems-to-work-in-case-of-absolute-pos","title":"windowSoftInputMode=&quot;adjustResize&quot; doesn&#39;t seems to work in case of Absolute Positioning in Relative Layout","body":"<p>I have an EditText in the lower part of my Android screen as shown in image. Due to some project contraints I'm supposed to use only Absolute positioning.</p>\n<p>When clicked on the EditText the soft keyboard hides the EditText as shown in the other image.</p>\n<p><a href=\"https://i.stack.imgur.com/2Tempm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2Tempm.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/lJw4hm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lJw4hm.png\" alt=\"enter image description here\" /></a></p>\n<p>I have tried putting android:windowSoftInputMode=&quot;adjustResize&quot; in the manifest file (also tried adjustPan)\nIt only works for relative positioning (commented textField_layoutparams code below) but doesn't seems to be working for absolute positioning.</p>\n<p>Even tried putting a ScrollView (commented code below) but it doesn't work.</p>\n<p>Code:</p>\n<pre><code>class MainActivity : AppCompatActivity() {\n\nprivate lateinit var binding: ActivityMainBinding\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n\n        val scrollView: ScrollView\n        val relativeLayout: RelativeLayout\n        val textField: EditText\n\n    /*scrollView = ScrollView (this)\n    scrollView.layoutParams = RelativeLayout.LayoutParams(\n        RelativeLayout.LayoutParams.MATCH_PARENT,\n        RelativeLayout.LayoutParams.MATCH_PARENT\n    )*/\n    //scrollView.isFillViewport = true\n\n    //setContentView(scrollView)\n\n    relativeLayout = RelativeLayout(this)\n    relativeLayout.layoutParams = RelativeLayout.LayoutParams (\n        RelativeLayout.LayoutParams.MATCH_PARENT,\n        RelativeLayout.LayoutParams.MATCH_PARENT\n    )\n    relativeLayout.setBackgroundColor(Color.parseColor(&quot;#0000FF&quot;))\n\n    //scrollView.addView(relativeLayout)\n    setContentView (relativeLayout)\n\n    textField = EditText(this)\n\n    val textField_layoutparams: LayoutParams\n    textField_layoutparams = RelativeLayout.LayoutParams (\n        400,\n        150\n    )\n    textField.setBackgroundColor(Color.parseColor(&quot;#FFFFFF&quot;))\n\n    //textField_layoutparams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, RelativeLayout.TRUE)\n    //textField_layoutparams.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.TRUE)\n    //textField_layoutparams.setMargins(0, 0, 0, 200)\n    textField.layoutParams = textField_layoutparams\n    textField.hint = &quot;Enter Text&quot;\n    textField.x = 500F\n    textField.y = 2200F\n\n    relativeLayout.addView(textField)\n}\n\n/**\n * A native method that is implemented by the 'scrollviewpoc' native library,\n * which is packaged with this application.\n */\nexternal fun stringFromJNI(): String\n\ncompanion object {\n    // Used to load the 'scrollviewpoc' library on application startup.\n    init {\n        System.loadLibrary(&quot;scrollviewpoc&quot;)\n    }\n}\n}\n</code></pre>\n<p>Is there any way to achieve the desired behaviour in case of Absolute positioning?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"score":0,"post_type":"question","creation_date":1683889919,"post_id":76235681,"comment_id":134439330,"body_markdown":"If I&#39;m not mistaken, Spring Batch 4 requires Java 8 but Spring Framework 3 only supports 1.5, 6 and 7 so I don&#39;t think you can make this work.","link":"https://stackoverflow.com/questions/76235681/spring-batch-4-3-8-compatible-with-spring-framework-3-0-5#comment134439330_76235681","body":"If I&#39;m not mistaken, Spring Batch 4 requires Java 8 but Spring Framework 3 only supports 1.5, 6 and 7 so I don&#39;t think you can make this work."},{"score":0,"post_type":"question","creation_date":1683890265,"post_id":76235681,"comment_id":134439414,"body_markdown":"I guess @Lucifer meant Spring Boot 3.0.5?","link":"https://stackoverflow.com/questions/76235681/spring-batch-4-3-8-compatible-with-spring-framework-3-0-5#comment134439414_76235681","body":"I guess @Lucifer meant Spring Boot 3.0.5?"},{"score":0,"post_type":"question","creation_date":1683890424,"post_id":76235681,"comment_id":134439457,"body_markdown":"You don&#39;t need to share the company code but how shell we understand the issue? Please provide a simplified version of code causing this &quot;obj.getclass() is null&#39; error.","link":"https://stackoverflow.com/questions/76235681/spring-batch-4-3-8-compatible-with-spring-framework-3-0-5#comment134439457_76235681","body":"You don&#39;t need to share the company code but how shell we understand the issue? Please provide a simplified version of code causing this &quot;obj.getclass() is null&#39; error."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701279230,"last_edit_date":1701279230,"creation_date":1683893450,"answer_id":76236151,"question_id":76235681,"body_markdown":"The [documentation][1] says that Spring Batch 4.3.8 depends on Spring Framework 5.3. If you need compatibility with an older version of Spring Framework you would need to use an older version of Spring Batch, like it is mentioned in this answer: https://stackoverflow.com/a/43846616/721855.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-batch/docs/4.3.8/reference/html/whatsnew.html#dependencyUpdates","link":"https://stackoverflow.com/questions/76235681/spring-batch-4-3-8-compatible-with-spring-framework-3-0-5/76236151#76236151","title":"Spring Batch 4.3.8 compatible with spring framework 3.0.5?","body":"<p>The <a href=\"https://docs.spring.io/spring-batch/docs/4.3.8/reference/html/whatsnew.html#dependencyUpdates\" rel=\"nofollow noreferrer\">documentation</a> says that Spring Batch 4.3.8 depends on Spring Framework 5.3. If you need compatibility with an older version of Spring Framework you would need to use an older version of Spring Batch, like it is mentioned in this answer: <a href=\"https://stackoverflow.com/a/43846616/721855\">https://stackoverflow.com/a/43846616/721855</a>.</p>\n"}],"comment_count":3,"is_answered":true,"view_count":501,"answer_count":1,"score":0,"last_activity_date":1701279230,"creation_date":1683889465,"question_id":76235681,"body_markdown":"I need to know if springbatch(4.3.8) is or anyhow can be made compatible with springframework 3.0.5. I am getting an error if using.\r\n\r\nThe error being obj.getclass() is null. But nothing is passed as null. \r\n\r\nCode I cant display over here as it will be a policy violation of the company. \r\n\r\nTried with 5.0.1 but seems like it will be a huge change.","link":"https://stackoverflow.com/questions/76235681/spring-batch-4-3-8-compatible-with-spring-framework-3-0-5","title":"Spring Batch 4.3.8 compatible with spring framework 3.0.5?","body":"<p>I need to know if springbatch(4.3.8) is or anyhow can be made compatible with springframework 3.0.5. I am getting an error if using.</p>\n<p>The error being obj.getclass() is null. But nothing is passed as null.</p>\n<p>Code I cant display over here as it will be a policy violation of the company.</p>\n<p>Tried with 5.0.1 but seems like it will be a huge change.</p>\n"},{"tags":["java","elasticsearch","spring-data-elasticsearch","optimistic-locking"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701278923,"post_id":77569125,"comment_id":136757026,"body_markdown":"https://stackoverflow.com/questions/36188917/how-to-fix-elasticsearch-conflicts-on-the-same-key-when-two-process-writing-at-t\nfound the solution here. will duplicate with answer to the question and that&#39;s it. everything is working now\nthanks for help","link":"https://stackoverflow.com/questions/77567192/elasticsearch-and-spring-data-optimistic-locking/77569125#comment136757026_77569125","body":"<a href=\"https://stackoverflow.com/questions/36188917/how-to-fix-elasticsearch-conflicts-on-the-same-key-when-two-process-writing-at-t\" title=\"how to fix elasticsearch conflicts on the same key when two process writing at t\">stackoverflow.com/questions/36188917/&hellip;</a> found the solution here. will duplicate with answer to the question and that&#39;s it. everything is working now thanks for help"}],"comment_count":1,"score":0,"last_activity_date":1701240989,"creation_date":1701240989,"answer_id":77569125,"question_id":77567192,"body_markdown":"&gt; how to do it via spring boot\r\n\r\nSpring Data Elasticsearch is not Spring Boot.\r\n\r\nThe versioning management of an index can be defined with `versionType` property of the`@Document` annotation. \r\n\r\nNote that the current version of the Elasticsearch documentation (https://www.elastic.co/guide/en/elasticsearch/reference/8.11/optimistic-concurrency-control.html) only describes optimistic locking using __seq_no_ and __primary_term_ (which is supported by Spring Data Elasticsearch as well). Using a version field was the previous way to do this, you might better migrate.\r\n\r\nAnother thing:\r\nPlease annotate your id property with `@Id` instead of relying it to be detetced by the name, you can omit the `@Field` annotation on the id field then.","link":"https://stackoverflow.com/questions/77567192/elasticsearch-and-spring-data-optimistic-locking/77569125#77569125","title":"Elasticsearch and spring data (optimistic locking)","body":"<blockquote>\n<p>how to do it via spring boot</p>\n</blockquote>\n<p>Spring Data Elasticsearch is not Spring Boot.</p>\n<p>The versioning management of an index can be defined with <code>versionType</code> property of the<code>@Document</code> annotation.</p>\n<p>Note that the current version of the Elasticsearch documentation (<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/8.11/optimistic-concurrency-control.html\" rel=\"nofollow noreferrer\">https://www.elastic.co/guide/en/elasticsearch/reference/8.11/optimistic-concurrency-control.html</a>) only describes optimistic locking using _<em>seq_no</em> and _<em>primary_term</em> (which is supported by Spring Data Elasticsearch as well). Using a version field was the previous way to do this, you might better migrate.</p>\n<p>Another thing:\nPlease annotate your id property with <code>@Id</code> instead of relying it to be detetced by the name, you can omit the <code>@Field</code> annotation on the id field then.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701279100,"creation_date":1701279100,"answer_id":77573356,"question_id":77567192,"body_markdown":"Found problem here https://stackoverflow.com/questions/36188917/how-to-fix-elasticsearch-conflicts-on-the-same-key-when-two-process-writing-at-t , and the solution is just increment by yourself the version, spring data elastic can&#39;t do it &quot;on fly&quot;\r\n```\r\n  public TestIndex update(String id, String text) {\r\n        TestIndex testIndex = testRepository.findById(id).orElseThrow();\r\n        testIndex.setText(text);\r\n        testIndex.setIndexVersion(testIndex.getIndexVersion() + 1);\r\n        return testRepository.save(testIndex);\r\n    }\r\n```\r\nelastic checking if version is upgraded, and throwing optimistic lock if it is less or equal\r\n`current version [1] is higher or equal to the one provided [1]`\r\nthe message was a little bit confused with the equal, but now working well\r\n","link":"https://stackoverflow.com/questions/77567192/elasticsearch-and-spring-data-optimistic-locking/77573356#77573356","title":"Elasticsearch and spring data (optimistic locking)","body":"<p>Found problem here <a href=\"https://stackoverflow.com/questions/36188917/how-to-fix-elasticsearch-conflicts-on-the-same-key-when-two-process-writing-at-t\">How to fix ElasticSearch conflicts on the same key when two process writing at the same time</a> , and the solution is just increment by yourself the version, spring data elastic can't do it &quot;on fly&quot;</p>\n<pre><code>  public TestIndex update(String id, String text) {\n        TestIndex testIndex = testRepository.findById(id).orElseThrow();\n        testIndex.setText(text);\n        testIndex.setIndexVersion(testIndex.getIndexVersion() + 1);\n        return testRepository.save(testIndex);\n    }\n</code></pre>\n<p>elastic checking if version is upgraded, and throwing optimistic lock if it is less or equal\n<code>current version [1] is higher or equal to the one provided [1]</code>\nthe message was a little bit confused with the equal, but now working well</p>\n"}],"comment_count":0,"is_answered":false,"view_count":31,"answer_count":2,"score":0,"last_activity_date":1701279100,"creation_date":1701206211,"question_id":77567192,"body_markdown":"I have a question about some automation implementation it via elastic spring boot data.\r\n``` @Data\r\n@SuperBuilder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Document(indexName = &quot;super_test_index&quot;)\r\npublic class TestIndex {\r\n\r\n    @Field(type = FieldType.Keyword)\r\n    private String id;\r\n\r\n    @Field(type = FieldType.Text)\r\n    private String text;\r\n\r\n    @CreatedDate\r\n    private Instant createDate;\r\n\r\n    @LastModifiedDate\r\n    private Instant updateDate;\r\n\r\n    @Version\r\n    private Long indexVersion;\r\n}\r\n```\r\nadded repository\r\n```\r\n@Repository\r\npublic interface TestRepository extends ElasticsearchRepository&lt;TestIndex, String&gt; {\r\n}\r\n```\r\nand implemented simple code\r\n```\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class TestService {\r\n\r\n    private final TestRepository testRepository;\r\n\r\n\r\n    public TestIndex save() {\r\n        TestIndex testIndex = TestIndex.builder()\r\n                .id(UUID.randomUUID().toString())\r\n                .text(&quot;test&quot;)\r\n                .build();\r\n        return testRepository.save(testIndex);\r\n    }\r\n\r\n    public TestIndex update(String id, String text) {\r\n        TestIndex testIndex = testRepository.findById(id).orElseThrow();\r\n        testIndex.setText(text);\r\n        return testRepository.save(testIndex);\r\n    }\r\n\r\n}\r\n```\r\nand call it via controller\r\n```\r\n@RestController\r\n@RequiredArgsConstructor\r\npublic class TestController {\r\n\r\n    private final TestService testService;\r\n\r\n\r\n    @PostMapping(&quot;/api/test/save&quot;)\r\n    public TestIndex save() {\r\n        return testService.save();\r\n    }\r\n\r\n    @PostMapping(&quot;/api/test/update&quot;)\r\n    public TestIndex update(@RequestParam(&quot;id&quot;) String id, @RequestParam(&quot;text&quot;) String text) {\r\n        return testService.update(id, text);\r\n    }\r\n\r\n}\r\n```\r\non create I got updated document\r\n```\r\n{\r\n  &quot;id&quot;: &quot;9a16210a-3ab7-4d52-bcd2-ec87f46cc403&quot;,\r\n  &quot;text&quot;: &quot;test&quot;,\r\n  &quot;createDate&quot;: null,\r\n  &quot;updateDate&quot;: null,\r\n  &quot;indexVersion&quot;: 1\r\n}\r\n```\r\nbut on updating it\r\n```\r\n  &quot;exception&quot;: &quot;Elasticsearch exception [type=version_conflict_engine_exception, reason=[9a16210a-3ab7-4d52-bcd2-ec87f46cc403]: version conflict, current version [1] is higher or equal to the one provided [1]]; nested exception is [super_test_index/e03tZCuoRzeJB2SpVQIefQ][[super_test_index][0]] ElasticsearchStatusException[Elasticsearch exception [type=version_conflict_engine_exception, reason=[9a16210a-3ab7-4d52-bcd2-ec87f46cc403]: version conflict, current version [1] is higher or equal to the one provided [1]]]&quot;\r\n```\r\nreceiving the error message. So I have a few questions:\r\n1. Is it event possible to configure optimistic locking via spring data elastic? \r\n2. How to configure creation date/updating date for the fields, or i have to do it manually?\r\n\r\nI just found some information about i have to configure the version controlling like &#39;external version&#39; but I didn&#39;t get it how to do it via spring boot. I did the same as for a jpa repositories/entities, but never done for elastic.\r\n\r\n","link":"https://stackoverflow.com/questions/77567192/elasticsearch-and-spring-data-optimistic-locking","title":"Elasticsearch and spring data (optimistic locking)","body":"<p>I have a question about some automation implementation it via elastic spring boot data.</p>\n<pre><code>@SuperBuilder\n@NoArgsConstructor\n@AllArgsConstructor\n@Document(indexName = &quot;super_test_index&quot;)\npublic class TestIndex {\n\n    @Field(type = FieldType.Keyword)\n    private String id;\n\n    @Field(type = FieldType.Text)\n    private String text;\n\n    @CreatedDate\n    private Instant createDate;\n\n    @LastModifiedDate\n    private Instant updateDate;\n\n    @Version\n    private Long indexVersion;\n}\n</code></pre>\n<p>added repository</p>\n<pre><code>@Repository\npublic interface TestRepository extends ElasticsearchRepository&lt;TestIndex, String&gt; {\n}\n</code></pre>\n<p>and implemented simple code</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class TestService {\n\n    private final TestRepository testRepository;\n\n\n    public TestIndex save() {\n        TestIndex testIndex = TestIndex.builder()\n                .id(UUID.randomUUID().toString())\n                .text(&quot;test&quot;)\n                .build();\n        return testRepository.save(testIndex);\n    }\n\n    public TestIndex update(String id, String text) {\n        TestIndex testIndex = testRepository.findById(id).orElseThrow();\n        testIndex.setText(text);\n        return testRepository.save(testIndex);\n    }\n\n}\n</code></pre>\n<p>and call it via controller</p>\n<pre><code>@RestController\n@RequiredArgsConstructor\npublic class TestController {\n\n    private final TestService testService;\n\n\n    @PostMapping(&quot;/api/test/save&quot;)\n    public TestIndex save() {\n        return testService.save();\n    }\n\n    @PostMapping(&quot;/api/test/update&quot;)\n    public TestIndex update(@RequestParam(&quot;id&quot;) String id, @RequestParam(&quot;text&quot;) String text) {\n        return testService.update(id, text);\n    }\n\n}\n</code></pre>\n<p>on create I got updated document</p>\n<pre><code>{\n  &quot;id&quot;: &quot;9a16210a-3ab7-4d52-bcd2-ec87f46cc403&quot;,\n  &quot;text&quot;: &quot;test&quot;,\n  &quot;createDate&quot;: null,\n  &quot;updateDate&quot;: null,\n  &quot;indexVersion&quot;: 1\n}\n</code></pre>\n<p>but on updating it</p>\n<pre><code>  &quot;exception&quot;: &quot;Elasticsearch exception [type=version_conflict_engine_exception, reason=[9a16210a-3ab7-4d52-bcd2-ec87f46cc403]: version conflict, current version [1] is higher or equal to the one provided [1]]; nested exception is [super_test_index/e03tZCuoRzeJB2SpVQIefQ][[super_test_index][0]] ElasticsearchStatusException[Elasticsearch exception [type=version_conflict_engine_exception, reason=[9a16210a-3ab7-4d52-bcd2-ec87f46cc403]: version conflict, current version [1] is higher or equal to the one provided [1]]]&quot;\n</code></pre>\n<p>receiving the error message. So I have a few questions:</p>\n<ol>\n<li>Is it event possible to configure optimistic locking via spring data elastic?</li>\n<li>How to configure creation date/updating date for the fields, or i have to do it manually?</li>\n</ol>\n<p>I just found some information about i have to configure the version controlling like 'external version' but I didn't get it how to do it via spring boot. I did the same as for a jpa repositories/entities, but never done for elastic.</p>\n"},{"tags":["java","spring","spring-boot","apache-poi"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1696834993,"post_id":77256502,"comment_id":136198636,"body_markdown":"Currently using commons-io 2.11.0","link":"https://stackoverflow.com/questions/77256330/java-lang-nosuchmethoderror-org-apache-commons-io-output-unsynchronizedbytearr/77256502#comment136198636_77256502","body":"Currently using commons-io 2.11.0"},{"score":1,"post_type":"answer","creation_date":1696836300,"post_id":77256502,"comment_id":136198845,"body_markdown":"Working after upgrading commons-io 2.11.0 to 2.14.0\n\nAs UnsynchronizedByteArrayOutputStream.builder() is not available in commons-io 2.11.0","link":"https://stackoverflow.com/questions/77256330/java-lang-nosuchmethoderror-org-apache-commons-io-output-unsynchronizedbytearr/77256502#comment136198845_77256502","body":"Working after upgrading commons-io 2.11.0 to 2.14.0  As UnsynchronizedByteArrayOutputStream.builder() is not available in commons-io 2.11.0"},{"score":1,"post_type":"answer","creation_date":1696844419,"post_id":77256502,"comment_id":136200292,"body_markdown":"This should be the answer. I had the same problem and this fixed it.\nThanks Anish!","link":"https://stackoverflow.com/questions/77256330/java-lang-nosuchmethoderror-org-apache-commons-io-output-unsynchronizedbytearr/77256502#comment136200292_77256502","body":"This should be the answer. I had the same problem and this fixed it. Thanks Anish!"},{"score":0,"post_type":"answer","creation_date":1696849512,"post_id":77256502,"comment_id":136201198,"body_markdown":"What POI 5.2.4 docs say you should use ancient commons-io versions? https://poi.apache.org/changes.html lists the upgrade to commons-io 2.13.0 but 2.14.0 is ok too. If you provide a link to the incorrect docs, we can fix them.","link":"https://stackoverflow.com/questions/77256330/java-lang-nosuchmethoderror-org-apache-commons-io-output-unsynchronizedbytearr/77256502#comment136201198_77256502","body":"What POI 5.2.4 docs say you should use ancient commons-io versions? <a href=\"https://poi.apache.org/changes.html\" rel=\"nofollow noreferrer\">poi.apache.org/changes.html</a> lists the upgrade to commons-io 2.13.0 but 2.14.0 is ok too. If you provide a link to the incorrect docs, we can fix them."},{"score":1,"post_type":"answer","creation_date":1696924481,"post_id":77256502,"comment_id":136211408,"body_markdown":"@AnishB., I think is should not be `version &gt;=2.7.x` it should be `version &gt;= 2.14.0`. Not sure when was UnsynchronizedByteArrayOutputStream.builder() introduced. Could you please confirm?","link":"https://stackoverflow.com/questions/77256330/java-lang-nosuchmethoderror-org-apache-commons-io-output-unsynchronizedbytearr/77256502#comment136211408_77256502","body":"@AnishB., I think is should not be <code>version &gt;=2.7.x</code> it should be <code>version &gt;= 2.14.0</code>. Not sure when was UnsynchronizedByteArrayOutputStream.builder() introduced. Could you please confirm?"},{"score":0,"post_type":"answer","creation_date":1696926232,"post_id":77256502,"comment_id":136211718,"body_markdown":"@Prem I have checked all the version from 2.11 to 2.14. The Builder is present from 2.12.0 onwards.","link":"https://stackoverflow.com/questions/77256330/java-lang-nosuchmethoderror-org-apache-commons-io-output-unsynchronizedbytearr/77256502#comment136211718_77256502","body":"@Prem I have checked all the version from 2.11 to 2.14. The Builder is present from 2.12.0 onwards."},{"score":0,"post_type":"answer","creation_date":1697720007,"post_id":77256502,"comment_id":136317028,"body_markdown":"somehow when downloaded from maven rep `org.apache.poi:poi` dependes on `commons-io:commons-io:jar:2.11.0 (compile)` instead of `2.13.0` (but the pom has the correct version of `2.13.0`","link":"https://stackoverflow.com/questions/77256330/java-lang-nosuchmethoderror-org-apache-commons-io-output-unsynchronizedbytearr/77256502#comment136317028_77256502","body":"somehow when downloaded from maven rep <code>org.apache.poi:poi</code> dependes on <code>commons-io:commons-io:jar:2.11.0 (compile)</code> instead of <code>2.13.0</code> (but the pom has the correct version of <code>2.13.0</code>"},{"score":0,"post_type":"answer","creation_date":1697720088,"post_id":77256502,"comment_id":136317047,"body_markdown":"@VictorCosta which version of poi are you using? Put the explicit dependency for commons-io, maven will pick the latest one.","link":"https://stackoverflow.com/questions/77256330/java-lang-nosuchmethoderror-org-apache-commons-io-output-unsynchronizedbytearr/77256502#comment136317047_77256502","body":"@VictorCosta which version of poi are you using? Put the explicit dependency for commons-io, maven will pick the latest one."}],"comment_count":8,"score":13,"last_activity_date":1701277179,"last_edit_date":1701277179,"creation_date":1696830707,"answer_id":77256502,"question_id":77256330,"body_markdown":"You will need to add/upgrade **Apache Commons IO** dependency version **&gt;= 2.12.x**.\r\n\r\n**Note:** The `builder()` method present in `UnsynchronizedByteArrayOutputStream` got introduced from **2.12.x** version of **commons-io** onwards.\r\n\r\nTake any **commons-io** version **&gt;= 2.12.0** for any **Apache POI** version **&gt;= 5.2.4**. \r\n\r\nI took the latest dependency of **commons-io** which is **2.14.0**.\r\n\r\n**pom.xml** (Maven):\r\n\r\n    &lt;dependencies&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.14.0&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nOr \r\n\r\n**build.gradle** (Gradle):\r\n\r\n    dependencies {\r\n       implementation &#39;commons-io:commons-io:2.14.0&#39;\r\n    }\r\n\r\nIt will work.\r\n\r\n  [1]: https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/output/UnsynchronizedByteArrayOutputStream.html","link":"https://stackoverflow.com/questions/77256330/java-lang-nosuchmethoderror-org-apache-commons-io-output-unsynchronizedbytearr/77256502#77256502","title":"java.lang.NoSuchMethodError: &#39;org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream$Builder org.apache.poi-poi-ooxml-5.2.4","body":"<p>You will need to add/upgrade <strong>Apache Commons IO</strong> dependency version <strong>&gt;= 2.12.x</strong>.</p>\n<p><strong>Note:</strong> The <code>builder()</code> method present in <code>UnsynchronizedByteArrayOutputStream</code> got introduced from <strong>2.12.x</strong> version of <strong>commons-io</strong> onwards.</p>\n<p>Take any <strong>commons-io</strong> version <strong>&gt;= 2.12.0</strong> for any <strong>Apache POI</strong> version <strong>&gt;= 5.2.4</strong>.</p>\n<p>I took the latest dependency of <strong>commons-io</strong> which is <strong>2.14.0</strong>.</p>\n<p><strong>pom.xml</strong> (Maven):</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;2.14.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>Or</p>\n<p><strong>build.gradle</strong> (Gradle):</p>\n<pre><code>dependencies {\n   implementation 'commons-io:commons-io:2.14.0'\n}\n</code></pre>\n<p>It will work.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":3192,"answer_count":1,"score":8,"last_activity_date":1701277179,"creation_date":1696827089,"last_edit_date":1697026392,"question_id":77256330,"body_markdown":"I have upgraded from `org.apache.poi-poi-ooxml-5.2.3` to `org.apache.poi-poi-ooxml-5.2.4` due to **Security Violation Threat** in `5.2.3`\r\n\r\nNow, I am facing run time exception as `java.lang.NoSuchMethodError`\r\n\r\n**Exception:**\r\n```\r\n[ERROR] ErrorPageFilter - Forwarding to error page from request [/reports/myapp/myreport] due to exception [&#39;org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream$Builder org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream.builder()&#39;]\r\njava.lang.NoSuchMethodError: &#39;org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream$Builder org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream.builder()&#39;\r\n\tat org.apache.poi.xssf.usermodel.XSSFWorkbook.newPackage(XSSFWorkbook.java:521) ~[poi-ooxml-5.2.4.jar:5.2.4]\r\n\tat org.apache.poi.xssf.usermodel.XSSFWorkbook.&lt;init&gt;(XSSFWorkbook.java:231) ~[poi-ooxml-5.2.4.jar:5.2.4]\r\n\tat org.apache.poi.xssf.usermodel.XSSFWorkbook.&lt;init&gt;(XSSFWorkbook.java:227) ~[poi-ooxml-5.2.4.jar:5.2.4]\r\n\tat org.apache.poi.xssf.usermodel.XSSFWorkbook.&lt;init&gt;(XSSFWorkbook.java:215) ~[poi-ooxml-5.2.4.jar:5.2.4]\r\n\tat myapp.reports.service.impl.MyReportsExcelExporter.&lt;init&gt;(MyReportsExcelExporter.java:37) ~[classes/:0.0.1-SNAPSHOT]\r\n```\r\n\r\n**Code:**\r\n```java\r\nimport org.apache.poi.xssf.usermodel.XSSFWorkbook;\r\n\r\npublic class MyReportsExcelExporter {\r\n\tprotected XSSFWorkbook workbook;\r\n\t...\r\n\tpublic MyReportsExcelExporter() {\r\n\t\tthis.workbook = new XSSFWorkbook(); //Facing issue here, while initializing the workbook.\r\n\t}\r\n\t...\r\n}\r\n```\r\n\r\nLooking at the version change, it seems like a minor upgrade but now existing code has stopped working.\r\n\r\nWhat&#39;s probably wrong?","link":"https://stackoverflow.com/questions/77256330/java-lang-nosuchmethoderror-org-apache-commons-io-output-unsynchronizedbytearr","title":"java.lang.NoSuchMethodError: &#39;org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream$Builder org.apache.poi-poi-ooxml-5.2.4","body":"<p>I have upgraded from <code>org.apache.poi-poi-ooxml-5.2.3</code> to <code>org.apache.poi-poi-ooxml-5.2.4</code> due to <strong>Security Violation Threat</strong> in <code>5.2.3</code></p>\n<p>Now, I am facing run time exception as <code>java.lang.NoSuchMethodError</code></p>\n<p><strong>Exception:</strong></p>\n<pre><code>[ERROR] ErrorPageFilter - Forwarding to error page from request [/reports/myapp/myreport] due to exception ['org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream$Builder org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream.builder()']\njava.lang.NoSuchMethodError: 'org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream$Builder org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream.builder()'\n    at org.apache.poi.xssf.usermodel.XSSFWorkbook.newPackage(XSSFWorkbook.java:521) ~[poi-ooxml-5.2.4.jar:5.2.4]\n    at org.apache.poi.xssf.usermodel.XSSFWorkbook.&lt;init&gt;(XSSFWorkbook.java:231) ~[poi-ooxml-5.2.4.jar:5.2.4]\n    at org.apache.poi.xssf.usermodel.XSSFWorkbook.&lt;init&gt;(XSSFWorkbook.java:227) ~[poi-ooxml-5.2.4.jar:5.2.4]\n    at org.apache.poi.xssf.usermodel.XSSFWorkbook.&lt;init&gt;(XSSFWorkbook.java:215) ~[poi-ooxml-5.2.4.jar:5.2.4]\n    at myapp.reports.service.impl.MyReportsExcelExporter.&lt;init&gt;(MyReportsExcelExporter.java:37) ~[classes/:0.0.1-SNAPSHOT]\n</code></pre>\n<p><strong>Code:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.poi.xssf.usermodel.XSSFWorkbook;\n\npublic class MyReportsExcelExporter {\n    protected XSSFWorkbook workbook;\n    ...\n    public MyReportsExcelExporter() {\n        this.workbook = new XSSFWorkbook(); //Facing issue here, while initializing the workbook.\n    }\n    ...\n}\n</code></pre>\n<p>Looking at the version change, it seems like a minor upgrade but now existing code has stopped working.</p>\n<p>What's probably wrong?</p>\n"},{"tags":["java","pdf","adobe","microsoft-edge","pdftron"],"comments":[{"score":2,"post_type":"question","creation_date":1701178543,"post_id":77563890,"comment_id":136740995,"body_markdown":"Most likely the PDF file is incorrect so each viewer handles the error in its own way. Can you post a sample PDF file to take a look at it?","link":"https://stackoverflow.com/questions/77563890/discrepancy-in-pdf-rendering-between-browser-and-acrobat-pdf-viewer#comment136740995_77563890","body":"Most likely the PDF file is incorrect so each viewer handles the error in its own way. Can you post a sample PDF file to take a look at it?"},{"score":0,"post_type":"question","creation_date":1701188474,"post_id":77563890,"comment_id":136743034,"body_markdown":"[GDRIVE](https://drive.google.com/file/d/1P7d37yANHvobYSDPyXls9UoWWkaMD6Ka/view?usp=drive_link)\nPlease check this pdf.","link":"https://stackoverflow.com/questions/77563890/discrepancy-in-pdf-rendering-between-browser-and-acrobat-pdf-viewer#comment136743034_77563890","body":"<a href=\"https://drive.google.com/file/d/1P7d37yANHvobYSDPyXls9UoWWkaMD6Ka/view?usp=drive_link\" rel=\"nofollow noreferrer\">GDRIVE</a> Please check this pdf."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701238037,"post_id":77565678,"comment_id":136749362,"body_markdown":"Thank you for highlighting the error. I have revised the code to draw the text line twice, and now I need a transformation matrix to make the text appear from top to bottom. The updated PDF file can be found here: [PortraitPDF](https://drive.google.com/file/d/1PIREsG2g1K1D7ugFsQaWVRRbzO2fyvkw/view?usp=drive_link)\nI change orientation to portrait. I am still not able to see text in abode acrobat viewer","link":"https://stackoverflow.com/questions/77563890/discrepancy-in-pdf-rendering-between-browser-and-acrobat-pdf-viewer/77565678#comment136749362_77565678","body":"Thank you for highlighting the error. I have revised the code to draw the text line twice, and now I need a transformation matrix to make the text appear from top to bottom. The updated PDF file can be found here: <a href=\"https://drive.google.com/file/d/1PIREsG2g1K1D7ugFsQaWVRRbzO2fyvkw/view?usp=drive_link\" rel=\"nofollow noreferrer\">PortraitPDF</a> I change orientation to portrait. I am still not able to see text in abode acrobat viewer"},{"score":1,"post_type":"answer","creation_date":1701247613,"post_id":77565678,"comment_id":136750754,"body_markdown":"@Lactus *&quot;I have revised the code to draw the text line twice, and now I need a transformation matrix to make the text appear from top to bottom. The updated PDF file can be found here: PortraitPDF I change orientation to portrait. I am still not able to see text in abode acrobat viewer&quot;* - You indeed have stopped displaying the text twice. But that was not the core error, the core error was that text showing operators **must** be used inside a **BT** .. **ET** envelope, not outside. And in your new PDF you still don&#39;t have the required **BT** .. **ET** envelopes (aka text objects).","link":"https://stackoverflow.com/questions/77563890/discrepancy-in-pdf-rendering-between-browser-and-acrobat-pdf-viewer/77565678#comment136750754_77565678","body":"@Lactus <i>&quot;I have revised the code to draw the text line twice, and now I need a transformation matrix to make the text appear from top to bottom. The updated PDF file can be found here: PortraitPDF I change orientation to portrait. I am still not able to see text in abode acrobat viewer&quot;</i> - You indeed have stopped displaying the text twice. But that was not the core error, the core error was that text showing operators <b>must</b> be used inside a <b>BT</b> .. <b>ET</b> envelope, not outside. And in your new PDF you still don&#39;t have the required <b>BT</b> .. <b>ET</b> envelopes (aka text objects)."}],"comment_count":2,"score":0,"last_activity_date":1701191480,"last_edit_date":1701191480,"creation_date":1701189860,"answer_id":77565678,"question_id":77563890,"body_markdown":"Your text is not drawn inside a text object. Text drawing instructions may only be used in text objects.\r\n\r\nFor drawing the first line you have \r\n```\r\n    0.9 0.9 0.9 rg\r\n    36 0 144 36 re\r\n    f*\r\n    1 0 0 1 67.104 23 cm\r\n    0 0 0 rg\r\n    /F0 8 Tf\r\n    q\r\n        (TEST LINE1 OF TAB1) Tj\r\n        1 0 0 1 67.104 23 cm\r\n    Q\r\n    (TEST LINE1 OF TAB1) Tj\r\n```\r\nbut you probably should have\r\n```\r\n    0.9 0.9 0.9 rg\r\n    36 0 144 36 re\r\n    f*\r\n    1 0 0 1 67.104 23 cm\r\n    0 0 0 rg\r\n    /F0 8 Tf\r\n    q\r\n        BT\r\n        (TEST LINE1 OF TAB1) Tj\r\n        ET\r\n        1 0 0 1 67.104 23 cm\r\n    Q\r\n    BT\r\n    (TEST LINE1 OF TAB1) Tj\r\n    ET\r\n```\r\n\r\nIt&#39;s the same issue for the second line.\r\n\r\nI don&#39;t know, though, how you can make pdftron add the BeginText and EndText operators.\r\n\r\nBy the way, there is quite a lot of unnecessary stuff in here, like drawing the text line twice or manipulating the transformation matrix right before a Q (RestoreState) operation...","link":"https://stackoverflow.com/questions/77563890/discrepancy-in-pdf-rendering-between-browser-and-acrobat-pdf-viewer/77565678#77565678","title":"Discrepancy in PDF rendering between browser and Acrobat PDF viewer","body":"<p>Your text is not drawn inside a text object. Text drawing instructions may only be used in text objects.</p>\n<p>For drawing the first line you have</p>\n<pre><code>    0.9 0.9 0.9 rg\n    36 0 144 36 re\n    f*\n    1 0 0 1 67.104 23 cm\n    0 0 0 rg\n    /F0 8 Tf\n    q\n        (TEST LINE1 OF TAB1) Tj\n        1 0 0 1 67.104 23 cm\n    Q\n    (TEST LINE1 OF TAB1) Tj\n</code></pre>\n<p>but you probably should have</p>\n<pre><code>    0.9 0.9 0.9 rg\n    36 0 144 36 re\n    f*\n    1 0 0 1 67.104 23 cm\n    0 0 0 rg\n    /F0 8 Tf\n    q\n        BT\n        (TEST LINE1 OF TAB1) Tj\n        ET\n        1 0 0 1 67.104 23 cm\n    Q\n    BT\n    (TEST LINE1 OF TAB1) Tj\n    ET\n</code></pre>\n<p>It's the same issue for the second line.</p>\n<p>I don't know, though, how you can make pdftron add the BeginText and EndText operators.</p>\n<p>By the way, there is quite a lot of unnecessary stuff in here, like drawing the text line twice or manipulating the transformation matrix right before a Q (RestoreState) operation...</p>\n"},{"comment_count":0,"score":1,"last_activity_date":1701276967,"creation_date":1701276967,"answer_id":77573113,"question_id":77563890,"body_markdown":"The issue is that there is a relationship between ElementBuilder and the Element object it last created.\r\n\r\n&gt;  every call to ElementBuilder.Create method destroys the Element currently associated with the builder and all previous Element pointers are invalidated.\r\n\r\nhttps://docs.apryse.com/api/PDFTronSDK/java/com/pdftron/pdf/ElementBuilder.html#createTextBegin()\r\n\r\nSo you can only be &quot;working&quot; on one Element at a time, while in your code you are trying to operate on two at the same time.\r\n\r\nThe fix is to write out the beginText before building the textRun itself, and operate on the textRun GState object.\r\n\r\nBelow is your updated code\r\n\r\n    Element tabElement = builder.createRect(x, y - 36, tabWidth, tabHeight);\r\n    tabElement.setPathFill(true);\r\n    GState gstate = tabElement.getGState();\r\n    gstate.setFillColorSpace(ColorSpace.createDeviceRGB());\r\n    gstate.setFillColor(new ColorPt(0.9, 0.9, 0.9));\r\n    elementWriterLine1.writeElement(tabElement);\r\n    \r\n    Element tabTextElementLine1 = builder.createTextBegin(Font.createTrueTypeFont(outputPdfDoc, ARIAL, true), 8);\r\n    elementWriterLine1.writeElement(tabTextElementLine1);\r\n    \r\n    Element textLine1 = builder.createTextRun(&quot;TEXT LINE 1&quot;);\r\n    if(isLandscape) {\r\n        tabPosition = 4 - tabPosition;\r\n        textLine1.getGState().setTransform(1, 0, 0, 1, pageWidth - gap - (tabPosition * tabWidth) - (tabWidth/2 + textLine1.getTextLength()/2) ,  tabHeight-13 );\r\n    } else {\r\n        textLine1.getGState().setTransform(0, -1, 1, 0, pageWidth - 13 , pageHeight - gap  - (tabPosition * tabHeight) - (tabHeight/2 - textLine1.getTextLength()/2) );\r\n    }\r\n    textLine1.getGState().setFillColorSpace(ColorSpace.createDeviceRGB());\r\n    textLine1.getGState().setFillColor(new ColorPt(0, 0, 0));\r\n    textLine1.setPathFill(true);\r\n    \r\n    elementWriterLine1.writeElement(textLine1);\r\n    elementWriterLine1.writeElement(builder.createTextEnd()); // write out `ET` element","link":"https://stackoverflow.com/questions/77563890/discrepancy-in-pdf-rendering-between-browser-and-acrobat-pdf-viewer/77573113#77573113","title":"Discrepancy in PDF rendering between browser and Acrobat PDF viewer","body":"<p>The issue is that there is a relationship between ElementBuilder and the Element object it last created.</p>\n<blockquote>\n<p>every call to ElementBuilder.Create method destroys the Element currently associated with the builder and all previous Element pointers are invalidated.</p>\n</blockquote>\n<p><a href=\"https://docs.apryse.com/api/PDFTronSDK/java/com/pdftron/pdf/ElementBuilder.html#createTextBegin()\" rel=\"nofollow noreferrer\">https://docs.apryse.com/api/PDFTronSDK/java/com/pdftron/pdf/ElementBuilder.html#createTextBegin()</a></p>\n<p>So you can only be &quot;working&quot; on one Element at a time, while in your code you are trying to operate on two at the same time.</p>\n<p>The fix is to write out the beginText before building the textRun itself, and operate on the textRun GState object.</p>\n<p>Below is your updated code</p>\n<pre><code>Element tabElement = builder.createRect(x, y - 36, tabWidth, tabHeight);\ntabElement.setPathFill(true);\nGState gstate = tabElement.getGState();\ngstate.setFillColorSpace(ColorSpace.createDeviceRGB());\ngstate.setFillColor(new ColorPt(0.9, 0.9, 0.9));\nelementWriterLine1.writeElement(tabElement);\n\nElement tabTextElementLine1 = builder.createTextBegin(Font.createTrueTypeFont(outputPdfDoc, ARIAL, true), 8);\nelementWriterLine1.writeElement(tabTextElementLine1);\n\nElement textLine1 = builder.createTextRun(&quot;TEXT LINE 1&quot;);\nif(isLandscape) {\n    tabPosition = 4 - tabPosition;\n    textLine1.getGState().setTransform(1, 0, 0, 1, pageWidth - gap - (tabPosition * tabWidth) - (tabWidth/2 + textLine1.getTextLength()/2) ,  tabHeight-13 );\n} else {\n    textLine1.getGState().setTransform(0, -1, 1, 0, pageWidth - 13 , pageHeight - gap  - (tabPosition * tabHeight) - (tabHeight/2 - textLine1.getTextLength()/2) );\n}\ntextLine1.getGState().setFillColorSpace(ColorSpace.createDeviceRGB());\ntextLine1.getGState().setFillColor(new ColorPt(0, 0, 0));\ntextLine1.setPathFill(true);\n\nelementWriterLine1.writeElement(textLine1);\nelementWriterLine1.writeElement(builder.createTextEnd()); // write out `ET` element\n</code></pre>\n"}],"comment_count":2,"is_answered":true,"view_count":81,"answer_count":2,"score":0,"last_activity_date":1701276967,"creation_date":1701174681,"last_edit_date":1701175005,"question_id":77563890,"body_markdown":"I am encountering a situation where I open a PDF both in a web browser and in the Acrobat PDF viewer. In the browser, the PDF is displayed correctly, but in the PDF viewer, I get a different output file. I&#39;m trying to identify whether this discrepancy is related to an issue with the PDF file itself or if there are inherent differences between the PDF viewer and the browser rendering.\r\n\r\nHas anyone experienced a similar issue, and could you provide insights or suggestions on how to troubleshoot and resolve this? Additionally, are there known differences in how PDFs are rendered between web browsers and dedicated PDF viewers that might explain this behavior?\r\n\r\nEdge output:[![Browser View](https://i.stack.imgur.com/YUHWk.png)](https://i.stack.imgur.com/YUHWk.png)\r\n\r\nAdobe Acrobat Reader output: [![Adobe Viewer](https://i.stack.imgur.com/PTZRo.png)](https://i.stack.imgur.com/PTZRo.png)\r\n\r\nI am modifying pdf with pdftron and java 1.8\r\nCode for adding element and text in pdf:\r\n\r\n```\r\nElement tabElement = builder.createRect(x, y - 36, tabWidth, tabHeight);\r\n\t\t\ttabElement.setPathFill(true);\r\n\t\t\tGState gstate = tabElement.getGState();\r\n\t\t\tgstate.setFillColorSpace(ColorSpace.createDeviceRGB());\r\n\t\t\tgstate.setFillColor(new ColorPt(0.9, 0.9, 0.9));\r\n\t\t\telementWriterLine1.writeElement(tabElement);\r\n\r\n\t\t\tElement tabTextElementLine1 = builder.createTextBegin(Font.createTrueTypeFont(outputPdfDoc, ARIAL, true), 8);\r\n\t\t\tElement textLine1 = builder.createTextRun(&quot;TEXT LINE 1&quot;);\r\n\t\t\tif(isLandscape) {\r\n\t\t\t\ttabPosition = 4 - tabPosition;\r\n\t\t\t\ttabTextElementLine1.getGState().setTransform(1, 0, 0, 1, pageWidth - gap - (tabPosition * tabWidth) - (tabWidth/2 + textLine1.getTextLength()/2) ,  tabHeight-13 );\r\n\t\t\t} else {\r\n\t\t\t\ttabTextElementLine1.getGState().setTransform(0, -1, 1, 0, pageWidth - 13 , pageHeight - gap  - (tabPosition * tabHeight) - (tabHeight/2 - textLine1.getTextLength()/2) );\r\n\t\t\t}\r\n\t\t\ttabTextElementLine1.getGState().setFillColorSpace(ColorSpace.createDeviceRGB());\r\n\t\t\ttabTextElementLine1.getGState().setFillColor(new ColorPt(0, 0, 0));\r\n\t\t\ttabTextElementLine1.setPathFill(true);\r\n\t\t\telementWriterLine1.writeElement(tabTextElementLine1);\r\n```\r\n\r\n\r\nI shared pdf file among my colleagues, they are also facing same problem.","link":"https://stackoverflow.com/questions/77563890/discrepancy-in-pdf-rendering-between-browser-and-acrobat-pdf-viewer","title":"Discrepancy in PDF rendering between browser and Acrobat PDF viewer","body":"<p>I am encountering a situation where I open a PDF both in a web browser and in the Acrobat PDF viewer. In the browser, the PDF is displayed correctly, but in the PDF viewer, I get a different output file. I'm trying to identify whether this discrepancy is related to an issue with the PDF file itself or if there are inherent differences between the PDF viewer and the browser rendering.</p>\n<p>Has anyone experienced a similar issue, and could you provide insights or suggestions on how to troubleshoot and resolve this? Additionally, are there known differences in how PDFs are rendered between web browsers and dedicated PDF viewers that might explain this behavior?</p>\n<p>Edge output:<a href=\"https://i.stack.imgur.com/YUHWk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YUHWk.png\" alt=\"Browser View\" /></a></p>\n<p>Adobe Acrobat Reader output: <a href=\"https://i.stack.imgur.com/PTZRo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PTZRo.png\" alt=\"Adobe Viewer\" /></a></p>\n<p>I am modifying pdf with pdftron and java 1.8\nCode for adding element and text in pdf:</p>\n<pre><code>Element tabElement = builder.createRect(x, y - 36, tabWidth, tabHeight);\n            tabElement.setPathFill(true);\n            GState gstate = tabElement.getGState();\n            gstate.setFillColorSpace(ColorSpace.createDeviceRGB());\n            gstate.setFillColor(new ColorPt(0.9, 0.9, 0.9));\n            elementWriterLine1.writeElement(tabElement);\n\n            Element tabTextElementLine1 = builder.createTextBegin(Font.createTrueTypeFont(outputPdfDoc, ARIAL, true), 8);\n            Element textLine1 = builder.createTextRun(&quot;TEXT LINE 1&quot;);\n            if(isLandscape) {\n                tabPosition = 4 - tabPosition;\n                tabTextElementLine1.getGState().setTransform(1, 0, 0, 1, pageWidth - gap - (tabPosition * tabWidth) - (tabWidth/2 + textLine1.getTextLength()/2) ,  tabHeight-13 );\n            } else {\n                tabTextElementLine1.getGState().setTransform(0, -1, 1, 0, pageWidth - 13 , pageHeight - gap  - (tabPosition * tabHeight) - (tabHeight/2 - textLine1.getTextLength()/2) );\n            }\n            tabTextElementLine1.getGState().setFillColorSpace(ColorSpace.createDeviceRGB());\n            tabTextElementLine1.getGState().setFillColor(new ColorPt(0, 0, 0));\n            tabTextElementLine1.setPathFill(true);\n            elementWriterLine1.writeElement(tabTextElementLine1);\n</code></pre>\n<p>I shared pdf file among my colleagues, they are also facing same problem.</p>\n"},{"tags":["java","list","arraylist"],"comments":[{"score":1,"post_type":"question","creation_date":1701275248,"post_id":77572805,"comment_id":136756299,"body_markdown":"The official Java tutorial explains this fairly well:  https://docs.oracle.com/javase/tutorial/extra/generics/subtype.html","link":"https://stackoverflow.com/questions/77572805/question-about-lists-and-arraylists-and-more-specifically-about-casting#comment136756299_77572805","body":"The official Java tutorial explains this fairly well:  <a href=\"https://docs.oracle.com/javase/tutorial/extra/generics/subtype.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/extra/generics/subtype.html</a>"}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701276892,"creation_date":1701276892,"answer_id":77573105,"question_id":77572805,"body_markdown":"First 3 line was not compiled because in Java, generic types are not satisfied or covariant fro ensuring type safety which means that `List&lt;Intreger&gt;` is not count a sub type of `List&lt;Number&gt;`. lets describe line of given code \r\n\r\n **Don&#39;t Compile Line :**\r\n - `List&lt;Number&gt; ints = new ArrayList&lt;Integer&gt;();` : We can not assign a `List&lt;Integer&gt;` to a variable type of `List&lt;Number&gt;` because generics in java are not covariant.\r\n - `List&lt;Integer&gt; nums = new ArrayList&lt;Number&gt;();` : Same reason as first one ,we can&#39;t assign `List&lt;Number&gt;` to a variable type of `List&lt;Integer&gt;`\r\n - `List&lt;Object&gt;nums = new ArrayList&lt;Integer&gt;();` : Same reason as first one ,we can&#39;t assign `List&lt;Integer&gt;` to a variable type of `List&lt;Object&gt;`\r\n\r\n**Compiled Line :**\r\n\r\n - List&lt;? extends Number&gt; nums = new ArrayList&lt;Integer&gt;(); : This line work because in this line you use a wildcard with a upper bound  `? extends Number`. Upper bound wildcard allows you to accept any subtype of type `T`. That mean  `? extends Number` this accept `Integer`, `Double`, `Float` etc.   \r\n\r\n - List&lt;? super Number&gt; nums = new  ArrayList&lt;Object&gt;(); : \r\n - List&lt;? extends Number&gt; nums = new ArrayList&lt;Integer&gt;(); : This line work because in this line you use a wildcard with a lower bound `? extends Number`.Lower bound wildcard allows you to accept any super type of type `T`.\r\nThat mean  `? extends Number` this accept  `Number` and `Object`.\r\n","link":"https://stackoverflow.com/questions/77572805/question-about-lists-and-arraylists-and-more-specifically-about-casting/77573105#77573105","title":"Question about Lists and ArrayLists and more specifically about casting","body":"<p>First 3 line was not compiled because in Java, generic types are not satisfied or covariant fro ensuring type safety which means that <code>List&lt;Intreger&gt;</code> is not count a sub type of <code>List&lt;Number&gt;</code>. lets describe line of given code</p>\n<p><strong>Don't Compile Line :</strong></p>\n<ul>\n<li><code>List&lt;Number&gt; ints = new ArrayList&lt;Integer&gt;();</code> : We can not assign a <code>List&lt;Integer&gt;</code> to a variable type of <code>List&lt;Number&gt;</code> because generics in java are not covariant.</li>\n<li><code>List&lt;Integer&gt; nums = new ArrayList&lt;Number&gt;();</code> : Same reason as first one ,we can't assign <code>List&lt;Number&gt;</code> to a variable type of <code>List&lt;Integer&gt;</code></li>\n<li><code>List&lt;Object&gt;nums = new ArrayList&lt;Integer&gt;();</code> : Same reason as first one ,we can't assign <code>List&lt;Integer&gt;</code> to a variable type of <code>List&lt;Object&gt;</code></li>\n</ul>\n<p><strong>Compiled Line :</strong></p>\n<ul>\n<li><p>List&lt;? extends Number&gt; nums = new ArrayList(); : This line work because in this line you use a wildcard with a upper bound  <code>? extends Number</code>. Upper bound wildcard allows you to accept any subtype of type <code>T</code>. That mean  <code>? extends Number</code> this accept <code>Integer</code>, <code>Double</code>, <code>Float</code> etc.</p>\n</li>\n<li><p>List&lt;? super Number&gt; nums = new  ArrayList(); :</p>\n</li>\n<li><p>List&lt;? extends Number&gt; nums = new ArrayList(); : This line work because in this line you use a wildcard with a lower bound <code>? extends Number</code>.Lower bound wildcard allows you to accept any super type of type <code>T</code>.\nThat mean  <code>? extends Number</code> this accept  <code>Number</code> and <code>Object</code>.</p>\n</li>\n</ul>\n"}],"comment_count":1,"is_answered":true,"view_count":49,"answer_count":1,"score":-1,"last_activity_date":1701276892,"creation_date":1701274204,"question_id":77572805,"body_markdown":"Why first three lines didn&#39;t compile and the remaining 2 did? How exactly does this work?\r\n\r\n```\r\nimport java.util.*;\r\nclass HelloWorld {\r\n    public static void main(String[] args) {\r\n        //List&lt;Number&gt; ints = new ArrayList&lt;Integer&gt;(); DIDN&#39;T compile\r\n        //List&lt;Integer&gt; nums = new ArrayList&lt;Number&gt;(); DIDN&#39;T compile\r\n        //List&lt;Object&gt;nums = new ArrayList&lt;Integer&gt;();  DIDN&#39;T compile\r\n        //List&lt;? extends Number&gt; nums = new ArrayList&lt;Integer&gt;(); compiled\r\n        //List&lt;? super Number&gt; nums = new  ArrayList&lt;Object&gt;(); compiled\r\n    }\r\n}`\r\n```","link":"https://stackoverflow.com/questions/77572805/question-about-lists-and-arraylists-and-more-specifically-about-casting","title":"Question about Lists and ArrayLists and more specifically about casting","body":"<p>Why first three lines didn't compile and the remaining 2 did? How exactly does this work?</p>\n<pre><code>import java.util.*;\nclass HelloWorld {\n    public static void main(String[] args) {\n        //List&lt;Number&gt; ints = new ArrayList&lt;Integer&gt;(); DIDN'T compile\n        //List&lt;Integer&gt; nums = new ArrayList&lt;Number&gt;(); DIDN'T compile\n        //List&lt;Object&gt;nums = new ArrayList&lt;Integer&gt;();  DIDN'T compile\n        //List&lt;? extends Number&gt; nums = new ArrayList&lt;Integer&gt;(); compiled\n        //List&lt;? super Number&gt; nums = new  ArrayList&lt;Object&gt;(); compiled\n    }\n}`\n</code></pre>\n"},{"tags":["java","deployment","websphere","ibm-rad"],"comments":[{"score":0,"post_type":"question","creation_date":1701259397,"post_id":77565132,"comment_id":136752922,"body_markdown":"Are you importing Eclipse project metadata (.project, .settings dir, etc.) committed to the repo?   Is the C:\\Path_to_Application\\xxx_w1_MyApplication\\MyApplicationEAR\\MyApplicationEAR.ear path is the path of your project in your RAD workspace?  Maybe you could share  your publishing settings (run resources on workspace, OR server).","link":"https://stackoverflow.com/questions/77565132/why-does-websphere-search-for-a-non-existing-ear-file-and-fails-to-publish-an-ap#comment136752922_77565132","body":"Are you importing Eclipse project metadata (.project, .settings dir, etc.) committed to the repo?   Is the C:\\Path_to_Application\\xxx_w1_MyApplication\\MyApplicationEAR&zwnj;&#8203;\\MyApplicationEAR.ea&zwnj;&#8203;r path is the path of your project in your RAD workspace?  Maybe you could share  your publishing settings (run resources on workspace, OR server)."},{"score":0,"post_type":"question","creation_date":1701271486,"post_id":77565132,"comment_id":136755494,"body_markdown":"The file .project comes from the repo, while .settings dir is included into .gitignore.\nEDIT: not exactly, the path shown in the console error message is the path of the local git repository for the EAR project, the project within RAD&#39;s workspace points to that source folder. I don&#39;t understand your last statement, sorry. What publishing settings might be useful and how shall I display them?","link":"https://stackoverflow.com/questions/77565132/why-does-websphere-search-for-a-non-existing-ear-file-and-fails-to-publish-an-ap#comment136755494_77565132","body":"The file .project comes from the repo, while .settings dir is included into .gitignore. EDIT: not exactly, the path shown in the console error message is the path of the local git repository for the EAR project, the project within RAD&#39;s workspace points to that source folder. I don&#39;t understand your last statement, sorry. What publishing settings might be useful and how shall I display them?"},{"score":0,"post_type":"question","creation_date":1701274363,"post_id":77565132,"comment_id":136756112,"body_markdown":"To see the publishing settings double-click on the **Servers** view entry like the upper-righthand side of this:  https://gist.github.com/scottkurz/c0cca3ee5d0e20de125d145274cdd966","link":"https://stackoverflow.com/questions/77565132/why-does-websphere-search-for-a-non-existing-ear-file-and-fails-to-publish-an-ap#comment136756112_77565132","body":"To see the publishing settings double-click on the <b>Servers</b> view entry like the upper-righthand side of this:  <a href=\"https://gist.github.com/scottkurz/c0cca3ee5d0e20de125d145274cdd966\" rel=\"nofollow noreferrer\">gist.github.com/scottkurz/c0cca3ee5d0e20de125d145274cdd966</a>"},{"score":0,"post_type":"question","creation_date":1701276644,"post_id":77565132,"comment_id":136756611,"body_markdown":"I edited my question, sorry about the different language","link":"https://stackoverflow.com/questions/77565132/why-does-websphere-search-for-a-non-existing-ear-file-and-fails-to-publish-an-ap#comment136756611_77565132","body":"I edited my question, sorry about the different language"},{"score":0,"post_type":"question","creation_date":1701277272,"post_id":77565132,"comment_id":136756728,"body_markdown":"No problem.  So it looks like it&#39;s &quot;run server with resources within the workspace&quot;.   Are there any related entries in &quot;Problems&quot; or the &quot;Error Log&quot; views?  Is everything compiling/building/validating successfully?","link":"https://stackoverflow.com/questions/77565132/why-does-websphere-search-for-a-non-existing-ear-file-and-fails-to-publish-an-ap#comment136756728_77565132","body":"No problem.  So it looks like it&#39;s &quot;run server with resources within the workspace&quot;.   Are there any related entries in &quot;Problems&quot; or the &quot;Error Log&quot; views?  Is everything compiling/building/validating successfully?"},{"score":0,"post_type":"question","creation_date":1701279577,"post_id":77565132,"comment_id":136757148,"body_markdown":"I see no errors in the &quot;Problems&quot; tab, only a number of warnings. No errors are shown in the log/console either, but the FileNotFoundException","link":"https://stackoverflow.com/questions/77565132/why-does-websphere-search-for-a-non-existing-ear-file-and-fails-to-publish-an-ap#comment136757148_77565132","body":"I see no errors in the &quot;Problems&quot; tab, only a number of warnings. No errors are shown in the log/console either, but the FileNotFoundException"},{"score":0,"post_type":"question","creation_date":1701283810,"post_id":77565132,"comment_id":136757801,"body_markdown":"I know enough to keep asking questions and for you to try things but not enough to simply diagnose the problem.   If you can you should try RAD support.  Since StackOverflow is telling me the comment thread is too long let me point you to our WAS forum if you want to chat more there:   https://community.ibm.com/community/user/wasdevops/communities/community-home/digestviewer?communitykey=5c4ba155-561a-4794-9883-bb0c6164e14e","link":"https://stackoverflow.com/questions/77565132/why-does-websphere-search-for-a-non-existing-ear-file-and-fails-to-publish-an-ap#comment136757801_77565132","body":"I know enough to keep asking questions and for you to try things but not enough to simply diagnose the problem.   If you can you should try RAD support.  Since StackOverflow is telling me the comment thread is too long let me point you to our WAS forum if you want to chat more there:   <a href=\"https://community.ibm.com/community/user/wasdevops/communities/community-home/digestviewer?communitykey=5c4ba155-561a-4794-9883-bb0c6164e14e\" rel=\"nofollow noreferrer\">community.ibm.com/community/user/wasdevops/communities/&hellip;</a>"}],"comment_count":7,"is_answered":false,"view_count":63,"answer_count":0,"score":1,"last_activity_date":1701276587,"creation_date":1701185391,"last_edit_date":1701276587,"question_id":77565132,"body_markdown":"I&#39;m maintaining a legacy Enterprise Application which unfortunately runs on IBM WebSphere Application Server v. 7.0.0.45. The IDE is IBM RAD and the application consists of two projects: the first one is the web module and the second one the EAR container. The latter actually contains the deployment descriptor (application.xml), so no .EAR file is really generated on the file system within the EAR project.\r\n\r\nThe issue I&#39;m having is that whenever I make any change in the web app and then save the source file, RAD first rebuilds the web app and then tries to re-publish the .EAR file to WAS, but the deployment always fails with the error: &quot;Failed to open C:/Path_to_Application/xxx_w1_MyApplication/MyApplicationEAR/MyApplicationEAR.ear&quot;.\r\n\r\n    [28/11/23 11.06.58:301 CET] 0000001c CompositionUn E   WSVR0194E: Composition unit WebSphere:cuname=MyApplicationEAR in BLA WebSphere:blaname=MyApplicationEAR failed to start.\r\n    [28/11/23 11.06.58:703 CET] 0000001c StartDeployme W   Start failed.  ApplicationManager MBean: WebSphere:name=ApplicationManager,process=server1,platform=proxy,node=MYUSERNode03,version=7.0.0.45,type=ApplicationManager,mbeanIdentifier=ApplicationManager,cell=MYUSERNode03Cell,spec=1.0, operation: startApplication, params: [MyApplicationEAR]\r\n    [28/11/23 11.06.58:825 CET] 0000001c AppBinaryProc I   ADMA7021I: Distribution of application MyApplicationEAR completed successfully.\r\n    [28/11/23 11.06.58:701 CET] 0000001c FfdcProvider  W com.ibm.ws.ffdc.impl.FfdcProvider logIncident FFDC1003I: FFDC Incident emitted on C:\\Program Files (x86)\\IBM\\SDP\\runtimes\\base_v7\\profiles\\AppSrv03\\logs\\ffdc\\server1_5a085a08_23.11.28_11.06.58.3265338834176421115024.txt com.ibm.ws.management.AdminServiceImpl.invoke 679\r\n    [28/11/23 11.06.58:812 CET] 0000001c FfdcProvider  W com.ibm.ws.ffdc.impl.FfdcProvider logIncident FFDC1003I: FFDC Incident emitted on C:\\Program Files (x86)\\IBM\\SDP\\runtimes\\base_v7\\profiles\\AppSrv03\\logs\\ffdc\\server1_5a085a08_23.11.28_11.06.58.7225642279798212295583.txt com.ibm.ws.management.application.sync.StartDeploymentTask.startDeployment 256\r\n    [28/11/23 11.06.58:856 CET] 0000001c FileRepositor A   ADMR0009I: Document cells/MYUSERNode03Cell/applications/MyApplicationEAR.ear/deltas/MyApplicationEAR/delta-1701166016643 is created.\r\n    [28/11/23 11.06.58:864 CET] 00000005 TreeBuilder   W   ODCF0002E: Exception: IWAE0037E Could not open C:/Path_to_Application/xxx_w1_MyApplication/MyApplicationEAR/MyApplicationEAR.ear.\r\n    [28/11/23 11.06.58:871 CET] 0000001c FileRepositor A   ADMR0010I: Document cells/MYUSERNode03Cell/applications/MyApplicationEAR.ear/deployments/MyApplicationEAR/META-INF/ibm-application-runtime.props is modified.\r\n    [28/11/23 11.06.58:877 CET] 0000001c FileRepositor A   ADMR0010I: Document cells/MYUSERNode03Cell/applications/MyApplicationEAR.ear/deployments/MyApplicationEAR/deployment.xml is modified.\r\n    [28/11/23 11.06.59:141 CET] 00000005 FfdcProvider  W com.ibm.ws.ffdc.impl.FfdcProvider logIncident FFDC1003I: FFDC Incident emitted on C:\\Program Files (x86)\\IBM\\SDP\\runtimes\\base_v7\\profiles\\AppSrv03\\logs\\ffdc\\server1_552f552f_23.11.28_11.06.58.8782013313554722235215.txt com.ibm.ws.odc.cell.TreeBuilder Removing: /cell/MYUSERNode03Cell/application/MyApplicationEAR&lt;&lt;com.ibm.ws.odc.ODCNodeImpl@1cf21cf2&gt;&gt;\r\n    [28/11/23 11.07.14:292 CET] 00000016 AdminHelper   A   ADMN1009I: An attempt is made to start the MyApplicationEAR application.\r\n    [28/11/23 11.07.14:533 CET] 00000016 CompositionUn A   WSVR0190I: Starting composition unit WebSphere:cuname=MyApplicationEAR in BLA WebSphere:blaname=MyApplicationEAR.\r\n    [28/11/23 11.07.14:560 CET] 00000016 ApplicationMg W   WSVR0100W: An error occurred initializing, MyApplicationEAR\r\n    com.ibm.ws.exception.ConfigurationWarning: Failed to open C:/Path_to_Application/xxx_w1_MyApplication/MyApplicationEAR/MyApplicationEAR.ear\r\n    \tat com.ibm.ws.runtime.component.DeployedApplicationImpl.initialize(DeployedApplicationImpl.java:580)\r\n    \tat com.ibm.ws.runtime.component.DeployedApplicationImpl.initialize(DeployedApplicationImpl.java:420)\r\n    \tat com.ibm.ws.runtime.component.ApplicationMgrImpl.initializeApplication(ApplicationMgrImpl.java:385)\r\n    \tat com.ibm.ws.runtime.component.ApplicationMgrImpl.start(ApplicationMgrImpl.java:2073)\r\n    \tat com.ibm.ws.runtime.component.CompositionUnitMgrImpl.start(CompositionUnitMgrImpl.java:434)\r\n    \tat com.ibm.ws.runtime.component.CompositionUnitImpl.start(CompositionUnitImpl.java:123)\r\n    \tat com.ibm.ws.runtime.component.CompositionUnitMgrImpl.start(CompositionUnitMgrImpl.java:377)\r\n    \tat com.ibm.ws.runtime.component.CompositionUnitMgrImpl.startCompositionUnit(CompositionUnitMgrImpl.java:648)\r\n    \tat com.ibm.ws.runtime.component.CompositionUnitMgrImpl.startCompositionUnit(CompositionUnitMgrImpl.java:610)\r\n    \tat com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplication(ApplicationMgrImpl.java:1203)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:611)\r\n    \tat sun.reflect.misc.Trampoline.invoke(MethodUtil.java:69)\r\n    \tat sun.reflect.GeneratedMethodAccessor12.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:611)\r\n    \tat sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:272)\r\n    \tat javax.management.modelmbean.RequiredModelMBean$4.run(RequiredModelMBean.java:1152)\r\n    \tat java.security.AccessController.doPrivileged(AccessController.java:384)\r\n    \tat com.ibm.oti.security.CheckedAccessControlContext.securityCheck(CheckedAccessControlContext.java:30)\r\n    \tat sun.misc.JavaSecurityAccessWrapper.doIntersectionPrivilege(JavaSecurityAccessWrapper.java:41)\r\n    \tat javax.management.modelmbean.RequiredModelMBean.invokeMethod(RequiredModelMBean.java:1146)\r\n    \tat javax.management.modelmbean.RequiredModelMBean.invoke(RequiredModelMBean.java:999)\r\n    \tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:847)\r\n    \tat com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:783)\r\n    \tat com.ibm.ws.management.AdminServiceImpl$1.run(AdminServiceImpl.java:1346)\r\n    \tat com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:118)\r\n    \tat com.ibm.ws.management.AdminServiceImpl.invoke(AdminServiceImpl.java:1239)\r\n    \tat com.ibm.ws.management.connector.AdminServiceDelegator.invoke(AdminServiceDelegator.java:181)\r\n    \tat com.ibm.ws.management.connector.ipc.CallRouter.route(CallRouter.java:242)\r\n    \tat com.ibm.ws.management.connector.ipc.IPCConnectorInboundLink.doWork(IPCConnectorInboundLink.java:353)\r\n    \tat com.ibm.ws.management.connector.ipc.IPCConnectorInboundLink$IPCConnectorReadCallback.complete(IPCConnectorInboundLink.java:595)\r\n    \tat com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:175)\r\n    \tat com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)\r\n    \tat com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)\r\n    \tat com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)\r\n    \tat com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)\r\n    \tat com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)\r\n    \tat com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)\r\n    \tat com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1662)\r\n    Caused by: org.eclipse.jst.j2ee.commonarchivecore.internal.exception.OpenFailureException: IWAE0037E Could not open C:/Path_to_Application/xxx_w1_MyApplication/MyApplicationEAR/MyApplicationEAR.ear\r\n    \tat org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.primOpenArchive(CommonarchiveFactoryImpl.java:1625)\r\n    \tat org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.openEARFile(CommonarchiveFactoryImpl.java:1204)\r\n    \tat com.ibm.etools.commonarchive.impl.CommonarchiveFactoryImpl.openEARFile(CommonarchiveFactoryImpl.java:612)\r\n    \tat com.ibm.ws.runtime.component.DeployedApplicationImpl$MappableContentsArchive.open(DeployedApplicationImpl.java:1707)\r\n    \tat com.ibm.ws.runtime.component.DeployedApplicationImpl.initialize(DeployedApplicationImpl.java:577)\r\n    \t... 41 more\r\n    Caused by: java.io.FileNotFoundException: IWAE0036E URI Name: C:/Path_to_Application/xxx_w1_MyApplication/MyApplicationEAR/MyApplicationEAR.ear; File name: C:\\Path_to_Application\\xxx_w1_MyApplication\\MyApplicationEAR\\MyApplicationEAR.ear\r\n    \tat org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.createLoadStrategy(CommonarchiveFactoryImpl.java:514)\r\n    \tat org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.primOpenArchive(CommonarchiveFactoryImpl.java:1619)\r\n    \t... 45 more\r\n\r\nBoth projects were imported from our customer&#39;s repository as they are. The application is expected to be successfully redeployed locally, after each change in the source code.\r\n\r\nWhy is WAS searching for a non existing .EAR file within the project folder and how can I fix this issue?\r\nAny help would be highly appreciated.\r\n\r\nEDIT: enclosing a screenshot of publishing settings\r\n[![publishing settings][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ALtfh.png","link":"https://stackoverflow.com/questions/77565132/why-does-websphere-search-for-a-non-existing-ear-file-and-fails-to-publish-an-ap","title":"Why does WebSphere search for a non existing EAR file and fails to publish an Application?","body":"<p>I'm maintaining a legacy Enterprise Application which unfortunately runs on IBM WebSphere Application Server v. 7.0.0.45. The IDE is IBM RAD and the application consists of two projects: the first one is the web module and the second one the EAR container. The latter actually contains the deployment descriptor (application.xml), so no .EAR file is really generated on the file system within the EAR project.</p>\n<p>The issue I'm having is that whenever I make any change in the web app and then save the source file, RAD first rebuilds the web app and then tries to re-publish the .EAR file to WAS, but the deployment always fails with the error: &quot;Failed to open C:/Path_to_Application/xxx_w1_MyApplication/MyApplicationEAR/MyApplicationEAR.ear&quot;.</p>\n<pre><code>[28/11/23 11.06.58:301 CET] 0000001c CompositionUn E   WSVR0194E: Composition unit WebSphere:cuname=MyApplicationEAR in BLA WebSphere:blaname=MyApplicationEAR failed to start.\n[28/11/23 11.06.58:703 CET] 0000001c StartDeployme W   Start failed.  ApplicationManager MBean: WebSphere:name=ApplicationManager,process=server1,platform=proxy,node=MYUSERNode03,version=7.0.0.45,type=ApplicationManager,mbeanIdentifier=ApplicationManager,cell=MYUSERNode03Cell,spec=1.0, operation: startApplication, params: [MyApplicationEAR]\n[28/11/23 11.06.58:825 CET] 0000001c AppBinaryProc I   ADMA7021I: Distribution of application MyApplicationEAR completed successfully.\n[28/11/23 11.06.58:701 CET] 0000001c FfdcProvider  W com.ibm.ws.ffdc.impl.FfdcProvider logIncident FFDC1003I: FFDC Incident emitted on C:\\Program Files (x86)\\IBM\\SDP\\runtimes\\base_v7\\profiles\\AppSrv03\\logs\\ffdc\\server1_5a085a08_23.11.28_11.06.58.3265338834176421115024.txt com.ibm.ws.management.AdminServiceImpl.invoke 679\n[28/11/23 11.06.58:812 CET] 0000001c FfdcProvider  W com.ibm.ws.ffdc.impl.FfdcProvider logIncident FFDC1003I: FFDC Incident emitted on C:\\Program Files (x86)\\IBM\\SDP\\runtimes\\base_v7\\profiles\\AppSrv03\\logs\\ffdc\\server1_5a085a08_23.11.28_11.06.58.7225642279798212295583.txt com.ibm.ws.management.application.sync.StartDeploymentTask.startDeployment 256\n[28/11/23 11.06.58:856 CET] 0000001c FileRepositor A   ADMR0009I: Document cells/MYUSERNode03Cell/applications/MyApplicationEAR.ear/deltas/MyApplicationEAR/delta-1701166016643 is created.\n[28/11/23 11.06.58:864 CET] 00000005 TreeBuilder   W   ODCF0002E: Exception: IWAE0037E Could not open C:/Path_to_Application/xxx_w1_MyApplication/MyApplicationEAR/MyApplicationEAR.ear.\n[28/11/23 11.06.58:871 CET] 0000001c FileRepositor A   ADMR0010I: Document cells/MYUSERNode03Cell/applications/MyApplicationEAR.ear/deployments/MyApplicationEAR/META-INF/ibm-application-runtime.props is modified.\n[28/11/23 11.06.58:877 CET] 0000001c FileRepositor A   ADMR0010I: Document cells/MYUSERNode03Cell/applications/MyApplicationEAR.ear/deployments/MyApplicationEAR/deployment.xml is modified.\n[28/11/23 11.06.59:141 CET] 00000005 FfdcProvider  W com.ibm.ws.ffdc.impl.FfdcProvider logIncident FFDC1003I: FFDC Incident emitted on C:\\Program Files (x86)\\IBM\\SDP\\runtimes\\base_v7\\profiles\\AppSrv03\\logs\\ffdc\\server1_552f552f_23.11.28_11.06.58.8782013313554722235215.txt com.ibm.ws.odc.cell.TreeBuilder Removing: /cell/MYUSERNode03Cell/application/MyApplicationEAR&lt;&lt;com.ibm.ws.odc.ODCNodeImpl@1cf21cf2&gt;&gt;\n[28/11/23 11.07.14:292 CET] 00000016 AdminHelper   A   ADMN1009I: An attempt is made to start the MyApplicationEAR application.\n[28/11/23 11.07.14:533 CET] 00000016 CompositionUn A   WSVR0190I: Starting composition unit WebSphere:cuname=MyApplicationEAR in BLA WebSphere:blaname=MyApplicationEAR.\n[28/11/23 11.07.14:560 CET] 00000016 ApplicationMg W   WSVR0100W: An error occurred initializing, MyApplicationEAR\ncom.ibm.ws.exception.ConfigurationWarning: Failed to open C:/Path_to_Application/xxx_w1_MyApplication/MyApplicationEAR/MyApplicationEAR.ear\n    at com.ibm.ws.runtime.component.DeployedApplicationImpl.initialize(DeployedApplicationImpl.java:580)\n    at com.ibm.ws.runtime.component.DeployedApplicationImpl.initialize(DeployedApplicationImpl.java:420)\n    at com.ibm.ws.runtime.component.ApplicationMgrImpl.initializeApplication(ApplicationMgrImpl.java:385)\n    at com.ibm.ws.runtime.component.ApplicationMgrImpl.start(ApplicationMgrImpl.java:2073)\n    at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.start(CompositionUnitMgrImpl.java:434)\n    at com.ibm.ws.runtime.component.CompositionUnitImpl.start(CompositionUnitImpl.java:123)\n    at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.start(CompositionUnitMgrImpl.java:377)\n    at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.startCompositionUnit(CompositionUnitMgrImpl.java:648)\n    at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.startCompositionUnit(CompositionUnitMgrImpl.java:610)\n    at com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplication(ApplicationMgrImpl.java:1203)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\n    at java.lang.reflect.Method.invoke(Method.java:611)\n    at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:69)\n    at sun.reflect.GeneratedMethodAccessor12.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\n    at java.lang.reflect.Method.invoke(Method.java:611)\n    at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:272)\n    at javax.management.modelmbean.RequiredModelMBean$4.run(RequiredModelMBean.java:1152)\n    at java.security.AccessController.doPrivileged(AccessController.java:384)\n    at com.ibm.oti.security.CheckedAccessControlContext.securityCheck(CheckedAccessControlContext.java:30)\n    at sun.misc.JavaSecurityAccessWrapper.doIntersectionPrivilege(JavaSecurityAccessWrapper.java:41)\n    at javax.management.modelmbean.RequiredModelMBean.invokeMethod(RequiredModelMBean.java:1146)\n    at javax.management.modelmbean.RequiredModelMBean.invoke(RequiredModelMBean.java:999)\n    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:847)\n    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:783)\n    at com.ibm.ws.management.AdminServiceImpl$1.run(AdminServiceImpl.java:1346)\n    at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:118)\n    at com.ibm.ws.management.AdminServiceImpl.invoke(AdminServiceImpl.java:1239)\n    at com.ibm.ws.management.connector.AdminServiceDelegator.invoke(AdminServiceDelegator.java:181)\n    at com.ibm.ws.management.connector.ipc.CallRouter.route(CallRouter.java:242)\n    at com.ibm.ws.management.connector.ipc.IPCConnectorInboundLink.doWork(IPCConnectorInboundLink.java:353)\n    at com.ibm.ws.management.connector.ipc.IPCConnectorInboundLink$IPCConnectorReadCallback.complete(IPCConnectorInboundLink.java:595)\n    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:175)\n    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)\n    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)\n    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)\n    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)\n    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)\n    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)\n    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1662)\nCaused by: org.eclipse.jst.j2ee.commonarchivecore.internal.exception.OpenFailureException: IWAE0037E Could not open C:/Path_to_Application/xxx_w1_MyApplication/MyApplicationEAR/MyApplicationEAR.ear\n    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.primOpenArchive(CommonarchiveFactoryImpl.java:1625)\n    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.openEARFile(CommonarchiveFactoryImpl.java:1204)\n    at com.ibm.etools.commonarchive.impl.CommonarchiveFactoryImpl.openEARFile(CommonarchiveFactoryImpl.java:612)\n    at com.ibm.ws.runtime.component.DeployedApplicationImpl$MappableContentsArchive.open(DeployedApplicationImpl.java:1707)\n    at com.ibm.ws.runtime.component.DeployedApplicationImpl.initialize(DeployedApplicationImpl.java:577)\n    ... 41 more\nCaused by: java.io.FileNotFoundException: IWAE0036E URI Name: C:/Path_to_Application/xxx_w1_MyApplication/MyApplicationEAR/MyApplicationEAR.ear; File name: C:\\Path_to_Application\\xxx_w1_MyApplication\\MyApplicationEAR\\MyApplicationEAR.ear\n    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.createLoadStrategy(CommonarchiveFactoryImpl.java:514)\n    at org.eclipse.jst.j2ee.commonarchivecore.internal.impl.CommonarchiveFactoryImpl.primOpenArchive(CommonarchiveFactoryImpl.java:1619)\n    ... 45 more\n</code></pre>\n<p>Both projects were imported from our customer's repository as they are. The application is expected to be successfully redeployed locally, after each change in the source code.</p>\n<p>Why is WAS searching for a non existing .EAR file within the project folder and how can I fix this issue?\nAny help would be highly appreciated.</p>\n<p>EDIT: enclosing a screenshot of publishing settings\n<a href=\"https://i.stack.imgur.com/ALtfh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ALtfh.png\" alt=\"publishing settings\" /></a></p>\n"},{"tags":["java","string","java.util.scanner","maxlength"],"comments":[{"score":0,"post_type":"question","creation_date":1701162951,"post_id":77562561,"comment_id":136738152,"body_markdown":"&quot;Cheaper&quot; in what practical sense? How likely is it that any user will copy/paste war and peace? If you have code which already works, have you consider the cost of more complex code (both writing and maintaining) vs any actual benefit?","link":"https://stackoverflow.com/questions/77562561/scanning-the-next-line-but-only-to-a-certain-length#comment136738152_77562561","body":"&quot;Cheaper&quot; in what practical sense? How likely is it that any user will copy/paste war and peace? If you have code which already works, have you consider the cost of more complex code (both writing and maintaining) vs any actual benefit?"},{"score":0,"post_type":"question","creation_date":1701165361,"post_id":77562561,"comment_id":136738635,"body_markdown":"`nextLinet().substring(0, 99)` no?","link":"https://stackoverflow.com/questions/77562561/scanning-the-next-line-but-only-to-a-certain-length#comment136738635_77562561","body":"<code>nextLinet().substring(0, 99)</code> no?"},{"score":0,"post_type":"question","creation_date":1701169249,"post_id":77562561,"comment_id":136739327,"body_markdown":"Jon, I cannot consider something that I do not know, how can I consider the complexity of a code if I don&#39;t know if it even exists. I&#39;m learning this programming language,  so for all I know, this could be done very easily. I asked for an alternative for my code, once I have one, sure I will consider if using it is actually worth it or not. Also this is a coding exercise the likelyhood of any user typing in anything at all, other than me for testing is 0. Our user in this case is hypothetical and War and Peace is obviously just an exaggeration, but I would still like an answear.","link":"https://stackoverflow.com/questions/77562561/scanning-the-next-line-but-only-to-a-certain-length#comment136739327_77562561","body":"Jon, I cannot consider something that I do not know, how can I consider the complexity of a code if I don&#39;t know if it even exists. I&#39;m learning this programming language,  so for all I know, this could be done very easily. I asked for an alternative for my code, once I have one, sure I will consider if using it is actually worth it or not. Also this is a coding exercise the likelyhood of any user typing in anything at all, other than me for testing is 0. Our user in this case is hypothetical and War and Peace is obviously just an exaggeration, but I would still like an answear."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701166460,"post_id":77562847,"comment_id":136738823,"body_markdown":"While this is unlikely to occur in practice, as per spec this isn&#39;t guaranteed - `read(buffer)` does not promise it&#39;ll fetch all 99. Also, the exception handling is bad (just make `main` `throws Exception` - less code, cleaner stack traces, it&#39;s win-win). This also reads potentially _the next_ line, which clearly wasn&#39;t intended.","link":"https://stackoverflow.com/questions/77562561/scanning-the-next-line-but-only-to-a-certain-length/77562847#comment136738823_77562847","body":"While this is unlikely to occur in practice, as per spec this isn&#39;t guaranteed - <code>read(buffer)</code> does not promise it&#39;ll fetch all 99. Also, the exception handling is bad (just make <code>main</code> <code>throws Exception</code> - less code, cleaner stack traces, it&#39;s win-win). This also reads potentially <i>the next</i> line, which clearly wasn&#39;t intended."}],"comment_count":1,"score":-1,"last_activity_date":1701165163,"creation_date":1701165163,"answer_id":77562847,"question_id":77562561,"body_markdown":"You can do it using [Reader#read](https://docs.oracle.com/javase/8/docs/api/java/io/Reader.html#read-char:A-) method. Here is an example using `BufferedReader`.\r\n```java\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        // Create a buffered reader for System.in\r\n        try (BufferedReader br = new BufferedReader(new InputStreamReader(System.in))) {\r\n            char[] buffer = new char[99]; // Define the buffer of appropriate size\r\n            System.out.print(&quot;Enter text: &quot;);\r\n            int n = br.read(buffer); // Read user input in the buffer,\r\n                                    // n denotes number of characters read \r\n            String input = new String(buffer, 0, n); // Create string upto n character\r\n            System.out.println(input);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\nThe buffer would also contain the newline character if input is less than buffer size. You might want to strip it.","link":"https://stackoverflow.com/questions/77562561/scanning-the-next-line-but-only-to-a-certain-length/77562847#77562847","title":"Scanning the next line, but only to a certain length","body":"<p>You can do it using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/Reader.html#read-char:A-\" rel=\"nofollow noreferrer\">Reader#read</a> method. Here is an example using <code>BufferedReader</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Create a buffered reader for System.in\n        try (BufferedReader br = new BufferedReader(new InputStreamReader(System.in))) {\n            char[] buffer = new char[99]; // Define the buffer of appropriate size\n            System.out.print(&quot;Enter text: &quot;);\n            int n = br.read(buffer); // Read user input in the buffer,\n                                    // n denotes number of characters read \n            String input = new String(buffer, 0, n); // Create string upto n character\n            System.out.println(input);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>The buffer would also contain the newline character if input is less than buffer size. You might want to strip it.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701276574,"last_edit_date":1701276574,"creation_date":1701207138,"answer_id":77567253,"question_id":77562561,"body_markdown":"&gt; _&quot;... I have an existing code, where I have to scan the next sentence that the user types into the console. This sentence can be no longer than 99 characters. ...&quot;_\r\n\r\nThis answer is similar to _@RifatRubayatulIslam_&#39;s answer.\r\n\r\nUtilize the _[read](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/Reader.html#read(char[]))_ method, providing a _char_ array with a length of _99_.\\\r\nThe _new-line delimiter_ will be included here, you can use _[String#trim](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html#trim())_, or _[String#stripTrailing](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html#stripTrailing())_, to remove it.\r\n\r\n```java\r\ntry (Reader r = new InputStreamReader(System.in)) {\r\n    char[] a = new char[99];\r\n    int n = r.read(a);\r\n    String s = new String(a, 0, n).stripTrailing();\r\n}\r\n```","link":"https://stackoverflow.com/questions/77562561/scanning-the-next-line-but-only-to-a-certain-length/77567253#77567253","title":"Scanning the next line, but only to a certain length","body":"<blockquote>\n<p><em>&quot;... I have an existing code, where I have to scan the next sentence that the user types into the console. This sentence can be no longer than 99 characters. ...&quot;</em></p>\n</blockquote>\n<p>This answer is similar to <em>@RifatRubayatulIslam</em>'s answer.</p>\n<p>Utilize the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/Reader.html#read(char%5B%5D)\" rel=\"nofollow noreferrer\">read</a></em> method, providing a <em>char</em> array with a length of <em>99</em>.<br />\nThe <em>new-line delimiter</em> will be included here, you can use <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html#trim()\" rel=\"nofollow noreferrer\">String#trim</a></em>, or <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html#stripTrailing()\" rel=\"nofollow noreferrer\">String#stripTrailing</a></em>, to remove it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (Reader r = new InputStreamReader(System.in)) {\n    char[] a = new char[99];\n    int n = r.read(a);\n    String s = new String(a, 0, n).stripTrailing();\n}\n</code></pre>\n"}],"comment_count":3,"is_answered":false,"view_count":52,"answer_count":2,"score":-1,"last_activity_date":1701276574,"creation_date":1701162807,"last_edit_date":1701163282,"question_id":77562561,"body_markdown":"I have an existing code, where I have to scan the next sentence that the user types into the console. This sentence can be no longer than 99 characters. My current code takes the `.nextLine()` method, and saves whatever was typed, in a String. Than it checks the length of that String, if it&#39;s above 99, I use the `.substring(0,99)` method to cut off the excess. This works just fine, but I find it really ugly.\r\n\r\nThe problem is that if, let&#39;s say, a user would decide to copy-paste both volumes of Lev Tolstojs *War and Peace* into the console, my program would first try to save that as a String for no reason whatsoever, as I only need the first 99 characters. The question arises: Is there a way to tell the scanner to stop scanning after a certain number of characters? It would be cheaper, than scanning everything and than only using the part I need.","link":"https://stackoverflow.com/questions/77562561/scanning-the-next-line-but-only-to-a-certain-length","title":"Scanning the next line, but only to a certain length","body":"<p>I have an existing code, where I have to scan the next sentence that the user types into the console. This sentence can be no longer than 99 characters. My current code takes the <code>.nextLine()</code> method, and saves whatever was typed, in a String. Than it checks the length of that String, if it's above 99, I use the <code>.substring(0,99)</code> method to cut off the excess. This works just fine, but I find it really ugly.</p>\n<p>The problem is that if, let's say, a user would decide to copy-paste both volumes of Lev Tolstojs <em>War and Peace</em> into the console, my program would first try to save that as a String for no reason whatsoever, as I only need the first 99 characters. The question arises: Is there a way to tell the scanner to stop scanning after a certain number of characters? It would be cheaper, than scanning everything and than only using the part I need.</p>\n"},{"tags":["java","android","json","gson"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701341577,"post_id":77572976,"comment_id":136764727,"body_markdown":"That&#39;s really cool! I&#39;ll have to test it over the weekend, because I was in a hurry and implemented it the hard way: with some internal private classes representing objects so GSON could map things correctly lol.","link":"https://stackoverflow.com/questions/77567888/mapping-specific-subfields-from-json-to-java-class-properties-on-android/77572976#comment136764727_77572976","body":"That&#39;s really cool! I&#39;ll have to test it over the weekend, because I was in a hurry and implemented it the hard way: with some internal private classes representing objects so GSON could map things correctly lol."}],"comment_count":1,"score":0,"last_activity_date":1701275628,"creation_date":1701275628,"answer_id":77572976,"question_id":77567888,"body_markdown":"One solution is to transform the JSON structure before converting to the POJO.  You can try JSON library _Josson_ which make use of _Jackson_ instead of _Gson_.\r\n\r\n    public class Pais {\r\n        private String nome;\r\n        private String regiao;\r\n        private int populacao;\r\n        private String bandeira;\r\n    }\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    ArrayList&lt;Pais&gt; paises = Josson.fromJsonString(textoJSON)\r\n        .getJosson(\r\n            &quot;map(nome: name.common,&quot; +\r\n            &quot;    regiao: region,&quot; +\r\n            &quot;    populacao: population,&quot; +\r\n            &quot;    bandeira: flags.png)&quot;)\r\n        .convertValue();\r\n    System.out.println(paises);\r\n\r\n__Output__\r\n\r\n    [{nome=Christmas Island, regiao=Oceania, populacao=2072, bandeira=https://flagcdn.com/w320/cx.png}]","link":"https://stackoverflow.com/questions/77567888/mapping-specific-subfields-from-json-to-java-class-properties-on-android/77572976#77572976","title":"Mapping specific subfields from JSON to Java Class properties on Android","body":"<p>One solution is to transform the JSON structure before converting to the POJO.  You can try JSON library <em>Josson</em> which make use of <em>Jackson</em> instead of <em>Gson</em>.</p>\n<pre><code>public class Pais {\n    private String nome;\n    private String regiao;\n    private int populacao;\n    private String bandeira;\n}\n</code></pre>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>ArrayList&lt;Pais&gt; paises = Josson.fromJsonString(textoJSON)\n    .getJosson(\n        &quot;map(nome: name.common,&quot; +\n        &quot;    regiao: region,&quot; +\n        &quot;    populacao: population,&quot; +\n        &quot;    bandeira: flags.png)&quot;)\n    .convertValue();\nSystem.out.println(paises);\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>[{nome=Christmas Island, regiao=Oceania, populacao=2072, bandeira=https://flagcdn.com/w320/cx.png}]\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":31,"answer_count":1,"score":0,"last_activity_date":1701275628,"creation_date":1701217149,"last_edit_date":1701239495,"question_id":77567888,"body_markdown":"I have a JSON like this:\r\n\r\n```lang-json\r\n[\r\n  {\r\n    &quot;flags&quot;: {\r\n      &quot;png&quot;: &quot;https://flagcdn.com/w320/cx.png&quot;,\r\n      &quot;svg&quot;: &quot;https://flagcdn.com/cx.svg&quot;,\r\n      &quot;alt&quot;: &quot;&quot;\r\n    },\r\n    &quot;name&quot;: {\r\n      &quot;common&quot;: &quot;Christmas Island&quot;,\r\n      &quot;official&quot;: &quot;Territory of Christmas Island&quot;,\r\n      &quot;nativeName&quot;: {\r\n        &quot;eng&quot;: {\r\n          &quot;official&quot;: &quot;Territory of Christmas Island&quot;,\r\n          &quot;common&quot;: &quot;Christmas Island&quot;\r\n        }\r\n      }\r\n    },\r\n    &quot;region&quot;: &quot;Oceania&quot;,\r\n    &quot;population&quot;: 2072\r\n  },\r\n\r\n...\r\n]\r\n``` \r\nIt is a list of countries I&#39;m getting from [here][1]. I am mapping that JSON to a Java class as below:\r\n```lang-java\r\npublic class Pais {\r\n\r\n  @SerializedName(&quot;name&quot;)\r\n  @Expose\r\n  private String nome;\r\n\r\n  @SerializedName(&quot;region&quot;)\r\n  @Expose\r\n  private String regiao;\r\n\r\n  @SerializedName(&quot;population&quot;)\r\n  @Expose\r\n  private int populacao;\r\n\r\n  @SerializedName(&quot;flags&quot;)\r\n  @Expose\r\n  private String bandeira;\r\n}\r\n``` \r\n\r\nAnd then I used GSON to serialize the whole thing with\r\n\r\n```lang-java\r\n    executor.execute(() -&gt; {\r\n      Conexao conexao = new Conexao();\r\n      String URL = &quot;https://restcountries.com/v2/all?fields=name,region,population,flag,numericCode&quot;;\r\n      InputStream inputStream = conexao.obterRespostaHTTP(URL);\r\n      Auxiliador auxiliador = new Auxiliador();\r\n      String textoJSON = auxiliador.converter(inputStream);\r\n\r\n      Gson gson = new Gson();\r\n\r\n      if (textoJSON != null) {\r\n        Type type = new TypeToken&lt;ArrayList&lt;Pais&gt;&gt;() {\r\n        }.getType();\r\n        paises = gson.fromJson(textoJSON, type);\r\n\r\n        handler.post(() -&gt; {\r\n          paisAdapter = new PaisAdapter(this, paises);\r\n          listView.setAdapter(paisAdapter);\r\n        });\r\n      }\r\n    });\r\n```\r\n\r\nBut the thing is, the fields &#39;name&#39; and &#39;flags&#39; will be parsed as objects, since they have other parameters inside of them, right? Is it possible to do something like mapping the  &quot;png&quot; field inside the &quot;flags&quot; field from the JSON directly to my class parameter &quot;bandeira,&quot; for example?\r\n\r\nI&#39;ve tried changing the `@SerializedName` notation to things like `@SerializedName(&quot;flags.png&quot;)`, but it didn&#39;t work. I imagine there is a specific way to do this.\r\n\r\n  [1]: https://restcountries.com/v3.1/all?fields=name,region,population,flags","link":"https://stackoverflow.com/questions/77567888/mapping-specific-subfields-from-json-to-java-class-properties-on-android","title":"Mapping specific subfields from JSON to Java Class properties on Android","body":"<p>I have a JSON like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;flags&quot;: {\n      &quot;png&quot;: &quot;https://flagcdn.com/w320/cx.png&quot;,\n      &quot;svg&quot;: &quot;https://flagcdn.com/cx.svg&quot;,\n      &quot;alt&quot;: &quot;&quot;\n    },\n    &quot;name&quot;: {\n      &quot;common&quot;: &quot;Christmas Island&quot;,\n      &quot;official&quot;: &quot;Territory of Christmas Island&quot;,\n      &quot;nativeName&quot;: {\n        &quot;eng&quot;: {\n          &quot;official&quot;: &quot;Territory of Christmas Island&quot;,\n          &quot;common&quot;: &quot;Christmas Island&quot;\n        }\n      }\n    },\n    &quot;region&quot;: &quot;Oceania&quot;,\n    &quot;population&quot;: 2072\n  },\n\n...\n]\n</code></pre>\n<p>It is a list of countries I'm getting from <a href=\"https://restcountries.com/v3.1/all?fields=name,region,population,flags\" rel=\"nofollow noreferrer\">here</a>. I am mapping that JSON to a Java class as below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Pais {\n\n  @SerializedName(&quot;name&quot;)\n  @Expose\n  private String nome;\n\n  @SerializedName(&quot;region&quot;)\n  @Expose\n  private String regiao;\n\n  @SerializedName(&quot;population&quot;)\n  @Expose\n  private int populacao;\n\n  @SerializedName(&quot;flags&quot;)\n  @Expose\n  private String bandeira;\n}\n</code></pre>\n<p>And then I used GSON to serialize the whole thing with</p>\n<pre class=\"lang-java prettyprint-override\"><code>    executor.execute(() -&gt; {\n      Conexao conexao = new Conexao();\n      String URL = &quot;https://restcountries.com/v2/all?fields=name,region,population,flag,numericCode&quot;;\n      InputStream inputStream = conexao.obterRespostaHTTP(URL);\n      Auxiliador auxiliador = new Auxiliador();\n      String textoJSON = auxiliador.converter(inputStream);\n\n      Gson gson = new Gson();\n\n      if (textoJSON != null) {\n        Type type = new TypeToken&lt;ArrayList&lt;Pais&gt;&gt;() {\n        }.getType();\n        paises = gson.fromJson(textoJSON, type);\n\n        handler.post(() -&gt; {\n          paisAdapter = new PaisAdapter(this, paises);\n          listView.setAdapter(paisAdapter);\n        });\n      }\n    });\n</code></pre>\n<p>But the thing is, the fields 'name' and 'flags' will be parsed as objects, since they have other parameters inside of them, right? Is it possible to do something like mapping the  &quot;png&quot; field inside the &quot;flags&quot; field from the JSON directly to my class parameter &quot;bandeira,&quot; for example?</p>\n<p>I've tried changing the <code>@SerializedName</code> notation to things like <code>@SerializedName(&quot;flags.png&quot;)</code>, but it didn't work. I imagine there is a specific way to do this.</p>\n"},{"tags":["java","scala","apache-kafka","prometheus","apache-kafka-streams"],"comments":[{"score":0,"post_type":"question","creation_date":1701279459,"post_id":77572953,"comment_id":136757126,"body_markdown":"Does this answer your question? [Kafka CLI: command to list all consumer groups for a topic?](https://stackoverflow.com/questions/63883999/kafka-cli-command-to-list-all-consumer-groups-for-a-topic)","link":"https://stackoverflow.com/questions/77572953/what-is-the-consumer-group-used-to-consume-from-a-kafka-changelog-topic#comment136757126_77572953","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/63883999/kafka-cli-command-to-list-all-consumer-groups-for-a-topic\">Kafka CLI: command to list all consumer groups for a topic?</a>"},{"score":0,"post_type":"question","creation_date":1701279662,"post_id":77572953,"comment_id":136757159,"body_markdown":"@Ga&#235;lJ unfortunately not","link":"https://stackoverflow.com/questions/77572953/what-is-the-consumer-group-used-to-consume-from-a-kafka-changelog-topic#comment136757159_77572953","body":"@Ga&#235;lJ unfortunately not"},{"score":0,"post_type":"question","creation_date":1701282807,"post_id":77572953,"comment_id":136757649,"body_markdown":"What does the command returns when you list all consumer groups of the topic?","link":"https://stackoverflow.com/questions/77572953/what-is-the-consumer-group-used-to-consume-from-a-kafka-changelog-topic#comment136757649_77572953","body":"What does the command returns when you list all consumer groups of the topic?"},{"score":0,"post_type":"question","creation_date":1701335246,"post_id":77572953,"comment_id":136763580,"body_markdown":"it returns all the consumer groups in the cluster with their input topics and lag. But nothing regarding the changelog topics.","link":"https://stackoverflow.com/questions/77572953/what-is-the-consumer-group-used-to-consume-from-a-kafka-changelog-topic#comment136763580_77572953","body":"it returns all the consumer groups in the cluster with their input topics and lag. But nothing regarding the changelog topics."}],"comment_count":4,"is_answered":false,"view_count":35,"answer_count":0,"score":0,"last_activity_date":1701275368,"creation_date":1701275368,"question_id":77572953,"body_markdown":"I have this `kafka-streams` application which is returning `Prometheus` metrics. If I were to believe these metrics, the application has a lag on most partitions of the changelog topic. \r\n\r\nI wanted to verify these metrics using `kafka-cli`. I first thought the `application.id` would be the consumer group for the changelog topic, but with `kafka-consumer-groups --describe` command, I get information about input topics only.\r\n\r\nSo I have two question:\r\n\r\n - What is the consumer group used to consume records from the changelog topic in `kafka-streams` ?\r\n - How can I get the lag for each changelog partition using `kafka-cli` (or other method other than `Prometheus` metrics) ?","link":"https://stackoverflow.com/questions/77572953/what-is-the-consumer-group-used-to-consume-from-a-kafka-changelog-topic","title":"What is the consumer group used to consume from a kafka changelog topic?","body":"<p>I have this <code>kafka-streams</code> application which is returning <code>Prometheus</code> metrics. If I were to believe these metrics, the application has a lag on most partitions of the changelog topic.</p>\n<p>I wanted to verify these metrics using <code>kafka-cli</code>. I first thought the <code>application.id</code> would be the consumer group for the changelog topic, but with <code>kafka-consumer-groups --describe</code> command, I get information about input topics only.</p>\n<p>So I have two question:</p>\n<ul>\n<li>What is the consumer group used to consume records from the changelog topic in <code>kafka-streams</code> ?</li>\n<li>How can I get the lag for each changelog partition using <code>kafka-cli</code> (or other method other than <code>Prometheus</code> metrics) ?</li>\n</ul>\n"},{"tags":["java","quarkus","trace","open-telemetry"],"comments":[{"score":0,"post_type":"question","creation_date":1700334173,"post_id":77500688,"comment_id":136642832,"body_markdown":"have you tried https://quarkus.io/guides/opentelemetry#sampler  with **parentbased_always_on** ?","link":"https://stackoverflow.com/questions/77500688/quarkus-opentelemetry-link-to-parent-span-on-redirect#comment136642832_77500688","body":"have you tried <a href=\"https://quarkus.io/guides/opentelemetry#sampler\" rel=\"nofollow noreferrer\">quarkus.io/guides/opentelemetry#sampler</a>  with <b>parentbased_always_on</b> ?"},{"score":0,"post_type":"question","creation_date":1700413660,"post_id":77500688,"comment_id":136648631,"body_markdown":"well, it didn&#39;t help. Tried all  of them","link":"https://stackoverflow.com/questions/77500688/quarkus-opentelemetry-link-to-parent-span-on-redirect#comment136648631_77500688","body":"well, it didn&#39;t help. Tried all  of them"}],"comment_count":2,"is_answered":false,"view_count":60,"answer_count":0,"score":1,"last_activity_date":1701274645,"creation_date":1700214518,"last_edit_date":1700429936,"question_id":77500688,"body_markdown":"Here is the problem - I want to see full traces linked for my flow which includes redirects and during this redirect traces lost. \r\n\r\nI use quarkus + opentelemetry.\r\n\r\nIn the middle sometimes I have ui part which is not always mine so I could pass traceparent or any other values with cookies. \r\n\r\nRedirect is made by another service to which we send request and can not control.\r\n\r\n\r\nLibs used inside:\r\n\r\n    implementation &#39;io.opentelemetry:opentelemetry-exporter-otlp-common&#39;\r\n    implementation &#39;io.opentelemetry:opentelemetry-exporter-otlp&#39;\r\n\r\nWhat I&#39;ve tried already is to create @ServerRequestFilter with higher priority and move from cookie to header traceparent -&gt; it didn&#39;t help.\r\n\r\nCouldn&#39;t find how to correctly create parent span from **traceparent**.\r\n\r\nUPDATE:\r\nFound how to link 2 spans but it seems it works not as I expected\r\n\r\n    SpanContext parentContext = SpanContext.create(values[1], values[2], TraceFlags.getSampled(), TraceState.getDefault());\r\n            Span parentSpan = Span.wrap(parentContext);\r\n            Log.infof(&quot;TRACEPARENT DATA: trace is = &quot; + values[1] + &quot; and span is = &quot; + values[2]);\r\n\r\n            Span span = tracer.spanBuilder(&quot;ui-provider-picker&quot;).setParent(Context.current().with(parentSpan)).startSpan();\r\n            try (Scope scope = span.makeCurrent()) {\r\n            } finally {\r\n                span.setAttribute(&quot;test&quot;, &quot;12345&quot;);\r\n                span.end();\r\n            }\r\n\r\nIt creates new span to main trace flow and attaches to it -&gt; and then I have still separate trace which I wanted to link with all needed tags.\r\n\r\nAny suggestions?","link":"https://stackoverflow.com/questions/77500688/quarkus-opentelemetry-link-to-parent-span-on-redirect","title":"Quarkus opentelemetry link to parent span on redirect","body":"<p>Here is the problem - I want to see full traces linked for my flow which includes redirects and during this redirect traces lost.</p>\n<p>I use quarkus + opentelemetry.</p>\n<p>In the middle sometimes I have ui part which is not always mine so I could pass traceparent or any other values with cookies.</p>\n<p>Redirect is made by another service to which we send request and can not control.</p>\n<p>Libs used inside:</p>\n<pre><code>implementation 'io.opentelemetry:opentelemetry-exporter-otlp-common'\nimplementation 'io.opentelemetry:opentelemetry-exporter-otlp'\n</code></pre>\n<p>What I've tried already is to create @ServerRequestFilter with higher priority and move from cookie to header traceparent -&gt; it didn't help.</p>\n<p>Couldn't find how to correctly create parent span from <strong>traceparent</strong>.</p>\n<p>UPDATE:\nFound how to link 2 spans but it seems it works not as I expected</p>\n<pre><code>SpanContext parentContext = SpanContext.create(values[1], values[2], TraceFlags.getSampled(), TraceState.getDefault());\n        Span parentSpan = Span.wrap(parentContext);\n        Log.infof(&quot;TRACEPARENT DATA: trace is = &quot; + values[1] + &quot; and span is = &quot; + values[2]);\n\n        Span span = tracer.spanBuilder(&quot;ui-provider-picker&quot;).setParent(Context.current().with(parentSpan)).startSpan();\n        try (Scope scope = span.makeCurrent()) {\n        } finally {\n            span.setAttribute(&quot;test&quot;, &quot;12345&quot;);\n            span.end();\n        }\n</code></pre>\n<p>It creates new span to main trace flow and attaches to it -&gt; and then I have still separate trace which I wanted to link with all needed tags.</p>\n<p>Any suggestions?</p>\n"},{"tags":["java","jacoco"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701274320,"post_id":77572737,"comment_id":136756101,"body_markdown":"Note: It may also be a result of the issue discussed in [this pull request](https://github.com/jacoco/jacoco/pull/321).","link":"https://stackoverflow.com/questions/77571470/jacoco-report-missing-branches-but-tests-are-existing-for-those/77572737#comment136756101_77572737","body":"Note: It may also be a result of the issue discussed in <a href=\"https://github.com/jacoco/jacoco/pull/321\" rel=\"nofollow noreferrer\">this pull request</a>."}],"comment_count":1,"score":0,"last_activity_date":1701273677,"creation_date":1701273677,"answer_id":77572737,"question_id":77571470,"body_markdown":"This, unfortunately, is a known limitation of JaCoCo. JaCoCo works by injecting probes at various places into your code (in your example, before and after the `return`). If the JVM executes a probe, JaCoCo assumes any code before that probe has been covered. However, `return` or `throw` statements exit the function, and the probe right after the `return` or `throw` statement is never reached. JaCoCo therefore assumes that the `return`/`throw` have not been covered. JaCoCo&#39;s [FAQ](https://www.eclemma.org/jacoco/trunk/doc/faq.html) have more info about that.\r\n\r\nOne peculiar thing about your example is though that JaCoCo usually recognizes this condition at least for `return` statements and therefore marks `return` statements as covered even if only the probe before the return statement is reached.","link":"https://stackoverflow.com/questions/77571470/jacoco-report-missing-branches-but-tests-are-existing-for-those/77572737#77572737","title":"Jacoco report missing branches but tests are existing for those","body":"<p>This, unfortunately, is a known limitation of JaCoCo. JaCoCo works by injecting probes at various places into your code (in your example, before and after the <code>return</code>). If the JVM executes a probe, JaCoCo assumes any code before that probe has been covered. However, <code>return</code> or <code>throw</code> statements exit the function, and the probe right after the <code>return</code> or <code>throw</code> statement is never reached. JaCoCo therefore assumes that the <code>return</code>/<code>throw</code> have not been covered. JaCoCo's <a href=\"https://www.eclemma.org/jacoco/trunk/doc/faq.html\" rel=\"nofollow noreferrer\">FAQ</a> have more info about that.</p>\n<p>One peculiar thing about your example is though that JaCoCo usually recognizes this condition at least for <code>return</code> statements and therefore marks <code>return</code> statements as covered even if only the probe before the return statement is reached.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":23,"answer_count":1,"score":-1,"last_activity_date":1701273677,"creation_date":1701263721,"question_id":77571470,"body_markdown":"I have Spring Boot maven multimodule project with java version 21 and for code coverage using Jacoco version 0.8.11. Unit test are written using groovy.\r\n\r\nI have class like this:\r\n\r\n    package ********************;\r\n    \r\n    import lombok.Getter;\r\n    \r\n    import java.util.Arrays;\r\n    \r\n    @Getter\r\n    public enum SomeEnum {\r\n        VALUE1(&quot;some-value1&quot;),\r\n    \r\n        VALUE2(&quot;some-value2&quot;),\r\n    \r\n        VALUE3(&quot;some-value3&quot;);\r\n    \r\n        private final String value;\r\n    \r\n    \r\n        private SomeEnum(String value) {\r\n            this.value = value;\r\n        }\r\n    \r\n        public static SomeEnum fromValue(String value) {\r\n            if (value == null) {\r\n                return null;\r\n            }\r\n            return Arrays.stream(values())\r\n                    .filter(someEnum -&gt; someEnum.getValue().equals(value))\r\n                    .findFirst()\r\n                    .orElseThrow(() -&gt; new IllegalArgumentException(&quot;Invalid input value&quot;));\r\n        }\r\n    }\r\n\r\n\r\nHere is Groovy test:\r\n\r\n    package *****************************\r\n    \r\n    import *********************.SomeEnum\r\n    import spock.lang.Specification\r\n    \r\n    class SomeEnumTest extends Specification {\r\n    \r\n        def &#39;test1&#39;(String s, SomeEnum expected) {\r\n            when:\r\n            var resp = SomeEnum.fromValue(s)\r\n            then:\r\n            resp == expected\r\n            where:\r\n            s || expected\r\n            &#39;some-value1&#39; || SomeEnum.VALUE1\r\n            &#39;some-value2&#39; || SomeEnum.VALUE2\r\n            &#39;some-value3&#39; || SomeEnum.VALUE3\r\n        }\r\n    \r\n        def &#39;test2&#39;() {\r\n            when:\r\n            SomeEnum.fromValue(&#39;bs&#39;)\r\n            then:\r\n            thrown(IllegalArgumentException)\r\n        }\r\n    }\r\n\r\n\r\nIn the result of jacoco I see this part is not covered but the test for it exists. Constructor and enum values are covered. Test is successfully run. What is the problem?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/44nWf.png","link":"https://stackoverflow.com/questions/77571470/jacoco-report-missing-branches-but-tests-are-existing-for-those","title":"Jacoco report missing branches but tests are existing for those","body":"<p>I have Spring Boot maven multimodule project with java version 21 and for code coverage using Jacoco version 0.8.11. Unit test are written using groovy.</p>\n<p>I have class like this:</p>\n<pre><code>package ********************;\n\nimport lombok.Getter;\n\nimport java.util.Arrays;\n\n@Getter\npublic enum SomeEnum {\n    VALUE1(&quot;some-value1&quot;),\n\n    VALUE2(&quot;some-value2&quot;),\n\n    VALUE3(&quot;some-value3&quot;);\n\n    private final String value;\n\n\n    private SomeEnum(String value) {\n        this.value = value;\n    }\n\n    public static SomeEnum fromValue(String value) {\n        if (value == null) {\n            return null;\n        }\n        return Arrays.stream(values())\n                .filter(someEnum -&gt; someEnum.getValue().equals(value))\n                .findFirst()\n                .orElseThrow(() -&gt; new IllegalArgumentException(&quot;Invalid input value&quot;));\n    }\n}\n</code></pre>\n<p>Here is Groovy test:</p>\n<pre><code>package *****************************\n\nimport *********************.SomeEnum\nimport spock.lang.Specification\n\nclass SomeEnumTest extends Specification {\n\n    def 'test1'(String s, SomeEnum expected) {\n        when:\n        var resp = SomeEnum.fromValue(s)\n        then:\n        resp == expected\n        where:\n        s || expected\n        'some-value1' || SomeEnum.VALUE1\n        'some-value2' || SomeEnum.VALUE2\n        'some-value3' || SomeEnum.VALUE3\n    }\n\n    def 'test2'() {\n        when:\n        SomeEnum.fromValue('bs')\n        then:\n        thrown(IllegalArgumentException)\n    }\n}\n</code></pre>\n<p>In the result of jacoco I see this part is not covered but the test for it exists. Constructor and enum values are covered. Test is successfully run. What is the problem?</p>\n<p><a href=\"https://i.stack.imgur.com/44nWf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/44nWf.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","stored-procedures"],"comments":[{"score":0,"post_type":"question","creation_date":1701216643,"post_id":77567008,"comment_id":136747516,"body_markdown":"What happens if you execute `runnable.run();` so it executes in the foreground - do you still get the same error?","link":"https://stackoverflow.com/questions/77567008/running-stored-procedure-without-waiting-for-it-to-finish#comment136747516_77567008","body":"What happens if you execute <code>runnable.run();</code> so it executes in the foreground - do you still get the same error?"},{"score":0,"post_type":"question","creation_date":1701257569,"post_id":77567008,"comment_id":136752552,"body_markdown":"@Bohemian No error in that case, but it runs in sequence. I don&#39;t want to have to wait for the SP to be done.","link":"https://stackoverflow.com/questions/77567008/running-stored-procedure-without-waiting-for-it-to-finish#comment136752552_77567008","body":"@Bohemian No error in that case, but it runs in sequence. I don&#39;t want to have to wait for the SP to be done."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701273288,"creation_date":1701273288,"answer_id":77572696,"question_id":77567008,"body_markdown":"I got it to run in the end. As I was suspecting, the problem was that the worker thread wasn&#39;t getting a transaction. @Transactional does not support multithreading whatsoever, so if you call a method marked by it from another thread, it&#39;s like there is nothing there. \r\n\r\nI was able to use transaction manager to force a transaction on the worker thread:\r\n\r\n    Runnable runnable = () -&gt; {\r\n        transactionTemplate.execute(new TransactionCallback() {\r\n          // the code in this method runs in a transactional context\r\n          public Object doInTransaction(TransactionStatus status) {\r\n            return runStoredProcedure(finalUploadInstance, fileReport);\r\n          }\r\n        });\r\n\r\n      };\r\n      new Thread(runnable).start();\r\n","link":"https://stackoverflow.com/questions/77567008/running-stored-procedure-without-waiting-for-it-to-finish/77572696#77572696","title":"Running stored procedure without waiting for it to finish","body":"<p>I got it to run in the end. As I was suspecting, the problem was that the worker thread wasn't getting a transaction. @Transactional does not support multithreading whatsoever, so if you call a method marked by it from another thread, it's like there is nothing there.</p>\n<p>I was able to use transaction manager to force a transaction on the worker thread:</p>\n<pre><code>Runnable runnable = () -&gt; {\n    transactionTemplate.execute(new TransactionCallback() {\n      // the code in this method runs in a transactional context\n      public Object doInTransaction(TransactionStatus status) {\n        return runStoredProcedure(finalUploadInstance, fileReport);\n      }\n    });\n\n  };\n  new Thread(runnable).start();\n</code></pre>\n"}],"comment_count":2,"is_answered":true,"view_count":44,"answer_count":1,"score":1,"last_activity_date":1701273288,"creation_date":1701203748,"question_id":77567008,"body_markdown":"So I have this stored procedure that I run from my Spring boot application. It works and life is good.\r\n\r\nNow I want to run it asynchronously. Just launch the process and not leave the consumer waiting for the response, but so far I haven&#39;t been able to. Both when calling it from a CompletableFuture or from a new Thread, it throws this error:\r\n\r\n    org.springframework.dao.InvalidDataAccessApiUsageException: OUT/INOUT parameter not available: p_return_code; nested exception is java.lang.IllegalArgumentException: OUT/INOUT parameter not available: p_return_code\r\n\r\n\r\np_return_code is the first of the output parameters. This is the code:\r\n\r\n    final UploadInstanceEntity finalUploadInstance = uploadInstance;\r\n      Runnable runnable = () -&gt; {\r\n        System.out.println(&quot;Lambda Runnable running&quot;);\r\n        runStoredProcedure(finalUploadInstance, fileReport);\r\n      };\r\n\r\n      Thread thread = new Thread(runnable);\r\n      thread.start();\r\n\r\nAnd the function:\r\n\r\n    @Transactional\r\n      private void runStoredProcedure(UploadInstanceEntity uploadInstance, FileReport fileReport) {\r\n\r\n    Map&lt;String, Object&gt; result = uploadInstanceRepository.fileUpload(&quot;CPI&quot;, uploadInstance.getId());\r\n\r\n\r\nI added the transactional but that alone didnt fix it.\r\n\r\nI also played around with the @Async annotation (and respective configurations), but it always ran in sync. Never in background.\r\n\r\nAny ideas how to do this? Am I even on the right track?","link":"https://stackoverflow.com/questions/77567008/running-stored-procedure-without-waiting-for-it-to-finish","title":"Running stored procedure without waiting for it to finish","body":"<p>So I have this stored procedure that I run from my Spring boot application. It works and life is good.</p>\n<p>Now I want to run it asynchronously. Just launch the process and not leave the consumer waiting for the response, but so far I haven't been able to. Both when calling it from a CompletableFuture or from a new Thread, it throws this error:</p>\n<pre><code>org.springframework.dao.InvalidDataAccessApiUsageException: OUT/INOUT parameter not available: p_return_code; nested exception is java.lang.IllegalArgumentException: OUT/INOUT parameter not available: p_return_code\n</code></pre>\n<p>p_return_code is the first of the output parameters. This is the code:</p>\n<pre><code>final UploadInstanceEntity finalUploadInstance = uploadInstance;\n  Runnable runnable = () -&gt; {\n    System.out.println(&quot;Lambda Runnable running&quot;);\n    runStoredProcedure(finalUploadInstance, fileReport);\n  };\n\n  Thread thread = new Thread(runnable);\n  thread.start();\n</code></pre>\n<p>And the function:</p>\n<pre><code>@Transactional\n  private void runStoredProcedure(UploadInstanceEntity uploadInstance, FileReport fileReport) {\n\nMap&lt;String, Object&gt; result = uploadInstanceRepository.fileUpload(&quot;CPI&quot;, uploadInstance.getId());\n</code></pre>\n<p>I added the transactional but that alone didnt fix it.</p>\n<p>I also played around with the @Async annotation (and respective configurations), but it always ran in sync. Never in background.</p>\n<p>Any ideas how to do this? Am I even on the right track?</p>\n"},{"tags":["java","javafx","scenebuilder"],"comments":[{"score":0,"post_type":"question","creation_date":1700023183,"post_id":77484991,"comment_id":136602904,"body_markdown":"I wonder if calling `getClass()` on your controller class rather than your `Application` subclass is part of the problem.","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes#comment136602904_77484991","body":"I wonder if calling <code>getClass()</code> on your controller class rather than your <code>Application</code> subclass is part of the problem."},{"score":0,"post_type":"question","creation_date":1700026374,"post_id":77484991,"comment_id":136603131,"body_markdown":"Is Login() executed if you click the button? Can you put a system out in the method to check this? System.out.println(&quot;username=&quot;+username) please, because you don&#39;t see the s.out if username is empty.","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes#comment136603131_77484991","body":"Is Login() executed if you click the button? Can you put a system out in the method to check this? System.out.println(&quot;username=&quot;+username) please, because you don&#39;t see the s.out if username is empty."},{"score":0,"post_type":"question","creation_date":1700026488,"post_id":77484991,"comment_id":136603140,"body_markdown":"And please remove &quot;if (event.getSource()==loginButton)&quot;. This is guaranteed bot good. You could compare with &quot;.equals()&quot;, but just don&#39;t. It is not necessary.","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes#comment136603140_77484991","body":"And please remove &quot;if (event.getSource()==loginButton)&quot;. This is guaranteed bot good. You could compare with &quot;.equals()&quot;, but just don&#39;t. It is not necessary."},{"score":0,"post_type":"question","creation_date":1700047125,"post_id":77484991,"comment_id":136606094,"body_markdown":"you have `onAction=&quot;#login&quot;` in TextField, PasswordField and Button try to only have it for the button","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes#comment136606094_77484991","body":"you have <code>onAction=&quot;#login&quot;</code> in TextField, PasswordField and Button try to only have it for the button"},{"score":0,"post_type":"question","creation_date":1700052614,"post_id":77484991,"comment_id":136607032,"body_markdown":"The code you posted here works as expected for me. I copied and pasted the two classes and FXML verbatim, ran the `UserLogin` application, and when I logged in it output the lines from the `System.out.println(...)` statements and tried to load `ShoppingInterface.fxml`.","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes#comment136607032_77484991","body":"The code you posted here works as expected for me. I copied and pasted the two classes and FXML verbatim, ran the <code>UserLogin</code> application, and when I logged in it output the lines from the <code>System.out.println(...)</code> statements and tried to load <code>ShoppingInterface.fxml</code>."},{"score":0,"post_type":"question","creation_date":1700052710,"post_id":77484991,"comment_id":136607051,"body_markdown":"@Anon Why on earth would that make any difference?","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes#comment136607051_77484991","body":"@Anon Why on earth would that make any difference?"},{"score":0,"post_type":"question","creation_date":1700052774,"post_id":77484991,"comment_id":136607060,"body_markdown":"@DavidWeber `==` and `.equals(...)` are completely equivalent in this scenario (both are redundant though as they are necessarily true).","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes#comment136607060_77484991","body":"@DavidWeber <code>==</code> and <code>.equals(...)</code> are completely equivalent in this scenario (both are redundant though as they are necessarily true)."},{"score":0,"post_type":"question","creation_date":1700058127,"post_id":77484991,"comment_id":136608156,"body_markdown":"@James_D just as I said: &quot;but just don&#39;t&quot; (compare the button). &quot;It is not necessary&quot;. To the other topic: Comparing references with == is not a good idea IMO, unless you know exactly what you are doing.","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes#comment136608156_77484991","body":"@James_D just as I said: &quot;but just don&#39;t&quot; (compare the button). &quot;It is not necessary&quot;. To the other topic: Comparing references with == is not a good idea IMO, unless you know exactly what you are doing."},{"score":0,"post_type":"question","creation_date":1700062791,"post_id":77484991,"comment_id":136609137,"body_markdown":"@DavidWeber Agreed on &quot;just don&#39;t&quot;. But I disagree completely with &quot;You could compare with `.equals(...)`&quot;. In this case, if `.equals(...)` was overridden so it was different to `==`, then `==` would give the correct logic, and `.equals(...)` would give the incorrect logic. So if you did do a comparison, you should do it with `==`.","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes#comment136609137_77484991","body":"@DavidWeber Agreed on &quot;just don&#39;t&quot;. But I disagree completely with &quot;You could compare with <code>.equals(...)</code>&quot;. In this case, if <code>.equals(...)</code> was overridden so it was different to <code>==</code>, then <code>==</code> would give the correct logic, and <code>.equals(...)</code> would give the incorrect logic. So if you did do a comparison, you should do it with <code>==</code>."},{"score":0,"post_type":"question","creation_date":1700063200,"post_id":77484991,"comment_id":136609213,"body_markdown":"You are right with that, that&#39;s why I said &quot;unless you know exactly what you are doing&quot;. :)","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes#comment136609213_77484991","body":"You are right with that, that&#39;s why I said &quot;unless you know exactly what you are doing&quot;. :)"},{"score":0,"post_type":"question","creation_date":1700098758,"post_id":77484991,"comment_id":136614324,"body_markdown":"@DavidWeber I tried using print statements within the method but nothing prints inside the terminal once the button is pressed","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes#comment136614324_77484991","body":"@DavidWeber I tried using print statements within the method but nothing prints inside the terminal once the button is pressed"},{"score":0,"post_type":"question","creation_date":1700099429,"post_id":77484991,"comment_id":136614393,"body_markdown":"@James_D I just copied everything over into a new project file and it runs fine as you said. Sorry for what seems to be a lack of effort on my part, I&#39;m a student and still learning how to troubleshoot my own errors!","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes#comment136614393_77484991","body":"@James_D I just copied everything over into a new project file and it runs fine as you said. Sorry for what seems to be a lack of effort on my part, I&#39;m a student and still learning how to troubleshoot my own errors!"},{"score":1,"post_type":"question","creation_date":1700142917,"post_id":77484991,"comment_id":136620166,"body_markdown":"Do **not** use the `Initializable` interface. It has been superseded by an injection approach, as of JavaFX 2.1. See the [documentation](https://openjfx.io/javadoc/21/javafx.fxml/javafx/fxml/Initializable.html).","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes#comment136620166_77484991","body":"Do <b>not</b> use the <code>Initializable</code> interface. It has been superseded by an injection approach, as of JavaFX 2.1. See the <a href=\"https://openjfx.io/javadoc/21/javafx.fxml/javafx/fxml/Initializable.html\" rel=\"nofollow noreferrer\">documentation</a>."},{"score":1,"post_type":"question","creation_date":1700143878,"post_id":77484991,"comment_id":136620338,"body_markdown":"@TristanD Actually This is a well-written question, because it contains everything needed to copy, paste, and run the application. That&#39;s how I was able to determine there was nothing wrong with the code you posted (so presumably something was wrong with the configuration, or possibly the original project needed a &quot;clean and rebuild&quot;). I don&#39;t know why so many people posted comments with random, incorrect guesses on here when you provided everything needed to try to reproduce the problem.","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes#comment136620338_77484991","body":"@TristanD Actually This is a well-written question, because it contains everything needed to copy, paste, and run the application. That&#39;s how I was able to determine there was nothing wrong with the code you posted (so presumably something was wrong with the configuration, or possibly the original project needed a &quot;clean and rebuild&quot;). I don&#39;t know why so many people posted comments with random, incorrect guesses on here when you provided everything needed to try to reproduce the problem."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701273246,"creation_date":1701273246,"answer_id":77572693,"question_id":77484991,"body_markdown":"**Solution for future readers:**\r\n\r\nThe solution was to copy everything over into a new project. After that it worked. The mistake was caused by the questioneer himself.\r\n\r\nCredits to @James_D for figuring this out. ","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes/77572693#77572693","title":"JavaFX login screen will not switch scenes","body":"<p><strong>Solution for future readers:</strong></p>\n<p>The solution was to copy everything over into a new project. After that it worked. The mistake was caused by the questioneer himself.</p>\n<p>Credits to @James_D for figuring this out.</p>\n"}],"comment_count":14,"is_answered":false,"view_count":66,"answer_count":1,"score":0,"last_activity_date":1701273246,"creation_date":1700017167,"question_id":77484991,"body_markdown":"I hav a JavaFx project that uses a login screen to to switch pages for accredited users. However, when my login button is pressed with the correct credentials in the the textfield and passwordfield, nothing happens, no errors are given either. Can someone help me figure out why there&#39;s not a scene switch occurring?\r\n\r\nHere is my FXML file for my login page:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;?import javafx.scene.control.Button?&gt;\r\n&lt;?import javafx.scene.control.Label?&gt;\r\n&lt;?import javafx.scene.control.PasswordField?&gt;\r\n&lt;?import javafx.scene.control.TextField?&gt;\r\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\r\n&lt;?import javafx.scene.layout.BorderPane?&gt;\r\n&lt;?import javafx.scene.text.Font?&gt;\r\n&lt;?import javafx.scene.text.Text?&gt;\r\n\r\n&lt;BorderPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;500.0&quot; prefWidth=&quot;700.0&quot; xmlns=&quot;http://javafx.com/javafx/20.0.1&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.example.mall.HelloController&quot;&gt;\r\n    &lt;left&gt;\r\n        &lt;AnchorPane prefHeight=&quot;500.0&quot; prefWidth=&quot;350.0&quot; style=&quot;-fx-background-color: #6D5090;&quot; BorderPane.alignment=&quot;CENTER&quot;&gt;\r\n            &lt;children&gt;\r\n                &lt;Text fill=&quot;WHITE&quot; layoutX=&quot;92.0&quot; layoutY=&quot;244.0&quot; strokeType=&quot;OUTSIDE&quot; strokeWidth=&quot;0.0&quot; text=&quot;The Shopping Mall&quot;&gt;\r\n                    &lt;font&gt;\r\n                        &lt;Font size=&quot;20.0&quot; /&gt;\r\n                    &lt;/font&gt;\r\n                &lt;/Text&gt;\r\n            &lt;/children&gt;\r\n        &lt;/AnchorPane&gt;\r\n    &lt;/left&gt;\r\n    &lt;right&gt;\r\n        &lt;AnchorPane prefHeight=&quot;200.0&quot; prefWidth=&quot;415.0&quot; BorderPane.alignment=&quot;CENTER&quot;&gt;\r\n            &lt;children&gt;\r\n                &lt;TextField id=&quot;username&quot; fx:id=&quot;usernameField&quot; layoutX=&quot;101.0&quot; layoutY=&quot;208.0&quot; onAction=&quot;#login&quot; promptText=&quot;Username&quot; style=&quot;-fx-background-color: transparent; -fx-border-color: #0598ff; -fx-border-width: 0px 0px 2px 0px;&quot; /&gt;\r\n                &lt;PasswordField id=&quot;password&quot; fx:id=&quot;passwordField&quot; layoutX=&quot;102.0&quot; layoutY=&quot;261.0&quot; onAction=&quot;#login&quot; promptText=&quot;Password&quot; style=&quot;-fx-background-color: transparent; -fx-border-color: #0598ff; -fx-border-width: 0px 0px 2px 0px;&quot; /&gt;\r\n                &lt;Button fx:id=&quot;loginButton&quot; layoutX=&quot;129.0&quot; layoutY=&quot;335.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#login&quot; prefHeight=&quot;34.0&quot; prefWidth=&quot;90.0&quot; style=&quot;-fx-background-color: #6D5090;&quot; text=&quot;Login&quot; textFill=&quot;WHITE&quot; /&gt;\r\n                &lt;Text fill=&quot;#6d5090&quot; layoutX=&quot;125.0&quot; layoutY=&quot;129.0&quot; strokeType=&quot;OUTSIDE&quot; strokeWidth=&quot;0.0&quot; text=&quot;User Login&quot;&gt;\r\n                    &lt;font&gt;\r\n                        &lt;Font size=&quot;22.0&quot; /&gt;\r\n                    &lt;/font&gt;\r\n                &lt;/Text&gt;\r\n                &lt;Button layoutX=&quot;320.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#exit&quot; prefHeight=&quot;28.0&quot; prefWidth=&quot;30.0&quot; style=&quot;-fx-background-color: transparent;&quot;&gt;\r\n                    &lt;graphic&gt;\r\n                        &lt;Text fill=&quot;#6d5090&quot; strokeType=&quot;OUTSIDE&quot; strokeWidth=&quot;0.0&quot; text=&quot;X&quot;&gt;\r\n                            &lt;font&gt;\r\n                                &lt;Font size=&quot;16.0&quot; /&gt;\r\n                            &lt;/font&gt;\r\n                        &lt;/Text&gt;\r\n                    &lt;/graphic&gt;\r\n                &lt;/Button&gt;\r\n                &lt;Label fx:id=&quot;errorLabel&quot; layoutX=&quot;106.0&quot; layoutY=&quot;402.0&quot; text=&quot;Incorrect Login. Try Again&quot; textFill=&quot;#ff4d4d&quot; visible=&quot;false&quot; /&gt;\r\n            &lt;/children&gt;\r\n        &lt;/AnchorPane&gt;\r\n    &lt;/right&gt;\r\n&lt;/BorderPane&gt;\r\n\r\n```\r\n\r\nHere is my controller class:\r\n\r\n```\r\npackage com.example.mall;\r\n\r\n\r\nimport javafx.application.Application;\r\nimport javafx.event.EventHandler;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Node;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.input.MouseEvent;\r\nimport javafx.stage.Stage;\r\nimport javafx.stage.StageStyle;\r\nimport javafx.scene.Parent;\r\nimport java.io.IOException;\r\nimport javafx.event.ActionEvent;\r\nimport javafx.fxml.FXML;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.control.PasswordField;\r\nimport javafx.scene.control.TextField;\r\nimport java.util.HashMap;\r\n\r\nimport java.io.IOException;\r\nimport java.net.URL;\r\nimport java.util.ResourceBundle;\r\n\r\nimport javafx.event.ActionEvent;\r\nimport javafx.fxml.FXML;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.control.PasswordField;\r\nimport javafx.scene.control.TextField;\r\n\r\npublic class HelloController {\r\n    private Stage stage;\r\n    private Scene scene;\r\n    private Parent root;\r\n\r\n\r\n    @FXML\r\n    private Label errorLabel;\r\n\r\n    @FXML\r\n    private Button loginButton;\r\n\r\n    @FXML\r\n    private PasswordField passwordField;\r\n\r\n    @FXML\r\n    private TextField usernameField;\r\n\r\n    @FXML\r\n    private void exit(ActionEvent event) {\r\n        System.exit(0);\r\n    }\r\n\r\n    \r\n\r\n   @FXML\r\n    public void login(ActionEvent event) throws IOException {\r\n\r\n           HashMap&lt;String,String&gt; logininfo = new HashMap&lt;String,String&gt;();\r\n\r\n           logininfo.put(&quot;customer&quot;,&quot;customer123&quot;);\r\n           logininfo.put(&quot;staff&quot;,&quot;staff123&quot;);\r\n           logininfo.put(&quot;ceo&quot;,&quot;ceo123&quot;);\r\n           String username;\r\n           username = usernameField.getText();\r\n       System.out.println(username);\r\n           String password;\r\n           password = String.valueOf(passwordField.getText());\r\n\r\n       System.out.println(password);\r\n\r\n         if (event.getSource()==loginButton){\r\n             //if(logininfo.containsKey(username)){\r\n                 System.out.println(&quot;Switching scenesaaaaaaa&quot;);\r\n                    if(logininfo.get(username).equals(password)){\r\n                        System.out.println(&quot;Switching scenes&quot;);\r\n                        switchScene(event, &quot;ShoppingInterface.fxml&quot;);\r\n                    }\r\n\r\n            //}\r\n         }\r\n\r\n    }\r\n\r\n\r\n    public void switchScene(ActionEvent event,String fxmlFileName) throws IOException {\r\n\r\n            System.out.println(&quot;Switching to scene: &quot; + fxmlFileName);\r\n            FXMLLoader loader = new FXMLLoader(getClass().getResource(fxmlFileName));\r\n            Scene newScene = new Scene(loader.load());\r\n            Stage primaryStage = (Stage) ((Node)event.getSource()).getScene().getWindow();\r\n\r\n            primaryStage.setScene(newScene);\r\n            primaryStage.show();\r\n        Parent root = FXMLLoader.load(getClass().getResource(&quot;Login.fxml&quot;));\r\n\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nAnd here is my main file:\r\n\r\n```\r\npackage com.example.mall;\r\n\r\n\r\nimport javafx.application.Application;\r\nimport javafx.event.EventHandler;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.input.MouseEvent;\r\nimport javafx.stage.Stage;\r\nimport javafx.stage.StageStyle;\r\nimport javafx.scene.Parent;\r\nimport java.io.IOException;\r\n\r\npublic class UserLogin extends Application {\r\n\r\n    private double xOffset = 0;\r\n    private double yOffset = 0;\r\n\r\n\r\n    @Override\r\n    public void start(Stage stage) throws IOException {\r\n        Parent root = FXMLLoader.load(getClass().getResource(&quot;Login.fxml&quot;));\r\n        Scene scene = new Scene(root);\r\n\r\n        stage.initStyle(StageStyle.DECORATED.UNDECORATED);\r\n\r\n        root.setOnMousePressed(new EventHandler&lt;MouseEvent&gt;() {\r\n            @Override\r\n            public void handle(MouseEvent event){\r\n                xOffset = event.getScreenX();\r\n                yOffset = event.getScreenY();\r\n            }\r\n\r\n        });\r\n\r\n        root.setOnMouseDragged(new EventHandler&lt;MouseEvent&gt;() {\r\n            @Override\r\n            public void handle(MouseEvent event){\r\n                stage.setX(event.getScreenX() - xOffset );\r\n                stage.setY(event.getScreenY() - yOffset );\r\n\r\n            }\r\n        });\r\n\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI&#39;ve made sure my onAction is linked to the correct method name, and I even tried using print statements throughout the process of entering the username and password but even those statements don&#39;t print within the terminal.","link":"https://stackoverflow.com/questions/77484991/javafx-login-screen-will-not-switch-scenes","title":"JavaFX login screen will not switch scenes","body":"<p>I hav a JavaFx project that uses a login screen to to switch pages for accredited users. However, when my login button is pressed with the correct credentials in the the textfield and passwordfield, nothing happens, no errors are given either. Can someone help me figure out why there's not a scene switch occurring?</p>\n<p>Here is my FXML file for my login page:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.control.Button?&gt;\n&lt;?import javafx.scene.control.Label?&gt;\n&lt;?import javafx.scene.control.PasswordField?&gt;\n&lt;?import javafx.scene.control.TextField?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n&lt;?import javafx.scene.layout.BorderPane?&gt;\n&lt;?import javafx.scene.text.Font?&gt;\n&lt;?import javafx.scene.text.Text?&gt;\n\n&lt;BorderPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;500.0&quot; prefWidth=&quot;700.0&quot; xmlns=&quot;http://javafx.com/javafx/20.0.1&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.example.mall.HelloController&quot;&gt;\n    &lt;left&gt;\n        &lt;AnchorPane prefHeight=&quot;500.0&quot; prefWidth=&quot;350.0&quot; style=&quot;-fx-background-color: #6D5090;&quot; BorderPane.alignment=&quot;CENTER&quot;&gt;\n            &lt;children&gt;\n                &lt;Text fill=&quot;WHITE&quot; layoutX=&quot;92.0&quot; layoutY=&quot;244.0&quot; strokeType=&quot;OUTSIDE&quot; strokeWidth=&quot;0.0&quot; text=&quot;The Shopping Mall&quot;&gt;\n                    &lt;font&gt;\n                        &lt;Font size=&quot;20.0&quot; /&gt;\n                    &lt;/font&gt;\n                &lt;/Text&gt;\n            &lt;/children&gt;\n        &lt;/AnchorPane&gt;\n    &lt;/left&gt;\n    &lt;right&gt;\n        &lt;AnchorPane prefHeight=&quot;200.0&quot; prefWidth=&quot;415.0&quot; BorderPane.alignment=&quot;CENTER&quot;&gt;\n            &lt;children&gt;\n                &lt;TextField id=&quot;username&quot; fx:id=&quot;usernameField&quot; layoutX=&quot;101.0&quot; layoutY=&quot;208.0&quot; onAction=&quot;#login&quot; promptText=&quot;Username&quot; style=&quot;-fx-background-color: transparent; -fx-border-color: #0598ff; -fx-border-width: 0px 0px 2px 0px;&quot; /&gt;\n                &lt;PasswordField id=&quot;password&quot; fx:id=&quot;passwordField&quot; layoutX=&quot;102.0&quot; layoutY=&quot;261.0&quot; onAction=&quot;#login&quot; promptText=&quot;Password&quot; style=&quot;-fx-background-color: transparent; -fx-border-color: #0598ff; -fx-border-width: 0px 0px 2px 0px;&quot; /&gt;\n                &lt;Button fx:id=&quot;loginButton&quot; layoutX=&quot;129.0&quot; layoutY=&quot;335.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#login&quot; prefHeight=&quot;34.0&quot; prefWidth=&quot;90.0&quot; style=&quot;-fx-background-color: #6D5090;&quot; text=&quot;Login&quot; textFill=&quot;WHITE&quot; /&gt;\n                &lt;Text fill=&quot;#6d5090&quot; layoutX=&quot;125.0&quot; layoutY=&quot;129.0&quot; strokeType=&quot;OUTSIDE&quot; strokeWidth=&quot;0.0&quot; text=&quot;User Login&quot;&gt;\n                    &lt;font&gt;\n                        &lt;Font size=&quot;22.0&quot; /&gt;\n                    &lt;/font&gt;\n                &lt;/Text&gt;\n                &lt;Button layoutX=&quot;320.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#exit&quot; prefHeight=&quot;28.0&quot; prefWidth=&quot;30.0&quot; style=&quot;-fx-background-color: transparent;&quot;&gt;\n                    &lt;graphic&gt;\n                        &lt;Text fill=&quot;#6d5090&quot; strokeType=&quot;OUTSIDE&quot; strokeWidth=&quot;0.0&quot; text=&quot;X&quot;&gt;\n                            &lt;font&gt;\n                                &lt;Font size=&quot;16.0&quot; /&gt;\n                            &lt;/font&gt;\n                        &lt;/Text&gt;\n                    &lt;/graphic&gt;\n                &lt;/Button&gt;\n                &lt;Label fx:id=&quot;errorLabel&quot; layoutX=&quot;106.0&quot; layoutY=&quot;402.0&quot; text=&quot;Incorrect Login. Try Again&quot; textFill=&quot;#ff4d4d&quot; visible=&quot;false&quot; /&gt;\n            &lt;/children&gt;\n        &lt;/AnchorPane&gt;\n    &lt;/right&gt;\n&lt;/BorderPane&gt;\n\n</code></pre>\n<p>Here is my controller class:</p>\n<pre><code>package com.example.mall;\n\n\nimport javafx.application.Application;\nimport javafx.event.EventHandler;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.input.MouseEvent;\nimport javafx.stage.Stage;\nimport javafx.stage.StageStyle;\nimport javafx.scene.Parent;\nimport java.io.IOException;\nimport javafx.event.ActionEvent;\nimport javafx.fxml.FXML;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.PasswordField;\nimport javafx.scene.control.TextField;\nimport java.util.HashMap;\n\nimport java.io.IOException;\nimport java.net.URL;\nimport java.util.ResourceBundle;\n\nimport javafx.event.ActionEvent;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.PasswordField;\nimport javafx.scene.control.TextField;\n\npublic class HelloController {\n    private Stage stage;\n    private Scene scene;\n    private Parent root;\n\n\n    @FXML\n    private Label errorLabel;\n\n    @FXML\n    private Button loginButton;\n\n    @FXML\n    private PasswordField passwordField;\n\n    @FXML\n    private TextField usernameField;\n\n    @FXML\n    private void exit(ActionEvent event) {\n        System.exit(0);\n    }\n\n    \n\n   @FXML\n    public void login(ActionEvent event) throws IOException {\n\n           HashMap&lt;String,String&gt; logininfo = new HashMap&lt;String,String&gt;();\n\n           logininfo.put(&quot;customer&quot;,&quot;customer123&quot;);\n           logininfo.put(&quot;staff&quot;,&quot;staff123&quot;);\n           logininfo.put(&quot;ceo&quot;,&quot;ceo123&quot;);\n           String username;\n           username = usernameField.getText();\n       System.out.println(username);\n           String password;\n           password = String.valueOf(passwordField.getText());\n\n       System.out.println(password);\n\n         if (event.getSource()==loginButton){\n             //if(logininfo.containsKey(username)){\n                 System.out.println(&quot;Switching scenesaaaaaaa&quot;);\n                    if(logininfo.get(username).equals(password)){\n                        System.out.println(&quot;Switching scenes&quot;);\n                        switchScene(event, &quot;ShoppingInterface.fxml&quot;);\n                    }\n\n            //}\n         }\n\n    }\n\n\n    public void switchScene(ActionEvent event,String fxmlFileName) throws IOException {\n\n            System.out.println(&quot;Switching to scene: &quot; + fxmlFileName);\n            FXMLLoader loader = new FXMLLoader(getClass().getResource(fxmlFileName));\n            Scene newScene = new Scene(loader.load());\n            Stage primaryStage = (Stage) ((Node)event.getSource()).getScene().getWindow();\n\n            primaryStage.setScene(newScene);\n            primaryStage.show();\n        Parent root = FXMLLoader.load(getClass().getResource(&quot;Login.fxml&quot;));\n\n    }\n}\n\n\n</code></pre>\n<p>And here is my main file:</p>\n<pre><code>package com.example.mall;\n\n\nimport javafx.application.Application;\nimport javafx.event.EventHandler;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.scene.input.MouseEvent;\nimport javafx.stage.Stage;\nimport javafx.stage.StageStyle;\nimport javafx.scene.Parent;\nimport java.io.IOException;\n\npublic class UserLogin extends Application {\n\n    private double xOffset = 0;\n    private double yOffset = 0;\n\n\n    @Override\n    public void start(Stage stage) throws IOException {\n        Parent root = FXMLLoader.load(getClass().getResource(&quot;Login.fxml&quot;));\n        Scene scene = new Scene(root);\n\n        stage.initStyle(StageStyle.DECORATED.UNDECORATED);\n\n        root.setOnMousePressed(new EventHandler&lt;MouseEvent&gt;() {\n            @Override\n            public void handle(MouseEvent event){\n                xOffset = event.getScreenX();\n                yOffset = event.getScreenY();\n            }\n\n        });\n\n        root.setOnMouseDragged(new EventHandler&lt;MouseEvent&gt;() {\n            @Override\n            public void handle(MouseEvent event){\n                stage.setX(event.getScreenX() - xOffset );\n                stage.setY(event.getScreenY() - yOffset );\n\n            }\n        });\n\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<p>I've made sure my onAction is linked to the correct method name, and I even tried using print statements throughout the process of entering the username and password but even those statements don't print within the terminal.</p>\n"},{"tags":["java"],"comments":[{"score":2,"post_type":"question","creation_date":1701272658,"post_id":77572581,"comment_id":136755742,"body_markdown":"No, primitives are not objects, but sometimes you need a class to represent a primitive type (e.g. when using reflection).","link":"https://stackoverflow.com/questions/77572581/whats-meant-in-virtual-machines-class-object#comment136755742_77572581","body":"No, primitives are not objects, but sometimes you need a class to represent a primitive type (e.g. when using reflection)."},{"score":2,"post_type":"question","creation_date":1701272747,"post_id":77572581,"comment_id":136755757,"body_markdown":"That said, `java.lang.Class` does not have a `getPrimitiveClass(String name)` method. Which method are you asking about?","link":"https://stackoverflow.com/questions/77572581/whats-meant-in-virtual-machines-class-object#comment136755757_77572581","body":"That said, <code>java.lang.Class</code> does not have a <code>getPrimitiveClass(String name)</code> method. Which method are you asking about?"},{"score":1,"post_type":"question","creation_date":1701272825,"post_id":77572581,"comment_id":136755774,"body_markdown":"@MarkRotteveel It actually does; it just has package visibility: https://hg.openjdk.org/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/Class.java#l2312","link":"https://stackoverflow.com/questions/77572581/whats-meant-in-virtual-machines-class-object#comment136755774_77572581","body":"@MarkRotteveel It actually does; it just has package visibility: <a href=\"https://hg.openjdk.org/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/Class.java#l2312\" rel=\"nofollow noreferrer\">hg.openjdk.org/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/&hellip;</a>"},{"score":1,"post_type":"question","creation_date":1701272875,"post_id":77572581,"comment_id":136755787,"body_markdown":"@SolomonUcko Ah, thanks, I was just going by the API doc of [`Class`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Class.html)","link":"https://stackoverflow.com/questions/77572581/whats-meant-in-virtual-machines-class-object#comment136755787_77572581","body":"@SolomonUcko Ah, thanks, I was just going by the API doc of <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Class.html\" rel=\"nofollow noreferrer\"><code>Class</code></a>"},{"score":1,"post_type":"question","creation_date":1701272974,"post_id":77572581,"comment_id":136755808,"body_markdown":"I&#39;ve seen this method in field of Integer class:\npublic static final Class&lt;Integer&gt;  TYPE = (Class&lt;Integer&gt;) Class.getPrimitiveClass(&quot;int&quot;);","link":"https://stackoverflow.com/questions/77572581/whats-meant-in-virtual-machines-class-object#comment136755808_77572581","body":"I&#39;ve seen this method in field of Integer class: public static final Class&lt;Integer&gt;  TYPE = (Class&lt;Integer&gt;) Class.getPrimitiveClass(&quot;int&quot;);"},{"score":1,"post_type":"question","creation_date":1701273059,"post_id":77572581,"comment_id":136755821,"body_markdown":"It&#39;s undocumented, so there may not be a reliable description of what it does. One possible non-native implementation here: https://stackoverflow.com/a/25514941/21105992","link":"https://stackoverflow.com/questions/77572581/whats-meant-in-virtual-machines-class-object#comment136755821_77572581","body":"It&#39;s undocumented, so there may not be a reliable description of what it does. One possible non-native implementation here: <a href=\"https://stackoverflow.com/a/25514941/21105992\">stackoverflow.com/a/25514941/21105992</a>"},{"score":0,"post_type":"question","creation_date":1701273660,"post_id":77572581,"comment_id":136755968,"body_markdown":"Here&#39;s the relevant native code, if you&#39;re curious: https://hg.openjdk.org/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/native/java/lang/Class.c#l167, https://hg.openjdk.org/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/prims/jvm.cpp#l717, https://hg.openjdk.org/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/utilities/globalDefinitions.cpp#l207, https://hg.openjdk.org/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/memory/universe.hpp#l286, https://hg.openjdk.org/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/memory/universe.cpp#l439","link":"https://stackoverflow.com/questions/77572581/whats-meant-in-virtual-machines-class-object#comment136755968_77572581","body":"Here&#39;s the relevant native code, if you&#39;re curious: <a href=\"https://hg.openjdk.org/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/native/java/lang/Class.c#l167\" rel=\"nofollow noreferrer\">hg.openjdk.org/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/nat&zwnj;&#8203;ive/&hellip;</a>, <a href=\"https://hg.openjdk.org/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/prims/jvm.cpp#l717\" rel=\"nofollow noreferrer\">hg.openjdk.org/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share&zwnj;&#8203;/vm/&hellip;</a>, <a href=\"https://hg.openjdk.org/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/utilities/globalDefinitions.cpp#l207\" rel=\"nofollow noreferrer\">hg.openjdk.org/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share&zwnj;&#8203;/vm/&hellip;</a>, <a href=\"https://hg.openjdk.org/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/memory/universe.hpp#l286\" rel=\"nofollow noreferrer\">hg.openjdk.org/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share&zwnj;&#8203;/vm/&hellip;</a>, <a href=\"https://hg.openjdk.org/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share/vm/memory/universe.cpp#l439\" rel=\"nofollow noreferrer\">hg.openjdk.org/jdk8/jdk8/hotspot/file/87ee5ee27509/src/share&zwnj;&#8203;/vm/&hellip;</a>"}],"comment_count":7,"is_answered":false,"view_count":49,"answer_count":0,"score":0,"last_activity_date":1701273236,"creation_date":1701272428,"last_edit_date":1701272596,"question_id":77572581,"body_markdown":"There is `getPrimitiveClass(String name)` method of `Class`. Its description is &quot;Return the Virtual Machine&#39;s Class object for the named primitive type&quot;. \r\n\r\nWhat does this mean? Can primitives can considered an object-like structures in JVM?\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77572581/whats-meant-in-virtual-machines-class-object","title":"What&#39;s meant in Virtual Machine&#39;s Class object?","body":"<p>There is <code>getPrimitiveClass(String name)</code> method of <code>Class</code>. Its description is &quot;Return the Virtual Machine's Class object for the named primitive type&quot;.</p>\n<p>What does this mean? Can primitives can considered an object-like structures in JVM?</p>\n"},{"tags":["java"],"comments":[{"score":0,"post_type":"question","creation_date":1701222465,"post_id":77568105,"comment_id":136748040,"body_markdown":"`int num = ThreadLocalRandom.current().ints(100, 1000).filter(n -&gt; Math.abs(n / 100 - n % 10) &gt; 1).findFirst().getAsInt();`","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more#comment136748040_77568105","body":"<code>int num = ThreadLocalRandom.current().ints(100, 1000).filter(n -&gt; Math.abs(n &#47; 100 - n % 10) &gt; 1).findFirst().getAsInt();</code>"}],"answers":[{"comments":[{"score":1,"post_type":"answer","creation_date":1701224135,"post_id":77568202,"comment_id":136748174,"body_markdown":"Simple, yes. Random number within the constraints given, no.","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568202#comment136748174_77568202","body":"Simple, yes. Random number within the constraints given, no."},{"score":0,"post_type":"answer","creation_date":1701224967,"post_id":77568202,"comment_id":136748245,"body_markdown":"Yes, you&#39;re right, I&#39;ve missed the part, about differ more then one. I&#39;ve edited code, I think, now it works fine)","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568202#comment136748245_77568202","body":"Yes, you&#39;re right, I&#39;ve missed the part, about differ more then one. I&#39;ve edited code, I think, now it works fine)"},{"score":1,"post_type":"answer","creation_date":1701225425,"post_id":77568202,"comment_id":136748282,"body_markdown":"The edited code still does not always produce a number within the constraints.","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568202#comment136748282_77568202","body":"The edited code still does not always produce a number within the constraints."},{"score":0,"post_type":"answer","creation_date":1701226460,"post_id":77568202,"comment_id":136748398,"body_markdown":"When? The corner cases may be 2 or 3, but code solves them too, other digits are not scary for us","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568202#comment136748398_77568202","body":"When? The corner cases may be 2 or 3, but code solves them too, other digits are not scary for us"}],"comment_count":4,"score":1,"last_activity_date":1701224846,"last_edit_date":1701224846,"creation_date":1701224001,"answer_id":77568202,"question_id":77568105,"body_markdown":"```Java\r\nRandom random = new Random();\r\n\r\nint first = random.nextInt(1, 10);\r\nint last = random.nextInt(3, 10);\r\nlast = switch (last - first) {\r\n    case 1 -&gt; 0;\r\n    case 0 -&gt; 1;\r\n    case -1 -&gt; 2;\r\n    default -&gt; last;\r\n};\r\nint middle = random.nextInt(0, 10);\r\nSystem.out.println(first * 100 + middle * 10 + last);\r\n```\r\n\r\nI think this variant will be the simplest one for the beginner. It doesn&#39;t use arrays, streams and cycles","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568202#77568202","title":"How would you get a random number where the first and last digits differ by more than one?","body":"<pre><code>Random random = new Random();\n\nint first = random.nextInt(1, 10);\nint last = random.nextInt(3, 10);\nlast = switch (last - first) {\n    case 1 -&gt; 0;\n    case 0 -&gt; 1;\n    case -1 -&gt; 2;\n    default -&gt; last;\n};\nint middle = random.nextInt(0, 10);\nSystem.out.println(first * 100 + middle * 10 + last);\n</code></pre>\n<p>I think this variant will be the simplest one for the beginner. It doesn't use arrays, streams and cycles</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701273227,"last_edit_date":1701273227,"creation_date":1701224689,"answer_id":77568233,"question_id":77568105,"body_markdown":"I would do it as follows.\r\n```\r\n\r\nfor (int i = 0; i &lt; 10; i++) {\r\n    int n = getRandom();\r\n    System.out.printf(&quot;%d &quot;, n);\r\n}\r\n```\r\nprints something like\r\n```\r\n592 842 522 167 760 521 318 178 466 632\r\n```\r\nJust create the `first`, `last`, and middle digits to conform to the required delta. Check out [Random](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Random.html#Random()) for details on the available methods.\r\n- generate `first` from `1 to 9` inclusive\r\n- Then generate `last` so it is at least `2` from `first`. This uses the [conditional operator](https://docs.oracle.com/javase/specs/jls/se20/html/jls-6.html#jls-6.3.1.4) `?:`\r\n- the middle part is just `10 to 90` inclusive. \r\n```\r\nimport java.util.Random;\r\nRandom r = new Random();\r\n  \r\npublic static int getRandom() {\r\n    int first = r.nextInt(1, 10);\r\n    int last = first &lt; 5 ? r.nextInt(6, 9) : r.nextInt(0, 3);\r\n    return (first * 100) + r.nextInt(10)*10 + last;\r\n}\r\n\r\n```\r\nKeep in mind that these may not be purely random numbers from a mathematical perspective.","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568233#77568233","title":"How would you get a random number where the first and last digits differ by more than one?","body":"<p>I would do it as follows.</p>\n<pre><code>\nfor (int i = 0; i &lt; 10; i++) {\n    int n = getRandom();\n    System.out.printf(&quot;%d &quot;, n);\n}\n</code></pre>\n<p>prints something like</p>\n<pre><code>592 842 522 167 760 521 318 178 466 632\n</code></pre>\n<p>Just create the <code>first</code>, <code>last</code>, and middle digits to conform to the required delta. Check out <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Random.html#Random()\" rel=\"nofollow noreferrer\">Random</a> for details on the available methods.</p>\n<ul>\n<li>generate <code>first</code> from <code>1 to 9</code> inclusive</li>\n<li>Then generate <code>last</code> so it is at least <code>2</code> from <code>first</code>. This uses the <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-6.html#jls-6.3.1.4\" rel=\"nofollow noreferrer\">conditional operator</a> <code>?:</code></li>\n<li>the middle part is just <code>10 to 90</code> inclusive.</li>\n</ul>\n<pre><code>import java.util.Random;\nRandom r = new Random();\n  \npublic static int getRandom() {\n    int first = r.nextInt(1, 10);\n    int last = first &lt; 5 ? r.nextInt(6, 9) : r.nextInt(0, 3);\n    return (first * 100) + r.nextInt(10)*10 + last;\n}\n\n</code></pre>\n<p>Keep in mind that these may not be purely random numbers from a mathematical perspective.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701225818,"post_id":77568242,"comment_id":136748330,"body_markdown":"_&quot;... theoretically speaking ...&quot;_; I didn&#39;t know there was a theorem regarding syntax errors.  I&#39;m just kidding, great solution.","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568242#comment136748330_77568242","body":"<i>&quot;... theoretically speaking ...&quot;</i>; I didn&#39;t know there was a theorem regarding syntax errors.  I&#39;m just kidding, great solution."},{"score":0,"post_type":"answer","creation_date":1701225945,"post_id":77568242,"comment_id":136748346,"body_markdown":"@Reilas Where do you spot a syntax error? Compiles and runs fine for me.","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568242#comment136748346_77568242","body":"@Reilas Where do you spot a syntax error? Compiles and runs fine for me."},{"score":0,"post_type":"answer","creation_date":1701385497,"post_id":77568242,"comment_id":136772631,"body_markdown":"Yes, that bias exists but isn&#39;t that just the nature of this problem? i.e. wouldn&#39;t the set of all numbers that meet this condition be &quot;biased&quot; like this?","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568242#comment136772631_77568242","body":"Yes, that bias exists but isn&#39;t that just the nature of this problem? i.e. wouldn&#39;t the set of all numbers that meet this condition be &quot;biased&quot; like this?"},{"score":1,"post_type":"answer","creation_date":1701392884,"post_id":77568242,"comment_id":136773262,"body_markdown":"@Shifu Yes. That&#39;s why I noted that other solutions would show the same bias. It&#39;s due to the exclusion of the `0` in the first position. You could compensate it by sacrificing some randomness. I added the clarification because the exclusion of the `0` was not explicitly stated in the question (it was just apparent from the code). Up to OP to figure out what&#39;s more important.","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568242#comment136773262_77568242","body":"@Shifu Yes. That&#39;s why I noted that other solutions would show the same bias. It&#39;s due to the exclusion of the <code>0</code> in the first position. You could compensate it by sacrificing some randomness. I added the clarification because the exclusion of the <code>0</code> was not explicitly stated in the question (it was just apparent from the code). Up to OP to figure out what&#39;s more important."}],"comment_count":4,"score":2,"last_activity_date":1701246144,"last_edit_date":1701246144,"creation_date":1701224860,"answer_id":77568242,"question_id":77568105,"body_markdown":"The problem with using a loop (or infinite stream) to get to a result, is that your execution time becomes unpredictable, and that, *theoretically* speaking, your function could run infinitely.\r\n\r\nHere&#39;s a straightforward approach that generates a random&lt;sup&gt;(*)&lt;/sup&gt; number within your constraints on the first try:\r\n\r\n    import java.util.Random;\r\n\r\n    public class MyClass {\r\n        public static void main(String args[]) {\r\n          Random random = new Random();\r\n            \r\n          int first = random.nextInt(1, 10);\r\n          int middle = random.nextInt(0, 10);\r\n          int last = (first + random.nextInt(2, 9)) % 10;\r\n          int result = first * 100 + middle * 10 + last;\r\n          \r\n          System.out.println(result);\r\n        }\r\n    }\r\n\r\nThis solution relies on the fact that for the last digit, there&#39;s only 7 possible values to choose from. It generates a random value between 2 and 8, adds that to the first digit, and then uses a modulo operation to reduce back to a single digit.\r\n\r\n\r\n----------\r\n\r\n&lt;sup&gt;&lt;sup&gt;(*)&lt;/sup&gt; There are two caveats here: 1) The generated results are random up to the point that the used [pseudo-random number generator](https://docs.oracle.com/javase/8/docs/api/java/util/Random.html) produces random numbers. 2) Your last digit will be biased towards the `9`, `0` and `1` values which are 16.66...% more likely to occur due to the exclusion of the `0` value from the first digit. Other solutions will show the same bias.&lt;/sup&gt;","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568242#77568242","title":"How would you get a random number where the first and last digits differ by more than one?","body":"<p>The problem with using a loop (or infinite stream) to get to a result, is that your execution time becomes unpredictable, and that, <em>theoretically</em> speaking, your function could run infinitely.</p>\n<p>Here's a straightforward approach that generates a random<sup>(*)</sup> number within your constraints on the first try:</p>\n<pre><code>import java.util.Random;\n\npublic class MyClass {\n    public static void main(String args[]) {\n      Random random = new Random();\n        \n      int first = random.nextInt(1, 10);\n      int middle = random.nextInt(0, 10);\n      int last = (first + random.nextInt(2, 9)) % 10;\n      int result = first * 100 + middle * 10 + last;\n      \n      System.out.println(result);\n    }\n}\n</code></pre>\n<p>This solution relies on the fact that for the last digit, there's only 7 possible values to choose from. It generates a random value between 2 and 8, adds that to the first digit, and then uses a modulo operation to reduce back to a single digit.</p>\n<hr />\n<p><sup><sup>(*)</sup> There are two caveats here: 1) The generated results are random up to the point that the used <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Random.html\" rel=\"nofollow noreferrer\">pseudo-random number generator</a> produces random numbers. 2) Your last digit will be biased towards the <code>9</code>, <code>0</code> and <code>1</code> values which are 16.66...% more likely to occur due to the exclusion of the <code>0</code> value from the first digit. Other solutions will show the same bias.</sup></p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701225178,"creation_date":1701225178,"answer_id":77568258,"question_id":77568105,"body_markdown":"There are many ways to go about this problem. The way I can think of that would be most similar to your attempt would be this:\r\n```\r\n// first and second digit can be anything\r\nint firstDigit = (int) (Math.random() * 10);\r\nint secondDigit = (int) (Math.random() * 10);\r\nint thirdDigit;\r\n\r\n// generate a random digit until the condition is met\r\ndo {\r\n\tthirdDigit = (int) (Math.random() * 10);\r\n} while (Math.abs(firstDigit - thirdDigit) &lt;= 1);\r\n\r\nint result = firstDigit * 100 + secondDigit * 10 + thirdDigit;\r\n```\r\nThis is a great example of how you would use the [do-while loop][1].\r\n\r\nAnother possible solution is to use Java&#39;s [ThreadLocalRandom][2]. You would first need to include the class:\r\n```\r\nimport java.util.concurrent.ThreadLocalRandom;\r\n```\r\nThen, your solution would be:\r\n```\r\nint result = ThreadLocalRandom.current().ints(100, 1000).filter(n -&gt; Math.abs(n / 100 - n % 10) &gt; 1).findFirst().getAsInt();\r\n```\r\n`ThreadLocalRandom.current()` returns the thread&#39;s current instance of this object. `.ints(100, 1000)` returns a stream of random integers in the range [100, 1000), i.e. random 3-digit numbers. `.filter(n -&gt; Math.abs(n / 100 - n % 10) &gt; 1)` can be confusing for a beginner. Basically, for each number `n` in this (effectively) infinite stream, we only want the numbers that meet the condition `Math.abs(n / 100 - n % 10) &gt; 1`. Notice that `n / 100` rounded down will always be the first digit of a 3-digit, positive, base-10 number, and `n % 10` (n modulus 10) will always be the last digit of a positive, base-10 integer. `.findFirst()` will get the first number in the stream that meets the filter&#39;s condition. This is returned as an [OptionalInt][3], which allows for error handling. In this case, though, we can simply call `.getAsInt()` to obtain the value.\r\n\r\nIf you are able to understand the second option then I would recommend using it, but if the first one makes more sense to you then use that. My advice is to never use code that you can&#39;t explain!\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadLocalRandom.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/OptionalInt.html","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568258#77568258","title":"How would you get a random number where the first and last digits differ by more than one?","body":"<p>There are many ways to go about this problem. The way I can think of that would be most similar to your attempt would be this:</p>\n<pre><code>// first and second digit can be anything\nint firstDigit = (int) (Math.random() * 10);\nint secondDigit = (int) (Math.random() * 10);\nint thirdDigit;\n\n// generate a random digit until the condition is met\ndo {\n    thirdDigit = (int) (Math.random() * 10);\n} while (Math.abs(firstDigit - thirdDigit) &lt;= 1);\n\nint result = firstDigit * 100 + secondDigit * 10 + thirdDigit;\n</code></pre>\n<p>This is a great example of how you would use the <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/while.html\" rel=\"nofollow noreferrer\">do-while loop</a>.</p>\n<p>Another possible solution is to use Java's <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadLocalRandom.html\" rel=\"nofollow noreferrer\">ThreadLocalRandom</a>. You would first need to include the class:</p>\n<pre><code>import java.util.concurrent.ThreadLocalRandom;\n</code></pre>\n<p>Then, your solution would be:</p>\n<pre><code>int result = ThreadLocalRandom.current().ints(100, 1000).filter(n -&gt; Math.abs(n / 100 - n % 10) &gt; 1).findFirst().getAsInt();\n</code></pre>\n<p><code>ThreadLocalRandom.current()</code> returns the thread's current instance of this object. <code>.ints(100, 1000)</code> returns a stream of random integers in the range [100, 1000), i.e. random 3-digit numbers. <code>.filter(n -&gt; Math.abs(n / 100 - n % 10) &gt; 1)</code> can be confusing for a beginner. Basically, for each number <code>n</code> in this (effectively) infinite stream, we only want the numbers that meet the condition <code>Math.abs(n / 100 - n % 10) &gt; 1</code>. Notice that <code>n / 100</code> rounded down will always be the first digit of a 3-digit, positive, base-10 number, and <code>n % 10</code> (n modulus 10) will always be the last digit of a positive, base-10 integer. <code>.findFirst()</code> will get the first number in the stream that meets the filter's condition. This is returned as an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/OptionalInt.html\" rel=\"nofollow noreferrer\">OptionalInt</a>, which allows for error handling. In this case, though, we can simply call <code>.getAsInt()</code> to obtain the value.</p>\n<p>If you are able to understand the second option then I would recommend using it, but if the first one makes more sense to you then use that. My advice is to never use code that you can't explain!</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701229947,"post_id":77568275,"comment_id":136748738,"body_markdown":"I think you need to import java util for Random class.","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568275#comment136748738_77568275","body":"I think you need to import java util for Random class."}],"comment_count":1,"score":0,"last_activity_date":1701225444,"creation_date":1701225444,"answer_id":77568275,"question_id":77568105,"body_markdown":"&gt; _&quot;... I need to generate a random 3-digit number where the first digit and the third digit differ by more than one. ...&quot;_\r\n\r\nHere is an example.\r\n\r\n```java\r\nRandom r = new Random();\r\nint x, a = r.nextInt(1, 10), b = r.nextInt(1, 10), c;\r\nwhile (Math.abs(a - (c = r.nextInt(1, 10))) &lt;= 1);\r\nx = (a * 100) + (b * 10) + c;\r\n```\r\n\r\nAnd, here are some example outputs.\r\n\r\n```none\r\n684, 874, 114, 512, 459, 267, 451, 779, 751, 691\r\n```","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568275#77568275","title":"How would you get a random number where the first and last digits differ by more than one?","body":"<blockquote>\n<p><em>&quot;... I need to generate a random 3-digit number where the first digit and the third digit differ by more than one. ...&quot;</em></p>\n</blockquote>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Random r = new Random();\nint x, a = r.nextInt(1, 10), b = r.nextInt(1, 10), c;\nwhile (Math.abs(a - (c = r.nextInt(1, 10))) &lt;= 1);\nx = (a * 100) + (b * 10) + c;\n</code></pre>\n<p>And, here are some example outputs.</p>\n<pre class=\"lang-none prettyprint-override\"><code>684, 874, 114, 512, 459, 267, 451, 779, 751, 691\n</code></pre>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701237362,"post_id":77568463,"comment_id":136749297,"body_markdown":"*&quot;Require no library except the native one.&quot;* Not sure I get your point. None of the answers posted in this thread so far requires an external library. Do you mean a [package](https://docs.oracle.com/javase/tutorial/java/concepts/package.html)? If so, the `java.util` package is as much part of the standard library as the `java.lang` package.","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568463#comment136749297_77568463","body":"<i>&quot;Require no library except the native one.&quot;</i> Not sure I get your point. None of the answers posted in this thread so far requires an external library. Do you mean a <a href=\"https://docs.oracle.com/javase/tutorial/java/concepts/package.html\" rel=\"nofollow noreferrer\">package</a>? If so, the <code>java.util</code> package is as much part of the standard library as the <code>java.lang</code> package."}],"comment_count":1,"score":0,"last_activity_date":1701248160,"last_edit_date":1701248160,"creation_date":1701229475,"answer_id":77568463,"question_id":77568105,"body_markdown":"    class Simple{  \r\n        public static void main(String args[]){\r\n            boolean noGap = true  ;\r\n            int a = ((int) (Math.random()*10));\r\n            int b = ((int) (Math.random()*10));\r\n            int c = 0 ; \r\n            while(noGap){\r\n                c = ((int) (Math.random()*10));\r\n                if(a&gt;c){\r\n                    noGap = a-c&gt;1 ? false:true ;  \r\n                }\r\n                if(c&gt;a){\r\n                    noGap = c-a&gt;1 ? false:true ; \r\n                }\r\n            }\r\n            System.out.println(Integer.toString(a)+Integer.toString(b)+Integer.toString(c));\r\n        }\r\n    }  \r\n\r\n\r\nNo need for any import.","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more/77568463#77568463","title":"How would you get a random number where the first and last digits differ by more than one?","body":"<pre><code>class Simple{  \n    public static void main(String args[]){\n        boolean noGap = true  ;\n        int a = ((int) (Math.random()*10));\n        int b = ((int) (Math.random()*10));\n        int c = 0 ; \n        while(noGap){\n            c = ((int) (Math.random()*10));\n            if(a&gt;c){\n                noGap = a-c&gt;1 ? false:true ;  \n            }\n            if(c&gt;a){\n                noGap = c-a&gt;1 ? false:true ; \n            }\n        }\n        System.out.println(Integer.toString(a)+Integer.toString(b)+Integer.toString(c));\n    }\n}  \n</code></pre>\n<p>No need for any import.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":183,"answer_count":6,"score":2,"last_activity_date":1701273227,"creation_date":1701221925,"last_edit_date":1701246478,"question_id":77568105,"body_markdown":"I need to generate a random 3-digit number where the first digit and the third digit differ by more than one. How would I accomplish this *without arrays*, as simply as possible? I am still a beginner.\r\n\r\n```\r\nint num = 0;\r\n\r\nint firstDigit = 0;\r\nint lastDigit = 0;\r\n\r\n// complete the method\r\n\r\n//while loop\r\nwhile(firstDigit-lastDigit&lt;1)\r\n{\r\n    num = (int)(Math.random() * (999-100) + 100);\r\n    String number = String.valueOf(num);\r\n    String n1 = number.substring(0,1);\r\n    String n2 = number.substring(2,3);\r\n    int a = Integer.parseInt(n1);\r\n    int b = Integer.parseInt(n2);\r\n    \r\n    firstDigit = a;\r\n    lastDigit = b;\r\n    int randNum = Math.abs(a-b);\r\n    System.out.println(a);\r\n    System.out.println(b);   \r\n}\r\n```\r\n\r\nI at first tried this, but soon realized that the while loop was simply always active, because it was getting its initial values from when they were defined earlier in the method.","link":"https://stackoverflow.com/questions/77568105/how-would-you-get-a-random-number-where-the-first-and-last-digits-differ-by-more","title":"How would you get a random number where the first and last digits differ by more than one?","body":"<p>I need to generate a random 3-digit number where the first digit and the third digit differ by more than one. How would I accomplish this <em>without arrays</em>, as simply as possible? I am still a beginner.</p>\n<pre><code>int num = 0;\n\nint firstDigit = 0;\nint lastDigit = 0;\n\n// complete the method\n\n//while loop\nwhile(firstDigit-lastDigit&lt;1)\n{\n    num = (int)(Math.random() * (999-100) + 100);\n    String number = String.valueOf(num);\n    String n1 = number.substring(0,1);\n    String n2 = number.substring(2,3);\n    int a = Integer.parseInt(n1);\n    int b = Integer.parseInt(n2);\n    \n    firstDigit = a;\n    lastDigit = b;\n    int randNum = Math.abs(a-b);\n    System.out.println(a);\n    System.out.println(b);   \n}\n</code></pre>\n<p>I at first tried this, but soon realized that the while loop was simply always active, because it was getting its initial values from when they were defined earlier in the method.</p>\n"},{"tags":["java"],"comments":[{"score":3,"post_type":"question","creation_date":1701272838,"post_id":77572613,"comment_id":136755778,"body_markdown":"You&#39;re calling `StyleManager.getCurrentStyle()` in one line, and `styleManager.getCurrentStyle()` in the next line. You haven&#39;t shown where the `styleManager` variable is being declared, but I&#39;m pretty sure you just need to change the first call to match the second - so that you&#39;re calling `getCurrentStyle()` on an *instance* of the class instead of on the class itself.","link":"https://stackoverflow.com/questions/77572613/non-static-method-getcurrentstyle-cannot-be-referenced-from-a-static-context#comment136755778_77572613","body":"You&#39;re calling <code>StyleManager.getCurrentStyle()</code> in one line, and <code>styleManager.getCurrentStyle()</code> in the next line. You haven&#39;t shown where the <code>styleManager</code> variable is being declared, but I&#39;m pretty sure you just need to change the first call to match the second - so that you&#39;re calling <code>getCurrentStyle()</code> on an <i>instance</i> of the class instead of on the class itself."},{"score":0,"post_type":"question","creation_date":1701272865,"post_id":77572613,"comment_id":136755784,"body_markdown":"Note that this really doesn&#39;t have anything to do with artificial intelligence. It&#39;s just standard Java static vs instance method handling.","link":"https://stackoverflow.com/questions/77572613/non-static-method-getcurrentstyle-cannot-be-referenced-from-a-static-context#comment136755784_77572613","body":"Note that this really doesn&#39;t have anything to do with artificial intelligence. It&#39;s just standard Java static vs instance method handling."},{"score":0,"post_type":"question","creation_date":1701274235,"post_id":77572613,"comment_id":136756087,"body_markdown":"You are in the static context thus you can&#39;t call a non-static method of the non-static class. Read above-mentioned question to find a reasons bihind this.","link":"https://stackoverflow.com/questions/77572613/non-static-method-getcurrentstyle-cannot-be-referenced-from-a-static-context#comment136756087_77572613","body":"You are in the static context thus you can&#39;t call a non-static method of the non-static class. Read above-mentioned question to find a reasons bihind this."}],"comment_count":3,"is_answered":false,"view_count":30,"answer_count":0,"score":-1,"last_activity_date":1701272883,"creation_date":1701272679,"last_edit_date":1701272883,"question_id":77572613,"body_markdown":"I have a Style manager class and I use it in another file, but when I use the method, it shows an error `Non-static method &#39;getCurrentStyle()&#39; cannot be referenced from a static context`, but in the StyleManager itself, all variables are not static (error when calling StyleManager.getCurrentStyle())\r\n\r\nStyle Manager:\r\n\r\n```\r\npublic class StyleManager {\r\n    public List&lt;Style&gt; styles = new ArrayList&lt;&gt;();\r\n    private Style currentStyle = null;\r\n\r\n    public void init() {\r\n        styles.addAll(Arrays.asList(\r\n                        new Style(&quot;Манго&quot;, HexColor.toColor(&quot;#FCFC36&quot;), HexColor.toColor(&quot;#5D00B2&quot;)),\r\n                        new Style(&quot;Виолет&quot;, HexColor.toColor(&quot;#F4ECFF&quot;), HexColor.toColor(&quot;#765AA5&quot;)),\r\n                        new Style(&quot;Разно цветный&quot;, HexColor.toColor(&quot;#000000&quot;), HexColor.toColor(&quot;#FFFFFF&quot;)),\r\n                        new Style(&quot;Варм&quot;, HexColor.toColor(&quot;#FFC854&quot;), HexColor.toColor(&quot;#4288FF&quot;)),\r\n                        new Style(&quot;Феникс&quot;, HexColor.toColor(&quot;#FFC300&quot;), HexColor.toColor(&quot;#FF5800&quot;)),\r\n                        new Style(&quot;Конфетный&quot;, HexColor.toColor(&quot;#76ACD7&quot;), HexColor.toColor(&quot;#F15FE9&quot;)),\r\n                        new Style(&quot;Кровавый&quot;, HexColor.toColor(&quot;#FD3A3A&quot;), HexColor.toColor(&quot;#3A3A3A&quot;)),\r\n                        new Style(&quot;Полиция&quot;, HexColor.toColor(&quot;#FF6347&quot;), HexColor.toColor(&quot;#0044FF&quot;)),\r\n                        new Style(&quot;Щилд&quot;, HexColor.toColor(&quot;#373b44&quot;), HexColor.toColor(&quot;#4286f4&quot;)),\r\n                        new Style(&quot;Свой&quot;, HexColor.toColor(&quot;#765AA5&quot;), HexColor.toColor(&quot;#F4ECFF&quot;))\r\n                )\r\n        );\r\n        currentStyle = styles.get(0);\r\n    }\r\n\r\n    public static Color astolfo(float yDist, float yTotal, float saturation, float speedt) {\r\n        float speed = 1800f;\r\n        float hue = (System.currentTimeMillis() % (int) speed) + (yTotal - yDist) * speedt;\r\n        while (hue &gt; speed) {\r\n            hue -= speed;\r\n        }\r\n        hue /= speed;\r\n        if (hue &gt; 0.5) {\r\n            hue = 0.5F - (hue - 0.5f);\r\n        }\r\n        hue += 0.5F;\r\n        return Color.getHSBColor(hue, saturation, 1F);\r\n    }\r\n\r\n    public void setCurrentStyle(Style style) {\r\n        currentStyle = style;\r\n    }\r\n\r\n    public Style getCurrentStyle() {\r\n        return currentStyle;\r\n    }\r\n\r\n    public static class HexColor {\r\n        public static int toColor(String hexColor) {\r\n            int argb = Integer.parseInt(hexColor.substring(1), 16);\r\n            return reAlphaInt(argb, 255);\r\n        }\r\n\r\n        public static int reAlphaInt(final int color, final int alpha) {\r\n            return (MathHelper.clamp(alpha, 0, 255) &lt;&lt; 24) | (color &amp; 16777215);\r\n        }\r\n    }\r\n```\r\n\r\nFunction:\r\n\r\n```\r\n List&lt;Function&gt; sortedFunctions = new ArrayList&lt;&gt;();\r\n//        TimerUtil delay = new TimerUtil();\r\n        TimerUtil delay = new TimerUtil();\r\n\r\n        float x = 5;\r\n        float y = 25;\r\n        float height = 10;\r\n        float yOffset = 0;\r\n\r\n        final StyledFont font = Fonts.gilroyBold[fontSize.getValue().intValue()];\r\n        StyleManager styleManager = Managment.STYLE_MANAGER;\r\n\r\n        if (delay.hasTimeElapsed(10000)) {\r\n            sortedFunctions = HudUtil.getSorted(font);\r\n            delay.reset();\r\n        }\r\n\r\n        float gradientForce = 1;\r\n        int fontOffset = (fontSize.getValue().intValue() &gt; 14 ? -14 + fontSize.getValue().intValue()\r\n                - (fontSize.getValue().intValue() &gt; 14 ? 1 : 0) : 0);\r\n        int firstColor;\r\n        int secondColor;\r\n\r\n        if (glowing) {\r\n            for (Function function : sortedFunctions) {\r\n//                if ((limitations.get(0) &amp;&amp; function.category == Type.Render) || (limitations.get(1) &amp;&amp; function.bind == 0)) {\r\n//                    continue;\r\n//                }\r\n\r\n                function.animation = AnimationMath.lerp(function.animation, function.state ? 1 : 0, 15);\r\n\r\n                if (function.animation &gt;= 0.01) {\r\n                    float width = font.getWidth(function.name) + 5;\r\n                    firstColor = StyleManager.getCurrentStyle()\r\n                            .getColor((int) ((yOffset + height * function.animation) * gradientForce));\r\n                    secondColor = styleManager.getCurrentStyle()\r\n                            .getColor((int) (yOffset * gradientForce));\r\n\r\n                    RenderSystem.pushMatrix();\r\n                    RenderSystem.translatef(x + width / 2F, y + yOffset, 0);\r\n                    RenderSystem.scalef(1, function.animation, 1);\r\n                    RenderSystem.translatef(-(x + width / 2F), -(y + yOffset), 0);\r\n                    RenderUtil.Render2D.drawShadow(x, y + yOffset, width, height, 10, firstColor, secondColor);\r\n                    RenderSystem.popMatrix();\r\n\r\n                    yOffset += height * function.animation;\r\n                }\r\n            }\r\n            yOffset = 0;\r\n        }\r\n        for (Function function : sortedFunctions) {\r\n//            if ((limitations.get(0) &amp;&amp; function.category == Type.Render) || (limitations.get(1) &amp;&amp; function.bind == 0)) {\r\n//                continue;\r\n//            }\r\n\r\n            function.animation = AnimationMath.lerp(function.animation, function.state ? 1 : 0, 15);\r\n\r\n            if (function.animation &gt;= 0.01) {\r\n                float width = font.getWidth(function.name) + 5;\r\n                secondColor = styleManager.getCurrentStyle()\r\n                        .getColor((int) (yOffset * gradientForce));\r\n\r\n                RenderSystem.pushMatrix();\r\n                RenderSystem.translatef(x + width / 2F, y + yOffset, 0);\r\n                RenderSystem.scalef(1, function.animation, 1);\r\n                RenderSystem.translatef(-(x + width / 2F), -(y + yOffset), 0);\r\n                RenderUtil.Render2D.drawRect(x, y + yOffset, width, height, ColorUtil.rgba(21, 21, 21, 255));\r\n                font.drawString(matrixStack, function.name, x + 3,\r\n                        y + yOffset + font.getFontHeight() / 2f - fontOffset - 1, secondColor);\r\n                RenderSystem.popMatrix();\r\n\r\n                yOffset += height * function.animation;\r\n            }\r\n        }\r\n\r\n\r\n        yOffset = 0;\r\n        for (Function function : sortedFunctions) {\r\n//            if ((limitations.get(0) &amp;&amp; function.category == Type.Render) || (limitations.get(1) &amp;&amp; function.bind == 0)) {\r\n//                continue;\r\n//            }\r\n            function.animation = AnimationMath.lerp(function.animation, function.state ? 1 : 0, 15);\r\n            if (function.animation &gt;= 0.01) {\r\n                float width = font.getWidth(function.name) + 4;\r\n                firstColor = StyleManager.getCurrentStyle().getColor((int) ((yOffset + height * function.animation) * gradientForce));\r\n                secondColor = styleManager.getCurrentStyle().getColor((int) (yOffset * gradientForce));\r\n                RenderSystem.pushMatrix();\r\n                RenderSystem.translatef(x + width / 2F, y + yOffset, 0);\r\n                RenderSystem.scalef(1, function.animation, 1);\r\n                RenderSystem.translatef(-(x + width / 2F), -(y + yOffset), 0);\r\n                RenderUtil.Render2D.drawShadow(x, y + yOffset, 1, height, 8, firstColor, secondColor);\r\n                RenderUtil.Render2D.drawVertical(x, y + yOffset, 1, height, firstColor, secondColor);\r\n                RenderSystem.popMatrix();\r\n\r\n                yOffset += height * function.animation;\r\n            }\r\n        }\r\n\r\n    }\r\n```\r\n\r\nnone of the methods helped me (I&#39;m a beginner)","link":"https://stackoverflow.com/questions/77572613/non-static-method-getcurrentstyle-cannot-be-referenced-from-a-static-context","title":"Non-static method &#39;getCurrentStyle()&#39; cannot be referenced from a static context (but method is non static :( )","body":"<p>I have a Style manager class and I use it in another file, but when I use the method, it shows an error <code>Non-static method 'getCurrentStyle()' cannot be referenced from a static context</code>, but in the StyleManager itself, all variables are not static (error when calling StyleManager.getCurrentStyle())</p>\n<p>Style Manager:</p>\n<pre><code>public class StyleManager {\n    public List&lt;Style&gt; styles = new ArrayList&lt;&gt;();\n    private Style currentStyle = null;\n\n    public void init() {\n        styles.addAll(Arrays.asList(\n                        new Style(&quot;Манго&quot;, HexColor.toColor(&quot;#FCFC36&quot;), HexColor.toColor(&quot;#5D00B2&quot;)),\n                        new Style(&quot;Виолет&quot;, HexColor.toColor(&quot;#F4ECFF&quot;), HexColor.toColor(&quot;#765AA5&quot;)),\n                        new Style(&quot;Разно цветный&quot;, HexColor.toColor(&quot;#000000&quot;), HexColor.toColor(&quot;#FFFFFF&quot;)),\n                        new Style(&quot;Варм&quot;, HexColor.toColor(&quot;#FFC854&quot;), HexColor.toColor(&quot;#4288FF&quot;)),\n                        new Style(&quot;Феникс&quot;, HexColor.toColor(&quot;#FFC300&quot;), HexColor.toColor(&quot;#FF5800&quot;)),\n                        new Style(&quot;Конфетный&quot;, HexColor.toColor(&quot;#76ACD7&quot;), HexColor.toColor(&quot;#F15FE9&quot;)),\n                        new Style(&quot;Кровавый&quot;, HexColor.toColor(&quot;#FD3A3A&quot;), HexColor.toColor(&quot;#3A3A3A&quot;)),\n                        new Style(&quot;Полиция&quot;, HexColor.toColor(&quot;#FF6347&quot;), HexColor.toColor(&quot;#0044FF&quot;)),\n                        new Style(&quot;Щилд&quot;, HexColor.toColor(&quot;#373b44&quot;), HexColor.toColor(&quot;#4286f4&quot;)),\n                        new Style(&quot;Свой&quot;, HexColor.toColor(&quot;#765AA5&quot;), HexColor.toColor(&quot;#F4ECFF&quot;))\n                )\n        );\n        currentStyle = styles.get(0);\n    }\n\n    public static Color astolfo(float yDist, float yTotal, float saturation, float speedt) {\n        float speed = 1800f;\n        float hue = (System.currentTimeMillis() % (int) speed) + (yTotal - yDist) * speedt;\n        while (hue &gt; speed) {\n            hue -= speed;\n        }\n        hue /= speed;\n        if (hue &gt; 0.5) {\n            hue = 0.5F - (hue - 0.5f);\n        }\n        hue += 0.5F;\n        return Color.getHSBColor(hue, saturation, 1F);\n    }\n\n    public void setCurrentStyle(Style style) {\n        currentStyle = style;\n    }\n\n    public Style getCurrentStyle() {\n        return currentStyle;\n    }\n\n    public static class HexColor {\n        public static int toColor(String hexColor) {\n            int argb = Integer.parseInt(hexColor.substring(1), 16);\n            return reAlphaInt(argb, 255);\n        }\n\n        public static int reAlphaInt(final int color, final int alpha) {\n            return (MathHelper.clamp(alpha, 0, 255) &lt;&lt; 24) | (color &amp; 16777215);\n        }\n    }\n</code></pre>\n<p>Function:</p>\n<pre><code> List&lt;Function&gt; sortedFunctions = new ArrayList&lt;&gt;();\n//        TimerUtil delay = new TimerUtil();\n        TimerUtil delay = new TimerUtil();\n\n        float x = 5;\n        float y = 25;\n        float height = 10;\n        float yOffset = 0;\n\n        final StyledFont font = Fonts.gilroyBold[fontSize.getValue().intValue()];\n        StyleManager styleManager = Managment.STYLE_MANAGER;\n\n        if (delay.hasTimeElapsed(10000)) {\n            sortedFunctions = HudUtil.getSorted(font);\n            delay.reset();\n        }\n\n        float gradientForce = 1;\n        int fontOffset = (fontSize.getValue().intValue() &gt; 14 ? -14 + fontSize.getValue().intValue()\n                - (fontSize.getValue().intValue() &gt; 14 ? 1 : 0) : 0);\n        int firstColor;\n        int secondColor;\n\n        if (glowing) {\n            for (Function function : sortedFunctions) {\n//                if ((limitations.get(0) &amp;&amp; function.category == Type.Render) || (limitations.get(1) &amp;&amp; function.bind == 0)) {\n//                    continue;\n//                }\n\n                function.animation = AnimationMath.lerp(function.animation, function.state ? 1 : 0, 15);\n\n                if (function.animation &gt;= 0.01) {\n                    float width = font.getWidth(function.name) + 5;\n                    firstColor = StyleManager.getCurrentStyle()\n                            .getColor((int) ((yOffset + height * function.animation) * gradientForce));\n                    secondColor = styleManager.getCurrentStyle()\n                            .getColor((int) (yOffset * gradientForce));\n\n                    RenderSystem.pushMatrix();\n                    RenderSystem.translatef(x + width / 2F, y + yOffset, 0);\n                    RenderSystem.scalef(1, function.animation, 1);\n                    RenderSystem.translatef(-(x + width / 2F), -(y + yOffset), 0);\n                    RenderUtil.Render2D.drawShadow(x, y + yOffset, width, height, 10, firstColor, secondColor);\n                    RenderSystem.popMatrix();\n\n                    yOffset += height * function.animation;\n                }\n            }\n            yOffset = 0;\n        }\n        for (Function function : sortedFunctions) {\n//            if ((limitations.get(0) &amp;&amp; function.category == Type.Render) || (limitations.get(1) &amp;&amp; function.bind == 0)) {\n//                continue;\n//            }\n\n            function.animation = AnimationMath.lerp(function.animation, function.state ? 1 : 0, 15);\n\n            if (function.animation &gt;= 0.01) {\n                float width = font.getWidth(function.name) + 5;\n                secondColor = styleManager.getCurrentStyle()\n                        .getColor((int) (yOffset * gradientForce));\n\n                RenderSystem.pushMatrix();\n                RenderSystem.translatef(x + width / 2F, y + yOffset, 0);\n                RenderSystem.scalef(1, function.animation, 1);\n                RenderSystem.translatef(-(x + width / 2F), -(y + yOffset), 0);\n                RenderUtil.Render2D.drawRect(x, y + yOffset, width, height, ColorUtil.rgba(21, 21, 21, 255));\n                font.drawString(matrixStack, function.name, x + 3,\n                        y + yOffset + font.getFontHeight() / 2f - fontOffset - 1, secondColor);\n                RenderSystem.popMatrix();\n\n                yOffset += height * function.animation;\n            }\n        }\n\n\n        yOffset = 0;\n        for (Function function : sortedFunctions) {\n//            if ((limitations.get(0) &amp;&amp; function.category == Type.Render) || (limitations.get(1) &amp;&amp; function.bind == 0)) {\n//                continue;\n//            }\n            function.animation = AnimationMath.lerp(function.animation, function.state ? 1 : 0, 15);\n            if (function.animation &gt;= 0.01) {\n                float width = font.getWidth(function.name) + 4;\n                firstColor = StyleManager.getCurrentStyle().getColor((int) ((yOffset + height * function.animation) * gradientForce));\n                secondColor = styleManager.getCurrentStyle().getColor((int) (yOffset * gradientForce));\n                RenderSystem.pushMatrix();\n                RenderSystem.translatef(x + width / 2F, y + yOffset, 0);\n                RenderSystem.scalef(1, function.animation, 1);\n                RenderSystem.translatef(-(x + width / 2F), -(y + yOffset), 0);\n                RenderUtil.Render2D.drawShadow(x, y + yOffset, 1, height, 8, firstColor, secondColor);\n                RenderUtil.Render2D.drawVertical(x, y + yOffset, 1, height, firstColor, secondColor);\n                RenderSystem.popMatrix();\n\n                yOffset += height * function.animation;\n            }\n        }\n\n    }\n</code></pre>\n<p>none of the methods helped me (I'm a beginner)</p>\n"},{"tags":["java","registry","windows-10-desktop"],"comments":[{"score":1,"post_type":"question","creation_date":1701268557,"post_id":77572042,"comment_id":136754783,"body_markdown":"Why do you need that registry key? Which installer, provider, architecture, JRE/JDK and version are you using? If it is Java 10, then why are you using an old and end of life version of Java (in September 2018) instead of a current one? Java 10 was one of not Long Term Support releases, it was supported for a few months only.","link":"https://stackoverflow.com/questions/77572042/registry-key-not-found-after-java10-installation-on-win10#comment136754783_77572042","body":"Why do you need that registry key? Which installer, provider, architecture, JRE/JDK and version are you using? If it is Java 10, then why are you using an old and end of life version of Java (in September 2018) instead of a current one? Java 10 was one of not Long Term Support releases, it was supported for a few months only."},{"score":0,"post_type":"question","creation_date":1701271712,"post_id":77572042,"comment_id":136755550,"body_markdown":"Which Java installer are you using? For example the Eclipse Adoptium Temurin installer will only create registry keys if you explicitly enable it in the installer (though I&#39;m not sure if it creates _this_ registry key).","link":"https://stackoverflow.com/questions/77572042/registry-key-not-found-after-java10-installation-on-win10#comment136755550_77572042","body":"Which Java installer are you using? For example the Eclipse Adoptium Temurin installer will only create registry keys if you explicitly enable it in the installer (though I&#39;m not sure if it creates <i>this</i> registry key)."},{"score":0,"post_type":"question","creation_date":1701369571,"post_id":77572042,"comment_id":136770237,"body_markdown":"Thank you for the answer, I&#39;ll search for the newest version at first. The key is demanded by an old application I am using, which utilises Java and this application is yelling for the reg key.","link":"https://stackoverflow.com/questions/77572042/registry-key-not-found-after-java10-installation-on-win10#comment136770237_77572042","body":"Thank you for the answer, I&#39;ll search for the newest version at first. The key is demanded by an old application I am using, which utilises Java and this application is yelling for the reg key."}],"comment_count":3,"is_answered":false,"view_count":13,"answer_count":0,"score":0,"last_activity_date":1701271644,"creation_date":1701268095,"last_edit_date":1701271644,"question_id":77572042,"body_markdown":"[enter image description here](https://i.stack.imgur.com/G2JcP.jpg)\r\n\r\nThe key is required and the registry does not contain it after the newest Java install. Could anyone advise how to edit the registry to update this path?\r\n\r\nUninstalling and reinstalling Java 10 brought no expected result in registry.","link":"https://stackoverflow.com/questions/77572042/registry-key-not-found-after-java10-installation-on-win10","title":"Registry key not found after Java10 installation on Win10","body":"<p><a href=\"https://i.stack.imgur.com/G2JcP.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>The key is required and the registry does not contain it after the newest Java install. Could anyone advise how to edit the registry to update this path?</p>\n<p>Uninstalling and reinstalling Java 10 brought no expected result in registry.</p>\n"},{"tags":["java","multithreading","apache-camel"],"comment_count":0,"is_answered":false,"view_count":51,"answer_count":0,"score":1,"last_activity_date":1701271611,"creation_date":1701268654,"last_edit_date":1701271611,"question_id":77572104,"body_markdown":"I&#39;m having issues migrating to Camel 3.21 from the 3.2 version.\r\n\r\nMy workflow looks like this:\r\n\r\nread an XML file from FS -&gt; parse it and **split** it into pieces -&gt; **aggregate** those pieces into chunks of certain size -&gt; process chunks one by one\r\n\r\nOne of the requirements is that the next file must not be read while the previous one hasn&#39;t been completely processed.\r\n\r\nWith the old Camel version everything worked well, but with 3.21 (I guess the breaking changes were introduced in 3.11) the next file is being read while the previous one is still being processed.\r\n\r\nI found that now there are two different threads, one performs the actual aggregation, and the other one processes the aggregated chunks. That lets the first thread go ahead and read files regardless of what the second thread does.\r\n\r\nI tried to follow the instructions from Camel docs:\r\n&gt; In order to achieve synchronous aggregation, use an instance of **SynchronousExecutorService** for the executorService option. The aggregated output will execute in the same thread that called the aggregator.\r\n\r\nNow I have the only thread gathering the chunks and processing them (bingo!), but the issue is that it doesn&#39;t get back to compiling the second chunk when the processing of the first one is completed. It just hangs and does nothing.\r\n\r\nMy guess is that this change in 3.11 is what causes the issue:\r\n&gt; The aggregate EIP will now always use a worker thread pool for processing outgoing messages. Previously a worker pool was only created when parallelProcessing=true. When having parallelProcessing=false then a single-threaded worker pool is created and used by the aggregator.\r\nCamels routing engine works better when a dedicated worker pool that eliminates a **hack** that otherwise was needed in other EIPs that was affected if using the aggregator in some special configurations.\r\n\r\nAny ideas on how to solve that are highly appreciated!","link":"https://stackoverflow.com/questions/77572104/how-to-set-up-a-workflow-using-split-aggregate-and-a-single-thread-3-11-migrat","title":"How to set up a workflow using Split, Aggregate and a single thread (3.11 migration issue)","body":"<p>I'm having issues migrating to Camel 3.21 from the 3.2 version.</p>\n<p>My workflow looks like this:</p>\n<p>read an XML file from FS -&gt; parse it and <strong>split</strong> it into pieces -&gt; <strong>aggregate</strong> those pieces into chunks of certain size -&gt; process chunks one by one</p>\n<p>One of the requirements is that the next file must not be read while the previous one hasn't been completely processed.</p>\n<p>With the old Camel version everything worked well, but with 3.21 (I guess the breaking changes were introduced in 3.11) the next file is being read while the previous one is still being processed.</p>\n<p>I found that now there are two different threads, one performs the actual aggregation, and the other one processes the aggregated chunks. That lets the first thread go ahead and read files regardless of what the second thread does.</p>\n<p>I tried to follow the instructions from Camel docs:</p>\n<blockquote>\n<p>In order to achieve synchronous aggregation, use an instance of <strong>SynchronousExecutorService</strong> for the executorService option. The aggregated output will execute in the same thread that called the aggregator.</p>\n</blockquote>\n<p>Now I have the only thread gathering the chunks and processing them (bingo!), but the issue is that it doesn't get back to compiling the second chunk when the processing of the first one is completed. It just hangs and does nothing.</p>\n<p>My guess is that this change in 3.11 is what causes the issue:</p>\n<blockquote>\n<p>The aggregate EIP will now always use a worker thread pool for processing outgoing messages. Previously a worker pool was only created when parallelProcessing=true. When having parallelProcessing=false then a single-threaded worker pool is created and used by the aggregator.\nCamels routing engine works better when a dedicated worker pool that eliminates a <strong>hack</strong> that otherwise was needed in other EIPs that was affected if using the aggregator in some special configurations.</p>\n</blockquote>\n<p>Any ideas on how to solve that are highly appreciated!</p>\n"},{"tags":["javascript","java","datatables","thymeleaf"],"comment_count":0,"is_answered":false,"view_count":22,"answer_count":0,"score":-1,"last_activity_date":1701271506,"creation_date":1701271506,"question_id":77572474,"body_markdown":"I have a spring boot application and thymeleaf as the fronted engine. I want to render the data with DataTables and not thymeleaf.\r\n\r\nThe problem is the user must have the role of **EDITOR** in order to render the edit/delete form. So if I&#39;m correct I&#39;ll need to pass the authorities of the current user in the response?\r\n\r\nThis code depicts me trying to return the ROLES in the response:\r\n```\r\n@PostMapping(&quot;/data-endpoint&quot;)\r\npublic ResponseEntity&lt;?&gt; getDataForDataTable(\r\n    // ... (existing method parameters)\r\n) {\r\n    // ... (existing method implementation)\r\n\r\n    // Extracting user authorities\r\n    Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();\r\n    List&lt;String&gt; authorityStrings = authorities.stream()\r\n        .map(GrantedAuthority::getAuthority)\r\n        .collect(Collectors.toList());\r\n\r\n    // ... (existing code)\r\n\r\n    // Adding authorities to the response\r\n    response.put(&quot;authorities&quot;, authorityStrings);\r\n    response.put(&quot;username&quot;, username);\r\n\r\n    // ... (existing code)\r\n\r\n    return ResponseEntity.ok(response);\r\n}\r\n```\r\nSo in the DataTable initialization this is what I did:\r\n```\r\n{\r\n    &quot;data&quot;: null,\r\n    &quot;render&quot;: function (data, type, row) {\r\n        let authorities = json.authorities || [];\r\n        let hasEditorRole = authorities.includes(&#39;EDITOR&#39;);\r\n        // ... (existing code)\r\n    },\r\n    &quot;orderable&quot;: false\r\n}\r\n```\r\nI&#39;m seeing the error `Uncaught ReferenceError: json is not defined`\r\n\r\nOr is it possible that it would work the same way as in the HTML:\r\n```\r\n&lt;form th:if=&quot;${#lists.contains(roles, &#39;EDITOR&#39;)}&quot;  style=&quot;display:inline !important;&quot; th:action=&quot;@{/touchPoint/delete/}&quot; method=&quot;post&quot; onsubmit=&quot;return confirm(&#39;Do you really want to delete this Assignment? This action cannot be reversed.&#39;);&quot;&gt;\r\n                                                            &lt;input type=&quot;hidden&quot; name=&quot;id&quot; th:value=&quot;*{TouchPointID}&quot;/&gt;\r\n                                                            &lt;button  class=&quot;form-command btn btn-danger btn-sm&quot; type=&quot;submit&quot; &gt;&lt;i class=&quot;fa fa-trash-o&quot;&gt;&lt;/i&gt;&lt;/button&gt;\r\n                                                        &lt;/form&gt;\r\n```\r\nWould it work the same if I were to render the form above as is in the DataTable column? I have no data in the table so I can&#39;t test","link":"https://stackoverflow.com/questions/77572474/how-to-conditionally-render-a-form-based-on-the-current-users-role-with-datatab","title":"How to conditionally render a form based on the current user&#39;s role with DataTables?","body":"<p>I have a spring boot application and thymeleaf as the fronted engine. I want to render the data with DataTables and not thymeleaf.</p>\n<p>The problem is the user must have the role of <strong>EDITOR</strong> in order to render the edit/delete form. So if I'm correct I'll need to pass the authorities of the current user in the response?</p>\n<p>This code depicts me trying to return the ROLES in the response:</p>\n<pre><code>@PostMapping(&quot;/data-endpoint&quot;)\npublic ResponseEntity&lt;?&gt; getDataForDataTable(\n    // ... (existing method parameters)\n) {\n    // ... (existing method implementation)\n\n    // Extracting user authorities\n    Collection&lt;? extends GrantedAuthority&gt; authorities = authentication.getAuthorities();\n    List&lt;String&gt; authorityStrings = authorities.stream()\n        .map(GrantedAuthority::getAuthority)\n        .collect(Collectors.toList());\n\n    // ... (existing code)\n\n    // Adding authorities to the response\n    response.put(&quot;authorities&quot;, authorityStrings);\n    response.put(&quot;username&quot;, username);\n\n    // ... (existing code)\n\n    return ResponseEntity.ok(response);\n}\n</code></pre>\n<p>So in the DataTable initialization this is what I did:</p>\n<pre><code>{\n    &quot;data&quot;: null,\n    &quot;render&quot;: function (data, type, row) {\n        let authorities = json.authorities || [];\n        let hasEditorRole = authorities.includes('EDITOR');\n        // ... (existing code)\n    },\n    &quot;orderable&quot;: false\n}\n</code></pre>\n<p>I'm seeing the error <code>Uncaught ReferenceError: json is not defined</code></p>\n<p>Or is it possible that it would work the same way as in the HTML:</p>\n<pre><code>&lt;form th:if=&quot;${#lists.contains(roles, 'EDITOR')}&quot;  style=&quot;display:inline !important;&quot; th:action=&quot;@{/touchPoint/delete/}&quot; method=&quot;post&quot; onsubmit=&quot;return confirm('Do you really want to delete this Assignment? This action cannot be reversed.');&quot;&gt;\n                                                            &lt;input type=&quot;hidden&quot; name=&quot;id&quot; th:value=&quot;*{TouchPointID}&quot;/&gt;\n                                                            &lt;button  class=&quot;form-command btn btn-danger btn-sm&quot; type=&quot;submit&quot; &gt;&lt;i class=&quot;fa fa-trash-o&quot;&gt;&lt;/i&gt;&lt;/button&gt;\n                                                        &lt;/form&gt;\n</code></pre>\n<p>Would it work the same if I were to render the form above as is in the DataTable column? I have no data in the table so I can't test</p>\n"},{"tags":["java","android","bluetooth","broadcastreceiver"],"comment_count":0,"is_answered":false,"view_count":80,"answer_count":0,"score":0,"last_activity_date":1701271341,"creation_date":1673807844,"question_id":75127500,"body_markdown":"I&#39;m trying to start the bluetooth sco to be able to record a call through bluetooth headset but every tim i execute the code , it returns disconencted even though bluetooth is on and headsets are connected , any reason why Thank you .\r\n\r\n\r\n * Manifest File\r\n\r\n```\r\n    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BROADCAST_STICKY&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; android:required=&quot;false&quot; /&gt;\r\n```\r\n\r\n * Registering receiver\r\n\r\n```\r\n // register new receiver for bluetooth headset\r\n        IntentFilter intentFilter =  new IntentFilter();\r\n        intentFilter.addAction(AudioManager.ACTION_SCO_AUDIO_STATE_UPDATED); // API 14\r\n        registerReceiver(broadcastReceiver,intentFilter);\r\n\r\n        audioManager.setMode(AudioManager.MODE_IN_CALL);\r\n        audioManager.startBluetoothSco();\r\n\r\n        if(audioManager.isBluetoothScoOn()){\r\n            Log.d(&quot;TAG&quot;,&quot;True&quot;);\r\n        } else  {\r\n            Log.d(&quot;TAG&quot;,&quot;False&quot;);\r\n        }\r\n```\r\n\r\n * Receiver code \r\n\r\n```\r\n  private final BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            int state = intent.getIntExtra(AudioManager.EXTRA_SCO_AUDIO_STATE,-1);\r\n            if (state == AudioManager.SCO_AUDIO_STATE_CONNECTED) {\r\n                // Start recording audio\r\n                isConnected = true;\r\n                Log.d(&quot;TAG&quot;,&quot;audio connected&quot;);\r\n            } else if(state == AudioManager.SCO_AUDIO_STATE_DISCONNECTED){\r\n                Log.d(&quot;TAG&quot;,&quot;audio Disconnected&quot;);\r\n            } else if (state == AudioManager.SCO_AUDIO_STATE_CONNECTING){\r\n                Log.d(&quot;TAG&quot;,&quot;audio Connecting&quot;);\r\n            }\r\n        }\r\n    };\r\n```\r\n\r\n  * LOGS\r\n\r\n[![enter image description here][1]][1]\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/F4r2R.png","link":"https://stackoverflow.com/questions/75127500/startbluetoothsco-always-return-disconnected","title":"startBluetoothSco always return disconnected","body":"<p>I'm trying to start the bluetooth sco to be able to record a call through bluetooth headset but every tim i execute the code , it returns disconencted even though bluetooth is on and headsets are connected , any reason why Thank you .</p>\n<ul>\n<li>Manifest File</li>\n</ul>\n<pre><code>    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BROADCAST_STICKY&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; android:required=&quot;false&quot; /&gt;\n</code></pre>\n<ul>\n<li>Registering receiver</li>\n</ul>\n<pre><code> // register new receiver for bluetooth headset\n        IntentFilter intentFilter =  new IntentFilter();\n        intentFilter.addAction(AudioManager.ACTION_SCO_AUDIO_STATE_UPDATED); // API 14\n        registerReceiver(broadcastReceiver,intentFilter);\n\n        audioManager.setMode(AudioManager.MODE_IN_CALL);\n        audioManager.startBluetoothSco();\n\n        if(audioManager.isBluetoothScoOn()){\n            Log.d(&quot;TAG&quot;,&quot;True&quot;);\n        } else  {\n            Log.d(&quot;TAG&quot;,&quot;False&quot;);\n        }\n</code></pre>\n<ul>\n<li>Receiver code</li>\n</ul>\n<pre><code>  private final BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            int state = intent.getIntExtra(AudioManager.EXTRA_SCO_AUDIO_STATE,-1);\n            if (state == AudioManager.SCO_AUDIO_STATE_CONNECTED) {\n                // Start recording audio\n                isConnected = true;\n                Log.d(&quot;TAG&quot;,&quot;audio connected&quot;);\n            } else if(state == AudioManager.SCO_AUDIO_STATE_DISCONNECTED){\n                Log.d(&quot;TAG&quot;,&quot;audio Disconnected&quot;);\n            } else if (state == AudioManager.SCO_AUDIO_STATE_CONNECTING){\n                Log.d(&quot;TAG&quot;,&quot;audio Connecting&quot;);\n            }\n        }\n    };\n</code></pre>\n<ul>\n<li>LOGS</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/F4r2R.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F4r2R.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java"],"comments":[{"score":1,"post_type":"question","creation_date":1701243219,"post_id":77569287,"comment_id":136749992,"body_markdown":"Please share the code you have tried with. Stack Overflow can help you troubleshoot existing code, not write it for you. To learn more about how the community can help you, please take the [tour](https://stackoverflow.com/tour) and read [How to Ask](https://stackoverflow.com/questions/how-to-ask).","link":"https://stackoverflow.com/questions/77569287/how-to-make-custom-scrollbar-for-listview-that-can-scroll-the-list#comment136749992_77569287","body":"Please share the code you have tried with. Stack Overflow can help you troubleshoot existing code, not write it for you. To learn more about how the community can help you, please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"comment_count":1,"is_answered":false,"view_count":20,"answer_count":0,"score":-1,"last_activity_date":1701271093,"creation_date":1701243097,"last_edit_date":1701271093,"question_id":77569287,"body_markdown":"I have tried some XML and Java solutions, but they didn&#39;t work. Does anyone have a correct solution to drag a ListView up and down with custom scrollbars with images? ","link":"https://stackoverflow.com/questions/77569287/how-to-make-custom-scrollbar-for-listview-that-can-scroll-the-list","title":"How to make custom scrollbar for ListView that can scroll the list?","body":"<p>I have tried some XML and Java solutions, but they didn't work. Does anyone have a correct solution to drag a ListView up and down with custom scrollbars with images?</p>\n"},{"tags":["java","json","spring","spring-boot","converters"],"comments":[{"score":0,"post_type":"question","creation_date":1701271524,"post_id":77571753,"comment_id":136755503,"body_markdown":"used jackson and lombok together and fails to find suitable constructor or factory method to deserialize a JSON string into an object.  `@Value\n@Builder\npublic class CountryDTO {\n\n    @JsonIgnore\n    private Long id;\n\n    private String countryName;\n\n    @JsonCreator\n    CountryDTO(\n            @JsonProperty(&quot;id&quot;) final Long id,\n            @JsonProperty(&quot;countryName&quot;) final String countryName) {\n        this.id = id;\n        this.countryName = countryName;\n    }\n}`","link":"https://stackoverflow.com/questions/77571753/spring-boot-converter-doesnt-work-in-rest-calls#comment136755503_77571753","body":"used jackson and lombok together and fails to find suitable constructor or factory method to deserialize a JSON string into an object.  <code>@Value @Builder public class CountryDTO {      @JsonIgnore     private Long id;      private String countryName;      @JsonCreator     CountryDTO(             @JsonProperty(&quot;id&quot;) final Long id,             @JsonProperty(&quot;countryName&quot;) final String countryName) {         this.id = id;         this.countryName = countryName;     } }</code>"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701272889,"post_id":77572259,"comment_id":136755791,"body_markdown":"Thanks a lot! The custom deserializer works perfectly fine.\nI have checked a lot of resources, but never seen anything mentioned about converters not working for deserialization. But I should have known and should have been able to think about custom deserialization class instead of converter.","link":"https://stackoverflow.com/questions/77571753/spring-boot-converter-doesnt-work-in-rest-calls/77572259#comment136755791_77572259","body":"Thanks a lot! The custom deserializer works perfectly fine. I have checked a lot of resources, but never seen anything mentioned about converters not working for deserialization. But I should have known and should have been able to think about custom deserialization class instead of converter."},{"score":1,"post_type":"answer","creation_date":1701273082,"post_id":77572259,"comment_id":136755832,"body_markdown":"I am glad to help, cheers.","link":"https://stackoverflow.com/questions/77571753/spring-boot-converter-doesnt-work-in-rest-calls/77572259#comment136755832_77572259","body":"I am glad to help, cheers."}],"comment_count":2,"score":1,"last_activity_date":1701270886,"last_edit_date":1701270886,"creation_date":1701269822,"answer_id":77572259,"question_id":77571753,"body_markdown":"Converter interface you implemented from \r\n\r\n&gt; org.springframework.core.convert.converter.Converter\r\n\r\nis primarily used for type conversion in the application layer, like converting between different object types within the service or controller layers. However, it is not directly involved in HTTP message conversion.\r\n\r\nWhen processing JSON data, Spring Boot uses Jackson by default to serialize and deserialize the request and response bodies. Jackson, in this case, does not automatically utilize the Spring Converter interface for JSON deserialization.\r\n\r\nYou have a couple of options:\r\n1) Implement a custom deserializer for Jackson\r\n2) Modify the UserDTO class\r\n\r\nWhen it comes to JSON data handling in @RestController, integration with Jackson is necessary for it to be applicable in JSON deserialization.\r\n\r\nExample:\r\n\r\n       public class CountryDTODeserializer extends JsonDeserializer&lt;CountryDTO&gt; {\r\n    \r\n        private final CountryService countryService;\r\n    \r\n        public CountryDTODeserializer(CountryService countryService) {\r\n            this.countryService = countryService;\r\n        }\r\n    \r\n        @Override\r\n        public CountryDTO deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\r\n            JsonNode node = jsonParser.getCodec().readTree(jsonParser);\r\n            Long id = node.asLong(); // Something like this\r\n    \r\n            try {\r\n                return countryService.findById(id);\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(&quot;Error during deserialization&quot;, e);\r\n            }\r\n        }\r\n    }\r\n\r\nAlso don&#39;t forget to put the following annotation:\r\n\r\n     @JsonDeserialize(using = CountryDTODeserializer.class)\r\n     @NotNull(message = &quot;Country is required&quot;)\r\n     private CountryDTO country;","link":"https://stackoverflow.com/questions/77571753/spring-boot-converter-doesnt-work-in-rest-calls/77572259#77572259","title":"Spring Boot Converter Doesn&#39;t Work in REST Calls","body":"<p>Converter interface you implemented from</p>\n<blockquote>\n<p>org.springframework.core.convert.converter.Converter</p>\n</blockquote>\n<p>is primarily used for type conversion in the application layer, like converting between different object types within the service or controller layers. However, it is not directly involved in HTTP message conversion.</p>\n<p>When processing JSON data, Spring Boot uses Jackson by default to serialize and deserialize the request and response bodies. Jackson, in this case, does not automatically utilize the Spring Converter interface for JSON deserialization.</p>\n<p>You have a couple of options:</p>\n<ol>\n<li>Implement a custom deserializer for Jackson</li>\n<li>Modify the UserDTO class</li>\n</ol>\n<p>When it comes to JSON data handling in @RestController, integration with Jackson is necessary for it to be applicable in JSON deserialization.</p>\n<p>Example:</p>\n<pre><code>   public class CountryDTODeserializer extends JsonDeserializer&lt;CountryDTO&gt; {\n\n    private final CountryService countryService;\n\n    public CountryDTODeserializer(CountryService countryService) {\n        this.countryService = countryService;\n    }\n\n    @Override\n    public CountryDTO deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\n        JsonNode node = jsonParser.getCodec().readTree(jsonParser);\n        Long id = node.asLong(); // Something like this\n\n        try {\n            return countryService.findById(id);\n        } catch (Exception e) {\n            throw new RuntimeException(&quot;Error during deserialization&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>Also don't forget to put the following annotation:</p>\n<pre><code> @JsonDeserialize(using = CountryDTODeserializer.class)\n @NotNull(message = &quot;Country is required&quot;)\n private CountryDTO country;\n</code></pre>\n"}],"comment_count":1,"is_answered":true,"view_count":60,"answer_count":1,"score":0,"last_activity_date":1701270886,"creation_date":1701266013,"last_edit_date":1701266324,"question_id":77571753,"body_markdown":"I&#39;m trying to use Converter to convert **String** input coming from POST request **to CountryDTO object**. I have created CountryConverter class and implemented the Converter interface coming from Spring, I also added my converter to FormatterRegistry in my WebConfig class.\r\n\r\nIt works with normal @Controller class methods, if I use some HTML templates and forms, however, it doesn&#39;t work before any @RestController class method gets executed.\r\n\r\nThis is the message I get in the console, and I understand the reason for this message. Since my converter doesn&#39;t work, the application tries to deserialize String to a CountryDTO object, and it fails because it just cannot take String &quot;1&quot; for example, and deserialize it to a whole CountryDTO object.\r\n\r\n**Console Message:**\r\n\r\nResolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot construct instance of `com.cydeo.dto.CountryDTO` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value (&#39;1&#39;); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `com.cydeo.dto.CountryDTO` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value (&#39;1&#39;)&lt;EOL&gt; at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 5, column: 16] (through reference chain: com.cydeo.dto.UserDTO[&quot;country&quot;])]\r\n\r\nI&#39;m using **Spring Boot version 2.7.7**\r\n\r\nHere is my **JSON Request Body:**\r\n\r\n    {\r\n        &quot;username&quot;: &quot;MikeS&quot;,\r\n        &quot;password&quot;: &quot;Abc1&quot;,\r\n        &quot;country&quot;: &quot;1&quot;\r\n    }\r\n\r\nHere is my code:\r\n\r\n**My CountryConverter class:**\r\n\r\n    import com.cydeo.dto.CountryDTO;\r\n    import com.cydeo.service.CountryService;\r\n    import org.springframework.core.convert.converter.Converter;\r\n    import org.springframework.stereotype.Component;\r\n\r\n    @Component\r\n    public class CountryConverter implements Converter&lt;String, CountryDTO&gt; {\r\n\r\n        private final CountryService countryService;\r\n\r\n        public CountryConverter(CountryService countryService) {\r\n            this.countryService = countryService;\r\n        }\r\n\r\n        @Override\r\n        public CountryDTO convert(String source) {\r\n\r\n            if (source.isEmpty()) {\r\n                return null;\r\n            }\r\n\r\n            try {\r\n                return countryService.findById(Long.parseLong(source));\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                return null;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n**My WebConfig class:**\r\n\r\n    import com.cydeo.converter.CountryConverter;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.format.FormatterRegistry;\r\n    import org.springframework.web.servlet.config.annotation.EnableWebMvc;\r\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n    \r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class WebConfig implements WebMvcConfigurer {\r\n    \r\n        private final CountryConverter countryConverter;\r\n    \r\n        public WebConfig(CountryConverter countryConverter) {\r\n            this.countryConverter = countryConverter;\r\n        }\r\n    \r\n        @Override\r\n        public void addFormatters(FormatterRegistry registry) {\r\n            registry.addConverter(countryConverter);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n**My UserDTO class:**\r\n\r\n    import com.fasterxml.jackson.annotation.JsonIgnore;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Getter;\r\n    import lombok.NoArgsConstructor;\r\n    import lombok.Setter;\r\n    \r\n    import javax.validation.constraints.*;\r\n    \r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class UserDTO {\r\n    \r\n        @JsonIgnore\r\n        private Long id;\r\n    \r\n        @NotBlank(message = &quot;Username is required&quot;)\r\n        @Size(min = 3, max = 16, message = &quot;Username length should be min 2, max 16&quot;)\r\n        private String username;\r\n\r\n        @NotBlank(message = &quot;Password is required&quot;)\r\n        @Pattern(regexp = &quot;(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{4,}&quot;, message = &quot;The password should be at least 4 characters long and include at least 1 capital letter, 1 small letter and 1 digit&quot;)\r\n        private String password;\r\n\r\n        @NotNull(message = &quot;Country is required&quot;)\r\n        private CountryDTO country;\r\n    \r\n    }\r\n\r\n**My CountryDTO class:**\r\n\r\n    import com.fasterxml.jackson.annotation.JsonIgnore;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Getter;\r\n    import lombok.NoArgsConstructor;\r\n    import lombok.Setter;\r\n    \r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class CountryDTO {\r\n    \r\n        @JsonIgnore\r\n        private Long id;\r\n    \r\n        private String countryName;\r\n    \r\n    }\r\n\r\n\r\n**My UserController class:**\r\n    \r\n    import com.cydeo.dto.ResponseWrapper;\r\n    import com.cydeo.dto.UserDTO;\r\n    import com.cydeo.service.UserService;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.validation.BindingResult;\r\n    import org.springframework.validation.FieldError;\r\n    import org.springframework.web.bind.annotation.*;\r\n    \r\n    import javax.validation.Valid;\r\n    import java.util.*;\r\n    \r\n    @RestController\r\n    @RequestMapping(&quot;/api/user&quot;)\r\n    public class UserRestController {\r\n    \r\n        private final UserService userService;\r\n    \r\n        public UserRestController(UserService userService) {\r\n            this.userService = userService;\r\n        }\r\n\r\n        @PostMapping(&quot;/create&quot;)\r\n        public ResponseEntity&lt;ResponseWrapper&gt; createUser(@Valid @RequestBody UserDTO userDTO, BindingResult bindingResult) throws Exception {\r\n    \r\n            if (bindingResult.hasErrors()) {\r\n    \r\n                List&lt;FieldError&gt; fieldErrors = bindingResult.getFieldErrors();\r\n                Map&lt;String, Map&lt;String, String&gt;&gt; response = new HashMap&lt;&gt;();\r\n    \r\n                for (FieldError fieldError : fieldErrors) {\r\n    \r\n                    if (response.containsKey(fieldError.getField())) {\r\n                        response.get(fieldError.getField()).put(fieldError.getCode(), fieldError.getDefaultMessage());\r\n                    } else {\r\n                        response.put(fieldError.getField(), new HashMap&lt;&gt;());\r\n                        response.get(fieldError.getField()).put(fieldError.getCode(), fieldError.getDefaultMessage());\r\n                    }\r\n    \r\n                }\r\n    \r\n                return ResponseEntity.badRequest().body(new ResponseWrapper(false, &quot;Please check the information.&quot;, HttpStatus.BAD_REQUEST, response));\r\n    \r\n            }\r\n    \r\n            return ResponseEntity.status(HttpStatus.CREATED).body(new ResponseWrapper(&quot;User is created.&quot;, userService.create(userDTO), HttpStatus.CREATED));\r\n        }\r\n    \r\n    }\r\n\r\n","link":"https://stackoverflow.com/questions/77571753/spring-boot-converter-doesnt-work-in-rest-calls","title":"Spring Boot Converter Doesn&#39;t Work in REST Calls","body":"<p>I'm trying to use Converter to convert <strong>String</strong> input coming from POST request <strong>to CountryDTO object</strong>. I have created CountryConverter class and implemented the Converter interface coming from Spring, I also added my converter to FormatterRegistry in my WebConfig class.</p>\n<p>It works with normal @Controller class methods, if I use some HTML templates and forms, however, it doesn't work before any @RestController class method gets executed.</p>\n<p>This is the message I get in the console, and I understand the reason for this message. Since my converter doesn't work, the application tries to deserialize String to a CountryDTO object, and it fails because it just cannot take String &quot;1&quot; for example, and deserialize it to a whole CountryDTO object.</p>\n<p><strong>Console Message:</strong></p>\n<p>Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot construct instance of <code>com.cydeo.dto.CountryDTO</code> (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('1'); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of <code>com.cydeo.dto.CountryDTO</code> (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('1') at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 5, column: 16] (through reference chain: com.cydeo.dto.UserDTO[&quot;country&quot;])]</p>\n<p>I'm using <strong>Spring Boot version 2.7.7</strong></p>\n<p>Here is my <strong>JSON Request Body:</strong></p>\n<pre><code>{\n    &quot;username&quot;: &quot;MikeS&quot;,\n    &quot;password&quot;: &quot;Abc1&quot;,\n    &quot;country&quot;: &quot;1&quot;\n}\n</code></pre>\n<p>Here is my code:</p>\n<p><strong>My CountryConverter class:</strong></p>\n<pre><code>import com.cydeo.dto.CountryDTO;\nimport com.cydeo.service.CountryService;\nimport org.springframework.core.convert.converter.Converter;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class CountryConverter implements Converter&lt;String, CountryDTO&gt; {\n\n    private final CountryService countryService;\n\n    public CountryConverter(CountryService countryService) {\n        this.countryService = countryService;\n    }\n\n    @Override\n    public CountryDTO convert(String source) {\n\n        if (source.isEmpty()) {\n            return null;\n        }\n\n        try {\n            return countryService.findById(Long.parseLong(source));\n        } catch (Exception e) {\n            e.printStackTrace();\n            return null;\n        }\n    }\n\n}\n</code></pre>\n<p><strong>My WebConfig class:</strong></p>\n<pre><code>import com.cydeo.converter.CountryConverter;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.format.FormatterRegistry;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n\n    private final CountryConverter countryConverter;\n\n    public WebConfig(CountryConverter countryConverter) {\n        this.countryConverter = countryConverter;\n    }\n\n    @Override\n    public void addFormatters(FormatterRegistry registry) {\n        registry.addConverter(countryConverter);\n    }\n\n}\n</code></pre>\n<p><strong>My UserDTO class:</strong></p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonIgnore;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\nimport javax.validation.constraints.*;\n\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class UserDTO {\n\n    @JsonIgnore\n    private Long id;\n\n    @NotBlank(message = &quot;Username is required&quot;)\n    @Size(min = 3, max = 16, message = &quot;Username length should be min 2, max 16&quot;)\n    private String username;\n\n    @NotBlank(message = &quot;Password is required&quot;)\n    @Pattern(regexp = &quot;(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{4,}&quot;, message = &quot;The password should be at least 4 characters long and include at least 1 capital letter, 1 small letter and 1 digit&quot;)\n    private String password;\n\n    @NotNull(message = &quot;Country is required&quot;)\n    private CountryDTO country;\n\n}\n</code></pre>\n<p><strong>My CountryDTO class:</strong></p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonIgnore;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class CountryDTO {\n\n    @JsonIgnore\n    private Long id;\n\n    private String countryName;\n\n}\n</code></pre>\n<p><strong>My UserController class:</strong></p>\n<pre><code>import com.cydeo.dto.ResponseWrapper;\nimport com.cydeo.dto.UserDTO;\nimport com.cydeo.service.UserService;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.validation.BindingResult;\nimport org.springframework.validation.FieldError;\nimport org.springframework.web.bind.annotation.*;\n\nimport javax.validation.Valid;\nimport java.util.*;\n\n@RestController\n@RequestMapping(&quot;/api/user&quot;)\npublic class UserRestController {\n\n    private final UserService userService;\n\n    public UserRestController(UserService userService) {\n        this.userService = userService;\n    }\n\n    @PostMapping(&quot;/create&quot;)\n    public ResponseEntity&lt;ResponseWrapper&gt; createUser(@Valid @RequestBody UserDTO userDTO, BindingResult bindingResult) throws Exception {\n\n        if (bindingResult.hasErrors()) {\n\n            List&lt;FieldError&gt; fieldErrors = bindingResult.getFieldErrors();\n            Map&lt;String, Map&lt;String, String&gt;&gt; response = new HashMap&lt;&gt;();\n\n            for (FieldError fieldError : fieldErrors) {\n\n                if (response.containsKey(fieldError.getField())) {\n                    response.get(fieldError.getField()).put(fieldError.getCode(), fieldError.getDefaultMessage());\n                } else {\n                    response.put(fieldError.getField(), new HashMap&lt;&gt;());\n                    response.get(fieldError.getField()).put(fieldError.getCode(), fieldError.getDefaultMessage());\n                }\n\n            }\n\n            return ResponseEntity.badRequest().body(new ResponseWrapper(false, &quot;Please check the information.&quot;, HttpStatus.BAD_REQUEST, response));\n\n        }\n\n        return ResponseEntity.status(HttpStatus.CREATED).body(new ResponseWrapper(&quot;User is created.&quot;, userService.create(userDTO), HttpStatus.CREATED));\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","minio"],"comment_count":0,"is_answered":false,"view_count":39,"answer_count":0,"score":0,"last_activity_date":1701270513,"creation_date":1701270513,"question_id":77572337,"body_markdown":"I am trying to upgrade my spring boot application to the spring boot 3 and I am getting error regrading minio. Below you can find find files from my project.\r\n\r\nbuild.gradle.kts\r\n\r\n    dependencies {\r\n    \timplementation(&quot;org.springframework.boot:spring-boot-starter-actuator&quot;)\r\n    \timplementation(&quot;org.springframework.boot:spring-boot-starter-cache&quot;)\r\n    \timplementation(&quot;org.springframework.boot:spring-boot-starter-data-jdbc&quot;)\r\n    \timplementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n    \timplementation(&quot;org.springframework.boot:spring-boot-starter-oauth2-client&quot;)\r\n    \timplementation(&quot;org.springframework.boot:spring-boot-starter-security&quot;)\r\n    \timplementation(&quot;org.springframework.boot:spring-boot-starter-thymeleaf&quot;)\r\n    \timplementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\r\n    \timplementation(&quot;com.azure.spring:spring-cloud-azure-starter-active-directory&quot;)\r\n    \timplementation(&quot;com.azure.spring:spring-cloud-azure-starter-actuator&quot;)\r\n    \timplementation(&quot;com.fasterxml.jackson.module:jackson-module-kotlin&quot;)\r\n    \timplementation(&quot;org.jetbrains.kotlin:kotlin-reflect&quot;)\r\n    \timplementation(&quot;org.liquibase:liquibase-core&quot;)\r\n    \timplementation(&quot;org.thymeleaf.extras:thymeleaf-extras-springsecurity6&quot;)\r\n    \timplementation(&quot;org.hibernate.orm:hibernate-core:6.4.0.Final&quot;)\r\n    \timplementation(&quot;org.apache.httpcomponents.client5:httpclient5:5.2.2&quot;)\r\n    \tdevelopmentOnly(&quot;org.springframework.boot:spring-boot-devtools&quot;)\r\n    \truntimeOnly(&quot;com.h2database:h2&quot;)\r\n    \truntimeOnly(&quot;io.micrometer:micrometer-registry-prometheus&quot;)\r\n    \truntimeOnly(&quot;org.postgresql:postgresql&quot;)\r\n    \ttestImplementation(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\r\n    \ttestImplementation(&quot;org.springframework.security:spring-security-test&quot;)\r\n    \r\n    \r\n    \t//implementation(&quot;nz.net.ultraq.thymeleaf:thymeleaf-layout-dialect&quot;)\r\n    \timplementation(files(&quot;libs/jconn4.jar&quot;))\r\n    \t//implementation(&quot;org.springframework.security:spring-security-oauth2-jose&quot;)\r\n    \timplementation(&quot;com.jlefebure:spring-boot-starter-minio:1.1&quot;)\r\n    \timplementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8&quot;)\r\n    \ttestImplementation(&quot;de.cronn:test-utils:0.9.0&quot;)\r\n    \timplementation(&quot;com.fasterxml.jackson.dataformat:jackson-dataformat-csv&quot;)\r\n    \timplementation(&quot;org.webjars:bootstrap:5.3.0&quot;)\r\n    \timplementation(&quot;org.webjars:jquery:3.6.0&quot;)\r\n    \timplementation(&quot;org.webjars:jquery-validation:1.19.3&quot;)\r\n    \timplementation(&quot;org.webjars.npm:swiper:8.3.2&quot;)\r\n    \timplementation(&quot;org.webjars.npm:panzoom__panzoom:4.5.1&quot;)\r\n    \timplementation(&quot;org.webjars.npm:notiflix:3.2.5&quot;)\r\n    \timplementation(&quot;org.webjars:selectize.js:0.12.4&quot;)\r\n    \timplementation(&quot;org.webjars:select2:4.0.13&quot;)\r\n    \timplementation(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\r\n    \timplementation(&quot;org.apache.logging.log4j:log4j-to-slf4j:2.14.1&quot;)\r\n    \timplementation(&quot;org.apache.logging.log4j:log4j-api:2.14.1&quot;)\r\n    \timplementation(&quot;org.apache.poi:poi-ooxml:5.1.0&quot;)\r\n    \timplementation(&quot;org.springdoc:springdoc-openapi-ui:1.7.0&quot;)\r\n    \timplementation(&quot;org.apache.poi:poi:5.2.3&quot;)\r\n    }\r\n\r\nconfig.kt\r\n\r\n    package se.astrego.centralDatabase\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired\r\n    import org.springframework.context.annotation.Configuration\r\n    import org.springframework.scheduling.annotation.EnableScheduling\r\n    import org.springframework.scheduling.annotation.Scheduled\r\n    import org.springframework.transaction.annotation.Transactional\r\n    import se.astrego.centralDatabase.repositories.AssayRepository\r\n    import se.astrego.centralDatabase.repositories.enteties.Assay\r\n    import se.astrego.centralDatabase.repositories.enteties.FinalQcAssayRepo\r\n    import se.astrego.centralDatabase.services.AssayService\r\n    import java.io.File\r\n    import java.nio.file.Paths\r\n    import java.util.*\r\n    \r\n    \r\n    @Configuration\r\n    @EnableScheduling\r\n    class Config @Autowired constructor(\r\n        val repository: AssayRepository,\r\n        val assayService: AssayService,\r\n        val finalQcAssayRepo: FinalQcAssayRepo\r\n    ) {\r\n    \r\n        //my code\r\n    }\r\n\r\nCentralDatabaseApplication.kt\r\n\r\n    package se.astrego.centralDatabase\r\n    \r\n    import org.apache.catalina.Context\r\n    import org.apache.catalina.connector.Connector\r\n    import org.apache.tomcat.util.descriptor.web.SecurityCollection\r\n    import org.apache.tomcat.util.descriptor.web.SecurityConstraint\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication\r\n    import org.springframework.boot.context.properties.ConfigurationPropertiesScan\r\n    import org.springframework.boot.runApplication\r\n    import org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory\r\n    import org.springframework.boot.web.servlet.server.ServletWebServerFactory\r\n    import org.springframework.cache.annotation.EnableCaching\r\n    import org.springframework.context.annotation.Bean\r\n    import org.springframework.stereotype.Component\r\n    \r\n    \r\n    @SpringBootApplication\r\n    @EnableCaching\r\n    @ConfigurationPropertiesScan(&quot;se.astrego.centralDatabase.services.monitor&quot;)\r\n    class CentralDatabaseApplication\r\n    \r\n    fun main(args: Array&lt;String&gt;) {\r\n    \trunApplication&lt;CentralDatabaseApplication&gt;(*args)\r\n    }\r\n    \r\n    @Component\r\n    class ServletConfig(){\r\n    \t@Bean\r\n    \tfun servletContainer(): ServletWebServerFactory? {\r\n    \t\tval tomcat: TomcatServletWebServerFactory = object : TomcatServletWebServerFactory() {\r\n    \t\t\toverride fun postProcessContext(context: Context) {\r\n    \t\t\t\tval securityConstraint = SecurityConstraint()\r\n    \t\t\t\tsecurityConstraint.userConstraint = &quot;CONFIDENTIAL&quot;\r\n    \t\t\t\tval collection = SecurityCollection()\r\n    \t\t\t\tcollection.addPattern(&quot;/*&quot;)\r\n    \t\t\t\tsecurityConstraint.addCollection(collection)\r\n    \t\t\t\tcontext.addConstraint(securityConstraint)\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\ttomcat.addAdditionalTomcatConnectors(redirectConnector())\r\n    \t\treturn tomcat\r\n    \t}\r\n    \r\n    \tfun redirectConnector(): Connector {\r\n    \t\tval connector = Connector(&quot;org.apache.coyote.http11.Http11NioProtocol&quot;)\r\n    \t\tconnector.scheme = &quot;http&quot;\r\n    \t\tconnector.port = 8080\r\n    \t\tconnector.secure = false\r\n    \t\tconnector.redirectPort = 8443\r\n    \t\treturn connector\r\n    \t}\r\n    }\r\n\r\nFileApiController.kt\r\n\r\n    package se.astrego.centralDatabase.apiControllers\r\n    \r\n    \r\n    import com.jlefebure.spring.boot.minio.MinioService\r\n    import org.springframework.beans.factory.annotation.Autowired\r\n    import org.springframework.http.HttpStatus\r\n    import org.springframework.web.bind.annotation.*\r\n    import org.springframework.web.multipart.MultipartFile\r\n    import se.astrego.centralDatabase.apiControllers.DTOs.FileMetadata\r\n    import se.astrego.centralDatabase.services.LocalFilesService\r\n    import java.io.ByteArrayInputStream\r\n    import java.io.ByteArrayOutputStream\r\n    import java.io.FileNotFoundException\r\n    import java.io.InputStream\r\n    import java.nio.file.Path\r\n    import java.nio.file.Paths\r\n    import javax.imageio.ImageIO\r\n    \r\n    val NOT_CHIP_ID_ERROR_MESSAGE = &quot;Expected full chip id and NOT with sputter-tray-position: %s&quot;;\r\n    \r\n    \r\n    @RestController\r\n    \r\n    class FileApiController {\r\n    \r\n        @Autowired\r\n        private lateinit var minioService: MinioService\r\n        @Autowired\r\n        private lateinit var localFilesService: LocalFilesService\r\n    \r\n    \r\n        @GetMapping(&quot;/api/files&quot;)\r\n        fun getAllFiles(): List&lt;FileMetadata&gt; {\r\n            return minioService.list().map {\r\n                FileMetadata(it,&quot;/api/file/&quot; + it.objectName())\r\n            }\r\n        }\r\n    \r\n        // other code\r\n    }\r\n\r\nWhile running project I am getting \r\n\r\n    Field minioService in se.astrego.centralDatabase.apiControllers.FileApiController required a bean of type &#39;com.jlefebure.spring.boot.minio.MinioService&#39; that could not be found.\r\n    \r\n    The injection point has the following annotations:\r\n            - @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider defining a bean of type &#39;com.jlefebure.spring.boot.minio.MinioService&#39; in your configuration.\r\n\r\nhow to resolve it. any help appreciated","link":"https://stackoverflow.com/questions/77572337/spring-boot-starter-minio-gives-error-bean-of-type-that-could-not-be-found-fo","title":"Spring boot starter minio gives error &quot;bean of type that could not be found &quot; for spring boot 3","body":"<p>I am trying to upgrade my spring boot application to the spring boot 3 and I am getting error regrading minio. Below you can find find files from my project.</p>\n<p>build.gradle.kts</p>\n<pre><code>dependencies {\n    implementation(&quot;org.springframework.boot:spring-boot-starter-actuator&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-cache&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jdbc&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-oauth2-client&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-security&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-thymeleaf&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\n    implementation(&quot;com.azure.spring:spring-cloud-azure-starter-active-directory&quot;)\n    implementation(&quot;com.azure.spring:spring-cloud-azure-starter-actuator&quot;)\n    implementation(&quot;com.fasterxml.jackson.module:jackson-module-kotlin&quot;)\n    implementation(&quot;org.jetbrains.kotlin:kotlin-reflect&quot;)\n    implementation(&quot;org.liquibase:liquibase-core&quot;)\n    implementation(&quot;org.thymeleaf.extras:thymeleaf-extras-springsecurity6&quot;)\n    implementation(&quot;org.hibernate.orm:hibernate-core:6.4.0.Final&quot;)\n    implementation(&quot;org.apache.httpcomponents.client5:httpclient5:5.2.2&quot;)\n    developmentOnly(&quot;org.springframework.boot:spring-boot-devtools&quot;)\n    runtimeOnly(&quot;com.h2database:h2&quot;)\n    runtimeOnly(&quot;io.micrometer:micrometer-registry-prometheus&quot;)\n    runtimeOnly(&quot;org.postgresql:postgresql&quot;)\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\n    testImplementation(&quot;org.springframework.security:spring-security-test&quot;)\n\n\n    //implementation(&quot;nz.net.ultraq.thymeleaf:thymeleaf-layout-dialect&quot;)\n    implementation(files(&quot;libs/jconn4.jar&quot;))\n    //implementation(&quot;org.springframework.security:spring-security-oauth2-jose&quot;)\n    implementation(&quot;com.jlefebure:spring-boot-starter-minio:1.1&quot;)\n    implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8&quot;)\n    testImplementation(&quot;de.cronn:test-utils:0.9.0&quot;)\n    implementation(&quot;com.fasterxml.jackson.dataformat:jackson-dataformat-csv&quot;)\n    implementation(&quot;org.webjars:bootstrap:5.3.0&quot;)\n    implementation(&quot;org.webjars:jquery:3.6.0&quot;)\n    implementation(&quot;org.webjars:jquery-validation:1.19.3&quot;)\n    implementation(&quot;org.webjars.npm:swiper:8.3.2&quot;)\n    implementation(&quot;org.webjars.npm:panzoom__panzoom:4.5.1&quot;)\n    implementation(&quot;org.webjars.npm:notiflix:3.2.5&quot;)\n    implementation(&quot;org.webjars:selectize.js:0.12.4&quot;)\n    implementation(&quot;org.webjars:select2:4.0.13&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\n    implementation(&quot;org.apache.logging.log4j:log4j-to-slf4j:2.14.1&quot;)\n    implementation(&quot;org.apache.logging.log4j:log4j-api:2.14.1&quot;)\n    implementation(&quot;org.apache.poi:poi-ooxml:5.1.0&quot;)\n    implementation(&quot;org.springdoc:springdoc-openapi-ui:1.7.0&quot;)\n    implementation(&quot;org.apache.poi:poi:5.2.3&quot;)\n}\n</code></pre>\n<p>config.kt</p>\n<pre><code>package se.astrego.centralDatabase\n\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.context.annotation.Configuration\nimport org.springframework.scheduling.annotation.EnableScheduling\nimport org.springframework.scheduling.annotation.Scheduled\nimport org.springframework.transaction.annotation.Transactional\nimport se.astrego.centralDatabase.repositories.AssayRepository\nimport se.astrego.centralDatabase.repositories.enteties.Assay\nimport se.astrego.centralDatabase.repositories.enteties.FinalQcAssayRepo\nimport se.astrego.centralDatabase.services.AssayService\nimport java.io.File\nimport java.nio.file.Paths\nimport java.util.*\n\n\n@Configuration\n@EnableScheduling\nclass Config @Autowired constructor(\n    val repository: AssayRepository,\n    val assayService: AssayService,\n    val finalQcAssayRepo: FinalQcAssayRepo\n) {\n\n    //my code\n}\n</code></pre>\n<p>CentralDatabaseApplication.kt</p>\n<pre><code>package se.astrego.centralDatabase\n\nimport org.apache.catalina.Context\nimport org.apache.catalina.connector.Connector\nimport org.apache.tomcat.util.descriptor.web.SecurityCollection\nimport org.apache.tomcat.util.descriptor.web.SecurityConstraint\nimport org.springframework.boot.autoconfigure.SpringBootApplication\nimport org.springframework.boot.context.properties.ConfigurationPropertiesScan\nimport org.springframework.boot.runApplication\nimport org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory\nimport org.springframework.boot.web.servlet.server.ServletWebServerFactory\nimport org.springframework.cache.annotation.EnableCaching\nimport org.springframework.context.annotation.Bean\nimport org.springframework.stereotype.Component\n\n\n@SpringBootApplication\n@EnableCaching\n@ConfigurationPropertiesScan(&quot;se.astrego.centralDatabase.services.monitor&quot;)\nclass CentralDatabaseApplication\n\nfun main(args: Array&lt;String&gt;) {\n    runApplication&lt;CentralDatabaseApplication&gt;(*args)\n}\n\n@Component\nclass ServletConfig(){\n    @Bean\n    fun servletContainer(): ServletWebServerFactory? {\n        val tomcat: TomcatServletWebServerFactory = object : TomcatServletWebServerFactory() {\n            override fun postProcessContext(context: Context) {\n                val securityConstraint = SecurityConstraint()\n                securityConstraint.userConstraint = &quot;CONFIDENTIAL&quot;\n                val collection = SecurityCollection()\n                collection.addPattern(&quot;/*&quot;)\n                securityConstraint.addCollection(collection)\n                context.addConstraint(securityConstraint)\n            }\n        }\n        tomcat.addAdditionalTomcatConnectors(redirectConnector())\n        return tomcat\n    }\n\n    fun redirectConnector(): Connector {\n        val connector = Connector(&quot;org.apache.coyote.http11.Http11NioProtocol&quot;)\n        connector.scheme = &quot;http&quot;\n        connector.port = 8080\n        connector.secure = false\n        connector.redirectPort = 8443\n        return connector\n    }\n}\n</code></pre>\n<p>FileApiController.kt</p>\n<pre><code>package se.astrego.centralDatabase.apiControllers\n\n\nimport com.jlefebure.spring.boot.minio.MinioService\nimport org.springframework.beans.factory.annotation.Autowired\nimport org.springframework.http.HttpStatus\nimport org.springframework.web.bind.annotation.*\nimport org.springframework.web.multipart.MultipartFile\nimport se.astrego.centralDatabase.apiControllers.DTOs.FileMetadata\nimport se.astrego.centralDatabase.services.LocalFilesService\nimport java.io.ByteArrayInputStream\nimport java.io.ByteArrayOutputStream\nimport java.io.FileNotFoundException\nimport java.io.InputStream\nimport java.nio.file.Path\nimport java.nio.file.Paths\nimport javax.imageio.ImageIO\n\nval NOT_CHIP_ID_ERROR_MESSAGE = &quot;Expected full chip id and NOT with sputter-tray-position: %s&quot;;\n\n\n@RestController\n\nclass FileApiController {\n\n    @Autowired\n    private lateinit var minioService: MinioService\n    @Autowired\n    private lateinit var localFilesService: LocalFilesService\n\n\n    @GetMapping(&quot;/api/files&quot;)\n    fun getAllFiles(): List&lt;FileMetadata&gt; {\n        return minioService.list().map {\n            FileMetadata(it,&quot;/api/file/&quot; + it.objectName())\n        }\n    }\n\n    // other code\n}\n</code></pre>\n<p>While running project I am getting</p>\n<pre><code>Field minioService in se.astrego.centralDatabase.apiControllers.FileApiController required a bean of type 'com.jlefebure.spring.boot.minio.MinioService' that could not be found.\n\nThe injection point has the following annotations:\n        - @org.springframework.beans.factory.annotation.Autowired(required=true)\n\n\nAction:\n\nConsider defining a bean of type 'com.jlefebure.spring.boot.minio.MinioService' in your configuration.\n</code></pre>\n<p>how to resolve it. any help appreciated</p>\n"},{"tags":["java","spring-boot","redis"],"comment_count":0,"is_answered":false,"view_count":15,"answer_count":0,"score":-1,"last_activity_date":1701270502,"creation_date":1701267371,"last_edit_date":1701270502,"question_id":77571924,"body_markdown":"When the subscriber/listener completes execution, i wish to publish a new event to redis within the ***onMessage*** method in the subscriber.\r\n\r\n***RedisLettuceConfiguration***\r\n\r\n```\r\n@Configuration\r\npublic class RedisLettuceConfiguration {\r\n\r\n    @Bean\r\n    LettuceConnectionFactory lettuceConnectionFactory() {\r\n        RedisStandaloneConfiguration configuration = new RedisStandaloneConfiguration();\r\n        configuration.setHostName(OcrService.dotenv != null ? OcrService.dotenv.get(&quot;REDIS_HOST&quot;) : &quot;127.0.0.1&quot;);\r\n        configuration.setPassword(OcrService.dotenv != null ? OcrService.dotenv.get(&quot;REDIS_PASSWORD&quot;) : &quot;&quot;);\r\n        configuration.setPort(OcrService.dotenv != null ? (OcrService.dotenv.get(&quot;REDIS_PORT&quot;) != null ? Integer.parseInt(OcrService.dotenv.get(&quot;REDIS_PORT&quot;)) : 6379) : 6379);\r\n        return new LettuceConnectionFactory(configuration);\r\n    }\r\n\r\n    @Bean\r\n     RedisTemplate&lt;String, Object&gt; redisTemplate() {\r\n        RedisTemplate&lt;String, Object&gt; redisTemplate = new RedisTemplate&lt;&gt;();\r\n        redisTemplate.setConnectionFactory(lettuceConnectionFactory());\r\n        redisTemplate.setValueSerializer(new GenericToStringSerializer&lt;Object&gt;(Object.class));\r\n        return redisTemplate;\r\n    }\r\n\r\n    //init listeners\r\n    @Bean\r\n    RedisMessageListenerContainer container() {\r\n        final RedisMessageListenerContainer redisMessageListenerContainer = new RedisMessageListenerContainer();\r\n        redisMessageListenerContainer.setConnectionFactory(lettuceConnectionFactory());\r\n        redisMessageListenerContainer.addMessageListener(new MessageListenerAdapter(new OcrProcessorSubscriber()), new ChannelTopic(&quot;OCR-TOPIC&quot;));\r\n        return redisMessageListenerContainer;\r\n    }\r\n    //end listeners\r\n\r\n\r\n    //start publisher\r\n    @Bean\r\n      ChannelTopic topic() {\r\n        return new ChannelTopic(&quot;OCR-TOPIC&quot;);\r\n    }\r\n\r\n    @Bean\r\n    IMessagePublisher messagePublisher() {\r\n        return new OcrSuccessPublisher(redisTemplate(), topic());\r\n    }\r\n    //end publisher\r\n\r\n}\r\n```\r\n\r\n***OcrSuccessPublisher***\r\n\r\n```\r\n@Component\r\npublic class OcrSuccessPublisher implements IMessagePublisher {\r\n    @Autowired\r\n    private RedisTemplate&lt;String,Object&gt; redisTemplate;\r\n\r\n    @Autowired\r\n    private ChannelTopic topic;\r\n\r\n    public OcrSuccessPublisher(RedisTemplate&lt;String, Object&gt; redisTemplate, ChannelTopic topic) {\r\n        this.redisTemplate = redisTemplate;\r\n        this.topic = topic;\r\n    }\r\n\r\n    @Override\r\n    public void publish(String message) {\r\n        redisTemplate.convertAndSend(topic.getTopic(),message);\r\n    }\r\n}\r\n```\r\n\r\nObjective of the method below is to publish a new event after listener completes successfuly\r\n\r\n**OcrProcessorSubscriber***\r\n\r\n```\r\npublic class OcrProcessorSubscriber implements MessageListener {\r\n    private final List&lt;String&gt; messagesList = new ArrayList&lt;&gt;();\r\n\r\n    @Override\r\n    public void onMessage(Message message, byte[] pattern) {\r\n        System.out.println(&quot;Message Received:- &quot; + message.toString());\r\n\r\n//how to publish message here e.g ocrSuccessPublisher.publish(&quot;new payload to redis&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\n **SOLVED BY**\r\n1. Adding to RedisTemplate field type **OcrProcessorSubscriber** \r\n\r\n```\r\n    private RedisTemplate&lt;String, Object&gt; redisTemplate;\r\n\r\n    public OcrProcessorSubscriber(RedisTemplate&lt;String, Object&gt; redisTemplate){\r\n        this.redisTemplate=redisTemplate;\r\n    }\r\n\r\n@Override\r\n    public void onMessage(Message message, byte[] pattern) {\r\n\r\n        System.out.println(&quot;Message Received:- &quot; + message.toString());\r\n\r\n        // Publish a message to another Redis channel\r\n       new OcrSuccessPublisher(redisTemplate, new ChannelTopic(&quot;OCR-TOPIC-PROCESSED&quot;)).publish(&quot;{\\&quot;fileId\\&quot;:\\&quot;yyy\\&quot;,\\&quot;ocrStatus\\&quot;:\\&quot;PENDING\\&quot;,\\&quot;fileName\\&quot;:\\&quot;xx\\&quot;}&quot;); \r\n   }\r\n\r\n```\r\n\r\n2. Updating **RedisLettuceConfiguration** \r\n\r\n```\r\n@Bean\r\n    RedisMessageListenerContainer container() {\r\n        final RedisMessageListenerContainer redisMessageListenerContainer = new RedisMessageListenerContainer();\r\n        redisMessageListenerContainer.setConnectionFactory(lettuceConnectionFactory());\r\n        redisMessageListenerContainer.addMessageListener(new MessageListenerAdapter(new OcrProcessorSubscriber(redisTemplate())), new ChannelTopic(&quot;OCR-TOPIC&quot;));\r\n        return redisMessageListenerContainer;\r\n    }\r\n```\r\n","link":"https://stackoverflow.com/questions/77571924/java-spring-boot-redis-publish-within-the-subscribers-onmessage-method","title":"Java spring boot redis, publish within the subscriber&#39;s onMessage method","body":"<p>When the subscriber/listener completes execution, i wish to publish a new event to redis within the <em><strong>onMessage</strong></em> method in the subscriber.</p>\n<p><em><strong>RedisLettuceConfiguration</strong></em></p>\n<pre><code>@Configuration\npublic class RedisLettuceConfiguration {\n\n    @Bean\n    LettuceConnectionFactory lettuceConnectionFactory() {\n        RedisStandaloneConfiguration configuration = new RedisStandaloneConfiguration();\n        configuration.setHostName(OcrService.dotenv != null ? OcrService.dotenv.get(&quot;REDIS_HOST&quot;) : &quot;127.0.0.1&quot;);\n        configuration.setPassword(OcrService.dotenv != null ? OcrService.dotenv.get(&quot;REDIS_PASSWORD&quot;) : &quot;&quot;);\n        configuration.setPort(OcrService.dotenv != null ? (OcrService.dotenv.get(&quot;REDIS_PORT&quot;) != null ? Integer.parseInt(OcrService.dotenv.get(&quot;REDIS_PORT&quot;)) : 6379) : 6379);\n        return new LettuceConnectionFactory(configuration);\n    }\n\n    @Bean\n     RedisTemplate&lt;String, Object&gt; redisTemplate() {\n        RedisTemplate&lt;String, Object&gt; redisTemplate = new RedisTemplate&lt;&gt;();\n        redisTemplate.setConnectionFactory(lettuceConnectionFactory());\n        redisTemplate.setValueSerializer(new GenericToStringSerializer&lt;Object&gt;(Object.class));\n        return redisTemplate;\n    }\n\n    //init listeners\n    @Bean\n    RedisMessageListenerContainer container() {\n        final RedisMessageListenerContainer redisMessageListenerContainer = new RedisMessageListenerContainer();\n        redisMessageListenerContainer.setConnectionFactory(lettuceConnectionFactory());\n        redisMessageListenerContainer.addMessageListener(new MessageListenerAdapter(new OcrProcessorSubscriber()), new ChannelTopic(&quot;OCR-TOPIC&quot;));\n        return redisMessageListenerContainer;\n    }\n    //end listeners\n\n\n    //start publisher\n    @Bean\n      ChannelTopic topic() {\n        return new ChannelTopic(&quot;OCR-TOPIC&quot;);\n    }\n\n    @Bean\n    IMessagePublisher messagePublisher() {\n        return new OcrSuccessPublisher(redisTemplate(), topic());\n    }\n    //end publisher\n\n}\n</code></pre>\n<p><em><strong>OcrSuccessPublisher</strong></em></p>\n<pre><code>@Component\npublic class OcrSuccessPublisher implements IMessagePublisher {\n    @Autowired\n    private RedisTemplate&lt;String,Object&gt; redisTemplate;\n\n    @Autowired\n    private ChannelTopic topic;\n\n    public OcrSuccessPublisher(RedisTemplate&lt;String, Object&gt; redisTemplate, ChannelTopic topic) {\n        this.redisTemplate = redisTemplate;\n        this.topic = topic;\n    }\n\n    @Override\n    public void publish(String message) {\n        redisTemplate.convertAndSend(topic.getTopic(),message);\n    }\n}\n</code></pre>\n<p>Objective of the method below is to publish a new event after listener completes successfuly</p>\n<p><strong>OcrProcessorSubscriber</strong>*</p>\n<pre><code>public class OcrProcessorSubscriber implements MessageListener {\n    private final List&lt;String&gt; messagesList = new ArrayList&lt;&gt;();\n\n    @Override\n    public void onMessage(Message message, byte[] pattern) {\n        System.out.println(&quot;Message Received:- &quot; + message.toString());\n\n//how to publish message here e.g ocrSuccessPublisher.publish(&quot;new payload to redis&quot;);\n    }\n\n}\n</code></pre>\n<p><strong>SOLVED BY</strong></p>\n<ol>\n<li>Adding to RedisTemplate field type <strong>OcrProcessorSubscriber</strong></li>\n</ol>\n<pre><code>    private RedisTemplate&lt;String, Object&gt; redisTemplate;\n\n    public OcrProcessorSubscriber(RedisTemplate&lt;String, Object&gt; redisTemplate){\n        this.redisTemplate=redisTemplate;\n    }\n\n@Override\n    public void onMessage(Message message, byte[] pattern) {\n\n        System.out.println(&quot;Message Received:- &quot; + message.toString());\n\n        // Publish a message to another Redis channel\n       new OcrSuccessPublisher(redisTemplate, new ChannelTopic(&quot;OCR-TOPIC-PROCESSED&quot;)).publish(&quot;{\\&quot;fileId\\&quot;:\\&quot;yyy\\&quot;,\\&quot;ocrStatus\\&quot;:\\&quot;PENDING\\&quot;,\\&quot;fileName\\&quot;:\\&quot;xx\\&quot;}&quot;); \n   }\n\n</code></pre>\n<ol start=\"2\">\n<li>Updating <strong>RedisLettuceConfiguration</strong></li>\n</ol>\n<pre><code>@Bean\n    RedisMessageListenerContainer container() {\n        final RedisMessageListenerContainer redisMessageListenerContainer = new RedisMessageListenerContainer();\n        redisMessageListenerContainer.setConnectionFactory(lettuceConnectionFactory());\n        redisMessageListenerContainer.addMessageListener(new MessageListenerAdapter(new OcrProcessorSubscriber(redisTemplate())), new ChannelTopic(&quot;OCR-TOPIC&quot;));\n        return redisMessageListenerContainer;\n    }\n</code></pre>\n"},{"tags":["java","jsp","servlets","import"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1700401983,"post_id":77506767,"comment_id":136647394,"body_markdown":"@queeg Yes, you figured out that a variable should put into session. But you didn&#39;t solve the main problem: Why OP tried to import classes to the JSP. Second, you didn&#39;t read the code thoroughly to understand a business logic of the application. Your code is useless because it unknown how to apply. The workflow of the application is wrong. It will never work as expected. This and other summarize mistakes makes you answer too bad.","link":"https://stackoverflow.com/questions/77506567/cant-access-variables-in-imported-java-classes-in-jsp-file/77506767#comment136647394_77506767","body":"@queeg Yes, you figured out that a variable should put into session. But you didn&#39;t solve the main problem: Why OP tried to import classes to the JSP. Second, you didn&#39;t read the code thoroughly to understand a business logic of the application. Your code is useless because it unknown how to apply. The workflow of the application is wrong. It will never work as expected. This and other summarize mistakes makes you answer too bad."},{"score":0,"post_type":"answer","creation_date":1700564397,"post_id":77506767,"comment_id":136667546,"body_markdown":"Well I cannot &#39;solve&#39; the problem why the OP tried to import classes. But I edited my answer so this is taken into account. Like it more now?","link":"https://stackoverflow.com/questions/77506567/cant-access-variables-in-imported-java-classes-in-jsp-file/77506767#comment136667546_77506767","body":"Well I cannot &#39;solve&#39; the problem why the OP tried to import classes. But I edited my answer so this is taken into account. Like it more now?"},{"score":0,"post_type":"answer","creation_date":1700572279,"post_id":77506767,"comment_id":136668952,"body_markdown":"OP imported classes trying to  solve the problem of accessing variables in EL expressions, but OP don&#39;t know how to access them or intended access them in scriptlets, anyway it&#39;s wrong try, and we should lead OP to the right direction. Because OP can&#39;t/shouldn&#39;t access the class variables in the imported classes. This is the main idea. Then comes the second problem EL expressions didn&#39;t work, then third problem direct to JSP, then fourth problem with business logic, etc. Everything you should fix, when providing a consisting answer.","link":"https://stackoverflow.com/questions/77506567/cant-access-variables-in-imported-java-classes-in-jsp-file/77506767#comment136668952_77506767","body":"OP imported classes trying to  solve the problem of accessing variables in EL expressions, but OP don&#39;t know how to access them or intended access them in scriptlets, anyway it&#39;s wrong try, and we should lead OP to the right direction. Because OP can&#39;t/shouldn&#39;t access the class variables in the imported classes. This is the main idea. Then comes the second problem EL expressions didn&#39;t work, then third problem direct to JSP, then fourth problem with business logic, etc. Everything you should fix, when providing a consisting answer."}],"comment_count":3,"score":0,"last_activity_date":1700564337,"last_edit_date":1700564337,"creation_date":1700308330,"answer_id":77506767,"question_id":77506567,"body_markdown":"Unfortunately the `import` that you tried does not solve the problem that you describe/that is visible by looking at your code. You better remove these unnecessary reports.\r\n\r\nThe GameServlet is accessing the data from the HttpSession, but the data was never stored there.\r\n\r\nLook at how a user would go through the application. Initially he is on index.jsp which makes the browser display a form. The user fills in his username, then upon submit that username is sent to the next url: GameServlet\r\n\r\nThe GameServlet can now read the submitted username as `request.getParameter(&quot;playerName&quot;)` and store it as `getHttpSession().setAttribute(&quot;playerName&quot;, request.getParameter(&quot;playerName&quot;))`\r\n\r\nOnly after storing the attribute in the session subsequent pages/servlets will be able to read it again. So you either have to change your GameServlet, or create another servlet/JSP that stores the playername in the session.","link":"https://stackoverflow.com/questions/77506567/cant-access-variables-in-imported-java-classes-in-jsp-file/77506767#77506767","title":"Can&#39;t access variables in imported .java classes in .jsp file","body":"<p>Unfortunately the <code>import</code> that you tried does not solve the problem that you describe/that is visible by looking at your code. You better remove these unnecessary reports.</p>\n<p>The GameServlet is accessing the data from the HttpSession, but the data was never stored there.</p>\n<p>Look at how a user would go through the application. Initially he is on index.jsp which makes the browser display a form. The user fills in his username, then upon submit that username is sent to the next url: GameServlet</p>\n<p>The GameServlet can now read the submitted username as <code>request.getParameter(&quot;playerName&quot;)</code> and store it as <code>getHttpSession().setAttribute(&quot;playerName&quot;, request.getParameter(&quot;playerName&quot;))</code></p>\n<p>Only after storing the attribute in the session subsequent pages/servlets will be able to read it again. So you either have to change your GameServlet, or create another servlet/JSP that stores the playername in the session.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":147,"answer_count":1,"score":-1,"last_activity_date":1701270104,"creation_date":1700304634,"last_edit_date":1700474838,"question_id":77506567,"body_markdown":"I have a problem with importing a class into a .jsp file. When I try to import the program keeps working, but I can&#39;t access the variables. I am trying to import the GameServlet.java class into game.jsp.\r\n\r\nimport like:\r\n\r\n```lang-jsp\r\n&lt;%@ page import=&quot;com.example.TextGame, com.example.GameServlet, java.util.Scanner&quot; %&gt; \r\n```\r\n\r\nfor some reason it doesn&#39;t work\r\n\r\nThe structure of the project is:\r\n\r\n- demo\r\n  - src\r\n    - main\r\n      - java\r\n        - com.example\r\n          - GameServlet.java\r\n          - TextGame.java\r\n      - resources\r\n      - webapp\r\n        - WEB-INF\r\n          - web.xml\r\n        - game.jsp\r\n        - index.jsp\r\n  - target\r\n  - pom.xml\r\n\r\nMy .xml look like this:\r\n\r\n**xml file**\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;\r\n         version=&quot;4.0&quot;&gt;\r\n\r\n    &lt;!-- Servlet Mapping --&gt;\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;com.example.MyServlet&lt;/servlet-class&gt;\r\n    &lt;/servlet&gt;\r\n    \r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/myservlet&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n\r\n&lt;/web-app&gt;\r\n```\r\n\r\n**java** classes:\r\n\r\n**GameServlet.java**\r\n\r\n```lang-java\r\npackage com.example;\r\nimport java.io.IOException;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport javax.servlet.http.HttpSession;\r\n\r\n@WebServlet(&quot;/GameServlet&quot;)\r\npublic class GameServlet extends HttpServlet {\r\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        HttpSession session = request.getSession();\r\n        String playerName = (String) session.getAttribute(&quot;playerName&quot;);\r\n\r\n        session.setAttribute(&quot;game&quot;, new TextGame());\r\n\r\n        response.sendRedirect(&quot;game.jsp&quot;);\r\n    }\r\n}\r\n```\r\n\r\n**TextGame.java**\r\n\r\n```lang-java\r\npackage com.example;\r\n\r\npublic class TextGame {\r\n    private String currentLocation;\r\n\r\n    public TextGame() {\r\n        this.currentLocation = &quot;start&quot;;\r\n    }\r\n\r\n    public String getCurrentLocation() {\r\n        return currentLocation;\r\n    }\r\n\r\n    public void handlePlayerInput(String input) {\r\n        if (input.equalsIgnoreCase(&quot;go north&quot;)) {\r\n            currentLocation = &quot;north_location&quot;;\r\n        } else if (input.equalsIgnoreCase(&quot;go south&quot;)) {\r\n            currentLocation = &quot;south_location&quot;;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**jsp** files:\r\n\r\n**game.jsp**\r\n\r\n```lang-jsp\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\r\n&lt;%@ page import=&quot;com.example.TextGame, com.example.GameServlet, java.util.Scanner&quot; %&gt;\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;title&gt;Текстова гра - Гравець: ${sessionScope.playerName}&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n    &lt;h1&gt;Вітаємо, ${sessionScope.playerName}!&lt;/h1&gt;\r\n\r\n    &lt;p&gt;Ви знаходитесь в ${sessionScope.game.currentLocation}.&lt;/p&gt;\r\n\r\n    &lt;form action=&quot;GameServlet&quot; method=&quot;post&quot;&gt;\r\n        &lt;label for=&quot;playerInput&quot;&gt;Введіть команду:&lt;/label&gt;\r\n        &lt;input type=&quot;text&quot; id=&quot;playerInput&quot; name=&quot;playerInput&quot; required&gt;\r\n        &lt;input type=&quot;submit&quot; value=&quot;Виконати&quot;&gt;\r\n    &lt;/form&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n**index.jsp**\r\n\r\n```lang-xhtml\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;title&gt;Текстова гра&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n    &lt;form action=&quot;GameServlet&quot; method=&quot;post&quot;&gt;\r\n        &lt;label for=&quot;playerName&quot;&gt;Введіть ваше ім&#39;я:&lt;/label&gt;\r\n        &lt;input type=&quot;text&quot; id=&quot;playerName&quot; name=&quot;playerName&quot; required&gt;\r\n        &lt;input type=&quot;submit&quot; value=&quot;Почати гру&quot;&gt;\r\n    &lt;/form&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n\r\nI&#39;ve trying import like:\r\n```lang-jsp\r\n&lt;%@ page import=&quot;com.example.TextGame, com.example.GameServlet, java.util.Scanner&quot; %&gt; \r\n```\r\nor:\r\n```lang-jsp\r\n&lt;%@ page import=&quot;com.example.TextGame&quot; %&gt;\r\n&lt;%@ page import=&quot;com.example.GameServlet&quot; %&gt;\r\n&lt;%@ page import=&quot;java.util.Scanner&quot; %&gt;\r\n```\r\nbut it doesn&#39;t work ","link":"https://stackoverflow.com/questions/77506567/cant-access-variables-in-imported-java-classes-in-jsp-file","title":"Can&#39;t access variables in imported .java classes in .jsp file","body":"<p>I have a problem with importing a class into a .jsp file. When I try to import the program keeps working, but I can't access the variables. I am trying to import the GameServlet.java class into game.jsp.</p>\n<p>import like:</p>\n<pre class=\"lang-jsp prettyprint-override\"><code>&lt;%@ page import=&quot;com.example.TextGame, com.example.GameServlet, java.util.Scanner&quot; %&gt; \n</code></pre>\n<p>for some reason it doesn't work</p>\n<p>The structure of the project is:</p>\n<ul>\n<li>demo\n<ul>\n<li>src\n<ul>\n<li>main\n<ul>\n<li>java\n<ul>\n<li>com.example\n<ul>\n<li>GameServlet.java</li>\n<li>TextGame.java</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>resources</li>\n<li>webapp\n<ul>\n<li>WEB-INF\n<ul>\n<li>web.xml</li>\n</ul>\n</li>\n<li>game.jsp</li>\n<li>index.jsp</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>target</li>\n<li>pom.xml</li>\n</ul>\n</li>\n</ul>\n<p>My .xml look like this:</p>\n<p><strong>xml file</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;\n         version=&quot;4.0&quot;&gt;\n\n    &lt;!-- Servlet Mapping --&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;com.example.MyServlet&lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n    \n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;MyServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/myservlet&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n<p><strong>java</strong> classes:</p>\n<p><strong>GameServlet.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\nimport java.io.IOException;\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.http.HttpSession;\n\n@WebServlet(&quot;/GameServlet&quot;)\npublic class GameServlet extends HttpServlet {\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        HttpSession session = request.getSession();\n        String playerName = (String) session.getAttribute(&quot;playerName&quot;);\n\n        session.setAttribute(&quot;game&quot;, new TextGame());\n\n        response.sendRedirect(&quot;game.jsp&quot;);\n    }\n}\n</code></pre>\n<p><strong>TextGame.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\npublic class TextGame {\n    private String currentLocation;\n\n    public TextGame() {\n        this.currentLocation = &quot;start&quot;;\n    }\n\n    public String getCurrentLocation() {\n        return currentLocation;\n    }\n\n    public void handlePlayerInput(String input) {\n        if (input.equalsIgnoreCase(&quot;go north&quot;)) {\n            currentLocation = &quot;north_location&quot;;\n        } else if (input.equalsIgnoreCase(&quot;go south&quot;)) {\n            currentLocation = &quot;south_location&quot;;\n        }\n    }\n}\n</code></pre>\n<p><strong>jsp</strong> files:</p>\n<p><strong>game.jsp</strong></p>\n<pre class=\"lang-jsp prettyprint-override\"><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@ page import=&quot;com.example.TextGame, com.example.GameServlet, java.util.Scanner&quot; %&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;Текстова гра - Гравець: ${sessionScope.playerName}&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Вітаємо, ${sessionScope.playerName}!&lt;/h1&gt;\n\n    &lt;p&gt;Ви знаходитесь в ${sessionScope.game.currentLocation}.&lt;/p&gt;\n\n    &lt;form action=&quot;GameServlet&quot; method=&quot;post&quot;&gt;\n        &lt;label for=&quot;playerInput&quot;&gt;Введіть команду:&lt;/label&gt;\n        &lt;input type=&quot;text&quot; id=&quot;playerInput&quot; name=&quot;playerInput&quot; required&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;Виконати&quot;&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><strong>index.jsp</strong></p>\n<pre class=\"lang-xhtml prettyprint-override\"><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;Текстова гра&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;form action=&quot;GameServlet&quot; method=&quot;post&quot;&gt;\n        &lt;label for=&quot;playerName&quot;&gt;Введіть ваше ім'я:&lt;/label&gt;\n        &lt;input type=&quot;text&quot; id=&quot;playerName&quot; name=&quot;playerName&quot; required&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;Почати гру&quot;&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I've trying import like:</p>\n<pre class=\"lang-jsp prettyprint-override\"><code>&lt;%@ page import=&quot;com.example.TextGame, com.example.GameServlet, java.util.Scanner&quot; %&gt; \n</code></pre>\n<p>or:</p>\n<pre class=\"lang-jsp prettyprint-override\"><code>&lt;%@ page import=&quot;com.example.TextGame&quot; %&gt;\n&lt;%@ page import=&quot;com.example.GameServlet&quot; %&gt;\n&lt;%@ page import=&quot;java.util.Scanner&quot; %&gt;\n</code></pre>\n<p>but it doesn't work</p>\n"},{"tags":["java","android","kotlin","xiaomi"],"comment_count":0,"is_answered":false,"view_count":32,"answer_count":0,"score":0,"last_activity_date":1701270079,"creation_date":1701270079,"question_id":77572286,"body_markdown":"I have a problem with getting `WindowManager` inside some service on some phone models.\r\n\r\nI have written service that inherits `CallScreeningService`, I use it to handle incoming calls and draw views on locked screen. On most devices my service works fine, but I found it doesn&#39;t work on some Xiaomi devices (for instance Redmi Note 7, Xiaomi MI MAX 3).\r\n\r\nService has problems with getting `WindowManager`:\r\n\r\n    @RequiresApi(Build.VERSION_CODES.Q)\r\n    class MyCallScreeningService : CallScreeningService() {\r\n\r\n        private var windowManager: WindowManager? = null\r\n\r\n        override fun onScreenCall(details: Call.Details) {\r\n            if (details.callDirection == Call.Details.DIRECTION_INCOMING) {\r\n                details.handle?.schemeSpecificPart?.onlyDigits()?.let { phoneNumber -&gt;\r\n                    if (phoneNumber.isNotEmpty()) {\r\n                        CoroutineScope(Dispatchers.IO).launch {\r\n                            requestPhoneInfoFromDb(phoneNumber)?.let { phonebookEntry -&gt;\r\n                                CoroutineScope(Dispatchers.Main).launch {\r\n                                    showCallInfoView(phoneNumber, phonebookEntry)\r\n                                    respondToCall(details, CallResponse.Builder().build())\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        private fun showCallInfoView(number: String, phonebookEntry: PhonebookEntity) {\r\n            windowManager = getSystemService(Service.WINDOW_SERVICE) as WindowManager\r\n\r\n            //building view...\r\n        }\r\n    }\r\n\r\nError happens when I call `getSystemService(Service.WINDOW_SERVICE) as WindowManager`, on Xiaomi I get an exception:\r\n\r\n&gt; Tried to access visual service WindowManager from a non-visual Context:MyCallScreeningService@ecb7385\r\n&gt; WindowManager should be accessed from Activity or other visual Context. Use an Activity or a Context created with Context#createWindowContext(int, Bundle), which are adjusted to the configuration and visual bounds of an area on screen.  \r\n&gt; java.lang.IllegalAccessException: Tried to access visual service WindowManager from a non-visual Context:MyCallScreeningService@ecb7385\r\n&gt; at android.app.ContextImpl.getSystemService(ContextImpl.java:2125)  \r\n&gt; at android.content.ContextWrapper.getSystemService(ContextWrapper.java:910)  \r\n&gt; at MyCallScreeningService.x(MyCallScreeningService.kt:3)  \r\n&gt; at MyCallScreeningService.h(MyCallScreeningService.kt:1)  \r\n&gt; at MyCallScreeningService$g.invokeSuspend(MyCallScreeningService.kt:52)  \r\n&gt; at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:12) \r\n\r\nI have tried many ways to use services&#39;s `Context` here or pass it to the service, but I always got the same exception. Hope someone has any ideas about this problem. I can add more details if it will be needed.","link":"https://stackoverflow.com/questions/77572286/getting-windowmanager-in-callscreeningservice-on-xiaomi","title":"Getting WindowManager in CallScreeningService on Xiaomi","body":"<p>I have a problem with getting <code>WindowManager</code> inside some service on some phone models.</p>\n<p>I have written service that inherits <code>CallScreeningService</code>, I use it to handle incoming calls and draw views on locked screen. On most devices my service works fine, but I found it doesn't work on some Xiaomi devices (for instance Redmi Note 7, Xiaomi MI MAX 3).</p>\n<p>Service has problems with getting <code>WindowManager</code>:</p>\n<pre><code>@RequiresApi(Build.VERSION_CODES.Q)\nclass MyCallScreeningService : CallScreeningService() {\n\n    private var windowManager: WindowManager? = null\n\n    override fun onScreenCall(details: Call.Details) {\n        if (details.callDirection == Call.Details.DIRECTION_INCOMING) {\n            details.handle?.schemeSpecificPart?.onlyDigits()?.let { phoneNumber -&gt;\n                if (phoneNumber.isNotEmpty()) {\n                    CoroutineScope(Dispatchers.IO).launch {\n                        requestPhoneInfoFromDb(phoneNumber)?.let { phonebookEntry -&gt;\n                            CoroutineScope(Dispatchers.Main).launch {\n                                showCallInfoView(phoneNumber, phonebookEntry)\n                                respondToCall(details, CallResponse.Builder().build())\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    private fun showCallInfoView(number: String, phonebookEntry: PhonebookEntity) {\n        windowManager = getSystemService(Service.WINDOW_SERVICE) as WindowManager\n\n        //building view...\n    }\n}\n</code></pre>\n<p>Error happens when I call <code>getSystemService(Service.WINDOW_SERVICE) as WindowManager</code>, on Xiaomi I get an exception:</p>\n<blockquote>\n<p>Tried to access visual service WindowManager from a non-visual Context:MyCallScreeningService@ecb7385\nWindowManager should be accessed from Activity or other visual Context. Use an Activity or a Context created with Context#createWindowContext(int, Bundle), which are adjusted to the configuration and visual bounds of an area on screen.<br />\njava.lang.IllegalAccessException: Tried to access visual service WindowManager from a non-visual Context:MyCallScreeningService@ecb7385\nat android.app.ContextImpl.getSystemService(ContextImpl.java:2125)<br />\nat android.content.ContextWrapper.getSystemService(ContextWrapper.java:910)<br />\nat MyCallScreeningService.x(MyCallScreeningService.kt:3)<br />\nat MyCallScreeningService.h(MyCallScreeningService.kt:1)<br />\nat MyCallScreeningService$g.invokeSuspend(MyCallScreeningService.kt:52)<br />\nat kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:12)</p>\n</blockquote>\n<p>I have tried many ways to use services's <code>Context</code> here or pass it to the service, but I always got the same exception. Hope someone has any ideas about this problem. I can add more details if it will be needed.</p>\n"},{"tags":["java","spring","http2","undertow"],"answers":[{"comment_count":0,"score":1,"last_activity_date":1696944963,"creation_date":1696944963,"answer_id":77266281,"question_id":77264692,"body_markdown":"Ohhh... this tricky issue with Underthow... When I used Tomcat as an application server - there were no problems, however there was a necessity to change it to Underthow...\r\n\r\nHope, you will find a solution!\r\n","link":"https://stackoverflow.com/questions/77264692/undertow-http2-request-threads-exhausted-with-threads-stuck-in-org-xnio-conduit/77266281#77266281","title":"Undertow HTTP2: request threads exhausted with threads stuck in org.xnio.conduits...awaitReadable/Writable operations","body":"<p>Ohhh... this tricky issue with Underthow... When I used Tomcat as an application server - there were no problems, however there was a necessity to change it to Underthow...</p>\n<p>Hope, you will find a solution!</p>\n"}],"comment_count":0,"is_answered":true,"view_count":80,"answer_count":1,"score":2,"last_activity_date":1701269752,"creation_date":1696931584,"last_edit_date":1696933435,"question_id":77264692,"body_markdown":"Something occasionally happened for one random instance of 5 available instances few times in a day. Worker threads get stucked, after exhausting all the worker threads service fail to respond a health check and get restarted.\r\nWe observe that problem occurs with POST/PUT/PATCH requests.\r\nThose stucked requests runs for tens of minutes and then are reported as failed with status code 400 || 500.\r\nBlocked threads grows quickly and in few minutes could exhauste all pool, and they grow only on a single instance other 4 works fine.\r\n\r\n\r\nSpring boot version 3.1.4 / 3.0.11\r\n**Spring Cloud Gateway.(Netty) &lt;-&gt;(http2 SSL) Spring based service with REST endpoint(Undertow).**\r\n\r\nWe add an Undertow StuckThreadDetector and it reports a stacktrace like:\r\n\r\n\r\n```\r\njava.lang.Throwable: null\r\n    at java.base@17.0.2/java.lang.Object.wait(Native Method)\r\n    at java.base@17.0.2/java.lang.Object.wait(Object.java:338)\r\n    at io.undertow.server.protocol.framed.AbstractFramedStreamSourceChannel.awaitReadable(AbstractFramedStreamSourceChannel.java:354)\r\n    at org.xnio.conduits.StreamSourceChannelWrappingConduit.awaitReadable(StreamSourceChannelWrappingConduit.java:71)\r\n    at org.xnio.conduits.ConduitStreamSourceChannel.awaitReadable(ConduitStreamSourceChannel.java:151)\r\n    at io.undertow.channels.DetachableStreamSourceChannel.awaitReadable(DetachableStreamSourceChannel.java:77)\r\n    at io.undertow.server.HttpServerExchange$ReadDispatchChannel.awaitReadable(HttpServerExchange.java:2305)\r\n    at org.xnio.channels.Channels.readBlocking(Channels.java:345)\r\n    at io.undertow.servlet.spec.ServletInputStreamImpl.readIntoBuffer(ServletInputStreamImpl.java:201)\r\n    at io.undertow.servlet.spec.ServletInputStreamImpl.read(ServletInputStreamImpl.java:176)\r\n    at io.undertow.servlet.spec.ServletInputStreamImpl.read(ServletInputStreamImpl.java:162)\r\n    at io.undertow.servlet.spec.ServletInputStreamImpl.read(ServletInputStreamImpl.java:153)\r\n    at java.base@17.0.2/java.io.FilterInputStream.read(FilterInputStream.java:82)\r\n    at java.base@17.0.2/java.io.PushbackInputStream.read(PushbackInputStream.java:135)\r\n    at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver$EmptyBodyCheckingHttpInputMessage.&lt;init&gt;(AbstractMessageConverterMethodArgumentResolver.java:331)\r\n    at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:172)\r\n    at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:163)\r\n    at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:136)\r\n    at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\r\n    at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)\r\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)\r\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\r\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\r\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\r\n\r\n```\r\n\r\n\r\n```\r\njava.lang.Throwable: null\r\n    at java.lang.Object.wait(Object.java)\r\n    at io.undertow.server.protocol.framed.AbstractFramedStreamSinkChannel.awaitWritable(AbstractFramedStreamSinkChannel.java:329)\r\n    at io.undertow.server.protocol.framed.AbstractFramedStreamSinkChannel.awaitWritable(AbstractFramedStreamSinkChannel.java:313)\r\n    at org.xnio.conduits.StreamSinkChannelWrappingConduit.awaitWritable(StreamSinkChannelWrappingConduit.java:99)\r\n    at org.xnio.conduits.ConduitStreamSinkChannel.awaitWritable(ConduitStreamSinkChannel.java:134)\r\n    at io.undertow.channels.DetachableStreamSinkChannel.awaitWritable(DetachableStreamSinkChannel.java:87)\r\n    at io.undertow.server.HttpServerExchange$WriteDispatchChannel.awaitWritable(HttpServerExchange.java:2141)\r\n    // ... 183 frames truncated\r\n\r\n```\r\n\r\n\r\nThis guys mention similar issue https://access.redhat.com/solutions/6988036. - but there are no info how they fix it.\r\n\r\nWe add an Undertow StuckThreadDetector to catch the thread&#39;s stacktrace.\r\nWe are going to try to BlockingReadTimeoutHandler BlockingWriteTimeoutHandler to fail fast when there are a problems in undertow awaitReadable/awaitWritable, but we are still looking for a root cause of such a random issue.","link":"https://stackoverflow.com/questions/77264692/undertow-http2-request-threads-exhausted-with-threads-stuck-in-org-xnio-conduit","title":"Undertow HTTP2: request threads exhausted with threads stuck in org.xnio.conduits...awaitReadable/Writable operations","body":"<p>Something occasionally happened for one random instance of 5 available instances few times in a day. Worker threads get stucked, after exhausting all the worker threads service fail to respond a health check and get restarted.\nWe observe that problem occurs with POST/PUT/PATCH requests.\nThose stucked requests runs for tens of minutes and then are reported as failed with status code 400 || 500.\nBlocked threads grows quickly and in few minutes could exhauste all pool, and they grow only on a single instance other 4 works fine.</p>\n<p>Spring boot version 3.1.4 / 3.0.11\n<strong>Spring Cloud Gateway.(Netty) &lt;-&gt;(http2 SSL) Spring based service with REST endpoint(Undertow).</strong></p>\n<p>We add an Undertow StuckThreadDetector and it reports a stacktrace like:</p>\n<pre><code>java.lang.Throwable: null\n    at java.base@17.0.2/java.lang.Object.wait(Native Method)\n    at java.base@17.0.2/java.lang.Object.wait(Object.java:338)\n    at io.undertow.server.protocol.framed.AbstractFramedStreamSourceChannel.awaitReadable(AbstractFramedStreamSourceChannel.java:354)\n    at org.xnio.conduits.StreamSourceChannelWrappingConduit.awaitReadable(StreamSourceChannelWrappingConduit.java:71)\n    at org.xnio.conduits.ConduitStreamSourceChannel.awaitReadable(ConduitStreamSourceChannel.java:151)\n    at io.undertow.channels.DetachableStreamSourceChannel.awaitReadable(DetachableStreamSourceChannel.java:77)\n    at io.undertow.server.HttpServerExchange$ReadDispatchChannel.awaitReadable(HttpServerExchange.java:2305)\n    at org.xnio.channels.Channels.readBlocking(Channels.java:345)\n    at io.undertow.servlet.spec.ServletInputStreamImpl.readIntoBuffer(ServletInputStreamImpl.java:201)\n    at io.undertow.servlet.spec.ServletInputStreamImpl.read(ServletInputStreamImpl.java:176)\n    at io.undertow.servlet.spec.ServletInputStreamImpl.read(ServletInputStreamImpl.java:162)\n    at io.undertow.servlet.spec.ServletInputStreamImpl.read(ServletInputStreamImpl.java:153)\n    at java.base@17.0.2/java.io.FilterInputStream.read(FilterInputStream.java:82)\n    at java.base@17.0.2/java.io.PushbackInputStream.read(PushbackInputStream.java:135)\n    at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver$EmptyBodyCheckingHttpInputMessage.&lt;init&gt;(AbstractMessageConverterMethodArgumentResolver.java:331)\n    at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:172)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:163)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:136)\n    at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\n    at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\n\n</code></pre>\n<pre><code>java.lang.Throwable: null\n    at java.lang.Object.wait(Object.java)\n    at io.undertow.server.protocol.framed.AbstractFramedStreamSinkChannel.awaitWritable(AbstractFramedStreamSinkChannel.java:329)\n    at io.undertow.server.protocol.framed.AbstractFramedStreamSinkChannel.awaitWritable(AbstractFramedStreamSinkChannel.java:313)\n    at org.xnio.conduits.StreamSinkChannelWrappingConduit.awaitWritable(StreamSinkChannelWrappingConduit.java:99)\n    at org.xnio.conduits.ConduitStreamSinkChannel.awaitWritable(ConduitStreamSinkChannel.java:134)\n    at io.undertow.channels.DetachableStreamSinkChannel.awaitWritable(DetachableStreamSinkChannel.java:87)\n    at io.undertow.server.HttpServerExchange$WriteDispatchChannel.awaitWritable(HttpServerExchange.java:2141)\n    // ... 183 frames truncated\n\n</code></pre>\n<p>This guys mention similar issue <a href=\"https://access.redhat.com/solutions/6988036\" rel=\"nofollow noreferrer\">https://access.redhat.com/solutions/6988036</a>. - but there are no info how they fix it.</p>\n<p>We add an Undertow StuckThreadDetector to catch the thread's stacktrace.\nWe are going to try to BlockingReadTimeoutHandler BlockingWriteTimeoutHandler to fail fast when there are a problems in undertow awaitReadable/awaitWritable, but we are still looking for a root cause of such a random issue.</p>\n"},{"tags":["java","android","android-camera","android-camera2","android-camerax"],"comments":[{"score":0,"post_type":"question","creation_date":1702270649,"post_id":77572197,"comment_id":136871570,"body_markdown":"What&#39;s your device model? CameraX only works with CTS compatible devices. From your description, it might not be one.","link":"https://stackoverflow.com/questions/77572197/camera-output-is-always-cropped-via-android-camera2-camerax-how-to-show-full-vi#comment136871570_77572197","body":"What&#39;s your device model? CameraX only works with CTS compatible devices. From your description, it might not be one."},{"score":0,"post_type":"question","creation_date":1702337727,"post_id":77572197,"comment_id":136881689,"body_markdown":"It&#39;s a Diji SOM. I have been using camera2 so far. I don&#39;t have a requirement to use camerax. I can test it with the CTS.","link":"https://stackoverflow.com/questions/77572197/camera-output-is-always-cropped-via-android-camera2-camerax-how-to-show-full-vi#comment136881689_77572197","body":"It&#39;s a Diji SOM. I have been using camera2 so far. I don&#39;t have a requirement to use camerax. I can test it with the CTS."}],"comment_count":2,"is_answered":false,"view_count":56,"answer_count":0,"score":1,"last_activity_date":1701269470,"creation_date":1701269470,"question_id":77572197,"body_markdown":"My app shows preview of the camera and saves pics to files. Both the preview and the saved pics only show part of the what the camera can see. The image is clearly cropped/clipped. How do I configure image capture to show the entire field of view of the camera?\r\n\r\nThe target app is an embedded system using a USB cam, but the problem happens in the emulator when configured for webcam0 -- the web cam I have connected to may laptop via USB. So, it&#39;s a similar setup. And the problematic behavior occurs in both this test/emulator setup as well as my embedded production setup. So, I think the issue is android -- not my embedded system configuration.\r\n\r\nI have tried using both Camera2 and CameraX and I get the same behavior.\r\n\r\nIn an effort to share here I did follow this guide to create a simple camera app: https://developer.android.com/codelabs/camerax-getting-started. I know it&#39;s not a small code example, but it&#39;s the best I could think of since I don&#39;t know what part of the code is relevant. \r\n\r\nThe resulting app has the problem -- at least for me it does. Here&#39;s a snap of the app. It shows 1/2 of me when I know the camera is centered on me.\r\n\r\n[![enter image description here][1]][1] \r\n\r\nSomewhat oddly but maybe there&#39;s a clue here, if I rotate the emulated device, I then see a fuller view of the camera:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThis is not even the complete view. Here&#39;s a snap from webcamtest:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nI added this to the activity in hopes it would force the view to show the full view:\r\n\r\n        viewBinding.viewFinder.setScaleType(PreviewView.ScaleType.FIT_CENTER)\r\n\r\nBut it has no effect :(\r\n\r\nMy app is in Java, but the getting-started app is Kotlin. The problem happens in either language so I&#39;m open to talk about the issue and solutions in either language. I&#39;ll translate to Java if need be.\r\n\r\nHere&#39;s the activity code:\r\n\r\n    class MainActivity : AppCompatActivity() {\r\n        private lateinit var viewBinding: ActivityMainBinding\r\n    \r\n        private var imageCapture: ImageCapture? = null\r\n    \r\n        private var videoCapture: VideoCapture&lt;Recorder&gt;? = null\r\n        private var recording: Recording? = null\r\n    \r\n        private lateinit var cameraExecutor: ExecutorService\r\n    \r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            viewBinding = ActivityMainBinding.inflate(layoutInflater)\r\n            setContentView(viewBinding.root)\r\n    \r\n            // Request camera permissions\r\n            if (allPermissionsGranted()) {\r\n                startCamera()\r\n            } else {\r\n                requestPermissions()\r\n            }\r\n    \r\n            // Set up the listeners for take photo and video capture buttons\r\n            viewBinding.imageCaptureButton.setOnClickListener { takePhoto() }\r\n            viewBinding.videoCaptureButton.setOnClickListener { captureVideo() }\r\n    \r\n            var scaleType = viewBinding.viewFinder.getScaleType();\r\n            viewBinding.viewFinder.setScaleType(PreviewView.ScaleType.FIT_CENTER)\r\n            scaleType = viewBinding.viewFinder.getScaleType();\r\n    \r\n            cameraExecutor = Executors.newSingleThreadExecutor()\r\n        }\r\n    \r\n        private fun takePhoto() {\r\n            // Get a stable reference of the modifiable image capture use case\r\n            val imageCapture = imageCapture ?: return\r\n    \r\n            // Create time stamped name and MediaStore entry.\r\n            val name = SimpleDateFormat(FILENAME_FORMAT, Locale.US)\r\n                .format(System.currentTimeMillis())\r\n            val contentValues = ContentValues().apply {\r\n                put(MediaStore.MediaColumns.DISPLAY_NAME, name)\r\n                put(MediaStore.MediaColumns.MIME_TYPE, &quot;image/jpeg&quot;)\r\n                if(Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.P) {\r\n                    put(MediaStore.Images.Media.RELATIVE_PATH, &quot;Pictures/CameraX-Image&quot;)\r\n                }\r\n            }\r\n    \r\n            // Create output options object which contains file + metadata\r\n            val outputOptions = ImageCapture.OutputFileOptions\r\n                .Builder(contentResolver,\r\n                    MediaStore.Images.Media.EXTERNAL_CONTENT_URI,\r\n                    contentValues)\r\n                .build()\r\n    \r\n            // Set up image capture listener, which is triggered after photo has\r\n            // been taken\r\n            imageCapture.takePicture(\r\n                outputOptions,\r\n                ContextCompat.getMainExecutor(this),\r\n                object : ImageCapture.OnImageSavedCallback {\r\n                    override fun onError(exc: ImageCaptureException) {\r\n                        Log.e(TAG, &quot;Photo capture failed: ${exc.message}&quot;, exc)\r\n                    }\r\n    \r\n                    override fun\r\n                            onImageSaved(output: ImageCapture.OutputFileResults){\r\n                        val msg = &quot;Photo capture succeeded: ${output.savedUri}&quot;\r\n                        Toast.makeText(baseContext, msg, Toast.LENGTH_SHORT).show()\r\n                        Log.d(TAG, msg)\r\n                    }\r\n                }\r\n            )}\r\n    \r\n        private fun captureVideo() {}\r\n    \r\n        private fun startCamera() {\r\n            val cameraProviderFuture = ProcessCameraProvider.getInstance(this)\r\n    \r\n            cameraProviderFuture.addListener({\r\n                // Used to bind the lifecycle of cameras to the lifecycle owner\r\n                val cameraProvider: ProcessCameraProvider = cameraProviderFuture.get()\r\n    \r\n                // Preview\r\n                val preview = Preview.Builder()\r\n                    .build()\r\n                    .also {\r\n                        it.setSurfaceProvider(viewBinding.viewFinder.surfaceProvider)\r\n                    }\r\n                imageCapture = ImageCapture.Builder().build()\r\n    \r\n                // Select back camera as a default\r\n                val cameraSelector = CameraSelector.DEFAULT_BACK_CAMERA\r\n    \r\n                try {\r\n                    // Unbind use cases before rebinding\r\n                    cameraProvider.unbindAll()\r\n    \r\n                    // Bind use cases to camera\r\n                    cameraProvider.bindToLifecycle(\r\n                        this, cameraSelector, preview, imageCapture)\r\n    \r\n                } catch(exc: Exception) {\r\n                    Log.e(TAG, &quot;Use case binding failed&quot;, exc)\r\n                }\r\n    \r\n            }, ContextCompat.getMainExecutor(this))\r\n        }\r\n    \r\n        private fun requestPermissions() {\r\n            activityResultLauncher.launch(REQUIRED_PERMISSIONS)\r\n        }\r\n    \r\n        private fun allPermissionsGranted() = REQUIRED_PERMISSIONS.all {\r\n            ContextCompat.checkSelfPermission(\r\n                baseContext, it) == PackageManager.PERMISSION_GRANTED\r\n        }\r\n    \r\n        override fun onDestroy() {\r\n            super.onDestroy()\r\n            cameraExecutor.shutdown()\r\n        }\r\n    \r\n        companion object {\r\n            private const val TAG = &quot;CameraXApp&quot;\r\n            private const val FILENAME_FORMAT = &quot;yyyy-MM-dd-HH-mm-ss-SSS&quot;\r\n            private val REQUIRED_PERMISSIONS =\r\n                mutableListOf (\r\n                    Manifest.permission.CAMERA,\r\n                    Manifest.permission.RECORD_AUDIO\r\n                ).apply {\r\n                    if (Build.VERSION.SDK_INT &lt;= Build.VERSION_CODES.P) {\r\n                        add(Manifest.permission.WRITE_EXTERNAL_STORAGE)\r\n                    }\r\n                }.toTypedArray()\r\n        }\r\n    \r\n        private val activityResultLauncher =\r\n            registerForActivityResult(\r\n                ActivityResultContracts.RequestMultiplePermissions())\r\n            { permissions -&gt;\r\n                // Handle Permission granted/rejected\r\n                var permissionGranted = true\r\n                permissions.entries.forEach {\r\n                    if (it.key in REQUIRED_PERMISSIONS &amp;&amp; it.value == false)\r\n                        permissionGranted = false\r\n                }\r\n                if (!permissionGranted) {\r\n                    Toast.makeText(baseContext,\r\n                        &quot;Permission request denied&quot;,\r\n                        Toast.LENGTH_SHORT).show()\r\n                } else {\r\n                    startCamera()\r\n                }\r\n            }\r\n    }\r\n\r\n  [1]: https://i.stack.imgur.com/Cn4o5.png\r\n  [2]: https://i.stack.imgur.com/A5A4m.png\r\n  [3]: https://i.stack.imgur.com/XDfoB.png\r\n","link":"https://stackoverflow.com/questions/77572197/camera-output-is-always-cropped-via-android-camera2-camerax-how-to-show-full-vi","title":"Camera output is always cropped via Android Camera2/CameraX. How to show full view?","body":"<p>My app shows preview of the camera and saves pics to files. Both the preview and the saved pics only show part of the what the camera can see. The image is clearly cropped/clipped. How do I configure image capture to show the entire field of view of the camera?</p>\n<p>The target app is an embedded system using a USB cam, but the problem happens in the emulator when configured for webcam0 -- the web cam I have connected to may laptop via USB. So, it's a similar setup. And the problematic behavior occurs in both this test/emulator setup as well as my embedded production setup. So, I think the issue is android -- not my embedded system configuration.</p>\n<p>I have tried using both Camera2 and CameraX and I get the same behavior.</p>\n<p>In an effort to share here I did follow this guide to create a simple camera app: <a href=\"https://developer.android.com/codelabs/camerax-getting-started\" rel=\"nofollow noreferrer\">https://developer.android.com/codelabs/camerax-getting-started</a>. I know it's not a small code example, but it's the best I could think of since I don't know what part of the code is relevant.</p>\n<p>The resulting app has the problem -- at least for me it does. Here's a snap of the app. It shows 1/2 of me when I know the camera is centered on me.</p>\n<p><a href=\"https://i.stack.imgur.com/Cn4o5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Cn4o5.png\" alt=\"enter image description here\" /></a></p>\n<p>Somewhat oddly but maybe there's a clue here, if I rotate the emulated device, I then see a fuller view of the camera:</p>\n<p><a href=\"https://i.stack.imgur.com/A5A4m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A5A4m.png\" alt=\"enter image description here\" /></a></p>\n<p>This is not even the complete view. Here's a snap from webcamtest:</p>\n<p><a href=\"https://i.stack.imgur.com/XDfoB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XDfoB.png\" alt=\"enter image description here\" /></a></p>\n<p>I added this to the activity in hopes it would force the view to show the full view:</p>\n<pre><code>    viewBinding.viewFinder.setScaleType(PreviewView.ScaleType.FIT_CENTER)\n</code></pre>\n<p>But it has no effect :(</p>\n<p>My app is in Java, but the getting-started app is Kotlin. The problem happens in either language so I'm open to talk about the issue and solutions in either language. I'll translate to Java if need be.</p>\n<p>Here's the activity code:</p>\n<pre><code>class MainActivity : AppCompatActivity() {\n    private lateinit var viewBinding: ActivityMainBinding\n\n    private var imageCapture: ImageCapture? = null\n\n    private var videoCapture: VideoCapture&lt;Recorder&gt;? = null\n    private var recording: Recording? = null\n\n    private lateinit var cameraExecutor: ExecutorService\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        viewBinding = ActivityMainBinding.inflate(layoutInflater)\n        setContentView(viewBinding.root)\n\n        // Request camera permissions\n        if (allPermissionsGranted()) {\n            startCamera()\n        } else {\n            requestPermissions()\n        }\n\n        // Set up the listeners for take photo and video capture buttons\n        viewBinding.imageCaptureButton.setOnClickListener { takePhoto() }\n        viewBinding.videoCaptureButton.setOnClickListener { captureVideo() }\n\n        var scaleType = viewBinding.viewFinder.getScaleType();\n        viewBinding.viewFinder.setScaleType(PreviewView.ScaleType.FIT_CENTER)\n        scaleType = viewBinding.viewFinder.getScaleType();\n\n        cameraExecutor = Executors.newSingleThreadExecutor()\n    }\n\n    private fun takePhoto() {\n        // Get a stable reference of the modifiable image capture use case\n        val imageCapture = imageCapture ?: return\n\n        // Create time stamped name and MediaStore entry.\n        val name = SimpleDateFormat(FILENAME_FORMAT, Locale.US)\n            .format(System.currentTimeMillis())\n        val contentValues = ContentValues().apply {\n            put(MediaStore.MediaColumns.DISPLAY_NAME, name)\n            put(MediaStore.MediaColumns.MIME_TYPE, &quot;image/jpeg&quot;)\n            if(Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.P) {\n                put(MediaStore.Images.Media.RELATIVE_PATH, &quot;Pictures/CameraX-Image&quot;)\n            }\n        }\n\n        // Create output options object which contains file + metadata\n        val outputOptions = ImageCapture.OutputFileOptions\n            .Builder(contentResolver,\n                MediaStore.Images.Media.EXTERNAL_CONTENT_URI,\n                contentValues)\n            .build()\n\n        // Set up image capture listener, which is triggered after photo has\n        // been taken\n        imageCapture.takePicture(\n            outputOptions,\n            ContextCompat.getMainExecutor(this),\n            object : ImageCapture.OnImageSavedCallback {\n                override fun onError(exc: ImageCaptureException) {\n                    Log.e(TAG, &quot;Photo capture failed: ${exc.message}&quot;, exc)\n                }\n\n                override fun\n                        onImageSaved(output: ImageCapture.OutputFileResults){\n                    val msg = &quot;Photo capture succeeded: ${output.savedUri}&quot;\n                    Toast.makeText(baseContext, msg, Toast.LENGTH_SHORT).show()\n                    Log.d(TAG, msg)\n                }\n            }\n        )}\n\n    private fun captureVideo() {}\n\n    private fun startCamera() {\n        val cameraProviderFuture = ProcessCameraProvider.getInstance(this)\n\n        cameraProviderFuture.addListener({\n            // Used to bind the lifecycle of cameras to the lifecycle owner\n            val cameraProvider: ProcessCameraProvider = cameraProviderFuture.get()\n\n            // Preview\n            val preview = Preview.Builder()\n                .build()\n                .also {\n                    it.setSurfaceProvider(viewBinding.viewFinder.surfaceProvider)\n                }\n            imageCapture = ImageCapture.Builder().build()\n\n            // Select back camera as a default\n            val cameraSelector = CameraSelector.DEFAULT_BACK_CAMERA\n\n            try {\n                // Unbind use cases before rebinding\n                cameraProvider.unbindAll()\n\n                // Bind use cases to camera\n                cameraProvider.bindToLifecycle(\n                    this, cameraSelector, preview, imageCapture)\n\n            } catch(exc: Exception) {\n                Log.e(TAG, &quot;Use case binding failed&quot;, exc)\n            }\n\n        }, ContextCompat.getMainExecutor(this))\n    }\n\n    private fun requestPermissions() {\n        activityResultLauncher.launch(REQUIRED_PERMISSIONS)\n    }\n\n    private fun allPermissionsGranted() = REQUIRED_PERMISSIONS.all {\n        ContextCompat.checkSelfPermission(\n            baseContext, it) == PackageManager.PERMISSION_GRANTED\n    }\n\n    override fun onDestroy() {\n        super.onDestroy()\n        cameraExecutor.shutdown()\n    }\n\n    companion object {\n        private const val TAG = &quot;CameraXApp&quot;\n        private const val FILENAME_FORMAT = &quot;yyyy-MM-dd-HH-mm-ss-SSS&quot;\n        private val REQUIRED_PERMISSIONS =\n            mutableListOf (\n                Manifest.permission.CAMERA,\n                Manifest.permission.RECORD_AUDIO\n            ).apply {\n                if (Build.VERSION.SDK_INT &lt;= Build.VERSION_CODES.P) {\n                    add(Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                }\n            }.toTypedArray()\n    }\n\n    private val activityResultLauncher =\n        registerForActivityResult(\n            ActivityResultContracts.RequestMultiplePermissions())\n        { permissions -&gt;\n            // Handle Permission granted/rejected\n            var permissionGranted = true\n            permissions.entries.forEach {\n                if (it.key in REQUIRED_PERMISSIONS &amp;&amp; it.value == false)\n                    permissionGranted = false\n            }\n            if (!permissionGranted) {\n                Toast.makeText(baseContext,\n                    &quot;Permission request denied&quot;,\n                    Toast.LENGTH_SHORT).show()\n            } else {\n                startCamera()\n            }\n        }\n}\n</code></pre>\n"},{"tags":["java","jpa","lombok"],"comments":[{"score":0,"post_type":"question","creation_date":1701270042,"post_id":77565491,"comment_id":136755118,"body_markdown":"Could you define &quot;it didn&#39;t seem to function&quot; as you expected? If you are looking for 1 of three properties that are required to uniquely identify a row/entity, I hope you are not trying to populate a key class and leave the other attributes as null and rely on &#39;find&#39; logic. You&#39;ll need a special query that returns a list to search on that 1 attribute, as multiple rows could share that value.","link":"https://stackoverflow.com/questions/77565491/java-should-data-of-id-field-in-entity-be-unique-to-one-another#comment136755118_77565491","body":"Could you define &quot;it didn&#39;t seem to function&quot; as you expected? If you are looking for 1 of three properties that are required to uniquely identify a row/entity, I hope you are not trying to populate a key class and leave the other attributes as null and rely on &#39;find&#39; logic. You&#39;ll need a special query that returns a list to search on that 1 attribute, as multiple rows could share that value."},{"score":0,"post_type":"question","creation_date":1701271812,"post_id":77565491,"comment_id":136755568,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","link":"https://stackoverflow.com/questions/77565491/java-should-data-of-id-field-in-entity-be-unique-to-one-another#comment136755568_77565491","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701268948,"creation_date":1701268948,"answer_id":77572138,"question_id":77565491,"body_markdown":"**No.**\r\n\r\nI&#39;m not sure why `@EmbeddedId` isn&#39;t working for you, but I would suggest trying the `@IdClass` annotation.\r\n`@IdClass` is similar to `@EmbeddedId`, but it aligns more closely with the RDB schema. It doesn&#39;t require a second depth of access like `entity.getId().getField()` to reach the fields of the primary key class.\r\n\r\nIf you want more info about difference of each annotation look [this page][1].\r\n\r\nHere&#39;s sample code:\r\n\r\n- Entity\r\n```java\r\n@Entity\r\n@IdClass(SampleEntityId.class)\r\npublic class SampleEntity {\r\n\r\n @Id\r\n private Integer id1;\r\n\r\n @Id\r\n private Integer id2;\r\n\r\n @Id\r\n private Integer id3;\r\n}\r\n```\r\n\r\n- SampleEntityId\r\n```java\r\npublic class SampleEntityId implements Serializable {\r\n  private Integer id1;\r\n  private Integer id2;\r\n  private Integer id3;\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/212350/which-annotation-should-i-use-idclass-or-embeddedid","link":"https://stackoverflow.com/questions/77565491/java-should-data-of-id-field-in-entity-be-unique-to-one-another/77572138#77572138","title":"java : should data of @Id field in entity be unique to one another?","body":"<p><strong>No.</strong></p>\n<p>I'm not sure why <code>@EmbeddedId</code> isn't working for you, but I would suggest trying the <code>@IdClass</code> annotation.\n<code>@IdClass</code> is similar to <code>@EmbeddedId</code>, but it aligns more closely with the RDB schema. It doesn't require a second depth of access like <code>entity.getId().getField()</code> to reach the fields of the primary key class.</p>\n<p>If you want more info about difference of each annotation look <a href=\"https://stackoverflow.com/questions/212350/which-annotation-should-i-use-idclass-or-embeddedid\">this page</a>.</p>\n<p>Here's sample code:</p>\n<ul>\n<li>Entity</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@IdClass(SampleEntityId.class)\npublic class SampleEntity {\n\n @Id\n private Integer id1;\n\n @Id\n private Integer id2;\n\n @Id\n private Integer id3;\n}\n</code></pre>\n<ul>\n<li>SampleEntityId</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>public class SampleEntityId implements Serializable {\n  private Integer id1;\n  private Integer id2;\n  private Integer id3;\n}\n</code></pre>\n"}],"comment_count":2,"is_answered":false,"view_count":25,"answer_count":1,"score":0,"last_activity_date":1701268948,"creation_date":1701188366,"question_id":77565491,"body_markdown":"I&#39;m curious whether should the field with @Id annotation be unique to one another or not.\r\n\r\nThe reason why i&#39;m asking this is that I&#39;m creating an entity with three fields to act as a \r\nprimary key (but declaring them as EmbeddedId hasn&#39;t been done), and I need to make a logic\r\nwhen I want to search a set of rows from database with just one @Id field.\r\n\r\nSo I will not declare primary key in the table which is mapped to that entity, and I want to use\r\njust one field so that I can read a list of data that matches with it. \r\n\r\n\r\n\r\nI&#39;ve tried @EmbeddedId, but it didn&#39;t seem to function as I expected.  ","link":"https://stackoverflow.com/questions/77565491/java-should-data-of-id-field-in-entity-be-unique-to-one-another","title":"java : should data of @Id field in entity be unique to one another?","body":"<p>I'm curious whether should the field with @Id annotation be unique to one another or not.</p>\n<p>The reason why i'm asking this is that I'm creating an entity with three fields to act as a\nprimary key (but declaring them as EmbeddedId hasn't been done), and I need to make a logic\nwhen I want to search a set of rows from database with just one @Id field.</p>\n<p>So I will not declare primary key in the table which is mapped to that entity, and I want to use\njust one field so that I can read a list of data that matches with it.</p>\n<p>I've tried @EmbeddedId, but it didn't seem to function as I expected.</p>\n"},{"tags":["java"],"comments":[{"score":7,"post_type":"question","creation_date":1701263895,"post_id":77571441,"comment_id":136753771,"body_markdown":"There is a language independent design pattern for this. Lookup dependency injection and null strategy pattern. You define an interface with report methods (this interface is totally unaware of logging, debug or release builds). Call it DebugReportingForClassXItf or something. Then you make two implementations one that actually logs (or writes to debug terminal) and one that does absolutely nothing. The first one you instantiatie in debug builds the other one in release builds and then inject the interface into the class that should generate info.","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release#comment136753771_77571441","body":"There is a language independent design pattern for this. Lookup dependency injection and null strategy pattern. You define an interface with report methods (this interface is totally unaware of logging, debug or release builds). Call it DebugReportingForClassXItf or something. Then you make two implementations one that actually logs (or writes to debug terminal) and one that does absolutely nothing. The first one you instantiatie in debug builds the other one in release builds and then inject the interface into the class that should generate info."},{"score":3,"post_type":"question","creation_date":1701263953,"post_id":77571441,"comment_id":136753774,"body_markdown":"This pattern extends well to all kind of infrastructure code, and even allows you to completely change infrastructure (e.g. start logging to a log server i.o. std::cerr). And your code will have no if/then/else checks just sometimes a virtual call that returns immediately and this perfectly predictable by the CPU pipeline. So yes there is some performance loss but it should be minimal (better then a missed branch prediction)","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release#comment136753774_77571441","body":"This pattern extends well to all kind of infrastructure code, and even allows you to completely change infrastructure (e.g. start logging to a log server i.o. std::cerr). And your code will have no if/then/else checks just sometimes a virtual call that returns immediately and this perfectly predictable by the CPU pipeline. So yes there is some performance loss but it should be minimal (better then a missed branch prediction)"},{"score":0,"post_type":"question","creation_date":1701264303,"post_id":77571441,"comment_id":136753838,"body_markdown":"I have seen dependency injection in Spring but that seems like a much bigger overhead compared to either method. Is dependency injection possible in vanilla Java or did you mean I should just replace every instance of `Logger` with `LoggerNOP` in the release build?","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release#comment136753838_77571441","body":"I have seen dependency injection in Spring but that seems like a much bigger overhead compared to either method. Is dependency injection possible in vanilla Java or did you mean I should just replace every instance of <code>Logger</code> with <code>LoggerNOP</code> in the release build?"},{"score":3,"post_type":"question","creation_date":1701264352,"post_id":77571441,"comment_id":136753848,"body_markdown":"For logging, you&#39;d generally **configure** the logger per environment, e.g to disable a certain log-level or logging root, not replace the logger implementation (though that is also possible, for example if you use SLF4J, it is a matter of replacing the SLF4J implementation). Most logging implementations are very efficient when asked to log something on a level that is disabled, or if the logger itself is disabled.","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release#comment136753848_77571441","body":"For logging, you&#39;d generally <b>configure</b> the logger per environment, e.g to disable a certain log-level or logging root, not replace the logger implementation (though that is also possible, for example if you use SLF4J, it is a matter of replacing the SLF4J implementation). Most logging implementations are very efficient when asked to log something on a level that is disabled, or if the logger itself is disabled."},{"score":2,"post_type":"question","creation_date":1701264532,"post_id":77571441,"comment_id":136753881,"body_markdown":"As an aside, using `System.out` for logging directly is generally a bad idea, as its methods are (internally) synchronized, which will introduce a contention bottleneck in highly concurrent applications.","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release#comment136753881_77571441","body":"As an aside, using <code>System.out</code> for logging directly is generally a bad idea, as its methods are (internally) synchronized, which will introduce a contention bottleneck in highly concurrent applications."},{"score":0,"post_type":"question","creation_date":1701264575,"post_id":77571441,"comment_id":136753892,"body_markdown":"Java does not have compile-time constexprs, preprocessors or templates (the generics are run-time). So if you really want something gone from built product totally then you probably need to build debug and production from configuration-selected or tool-generated different java files/packages.","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release#comment136753892_77571441","body":"Java does not have compile-time constexprs, preprocessors or templates (the generics are run-time). So if you really want something gone from built product totally then you probably need to build debug and production from configuration-selected or tool-generated different java files/packages."},{"score":1,"post_type":"question","creation_date":1701264718,"post_id":77571441,"comment_id":136753928,"body_markdown":"Also, bytecode is hardly optimized, most optimization, including eliminating codepaths not run, or inlining methods is done at runtime by the JIT.","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release#comment136753928_77571441","body":"Also, bytecode is hardly optimized, most optimization, including eliminating codepaths not run, or inlining methods is done at runtime by the JIT."},{"score":0,"post_type":"question","creation_date":1701264889,"post_id":77571441,"comment_id":136753960,"body_markdown":"@MarkRotteveel check the updated question, I didn&#39;t mean logging specifically, although that is the example I used. Do you have any suggestions on how to see the Jit compiled code?","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release#comment136753960_77571441","body":"@MarkRotteveel check the updated question, I didn&#39;t mean logging specifically, although that is the example I used. Do you have any suggestions on how to see the Jit compiled code?"},{"score":1,"post_type":"question","creation_date":1701265144,"post_id":77571441,"comment_id":136754012,"body_markdown":"Similar solutions would also apply for other things than logging, as Pepijn already says have two (or more) implementations, and decide at runtime through configuration/dependency injection which is used, or by including (or excluding) an implementation on a specific environment. You can configure the JVM to print out JIT information, but keep in mind, JIT will generally only kick in when specific code/methods are run enough times. For example, see [How to see JIT-compiled code in JVM?](https://stackoverflow.com/questions/1503479/how-to-see-jit-compiled-code-in-jvm).","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release#comment136754012_77571441","body":"Similar solutions would also apply for other things than logging, as Pepijn already says have two (or more) implementations, and decide at runtime through configuration/dependency injection which is used, or by including (or excluding) an implementation on a specific environment. You can configure the JVM to print out JIT information, but keep in mind, JIT will generally only kick in when specific code/methods are run enough times. For example, see <a href=\"https://stackoverflow.com/questions/1503479/how-to-see-jit-compiled-code-in-jvm\">How to see JIT-compiled code in JVM?</a>."},{"score":0,"post_type":"question","creation_date":1701265356,"post_id":77571441,"comment_id":136754069,"body_markdown":"@&#214;&#246;Tiib Java actually does have a limited form of compile-time constant expressions. For example, calculations with primitive or string literals, or final fields or variables that are assigned another constant expressions will be evaluated and inlined at compile-time.","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release#comment136754069_77571441","body":"@&#214;&#246;Tiib Java actually does have a limited form of compile-time constant expressions. For example, calculations with primitive or string literals, or final fields or variables that are assigned another constant expressions will be evaluated and inlined at compile-time."},{"score":2,"post_type":"question","creation_date":1701265437,"post_id":77571441,"comment_id":136754085,"body_markdown":"As with any perceived performance issue it is not an issue until you&#39;ve measured that it is an issue. The things @MarkRotteveel points out are probably much more likely a bottleneck (and so is string formatting). Ideally a logger only quickly queues some data and returns to the caller then asynchronously writes it). So my summary, measure the perfomance (dependency injected or not) and address your bottlenck","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release#comment136754085_77571441","body":"As with any perceived performance issue it is not an issue until you&#39;ve measured that it is an issue. The things @MarkRotteveel points out are probably much more likely a bottleneck (and so is string formatting). Ideally a logger only quickly queues some data and returns to the caller then asynchronously writes it). So my summary, measure the perfomance (dependency injected or not) and address your bottlenck"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701268551,"post_id":77572030,"comment_id":136754781,"body_markdown":"I have updated the title to &quot;code&quot; instead of class. I&#39;m still unable to see the output of the jit compiler, but I&#39;ll take your word for it since it would be odd if the compiler didn&#39;t optimize this out.","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release/77572030#comment136754781_77572030","body":"I have updated the title to &quot;code&quot; instead of class. I&#39;m still unable to see the output of the jit compiler, but I&#39;ll take your word for it since it would be odd if the compiler didn&#39;t optimize this out."},{"score":0,"post_type":"answer","creation_date":1701269050,"post_id":77572030,"comment_id":136754893,"body_markdown":"@OM222O there&#39;s some discussion about optimizing out in the JLS section linked in my updated answer. Basically, a conforming Java compiler is not required to optimize, but the Java HotSpot compiler (from OpenJDK and others) does.","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release/77572030#comment136754893_77572030","body":"@OM222O there&#39;s some discussion about optimizing out in the JLS section linked in my updated answer. Basically, a conforming Java compiler is not required to optimize, but the Java HotSpot compiler (from OpenJDK and others) does."}],"comment_count":2,"score":1,"last_activity_date":1701268810,"last_edit_date":1701268810,"creation_date":1701268006,"answer_id":77572030,"question_id":77571441,"body_markdown":"Your title is about _classes_ to be removed from production code, but your question is about _lines of code_ to be removed. I&#39;ll therefore take your question as being in two parts.\r\n\r\nFirst part: classes that are in the `test` directory tree do not go into production; only classes in the `main` tree do. This is the convention used by Maven and Gradle.\r\n\r\nSecond: if you do something like\r\n\r\n    private static final boolean DEBUG = false;\r\n\r\n    void foo() {\r\n        if (DEBUG) {\r\n            //...\r\n        }\r\n\r\nthen the JIT will remove the condition check, as if the code didn&#39;t exist. See towards the end of [Java Language Specification, &#167; 14.22](https://docs.oracle.com/javase/specs/jls/se21/html/jls-14.html#jls-14.22).\r\n","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release/77572030#77572030","title":"Java best practices for writing code that needs to be removed for a release","body":"<p>Your title is about <em>classes</em> to be removed from production code, but your question is about <em>lines of code</em> to be removed. I'll therefore take your question as being in two parts.</p>\n<p>First part: classes that are in the <code>test</code> directory tree do not go into production; only classes in the <code>main</code> tree do. This is the convention used by Maven and Gradle.</p>\n<p>Second: if you do something like</p>\n<pre><code>private static final boolean DEBUG = false;\n\nvoid foo() {\n    if (DEBUG) {\n        //...\n    }\n</code></pre>\n<p>then the JIT will remove the condition check, as if the code didn't exist. See towards the end of <a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-14.html#jls-14.22\" rel=\"nofollow noreferrer\">Java Language Specification, § 14.22</a>.</p>\n"}],"comment_count":11,"is_answered":true,"view_count":115,"answer_count":1,"score":0,"last_activity_date":1701268810,"creation_date":1701263428,"last_edit_date":1701268429,"question_id":77571441,"body_markdown":"In C++ if you want to create debugging utilities or other code that you don&#39;t want to make it to production, you can use the pre-processor, for example:\r\n\r\n    #include&lt;iostream&gt;\r\n    using namespace std;\r\n    \r\n    #define debug\r\n    \r\n    class Logger{\r\n        public:\r\n         void log(const char* message){\r\n            #ifdef debug\r\n                cout &lt;&lt; message;\r\n            #endif\r\n        }\r\n    };\r\n    \r\n    int main(){\r\n        Logger logger;\r\n        logger.log(&quot;Hello world&quot;);\r\n        return 1;\r\n    }\r\n\r\nwill result in the following assembly code (generated via https://godbolt.org/ `x86-64 clang 17.0.1`, `-O1`):\r\n\r\n    main:                                   # @main\r\n            push    rax\r\n            mov     rdi, qword ptr [rip + std::cout@GOTPCREL]\r\n            lea     rsi, [rip + .L.str]\r\n            mov     edx, 11\r\n            call    std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::__ostream_insert&lt;char, std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, char const*, long)@PLT\r\n            mov     eax, 1\r\n            pop     rcx\r\n            ret\r\n    .L.str:\r\n            .asciz  &quot;Hello world&quot;\r\n\r\nremoving the `#define` results in the following assembly code:\r\n\r\n    main:                                   # @main\r\n            mov     eax, 1\r\n            ret\r\n\r\nAs you can clearly see, the entire logger code has been removed during compilation. Since Java doesn&#39;t support things like `const` or pre-processor arguments (`#define`, `#if`, etc.), I wrote the following code:\r\n\r\n    public class Main {\r\n        public static class Logger {\r\n            private final boolean debug = false;\r\n    \r\n            public void log(String msg) {\r\n                if (debug) {\r\n                    System.out.println(msg);\r\n                }\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            var logger = new Logger();\r\n            logger.log(&quot;Hello world&quot;);\r\n        }\r\n    }\r\n\r\n\r\nThis is also how I&#39;ve usually seen logging implemented in other codebases, however running `javap -c` reveals that the code isn&#39;t optimized out, despite the `debug` being declared as final:\r\n\r\n    Compiled from &quot;main.java&quot;\r\n      public Main();\r\n        Code:\r\n           0: aload_0\r\n           1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\r\n           4: return\r\n    \r\n      public static void main(java.lang.String[]);\r\n        Code:\r\n           0: new           #7                  // class Main$Logger\r\n           3: dup\r\n           4: invokespecial #9                  // Method Main$Logger.&quot;&lt;init&gt;&quot;:()V\r\n           7: astore_1\r\n           8: aload_1\r\n           9: ldc           #10                 // String Hello world\r\n          11: invokevirtual #12                 // Method Main$Logger.log:(Ljava/lang/String;)V\r\n          14: return\r\n    }\r\n\r\n\r\nI know that java uses a Jit compiler but I couldn&#39;t get the output of the Jit compiler after following this tutorial: https://stackoverflow.com/questions/1503479/how-to-see-jit-compiled-code-in-jvm\r\n\r\nAnother method I considered was something like function pointers in C++:\r\n\r\n    import java.util.function.Consumer;\r\n    \r\n    public class Main {\r\n        public static class Logger {\r\n            public final Consumer&lt;Object&gt; log;\r\n    \r\n            public Logger(boolean debug) {\r\n                log = debug? System.out::println : x -&gt; {};\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            var logger = new Logger(false);\r\n            logger.log.accept(&quot;Hello world&quot;);\r\n        }\r\n    }\r\n\r\nbut this results in the following bytecode:\r\n\r\n    public class Main {      \r\n      public Main();         \r\n           0: aload_0\r\n           1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\r\n           4: return\r\n    \r\n      public static void main(java.lang.String[]);\r\n        Code:\r\n           0: new           #7                  // class Main$Logger\r\n           3: dup\r\n           4: iconst_0\r\n           5: invokespecial #9                  // Method Main$Logger.&quot;&lt;init&gt;&quot;:(Z)V\r\n           8: astore_1\r\n           9: aload_1\r\n          10: getfield      #12                 // Field Main$Logger.log:Ljava/util/function/Consumer;\r\n          13: ldc           #16                 // String Hello world\r\n          15: invokeinterface #18,  2           // InterfaceMethod java/util/function/Consumer.accept:(Ljava/lang/Object;)V\r\n          20: return\r\n    }\r\n\r\n (Note: if I create a wrapper method around the consumer that just calls `consumer.accept(msg)`, the bytecode is basically identical to the first case, I&#39;m not sure why)\r\n\r\nEdit: I have used logging as an example, but I meant in more general terms (for example debugging), so unfortunately suggestions that are logging specific can&#39;t be used.\r\n\r\n1) I&#39;m not sure if I&#39;m doing something wrong or if the debugging code can&#39;t be optimized out, even though the values are known at compile time. (the question is if this is even possible)\r\n\r\n2) What are the best practices for creating code that needs to be removed for a release build?\r\n\r\n3) If it&#39;s not possible to write such code, which version will have the least performance impact? Calling the method that has an if statement or using function pointers?","link":"https://stackoverflow.com/questions/77571441/java-best-practices-for-writing-code-that-needs-to-be-removed-for-a-release","title":"Java best practices for writing code that needs to be removed for a release","body":"<p>In C++ if you want to create debugging utilities or other code that you don't want to make it to production, you can use the pre-processor, for example:</p>\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\n#define debug\n\nclass Logger{\n    public:\n     void log(const char* message){\n        #ifdef debug\n            cout &lt;&lt; message;\n        #endif\n    }\n};\n\nint main(){\n    Logger logger;\n    logger.log(&quot;Hello world&quot;);\n    return 1;\n}\n</code></pre>\n<p>will result in the following assembly code (generated via <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">https://godbolt.org/</a> <code>x86-64 clang 17.0.1</code>, <code>-O1</code>):</p>\n<pre><code>main:                                   # @main\n        push    rax\n        mov     rdi, qword ptr [rip + std::cout@GOTPCREL]\n        lea     rsi, [rip + .L.str]\n        mov     edx, 11\n        call    std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::__ostream_insert&lt;char, std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, char const*, long)@PLT\n        mov     eax, 1\n        pop     rcx\n        ret\n.L.str:\n        .asciz  &quot;Hello world&quot;\n</code></pre>\n<p>removing the <code>#define</code> results in the following assembly code:</p>\n<pre><code>main:                                   # @main\n        mov     eax, 1\n        ret\n</code></pre>\n<p>As you can clearly see, the entire logger code has been removed during compilation. Since Java doesn't support things like <code>const</code> or pre-processor arguments (<code>#define</code>, <code>#if</code>, etc.), I wrote the following code:</p>\n<pre><code>public class Main {\n    public static class Logger {\n        private final boolean debug = false;\n\n        public void log(String msg) {\n            if (debug) {\n                System.out.println(msg);\n            }\n        }\n    }\n\n    public static void main(String[] args) {\n        var logger = new Logger();\n        logger.log(&quot;Hello world&quot;);\n    }\n}\n</code></pre>\n<p>This is also how I've usually seen logging implemented in other codebases, however running <code>javap -c</code> reveals that the code isn't optimized out, despite the <code>debug</code> being declared as final:</p>\n<pre><code>Compiled from &quot;main.java&quot;\n  public Main();\n    Code:\n       0: aload_0\n       1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\n       4: return\n\n  public static void main(java.lang.String[]);\n    Code:\n       0: new           #7                  // class Main$Logger\n       3: dup\n       4: invokespecial #9                  // Method Main$Logger.&quot;&lt;init&gt;&quot;:()V\n       7: astore_1\n       8: aload_1\n       9: ldc           #10                 // String Hello world\n      11: invokevirtual #12                 // Method Main$Logger.log:(Ljava/lang/String;)V\n      14: return\n}\n</code></pre>\n<p>I know that java uses a Jit compiler but I couldn't get the output of the Jit compiler after following this tutorial: <a href=\"https://stackoverflow.com/questions/1503479/how-to-see-jit-compiled-code-in-jvm\">How to see JIT-compiled code in JVM?</a></p>\n<p>Another method I considered was something like function pointers in C++:</p>\n<pre><code>import java.util.function.Consumer;\n\npublic class Main {\n    public static class Logger {\n        public final Consumer&lt;Object&gt; log;\n\n        public Logger(boolean debug) {\n            log = debug? System.out::println : x -&gt; {};\n        }\n    }\n\n    public static void main(String[] args) {\n        var logger = new Logger(false);\n        logger.log.accept(&quot;Hello world&quot;);\n    }\n}\n</code></pre>\n<p>but this results in the following bytecode:</p>\n<pre><code>public class Main {      \n  public Main();         \n       0: aload_0\n       1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V\n       4: return\n\n  public static void main(java.lang.String[]);\n    Code:\n       0: new           #7                  // class Main$Logger\n       3: dup\n       4: iconst_0\n       5: invokespecial #9                  // Method Main$Logger.&quot;&lt;init&gt;&quot;:(Z)V\n       8: astore_1\n       9: aload_1\n      10: getfield      #12                 // Field Main$Logger.log:Ljava/util/function/Consumer;\n      13: ldc           #16                 // String Hello world\n      15: invokeinterface #18,  2           // InterfaceMethod java/util/function/Consumer.accept:(Ljava/lang/Object;)V\n      20: return\n}\n</code></pre>\n<p>(Note: if I create a wrapper method around the consumer that just calls <code>consumer.accept(msg)</code>, the bytecode is basically identical to the first case, I'm not sure why)</p>\n<p>Edit: I have used logging as an example, but I meant in more general terms (for example debugging), so unfortunately suggestions that are logging specific can't be used.</p>\n<ol>\n<li><p>I'm not sure if I'm doing something wrong or if the debugging code can't be optimized out, even though the values are known at compile time. (the question is if this is even possible)</p>\n</li>\n<li><p>What are the best practices for creating code that needs to be removed for a release build?</p>\n</li>\n<li><p>If it's not possible to write such code, which version will have the least performance impact? Calling the method that has an if statement or using function pointers?</p>\n</li>\n</ol>\n"},{"tags":["java"],"comments":[{"score":0,"post_type":"question","creation_date":1701235808,"post_id":77568640,"comment_id":136749154,"body_markdown":"[Related](https://stackoverflow.com/questions/55970149/how-does-the-reduce-method-work-in-java-8)","link":"https://stackoverflow.com/questions/77568640/streams-reduce-question-on-partial-results#comment136749154_77568640","body":"<a href=\"https://stackoverflow.com/questions/55970149/how-does-the-reduce-method-work-in-java-8\">Related</a>"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701235670,"last_edit_date":1701235670,"creation_date":1701234409,"answer_id":77568706,"question_id":77568640,"body_markdown":"The below functional code:\r\n```java\r\nmyList.stream().reduce( 1.0, (a,b) -&gt; a * Math.sqrt(b), (a,b) -&gt; a * b);\r\n```\r\n\r\nis conceptually equivalent to:\r\n\r\n```java\r\ndouble sum = 1.0;\r\n    for (Double value: myList){\r\n        sum= sum * Math.sqrt(value);\r\n}\r\n```\r\n\r\nHere, \r\n\r\nThe `U identity` is basically the initial value.\r\n\r\n`BiFunction&lt;U,? super T,U&gt; accumulator` is a BiFunction for incorporating an additional element into a result.\r\n\r\n`BinaryOperator&lt;U&gt; combiner` for combining two values, which must be compatible with the accumulator function. The combiner function is used in parallel stream processing to combine the results of different substreams. \r\n\r\n\r\n---\r\n&lt;h2&gt;What is Combiner Function used for?&lt;/h2&gt;\r\n\r\n&gt; When a stream executes in parallel, the Java runtime splits the stream\r\n&gt; into multiple substreams. In such cases, we need to use a function to\r\n&gt; combine the results of the substreams into a single one. This is the\r\n&gt; role of the combiner.\r\n\r\n\r\n&lt;h2&gt;Why my Combiner Function Gets Ignored?&lt;/h2&gt;\r\n\r\nSince you are using **a sequential stream**, the combiner function is not actually used in this case.\r\n\r\n&lt;h2&gt;How can I Use Combiner Function Then?&lt;/h2&gt;\r\n\r\nIf you change the combiner function in action, you can change combiner function to something like `Double:Sum` and use `parallel` stream rather than sequential stream.\r\n\r\nExample:\r\n\r\n```java\r\nmyList.stream().parallel.reduce( 1.0, (a,b) -&gt; a * Math.sqrt(b), Double::sum );\r\n```","link":"https://stackoverflow.com/questions/77568640/streams-reduce-question-on-partial-results/77568706#77568706","title":"Streams reduce question on partial results","body":"<p>The below functional code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>myList.stream().reduce( 1.0, (a,b) -&gt; a * Math.sqrt(b), (a,b) -&gt; a * b);\n</code></pre>\n<p>is conceptually equivalent to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>double sum = 1.0;\n    for (Double value: myList){\n        sum= sum * Math.sqrt(value);\n}\n</code></pre>\n<p>Here,</p>\n<p>The <code>U identity</code> is basically the initial value.</p>\n<p><code>BiFunction&lt;U,? super T,U&gt; accumulator</code> is a BiFunction for incorporating an additional element into a result.</p>\n<p><code>BinaryOperator&lt;U&gt; combiner</code> for combining two values, which must be compatible with the accumulator function. The combiner function is used in parallel stream processing to combine the results of different substreams.</p>\n<hr />\n<h2>What is Combiner Function used for?</h2>\n<blockquote>\n<p>When a stream executes in parallel, the Java runtime splits the stream\ninto multiple substreams. In such cases, we need to use a function to\ncombine the results of the substreams into a single one. This is the\nrole of the combiner.</p>\n</blockquote>\n<h2>Why my Combiner Function Gets Ignored?</h2>\n<p>Since you are using <strong>a sequential stream</strong>, the combiner function is not actually used in this case.</p>\n<h2>How can I Use Combiner Function Then?</h2>\n<p>If you change the combiner function in action, you can change combiner function to something like <code>Double:Sum</code> and use <code>parallel</code> stream rather than sequential stream.</p>\n<p>Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>myList.stream().parallel.reduce( 1.0, (a,b) -&gt; a * Math.sqrt(b), Double::sum );\n</code></pre>\n"},{"comment_count":0,"score":1,"last_activity_date":1701235768,"creation_date":1701235768,"answer_id":77568766,"question_id":77568640,"body_markdown":"Let&#39;s start at the top. According to [`java.util.stream.Stream`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html), there are three overloads of `reduce` to consider.\r\n\r\n* `T reduce(T identity, BinaryOperator&lt;T&gt; accumulator)`\r\n* `Optional&lt;T&gt; reduce(BinaryOperator&lt;T&gt; accumulator)`\r\n* `&lt;U&gt; U reduce(U identity, BiFunction&lt;U,? super T,U&gt; accumulator, BinaryOperator&lt;U&gt; combiner)`\r\n\r\n# Two-argument reduce\r\n\r\nThe first one is arguably the simplest, and it&#39;s the one that a functional programmer would be most familiar with. This function would be called `foldl` in Haskell, `reduce` in Python, `inject` in Ruby, etc.\r\n\r\nLet&#39;s assume that `myStream` contains the numbers `1, 2, 3, 4`. Then `myStream.reduce(e, (x, y) -&gt; x # y)` (where `#` is some arbitrary binary operation and `e` is our identity value) would perform\r\n\r\n    (((e # 1) # 2) # 3) # 4\r\n\r\nThat is, we start with the identity, and then we apply the binary operator to the accumulated value so far and the next element of the stream, for each element, until the stream is exhausted. This is a typical functional-programming fold/reduce operation.\r\n\r\n# One-argument reduce\r\n\r\nThe second form of `reduce` eschews the `identity` argument in favor of just bailing out and returning an `Optional&lt;T&gt;`. So if our stream consisted of the same `1, 2, 3, 4`, then `myStream.reduce((x, y) -&gt; x # y)` would give\r\n\r\n    Optional.of(((1 # 2) # 3) # 4)\r\n\r\nWe don&#39;t have an identity `0` in there. Instead, we got an `Optional` that contained a value. Empty streams would simply give `Optional.empty()`, rather than producing the `identity` as the two-argument form would.\r\n\r\n# Three-argument reduce\r\n\r\nEverything so far has been fairly typical functional programming fare. But here&#39;s where Java&#39;s implementation differs. Java&#39;s `reduce` is built with concurrency in mind, and the three-argument reduce is where this shows.\r\n\r\nAs a reminder, `myStream.reduce(e, (x, y) -&gt; x # y)` (where, again, `#` is some arbitrary binary operator), looks like\r\n\r\n    (((e # 1) # 2) # 3) # 4\r\n\r\nThen, in turn, `myStream.reduce(e, (x, y) -&gt; x # y, (x, y) -&gt; x $ y)` looks like\r\n\r\n    (((e $ (e # 1)) $ (e # 2)) $ (e # 3)) $ (e # 4)\r\n\r\nThat looks... complicated, needless to say. The `reduce` function requires that, if `e` is our identity, then `$` satisfies\r\n\r\n    x $ (e # y) == x # y\r\n\r\nfor all `x` and `y` in our domain. That is, putting the `e` bit on the left of `$` doesn&#39;t actually do anything. If we follow this rule, then the above complicated expression is just the same as applying 2-argument `reduce`. So why would we ever do this? Well, Java is permitted to run the `$` bits in parallel. Back when we had\r\n\r\n    (((e # 1) # 2) # 3) # 4\r\n\r\nAll of the `#` operations depended on the results of the previous `#` operations. There was no room for parallelism.\r\n\r\n    (((e $ (e # 1)) $ (e # 2)) $ (e # 3)) $ (e # 4)\r\n\r\nHere, on the other hand, each of the `#` operations is independent and doesn&#39;t depend on *any* of the other calls. So we could parallelize all of the `#` calls and then combine the results with the combiner `$` in one thread. If `#` is expensive but `$` is cheap, this is a huge gain.\r\n\r\nAnd in your example, `#` is a multiplication-and-square-root, which is probably more expensive than `$`, which is just a multiplication. So if we can come up with a `$` for our `#` which satisfies\r\n\r\n    x $ (e # y) == x # y\r\n\r\nthen we get parallelism gains. That is, this form of `reduce` is just forcing us to split our reduction calculation out into two parts: the &quot;expensive&quot; parallelizable bit and the actual combining bit which might be cheaper.\r\n\r\nNow, all of that being said, the documentation has this to say.\r\n\r\n&gt; Many reductions using this form can be represented more simply by an explicit combination of map and reduce operations. The accumulator function acts as a fused mapper and accumulator, which can sometimes be more efficient than separate mapping and reduction, such as when knowing the previously reduced value allows you to avoid some computation.\r\n\r\nAnd this is true. In your case, using three-argument reduce is just goofy, because what we&#39;re really doing is mapping and then reducing. So your example should really be written as\r\n\r\n    myList.stream().map((a) -&gt; Math.sqrt(a)).reduce(1, (a, b) -&gt; a * b)\r\n\r\nThis is what we&#39;re actually trying to say: square-root each value and *then* multiply them. Streams are lazy, so doing this in two steps doesn&#39;t create an intermediate list. It just remembers what needs to be done and then does it when forced by the reduction.\r\n\r\nSo three-argument reduce is for cases where we really can exploit known information about the partial results. Maybe our reduction operation is short-circuiting, and if the left-hand side has a certain value then we don&#39;t even need to *do* the mapping operation. Maybe there&#39;s a caching argument, and knowing previous results allows us to save some processing time in the future. Maybe there&#39;s some clever mathematical reduction not listed here.\r\n\r\nFusing the map and reduce operations like this is, at best, very situational. So generally you should prefer to use `map` followed by an associative `reduce` whenever you can.","link":"https://stackoverflow.com/questions/77568640/streams-reduce-question-on-partial-results/77568766#77568766","title":"Streams reduce question on partial results","body":"<p>Let's start at the top. According to <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\"><code>java.util.stream.Stream</code></a>, there are three overloads of <code>reduce</code> to consider.</p>\n<ul>\n<li><code>T reduce(T identity, BinaryOperator&lt;T&gt; accumulator)</code></li>\n<li><code>Optional&lt;T&gt; reduce(BinaryOperator&lt;T&gt; accumulator)</code></li>\n<li><code>&lt;U&gt; U reduce(U identity, BiFunction&lt;U,? super T,U&gt; accumulator, BinaryOperator&lt;U&gt; combiner)</code></li>\n</ul>\n<h1>Two-argument reduce</h1>\n<p>The first one is arguably the simplest, and it's the one that a functional programmer would be most familiar with. This function would be called <code>foldl</code> in Haskell, <code>reduce</code> in Python, <code>inject</code> in Ruby, etc.</p>\n<p>Let's assume that <code>myStream</code> contains the numbers <code>1, 2, 3, 4</code>. Then <code>myStream.reduce(e, (x, y) -&gt; x # y)</code> (where <code>#</code> is some arbitrary binary operation and <code>e</code> is our identity value) would perform</p>\n<pre><code>(((e # 1) # 2) # 3) # 4\n</code></pre>\n<p>That is, we start with the identity, and then we apply the binary operator to the accumulated value so far and the next element of the stream, for each element, until the stream is exhausted. This is a typical functional-programming fold/reduce operation.</p>\n<h1>One-argument reduce</h1>\n<p>The second form of <code>reduce</code> eschews the <code>identity</code> argument in favor of just bailing out and returning an <code>Optional&lt;T&gt;</code>. So if our stream consisted of the same <code>1, 2, 3, 4</code>, then <code>myStream.reduce((x, y) -&gt; x # y)</code> would give</p>\n<pre><code>Optional.of(((1 # 2) # 3) # 4)\n</code></pre>\n<p>We don't have an identity <code>0</code> in there. Instead, we got an <code>Optional</code> that contained a value. Empty streams would simply give <code>Optional.empty()</code>, rather than producing the <code>identity</code> as the two-argument form would.</p>\n<h1>Three-argument reduce</h1>\n<p>Everything so far has been fairly typical functional programming fare. But here's where Java's implementation differs. Java's <code>reduce</code> is built with concurrency in mind, and the three-argument reduce is where this shows.</p>\n<p>As a reminder, <code>myStream.reduce(e, (x, y) -&gt; x # y)</code> (where, again, <code>#</code> is some arbitrary binary operator), looks like</p>\n<pre><code>(((e # 1) # 2) # 3) # 4\n</code></pre>\n<p>Then, in turn, <code>myStream.reduce(e, (x, y) -&gt; x # y, (x, y) -&gt; x $ y)</code> looks like</p>\n<pre><code>(((e $ (e # 1)) $ (e # 2)) $ (e # 3)) $ (e # 4)\n</code></pre>\n<p>That looks... complicated, needless to say. The <code>reduce</code> function requires that, if <code>e</code> is our identity, then <code>$</code> satisfies</p>\n<pre><code>x $ (e # y) == x # y\n</code></pre>\n<p>for all <code>x</code> and <code>y</code> in our domain. That is, putting the <code>e</code> bit on the left of <code>$</code> doesn't actually do anything. If we follow this rule, then the above complicated expression is just the same as applying 2-argument <code>reduce</code>. So why would we ever do this? Well, Java is permitted to run the <code>$</code> bits in parallel. Back when we had</p>\n<pre><code>(((e # 1) # 2) # 3) # 4\n</code></pre>\n<p>All of the <code>#</code> operations depended on the results of the previous <code>#</code> operations. There was no room for parallelism.</p>\n<pre><code>(((e $ (e # 1)) $ (e # 2)) $ (e # 3)) $ (e # 4)\n</code></pre>\n<p>Here, on the other hand, each of the <code>#</code> operations is independent and doesn't depend on <em>any</em> of the other calls. So we could parallelize all of the <code>#</code> calls and then combine the results with the combiner <code>$</code> in one thread. If <code>#</code> is expensive but <code>$</code> is cheap, this is a huge gain.</p>\n<p>And in your example, <code>#</code> is a multiplication-and-square-root, which is probably more expensive than <code>$</code>, which is just a multiplication. So if we can come up with a <code>$</code> for our <code>#</code> which satisfies</p>\n<pre><code>x $ (e # y) == x # y\n</code></pre>\n<p>then we get parallelism gains. That is, this form of <code>reduce</code> is just forcing us to split our reduction calculation out into two parts: the &quot;expensive&quot; parallelizable bit and the actual combining bit which might be cheaper.</p>\n<p>Now, all of that being said, the documentation has this to say.</p>\n<blockquote>\n<p>Many reductions using this form can be represented more simply by an explicit combination of map and reduce operations. The accumulator function acts as a fused mapper and accumulator, which can sometimes be more efficient than separate mapping and reduction, such as when knowing the previously reduced value allows you to avoid some computation.</p>\n</blockquote>\n<p>And this is true. In your case, using three-argument reduce is just goofy, because what we're really doing is mapping and then reducing. So your example should really be written as</p>\n<pre><code>myList.stream().map((a) -&gt; Math.sqrt(a)).reduce(1, (a, b) -&gt; a * b)\n</code></pre>\n<p>This is what we're actually trying to say: square-root each value and <em>then</em> multiply them. Streams are lazy, so doing this in two steps doesn't create an intermediate list. It just remembers what needs to be done and then does it when forced by the reduction.</p>\n<p>So three-argument reduce is for cases where we really can exploit known information about the partial results. Maybe our reduction operation is short-circuiting, and if the left-hand side has a certain value then we don't even need to <em>do</em> the mapping operation. Maybe there's a caching argument, and knowing previous results allows us to save some processing time in the future. Maybe there's some clever mathematical reduction not listed here.</p>\n<p>Fusing the map and reduce operations like this is, at best, very situational. So generally you should prefer to use <code>map</code> followed by an associative <code>reduce</code> whenever you can.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":55,"answer_count":2,"score":1,"last_activity_date":1701268754,"creation_date":1701233289,"last_edit_date":1701268754,"question_id":77568640,"body_markdown":"I understand function (b) below, however am having confusion with (a).  Can anyone explain what the accumulator or second argument to `reduce` or accumulator is doing vs the combiner parameter?\r\n\r\na:\r\n\r\n       reduce(U identity, BiFunction&lt;U,? super T,U&gt; accumulator, BinaryOperator&lt;U&gt; combiner)\r\n\r\n    double productOfSqrRoots = myList.stream().reduce(\r\n        1.0,\r\n        (a,b) -&gt; a * Math.sqrt(b),\r\n        (a,b) -&gt; a * b\r\n        );\r\n\r\nb:\r\n\r\n    double productOfSqrRoots = myList.stream().reduce(\r\n        (a,b) -&gt; a * b);","link":"https://stackoverflow.com/questions/77568640/streams-reduce-question-on-partial-results","title":"Streams reduce question on partial results","body":"<p>I understand function (b) below, however am having confusion with (a).  Can anyone explain what the accumulator or second argument to <code>reduce</code> or accumulator is doing vs the combiner parameter?</p>\n<p>a:</p>\n<pre><code>   reduce(U identity, BiFunction&lt;U,? super T,U&gt; accumulator, BinaryOperator&lt;U&gt; combiner)\n\ndouble productOfSqrRoots = myList.stream().reduce(\n    1.0,\n    (a,b) -&gt; a * Math.sqrt(b),\n    (a,b) -&gt; a * b\n    );\n</code></pre>\n<p>b:</p>\n<pre><code>double productOfSqrRoots = myList.stream().reduce(\n    (a,b) -&gt; a * b);\n</code></pre>\n"},{"tags":["java","unit-testing","junit","mockito","java.util.scanner"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701268352,"creation_date":1701268352,"answer_id":77572069,"question_id":77570477,"body_markdown":"The `spy` call doesn&#39;t change the `Scanner` object, it creates a wrapper. That wrapper exists only in your test. You need to replace the `Scanner` in class `Inputter` instead. It&#39;s easiest to do that in `@BeforeEach`, so you can restore it in `@AfterEach`.\r\n\r\n```java\r\nprivate Scanner originalScanner;\r\nprivate Scanner mockScanner;\r\n\r\n@BeforeEach\r\nvoid mockScanner() {\r\n    originalScanner = Inputter.scanner;\r\n    mockScanner = spy(originalScanner);\r\n    Inputter.scanner = mockScanner;\r\n}\r\n\r\n@AfterEach\r\nvoid resetScanner() {\r\n    Input.scanner = originalScanner;\r\n}\r\n\r\n@Test\r\nvoid registerAccountTest() {\r\n   ...\r\n    System.setIn(inputStream);\r\n\r\n    System.out.println(&quot;Before when statement&quot;);\r\n    when(mockScanner.nextLine()).thenReturn(id, name, bd, role, sex, password);\r\n    System.out.println(&quot;After when statement&quot;);\r\n    ...\r\n}\r\n```\r\n\r\n---\r\n\r\nAs an alternative you can use [JUnit Pioneer][1]. It allows you to easily replace the results of `System.in` without any manual setup. It also allows you to read what&#39;s been written to `System.out` and `System.err`.\r\n\r\n\r\n  [1]: https://junit-pioneer.org/docs/standard-input-output/","link":"https://stackoverflow.com/questions/77570477/problems-when-using-mockito-and-junit-for-testing-in-java-project/77572069#77572069","title":"Problems when using Mockito and JUnit for testing in Java Project","body":"<p>The <code>spy</code> call doesn't change the <code>Scanner</code> object, it creates a wrapper. That wrapper exists only in your test. You need to replace the <code>Scanner</code> in class <code>Inputter</code> instead. It's easiest to do that in <code>@BeforeEach</code>, so you can restore it in <code>@AfterEach</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Scanner originalScanner;\nprivate Scanner mockScanner;\n\n@BeforeEach\nvoid mockScanner() {\n    originalScanner = Inputter.scanner;\n    mockScanner = spy(originalScanner);\n    Inputter.scanner = mockScanner;\n}\n\n@AfterEach\nvoid resetScanner() {\n    Input.scanner = originalScanner;\n}\n\n@Test\nvoid registerAccountTest() {\n   ...\n    System.setIn(inputStream);\n\n    System.out.println(&quot;Before when statement&quot;);\n    when(mockScanner.nextLine()).thenReturn(id, name, bd, role, sex, password);\n    System.out.println(&quot;After when statement&quot;);\n    ...\n}\n</code></pre>\n<hr />\n<p>As an alternative you can use <a href=\"https://junit-pioneer.org/docs/standard-input-output/\" rel=\"nofollow noreferrer\">JUnit Pioneer</a>. It allows you to easily replace the results of <code>System.in</code> without any manual setup. It also allows you to read what's been written to <code>System.out</code> and <code>System.err</code>.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":25,"answer_count":1,"score":-1,"last_activity_date":1701268352,"creation_date":1701254906,"question_id":77570477,"body_markdown":"I have some problems when testing with mockito and JUnit, I want to test a method that take data from user input. When I use `String id = &quot;E833462&quot;`, the test function work correctly, but when I replace it with my generate function, the registerAccountTest() will be blocked at line `when(mockScanner.nextLine()).thenReturn(id, name, bd, role, sex, password);` And I don&#39;t know why. Although both ways are a String with an ID. I tested my generate function, and it still can create a random unique ID. Can someone help me to solve this? Thank you for reading my problem and trying to figure it out to help me.\r\n\r\nHere is my test method\r\n```\r\n@Test\r\n    void registerAccountTest() {\r\n        Employee em = employees.searchById(&quot;E160052&quot;);\r\n\r\n//        String id = &quot;E833462&quot;;\r\n        String id = Inputter.generateUniqueId(&quot;E&quot;, 6, employees);\r\n        String name = &quot;Test&quot;;\r\n        String role = &quot;MA&quot;;\r\n        String sex = &quot;Male&quot;;\r\n        String bd = &quot;08/03/2000&quot;;\r\n        String password = &quot;123456&quot;;\r\n\r\n        String combinedUserInput =\r\n                id + System.lineSeparator() + name + System.lineSeparator() + role + System.lineSeparator() + sex + System.lineSeparator() + bd + System.lineSeparator() + password;\r\n        System.out.println(combinedUserInput);\r\n        InputStream inputStream = new ByteArrayInputStream(combinedUserInput.getBytes());\r\n        System.setIn(inputStream);\r\n\r\n        Scanner mockScanner = spy(Inputter.scanner);\r\n        System.out.println(&quot;Before when statement&quot;);\r\n        when(mockScanner.nextLine()).thenReturn(id, name, bd, role, sex, password);\r\n        System.out.println(&quot;After when statement&quot;);\r\n\r\n        Executor.registerAccount(employees, em);\r\n\r\n        Employee emTest = employees.searchById(id);\r\n        assertNotEquals(null, emTest);\r\n        assertEquals(name, emTest.getName());\r\n        assertEquals(bd, emTest.getBirthdate().format(Inputter.formatterHalf));\r\n        assertEquals(role, emTest.getRole());\r\n        assertEquals(sex, emTest.getSex());\r\n\r\n        employees.deleteOne(emTest);\r\n    }\r\n```\r\nHere is my generate Id function in Inputter class\r\n```\r\npublic class Inputter {\r\n    public static Scanner scanner = new Scanner(System.in);\r\n    public static String generateUniqueId(String prefix, int len, ObjectList ol) {\r\n        String id;\r\n\r\n        do {\r\n            int num = (int) random.nextDouble(Math.pow(10, len));\r\n            id = prefix + String.format(&quot;%03d&quot;, num);\r\n        } while (!Objects.isNull(ol.searchById(id)));\r\n\r\n        return id.trim();\r\n    }\r\n}\r\n```","link":"https://stackoverflow.com/questions/77570477/problems-when-using-mockito-and-junit-for-testing-in-java-project","title":"Problems when using Mockito and JUnit for testing in Java Project","body":"<p>I have some problems when testing with mockito and JUnit, I want to test a method that take data from user input. When I use <code>String id = &quot;E833462&quot;</code>, the test function work correctly, but when I replace it with my generate function, the registerAccountTest() will be blocked at line <code>when(mockScanner.nextLine()).thenReturn(id, name, bd, role, sex, password);</code> And I don't know why. Although both ways are a String with an ID. I tested my generate function, and it still can create a random unique ID. Can someone help me to solve this? Thank you for reading my problem and trying to figure it out to help me.</p>\n<p>Here is my test method</p>\n<pre><code>@Test\n    void registerAccountTest() {\n        Employee em = employees.searchById(&quot;E160052&quot;);\n\n//        String id = &quot;E833462&quot;;\n        String id = Inputter.generateUniqueId(&quot;E&quot;, 6, employees);\n        String name = &quot;Test&quot;;\n        String role = &quot;MA&quot;;\n        String sex = &quot;Male&quot;;\n        String bd = &quot;08/03/2000&quot;;\n        String password = &quot;123456&quot;;\n\n        String combinedUserInput =\n                id + System.lineSeparator() + name + System.lineSeparator() + role + System.lineSeparator() + sex + System.lineSeparator() + bd + System.lineSeparator() + password;\n        System.out.println(combinedUserInput);\n        InputStream inputStream = new ByteArrayInputStream(combinedUserInput.getBytes());\n        System.setIn(inputStream);\n\n        Scanner mockScanner = spy(Inputter.scanner);\n        System.out.println(&quot;Before when statement&quot;);\n        when(mockScanner.nextLine()).thenReturn(id, name, bd, role, sex, password);\n        System.out.println(&quot;After when statement&quot;);\n\n        Executor.registerAccount(employees, em);\n\n        Employee emTest = employees.searchById(id);\n        assertNotEquals(null, emTest);\n        assertEquals(name, emTest.getName());\n        assertEquals(bd, emTest.getBirthdate().format(Inputter.formatterHalf));\n        assertEquals(role, emTest.getRole());\n        assertEquals(sex, emTest.getSex());\n\n        employees.deleteOne(emTest);\n    }\n</code></pre>\n<p>Here is my generate Id function in Inputter class</p>\n<pre><code>public class Inputter {\n    public static Scanner scanner = new Scanner(System.in);\n    public static String generateUniqueId(String prefix, int len, ObjectList ol) {\n        String id;\n\n        do {\n            int num = (int) random.nextDouble(Math.pow(10, len));\n            id = prefix + String.format(&quot;%03d&quot;, num);\n        } while (!Objects.isNull(ol.searchById(id)));\n\n        return id.trim();\n    }\n}\n</code></pre>\n"},{"tags":["java",".net","jvm","handle"],"comment_count":0,"is_answered":false,"view_count":28,"answer_count":0,"score":0,"last_activity_date":1701267896,"creation_date":1701245717,"last_edit_date":1701267896,"question_id":77569489,"body_markdown":"I&#39;m trying to control a calculator interface which based on Java Oracle. My problem is the memory leakage. \r\n\r\nLet me explain what is happening. With 2 class,`JabApi` and `JabHelpers`, I&#39;m making an object of `AccessibleTreeItem` class which is located in JabHelpers. \r\n\r\nThen doing some operations such as click to a button on the calculator in a for loop. After that, I&#39;m trying to release memory using `MyDispose() ` method that use the `releaseJavaObject()` method is located in JabHelpers but I could not observe a decrement in memory.\r\n\r\nI am not sure the `releaseJavaObject()` is working fine because after the javaTree.`MyDispose()` method, when try to click another button (button3) but it does not any changes on the calculator. \r\n\r\nWhat is my main problem in the JabApi and JabHelpers class? I don&#39;t know may be problem is related with the `releaseJavaObject()` importing parameters? Could it be? May be it is related with the `GetAccessibleContextInfo(Int32 vmID, IntPtr currentPtr, out AccessibleContextInfo currentContext, AccessibleTreeItem parentItem, int level, string lineage)` method is located in JapHelper, I have no idea. \r\n\r\nPlease, support me. Thank you!\r\n\r\nMain code below:\r\n```\r\nnamespace JabApiCsharpSample\r\n{\r\n    class Program\r\n    {\r\n        static void Main(string[] args)\r\n        {\r\n            //JabApi.Windows_run();\r\n            JabHelpers.Init();\r\n            int vmID = 0;\r\n            IntPtr hwnd = (IntPtr)3346002;//that is the handleWindow number given by Windows\r\n            JabHelpers.AccessibleTreeItem javaTree = null;\r\n            JabHelpers.AccessibleTreeItem button1 = null;\r\n            JabHelpers.AccessibleTreeItem button2 = null;\r\n            JabHelpers.AccessibleTreeItem button = null;\r\n            JabHelpers.AccessibleTreeItem button3 = null;\r\n\r\n         \r\n            //javaTree = JabHelpers.GetComponentTreeByTitle(&quot;ELİNT&quot;, out vmID);\r\n\r\n\r\n\r\n            int index = 50;\r\n\r\n            javaTree = JabHelpers.GetComponentTree(hwnd, out vmID);\r\n\r\n            button1 = javaTree.children[0].children[1];\r\n            button2 = button1.children[1].children[2];\r\n            button = button2.children[1].children[3];\r\n            button3 = button2.children[1].children[4];\r\n\r\n            JabHelpers.DoAccessibleActions(vmID, button3.acPtr, &quot;click&quot;);\r\n            for (int i = 0; i &lt; index; i++)\r\n            {              \r\n\r\n                JabHelpers.DoAccessibleActions(vmID, button.acPtr, &quot;click&quot;);\r\n                            }\r\n\r\n            javaTree.MyDispose(javaTree, vmID);\r\n            \r\n         \r\n            JabHelpers.DoAccessibleActions(vmID, button3.acPtr, &quot;click&quot;);\r\n         \r\n        }\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\nHere is a part of JabHelper class:\r\n\r\n\r\n```\r\npublic static AccessibleTreeItem GetComponentTreeByTitle(String title, out Int32 vmID)\r\n        {\r\n            IntPtr hwnd = FindWindowByCaption(IntPtr.Zero, title);\r\n            return GetComponentTree(hwnd, out vmID);\r\n        }\r\n\r\n        public static AccessibleTreeItem GetComponentTree(IntPtr hWnd, out Int32 vmID)\r\n        {\r\n            screenContents.Clear();\r\n            screenContentsString = string.Empty;\r\n\r\n            AccessibleTreeItem accessibleTreeItem = new AccessibleTreeItem();\r\n            vmID = 0;\r\n            if (JabApi.isJavaWindow(hWnd) == 1)\r\n            {\r\n                unsafe\r\n                {\r\n                    IntPtr acPtr;\r\n\r\n                    if (JabApi.getAccessibleContextFromHWND(hWnd, out vmID, out acPtr))\r\n                    {\r\n\r\n                        AccessibleContextInfo ac = new AccessibleContextInfo();\r\n                        accessibleTreeItem = GetAccessibleContextInfo(vmID, acPtr, out ac, null, 0, string.Empty); // RECURSION SEED\r\n\r\n                        return accessibleTreeItem;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n private static AccessibleTreeItem GetAccessibleContextInfo(Int32 vmID, IntPtr currentPtr, out AccessibleContextInfo currentContext, AccessibleTreeItem parentItem, int level, string lineage)\r\n        {\r\n            unsafe\r\n            {\r\n                // Allocate global memory space for the size of AccessibleContextInfo and store the address in acPtr\r\n                IntPtr acPtr = Marshal.AllocHGlobal(Marshal.SizeOf(new AccessibleContextInfo()));\r\n                try\r\n                {\r\n\r\n                    Marshal.StructureToPtr(new AccessibleContextInfo(), acPtr, true);\r\n                    if (JabApi.getAccessibleContextInfo(vmID, currentPtr, acPtr))\r\n                    {\r\n                        currentContext = (AccessibleContextInfo)Marshal.PtrToStructure(acPtr, typeof(AccessibleContextInfo));\r\n                        if (!ReferenceEquals(currentContext, null))\r\n                        {\r\n                            AccessibleTreeItem newItem = BuildAccessibleTree(currentPtr, currentContext, parentItem);\r\n\r\n                            if (!ReferenceEquals(newItem, null))\r\n                            {\r\n                                //Checks to see if current object has any text items.\r\n                                if (currentContext.accessibleText == true)\r\n                                {\r\n                                    AccessibleTextItemsInfo textItem;\r\n                                    //Gets text items.\r\n                                    textItem = GetAccessibleTextInfo(vmID, currentPtr);\r\n                                    newItem.textValue = textItem.sentence;\r\n\r\n                                    string treeInfo = Repeat(&quot;\\t&quot;, level) + currentContext.name + &quot; = \\&quot;&quot; + textItem.sentence + &quot;\\&quot;&quot;;\r\n                                    screenContentsString += treeInfo + Environment.NewLine;\r\n                                    Debug.Print(treeInfo);\r\n                                }\r\n                                else\r\n                                {\r\n                                    string treeInfo = Repeat(&quot;\\t&quot;, level) + currentContext.name;\r\n                                    screenContentsString += treeInfo + Environment.NewLine;\r\n                                    Debug.Print(treeInfo);\r\n                                }\r\n\r\n\r\n                                //Start collecting children\r\n                                int nextLevel = level + 1;\r\n                                for (int i = 0; i &lt; currentContext.childrenCount; i++)\r\n                                {\r\n                                    string lineageInfo = Repeat(&quot;\\t&quot;, level) + level.ToString() + &quot; Child &quot; + i.ToString() + &quot; Lineage = {&quot; + lineage + &quot;}&quot;;\r\n                                    screenContentsString += lineageInfo + Environment.NewLine;\r\n                                    Debug.Print(lineageInfo);\r\n\r\n                                    string currentlineage;\r\n                                    if (lineage == string.Empty)\r\n                                        currentlineage = i.ToString();\r\n                                    else\r\n                                        currentlineage = lineage + &quot;, &quot; + i.ToString();\r\n\r\n                                    if (currentContext.role_en_US != &quot;unknown&quot; &amp;&amp; currentContext.states_en_US.Contains(&quot;visible&quot;)) // Note the optomization here, I found this get me to an acceptable speed\r\n                                    {\r\n                                        AccessibleContextInfo childContext = new AccessibleContextInfo();\r\n                                        IntPtr childPtr = JabApi.getAccessibleChildFromContext(vmID, currentPtr, i);\r\n\r\n                                        GetAccessibleContextInfo(vmID, childPtr, out childContext, newItem, nextLevel, currentlineage);\r\n\r\n                                    }\r\n\r\n                                }\r\n                            }\r\n\r\n                            return newItem;\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        currentContext = new AccessibleContextInfo();\r\n                    }\r\n                }\r\n                finally\r\n                {\r\n                    if (acPtr != IntPtr.Zero)\r\n                        Marshal.FreeHGlobal(acPtr);\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n\r\npublic void MyDispose(AccessibleTreeItem parent, int vmID)\r\n            {\r\n                if (parent.children.Count == 0)\r\n                {\r\n                    JabApi.releaseJavaObject(vmID, parent.acPtr);\r\n                }\r\n                else\r\n                {\r\n                    for (int i = 0; i &lt; parent.childrenCount; i++)\r\n                    {\r\n                        parent.children[i].MyDispose(parent.children[i], vmID);\r\n                    }\r\n                    JabApi.releaseJavaObject(vmID, parent.acPtr);\r\n                }\r\n            }\r\n\r\n```\r\n\r\n\r\nHere is a part of JabApi code :\r\n\r\nYou can see the releaseJavaObject() metod is imported in there.\r\n```\r\n public static class JabApi\r\n    {\r\n\r\n        public const String WinAccessBridgeDll = @&quot;WindowsAccessBridge-64.dll&quot;;\r\n        public const Int32 MAX_STRING_SIZE = 1024;\r\n        public const Int32 SHORT_STRING_SIZE = 256;\r\n\r\n        #region Event Handlers\r\n        #region EventDLLImport\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setMouseClickedFP(MouseClickedDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setMouseEnteredFP(MouseEnteredDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setMouseExitedFP(MouseExitedDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setMousePressedFP(MousePressedDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setMouseReleasedFP(MouseReleasedDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setFocusGainedFP(FocusGainedDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setFocusLostFP(FocusLostDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setCaretUpdateFP(CaretUpdateDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setJavaShutdownFP(JavaShutDownDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setMenuCanceledFP(MenuCanceledDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setMenuDeselectedFP(MenuDeselectedDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setMenuSelectedFP(MenuSelectedDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPopupMenuCanceledFP(PopupMenuCanceledDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPopupMenuWillBecomeInvisibleFP(PopupMenuWillBecomeInvisibleDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPopupMenuWillBecomeVisibleFP(PopupMenuWillBecomeVisibleDelegate fp);\r\n        \r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPropertyActiveDescendentChangeFP(PropertyActiveDescendentChangeDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPropertyCaretChangeFP(PropertyCaretChangeDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPropertyChangeFP(PropertyChangeDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPropertyChildChangeFP(PropertyChildChangeDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPropertyDescriptionChangeFP(PropertyDescriptionChangeDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPropertyNameChangeFP(PropertyNameChangeDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPropertySelectionChangeFP(PropertySelectionChangeDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPropertyStateChangeFP(PropertyStateChangeDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPropertyTableModelChangeFP(PropertyTableModelChangeDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPropertyTextChangeFP(PropertyTextChangeDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPropertyValueChangeFP(PropertyValueChangeDelegate fp);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setPropertyVisibleDataChangeFP(PropertyVisibleDataChangeDelegate fp);\r\n        #endregion EventDLLImport\r\n        #region Event Delegates\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PropertyChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\r\n            [MarshalAs(UnmanagedType.LPWStr)] string property, [MarshalAs(UnmanagedType.LPWStr)] string oldValue, [MarshalAs(UnmanagedType.LPWStr)] string newValue);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void JavaShutDownDelegate(System.Int32 vmID);\r\n\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void FocusGainedDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void FocusLostDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void CaretUpdateDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void MouseClickedDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void MouseEnteredDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void MouseExitedDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void MousePressedDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void MouseReleasedDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void MenuCanceledDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void MenuDeselectedDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void MenuSelectedDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PopupMenuCanceledDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PopupMenuWillBecomeInvisibleDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PopupMenuWillBecomeVisibleDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PropertyNameChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\r\n            [MarshalAs(UnmanagedType.LPWStr)] string oldName, [MarshalAs(UnmanagedType.LPWStr)] string newName);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PropertyDescriptionChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\r\n            [MarshalAs(UnmanagedType.LPWStr)] string oldDescription, [MarshalAs(UnmanagedType.LPWStr)] string newDescription);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PropertyStateChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\r\n            [MarshalAs(UnmanagedType.LPWStr)] string oldState, [MarshalAs(UnmanagedType.LPWStr)] string newState);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PropertyValueChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\r\n            [MarshalAs(UnmanagedType.LPWStr)] string oldValue, [MarshalAs(UnmanagedType.LPWStr)] string newValue);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PropertySelectionChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PropertyTextChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PropertyCaretChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\r\n        Int32 oldPosition, Int32 newPosition);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PropertyVisibleDataChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PropertyChildChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\r\n        IntPtr oldChild, IntPtr newChild);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PropertyActiveDescendentChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\r\n        IntPtr oldActiveDescendent, IntPtr newActiveDescendent);\r\n\r\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\r\n        public delegate void PropertyTableModelChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\r\n        IntPtr oldValue, IntPtr newValue);\r\n\r\n        #endregion Event Delegates\r\n\r\n        #endregion DLLImport - Functions\r\n\r\n        //Inits the JAB.\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void Windows_run();\r\n\r\n        //Checks if window is JavaWindow.\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static unsafe Int32 isJavaWindow(IntPtr hwnd);\r\n\r\n        //Releases the specified java object.\r\n        //[DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        [DllImport(WinAccessBridgeDll, EntryPoint = &quot;releaseJavaObject&quot;, CallingConvention = CallingConvention.Cdecl)]\r\n        public extern static void releaseJavaObject(Int32 vmID, IntPtr javaObject);\r\n\r\n        //Sets the text of the given accessible context.\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void setTextContents(Int32 vmID, IntPtr ac, [MarshalAs(UnmanagedType.LPWStr)] string text);\r\n\r\n        //Gets basic version info about JVM/JAB\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static void getVersionInfo(Int32 vmID, IntPtr versionInfo);\r\n\r\n        //Gets the next java window, where the hwnd passed is the previous window.\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static unsafe IntPtr getNextJavaWindow(IntPtr hwnd);\r\n\r\n        //Returns ac from window handle.\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static unsafe Boolean getAccessibleContextFromHWND(IntPtr hwnd, out Int32 vmID, out IntPtr ac);\r\n\r\n        //Returns handle from ac\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static unsafe IntPtr getHWNDFromAccessibleContext(Int32 vmID, IntPtr ac);\r\n\r\n        //Compares two objects\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static unsafe Boolean isSameObject(Int32 vmID, IntPtr ac1, IntPtr ac2);\r\n\r\n        //Returns an AccessibleContext object that represents the point given, offset by window coordinates.\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static unsafe Boolean getAccessibleContextAt(Int32 vmID, IntPtr acparent, Int32 x, Int32 y, out IntPtr ac);\r\n\r\n        //Returns an AccessibleContext object that represents the nth child of the object ac, where n is specified by the value index.\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static unsafe IntPtr getAccessibleChildFromContext(Int32 vmID, IntPtr ac, Int32 index);\r\n\r\n        //Returns an AccessibleContext object that represents the window with focus.\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static unsafe Boolean getAccessibleContextWithFocus(void* window, out Int32 vmID, out IntPtr ac);\r\n\r\n        //Returns an AccessibleContext object that represents the parent of the specified object.\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static unsafe IntPtr getAccessibleParentFromContext(Int32 vmID, IntPtr ac);\r\n\r\n        //Returns detailed information about an AccessibleContext object belonging to the JVM\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static unsafe Boolean getAccessibleContextInfo(Int32 vmID, IntPtr accessibleContext, IntPtr acInfo);\r\n\r\n        //**ACCESSIBLE TEXT FUNCTIONS\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static unsafe Boolean getAccessibleTextInfo(Int32 vmID, IntPtr AccessibleContext, IntPtr textInfo, Int32 x, Int32 y);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static unsafe Boolean getAccessibleTextItems(Int32 vmID, IntPtr AccessibleContext, IntPtr textItems, Int32 index);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static unsafe Boolean getAccessibleTextAttributes(Int32 vmID, IntPtr AccessibleContext, Int32 index, IntPtr attributes);\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static unsafe Boolean GetAccessibleTextSelectionInfo(Int32 vmID, IntPtr AccessibleContext, Int32 index, IntPtr textSelection);\r\n\r\n\r\n        //\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static Boolean getAccessibleActions(Int32 vmID, IntPtr AccessibleContext,  IntPtr ptrAccessibleActions);\r\n\r\n\r\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\r\n        public extern static Boolean doAccessibleActions(Int32 vmID, IntPtr AccessibleContext, IntPtr actionsToDo, ref Int32 failure);\r\n\r\n\r\n    }\r\n}\r\n```\r\n","link":"https://stackoverflow.com/questions/77569489/how-to-release-java-objects-from-memory-using-releasejavaobject-function","title":"How to release java objects from memory using releaseJavaObject() function","body":"<p>I'm trying to control a calculator interface which based on Java Oracle. My problem is the memory leakage.</p>\n<p>Let me explain what is happening. With 2 class,<code>JabApi</code> and <code>JabHelpers</code>, I'm making an object of <code>AccessibleTreeItem</code> class which is located in JabHelpers.</p>\n<p>Then doing some operations such as click to a button on the calculator in a for loop. After that, I'm trying to release memory using <code>MyDispose() </code> method that use the <code>releaseJavaObject()</code> method is located in JabHelpers but I could not observe a decrement in memory.</p>\n<p>I am not sure the <code>releaseJavaObject()</code> is working fine because after the javaTree.<code>MyDispose()</code> method, when try to click another button (button3) but it does not any changes on the calculator.</p>\n<p>What is my main problem in the JabApi and JabHelpers class? I don't know may be problem is related with the <code>releaseJavaObject()</code> importing parameters? Could it be? May be it is related with the <code>GetAccessibleContextInfo(Int32 vmID, IntPtr currentPtr, out AccessibleContextInfo currentContext, AccessibleTreeItem parentItem, int level, string lineage)</code> method is located in JapHelper, I have no idea.</p>\n<p>Please, support me. Thank you!</p>\n<p>Main code below:</p>\n<pre><code>namespace JabApiCsharpSample\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            //JabApi.Windows_run();\n            JabHelpers.Init();\n            int vmID = 0;\n            IntPtr hwnd = (IntPtr)3346002;//that is the handleWindow number given by Windows\n            JabHelpers.AccessibleTreeItem javaTree = null;\n            JabHelpers.AccessibleTreeItem button1 = null;\n            JabHelpers.AccessibleTreeItem button2 = null;\n            JabHelpers.AccessibleTreeItem button = null;\n            JabHelpers.AccessibleTreeItem button3 = null;\n\n         \n            //javaTree = JabHelpers.GetComponentTreeByTitle(&quot;ELİNT&quot;, out vmID);\n\n\n\n            int index = 50;\n\n            javaTree = JabHelpers.GetComponentTree(hwnd, out vmID);\n\n            button1 = javaTree.children[0].children[1];\n            button2 = button1.children[1].children[2];\n            button = button2.children[1].children[3];\n            button3 = button2.children[1].children[4];\n\n            JabHelpers.DoAccessibleActions(vmID, button3.acPtr, &quot;click&quot;);\n            for (int i = 0; i &lt; index; i++)\n            {              \n\n                JabHelpers.DoAccessibleActions(vmID, button.acPtr, &quot;click&quot;);\n                            }\n\n            javaTree.MyDispose(javaTree, vmID);\n            \n         \n            JabHelpers.DoAccessibleActions(vmID, button3.acPtr, &quot;click&quot;);\n         \n        }\n\n\n    }\n}\n</code></pre>\n<p>Here is a part of JabHelper class:</p>\n<pre><code>public static AccessibleTreeItem GetComponentTreeByTitle(String title, out Int32 vmID)\n        {\n            IntPtr hwnd = FindWindowByCaption(IntPtr.Zero, title);\n            return GetComponentTree(hwnd, out vmID);\n        }\n\n        public static AccessibleTreeItem GetComponentTree(IntPtr hWnd, out Int32 vmID)\n        {\n            screenContents.Clear();\n            screenContentsString = string.Empty;\n\n            AccessibleTreeItem accessibleTreeItem = new AccessibleTreeItem();\n            vmID = 0;\n            if (JabApi.isJavaWindow(hWnd) == 1)\n            {\n                unsafe\n                {\n                    IntPtr acPtr;\n\n                    if (JabApi.getAccessibleContextFromHWND(hWnd, out vmID, out acPtr))\n                    {\n\n                        AccessibleContextInfo ac = new AccessibleContextInfo();\n                        accessibleTreeItem = GetAccessibleContextInfo(vmID, acPtr, out ac, null, 0, string.Empty); // RECURSION SEED\n\n                        return accessibleTreeItem;\n                    }\n                }\n            }\n\n            return null;\n        }\n\n private static AccessibleTreeItem GetAccessibleContextInfo(Int32 vmID, IntPtr currentPtr, out AccessibleContextInfo currentContext, AccessibleTreeItem parentItem, int level, string lineage)\n        {\n            unsafe\n            {\n                // Allocate global memory space for the size of AccessibleContextInfo and store the address in acPtr\n                IntPtr acPtr = Marshal.AllocHGlobal(Marshal.SizeOf(new AccessibleContextInfo()));\n                try\n                {\n\n                    Marshal.StructureToPtr(new AccessibleContextInfo(), acPtr, true);\n                    if (JabApi.getAccessibleContextInfo(vmID, currentPtr, acPtr))\n                    {\n                        currentContext = (AccessibleContextInfo)Marshal.PtrToStructure(acPtr, typeof(AccessibleContextInfo));\n                        if (!ReferenceEquals(currentContext, null))\n                        {\n                            AccessibleTreeItem newItem = BuildAccessibleTree(currentPtr, currentContext, parentItem);\n\n                            if (!ReferenceEquals(newItem, null))\n                            {\n                                //Checks to see if current object has any text items.\n                                if (currentContext.accessibleText == true)\n                                {\n                                    AccessibleTextItemsInfo textItem;\n                                    //Gets text items.\n                                    textItem = GetAccessibleTextInfo(vmID, currentPtr);\n                                    newItem.textValue = textItem.sentence;\n\n                                    string treeInfo = Repeat(&quot;\\t&quot;, level) + currentContext.name + &quot; = \\&quot;&quot; + textItem.sentence + &quot;\\&quot;&quot;;\n                                    screenContentsString += treeInfo + Environment.NewLine;\n                                    Debug.Print(treeInfo);\n                                }\n                                else\n                                {\n                                    string treeInfo = Repeat(&quot;\\t&quot;, level) + currentContext.name;\n                                    screenContentsString += treeInfo + Environment.NewLine;\n                                    Debug.Print(treeInfo);\n                                }\n\n\n                                //Start collecting children\n                                int nextLevel = level + 1;\n                                for (int i = 0; i &lt; currentContext.childrenCount; i++)\n                                {\n                                    string lineageInfo = Repeat(&quot;\\t&quot;, level) + level.ToString() + &quot; Child &quot; + i.ToString() + &quot; Lineage = {&quot; + lineage + &quot;}&quot;;\n                                    screenContentsString += lineageInfo + Environment.NewLine;\n                                    Debug.Print(lineageInfo);\n\n                                    string currentlineage;\n                                    if (lineage == string.Empty)\n                                        currentlineage = i.ToString();\n                                    else\n                                        currentlineage = lineage + &quot;, &quot; + i.ToString();\n\n                                    if (currentContext.role_en_US != &quot;unknown&quot; &amp;&amp; currentContext.states_en_US.Contains(&quot;visible&quot;)) // Note the optomization here, I found this get me to an acceptable speed\n                                    {\n                                        AccessibleContextInfo childContext = new AccessibleContextInfo();\n                                        IntPtr childPtr = JabApi.getAccessibleChildFromContext(vmID, currentPtr, i);\n\n                                        GetAccessibleContextInfo(vmID, childPtr, out childContext, newItem, nextLevel, currentlineage);\n\n                                    }\n\n                                }\n                            }\n\n                            return newItem;\n                        }\n                    }\n                    else\n                    {\n                        currentContext = new AccessibleContextInfo();\n                    }\n                }\n                finally\n                {\n                    if (acPtr != IntPtr.Zero)\n                        Marshal.FreeHGlobal(acPtr);\n                }\n            }\n            return null;\n        }\n\npublic void MyDispose(AccessibleTreeItem parent, int vmID)\n            {\n                if (parent.children.Count == 0)\n                {\n                    JabApi.releaseJavaObject(vmID, parent.acPtr);\n                }\n                else\n                {\n                    for (int i = 0; i &lt; parent.childrenCount; i++)\n                    {\n                        parent.children[i].MyDispose(parent.children[i], vmID);\n                    }\n                    JabApi.releaseJavaObject(vmID, parent.acPtr);\n                }\n            }\n\n</code></pre>\n<p>Here is a part of JabApi code :</p>\n<p>You can see the releaseJavaObject() metod is imported in there.</p>\n<pre><code> public static class JabApi\n    {\n\n        public const String WinAccessBridgeDll = @&quot;WindowsAccessBridge-64.dll&quot;;\n        public const Int32 MAX_STRING_SIZE = 1024;\n        public const Int32 SHORT_STRING_SIZE = 256;\n\n        #region Event Handlers\n        #region EventDLLImport\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setMouseClickedFP(MouseClickedDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setMouseEnteredFP(MouseEnteredDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setMouseExitedFP(MouseExitedDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setMousePressedFP(MousePressedDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setMouseReleasedFP(MouseReleasedDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setFocusGainedFP(FocusGainedDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setFocusLostFP(FocusLostDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setCaretUpdateFP(CaretUpdateDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setJavaShutdownFP(JavaShutDownDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setMenuCanceledFP(MenuCanceledDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setMenuDeselectedFP(MenuDeselectedDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setMenuSelectedFP(MenuSelectedDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPopupMenuCanceledFP(PopupMenuCanceledDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPopupMenuWillBecomeInvisibleFP(PopupMenuWillBecomeInvisibleDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPopupMenuWillBecomeVisibleFP(PopupMenuWillBecomeVisibleDelegate fp);\n        \n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPropertyActiveDescendentChangeFP(PropertyActiveDescendentChangeDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPropertyCaretChangeFP(PropertyCaretChangeDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPropertyChangeFP(PropertyChangeDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPropertyChildChangeFP(PropertyChildChangeDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPropertyDescriptionChangeFP(PropertyDescriptionChangeDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPropertyNameChangeFP(PropertyNameChangeDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPropertySelectionChangeFP(PropertySelectionChangeDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPropertyStateChangeFP(PropertyStateChangeDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPropertyTableModelChangeFP(PropertyTableModelChangeDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPropertyTextChangeFP(PropertyTextChangeDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPropertyValueChangeFP(PropertyValueChangeDelegate fp);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setPropertyVisibleDataChangeFP(PropertyVisibleDataChangeDelegate fp);\n        #endregion EventDLLImport\n        #region Event Delegates\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PropertyChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\n            [MarshalAs(UnmanagedType.LPWStr)] string property, [MarshalAs(UnmanagedType.LPWStr)] string oldValue, [MarshalAs(UnmanagedType.LPWStr)] string newValue);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void JavaShutDownDelegate(System.Int32 vmID);\n\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void FocusGainedDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void FocusLostDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void CaretUpdateDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void MouseClickedDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void MouseEnteredDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void MouseExitedDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void MousePressedDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void MouseReleasedDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void MenuCanceledDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void MenuDeselectedDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void MenuSelectedDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PopupMenuCanceledDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PopupMenuWillBecomeInvisibleDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PopupMenuWillBecomeVisibleDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PropertyNameChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\n            [MarshalAs(UnmanagedType.LPWStr)] string oldName, [MarshalAs(UnmanagedType.LPWStr)] string newName);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PropertyDescriptionChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\n            [MarshalAs(UnmanagedType.LPWStr)] string oldDescription, [MarshalAs(UnmanagedType.LPWStr)] string newDescription);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PropertyStateChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\n            [MarshalAs(UnmanagedType.LPWStr)] string oldState, [MarshalAs(UnmanagedType.LPWStr)] string newState);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PropertyValueChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\n            [MarshalAs(UnmanagedType.LPWStr)] string oldValue, [MarshalAs(UnmanagedType.LPWStr)] string newValue);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PropertySelectionChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PropertyTextChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PropertyCaretChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\n        Int32 oldPosition, Int32 newPosition);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PropertyVisibleDataChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PropertyChildChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\n        IntPtr oldChild, IntPtr newChild);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PropertyActiveDescendentChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\n        IntPtr oldActiveDescendent, IntPtr newActiveDescendent);\n\n        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]\n        public delegate void PropertyTableModelChangeDelegate(System.Int32 vmID, IntPtr jevent, IntPtr ac,\n        IntPtr oldValue, IntPtr newValue);\n\n        #endregion Event Delegates\n\n        #endregion DLLImport - Functions\n\n        //Inits the JAB.\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void Windows_run();\n\n        //Checks if window is JavaWindow.\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static unsafe Int32 isJavaWindow(IntPtr hwnd);\n\n        //Releases the specified java object.\n        //[DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        [DllImport(WinAccessBridgeDll, EntryPoint = &quot;releaseJavaObject&quot;, CallingConvention = CallingConvention.Cdecl)]\n        public extern static void releaseJavaObject(Int32 vmID, IntPtr javaObject);\n\n        //Sets the text of the given accessible context.\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void setTextContents(Int32 vmID, IntPtr ac, [MarshalAs(UnmanagedType.LPWStr)] string text);\n\n        //Gets basic version info about JVM/JAB\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static void getVersionInfo(Int32 vmID, IntPtr versionInfo);\n\n        //Gets the next java window, where the hwnd passed is the previous window.\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static unsafe IntPtr getNextJavaWindow(IntPtr hwnd);\n\n        //Returns ac from window handle.\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static unsafe Boolean getAccessibleContextFromHWND(IntPtr hwnd, out Int32 vmID, out IntPtr ac);\n\n        //Returns handle from ac\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static unsafe IntPtr getHWNDFromAccessibleContext(Int32 vmID, IntPtr ac);\n\n        //Compares two objects\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static unsafe Boolean isSameObject(Int32 vmID, IntPtr ac1, IntPtr ac2);\n\n        //Returns an AccessibleContext object that represents the point given, offset by window coordinates.\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static unsafe Boolean getAccessibleContextAt(Int32 vmID, IntPtr acparent, Int32 x, Int32 y, out IntPtr ac);\n\n        //Returns an AccessibleContext object that represents the nth child of the object ac, where n is specified by the value index.\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static unsafe IntPtr getAccessibleChildFromContext(Int32 vmID, IntPtr ac, Int32 index);\n\n        //Returns an AccessibleContext object that represents the window with focus.\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static unsafe Boolean getAccessibleContextWithFocus(void* window, out Int32 vmID, out IntPtr ac);\n\n        //Returns an AccessibleContext object that represents the parent of the specified object.\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static unsafe IntPtr getAccessibleParentFromContext(Int32 vmID, IntPtr ac);\n\n        //Returns detailed information about an AccessibleContext object belonging to the JVM\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static unsafe Boolean getAccessibleContextInfo(Int32 vmID, IntPtr accessibleContext, IntPtr acInfo);\n\n        //**ACCESSIBLE TEXT FUNCTIONS\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static unsafe Boolean getAccessibleTextInfo(Int32 vmID, IntPtr AccessibleContext, IntPtr textInfo, Int32 x, Int32 y);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static unsafe Boolean getAccessibleTextItems(Int32 vmID, IntPtr AccessibleContext, IntPtr textItems, Int32 index);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static unsafe Boolean getAccessibleTextAttributes(Int32 vmID, IntPtr AccessibleContext, Int32 index, IntPtr attributes);\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static unsafe Boolean GetAccessibleTextSelectionInfo(Int32 vmID, IntPtr AccessibleContext, Int32 index, IntPtr textSelection);\n\n\n        //\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static Boolean getAccessibleActions(Int32 vmID, IntPtr AccessibleContext,  IntPtr ptrAccessibleActions);\n\n\n        [DllImport(WinAccessBridgeDll, SetLastError = true, ThrowOnUnmappableChar = true, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]\n        public extern static Boolean doAccessibleActions(Int32 vmID, IntPtr AccessibleContext, IntPtr actionsToDo, ref Int32 failure);\n\n\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-studio"],"comment_count":0,"is_answered":false,"view_count":26,"answer_count":0,"score":-1,"last_activity_date":1701267840,"creation_date":1701267840,"question_id":77571993,"body_markdown":"i want to pass Arraylist from Activity to another Activity, but i have a problem, here is my code: \r\n\r\n```\r\nif (list != null) {\r\n            Intent intent = new Intent(DueViewActivity.this, DoneViewActivity.class);\r\n            intent.putStringArrayListExtra(&quot;lista&quot;,list);\r\n            startActivity(intent);\r\n            Log.d(&quot;Due Act&quot;, &quot;listDue: &quot; + list);\r\n        } list in first Activity,,it prints listDue: [homework1, homework4, homework6, homework2]\r\n```\r\n   \r\n  \r\nin second Activity i made:\r\n\r\n```\r\nIntent intent = getIntent();\r\n        ArrayList&lt;String&gt; list2 = intent.getStringArrayListExtra(&quot;lista&quot;);\r\n        Log.d(&quot;Done Activity list2&quot;, &quot;list2: &quot; + list2);\r\nbut it prints list2:null\r\n```\r\n\r\nhow can solve  this?\r\n\r\n","link":"https://stackoverflow.com/questions/77571993/how-can-i-pass-arraylist-from-activity-to-another","title":"How can i pass Arraylist from Activity to another?","body":"<p>i want to pass Arraylist from Activity to another Activity, but i have a problem, here is my code:</p>\n<pre><code>if (list != null) {\n            Intent intent = new Intent(DueViewActivity.this, DoneViewActivity.class);\n            intent.putStringArrayListExtra(&quot;lista&quot;,list);\n            startActivity(intent);\n            Log.d(&quot;Due Act&quot;, &quot;listDue: &quot; + list);\n        } list in first Activity,,it prints listDue: [homework1, homework4, homework6, homework2]\n</code></pre>\n<p>in second Activity i made:</p>\n<pre><code>Intent intent = getIntent();\n        ArrayList&lt;String&gt; list2 = intent.getStringArrayListExtra(&quot;lista&quot;);\n        Log.d(&quot;Done Activity list2&quot;, &quot;list2: &quot; + list2);\nbut it prints list2:null\n</code></pre>\n<p>how can solve  this?</p>\n"},{"tags":["java","json","jackson","json-deserialization"],"comment_count":0,"is_answered":false,"view_count":12,"answer_count":0,"score":-1,"last_activity_date":1701267559,"creation_date":1701267559,"question_id":77571954,"body_markdown":"Given this JSON documents:\r\n\r\n```json\r\n{\r\n  &quot;first-name&quot;: &quot;John&quot;,\r\n  &quot;last-name&quot;: &quot;Smith&quot;,\r\n  &quot;children&quot;: [&quot;Sam&quot;, &quot;Joe&quot;]\r\n}\r\n```\r\n\r\nor:\r\n\r\n```json\r\n{\r\n  &quot;first-name&quot;: &quot;John&quot;,\r\n  &quot;last-name&quot;: &quot;Smith&quot;,\r\n  &quot;children&quot;: [{\r\n    &quot;first-name&quot;: &quot;Sam&quot;,\r\n    &quot;last-name&quot;: &quot;Smith&quot;\r\n  }, {\r\n    &quot;first-name&quot; : &quot;Joe&quot;,\r\n    &quot;last-name&quot;: &quot;Smith&quot;\r\n  }]\r\n}\r\n```\r\n\r\nWhere for the `children` attribute the value can be either a JSON-String or a JSON-Object.\r\nWe can assume that when a String is provided, this correspond to the first name.\r\n\r\nMany stack-overflow answers point to the fact that this can be solved with a custom `JsonDeserializer` class:\r\n\r\nJava code:\r\n```\r\nimport java.io.IOException;\r\nimport java.util.List;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.core.JsonParser;\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.DeserializationContext;\r\nimport com.fasterxml.jackson.databind.JsonDeserializer;\r\nimport com.fasterxml.jackson.databind.JsonMappingException;\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\r\n\r\npublic class Main {\r\n\r\n    public static class Person {\r\n        @JsonProperty(&quot;first-name&quot;)\r\n        private String firstName;\r\n\r\n        @JsonProperty(&quot;last-name&quot;)\r\n        private String lastName;\r\n\r\n        @JsonProperty(&quot;children&quot;)\r\n        private List&lt;Child&gt; children;\r\n\r\n        public Person() {\r\n        }\r\n\r\n        public String getFirstName() {\r\n            return firstName;\r\n        }\r\n\r\n        public void setFirstName(String firstName) {\r\n            this.firstName = firstName;\r\n        }\r\n\r\n        public String getLastName() {\r\n            return lastName;\r\n        }\r\n\r\n        public void setLastName(String lastName) {\r\n            this.lastName = lastName;\r\n        }\r\n\r\n        public List&lt;Child&gt; getChildren() {\r\n            return children;\r\n        }\r\n\r\n        public void setChildren(List&lt;Child&gt; children) {\r\n            this.children = children;\r\n        }\r\n    }\r\n\r\n    @JsonDeserialize(using = ChildDeserializer.class)\r\n    public static class Child {\r\n        @JsonProperty(&quot;first-name&quot;)\r\n        private String firstName;\r\n\r\n        @JsonProperty(&quot;last-name&quot;)\r\n        private String lastName;\r\n\r\n        public Child() {\r\n        }\r\n\r\n        public Child(String firstName, String lastName) {\r\n            this.firstName = firstName;\r\n            this.lastName = lastName;\r\n        }\r\n\r\n        public String getFirstName() {\r\n            return firstName;\r\n        }\r\n\r\n        public void setFirstName(String firstName) {\r\n            this.firstName = firstName;\r\n        }\r\n\r\n        public String getLastName() {\r\n            return lastName;\r\n        }\r\n\r\n        public void setLastName(String lastName) {\r\n            this.lastName = lastName;\r\n        }\r\n    }\r\n\r\n    public static class ChildDeserializer extends JsonDeserializer&lt;Child&gt; {\r\n        @Override\r\n        public Child deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\r\n            JsonNode node = jsonParser.getCodec()\r\n                    .readTree(jsonParser);\r\n\r\n            if (node.isObject()) {\r\n                String firstName = node.has(&quot;first-name&quot;) ? node.get(&quot;first-name&quot;)\r\n                        .textValue() : null;\r\n                String lastName = node.has(&quot;last-name&quot;) ? node.get(&quot;last-name&quot;)\r\n                        .textValue() : null;\r\n                return new Child(firstName, lastName);\r\n            } else if (node.isTextual()) {\r\n                return new Child(node.asText(), null);\r\n            }\r\n\r\n            return null;\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        parseAndPrint(&quot;{ \\&quot;first-name\\&quot;: \\&quot;John\\&quot;, \\&quot;last-name\\&quot;: \\&quot;Smith\\&quot;, \\&quot;children\\&quot;: [\\&quot;Sam\\&quot;, \\&quot;Joe\\&quot;] }&quot;);\r\n        parseAndPrint(&quot;{ \\&quot;first-name\\&quot;: \\&quot;John\\&quot;, \\&quot;last-name\\&quot;: \\&quot;Smith\\&quot;, \\&quot;children\\&quot;: [{\\&quot;first-name\\&quot;: \\&quot;Sam\\&quot;, \\&quot;last-name\\&quot;: \\&quot;Smith\\&quot;}, {\\&quot;first-name\\&quot;: \\&quot;Joe\\&quot;, \\&quot;last-name\\&quot;: \\&quot;Smith\\&quot;}] }&quot;);\r\n        parseAndPrint(&quot;{ \\&quot;first-name\\&quot;: \\&quot;Bob\\&quot;, \\&quot;children\\&quot;: [{\\&quot;last-name\\&quot;: \\&quot;Smith\\&quot;}] }&quot;);\r\n    }\r\n\r\n    private static void parseAndPrint(String json1) throws JsonProcessingException, JsonMappingException {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n        Person person = objectMapper.readValue(json1, Person.class);\r\n        System.out.println(&quot;Person: &quot; + person.getFirstName() + &quot; &quot; + person.getLastName());\r\n        System.out.println(&quot;Children:&quot;);\r\n        for (Child child : person.getChildren()) {\r\n            System.out.println(child.getFirstName() + &quot; &quot; + child.getLastName());\r\n        }\r\n        System.out.println(&quot;---&quot;);\r\n    }\r\n}\r\n```\r\n\r\nI am wondering if there is a better way, since with this approach the custom `JsonDeserializer` is handling all the attributes of the `Child` entity one by one.\r\n\r\nWhen a new attribute is added to the Child entity, there is the need add it both in the Java Object (new filed with the `@JsonProperty` annotation) and new case in the `JsonDeserializer`\r\n\r\n","link":"https://stackoverflow.com/questions/77571954/how-to-write-a-custom-deserialiser-for-jackson-to-parse-of-a-value-that-is-eithe","title":"How to write a custom Deserialiser for Jackson to parse of a value that is either a String or an Object into a Java Class (oneOf)","body":"<p>Given this JSON documents:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;first-name&quot;: &quot;John&quot;,\n  &quot;last-name&quot;: &quot;Smith&quot;,\n  &quot;children&quot;: [&quot;Sam&quot;, &quot;Joe&quot;]\n}\n</code></pre>\n<p>or:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;first-name&quot;: &quot;John&quot;,\n  &quot;last-name&quot;: &quot;Smith&quot;,\n  &quot;children&quot;: [{\n    &quot;first-name&quot;: &quot;Sam&quot;,\n    &quot;last-name&quot;: &quot;Smith&quot;\n  }, {\n    &quot;first-name&quot; : &quot;Joe&quot;,\n    &quot;last-name&quot;: &quot;Smith&quot;\n  }]\n}\n</code></pre>\n<p>Where for the <code>children</code> attribute the value can be either a JSON-String or a JSON-Object.\nWe can assume that when a String is provided, this correspond to the first name.</p>\n<p>Many stack-overflow answers point to the fact that this can be solved with a custom <code>JsonDeserializer</code> class:</p>\n<p>Java code:</p>\n<pre><code>import java.io.IOException;\nimport java.util.List;\n\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JsonDeserializer;\nimport com.fasterxml.jackson.databind.JsonMappingException;\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\n\npublic class Main {\n\n    public static class Person {\n        @JsonProperty(&quot;first-name&quot;)\n        private String firstName;\n\n        @JsonProperty(&quot;last-name&quot;)\n        private String lastName;\n\n        @JsonProperty(&quot;children&quot;)\n        private List&lt;Child&gt; children;\n\n        public Person() {\n        }\n\n        public String getFirstName() {\n            return firstName;\n        }\n\n        public void setFirstName(String firstName) {\n            this.firstName = firstName;\n        }\n\n        public String getLastName() {\n            return lastName;\n        }\n\n        public void setLastName(String lastName) {\n            this.lastName = lastName;\n        }\n\n        public List&lt;Child&gt; getChildren() {\n            return children;\n        }\n\n        public void setChildren(List&lt;Child&gt; children) {\n            this.children = children;\n        }\n    }\n\n    @JsonDeserialize(using = ChildDeserializer.class)\n    public static class Child {\n        @JsonProperty(&quot;first-name&quot;)\n        private String firstName;\n\n        @JsonProperty(&quot;last-name&quot;)\n        private String lastName;\n\n        public Child() {\n        }\n\n        public Child(String firstName, String lastName) {\n            this.firstName = firstName;\n            this.lastName = lastName;\n        }\n\n        public String getFirstName() {\n            return firstName;\n        }\n\n        public void setFirstName(String firstName) {\n            this.firstName = firstName;\n        }\n\n        public String getLastName() {\n            return lastName;\n        }\n\n        public void setLastName(String lastName) {\n            this.lastName = lastName;\n        }\n    }\n\n    public static class ChildDeserializer extends JsonDeserializer&lt;Child&gt; {\n        @Override\n        public Child deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\n            JsonNode node = jsonParser.getCodec()\n                    .readTree(jsonParser);\n\n            if (node.isObject()) {\n                String firstName = node.has(&quot;first-name&quot;) ? node.get(&quot;first-name&quot;)\n                        .textValue() : null;\n                String lastName = node.has(&quot;last-name&quot;) ? node.get(&quot;last-name&quot;)\n                        .textValue() : null;\n                return new Child(firstName, lastName);\n            } else if (node.isTextual()) {\n                return new Child(node.asText(), null);\n            }\n\n            return null;\n        }\n    }\n\n    public static void main(String[] args) throws Exception {\n        parseAndPrint(&quot;{ \\&quot;first-name\\&quot;: \\&quot;John\\&quot;, \\&quot;last-name\\&quot;: \\&quot;Smith\\&quot;, \\&quot;children\\&quot;: [\\&quot;Sam\\&quot;, \\&quot;Joe\\&quot;] }&quot;);\n        parseAndPrint(&quot;{ \\&quot;first-name\\&quot;: \\&quot;John\\&quot;, \\&quot;last-name\\&quot;: \\&quot;Smith\\&quot;, \\&quot;children\\&quot;: [{\\&quot;first-name\\&quot;: \\&quot;Sam\\&quot;, \\&quot;last-name\\&quot;: \\&quot;Smith\\&quot;}, {\\&quot;first-name\\&quot;: \\&quot;Joe\\&quot;, \\&quot;last-name\\&quot;: \\&quot;Smith\\&quot;}] }&quot;);\n        parseAndPrint(&quot;{ \\&quot;first-name\\&quot;: \\&quot;Bob\\&quot;, \\&quot;children\\&quot;: [{\\&quot;last-name\\&quot;: \\&quot;Smith\\&quot;}] }&quot;);\n    }\n\n    private static void parseAndPrint(String json1) throws JsonProcessingException, JsonMappingException {\n        ObjectMapper objectMapper = new ObjectMapper();\n\n        Person person = objectMapper.readValue(json1, Person.class);\n        System.out.println(&quot;Person: &quot; + person.getFirstName() + &quot; &quot; + person.getLastName());\n        System.out.println(&quot;Children:&quot;);\n        for (Child child : person.getChildren()) {\n            System.out.println(child.getFirstName() + &quot; &quot; + child.getLastName());\n        }\n        System.out.println(&quot;---&quot;);\n    }\n}\n</code></pre>\n<p>I am wondering if there is a better way, since with this approach the custom <code>JsonDeserializer</code> is handling all the attributes of the <code>Child</code> entity one by one.</p>\n<p>When a new attribute is added to the Child entity, there is the need add it both in the Java Object (new filed with the <code>@JsonProperty</code> annotation) and new case in the <code>JsonDeserializer</code></p>\n"},{"tags":["java","sql","spring","hibernate","jpa"],"comments":[{"score":0,"post_type":"question","creation_date":1701267139,"post_id":77571851,"comment_id":136754409,"body_markdown":"`UserResult` has an id property?","link":"https://stackoverflow.com/questions/77571851/trying-to-retrieve-data-using-jpa-query-annotation#comment136754409_77571851","body":"<code>UserResult</code> has an id property?"},{"score":1,"post_type":"question","creation_date":1701267227,"post_id":77571851,"comment_id":136754428,"body_markdown":"Could you share `@Entity` class that you have in java code ?","link":"https://stackoverflow.com/questions/77571851/trying-to-retrieve-data-using-jpa-query-annotation#comment136754428_77571851","body":"Could you share <code>@Entity</code> class that you have in java code ?"},{"score":0,"post_type":"question","creation_date":1701269850,"post_id":77571851,"comment_id":136755071,"body_markdown":"Your entity isn&#39;t mapped to the data correctly. This is a native query that is only returning 2 fields (name and score) while your entity requires an ID column as well. If you use JPQL query, maybe something like Query(value = &quot;select resultfrom UserResult result where result.quizId = :quizId&quot;), just be sure you have a java &#39;quizId&#39; property","link":"https://stackoverflow.com/questions/77571851/trying-to-retrieve-data-using-jpa-query-annotation#comment136755071_77571851","body":"Your entity isn&#39;t mapped to the data correctly. This is a native query that is only returning 2 fields (name and score) while your entity requires an ID column as well. If you use JPQL query, maybe something like Query(value = &quot;select resultfrom UserResult result where result.quizId = :quizId&quot;), just be sure you have a java &#39;quizId&#39; property"},{"score":0,"post_type":"question","creation_date":1701285627,"post_id":77571851,"comment_id":136758115,"body_markdown":"I&#39;ve tried using as you said @Chris and it worked, thanks in advance to everyone that answered too.","link":"https://stackoverflow.com/questions/77571851/trying-to-retrieve-data-using-jpa-query-annotation#comment136758115_77571851","body":"I&#39;ve tried using as you said @Chris and it worked, thanks in advance to everyone that answered too."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701267553,"last_edit_date":1701267553,"creation_date":1701267509,"answer_id":77571946,"question_id":77571851,"body_markdown":"Make sure UserResult entity has an attribute named id, like this : \r\n\r\n    @Id\r\n    @Column(name = &quot;ID&quot;)\r\n    private String id;","link":"https://stackoverflow.com/questions/77571851/trying-to-retrieve-data-using-jpa-query-annotation/77571946#77571946","title":"Trying to retrieve data using JPA Query Annotation","body":"<p>Make sure UserResult entity has an attribute named id, like this :</p>\n<pre><code>@Id\n@Column(name = &quot;ID&quot;)\nprivate String id;\n</code></pre>\n"}],"comment_count":4,"is_answered":false,"view_count":42,"answer_count":1,"score":0,"last_activity_date":1701267553,"creation_date":1701266875,"question_id":77571851,"body_markdown":"I&#39;m trying to execute a query using the @Query annotation from JPA, like this:\r\n\r\n\r\n    public interface UserResultRepository extends CrudRepository&lt;UserResult, String&gt; {\r\n\r\n    @Query(value = &quot;SELECT name, score FROM quizzapp.user_result result WHERE result.quiz_id = :quizId&quot;, nativeQuery = true)\r\n    List&lt;UserResult&gt; listResultsForExport(@Param(&quot;quizId&quot;) String quizId); \r\n\r\n    }\r\n\r\nBut i&#39;m getting the following message from the console:\r\n\r\n`java.sql.SQLException: Column &#39;id&#39; not found.`\r\n\r\nHere&#39;s the entity structure inside the database:\r\n\r\n[Entity in database](https://i.stack.imgur.com/ELcrr.png)\r\n\r\nI first tried to use without the `nativeQuery`, but i got a different error saying that i should have a converter to the data that was being retrieved from the database, and then i did it again using the `nativeQuery`, and now i&#39;m facing this different error.","link":"https://stackoverflow.com/questions/77571851/trying-to-retrieve-data-using-jpa-query-annotation","title":"Trying to retrieve data using JPA Query Annotation","body":"<p>I'm trying to execute a query using the @Query annotation from JPA, like this:</p>\n<pre><code>public interface UserResultRepository extends CrudRepository&lt;UserResult, String&gt; {\n\n@Query(value = &quot;SELECT name, score FROM quizzapp.user_result result WHERE result.quiz_id = :quizId&quot;, nativeQuery = true)\nList&lt;UserResult&gt; listResultsForExport(@Param(&quot;quizId&quot;) String quizId); \n\n}\n</code></pre>\n<p>But i'm getting the following message from the console:</p>\n<p><code>java.sql.SQLException: Column 'id' not found.</code></p>\n<p>Here's the entity structure inside the database:</p>\n<p><a href=\"https://i.stack.imgur.com/ELcrr.png\" rel=\"nofollow noreferrer\">Entity in database</a></p>\n<p>I first tried to use without the <code>nativeQuery</code>, but i got a different error saying that i should have a converter to the data that was being retrieved from the database, and then i did it again using the <code>nativeQuery</code>, and now i'm facing this different error.</p>\n"},{"tags":["java","xml","jackson","deserialization","jackson-dataformat-xml"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701267361,"creation_date":1701267361,"answer_id":77571922,"question_id":77571733,"body_markdown":"Ok, it is actually easier than I thought, Jackson is awesome.\r\n\r\nJust need to change type from `String` for `value` to type `Object` like below:\r\n\r\n```\r\nprivate Map&lt;String, Object&gt; localMetadataAttributesMap;\r\n    \r\n    private BoundedBy boundedBy;\r\n\r\n    @JsonAnySetter\r\n    // NOTE: To map an unknown list of properties, must use this annotation\r\n    public void addKeyValue(String key, Object value) {\r\n        this.localMetadataAttributesMap.put(key, value);\r\n    }\r\n\r\n    public LocalMetadataChild() {\r\n        this.localMetadataAttributesMap = new LinkedHashMap&lt;&gt;();\r\n        this.boundedBy = new BoundedBy();\r\n    }\r\n\r\n    @JsonAnyGetter\r\n    // NOTE: to unwrap the &quot;map&quot; from { &quot;map&quot;: { &quot;key&quot;: &quot;value&quot; } }, only keep { &quot;key&quot;: &quot;value&quot; }\r\n    public Map&lt;String, Object&gt; getLocalMetadataAttributesMap() {\r\n        return localMetadataAttributesMap;\r\n    }\r\n```\r\n\r\nThen, serialize the `value` to `String` afterwards.\r\n\r\n```\r\n        XmlMapper xmlMapper = new XmlMapper();\r\n        Object obj = value of the map above\r\n        xmlMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\r\n        xmlMapper.setSerializationInclusion(JsonInclude.Include.NON_EMPTY);\r\n        String xml = xmlMapper.writer().writeValueAsString(obj);\r\n```\r\n\r\n","link":"https://stackoverflow.com/questions/77571733/how-to-map-a-nested-xml-element-content-as-a-string-of-a-map/77571922#77571922","title":"How to map a nested XML element content as a string of a map?","body":"<p>Ok, it is actually easier than I thought, Jackson is awesome.</p>\n<p>Just need to change type from <code>String</code> for <code>value</code> to type <code>Object</code> like below:</p>\n<pre><code>private Map&lt;String, Object&gt; localMetadataAttributesMap;\n    \n    private BoundedBy boundedBy;\n\n    @JsonAnySetter\n    // NOTE: To map an unknown list of properties, must use this annotation\n    public void addKeyValue(String key, Object value) {\n        this.localMetadataAttributesMap.put(key, value);\n    }\n\n    public LocalMetadataChild() {\n        this.localMetadataAttributesMap = new LinkedHashMap&lt;&gt;();\n        this.boundedBy = new BoundedBy();\n    }\n\n    @JsonAnyGetter\n    // NOTE: to unwrap the &quot;map&quot; from { &quot;map&quot;: { &quot;key&quot;: &quot;value&quot; } }, only keep { &quot;key&quot;: &quot;value&quot; }\n    public Map&lt;String, Object&gt; getLocalMetadataAttributesMap() {\n        return localMetadataAttributesMap;\n    }\n</code></pre>\n<p>Then, serialize the <code>value</code> to <code>String</code> afterwards.</p>\n<pre><code>        XmlMapper xmlMapper = new XmlMapper();\n        Object obj = value of the map above\n        xmlMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\n        xmlMapper.setSerializationInclusion(JsonInclude.Include.NON_EMPTY);\n        String xml = xmlMapper.writer().writeValueAsString(obj);\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":21,"answer_count":1,"score":0,"last_activity_date":1701267361,"creation_date":1701265883,"last_edit_date":1701266087,"question_id":77571733,"body_markdown":"I&#39;m using Java and Jackson:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n    &lt;version&gt;2.8.7&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI have this XML and want to deserialize the element name: `&lt;RandomName&gt;` (note that this element name can be anything and the content of it is random as well) as the key and any XML content under it as the string value of a map, so it would be like: `RandomName` -&gt; `&lt;metadaten&gt; ... &lt;/metadaten&gt;`.\r\n\r\n```xml\r\n&lt;slices&gt;\r\n    &lt;slice&gt;\r\n        &lt;boundedBy&gt;\r\n            &lt;Envelope&gt;\r\n                &lt;axisLabels&gt;Lat Long&lt;/axisLabels&gt;\r\n                &lt;srsDimension&gt;2&lt;/srsDimension&gt;\r\n                &lt;lowerCorner&gt;-44.975 111.975&lt;/lowerCorner&gt;\r\n                &lt;upperCorner&gt;-8.975 130.975&lt;/upperCorner&gt;\r\n            &lt;/Envelope&gt;\r\n        &lt;/boundedBy&gt;\r\n        &lt;local_metadata_key&gt;test123&lt;/local_metadata_key&gt;\r\n        &lt;RandomName&gt;\r\n            &lt;metadaten&gt;\r\n                &lt;Kompression&gt;0&lt;/Kompression&gt;\r\n                &lt;Komprimierung&gt;0&lt;/Komprimierung&gt;\r\n                &lt;Belaubungszustand&gt;3&lt;/Belaubungszustand&gt;\r\n                &lt;Bemerkungen&gt;keine&lt;/Bemerkungen&gt;\r\n            &lt;/metadaten&gt;\r\n        &lt;/RandomName&gt;\r\n        &lt;fileReferenceHistory&gt;testfile&lt;/fileReferenceHistory&gt;   \r\n    &lt;/slice&gt;\r\n&lt;/slices&gt;\r\n```\r\n\r\nI have this class to deserialize the XML to it, but in the method `addKeyValue()`, it always sees `key` = `RandomName` and `value` = empty string, here I wanted, `value` = `&lt;metadaten&gt; ... &lt;/metadaten&gt;` instead.\r\n\r\n```java\r\npublic class LocalMetadataChild {\r\n    \r\n    public static final String LOCAL_METADATA_TAG = &quot;slice&quot;;\r\n\r\n    private Map&lt;String, String&gt; localMetadataAttributesMap;\r\n    \r\n    private BoundedBy boundedBy;\r\n\r\n    @JsonAnySetter\r\n    // NOTE: To map an unknown list of properties, must use this annotation\r\n    public void addKeyValue(String key, String value) {\r\n        this.localMetadataAttributesMap.put(key, value);\r\n    }\r\n\r\n    public LocalMetadataChild() {\r\n        this.localMetadataAttributesMap = new LinkedHashMap&lt;&gt;();\r\n        this.boundedBy = new BoundedBy();\r\n    }\r\n\r\n    @JsonAnyGetter\r\n    // NOTE: to unwrap the &quot;map&quot; from { &quot;map&quot;: { &quot;key&quot;: &quot;value&quot; } }, only keep { &quot;key&quot;: &quot;value&quot; }\r\n    public Map&lt;String, String&gt; getLocalMetadataAttributesMap() {\r\n        return localMetadataAttributesMap;\r\n    }\r\n    \r\n    public BoundedBy getBoundedBy() {\r\n        return this.boundedBy;\r\n    }\r\n\r\n    public void setBoundedBy(BoundedBy boundedBy) {\r\n        this.boundedBy = boundedBy;\r\n    }\r\n\r\n    public LocalMetadataChild(Map&lt;String, String&gt; localMetadataAttributesMap, BoundedBy boundedBy) {\r\n        this.localMetadataAttributesMap = localMetadataAttributesMap;\r\n        this.boundedBy = boundedBy;\r\n    }\r\n}\r\n```","link":"https://stackoverflow.com/questions/77571733/how-to-map-a-nested-xml-element-content-as-a-string-of-a-map","title":"How to map a nested XML element content as a string of a map?","body":"<p>I'm using Java and Jackson:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n    &lt;version&gt;2.8.7&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I have this XML and want to deserialize the element name: <code>&lt;RandomName&gt;</code> (note that this element name can be anything and the content of it is random as well) as the key and any XML content under it as the string value of a map, so it would be like: <code>RandomName</code> -&gt; <code>&lt;metadaten&gt; ... &lt;/metadaten&gt;</code>.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;slices&gt;\n    &lt;slice&gt;\n        &lt;boundedBy&gt;\n            &lt;Envelope&gt;\n                &lt;axisLabels&gt;Lat Long&lt;/axisLabels&gt;\n                &lt;srsDimension&gt;2&lt;/srsDimension&gt;\n                &lt;lowerCorner&gt;-44.975 111.975&lt;/lowerCorner&gt;\n                &lt;upperCorner&gt;-8.975 130.975&lt;/upperCorner&gt;\n            &lt;/Envelope&gt;\n        &lt;/boundedBy&gt;\n        &lt;local_metadata_key&gt;test123&lt;/local_metadata_key&gt;\n        &lt;RandomName&gt;\n            &lt;metadaten&gt;\n                &lt;Kompression&gt;0&lt;/Kompression&gt;\n                &lt;Komprimierung&gt;0&lt;/Komprimierung&gt;\n                &lt;Belaubungszustand&gt;3&lt;/Belaubungszustand&gt;\n                &lt;Bemerkungen&gt;keine&lt;/Bemerkungen&gt;\n            &lt;/metadaten&gt;\n        &lt;/RandomName&gt;\n        &lt;fileReferenceHistory&gt;testfile&lt;/fileReferenceHistory&gt;   \n    &lt;/slice&gt;\n&lt;/slices&gt;\n</code></pre>\n<p>I have this class to deserialize the XML to it, but in the method <code>addKeyValue()</code>, it always sees <code>key</code> = <code>RandomName</code> and <code>value</code> = empty string, here I wanted, <code>value</code> = <code>&lt;metadaten&gt; ... &lt;/metadaten&gt;</code> instead.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class LocalMetadataChild {\n    \n    public static final String LOCAL_METADATA_TAG = &quot;slice&quot;;\n\n    private Map&lt;String, String&gt; localMetadataAttributesMap;\n    \n    private BoundedBy boundedBy;\n\n    @JsonAnySetter\n    // NOTE: To map an unknown list of properties, must use this annotation\n    public void addKeyValue(String key, String value) {\n        this.localMetadataAttributesMap.put(key, value);\n    }\n\n    public LocalMetadataChild() {\n        this.localMetadataAttributesMap = new LinkedHashMap&lt;&gt;();\n        this.boundedBy = new BoundedBy();\n    }\n\n    @JsonAnyGetter\n    // NOTE: to unwrap the &quot;map&quot; from { &quot;map&quot;: { &quot;key&quot;: &quot;value&quot; } }, only keep { &quot;key&quot;: &quot;value&quot; }\n    public Map&lt;String, String&gt; getLocalMetadataAttributesMap() {\n        return localMetadataAttributesMap;\n    }\n    \n    public BoundedBy getBoundedBy() {\n        return this.boundedBy;\n    }\n\n    public void setBoundedBy(BoundedBy boundedBy) {\n        this.boundedBy = boundedBy;\n    }\n\n    public LocalMetadataChild(Map&lt;String, String&gt; localMetadataAttributesMap, BoundedBy boundedBy) {\n        this.localMetadataAttributesMap = localMetadataAttributesMap;\n        this.boundedBy = boundedBy;\n    }\n}\n</code></pre>\n"},{"tags":["java","time-complexity","series","space-complexity","revel"],"comments":[{"score":0,"post_type":"question","creation_date":1701273304,"post_id":77567934,"comment_id":136755884,"body_markdown":"Please edit your question to [include code, data and error messages as text, not images](https://meta.stackoverflow.com/a/285557/16563198).","link":"https://stackoverflow.com/questions/77567934/is-there-a-way-to-fix-this-exercise22-05-for-revel#comment136755884_77567934","body":"Please edit your question to <a href=\"https://meta.stackoverflow.com/a/285557/16563198\">include code, data and error messages as text, not images</a>."},{"score":0,"post_type":"question","creation_date":1701359357,"post_id":77567934,"comment_id":136768254,"body_markdown":"I can&#39;t for the last image because it is an Exercise Checker. But I can edit the code and put the output for the code I tried.","link":"https://stackoverflow.com/questions/77567934/is-there-a-way-to-fix-this-exercise22-05-for-revel#comment136768254_77567934","body":"I can&#39;t for the last image because it is an Exercise Checker. But I can edit the code and put the output for the code I tried."}],"comment_count":2,"is_answered":false,"view_count":31,"answer_count":0,"score":-2,"last_activity_date":1701267218,"creation_date":1701218215,"last_edit_date":1701267218,"question_id":77567934,"body_markdown":"I&#39;m trying to solve this problem, Exercise22_05.java, and to make it work.\r\n\r\nThis is the image of the exercise that I&#39;m trying to solve: [![Please click here to see the image and the problem of the exercise][1]][1]\r\n\r\nI tried this:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    import java.util.*;\r\n    public class Exercise22_05 {\r\n        public static void main(String[] args) {\r\n            Scanner scanner = new Scanner(System.in);\r\n            System.out.print(&quot;Enter a series of numbers ending with 0: &quot;);\r\n            int number = scanner.nextInt();\r\n            int count = 1;\r\n            int maxCount = 1;\r\n            int maxNumber = number;\r\n            int index = 0;\r\n            int i = 1;\r\n            while (number != 0) {\r\n                number = scanner.nextInt();\r\n                if (number == i) {\r\n                  count++;\r\n                } else {\r\n                    if (count &gt; maxCount) {\r\n                       maxCount = count;\r\n                       maxNumber = i;\r\n                       index = i - count + 1;\r\n                    }\r\n                        count = 1;\r\n                        i = number;\r\n                }\r\n            }\r\n            if (count &gt; maxCount) {\r\n               maxCount = count;\r\n               maxNumber = i;\r\n               index = i - count + 1;\r\n            }\r\n            System.out.print(&quot;The longest same number sequence starts at index &quot; + index + &quot; with &quot; + maxCount + &quot; values of &quot; + maxNumber);\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nBut it didn&#39;t work because here: [![Please Click Here To See The Output That&#39;s Supposed To Work][2]][2]\r\n\r\n\r\nIs there anyway to solve this problem? I will really if someone actually does help, so can anyone please help me?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IubBO.png\r\n  [2]: https://i.stack.imgur.com/mYsGD.png","link":"https://stackoverflow.com/questions/77567934/is-there-a-way-to-fix-this-exercise22-05-for-revel","title":"Is there a way to fix this Exercise22_05 for REVEL?","body":"<p>I'm trying to solve this problem, Exercise22_05.java, and to make it work.</p>\n<p>This is the image of the exercise that I'm trying to solve: <a href=\"https://i.stack.imgur.com/IubBO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IubBO.png\" alt=\"Please click here to see the image and the problem of the exercise\" /></a></p>\n<p>I tried this:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import java.util.*;\npublic class Exercise22_05 {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        System.out.print(\"Enter a series of numbers ending with 0: \");\n        int number = scanner.nextInt();\n        int count = 1;\n        int maxCount = 1;\n        int maxNumber = number;\n        int index = 0;\n        int i = 1;\n        while (number != 0) {\n            number = scanner.nextInt();\n            if (number == i) {\n              count++;\n            } else {\n                if (count &gt; maxCount) {\n                   maxCount = count;\n                   maxNumber = i;\n                   index = i - count + 1;\n                }\n                    count = 1;\n                    i = number;\n            }\n        }\n        if (count &gt; maxCount) {\n           maxCount = count;\n           maxNumber = i;\n           index = i - count + 1;\n        }\n        System.out.print(\"The longest same number sequence starts at index \" + index + \" with \" + maxCount + \" values of \" + maxNumber);\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>But it didn't work because here: <a href=\"https://i.stack.imgur.com/mYsGD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mYsGD.png\" alt=\"Please Click Here To See The Output That's Supposed To Work\" /></a></p>\n<p>Is there anyway to solve this problem? I will really if someone actually does help, so can anyone please help me?</p>\n"},{"tags":["java","simulation","anylogic"],"comments":[{"score":0,"post_type":"question","creation_date":1701260159,"post_id":77570077,"comment_id":136753077,"body_markdown":"well, does it work before exporting from the AL IDE?","link":"https://stackoverflow.com/questions/77570077/error-when-trying-to-run-exported-standalone-java-application#comment136753077_77570077","body":"well, does it work before exporting from the AL IDE?"},{"score":0,"post_type":"question","creation_date":1701266850,"post_id":77570077,"comment_id":136754359,"body_markdown":"Yes, it works in the IDE, every experiments I tested.","link":"https://stackoverflow.com/questions/77570077/error-when-trying-to-run-exported-standalone-java-application#comment136754359_77570077","body":"Yes, it works in the IDE, every experiments I tested."},{"score":0,"post_type":"question","creation_date":1701267408,"post_id":77570077,"comment_id":136754492,"body_markdown":"I now decomplled the class Simulation.class to look into it, I posted the beginning of this class if this is allowed here.","link":"https://stackoverflow.com/questions/77570077/error-when-trying-to-run-exported-standalone-java-application#comment136754492_77570077","body":"I now decomplled the class Simulation.class to look into it, I posted the beginning of this class if this is allowed here."},{"score":0,"post_type":"question","creation_date":1701280473,"post_id":77570077,"comment_id":136757300,"body_markdown":"this won&#39;t help, tbh. Try compiling from a different machine or try running the compiled model on a different machine","link":"https://stackoverflow.com/questions/77570077/error-when-trying-to-run-exported-standalone-java-application#comment136757300_77570077","body":"this won&#39;t help, tbh. Try compiling from a different machine or try running the compiled model on a different machine"}],"comment_count":4,"is_answered":false,"view_count":68,"answer_count":0,"score":0,"last_activity_date":1701267102,"creation_date":1701251507,"last_edit_date":1701267102,"question_id":77570077,"body_markdown":"I did an export from an AnyLogic project from Anylogic 8.8.5 to a standalone Java application. When I try to run this experiment standalone with the provided batch file to start on Windows, I get the error\r\n\r\n```none\r\nMain method not found in class wandering_elephants.Simulation, please define the main method as:\r\n   public static void main(String[] args)\r\nor a JavaFX application class must extend javafx.application.Application\r\n```\r\nThe batch file call is:\r\n\r\n```none\r\njava -cp model.jar;(and lot of more classpathes, see details attached) wandering_elephants.Simulation %*\r\n```\r\n\r\nmodel.jar contains subdirectory wandering_elephants and in this subdirectory Simulation.class\r\n\r\nI tried all different kinds of Java runtime versions and some different projects, but it is the same error.\r\n\r\nWhat could be the problem?\r\n\r\nAttachment:\r\n\r\nDetailed call\r\n```batch\r\n===================================================\r\n@echo off\r\nrem \r\nrem Run AnyLogic Experiment\r\nrem \r\nsetlocal enabledelayedexpansion\r\nchcp 1252 &gt;nul \r\nset DIR_BACKUP_XJAL=%cd%\r\ncd /D &quot;%~dp0&quot;\r\n\r\nrem ----------------------------------\r\n\r\nrem echo 1.Check JAVA_HOME\r\n\r\nif exist &quot;%JAVA_HOME%\\bin\\java.exe&quot; (\r\n\tset PATH=!JAVA_HOME!\\bin;!PATH!\r\n\tgoto javafound\r\n)\r\n\r\nrem echo 2.Check PATH\r\n\r\nfor /f %%j in (&quot;java.exe&quot;) do (\r\n\tset JAVA_EXE=%%~$PATH:j\r\n)\r\n\r\nif defined JAVA_EXE (\r\n\tgoto javafound\r\n)\r\n\r\nrem echo 3.Check AnyLogic registry\r\n\r\nset KEY_NAME=HKEY_LOCAL_MACHINE\\SOFTWARE\\WOW6432Node\\AnyLogic North America\r\n\r\nFOR /F &quot;usebackq delims=&quot; %%A IN (`REG QUERY &quot;%KEY_NAME%&quot; 2^&gt;nul`) DO (\r\n\tset ANYLOGIC_KEY=%%A\r\n)\r\n\r\nif defined ANYLOGIC_KEY (\r\n\tFOR /F &quot;usebackq delims=&quot; %%A IN (`REG QUERY &quot;%ANYLOGIC_KEY%&quot; 2^&gt;nul`) DO (\r\n\t\tset ANYLOGIC_VERSION_KEY=%%A\r\n\t)\t\r\n)\r\n\r\nif defined ANYLOGIC_VERSION_KEY (\r\n\tFOR /F &quot;usebackq skip=2 tokens=3*&quot; %%A IN (`REG QUERY &quot;%ANYLOGIC_VERSION_KEY%&quot; /v Location 2^&gt;nul`) DO (\r\n\t\tset ANYLOGIC_LOCATION=%%A %%B\r\n\t)\t\r\n)\r\n\r\nif exist &quot;%ANYLOGIC_LOCATION%\\jre\\bin\\java.exe&quot; (\r\n\tset PATH=!ANYLOGIC_LOCATION!\\jre\\bin;!PATH!\r\n\tgoto javafound \r\n)\r\n\r\nrem echo 4.Check java registry\r\n\r\nset KEY_NAME=HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Runtime Environment\r\nFOR /F &quot;usebackq skip=2 tokens=3&quot; %%A IN (`REG QUERY &quot;%KEY_NAME%&quot; /v CurrentVersion 2^&gt;nul`) DO (\r\n    set JAVA_CURRENT_VERSION=%%A\r\n)\r\n\r\nif defined JAVA_CURRENT_VERSION (\r\n\tFOR /F &quot;usebackq skip=2 tokens=3*&quot; %%A IN (`REG QUERY &quot;%KEY_NAME%\\%JAVA_CURRENT_VERSION%&quot; /v JavaHome 2^&gt;nul`) DO (\r\n\t\tset JAVA_PATH=%%A %%B\r\n\t)\r\n)\r\n\r\nif exist &quot;%JAVA_PATH%\\bin\\java.exe&quot; (\r\n\tset PATH=!JAVA_PATH!\\bin;!PATH!\r\n\tgoto javafound\r\n)\r\n\r\nrem 32 bit\r\nset KEY_NAME=HKEY_LOCAL_MACHINE\\SOFTWARE\\WOW6432Node\\JavaSoft\\Java Runtime Environment\r\nFOR /F &quot;usebackq skip=2 tokens=3&quot; %%A IN (`REG QUERY &quot;%KEY_NAME%&quot; /v CurrentVersion 2^&gt;nul`) DO (\r\n    set JAVA_CURRENT_VERSION=%%A\r\n)\r\n\r\nif defined JAVA_CURRENT_VERSION (\r\n\tFOR /F &quot;usebackq skip=2 tokens=3*&quot; %%A IN (`REG QUERY &quot;%KEY_NAME%\\%JAVA_CURRENT_VERSION%&quot; /v JavaHome 2^&gt;nul`) DO (\r\n\t\tset JAVA_PATH=%%A %%B\r\n\t)\r\n)\r\n\r\nif exist &quot;%JAVA_PATH%\\bin\\java.exe&quot; (\r\n\tset PATH=!JAVA_PATH!\\bin;!PATH!\r\n\tgoto javafound\r\n)\r\n\r\nrem echo 5.Check Program Files\r\nfor /f &quot;delims=&quot; %%a in (&#39;dir &quot;%ProgramFiles%\\Java\\j*&quot; /o-d /ad /b&#39;) do (\r\n\tset JAVA_PROGRAM_FILES=&quot;%ProgramFiles%\\Java\\%%a&quot;\r\n\tif exist &quot;%ProgramFiles%\\Java\\%%a\\bin\\java.exe&quot; goto exitloop\r\n)\r\nfor /f &quot;delims=&quot; %%a in (&#39;dir &quot;%ProgramFiles(x86)%\\Java\\j*&quot; /o-d /ad /b&#39;) do (\r\n\tset JAVA_PROGRAM_FILES=&quot;%ProgramFiles(x86)%\\Java\\%%a&quot;\r\n\tif exist &quot;%ProgramFiles(x86)%\\Java\\%%a\\bin\\java.exe&quot; goto exitloop\r\n)\r\n\r\n:exitloop\r\n\r\nif defined JAVA_PROGRAM_FILES (\r\n\tset PATH=!JAVA_PROGRAM_FILES!\\bin;!PATH!\r\n\tgoto javafound\r\n)\r\n\r\necho  Error: Java not found\r\npause \r\ngoto end\r\n\r\n:javafound\r\n\r\nFOR /F &quot;usebackq tokens=4&quot; %%A IN (`java -fullversion 2^&gt;^&amp;1`) DO (\r\n\tset VERSION=%%~A\r\n)\r\n\r\necho Java version: %VERSION%\r\n\r\nset OPTIONS_XJAL=--illegal-access=deny\r\nIF &quot;%VERSION:~0,2%&quot;==&quot;1.&quot; set OPTIONS_XJAL=\r\n\r\nrem ---------------------------\r\n\r\necho on\r\n\r\njava %OPTIONS_XJAL% -cp model.jar;lib/MarkupDescriptors.jar;lib/com.anylogic.engine.jar;lib/com.anylogic.engine.datautil.jar;lib/com.anylogic.engine.editorapi.jar;lib/com.anylogic.engine.generalization.jar;lib/com.anylogic.engine.sa.jar;lib/sa/com.anylogic.engine.sa.web.jar;lib/sa/executor-basic-8.3.jar;lib/sa/ioutil-8.3.jar;lib/sa/jackson/jackson-annotations-2.14.3.jar;lib/sa/jackson/jackson-core-2.14.3.jar;lib/sa/jackson/jackson-databind-2.14.3.jar;lib/sa/spark/javax.servlet-api-3.1.0.jar;lib/sa/spark/jetty-client-9.4.51.v20230217.jar;lib/sa/spark/jetty-http-9.4.51.v20230217.jar;lib/sa/spark/jetty-io-9.4.51.v20230217.jar;lib/sa/spark/jetty-security-9.4.51.v20230217.jar;lib/sa/spark/jetty-server-9.4.51.v20230217.jar;lib/sa/spark/jetty-servlet-9.4.51.v20230217.jar;lib/sa/spark/jetty-servlets-9.4.51.v20230217.jar;lib/sa/spark/jetty-util-9.4.51.v20230217.jar;lib/sa/spark/jetty-util-ajax-9.4.51.v20230217.jar;lib/sa/spark/jetty-webapp-9.4.51.v20230217.jar;lib/sa/spark/jetty-xml-9.4.51.v20230217.jar;lib/sa/spark/slf4j-api-1.7.25.jar;lib/sa/spark/spark-core-2.9.4-AL.jar;lib/sa/spark/websocket-api-9.4.51.v20230217.jar;lib/sa/spark/websocket-client-9.4.51.v20230217.jar;lib/sa/spark/websocket-common-9.4.51.v20230217.jar;lib/sa/spark/websocket-server-9.4.51.v20230217.jar;lib/sa/spark/websocket-servlet-9.4.51.v20230217.jar;lib/sa/util-8.3.jar;lib/database/querydsl/querydsl-core-5.0.0.jar;lib/database/querydsl/querydsl-sql-5.0.0.jar;lib/database/querydsl/querydsl-sql-codegen-5.0.0.jar;lib/commons-lang3-3.9.jar;lib/commons-io-2.11.0.jar;lib/poi/commons-collections4-4.4.jar;lib/poi/poi-3.17.jar;lib/poi/poi-examples-3.17.jar;lib/poi/poi-excelant-3.17.jar;lib/poi/poi-ooxml-3.17.jar;lib/poi/poi-ooxml-schemas-3.17.jar;lib/poi/poi-scratchpad-5.2.1.jar;lib/poi/xmlbeans-2.6.0.jar -Xmx64m wandering_elephants.Simulation %*\r\n\r\n@echo off\r\nif %ERRORLEVEL% neq 0 pause\r\n:end\r\necho on\r\n@cd /D &quot;%DIR_BACKUP_XJAL%&quot;\r\n```\r\n\r\nAtachment 2\r\ndecompile of Simulation.class\r\n\r\n    // \r\n    // Decompiled by Procyon v0.6.0\r\n    // \r\n    \r\n    package wandering_elephants;\r\n    \r\n    import com.anylogic.engine.presentation.ModelElementDescriptorUtils;\r\n    import com.anylogic.engine.gui.IExperimentHost;\r\n    import com.anylogic.engine.AgentList;\r\n    import com.anylogic.engine.Agent;\r\n    import java.util.Random;\r\n    import com.anylogic.engine.Engine;\r\n    import com.anylogic.engine.Presentable;\r\n    import java.awt.Paint;\r\n    import com.anylogic.engine.presentation.ColorConstants;\r\n    import com.anylogic.engine.presentation.ShapeModelElementsGroup;\r\n    import com.anylogic.engine.presentation.ShapeTopLevelPresentationGroup;\r\n    import com.anylogic.engine.presentation.ShapeImage;\r\n    import com.anylogic.engine.presentation.ShapeOval;\r\n    import com.anylogic.engine.presentation.ShapePolyLine;\r\n    import com.anylogic.engine.presentation.ShapeText;\r\n    import com.anylogic.engine.presentation.ShapeRectangle;\r\n    import java.awt.Color;\r\n    import java.awt.Font;\r\n    import com.anylogic.engine.elements.IElementDescriptor;\r\n    import java.util.Map;\r\n    import com.anylogic.engine.AnyLogicInternalCodegenAPI;\r\n    import com.anylogic.engine.ExperimentSimulation;\r\n    \r\n    public class Simulation extends ExperimentSimulation&lt;Main&gt;\r\n    {\r\n        @AnyLogicInternalCodegenAPI\r\n        public static String[] COMMAND_LINE_ARGUMENTS_xjal;\r\n        @AnyLogicInternalCodegenAPI\r\n        private static Map&lt;String, IElementDescriptor&gt; elementDesciptors_xjal;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final Font _text_Font;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final Font _text1_Font;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final Font _text3_Font;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final Font _text4_Font;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final Color _text_Color;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final Color _text4_Color;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final int _rect = 1;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final int _text = 2;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final int _text1 = 3;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final int _text3 = 4;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final int _polyline = 5;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final int _oval = 6;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final int _polyline1 = 7;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final int _polyline2 = 8;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final int _text4 = 9;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final int _image1 = 10;\r\n        @AnyLogicInternalCodegenAPI\r\n        protected static final int _SHAPE_NEXT_ID_xjal = 11;\r\n        protected ShapeRectangle rect;\r\n        protected ShapeText text;\r\n        protected ShapeText text1;\r\n        protected ShapeText text3;\r\n        protected ShapePolyLine polyline;\r\n        protected ShapeOval oval;\r\n        protected ShapePolyLine polyline1;\r\n        protected ShapePolyLine polyline2;\r\n        protected ShapeText text4;\r\n        protected ShapeImage image1;\r\n        protected ShapeTopLevelPresentationGroup presentation;\r\n        protected ShapeModelElementsGroup icon;\r\n        @AnyLogicInternalCodegenAPI\r\n        private static final long serialVersionUID = 38284644110508400L;\r\n        \r\n        static {\r\n            Simulation.COMMAND_LINE_ARGUMENTS_xjal = new String[0];\r\n            Simulation.elementDesciptors_xjal = createElementDescriptors((Class)Simulation.class);\r\n            _text_Font = new Font(&quot;SansSerif&quot;, 1, 48);\r\n            _text1_Font = Simulation._text_Font;\r\n            _text3_Font = new Font(&quot;SansSerif&quot;, 0, 11);\r\n            _text4_Font = Simulation._text3_Font;\r\n            _text_Color = new Color(-7765933, true);\r\n            _text4_Color = new Color(-16751872, true);\r\n        }\r\n        \r\n        public Simulation() {\r\n            this.setCommandLineArguments_xjal(Simulation.COMMAND_LINE_ARGUMENTS_xjal);\r\n        }\r\n    ...\r\n\r\n    \r\n","link":"https://stackoverflow.com/questions/77570077/error-when-trying-to-run-exported-standalone-java-application","title":"Error when trying to run exported standalone java application","body":"<p>I did an export from an AnyLogic project from Anylogic 8.8.5 to a standalone Java application. When I try to run this experiment standalone with the provided batch file to start on Windows, I get the error</p>\n<pre class=\"lang-none prettyprint-override\"><code>Main method not found in class wandering_elephants.Simulation, please define the main method as:\n   public static void main(String[] args)\nor a JavaFX application class must extend javafx.application.Application\n</code></pre>\n<p>The batch file call is:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java -cp model.jar;(and lot of more classpathes, see details attached) wandering_elephants.Simulation %*\n</code></pre>\n<p>model.jar contains subdirectory wandering_elephants and in this subdirectory Simulation.class</p>\n<p>I tried all different kinds of Java runtime versions and some different projects, but it is the same error.</p>\n<p>What could be the problem?</p>\n<p>Attachment:</p>\n<p>Detailed call</p>\n<pre><code>===================================================\n@echo off\nrem \nrem Run AnyLogic Experiment\nrem \nsetlocal enabledelayedexpansion\nchcp 1252 &gt;nul \nset DIR_BACKUP_XJAL=%cd%\ncd /D &quot;%~dp0&quot;\n\nrem ----------------------------------\n\nrem echo 1.Check JAVA_HOME\n\nif exist &quot;%JAVA_HOME%\\bin\\java.exe&quot; (\n    set PATH=!JAVA_HOME!\\bin;!PATH!\n    goto javafound\n)\n\nrem echo 2.Check PATH\n\nfor /f %%j in (&quot;java.exe&quot;) do (\n    set JAVA_EXE=%%~$PATH:j\n)\n\nif defined JAVA_EXE (\n    goto javafound\n)\n\nrem echo 3.Check AnyLogic registry\n\nset KEY_NAME=HKEY_LOCAL_MACHINE\\SOFTWARE\\WOW6432Node\\AnyLogic North America\n\nFOR /F &quot;usebackq delims=&quot; %%A IN (`REG QUERY &quot;%KEY_NAME%&quot; 2^&gt;nul`) DO (\n    set ANYLOGIC_KEY=%%A\n)\n\nif defined ANYLOGIC_KEY (\n    FOR /F &quot;usebackq delims=&quot; %%A IN (`REG QUERY &quot;%ANYLOGIC_KEY%&quot; 2^&gt;nul`) DO (\n        set ANYLOGIC_VERSION_KEY=%%A\n    )   \n)\n\nif defined ANYLOGIC_VERSION_KEY (\n    FOR /F &quot;usebackq skip=2 tokens=3*&quot; %%A IN (`REG QUERY &quot;%ANYLOGIC_VERSION_KEY%&quot; /v Location 2^&gt;nul`) DO (\n        set ANYLOGIC_LOCATION=%%A %%B\n    )   \n)\n\nif exist &quot;%ANYLOGIC_LOCATION%\\jre\\bin\\java.exe&quot; (\n    set PATH=!ANYLOGIC_LOCATION!\\jre\\bin;!PATH!\n    goto javafound \n)\n\nrem echo 4.Check java registry\n\nset KEY_NAME=HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Runtime Environment\nFOR /F &quot;usebackq skip=2 tokens=3&quot; %%A IN (`REG QUERY &quot;%KEY_NAME%&quot; /v CurrentVersion 2^&gt;nul`) DO (\n    set JAVA_CURRENT_VERSION=%%A\n)\n\nif defined JAVA_CURRENT_VERSION (\n    FOR /F &quot;usebackq skip=2 tokens=3*&quot; %%A IN (`REG QUERY &quot;%KEY_NAME%\\%JAVA_CURRENT_VERSION%&quot; /v JavaHome 2^&gt;nul`) DO (\n        set JAVA_PATH=%%A %%B\n    )\n)\n\nif exist &quot;%JAVA_PATH%\\bin\\java.exe&quot; (\n    set PATH=!JAVA_PATH!\\bin;!PATH!\n    goto javafound\n)\n\nrem 32 bit\nset KEY_NAME=HKEY_LOCAL_MACHINE\\SOFTWARE\\WOW6432Node\\JavaSoft\\Java Runtime Environment\nFOR /F &quot;usebackq skip=2 tokens=3&quot; %%A IN (`REG QUERY &quot;%KEY_NAME%&quot; /v CurrentVersion 2^&gt;nul`) DO (\n    set JAVA_CURRENT_VERSION=%%A\n)\n\nif defined JAVA_CURRENT_VERSION (\n    FOR /F &quot;usebackq skip=2 tokens=3*&quot; %%A IN (`REG QUERY &quot;%KEY_NAME%\\%JAVA_CURRENT_VERSION%&quot; /v JavaHome 2^&gt;nul`) DO (\n        set JAVA_PATH=%%A %%B\n    )\n)\n\nif exist &quot;%JAVA_PATH%\\bin\\java.exe&quot; (\n    set PATH=!JAVA_PATH!\\bin;!PATH!\n    goto javafound\n)\n\nrem echo 5.Check Program Files\nfor /f &quot;delims=&quot; %%a in ('dir &quot;%ProgramFiles%\\Java\\j*&quot; /o-d /ad /b') do (\n    set JAVA_PROGRAM_FILES=&quot;%ProgramFiles%\\Java\\%%a&quot;\n    if exist &quot;%ProgramFiles%\\Java\\%%a\\bin\\java.exe&quot; goto exitloop\n)\nfor /f &quot;delims=&quot; %%a in ('dir &quot;%ProgramFiles(x86)%\\Java\\j*&quot; /o-d /ad /b') do (\n    set JAVA_PROGRAM_FILES=&quot;%ProgramFiles(x86)%\\Java\\%%a&quot;\n    if exist &quot;%ProgramFiles(x86)%\\Java\\%%a\\bin\\java.exe&quot; goto exitloop\n)\n\n:exitloop\n\nif defined JAVA_PROGRAM_FILES (\n    set PATH=!JAVA_PROGRAM_FILES!\\bin;!PATH!\n    goto javafound\n)\n\necho  Error: Java not found\npause \ngoto end\n\n:javafound\n\nFOR /F &quot;usebackq tokens=4&quot; %%A IN (`java -fullversion 2^&gt;^&amp;1`) DO (\n    set VERSION=%%~A\n)\n\necho Java version: %VERSION%\n\nset OPTIONS_XJAL=--illegal-access=deny\nIF &quot;%VERSION:~0,2%&quot;==&quot;1.&quot; set OPTIONS_XJAL=\n\nrem ---------------------------\n\necho on\n\njava %OPTIONS_XJAL% -cp model.jar;lib/MarkupDescriptors.jar;lib/com.anylogic.engine.jar;lib/com.anylogic.engine.datautil.jar;lib/com.anylogic.engine.editorapi.jar;lib/com.anylogic.engine.generalization.jar;lib/com.anylogic.engine.sa.jar;lib/sa/com.anylogic.engine.sa.web.jar;lib/sa/executor-basic-8.3.jar;lib/sa/ioutil-8.3.jar;lib/sa/jackson/jackson-annotations-2.14.3.jar;lib/sa/jackson/jackson-core-2.14.3.jar;lib/sa/jackson/jackson-databind-2.14.3.jar;lib/sa/spark/javax.servlet-api-3.1.0.jar;lib/sa/spark/jetty-client-9.4.51.v20230217.jar;lib/sa/spark/jetty-http-9.4.51.v20230217.jar;lib/sa/spark/jetty-io-9.4.51.v20230217.jar;lib/sa/spark/jetty-security-9.4.51.v20230217.jar;lib/sa/spark/jetty-server-9.4.51.v20230217.jar;lib/sa/spark/jetty-servlet-9.4.51.v20230217.jar;lib/sa/spark/jetty-servlets-9.4.51.v20230217.jar;lib/sa/spark/jetty-util-9.4.51.v20230217.jar;lib/sa/spark/jetty-util-ajax-9.4.51.v20230217.jar;lib/sa/spark/jetty-webapp-9.4.51.v20230217.jar;lib/sa/spark/jetty-xml-9.4.51.v20230217.jar;lib/sa/spark/slf4j-api-1.7.25.jar;lib/sa/spark/spark-core-2.9.4-AL.jar;lib/sa/spark/websocket-api-9.4.51.v20230217.jar;lib/sa/spark/websocket-client-9.4.51.v20230217.jar;lib/sa/spark/websocket-common-9.4.51.v20230217.jar;lib/sa/spark/websocket-server-9.4.51.v20230217.jar;lib/sa/spark/websocket-servlet-9.4.51.v20230217.jar;lib/sa/util-8.3.jar;lib/database/querydsl/querydsl-core-5.0.0.jar;lib/database/querydsl/querydsl-sql-5.0.0.jar;lib/database/querydsl/querydsl-sql-codegen-5.0.0.jar;lib/commons-lang3-3.9.jar;lib/commons-io-2.11.0.jar;lib/poi/commons-collections4-4.4.jar;lib/poi/poi-3.17.jar;lib/poi/poi-examples-3.17.jar;lib/poi/poi-excelant-3.17.jar;lib/poi/poi-ooxml-3.17.jar;lib/poi/poi-ooxml-schemas-3.17.jar;lib/poi/poi-scratchpad-5.2.1.jar;lib/poi/xmlbeans-2.6.0.jar -Xmx64m wandering_elephants.Simulation %*\n\n@echo off\nif %ERRORLEVEL% neq 0 pause\n:end\necho on\n@cd /D &quot;%DIR_BACKUP_XJAL%&quot;\n</code></pre>\n<p>Atachment 2\ndecompile of Simulation.class</p>\n<pre><code>// \n// Decompiled by Procyon v0.6.0\n// \n\npackage wandering_elephants;\n\nimport com.anylogic.engine.presentation.ModelElementDescriptorUtils;\nimport com.anylogic.engine.gui.IExperimentHost;\nimport com.anylogic.engine.AgentList;\nimport com.anylogic.engine.Agent;\nimport java.util.Random;\nimport com.anylogic.engine.Engine;\nimport com.anylogic.engine.Presentable;\nimport java.awt.Paint;\nimport com.anylogic.engine.presentation.ColorConstants;\nimport com.anylogic.engine.presentation.ShapeModelElementsGroup;\nimport com.anylogic.engine.presentation.ShapeTopLevelPresentationGroup;\nimport com.anylogic.engine.presentation.ShapeImage;\nimport com.anylogic.engine.presentation.ShapeOval;\nimport com.anylogic.engine.presentation.ShapePolyLine;\nimport com.anylogic.engine.presentation.ShapeText;\nimport com.anylogic.engine.presentation.ShapeRectangle;\nimport java.awt.Color;\nimport java.awt.Font;\nimport com.anylogic.engine.elements.IElementDescriptor;\nimport java.util.Map;\nimport com.anylogic.engine.AnyLogicInternalCodegenAPI;\nimport com.anylogic.engine.ExperimentSimulation;\n\npublic class Simulation extends ExperimentSimulation&lt;Main&gt;\n{\n    @AnyLogicInternalCodegenAPI\n    public static String[] COMMAND_LINE_ARGUMENTS_xjal;\n    @AnyLogicInternalCodegenAPI\n    private static Map&lt;String, IElementDescriptor&gt; elementDesciptors_xjal;\n    @AnyLogicInternalCodegenAPI\n    protected static final Font _text_Font;\n    @AnyLogicInternalCodegenAPI\n    protected static final Font _text1_Font;\n    @AnyLogicInternalCodegenAPI\n    protected static final Font _text3_Font;\n    @AnyLogicInternalCodegenAPI\n    protected static final Font _text4_Font;\n    @AnyLogicInternalCodegenAPI\n    protected static final Color _text_Color;\n    @AnyLogicInternalCodegenAPI\n    protected static final Color _text4_Color;\n    @AnyLogicInternalCodegenAPI\n    protected static final int _rect = 1;\n    @AnyLogicInternalCodegenAPI\n    protected static final int _text = 2;\n    @AnyLogicInternalCodegenAPI\n    protected static final int _text1 = 3;\n    @AnyLogicInternalCodegenAPI\n    protected static final int _text3 = 4;\n    @AnyLogicInternalCodegenAPI\n    protected static final int _polyline = 5;\n    @AnyLogicInternalCodegenAPI\n    protected static final int _oval = 6;\n    @AnyLogicInternalCodegenAPI\n    protected static final int _polyline1 = 7;\n    @AnyLogicInternalCodegenAPI\n    protected static final int _polyline2 = 8;\n    @AnyLogicInternalCodegenAPI\n    protected static final int _text4 = 9;\n    @AnyLogicInternalCodegenAPI\n    protected static final int _image1 = 10;\n    @AnyLogicInternalCodegenAPI\n    protected static final int _SHAPE_NEXT_ID_xjal = 11;\n    protected ShapeRectangle rect;\n    protected ShapeText text;\n    protected ShapeText text1;\n    protected ShapeText text3;\n    protected ShapePolyLine polyline;\n    protected ShapeOval oval;\n    protected ShapePolyLine polyline1;\n    protected ShapePolyLine polyline2;\n    protected ShapeText text4;\n    protected ShapeImage image1;\n    protected ShapeTopLevelPresentationGroup presentation;\n    protected ShapeModelElementsGroup icon;\n    @AnyLogicInternalCodegenAPI\n    private static final long serialVersionUID = 38284644110508400L;\n    \n    static {\n        Simulation.COMMAND_LINE_ARGUMENTS_xjal = new String[0];\n        Simulation.elementDesciptors_xjal = createElementDescriptors((Class)Simulation.class);\n        _text_Font = new Font(&quot;SansSerif&quot;, 1, 48);\n        _text1_Font = Simulation._text_Font;\n        _text3_Font = new Font(&quot;SansSerif&quot;, 0, 11);\n        _text4_Font = Simulation._text3_Font;\n        _text_Color = new Color(-7765933, true);\n        _text4_Color = new Color(-16751872, true);\n    }\n    \n    public Simulation() {\n        this.setCommandLineArguments_xjal(Simulation.COMMAND_LINE_ARGUMENTS_xjal);\n    }\n...\n</code></pre>\n"},{"tags":["java","csrf","csrf-token"],"comment_count":0,"is_answered":false,"view_count":17,"answer_count":0,"score":0,"last_activity_date":1701266762,"creation_date":1701266762,"question_id":77571838,"body_markdown":"How can I generate a single csrf token per session and it does not change by request with google as the login in java?\r\n\r\nI enable csrf token\r\n```\r\nhttp.csrf().csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse());\r\n```\r\nI made a controller so that the front receives the token\r\n\r\n\r\n```\r\n @GetMapping(&quot;/csrf&quot;)\r\n public CsrfToken csrf(CsrfToken token) {\r\n     return token;\r\n }\r\n```\r\n","link":"https://stackoverflow.com/questions/77571838/csrf-token-per-session","title":"CSRF TOKEN per session","body":"<p>How can I generate a single csrf token per session and it does not change by request with google as the login in java?</p>\n<p>I enable csrf token</p>\n<pre><code>http.csrf().csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse());\n</code></pre>\n<p>I made a controller so that the front receives the token</p>\n<pre><code> @GetMapping(&quot;/csrf&quot;)\n public CsrfToken csrf(CsrfToken token) {\n     return token;\n }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","thymeleaf"],"comments":[{"score":0,"post_type":"question","creation_date":1700935889,"post_id":77548921,"comment_id":136714000,"body_markdown":"@Toerktumlare Sorry, I&#39;ve added the requested Class and added the schema. Now the browser console doesn&#39;t display the 403 for the request anymore, however the credentials still aren&#39;t passed.","link":"https://stackoverflow.com/questions/77548921/trying-to-process-a-thymeleaf-registration-form-with-spring-security-6-403-on#comment136714000_77548921","body":"@Toerktumlare Sorry, I&#39;ve added the requested Class and added the schema. Now the browser console doesn&#39;t display the 403 for the request anymore, however the credentials still aren&#39;t passed."},{"score":0,"post_type":"question","creation_date":1700953817,"post_id":77548921,"comment_id":136715608,"body_markdown":"have you defined the templating engine and defined how your viewes are served etc?","link":"https://stackoverflow.com/questions/77548921/trying-to-process-a-thymeleaf-registration-form-with-spring-security-6-403-on#comment136715608_77548921","body":"have you defined the templating engine and defined how your viewes are served etc?"},{"score":0,"post_type":"question","creation_date":1701260050,"post_id":77548921,"comment_id":136753046,"body_markdown":"Found the mistake, there was just the @Setter in RegistrationRequest missing, I&#39;ll post an answer around your comment. Thanks for your help!","link":"https://stackoverflow.com/questions/77548921/trying-to-process-a-thymeleaf-registration-form-with-spring-security-6-403-on#comment136753046_77548921","body":"Found the mistake, there was just the @Setter in RegistrationRequest missing, I&#39;ll post an answer around your comment. Thanks for your help!"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701266588,"last_edit_date":1701266588,"creation_date":1701260406,"answer_id":77571105,"question_id":77548921,"body_markdown":"It turns out that there were 2 problems in my code;\r\n\r\n 1. Based on the comment of @Toerktumlare; To resolve the 403 Error I needed to add `.formLogin(Customizer.withDefaults())` to the SecurityFilterChain.\r\n\r\n```\r\n@Bean\r\npublic SecurityFilterChain securityFilterChain (HttpSecurity http) throws Exception {\r\n\thttp.authorizeHttpRequests((authorize) -&gt; authorize\r\n\t\t\t.requestMatchers(&quot;/&quot;,&quot;/register&quot;,&quot;/login&quot;,&quot;/css/style.css&quot;)\r\n\t\t\t.permitAll()\r\n\t\t\t.anyRequest()\r\n\t\t\t.authenticated())\r\n\t\t\t.formLogin(Customizer.withDefaults())\r\n\t\t\t.csrf(AbstractHttpConfigurer::disable)\r\n\t\t\t.cors(AbstractHttpConfigurer::disable);\r\n\r\n\treturn http.build();\r\n}\r\n```\r\n\r\n 2. The `@Setter` annotation in RegistrationRequest was missing, hence the values for the attributes couldn&#39;t be set.\r\n\r\n```\r\nimport lombok.*;\r\n    \r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@EqualsAndHashCode\r\n@ToString\r\n    \r\npublic class RegistrationRequest {\r\n\tprivate String email;\r\n\tprivate String name;\r\n\tprivate String password;\r\n\tprivate String passwordRepeat;\r\n}\r\n```","link":"https://stackoverflow.com/questions/77548921/trying-to-process-a-thymeleaf-registration-form-with-spring-security-6-403-on/77571105#77571105","title":"trying to process a Thymeleaf registration form with Spring Security 6 -&gt; 403 on POST request","body":"<p>It turns out that there were 2 problems in my code;</p>\n<ol>\n<li>Based on the comment of @Toerktumlare; To resolve the 403 Error I needed to add <code>.formLogin(Customizer.withDefaults())</code> to the SecurityFilterChain.</li>\n</ol>\n<pre><code>@Bean\npublic SecurityFilterChain securityFilterChain (HttpSecurity http) throws Exception {\n    http.authorizeHttpRequests((authorize) -&gt; authorize\n            .requestMatchers(&quot;/&quot;,&quot;/register&quot;,&quot;/login&quot;,&quot;/css/style.css&quot;)\n            .permitAll()\n            .anyRequest()\n            .authenticated())\n            .formLogin(Customizer.withDefaults())\n            .csrf(AbstractHttpConfigurer::disable)\n            .cors(AbstractHttpConfigurer::disable);\n\n    return http.build();\n}\n</code></pre>\n<ol start=\"2\">\n<li>The <code>@Setter</code> annotation in RegistrationRequest was missing, hence the values for the attributes couldn't be set.</li>\n</ol>\n<pre><code>import lombok.*;\n    \n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\n@EqualsAndHashCode\n@ToString\n    \npublic class RegistrationRequest {\n    private String email;\n    private String name;\n    private String password;\n    private String passwordRepeat;\n}\n</code></pre>\n"}],"comment_count":3,"is_answered":true,"view_count":45,"answer_count":1,"score":0,"last_activity_date":1701266588,"creation_date":1700933790,"last_edit_date":1701259732,"question_id":77548921,"body_markdown":"I&#39;m new to Spring Boot and am trying to create a simple registration + login. However whenever I try to submit data with a POST request, the request gets blocked (403) and I&#39;m not getting redirected to the success page. Since the request gets blocked, this results later on in a Null pointer Exception when I try to validate the submitted input.\r\n\r\nLooking through other posts a common problem seemed to be csrf protection, which I explicitly disabled. Another common issue among other posts was that the correct authorization wasn&#39;t granted, I tried to do so with `.permitAll().anyRequest().authenticated()`. Since to my understanding I explicitly enabled all requests for &quot;/register&quot;, I expected to at least get the credentials as output at the debug messages in the Controller.\r\n\r\nThe registration form;\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n            &lt;form th:action=&quot;@{register}&quot; method=&quot;post&quot; th:object=&quot;${registrationRequest}&quot;&gt;\r\n                &lt;div class=&quot;mb-3&quot;&gt;\r\n                    &lt;label for=&quot;emailInput&quot; class=&quot;form-label&quot;&gt;&lt;/label&gt;\r\n                    &lt;input th:field=&quot;*{email}&quot; th:classappend=&quot;${#fields.hasErrors(&#39;email&#39;)} ? &#39;is-invalid&#39;&quot; type=&quot;email&quot; class=&quot;form-control&quot; id=&quot;emailInput&quot; placeholder=&quot;Email&quot;&gt;\r\n                &lt;/div&gt;\r\n                &lt;div class=&quot;mb-3&quot;&gt;\r\n                    &lt;label for=&quot;usernameInput&quot; class=&quot;form-label&quot;&gt;&lt;/label&gt;\r\n                    &lt;input th:field=&quot;*{name}&quot; th:classappend=&quot;${#fields.hasErrors(&#39;name&#39;)} ? &#39;is-invalid&#39;&quot; type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;usernameInput&quot; placeholder=&quot;Username&quot;&gt;\r\n                &lt;/div&gt;\r\n                &lt;div class=&quot;mb-3&quot;&gt;\r\n                    &lt;label for=&quot;passwordInput&quot; class=&quot;form-label&quot;&gt;&lt;/label&gt;\r\n                    &lt;input th:field=&quot;*{password}&quot; th:classappend=&quot;${#fields.hasErrors(&#39;password&#39;)} ? &#39;is-invalid&#39;&quot; type=&quot;password&quot; class=&quot;form-control&quot; id=&quot;passwordInput&quot; placeholder=&quot;Password&quot;&gt;\r\n                &lt;/div&gt;\r\n                &lt;div class=&quot;mb-3&quot;&gt;\r\n                    &lt;label for=&quot;passwordRepeatInput&quot; class=&quot;form-label&quot;&gt;&lt;/label&gt;\r\n                    &lt;input th:field=&quot;*{passwordRepeat}&quot; th:classappend=&quot;${#fields.hasErrors(&#39;passwordRepeat&#39;)} ? &#39;is-invalid&#39;&quot; type=&quot;password&quot; class=&quot;form-control&quot; id=&quot;passwordRepeatInput&quot; placeholder=&quot;Password confirmation&quot;&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;button type=&quot;submit&quot; class=&quot;btn btn-outline-dark btn-custom&quot;&gt;Sign up!&lt;/button&gt;\r\n            &lt;/form&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nThe routing in the Controller;\r\n```\r\n    @RequestMapping(value=&quot;register&quot;)\r\n    public String showRegisterPage(Model model) {\r\n        model.addAttribute(&quot;registrationRequest&quot;, new RegistrationRequest());\r\n        return &quot;user/user-add&quot;;\r\n    }\r\n    \r\n    @PostMapping(value=&quot;register&quot;)\r\n    public String processRegisterRequest(@ModelAttribute RegistrationRequest registrationRequest, BindingResult result) {\r\n    \r\n        System.out.println(&quot;DEBUG: &quot; + registrationRequest.getName() + registrationRequest.getEmail() + registrationRequest.getPassword());\r\n        System.out.println(result.getAllErrors());\r\n    \r\n        userService.register(registrationRequest);\r\n        return &quot;user/registration-success&quot;;\r\n    }\r\n```\r\nThe likely misconfigured SecurityFilterChain;\r\n```\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain (HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeHttpRequests((authorize) -&gt; authorize\r\n                .requestMatchers(\r\n                        &quot;/&quot;,\r\n                        &quot;/register&quot;,\r\n                        &quot;/login&quot;,\r\n                        &quot;/css/style.css&quot;)\r\n                .permitAll()\r\n                .anyRequest()\r\n                .authenticated())\r\n                .csrf(AbstractHttpConfigurer::disable)\r\n                .cors(AbstractHttpConfigurer::disable);\r\n\r\n        return http.build();\r\n    }\r\n```\r\n\r\nThe console error output;\r\n```\r\n2023-11-25T17:50:38.436+01:00 DEBUG 11889 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n2023-11-25T17:50:47.352+01:00 DEBUG 11889 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /register\r\n2023-11-25T17:50:47.354+01:00 DEBUG 11889 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /register\r\nDEBUG: nullnullnull\r\n[]\r\nDEBUG: nullnull\r\n2023-11-25T17:50:47.360+01:00 DEBUG 11889 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n2023-11-25T17:50:47.361+01:00 ERROR 11889 --- [nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke &quot;String.length()&quot; because &quot;password&quot; is null] with root cause\r\n\r\njava.lang.NullPointerException: Cannot invoke &quot;String.length()&quot; because &quot;password&quot; is null\r\n```\r\nEDIT\r\n\r\nadded class RegistrationRequest;\r\n```\r\nimport lombok.*;\r\n\r\n@Getter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@EqualsAndHashCode\r\n@ToString\r\n\r\npublic class RegistrationRequest {\r\n    private String email;\r\n    private String name;\r\n    private String password;\r\n    private String passwordRepeat;\r\n}\r\n```","link":"https://stackoverflow.com/questions/77548921/trying-to-process-a-thymeleaf-registration-form-with-spring-security-6-403-on","title":"trying to process a Thymeleaf registration form with Spring Security 6 -&gt; 403 on POST request","body":"<p>I'm new to Spring Boot and am trying to create a simple registration + login. However whenever I try to submit data with a POST request, the request gets blocked (403) and I'm not getting redirected to the success page. Since the request gets blocked, this results later on in a Null pointer Exception when I try to validate the submitted input.</p>\n<p>Looking through other posts a common problem seemed to be csrf protection, which I explicitly disabled. Another common issue among other posts was that the correct authorization wasn't granted, I tried to do so with <code>.permitAll().anyRequest().authenticated()</code>. Since to my understanding I explicitly enabled all requests for &quot;/register&quot;, I expected to at least get the credentials as output at the debug messages in the Controller.</p>\n<p>The registration form;\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>        &lt;form th:action=\"@{register}\" method=\"post\" th:object=\"${registrationRequest}\"&gt;\n            &lt;div class=\"mb-3\"&gt;\n                &lt;label for=\"emailInput\" class=\"form-label\"&gt;&lt;/label&gt;\n                &lt;input th:field=\"*{email}\" th:classappend=\"${#fields.hasErrors('email')} ? 'is-invalid'\" type=\"email\" class=\"form-control\" id=\"emailInput\" placeholder=\"Email\"&gt;\n            &lt;/div&gt;\n            &lt;div class=\"mb-3\"&gt;\n                &lt;label for=\"usernameInput\" class=\"form-label\"&gt;&lt;/label&gt;\n                &lt;input th:field=\"*{name}\" th:classappend=\"${#fields.hasErrors('name')} ? 'is-invalid'\" type=\"text\" class=\"form-control\" id=\"usernameInput\" placeholder=\"Username\"&gt;\n            &lt;/div&gt;\n            &lt;div class=\"mb-3\"&gt;\n                &lt;label for=\"passwordInput\" class=\"form-label\"&gt;&lt;/label&gt;\n                &lt;input th:field=\"*{password}\" th:classappend=\"${#fields.hasErrors('password')} ? 'is-invalid'\" type=\"password\" class=\"form-control\" id=\"passwordInput\" placeholder=\"Password\"&gt;\n            &lt;/div&gt;\n            &lt;div class=\"mb-3\"&gt;\n                &lt;label for=\"passwordRepeatInput\" class=\"form-label\"&gt;&lt;/label&gt;\n                &lt;input th:field=\"*{passwordRepeat}\" th:classappend=\"${#fields.hasErrors('passwordRepeat')} ? 'is-invalid'\" type=\"password\" class=\"form-control\" id=\"passwordRepeatInput\" placeholder=\"Password confirmation\"&gt;\n            &lt;/div&gt;\n\n            &lt;button type=\"submit\" class=\"btn btn-outline-dark btn-custom\"&gt;Sign up!&lt;/button&gt;\n        &lt;/form&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>The routing in the Controller;</p>\n<pre><code>    @RequestMapping(value=&quot;register&quot;)\n    public String showRegisterPage(Model model) {\n        model.addAttribute(&quot;registrationRequest&quot;, new RegistrationRequest());\n        return &quot;user/user-add&quot;;\n    }\n    \n    @PostMapping(value=&quot;register&quot;)\n    public String processRegisterRequest(@ModelAttribute RegistrationRequest registrationRequest, BindingResult result) {\n    \n        System.out.println(&quot;DEBUG: &quot; + registrationRequest.getName() + registrationRequest.getEmail() + registrationRequest.getPassword());\n        System.out.println(result.getAllErrors());\n    \n        userService.register(registrationRequest);\n        return &quot;user/registration-success&quot;;\n    }\n</code></pre>\n<p>The likely misconfigured SecurityFilterChain;</p>\n<pre><code>    @Bean\n    public SecurityFilterChain securityFilterChain (HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((authorize) -&gt; authorize\n                .requestMatchers(\n                        &quot;/&quot;,\n                        &quot;/register&quot;,\n                        &quot;/login&quot;,\n                        &quot;/css/style.css&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated())\n                .csrf(AbstractHttpConfigurer::disable)\n                .cors(AbstractHttpConfigurer::disable);\n\n        return http.build();\n    }\n</code></pre>\n<p>The console error output;</p>\n<pre><code>2023-11-25T17:50:38.436+01:00 DEBUG 11889 --- [nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n2023-11-25T17:50:47.352+01:00 DEBUG 11889 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /register\n2023-11-25T17:50:47.354+01:00 DEBUG 11889 --- [nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /register\nDEBUG: nullnullnull\n[]\nDEBUG: nullnull\n2023-11-25T17:50:47.360+01:00 DEBUG 11889 --- [nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n2023-11-25T17:50:47.361+01:00 ERROR 11889 --- [nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.NullPointerException: Cannot invoke &quot;String.length()&quot; because &quot;password&quot; is null] with root cause\n\njava.lang.NullPointerException: Cannot invoke &quot;String.length()&quot; because &quot;password&quot; is null\n</code></pre>\n<p>EDIT</p>\n<p>added class RegistrationRequest;</p>\n<pre><code>import lombok.*;\n\n@Getter\n@AllArgsConstructor\n@NoArgsConstructor\n@EqualsAndHashCode\n@ToString\n\npublic class RegistrationRequest {\n    private String email;\n    private String name;\n    private String password;\n    private String passwordRepeat;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","jaxb","xsd-validation"],"comments":[{"score":1,"post_type":"question","creation_date":1701171612,"post_id":77558325,"comment_id":136739703,"body_markdown":"Did you try profiling your code to see where the load time goes ? You can use Java Flight Recorder in order to do it (see well documented [here](https://www.baeldung.com/java-flight-recorder-monitoring)) : it may help you get what&#39;s wrong in your actual config (even if I&#39;m pretty sure that the /real/ problem is the XSD size)","link":"https://stackoverflow.com/questions/77558325/validate-xml-against-xsd-which-imports-big-enum-xsd#comment136739703_77558325","body":"Did you try profiling your code to see where the load time goes ? You can use Java Flight Recorder in order to do it (see well documented <a href=\"https://www.baeldung.com/java-flight-recorder-monitoring\" rel=\"nofollow noreferrer\">here</a>) : it may help you get what&#39;s wrong in your actual config (even if I&#39;m pretty sure that the /real/ problem is the XSD size)"},{"score":0,"post_type":"question","creation_date":1701174356,"post_id":77558325,"comment_id":136740185,"body_markdown":"@LaurentSchoelens yes, I profilied this code, and factory.newSchema(schemaFile); is taking the most execution time (15+ secs)","link":"https://stackoverflow.com/questions/77558325/validate-xml-against-xsd-which-imports-big-enum-xsd#comment136740185_77558325","body":"@LaurentSchoelens yes, I profilied this code, and factory.newSchema(schemaFile); is taking the most execution time (15+ secs)"},{"score":0,"post_type":"question","creation_date":1701175466,"post_id":77558325,"comment_id":136740373,"body_markdown":"Could you share you profile result ? :)","link":"https://stackoverflow.com/questions/77558325/validate-xml-against-xsd-which-imports-big-enum-xsd#comment136740373_77558325","body":"Could you share you profile result ? :)"},{"score":2,"post_type":"question","creation_date":1701211846,"post_id":77558325,"comment_id":136746999,"body_markdown":"@LaurentSchoelens [link](https://drive.google.com/file/d/18x_velwIv2JQQ23u98ig8Er-Rwzn-YgP/view?usp=sharing)","link":"https://stackoverflow.com/questions/77558325/validate-xml-against-xsd-which-imports-big-enum-xsd#comment136746999_77558325","body":"@LaurentSchoelens <a href=\"https://drive.google.com/file/d/18x_velwIv2JQQ23u98ig8Er-Rwzn-YgP/view?usp=sharing\" rel=\"nofollow noreferrer\">link</a>"},{"score":0,"post_type":"question","creation_date":1701250640,"post_id":77558325,"comment_id":136751260,"body_markdown":"I&#39;ve seen your jfr file and from what I see, most of the method and memory came from parsing your XSD to get the schema info. Couldn&#39;t you cache the `Validator validator = schema.newValidator();` instance to validate your XML ? You said that caching was not an option because of memory overhead... since your actual code generate more than 24GiB memory, what is this memory overhead to keep (only) the Validator instance ?","link":"https://stackoverflow.com/questions/77558325/validate-xml-against-xsd-which-imports-big-enum-xsd#comment136751260_77558325","body":"I&#39;ve seen your jfr file and from what I see, most of the method and memory came from parsing your XSD to get the schema info. Couldn&#39;t you cache the <code>Validator validator = schema.newValidator();</code> instance to validate your XML ? You said that caching was not an option because of memory overhead... since your actual code generate more than 24GiB memory, what is this memory overhead to keep (only) the Validator instance ?"},{"score":0,"post_type":"question","creation_date":1701264703,"post_id":77558325,"comment_id":136753926,"body_markdown":"@LaurentSchoelens yes it&#39;s truly genius, how I didn&#39;t think of that before. I just checked and it takes a lot less memory than caching schema. Thank you! I think that&#39;s enough","link":"https://stackoverflow.com/questions/77558325/validate-xml-against-xsd-which-imports-big-enum-xsd#comment136753926_77558325","body":"@LaurentSchoelens yes it&#39;s truly genius, how I didn&#39;t think of that before. I just checked and it takes a lot less memory than caching schema. Thank you! I think that&#39;s enough"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701266282,"creation_date":1701266282,"answer_id":77571784,"question_id":77558325,"body_markdown":"As discussed in comments and after analysis of JFR provided, the best solution would be to cache only the `Validator` instance obtained after parsing the schema\r\n\r\nHope it&#39;ll solve your need.\r\n\r\nBeware of maybe threading issue (didnt find out if Validator instance are thread-safe or not)","link":"https://stackoverflow.com/questions/77558325/validate-xml-against-xsd-which-imports-big-enum-xsd/77571784#77571784","title":"Validate XML against XSD which imports big enum XSD","body":"<p>As discussed in comments and after analysis of JFR provided, the best solution would be to cache only the <code>Validator</code> instance obtained after parsing the schema</p>\n<p>Hope it'll solve your need.</p>\n<p>Beware of maybe threading issue (didnt find out if Validator instance are thread-safe or not)</p>\n"}],"comment_count":6,"is_answered":true,"view_count":59,"answer_count":1,"score":1,"last_activity_date":1701266282,"creation_date":1701101257,"question_id":77558325,"body_markdown":"I have an XSD which imports big XSD with more than 200k \\&lt;enumeration\\&gt; elements, I need to validate incoming XML against root xsd:\r\n```xsd\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;xs:schema xmlns:xs=&quot;http www(dot)w3(dot)org/2001/XMLSchema&quot; elementFormDefault=&quot;qualified&quot;\r\n    targetNamespace=&quot;http example(dot)com/test/test/types/2.0.0&quot;\r\n    xmlns:tns=&quot;http example(dot)com/test/test/types/2.0.0&quot;\r\n    xmlns:mun=&quot;http example(dot)com/test/test/enumXsd/types/2.0&quot;&gt;\r\n    &lt;xs:import namespace=&quot;http example(dot)com/test/test/enumXsd/types/2.0&quot;\r\n        schemaLocation=&quot;common/enumXsd.xsd&quot;/&gt;\r\n    &lt;xs:element name=&quot;test&quot; type=&quot;tns:test&quot;/&gt;\r\n    &lt;xs:complexType name=&quot;test&quot;&gt;\r\n         &lt;xs:element name=&quot;abc&quot; type=&quot;mun:EnumEType&quot;/&gt;\r\n    &lt;/xs:complexType&gt;\r\n&lt;/xs:schema&gt;\r\n```\r\nenumXsd.xsd:\r\n```xsd\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;schema xmlns:tns=&quot;http example(dot)com/test/test/enumXsd/types/2.0&quot;\r\n    elementFormDefault=&quot;qualified&quot;\r\n    targetNamespace=&quot;http example(dot)com/test/test/enumXsd/types/2.0&quot;\r\n    xmlns=&quot;http www w3 org/2001/XMLSchema&quot;&gt;\r\n    &lt;simpleType name=&quot;EnumEType&quot;&gt;\r\n        &lt;restriction base=&quot;string&quot;&gt;\r\n            &lt;enumeration value=&quot;w1&quot; /&gt;\r\n            &lt;enumeration value=&quot;2wr&quot; /&gt;\r\n            &lt;enumeration value=&quot;3erwer&quot; /&gt;\r\n            &lt;enumeration value=&quot;5rtete&quot; /&gt;\r\n             ...e.t.c...\r\n        &lt;/restriction&gt;\r\n    &lt;/simpleType&gt;\r\n&lt;/schema&gt;\r\n```\r\nMethod getSchema() takes too long (more than 15 secs) to retrieve schema (`factory.newSchema(schemaFile);`).\r\nIs there any ways to improve logic? Caching is not solve cause it takes a lot of memory.\r\n```java\r\n    private void validate(Source source) throws SAXException, IOException {\r\n        Schema schema = getSchema();\r\n        if (schema != null) {\r\n            Validator validator = schema.newValidator();\r\n            validator.validate(source);\r\n        }\r\n    }\r\n    public Schema getSchema() {\r\n        String path = getSchemaPath();\r\n        if (path == null) {\r\n            return null;\r\n        }\r\n        ClassLoader loader = getClass().getClassLoader();\r\n        try (BufferedInputStream xsdStream = new BufferedInputStream(loader.getResourceAsStream(path))) {\r\n            SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\n            StreamSource schemaFile = new StreamSource(xsdStream);\r\n            schemaFile.setSystemId(loader.getResource(path).toString());\r\n            cachedSchema = factory.newSchema(schemaFile);\r\n            return cachedSchema;\r\n        } catch (SAXException | IOException e) {\r\n            throw new RuntimeException(&quot;Error loading schema &quot; + path, e);\r\n        }\r\n    }\r\n```","link":"https://stackoverflow.com/questions/77558325/validate-xml-against-xsd-which-imports-big-enum-xsd","title":"Validate XML against XSD which imports big enum XSD","body":"<p>I have an XSD which imports big XSD with more than 200k &lt;enumeration&gt; elements, I need to validate incoming XML against root xsd:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;xs:schema xmlns:xs=&quot;http www(dot)w3(dot)org/2001/XMLSchema&quot; elementFormDefault=&quot;qualified&quot;\n    targetNamespace=&quot;http example(dot)com/test/test/types/2.0.0&quot;\n    xmlns:tns=&quot;http example(dot)com/test/test/types/2.0.0&quot;\n    xmlns:mun=&quot;http example(dot)com/test/test/enumXsd/types/2.0&quot;&gt;\n    &lt;xs:import namespace=&quot;http example(dot)com/test/test/enumXsd/types/2.0&quot;\n        schemaLocation=&quot;common/enumXsd.xsd&quot;/&gt;\n    &lt;xs:element name=&quot;test&quot; type=&quot;tns:test&quot;/&gt;\n    &lt;xs:complexType name=&quot;test&quot;&gt;\n         &lt;xs:element name=&quot;abc&quot; type=&quot;mun:EnumEType&quot;/&gt;\n    &lt;/xs:complexType&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n<p>enumXsd.xsd:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;schema xmlns:tns=&quot;http example(dot)com/test/test/enumXsd/types/2.0&quot;\n    elementFormDefault=&quot;qualified&quot;\n    targetNamespace=&quot;http example(dot)com/test/test/enumXsd/types/2.0&quot;\n    xmlns=&quot;http www w3 org/2001/XMLSchema&quot;&gt;\n    &lt;simpleType name=&quot;EnumEType&quot;&gt;\n        &lt;restriction base=&quot;string&quot;&gt;\n            &lt;enumeration value=&quot;w1&quot; /&gt;\n            &lt;enumeration value=&quot;2wr&quot; /&gt;\n            &lt;enumeration value=&quot;3erwer&quot; /&gt;\n            &lt;enumeration value=&quot;5rtete&quot; /&gt;\n             ...e.t.c...\n        &lt;/restriction&gt;\n    &lt;/simpleType&gt;\n&lt;/schema&gt;\n</code></pre>\n<p>Method getSchema() takes too long (more than 15 secs) to retrieve schema (<code>factory.newSchema(schemaFile);</code>).\nIs there any ways to improve logic? Caching is not solve cause it takes a lot of memory.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private void validate(Source source) throws SAXException, IOException {\n        Schema schema = getSchema();\n        if (schema != null) {\n            Validator validator = schema.newValidator();\n            validator.validate(source);\n        }\n    }\n    public Schema getSchema() {\n        String path = getSchemaPath();\n        if (path == null) {\n            return null;\n        }\n        ClassLoader loader = getClass().getClassLoader();\n        try (BufferedInputStream xsdStream = new BufferedInputStream(loader.getResourceAsStream(path))) {\n            SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n            StreamSource schemaFile = new StreamSource(xsdStream);\n            schemaFile.setSystemId(loader.getResource(path).toString());\n            cachedSchema = factory.newSchema(schemaFile);\n            return cachedSchema;\n        } catch (SAXException | IOException e) {\n            throw new RuntimeException(&quot;Error loading schema &quot; + path, e);\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","spring-webclient"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701265957,"last_edit_date":1701265957,"creation_date":1701242556,"answer_id":77569239,"question_id":77542500,"body_markdown":"I needed to enable metrics in `ConnectionProvider`\r\n\r\n```\r\nConnectionProvider provider = ConnectionProvider.builder(&quot;custom&quot;)\r\n\t\t\t\t.maxConnections(maxConnTotal)\r\n\t\t\t\t.metrics(true)\r\n\t\t\t\t.maxLifeTime(Duration.ofSeconds(5))\r\n\t\t\t\t.build();\r\n```\r\n\r\nThen I was able to see logs from MeterRegistry object (repo) \r\n\r\n```\r\nObject[] meters = repo.getMeters().stream().filter(meter -&gt; meter.getId().getName().contains(&quot;reactor&quot;)).toArray();\r\n```\r\n\r\nReference:\r\nhttps://projectreactor.io/docs/netty/release/reference/index.html#_metrics_5\r\n\r\n","link":"https://stackoverflow.com/questions/77542500/how-to-get-poolstats-for-webclient-for-logging-in-spring-boot-3/77569239#77569239","title":"How to get PoolStats for WebClient for logging in Spring Boot 3","body":"<p>I needed to enable metrics in <code>ConnectionProvider</code></p>\n<pre><code>ConnectionProvider provider = ConnectionProvider.builder(&quot;custom&quot;)\n                .maxConnections(maxConnTotal)\n                .metrics(true)\n                .maxLifeTime(Duration.ofSeconds(5))\n                .build();\n</code></pre>\n<p>Then I was able to see logs from MeterRegistry object (repo)</p>\n<pre><code>Object[] meters = repo.getMeters().stream().filter(meter -&gt; meter.getId().getName().contains(&quot;reactor&quot;)).toArray();\n</code></pre>\n<p>Reference:\n<a href=\"https://projectreactor.io/docs/netty/release/reference/index.html#_metrics_5\" rel=\"nofollow noreferrer\">https://projectreactor.io/docs/netty/release/reference/index.html#_metrics_5</a></p>\n"}],"comment_count":0,"is_answered":true,"view_count":26,"answer_count":1,"score":-1,"last_activity_date":1701265957,"creation_date":1700822486,"question_id":77542500,"body_markdown":"I converted the RestTemplate to WebClient in my Spring Boot 3 project. In RestTemplate we were using PoolStats for logging metrics of leased, pending, available, max stats. (Code below)\r\n\r\n```\r\n    private void printHttpClientStats(String qualifier, PoolingHttpClientConnectionManager httpClientConnectionManager) {\r\n\r\n        final PoolStats totalStats = httpClientConnectionManager.getTotalStats();\r\n        log.info(&quot;HttpClient - {}: {}&quot;, qualifier, totalStats);\r\n    }\r\n```\r\nHowever after switching to WebClient I couldn&#39;t be able to find how to get these info and log it the same way. How can I do this in WebClient?\r\n\r\n\r\n\r\n\r\nI find this similar question but there are no answers to this one:\r\nhttps://stackoverflow.com/questions/55113790/how-to-log-thread-pool-metrics-for-spring-webclient","link":"https://stackoverflow.com/questions/77542500/how-to-get-poolstats-for-webclient-for-logging-in-spring-boot-3","title":"How to get PoolStats for WebClient for logging in Spring Boot 3","body":"<p>I converted the RestTemplate to WebClient in my Spring Boot 3 project. In RestTemplate we were using PoolStats for logging metrics of leased, pending, available, max stats. (Code below)</p>\n<pre><code>    private void printHttpClientStats(String qualifier, PoolingHttpClientConnectionManager httpClientConnectionManager) {\n\n        final PoolStats totalStats = httpClientConnectionManager.getTotalStats();\n        log.info(&quot;HttpClient - {}: {}&quot;, qualifier, totalStats);\n    }\n</code></pre>\n<p>However after switching to WebClient I couldn't be able to find how to get these info and log it the same way. How can I do this in WebClient?</p>\n<p>I find this similar question but there are no answers to this one:\n<a href=\"https://stackoverflow.com/questions/55113790/how-to-log-thread-pool-metrics-for-spring-webclient\">How to log thread pool metrics for Spring WebClient?</a></p>\n"},{"tags":["java","multithreading","concurrency","ticket-system"],"comment_count":0,"is_answered":false,"view_count":17,"answer_count":0,"score":0,"last_activity_date":1701265642,"creation_date":1701265642,"question_id":77571706,"body_markdown":"i&#39;m reading an article about ticket allocation system that deals with concurrency (of course)\r\nHere is the link :[ticket](https://medium.com/@nicholasgcc/the-taylor-swift-algorithm-a-fairness-based-ticketing-allocation-protocol-6510f66db19e)\r\nI find one part that&#39;s difficult to comprehend.\r\nIn the QueueService class, the method &quot;attemptPurchase&quot; is sequential, not concurrent.\r\nmeaning that only when a user finishes purchasing a ticket that the next can.\r\nSo, my question is why the need for the &quot;lock&quot; in the Ticket class and the tryLock method, because after each execution of the method &quot;attemptPurchase&quot; the ticket is removed from the list which means the next user will only interact on the list without removing tickets.\r\nHere is the Ticket class :\r\n\r\n```\r\npublic class Ticket {\r\n    private final int id;\r\n    private AtomicBoolean locked = new AtomicBoolean(false);\r\n\r\n    public Ticket(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public boolean isLocked() {\r\n        return locked.get();\r\n    }\r\n\r\n    public boolean tryLock() {\r\n        return locked.compareAndSet(false, true);\r\n    }\r\n}\r\n```\r\nHere is the QueueService class :\r\n\r\n```\r\npublic class QueueService {\r\n    private final WaitingRoomService waitingRoomService;\r\n    private final List&lt;Ticket&gt; tickets;\r\n\r\n    /**\r\n     * Initializes a new QueueService instance.\r\n     *\r\n     * @param waitingRoomService the service to manage the waiting room\r\n     * @param tickets the list of tickets available for sale\r\n     */\r\n    public QueueService(WaitingRoomService waitingRoomService, List&lt;Ticket&gt; tickets) {\r\n        this.waitingRoomService = waitingRoomService;\r\n        this.tickets = new CopyOnWriteArrayList&lt;&gt;(tickets);\r\n    }\r\n\r\n    /**\r\n     * Processes the users in the waiting room, allowing them to attempt to purchase tickets.\r\n     */\r\n    public void processQueue() {\r\n        waitingRoomService.getWaitingRoom().stream()\r\n                .sorted(Comparator.comparing(User::getQueuePosition))\r\n                .forEach(this::attemptPurchase);\r\n    }\r\n\r\n    /**\r\n     * Allows the given user to attempt to purchase a ticket.\r\n     *\r\n     * @param user the user who will attempt to purchase a ticket\r\n     */\r\n    private void attemptPurchase(User user) {\r\n        for (Ticket ticket : tickets) {\r\n            if (ticket.tryLock()) {\r\n                System.out.println(&quot;User &quot; + user.getId() + &quot; arriving at time &quot; + user.getArrivalTime() + &quot; purchased ticket &quot; + ticket.getId());\r\n                waitingRoomService.getWaitingRoom().remove(user);  // Remove user from waiting room after purchase\r\n                tickets.remove(ticket);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Returns the list of tickets.\r\n     *\r\n     * @return the list of tickets\r\n     */\r\n    public List&lt;Ticket&gt; getTickets() {\r\n        return tickets;\r\n    }\r\n```\r\n\r\n\r\n\r\nI try to create thread so that many users can concurrently call the &quot;attemptPuschase&quot; method but that would go against the algorithm of the article that &quot;User are put into a queue and a random queue position then when the sale is started, each user in the queue is put into the holding queue for payment&quot;\r\nIf I create many threads and the number of users &gt;&gt; numbers of tickets (much greater than) then it may happen that the first user in the queue or second, third, ... those who put first cannot purchase tickets due to the undetermined behaviors of thread.\r\nCan anyone help me with a solution.","link":"https://stackoverflow.com/questions/77571706/ticket-allocation-system","title":"Ticket allocation system","body":"<p>i'm reading an article about ticket allocation system that deals with concurrency (of course)\nHere is the link :<a href=\"https://medium.com/@nicholasgcc/the-taylor-swift-algorithm-a-fairness-based-ticketing-allocation-protocol-6510f66db19e\" rel=\"nofollow noreferrer\">ticket</a>\nI find one part that's difficult to comprehend.\nIn the QueueService class, the method &quot;attemptPurchase&quot; is sequential, not concurrent.\nmeaning that only when a user finishes purchasing a ticket that the next can.\nSo, my question is why the need for the &quot;lock&quot; in the Ticket class and the tryLock method, because after each execution of the method &quot;attemptPurchase&quot; the ticket is removed from the list which means the next user will only interact on the list without removing tickets.\nHere is the Ticket class :</p>\n<pre><code>public class Ticket {\n    private final int id;\n    private AtomicBoolean locked = new AtomicBoolean(false);\n\n    public Ticket(int id) {\n        this.id = id;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public boolean isLocked() {\n        return locked.get();\n    }\n\n    public boolean tryLock() {\n        return locked.compareAndSet(false, true);\n    }\n}\n</code></pre>\n<p>Here is the QueueService class :</p>\n<pre><code>public class QueueService {\n    private final WaitingRoomService waitingRoomService;\n    private final List&lt;Ticket&gt; tickets;\n\n    /**\n     * Initializes a new QueueService instance.\n     *\n     * @param waitingRoomService the service to manage the waiting room\n     * @param tickets the list of tickets available for sale\n     */\n    public QueueService(WaitingRoomService waitingRoomService, List&lt;Ticket&gt; tickets) {\n        this.waitingRoomService = waitingRoomService;\n        this.tickets = new CopyOnWriteArrayList&lt;&gt;(tickets);\n    }\n\n    /**\n     * Processes the users in the waiting room, allowing them to attempt to purchase tickets.\n     */\n    public void processQueue() {\n        waitingRoomService.getWaitingRoom().stream()\n                .sorted(Comparator.comparing(User::getQueuePosition))\n                .forEach(this::attemptPurchase);\n    }\n\n    /**\n     * Allows the given user to attempt to purchase a ticket.\n     *\n     * @param user the user who will attempt to purchase a ticket\n     */\n    private void attemptPurchase(User user) {\n        for (Ticket ticket : tickets) {\n            if (ticket.tryLock()) {\n                System.out.println(&quot;User &quot; + user.getId() + &quot; arriving at time &quot; + user.getArrivalTime() + &quot; purchased ticket &quot; + ticket.getId());\n                waitingRoomService.getWaitingRoom().remove(user);  // Remove user from waiting room after purchase\n                tickets.remove(ticket);\n                break;\n            }\n        }\n    }\n    /**\n     * Returns the list of tickets.\n     *\n     * @return the list of tickets\n     */\n    public List&lt;Ticket&gt; getTickets() {\n        return tickets;\n    }\n</code></pre>\n<p>I try to create thread so that many users can concurrently call the &quot;attemptPuschase&quot; method but that would go against the algorithm of the article that &quot;User are put into a queue and a random queue position then when the sale is started, each user in the queue is put into the holding queue for payment&quot;\nIf I create many threads and the number of users &gt;&gt; numbers of tickets (much greater than) then it may happen that the first user in the queue or second, third, ... those who put first cannot purchase tickets due to the undetermined behaviors of thread.\nCan anyone help me with a solution.</p>\n"},{"tags":["java",".net","spring-boot","rest","soap"],"comment_count":0,"is_answered":false,"view_count":11,"answer_count":0,"score":-1,"last_activity_date":1701265172,"creation_date":1701265172,"question_id":77571649,"body_markdown":"I m trying to solutions a SOAP based solution with following things\r\n1. The old SOAP services are written in .Net with SOAP - WSDL and XSD already generated and shared with consumers.\r\n2. The consumers have been using those contracts for years and they don&#39;t want to upgrade to REST or  any other new platforms.\r\n3. For them they want to use the Same WSDL/XSD basically contracts and dont care for anything else.\r\n4. But as from the Publisher side, I m rewriting the solution in Spring Boot service, hence I can still use the structure of classes, variables and so on. \r\n5. So the WSDL and XSD will definitely change because I will be generating them again with new Spring Boot Service.\r\n\r\n1. Is it possible to have an adapter solution to serve the clients, without impacting them.\r\n2. Can we reuse the WSDL/XSD from .net application receive the request to my new Spring boot service ?\r\n3. Basically the backend becomes flexible and consumers wont even know, that we have shifted from .net to Java.\r\n4. I do understand we have WSDL/ XSD as tight contract, where its part of validation to have it to the specific of service, ports and bindings.\r\n5. But again has any one faced this situation.","link":"https://stackoverflow.com/questions/77571649/soap-services-from-wcf-migration-to-soap-in-spring-boot","title":"SOAP Services from WCF migration to SOAP in Spring Boot","body":"<p>I m trying to solutions a SOAP based solution with following things</p>\n<ol>\n<li><p>The old SOAP services are written in .Net with SOAP - WSDL and XSD already generated and shared with consumers.</p>\n</li>\n<li><p>The consumers have been using those contracts for years and they don't want to upgrade to REST or  any other new platforms.</p>\n</li>\n<li><p>For them they want to use the Same WSDL/XSD basically contracts and dont care for anything else.</p>\n</li>\n<li><p>But as from the Publisher side, I m rewriting the solution in Spring Boot service, hence I can still use the structure of classes, variables and so on.</p>\n</li>\n<li><p>So the WSDL and XSD will definitely change because I will be generating them again with new Spring Boot Service.</p>\n</li>\n<li><p>Is it possible to have an adapter solution to serve the clients, without impacting them.</p>\n</li>\n<li><p>Can we reuse the WSDL/XSD from .net application receive the request to my new Spring boot service ?</p>\n</li>\n<li><p>Basically the backend becomes flexible and consumers wont even know, that we have shifted from .net to Java.</p>\n</li>\n<li><p>I do understand we have WSDL/ XSD as tight contract, where its part of validation to have it to the specific of service, ports and bindings.</p>\n</li>\n<li><p>But again has any one faced this situation.</p>\n</li>\n</ol>\n"},{"tags":["java","list","search","arraylist"],"comments":[{"score":0,"post_type":"question","creation_date":1701263073,"post_id":77571333,"comment_id":136753604,"body_markdown":"Can you share some input/output examples please","link":"https://stackoverflow.com/questions/77571333/search-value-in-a-java-list-by-some-of-its-fields#comment136753604_77571333","body":"Can you share some input/output examples please"},{"score":0,"post_type":"question","creation_date":1701263189,"post_id":77571333,"comment_id":136753623,"body_markdown":"You have to write code to search a list for an element that matches your search criteria.  Probably the easiest approach is to write a comparator (or similar) for each distinct set of search criteria, and then iterate through the list using the specific comparator.","link":"https://stackoverflow.com/questions/77571333/search-value-in-a-java-list-by-some-of-its-fields#comment136753623_77571333","body":"You have to write code to search a list for an element that matches your search criteria.  Probably the easiest approach is to write a comparator (or similar) for each distinct set of search criteria, and then iterate through the list using the specific comparator."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701263339,"creation_date":1701263339,"answer_id":77571429,"question_id":77571333,"body_markdown":"If I understand your question, you need something like this:\r\n\r\n    public Identity findIdentity(List&lt;Identity&gt; identities, String type, String id, List&lt;String&gt; services, List&lt;String&gt; roles) {\r\n        return identities.stream()\r\n                .filter(identity -&gt; isCorrectIdentity(type, id, services, roles, identity))\r\n                .findFirst()\r\n                .orElse(null);\r\n    }\r\n    \r\n    private boolean isCorrectIdentity(String type, String id, List&lt;String&gt; services, List&lt;String&gt; roles, Identity identity) {\r\n        return identity.getType().equals(type) &amp;&amp; identity.getId().equals(id) &amp;&amp;\r\n                (services == null || new HashSet&lt;&gt;(identity.getServices()).containsAll(services)) &amp;&amp;\r\n                (roles == null || new HashSet&lt;&gt;(identity.getRoles()).containsAll(roles));\r\n    }\r\n\r\nThis will loop over your list, check element by element the type and id and if the services are defined it will check also with services and in the end if the roles are defined it will search by roles.\r\n\r\nNote: you can simplify the `isCorrectIdentity` by using multiple `if elses` or multiples `methods`.","link":"https://stackoverflow.com/questions/77571333/search-value-in-a-java-list-by-some-of-its-fields/77571429#77571429","title":"Search value in a java list by some of its fields","body":"<p>If I understand your question, you need something like this:</p>\n<pre><code>public Identity findIdentity(List&lt;Identity&gt; identities, String type, String id, List&lt;String&gt; services, List&lt;String&gt; roles) {\n    return identities.stream()\n            .filter(identity -&gt; isCorrectIdentity(type, id, services, roles, identity))\n            .findFirst()\n            .orElse(null);\n}\n\nprivate boolean isCorrectIdentity(String type, String id, List&lt;String&gt; services, List&lt;String&gt; roles, Identity identity) {\n    return identity.getType().equals(type) &amp;&amp; identity.getId().equals(id) &amp;&amp;\n            (services == null || new HashSet&lt;&gt;(identity.getServices()).containsAll(services)) &amp;&amp;\n            (roles == null || new HashSet&lt;&gt;(identity.getRoles()).containsAll(roles));\n}\n</code></pre>\n<p>This will loop over your list, check element by element the type and id and if the services are defined it will check also with services and in the end if the roles are defined it will search by roles.</p>\n<p>Note: you can simplify the <code>isCorrectIdentity</code> by using multiple <code>if elses</code> or multiples <code>methods</code>.</p>\n"},{"comment_count":0,"score":2,"last_activity_date":1701264306,"last_edit_date":1701264306,"creation_date":1701263452,"answer_id":77571442,"question_id":77571333,"body_markdown":"You can achieve this with the [Java Stream API][1].\r\n\r\nFor example, given a `List&lt;Identity&gt;` called `identities` you can do:\r\n\r\n    identities.stream()\r\n      .filter(identity -&gt; identity.getType().equals(type) &amp;&amp; identity.getId().equals(id))\r\n      .findFirst();\r\n\r\nI&#39;d be tempted to move the predicate logic to the `Identity` class, so you&#39;d have something like:\r\n\r\n    public class Identity {\r\n\r\n      private String type;\r\n      private String id;\r\n      private String account;\r\n      private List&lt;String&gt; services;\r\n      private List&lt;String&gt; roles;\r\n    \r\n      public boolean matches(string type, string id, string service, string role) {\r\n         return (type == null || this.type.equals(type)) &amp;&amp; \r\n           (id == null || this.id.equals(id)) &amp;&amp; \r\n           (service == null || this.services.contains(service)) &amp;&amp;\r\n           (role == null || this.roles.contains(role));  \r\n      }\r\n    }\r\n\r\nWhich would then be used like this:\r\n\r\n    identities.stream()\r\n      .filter(identity -&gt; identity.matches(type, id, service, role))\r\n      .findFirst();\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html","link":"https://stackoverflow.com/questions/77571333/search-value-in-a-java-list-by-some-of-its-fields/77571442#77571442","title":"Search value in a java list by some of its fields","body":"<p>You can achieve this with the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\" rel=\"nofollow noreferrer\">Java Stream API</a>.</p>\n<p>For example, given a <code>List&lt;Identity&gt;</code> called <code>identities</code> you can do:</p>\n<pre><code>identities.stream()\n  .filter(identity -&gt; identity.getType().equals(type) &amp;&amp; identity.getId().equals(id))\n  .findFirst();\n</code></pre>\n<p>I'd be tempted to move the predicate logic to the <code>Identity</code> class, so you'd have something like:</p>\n<pre><code>public class Identity {\n\n  private String type;\n  private String id;\n  private String account;\n  private List&lt;String&gt; services;\n  private List&lt;String&gt; roles;\n\n  public boolean matches(string type, string id, string service, string role) {\n     return (type == null || this.type.equals(type)) &amp;&amp; \n       (id == null || this.id.equals(id)) &amp;&amp; \n       (service == null || this.services.contains(service)) &amp;&amp;\n       (role == null || this.roles.contains(role));  \n  }\n}\n</code></pre>\n<p>Which would then be used like this:</p>\n<pre><code>identities.stream()\n  .filter(identity -&gt; identity.matches(type, id, service, role))\n  .findFirst();\n</code></pre>\n"}],"comment_count":2,"is_answered":true,"view_count":71,"answer_count":2,"score":1,"last_activity_date":1701264306,"creation_date":1701262556,"question_id":77571333,"body_markdown":"Good morning. Currently I have the following java class of which I have a list of identities:\r\n  \r\n    @Getter\r\n    @AllArgsConstructor\r\n    @RegisterForReflection\r\n    @NoArgsConstructor\r\n    @Setter\r\n    public class Identity {\r\n    \r\n        private String type;\r\n        private String id;\r\n        @JsonIgnore\r\n        private String account;\r\n        private List&lt;String&gt; services;\r\n        private List&lt;String&gt; roles;\r\n    }\r\n\r\nCurrently I have a List of Identity (**`List &lt;Identity&gt;`**) and I need to search within this list for some or all of its parameters, that is, I can have the following use cases for searching for an identity within the list:\r\n\r\n     1. type &amp;&amp; id;\r\n     2. type &amp;&amp; id &amp;&amp; services; \r\n     3. type &amp;&amp; id &amp;&amp; services &amp;&amp; roles;\r\n\r\nHow can I do in this case? I know that lists have methods like contains, but I don&#39;t know if they apply to partial searches like I want, what I want is that if it makes a match it returns the element","link":"https://stackoverflow.com/questions/77571333/search-value-in-a-java-list-by-some-of-its-fields","title":"Search value in a java list by some of its fields","body":"<p>Good morning. Currently I have the following java class of which I have a list of identities:</p>\n<pre><code>@Getter\n@AllArgsConstructor\n@RegisterForReflection\n@NoArgsConstructor\n@Setter\npublic class Identity {\n\n    private String type;\n    private String id;\n    @JsonIgnore\n    private String account;\n    private List&lt;String&gt; services;\n    private List&lt;String&gt; roles;\n}\n</code></pre>\n<p>Currently I have a List of Identity (<strong><code>List &lt;Identity&gt;</code></strong>) and I need to search within this list for some or all of its parameters, that is, I can have the following use cases for searching for an identity within the list:</p>\n<pre><code> 1. type &amp;&amp; id;\n 2. type &amp;&amp; id &amp;&amp; services; \n 3. type &amp;&amp; id &amp;&amp; services &amp;&amp; roles;\n</code></pre>\n<p>How can I do in this case? I know that lists have methods like contains, but I don't know if they apply to partial searches like I want, what I want is that if it makes a match it returns the element</p>\n"}],"has_more":true,"quota_max":300,"quota_remaining":289}