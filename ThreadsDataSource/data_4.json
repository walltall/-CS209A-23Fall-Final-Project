{"items":[{"tags":["java","spring","git","github","intellij-idea"],"comments":[{"score":1,"post_type":"question","creation_date":1701342463,"post_id":77577876,"comment_id":136764885,"body_markdown":"Remove all `.git` folders, create new git repo for all, push.","link":"https://stackoverflow.com/questions/77577876/how-to-push-different-microservices-projects-in-a-single-git-repository#comment136764885_77577876","body":"Remove all <code>.git</code> folders, create new git repo for all, push."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701595108,"creation_date":1701595108,"answer_id":77593658,"question_id":77577876,"body_markdown":"As M.Deinum mentioned in the comment, you should delete `.git` folders in all subdirectories.\r\nIf Intellij doesn&#39;t let you do this, do it by file manager.\r\nI&#39;ve done this in a sample project that you can see here:\r\n[github/microservice][1]\r\n\r\n\r\nThe only difference is that I didn&#39;t import other services as modules.\r\nIntellij recognizes them as a service like this image:\r\n[services][2]\r\n\r\n\r\n  [1]: https://github.com/Mojtaba98mz/microservice\r\n  [2]: https://i.stack.imgur.com/ueULF.png","link":"https://stackoverflow.com/questions/77577876/how-to-push-different-microservices-projects-in-a-single-git-repository/77593658#77593658","title":"How to push different microservices projects in a single git repository","body":"<p>As M.Deinum mentioned in the comment, you should delete <code>.git</code> folders in all subdirectories.\nIf Intellij doesn't let you do this, do it by file manager.\nI've done this in a sample project that you can see here:\n<a href=\"https://github.com/Mojtaba98mz/microservice\" rel=\"nofollow noreferrer\">github/microservice</a></p>\n<p>The only difference is that I didn't import other services as modules.\nIntellij recognizes them as a service like this image:\n<a href=\"https://i.stack.imgur.com/ueULF.png\" rel=\"nofollow noreferrer\">services</a></p>\n"}],"comment_count":1,"is_answered":false,"view_count":47,"answer_count":1,"score":0,"last_activity_date":1701595108,"creation_date":1701341996,"question_id":77577876,"body_markdown":"so i have built a microservice project in intellij with springboot. I now want to store it in github as in one repository with folders representing different services. I made a parent project Optima Growth and imported other services as modules. \r\nNow the error im facing is that all these services being different projects have their own .git folder and hence their own local repository.\r\nI want to store the whole application in a single repository but cant as these services have their own repositories and the github repo only shows the project iv pushed last and not all in folders.\r\n[![enter image description here][1]][1]\r\n\r\ni thought of using submodules so i can version control all services and put all services in one github remote repo but it requires me to first make github remote repos of these services which can take time as i incresae the services. Also i thought of removing .git from all these services and just adding all code and files to a single repo but intellij wont let me do it as the modules work like different projects. Please tell me how to store it in a single repository.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YeGVk.png","link":"https://stackoverflow.com/questions/77577876/how-to-push-different-microservices-projects-in-a-single-git-repository","title":"How to push different microservices projects in a single git repository","body":"<p>so i have built a microservice project in intellij with springboot. I now want to store it in github as in one repository with folders representing different services. I made a parent project Optima Growth and imported other services as modules.\nNow the error im facing is that all these services being different projects have their own .git folder and hence their own local repository.\nI want to store the whole application in a single repository but cant as these services have their own repositories and the github repo only shows the project iv pushed last and not all in folders.\n<a href=\"https://i.stack.imgur.com/YeGVk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YeGVk.png\" alt=\"enter image description here\" /></a></p>\n<p>i thought of using submodules so i can version control all services and put all services in one github remote repo but it requires me to first make github remote repos of these services which can take time as i incresae the services. Also i thought of removing .git from all these services and just adding all code and files to a single repo but intellij wont let me do it as the modules work like different projects. Please tell me how to store it in a single repository.</p>\n"},{"tags":["java","android","android-webview","android-source","android-websettings"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701582938,"creation_date":1701582938,"answer_id":77593185,"question_id":77568572,"body_markdown":"Locate the WebView source code:\r\nNavigate to the WebView module in the AOSP source code. The WebView code is typically located in the frameworks/base/core/java/android/webkit directory.\r\n\r\nFind the WebSettings class:\r\nLook for the WebSettings class within the android.webkit package. The file might be named WebSettings.java.\r\n\r\nLocate the setSavePassword method:\r\nSearch for the setSavePassword method within the WebSettings class. It should be a public method responsible for setting whether passwords should be saved.\r\n\r\nModify the method implementation:\r\nChange the implementation of the setSavePassword method to set the value to true. The code might look like this:\r\n\r\n    public void setSavePassword(boolean enable) {\r\n        mSavePassword = true;\r\n    }","link":"https://stackoverflow.com/questions/77568572/how-to-change-websettingss-setsavepassword-as-true-in-aosp-source-code-android/77593185#77593185","title":"How to change WebSettings&#39;s setSavePassword as true in aosp source code Android 10?","body":"<p>Locate the WebView source code:\nNavigate to the WebView module in the AOSP source code. The WebView code is typically located in the frameworks/base/core/java/android/webkit directory.</p>\n<p>Find the WebSettings class:\nLook for the WebSettings class within the android.webkit package. The file might be named WebSettings.java.</p>\n<p>Locate the setSavePassword method:\nSearch for the setSavePassword method within the WebSettings class. It should be a public method responsible for setting whether passwords should be saved.</p>\n<p>Modify the method implementation:\nChange the implementation of the setSavePassword method to set the value to true. The code might look like this:</p>\n<pre><code>public void setSavePassword(boolean enable) {\n    mSavePassword = true;\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":48,"answer_count":1,"score":1,"last_activity_date":1701582938,"creation_date":1701231925,"last_edit_date":1701239083,"question_id":77568572,"body_markdown":"I need to know which class sets the value of `WebView`&#39;s `setSavePassword()` to `true`.\r\n\r\nI have checked the framework source code of WebSettings in the path:\r\n`frameworks/base/core/java/android/webkit/WebSettings.java`\r\n\r\nBut I found only the **abstract** class method.\r\n```lang-java\r\n/**\r\n* Sets whether the WebView should save passwords. The default is {@code true}.\r\n* @deprecated Saving passwords in WebView will not be supported in future versions.\r\n*/\r\n@Deprecated\r\npublic abstract void setSavePassword(boolean save);\r\n```\r\nLet me know which class the default value of the boolean changed to `true`.","link":"https://stackoverflow.com/questions/77568572/how-to-change-websettingss-setsavepassword-as-true-in-aosp-source-code-android","title":"How to change WebSettings&#39;s setSavePassword as true in aosp source code Android 10?","body":"<p>I need to know which class sets the value of <code>WebView</code>'s <code>setSavePassword()</code> to <code>true</code>.</p>\n<p>I have checked the framework source code of WebSettings in the path:\n<code>frameworks/base/core/java/android/webkit/WebSettings.java</code></p>\n<p>But I found only the <strong>abstract</strong> class method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n* Sets whether the WebView should save passwords. The default is {@code true}.\n* @deprecated Saving passwords in WebView will not be supported in future versions.\n*/\n@Deprecated\npublic abstract void setSavePassword(boolean save);\n</code></pre>\n<p>Let me know which class the default value of the boolean changed to <code>true</code>.</p>\n"},{"tags":["java","spring-boot","unit-testing","configuration","microservices"],"comments":[{"score":0,"post_type":"question","creation_date":1693891487,"post_id":77041876,"comment_id":135815289,"body_markdown":"I wonder if you shouldn&#39;t remove `scanBasePackageClasses = Application.class` from your `@SpringBootApplication` declarations. `AbstractSecurityConfig`, `SatConfig`... are I think, in the `com.xxx.my_project` or `com.yyy.dependency_project` packages? Their packages declaration aren&#39;t shown.","link":"https://stackoverflow.com/questions/77041876/unsatisfieddependencyexception-no-qualifying-bean-of-type-xxx-available#comment135815289_77041876","body":"I wonder if you shouldn&#39;t remove <code>scanBasePackageClasses = Application.class</code> from your <code>@SpringBootApplication</code> declarations. <code>AbstractSecurityConfig</code>, <code>SatConfig</code>... are I think, in the <code>com.xxx.my_project</code> or <code>com.yyy.dependency_project</code> packages? Their packages declaration aren&#39;t shown."},{"score":0,"post_type":"question","creation_date":1693893351,"post_id":77041876,"comment_id":135815500,"body_markdown":"`SatConfig` is in `com.yyy` -- add that to `scanBasePackages`.","link":"https://stackoverflow.com/questions/77041876/unsatisfieddependencyexception-no-qualifying-bean-of-type-xxx-available#comment135815500_77041876","body":"<code>SatConfig</code> is in <code>com.yyy</code> -- add that to <code>scanBasePackages</code>."},{"score":0,"post_type":"question","creation_date":1693895513,"post_id":77041876,"comment_id":135815803,"body_markdown":"Could you show the test class?","link":"https://stackoverflow.com/questions/77041876/unsatisfieddependencyexception-no-qualifying-bean-of-type-xxx-available#comment135815803_77041876","body":"Could you show the test class?"},{"score":0,"post_type":"question","creation_date":1693921348,"post_id":77041876,"comment_id":135821117,"body_markdown":"Sorry.\nI have solved this problem after add this code to test config class.\n\n  @Bean\n  public SatConfig satConfig() {\n    SatConfig satConfig = EasyMock.createMock(SatConfig.class);\n    return satConfig;\n  }","link":"https://stackoverflow.com/questions/77041876/unsatisfieddependencyexception-no-qualifying-bean-of-type-xxx-available#comment135821117_77041876","body":"Sorry. I have solved this problem after add this code to test config class.    @Bean   public SatConfig satConfig() {     SatConfig satConfig = EasyMock.createMock(SatConfig.class);     return satConfig;   }"},{"score":0,"post_type":"question","creation_date":1701571033,"post_id":77041876,"comment_id":136792085,"body_markdown":"For unknown reasons, this question got 140,000 views in about 90 days (more than 1,500 per day on average).","link":"https://stackoverflow.com/questions/77041876/unsatisfieddependencyexception-no-qualifying-bean-of-type-xxx-available#comment136792085_77041876","body":"For unknown reasons, this question got 140,000 views in about 90 days (more than 1,500 per day on average)."}],"answers":[{"comments":[{"score":1,"post_type":"answer","creation_date":1693919590,"post_id":77043822,"comment_id":135820693,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","link":"https://stackoverflow.com/questions/77041876/unsatisfieddependencyexception-no-qualifying-bean-of-type-xxx-available/77043822#comment135820693_77043822","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77043822/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"comment_count":1,"score":1,"last_activity_date":1701570845,"last_edit_date":1701570845,"creation_date":1693910651,"answer_id":77043822,"question_id":77041876,"body_markdown":"You can define SatConfig as Bean at the Test file separately. Clone the class to the test folder and use @TestConfiguration annotation. Then Spring Boot will see the bean at the test. Also you can define separate properties file for test. It solved for me.\r\n\r\n","link":"https://stackoverflow.com/questions/77041876/unsatisfieddependencyexception-no-qualifying-bean-of-type-xxx-available/77043822#77043822","title":"UnsatisfiedDependencyException: No qualifying bean of type &#39;XXX&#39; available","body":"<p>You can define SatConfig as Bean at the Test file separately. Clone the class to the test folder and use @TestConfiguration annotation. Then Spring Boot will see the bean at the test. Also you can define separate properties file for test. It solved for me.</p>\n"}],"comment_count":5,"is_answered":true,"view_count":138878,"answer_count":1,"score":0,"last_activity_date":1701575478,"creation_date":1693891011,"last_edit_date":1701575478,"question_id":77041876,"body_markdown":"This is a Spring Boot project.\r\nMy project is having another project as a dependency. Like this:\r\n`SecurityConfig(my project) extends AbstractSecurityConfig(dependency project)`\r\n\r\nAnd this is the AbstractSecurityConfig code part:\r\n\r\n```\r\npublic abstract class AbstractSecurityConfig {\r\n\r\n    private SatValidationConfiguration satValidationConfiguration;\r\n\r\n    @Autowired\r\n    private SatConfig satConfig;\r\n```\r\n\r\nAnd this is the SatConfig (dependency project) code part.\r\n\r\n```\r\n@Lazy\r\n@Component\r\npublic class SatConfig {\r\n\r\n    @Value(&quot;${satKeysDir:/etc/satKeys}&quot;)\r\n    private String satKeysDir;\r\n\r\n    @Value(&quot;${pubSatKeys:test.pub}&quot;)\r\n    private List&lt;String&gt; pubSatKeys;\r\n\r\n    @Value(&quot;${pubSatKeysUrl:https://sat-prod.codebig2.net/keys}&quot;)\r\n    private String pubSatKeysUrl;\r\n\r\n    @Value(&quot;${satGracePeriod:1000}&quot;)\r\n    private int satGracePeriod;\r\n\r\n    private KeyResolverV1 keyResolver;\r\n\r\n    @PostConstruct\r\n    public void init() throws Exception {\r\n        final File keyFolder = new File(satKeysDir);\r\n        keyFolder.mkdirs();\r\n        .....\r\n    }\r\n    .....\r\n}\r\n```\r\n\r\nI tried unit testing.\r\n\r\nBut all unit tests are failing.\r\nI&#39;m encountering an issue with my Spring application where I&#39;m getting an UnsatisfiedDependencyException with the following error message:\r\n\r\n```lang-none\r\nError creating bean with name &#39;securityConfig&#39;: Unsatisfied dependency expressed through field &#39;satConfig&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.yyy.SatConfig&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n```\r\n\r\nI have a class SatConfig that is annotated with @Component and has the necessary @Value annotations to inject properties. However, it seems that Spring is unable to find a qualifying bean of type SatConfig during the bean creation process.\r\n\r\n- Verified that the SatConfig class is being scanned by Spring. The package containing SatConfig is included in the component scan configuration.\r\n\r\n    ```\r\n    @EnableScheduling\r\n    @EnableCaching\r\n    @EnableConfigurationProperties()\r\n    @SpringBootApplication(\r\n        scanBasePackageClasses = Application.class,\r\n        scanBasePackages = {\r\n            &quot;com.xxx.my_project&quot;,\r\n            &quot;com.yyy.dependency_project&quot;\r\n        })\r\n    public class Application extends AbstractApplication implements WebMvcConfigurer {\r\n    ```\r\n\r\n- Verified that the necessary dependencies for SatConfig are available and properly configured as beans.\r\n\r\n    ```\r\n    @Lazy\r\n    @Component\r\n    public class SatConfig {\r\n    ```\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77041876/unsatisfieddependencyexception-no-qualifying-bean-of-type-xxx-available","title":"UnsatisfiedDependencyException: No qualifying bean of type &#39;XXX&#39; available","body":"<p>This is a Spring Boot project.\nMy project is having another project as a dependency. Like this:\n<code>SecurityConfig(my project) extends AbstractSecurityConfig(dependency project)</code></p>\n<p>And this is the AbstractSecurityConfig code part:</p>\n<pre><code>public abstract class AbstractSecurityConfig {\n\n    private SatValidationConfiguration satValidationConfiguration;\n\n    @Autowired\n    private SatConfig satConfig;\n</code></pre>\n<p>And this is the SatConfig (dependency project) code part.</p>\n<pre><code>@Lazy\n@Component\npublic class SatConfig {\n\n    @Value(&quot;${satKeysDir:/etc/satKeys}&quot;)\n    private String satKeysDir;\n\n    @Value(&quot;${pubSatKeys:test.pub}&quot;)\n    private List&lt;String&gt; pubSatKeys;\n\n    @Value(&quot;${pubSatKeysUrl:https://sat-prod.codebig2.net/keys}&quot;)\n    private String pubSatKeysUrl;\n\n    @Value(&quot;${satGracePeriod:1000}&quot;)\n    private int satGracePeriod;\n\n    private KeyResolverV1 keyResolver;\n\n    @PostConstruct\n    public void init() throws Exception {\n        final File keyFolder = new File(satKeysDir);\n        keyFolder.mkdirs();\n        .....\n    }\n    .....\n}\n</code></pre>\n<p>I tried unit testing.</p>\n<p>But all unit tests are failing.\nI'm encountering an issue with my Spring application where I'm getting an UnsatisfiedDependencyException with the following error message:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Error creating bean with name 'securityConfig': Unsatisfied dependency expressed through field 'satConfig'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.yyy.SatConfig' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n</code></pre>\n<p>I have a class SatConfig that is annotated with @Component and has the necessary @Value annotations to inject properties. However, it seems that Spring is unable to find a qualifying bean of type SatConfig during the bean creation process.</p>\n<ul>\n<li><p>Verified that the SatConfig class is being scanned by Spring. The package containing SatConfig is included in the component scan configuration.</p>\n<pre><code>@EnableScheduling\n@EnableCaching\n@EnableConfigurationProperties()\n@SpringBootApplication(\n    scanBasePackageClasses = Application.class,\n    scanBasePackages = {\n        &quot;com.xxx.my_project&quot;,\n        &quot;com.yyy.dependency_project&quot;\n    })\npublic class Application extends AbstractApplication implements WebMvcConfigurer {\n</code></pre>\n</li>\n<li><p>Verified that the necessary dependencies for SatConfig are available and properly configured as beans.</p>\n<pre><code>@Lazy\n@Component\npublic class SatConfig {\n</code></pre>\n</li>\n</ul>\n"},{"tags":["java","generics","collections"],"comments":[{"score":2,"post_type":"question","creation_date":1701356967,"post_id":77579473,"comment_id":136767792,"body_markdown":"`List.of(1.1f, 2.2f)` could be considered a `List&lt;Number&gt;` and `Number` is a superclass of `Integer`.","link":"https://stackoverflow.com/questions/77579473/java-generics-and-collections-why-it-is-possible-to-assign-float-list-to-list#comment136767792_77579473","body":"<code>List.of(1.1f, 2.2f)</code> could be considered a <code>List&lt;Number&gt;</code> and <code>Number</code> is a superclass of <code>Integer</code>."}],"answers":[{"comments":[{"score":1,"post_type":"answer","creation_date":1701768011,"post_id":77579525,"comment_id":136813536,"body_markdown":"The compiler does not try to infer the type of the list from its arguments. That would indeed end up at `List&lt;Float&gt;`and fail, as was the case before Java&#160;8. Since Java&#160;8, the target type (left hand side of the assignment operator) determines the type of the expression which is not `List&lt;Number&gt;` but `List&lt;? super Integer&gt;`. Then, the subexpressions are checked against the derived constraints but for `? super …`, any argument will fulfill the constraints. You can also write `intList = List.of();` where the right side has no arguments to derive a stand-alone type.","link":"https://stackoverflow.com/questions/77579473/java-generics-and-collections-why-it-is-possible-to-assign-float-list-to-list/77579525#comment136813536_77579525","body":"The compiler does not try to infer the type of the list from its arguments. That would indeed end up at <code>List&lt;Float&gt;</code>and fail, as was the case before Java 8. Since Java 8, the target type (left hand side of the assignment operator) determines the type of the expression which is not <code>List&lt;Number&gt;</code> but <code>List&lt;? super Integer&gt;</code>. Then, the subexpressions are checked against the derived constraints but for <code>? super …</code>, any argument will fulfill the constraints. You can also write <code>intList = List.of();</code> where the right side has no arguments to derive a stand-alone type."}],"comment_count":1,"score":3,"last_activity_date":1701356770,"creation_date":1701356770,"answer_id":77579525,"question_id":77579473,"body_markdown":"`List&lt;? super Integer&gt;` means that the actual type is `Integer` or one of its super types: `Number` or `Object`, but also `Comparable` or `Serializable`.\r\n\r\nWhen you assign `List.of(1.1f,2.2f)` to `intList`, the compiler tries to find a match. It finds one that&#39;s not `List&lt;Integer&gt;`; I&#39;m guessing `List&lt;Number&gt;`. The result is a list that you can add `Integer` instances to. That it may also contain non-`Integer` values is not an issue here.\r\n\r\nThis is also the reason why you cannot extract elements as `Integer` but only `Object` (or the wildcard, `?`).","link":"https://stackoverflow.com/questions/77579473/java-generics-and-collections-why-it-is-possible-to-assign-float-list-to-list/77579525#77579525","title":"Java generics and collections: Why it is possible to assign float list to List&lt;? super Integer&gt;?","body":"<p><code>List&lt;? super Integer&gt;</code> means that the actual type is <code>Integer</code> or one of its super types: <code>Number</code> or <code>Object</code>, but also <code>Comparable</code> or <code>Serializable</code>.</p>\n<p>When you assign <code>List.of(1.1f,2.2f)</code> to <code>intList</code>, the compiler tries to find a match. It finds one that's not <code>List&lt;Integer&gt;</code>; I'm guessing <code>List&lt;Number&gt;</code>. The result is a list that you can add <code>Integer</code> instances to. That it may also contain non-<code>Integer</code> values is not an issue here.</p>\n<p>This is also the reason why you cannot extract elements as <code>Integer</code> but only <code>Object</code> (or the wildcard, <code>?</code>).</p>\n"},{"comment_count":0,"score":2,"last_activity_date":1701358694,"last_edit_date":1701358694,"creation_date":1701357826,"answer_id":77579625,"question_id":77579473,"body_markdown":"&gt; In Java generics topic stated, that expression `? super Integer` means any type(class) that has Integer as super class(Including Integer.class).\r\n\r\nNo, that&#39;s backwards.  The type expression `? super Integer` means an unspecified type that is a superclass *of* `Integer`, or is `Integer` itself.  Supposing that we are talking about `java.lang.Integer`, and referring to the Java 21 standard library, that means one of  `java.lang.Integer`, `java.lang.Number`, `java.lang.Object`, `java.lang.Serializable`, `java.lang.Comparable&lt;Integer&gt;`, `java.lang.constant.Constable`, or `java.lang.constant.ConstantDesc`.\r\n\r\nA `List&lt;? super Integer&gt;` is one to which you are certain to be able to *add* an `Integer`, but which provides no guarantees at all about what other types of objects might also be within.\r\n\r\n&gt; [...] why following behavior possible? \r\n\r\n&gt;     List&lt;? super Integer&gt; intList = new ArrayList&lt;&gt;();\r\n&gt;     // [...]\r\n&gt;     intList = List.of(1.1f,2.2f);\r\n\r\nBecause Java can infer the type of the list to be any number of compatible things that would accomodate objects of type `Float`, such as `List&lt;Number&gt;` or `List&lt;Object&gt;`.  It doesn&#39;t actually need to choose one in this case -- it is sufficient to know that there are viable options.  The compiler cannot safely assume that the list referred to as a `List&lt;? super Float&gt;` has one of those types, however, which is why your other assignment is rejected.\r\n\r\nIf you want a `List` that can contain any object of class `Integer` or any subclass of `Integer` then that is spelled `List&lt;Integer&gt;`.\r\n\r\nIf you want to accommodate lists with any type parameter that is `Integer` or a subtype of `Integer` then that is spelled `List&lt;? extends Integer&gt;`.\r\n\r\nNote that the latter allows you to assume that any object pulled from the list is an `Integer`, but not, formally, that you can add elements whose class is exactly `Integer`.  That&#39;s because if `Integer` were not `final` then you could have a subclass, say `SmallInteger`, that was the actual type parameter of the list.  Any object of that class is also an `Integer`, but an object whose class is `Integer` *is not* a `SmallInteger`.","link":"https://stackoverflow.com/questions/77579473/java-generics-and-collections-why-it-is-possible-to-assign-float-list-to-list/77579625#77579625","title":"Java generics and collections: Why it is possible to assign float list to List&lt;? super Integer&gt;?","body":"<blockquote>\n<p>In Java generics topic stated, that expression <code>? super Integer</code> means any type(class) that has Integer as super class(Including Integer.class).</p>\n</blockquote>\n<p>No, that's backwards.  The type expression <code>? super Integer</code> means an unspecified type that is a superclass <em>of</em> <code>Integer</code>, or is <code>Integer</code> itself.  Supposing that we are talking about <code>java.lang.Integer</code>, and referring to the Java 21 standard library, that means one of  <code>java.lang.Integer</code>, <code>java.lang.Number</code>, <code>java.lang.Object</code>, <code>java.lang.Serializable</code>, <code>java.lang.Comparable&lt;Integer&gt;</code>, <code>java.lang.constant.Constable</code>, or <code>java.lang.constant.ConstantDesc</code>.</p>\n<p>A <code>List&lt;? super Integer&gt;</code> is one to which you are certain to be able to <em>add</em> an <code>Integer</code>, but which provides no guarantees at all about what other types of objects might also be within.</p>\n<blockquote>\n<p>[...] why following behavior possible?</p>\n</blockquote>\n<blockquote>\n<pre><code>List&lt;? super Integer&gt; intList = new ArrayList&lt;&gt;();\n// [...]\nintList = List.of(1.1f,2.2f);\n</code></pre>\n</blockquote>\n<p>Because Java can infer the type of the list to be any number of compatible things that would accomodate objects of type <code>Float</code>, such as <code>List&lt;Number&gt;</code> or <code>List&lt;Object&gt;</code>.  It doesn't actually need to choose one in this case -- it is sufficient to know that there are viable options.  The compiler cannot safely assume that the list referred to as a <code>List&lt;? super Float&gt;</code> has one of those types, however, which is why your other assignment is rejected.</p>\n<p>If you want a <code>List</code> that can contain any object of class <code>Integer</code> or any subclass of <code>Integer</code> then that is spelled <code>List&lt;Integer&gt;</code>.</p>\n<p>If you want to accommodate lists with any type parameter that is <code>Integer</code> or a subtype of <code>Integer</code> then that is spelled <code>List&lt;? extends Integer&gt;</code>.</p>\n<p>Note that the latter allows you to assume that any object pulled from the list is an <code>Integer</code>, but not, formally, that you can add elements whose class is exactly <code>Integer</code>.  That's because if <code>Integer</code> were not <code>final</code> then you could have a subclass, say <code>SmallInteger</code>, that was the actual type parameter of the list.  Any object of that class is also an <code>Integer</code>, but an object whose class is <code>Integer</code> <em>is not</em> a <code>SmallInteger</code>.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":76,"answer_count":2,"score":1,"last_activity_date":1701571311,"creation_date":1701356298,"last_edit_date":1701571311,"question_id":77579473,"body_markdown":"&lt;br/&gt;\r\nIn Java generics topic stated, that expression `? super Integer` means any type(class) that has Integer as super class(Including Integer.class).&lt;br/&gt;\r\nThen why following behavior possible?\r\n\r\n\r\n```\r\nList&lt;? super Integer&gt; intList = new ArrayList&lt;&gt;();\r\nList&lt;? super Float&gt; floatList = List.of(1.1f,2.2f);\r\n\r\nintList = floatList;   \r\n//Not possible, Required type: List &lt;? super Integer&gt; Provided: List &lt;capture of ? super Float&gt;\r\n\r\nintList = List.of(1.1f,2.2f);\r\n//Ok, intList will now contains float values\r\n```\r\n\r\nI do understand that in runtime there is no generics, but why there is no compilation error?","link":"https://stackoverflow.com/questions/77579473/java-generics-and-collections-why-it-is-possible-to-assign-float-list-to-list","title":"Java generics and collections: Why it is possible to assign float list to List&lt;? super Integer&gt;?","body":"<br/>\nIn Java generics topic stated, that expression `? super Integer` means any type(class) that has Integer as super class(Including Integer.class).<br/>\nThen why following behavior possible?\n<pre><code>List&lt;? super Integer&gt; intList = new ArrayList&lt;&gt;();\nList&lt;? super Float&gt; floatList = List.of(1.1f,2.2f);\n\nintList = floatList;   \n//Not possible, Required type: List &lt;? super Integer&gt; Provided: List &lt;capture of ? super Float&gt;\n\nintList = List.of(1.1f,2.2f);\n//Ok, intList will now contains float values\n</code></pre>\n<p>I do understand that in runtime there is no generics, but why there is no compilation error?</p>\n"},{"tags":["java","spring","flyway","sharding"],"comments":[{"score":0,"post_type":"question","creation_date":1701571145,"post_id":77390141,"comment_id":136792090,"body_markdown":"Please review *[Why not upload images of code/errors when asking a question?](https://meta.stackoverflow.com/questions/285551/)* (e.g., *&quot;Images should only be used to illustrate problems that* ***can&#39;t be made clear in any other way,*** *such as to provide screenshots of a user interface.&quot;*) and [do the right thing](https://stackoverflow.com/posts/77390141/edit) (it covers answers as well). Thanks in advance.","link":"https://stackoverflow.com/questions/77390141/shardingsphere-and-flyway-integration-startup-error-schema-xxxx-doesnt-exist#comment136792090_77390141","body":"Please review <i><a href=\"https://meta.stackoverflow.com/questions/285551/\">Why not upload images of code/errors when asking a question?</a></i> (e.g., <i>&quot;Images should only be used to illustrate problems that</i> <b><i>can&#39;t be made clear in any other way,</i></b> <i>such as to provide screenshots of a user interface.&quot;</i>) and <a href=\"https://stackoverflow.com/posts/77390141/edit\">do the right thing</a> (it covers answers as well). Thanks in advance."}],"comment_count":1,"is_answered":false,"view_count":46484,"answer_count":0,"score":0,"last_activity_date":1701571301,"creation_date":1698681266,"last_edit_date":1701571301,"question_id":77390141,"body_markdown":"I want to use Flyway to manage the database version, and I want to use the data source of shardingjdbc, but I encounter various problems when I start. How can I fix this problem?\r\n\r\n### Dependencies\r\n\r\nshardingsphere-jdbc-core-spring-boot-starter:5.1.1\r\nflyway-core:8.5.13\r\nflyway-mysql:8.5.13\r\nmysql-connector-j:8.0.33\r\njdk8\r\n\r\n### application.yaml\r\n\r\n``` yaml\r\nspring:\r\n  autoconfigure:\r\n    exclude: com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceAutoConfigure\r\n  shardingsphere:\r\n    enabled: true\r\n    datasource:\r\n      schema:\r\n        name: store\r\n      names: store\r\n      store:\r\n        driver-class-name: com.mysql.cj.jdbc.Driver\r\n        type: com.alibaba.druid.pool.DruidDataSource\r\n        username: root\r\n        password: root\r\n        url: jdbc:mysql://pigx-mysql:3306/store?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\r\n    props:\r\n      sql-show: true\r\n    rules:\r\n      sharding:\r\n        sharding-algorithms:\r\n          table-inline:\r\n            props:\r\n              algorithm-expression: store_$-&gt;{tenant_id}\r\n            type: INLINE\r\n        tables:\r\n          version:\r\n            actual-data-nodes: store.t_version\r\n            table-strategy:\r\n              none:\r\n          store:\r\n            actual-data-nodes: store.store_1716476137853374465, store.store_1717116448820633602\r\n            table-strategy:\r\n              standard:\r\n                sharding-algorithm-name: table-inline\r\n                sharding-column: tenant_id\r\n  ## flyway ---------------------------------\r\n  flyway:\r\n    enabled: true\r\n    baseline-on-migrate: true\r\n    clean-disabled: false\r\n    out-of-order: true\r\n```\r\n\r\nThe following exception is displayed when the startup is displayed:\r\n\r\n![Image](https://github.com/apache/shardingsphere/assets/49528104/895a2984-bcdc-489e-b7f2-37d4a93d5951)\r\n\r\n```java\r\norg.springframework.beans.factory.BeanCreationException:\r\nError creating bean with name &#39;flywayInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed;\r\nnested exception is org.flywaydb.core.internal.exception.FlywaySqlException: Unable to check whether schema `store` exists\r\n\r\nCaused by: org.flywaydb.core.internal.exception.FlywaySqlException: Unable to check whether schema `store` exists\r\n\r\nCaused by: java.sql.SQLSyntaxErrorException: Table &#39;store.schemata&#39; doesn&#39;t exist\r\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n```\r\n\r\n\r\n####  SQL execution logs\r\n\r\n![image](https://github.com/apache/shardingsphere/assets/49528104/3c7f304e-426f-4558-817a-58fe2b80d2de)\r\n\r\n```sql\r\nLogic SQL: SELECT COUNT(1) FROM information_schema.schemata WHERE schema_name=? LIMIT 1\r\nActual SQL: store ::: SELECT COUNT(1) FROM schemata WHERE schema_name=? LIMIT 1 ::: [store]\r\n```\r\n\r\nshardingjdbc routes SQL statements to the `store` database.\r\nSo I added the information_schema to the data source, and configured it as follows:\r\n\r\n```yaml\r\n   datasource:\r\n      names: store, information_schema\r\n      ....\r\n      information_schema:\r\n        driver-class-name: com.mysql.cj.jdbc.Driver\r\n        type: com.alibaba.druid.pool.DruidDataSource\r\n        username: root\r\n        password: root\r\n        url: jdbc:mysql://pigx-mysql:3306/information_schema\r\n      ...\r\n    rules:\r\n      ...\r\n      sharding:\r\n        tables:\r\n            schemata:\r\n              actual-data-nodes: information_schema.schemata\r\n              table-strategy:\r\n                none:\r\n            tables:\r\n              actual-data-nodes: information_schema.tables\r\n              table-strategy:\r\n                none:\r\n     ...\r\n```\r\n\r\nThe following is the startup execution log:\r\n\r\n```java\r\nSql log:\r\nLogic SQL:    SELECT COUNT(1) FROM information_schema.schemata WHERE schema_name=? LIMIT 1\r\nActual SQL:  information_schema ::: SELECT COUNT(1) FROM schemata WHERE schema_name=? LIMIT 1 ::: [store]\r\n\r\nException information:\r\n\r\n2023-10-30 22:36:40.986  WARN 23832 --- [           main] s.c.a.AnnotationConfigApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flywayInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.apache.shardingsphere.infra.exception.SchemaNotExistedException: Schema &#39;store&#39; doesn&#39;t exist.\r\n....\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flywayInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.apache.shardingsphere.infra.exception.SchemaNotExistedException: Schema &#39;store&#39; doesn&#39;t exist.\r\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.30.jar:5.3.30]\r\n....\r\n\r\nCaused by: org.apache.shardingsphere.infra.exception.SchemaNotExistedException: Schema &#39;store&#39; doesn&#39;t exist.\r\n    at org.apache.shardingsphere.infra.binder.statement.dml.SelectStatementContext.getSchema(SelectStatementContext.java:138) ~[shardingsphere-infra-binder-5.1.1.jar:5.1.1]\r\n    at org.apache.shardingsphere.infra.binder.statement.dml.SelectStatementContext.&lt;init&gt;(SelectStatementContext.java:111) ~[shardingsphere-infra-binder-5.1.1.jar:5.1.1]\r\n    at org.apache.shardingsphere.infra.binder.SQLStatementContextFactory.getDMLStatementContext(SQLStatementContextFactory.java:146) ~[shardingsphere-infra-binder-5.1.1.jar:5.1.1]\r\n    at org.apache.shardingsphere.infra.binder.SQLStatementContextFactory.newInstance(SQLStatementContextFactory.java:129) ~[shardingsphere-infra-binder-5.1.1.jar:5.1.1]\r\n    at org.apache.shardingsphere.infra.binder.SQLStatementContextFactory.newInstance(SQLStatementContextFactory.java:114) ~[shardingsphere-infra-binder-5.1.1.jar:5.1.1]\r\n    at org.apache.shardingsphere.driver.jdbc.core.statement.ShardingSpherePreparedStatement.&lt;init&gt;(ShardingSpherePreparedStatement.java:181) ~[shardingsphere-jdbc-core-5.1.1.jar:5.1.1]\r\n    at org.apache.shardingsphere.driver.jdbc.core.statement.ShardingSpherePreparedStatement.&lt;init&gt;(ShardingSpherePreparedStatement.java:149) ~[shardingsphere-jdbc-core-5.1.1.jar:5.1.1]\r\n    at org.apache.shardingsphere.driver.jdbc.core.connection.ShardingSphereConnection.prepareStatement(ShardingSphereConnection.java:80) ~[shardingsphere-jdbc-core-5.1.1.jar:5.1.1]\r\n    at org.flywaydb.core.internal.jdbc.JdbcTemplate.prepareStatement(JdbcTemplate.java:300) ~[flyway-core-8.5.13.jar:na]\r\n    at org.flywaydb.core.internal.jdbc.JdbcTemplate.query(JdbcTemplate.java:339) ~[flyway-core-8.5.13.jar:na]\r\n....\r\n```\r\n\r\nshardingjdbc can&#39;t find the schema for the store, the break point is only the schema of the logic_db, please teach how to solve this problem\r\n\r\nThe Git project repository: https://github.com/8baba/flyway-shardingjdbc-test\r\n\r\nHow will I properly use Flyway to manage the database?\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77390141/shardingsphere-and-flyway-integration-startup-error-schema-xxxx-doesnt-exist","title":"Shardingsphere and Flyway integration startup error: Schema &#39;xxxx&#39; doesn&#39;t exist","body":"<p>I want to use Flyway to manage the database version, and I want to use the data source of shardingjdbc, but I encounter various problems when I start. How can I fix this problem?</p>\n<h3>Dependencies</h3>\n<p>shardingsphere-jdbc-core-spring-boot-starter:5.1.1\nflyway-core:8.5.13\nflyway-mysql:8.5.13\nmysql-connector-j:8.0.33\njdk8</p>\n<h3>application.yaml</h3>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  autoconfigure:\n    exclude: com.alibaba.druid.spring.boot.autoconfigure.DruidDataSourceAutoConfigure\n  shardingsphere:\n    enabled: true\n    datasource:\n      schema:\n        name: store\n      names: store\n      store:\n        driver-class-name: com.mysql.cj.jdbc.Driver\n        type: com.alibaba.druid.pool.DruidDataSource\n        username: root\n        password: root\n        url: jdbc:mysql://pigx-mysql:3306/store?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai\n    props:\n      sql-show: true\n    rules:\n      sharding:\n        sharding-algorithms:\n          table-inline:\n            props:\n              algorithm-expression: store_$-&gt;{tenant_id}\n            type: INLINE\n        tables:\n          version:\n            actual-data-nodes: store.t_version\n            table-strategy:\n              none:\n          store:\n            actual-data-nodes: store.store_1716476137853374465, store.store_1717116448820633602\n            table-strategy:\n              standard:\n                sharding-algorithm-name: table-inline\n                sharding-column: tenant_id\n  ## flyway ---------------------------------\n  flyway:\n    enabled: true\n    baseline-on-migrate: true\n    clean-disabled: false\n    out-of-order: true\n</code></pre>\n<p>The following exception is displayed when the startup is displayed:</p>\n<p><img src=\"https://github.com/apache/shardingsphere/assets/49528104/895a2984-bcdc-489e-b7f2-37d4a93d5951\" alt=\"Image\" /></p>\n<pre class=\"lang-java prettyprint-override\"><code>org.springframework.beans.factory.BeanCreationException:\nError creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed;\nnested exception is org.flywaydb.core.internal.exception.FlywaySqlException: Unable to check whether schema `store` exists\n\nCaused by: org.flywaydb.core.internal.exception.FlywaySqlException: Unable to check whether schema `store` exists\n\nCaused by: java.sql.SQLSyntaxErrorException: Table 'store.schemata' doesn't exist\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n</code></pre>\n<h4>SQL execution logs</h4>\n<p><img src=\"https://github.com/apache/shardingsphere/assets/49528104/3c7f304e-426f-4558-817a-58fe2b80d2de\" alt=\"image\" /></p>\n<pre class=\"lang-sql prettyprint-override\"><code>Logic SQL: SELECT COUNT(1) FROM information_schema.schemata WHERE schema_name=? LIMIT 1\nActual SQL: store ::: SELECT COUNT(1) FROM schemata WHERE schema_name=? LIMIT 1 ::: [store]\n</code></pre>\n<p>shardingjdbc routes SQL statements to the <code>store</code> database.\nSo I added the information_schema to the data source, and configured it as follows:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>   datasource:\n      names: store, information_schema\n      ....\n      information_schema:\n        driver-class-name: com.mysql.cj.jdbc.Driver\n        type: com.alibaba.druid.pool.DruidDataSource\n        username: root\n        password: root\n        url: jdbc:mysql://pigx-mysql:3306/information_schema\n      ...\n    rules:\n      ...\n      sharding:\n        tables:\n            schemata:\n              actual-data-nodes: information_schema.schemata\n              table-strategy:\n                none:\n            tables:\n              actual-data-nodes: information_schema.tables\n              table-strategy:\n                none:\n     ...\n</code></pre>\n<p>The following is the startup execution log:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Sql log:\nLogic SQL:    SELECT COUNT(1) FROM information_schema.schemata WHERE schema_name=? LIMIT 1\nActual SQL:  information_schema ::: SELECT COUNT(1) FROM schemata WHERE schema_name=? LIMIT 1 ::: [store]\n\nException information:\n\n2023-10-30 22:36:40.986  WARN 23832 --- [           main] s.c.a.AnnotationConfigApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.apache.shardingsphere.infra.exception.SchemaNotExistedException: Schema 'store' doesn't exist.\n....\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.apache.shardingsphere.infra.exception.SchemaNotExistedException: Schema 'store' doesn't exist.\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.30.jar:5.3.30]\n....\n\nCaused by: org.apache.shardingsphere.infra.exception.SchemaNotExistedException: Schema 'store' doesn't exist.\n    at org.apache.shardingsphere.infra.binder.statement.dml.SelectStatementContext.getSchema(SelectStatementContext.java:138) ~[shardingsphere-infra-binder-5.1.1.jar:5.1.1]\n    at org.apache.shardingsphere.infra.binder.statement.dml.SelectStatementContext.&lt;init&gt;(SelectStatementContext.java:111) ~[shardingsphere-infra-binder-5.1.1.jar:5.1.1]\n    at org.apache.shardingsphere.infra.binder.SQLStatementContextFactory.getDMLStatementContext(SQLStatementContextFactory.java:146) ~[shardingsphere-infra-binder-5.1.1.jar:5.1.1]\n    at org.apache.shardingsphere.infra.binder.SQLStatementContextFactory.newInstance(SQLStatementContextFactory.java:129) ~[shardingsphere-infra-binder-5.1.1.jar:5.1.1]\n    at org.apache.shardingsphere.infra.binder.SQLStatementContextFactory.newInstance(SQLStatementContextFactory.java:114) ~[shardingsphere-infra-binder-5.1.1.jar:5.1.1]\n    at org.apache.shardingsphere.driver.jdbc.core.statement.ShardingSpherePreparedStatement.&lt;init&gt;(ShardingSpherePreparedStatement.java:181) ~[shardingsphere-jdbc-core-5.1.1.jar:5.1.1]\n    at org.apache.shardingsphere.driver.jdbc.core.statement.ShardingSpherePreparedStatement.&lt;init&gt;(ShardingSpherePreparedStatement.java:149) ~[shardingsphere-jdbc-core-5.1.1.jar:5.1.1]\n    at org.apache.shardingsphere.driver.jdbc.core.connection.ShardingSphereConnection.prepareStatement(ShardingSphereConnection.java:80) ~[shardingsphere-jdbc-core-5.1.1.jar:5.1.1]\n    at org.flywaydb.core.internal.jdbc.JdbcTemplate.prepareStatement(JdbcTemplate.java:300) ~[flyway-core-8.5.13.jar:na]\n    at org.flywaydb.core.internal.jdbc.JdbcTemplate.query(JdbcTemplate.java:339) ~[flyway-core-8.5.13.jar:na]\n....\n</code></pre>\n<p>shardingjdbc can't find the schema for the store, the break point is only the schema of the logic_db, please teach how to solve this problem</p>\n<p>The Git project repository: <a href=\"https://github.com/8baba/flyway-shardingjdbc-test\" rel=\"nofollow noreferrer\">https://github.com/8baba/flyway-shardingjdbc-test</a></p>\n<p>How will I properly use Flyway to manage the database?</p>\n"},{"tags":["java","spring-boot","error-handling","circuit-breaker","resilience4j"],"comments":[{"score":0,"post_type":"question","creation_date":1695111601,"post_id":77119821,"comment_id":135977016,"body_markdown":"According to my understanding the `fallbackMethod` is called when the circuit transition to Open. Did you try to run your app without using `fallbackCircuitBreaker`?","link":"https://stackoverflow.com/questions/77119821/cant-use-a-controlleradvice-with-exceptionhandlers-while-using-circuit-breaker#comment135977016_77119821","body":"According to my understanding the <code>fallbackMethod</code> is called when the circuit transition to Open. Did you try to run your app without using <code>fallbackCircuitBreaker</code>?"},{"score":0,"post_type":"question","creation_date":1695258367,"post_id":77119821,"comment_id":136001644,"body_markdown":"@PeterCsala I want that to happen. To clarify, what I want is for personalized exceptions to be thrown by the service, be ignored by anything resilience4j related and get caught by my exception handlers. But, at the same time, I want other exceptions, meaning non-personalized and not expected ones, to be caught by the circuit breaker, to make an adecuate response.","link":"https://stackoverflow.com/questions/77119821/cant-use-a-controlleradvice-with-exceptionhandlers-while-using-circuit-breaker#comment136001644_77119821","body":"@PeterCsala I want that to happen. To clarify, what I want is for personalized exceptions to be thrown by the service, be ignored by anything resilience4j related and get caught by my exception handlers. But, at the same time, I want other exceptions, meaning non-personalized and not expected ones, to be caught by the circuit breaker, to make an adecuate response."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1695260307,"creation_date":1695260307,"answer_id":77146735,"question_id":77119821,"body_markdown":"**Quick note:** the annotations are executed in the inverse order that they appear, meaning `@RateLimiter`, then `@Retry`, then `@CircuitBreaker`. The circuit breaker, therefore, is the last failsafe to catch any unexpected exceptions. \r\n\r\nHi, I&#39;m the one that asked the question, and I have found a temporary (and rather sus in my opinion) solution.\r\n\r\nIt goes like this:\r\n\r\n```java\r\npublic ResponseEntity&lt;Object&gt; fallbackCircuitBreaker(Throwable exception) throws Throwable {\r\n        if(!(exception instanceof IErrorException)) {\r\n            return this.clienteService.fallbackCircuitBreaker(exception);\r\n        } else {\r\n            circuitBreakerRegistry.circuitBreaker(&quot;clientCircuitBreaker&quot;).transitionToClosedState();\r\n            throw exception;\r\n        }\r\n    }\r\n```\r\nLike I said, it solves it because, even though the circuit breaker still catches it, if it&#39;s a personalized exception, it re-throws it, and it&#39;s then caught by the exception handlers. The problem is that it *does* still trigger the circuit breaker, so, if it was a personalized exception, I also force a transition to closed state to &quot;make it so nothing happened&quot;. Suspicious, as I said before.\r\n\r\nSomething of note is that I also have a `@Retry` like it shows in my controller, so the above solution worked for the circuit breaker, but it still retried a couple of times when throwing a personalized exception. To solve this, I ventured to use `.ignoreExceptions(IErrorException.class)` in the retry configuration, which didn&#39;t work in the circuit breaker configuration last time I chequed. But surprisingly, it worked.\r\n\r\nThus, I reached the intended behaviour. It works just like catching my personalized exceptions in the service and returning a proper reponse, just that it&#39;s better *distributed* now. However, I feel like it&#39;s not the best option. So I ask: does something like `.ignoreExceptions(IErrorException.class)` work for you in your circuit breaker configuration?\r\n\r\nHere are my dependencies and configs (relevant to this):\r\n\r\n```java\r\n@Configuration\r\npublic class CircuitBreakerConfiguration {\r\n\r\n    @Primary\r\n    @Bean\r\n    public CircuitBreakerProperties circuitBreakerProperties() {\r\n        CircuitBreakerProperties circuitBreakerProperties = new CircuitBreakerProperties();\r\n        circuitBreakerProperties.setCircuitBreakerAspectOrder(1);\r\n        return circuitBreakerProperties;\r\n    }\r\n\r\n    @Bean\r\n    public CircuitBreakerRegistry circuitBreakerRegistry() {\r\n        CircuitBreakerConfig circuitBreakerConfig = CircuitBreakerConfig.custom()\r\n            .slidingWindowType(CircuitBreakerConfig.SlidingWindowType.COUNT_BASED)\r\n            .slidingWindowSize(5)\r\n            .failureRateThreshold(40)\r\n            .slowCallRateThreshold(40)\r\n            .permittedNumberOfCallsInHalfOpenState(1)\r\n            .maxWaitDurationInHalfOpenState(Duration.ofSeconds(10))\r\n            .waitDurationInOpenState(Duration.ofSeconds(10))\r\n            .writableStackTraceEnabled(true)\r\n            .minimumNumberOfCalls(5)\r\n            .automaticTransitionFromOpenToHalfOpenEnabled(true)\r\n                .ignoreExceptions(IErrorException.class) // last time I chequed, it did nothing\r\n            .build();\r\n   \r\n        return CircuitBreakerRegistry.of(circuitBreakerConfig);\r\n    }\r\n\r\n}\r\n```\r\n```java\r\n@Configuration\r\npublic class RetryConfiguration {\r\n\r\n    @Primary\r\n    @Bean\r\n    public RetryProperties retryProperties() {\r\n        RetryProperties retryProperties = new RetryProperties();\r\n        retryProperties.setRetryAspectOrder(2);\r\n        return retryProperties;\r\n    }\r\n\r\n    @Bean\r\n    public RetryRegistry retryRegistry() {\r\n        RetryConfig retryConfig = RetryConfig.custom()\r\n            .maxAttempts(3)\r\n            .waitDuration(Duration.ofSeconds(1))\r\n                .ignoreExceptions(IErrorException.class) // works\r\n            .build();\r\n\r\n        return RetryRegistry.of(retryConfig);\r\n    }\r\n\r\n}\r\n```\r\n```xml\r\n\r\n      &lt;!-- ... --&gt;\r\n      &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.2&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n      &lt;/parent&gt;\r\n      &lt;!-- ... --&gt;\r\n\r\n      &lt;dependencies&gt;\r\n\r\n        &lt;!--Resilience4j (Circuit Breaker, Rate Limiter y Retry)--&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.github.resilience4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;resilience4j-spring-boot3&lt;/artifactId&gt;\r\n            &lt;version&gt;2.1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- ... --&gt;\r\n\r\n      &lt;dependencies&gt;\r\n\r\n      &lt;!-- ... --&gt;\r\n```","link":"https://stackoverflow.com/questions/77119821/cant-use-a-controlleradvice-with-exceptionhandlers-while-using-circuit-breaker/77146735#77146735","title":"Can&#39;t use a ControllerAdvice with ExceptionHandlers while using Circuit Breaker from resilience4j","body":"<p><strong>Quick note:</strong> the annotations are executed in the inverse order that they appear, meaning <code>@RateLimiter</code>, then <code>@Retry</code>, then <code>@CircuitBreaker</code>. The circuit breaker, therefore, is the last failsafe to catch any unexpected exceptions.</p>\n<p>Hi, I'm the one that asked the question, and I have found a temporary (and rather sus in my opinion) solution.</p>\n<p>It goes like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ResponseEntity&lt;Object&gt; fallbackCircuitBreaker(Throwable exception) throws Throwable {\n        if(!(exception instanceof IErrorException)) {\n            return this.clienteService.fallbackCircuitBreaker(exception);\n        } else {\n            circuitBreakerRegistry.circuitBreaker(&quot;clientCircuitBreaker&quot;).transitionToClosedState();\n            throw exception;\n        }\n    }\n</code></pre>\n<p>Like I said, it solves it because, even though the circuit breaker still catches it, if it's a personalized exception, it re-throws it, and it's then caught by the exception handlers. The problem is that it <em>does</em> still trigger the circuit breaker, so, if it was a personalized exception, I also force a transition to closed state to &quot;make it so nothing happened&quot;. Suspicious, as I said before.</p>\n<p>Something of note is that I also have a <code>@Retry</code> like it shows in my controller, so the above solution worked for the circuit breaker, but it still retried a couple of times when throwing a personalized exception. To solve this, I ventured to use <code>.ignoreExceptions(IErrorException.class)</code> in the retry configuration, which didn't work in the circuit breaker configuration last time I chequed. But surprisingly, it worked.</p>\n<p>Thus, I reached the intended behaviour. It works just like catching my personalized exceptions in the service and returning a proper reponse, just that it's better <em>distributed</em> now. However, I feel like it's not the best option. So I ask: does something like <code>.ignoreExceptions(IErrorException.class)</code> work for you in your circuit breaker configuration?</p>\n<p>Here are my dependencies and configs (relevant to this):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class CircuitBreakerConfiguration {\n\n    @Primary\n    @Bean\n    public CircuitBreakerProperties circuitBreakerProperties() {\n        CircuitBreakerProperties circuitBreakerProperties = new CircuitBreakerProperties();\n        circuitBreakerProperties.setCircuitBreakerAspectOrder(1);\n        return circuitBreakerProperties;\n    }\n\n    @Bean\n    public CircuitBreakerRegistry circuitBreakerRegistry() {\n        CircuitBreakerConfig circuitBreakerConfig = CircuitBreakerConfig.custom()\n            .slidingWindowType(CircuitBreakerConfig.SlidingWindowType.COUNT_BASED)\n            .slidingWindowSize(5)\n            .failureRateThreshold(40)\n            .slowCallRateThreshold(40)\n            .permittedNumberOfCallsInHalfOpenState(1)\n            .maxWaitDurationInHalfOpenState(Duration.ofSeconds(10))\n            .waitDurationInOpenState(Duration.ofSeconds(10))\n            .writableStackTraceEnabled(true)\n            .minimumNumberOfCalls(5)\n            .automaticTransitionFromOpenToHalfOpenEnabled(true)\n                .ignoreExceptions(IErrorException.class) // last time I chequed, it did nothing\n            .build();\n   \n        return CircuitBreakerRegistry.of(circuitBreakerConfig);\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class RetryConfiguration {\n\n    @Primary\n    @Bean\n    public RetryProperties retryProperties() {\n        RetryProperties retryProperties = new RetryProperties();\n        retryProperties.setRetryAspectOrder(2);\n        return retryProperties;\n    }\n\n    @Bean\n    public RetryRegistry retryRegistry() {\n        RetryConfig retryConfig = RetryConfig.custom()\n            .maxAttempts(3)\n            .waitDuration(Duration.ofSeconds(1))\n                .ignoreExceptions(IErrorException.class) // works\n            .build();\n\n        return RetryRegistry.of(retryConfig);\n    }\n\n}\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>\n      &lt;!-- ... --&gt;\n      &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n      &lt;/parent&gt;\n      &lt;!-- ... --&gt;\n\n      &lt;dependencies&gt;\n\n        &lt;!--Resilience4j (Circuit Breaker, Rate Limiter y Retry)--&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.resilience4j&lt;/groupId&gt;\n            &lt;artifactId&gt;resilience4j-spring-boot3&lt;/artifactId&gt;\n            &lt;version&gt;2.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- ... --&gt;\n\n      &lt;dependencies&gt;\n\n      &lt;!-- ... --&gt;\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1696367260,"creation_date":1696367260,"answer_id":77225521,"question_id":77119821,"body_markdown":"Update: this is my solution for now\r\n\r\n```java\r\n@RequestMapping(&quot;/api/${env.version}/clients&quot;)\r\n@RestController\r\npublic class ClientController implements IClientController {\r\n\r\n    private final ClientService clientService;\r\n    private final CircuitBreakerRegistry circuitBreakerRegistry;\r\n\r\n    @Autowired\r\n    public ClientController(ClientService clientService, CircuitBreakerRegistry circuitBreakerRegistry) {\r\n        this.clientService = clientService;\r\n        this.circuitBreakerRegistry = circuitBreakerRegistry;\r\n    }\r\n\r\n    @CircuitBreaker(name = &quot;clientCircuitBreaker&quot;, fallbackMethod = &quot;fallbackCircuitBreaker&quot;)\r\n    @Retry(name = &quot;clientRetry&quot;)\r\n    @RateLimiter(name = &quot;clientRateLimiter&quot;, fallbackMethod = &quot;fallbackRateLimiter&quot;)\r\n    @GetMapping\r\n    @ResponseStatus(HttpStatus.OK)\r\n    @ResponseBody\r\n    public ClientModel getClient(@RequestParam long doc) {\r\n        return clientService.getClient(doc);\r\n    }\r\n\r\n    // fallbacks\r\n\r\n    public ClientModel fallbackCircuitBreaker(long doc, IErrorException exception) {\r\n        circuitBreakerRegistry.circuitBreaker(&quot;clientCircuitBreaker&quot;).transitionToClosedState();\r\n        throw exception;\r\n    }\r\n\r\n    public ClientModel fallbackCircuitBreaker(long doc, Throwable exception) {\r\n        throw new CircuitBreakerException();\r\n    }\r\n\r\n    public ClientModel fallbackRateLimiter(long doc, RequestNotPermitted exception) {\r\n        throw new RateLimiterException();\r\n    }\r\n\r\n}\r\n```\r\nThis is the best I can get without being able to use `ignoreExceptions`. About that, I confirmed that `ignoreExceptions` for `Retry` works, but `ignoreExceptions` for `Circuit Breaker` doesn&#39;t. \r\n\r\nI thought that the fact that I&#39;m using a fallback method for `Circuit Breaker` and not for `Retry` could have something to do with it (maybe ???). This solution and what I just said come from [here][1]. Although, it&#39;s not ideal, because what I&#39;m doing when catching the `IErrorException exception` is just throwing it again and just **ignoring** the intervention of the `Circuit Breaker`.\r\n\r\n\r\n  [1]: https://github.com/resilience4j/resilience4j/issues/1176","link":"https://stackoverflow.com/questions/77119821/cant-use-a-controlleradvice-with-exceptionhandlers-while-using-circuit-breaker/77225521#77225521","title":"Can&#39;t use a ControllerAdvice with ExceptionHandlers while using Circuit Breaker from resilience4j","body":"<p>Update: this is my solution for now</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(&quot;/api/${env.version}/clients&quot;)\n@RestController\npublic class ClientController implements IClientController {\n\n    private final ClientService clientService;\n    private final CircuitBreakerRegistry circuitBreakerRegistry;\n\n    @Autowired\n    public ClientController(ClientService clientService, CircuitBreakerRegistry circuitBreakerRegistry) {\n        this.clientService = clientService;\n        this.circuitBreakerRegistry = circuitBreakerRegistry;\n    }\n\n    @CircuitBreaker(name = &quot;clientCircuitBreaker&quot;, fallbackMethod = &quot;fallbackCircuitBreaker&quot;)\n    @Retry(name = &quot;clientRetry&quot;)\n    @RateLimiter(name = &quot;clientRateLimiter&quot;, fallbackMethod = &quot;fallbackRateLimiter&quot;)\n    @GetMapping\n    @ResponseStatus(HttpStatus.OK)\n    @ResponseBody\n    public ClientModel getClient(@RequestParam long doc) {\n        return clientService.getClient(doc);\n    }\n\n    // fallbacks\n\n    public ClientModel fallbackCircuitBreaker(long doc, IErrorException exception) {\n        circuitBreakerRegistry.circuitBreaker(&quot;clientCircuitBreaker&quot;).transitionToClosedState();\n        throw exception;\n    }\n\n    public ClientModel fallbackCircuitBreaker(long doc, Throwable exception) {\n        throw new CircuitBreakerException();\n    }\n\n    public ClientModel fallbackRateLimiter(long doc, RequestNotPermitted exception) {\n        throw new RateLimiterException();\n    }\n\n}\n</code></pre>\n<p>This is the best I can get without being able to use <code>ignoreExceptions</code>. About that, I confirmed that <code>ignoreExceptions</code> for <code>Retry</code> works, but <code>ignoreExceptions</code> for <code>Circuit Breaker</code> doesn't.</p>\n<p>I thought that the fact that I'm using a fallback method for <code>Circuit Breaker</code> and not for <code>Retry</code> could have something to do with it (maybe ???). This solution and what I just said come from <a href=\"https://github.com/resilience4j/resilience4j/issues/1176\" rel=\"nofollow noreferrer\">here</a>. Although, it's not ideal, because what I'm doing when catching the <code>IErrorException exception</code> is just throwing it again and just <strong>ignoring</strong> the intervention of the <code>Circuit Breaker</code>.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701565607,"creation_date":1701565607,"answer_id":77592730,"question_id":77119821,"body_markdown":"Update: I&#39;ve found a better solution.\r\n\r\nSo, it&#39;s been a while. I&#39;ve been running with the above answer, but I&#39;ve come to understand that it&#39;s a bit lacking. The reason is that, ***if you now need to ignore some new exceptions, that aren&#39;t a subclass of `IErrorException` (example: internal database related exceptions), you have to add a new method for each one, which is trash.***\r\n\r\nSo I was thinking about how this normally works (when I don&#39;t add any fallback method and I configure the exceptions to be ignored in the `application.yml/properties`). In that case you just add a list of exceptions you want to ignore and that&#39;s that. So my new solution follows that idea, though to be honest I still feel like it could be improved.\r\n\r\n```java\r\n@RequestMapping(&quot;/api/${env.version}/clients&quot;)\r\n@RestController\r\npublic class ClientController implements IClientController {\r\n\r\n    private final ClientService clientService;\r\n    private final CircuitBreakerRegistry circuitBreakerRegistry;\r\n\r\n    @Autowired\r\n    public ClientController(ClientService clientService, CircuitBreakerRegistry circuitBreakerRegistry) {\r\n        this.clientService = clientService;\r\n        this.circuitBreakerRegistry = circuitBreakerRegistry;\r\n    }\r\n\r\n    @CircuitBreaker(name = &quot;circuitBreaker&quot;, fallbackMethod = &quot;fallbackCircuitBreaker&quot;)\r\n    @Retry(name = &quot;retry&quot;)\r\n    @RateLimiter(name = &quot;rateLimiter&quot;, fallbackMethod = &quot;fallbackRateLimiter&quot;)\r\n    @GetMapping\r\n    @ResponseStatus(HttpStatus.OK)\r\n    @ResponseBody\r\n    public ClientModel getClient(@RequestParam long doc) {\r\n        return clientService.getClient(doc);\r\n    }\r\n\r\n    // fallbacks\r\n\r\n    public ResponseModel fallbackCircuitBreaker(long doc, Exception exception) throws Exception {\r\n        ArrayList&lt;Class&gt; ignoredExceptions = new ArrayList&lt;&gt;();\r\n        ignoredExceptions.add(DataAccessException.class);\r\n        ignoredExceptions.add(IErrorException.class);\r\n        ignoredExceptions.add(RateLimiterException.class);\r\n\r\n        if (ignoredExceptions.stream().anyMatch(ex -&gt; ex.isAssignableFrom(exception.getClass()))) {\r\n            circuitBreakerRegistry.circuitBreaker(&quot;circuitBreaker&quot;).transitionToClosedState();\r\n            throw exception;\r\n        }\r\n\r\n        throw new CircuitBreakerException();\r\n    }\r\n\r\n    public ClientModel fallbackRateLimiter(long doc, RequestNotPermitted exception) {\r\n        throw new RateLimiterException();\r\n    }\r\n\r\n}\r\n```\r\n\r\nThus, if you now need to ignore a new exception, you just copy the last `ignoredExceptions.add(...)` line and just change the exception to the one you want. Just like that it works.\r\n\r\nLike I also said, I think there&#39;s still room for improvement here, like maybe using the properties from `appliaction.yml/properties` that are normally used to ignore exceptions for the circuit breaker (that don&#39;t work here, because I&#39;m setting fallbaks) by catching them with `@Value` as a list inside the controller or something, thus never even needing to change the code again, just the `appliaction.yml/properties`. But we&#39;ll see.\r\n\r\nFor just a few exceptions, the previous answer was good enough, but for more (3 or more in my opinion), I think this is better.","link":"https://stackoverflow.com/questions/77119821/cant-use-a-controlleradvice-with-exceptionhandlers-while-using-circuit-breaker/77592730#77592730","title":"Can&#39;t use a ControllerAdvice with ExceptionHandlers while using Circuit Breaker from resilience4j","body":"<p>Update: I've found a better solution.</p>\n<p>So, it's been a while. I've been running with the above answer, but I've come to understand that it's a bit lacking. The reason is that, <em><strong>if you now need to ignore some new exceptions, that aren't a subclass of <code>IErrorException</code> (example: internal database related exceptions), you have to add a new method for each one, which is trash.</strong></em></p>\n<p>So I was thinking about how this normally works (when I don't add any fallback method and I configure the exceptions to be ignored in the <code>application.yml/properties</code>). In that case you just add a list of exceptions you want to ignore and that's that. So my new solution follows that idea, though to be honest I still feel like it could be improved.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(&quot;/api/${env.version}/clients&quot;)\n@RestController\npublic class ClientController implements IClientController {\n\n    private final ClientService clientService;\n    private final CircuitBreakerRegistry circuitBreakerRegistry;\n\n    @Autowired\n    public ClientController(ClientService clientService, CircuitBreakerRegistry circuitBreakerRegistry) {\n        this.clientService = clientService;\n        this.circuitBreakerRegistry = circuitBreakerRegistry;\n    }\n\n    @CircuitBreaker(name = &quot;circuitBreaker&quot;, fallbackMethod = &quot;fallbackCircuitBreaker&quot;)\n    @Retry(name = &quot;retry&quot;)\n    @RateLimiter(name = &quot;rateLimiter&quot;, fallbackMethod = &quot;fallbackRateLimiter&quot;)\n    @GetMapping\n    @ResponseStatus(HttpStatus.OK)\n    @ResponseBody\n    public ClientModel getClient(@RequestParam long doc) {\n        return clientService.getClient(doc);\n    }\n\n    // fallbacks\n\n    public ResponseModel fallbackCircuitBreaker(long doc, Exception exception) throws Exception {\n        ArrayList&lt;Class&gt; ignoredExceptions = new ArrayList&lt;&gt;();\n        ignoredExceptions.add(DataAccessException.class);\n        ignoredExceptions.add(IErrorException.class);\n        ignoredExceptions.add(RateLimiterException.class);\n\n        if (ignoredExceptions.stream().anyMatch(ex -&gt; ex.isAssignableFrom(exception.getClass()))) {\n            circuitBreakerRegistry.circuitBreaker(&quot;circuitBreaker&quot;).transitionToClosedState();\n            throw exception;\n        }\n\n        throw new CircuitBreakerException();\n    }\n\n    public ClientModel fallbackRateLimiter(long doc, RequestNotPermitted exception) {\n        throw new RateLimiterException();\n    }\n\n}\n</code></pre>\n<p>Thus, if you now need to ignore a new exception, you just copy the last <code>ignoredExceptions.add(...)</code> line and just change the exception to the one you want. Just like that it works.</p>\n<p>Like I also said, I think there's still room for improvement here, like maybe using the properties from <code>appliaction.yml/properties</code> that are normally used to ignore exceptions for the circuit breaker (that don't work here, because I'm setting fallbaks) by catching them with <code>@Value</code> as a list inside the controller or something, thus never even needing to change the code again, just the <code>appliaction.yml/properties</code>. But we'll see.</p>\n<p>For just a few exceptions, the previous answer was good enough, but for more (3 or more in my opinion), I think this is better.</p>\n"}],"comment_count":2,"is_answered":true,"view_count":204,"answer_count":3,"score":1,"last_activity_date":1701565607,"creation_date":1694902917,"last_edit_date":1695111268,"question_id":77119821,"body_markdown":"So, I was doing a simple spring boot project using resilience4j&#39;s tools, like `@RateLimiter`, `@CircuitBreaker` and `@Retry`. All was working fine, even with personalized exceptions, because they were caught within my service.\r\n\r\nNow I want my service to simply throw exceptions, and manage the handling in a `@RestControllerAdvice` with `@ExceptionHandler`(s), instead of catching the exceptions and managing them within the service, as I see many people do it like that. It also makes sense, because that way, the service only does strictly what it needs to do, and another class can manage the exceptions.\r\n\r\nThe problem is that, from what I&#39;ve seen (not much), all these people that do that don&#39;t use `@CircuitBreaker` too. To be more specific, the problem is that the exceptions are caught first by the Circuit Breaker&#39;s fallback method instead of the Exception Handlers.\r\n\r\n\r\nHere&#39;s some code:\r\n\r\n\r\n    @CircuitBreaker(name = &quot;clientCircuitBreaker&quot;, fallbackMethod = &quot;fallbackCircuitBreaker&quot;)\r\n    @Retry(name=&quot;clientRetry&quot;)\r\n    @RateLimiter(name=&quot;clientRateLimiter&quot;, fallbackMethod = &quot;fallbackRateLimiter&quot;)\r\n    @GetMapping\r\n    public ResponseEntity&lt;?&gt; getClient(@RequestParam long doc) {\r\n        return this.clientService.getClient(doc);\r\n    }\r\n\r\n    public ResponseEntity&lt;Object&gt; fallbackCircuitBreaker(Throwable exception) {\r\n        return this.clientService.fallbackCircuitBreaker(exception);\r\n    }\r\n\r\n    //...\r\n\r\n    @RestControllerAdvice\r\n    public class GlobalExceptionHandler {\r\n\r\n        @ExceptionHandler(IErrorException.class)\r\n        public ResponseEntity&lt;ErrorModel&gt; personalizedException(IErrorException ex) {\r\n            return ResponseEntity.status(404).body(ex.getErrorModel());\r\n        }\r\n\r\n        //...\r\n    }\r\n\r\n\r\nI&#39;ve also tried changing the type of the `@ExceptionHandler` to a more specific one (and make it throw that exception), because that right there is an interface/abstract class, but nothing. I also tried using the configuration `ignoreExceptions(..)` for the Circuit Breaker in a java configuration file, ignoring &#39;IErrorException.class&#39;, but nothing.\r\n\r\nAny idea? Or should I give up this line of thought, and just manage exceptions inside of the service?","link":"https://stackoverflow.com/questions/77119821/cant-use-a-controlleradvice-with-exceptionhandlers-while-using-circuit-breaker","title":"Can&#39;t use a ControllerAdvice with ExceptionHandlers while using Circuit Breaker from resilience4j","body":"<p>So, I was doing a simple spring boot project using resilience4j's tools, like <code>@RateLimiter</code>, <code>@CircuitBreaker</code> and <code>@Retry</code>. All was working fine, even with personalized exceptions, because they were caught within my service.</p>\n<p>Now I want my service to simply throw exceptions, and manage the handling in a <code>@RestControllerAdvice</code> with <code>@ExceptionHandler</code>(s), instead of catching the exceptions and managing them within the service, as I see many people do it like that. It also makes sense, because that way, the service only does strictly what it needs to do, and another class can manage the exceptions.</p>\n<p>The problem is that, from what I've seen (not much), all these people that do that don't use <code>@CircuitBreaker</code> too. To be more specific, the problem is that the exceptions are caught first by the Circuit Breaker's fallback method instead of the Exception Handlers.</p>\n<p>Here's some code:</p>\n<pre><code>@CircuitBreaker(name = &quot;clientCircuitBreaker&quot;, fallbackMethod = &quot;fallbackCircuitBreaker&quot;)\n@Retry(name=&quot;clientRetry&quot;)\n@RateLimiter(name=&quot;clientRateLimiter&quot;, fallbackMethod = &quot;fallbackRateLimiter&quot;)\n@GetMapping\npublic ResponseEntity&lt;?&gt; getClient(@RequestParam long doc) {\n    return this.clientService.getClient(doc);\n}\n\npublic ResponseEntity&lt;Object&gt; fallbackCircuitBreaker(Throwable exception) {\n    return this.clientService.fallbackCircuitBreaker(exception);\n}\n\n//...\n\n@RestControllerAdvice\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(IErrorException.class)\n    public ResponseEntity&lt;ErrorModel&gt; personalizedException(IErrorException ex) {\n        return ResponseEntity.status(404).body(ex.getErrorModel());\n    }\n\n    //...\n}\n</code></pre>\n<p>I've also tried changing the type of the <code>@ExceptionHandler</code> to a more specific one (and make it throw that exception), because that right there is an interface/abstract class, but nothing. I also tried using the configuration <code>ignoreExceptions(..)</code> for the Circuit Breaker in a java configuration file, ignoring 'IErrorException.class', but nothing.</p>\n<p>Any idea? Or should I give up this line of thought, and just manage exceptions inside of the service?</p>\n"},{"tags":["java","spring","constructor","abstract-class","super"],"comments":[{"score":1,"post_type":"question","creation_date":1697683508,"post_id":77320448,"comment_id":136311578,"body_markdown":"Could you change it so that the `ErrorModel` is lazily created by its getter?","link":"https://stackoverflow.com/questions/77320448/java-need-to-initialize-variable-before-constructor-calls-super#comment136311578_77320448","body":"Could you change it so that the <code>ErrorModel</code> is lazily created by its getter?"},{"score":0,"post_type":"question","creation_date":1697693920,"post_id":77320448,"comment_id":136312450,"body_markdown":"Two ideas. (1) If possible, place the two fields in the superclass (or in an intermediate class for those exceptions where it makes sense to have them) and initialize them through the `super` call: `super(Yml.get(&quot;cod&quot;), Yml.get(&quot;desc&quot;), errores);`, etc. (2) Assuming that `get` is a static method in the `Yml` class, would it help making the fields `codigo` and `description` static in the custom exception class (like `ClienteSinMorasException`) too?","link":"https://stackoverflow.com/questions/77320448/java-need-to-initialize-variable-before-constructor-calls-super#comment136312450_77320448","body":"Two ideas. (1) If possible, place the two fields in the superclass (or in an intermediate class for those exceptions where it makes sense to have them) and initialize them through the <code>super</code> call: <code>super(Yml.get(&quot;cod&quot;), Yml.get(&quot;desc&quot;), errores);</code>, etc. (2) Assuming that <code>get</code> is a static method in the <code>Yml</code> class, would it help making the fields <code>codigo</code> and <code>description</code> static in the custom exception class (like <code>ClienteSinMorasException</code>) too?"},{"score":0,"post_type":"question","creation_date":1697694451,"post_id":77320448,"comment_id":136312497,"body_markdown":"As an aside, assuming you don’t need to modify the error model after it has been created, declare `private final List&lt;Map&lt;String, String&gt;&gt; errores;` and similar wherever it as passed as parameter. May also make a defensive copy in the constructor so any subsequent modifications the caller may make don’t harm you.","link":"https://stackoverflow.com/questions/77320448/java-need-to-initialize-variable-before-constructor-calls-super#comment136312497_77320448","body":"As an aside, assuming you don’t need to modify the error model after it has been created, declare <code>private final List&lt;Map&lt;String, String&gt;&gt; errores;</code> and similar wherever it as passed as parameter. May also make a defensive copy in the constructor so any subsequent modifications the caller may make don’t harm you."},{"score":2,"post_type":"question","creation_date":1697695124,"post_id":77320448,"comment_id":136312561,"body_markdown":"Under all circumstances calling overridable methods from a constructor is a bad and discouraged practice exactly because it easily leads to errors like the one you have. So you should change the design to avoid doing that.","link":"https://stackoverflow.com/questions/77320448/java-need-to-initialize-variable-before-constructor-calls-super#comment136312561_77320448","body":"Under all circumstances calling overridable methods from a constructor is a bad and discouraged practice exactly because it easily leads to errors like the one you have. So you should change the design to avoid doing that."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1697709184,"post_id":77320693,"comment_id":136315030,"body_markdown":"The base class `IErrorException` has a field `errorModel` which is initialized by its constructor by calling the overridden getters. Are you saying the OP should also get rid of that?","link":"https://stackoverflow.com/questions/77320448/java-need-to-initialize-variable-before-constructor-calls-super/77320693#comment136315030_77320693","body":"The base class <code>IErrorException</code> has a field <code>errorModel</code> which is initialized by its constructor by calling the overridden getters. Are you saying the OP should also get rid of that?"},{"score":0,"post_type":"answer","creation_date":1697710520,"post_id":77320693,"comment_id":136315282,"body_markdown":"@k314159 I didn&#39;t and I have no idea why you would think this answer suggests this.","link":"https://stackoverflow.com/questions/77320448/java-need-to-initialize-variable-before-constructor-calls-super/77320693#comment136315282_77320693","body":"@k314159 I didn&#39;t and I have no idea why you would think this answer suggests this."},{"score":0,"post_type":"answer","creation_date":1697711041,"post_id":77320693,"comment_id":136315361,"body_markdown":"You said &quot;Hence, get rid of the fields entirely.&quot; But `errorModel` _is_ a field.","link":"https://stackoverflow.com/questions/77320448/java-need-to-initialize-variable-before-constructor-calls-super/77320693#comment136315361_77320693","body":"You said &quot;Hence, get rid of the fields entirely.&quot; But <code>errorModel</code> <i>is</i> a field."},{"score":0,"post_type":"answer","creation_date":1697724207,"post_id":77320693,"comment_id":136317974,"body_markdown":"Hi, this is exactly what I wanted! I got into a tricky situation, but this solution keeps the original idea while making it work, so I will mark it as the accepted answer. Thank you!","link":"https://stackoverflow.com/questions/77320448/java-need-to-initialize-variable-before-constructor-calls-super/77320693#comment136317974_77320693","body":"Hi, this is exactly what I wanted! I got into a tricky situation, but this solution keeps the original idea while making it work, so I will mark it as the accepted answer. Thank you!"}],"comment_count":4,"score":2,"last_activity_date":1697684081,"creation_date":1697684081,"answer_id":77320693,"question_id":77320448,"body_markdown":"field initializers aren&#39;t run until later. However, those 2 fields you have do not appear to serve any function. You do not need them. At best, they exist as a somewhat crappy take on caching the values of your Yml reader. Crappy in the sense that every instance of an exception re-creates them, it&#39;d be far more efficient, if caching is the point, to do so within the Yml class itself.\r\n\r\nHence, get rid of the fields entirely. Either they served no point at all, or the point was to serve as a cache (i.e. to avoid repeated hammering of the disk to re-read that YML file a lot). If it was cache - this was the wrong place for it, edit the code of `Yml` to add caching behaviour there. Either way, the proper take on this exception type would be:\r\n\r\n```\r\npublic class ClienteSinMorasException extends IErrorException {\r\n\r\n    @Override public String getCodigo() {\r\n      return Yml.get(&quot;cod&quot;);\r\n    }\r\n\r\n    @Override public String getDescripcion() {\r\n      return Yml.get(&quot;desc&quot;);\r\n    }\r\n\r\n    public ClienteSinMorasException() {\r\n        super();\r\n    }\r\n\r\n    public ClienteSinMorasException(ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores) {\r\n        super(errores);\r\n    }\r\n\r\n    public ClienteSinMorasException(String errorKey, String errorValue) {\r\n        super(errorKey, errorValue);\r\n    }\r\n}\r\n```\r\n\r\nThis avoids the issue: There are no fields, so there are no field initializers, so you don&#39;t run into any issues in regards to initialization sequence problems.\r\n","link":"https://stackoverflow.com/questions/77320448/java-need-to-initialize-variable-before-constructor-calls-super/77320693#77320693","title":"Java - Need to initialize variable before Constructor calls super()","body":"<p>field initializers aren't run until later. However, those 2 fields you have do not appear to serve any function. You do not need them. At best, they exist as a somewhat crappy take on caching the values of your Yml reader. Crappy in the sense that every instance of an exception re-creates them, it'd be far more efficient, if caching is the point, to do so within the Yml class itself.</p>\n<p>Hence, get rid of the fields entirely. Either they served no point at all, or the point was to serve as a cache (i.e. to avoid repeated hammering of the disk to re-read that YML file a lot). If it was cache - this was the wrong place for it, edit the code of <code>Yml</code> to add caching behaviour there. Either way, the proper take on this exception type would be:</p>\n<pre><code>public class ClienteSinMorasException extends IErrorException {\n\n    @Override public String getCodigo() {\n      return Yml.get(&quot;cod&quot;);\n    }\n\n    @Override public String getDescripcion() {\n      return Yml.get(&quot;desc&quot;);\n    }\n\n    public ClienteSinMorasException() {\n        super();\n    }\n\n    public ClienteSinMorasException(ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores) {\n        super(errores);\n    }\n\n    public ClienteSinMorasException(String errorKey, String errorValue) {\n        super(errorKey, errorValue);\n    }\n}\n</code></pre>\n<p>This avoids the issue: There are no fields, so there are no field initializers, so you don't run into any issues in regards to initialization sequence problems.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701563712,"creation_date":1701563712,"answer_id":77592689,"question_id":77320448,"body_markdown":"so I&#39;m the one who originally posted the question. The above answer is what I used..... until I recently came to understand that all of this was stupid from my part. Here is my new answer.\r\n\r\nSo, basically, I was shooting myself in the foot. The reason is simple: ***I don&#39;t need to do all of this when initializing the class!!!*** I can just do it when I call `.getErrorModel()`, which is when I need it, not before. It&#39;s such an obvious oversight, it seems I was blinded by the `@Getter`, trying to use it and not code any sort of getter myself. This is the new solution.\r\n\r\n```java\r\npublic abstract class IErrorException extends RuntimeException {\r\n\r\n    protected ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores = null;\r\n\r\n    public abstract String getCodigo();\r\n\r\n    public abstract String getDescripcion();\r\n\r\n    public IErrorException() {\r\n        super();\r\n    }\r\n\r\n    public IErrorException(ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores) {\r\n        super();\r\n        this.errores = errores;\r\n    }\r\n\r\n    public IErrorException(String errorKey, String errorValue) {\r\n        super();\r\n        this.errores = new ArrayList&lt;&gt;();\r\n        this.errores.add(new HashMap&lt;&gt;(Map.of(errorKey, errorValue)));\r\n    }\r\n\r\n    public ErrorModel getErrorModel() {\r\n        return new ErrorModel(this.getCodigo(), this.getDescripcion(), this.errores);\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd then:\r\n```java\r\npublic class ClienteSinMorasException extends IErrorException {\r\n\r\n    public ClienteSinMorasException() {\r\n        super();\r\n    }\r\n\r\n    public ClienteSinMorasException(ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores) {\r\n        super(errores);\r\n    }\r\n\r\n    public ClienteSinMorasException(String errorKey, String errorValue) {\r\n        super(errorKey, errorValue);\r\n    }\r\n\r\n    @Override public String getCodigo() {\r\n      return &quot;Codigo&quot;;\r\n    }\r\n\r\n    @Override public String getDescripcion() {\r\n      return &quot;descripcion&quot;;\r\n    }\r\n}\r\n\r\n```\r\nI think this is the best solution so far as it doesn&#39;t play so close to the edge unnecesarily. Lesson learned.","link":"https://stackoverflow.com/questions/77320448/java-need-to-initialize-variable-before-constructor-calls-super/77592689#77592689","title":"Java - Need to initialize variable before Constructor calls super()","body":"<p>so I'm the one who originally posted the question. The above answer is what I used..... until I recently came to understand that all of this was stupid from my part. Here is my new answer.</p>\n<p>So, basically, I was shooting myself in the foot. The reason is simple: <em><strong>I don't need to do all of this when initializing the class!!!</strong></em> I can just do it when I call <code>.getErrorModel()</code>, which is when I need it, not before. It's such an obvious oversight, it seems I was blinded by the <code>@Getter</code>, trying to use it and not code any sort of getter myself. This is the new solution.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class IErrorException extends RuntimeException {\n\n    protected ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores = null;\n\n    public abstract String getCodigo();\n\n    public abstract String getDescripcion();\n\n    public IErrorException() {\n        super();\n    }\n\n    public IErrorException(ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores) {\n        super();\n        this.errores = errores;\n    }\n\n    public IErrorException(String errorKey, String errorValue) {\n        super();\n        this.errores = new ArrayList&lt;&gt;();\n        this.errores.add(new HashMap&lt;&gt;(Map.of(errorKey, errorValue)));\n    }\n\n    public ErrorModel getErrorModel() {\n        return new ErrorModel(this.getCodigo(), this.getDescripcion(), this.errores);\n    }\n\n}\n</code></pre>\n<p>And then:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ClienteSinMorasException extends IErrorException {\n\n    public ClienteSinMorasException() {\n        super();\n    }\n\n    public ClienteSinMorasException(ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores) {\n        super(errores);\n    }\n\n    public ClienteSinMorasException(String errorKey, String errorValue) {\n        super(errorKey, errorValue);\n    }\n\n    @Override public String getCodigo() {\n      return &quot;Codigo&quot;;\n    }\n\n    @Override public String getDescripcion() {\n      return &quot;descripcion&quot;;\n    }\n}\n\n</code></pre>\n<p>I think this is the best solution so far as it doesn't play so close to the edge unnecesarily. Lesson learned.</p>\n"}],"comment_count":4,"is_answered":true,"view_count":80,"answer_count":2,"score":0,"last_activity_date":1701563712,"creation_date":1697679077,"question_id":77320448,"body_markdown":"**Note**: some of the code will be in spanish.\r\n\r\nHi. I made a good Exception model for my Spring Boot app, so that every personalized exception I throw creates a personalized response (int this case it&#39;s a class called `ErrorModel`), so then I can catch that exception in a `@RestControllerAdvice` with an `@ExceptionHandler`, and just return the `errorModel` that that particular exception created. What&#39;s particular about each `errorModel` that&#39;s created in the personalized exceptions are a `code` and a `description`.\r\n\r\n```java\r\n@Slf4j\r\n@RestControllerAdvice\r\npublic class GlobalExceptionHandler {\r\n  @ExceptionHandler(ClienteSinMorasException.class)\r\n  @ResponseStatus(HttpStatus.NOT_FOUND)\r\n  @ResponseBody\r\n  public ErrorModel manejoDeClienteSinMoras(ClienteSinMorasException ex) {\r\n      return ex.getErrorModel();\r\n  }\r\n}\r\n```\r\n```java\r\n@Getter\r\n@AllArgsConstructor\r\npublic class ErrorModel {\r\n    private final String codigo;\r\n    private final String descripcion;\r\n    private final ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores; //don&#39;t take this into consideration\r\n}\r\n```\r\nSo, because each exception is and works the same, and the only diference is the `code` (`codigo`) and `description` (`descipcion`), I created this, and it worked fine:\r\n```java\r\npublic abstract class IErrorException extends RuntimeException {\r\n    @Getter\r\n    private final ErrorModel errorModel;\r\n\r\n    public abstract String getCodigo();\r\n\r\n    public abstract String getDescripcion();\r\n\r\n    public IErrorException() {\r\n        super();\r\n        this.errorModel = new ErrorModel(this.getCodigo(), this.getDescripcion(), null);\r\n    }\r\n\r\n    public IErrorException(ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores) {\r\n        super();\r\n        this.errorModel = new ErrorModel(this.getCodigo(), this.getDescripcion(), errores);\r\n    }\r\n\r\n    public IErrorException(String errorKey, String errorValue) {\r\n        super();\r\n        ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores = new ArrayList&lt;&gt;();\r\n        errores.add(new HashMap&lt;&gt;(Map.of(errorKey, errorValue)));\r\n        this.errorModel = new ErrorModel(this.getCodigo(), this.getDescripcion(), errores);\r\n    }\r\n\r\n}\r\n```\r\n```java\r\n// One of the exceptions\r\n@Getter\r\npublic class ClienteSinMorasException extends IErrorException {\r\n\r\n    private final String codigo = &quot;code&quot;;\r\n    private final String descripcion = &quot;desc&quot;;\r\n\r\n    public ClienteSinMorasException() {\r\n        super();\r\n    }\r\n\r\n    public ClienteSinMorasException(ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores) {\r\n        super(errores);\r\n    }\r\n\r\n    public ClienteSinMorasException(String errorKey, String errorValue) {\r\n        super(errorKey, errorValue);\r\n    }\r\n\r\n}\r\n```\r\nThis was perfect (except for those supers, but whatever), but recently, they asked me to change it so that the `code` and `description` are read from .yml properties, so that the values could be changed at runtime without needing to rerun the app. That simple change broke everything.\r\n\r\nI came to understand that the only reason that that worked was because `final` fields of `explicit primitive` types &quot;kinda already exist&quot; when in the abstract class I do `this.getCodigo()` (in this example, this returns &quot;code&quot;). If it&#39;s not `final` nor is it of an `explicit primitive` type, this doesn&#39;t work, it loads everything AFTER the execution of the constructor, thus I end up creating a `new ErrorModel(null, null, null)`. Also, `super()` has to be the first thing in the constructor, so I can&#39;t quite initialize the variables correctly.\r\n\r\n```java\r\n// One of the exceptions\r\n@Getter\r\npublic class ClienteSinMorasException extends IErrorException {\r\n\r\n    private final String codigo = Yml.get(&quot;cod&quot;);\r\n    private final String descripcion = Yml.get(&quot;desc&quot;);\r\n\r\n    public ClienteSinMorasException() {\r\n        super();\r\n    }\r\n\r\n    public ClienteSinMorasException(ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores) {\r\n        super(errores);\r\n    }\r\n\r\n    public ClienteSinMorasException(String errorKey, String errorValue) {\r\n        super(errorKey, errorValue);\r\n    }\r\n\r\n}\r\n```\r\nThis doesn&#39;t work, and honestly I don&#39;t know what to do.","link":"https://stackoverflow.com/questions/77320448/java-need-to-initialize-variable-before-constructor-calls-super","title":"Java - Need to initialize variable before Constructor calls super()","body":"<p><strong>Note</strong>: some of the code will be in spanish.</p>\n<p>Hi. I made a good Exception model for my Spring Boot app, so that every personalized exception I throw creates a personalized response (int this case it's a class called <code>ErrorModel</code>), so then I can catch that exception in a <code>@RestControllerAdvice</code> with an <code>@ExceptionHandler</code>, and just return the <code>errorModel</code> that that particular exception created. What's particular about each <code>errorModel</code> that's created in the personalized exceptions are a <code>code</code> and a <code>description</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@RestControllerAdvice\npublic class GlobalExceptionHandler {\n  @ExceptionHandler(ClienteSinMorasException.class)\n  @ResponseStatus(HttpStatus.NOT_FOUND)\n  @ResponseBody\n  public ErrorModel manejoDeClienteSinMoras(ClienteSinMorasException ex) {\n      return ex.getErrorModel();\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@AllArgsConstructor\npublic class ErrorModel {\n    private final String codigo;\n    private final String descripcion;\n    private final ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores; //don't take this into consideration\n}\n</code></pre>\n<p>So, because each exception is and works the same, and the only diference is the <code>code</code> (<code>codigo</code>) and <code>description</code> (<code>descipcion</code>), I created this, and it worked fine:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class IErrorException extends RuntimeException {\n    @Getter\n    private final ErrorModel errorModel;\n\n    public abstract String getCodigo();\n\n    public abstract String getDescripcion();\n\n    public IErrorException() {\n        super();\n        this.errorModel = new ErrorModel(this.getCodigo(), this.getDescripcion(), null);\n    }\n\n    public IErrorException(ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores) {\n        super();\n        this.errorModel = new ErrorModel(this.getCodigo(), this.getDescripcion(), errores);\n    }\n\n    public IErrorException(String errorKey, String errorValue) {\n        super();\n        ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores = new ArrayList&lt;&gt;();\n        errores.add(new HashMap&lt;&gt;(Map.of(errorKey, errorValue)));\n        this.errorModel = new ErrorModel(this.getCodigo(), this.getDescripcion(), errores);\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// One of the exceptions\n@Getter\npublic class ClienteSinMorasException extends IErrorException {\n\n    private final String codigo = &quot;code&quot;;\n    private final String descripcion = &quot;desc&quot;;\n\n    public ClienteSinMorasException() {\n        super();\n    }\n\n    public ClienteSinMorasException(ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores) {\n        super(errores);\n    }\n\n    public ClienteSinMorasException(String errorKey, String errorValue) {\n        super(errorKey, errorValue);\n    }\n\n}\n</code></pre>\n<p>This was perfect (except for those supers, but whatever), but recently, they asked me to change it so that the <code>code</code> and <code>description</code> are read from .yml properties, so that the values could be changed at runtime without needing to rerun the app. That simple change broke everything.</p>\n<p>I came to understand that the only reason that that worked was because <code>final</code> fields of <code>explicit primitive</code> types &quot;kinda already exist&quot; when in the abstract class I do <code>this.getCodigo()</code> (in this example, this returns &quot;code&quot;). If it's not <code>final</code> nor is it of an <code>explicit primitive</code> type, this doesn't work, it loads everything AFTER the execution of the constructor, thus I end up creating a <code>new ErrorModel(null, null, null)</code>. Also, <code>super()</code> has to be the first thing in the constructor, so I can't quite initialize the variables correctly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// One of the exceptions\n@Getter\npublic class ClienteSinMorasException extends IErrorException {\n\n    private final String codigo = Yml.get(&quot;cod&quot;);\n    private final String descripcion = Yml.get(&quot;desc&quot;);\n\n    public ClienteSinMorasException() {\n        super();\n    }\n\n    public ClienteSinMorasException(ArrayList&lt;HashMap&lt;String, String&gt;&gt; errores) {\n        super(errores);\n    }\n\n    public ClienteSinMorasException(String errorKey, String errorValue) {\n        super(errorKey, errorValue);\n    }\n\n}\n</code></pre>\n<p>This doesn't work, and honestly I don't know what to do.</p>\n"},{"tags":["java","azure","azure-active-directory","signalr"],"comment_count":0,"is_answered":false,"view_count":28,"answer_count":0,"score":1,"last_activity_date":1701547619,"creation_date":1700171104,"question_id":77498208,"body_markdown":"I have a Java program that is not a not a web application that connects to an Azure SignalR hub running in ServerLess mode and listens for events. This program is run on different operating systems including Windows, macOS and Linux. The program uses the ASP.NET Core SignalR Java client.\r\n\r\nI would like to add authentication to validate with Azure BC2 using a username and password.\r\n\r\nHere is a simple example to connect to SignalR:\r\n\r\n```\r\n\t/**\r\n\t * Example program for SignalR.\r\n\t *\r\n\t * @param args the program arguments, which consists of the URL for the SignalR\r\n\t *             server and the hub name.\r\n\t */\r\n\tpublic static void main(String[] args) {\r\n\t\tif (args.length != 2) {\r\n\t\t\tSystem.out.print(&quot;\\nUsage: &quot;);\r\n\t\t\tSystem.out.print(Example.class);\r\n\t\t\tSystem.out.println(&quot; signalr_url hubname&quot;);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tfinal HttpHubConnectionBuilder builder = HubConnectionBuilder.create(args[0]);\r\n\t\t\tfinal HubConnection hubConnection = builder.build();\r\n\t\t\tfinal Action1&lt;Object&gt; callback = new Action1&lt;Object&gt;() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void invoke(Object param1) {\r\n\t\t\t\t\tSystem.out.print(&quot;Signalr hub connection ID: &quot;);\r\n\t\t\t\t\tSystem.out.println(hubConnection.getConnectionId());\r\n\t\t\t\t\tSystem.out.println(param1);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\thubConnection.on(args[1], callback, Object.class);\r\n\t\t\t// start the hub connection and wait until connected\r\n\t\t\thubConnection.start().blockingAwait();\r\n\t\t} catch (Exception ex) {\r\n\t\t\tex.printStackTrace();\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nI have found examples of how to do this with a Java web application or a Java program running on Windows but I need a solution for any OS.","link":"https://stackoverflow.com/questions/77498208/how-can-i-add-azure-bc2-authentication-to-the-signalr-connection-in-a-java-progr","title":"How can I add Azure BC2 authentication to the SignalR connection in a Java program?","body":"<p>I have a Java program that is not a not a web application that connects to an Azure SignalR hub running in ServerLess mode and listens for events. This program is run on different operating systems including Windows, macOS and Linux. The program uses the ASP.NET Core SignalR Java client.</p>\n<p>I would like to add authentication to validate with Azure BC2 using a username and password.</p>\n<p>Here is a simple example to connect to SignalR:</p>\n<pre><code>    /**\n     * Example program for SignalR.\n     *\n     * @param args the program arguments, which consists of the URL for the SignalR\n     *             server and the hub name.\n     */\n    public static void main(String[] args) {\n        if (args.length != 2) {\n            System.out.print(&quot;\\nUsage: &quot;);\n            System.out.print(Example.class);\n            System.out.println(&quot; signalr_url hubname&quot;);\n            return;\n        }\n        try {\n            final HttpHubConnectionBuilder builder = HubConnectionBuilder.create(args[0]);\n            final HubConnection hubConnection = builder.build();\n            final Action1&lt;Object&gt; callback = new Action1&lt;Object&gt;() {\n                @Override\n                public void invoke(Object param1) {\n                    System.out.print(&quot;Signalr hub connection ID: &quot;);\n                    System.out.println(hubConnection.getConnectionId());\n                    System.out.println(param1);\n                }\n            };\n            hubConnection.on(args[1], callback, Object.class);\n            // start the hub connection and wait until connected\n            hubConnection.start().blockingAwait();\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>I have found examples of how to do this with a Java web application or a Java program running on Windows but I need a solution for any OS.</p>\n"},{"tags":["java","spring-boot","cors"],"comments":[{"score":0,"post_type":"question","creation_date":1692720943,"post_id":76949036,"comment_id":135661747,"body_markdown":"can you enable CORS in spring security and check.","link":"https://stackoverflow.com/questions/76949036/cors-error-connecting-spring-boot-backend-to-next-js-frontend#comment135661747_76949036","body":"can you enable CORS in spring security and check."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1693120401,"last_edit_date":1693120401,"creation_date":1693119927,"answer_id":76986023,"question_id":76949036,"body_markdown":"This message is probably issued by the frontend. For development purposes, you should use the **Rewrites** feature of Next.js (see [this answer](https://stackoverflow.com/a/65467719/17335001)).\r\n\r\n**next.config.js** :\r\n```js\r\nmodule.exports = {\r\n  async rewrites() {\r\n    return [\r\n      {\r\n        source: &#39;/api/:path*&#39;,\r\n        destination: &#39;http://localhost:8081/:path*&#39; // Proxy to Backend\r\n      }\r\n    ]\r\n  }\r\n}\r\n```","link":"https://stackoverflow.com/questions/76949036/cors-error-connecting-spring-boot-backend-to-next-js-frontend/76986023#76986023","title":"Cors error connecting spring boot backend to next js frontend","body":"<p>This message is probably issued by the frontend. For development purposes, you should use the <strong>Rewrites</strong> feature of Next.js (see <a href=\"https://stackoverflow.com/a/65467719/17335001\">this answer</a>).</p>\n<p><strong>next.config.js</strong> :</p>\n<pre class=\"lang-js prettyprint-override\"><code>module.exports = {\n  async rewrites() {\n    return [\n      {\n        source: '/api/:path*',\n        destination: 'http://localhost:8081/:path*' // Proxy to Backend\n      }\n    ]\n  }\n}\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1701546051,"creation_date":1701546051,"answer_id":77591940,"question_id":76949036,"body_markdown":"Try adding OPTIONS to your allowed methods in your SecurityConfig class because if I am not mistaken before a POST request browser sends an OPTIONS request to the same address and return the CORS header.\r\n\r\n        @Bean\r\n    CorsConfigurationSource corsConfigurationSource(){\r\n        CorsConfiguration configuration = new CorsConfiguration();\r\n        configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:3000&quot;, &quot;http://localhost&quot;));\r\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;,&quot;POST&quot;, &quot;OPTIONS&quot;, &quot;PUT&quot;, &quot;DELETE&quot;));\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }","link":"https://stackoverflow.com/questions/76949036/cors-error-connecting-spring-boot-backend-to-next-js-frontend/77591940#77591940","title":"Cors error connecting spring boot backend to next js frontend","body":"<p>Try adding OPTIONS to your allowed methods in your SecurityConfig class because if I am not mistaken before a POST request browser sends an OPTIONS request to the same address and return the CORS header.</p>\n<pre><code>    @Bean\nCorsConfigurationSource corsConfigurationSource(){\n    CorsConfiguration configuration = new CorsConfiguration();\n    configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:3000&quot;, &quot;http://localhost&quot;));\n    configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;,&quot;POST&quot;, &quot;OPTIONS&quot;, &quot;PUT&quot;, &quot;DELETE&quot;));\n    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n    source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n    return source;\n}\n</code></pre>\n"}],"comment_count":1,"is_answered":false,"view_count":375,"answer_count":2,"score":1,"last_activity_date":1701546051,"creation_date":1692656413,"last_edit_date":1697206116,"question_id":76949036,"body_markdown":"I need help on cors config concerning spring boot security. Everything works normally on postman. When I examine the requests, on the network tab in the browser, I found out that for all the request that don&#39;t work, the header returned as response doesn&#39;t contain anything. Here is the exact error I am getting:\r\n\r\n&gt; Access to XMLHttpRequest at &#39;http://localhost:8081/api/v1/auth/login&#39; from origin &#39;http://localhost:3000/&#39; has been blocked by CORS policy: Response to preflight request doesn&#39;t pass access control check: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource\r\n\r\n\r\nHere are my configs \r\n\r\n```lang-java\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig {\r\n\r\n    private final JwtAuthenticationFilter jwtAuthFilter;\r\n    private final AuthenticationProvider authenticationProvider;\r\n\r\n    @Bean\r\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf(csrf -&gt; csrf.disable())\r\n                .authorizeHttpRequests(authorize -&gt;\r\n                        authorize\r\n                                .requestMatchers(&quot;/api/v1/auth/register&quot;, &quot;/api/v1/auth/login&quot;)\r\n                                .permitAll()\r\n                                .anyRequest()\r\n                                .authenticated()\r\n                )\r\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .authenticationProvider(authenticationProvider)\r\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    CorsConfigurationSource corsConfigurationSource(){\r\n        CorsConfiguration configuration = new CorsConfiguration();\r\n        configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:3000&quot;, &quot;http://localhost&quot;));\r\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;,&quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;));\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }\r\n}\r\n\r\n```\r\n\r\nAnd then in the main application \r\n```lang-java\r\n@SpringBootApplication\r\npublic class KeeperApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(KeeperApplication.class, args);\r\n    }\r\n\r\n    @Bean\r\n    public WebMvcConfigurer corsConfigurer() {\r\n        return new WebMvcConfigurer() {\r\n            @Override\r\n            public void addCorsMappings(CorsRegistry registry) {\r\n                registry\r\n                        .addMapping(&quot;/**&quot;)\r\n                        .allowedOrigins(&quot;*&quot;)\r\n                        .allowedMethods(&quot;*&quot;)\r\n                        .allowedHeaders(&quot;*&quot;)\r\n                ;\r\n            }\r\n        };\r\n    }\r\n}\r\n```\r\n\r\n\r\nI lookup into their docs and that&#39;s where I found the config below the security filter chain one but that doesn&#39;t seem to work either.","link":"https://stackoverflow.com/questions/76949036/cors-error-connecting-spring-boot-backend-to-next-js-frontend","title":"Cors error connecting spring boot backend to next js frontend","body":"<p>I need help on cors config concerning spring boot security. Everything works normally on postman. When I examine the requests, on the network tab in the browser, I found out that for all the request that don't work, the header returned as response doesn't contain anything. Here is the exact error I am getting:</p>\n<blockquote>\n<p>Access to XMLHttpRequest at 'http://localhost:8081/api/v1/auth/login' from origin 'http://localhost:3000/' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource</p>\n</blockquote>\n<p>Here are my configs</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class SecurityConfig {\n\n    private final JwtAuthenticationFilter jwtAuthFilter;\n    private final AuthenticationProvider authenticationProvider;\n\n    @Bean\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .csrf(csrf -&gt; csrf.disable())\n                .authorizeHttpRequests(authorize -&gt;\n                        authorize\n                                .requestMatchers(&quot;/api/v1/auth/register&quot;, &quot;/api/v1/auth/login&quot;)\n                                .permitAll()\n                                .anyRequest()\n                                .authenticated()\n                )\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .authenticationProvider(authenticationProvider)\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class);\n        return http.build();\n    }\n\n    @Bean\n    CorsConfigurationSource corsConfigurationSource(){\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:3000&quot;, &quot;http://localhost&quot;));\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;,&quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;));\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n}\n\n</code></pre>\n<p>And then in the main application</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class KeeperApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(KeeperApplication.class, args);\n    }\n\n    @Bean\n    public WebMvcConfigurer corsConfigurer() {\n        return new WebMvcConfigurer() {\n            @Override\n            public void addCorsMappings(CorsRegistry registry) {\n                registry\n                        .addMapping(&quot;/**&quot;)\n                        .allowedOrigins(&quot;*&quot;)\n                        .allowedMethods(&quot;*&quot;)\n                        .allowedHeaders(&quot;*&quot;)\n                ;\n            }\n        };\n    }\n}\n</code></pre>\n<p>I lookup into their docs and that's where I found the config below the security filter chain one but that doesn't seem to work either.</p>\n"},{"tags":["java","kotlin","gradle","intellij-idea"],"comments":[{"score":0,"post_type":"question","creation_date":1692739572,"post_id":75271960,"comment_id":135665157,"body_markdown":"By the way, the latest version is 3rd preview in Java 21: [*JEP 442: Foreign Function &amp; Memory API (Third Preview)*](https://openjdk.org/jeps/442)","link":"https://stackoverflow.com/questions/75271960/cant-run-java-preview-features-from-test-works-fine-from-non-test-code#comment135665157_75271960","body":"By the way, the latest version is 3rd preview in Java 21: <a href=\"https://openjdk.org/jeps/442\" rel=\"nofollow noreferrer\"><i>JEP 442: Foreign Function &amp; Memory API (Third Preview)</i></a>"}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1674958215,"creation_date":1674958215,"answer_id":75272208,"question_id":75271960,"body_markdown":"Thanks to this [answer][1]:\r\n\r\nshould be:\r\n\r\n    withType&lt;Test&gt;() {\r\n        useJUnitPlatform()\r\n        jvmArgs(&quot;--enable-preview&quot;)\r\n    }\r\n    withType&lt;JavaExec&gt;() {\r\n        jvmArgs(&quot;--enable-preview&quot;)\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/62115073/how-do-i-enable-enable-preview-for-tests\r\n","link":"https://stackoverflow.com/questions/75271960/cant-run-java-preview-features-from-test-works-fine-from-non-test-code/75272208#75272208","title":"Can&#39;t run Java preview features from test - works fine from non-test code","body":"<p>Thanks to this <a href=\"https://stackoverflow.com/questions/62115073/how-do-i-enable-enable-preview-for-tests\">answer</a>:</p>\n<p>should be:</p>\n<pre><code>withType&lt;Test&gt;() {\n    useJUnitPlatform()\n    jvmArgs(&quot;--enable-preview&quot;)\n}\nwithType&lt;JavaExec&gt;() {\n    jvmArgs(&quot;--enable-preview&quot;)\n}\n</code></pre>\n"}],"comment_count":1,"is_answered":true,"view_count":207,"answer_count":1,"score":2,"last_activity_date":1701545213,"creation_date":1674953617,"last_edit_date":1701545213,"question_id":75271960,"body_markdown":"Im trying out the &quot;Foreign Function &amp; Memory API (Preview)&quot; in Java 19. Ive used jextract to create netcdf_h.java. This is working from a main() program in src, but when I try to run it from a test program in test, it fails with the message:\r\n\r\n&gt; Preview features are not enabled for sunya/cdm/netcdf/ffm/netcdf_h\r\n&gt; (class file version 63.65535). Try running with &#39;--enable-preview&#39;\r\n&gt; java.lang.UnsupportedClassVersionError: Preview features are not\r\n&gt; enabled for sunya/cdm/netcdf/ffm/netcdf_h (class file version\r\n&gt; 63.65535). Try running with &#39;--enable-preview&#39;\r\n\r\nIm using gradle to build:\r\n\r\n    ...\r\n    \r\n    tasks {\r\n        val ENABLE_PREVIEW = &quot;--enable-preview&quot;\r\n        withType&lt;JavaCompile&gt;() {\r\n            options.compilerArgs.add(ENABLE_PREVIEW)\r\n            // Optionally we can show which preview feature we use.\r\n            options.compilerArgs.add(&quot;-Xlint:preview&quot;)\r\n            // Explicitly setting compiler option --release\r\n            // is needed when we wouldn&#39;t set the\r\n            // sourceCompatiblity and targetCompatibility\r\n            // properties of the Java plugin extension.\r\n            options.release.set(19)\r\n        }\r\n        withType&lt;Test&gt;() {\r\n            useJUnitPlatform()\r\n            jvmArgs!!.add(ENABLE_PREVIEW)\r\n        }\r\n        withType&lt;JavaExec&gt;() {\r\n            jvmArgs!!.add(ENABLE_PREVIEW)\r\n        }\r\n        withType&lt;KotlinCompile&gt; {\r\n            kotlinOptions.jvmTarget = &quot;19&quot;\r\n        }\r\n    }\r\n    \r\n    java {\r\n        toolchain {\r\n            languageVersion.set(JavaLanguageVersion.of(19))\r\n        }\r\n    }\r\n\r\nAnd IntelliJ to run.\r\n\r\nSeems like maybe theres somewhere else I need to add &quot;--enable-preview&quot; in gradle for tests ??","link":"https://stackoverflow.com/questions/75271960/cant-run-java-preview-features-from-test-works-fine-from-non-test-code","title":"Can&#39;t run Java preview features from test - works fine from non-test code","body":"<p>Im trying out the &quot;Foreign Function &amp; Memory API (Preview)&quot; in Java 19. Ive used jextract to create netcdf_h.java. This is working from a main() program in src, but when I try to run it from a test program in test, it fails with the message:</p>\n<blockquote>\n<p>Preview features are not enabled for sunya/cdm/netcdf/ffm/netcdf_h\n(class file version 63.65535). Try running with '--enable-preview'\njava.lang.UnsupportedClassVersionError: Preview features are not\nenabled for sunya/cdm/netcdf/ffm/netcdf_h (class file version\n63.65535). Try running with '--enable-preview'</p>\n</blockquote>\n<p>Im using gradle to build:</p>\n<pre><code>...\n\ntasks {\n    val ENABLE_PREVIEW = &quot;--enable-preview&quot;\n    withType&lt;JavaCompile&gt;() {\n        options.compilerArgs.add(ENABLE_PREVIEW)\n        // Optionally we can show which preview feature we use.\n        options.compilerArgs.add(&quot;-Xlint:preview&quot;)\n        // Explicitly setting compiler option --release\n        // is needed when we wouldn't set the\n        // sourceCompatiblity and targetCompatibility\n        // properties of the Java plugin extension.\n        options.release.set(19)\n    }\n    withType&lt;Test&gt;() {\n        useJUnitPlatform()\n        jvmArgs!!.add(ENABLE_PREVIEW)\n    }\n    withType&lt;JavaExec&gt;() {\n        jvmArgs!!.add(ENABLE_PREVIEW)\n    }\n    withType&lt;KotlinCompile&gt; {\n        kotlinOptions.jvmTarget = &quot;19&quot;\n    }\n}\n\njava {\n    toolchain {\n        languageVersion.set(JavaLanguageVersion.of(19))\n    }\n}\n</code></pre>\n<p>And IntelliJ to run.</p>\n<p>Seems like maybe theres somewhere else I need to add &quot;--enable-preview&quot; in gradle for tests ??</p>\n"},{"tags":["java","spring-boot","discord4j"],"comments":[{"score":2,"post_type":"question","creation_date":1701362514,"post_id":77580012,"comment_id":136768919,"body_markdown":"There is not enough information here to assist. None of the relevant code is included. Please edit your question to include more information.","link":"https://stackoverflow.com/questions/77580012/spring-discord4j-server-stopped#comment136768919_77580012","body":"There is not enough information here to assist. None of the relevant code is included. Please edit your question to include more information."},{"score":0,"post_type":"question","creation_date":1701362985,"post_id":77580012,"comment_id":136769006,"body_markdown":"I add more information sorry","link":"https://stackoverflow.com/questions/77580012/spring-discord4j-server-stopped#comment136769006_77580012","body":"I add more information sorry"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701543726,"creation_date":1701543726,"answer_id":77591796,"question_id":77580012,"body_markdown":"Without the code in your `GodCreatorApplication` class it will be harder to help you. Nevertheless, it is most likely that you&#39;re not blocking the main thread and thus the JVS exits. I never used Spring so I cannot help you on how to implement this, but the D4J method to block until the bot is disconnected is `client.onDisconnect().block();`.","link":"https://stackoverflow.com/questions/77580012/spring-discord4j-server-stopped/77591796#77591796","title":"Spring Discord4J server Stopped","body":"<p>Without the code in your <code>GodCreatorApplication</code> class it will be harder to help you. Nevertheless, it is most likely that you're not blocking the main thread and thus the JVS exits. I never used Spring so I cannot help you on how to implement this, but the D4J method to block until the bot is disconnected is <code>client.onDisconnect().block();</code>.</p>\n"}],"comment_count":2,"is_answered":false,"view_count":59,"answer_count":1,"score":0,"last_activity_date":1701543726,"creation_date":1701361259,"last_edit_date":1701455213,"question_id":77580012,"body_markdown":"I tried to create a discord bot with Discord4J. When i start the application it connect to the discord but then it stopped. I follow some recent tuto which used the same things and it works... I don&#39;t know why it doesn&#39;t work here...\r\n\r\n```\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.scheduling.annotation.EnableScheduling;\r\n\r\n@SpringBootApplication\r\n@EnableScheduling\r\npublic class GodCreatorApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(GodCreatorApplication.class, args);\r\n    }\r\n\r\n}\r\n```\r\n\r\nBotConfiguration : \r\n\r\n```\r\nimport discord4j.core.DiscordClientBuilder;\r\nimport discord4j.core.GatewayDiscordClient;\r\nimport discord4j.core.event.domain.Event;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\nimport java.util.List;\r\n\r\n@Configuration\r\npublic class BotConfiguration {\r\n    @Value(&quot;${discord.token}&quot;)\r\n    private String token;\r\n\r\n    @Bean\r\n    public &lt;T extends Event&gt; GatewayDiscordClient gatewayDiscordClient(List&lt;EventListener&lt;T&gt;&gt; eventListeners) {\r\n        GatewayDiscordClient client = DiscordClientBuilder.create(token)\r\n                .build()\r\n                .login()\r\n                .block();\r\n\r\n        for(EventListener&lt;T&gt; listener : eventListeners) {\r\n            assert client != null;\r\n            client.on(listener.getEventType())\r\n                    .flatMap(listener::execute)\r\n                    .onErrorResume(listener::handleError)\r\n                    .subscribe();\r\n        }\r\n\r\n        return client;\r\n    }\r\n}\r\n```\r\n\r\nMessageListener : \r\n\r\n```\r\nimport discord4j.core.object.entity.Message;\r\nimport reactor.core.publisher.Mono;\r\n\r\npublic abstract class MessageListener {\r\n\r\n    public Mono&lt;Void&gt; processCommand(Message eventMessage) {\r\n        return Mono.just(eventMessage)\r\n                .filter(message -&gt; message.getAuthor().map(user -&gt; !user.isBot()).orElse(false))\r\n                .filter(message -&gt; message.getContent().equalsIgnoreCase(&quot;!todo&quot;))\r\n                .flatMap(Message::getChannel)\r\n                .flatMap(channel -&gt; channel.createMessage(&quot;Things to do today:\\n - write a bot\\n - eat lunch\\n - play a game&quot;))\r\n                .then();\r\n    }\r\n}\r\n```\r\n\r\nMassageCreateListener : \r\n\r\n```\r\nimport discord4j.core.event.domain.message.MessageCreateEvent;\r\nimport org.springframework.stereotype.Service;\r\nimport reactor.core.publisher.Mono;\r\n\r\n@Service\r\npublic class MessageCreateListener extends MessageListener implements EventListener&lt;MessageCreateEvent&gt; {\r\n\r\n    @Override\r\n    public Class&lt;MessageCreateEvent&gt; getEventType() {\r\n        return MessageCreateEvent.class;\r\n    }\r\n\r\n    @Override\r\n    public Mono&lt;Void&gt; execute(MessageCreateEvent event) {\r\n        return processCommand(event.getMessage());\r\n    }\r\n}\r\n```\r\n\r\nAnd I have this result : \r\n\r\n![There is the result][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rtniM.png","link":"https://stackoverflow.com/questions/77580012/spring-discord4j-server-stopped","title":"Spring Discord4J server Stopped","body":"<p>I tried to create a discord bot with Discord4J. When i start the application it connect to the discord but then it stopped. I follow some recent tuto which used the same things and it works... I don't know why it doesn't work here...</p>\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.scheduling.annotation.EnableScheduling;\n\n@SpringBootApplication\n@EnableScheduling\npublic class GodCreatorApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(GodCreatorApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>BotConfiguration :</p>\n<pre><code>import discord4j.core.DiscordClientBuilder;\nimport discord4j.core.GatewayDiscordClient;\nimport discord4j.core.event.domain.Event;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport java.util.List;\n\n@Configuration\npublic class BotConfiguration {\n    @Value(&quot;${discord.token}&quot;)\n    private String token;\n\n    @Bean\n    public &lt;T extends Event&gt; GatewayDiscordClient gatewayDiscordClient(List&lt;EventListener&lt;T&gt;&gt; eventListeners) {\n        GatewayDiscordClient client = DiscordClientBuilder.create(token)\n                .build()\n                .login()\n                .block();\n\n        for(EventListener&lt;T&gt; listener : eventListeners) {\n            assert client != null;\n            client.on(listener.getEventType())\n                    .flatMap(listener::execute)\n                    .onErrorResume(listener::handleError)\n                    .subscribe();\n        }\n\n        return client;\n    }\n}\n</code></pre>\n<p>MessageListener :</p>\n<pre><code>import discord4j.core.object.entity.Message;\nimport reactor.core.publisher.Mono;\n\npublic abstract class MessageListener {\n\n    public Mono&lt;Void&gt; processCommand(Message eventMessage) {\n        return Mono.just(eventMessage)\n                .filter(message -&gt; message.getAuthor().map(user -&gt; !user.isBot()).orElse(false))\n                .filter(message -&gt; message.getContent().equalsIgnoreCase(&quot;!todo&quot;))\n                .flatMap(Message::getChannel)\n                .flatMap(channel -&gt; channel.createMessage(&quot;Things to do today:\\n - write a bot\\n - eat lunch\\n - play a game&quot;))\n                .then();\n    }\n}\n</code></pre>\n<p>MassageCreateListener :</p>\n<pre><code>import discord4j.core.event.domain.message.MessageCreateEvent;\nimport org.springframework.stereotype.Service;\nimport reactor.core.publisher.Mono;\n\n@Service\npublic class MessageCreateListener extends MessageListener implements EventListener&lt;MessageCreateEvent&gt; {\n\n    @Override\n    public Class&lt;MessageCreateEvent&gt; getEventType() {\n        return MessageCreateEvent.class;\n    }\n\n    @Override\n    public Mono&lt;Void&gt; execute(MessageCreateEvent event) {\n        return processCommand(event.getMessage());\n    }\n}\n</code></pre>\n<p>And I have this result :</p>\n<p><img src=\"https://i.stack.imgur.com/rtniM.png\" alt=\"There is the result\" /></p>\n"},{"tags":["java","oracle","timestamp","dst","systimestamp"],"comments":[{"score":1,"post_type":"question","creation_date":1700669579,"post_id":77531397,"comment_id":136683654,"body_markdown":"If you&#39;ve got an up-to-date driver, you should be using `java.time` types. Try it like that and see what happens. Not an Oracle person but you might experiment with the `WITH x TIMEZONE` column type too.","link":"https://stackoverflow.com/questions/77531397/writing-java-sql-timestamp-near-standard-time-in-oracle#comment136683654_77531397","body":"If you&#39;ve got an up-to-date driver, you should be using <code>java.time</code> types. Try it like that and see what happens. Not an Oracle person but you might experiment with the <code>WITH x TIMEZONE</code> column type too."},{"score":1,"post_type":"question","creation_date":1700670738,"post_id":77531397,"comment_id":136683907,"body_markdown":"You should also probably state what you *expected* to see","link":"https://stackoverflow.com/questions/77531397/writing-java-sql-timestamp-near-standard-time-in-oracle#comment136683907_77531397","body":"You should also probably state what you <i>expected</i> to see"},{"score":3,"post_type":"question","creation_date":1700675287,"post_id":77531397,"comment_id":136684803,"body_markdown":"By the way, you are using the wrong data type on your column. To track specific point on the timeline, use a type akin to the SQL standard type of `TIMESTAMP WITH TIME ZONE`. I don’t now Oracle database, but [the doc](https://docs.oracle.com/en/database/oracle/oracle-database/19/sqlqr/Data-Types.html#GUID-219C338B-FE60-422A-B196-2F0A01CAD9A4) seems to say the appropriate type in Oracle has the same name. Your code uses `TIMESTAMP` which lacks the context of an offset from UTC.","link":"https://stackoverflow.com/questions/77531397/writing-java-sql-timestamp-near-standard-time-in-oracle#comment136684803_77531397","body":"By the way, you are using the wrong data type on your column. To track specific point on the timeline, use a type akin to the SQL standard type of <code>TIMESTAMP WITH TIME ZONE</code>. I don’t now Oracle database, but <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/19/sqlqr/Data-Types.html#GUID-219C338B-FE60-422A-B196-2F0A01CAD9A4\" rel=\"nofollow noreferrer\">the doc</a> seems to say the appropriate type in Oracle has the same name. Your code uses <code>TIMESTAMP</code> which lacks the context of an offset from UTC."},{"score":0,"post_type":"question","creation_date":1700732317,"post_id":77531397,"comment_id":136691436,"body_markdown":"I can&#39;t change the Jdbc driver, not in the near future.","link":"https://stackoverflow.com/questions/77531397/writing-java-sql-timestamp-near-standard-time-in-oracle#comment136691436_77531397","body":"I can&#39;t change the Jdbc driver, not in the near future."},{"score":0,"post_type":"question","creation_date":1700734213,"post_id":77531397,"comment_id":136691827,"body_markdown":"@BasilBourque this is the reason why I&#39;m using milliseconds and not hours, minutes, et c.","link":"https://stackoverflow.com/questions/77531397/writing-java-sql-timestamp-near-standard-time-in-oracle#comment136691827_77531397","body":"@BasilBourque this is the reason why I&#39;m using milliseconds and not hours, minutes, et c."},{"score":0,"post_type":"question","creation_date":1700755107,"post_id":77531397,"comment_id":136695693,"body_markdown":"@Ermanno Your last comment confounds me. If you insist on using the wrong type in your database, and the wrong class in Java, you’ll have no end of problems, confusion, and incorrect data. If you want to track a moment, a specific point on the timeline: (a) Use a JDBC driver compliant with JDBC 4.2 or later, (b) Define your column with a type akin to the misnamed SQL standard type `TIMESTAMP WITH TIME ZONE`, (c) Exchange data with the database using `java.time.OffsetDateTime`. All this has been covered many times on Stack Overflow.","link":"https://stackoverflow.com/questions/77531397/writing-java-sql-timestamp-near-standard-time-in-oracle#comment136695693_77531397","body":"@Ermanno Your last comment confounds me. If you insist on using the wrong type in your database, and the wrong class in Java, you’ll have no end of problems, confusion, and incorrect data. If you want to track a moment, a specific point on the timeline: (a) Use a JDBC driver compliant with JDBC 4.2 or later, (b) Define your column with a type akin to the misnamed SQL standard type <code>TIMESTAMP WITH TIME ZONE</code>, (c) Exchange data with the database using <code>java.time.OffsetDateTime</code>. All this has been covered many times on Stack Overflow."},{"score":0,"post_type":"question","creation_date":1700761402,"post_id":77531397,"comment_id":136696698,"body_markdown":"@BasilBourque This way before JDBC 4.2 no java application could have managed timezones. The problem here is only write a timestamp, which got no zone, and read another one.","link":"https://stackoverflow.com/questions/77531397/writing-java-sql-timestamp-near-standard-time-in-oracle#comment136696698_77531397","body":"@BasilBourque This way before JDBC 4.2 no java application could have managed timezones. The problem here is only write a timestamp, which got no zone, and read another one."}],"comment_count":7,"is_answered":false,"view_count":51,"answer_count":0,"score":-2,"last_activity_date":1701541650,"creation_date":1700668452,"last_edit_date":1700740090,"question_id":77531397,"body_markdown":"some days ago it happened to me a strange thing that fortunately I could reproduce quite easily. Originally in place of the two Timestamp there was SYSTIMESTAMP but the behaviour is the same.\r\nThe first ZonedDateTime, **a**, is crafted to be the moment immediately before the return to standard time in Central Europe.\r\n\r\n\r\n```\r\npackage ermanno.date.oracle;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.Timestamp;\r\nimport java.time.ZoneId;\r\nimport java.time.ZonedDateTime;\r\n\r\npublic class TimestampStackOverflow\r\n{\r\n    public static void main(String[] args)\r\n    {\r\n        try\r\n        {\r\n            DriverManager.registerDriver(new oracle.jdbc.OracleDriver());\r\n            Connection conn = DriverManager.getConnection(\r\n                &quot;jdbc:oracle:thin:@(DESCRIPTION=(ENABLE=BROKEN)(LOAD_BALANCE=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=xxx)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=xxx)))&quot;,\r\n                &quot;xxx&quot;, &quot;xxx&quot;);\r\n            String sql1 = &quot;delete from iannacci.ts3&quot;;\r\n            String sql2 = &quot;insert into iannacci.ts3 values (?)&quot;;\r\n            String sql3 = &quot;select * from iannacci.ts3 ORDER BY tt&quot;;\r\n            PreparedStatement stmt1 = conn.prepareStatement(sql1);\r\n            PreparedStatement stmt2 = conn.prepareStatement(sql2);\r\n            PreparedStatement stmt3 = conn.prepareStatement(sql3);\r\n            ZonedDateTime a = ZonedDateTime.of(2023, 10, 29, 0, 59, 59, 0, ZoneId.of(&quot;UTC&quot;));\r\n            ZonedDateTime b = a.plusSeconds(2);\r\n            stmt1.execute();\r\n            System.out.println(a + &quot; &quot; + a.toInstant().toEpochMilli());\r\n            System.out.println(b + &quot; &quot; + b.toInstant().toEpochMilli());\r\n            stmt2.setObject(1, new Timestamp(a.toInstant().toEpochMilli()));\r\n            stmt2.execute();\r\n            stmt2.setObject(1, new Timestamp(b.toInstant().toEpochMilli()));\r\n            stmt2.execute();\r\n            ResultSet r = stmt3.executeQuery();\r\n\r\n            while (r.next())\r\n            {\r\n                System.out.println(r.getTimestamp(1) + &quot; &quot; + r.getTimestamp(1).getTime());\r\n            }\r\n\r\n            stmt3.close();\r\n            stmt2.close();\r\n            conn.close();\r\n        }\r\n        catch (Exception e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe Oracle table.\r\n```\r\nCREATE TABLE IANNACCI.TS3\r\n(\r\n  TT TIMESTAMP\r\n);\r\n```\r\n\r\nThe results are\r\n\r\n2023-10-29T00:59:59Z[UTC] *1698541199000*\r\n\r\n2023-10-29T01:00:01Z[UTC] 1698541201000\r\n\r\n2023-10-29 02:00:01.0 1698541201000\r\n\r\n2023-10-29 02:59:59.0 *1698544799000*\r\n\r\nWhat I expect to see is that the two Timestamps in italic be the same as I inserted.\r\n\r\nI always counted on Timestamp to write &quot;pure&quot; instant. The return to standard time is involved in some way, still I can&#39;t understand how Oracle return data different from what I write.\r\nSESSIONTIMEZONE is Europe/Rome.\r\n\r\nThanks.","link":"https://stackoverflow.com/questions/77531397/writing-java-sql-timestamp-near-standard-time-in-oracle","title":"Writing java.sql.Timestamp near standard time in Oracle","body":"<p>some days ago it happened to me a strange thing that fortunately I could reproduce quite easily. Originally in place of the two Timestamp there was SYSTIMESTAMP but the behaviour is the same.\nThe first ZonedDateTime, <strong>a</strong>, is crafted to be the moment immediately before the return to standard time in Central Europe.</p>\n<pre><code>package ermanno.date.oracle;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.Timestamp;\nimport java.time.ZoneId;\nimport java.time.ZonedDateTime;\n\npublic class TimestampStackOverflow\n{\n    public static void main(String[] args)\n    {\n        try\n        {\n            DriverManager.registerDriver(new oracle.jdbc.OracleDriver());\n            Connection conn = DriverManager.getConnection(\n                &quot;jdbc:oracle:thin:@(DESCRIPTION=(ENABLE=BROKEN)(LOAD_BALANCE=ON)(ADDRESS=(PROTOCOL=TCP)(HOST=xxx)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=xxx)))&quot;,\n                &quot;xxx&quot;, &quot;xxx&quot;);\n            String sql1 = &quot;delete from iannacci.ts3&quot;;\n            String sql2 = &quot;insert into iannacci.ts3 values (?)&quot;;\n            String sql3 = &quot;select * from iannacci.ts3 ORDER BY tt&quot;;\n            PreparedStatement stmt1 = conn.prepareStatement(sql1);\n            PreparedStatement stmt2 = conn.prepareStatement(sql2);\n            PreparedStatement stmt3 = conn.prepareStatement(sql3);\n            ZonedDateTime a = ZonedDateTime.of(2023, 10, 29, 0, 59, 59, 0, ZoneId.of(&quot;UTC&quot;));\n            ZonedDateTime b = a.plusSeconds(2);\n            stmt1.execute();\n            System.out.println(a + &quot; &quot; + a.toInstant().toEpochMilli());\n            System.out.println(b + &quot; &quot; + b.toInstant().toEpochMilli());\n            stmt2.setObject(1, new Timestamp(a.toInstant().toEpochMilli()));\n            stmt2.execute();\n            stmt2.setObject(1, new Timestamp(b.toInstant().toEpochMilli()));\n            stmt2.execute();\n            ResultSet r = stmt3.executeQuery();\n\n            while (r.next())\n            {\n                System.out.println(r.getTimestamp(1) + &quot; &quot; + r.getTimestamp(1).getTime());\n            }\n\n            stmt3.close();\n            stmt2.close();\n            conn.close();\n        }\n        catch (Exception e)\n        {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>The Oracle table.</p>\n<pre><code>CREATE TABLE IANNACCI.TS3\n(\n  TT TIMESTAMP\n);\n</code></pre>\n<p>The results are</p>\n<p>2023-10-29T00:59:59Z[UTC] <em>1698541199000</em></p>\n<p>2023-10-29T01:00:01Z[UTC] 1698541201000</p>\n<p>2023-10-29 02:00:01.0 1698541201000</p>\n<p>2023-10-29 02:59:59.0 <em>1698544799000</em></p>\n<p>What I expect to see is that the two Timestamps in italic be the same as I inserted.</p>\n<p>I always counted on Timestamp to write &quot;pure&quot; instant. The return to standard time is involved in some way, still I can't understand how Oracle return data different from what I write.\nSESSIONTIMEZONE is Europe/Rome.</p>\n<p>Thanks.</p>\n"},{"tags":["java","maven","javafx","raspberry-pi","fxml"],"comments":[{"score":0,"post_type":"question","creation_date":1701246187,"post_id":77569329,"comment_id":136750470,"body_markdown":"Scary that you get &quot;WARNING: Unsupported JavaFX configuration: classes were loaded from &#39;unnamed module @566b4ab9&#39;&quot; BUT you have a module-info.","link":"https://stackoverflow.com/questions/77569329/javafx-styles-gets-destroyed-and-shows-errors-in-raspberry-pi-3-but-works-well#comment136750470_77569329","body":"Scary that you get &quot;WARNING: Unsupported JavaFX configuration: classes were loaded from &#39;unnamed module @566b4ab9&#39;&quot; BUT you have a module-info."},{"score":0,"post_type":"question","creation_date":1701246253,"post_id":77569329,"comment_id":136750482,"body_markdown":"Which JDK is installed on each system? JDKs differ altough they have the same Java version.","link":"https://stackoverflow.com/questions/77569329/javafx-styles-gets-destroyed-and-shows-errors-in-raspberry-pi-3-but-works-well#comment136750482_77569329","body":"Which JDK is installed on each system? JDKs differ altough they have the same Java version."},{"score":0,"post_type":"question","creation_date":1701246352,"post_id":77569329,"comment_id":136750504,"body_markdown":"Just a guess: Could you try include the classifier in all dependencies of JFX? &lt;classifier&gt;linux&lt;/classifier&gt; Is there a dependency which needs the classifier too? I know, that there are some dependencies which are OS specific, and some which are not.","link":"https://stackoverflow.com/questions/77569329/javafx-styles-gets-destroyed-and-shows-errors-in-raspberry-pi-3-but-works-well#comment136750504_77569329","body":"Just a guess: Could you try include the classifier in all dependencies of JFX? &lt;classifier&gt;linux&lt;/classifier&gt; Is there a dependency which needs the classifier too? I know, that there are some dependencies which are OS specific, and some which are not."},{"score":0,"post_type":"question","creation_date":1701246442,"post_id":77569329,"comment_id":136750522,"body_markdown":"Your App wants to load something, but it does not exist. &quot;Loading library glass from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libglass.so: /home/jibon/.openjfx/cache/17.0.6/libglass.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)&quot;. Please check this.","link":"https://stackoverflow.com/questions/77569329/javafx-styles-gets-destroyed-and-shows-errors-in-raspberry-pi-3-but-works-well#comment136750522_77569329","body":"Your App wants to load something, but it does not exist. &quot;Loading library glass from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libglass.so: /home/jibon/.openjfx/cache/17.0.6/libglass.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)&quot;. Please check this."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701296251,"last_edit_date":1701296251,"creation_date":1701252079,"answer_id":77570148,"question_id":77569329,"body_markdown":"You need to use the right version of your execution software for your chosen target platform.  JavaFX (and the JRE) include native components that only run on given platforms.  \r\n\r\nAlso JavaFX Java (non-native) components are modularized, with the different Java modules targeting various systems.  For example, there are Java components supporting the Mac system menu in the JavaFX mac module versions that aren&#39;t present in other versions.  The same will be true for embedded systems like the Pi, if it has no native windowing system built in, then JavaFX needs to ship with an inbuilt window emulator (like it&#39;s monocle system), or it simply won&#39;t work correctly, if at all.\r\n\r\nHere is a list of all of the files for the javafx-graphics module, most recent stable version, (21.0.1), in Maven:\r\n\r\n * https://repo1.maven.org/maven2/org/openjfx/javafx-graphics/21.0.1/\r\n\r\nIt includes all of the classified dependencies.\r\n\r\nFor Linux you can see there are:\r\n\r\n * javafx-graphics-21.0.1-linux.jar   \r\n * javafx-graphics-21.0.1-linux-aarch64.jar\r\n * javafx-graphics-21.0.1-linux-arm32-monocle.jar\r\n * javafx-graphics-21.0.1-linux-aarch64-monocle.jar\r\n\r\nThe one just classified &quot;linux&quot; is for linux running on x64 (Intel and AMD) processors.\r\n\r\nThe one classified &quot;linux-aarch64&quot; is for linux running on ARM 64 bit processors.\r\n\r\nThe one classified &quot;linux-arm32-monocle&quot; is for 32 bit ARM processors and &quot;linux-aarch64-monocle&quot; is for using 64 bit ARM processors running on linux and using [monocle][1]:\r\n\r\n &gt; Monocle is the implementation of the Glass windowing component of JavaFX for embedded systems. Monocle provides windowing functionality and access to native graphics for simple embedded systems that do not have an underlying window system.\r\n\r\nI have not used JavaFX on Pi, nor have I used a Pi and have not researched what processors and capabilities they have, but you can do that and then select the appropriate classified dependency for when you build your application.\r\n\r\nIt will not be just &quot;linux&quot; as you currently have, as that is for Intel processors and Pis don&#39;t use Intel processors.  This is (at least one of the reasons) why your application works when run on a Linux system running a 64 bit Intel type processor, but not on a Pi.\r\n\r\nYou need to check the processor type for your target system.  If the Pi 3 is 32 bit, then you need an arm32 version of JavaFX (and the JRE).  If the Pi 3 is 64 bit then you need an aarch64 version of JavaFX.  If the Pi 3 is 64 bit and is running an in-built windowing system (such as x-windows), then the &quot;linux-aarch64&quot; version can be used.  If the Pi 3 is 64 bit and not running a windowing system, then perhaps the &quot;linux-aarch64-monocle&quot; version can be used.\r\n\r\nSo hopefully you understand.  The way you are building and packaging your application is not correct for your target system.  JavaFX Maven builds without classifiers will default to use the classified versions of JavaFX for the system on which they are built.  So, if you build on a Windows Intel processor system, it will use that as the version of JavaFX pulled in by Maven.  But you aren&#39;t building your software on the Pi, therefore you need to specify the correct classifier for the Pi for the build for *all* of the JavaFX dependencies you have (not just the javafx-graphics system), and probably also including transitive JavaFX dependencies.\r\n\r\nFor instance, perhaps if targeting linux-aarch64-monocle for JavaFX 21.0.1 (this is just a guess, I have no way to try it):\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n        &lt;version&gt;21.0.1&lt;/version&gt;\r\n        &lt;classifier&gt;linux-aarch64-monocle&lt;/classifier&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n        &lt;version&gt;21.0.1&lt;/version&gt;\r\n        &lt;classifier&gt;linux-aarch64-monocle&lt;/classifier&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javafx-graphics&lt;/artifactId&gt;\r\n        &lt;version&gt;21.0.1&lt;/version&gt;\r\n        &lt;classifier&gt;linux-aarch64-monocle&lt;/classifier&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javafx-base&lt;/artifactId&gt;\r\n        &lt;version&gt;21.0.1&lt;/version&gt;\r\n        &lt;classifier&gt;linux-aarch64-monocle&lt;/classifier&gt;\r\n    &lt;/dependency&gt;\r\n\r\nSuch a build will only work on a linux ARM 64 bit system (and no other) and the linux system needs the requisite libraries for JavaFX to work installed (such as glibc 3 for JavaFX 21).  So don&#39;t expect it to also work on an Intel Linux system.  It may work on multiple systems if you bundle lots of different classified dependencies in as [described here](https://stackoverflow.com/questions/52653836/maven-shade-javafx-runtime-components-are-missing), but that wouldn&#39;t seem recommended for a constrained device such as a Pi.\r\n\r\nI don&#39;t know much about the Pi, but I think there are more recent versions of it than 3, so it may be that recent versions of JavaFX have dropped support for older Pi systems (I don&#39;t know).\r\n\r\nWhat you are doing (shading JavaFX modules into a jar), is entirely unsupported.  That doesn&#39;t mean that you won&#39;t get it to work, it just means that the software isn&#39;t designed to work in that manner (though it may work).  This is why you are warned: &quot;WARNING: Unsupported JavaFX configuration&quot;.  So don&#39;t expect a lot of support for what you are doing in the manner you are doing it.  If you want a supported distribution of JavaFX for embedded systems, Gluon provides that and you can contact them to discuss it.  I do not provide that nor have the expertise to advise on it. \r\n\r\nShading destroys modularity, so you should not provide a module-info for shaded systems, everything should run from the classpath (even though JavaFX doesn&#39;t officially support that runtime method). \r\n\r\nI&#39;m guessing that a preferred method to Maven Shade would be either to provide the modules and native components linked from the JavaFX SDK using jlink, or a compilation to a native binary using GraalVM (neither of which I can advise you on for a Pi target).\r\n\r\nThere may be articles that you may find on the web that detail how to get JavaFX to work on a Pi, some will be outdated and not relevant (or misleading) for recent JavaFX versions, and some might provide good up to date information and instructions (I don&#39;t know the right articles to link to here).  Or perhaps instead to rely on a JRE installation on the Pi that includes JavaFX (there may be vendors such as Azul or BellSoft supplying such distributions - I didn&#39;t check).\r\n\r\nSome resources for Pi development with JavaFX (some will be obsolete, but may still contain some relevant info, so be careful following anything too literally):\r\n\r\n * [Getting started with JavaFX on Raspberry Pi][2].\r\n   * Seems like a good guide and also has a [related book][3] if you really want to understand the topic. \r\n * [Using a Raspberry Pi to Deploy JavaFX Applications][4].\r\n   * Oracle tutorial on using JavaFX on the Pi (somewhat dated).\r\n * [Gluon provide a modern guide for JavaFX on embedded systems such as Pi.][5]\r\n\r\nMy advice is to either find and follow a trustworthy guide that details exactly what you need to do to get your software to work on your target system, and if you can&#39;t find one, then get professional help from somebody like Gluon.  StackOverflow questions alone probably won&#39;t get you the support you need.\r\n\r\n\r\n  [1]: https://wiki.openjdk.org/display/OpenJFX/Monocle\r\n  [2]: https://blogs.oracle.com/javamagazine/post/getting-started-with-javafx-on-raspberry-pi\r\n  [3]: https://webtechie.be/books/\r\n  [4]: https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/raspberrypifx/raspberryfx.html\r\n  [5]: https://docs.gluonhq.com/#platforms_embedded","link":"https://stackoverflow.com/questions/77569329/javafx-styles-gets-destroyed-and-shows-errors-in-raspberry-pi-3-but-works-well/77570148#77570148","title":"JavaFX styles gets destroyed and shows errors in Raspberry PI 3, but works well in windows and kali linux","body":"<p>You need to use the right version of your execution software for your chosen target platform.  JavaFX (and the JRE) include native components that only run on given platforms.</p>\n<p>Also JavaFX Java (non-native) components are modularized, with the different Java modules targeting various systems.  For example, there are Java components supporting the Mac system menu in the JavaFX mac module versions that aren't present in other versions.  The same will be true for embedded systems like the Pi, if it has no native windowing system built in, then JavaFX needs to ship with an inbuilt window emulator (like it's monocle system), or it simply won't work correctly, if at all.</p>\n<p>Here is a list of all of the files for the javafx-graphics module, most recent stable version, (21.0.1), in Maven:</p>\n<ul>\n<li><a href=\"https://repo1.maven.org/maven2/org/openjfx/javafx-graphics/21.0.1/\" rel=\"nofollow noreferrer\">https://repo1.maven.org/maven2/org/openjfx/javafx-graphics/21.0.1/</a></li>\n</ul>\n<p>It includes all of the classified dependencies.</p>\n<p>For Linux you can see there are:</p>\n<ul>\n<li>javafx-graphics-21.0.1-linux.jar</li>\n<li>javafx-graphics-21.0.1-linux-aarch64.jar</li>\n<li>javafx-graphics-21.0.1-linux-arm32-monocle.jar</li>\n<li>javafx-graphics-21.0.1-linux-aarch64-monocle.jar</li>\n</ul>\n<p>The one just classified &quot;linux&quot; is for linux running on x64 (Intel and AMD) processors.</p>\n<p>The one classified &quot;linux-aarch64&quot; is for linux running on ARM 64 bit processors.</p>\n<p>The one classified &quot;linux-arm32-monocle&quot; is for 32 bit ARM processors and &quot;linux-aarch64-monocle&quot; is for using 64 bit ARM processors running on linux and using <a href=\"https://wiki.openjdk.org/display/OpenJFX/Monocle\" rel=\"nofollow noreferrer\">monocle</a>:</p>\n<blockquote>\n<p>Monocle is the implementation of the Glass windowing component of JavaFX for embedded systems. Monocle provides windowing functionality and access to native graphics for simple embedded systems that do not have an underlying window system.</p>\n</blockquote>\n<p>I have not used JavaFX on Pi, nor have I used a Pi and have not researched what processors and capabilities they have, but you can do that and then select the appropriate classified dependency for when you build your application.</p>\n<p>It will not be just &quot;linux&quot; as you currently have, as that is for Intel processors and Pis don't use Intel processors.  This is (at least one of the reasons) why your application works when run on a Linux system running a 64 bit Intel type processor, but not on a Pi.</p>\n<p>You need to check the processor type for your target system.  If the Pi 3 is 32 bit, then you need an arm32 version of JavaFX (and the JRE).  If the Pi 3 is 64 bit then you need an aarch64 version of JavaFX.  If the Pi 3 is 64 bit and is running an in-built windowing system (such as x-windows), then the &quot;linux-aarch64&quot; version can be used.  If the Pi 3 is 64 bit and not running a windowing system, then perhaps the &quot;linux-aarch64-monocle&quot; version can be used.</p>\n<p>So hopefully you understand.  The way you are building and packaging your application is not correct for your target system.  JavaFX Maven builds without classifiers will default to use the classified versions of JavaFX for the system on which they are built.  So, if you build on a Windows Intel processor system, it will use that as the version of JavaFX pulled in by Maven.  But you aren't building your software on the Pi, therefore you need to specify the correct classifier for the Pi for the build for <em>all</em> of the JavaFX dependencies you have (not just the javafx-graphics system), and probably also including transitive JavaFX dependencies.</p>\n<p>For instance, perhaps if targeting linux-aarch64-monocle for JavaFX 21.0.1 (this is just a guess, I have no way to try it):</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n    &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n    &lt;version&gt;21.0.1&lt;/version&gt;\n    &lt;classifier&gt;linux-aarch64-monocle&lt;/classifier&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n    &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n    &lt;version&gt;21.0.1&lt;/version&gt;\n    &lt;classifier&gt;linux-aarch64-monocle&lt;/classifier&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n    &lt;artifactId&gt;javafx-graphics&lt;/artifactId&gt;\n    &lt;version&gt;21.0.1&lt;/version&gt;\n    &lt;classifier&gt;linux-aarch64-monocle&lt;/classifier&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n    &lt;artifactId&gt;javafx-base&lt;/artifactId&gt;\n    &lt;version&gt;21.0.1&lt;/version&gt;\n    &lt;classifier&gt;linux-aarch64-monocle&lt;/classifier&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Such a build will only work on a linux ARM 64 bit system (and no other) and the linux system needs the requisite libraries for JavaFX to work installed (such as glibc 3 for JavaFX 21).  So don't expect it to also work on an Intel Linux system.  It may work on multiple systems if you bundle lots of different classified dependencies in as <a href=\"https://stackoverflow.com/questions/52653836/maven-shade-javafx-runtime-components-are-missing\">described here</a>, but that wouldn't seem recommended for a constrained device such as a Pi.</p>\n<p>I don't know much about the Pi, but I think there are more recent versions of it than 3, so it may be that recent versions of JavaFX have dropped support for older Pi systems (I don't know).</p>\n<p>What you are doing (shading JavaFX modules into a jar), is entirely unsupported.  That doesn't mean that you won't get it to work, it just means that the software isn't designed to work in that manner (though it may work).  This is why you are warned: &quot;WARNING: Unsupported JavaFX configuration&quot;.  So don't expect a lot of support for what you are doing in the manner you are doing it.  If you want a supported distribution of JavaFX for embedded systems, Gluon provides that and you can contact them to discuss it.  I do not provide that nor have the expertise to advise on it.</p>\n<p>Shading destroys modularity, so you should not provide a module-info for shaded systems, everything should run from the classpath (even though JavaFX doesn't officially support that runtime method).</p>\n<p>I'm guessing that a preferred method to Maven Shade would be either to provide the modules and native components linked from the JavaFX SDK using jlink, or a compilation to a native binary using GraalVM (neither of which I can advise you on for a Pi target).</p>\n<p>There may be articles that you may find on the web that detail how to get JavaFX to work on a Pi, some will be outdated and not relevant (or misleading) for recent JavaFX versions, and some might provide good up to date information and instructions (I don't know the right articles to link to here).  Or perhaps instead to rely on a JRE installation on the Pi that includes JavaFX (there may be vendors such as Azul or BellSoft supplying such distributions - I didn't check).</p>\n<p>Some resources for Pi development with JavaFX (some will be obsolete, but may still contain some relevant info, so be careful following anything too literally):</p>\n<ul>\n<li><a href=\"https://blogs.oracle.com/javamagazine/post/getting-started-with-javafx-on-raspberry-pi\" rel=\"nofollow noreferrer\">Getting started with JavaFX on Raspberry Pi</a>.\n<ul>\n<li>Seems like a good guide and also has a <a href=\"https://webtechie.be/books/\" rel=\"nofollow noreferrer\">related book</a> if you really want to understand the topic.</li>\n</ul>\n</li>\n<li><a href=\"https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/raspberrypifx/raspberryfx.html\" rel=\"nofollow noreferrer\">Using a Raspberry Pi to Deploy JavaFX Applications</a>.\n<ul>\n<li>Oracle tutorial on using JavaFX on the Pi (somewhat dated).</li>\n</ul>\n</li>\n<li><a href=\"https://docs.gluonhq.com/#platforms_embedded\" rel=\"nofollow noreferrer\">Gluon provide a modern guide for JavaFX on embedded systems such as Pi.</a></li>\n</ul>\n<p>My advice is to either find and follow a trustworthy guide that details exactly what you need to do to get your software to work on your target system, and if you can't find one, then get professional help from somebody like Gluon.  StackOverflow questions alone probably won't get you the support you need.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701538395,"creation_date":1701538395,"answer_id":77591477,"question_id":77569329,"body_markdown":" **After a long research in web, I got my solution and I want to share with you all step by step.**\r\n - Install Default JDK on Host \r\n - Install latest intellij on Host \r\n - Install OpenJFX on Raspi \r\n - Install Default JDK on Raspi \r\n - Then install WiringPi on Raspi \r\n - Install maven on Raspi \r\n - Create Project with Maven and default JDK in Host \r\n - On pom.xml, add shade plugin to return jar file with dependency included \r\n\r\npom.xml\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3&lt;/version&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;phase&gt;package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;shade&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;transformers&gt;\r\n                        &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n                            &lt;mainClass&gt;pro.jibon.apps.linuxapp1.Main&lt;/mainClass&gt;\r\n                        &lt;/transformer&gt;\r\n                    &lt;/transformers&gt;\r\n                    &lt;filters&gt;\r\n                        &lt;filter&gt;\r\n                            &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n                            &lt;excludes&gt;\r\n                                &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n                                &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n                                &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n                            &lt;/excludes&gt;\r\n                        &lt;/filter&gt;\r\n                    &lt;/filters&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n\r\n - Then add pi4j in project with maven \r\n\r\npom.xml\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.pi4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;pi4j-core&lt;/artifactId&gt;\r\n        &lt;version&gt;1.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.pi4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;pi4j-device&lt;/artifactId&gt;\r\n        &lt;version&gt;1.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.pi4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;pi4j-library-pigpio&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.pi4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;pi4j-gpio-extension&lt;/artifactId&gt;\r\n        &lt;version&gt;1.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n - Then add openjfx javafx-graphics if not added yet \r\n\r\npom.xml\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n        &lt;artifactId&gt;javafx-graphics&lt;/artifactId&gt;\r\n        &lt;version&gt;17.0.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n - Create a dummy Main class to avoid extends error \r\n\r\nMain.java\r\n\r\n    package pro.jibon.apps.linuxapp1;\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            HelloApplication.main(args);\r\n        }\r\n    }\r\n\r\n - Use these two function to check if it’s rapi or not \r\n\r\nHelloApplication.java\r\n\r\n    public static boolean isLinux() {\r\n        return (getOsName().toLowerCase().contains(&quot;linux&quot;));\r\n    }\r\n    public static boolean isRasPi() {\r\n        return (isLinux() &amp;&amp; Files.exists(Paths.get(&quot;/opt/pigpio&quot;), LinkOption.NOFOLLOW_LINKS));\r\n    }\r\n\r\n - mvn clean to clean target and libs \r\n\r\n - mvn install to get shaded jar file in target folder \r\n\r\nRememer to build mvn in Raspi \r\n\r\nAnd finally, you can now import \r\n\r\n    import com.pi4j.io.gpio.*;\r\n    import static com.pi4j.system.SystemInfo.getOsName;\r\nAnd enjoy JavaFX with GPIO pins control in Raspberry Pi.\r\n\r\nA sample JavaFX to turn on and off LED on pin no-13 (Pi4j 2)\r\n\r\n    ledBtn = (Button) scene.lookup(&quot;#ledPower&quot;);\r\n    GpioController gpio = null;\r\n    GpioPinDigitalOutput ledPin;\r\n    int ledPinNumber = 2; //16\r\n    if (isRasPi()){\r\n        try{\r\n            gpio = GpioFactory.getInstance();\r\n            ledPin = gpio.provisionDigitalOutputPin(RaspiPin.getPinByAddress(ledPinNumber), PinState.LOW);\r\n        }catch (Exception e){\r\n            ledPin = null;\r\n        }\r\n    }else {\r\n        ledPin = null;\r\n    }\r\n    \r\n    GpioPinDigitalOutput finalLedPin = ledPin;\r\n    ledBtn.setOnAction(mouseEvent-&gt;{\r\n        ledBtn.setText(&quot;Wait.&quot;);\r\n        if (finalLedPin != null){\r\n            ledBtn.setText(&quot;Wait..&quot;);\r\n            try{\r\n                if (finalLedPin.getState() == PinState.LOW){\r\n                    ledBtn.setText(&quot;Turning LED ON&quot;);\r\n                    finalLedPin.high();\r\n                }else{\r\n                    ledBtn.setText(&quot;Turning LED OFF&quot;);\r\n                    finalLedPin.low();\r\n                }\r\n            }catch (Exception e){\r\n                //AlertBox(e.getMessage());\r\n            }\r\n        }else{\r\n            ledBtn.setText(&quot;Unsupported&quot;);\r\n        }\r\n    });\r\n\r\nAnd remember to clean up GPIO pins\r\n\r\n    stage.setOnCloseRequest(windowEvent -&gt; {\r\n        if (isRasPi()) {\r\n            try {\r\n                GpioController gpio2 = GpioFactory.getInstance();\r\n                gpio2.shutdown();\r\n            }catch (Exception e){\r\n    \r\n            }\r\n        }\r\n        //windowEvent.consume();\r\n    });\r\n\r\nThanks everyone.","link":"https://stackoverflow.com/questions/77569329/javafx-styles-gets-destroyed-and-shows-errors-in-raspberry-pi-3-but-works-well/77591477#77591477","title":"JavaFX styles gets destroyed and shows errors in Raspberry PI 3, but works well in windows and kali linux","body":"<p><strong>After a long research in web, I got my solution and I want to share with you all step by step.</strong></p>\n<ul>\n<li>Install Default JDK on Host</li>\n<li>Install latest intellij on Host</li>\n<li>Install OpenJFX on Raspi</li>\n<li>Install Default JDK on Raspi</li>\n<li>Then install WiringPi on Raspi</li>\n<li>Install maven on Raspi</li>\n<li>Create Project with Maven and default JDK in Host</li>\n<li>On pom.xml, add shade plugin to return jar file with dependency included</li>\n</ul>\n<p>pom.xml</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.3&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;shade&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;transformers&gt;\n                    &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                        &lt;mainClass&gt;pro.jibon.apps.linuxapp1.Main&lt;/mainClass&gt;\n                    &lt;/transformer&gt;\n                &lt;/transformers&gt;\n                &lt;filters&gt;\n                    &lt;filter&gt;\n                        &lt;artifact&gt;*:*&lt;/artifact&gt;\n                        &lt;excludes&gt;\n                            &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                            &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                            &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                        &lt;/excludes&gt;\n                    &lt;/filter&gt;\n                &lt;/filters&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<ul>\n<li>Then add pi4j in project with maven</li>\n</ul>\n<p>pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.pi4j&lt;/groupId&gt;\n    &lt;artifactId&gt;pi4j-core&lt;/artifactId&gt;\n    &lt;version&gt;1.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.pi4j&lt;/groupId&gt;\n    &lt;artifactId&gt;pi4j-device&lt;/artifactId&gt;\n    &lt;version&gt;1.3&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.pi4j&lt;/groupId&gt;\n    &lt;artifactId&gt;pi4j-library-pigpio&lt;/artifactId&gt;\n    &lt;version&gt;2.2.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.pi4j&lt;/groupId&gt;\n    &lt;artifactId&gt;pi4j-gpio-extension&lt;/artifactId&gt;\n    &lt;version&gt;1.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<ul>\n<li>Then add openjfx javafx-graphics if not added yet</li>\n</ul>\n<p>pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n    &lt;artifactId&gt;javafx-graphics&lt;/artifactId&gt;\n    &lt;version&gt;17.0.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<ul>\n<li>Create a dummy Main class to avoid extends error</li>\n</ul>\n<p>Main.java</p>\n<pre><code>package pro.jibon.apps.linuxapp1;\npublic class Main {\n    public static void main(String[] args) {\n        HelloApplication.main(args);\n    }\n}\n</code></pre>\n<ul>\n<li>Use these two function to check if it’s rapi or not</li>\n</ul>\n<p>HelloApplication.java</p>\n<pre><code>public static boolean isLinux() {\n    return (getOsName().toLowerCase().contains(&quot;linux&quot;));\n}\npublic static boolean isRasPi() {\n    return (isLinux() &amp;&amp; Files.exists(Paths.get(&quot;/opt/pigpio&quot;), LinkOption.NOFOLLOW_LINKS));\n}\n</code></pre>\n<ul>\n<li><p>mvn clean to clean target and libs</p>\n</li>\n<li><p>mvn install to get shaded jar file in target folder</p>\n</li>\n</ul>\n<p>Rememer to build mvn in Raspi</p>\n<p>And finally, you can now import</p>\n<pre><code>import com.pi4j.io.gpio.*;\nimport static com.pi4j.system.SystemInfo.getOsName;\n</code></pre>\n<p>And enjoy JavaFX with GPIO pins control in Raspberry Pi.</p>\n<p>A sample JavaFX to turn on and off LED on pin no-13 (Pi4j 2)</p>\n<pre><code>ledBtn = (Button) scene.lookup(&quot;#ledPower&quot;);\nGpioController gpio = null;\nGpioPinDigitalOutput ledPin;\nint ledPinNumber = 2; //16\nif (isRasPi()){\n    try{\n        gpio = GpioFactory.getInstance();\n        ledPin = gpio.provisionDigitalOutputPin(RaspiPin.getPinByAddress(ledPinNumber), PinState.LOW);\n    }catch (Exception e){\n        ledPin = null;\n    }\n}else {\n    ledPin = null;\n}\n\nGpioPinDigitalOutput finalLedPin = ledPin;\nledBtn.setOnAction(mouseEvent-&gt;{\n    ledBtn.setText(&quot;Wait.&quot;);\n    if (finalLedPin != null){\n        ledBtn.setText(&quot;Wait..&quot;);\n        try{\n            if (finalLedPin.getState() == PinState.LOW){\n                ledBtn.setText(&quot;Turning LED ON&quot;);\n                finalLedPin.high();\n            }else{\n                ledBtn.setText(&quot;Turning LED OFF&quot;);\n                finalLedPin.low();\n            }\n        }catch (Exception e){\n            //AlertBox(e.getMessage());\n        }\n    }else{\n        ledBtn.setText(&quot;Unsupported&quot;);\n    }\n});\n</code></pre>\n<p>And remember to clean up GPIO pins</p>\n<pre><code>stage.setOnCloseRequest(windowEvent -&gt; {\n    if (isRasPi()) {\n        try {\n            GpioController gpio2 = GpioFactory.getInstance();\n            gpio2.shutdown();\n        }catch (Exception e){\n\n        }\n    }\n    //windowEvent.consume();\n});\n</code></pre>\n<p>Thanks everyone.</p>\n"}],"comment_count":4,"is_answered":true,"view_count":55,"answer_count":2,"score":0,"last_activity_date":1701538395,"creation_date":1701243773,"question_id":77569329,"body_markdown":"I&#39;m worked with JavaFX in windows, then I shift to linux to make GUI for raspberry pi, cause raspberry pi also uses linux. So the error probability should be less. But\r\n**When I run the jar file in Kali Linux, it works well.**\r\n[![enter image description here][1]][1]\r\n\r\n**But when I run the file in Raspberry Pi, the graphics gets destroyed.**\r\n[![enter image description here][2]][2]\r\n\r\n**And i get some error in terminal of Raspberry pi**\r\n\r\n    jibon@jibon:~/Desktop $ java -jar LinuxApp1-1.0-SNAPSHOT.jar \r\n    Nov 29, 2023 1:19:30 PM com.sun.javafx.application.PlatformImpl startup\r\n    WARNING: Unsupported JavaFX configuration: classes were loaded from &#39;unnamed module @566b4ab9&#39;\r\n    Loading library prism_es2 from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libprism_es2.so: /home/jibon/.openjfx/cache/17.0.6/libprism_es2.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libprism_es2.so: /home/jibon/.openjfx/cache/17.0.6/libprism_es2.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\r\n    \tat (...)\r\n    Loading library prism_sw from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libprism_sw.so: /home/jibon/.openjfx/cache/17.0.6/libprism_sw.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libprism_sw.so: /home/jibon/.openjfx/cache/17.0.6/libprism_sw.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\r\n    \tat (...)\r\n    Loading library glass from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libglass.so: /home/jibon/.openjfx/cache/17.0.6/libglass.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libglass.so: /home/jibon/.openjfx/cache/17.0.6/libglass.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:232)\r\n    \tat (...)\r\n    Loading library glassgtk3 from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libglassgtk3.so: /home/jibon/.openjfx/cache/17.0.6/libglassgtk3.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libglassgtk3.so: /home/jibon/.openjfx/cache/17.0.6/libglassgtk3.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:232)\r\n    \tat (...)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:840)\r\n    Loading library javafx_font from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font.so: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font.so: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\r\n    \tat (...)\r\n    Loading library javafx_font_freetype from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_freetype.so: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_freetype.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_freetype.so: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_freetype.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\r\n    \tat (...)\r\n    Loading library javafx_font_pango from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_pango.so: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_pango.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_pango.so: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_pango.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\r\n    \tat (...)\r\n    \r\n    (java:1933): Gdk-WARNING **: 13:20:00.341: Native Windows wider or taller than 32767 pixels are not supported\r\n    \r\n    (java:1933): Gdk-WARNING **: 13:20:00.352: Native Windows wider or taller than 32767 pixels are not supported\r\n    Loading library decora_sse from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libdecora_sse.so: /home/jibon/.openjfx/cache/17.0.6/libdecora_sse.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libdecora_sse.so: /home/jibon/.openjfx/cache/17.0.6/libdecora_sse.so: cannot open shared object file: No such file or directory (Possible cause: can&#39;t load AMD 64 .so on a AARCH64 platform)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n    \tat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\r\n    \tat  (...)\r\n\r\nI&#39;m sharing some necessary files.\r\n\r\nPOM.XML\r\n-------\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;pro.jibon.apps&lt;/groupId&gt;\r\n        &lt;artifactId&gt;LinuxApp1&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;LinuxApp1&lt;/name&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;junit.version&gt;5.9.2&lt;/junit.version&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n                &lt;version&gt;17.0.6&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\r\n                &lt;version&gt;17.0.6&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n                &lt;version&gt;${junit.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n                &lt;version&gt;${junit.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-graphics&lt;/artifactId&gt;\r\n                &lt;version&gt;17.0.6&lt;/version&gt;\r\n                &lt;classifier&gt;linux&lt;/classifier&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.11.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;17&lt;/source&gt;\r\n                        &lt;target&gt;17&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;0.0.8&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\r\n                            &lt;id&gt;default-cli&lt;/id&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;mainClass&gt;pro.jibon.apps.linuxapp1/pro.jibon.apps.linuxapp1.HelloApplication&lt;/mainClass&gt;\r\n                                &lt;launcher&gt;app&lt;/launcher&gt;\r\n                                &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\r\n                                &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\r\n                                &lt;noManPages&gt;true&lt;/noManPages&gt;\r\n                                &lt;stripDebug&gt;true&lt;/stripDebug&gt;\r\n                                &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.3&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;phase&gt;package&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;shade&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;transformers&gt;\r\n                                    &lt;transformer\r\n                                            implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n                                        &lt;mainClass&gt;pro.jibon.apps.linuxapp1.Main&lt;/mainClass&gt;\r\n                                    &lt;/transformer&gt;\r\n                                &lt;/transformers&gt;\r\n                                &lt;filters&gt;\r\n                                    &lt;filter&gt;\r\n                                        &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n                                        &lt;excludes&gt;\r\n                                            &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n                                            &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n                                            &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n                                        &lt;/excludes&gt;\r\n                                    &lt;/filter&gt;\r\n                                &lt;/filters&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.3.0&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;phase&gt;package&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;single&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;archive&gt;\r\n                                    &lt;manifest&gt;\r\n                                        &lt;mainClass&gt;pro.jibon.apps.linuxapp1.Main&lt;/mainClass&gt;\r\n                                    &lt;/manifest&gt;\r\n                                &lt;/archive&gt;\r\n                                &lt;descriptorRefs&gt;\r\n                                    &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n                                &lt;/descriptorRefs&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\nMain.java\r\n---------\r\n\r\n    package pro.jibon.apps.linuxapp1;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            HelloApplication.main(args);\r\n        }\r\n    }\r\n\r\nHelloApplication.java\r\n---------------------\r\n\r\n    package pro.jibon.apps.linuxapp1;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.fxml.FXML;\r\n    import javafx.fxml.FXMLLoader;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Alert;\r\n    import javafx.scene.control.Button;\r\n    import javafx.scene.input.KeyCombination;\r\n    import javafx.stage.Stage;\r\n    import javafx.stage.StageStyle;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    public class HelloApplication extends Application {\r\n        @FXML\r\n        private Button button1;\r\n        @Override\r\n        public void start(Stage stage) throws IOException {\r\n            FXMLLoader fxmlLoader = new FXMLLoader(HelloApplication.class.getResource(&quot;hello-view.fxml&quot;));\r\n            Scene scene = new Scene(fxmlLoader.load(), stage.getMaxWidth(), stage.getMaxHeight());\r\n            stage.setTitle(&quot;Hello!&quot;);\r\n            stage.setScene(scene);\r\n            stage.initStyle(StageStyle.UTILITY);\r\n            stage.show();\r\n            button1 = (Button) scene.lookup(&quot;#btn&quot;);\r\n            button1.setText(&quot;Close&quot;);\r\n            button1.setOnAction(mouseEvent -&gt; {\r\n                stage.close();\r\n            });\r\n            stage.setOnCloseRequest(windowEvent -&gt; {\r\n                Alert alert = new Alert(Alert.AlertType.ERROR);\r\n                alert.setTitle(&quot;Wait&quot;);\r\n                alert.setContentText(&quot;Are feeling okay by clicking me huh?&quot;);\r\n                alert.setHeaderText(&quot;WTF yaar!&quot;);\r\n    //            alert.show();\r\n                windowEvent.consume();\r\n            });\r\n            stage.setAlwaysOnTop(true);\r\n            stage.setResizable(false);\r\n            stage.setMaximized(true);\r\n            stage.setResizable(false);\r\n            stage.setFullScreen(true);\r\n            stage.setFullScreenExitKeyCombination(KeyCombination.NO_MATCH);\r\n            stage.fullScreenProperty().addListener((observable, oldValue, newValue) -&gt; {\r\n                stage.setFullScreen(true);\r\n            });\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    }\r\n\r\n\r\nhello-view.xml\r\n--------------\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import javafx.geometry.*?&gt;\r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import javafx.scene.effect.*?&gt;\r\n    &lt;?import javafx.scene.layout.*?&gt;\r\n    \r\n    &lt;VBox xmlns=&quot;http://javafx.com/javafx/11.0.14-internal&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot;&gt;\r\n        &lt;padding&gt;\r\n            &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot; /&gt;\r\n        &lt;/padding&gt;\r\n        &lt;ToolBar nodeOrientation=&quot;LEFT_TO_RIGHT&quot; prefHeight=&quot;40.0&quot; prefWidth=&quot;200.0&quot;&gt;\r\n            &lt;items&gt;\r\n                &lt;Button mnemonicParsing=&quot;false&quot; text=&quot;Button&quot; /&gt;\r\n                &lt;Button mnemonicParsing=&quot;false&quot; text=&quot;Button&quot; /&gt;\r\n                &lt;Button mnemonicParsing=&quot;false&quot; text=&quot;Button&quot; /&gt;\r\n                &lt;Button mnemonicParsing=&quot;false&quot; text=&quot;Button&quot; /&gt;\r\n                &lt;Button mnemonicParsing=&quot;false&quot; text=&quot;Button&quot; /&gt;\r\n            &lt;/items&gt;\r\n        &lt;/ToolBar&gt;\r\n    \r\n        &lt;Label fx:id=&quot;welcomeText&quot; /&gt;\r\n        &lt;Button fx:id=&quot;btn&quot; alignment=&quot;CENTER&quot; text=&quot;Hello!&quot;&gt;\r\n            &lt;effect&gt;\r\n                &lt;Blend /&gt;\r\n            &lt;/effect&gt;\r\n        &lt;/Button&gt;\r\n    &lt;/VBox&gt;\r\n\r\nmodule-info.java\r\n----------------\r\n\r\n    module pro.jibon.apps.linuxapp1 {\r\n        requires javafx.controls;\r\n        requires javafx.fxml;\r\n    \r\n    \r\n        opens pro.jibon.apps.linuxapp1 to javafx.fxml;\r\n        exports pro.jibon.apps.linuxapp1;\r\n    }\r\n\r\nPlease Help me to get rid out of this :)\r\nThanks in advance.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bHws1.png\r\n  [2]: https://i.stack.imgur.com/fPAip.png\r\n","link":"https://stackoverflow.com/questions/77569329/javafx-styles-gets-destroyed-and-shows-errors-in-raspberry-pi-3-but-works-well","title":"JavaFX styles gets destroyed and shows errors in Raspberry PI 3, but works well in windows and kali linux","body":"<p>I'm worked with JavaFX in windows, then I shift to linux to make GUI for raspberry pi, cause raspberry pi also uses linux. So the error probability should be less. But\n<strong>When I run the jar file in Kali Linux, it works well.</strong>\n<a href=\"https://i.stack.imgur.com/bHws1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bHws1.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>But when I run the file in Raspberry Pi, the graphics gets destroyed.</strong>\n<a href=\"https://i.stack.imgur.com/fPAip.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fPAip.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>And i get some error in terminal of Raspberry pi</strong></p>\n<pre><code>jibon@jibon:~/Desktop $ java -jar LinuxApp1-1.0-SNAPSHOT.jar \nNov 29, 2023 1:19:30 PM com.sun.javafx.application.PlatformImpl startup\nWARNING: Unsupported JavaFX configuration: classes were loaded from 'unnamed module @566b4ab9'\nLoading library prism_es2 from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libprism_es2.so: /home/jibon/.openjfx/cache/17.0.6/libprism_es2.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\njava.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libprism_es2.so: /home/jibon/.openjfx/cache/17.0.6/libprism_es2.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\n    at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n    at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\n    at (...)\nLoading library prism_sw from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libprism_sw.so: /home/jibon/.openjfx/cache/17.0.6/libprism_sw.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\njava.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libprism_sw.so: /home/jibon/.openjfx/cache/17.0.6/libprism_sw.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\n    at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n    at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\n    at (...)\nLoading library glass from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libglass.so: /home/jibon/.openjfx/cache/17.0.6/libglass.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\njava.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libglass.so: /home/jibon/.openjfx/cache/17.0.6/libglass.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\n    at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n    at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\n    at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:232)\n    at (...)\nLoading library glassgtk3 from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libglassgtk3.so: /home/jibon/.openjfx/cache/17.0.6/libglassgtk3.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\njava.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libglassgtk3.so: /home/jibon/.openjfx/cache/17.0.6/libglassgtk3.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\n    at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n    at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\n    at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:232)\n    at (...)\n    at java.base/java.lang.Thread.run(Thread.java:840)\nLoading library javafx_font from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font.so: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\njava.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font.so: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\n    at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n    at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\n    at (...)\nLoading library javafx_font_freetype from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_freetype.so: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_freetype.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\njava.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_freetype.so: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_freetype.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\n    at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n    at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\n    at (...)\nLoading library javafx_font_pango from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_pango.so: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_pango.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\njava.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_pango.so: /home/jibon/.openjfx/cache/17.0.6/libjavafx_font_pango.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\n    at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n    at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\n    at (...)\n\n(java:1933): Gdk-WARNING **: 13:20:00.341: Native Windows wider or taller than 32767 pixels are not supported\n\n(java:1933): Gdk-WARNING **: 13:20:00.352: Native Windows wider or taller than 32767 pixels are not supported\nLoading library decora_sse from resource failed: java.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libdecora_sse.so: /home/jibon/.openjfx/cache/17.0.6/libdecora_sse.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\njava.lang.UnsatisfiedLinkError: /home/jibon/.openjfx/cache/17.0.6/libdecora_sse.so: /home/jibon/.openjfx/cache/17.0.6/libdecora_sse.so: cannot open shared object file: No such file or directory (Possible cause: can't load AMD 64 .so on a AARCH64 platform)\n    at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n    at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\n    at  (...)\n</code></pre>\n<p>I'm sharing some necessary files.</p>\n<h2>POM.XML</h2>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;pro.jibon.apps&lt;/groupId&gt;\n    &lt;artifactId&gt;LinuxApp1&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;LinuxApp1&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;junit.version&gt;5.9.2&lt;/junit.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;17.0.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;17.0.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-graphics&lt;/artifactId&gt;\n            &lt;version&gt;17.0.6&lt;/version&gt;\n            &lt;classifier&gt;linux&lt;/classifier&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;17&lt;/source&gt;\n                    &lt;target&gt;17&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;pro.jibon.apps.linuxapp1/pro.jibon.apps.linuxapp1.HelloApplication&lt;/mainClass&gt;\n                            &lt;launcher&gt;app&lt;/launcher&gt;\n                            &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\n                            &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;transformers&gt;\n                                &lt;transformer\n                                        implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                                    &lt;mainClass&gt;pro.jibon.apps.linuxapp1.Main&lt;/mainClass&gt;\n                                &lt;/transformer&gt;\n                            &lt;/transformers&gt;\n                            &lt;filters&gt;\n                                &lt;filter&gt;\n                                    &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                    &lt;excludes&gt;\n                                        &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                    &lt;/excludes&gt;\n                                &lt;/filter&gt;\n                            &lt;/filters&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;archive&gt;\n                                &lt;manifest&gt;\n                                    &lt;mainClass&gt;pro.jibon.apps.linuxapp1.Main&lt;/mainClass&gt;\n                                &lt;/manifest&gt;\n                            &lt;/archive&gt;\n                            &lt;descriptorRefs&gt;\n                                &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                            &lt;/descriptorRefs&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<h2>Main.java</h2>\n<pre><code>package pro.jibon.apps.linuxapp1;\n\npublic class Main {\n    public static void main(String[] args) {\n        HelloApplication.main(args);\n    }\n}\n</code></pre>\n<h2>HelloApplication.java</h2>\n<pre><code>package pro.jibon.apps.linuxapp1;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXML;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Alert;\nimport javafx.scene.control.Button;\nimport javafx.scene.input.KeyCombination;\nimport javafx.stage.Stage;\nimport javafx.stage.StageStyle;\n\nimport java.io.IOException;\n\npublic class HelloApplication extends Application {\n    @FXML\n    private Button button1;\n    @Override\n    public void start(Stage stage) throws IOException {\n        FXMLLoader fxmlLoader = new FXMLLoader(HelloApplication.class.getResource(&quot;hello-view.fxml&quot;));\n        Scene scene = new Scene(fxmlLoader.load(), stage.getMaxWidth(), stage.getMaxHeight());\n        stage.setTitle(&quot;Hello!&quot;);\n        stage.setScene(scene);\n        stage.initStyle(StageStyle.UTILITY);\n        stage.show();\n        button1 = (Button) scene.lookup(&quot;#btn&quot;);\n        button1.setText(&quot;Close&quot;);\n        button1.setOnAction(mouseEvent -&gt; {\n            stage.close();\n        });\n        stage.setOnCloseRequest(windowEvent -&gt; {\n            Alert alert = new Alert(Alert.AlertType.ERROR);\n            alert.setTitle(&quot;Wait&quot;);\n            alert.setContentText(&quot;Are feeling okay by clicking me huh?&quot;);\n            alert.setHeaderText(&quot;WTF yaar!&quot;);\n//            alert.show();\n            windowEvent.consume();\n        });\n        stage.setAlwaysOnTop(true);\n        stage.setResizable(false);\n        stage.setMaximized(true);\n        stage.setResizable(false);\n        stage.setFullScreen(true);\n        stage.setFullScreenExitKeyCombination(KeyCombination.NO_MATCH);\n        stage.fullScreenProperty().addListener((observable, oldValue, newValue) -&gt; {\n            stage.setFullScreen(true);\n        });\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n<h2>hello-view.xml</h2>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.geometry.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.effect.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n\n&lt;VBox xmlns=&quot;http://javafx.com/javafx/11.0.14-internal&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot;&gt;\n    &lt;padding&gt;\n        &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot; /&gt;\n    &lt;/padding&gt;\n    &lt;ToolBar nodeOrientation=&quot;LEFT_TO_RIGHT&quot; prefHeight=&quot;40.0&quot; prefWidth=&quot;200.0&quot;&gt;\n        &lt;items&gt;\n            &lt;Button mnemonicParsing=&quot;false&quot; text=&quot;Button&quot; /&gt;\n            &lt;Button mnemonicParsing=&quot;false&quot; text=&quot;Button&quot; /&gt;\n            &lt;Button mnemonicParsing=&quot;false&quot; text=&quot;Button&quot; /&gt;\n            &lt;Button mnemonicParsing=&quot;false&quot; text=&quot;Button&quot; /&gt;\n            &lt;Button mnemonicParsing=&quot;false&quot; text=&quot;Button&quot; /&gt;\n        &lt;/items&gt;\n    &lt;/ToolBar&gt;\n\n    &lt;Label fx:id=&quot;welcomeText&quot; /&gt;\n    &lt;Button fx:id=&quot;btn&quot; alignment=&quot;CENTER&quot; text=&quot;Hello!&quot;&gt;\n        &lt;effect&gt;\n            &lt;Blend /&gt;\n        &lt;/effect&gt;\n    &lt;/Button&gt;\n&lt;/VBox&gt;\n</code></pre>\n<h2>module-info.java</h2>\n<pre><code>module pro.jibon.apps.linuxapp1 {\n    requires javafx.controls;\n    requires javafx.fxml;\n\n\n    opens pro.jibon.apps.linuxapp1 to javafx.fxml;\n    exports pro.jibon.apps.linuxapp1;\n}\n</code></pre>\n<p>Please Help me to get rid out of this :)\nThanks in advance.</p>\n"},{"tags":["java","algorithm","data-structures","dynamic-programming"],"comments":[{"score":1,"post_type":"question","creation_date":1700060910,"post_id":77488693,"comment_id":136608741,"body_markdown":"Fails in what way? Find some input that reproduces the problem and hardcode it into a [mre]. I&#39;m not seeing the `digital signature algorithm` angle, are you sure about the tag?","link":"https://stackoverflow.com/questions/77488693/wrong-output-with-dynamic-programming-on-limited-subway-surfer-challenge#comment136608741_77488693","body":"Fails in what way? Find some input that reproduces the problem and hardcode it into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. I&#39;m not seeing the <code>digital signature algorithm</code> angle, are you sure about the tag?"},{"score":0,"post_type":"question","creation_date":1700060982,"post_id":77488693,"comment_id":136608754,"body_markdown":"The comments are fine, the code less so. Try writing code that does what the comments are saying.","link":"https://stackoverflow.com/questions/77488693/wrong-output-with-dynamic-programming-on-limited-subway-surfer-challenge#comment136608754_77488693","body":"The comments are fine, the code less so. Try writing code that does what the comments are saying."},{"score":0,"post_type":"question","creation_date":1700077971,"post_id":77488693,"comment_id":136611867,"body_markdown":"Do not tag this as `dsa`.  The `dsa` tag is for `Digital Signature Algorithm`.","link":"https://stackoverflow.com/questions/77488693/wrong-output-with-dynamic-programming-on-limited-subway-surfer-challenge#comment136611867_77488693","body":"Do not tag this as <code>dsa</code>.  The <code>dsa</code> tag is for <code>Digital Signature Algorithm</code>."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1700068778,"last_edit_date":1700068778,"creation_date":1700064996,"answer_id":77489330,"question_id":77488693,"body_markdown":"Here are some of the issues:\r\n\r\n* There is this important specification for the challenge:\r\n\r\n    &gt; Our player always begins from the middle lane.\r\n\r\n    This already means that your initialisation of `dp` is wrong. The cost to get in the left lane is 1 (one side step). So the initialisation should be:\r\n\r\n    ```\r\n    dp[0][0] = dp[0][2] = 1;\r\n    dp[0][1] = 0;\r\n    ```\r\n\r\n* `manholes[i] == j + 1` checks the opposite from what you write in comments just below it. This condition is true when lane `j` has a manhole, so in that case you should execute the `else` block.\r\n\r\n* In the `if` block you add 1 to the second argument of the outer `Math.min` call. Combined with the fact that you store `Integer.MAX_VALUE` in some `dp` entries, you risk adding 1 to that value, which evaluates to `Integer.MIN_VALUE` and obviously distorts your results. This is why you got -2147483648 as output in one of your tests. I&#39;d suggest not using `Integer.MAX_VALUE`, but just `N`. That is a large enough value.\r\n\r\n* Your code assumes that a lane switch is possible (in the previous row) even when `dp[i-1][j]` has a manhole. \r\n\r\nNot a problem, but you can reduce the `dp` array to just one dimension (with three entries). You can incrementally update the same triplet to align it to the current point.\r\n\r\nHere is the suggested updated code:\r\n\r\n```\r\n    public int minLaneChanges(int[] manholes) {\r\n        int N = manholes.length - 1;\r\n        int[] dp = new int[]{1, 0, 1}; // Initialise that player is in middle\r\n\r\n        // Iterate over the points\r\n        for (int i = 1; i &lt;= N; i++) {\r\n            // If there is a manhole, invalidate paths that arrive there:\r\n            if (manholes[i] &gt; 0) dp[manholes[i] - 1] = N;\r\n            // Get the best lane at this point \r\n            int best = Math.min(dp[0], Math.min(dp[1], dp[2]));\r\n            // Check if non-best lanes (without hole) can be improved\r\n            //    by jumping sideways from the best lane\r\n            for (int j = 0; j &lt; 3; j++) {\r\n                if (j + 1 != manholes[i]) dp[j] = Math.min(dp[j], best + 1);\r\n            }\r\n        }\r\n        return Math.min(dp[0], Math.min(dp[1], dp[2]));\r\n    }\r\n``` ","link":"https://stackoverflow.com/questions/77488693/wrong-output-with-dynamic-programming-on-limited-subway-surfer-challenge/77489330#77489330","title":"Wrong output with dynamic programming on Limited Subway Surfer challenge","body":"<p>Here are some of the issues:</p>\n<ul>\n<li><p>There is this important specification for the challenge:</p>\n<blockquote>\n<p>Our player always begins from the middle lane.</p>\n</blockquote>\n<p>This already means that your initialisation of <code>dp</code> is wrong. The cost to get in the left lane is 1 (one side step). So the initialisation should be:</p>\n<pre><code>dp[0][0] = dp[0][2] = 1;\ndp[0][1] = 0;\n</code></pre>\n</li>\n<li><p><code>manholes[i] == j + 1</code> checks the opposite from what you write in comments just below it. This condition is true when lane <code>j</code> has a manhole, so in that case you should execute the <code>else</code> block.</p>\n</li>\n<li><p>In the <code>if</code> block you add 1 to the second argument of the outer <code>Math.min</code> call. Combined with the fact that you store <code>Integer.MAX_VALUE</code> in some <code>dp</code> entries, you risk adding 1 to that value, which evaluates to <code>Integer.MIN_VALUE</code> and obviously distorts your results. This is why you got -2147483648 as output in one of your tests. I'd suggest not using <code>Integer.MAX_VALUE</code>, but just <code>N</code>. That is a large enough value.</p>\n</li>\n<li><p>Your code assumes that a lane switch is possible (in the previous row) even when <code>dp[i-1][j]</code> has a manhole.</p>\n</li>\n</ul>\n<p>Not a problem, but you can reduce the <code>dp</code> array to just one dimension (with three entries). You can incrementally update the same triplet to align it to the current point.</p>\n<p>Here is the suggested updated code:</p>\n<pre><code>    public int minLaneChanges(int[] manholes) {\n        int N = manholes.length - 1;\n        int[] dp = new int[]{1, 0, 1}; // Initialise that player is in middle\n\n        // Iterate over the points\n        for (int i = 1; i &lt;= N; i++) {\n            // If there is a manhole, invalidate paths that arrive there:\n            if (manholes[i] &gt; 0) dp[manholes[i] - 1] = N;\n            // Get the best lane at this point \n            int best = Math.min(dp[0], Math.min(dp[1], dp[2]));\n            // Check if non-best lanes (without hole) can be improved\n            //    by jumping sideways from the best lane\n            for (int j = 0; j &lt; 3; j++) {\n                if (j + 1 != manholes[i]) dp[j] = Math.min(dp[j], best + 1);\n            }\n        }\n        return Math.min(dp[0], Math.min(dp[1], dp[2]));\n    }\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1701536072,"creation_date":1701536072,"answer_id":77591301,"question_id":77488693,"body_markdown":"\r\nThe issue in your code arises from the initialization of the dynamic programming matrix (dp). Given the requirement that the player always starts from the middle lane, the initial values of **dp[0][0]** and **dp[0][2]** should be set to **1 instead of 0**. Additionally, the condition manholes**[i] == j + 1** should be changed to manholes**[i] == j + 1** to properly identify lanes with manholes. Lastly, using Integer.MAX_VALUE might lead to unexpected results; consider using a large enough value like N instead. Here&#39;s a revised version of your code snippet that addresses these concerns:\r\n   \r\n\r\n        public int minLaneChanges(int[] manholes) {\r\n        int N = manholes.length - 1;\r\n        int[][] dp = new int[N + 1][3];\r\n    \r\n        // Set initial values\r\n        dp[0][0] = dp[0][2] = 1;\r\n        dp[0][1] = 0;\r\n    \r\n        // Iterate over the points\r\n        for (int i = 1; i &lt;= N; i++) {\r\n            // Iterate over the lanes\r\n            for (int j = 0; j &lt; 3; j++) {\r\n                if (manholes[i] == j + 1) {\r\n                    // Manhole on the same lane, find minimum lane change\r\n                    dp[i][j] = Math.min(dp[i-1][j], Math.min(dp[i - 1][(j + 1) % 3], dp[i - 1][(j + 2) % 3]) + 1);\r\n                } else {\r\n                    dp[i][j] = N;\r\n                }\r\n            }\r\n        }\r\n    \r\n        return Math.min(dp[N][0], Math.min(dp[N][1], dp[N][2]));\r\n    }\r\n\r\n\r\nThis revised approach should align with the requirements of the problem and improve the calculation of lane changes needed for the player to reach their destination.\r\n\r\n","link":"https://stackoverflow.com/questions/77488693/wrong-output-with-dynamic-programming-on-limited-subway-surfer-challenge/77591301#77591301","title":"Wrong output with dynamic programming on Limited Subway Surfer challenge","body":"<p>The issue in your code arises from the initialization of the dynamic programming matrix (dp). Given the requirement that the player always starts from the middle lane, the initial values of <strong>dp[0][0]</strong> and <strong>dp[0][2]</strong> should be set to <strong>1 instead of 0</strong>. Additionally, the condition manholes**[i] == j + 1** should be changed to manholes**[i] == j + 1** to properly identify lanes with manholes. Lastly, using Integer.MAX_VALUE might lead to unexpected results; consider using a large enough value like N instead. Here's a revised version of your code snippet that addresses these concerns:</p>\n<pre><code>    public int minLaneChanges(int[] manholes) {\n    int N = manholes.length - 1;\n    int[][] dp = new int[N + 1][3];\n\n    // Set initial values\n    dp[0][0] = dp[0][2] = 1;\n    dp[0][1] = 0;\n\n    // Iterate over the points\n    for (int i = 1; i &lt;= N; i++) {\n        // Iterate over the lanes\n        for (int j = 0; j &lt; 3; j++) {\n            if (manholes[i] == j + 1) {\n                // Manhole on the same lane, find minimum lane change\n                dp[i][j] = Math.min(dp[i-1][j], Math.min(dp[i - 1][(j + 1) % 3], dp[i - 1][(j + 2) % 3]) + 1);\n            } else {\n                dp[i][j] = N;\n            }\n        }\n    }\n\n    return Math.min(dp[N][0], Math.min(dp[N][1], dp[N][2]));\n}\n</code></pre>\n<p>This revised approach should align with the requirements of the problem and improve the calculation of lane changes needed for the player to reach their destination.</p>\n"}],"comment_count":3,"is_answered":true,"view_count":116,"answer_count":2,"score":-2,"last_activity_date":1701536072,"creation_date":1700059605,"last_edit_date":1700077980,"question_id":77488693,"body_markdown":"I tried solving this code challenge using Dynamic Programming, but I do not get expected result.\r\n\r\n## The &quot;Limited Subway Surfer&quot; challenge\r\n\r\n&gt; Nidhi has created an alternate version of Subway Surfer game. Her new version is not on a train track unlimited length, rather limited to a track of length N + 1. Just like the original game, this alternate version also has three lanes.\r\n&gt; \r\n&gt; The track has points on it ranging from 0 to N.\r\n&gt; \r\n&gt; In the three lanes, at some points, certain manholes are present. Now, to avoid these manholes, our player needs to jump sideways and switch lanes, as he cannot go from i to (i + 1)&lt;sup&gt;th&lt;/sup&gt; point on the same lane if there is no manhole on the lane at point i + 1.\r\n&gt; \r\n&gt; You are given an array&#160;manholes&#160;of length N + 1 where `manholes[i]` tells us on which lane is the manhole present for point i. For example, if `manholes[2]` = 1, this means that on point 2 of the train track, a manhole is present on lane 1.\r\n&gt; \r\n&gt; Find the minimum number of lane changes our player has to perform in order to reach from point 0 to point N on the train track.\r\n&gt; \r\n&gt; ### Note:\r\n&gt; \r\n&gt; If `manholes[i]` = 0, this means that for point i, there is no manhole present on any lane.\r\n&gt; \r\n&gt; `manholes[0]` and `manholes[N]` are always 0.\r\n&gt; \r\n&gt; ### Input Format:\r\n&gt; \r\n&gt; First line of input contains integer T, representing the number of test cases.\r\n&gt; \r\n&gt; First line of each test case contains the integer N.\r\n&gt; \r\n&gt; Second line of each test case contains N + 1 space separated integers, representing manholes[i].\r\n&gt; \r\n&gt; Our player always begins from the middle lane.\r\n&gt; \r\n&gt; ### Constraints:\r\n&gt; \r\n&gt; * `manholes.length == n + 1`\r\n&gt; * `1 &lt;= t &lt;= 100`\r\n&gt; * `1 &lt;= N &lt;= 5 * 10`&lt;sup&gt;`4`&lt;/sup&gt;\r\n&gt; * `0 &lt;= manholes[i] &lt;= 3`\r\n&gt; * `manholes[0] == manholes[n] == 0`\r\n&gt; \r\n&gt; ### Output Format:\r\n&gt; \r\n&gt; Minimum number of lane changes to reach from point 0 to N.\r\n&gt; \r\n&gt; ### Sample Input:\r\n&gt; ```\r\n&gt; 4\r\n&gt; 0 1 2 3 0\r\n&gt; ```\r\n&gt; \r\n&gt; ### Sample Output:\r\n&gt; \r\n&gt; ```\r\n&gt; 2\r\n&gt; ```\r\n&gt; \r\n&gt; ### Explanation:\r\n&gt; The optimal path followed by our player is shown in the image below:\r\n&gt; \r\n&gt; It is clear that to reach from point 0 till point N optimally, our player will have to change lanes twice at minimum.\r\n&gt; \r\n&gt; [![enter image description here][1]][1]\r\n\r\n## Attempt\r\n\r\nMy code for the above challenge is:\r\n\r\n```\r\n    public int minLaneChanges(int[] manholes) {\r\n        int N = manholes.length - 1;\r\n        int[][] dp = new int[N + 1][3];\r\n\r\n        // Set initial values\r\n        dp[0][0] = dp[0][2] = 0;\r\n\r\n        // Iterate over the points\r\n        for (int i = 1; i &lt;= N; i++) {\r\n            // Iterate over the lanes\r\n            for (int j = 0; j &lt; 3; j++) {\r\n                if (manholes[i] == 0 || manholes[i] == j + 1) {\r\n                    // Manhole on a different lane, find minimum lane change\r\n                    dp[i][j] = Math.min(dp[i-1][j], Math.min(dp[i - 1][(j + 1) % 3], dp[i - 1][(j + 2) % 3]) + 1);\r\n                } else {\r\n                    dp[i][j] = Integer.MAX_VALUE;\r\n                }\r\n            }\r\n        }\r\n\r\n        return Math.min(dp[N][0], Math.min(dp[N][1], dp[N][2]));\r\n        \r\n    }\r\n```\r\n\r\nMy approach is to start in the first row, then I iterate each row and column from second row. If I see a hurdle/Manhole I set the current position value to Max value, else I set the current value to min(previous position on same lane, min(previous of other lanes)+1).\r\n\r\nFinally I return min among the last row.\r\n\r\nMy approach fails. For the example input above, it outputs -2147483648.\r\nWhat is the mistake? \r\n\r\n  [1]: https://i.stack.imgur.com/diNi1.png","link":"https://stackoverflow.com/questions/77488693/wrong-output-with-dynamic-programming-on-limited-subway-surfer-challenge","title":"Wrong output with dynamic programming on Limited Subway Surfer challenge","body":"<p>I tried solving this code challenge using Dynamic Programming, but I do not get expected result.</p>\n<h2>The &quot;Limited Subway Surfer&quot; challenge</h2>\n<blockquote>\n<p>Nidhi has created an alternate version of Subway Surfer game. Her new version is not on a train track unlimited length, rather limited to a track of length N + 1. Just like the original game, this alternate version also has three lanes.</p>\n<p>The track has points on it ranging from 0 to N.</p>\n<p>In the three lanes, at some points, certain manholes are present. Now, to avoid these manholes, our player needs to jump sideways and switch lanes, as he cannot go from i to (i + 1)<sup>th</sup> point on the same lane if there is no manhole on the lane at point i + 1.</p>\n<p>You are given an array manholes of length N + 1 where <code>manholes[i]</code> tells us on which lane is the manhole present for point i. For example, if <code>manholes[2]</code> = 1, this means that on point 2 of the train track, a manhole is present on lane 1.</p>\n<p>Find the minimum number of lane changes our player has to perform in order to reach from point 0 to point N on the train track.</p>\n<h3>Note:</h3>\n<p>If <code>manholes[i]</code> = 0, this means that for point i, there is no manhole present on any lane.</p>\n<p><code>manholes[0]</code> and <code>manholes[N]</code> are always 0.</p>\n<h3>Input Format:</h3>\n<p>First line of input contains integer T, representing the number of test cases.</p>\n<p>First line of each test case contains the integer N.</p>\n<p>Second line of each test case contains N + 1 space separated integers, representing manholes[i].</p>\n<p>Our player always begins from the middle lane.</p>\n<h3>Constraints:</h3>\n<ul>\n<li><code>manholes.length == n + 1</code></li>\n<li><code>1 &lt;= t &lt;= 100</code></li>\n<li><code>1 &lt;= N &lt;= 5 * 10</code><sup><code>4</code></sup></li>\n<li><code>0 &lt;= manholes[i] &lt;= 3</code></li>\n<li><code>manholes[0] == manholes[n] == 0</code></li>\n</ul>\n<h3>Output Format:</h3>\n<p>Minimum number of lane changes to reach from point 0 to N.</p>\n<h3>Sample Input:</h3>\n<pre><code>4\n0 1 2 3 0\n</code></pre>\n<h3>Sample Output:</h3>\n<pre><code>2\n</code></pre>\n<h3>Explanation:</h3>\n<p>The optimal path followed by our player is shown in the image below:</p>\n<p>It is clear that to reach from point 0 till point N optimally, our player will have to change lanes twice at minimum.</p>\n<p><a href=\"https://i.stack.imgur.com/diNi1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/diNi1.png\" alt=\"enter image description here\" /></a></p>\n</blockquote>\n<h2>Attempt</h2>\n<p>My code for the above challenge is:</p>\n<pre><code>    public int minLaneChanges(int[] manholes) {\n        int N = manholes.length - 1;\n        int[][] dp = new int[N + 1][3];\n\n        // Set initial values\n        dp[0][0] = dp[0][2] = 0;\n\n        // Iterate over the points\n        for (int i = 1; i &lt;= N; i++) {\n            // Iterate over the lanes\n            for (int j = 0; j &lt; 3; j++) {\n                if (manholes[i] == 0 || manholes[i] == j + 1) {\n                    // Manhole on a different lane, find minimum lane change\n                    dp[i][j] = Math.min(dp[i-1][j], Math.min(dp[i - 1][(j + 1) % 3], dp[i - 1][(j + 2) % 3]) + 1);\n                } else {\n                    dp[i][j] = Integer.MAX_VALUE;\n                }\n            }\n        }\n\n        return Math.min(dp[N][0], Math.min(dp[N][1], dp[N][2]));\n        \n    }\n</code></pre>\n<p>My approach is to start in the first row, then I iterate each row and column from second row. If I see a hurdle/Manhole I set the current position value to Max value, else I set the current value to min(previous position on same lane, min(previous of other lanes)+1).</p>\n<p>Finally I return min among the last row.</p>\n<p>My approach fails. For the example input above, it outputs -2147483648.\nWhat is the mistake?</p>\n"},{"tags":["java","debugging","selenium-chromedriver"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701531470,"last_edit_date":1701531470,"creation_date":1698809120,"answer_id":77400177,"question_id":77240935,"body_markdown":"**Option #1:**\r\n\r\nThe question was resolved thanks to [the colleague&#39;s recommendation][1] in the following manner:\r\n\r\n    public void run() {\r\n        ChromeOptions options = new ChromeOptions();\r\n\r\n        WebDriverManager.chromedriver().browserVersion(&quot;118.0.5993.118&quot;).setup(); \r\n// after changing version from `114.0.5735.90` (in the `C:\\Users\\invzbl3\\.m2\\repository\\webdriver\\chromedriver\\win32` folder)\r\n\r\nto `118.0.5993.118` *manually*.\r\n\r\n\r\n        options.addArguments(&quot;--headless&quot;);\r\n        options.addArguments(&quot;--disable-gpu&quot;);\r\n        options.addArguments(&quot;--disable-extensions&quot;);\r\n        WebDriverManager.chromedriver().setup();\r\n\r\n        ChromeDriver driver = new ChromeDriver(options);\r\n        driver.get(&quot;https://gearbest.net&quot;);\r\n        WebElement ulElement = driver\r\n                .findElement(By\r\n                        .xpath(&quot;/html/body/div[12]/div/div/div/div[2]/div/ul/li[2]&quot;));\r\n        List&lt;WebElement&gt; liElements = ulElement.findElements(By.tagName(&quot;div&quot;));\r\n\r\n        // class of the whole element\r\n        liElements.forEach(liElement -&gt; {\r\n            //String str = &quot;&quot;;\r\n               /* Element aElement = liElement.select(&quot;a&quot;).first(); // header of element\r\n                String url = aElement.attr(&quot;href&quot;);\r\n                String title = aElement.attr(&quot;title&quot;); // title of element\r\n                Element spanElement = liElement.select(&quot;span&quot;).first();\r\n                String price = spanElement.attr(&quot;data-mall-price&quot;); // price of element*/\r\n                ...            \r\n            });\r\n        }\r\n    }\r\n\r\nwith [dependency][2] accordingly as:\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n        &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n        &lt;version&gt;5.6.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nversions as:\r\n`3.8.1` &amp; `5.3.2` are also suitable per provided requirements.\r\n\r\n**To be noticed:**\r\n\r\nIt works without any problem, but I don&#39;t have this specific version in the folder while setupping it *manually*, for some reason:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nSo, if someone finds a way how to setup it *manually* to get updated version of the `Chromedriver` in the folder directly, as well, it would be great.\r\n\r\n\r\n----------\r\n\r\n\r\n**Option #2:**\r\n\r\nCheck the version of the *dependency* &amp; *downgrade* it to lower one, as for instance: from **4**.x.x to **3**.x.x.\r\n\r\nInstead of:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;4.x.x&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nto:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;3.x.x&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n----------\r\n*UPD:*\r\n\r\n**To clarify:**\r\n\r\nI suppose it happens due to differences in internal instructions of *different* dependency versions, but what exactly it hards to say, at the current moment.\r\n\r\n  [1]: https://stackoverflow.com/a/35867325/8370915\r\n  [2]: https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager/5.6.0\r\n  [3]: https://i.stack.imgur.com/FXGzg.png","link":"https://stackoverflow.com/questions/77240935/how-to-unfreeze-debugger-while-using-selenium-chromedriver/77400177#77400177","title":"How to unfreeze debugger while using Selenium ChromeDriver?","body":"<p><strong>Option #1:</strong></p>\n<p>The question was resolved thanks to <a href=\"https://stackoverflow.com/a/35867325/8370915\">the colleague's recommendation</a> in the following manner:</p>\n<pre><code>public void run() {\n    ChromeOptions options = new ChromeOptions();\n\n    WebDriverManager.chromedriver().browserVersion(&quot;118.0.5993.118&quot;).setup(); \n</code></pre>\n<p>// after changing version from <code>114.0.5735.90</code> (in the <code>C:\\Users\\invzbl3\\.m2\\repository\\webdriver\\chromedriver\\win32</code> folder)</p>\n<p>to <code>118.0.5993.118</code> <em>manually</em>.</p>\n<pre><code>    options.addArguments(&quot;--headless&quot;);\n    options.addArguments(&quot;--disable-gpu&quot;);\n    options.addArguments(&quot;--disable-extensions&quot;);\n    WebDriverManager.chromedriver().setup();\n\n    ChromeDriver driver = new ChromeDriver(options);\n    driver.get(&quot;https://gearbest.net&quot;);\n    WebElement ulElement = driver\n            .findElement(By\n                    .xpath(&quot;/html/body/div[12]/div/div/div/div[2]/div/ul/li[2]&quot;));\n    List&lt;WebElement&gt; liElements = ulElement.findElements(By.tagName(&quot;div&quot;));\n\n    // class of the whole element\n    liElements.forEach(liElement -&gt; {\n        //String str = &quot;&quot;;\n           /* Element aElement = liElement.select(&quot;a&quot;).first(); // header of element\n            String url = aElement.attr(&quot;href&quot;);\n            String title = aElement.attr(&quot;title&quot;); // title of element\n            Element spanElement = liElement.select(&quot;span&quot;).first();\n            String price = spanElement.attr(&quot;data-mall-price&quot;); // price of element*/\n            ...            \n        });\n    }\n}\n</code></pre>\n<p>with <a href=\"https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager/5.6.0\" rel=\"nofollow noreferrer\">dependency</a> accordingly as:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n    &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n    &lt;version&gt;5.6.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>versions as:\n<code>3.8.1</code> &amp; <code>5.3.2</code> are also suitable per provided requirements.</p>\n<p><strong>To be noticed:</strong></p>\n<p>It works without any problem, but I don't have this specific version in the folder while setupping it <em>manually</em>, for some reason:</p>\n<p><a href=\"https://i.stack.imgur.com/FXGzg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FXGzg.png\" alt=\"enter image description here\" /></a></p>\n<p>So, if someone finds a way how to setup it <em>manually</em> to get updated version of the <code>Chromedriver</code> in the folder directly, as well, it would be great.</p>\n<hr />\n<p><strong>Option #2:</strong></p>\n<p>Check the version of the <em>dependency</em> &amp; <em>downgrade</em> it to lower one, as for instance: from <strong>4</strong>.x.x to <strong>3</strong>.x.x.</p>\n<p>Instead of:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n        &lt;version&gt;4.x.x&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>to:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n        &lt;version&gt;3.x.x&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<hr />\n<p><em>UPD:</em></p>\n<p><strong>To clarify:</strong></p>\n<p>I suppose it happens due to differences in internal instructions of <em>different</em> dependency versions, but what exactly it hards to say, at the current moment.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":361,"answer_count":1,"score":0,"last_activity_date":1701531470,"creation_date":1696545322,"last_edit_date":1698453531,"question_id":77240935,"body_markdown":"Tested on versions as: \r\n\r\n1) Java `11.0.9` (Zulu)\r\n2) Selenium-chrome-driver: \r\n`3.0.0`, `3.0.1`, `3.1.0`, `3.2.0`, `3.3.0`, `3.3.1`, `3.4.0`, `3.5.1`, `3.5.2`, `3.5.3`, `3.6.0`, `3.7.0`, `3.7.1` ... up to `3.141.59`, ... `4.9.0`.\r\n\r\n3) WebDriverManager `3.8.1` &amp; `3.6.2`.\r\n\r\nI&#39;m working with the following snippet of the code as provided below:\r\n\r\n&gt; Some part of code I skipped for representing better view.\r\n\r\n```\r\nimport com.mongodb.client.model.IndexOptions;\r\nimport com.mongodb.client.model.Indexes;\r\nimport io.github.bonigarcia.wdm.WebDriverManager;\r\nimport org.bson.Document;\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.chrome.ChromeOptions;\r\nimport project.DatabaseConnections;\r\nimport java.util.Date;\r\nimport java.util.List;\r\nimport java.util.concurrent.TimeUnit;\r\nimport static com.mongodb.client.model.Filters.*;\r\n\r\npublic class GBFeedReader implements Runnable {\r\n\r\n    public void run() {\r\n        ChromeOptions options = new ChromeOptions();\r\n        options.addArguments(&quot;--headless&quot;);\r\n        options.addArguments(&quot;--disable-gpu&quot;);\r\n        options.addArguments(&quot;--disable-extensions&quot;);\r\n        WebDriverManager.chromedriver().setup();\r\n\r\n        ChromeDriver driver = new ChromeDriver(options); // the debugger is freezing after this specific line \r\n        driver.get(&quot;https://gearbest.net&quot;);\r\n        WebElement ulElement = driver\r\n                .findElement(By\r\n                        .xpath(&quot;/html/body/div[12]/div/div/div/div[2]/div/ul/li[2]&quot;));\r\n        List&lt;WebElement&gt; liElements = ulElement.findElements(By.tagName(&quot;div&quot;));\r\n\r\n            // class of the whole element\r\n            liElements.forEach(liElement -&gt; {\r\n                //String str = &quot;&quot;;\r\n               /* Element aElement = liElement.select(&quot;a&quot;).first(); // header of element\r\n                String url = aElement.attr(&quot;href&quot;);\r\n                String title = aElement.attr(&quot;title&quot;); // title of element\r\n                Element spanElement = liElement.select(&quot;span&quot;).first();\r\n                String price = spanElement.attr(&quot;data-mall-price&quot;); // price of element*/\r\n                ...\r\n             });\r\n         }\r\n    }\r\n```\r\n\r\nMy `POM` file is as below:\r\n\r\n[POM file][1]\r\n\r\n**What I have already tried:**\r\n\r\n1. I have tried to comment *fully* block of [tag:google-chrome] options:\r\n\r\n        options.addArguments(&quot;--headless&quot;);\r\n        options.addArguments(&quot;--disable-gpu&quot;);\r\n        options.addArguments(&quot;--disable-extensions&quot;);\r\n\r\nand re-debugg this code.\r\n\r\n2. I have tried to use versions in `POM` for `Maven` dependency as:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;3.141.59&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nand: \r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;\r\n            &lt;version&gt;4.9.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nand still the debugger is freezing.\r\n\r\n3. I have tried to go deeply inside business logic of the class `ChromeDriver` and see how it goes under the hood, so what I see is:\r\n\r\nin `DriverService.class` the debugger shows as:\r\n\r\n        public DS build() {\r\n            if (this.port == 0) {\r\n                this.port = PortProber.findFreePort();\r\n            }\r\n\r\n            if (this.exe == null) {\r\n                this.exe = this.findDefaultExecutable();\r\n            }\r\n\r\n            ImmutableList&lt;String&gt; args = this.createArgs(); // args: size = 1\r\n            return this.createDriverService(this.exe, this.port, args, this.environment); // port: 48393 exe: &quot;C:\\Users\\invzbl3\\.m2\\repository\\webdriver\\chromedriver\\win32\\114.0.5735.90\\chromedriver.exe&quot;\r\n        }\r\n\r\n[![enter image description here](https://i.stack.imgur.com/UdgJy.png)](https://i.stack.imgur.com/UdgJy.png)\r\n\r\n4. I have checked similar questions as, for instance:\r\n\r\n[Chrome &#39;paused in debugger&#39; issue][2]  \r\n[Paused in debugger in chrome?][3]\r\n\r\nbut it doesn&#39;t look as my use case or I don&#39;t fully understand how it helps me here.\r\n\r\nAt the same time, my output in the console is as below:\r\n\r\n```\r\n&quot;C:\\Program Files\\Java\\zulu11.43.55-ca-jdk11.0.9.1-win_x64\\bin\\java.exe&quot; -agentlib:jdwp=transport=dt_socket,address=127.0.0.1:62518,suspend=y,server=n -javaagent:C:\\Users\\invzbl3\\AppData\\Local\\JetBrains\\IntelliJIdea2022.3\\captureAgent\\debugger-agent.jar -Dfile.encoding=UTF-8 -classpath &quot;E:\\IdeaProject\\WGIbot\\target\\classes;C:\\Users\\invzbl3\\.m2\\repository\\org\\telegram\\telegrambots\\4.2\\telegrambots-4.2.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\telegram\\telegrambots-meta\\4.2\\telegrambots-meta-4.2.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\google\\inject\\guice\\4.2.2\\guice-4.2.2.jar;C:\\Users\\invzbl3\\.m2\\repository\\javax\\inject\\javax.inject\\1\\javax.inject-1.jar;C:\\Users\\invzbl3\\.m2\\repository\\aopalliance\\aopalliance\\1.0\\aopalliance-1.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-annotations\\2.9.0\\jackson-annotations-2.9.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\fasterxml\\jackson\\jaxrs\\jackson-jaxrs-json-provider\\2.9.8\\jackson-jaxrs-json-provider-2.9.8.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\fasterxml\\jackson\\jaxrs\\jackson-jaxrs-base\\2.9.8\\jackson-jaxrs-base-2.9.8.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\fasterxml\\jackson\\module\\jackson-module-jaxb-annotations\\2.9.8\\jackson-module-jaxb-annotations-2.9.8.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-databind\\2.9.8\\jackson-databind-2.9.8.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-core\\2.9.8\\jackson-core-2.9.8.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\media\\jersey-media-json-jackson\\2.25.1\\jersey-media-json-jackson-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\core\\jersey-common\\2.25.1\\jersey-common-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\bundles\\repackaged\\jersey-guava\\2.25.1\\jersey-guava-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\hk2\\osgi-resource-locator\\1.0.1\\osgi-resource-locator-1.0.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\ext\\jersey-entity-filtering\\2.25.1\\jersey-entity-filtering-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\containers\\jersey-container-grizzly2-http\\2.25.1\\jersey-container-grizzly2-http-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\hk2\\external\\javax.inject\\2.5.0-b32\\javax.inject-2.5.0-b32.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\grizzly\\grizzly-http-server\\2.3.28\\grizzly-http-server-2.3.28.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\grizzly\\grizzly-http\\2.3.28\\grizzly-http-2.3.28.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\grizzly\\grizzly-framework\\2.3.28\\grizzly-framework-2.3.28.jar;C:\\Users\\invzbl3\\.m2\\repository\\javax\\ws\\rs\\javax.ws.rs-api\\2.0.1\\javax.ws.rs-api-2.0.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\core\\jersey-server\\2.25.1\\jersey-server-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\core\\jersey-client\\2.25.1\\jersey-client-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\media\\jersey-media-jaxb\\2.25.1\\jersey-media-jaxb-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\javax\\annotation\\javax.annotation-api\\1.2\\javax.annotation-api-1.2.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\hk2\\hk2-api\\2.5.0-b32\\hk2-api-2.5.0-b32.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\hk2\\hk2-utils\\2.5.0-b32\\hk2-utils-2.5.0-b32.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\hk2\\external\\aopalliance-repackaged\\2.5.0-b32\\aopalliance-repackaged-2.5.0-b32.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\hk2\\hk2-locator\\2.5.0-b32\\hk2-locator-2.5.0-b32.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\javassist\\javassist\\3.20.0-GA\\javassist-3.20.0-GA.jar;C:\\Users\\invzbl3\\.m2\\repository\\javax\\validation\\validation-api\\1.1.0.Final\\validation-api-1.1.0.Final.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\json\\json\\20180813\\json-20180813.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\httpcomponents\\httpclient\\4.5.3\\httpclient-4.5.3.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\httpcomponents\\httpcore\\4.4.6\\httpcore-4.4.6.jar;C:\\Users\\invzbl3\\.m2\\repository\\commons-logging\\commons-logging\\1.2\\commons-logging-1.2.jar;C:\\Users\\invzbl3\\.m2\\repository\\commons-codec\\commons-codec\\1.9\\commons-codec-1.9.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\httpcomponents\\httpmime\\4.5.3\\httpmime-4.5.3.jar;C:\\Users\\invzbl3\\.m2\\repository\\commons-io\\commons-io\\2.5\\commons-io-2.5.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-java\\3.141.59\\selenium-java-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-api\\3.141.59\\selenium-api-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-chrome-driver\\3.141.59\\selenium-chrome-driver-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-edge-driver\\3.141.59\\selenium-edge-driver-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-firefox-driver\\3.141.59\\selenium-firefox-driver-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-ie-driver\\3.141.59\\selenium-ie-driver-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-opera-driver\\3.141.59\\selenium-opera-driver-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-remote-driver\\3.141.59\\selenium-remote-driver-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-safari-driver\\3.141.59\\selenium-safari-driver-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-support\\3.141.59\\selenium-support-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\net\\bytebuddy\\byte-buddy\\1.8.15\\byte-buddy-1.8.15.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\commons\\commons-exec\\1.3\\commons-exec-1.3.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\google\\guava\\guava\\25.0-jre\\guava-25.0-jre.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\google\\code\\findbugs\\jsr305\\1.3.9\\jsr305-1.3.9.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\checkerframework\\checker-compat-qual\\2.0.0\\checker-compat-qual-2.0.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\google\\errorprone\\error_prone_annotations\\2.1.3\\error_prone_annotations-2.1.3.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\google\\j2objc\\j2objc-annotations\\1.1\\j2objc-annotations-1.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\codehaus\\mojo\\animal-sniffer-annotations\\1.14\\animal-sniffer-annotations-1.14.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\squareup\\okio\\okio\\1.14.0\\okio-1.14.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\io\\github\\bonigarcia\\webdrivermanager\\3.8.1\\webdrivermanager-3.8.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\slf4j\\slf4j-api\\1.7.25\\slf4j-api-1.7.25.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\google\\code\\gson\\gson\\2.8.5\\gson-2.8.5.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\rauschig\\jarchivelib\\1.0.0\\jarchivelib-1.0.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\commons\\commons-compress\\1.18\\commons-compress-1.18.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\slf4j\\slf4j-log4j12\\1.7.5\\slf4j-log4j12-1.7.5.jar;C:\\Users\\invzbl3\\.m2\\repository\\log4j\\log4j\\1.2.17\\log4j-1.2.17.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\jsoup\\jsoup\\1.8.3\\jsoup-1.8.3.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\vdurmont\\emoji-java\\4.0.0\\emoji-java-4.0.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\joda-time\\joda-time\\2.10.1\\joda-time-2.10.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\commons\\commons-lang3\\3.5\\commons-lang3-3.5.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\mongodb\\mongodb-driver-sync\\3.11.0\\mongodb-driver-sync-3.11.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\mongodb\\bson\\3.11.0\\bson-3.11.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\mongodb\\mongodb-driver-core\\3.11.0\\mongodb-driver-core-3.11.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\squareup\\okhttp3\\okhttp\\3.14.0\\okhttp-3.14.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\telegram\\telegrambots-chat-session-bot\\4.3.1\\telegrambots-chat-session-bot-4.3.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-core\\1.4.0\\shiro-core-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-lang\\1.4.0\\shiro-lang-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-cache\\1.4.0\\shiro-cache-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-crypto-hash\\1.4.0\\shiro-crypto-hash-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-crypto-core\\1.4.0\\shiro-crypto-core-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-crypto-cipher\\1.4.0\\shiro-crypto-cipher-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-config-core\\1.4.0\\shiro-config-core-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-config-ogdl\\1.4.0\\shiro-config-ogdl-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\commons-beanutils\\commons-beanutils\\1.9.3\\commons-beanutils-1.9.3.jar;C:\\Users\\invzbl3\\.m2\\repository\\commons-collections\\commons-collections\\3.2.2\\commons-collections-3.2.2.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-event\\1.4.0\\shiro-event-1.4.0.jar;C:\\Program Files\\JetBrains\\IntelliJ IDEA 2020.2.3\\lib\\idea_rt.jar&quot; project.Main\r\nConnected to the target VM, address: &#39;127.0.0.1:62518&#39;, transport: &#39;socket&#39;\r\nWARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by com.google.inject.internal.cglib.core.$ReflectUtils$1 (file:/C:/Users/invzbl3/.m2/repository/com/google/inject/guice/4.2.2/guice-4.2.2.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)\r\nWARNING: Please consider reporting this to the maintainers of com.google.inject.internal.cglib.core.$ReflectUtils$1\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release\r\nStarting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 33800\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\nStarting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 12359\r\nOnly local connections are allowed.\r\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\r\nChromeDriver was started successfully.\r\nChromeDriver was started successfully.\r\n\r\n```\r\n\r\nPersonally, I&#39;m still looking for any ideas how to solve it, if I find something as a solution, I&#39;ll update this question with own results &amp; attempts, but, as for now, the problem still exists.\r\n\r\nThank you in advance for any helpful recommendations or thoughts.\r\n\r\nI&#39;ll apreciate it, colleagues :)\r\n\r\n\r\n  [1]: https://gist.github.com/invzbl3/05368f91e3a74d59c6558942b125a021#file-pom-java-L66\r\n  [2]: https://stackoverflow.com/q/13013639/8370915\r\n  [3]: https://stackoverflow.com/q/12833514/8370915","link":"https://stackoverflow.com/questions/77240935/how-to-unfreeze-debugger-while-using-selenium-chromedriver","title":"How to unfreeze debugger while using Selenium ChromeDriver?","body":"<p>Tested on versions as:</p>\n<ol>\n<li><p>Java <code>11.0.9</code> (Zulu)</p>\n</li>\n<li><p>Selenium-chrome-driver:\n<code>3.0.0</code>, <code>3.0.1</code>, <code>3.1.0</code>, <code>3.2.0</code>, <code>3.3.0</code>, <code>3.3.1</code>, <code>3.4.0</code>, <code>3.5.1</code>, <code>3.5.2</code>, <code>3.5.3</code>, <code>3.6.0</code>, <code>3.7.0</code>, <code>3.7.1</code> ... up to <code>3.141.59</code>, ... <code>4.9.0</code>.</p>\n</li>\n<li><p>WebDriverManager <code>3.8.1</code> &amp; <code>3.6.2</code>.</p>\n</li>\n</ol>\n<p>I'm working with the following snippet of the code as provided below:</p>\n<blockquote>\n<p>Some part of code I skipped for representing better view.</p>\n</blockquote>\n<pre><code>import com.mongodb.client.model.IndexOptions;\nimport com.mongodb.client.model.Indexes;\nimport io.github.bonigarcia.wdm.WebDriverManager;\nimport org.bson.Document;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.chrome.ChromeOptions;\nimport project.DatabaseConnections;\nimport java.util.Date;\nimport java.util.List;\nimport java.util.concurrent.TimeUnit;\nimport static com.mongodb.client.model.Filters.*;\n\npublic class GBFeedReader implements Runnable {\n\n    public void run() {\n        ChromeOptions options = new ChromeOptions();\n        options.addArguments(&quot;--headless&quot;);\n        options.addArguments(&quot;--disable-gpu&quot;);\n        options.addArguments(&quot;--disable-extensions&quot;);\n        WebDriverManager.chromedriver().setup();\n\n        ChromeDriver driver = new ChromeDriver(options); // the debugger is freezing after this specific line \n        driver.get(&quot;https://gearbest.net&quot;);\n        WebElement ulElement = driver\n                .findElement(By\n                        .xpath(&quot;/html/body/div[12]/div/div/div/div[2]/div/ul/li[2]&quot;));\n        List&lt;WebElement&gt; liElements = ulElement.findElements(By.tagName(&quot;div&quot;));\n\n            // class of the whole element\n            liElements.forEach(liElement -&gt; {\n                //String str = &quot;&quot;;\n               /* Element aElement = liElement.select(&quot;a&quot;).first(); // header of element\n                String url = aElement.attr(&quot;href&quot;);\n                String title = aElement.attr(&quot;title&quot;); // title of element\n                Element spanElement = liElement.select(&quot;span&quot;).first();\n                String price = spanElement.attr(&quot;data-mall-price&quot;); // price of element*/\n                ...\n             });\n         }\n    }\n</code></pre>\n<p>My <code>POM</code> file is as below:</p>\n<p><a href=\"https://gist.github.com/invzbl3/05368f91e3a74d59c6558942b125a021#file-pom-java-L66\" rel=\"nofollow noreferrer\">POM file</a></p>\n<p><strong>What I have already tried:</strong></p>\n<ol>\n<li><p>I have tried to comment <em>fully</em> block of <a href=\"/questions/tagged/google-chrome\" class=\"post-tag\" title=\"show questions tagged &#39;google-chrome&#39;\" aria-label=\"show questions tagged &#39;google-chrome&#39;\" rel=\"tag\" aria-labelledby=\"tag-google-chrome-tooltip-container\">google-chrome</a> options:</p>\n<pre><code> options.addArguments(&quot;--headless&quot;);\n options.addArguments(&quot;--disable-gpu&quot;);\n options.addArguments(&quot;--disable-extensions&quot;);\n</code></pre>\n</li>\n</ol>\n<p>and re-debugg this code.</p>\n<ol start=\"2\">\n<li><p>I have tried to use versions in <code>POM</code> for <code>Maven</code> dependency as:</p>\n<pre><code> &lt;dependency&gt;\n     &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n     &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n     &lt;version&gt;3.141.59&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n</li>\n</ol>\n<p>and:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;\n        &lt;version&gt;4.9.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>and still the debugger is freezing.</p>\n<ol start=\"3\">\n<li>I have tried to go deeply inside business logic of the class <code>ChromeDriver</code> and see how it goes under the hood, so what I see is:</li>\n</ol>\n<p>in <code>DriverService.class</code> the debugger shows as:</p>\n<pre><code>    public DS build() {\n        if (this.port == 0) {\n            this.port = PortProber.findFreePort();\n        }\n\n        if (this.exe == null) {\n            this.exe = this.findDefaultExecutable();\n        }\n\n        ImmutableList&lt;String&gt; args = this.createArgs(); // args: size = 1\n        return this.createDriverService(this.exe, this.port, args, this.environment); // port: 48393 exe: &quot;C:\\Users\\invzbl3\\.m2\\repository\\webdriver\\chromedriver\\win32\\114.0.5735.90\\chromedriver.exe&quot;\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/UdgJy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UdgJy.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"4\">\n<li>I have checked similar questions as, for instance:</li>\n</ol>\n<p><a href=\"https://stackoverflow.com/q/13013639/8370915\">Chrome 'paused in debugger' issue</a><br />\n<a href=\"https://stackoverflow.com/q/12833514/8370915\">Paused in debugger in chrome?</a></p>\n<p>but it doesn't look as my use case or I don't fully understand how it helps me here.</p>\n<p>At the same time, my output in the console is as below:</p>\n<pre><code>&quot;C:\\Program Files\\Java\\zulu11.43.55-ca-jdk11.0.9.1-win_x64\\bin\\java.exe&quot; -agentlib:jdwp=transport=dt_socket,address=127.0.0.1:62518,suspend=y,server=n -javaagent:C:\\Users\\invzbl3\\AppData\\Local\\JetBrains\\IntelliJIdea2022.3\\captureAgent\\debugger-agent.jar -Dfile.encoding=UTF-8 -classpath &quot;E:\\IdeaProject\\WGIbot\\target\\classes;C:\\Users\\invzbl3\\.m2\\repository\\org\\telegram\\telegrambots\\4.2\\telegrambots-4.2.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\telegram\\telegrambots-meta\\4.2\\telegrambots-meta-4.2.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\google\\inject\\guice\\4.2.2\\guice-4.2.2.jar;C:\\Users\\invzbl3\\.m2\\repository\\javax\\inject\\javax.inject\\1\\javax.inject-1.jar;C:\\Users\\invzbl3\\.m2\\repository\\aopalliance\\aopalliance\\1.0\\aopalliance-1.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-annotations\\2.9.0\\jackson-annotations-2.9.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\fasterxml\\jackson\\jaxrs\\jackson-jaxrs-json-provider\\2.9.8\\jackson-jaxrs-json-provider-2.9.8.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\fasterxml\\jackson\\jaxrs\\jackson-jaxrs-base\\2.9.8\\jackson-jaxrs-base-2.9.8.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\fasterxml\\jackson\\module\\jackson-module-jaxb-annotations\\2.9.8\\jackson-module-jaxb-annotations-2.9.8.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-databind\\2.9.8\\jackson-databind-2.9.8.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\fasterxml\\jackson\\core\\jackson-core\\2.9.8\\jackson-core-2.9.8.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\media\\jersey-media-json-jackson\\2.25.1\\jersey-media-json-jackson-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\core\\jersey-common\\2.25.1\\jersey-common-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\bundles\\repackaged\\jersey-guava\\2.25.1\\jersey-guava-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\hk2\\osgi-resource-locator\\1.0.1\\osgi-resource-locator-1.0.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\ext\\jersey-entity-filtering\\2.25.1\\jersey-entity-filtering-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\containers\\jersey-container-grizzly2-http\\2.25.1\\jersey-container-grizzly2-http-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\hk2\\external\\javax.inject\\2.5.0-b32\\javax.inject-2.5.0-b32.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\grizzly\\grizzly-http-server\\2.3.28\\grizzly-http-server-2.3.28.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\grizzly\\grizzly-http\\2.3.28\\grizzly-http-2.3.28.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\grizzly\\grizzly-framework\\2.3.28\\grizzly-framework-2.3.28.jar;C:\\Users\\invzbl3\\.m2\\repository\\javax\\ws\\rs\\javax.ws.rs-api\\2.0.1\\javax.ws.rs-api-2.0.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\core\\jersey-server\\2.25.1\\jersey-server-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\core\\jersey-client\\2.25.1\\jersey-client-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\jersey\\media\\jersey-media-jaxb\\2.25.1\\jersey-media-jaxb-2.25.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\javax\\annotation\\javax.annotation-api\\1.2\\javax.annotation-api-1.2.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\hk2\\hk2-api\\2.5.0-b32\\hk2-api-2.5.0-b32.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\hk2\\hk2-utils\\2.5.0-b32\\hk2-utils-2.5.0-b32.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\hk2\\external\\aopalliance-repackaged\\2.5.0-b32\\aopalliance-repackaged-2.5.0-b32.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\glassfish\\hk2\\hk2-locator\\2.5.0-b32\\hk2-locator-2.5.0-b32.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\javassist\\javassist\\3.20.0-GA\\javassist-3.20.0-GA.jar;C:\\Users\\invzbl3\\.m2\\repository\\javax\\validation\\validation-api\\1.1.0.Final\\validation-api-1.1.0.Final.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\json\\json\\20180813\\json-20180813.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\httpcomponents\\httpclient\\4.5.3\\httpclient-4.5.3.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\httpcomponents\\httpcore\\4.4.6\\httpcore-4.4.6.jar;C:\\Users\\invzbl3\\.m2\\repository\\commons-logging\\commons-logging\\1.2\\commons-logging-1.2.jar;C:\\Users\\invzbl3\\.m2\\repository\\commons-codec\\commons-codec\\1.9\\commons-codec-1.9.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\httpcomponents\\httpmime\\4.5.3\\httpmime-4.5.3.jar;C:\\Users\\invzbl3\\.m2\\repository\\commons-io\\commons-io\\2.5\\commons-io-2.5.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-java\\3.141.59\\selenium-java-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-api\\3.141.59\\selenium-api-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-chrome-driver\\3.141.59\\selenium-chrome-driver-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-edge-driver\\3.141.59\\selenium-edge-driver-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-firefox-driver\\3.141.59\\selenium-firefox-driver-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-ie-driver\\3.141.59\\selenium-ie-driver-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-opera-driver\\3.141.59\\selenium-opera-driver-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-remote-driver\\3.141.59\\selenium-remote-driver-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-safari-driver\\3.141.59\\selenium-safari-driver-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\seleniumhq\\selenium\\selenium-support\\3.141.59\\selenium-support-3.141.59.jar;C:\\Users\\invzbl3\\.m2\\repository\\net\\bytebuddy\\byte-buddy\\1.8.15\\byte-buddy-1.8.15.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\commons\\commons-exec\\1.3\\commons-exec-1.3.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\google\\guava\\guava\\25.0-jre\\guava-25.0-jre.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\google\\code\\findbugs\\jsr305\\1.3.9\\jsr305-1.3.9.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\checkerframework\\checker-compat-qual\\2.0.0\\checker-compat-qual-2.0.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\google\\errorprone\\error_prone_annotations\\2.1.3\\error_prone_annotations-2.1.3.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\google\\j2objc\\j2objc-annotations\\1.1\\j2objc-annotations-1.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\codehaus\\mojo\\animal-sniffer-annotations\\1.14\\animal-sniffer-annotations-1.14.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\squareup\\okio\\okio\\1.14.0\\okio-1.14.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\io\\github\\bonigarcia\\webdrivermanager\\3.8.1\\webdrivermanager-3.8.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\slf4j\\slf4j-api\\1.7.25\\slf4j-api-1.7.25.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\google\\code\\gson\\gson\\2.8.5\\gson-2.8.5.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\rauschig\\jarchivelib\\1.0.0\\jarchivelib-1.0.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\commons\\commons-compress\\1.18\\commons-compress-1.18.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\slf4j\\slf4j-log4j12\\1.7.5\\slf4j-log4j12-1.7.5.jar;C:\\Users\\invzbl3\\.m2\\repository\\log4j\\log4j\\1.2.17\\log4j-1.2.17.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\jsoup\\jsoup\\1.8.3\\jsoup-1.8.3.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\vdurmont\\emoji-java\\4.0.0\\emoji-java-4.0.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\joda-time\\joda-time\\2.10.1\\joda-time-2.10.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\commons\\commons-lang3\\3.5\\commons-lang3-3.5.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\mongodb\\mongodb-driver-sync\\3.11.0\\mongodb-driver-sync-3.11.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\mongodb\\bson\\3.11.0\\bson-3.11.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\mongodb\\mongodb-driver-core\\3.11.0\\mongodb-driver-core-3.11.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\com\\squareup\\okhttp3\\okhttp\\3.14.0\\okhttp-3.14.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\telegram\\telegrambots-chat-session-bot\\4.3.1\\telegrambots-chat-session-bot-4.3.1.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-core\\1.4.0\\shiro-core-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-lang\\1.4.0\\shiro-lang-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-cache\\1.4.0\\shiro-cache-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-crypto-hash\\1.4.0\\shiro-crypto-hash-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-crypto-core\\1.4.0\\shiro-crypto-core-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-crypto-cipher\\1.4.0\\shiro-crypto-cipher-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-config-core\\1.4.0\\shiro-config-core-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-config-ogdl\\1.4.0\\shiro-config-ogdl-1.4.0.jar;C:\\Users\\invzbl3\\.m2\\repository\\commons-beanutils\\commons-beanutils\\1.9.3\\commons-beanutils-1.9.3.jar;C:\\Users\\invzbl3\\.m2\\repository\\commons-collections\\commons-collections\\3.2.2\\commons-collections-3.2.2.jar;C:\\Users\\invzbl3\\.m2\\repository\\org\\apache\\shiro\\shiro-event\\1.4.0\\shiro-event-1.4.0.jar;C:\\Program Files\\JetBrains\\IntelliJ IDEA 2020.2.3\\lib\\idea_rt.jar&quot; project.Main\nConnected to the target VM, address: '127.0.0.1:62518', transport: 'socket'\nWARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by com.google.inject.internal.cglib.core.$ReflectUtils$1 (file:/C:/Users/invzbl3/.m2/repository/com/google/inject/guice/4.2.2/guice-4.2.2.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)\nWARNING: Please consider reporting this to the maintainers of com.google.inject.internal.cglib.core.$ReflectUtils$1\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\nWARNING: All illegal access operations will be denied in a future release\nStarting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 33800\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nStarting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 12359\nOnly local connections are allowed.\nPlease see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.\nChromeDriver was started successfully.\nChromeDriver was started successfully.\n\n</code></pre>\n<p>Personally, I'm still looking for any ideas how to solve it, if I find something as a solution, I'll update this question with own results &amp; attempts, but, as for now, the problem still exists.</p>\n<p>Thank you in advance for any helpful recommendations or thoughts.</p>\n<p>I'll apreciate it, colleagues :)</p>\n"},{"tags":["java","ruby","hbase","jruby"],"comments":[{"score":0,"post_type":"question","creation_date":1701531024,"post_id":77576305,"comment_id":136788479,"body_markdown":"First thought is you&#39;ve installed Java version that&#39;s incompatible with the hbase shell","link":"https://stackoverflow.com/questions/77576305/when-i-try-to-run-command-bin-start-hbase-sh-it-show-errors#comment136788479_77576305","body":"First thought is you&#39;ve installed Java version that&#39;s incompatible with the hbase shell"},{"score":0,"post_type":"question","creation_date":1701623739,"post_id":77576305,"comment_id":136796201,"body_markdown":"I checked that on internet and it shows that the version of hbase i&#39;m using is compatible to the java version.","link":"https://stackoverflow.com/questions/77576305/when-i-try-to-run-command-bin-start-hbase-sh-it-show-errors#comment136796201_77576305","body":"I checked that on internet and it shows that the version of hbase i&#39;m using is compatible to the java version."}],"comment_count":2,"is_answered":false,"view_count":21,"answer_count":0,"score":-1,"last_activity_date":1701530928,"creation_date":1701325381,"last_edit_date":1701530928,"question_id":77576305,"body_markdown":"All my jps are working fine but When I try to run command `./bin/start-hbase.sh` it show errors \r\n\r\nMacBook-Pro hbase-2.5.6 % jps\\\r\n4944 NameNode\\\r\n5024 DataNode\\\r\n5297 NodeManager\\\r\n16306 Jps\\\r\n5219 ResourceManager\\\r\n16100 **HMaster**\\\r\n15324 **HQuorumPeer**\\\r\n5116 SecondaryNameNode\\\r\n16220 **HRegionServer**\r\n\r\nWhen I try to run command `./bin/start-hbase.sh` it show errors like this \r\n\r\n&gt;LoadError: load error: irb/completion -- java.lang.IncompatibleClassChangeError: Implementing class\r\n  require at org/jruby/RubyKernel.java:974\r\n  require at uri:classloader:/META-INF/jruby.home/lib/ruby/stdlib/rubygems/core_ext/kernel_require.rb:54\r\n   &lt;main&gt; at classpath:/jar-bootstrap.rb:42\r\n\r\nI even tried `./bin/hbase zkclli` and neither it worked. \r\nI need to run my hbase shell ","link":"https://stackoverflow.com/questions/77576305/when-i-try-to-run-command-bin-start-hbase-sh-it-show-errors","title":"When i try to run command ./bin/start-hbase.sh it show errors","body":"<p>All my jps are working fine but When I try to run command <code>./bin/start-hbase.sh</code> it show errors</p>\n<p>MacBook-Pro hbase-2.5.6 % jps<br />\n4944 NameNode<br />\n5024 DataNode<br />\n5297 NodeManager<br />\n16306 Jps<br />\n5219 ResourceManager<br />\n16100 <strong>HMaster</strong><br />\n15324 <strong>HQuorumPeer</strong><br />\n5116 SecondaryNameNode<br />\n16220 <strong>HRegionServer</strong></p>\n<p>When I try to run command <code>./bin/start-hbase.sh</code> it show errors like this</p>\n<blockquote>\n<p>LoadError: load error: irb/completion -- java.lang.IncompatibleClassChangeError: Implementing class\nrequire at org/jruby/RubyKernel.java:974\nrequire at uri:classloader:/META-INF/jruby.home/lib/ruby/stdlib/rubygems/core_ext/kernel_require.rb:54</p>\n</blockquote>\n    at classpath:/jar-bootstrap.rb:42\n<p>I even tried <code>./bin/hbase zkclli</code> and neither it worked.\nI need to run my hbase shell</p>\n"},{"tags":["java","set"],"comments":[{"score":2,"post_type":"question","creation_date":1701294733,"post_id":77574652,"comment_id":136759516,"body_markdown":"Looks reasonable to me. Is there a problem with your code?","link":"https://stackoverflow.com/questions/77574652/find-the-union-and-intersection-of-a-collection-of-maps#comment136759516_77574652","body":"Looks reasonable to me. Is there a problem with your code?"},{"score":0,"post_type":"question","creation_date":1701295153,"post_id":77574652,"comment_id":136759569,"body_markdown":"That looks like the best approach.","link":"https://stackoverflow.com/questions/77574652/find-the-union-and-intersection-of-a-collection-of-maps#comment136759569_77574652","body":"That looks like the best approach."},{"score":0,"post_type":"question","creation_date":1701295492,"post_id":77574652,"comment_id":136759609,"body_markdown":"If the code works, the question might be more on-topic  at [Code Review](https://codereview.stackexchange.com/)","link":"https://stackoverflow.com/questions/77574652/find-the-union-and-intersection-of-a-collection-of-maps#comment136759609_77574652","body":"If the code works, the question might be more on-topic  at <a href=\"https://codereview.stackexchange.com/\">Code Review</a>"},{"score":1,"post_type":"question","creation_date":1701295566,"post_id":77574652,"comment_id":136759615,"body_markdown":"I suggest re-wording the first sentence of your second paragraph. Some folks here over-react to the phrase &quot;best way&quot;, confusing that with the prohibition here on overly-opinionated open-ended questions.","link":"https://stackoverflow.com/questions/77574652/find-the-union-and-intersection-of-a-collection-of-maps#comment136759615_77574652","body":"I suggest re-wording the first sentence of your second paragraph. Some folks here over-react to the phrase &quot;best way&quot;, confusing that with the prohibition here on overly-opinionated open-ended questions."},{"score":0,"post_type":"question","creation_date":1701297995,"post_id":77574652,"comment_id":136759918,"body_markdown":"I have reworded my second paragraph to be clearer as to what exactly I would like to know. I am just doubtful that the approach given here is the simplest way to go about it.","link":"https://stackoverflow.com/questions/77574652/find-the-union-and-intersection-of-a-collection-of-maps#comment136759918_77574652","body":"I have reworded my second paragraph to be clearer as to what exactly I would like to know. I am just doubtful that the approach given here is the simplest way to go about it."},{"score":0,"post_type":"question","creation_date":1701298304,"post_id":77574652,"comment_id":136759947,"body_markdown":"Off-topic side note: For the intersection I would perhaps sort the maps by size and start intersecting from the smallest one(s).","link":"https://stackoverflow.com/questions/77574652/find-the-union-and-intersection-of-a-collection-of-maps#comment136759947_77574652","body":"Off-topic side note: For the intersection I would perhaps sort the maps by size and start intersecting from the smallest one(s)."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701530065,"post_id":77574920,"comment_id":136788362,"body_markdown":"if you return  a Collection&lt;Object&gt; instead you can return: ```result.add(partitioned.get(false));``` as the third result and you will know how many maps contain each key.","link":"https://stackoverflow.com/questions/77574652/find-the-union-and-intersection-of-a-collection-of-maps/77574920#comment136788362_77574920","body":"if you return  a Collection&lt;Object&gt; instead you can return: <code>result.add(partitioned.get(false));</code> as the third result and you will know how many maps contain each key."}],"comment_count":1,"score":1,"last_activity_date":1701530317,"last_edit_date":1701530317,"creation_date":1701298566,"answer_id":77574920,"question_id":77574652,"body_markdown":"if by elegant you mean stream based, maybe try with this:\r\n\r\n 1. output = a TreeMap with keys and their counts.\r\n 2. union = the map keyset\r\n 3. intersection = all entries with value = maps.size()\r\n 4. different = all entries with value &lt; maps.size()\r\n\r\n```    \r\n    List&lt;Map&lt;String, String&gt;&gt; maps = new ArrayList&lt;&gt;();\r\n    // Fill maps and after:\r\n    Integer mapCount = maps.size();\r\n    Map&lt;String, Integer&gt; output = maps.stream().flatMap(m -&gt; m.keySet().stream())\r\n        .collect(Collectors.toMap(e -&gt; e, e -&gt; 1, (a, b) -&gt; a + 1, TreeMap::new));\r\n    // Union\r\n    Collection&lt;String&gt; union = output.keySet();\r\n    // Intersection value = mapCount\r\n    Collection&lt;String&gt; intersection = output.entrySet().stream().filter(e -&gt; mapCount.equals(e.getValue()))\r\n        .map(e -&gt; e.getKey()).collect(Collectors.toList());\r\n    // Difference value != mapCount\r\n    Collection&lt;String&gt; different = output.entrySet().stream().filter(e -&gt; !mapCount.equals(e.getValue()))\r\n        .map(e -&gt; e.getKey()).collect(Collectors.toList());\r\n```\r\n\r\nhere is a sample run:\r\n```\r\nMapSample.main()\r\nMapSample.mapper()\r\n# # # Map 01:\r\n{p={}, q={}, g={}, h={}, y={}, z={}, m={}, o={}}\r\n# # # Map 02:\r\n{b={}, d={}, f={}, g={}, h={}, k={}, l={}, m={}, o={}, p={}, q={}, r={}, s={}, t={}, u={}, v={}, y={}, z={}}\r\n# # # Map 03:\r\n{b={}, c={}, d={}, e={}, h={}, i={}, k={}, n={}, r={}, s={}, t={}, u={}, v={}, w={}}\r\n{b=2, c=1, d=2, e=1, f=1, g=2, h=3, i=1, k=2, l=1, m=2, n=1, o=2, p=2, q=2, r=2, s=2, t=2, u=2, v=2, w=1, y=2, z=2}\r\n[b, c, d, e, f, g, h, i, k, l, m, n, o, p, q, r, s, t, u, v, w, y, z]\r\n[h]\r\n[b, c, d, e, f, g, i, k, l, m, n, o, p, q, r, s, t, u, v, w, y, z]\r\n```\r\n\r\n**Update:**\r\nthis problem is very interesting to me, so I coded a generic function to compute the union, intersection and differences (handles nulls):\r\n```\r\n  private static &lt;K, V&gt; Collection&lt;Collection&lt;K&gt;&gt; processMaps(Collection&lt;Map&lt;K, V&gt;&gt; maps) {\r\n    Collection&lt;Map&lt;K, V&gt;&gt; mapCollection = Optional.ofNullable(maps).orElseGet(Collections::emptyList);\r\n    Map&lt;K, Integer&gt; keyCount = mapCollection.stream()\r\n        .map(e -&gt; Optional.ofNullable(e).orElseGet(Collections::emptyMap))\r\n        .flatMap(m -&gt; m.keySet().stream())\r\n        .collect(Collectors.toMap(e -&gt; e, e -&gt; 1, (a, b) -&gt; a + 1, TreeMap::new));\r\n    Map&lt;Boolean, List&lt;Entry&lt;K, Integer&gt;&gt;&gt; partitioned = keyCount.entrySet().stream()\r\n        .collect(Collectors.partitioningBy(e -&gt; e.getValue() == mapCollection.size()));\r\n    Collection&lt;Collection&lt;K&gt;&gt; result = new ArrayList&lt;&gt;();\r\n    // union\r\n    result.add(keyCount.keySet());\r\n    // intersection\r\n    result.add(partitioned.get(true).stream().map(e -&gt; e.getKey()).collect(Collectors.toList()));\r\n    // differences\r\n    result.add(partitioned.get(false).stream().map(e -&gt; e.getKey()).collect(Collectors.toList()));\r\n    return result;\r\n  }\r\n```\r\nthis is the result of a test run, values in maps are ignored, this only processes the keys:\r\n```\r\nMapSample02.main()\r\nMapSample02.computeTestData()\r\nmaps:4\r\nmap\r\n{a=2, c=2, d=5, e=2, f=1, h=2, i=3, k=1, l=2, m=4, n=2, o=2, p=1, q=4, r=2, s=2, t=4, u=4, v=3, x=3, y=1, z=2}\r\nmap\r\n{a=2, c=3, d=1, f=2, g=2, j=1, l=1, m=1, n=1, o=2, p=3, u=1, v=3, w=2, x=3, y=2}\r\nmap\r\n{a=1, b=1, c=1, d=1, e=1, f=1, g=3, h=1, i=1, k=1, n=3, o=1, p=2, q=3, r=1, s=1, t=3, u=2, v=2, w=2, x=1, y=1}\r\nmap\r\n{a=4, c=4, d=4, e=1, f=7, g=4, h=3, i=2, j=4, k=2, l=3, n=2, o=2, p=6, q=1, r=2, s=1, v=1, w=3, x=3, y=3, z=2}\r\nunion, intersection, differences:\r\n[[a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z], [a, c, d, f, n, o, p, v, x, y], [b, e, g, h, i, j, k, l, m, q, r, s, t, u, w, z]]\r\n```","link":"https://stackoverflow.com/questions/77574652/find-the-union-and-intersection-of-a-collection-of-maps/77574920#77574920","title":"Find the union and intersection of a collection of maps?","body":"<p>if by elegant you mean stream based, maybe try with this:</p>\n<ol>\n<li>output = a TreeMap with keys and their counts.</li>\n<li>union = the map keyset</li>\n<li>intersection = all entries with value = maps.size()</li>\n<li>different = all entries with value &lt; maps.size()</li>\n</ol>\n<pre><code>    List&lt;Map&lt;String, String&gt;&gt; maps = new ArrayList&lt;&gt;();\n    // Fill maps and after:\n    Integer mapCount = maps.size();\n    Map&lt;String, Integer&gt; output = maps.stream().flatMap(m -&gt; m.keySet().stream())\n        .collect(Collectors.toMap(e -&gt; e, e -&gt; 1, (a, b) -&gt; a + 1, TreeMap::new));\n    // Union\n    Collection&lt;String&gt; union = output.keySet();\n    // Intersection value = mapCount\n    Collection&lt;String&gt; intersection = output.entrySet().stream().filter(e -&gt; mapCount.equals(e.getValue()))\n        .map(e -&gt; e.getKey()).collect(Collectors.toList());\n    // Difference value != mapCount\n    Collection&lt;String&gt; different = output.entrySet().stream().filter(e -&gt; !mapCount.equals(e.getValue()))\n        .map(e -&gt; e.getKey()).collect(Collectors.toList());\n</code></pre>\n<p>here is a sample run:</p>\n<pre><code>MapSample.main()\nMapSample.mapper()\n# # # Map 01:\n{p={}, q={}, g={}, h={}, y={}, z={}, m={}, o={}}\n# # # Map 02:\n{b={}, d={}, f={}, g={}, h={}, k={}, l={}, m={}, o={}, p={}, q={}, r={}, s={}, t={}, u={}, v={}, y={}, z={}}\n# # # Map 03:\n{b={}, c={}, d={}, e={}, h={}, i={}, k={}, n={}, r={}, s={}, t={}, u={}, v={}, w={}}\n{b=2, c=1, d=2, e=1, f=1, g=2, h=3, i=1, k=2, l=1, m=2, n=1, o=2, p=2, q=2, r=2, s=2, t=2, u=2, v=2, w=1, y=2, z=2}\n[b, c, d, e, f, g, h, i, k, l, m, n, o, p, q, r, s, t, u, v, w, y, z]\n[h]\n[b, c, d, e, f, g, i, k, l, m, n, o, p, q, r, s, t, u, v, w, y, z]\n</code></pre>\n<p><strong>Update:</strong>\nthis problem is very interesting to me, so I coded a generic function to compute the union, intersection and differences (handles nulls):</p>\n<pre><code>  private static &lt;K, V&gt; Collection&lt;Collection&lt;K&gt;&gt; processMaps(Collection&lt;Map&lt;K, V&gt;&gt; maps) {\n    Collection&lt;Map&lt;K, V&gt;&gt; mapCollection = Optional.ofNullable(maps).orElseGet(Collections::emptyList);\n    Map&lt;K, Integer&gt; keyCount = mapCollection.stream()\n        .map(e -&gt; Optional.ofNullable(e).orElseGet(Collections::emptyMap))\n        .flatMap(m -&gt; m.keySet().stream())\n        .collect(Collectors.toMap(e -&gt; e, e -&gt; 1, (a, b) -&gt; a + 1, TreeMap::new));\n    Map&lt;Boolean, List&lt;Entry&lt;K, Integer&gt;&gt;&gt; partitioned = keyCount.entrySet().stream()\n        .collect(Collectors.partitioningBy(e -&gt; e.getValue() == mapCollection.size()));\n    Collection&lt;Collection&lt;K&gt;&gt; result = new ArrayList&lt;&gt;();\n    // union\n    result.add(keyCount.keySet());\n    // intersection\n    result.add(partitioned.get(true).stream().map(e -&gt; e.getKey()).collect(Collectors.toList()));\n    // differences\n    result.add(partitioned.get(false).stream().map(e -&gt; e.getKey()).collect(Collectors.toList()));\n    return result;\n  }\n</code></pre>\n<p>this is the result of a test run, values in maps are ignored, this only processes the keys:</p>\n<pre><code>MapSample02.main()\nMapSample02.computeTestData()\nmaps:4\nmap\n{a=2, c=2, d=5, e=2, f=1, h=2, i=3, k=1, l=2, m=4, n=2, o=2, p=1, q=4, r=2, s=2, t=4, u=4, v=3, x=3, y=1, z=2}\nmap\n{a=2, c=3, d=1, f=2, g=2, j=1, l=1, m=1, n=1, o=2, p=3, u=1, v=3, w=2, x=3, y=2}\nmap\n{a=1, b=1, c=1, d=1, e=1, f=1, g=3, h=1, i=1, k=1, n=3, o=1, p=2, q=3, r=1, s=1, t=3, u=2, v=2, w=2, x=1, y=1}\nmap\n{a=4, c=4, d=4, e=1, f=7, g=4, h=3, i=2, j=4, k=2, l=3, n=2, o=2, p=6, q=1, r=2, s=1, v=1, w=3, x=3, y=3, z=2}\nunion, intersection, differences:\n[[a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z], [a, c, d, f, n, o, p, v, x, y], [b, e, g, h, i, j, k, l, m, q, r, s, t, u, w, z]]\n</code></pre>\n"}],"comment_count":6,"is_answered":true,"view_count":78,"answer_count":1,"score":1,"last_activity_date":1701530317,"creation_date":1701294240,"last_edit_date":1701297883,"question_id":77574652,"body_markdown":"I have a collection of Maps `maps` and I want a set with all the keys amongst the maps (the union), a set with all the keys common to all the maps (the intersection), and a set with all the keys that are only in some sets but not all (the disjunctive union). \r\n\r\nMy questions are: is there a way to get the disjunctive union &quot;diff&quot; other than just taking the compliment of &quot;same&quot;, i.e. is there any way it be done within the for loop in parallel with &quot;all&quot; and &quot;same&quot;, instead of after those two sets are created? Second, must I get an element of the collection of maps to initialize &quot;same&quot; with? Or can it be built in the for loop with some other function than &quot;retainAll&quot; and be initialized empty?\r\n\r\nBasically what, if any, is an alternative logic to the approach given below?\r\n\r\n```java\r\nSet&lt;String&gt; same = new HashSet&lt;&gt;(maps.get(0).keySet());\r\nSet&lt;String&gt; diff = new HashSet&lt;&gt;();\r\nSet&lt;String&gt; all = new HashSet&lt;&gt;();\r\n\r\nfor(Map map : maps) {\r\n    all.addAll(map.keySet());\r\n    same.retainAll(map.keySet());\r\n}\r\ndiff.addAll(all);\r\ndiff.removeAll(same);\r\n```","link":"https://stackoverflow.com/questions/77574652/find-the-union-and-intersection-of-a-collection-of-maps","title":"Find the union and intersection of a collection of maps?","body":"<p>I have a collection of Maps <code>maps</code> and I want a set with all the keys amongst the maps (the union), a set with all the keys common to all the maps (the intersection), and a set with all the keys that are only in some sets but not all (the disjunctive union).</p>\n<p>My questions are: is there a way to get the disjunctive union &quot;diff&quot; other than just taking the compliment of &quot;same&quot;, i.e. is there any way it be done within the for loop in parallel with &quot;all&quot; and &quot;same&quot;, instead of after those two sets are created? Second, must I get an element of the collection of maps to initialize &quot;same&quot; with? Or can it be built in the for loop with some other function than &quot;retainAll&quot; and be initialized empty?</p>\n<p>Basically what, if any, is an alternative logic to the approach given below?</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;String&gt; same = new HashSet&lt;&gt;(maps.get(0).keySet());\nSet&lt;String&gt; diff = new HashSet&lt;&gt;();\nSet&lt;String&gt; all = new HashSet&lt;&gt;();\n\nfor(Map map : maps) {\n    all.addAll(map.keySet());\n    same.retainAll(map.keySet());\n}\ndiff.addAll(all);\ndiff.removeAll(same);\n</code></pre>\n"},{"tags":["java","websocket","micronaut"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701528341,"post_id":77547068,"comment_id":136788199,"body_markdown":"Thanks, @gabriel-ramuglia, for the response. However, using setReadTimeout didn&#39;t resolve my issue :/, but I appreciate the effort and thank you for providing inspiration :)","link":"https://stackoverflow.com/questions/77522968/websocket-connection-attempt-not-interrupted-by-flux-timeout-in-micronaut/77547068#comment136788199_77547068","body":"Thanks, @gabriel-ramuglia, for the response. However, using setReadTimeout didn&#39;t resolve my issue :/, but I appreciate the effort and thank you for providing inspiration :)"}],"comment_count":1,"score":0,"last_activity_date":1700898896,"creation_date":1700898896,"answer_id":77547068,"question_id":77522968,"body_markdown":"It seems like your Flux timeout isn&#39;t correctly handling the WebSocket connection. You should use a different approach to manage WebSocket timeouts, such as directly handling them in the WebSocketClient configuration. Try this instead:\r\n\r\n    import io.micronaut.http.client.HttpClientConfiguration;\r\n    import io.micronaut.websocket.WebSocketClient;\r\n    import java.time.Duration;\r\n    \r\n    // (some code)\r\n    \r\n    HttpClientConfiguration configuration = new HttpClientConfiguration();\r\n    configuration.setReadTimeout(Duration.ofMillis(40));\r\n    WebSocketClient webSocketClient = WebSocketClient.create(configuration);\r\n    \r\n    // (some more code)\r\n\r\n","link":"https://stackoverflow.com/questions/77522968/websocket-connection-attempt-not-interrupted-by-flux-timeout-in-micronaut/77547068#77547068","title":"WebSocket connection attempt not interrupted by Flux timeout in Micronaut","body":"<p>It seems like your Flux timeout isn't correctly handling the WebSocket connection. You should use a different approach to manage WebSocket timeouts, such as directly handling them in the WebSocketClient configuration. Try this instead:</p>\n<pre><code>import io.micronaut.http.client.HttpClientConfiguration;\nimport io.micronaut.websocket.WebSocketClient;\nimport java.time.Duration;\n\n// (some code)\n\nHttpClientConfiguration configuration = new HttpClientConfiguration();\nconfiguration.setReadTimeout(Duration.ofMillis(40));\nWebSocketClient webSocketClient = WebSocketClient.create(configuration);\n\n// (some more code)\n</code></pre>\n"},{"comment_count":0,"score":-1,"last_activity_date":1701322388,"creation_date":1701322388,"answer_id":77576111,"question_id":77522968,"body_markdown":"You are asserting the value that hasn&#39;t been altered in the `onClose()` method:\r\n\r\n    package com.example;\r\n    \r\n    import io.micronaut.context.BeanContext;\r\n    import io.micronaut.test.extensions.junit5.annotation.MicronautTest;\r\n    import io.micronaut.websocket.WebSocketClient;\r\n    import io.micronaut.websocket.WebSocketSession;\r\n    import io.micronaut.websocket.annotation.ClientWebSocket;\r\n    import io.micronaut.websocket.annotation.OnClose;\r\n    import io.micronaut.websocket.annotation.OnMessage;\r\n    import io.micronaut.websocket.annotation.OnOpen;\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.awaitility.Awaitility;\r\n    import org.junit.jupiter.api.Test;\r\n    import org.junit.jupiter.api.Assertions;\r\n    \r\n    import jakarta.inject.Inject;\r\n    import org.reactivestreams.Publisher;\r\n    import reactor.core.publisher.Flux;\r\n    \r\n    import java.time.Duration;\r\n    import java.util.concurrent.atomic.AtomicBoolean;\r\n    \r\n    @Slf4j\r\n    @MicronautTest\r\n    class WstimeoutTest {\r\n        static AtomicBoolean isOpened = new AtomicBoolean(false);\r\n    \r\n        @Inject\r\n        BeanContext beanContext;\r\n    \r\n        @ClientWebSocket\r\n        static abstract class TestWebSocketClient implements AutoCloseable {\r\n            @OnMessage\r\n            void onMessage(String message) {\r\n                log.info(&quot;[onMessage] Got message: {}&quot;, message);\r\n            }\r\n    \r\n            @OnOpen\r\n            void onOpen(WebSocketSession session) {\r\n                log.info(&quot;[onOpen] WS session id: {}&quot;, session.getId());\r\n                isOpened.set(true);\r\n            }\r\n    \r\n            @OnClose\r\n            void onClose(WebSocketSession session) {\r\n                log.info(&quot;[onClose] WS session id: {}&quot;, session.getId());\r\n                isOpened.set(false);\r\n            }\r\n        }\r\n    \r\n        @Test\r\n        void testWebSocketTimeout() {\r\n            var uri = &quot;ws://localhost&quot;;\r\n            var timeout = Duration.ofMillis(40); //Put here the time that ws client is unable to establish (or emit OnOpen event) websocket connection\r\n    \r\n            var webSocketClient = beanContext.getBean(WebSocketClient.class);\r\n    \r\n            Publisher&lt;TestWebSocketClient&gt; client = webSocketClient.connect(TestWebSocketClient.class,  uri);\r\n            Flux.from(client)\r\n                    .timeout(timeout)\r\n                    .doOnError(throwable -&gt; log.info(&quot;Expected error: {}&quot;, throwable.getMessage()))\r\n                    .subscribe();\r\n    \r\n    \r\n            Awaitility.await().atLeast(Duration.ofMillis(250)).untilAsserted(\r\n                    () -&gt; Assertions.assertFalse(isOpened.get(), &quot;WebSocket should not be opened&quot;)\r\n            );\r\n        }\r\n    }\r\n\r\n","link":"https://stackoverflow.com/questions/77522968/websocket-connection-attempt-not-interrupted-by-flux-timeout-in-micronaut/77576111#77576111","title":"WebSocket connection attempt not interrupted by Flux timeout in Micronaut","body":"<p>You are asserting the value that hasn't been altered in the <code>onClose()</code> method:</p>\n<pre><code>package com.example;\n\nimport io.micronaut.context.BeanContext;\nimport io.micronaut.test.extensions.junit5.annotation.MicronautTest;\nimport io.micronaut.websocket.WebSocketClient;\nimport io.micronaut.websocket.WebSocketSession;\nimport io.micronaut.websocket.annotation.ClientWebSocket;\nimport io.micronaut.websocket.annotation.OnClose;\nimport io.micronaut.websocket.annotation.OnMessage;\nimport io.micronaut.websocket.annotation.OnOpen;\nimport lombok.extern.slf4j.Slf4j;\nimport org.awaitility.Awaitility;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.Assertions;\n\nimport jakarta.inject.Inject;\nimport org.reactivestreams.Publisher;\nimport reactor.core.publisher.Flux;\n\nimport java.time.Duration;\nimport java.util.concurrent.atomic.AtomicBoolean;\n\n@Slf4j\n@MicronautTest\nclass WstimeoutTest {\n    static AtomicBoolean isOpened = new AtomicBoolean(false);\n\n    @Inject\n    BeanContext beanContext;\n\n    @ClientWebSocket\n    static abstract class TestWebSocketClient implements AutoCloseable {\n        @OnMessage\n        void onMessage(String message) {\n            log.info(&quot;[onMessage] Got message: {}&quot;, message);\n        }\n\n        @OnOpen\n        void onOpen(WebSocketSession session) {\n            log.info(&quot;[onOpen] WS session id: {}&quot;, session.getId());\n            isOpened.set(true);\n        }\n\n        @OnClose\n        void onClose(WebSocketSession session) {\n            log.info(&quot;[onClose] WS session id: {}&quot;, session.getId());\n            isOpened.set(false);\n        }\n    }\n\n    @Test\n    void testWebSocketTimeout() {\n        var uri = &quot;ws://localhost&quot;;\n        var timeout = Duration.ofMillis(40); //Put here the time that ws client is unable to establish (or emit OnOpen event) websocket connection\n\n        var webSocketClient = beanContext.getBean(WebSocketClient.class);\n\n        Publisher&lt;TestWebSocketClient&gt; client = webSocketClient.connect(TestWebSocketClient.class,  uri);\n        Flux.from(client)\n                .timeout(timeout)\n                .doOnError(throwable -&gt; log.info(&quot;Expected error: {}&quot;, throwable.getMessage()))\n                .subscribe();\n\n\n        Awaitility.await().atLeast(Duration.ofMillis(250)).untilAsserted(\n                () -&gt; Assertions.assertFalse(isOpened.get(), &quot;WebSocket should not be opened&quot;)\n        );\n    }\n}\n</code></pre>\n"},{"comment_count":0,"score":-1,"last_activity_date":1701527758,"creation_date":1701527758,"answer_id":77590780,"question_id":77522968,"body_markdown":"I believe I&#39;ve found a solution after researching and experimenting with `HttpClientConfiguration`. The solution involves setting the `ConnectTimeout` for the HttpClient :)\r\n\r\nAdditionally, in the case of connections to localhost, time limits may be ignored because communication occurs within the same environment(?) (at least below code fails even if I set `httpTimeout = Duration.ofNanos(1)` for local server). To test this, I utilized an online echo WebSocket server. Below is the complete example code along with my results:\r\n\r\n```java\r\npackage com.example;\r\n\r\nimport io.micronaut.context.BeanContext;\r\nimport io.micronaut.http.client.HttpClientConfiguration;\r\nimport io.micronaut.test.extensions.junit5.annotation.MicronautTest;\r\nimport io.micronaut.websocket.CloseReason;\r\nimport io.micronaut.websocket.WebSocketClient;\r\nimport io.micronaut.websocket.WebSocketSession;\r\nimport io.micronaut.websocket.annotation.ClientWebSocket;\r\nimport io.micronaut.websocket.annotation.OnClose;\r\nimport io.micronaut.websocket.annotation.OnError;\r\nimport io.micronaut.websocket.annotation.OnMessage;\r\nimport io.micronaut.websocket.annotation.OnOpen;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.awaitility.Awaitility;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.Assertions;\r\n\r\nimport jakarta.inject.Inject;\r\nimport org.reactivestreams.Publisher;\r\nimport reactor.core.publisher.Flux;\r\n\r\nimport java.net.URI;\r\nimport java.net.URISyntaxException;\r\nimport java.time.Duration;\r\nimport java.util.concurrent.atomic.AtomicBoolean;\r\nimport java.util.concurrent.atomic.AtomicReference;\r\n\r\n@Slf4j\r\n@MicronautTest\r\nclass WstimeoutTest {\r\n    static AtomicBoolean isOpened = new AtomicBoolean(false);\r\n    static AtomicBoolean isCompleted = new AtomicBoolean(false);\r\n    static AtomicReference&lt;CloseReason&gt; closeReasonAtomicReference = new AtomicReference&lt;&gt;();\r\n\r\n    @Inject\r\n    BeanContext beanContext;\r\n\r\n\r\n    @ClientWebSocket\r\n    static abstract class TestWebSocketClient implements AutoCloseable {\r\n        @OnMessage\r\n        void onMessage(String message, WebSocketSession session) {\r\n            log.info(&quot;[onMessage] Got message: {}&quot;, message);\r\n            session.close(CloseReason.NORMAL);\r\n        }\r\n\r\n        @OnOpen\r\n        void onOpen(WebSocketSession session) {\r\n            log.info(&quot;[onOpen] WS session id: {}&quot;, session.getId());\r\n            isOpened.set(true);\r\n            session.close(CloseReason.NORMAL);\r\n        }\r\n\r\n        @OnError\r\n        void onError(Throwable err, WebSocketSession session) {\r\n            log.error(&quot;[onError] WS session id: {}, with error: {}&quot;, session.getId(), err.getMessage());\r\n        }\r\n\r\n        @OnClose\r\n        void onClose(CloseReason closeReason, WebSocketSession session) {\r\n            log.info(&quot;[onClose] WS session id: {}, close code: {}&quot;, session.getId(), closeReason.getCode());\r\n            closeReasonAtomicReference.set(closeReason);\r\n        }\r\n    }\r\n\r\n    @Test\r\n    void testWebSocketTimeout() {\r\n        URI uri = null;\r\n        try {\r\n            uri = new URI(&quot;&lt;provide address to external WS server&gt;&quot;);\r\n        } catch (URISyntaxException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        var fluxTimeout = Duration.ofMillis(2000);\r\n//        var httpTimeout = Duration.ofMillis(400); // within this time client is able to establish connection\r\n        var httpTimeout = Duration.ofMillis(30); // within this time the ws client is unable to establish websocket connection and ends/throws close code 1006\r\n\r\n        var httpClientConfiguration = beanContext.getBean(HttpClientConfiguration.class);\r\n\r\n        httpClientConfiguration.setConnectTimeout(httpTimeout);\r\n\r\n        var webSocketClient = beanContext.getBean(WebSocketClient.class);\r\n\r\n        Publisher&lt;TestWebSocketClient&gt; client = webSocketClient.connect(TestWebSocketClient.class, uri);\r\n\r\n        var disposable = Flux.from(client)\r\n                .timeout(fluxTimeout)\r\n                .doFinally(unused -&gt; isCompleted.set(true))\r\n                .subscribe(\r\n                        testWebSocketClient -&gt; {\r\n                            isOpened.set(true);\r\n                            log.info(&quot;Success&quot;);\r\n                        },\r\n                        throwable -&gt; {\r\n                            isOpened.set(false);\r\n                            log.info(&quot;Expected error: {}&quot;, throwable.getMessage(), throwable);\r\n                        }\r\n                );\r\n\r\n        Awaitility.await().atMost(fluxTimeout).pollInterval(Duration.ofMillis(50))\r\n                .untilAsserted(\r\n                        () -&gt; Assertions.assertTrue(isCompleted.get(), &quot;WebSocket should be completed&quot;)\r\n                );\r\n\r\n        Awaitility.await().atMost(fluxTimeout).pollInterval(Duration.ofMillis(50))\r\n                .untilAsserted(\r\n                () -&gt; Assertions.assertFalse(isOpened.get(), &quot;WebSocket should not be opened&quot;)\r\n        );\r\n        Awaitility.await().atMost(fluxTimeout).pollInterval(Duration.ofMillis(50))\r\n                .untilAsserted(\r\n                () -&gt; Assertions.assertNotEquals(CloseReason.NORMAL, closeReasonAtomicReference.get(),\r\n                        &quot;WebSocket should not be opened&quot;)\r\n        );\r\n\r\n        disposable.dispose();\r\n    }\r\n}\r\n\r\n```\r\nOutput:\r\n```\r\n&gt; Task :testClasses\r\n2023:12:02T14:54:12.335 [Test worker] INFO  i.m.c.DefaultApplicationContext$RuntimeConfiguredEnvironment[][] - Established active environments: [test]\r\n2023:12:02T14:54:13.286 [default-nioEventLoopGroup-1-2] INFO  com.example.WstimeoutTest[][] - Expected error: Error opening WebSocket client session: Abnormal Closure\r\nio.micronaut.websocket.exceptions.WebSocketClientException: Error opening WebSocket client session: Abnormal Closure\r\n\tat io.micronaut.http.client.netty.websocket.NettyWebSocketClientHandler.handleCloseReason(NettyWebSocketClientHandler.java:262)\r\n\t(...)\r\n&gt; Task :test\r\nBUILD SUCCESSFUL in 4s\r\n```\r\nIt appears that there is no specific `TimeoutException`, but instead a `WebSocketClientException` with information about an `Abnormal Closure`. Additionally, no WS events are triggered, such as `onOpen`, `onMessage`, `onClose`, or `onError` as expected.\r\n","link":"https://stackoverflow.com/questions/77522968/websocket-connection-attempt-not-interrupted-by-flux-timeout-in-micronaut/77590780#77590780","title":"WebSocket connection attempt not interrupted by Flux timeout in Micronaut","body":"<p>I believe I've found a solution after researching and experimenting with <code>HttpClientConfiguration</code>. The solution involves setting the <code>ConnectTimeout</code> for the HttpClient :)</p>\n<p>Additionally, in the case of connections to localhost, time limits may be ignored because communication occurs within the same environment(?) (at least below code fails even if I set <code>httpTimeout = Duration.ofNanos(1)</code> for local server). To test this, I utilized an online echo WebSocket server. Below is the complete example code along with my results:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport io.micronaut.context.BeanContext;\nimport io.micronaut.http.client.HttpClientConfiguration;\nimport io.micronaut.test.extensions.junit5.annotation.MicronautTest;\nimport io.micronaut.websocket.CloseReason;\nimport io.micronaut.websocket.WebSocketClient;\nimport io.micronaut.websocket.WebSocketSession;\nimport io.micronaut.websocket.annotation.ClientWebSocket;\nimport io.micronaut.websocket.annotation.OnClose;\nimport io.micronaut.websocket.annotation.OnError;\nimport io.micronaut.websocket.annotation.OnMessage;\nimport io.micronaut.websocket.annotation.OnOpen;\nimport lombok.extern.slf4j.Slf4j;\nimport org.awaitility.Awaitility;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.Assertions;\n\nimport jakarta.inject.Inject;\nimport org.reactivestreams.Publisher;\nimport reactor.core.publisher.Flux;\n\nimport java.net.URI;\nimport java.net.URISyntaxException;\nimport java.time.Duration;\nimport java.util.concurrent.atomic.AtomicBoolean;\nimport java.util.concurrent.atomic.AtomicReference;\n\n@Slf4j\n@MicronautTest\nclass WstimeoutTest {\n    static AtomicBoolean isOpened = new AtomicBoolean(false);\n    static AtomicBoolean isCompleted = new AtomicBoolean(false);\n    static AtomicReference&lt;CloseReason&gt; closeReasonAtomicReference = new AtomicReference&lt;&gt;();\n\n    @Inject\n    BeanContext beanContext;\n\n\n    @ClientWebSocket\n    static abstract class TestWebSocketClient implements AutoCloseable {\n        @OnMessage\n        void onMessage(String message, WebSocketSession session) {\n            log.info(&quot;[onMessage] Got message: {}&quot;, message);\n            session.close(CloseReason.NORMAL);\n        }\n\n        @OnOpen\n        void onOpen(WebSocketSession session) {\n            log.info(&quot;[onOpen] WS session id: {}&quot;, session.getId());\n            isOpened.set(true);\n            session.close(CloseReason.NORMAL);\n        }\n\n        @OnError\n        void onError(Throwable err, WebSocketSession session) {\n            log.error(&quot;[onError] WS session id: {}, with error: {}&quot;, session.getId(), err.getMessage());\n        }\n\n        @OnClose\n        void onClose(CloseReason closeReason, WebSocketSession session) {\n            log.info(&quot;[onClose] WS session id: {}, close code: {}&quot;, session.getId(), closeReason.getCode());\n            closeReasonAtomicReference.set(closeReason);\n        }\n    }\n\n    @Test\n    void testWebSocketTimeout() {\n        URI uri = null;\n        try {\n            uri = new URI(&quot;&lt;provide address to external WS server&gt;&quot;);\n        } catch (URISyntaxException e) {\n            throw new RuntimeException(e);\n        }\n        var fluxTimeout = Duration.ofMillis(2000);\n//        var httpTimeout = Duration.ofMillis(400); // within this time client is able to establish connection\n        var httpTimeout = Duration.ofMillis(30); // within this time the ws client is unable to establish websocket connection and ends/throws close code 1006\n\n        var httpClientConfiguration = beanContext.getBean(HttpClientConfiguration.class);\n\n        httpClientConfiguration.setConnectTimeout(httpTimeout);\n\n        var webSocketClient = beanContext.getBean(WebSocketClient.class);\n\n        Publisher&lt;TestWebSocketClient&gt; client = webSocketClient.connect(TestWebSocketClient.class, uri);\n\n        var disposable = Flux.from(client)\n                .timeout(fluxTimeout)\n                .doFinally(unused -&gt; isCompleted.set(true))\n                .subscribe(\n                        testWebSocketClient -&gt; {\n                            isOpened.set(true);\n                            log.info(&quot;Success&quot;);\n                        },\n                        throwable -&gt; {\n                            isOpened.set(false);\n                            log.info(&quot;Expected error: {}&quot;, throwable.getMessage(), throwable);\n                        }\n                );\n\n        Awaitility.await().atMost(fluxTimeout).pollInterval(Duration.ofMillis(50))\n                .untilAsserted(\n                        () -&gt; Assertions.assertTrue(isCompleted.get(), &quot;WebSocket should be completed&quot;)\n                );\n\n        Awaitility.await().atMost(fluxTimeout).pollInterval(Duration.ofMillis(50))\n                .untilAsserted(\n                () -&gt; Assertions.assertFalse(isOpened.get(), &quot;WebSocket should not be opened&quot;)\n        );\n        Awaitility.await().atMost(fluxTimeout).pollInterval(Duration.ofMillis(50))\n                .untilAsserted(\n                () -&gt; Assertions.assertNotEquals(CloseReason.NORMAL, closeReasonAtomicReference.get(),\n                        &quot;WebSocket should not be opened&quot;)\n        );\n\n        disposable.dispose();\n    }\n}\n\n</code></pre>\n<p>Output:</p>\n<pre><code>&gt; Task :testClasses\n2023:12:02T14:54:12.335 [Test worker] INFO  i.m.c.DefaultApplicationContext$RuntimeConfiguredEnvironment[][] - Established active environments: [test]\n2023:12:02T14:54:13.286 [default-nioEventLoopGroup-1-2] INFO  com.example.WstimeoutTest[][] - Expected error: Error opening WebSocket client session: Abnormal Closure\nio.micronaut.websocket.exceptions.WebSocketClientException: Error opening WebSocket client session: Abnormal Closure\n    at io.micronaut.http.client.netty.websocket.NettyWebSocketClientHandler.handleCloseReason(NettyWebSocketClientHandler.java:262)\n    (...)\n&gt; Task :test\nBUILD SUCCESSFUL in 4s\n</code></pre>\n<p>It appears that there is no specific <code>TimeoutException</code>, but instead a <code>WebSocketClientException</code> with information about an <code>Abnormal Closure</code>. Additionally, no WS events are triggered, such as <code>onOpen</code>, <code>onMessage</code>, <code>onClose</code>, or <code>onError</code> as expected.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":168,"answer_count":3,"score":2,"last_activity_date":1701527758,"creation_date":1700571146,"last_edit_date":1700571547,"question_id":77522968,"body_markdown":"I am encountering an issue while working with WebSocket connections in Micronaut 3.9.0. I am attempting to set a timeout for the WebSocket connection, and despite my efforts, the timeout doesn&#39;t seem to interrupt the connection attempt as expected.\r\n\r\nI&#39;ve tried using the timeout operator on the Flux&lt;TestWebSocketClient&gt; object, but it doesn&#39;t seem to be working as I think. The connection attempt continues beyond the specified timeout.\r\n\r\nSample code:\r\n```java\r\npackage com.example;\r\n\r\nimport io.micronaut.context.BeanContext;\r\nimport io.micronaut.test.extensions.junit5.annotation.MicronautTest;\r\nimport io.micronaut.websocket.WebSocketClient;\r\nimport io.micronaut.websocket.WebSocketSession;\r\nimport io.micronaut.websocket.annotation.ClientWebSocket;\r\nimport io.micronaut.websocket.annotation.OnClose;\r\nimport io.micronaut.websocket.annotation.OnMessage;\r\nimport io.micronaut.websocket.annotation.OnOpen;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.awaitility.Awaitility;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.Assertions;\r\n\r\nimport jakarta.inject.Inject;\r\nimport org.reactivestreams.Publisher;\r\nimport reactor.core.publisher.Flux;\r\n\r\nimport java.time.Duration;\r\nimport java.util.concurrent.atomic.AtomicBoolean;\r\n\r\n@Slf4j\r\n@MicronautTest\r\nclass WstimeoutTest {\r\n    static AtomicBoolean isOpened = new AtomicBoolean(false);\r\n\r\n    @Inject\r\n    BeanContext beanContext;\r\n\r\n    @ClientWebSocket\r\n    static abstract class TestWebSocketClient implements AutoCloseable {\r\n        @OnMessage\r\n        void onMessage(String message) {\r\n            log.info(&quot;[onMessage] Got message: {}&quot;, message);\r\n        }\r\n\r\n        @OnOpen\r\n        void onOpen(WebSocketSession session) {\r\n            log.info(&quot;[onOpen] WS session id: {}&quot;, session.getId());\r\n            isOpened.set(true);\r\n        }\r\n\r\n        @OnClose\r\n        void onClose(WebSocketSession session) {\r\n            log.info(&quot;[onClose] WS session id: {}&quot;, session.getId());\r\n        }\r\n    }\r\n\r\n    @Test\r\n    void testWebSocketTimeout() {\r\n        var uri = &quot;ws://localhost&quot;;\r\n        var timeout = Duration.ofMillis(40); //Put here the time that ws client is unable to establish (or emit OnOpen event) websocket connection\r\n\r\n        var webSocketClient = beanContext.getBean(WebSocketClient.class);\r\n\r\n        Publisher&lt;TestWebSocketClient&gt; client = webSocketClient.connect(TestWebSocketClient.class,  uri);\r\n        Flux.from(client)\r\n                .timeout(timeout)\r\n                .doOnError(throwable -&gt; log.info(&quot;Expected error: {}&quot;, throwable.getMessage()))\r\n                .subscribe();\r\n\r\n\r\n        Awaitility.await().atLeast(Duration.ofMillis(250)).untilAsserted(\r\n                () -&gt; Assertions.assertFalse(isOpened.get(), &quot;WebSocket should not be opened&quot;)\r\n        );\r\n    }\r\n}\r\n```\r\n\r\nThe test output:\r\n```\r\n2023:11:21T13:24:56.140 [parallel-1] INFO  com.example.WstimeoutTest[][] - Expected error: Did not observe any item or terminal signal within 40ms in &#39;switchMapNoPrefetch&#39; (and no fallback has been configured)\r\n2023:11:21T13:24:56.178 [default-nioEventLoopGroup-1-2] INFO com.example.WstimeoutTest[][] - [onOpen] WS session id: AOKppbvUUl5zc3/x1N0lBiXW4WU=\r\n\r\nWebSocket should not be opened\r\nExpected :false\r\nActual   :true\r\n```\r\n\r\nIs there any way to properly timeout the WebSocket connection?","link":"https://stackoverflow.com/questions/77522968/websocket-connection-attempt-not-interrupted-by-flux-timeout-in-micronaut","title":"WebSocket connection attempt not interrupted by Flux timeout in Micronaut","body":"<p>I am encountering an issue while working with WebSocket connections in Micronaut 3.9.0. I am attempting to set a timeout for the WebSocket connection, and despite my efforts, the timeout doesn't seem to interrupt the connection attempt as expected.</p>\n<p>I've tried using the timeout operator on the Flux object, but it doesn't seem to be working as I think. The connection attempt continues beyond the specified timeout.</p>\n<p>Sample code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport io.micronaut.context.BeanContext;\nimport io.micronaut.test.extensions.junit5.annotation.MicronautTest;\nimport io.micronaut.websocket.WebSocketClient;\nimport io.micronaut.websocket.WebSocketSession;\nimport io.micronaut.websocket.annotation.ClientWebSocket;\nimport io.micronaut.websocket.annotation.OnClose;\nimport io.micronaut.websocket.annotation.OnMessage;\nimport io.micronaut.websocket.annotation.OnOpen;\nimport lombok.extern.slf4j.Slf4j;\nimport org.awaitility.Awaitility;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.Assertions;\n\nimport jakarta.inject.Inject;\nimport org.reactivestreams.Publisher;\nimport reactor.core.publisher.Flux;\n\nimport java.time.Duration;\nimport java.util.concurrent.atomic.AtomicBoolean;\n\n@Slf4j\n@MicronautTest\nclass WstimeoutTest {\n    static AtomicBoolean isOpened = new AtomicBoolean(false);\n\n    @Inject\n    BeanContext beanContext;\n\n    @ClientWebSocket\n    static abstract class TestWebSocketClient implements AutoCloseable {\n        @OnMessage\n        void onMessage(String message) {\n            log.info(&quot;[onMessage] Got message: {}&quot;, message);\n        }\n\n        @OnOpen\n        void onOpen(WebSocketSession session) {\n            log.info(&quot;[onOpen] WS session id: {}&quot;, session.getId());\n            isOpened.set(true);\n        }\n\n        @OnClose\n        void onClose(WebSocketSession session) {\n            log.info(&quot;[onClose] WS session id: {}&quot;, session.getId());\n        }\n    }\n\n    @Test\n    void testWebSocketTimeout() {\n        var uri = &quot;ws://localhost&quot;;\n        var timeout = Duration.ofMillis(40); //Put here the time that ws client is unable to establish (or emit OnOpen event) websocket connection\n\n        var webSocketClient = beanContext.getBean(WebSocketClient.class);\n\n        Publisher&lt;TestWebSocketClient&gt; client = webSocketClient.connect(TestWebSocketClient.class,  uri);\n        Flux.from(client)\n                .timeout(timeout)\n                .doOnError(throwable -&gt; log.info(&quot;Expected error: {}&quot;, throwable.getMessage()))\n                .subscribe();\n\n\n        Awaitility.await().atLeast(Duration.ofMillis(250)).untilAsserted(\n                () -&gt; Assertions.assertFalse(isOpened.get(), &quot;WebSocket should not be opened&quot;)\n        );\n    }\n}\n</code></pre>\n<p>The test output:</p>\n<pre><code>2023:11:21T13:24:56.140 [parallel-1] INFO  com.example.WstimeoutTest[][] - Expected error: Did not observe any item or terminal signal within 40ms in 'switchMapNoPrefetch' (and no fallback has been configured)\n2023:11:21T13:24:56.178 [default-nioEventLoopGroup-1-2] INFO com.example.WstimeoutTest[][] - [onOpen] WS session id: AOKppbvUUl5zc3/x1N0lBiXW4WU=\n\nWebSocket should not be opened\nExpected :false\nActual   :true\n</code></pre>\n<p>Is there any way to properly timeout the WebSocket connection?</p>\n"},{"tags":["java","maven","opencsv"],"comments":[{"score":0,"post_type":"question","creation_date":1701389948,"post_id":77581503,"comment_id":136773047,"body_markdown":"_&quot;...when running the package&quot;_ - Are you deploying the package to a server? If so, this means the classes aren&#39;t available in the _deployed_ environment.","link":"https://stackoverflow.com/questions/77581503/opencsv-classes-not-defined-with-maven-even-though-dependancy-is-clarified#comment136773047_77581503","body":"<i>&quot;...when running the package&quot;</i> - Are you deploying the package to a server? If so, this means the classes aren&#39;t available in the <i>deployed</i> environment."},{"score":0,"post_type":"question","creation_date":1701438242,"post_id":77581503,"comment_id":136778804,"body_markdown":"&quot;Are you deploying the package to a server?&quot;, yea but shouldn&#39;t the class be automatically packaged inside my package?","link":"https://stackoverflow.com/questions/77581503/opencsv-classes-not-defined-with-maven-even-though-dependancy-is-clarified#comment136778804_77581503","body":"&quot;Are you deploying the package to a server?&quot;, yea but shouldn&#39;t the class be automatically packaged inside my package?"}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701527221,"creation_date":1701527221,"answer_id":77590740,"question_id":77581503,"body_markdown":"When you package Maven it won&#39;t package the dependencies into the jar, you need to either move them to where you&#39;re running it or create a fat jar like this:\r\n\r\nclean compile assembly:single\r\n","link":"https://stackoverflow.com/questions/77581503/opencsv-classes-not-defined-with-maven-even-though-dependancy-is-clarified/77590740#77590740","title":"OpenCSV classes not defined with maven even though dependancy is clarified","body":"<p>When you package Maven it won't package the dependencies into the jar, you need to either move them to where you're running it or create a fat jar like this:</p>\n<p>clean compile assembly:single</p>\n"}],"comment_count":2,"is_answered":true,"view_count":23,"answer_count":1,"score":0,"last_activity_date":1701527221,"creation_date":1701376222,"last_edit_date":1701376259,"question_id":77581503,"body_markdown":"So I&#39;m trying to use OpenCSV with my maven project and it works before packaging (Builds no problem and I can see the classes are present) but I keep getting this error with Java that OpenCSV classes aren&#39;t defined when running the package:\r\n\r\n```\r\njava.lang.NoClassDefFoundError: com/opencsv/CSVReader\r\n\t...\r\nCaused by: java.lang.ClassNotFoundException: com.opencsv.CSVReader\r\n\t...\r\n```\r\nHere&#39;s my pom.xml:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;game&lt;/groupId&gt;\r\n    &lt;artifactId&gt;Plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\r\n            &lt;artifactId&gt;annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;24.0.1&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n            &lt;version&gt;3.14.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.opencsv/opencsv --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.opencsv&lt;/groupId&gt;\r\n            &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\r\n            &lt;version&gt;5.9&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\nI&#39;m using IntelliJ as my IDE and I have no idea why this doesn&#39;t work since I&#39;ve never had this issue before. I also tried to make a new project and same result each time","link":"https://stackoverflow.com/questions/77581503/opencsv-classes-not-defined-with-maven-even-though-dependancy-is-clarified","title":"OpenCSV classes not defined with maven even though dependancy is clarified","body":"<p>So I'm trying to use OpenCSV with my maven project and it works before packaging (Builds no problem and I can see the classes are present) but I keep getting this error with Java that OpenCSV classes aren't defined when running the package:</p>\n<pre><code>java.lang.NoClassDefFoundError: com/opencsv/CSVReader\n    ...\nCaused by: java.lang.ClassNotFoundException: com.opencsv.CSVReader\n    ...\n</code></pre>\n<p>Here's my pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;game&lt;/groupId&gt;\n    &lt;artifactId&gt;Plugin&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\n            &lt;artifactId&gt;annotations&lt;/artifactId&gt;\n            &lt;version&gt;24.0.1&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.14.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.opencsv/opencsv --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.opencsv&lt;/groupId&gt;\n            &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\n            &lt;version&gt;5.9&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I'm using IntelliJ as my IDE and I have no idea why this doesn't work since I've never had this issue before. I also tried to make a new project and same result each time</p>\n"},{"tags":["java","wear-os","android-sensors"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701525721,"creation_date":1701525721,"answer_id":77590651,"question_id":76359368,"body_markdown":"i use google health services to get the stepcount in the background. the new version unfortunately is even slower then the old one. \r\nit fires an update every 30 minutes most of the time. \r\ni discussed this with google on github and they told me it is to save battery. but waking the device every 30 minutes and not care about the doze intervals ... that&#39;s bad in my opinion. \r\n\r\nso to answer your question: getting fast regular updates in the background is not possible afaik. \r\n\r\nbut the combination is okay for me. ","link":"https://stackoverflow.com/questions/76359368/step-counter-sensor-on-wearos-only-updates-when-screen-is-turned-on-is-there-a/77590651#77590651","title":"Step counter sensor on WearOS only updates when screen is turned on. Is there a way for the counter to update in real time?","body":"<p>i use google health services to get the stepcount in the background. the new version unfortunately is even slower then the old one.\nit fires an update every 30 minutes most of the time.\ni discussed this with google on github and they told me it is to save battery. but waking the device every 30 minutes and not care about the doze intervals ... that's bad in my opinion.</p>\n<p>so to answer your question: getting fast regular updates in the background is not possible afaik.</p>\n<p>but the combination is okay for me.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":86,"answer_count":1,"score":0,"last_activity_date":1701525721,"creation_date":1685382352,"question_id":76359368,"body_markdown":"The STEP COUNTER sensor logs the number of steps since the last boot of the watch. I am trying to continuously monitor the number of steps taken, but it seems that the number of steps only updates when the watch&#39;s screen turns on. I understand that continuously updating step count will eat up battery, but is it possible for it to update in the background rather than only when the screen turns on?\r\n\r\nSo far, I am running the STEP COUNTER sensor in a Foreground service:\r\n\r\n```java\r\npublic SensorEventListener stepListener = new SensorEventListener() {\r\n        public void onAccuracyChanged(Sensor sensor, int acc) {\r\n        }\r\n        public void onSensorChanged(SensorEvent event) {\r\n            stepCounter = String.valueOf(event.values[0]);\r\n        }\r\n    };\r\n```\r\nI continuously log the step count. On my watch (Galaxy Watch 4), I have noticed that the watch is counting steps, but the watch face only updates the step count when I look at the watch. In the log, the number of steps remains the same until I look at the watch. After looking at the watch (and the screen turning on), the log now shows a larger number.\r\n\r\nThe sensor is working in the background (I have also set up an accelerometer that keeps refreshing in the background), but the step counter does not refresh the value until the screen turns on.\r\n\r\nIs there any way to allow the sensor to refresh in the background without turning on the watch&#39;s screen?","link":"https://stackoverflow.com/questions/76359368/step-counter-sensor-on-wearos-only-updates-when-screen-is-turned-on-is-there-a","title":"Step counter sensor on WearOS only updates when screen is turned on. Is there a way for the counter to update in real time?","body":"<p>The STEP COUNTER sensor logs the number of steps since the last boot of the watch. I am trying to continuously monitor the number of steps taken, but it seems that the number of steps only updates when the watch's screen turns on. I understand that continuously updating step count will eat up battery, but is it possible for it to update in the background rather than only when the screen turns on?</p>\n<p>So far, I am running the STEP COUNTER sensor in a Foreground service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public SensorEventListener stepListener = new SensorEventListener() {\n        public void onAccuracyChanged(Sensor sensor, int acc) {\n        }\n        public void onSensorChanged(SensorEvent event) {\n            stepCounter = String.valueOf(event.values[0]);\n        }\n    };\n</code></pre>\n<p>I continuously log the step count. On my watch (Galaxy Watch 4), I have noticed that the watch is counting steps, but the watch face only updates the step count when I look at the watch. In the log, the number of steps remains the same until I look at the watch. After looking at the watch (and the screen turning on), the log now shows a larger number.</p>\n<p>The sensor is working in the background (I have also set up an accelerometer that keeps refreshing in the background), but the step counter does not refresh the value until the screen turns on.</p>\n<p>Is there any way to allow the sensor to refresh in the background without turning on the watch's screen?</p>\n"},{"tags":["java","apache-spark","spark-streaming"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701521272,"last_edit_date":1701521272,"creation_date":1701333185,"answer_id":77576946,"question_id":76216799,"body_markdown":"new Library() must implement Iterator, Iterable interfaces.\r\non next - return new element.\r\n\r\n\r\nDO NOT use &quot;`res.add(dto)`&quot;! USE iterator instead!","link":"https://stackoverflow.com/questions/76216799/convering-consumer-of-a-function-to-stream-javardd/77576946#77576946","title":"Convering consumer of a function to Stream JavaRdd","body":"<p>new Library() must implement Iterator, Iterable interfaces.\non next - return new element.</p>\n<p>DO NOT use &quot;<code>res.add(dto)</code>&quot;! USE iterator instead!</p>\n"}],"comment_count":0,"is_answered":false,"view_count":22,"answer_count":1,"score":0,"last_activity_date":1701521272,"creation_date":1683710575,"question_id":76216799,"body_markdown":"How to process stream of data after consumer applyMapping ? Or process by pack of 1000?\r\n\r\n\r\n    private JavaRDD&lt;TracingOdsProjection&gt; enrichWithExternalData(JavaRDD&lt;ExternalDto&lt;T&gt;&gt; rdd) {\r\n        return rdd.flatMap(rec -&gt; {\r\n            List&lt;Dto&gt; res = new ArrayList&lt;&gt;();\r\n            new Library().applyMapping(dto -&gt; res.add(dto));\r\n\r\n            return res.iterator();\r\n        });\r\n    }\r\n\r\nI tried rdd.foreach or rdd.foreachPartition collect by 1000 and then sparkContext.parallelize(res).\r\n\r\n    SparkSession sparkSession = SparkSession.builder().config(jssc.sparkContext().getConf()).getOrCreate();\r\n    try (final JavaSparkContext sparkContext = new JavaSparkContext(sparkSession.sparkContext())) {\r\n     final JavaRDD&lt;TracingOdsProjection&gt; packOfMappingsJRdd = sparkContext.parallelize(res);\r\n       } catch (Exception e) {\r\n     log.error(&quot;On create or useing spark context: &quot;, e);\r\n       }\r\n\r\nBut got task not serializable for JavaSparkContext. when call jssc.sparkContext()\r\n\r\n\r\nI can&#39;t collect into one Arraylist&lt;Dto&gt; after applyMapping(..) Because it is too huge. ","link":"https://stackoverflow.com/questions/76216799/convering-consumer-of-a-function-to-stream-javardd","title":"Convering consumer of a function to Stream JavaRdd","body":"<p>How to process stream of data after consumer applyMapping ? Or process by pack of 1000?</p>\n<pre><code>private JavaRDD&lt;TracingOdsProjection&gt; enrichWithExternalData(JavaRDD&lt;ExternalDto&lt;T&gt;&gt; rdd) {\n    return rdd.flatMap(rec -&gt; {\n        List&lt;Dto&gt; res = new ArrayList&lt;&gt;();\n        new Library().applyMapping(dto -&gt; res.add(dto));\n\n        return res.iterator();\n    });\n}\n</code></pre>\n<p>I tried rdd.foreach or rdd.foreachPartition collect by 1000 and then sparkContext.parallelize(res).</p>\n<pre><code>SparkSession sparkSession = SparkSession.builder().config(jssc.sparkContext().getConf()).getOrCreate();\ntry (final JavaSparkContext sparkContext = new JavaSparkContext(sparkSession.sparkContext())) {\n final JavaRDD&lt;TracingOdsProjection&gt; packOfMappingsJRdd = sparkContext.parallelize(res);\n   } catch (Exception e) {\n log.error(&quot;On create or useing spark context: &quot;, e);\n   }\n</code></pre>\n<p>But got task not serializable for JavaSparkContext. when call jssc.sparkContext()</p>\n<p>I can't collect into one Arraylist after applyMapping(..) Because it is too huge.</p>\n"},{"tags":["java","javafx"],"comments":[{"score":3,"post_type":"question","creation_date":1701349514,"post_id":77578557,"comment_id":136766216,"body_markdown":"When providing code, include the package (and imports).  You are loading files relative to the package, so the package is important.  In any case follow the [lookup guide on StackOverflow](https://stackoverflow.com/questions/61531317/how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other) and it&#39;s troubleshooting section, as well as the [Eden guide](https://edencoding.com/where-to-put-resource-files-in-javafx/).","link":"https://stackoverflow.com/questions/77578557/javafx-nullpointerexception-location-is-required#comment136766216_77578557","body":"When providing code, include the package (and imports).  You are loading files relative to the package, so the package is important.  In any case follow the <a href=\"https://stackoverflow.com/questions/61531317/how-do-i-determine-the-correct-path-for-fxml-files-css-files-images-and-other\">lookup guide on StackOverflow</a> and it&#39;s troubleshooting section, as well as the <a href=\"https://edencoding.com/where-to-put-resource-files-in-javafx/\" rel=\"nofollow noreferrer\">Eden guide</a>."},{"score":0,"post_type":"question","creation_date":1701353920,"post_id":77578557,"comment_id":136767147,"body_markdown":"A little off-topic, but creating a new Scene and rebuilding FMXL layouts to populate it is just about the worse way that you could approach this.  Build you layouts just once, and put the two right side panes into something like a StackPane and then manipulate their visibility to show/hide them.","link":"https://stackoverflow.com/questions/77578557/javafx-nullpointerexception-location-is-required#comment136767147_77578557","body":"A little off-topic, but creating a new Scene and rebuilding FMXL layouts to populate it is just about the worse way that you could approach this.  Build you layouts just once, and put the two right side panes into something like a StackPane and then manipulate their visibility to show/hide them."}],"answers":[{"comment_count":0,"score":-1,"last_activity_date":1701516668,"last_edit_date":1701516668,"creation_date":1701348937,"answer_id":77578601,"question_id":77578557,"body_markdown":"It seems like the issue is with how you are trying to load the FXML files in the `CreateNewPatientController class`. The `getClass().getClassLoader().getResource()` method might not be able to locate the FXML files properly.\r\n\r\nTry using the `getClass().getResource()` method directly, without the `getClassLoader()` part. Also, make sure that the paths you provide are correct. ","link":"https://stackoverflow.com/questions/77578557/javafx-nullpointerexception-location-is-required/77578601#77578601","title":"JavaFX - NullPointerException : Location is required","body":"<p>It seems like the issue is with how you are trying to load the FXML files in the <code>CreateNewPatientController class</code>. The <code>getClass().getClassLoader().getResource()</code> method might not be able to locate the FXML files properly.</p>\n<p>Try using the <code>getClass().getResource()</code> method directly, without the <code>getClassLoader()</code> part. Also, make sure that the paths you provide are correct.</p>\n"}],"comment_count":2,"is_answered":false,"view_count":56,"answer_count":1,"score":0,"last_activity_date":1701516668,"creation_date":1701348446,"question_id":77578557,"body_markdown":"I have an application being executed on one stage during its lifetime. The stage has a scene set on a HBox. The HBox contains two anchorpanes which display the controls and the content.\r\n\r\nInitially, when I start the application, the stage is set, the scenes are loaded, and the controls are rendered just fine. When a button is clicked, I want to replace one of the anchorpanes with another anchorpane saved as a separate FXML file with its own controller.\r\n\r\nI am doing this by getting the stage and completely replacing the scene by creating another HBox and placing the anchorpanes there.\r\n\r\nThis is where the problem is: When the button is clicked, I get a &quot;Location is required&quot; exception. I&#39;m using IntelliJ IDEA as my IDE.\r\n\r\nHere is the main method:\r\n\r\n```\r\npublic class _Application extends javafx.application.Application\r\n{\r\n    @Override\r\n    public void start(Stage stage) throws IOException\r\n    {\r\n        HBox root = new HBox();\r\n\r\n        AnchorPane sidebar = FXMLLoader.load(Objects.requireNonNull(getClass().getResource(&quot;Sidebars/ReceptionistSidebar-View.fxml&quot;)));\r\n        AnchorPane appointmentMain = FXMLLoader.load(Objects.requireNonNull(getClass().getResource(&quot;Receptionist/Appointments/NewAppointment-View.fxml&quot;)));\r\n\r\n        root.getChildren().add(sidebar);\r\n        root.getChildren().add(appointmentMain);\r\n        Scene scene = new Scene(root);\r\n\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        launch();\r\n    }\r\n}\r\n```\r\n\r\nHere is the code for the button:\r\n\r\n```\r\npublic class CreateNewPatientController\r\n{\r\n\t@Override\r\n    public void onCancel_ButtonClick() throws IOException\r\n    {\r\n\t\t//Get the stage and scene\r\n        Stage currentStage = (Stage) anchorPane_CreateNewPatient.getScene().getWindow();\r\n        Scene a = currentStage.getScene();\r\n\r\n\t\t//Create a new HBox\r\n        HBox root = new HBox();\r\n\t\r\n\t\t//Load the anchorpane FXML files\r\n        AnchorPane sidebar = FXMLLoader.load(getClass().getClassLoader().getResource(&quot;Sidebars/ReceptionistSidebar-View.fxml&quot;));\r\n        AnchorPane appointmentMain = FXMLLoader.load(getClass().getClassLoader().getResource(&quot;Receptionist/CreateNewPatient-View.fxml&quot;));\r\n\r\n\t\t//Add the containers to the root\r\n        root.getChildren().add(sidebar);\r\n        root.getChildren().add(appointmentMain);\r\n\r\n\t\t//set root to scene and stage\r\n        Scene scene = new Scene(root);\r\n        currentStage.setScene(scene);\r\n    }\r\n}\r\n```\r\n\r\nThese are my file structures:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/s6TMp.png)](https://i.stack.imgur.com/s6TMp.png)","link":"https://stackoverflow.com/questions/77578557/javafx-nullpointerexception-location-is-required","title":"JavaFX - NullPointerException : Location is required","body":"<p>I have an application being executed on one stage during its lifetime. The stage has a scene set on a HBox. The HBox contains two anchorpanes which display the controls and the content.</p>\n<p>Initially, when I start the application, the stage is set, the scenes are loaded, and the controls are rendered just fine. When a button is clicked, I want to replace one of the anchorpanes with another anchorpane saved as a separate FXML file with its own controller.</p>\n<p>I am doing this by getting the stage and completely replacing the scene by creating another HBox and placing the anchorpanes there.</p>\n<p>This is where the problem is: When the button is clicked, I get a &quot;Location is required&quot; exception. I'm using IntelliJ IDEA as my IDE.</p>\n<p>Here is the main method:</p>\n<pre><code>public class _Application extends javafx.application.Application\n{\n    @Override\n    public void start(Stage stage) throws IOException\n    {\n        HBox root = new HBox();\n\n        AnchorPane sidebar = FXMLLoader.load(Objects.requireNonNull(getClass().getResource(&quot;Sidebars/ReceptionistSidebar-View.fxml&quot;)));\n        AnchorPane appointmentMain = FXMLLoader.load(Objects.requireNonNull(getClass().getResource(&quot;Receptionist/Appointments/NewAppointment-View.fxml&quot;)));\n\n        root.getChildren().add(sidebar);\n        root.getChildren().add(appointmentMain);\n        Scene scene = new Scene(root);\n\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args)\n    {\n        launch();\n    }\n}\n</code></pre>\n<p>Here is the code for the button:</p>\n<pre><code>public class CreateNewPatientController\n{\n    @Override\n    public void onCancel_ButtonClick() throws IOException\n    {\n        //Get the stage and scene\n        Stage currentStage = (Stage) anchorPane_CreateNewPatient.getScene().getWindow();\n        Scene a = currentStage.getScene();\n\n        //Create a new HBox\n        HBox root = new HBox();\n    \n        //Load the anchorpane FXML files\n        AnchorPane sidebar = FXMLLoader.load(getClass().getClassLoader().getResource(&quot;Sidebars/ReceptionistSidebar-View.fxml&quot;));\n        AnchorPane appointmentMain = FXMLLoader.load(getClass().getClassLoader().getResource(&quot;Receptionist/CreateNewPatient-View.fxml&quot;));\n\n        //Add the containers to the root\n        root.getChildren().add(sidebar);\n        root.getChildren().add(appointmentMain);\n\n        //set root to scene and stage\n        Scene scene = new Scene(root);\n        currentStage.setScene(scene);\n    }\n}\n</code></pre>\n<p>These are my file structures:</p>\n<p><a href=\"https://i.stack.imgur.com/s6TMp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s6TMp.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","android-fragments"],"comments":[{"score":0,"post_type":"question","creation_date":1683128846,"post_id":76165170,"comment_id":134319965,"body_markdown":"Show how `fragmentView` is declared and used. Show how `onEventAPIProgressChanged` is called on the fragment.","link":"https://stackoverflow.com/questions/76165170/cant-update-fragment-with-api-call-listener#comment134319965_76165170","body":"Show how <code>fragmentView</code> is declared and used. Show how <code>onEventAPIProgressChanged</code> is called on the fragment."},{"score":0,"post_type":"question","creation_date":1683141826,"post_id":76165170,"comment_id":134322622,"body_markdown":"fragmentView is essentially just view (I just tested if it would help to declare it - in retrospective kinda stupid) and its declared right above onViewCreated(). I edited my question for clarification on the `onEventAPIProgressChanged()`","link":"https://stackoverflow.com/questions/76165170/cant-update-fragment-with-api-call-listener#comment134322622_76165170","body":"fragmentView is essentially just view (I just tested if it would help to declare it - in retrospective kinda stupid) and its declared right above onViewCreated(). I edited my question for clarification on the <code>onEventAPIProgressChanged()</code>"},{"score":0,"post_type":"question","creation_date":1683142048,"post_id":76165170,"comment_id":134322659,"body_markdown":"How and when is the fragment registered as the api listener?","link":"https://stackoverflow.com/questions/76165170/cant-update-fragment-with-api-call-listener#comment134322659_76165170","body":"How and when is the fragment registered as the api listener?"}],"comment_count":3,"is_answered":false,"view_count":29,"answer_count":0,"score":0,"last_activity_date":1701516630,"creation_date":1683125044,"last_edit_date":1701516630,"question_id":76165170,"body_markdown":" I&#39;m making a few API calls and I would like to have a progress animation in my home fragment of my Android App (for testing I simply update text).\r\nI have implemented it so that the fragment is a listener for these API calls and when I `Log.d()` inside the `onEventAPIProgressChanged()` method the right numbers are printed, but every time I try to change the text of the fragment it tells me that my view is null.\r\n\r\nSo I thought okay so maybe my fragment is not yet initialized, before the first `onEventAPIProgressChanged()` is called, but I when I just change the text on initialisation of the fragment to &quot;loading...&quot; I can clearly see that the fragment (and therefore also the view) is already initialized and in fact not null.\r\n\r\nHere is my `HomeFragment`:\r\n\r\n```\r\npublic class HomeFragment extends Fragment implements EventAPIListener {\r\n\r\n//I skipped some unrelated code here\r\n\r\n@Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View view = inflater.inflate(R.layout.fragment_home, container, false);\r\n        progressBar = view.findViewById(R.id.determinateBar);\r\n        barText = view.findViewById(R.id.barText);\r\n        return view;\r\n    }\r\n\r\n    private View fragmentView;\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n        fragmentView = view;\r\n\r\n        progressBar = view.findViewById(R.id.determinateBar);\r\n        barText = view.findViewById(R.id.barText);\r\n        barText.setText(&quot;loading...&quot;);\r\n        Log.d(&quot;PROGRESS&quot;,&quot;View created&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void onEventAPIProgressChanged(int currentItem, int maxItems) {\r\n        Log.d(&quot;PROGRESS&quot;, currentItem + &quot; / &quot; + maxItems);\r\n        if (fragmentView == null) {\r\n            Log.d(&quot;PROGRESS&quot;, &quot;VIEW NULL&quot;);\r\n            return;\r\n        }\r\n\r\n        TextView localBarText = fragmentView.findViewById(R.id.barText);\r\n        if (localBarText != null) {\r\n            localBarText.setText(currentItem + &quot; / &quot; + maxItems);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nThe console returns first &quot;View created&quot; and then the correct API call number and &quot;VIEW NULL&quot;.\r\nAnd the text is changed immediately to &quot;loading...&quot; but the `fragmentView` (I also tried it with simply the view) never becomes not null :(\r\n\r\nI expected it to change my Text - and even if the fragment takes a few seconds to initialise (which it seemingly does not) at least for later API calls `fragmentView` should not be null.\r\n\r\n\r\nEdit:  \r\n`onEventAPIProgressChanged()` is part of the `EventAPIListener` and gets called in my API-Request when one API Request is finished:\r\n\r\n```\r\npublic void onEventAPIProgressChanged(int currentItem, int maxItems) {\r\n        if(registeredListeners.size() &lt; 1) {return;}\r\n        for(EventAPIListener listener:registeredListeners) {\r\n            listener.onEventAPIProgressChanged(currentItem, maxItems);\r\n        }\r\n    }\r\n\r\n  public void makeVolleyRequest(String apiUrl, boolean lastCall, int callID, String artistDisplayName) {\r\n        request = new StringRequest(Request.Method.GET, apiUrl, new Response.Listener&lt;String&gt;() {\r\n            @Override\r\n            public void onResponse(String response) {\r\n                try { //Filters the JSON responses for actual events\r\n                    Log.d(&quot;Volley&quot;, &quot;TM-&quot; + callID + &quot; received&quot;);\r\n                    onEventAPIProgressChanged(callID, artistList.size());\r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                } finally {...}\r\n```","link":"https://stackoverflow.com/questions/76165170/cant-update-fragment-with-api-call-listener","title":"Can&#39;t update fragment with API call listener","body":"<p>I'm making a few API calls and I would like to have a progress animation in my home fragment of my Android App (for testing I simply update text).\nI have implemented it so that the fragment is a listener for these API calls and when I <code>Log.d()</code> inside the <code>onEventAPIProgressChanged()</code> method the right numbers are printed, but every time I try to change the text of the fragment it tells me that my view is null.</p>\n<p>So I thought okay so maybe my fragment is not yet initialized, before the first <code>onEventAPIProgressChanged()</code> is called, but I when I just change the text on initialisation of the fragment to &quot;loading...&quot; I can clearly see that the fragment (and therefore also the view) is already initialized and in fact not null.</p>\n<p>Here is my <code>HomeFragment</code>:</p>\n<pre><code>public class HomeFragment extends Fragment implements EventAPIListener {\n\n//I skipped some unrelated code here\n\n@Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View view = inflater.inflate(R.layout.fragment_home, container, false);\n        progressBar = view.findViewById(R.id.determinateBar);\n        barText = view.findViewById(R.id.barText);\n        return view;\n    }\n\n    private View fragmentView;\n\n    @Override\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n\n        fragmentView = view;\n\n        progressBar = view.findViewById(R.id.determinateBar);\n        barText = view.findViewById(R.id.barText);\n        barText.setText(&quot;loading...&quot;);\n        Log.d(&quot;PROGRESS&quot;,&quot;View created&quot;);\n    }\n\n    @Override\n    public void onEventAPIProgressChanged(int currentItem, int maxItems) {\n        Log.d(&quot;PROGRESS&quot;, currentItem + &quot; / &quot; + maxItems);\n        if (fragmentView == null) {\n            Log.d(&quot;PROGRESS&quot;, &quot;VIEW NULL&quot;);\n            return;\n        }\n\n        TextView localBarText = fragmentView.findViewById(R.id.barText);\n        if (localBarText != null) {\n            localBarText.setText(currentItem + &quot; / &quot; + maxItems);\n        }\n    }\n}\n\n</code></pre>\n<p>The console returns first &quot;View created&quot; and then the correct API call number and &quot;VIEW NULL&quot;.\nAnd the text is changed immediately to &quot;loading...&quot; but the <code>fragmentView</code> (I also tried it with simply the view) never becomes not null :(</p>\n<p>I expected it to change my Text - and even if the fragment takes a few seconds to initialise (which it seemingly does not) at least for later API calls <code>fragmentView</code> should not be null.</p>\n<p>Edit:<br />\n<code>onEventAPIProgressChanged()</code> is part of the <code>EventAPIListener</code> and gets called in my API-Request when one API Request is finished:</p>\n<pre><code>public void onEventAPIProgressChanged(int currentItem, int maxItems) {\n        if(registeredListeners.size() &lt; 1) {return;}\n        for(EventAPIListener listener:registeredListeners) {\n            listener.onEventAPIProgressChanged(currentItem, maxItems);\n        }\n    }\n\n  public void makeVolleyRequest(String apiUrl, boolean lastCall, int callID, String artistDisplayName) {\n        request = new StringRequest(Request.Method.GET, apiUrl, new Response.Listener&lt;String&gt;() {\n            @Override\n            public void onResponse(String response) {\n                try { //Filters the JSON responses for actual events\n                    Log.d(&quot;Volley&quot;, &quot;TM-&quot; + callID + &quot; received&quot;);\n                    onEventAPIProgressChanged(callID, artistList.size());\n                } catch (JSONException e) {\n                    e.printStackTrace();\n                } finally {...}\n</code></pre>\n"},{"tags":["java","chatbot"],"comments":[{"score":0,"post_type":"question","creation_date":1697034623,"post_id":77257074,"comment_id":136229092,"body_markdown":"Mostly this was due to insufficient CPU, as when I checked the utilization it was 100%.","link":"https://stackoverflow.com/questions/77257074/localaichatmodel-results-into-java-io-interruptedioexception-timeout#comment136229092_77257074","body":"Mostly this was due to insufficient CPU, as when I checked the utilization it was 100%."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701515018,"creation_date":1701515018,"answer_id":77590082,"question_id":77257074,"body_markdown":"I solved this by setting the timout to a higher value (e.g. 10 minutes)\r\n\r\n```\r\nChatLanguageModel model = LocalAiChatModel.builder()\r\n                .baseUrl(&quot;http://localhost:8080&quot;)\r\n                .modelName(&quot;lunademo&quot;)\r\n                .temperature(0.0)\r\n                .timeout(Duration.ofMinutes(10))\r\n                .logRequests(true)\r\n                .logResponses(true)\r\n                .build();\r\n```\r\nUsing only CPU just takes sometimes a long time to answer. Using GPU will be 20 times faster.","link":"https://stackoverflow.com/questions/77257074/localaichatmodel-results-into-java-io-interruptedioexception-timeout/77590082#77590082","title":"LocalAiChatModel results into java.io.InterruptedIOException: timeout","body":"<p>I solved this by setting the timout to a higher value (e.g. 10 minutes)</p>\n<pre><code>ChatLanguageModel model = LocalAiChatModel.builder()\n                .baseUrl(&quot;http://localhost:8080&quot;)\n                .modelName(&quot;lunademo&quot;)\n                .temperature(0.0)\n                .timeout(Duration.ofMinutes(10))\n                .logRequests(true)\n                .logResponses(true)\n                .build();\n</code></pre>\n<p>Using only CPU just takes sometimes a long time to answer. Using GPU will be 20 times faster.</p>\n"}],"comment_count":1,"is_answered":false,"view_count":94,"answer_count":1,"score":0,"last_activity_date":1701515018,"creation_date":1696837913,"question_id":77257074,"body_markdown":"While trying to run https://github.com/langchain4j/langchain4j-examples/blob/main/devoxx/src/main/java/_12_ChatWithDocumentsExamples.java, for for &quot;localai&quot; instead of &quot;openai&quot;, by replacing chatLanguageModel in ConversationalRetrievalChain with LocalAiChatModel. \r\n\r\nWith below configuration I keep on getting - java.lang.RuntimeException: java.io.InterruptedIOException: timeout - all the time even after changing timout to 3 minutes: \r\n\r\n                    chatLanguageModel = LocalAiChatModel.builder()\r\n                        .modelName(&quot;ggml-model-gpt4all-falcon-q4_0.bin&quot;)\r\n                        .baseUrl(&quot;http://localhost:8080&quot;)\r\n                        .temperature(0.0)\r\n                        .timeout(Duration.ofMinutes(1))\r\n                        .maxRetries(3)\r\n                        .logRequests(true)\r\n                        .logResponses(true)\r\n                        .build();\r\n                        \r\nI also tried other models like - llama-2-7b-chat.ggmlv3.q4_0.bin, orca-mini-3b.ggmlv3.q4_0.bin","link":"https://stackoverflow.com/questions/77257074/localaichatmodel-results-into-java-io-interruptedioexception-timeout","title":"LocalAiChatModel results into java.io.InterruptedIOException: timeout","body":"<p>While trying to run <a href=\"https://github.com/langchain4j/langchain4j-examples/blob/main/devoxx/src/main/java/_12_ChatWithDocumentsExamples.java\" rel=\"nofollow noreferrer\">https://github.com/langchain4j/langchain4j-examples/blob/main/devoxx/src/main/java/_12_ChatWithDocumentsExamples.java</a>, for for &quot;localai&quot; instead of &quot;openai&quot;, by replacing chatLanguageModel in ConversationalRetrievalChain with LocalAiChatModel.</p>\n<p>With below configuration I keep on getting - java.lang.RuntimeException: java.io.InterruptedIOException: timeout - all the time even after changing timout to 3 minutes:</p>\n<pre><code>                chatLanguageModel = LocalAiChatModel.builder()\n                    .modelName(&quot;ggml-model-gpt4all-falcon-q4_0.bin&quot;)\n                    .baseUrl(&quot;http://localhost:8080&quot;)\n                    .temperature(0.0)\n                    .timeout(Duration.ofMinutes(1))\n                    .maxRetries(3)\n                    .logRequests(true)\n                    .logResponses(true)\n                    .build();\n                    \n</code></pre>\n<p>I also tried other models like - llama-2-7b-chat.ggmlv3.q4_0.bin, orca-mini-3b.ggmlv3.q4_0.bin</p>\n"},{"tags":["java","web-services","web","architecture","microservices"],"comments":[{"score":0,"post_type":"question","creation_date":1701555406,"post_id":77580098,"comment_id":136791032,"body_markdown":"A key ingredient to help you choose a path is understanding the search use cases. Here are some questions that should help shape the problem: You mentioned geolocation, but what other kinds of search do you expect to support? Free text search? Across how many properties? And how many data types? Are items the only entity returned by the search? How many records are we expecting to have? Would users type something into a search bar, or would they use a filter form?","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha#comment136791032_77580098","body":"A key ingredient to help you choose a path is understanding the search use cases. Here are some questions that should help shape the problem: You mentioned geolocation, but what other kinds of search do you expect to support? Free text search? Across how many properties? And how many data types? Are items the only entity returned by the search? How many records are we expecting to have? Would users type something into a search bar, or would they use a filter form?"},{"score":0,"post_type":"question","creation_date":1701560435,"post_id":77580098,"comment_id":136791474,"body_markdown":"Free text search would be cool, hoped Meilisearch would allow me to do that. Searches should be made upon the titles of the items ( or the tags &lt;- I will use an image classifier which will automatically classify my images with some tags). Yeah only items should be returned by the search, geolocation is pretty important as I&#39;ll kinda render those locations on a map. Yeah i wanted users to type smth into a searchbar which is why I wanted to go for a search engine like meilisearch. I just dont know if making a secondary DB and somehow try to implement CQRS with that db would be a good idea or not","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha#comment136791474_77580098","body":"Free text search would be cool, hoped Meilisearch would allow me to do that. Searches should be made upon the titles of the items ( or the tags &lt;- I will use an image classifier which will automatically classify my images with some tags). Yeah only items should be returned by the search, geolocation is pretty important as I&#39;ll kinda render those locations on a map. Yeah i wanted users to type smth into a searchbar which is why I wanted to go for a search engine like meilisearch. I just dont know if making a secondary DB and somehow try to implement CQRS with that db would be a good idea or not"},{"score":0,"post_type":"question","creation_date":1701683902,"post_id":77580098,"comment_id":136801793,"body_markdown":"The kind of features you described seem to point to something that would be better served by a search engine database. Especially as the scale and complexity of queries might grow. But if it&#39;s a small project, you may want to avoid growing the project&#39;s tech stack. There is no real &#39;right&#39; solution, and it&#39;s a matter of tradeoffs. Better query performance, more scalable, and flexible? Go with a search engine DB. Leaner tech stack, fewer components, but less scalable? Go with the DB you have. Rob Conklin&#39;s answer already gives you some comparison points between the two options.","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha#comment136801793_77580098","body":"The kind of features you described seem to point to something that would be better served by a search engine database. Especially as the scale and complexity of queries might grow. But if it&#39;s a small project, you may want to avoid growing the project&#39;s tech stack. There is no real &#39;right&#39; solution, and it&#39;s a matter of tradeoffs. Better query performance, more scalable, and flexible? Go with a search engine DB. Leaner tech stack, fewer components, but less scalable? Go with the DB you have. Rob Conklin&#39;s answer already gives you some comparison points between the two options."},{"score":0,"post_type":"question","creation_date":1701694021,"post_id":77580098,"comment_id":136803501,"body_markdown":"Think I&#39;ll go with the separate microservice with Meilisearch option then. Thanks a bunch for all the advice.","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha#comment136803501_77580098","body":"Think I&#39;ll go with the separate microservice with Meilisearch option then. Thanks a bunch for all the advice."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701363067,"post_id":77580147,"comment_id":136769023,"body_markdown":"So if I understand correctly, you&#39;re telling me to not have a separate DB but actually make all the queries in my main DB and somehow cache them for the Meilisearch to use afterwards? Hope I&#39;m correct, if not don&#39;t hesitate to correct me. Yet my question remains. In this case should I also integrate Meilisearch in my Item Service and follow the approach you told me to ( so basically not have a separate search service)?","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha/77580147#comment136769023_77580147","body":"So if I understand correctly, you&#39;re telling me to not have a separate DB but actually make all the queries in my main DB and somehow cache them for the Meilisearch to use afterwards? Hope I&#39;m correct, if not don&#39;t hesitate to correct me. Yet my question remains. In this case should I also integrate Meilisearch in my Item Service and follow the approach you told me to ( so basically not have a separate search service)?"}],"comment_count":1,"score":1,"last_activity_date":1701362414,"creation_date":1701362414,"answer_id":77580147,"question_id":77580098,"body_markdown":"as mentioned here https://stackoverflow.com/a/56775778/19917972 all filtering should be done via query to the DB. Now for the search option you can cache lets say names of entities you will provide search for. And then on button click you issue the query and get it. It all depends how efficient you need it to be and what are you searching for. But the best is combination of cache and db querying ","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha/77580147#77580147","title":"Having a separate search microservice or integrate it inside the microservice having the data to be searched after?","body":"<p>as mentioned here <a href=\"https://stackoverflow.com/a/56775778/19917972\">https://stackoverflow.com/a/56775778/19917972</a> all filtering should be done via query to the DB. Now for the search option you can cache lets say names of entities you will provide search for. And then on button click you issue the query and get it. It all depends how efficient you need it to be and what are you searching for. But the best is combination of cache and db querying</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701381494,"creation_date":1701381494,"answer_id":77581939,"question_id":77580098,"body_markdown":"Search is very often a cross-cutting concern across multiple databases/services.  Implementing an effective search-engine often requires back-end loading and composition of multiple entities into a single flattened view for high-speed searches.  Databases are notoriously VERY bad at this, and are not optimized for searching.  Most databases have some patched-on layer which does help with creating things like inverted indexes, but they are generally a poor substitute for a real stand-alone search engine, but definitely comes with convenience of not having to have a separate data-store and dealing with streaming changes to that other data store.\r\n\r\nRegardless, look at your database, look at the available search engines, explore what your cloud/hosting provider has available.  There is probably going to be a product that is your lowest barrier-to-entry that you should start with that will give you what you want pretty efficiently.\r\n\r\nAlso, I&#39;d be astonished if it fit neatly into a single &quot;item&quot; service.  As soon as you want to search for items in a user&#39;s order history, or some other sort of cross-entity concern, you will want to have a consolidated search index.","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha/77581939#77581939","title":"Having a separate search microservice or integrate it inside the microservice having the data to be searched after?","body":"<p>Search is very often a cross-cutting concern across multiple databases/services.  Implementing an effective search-engine often requires back-end loading and composition of multiple entities into a single flattened view for high-speed searches.  Databases are notoriously VERY bad at this, and are not optimized for searching.  Most databases have some patched-on layer which does help with creating things like inverted indexes, but they are generally a poor substitute for a real stand-alone search engine, but definitely comes with convenience of not having to have a separate data-store and dealing with streaming changes to that other data store.</p>\n<p>Regardless, look at your database, look at the available search engines, explore what your cloud/hosting provider has available.  There is probably going to be a product that is your lowest barrier-to-entry that you should start with that will give you what you want pretty efficiently.</p>\n<p>Also, I'd be astonished if it fit neatly into a single &quot;item&quot; service.  As soon as you want to search for items in a user's order history, or some other sort of cross-entity concern, you will want to have a consolidated search index.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701447001,"post_id":77583889,"comment_id":136780573,"body_markdown":"I appreciate it a lot. It&#39;s basically a bigger project for my final year project. Won&#39;t be used irl obviously but I&#39;d love to have some scalability as my teacher would appreciate it.  Again thanks for the advice","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha/77583889#comment136780573_77583889","body":"I appreciate it a lot. It&#39;s basically a bigger project for my final year project. Won&#39;t be used irl obviously but I&#39;d love to have some scalability as my teacher would appreciate it.  Again thanks for the advice"},{"score":0,"post_type":"answer","creation_date":1701544583,"post_id":77583889,"comment_id":136789994,"body_markdown":"i get that you dont have any experience on designing systems and you dont want to learn everything just for this assignment, but you need to first understand that usually there isnt a golden rule. you pick your design + technology stack based on the requirements.\n\nFor your items service i see 2 options. One is a microservice which does all the interaction with the DB and the other is CQRS. whichever one u pick, u just need to document the decision right. and this is not just regarding the numbers (read/writes per second) but also have a look at ACID cause u need to handle race conditions etc","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha/77583889#comment136789994_77583889","body":"i get that you dont have any experience on designing systems and you dont want to learn everything just for this assignment, but you need to first understand that usually there isnt a golden rule. you pick your design + technology stack based on the requirements.  For your items service i see 2 options. One is a microservice which does all the interaction with the DB and the other is CQRS. whichever one u pick, u just need to document the decision right. and this is not just regarding the numbers (read/writes per second) but also have a look at ACID cause u need to handle race conditions etc"},{"score":0,"post_type":"answer","creation_date":1701560552,"post_id":77583889,"comment_id":136791481,"body_markdown":"By CQRS you mean to make another DB for my search microservice and somehow try to keep it in sync with my main db by sending events or smth through a rabbitmq pipe or something? ( Still learning rabbitmq and microservices stuff so please forgive my technical language).  The search DB would ofc be only for reads mostly, but there would be writes and deletes as well since i need to keep it in sync with the first db if i understand correctly. I could try to do this but idk what troubles I might encounter. Thanks for the reply!","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha/77583889#comment136791481_77583889","body":"By CQRS you mean to make another DB for my search microservice and somehow try to keep it in sync with my main db by sending events or smth through a rabbitmq pipe or something? ( Still learning rabbitmq and microservices stuff so please forgive my technical language).  The search DB would ofc be only for reads mostly, but there would be writes and deletes as well since i need to keep it in sync with the first db if i understand correctly. I could try to do this but idk what troubles I might encounter. Thanks for the reply!"},{"score":0,"post_type":"answer","creation_date":1701694740,"post_id":77583889,"comment_id":136803629,"body_markdown":"yeah, so i guess you need to spend more time on reading about CQRS and you need to decide if you want to add this extra time for the learning curve. As I said the solution design is a matter of decisions and this one is something you ll face in your professional career as well (using a new tech). For your specific question, the 2 databases will be kept in sync behind the scenes, not on application level. Again this is something for you to research cause there are different solutions for different requirements. And you ll have to sacrifice something in ACID if you want to go with CQRS..","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha/77583889#comment136803629_77583889","body":"yeah, so i guess you need to spend more time on reading about CQRS and you need to decide if you want to add this extra time for the learning curve. As I said the solution design is a matter of decisions and this one is something you ll face in your professional career as well (using a new tech). For your specific question, the 2 databases will be kept in sync behind the scenes, not on application level. Again this is something for you to research cause there are different solutions for different requirements. And you ll have to sacrifice something in ACID if you want to go with CQRS.."},{"score":0,"post_type":"answer","creation_date":1701695170,"post_id":77583889,"comment_id":136803705,"body_markdown":"i dont want to lead you to any decisions, but another thing i would do in your case is to check what Meilisearch suggests, since this is your main tool. From some brief search i did, i see that they mostly go with a simple solution of 1 db. app stores directly at it but then queries through Meilisearch","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha/77583889#comment136803705_77583889","body":"i dont want to lead you to any decisions, but another thing i would do in your case is to check what Meilisearch suggests, since this is your main tool. From some brief search i did, i see that they mostly go with a simple solution of 1 db. app stores directly at it but then queries through Meilisearch"},{"score":1,"post_type":"answer","creation_date":1701719262,"post_id":77583889,"comment_id":136808389,"body_markdown":"Thanks for all the info. It&#39;s true I don&#39;t have much knowledge about CQRS I learnt a little about it for a project I had to do for faculty where we basically had a monolith and kinda split the commands and queries, but in our project we only used one DB following our teacher&#39;s advice, as in this case I&#39;m talking about microservices and potentially different DB&#39;s so of course there is a little bit of confusion. Trying my best to pick up on a solution as quick as possible as I need to get to the actual work ( still in the phases of deciding the architecture)","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha/77583889#comment136808389_77583889","body":"Thanks for all the info. It&#39;s true I don&#39;t have much knowledge about CQRS I learnt a little about it for a project I had to do for faculty where we basically had a monolith and kinda split the commands and queries, but in our project we only used one DB following our teacher&#39;s advice, as in this case I&#39;m talking about microservices and potentially different DB&#39;s so of course there is a little bit of confusion. Trying my best to pick up on a solution as quick as possible as I need to get to the actual work ( still in the phases of deciding the architecture)"}],"comment_count":6,"score":0,"last_activity_date":1701419469,"creation_date":1701419469,"answer_id":77583889,"question_id":77580098,"body_markdown":"Your concerns are another way to say &#39;when to use the CQRS (command query responsibility segregation) pattern&#39;.\r\n\r\nI ll add the [stackoverflow thread][1] here, but you can do some more research on your own. From my POV, if it is just some learning project, then you dont expect high traffic, so you dont have the scalability concern. So go for the easiest option which is a search inside current microservice. If you want to learn CQRS then obviously go for it. \r\n\r\nRegarding 2.1, in general avoid accessing DBs of a microservice from outside its scope. So avoid creating a service that can access the items db from outside items-microservice. This complexes things a lot in large scale, many teams etc. Think that different teams might work on each microservice in a real world example and how messy this could get...\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/8820748/when-to-use-the-cqrs-design-pattern","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha/77583889#77583889","title":"Having a separate search microservice or integrate it inside the microservice having the data to be searched after?","body":"<p>Your concerns are another way to say 'when to use the CQRS (command query responsibility segregation) pattern'.</p>\n<p>I ll add the <a href=\"https://stackoverflow.com/questions/8820748/when-to-use-the-cqrs-design-pattern\">stackoverflow thread</a> here, but you can do some more research on your own. From my POV, if it is just some learning project, then you dont expect high traffic, so you dont have the scalability concern. So go for the easiest option which is a search inside current microservice. If you want to learn CQRS then obviously go for it.</p>\n<p>Regarding 2.1, in general avoid accessing DBs of a microservice from outside its scope. So avoid creating a service that can access the items db from outside items-microservice. This complexes things a lot in large scale, many teams etc. Think that different teams might work on each microservice in a real world example and how messy this could get...</p>\n"}],"comment_count":4,"is_answered":true,"view_count":87,"answer_count":3,"score":0,"last_activity_date":1701507482,"creation_date":1701361983,"last_edit_date":1701507482,"question_id":77580098,"body_markdown":"I am currently learning microservices and working on a project and i got the following question:\r\n\r\nLet&#39;s say I have the following service: Item Service.\r\n\r\nItem service will work with creating different items in a mongodb DB. I will also want to have a search function in my app and I would implement it by using Meilisearch since it also features support for geolocation searches and it&#39;s pretty neat overall.\r\n\r\nI don&#39;t know which of the following approaches I should follow:\r\n1) Integrate all of this inside my Item Service\r\n  \r\n2.1) Have a separate service for the search functionality but in this case the search service should somehow interact with the database of Item Service. Should search service make direct calls to the DB item service is using? ( Basically 2 services on one DB, but one only reads one only writes)\r\n  \r\n2.2) Have a separate service for the search functionality and also a different DB ( I&#39;d need to somehow keep the info in sync in the both databases and also I don&#39;t know if it&#39;s ok since I&#39;d have duplicate data)\r\n\r\nI&#39;d appreciate suggestions on this since I am really new to Microservices. \r\nThanks!\r\n\r\nI did not try anything yet, I don&#39;t know which approach to follow basically","link":"https://stackoverflow.com/questions/77580098/having-a-separate-search-microservice-or-integrate-it-inside-the-microservice-ha","title":"Having a separate search microservice or integrate it inside the microservice having the data to be searched after?","body":"<p>I am currently learning microservices and working on a project and i got the following question:</p>\n<p>Let's say I have the following service: Item Service.</p>\n<p>Item service will work with creating different items in a mongodb DB. I will also want to have a search function in my app and I would implement it by using Meilisearch since it also features support for geolocation searches and it's pretty neat overall.</p>\n<p>I don't know which of the following approaches I should follow:</p>\n<ol>\n<li>Integrate all of this inside my Item Service</li>\n</ol>\n<p>2.1) Have a separate service for the search functionality but in this case the search service should somehow interact with the database of Item Service. Should search service make direct calls to the DB item service is using? ( Basically 2 services on one DB, but one only reads one only writes)</p>\n<p>2.2) Have a separate service for the search functionality and also a different DB ( I'd need to somehow keep the info in sync in the both databases and also I don't know if it's ok since I'd have duplicate data)</p>\n<p>I'd appreciate suggestions on this since I am really new to Microservices.\nThanks!</p>\n<p>I did not try anything yet, I don't know which approach to follow basically</p>\n"},{"tags":["java","apache-camel"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701501714,"post_id":77589427,"comment_id":136786009,"body_markdown":"Ok thanks, for a short term I will go ahead with AdviceWith and for long term reliable solution, digging into implementation of AdviceWith is better","link":"https://stackoverflow.com/questions/77577537/can-we-use-advicewith-for-non-testing-purpose/77589427#comment136786009_77589427","body":"Ok thanks, for a short term I will go ahead with AdviceWith and for long term reliable solution, digging into implementation of AdviceWith is better"}],"comment_count":1,"score":0,"last_activity_date":1701500473,"creation_date":1701500473,"answer_id":77589427,"question_id":77577537,"body_markdown":"Advice with is only intended for testing. And its feature and design is for testing purposes only. \r\n\r\nHowever you can of course do anything you like with Camel. \r\n\r\nMaybe what you want to do can be archived in another way, as advice with is using existing functionality in the camel-api that you could look at using directly also.","link":"https://stackoverflow.com/questions/77577537/can-we-use-advicewith-for-non-testing-purpose/77589427#77589427","title":"Can we use AdviceWith for non testing purpose?","body":"<p>Advice with is only intended for testing. And its feature and design is for testing purposes only.</p>\n<p>However you can of course do anything you like with Camel.</p>\n<p>Maybe what you want to do can be archived in another way, as advice with is using existing functionality in the camel-api that you could look at using directly also.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":45,"answer_count":1,"score":0,"last_activity_date":1701500473,"creation_date":1701338934,"last_edit_date":1701339187,"question_id":77577537,"body_markdown":"We have scenario where we deliver our Camel application as jar to customer, and allow customer to create customisations to it, in some scenarios they might want to replace node in camel route,\r\n\r\nIs it advisable to use AdviceWith in this scenario, or is its use only meant for testing?\r\n\r\nI was able to use AdviceWith to replace route for non-testing purpose by extending EventNotifierSupport&#39;s notify method","link":"https://stackoverflow.com/questions/77577537/can-we-use-advicewith-for-non-testing-purpose","title":"Can we use AdviceWith for non testing purpose?","body":"<p>We have scenario where we deliver our Camel application as jar to customer, and allow customer to create customisations to it, in some scenarios they might want to replace node in camel route,</p>\n<p>Is it advisable to use AdviceWith in this scenario, or is its use only meant for testing?</p>\n<p>I was able to use AdviceWith to replace route for non-testing purpose by extending EventNotifierSupport's notify method</p>\n"},{"tags":["java","weblogic","weblogic12c"],"comment_count":0,"is_answered":false,"view_count":43,"answer_count":0,"score":0,"last_activity_date":1701489570,"creation_date":1701339275,"last_edit_date":1701489570,"question_id":77577581,"body_markdown":"I&#39;m having trouble configuring **BASIC AUTHENTICATION** with *WebLogic Server Version: 12.2.1.3.0*, specifically encountering a `403 Forbidden` error. I would like to understand where the issue lies. Let me briefly explain what I have done:\r\n\r\nI started by creating the user &quot;**user**&quot; in the &quot;**Users and Groups**&quot; section under the &quot;**Users**&quot; tab.\r\n\r\nUser tab User\r\n\r\n[![enter image description here][1]][1]\r\n\r\nUser group\r\n[![enter image description here][2]][2]\r\n\r\nThen, I created a group called &quot;**usergroup**&quot; in the &quot;**Groups**&quot; tab.  \r\n[![enter image description here][3]][3]\r\nAfter that, in the &quot;**Roles and Policies \\&gt;\\&gt; Realm Roles**&quot; section, I added the role condition for the consumer as &quot;**group: usergroup**&quot;.  \r\n\r\nRoles\r\n[![enter image description here][4]][4]\r\nweb.xml:\r\n\r\n```\r\n &lt;security-constraint&gt;\r\n       &lt;web-resource-collection&gt;\r\n          &lt;web-resource-name&gt;webservice&lt;/web-resource-name&gt;\r\n          &lt;url-pattern&gt;/service/test&lt;/url-pattern&gt;\r\n          &lt;http-method&gt;GET&lt;/http-method&gt;\r\n       &lt;/web-resource-collection&gt;\r\n \r\n       &lt;auth-constraint&gt;\r\n          &lt;role-name&gt;consumer&lt;/role-name&gt;\r\n       &lt;/auth-constraint&gt;\r\n   &lt;/security-constraint&gt;\r\n \r\n   &lt;login-config&gt;\r\n      &lt;auth-method&gt;BASIC&lt;/auth-method&gt;\r\n      &lt;realm-name&gt;default&lt;/realm-name&gt;\r\n   &lt;/login-config&gt;\r\n   &lt;security-role&gt;\r\n      &lt;role-name&gt;consumer&lt;/role-name&gt;\r\n   &lt;/security-role&gt;\r\n```\r\n\r\nweblogic.xml:\r\n\r\n```\r\n   &lt;security-role-assignment&gt;\r\n      &lt;role-name&gt;consumer&lt;/role-name&gt;\r\n      &lt;principal-name&gt;usergroup&lt;/principal-name&gt;\r\n   &lt;/security-role-assignment&gt;\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8T10A.png\r\n  [2]: https://i.stack.imgur.com/8dyWz.png\r\n  [3]: https://i.stack.imgur.com/rAcbp.png\r\n  [4]: https://i.stack.imgur.com/MQrla.png","link":"https://stackoverflow.com/questions/77577581/403-forbidden-basic-authentication-with-weblogic","title":"403- Forbidden BASIC AUTHENTICATION with WebLogic","body":"<p>I'm having trouble configuring <strong>BASIC AUTHENTICATION</strong> with <em>WebLogic Server Version: 12.2.1.3.0</em>, specifically encountering a <code>403 Forbidden</code> error. I would like to understand where the issue lies. Let me briefly explain what I have done:</p>\n<p>I started by creating the user &quot;<strong>user</strong>&quot; in the &quot;<strong>Users and Groups</strong>&quot; section under the &quot;<strong>Users</strong>&quot; tab.</p>\n<p>User tab User</p>\n<p><a href=\"https://i.stack.imgur.com/8T10A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8T10A.png\" alt=\"enter image description here\" /></a></p>\n<p>User group\n<a href=\"https://i.stack.imgur.com/8dyWz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8dyWz.png\" alt=\"enter image description here\" /></a></p>\n<p>Then, I created a group called &quot;<strong>usergroup</strong>&quot; in the &quot;<strong>Groups</strong>&quot; tab.<br />\n<a href=\"https://i.stack.imgur.com/rAcbp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rAcbp.png\" alt=\"enter image description here\" /></a>\nAfter that, in the &quot;<strong>Roles and Policies &gt;&gt; Realm Roles</strong>&quot; section, I added the role condition for the consumer as &quot;<strong>group: usergroup</strong>&quot;.</p>\n<p>Roles\n<a href=\"https://i.stack.imgur.com/MQrla.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MQrla.png\" alt=\"enter image description here\" /></a>\nweb.xml:</p>\n<pre><code> &lt;security-constraint&gt;\n       &lt;web-resource-collection&gt;\n          &lt;web-resource-name&gt;webservice&lt;/web-resource-name&gt;\n          &lt;url-pattern&gt;/service/test&lt;/url-pattern&gt;\n          &lt;http-method&gt;GET&lt;/http-method&gt;\n       &lt;/web-resource-collection&gt;\n \n       &lt;auth-constraint&gt;\n          &lt;role-name&gt;consumer&lt;/role-name&gt;\n       &lt;/auth-constraint&gt;\n   &lt;/security-constraint&gt;\n \n   &lt;login-config&gt;\n      &lt;auth-method&gt;BASIC&lt;/auth-method&gt;\n      &lt;realm-name&gt;default&lt;/realm-name&gt;\n   &lt;/login-config&gt;\n   &lt;security-role&gt;\n      &lt;role-name&gt;consumer&lt;/role-name&gt;\n   &lt;/security-role&gt;\n</code></pre>\n<p>weblogic.xml:</p>\n<pre><code>   &lt;security-role-assignment&gt;\n      &lt;role-name&gt;consumer&lt;/role-name&gt;\n      &lt;principal-name&gt;usergroup&lt;/principal-name&gt;\n   &lt;/security-role-assignment&gt;\n</code></pre>\n"},{"tags":["java","time","jframe"],"comments":[{"score":0,"post_type":"question","creation_date":1701366016,"post_id":77580331,"comment_id":136769599,"body_markdown":"This package for managing `Area`s (and doing other things with shapes) could be useful for you: https://sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/shape/","link":"https://stackoverflow.com/questions/77580331/i-am-trying-to-make-a-simple-box-clicking-game-with-java-and-im-stuck#comment136769599_77580331","body":"This package for managing <code>Area</code>s (and doing other things with shapes) could be useful for you: <a href=\"https://sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/shape/\" rel=\"nofollow noreferrer\">sourceforge.net/p/tus/code/HEAD/tree/tjacobs/ui/shape</a>"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701450448,"post_id":77581474,"comment_id":136781232,"body_markdown":"Thank you so much! This will be incredibly useful to me.","link":"https://stackoverflow.com/questions/77580331/i-am-trying-to-make-a-simple-box-clicking-game-with-java-and-im-stuck/77581474#comment136781232_77581474","body":"Thank you so much! This will be incredibly useful to me."}],"comment_count":1,"score":0,"last_activity_date":1701375823,"creation_date":1701375823,"answer_id":77581474,"question_id":77580331,"body_markdown":"This ...\r\n\r\n        while (true) {\r\n            pointButton.addActionListener(new ActionListener() {\r\n                public void actionPerformed(ActionEvent e) {\r\n                    final int points = 0 + 1;\r\n                    pointLabel.setText(&quot;Points: &quot; + points);\r\n                } \r\n            });\r\n            break; // here to just break out of the loop not finished.\r\n        }\r\n\r\nis a really bad idea.\r\n\r\nSwing is an event driven environment, that is, something happens and you respond to it (the `ActionListener` is an example of this).  \r\n\r\nSwing is also single threaded (and not thread safe) so your `while-loop` runs the risk of blocking the Event Dispatching Thread which would cause your UI to be unresponsive.  \r\n\r\nHaving said that, the `break` statement will cause the loop to exit on the first iteration anyway.\r\n\r\nIn general, it&#39;s just a bad idea.\r\n\r\nIf I was doing this, I would start with a custom painting route.\r\n\r\nSee: \r\n\r\n* [Painting in AWT and Swing](https://www.oracle.com/java/technologies/painting.html)\r\n* [Performing Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)\r\n\r\nfor more details.\r\n\r\nI&#39;d then make use of the `Shape`s API which provides a lot of additional support including simplified painting and hit box detection.\r\n\r\nSee:\r\n\r\n* [2D Graphics](https://docs.oracle.com/javase/tutorial/2d/index.html) and\r\n* [Working with Geometry](https://docs.oracle.com/javase/tutorial/2d/geometry/index.html) in particular\r\n\r\nfor more details.\r\n\r\nI&#39;d also make use of Swing `Timer` to manage the &quot;timed&quot; based aspects of the problem.  See [How to Use Swing Timers](https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html) for more details.\r\n\r\nYou will also need to some way to detect when the mouse is clicked, see [How to Write a Mouse Listener](https://docs.oracle.com/javase%2Ftutorial%2Fuiswing%2F%2F/events/mouselistener.html) for more details.\r\n\r\n# Runnable example...\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.EventQueue;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.Rectangle;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.event.MouseAdapter;\r\n    import java.awt.event.MouseEvent;\r\n    import java.util.Random;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.Timer;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n                    frame.add(new MainPane());\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        public class MainPane extends JPanel {\r\n            private BoxPane boxPane;\r\n\r\n            public MainPane() {\r\n                setLayout(new BorderLayout());\r\n                boxPane = new BoxPane();\r\n                add(boxPane);\r\n\r\n                JButton btn = new JButton(&quot;Start&quot;);\r\n                btn.addActionListener(new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        if (boxPane.isRunning()) {\r\n                            boxPane.stop();\r\n                            btn.setText(&quot;Start&quot;);\r\n                        } else {\r\n                            boxPane.start();\r\n                            btn.setText(&quot;Stop&quot;);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                add(btn, BorderLayout.SOUTH);\r\n            }\r\n        }\r\n\r\n        public class BoxPane extends JPanel {\r\n            private Rectangle boxy;\r\n            private Random random = new Random();\r\n\r\n            private Timer timer;\r\n\r\n            public BoxPane() {\r\n                timer = new Timer(5000, new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        randomiseLocation();\r\n                    }\r\n                });\r\n                timer.setInitialDelay(0);\r\n\r\n                addMouseListener(new MouseAdapter() {\r\n                    @Override\r\n                    public void mouseClicked(MouseEvent e) {\r\n                        if (boxy == null) {\r\n                            return;\r\n                        }\r\n                        if (!boxy.contains(e.getPoint())) {\r\n                            return;\r\n                        }\r\n                        // Box was clicked\r\n                        randomiseLocation();\r\n                        timer.restart();\r\n                    }\r\n                });\r\n            }\r\n\r\n            protected void randomiseLocation() {\r\n                int x = random.nextInt(getWidth() - boxy.width);\r\n                int y = random.nextInt(getHeight() - boxy.height);\r\n                boxy.x = x;\r\n                boxy.y = y;\r\n                repaint();\r\n            }\r\n\r\n            @Override\r\n            public Dimension getPreferredSize() {\r\n                return new Dimension(200, 200);\r\n            }\r\n\r\n            public boolean isRunning() {\r\n                return timer.isRunning();\r\n            }\r\n\r\n            public void start() {\r\n                boxy = new Rectangle(0, 0, 20, 20);\r\n                randomiseLocation();\r\n                timer.start();\r\n            }\r\n\r\n            public void stop() {\r\n                timer.stop();\r\n                boxy = null;\r\n                repaint();\r\n            }\r\n\r\n            @Override\r\n            protected void paintComponent(Graphics g) {\r\n                super.paintComponent(g);\r\n                if (boxy == null) {\r\n                    return;\r\n                }\r\n                Graphics2D g2d = (Graphics2D) g.create();\r\n                g2d.setColor(Color.RED);\r\n                g2d.fill(boxy);\r\n                g2d.setColor(Color.BLUE);\r\n                g2d.draw(boxy);\r\n                g2d.dispose();\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\nBut wait, what&#39;s missing?  That&#39;s right, I&#39;m doing everything for you.  The &quot;one minute timeout&quot; hasn&#39;t been implemented, but I&#39;ve already provided you with the base solution to implement it, the Swing `Timer`.\r\n\r\nHowever, if you want to display a count down clock, that becomes a little more involved.\r\n\r\nYou&#39;ll also want to make use of the [`java.time`](https://docs.oracle.com/javase/tutorial/datetime/index.html) API, as this allows you easily (and accurately) calculate the difference between two points in time.\r\n\r\nFor [example](https://stackoverflow.com/questions/48046501/create-a-java-gui-countdown-timer-that-starts-with-user-input/48046786#48046786); [example](https://stackoverflow.com/questions/33512527/java-updating-existing-stopwatch-code-to-include-countdown/33512781#33512781)\r\n\r\nYou may also want to spend some time researching the [observer pattern](https://www.google.com/search?q=java+observer+pattern), as this will provide you the means for providing feedback to interested parties about different state changing events (fyi: the `ActionListener` is an example of an observer)","link":"https://stackoverflow.com/questions/77580331/i-am-trying-to-make-a-simple-box-clicking-game-with-java-and-im-stuck/77581474#77581474","title":"I am trying to make a simple box clicking game with java and im stuck","body":"<p>This ...</p>\n<pre><code>    while (true) {\n        pointButton.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                final int points = 0 + 1;\n                pointLabel.setText(&quot;Points: &quot; + points);\n            } \n        });\n        break; // here to just break out of the loop not finished.\n    }\n</code></pre>\n<p>is a really bad idea.</p>\n<p>Swing is an event driven environment, that is, something happens and you respond to it (the <code>ActionListener</code> is an example of this).</p>\n<p>Swing is also single threaded (and not thread safe) so your <code>while-loop</code> runs the risk of blocking the Event Dispatching Thread which would cause your UI to be unresponsive.</p>\n<p>Having said that, the <code>break</code> statement will cause the loop to exit on the first iteration anyway.</p>\n<p>In general, it's just a bad idea.</p>\n<p>If I was doing this, I would start with a custom painting route.</p>\n<p>See:</p>\n<ul>\n<li><a href=\"https://www.oracle.com/java/technologies/painting.html\" rel=\"nofollow noreferrer\">Painting in AWT and Swing</a></li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a></li>\n</ul>\n<p>for more details.</p>\n<p>I'd then make use of the <code>Shape</code>s API which provides a lot of additional support including simplified painting and hit box detection.</p>\n<p>See:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/2d/index.html\" rel=\"nofollow noreferrer\">2D Graphics</a> and</li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/2d/geometry/index.html\" rel=\"nofollow noreferrer\">Working with Geometry</a> in particular</li>\n</ul>\n<p>for more details.</p>\n<p>I'd also make use of Swing <code>Timer</code> to manage the &quot;timed&quot; based aspects of the problem.  See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">How to Use Swing Timers</a> for more details.</p>\n<p>You will also need to some way to detect when the mouse is clicked, see <a href=\"https://docs.oracle.com/javase%2Ftutorial%2Fuiswing%2F%2F/events/mouselistener.html\" rel=\"nofollow noreferrer\">How to Write a Mouse Listener</a> for more details.</p>\n<h1>Runnable example...</h1>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Rectangle;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.util.Random;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.Timer;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.add(new MainPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public class MainPane extends JPanel {\n        private BoxPane boxPane;\n\n        public MainPane() {\n            setLayout(new BorderLayout());\n            boxPane = new BoxPane();\n            add(boxPane);\n\n            JButton btn = new JButton(&quot;Start&quot;);\n            btn.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    if (boxPane.isRunning()) {\n                        boxPane.stop();\n                        btn.setText(&quot;Start&quot;);\n                    } else {\n                        boxPane.start();\n                        btn.setText(&quot;Stop&quot;);\n                    }\n                }\n            });\n\n            add(btn, BorderLayout.SOUTH);\n        }\n    }\n\n    public class BoxPane extends JPanel {\n        private Rectangle boxy;\n        private Random random = new Random();\n\n        private Timer timer;\n\n        public BoxPane() {\n            timer = new Timer(5000, new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    randomiseLocation();\n                }\n            });\n            timer.setInitialDelay(0);\n\n            addMouseListener(new MouseAdapter() {\n                @Override\n                public void mouseClicked(MouseEvent e) {\n                    if (boxy == null) {\n                        return;\n                    }\n                    if (!boxy.contains(e.getPoint())) {\n                        return;\n                    }\n                    // Box was clicked\n                    randomiseLocation();\n                    timer.restart();\n                }\n            });\n        }\n\n        protected void randomiseLocation() {\n            int x = random.nextInt(getWidth() - boxy.width);\n            int y = random.nextInt(getHeight() - boxy.height);\n            boxy.x = x;\n            boxy.y = y;\n            repaint();\n        }\n\n        @Override\n        public Dimension getPreferredSize() {\n            return new Dimension(200, 200);\n        }\n\n        public boolean isRunning() {\n            return timer.isRunning();\n        }\n\n        public void start() {\n            boxy = new Rectangle(0, 0, 20, 20);\n            randomiseLocation();\n            timer.start();\n        }\n\n        public void stop() {\n            timer.stop();\n            boxy = null;\n            repaint();\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            if (boxy == null) {\n                return;\n            }\n            Graphics2D g2d = (Graphics2D) g.create();\n            g2d.setColor(Color.RED);\n            g2d.fill(boxy);\n            g2d.setColor(Color.BLUE);\n            g2d.draw(boxy);\n            g2d.dispose();\n        }\n\n    }\n}\n</code></pre>\n<p>But wait, what's missing?  That's right, I'm doing everything for you.  The &quot;one minute timeout&quot; hasn't been implemented, but I've already provided you with the base solution to implement it, the Swing <code>Timer</code>.</p>\n<p>However, if you want to display a count down clock, that becomes a little more involved.</p>\n<p>You'll also want to make use of the <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\"><code>java.time</code></a> API, as this allows you easily (and accurately) calculate the difference between two points in time.</p>\n<p>For <a href=\"https://stackoverflow.com/questions/48046501/create-a-java-gui-countdown-timer-that-starts-with-user-input/48046786#48046786\">example</a>; <a href=\"https://stackoverflow.com/questions/33512527/java-updating-existing-stopwatch-code-to-include-countdown/33512781#33512781\">example</a></p>\n<p>You may also want to spend some time researching the <a href=\"https://www.google.com/search?q=java+observer+pattern\" rel=\"nofollow noreferrer\">observer pattern</a>, as this will provide you the means for providing feedback to interested parties about different state changing events (fyi: the <code>ActionListener</code> is an example of an observer)</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701484791,"creation_date":1701484791,"answer_id":77588979,"question_id":77580331,"body_markdown":"Here is another example which utilizes a [Swing Timer](https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html) to provide Game Duration and Time Remaining display:\r\n\r\n# Runnable example:\r\n\r\nBe sure to read the comments in code:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n```\r\npublic class ClickBox {\r\n\r\n    /* Swing components declared a class members for so\r\n       that they can be accessed class globlly:    */\r\n    private javax.swing.JFrame frame;\r\n    private javax.swing.JButton startButton;\r\n    private javax.swing.JLabel pointLabel;\r\n\r\n    private int boxWidth;\r\n    private int boxHeight;\r\n    private int boxPosY;\r\n    private int boxPosX;\r\n    private int points = 0;\r\n    private javax.swing.Timer timer;\r\n    private final int timeLimit = 60;  // Game time limit In seconds\r\n    private int secondsRemaining = (timeLimit + 1); // Keeps track of seconds remaining:\r\n    private int titleBarHeight;\r\n\r\n    // Constructor:\r\n    public ClickBox() {\r\n        // Create Game Window:\r\n        initializeForm();\r\n\r\n        /* Add a Mouse Lister to JFrame to catch the MouseClick event\r\n           in the case where the player misses clicking on a box. If\r\n           he/she misses a box, then a point is removed:        */\r\n        frame.addMouseListener(new java.awt.event.MouseAdapter() {\r\n            @Override\r\n            public void mouseClicked(java.awt.event.MouseEvent e) {\r\n                if (timer != null &amp;&amp; timer.isRunning()) {\r\n                    points--;\r\n                    pointLabel.setText(String.format(&quot;Points: %s%20s&quot;, points, &quot;Seconds: &quot; + secondsRemaining));\r\n                }\r\n            }\r\n        });\r\n\r\n        /* Add a Window Listener for JFrame to make use of the \r\n           `windowClosing` event in order to shut down the swing\r\n           timer if it&#39;s running and the Window is abruptly closed:  */\r\n        frame.addWindowListener(new java.awt.event.WindowAdapter() {\r\n            @Override\r\n            public void windowClosing(java.awt.event.WindowEvent e) {\r\n                if (timer != null &amp;&amp; timer.isRunning()) {\r\n                    timer.stop();\r\n                }\r\n            }\r\n        });\r\n        \r\n        /* Add a JFrame resize event to maintain center for the Points and \r\n           Seconds Remaining as well as set the location of the Start button \r\n           in the center of JFrame Window when it is resized.           */\r\n        frame.addComponentListener(new java.awt.event.ComponentAdapter() {\r\n            @Override\r\n            public void componentResized(java.awt.event.ComponentEvent evt) {\r\n                java.awt.Component c = (java.awt.Component) evt.getSource();\r\n                pointLabel.setSize(frame.getWidth(), 30);\r\n                startButton.setLocation(((frame.getWidth() / 2) - (150/2)), \r\n                                       ((frame.getHeight() / 2) - (30/2)) - \r\n                                       (titleBarHeight == 0 ? 35 : titleBarHeight));\r\n            }\r\n        });\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        /* App started this way to avoid the need for statics\r\n           unless we really want them:        */\r\n        new ClickBox().startGame(args);\r\n\r\n    }\r\n\r\n    private void startGame(String[] args) {\r\n        // Make the JFrame (Game) Window visible:\r\n        java.awt.EventQueue.invokeLater(() -&gt; {\r\n            frame.setVisible(true);\r\n            \r\n            // Center Window in Screen\r\n            frame.setLocationRelativeTo(null); \r\n            \r\n            /* Get the JFrame&#39;s TitleBar height. This value is used\r\n               in maintaining center for the Game `Start` Button: */\r\n            titleBarHeight = frame.getInsets().top + frame.getInsets().bottom;\r\n        });\r\n    }\r\n\r\n    private void initializeForm() {\r\n        // Initialize a JFrame Window &amp; set properties:\r\n        frame = new javax.swing.JFrame(&quot;Click-Box Game - You have &quot; + timeLimit + &quot; seconds to click on Boxes!&quot;);\r\n        frame.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);\r\n        frame.setAlwaysOnTop(true);\r\n        frame.setSize(600, 600);\r\n        frame.setLayout(null);\r\n\r\n        // Initialize the Start Button &amp; set properties:\r\n        startButton = new javax.swing.JButton(&quot;Click to start&quot;);\r\n        // Size and Placement for the Start Button:\r\n        startButton.setSize(150, 30);\r\n        startButton.setLocation(((frame.getWidth() / 2) - (150/2)), \r\n                               ((frame.getHeight() / 2) - (30/2)) - 20);\r\n\r\n        // BOX (which is actually a JButton)\r\n        javax.swing.JButton boxButton = new javax.swing.JButton(&quot;&quot;);\r\n        boxButton.setVisible(false);\r\n        /* Get &amp; set the random Size and random Location \r\n           for &#39;first&#39; box (boxButton JButton). This is\r\n           later radomly continued within the boxButton&#39;s \r\n           MouseClick event:                          */\r\n        randomize();\r\n        boxButton.setSize(boxWidth, boxHeight);\r\n        boxButton.setLocation(boxPosY, boxPosY);\r\n\r\n        // Game label for points (score) and seconds remaining display:\r\n        pointLabel = new javax.swing.JLabel();\r\n        pointLabel.setHorizontalAlignment(javax.swing.JLabel.CENTER);\r\n        pointLabel.setSize(frame.getWidth(), 30);\r\n        pointLabel.setLocation(0, 0);\r\n        pointLabel.setFont(new java.awt.Font(&quot;Arial&quot;, java.awt.Font.PLAIN, 32));\r\n        pointLabel.setForeground(java.awt.Color.BLUE);\r\n\r\n        // Add components to JFrame:\r\n        frame.add(startButton); // Starts as visible:\r\n        frame.add(boxButton);   // Starts as non-visible:\r\n        frame.add(pointLabel);  // Starts as non-visible:\r\n\r\n        // Add an ActionPerformed event for &#39;Start&#39; button click:\r\n        startButton.addActionListener((java.awt.event.ActionEvent e) -&gt; {\r\n            boxButton.setVisible(true);\r\n            startButton.setVisible(false);\r\n            points = 0;\r\n            \r\n            /* Setup and start the Game (Swing) Timer. The ActionEvent \r\n               is fired every one second (1000 milliseconds) and the \r\n               game duration is maintained with the `secondsRemaining`\r\n               counter:                        */\r\n            timer = new javax.swing.Timer(1000, (java.awt.event.ActionEvent evt) -&gt; {\r\n                secondsRemaining--;\r\n                if (secondsRemaining &lt;= 0) {\r\n                    timer.stop();\r\n                    pointLabel.setText(&quot;Game Over! You have &quot; + points + &quot; points!&quot;);\r\n                    boxButton.setVisible(false);\r\n                    startButton.setVisible(true);\r\n                    secondsRemaining = (timeLimit + 1);\r\n                }\r\n                else {\r\n                    pointLabel.setText(String.format(&quot;Points: %s%20s&quot;, points, &quot;Seconds: &quot; + secondsRemaining));\r\n                }\r\n            });\r\n            timer.setInitialDelay(0); // No Timer Startup Delay:\r\n            timer.start();            // Start the Game Timer:\r\n        });\r\n\r\n        // Add an ActionPerformed event for &#39;BOX&#39; buttons:\r\n        boxButton.addActionListener((java.awt.event.ActionEvent e) -&gt; {\r\n            points++;   // Add a point to the Score:\r\n            // Update the Points Label in Game Window:\r\n            pointLabel.setText(String.format(&quot;Points: %s%20s&quot;, points, &quot;Seconds: &quot; + secondsRemaining));\r\n            /* Get &amp; set the random Size and random Location \r\n               for next box (boxButton JButton) to be displayed.  */\r\n            randomize();\r\n            boxButton.setSize(boxWidth, boxHeight);\r\n            boxButton.setLocation(boxPosY, boxPosY);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Generates a new Random Size and Location for the Box (`boxButton`) to \r\n     * be displayed within the Game Window. Sizes and Locations can change if\r\n     * the Game Window is resized.\r\n     */\r\n    public void randomize() {\r\n        boxWidth = 0;\r\n        boxHeight = 0;\r\n        int maxWidth = (frame.getWidth() - 10);\r\n        int maxHeight = (frame.getHeight() - 10);\r\n\r\n        // Create a box that fits in location x and y:\r\n        while ((boxWidth &lt; 10) || ((boxPosX + boxWidth) &gt;= maxWidth)) {\r\n            this.boxPosX = java.util.concurrent.ThreadLocalRandom.current().nextInt(10, maxWidth);\r\n            this.boxWidth = java.util.concurrent.ThreadLocalRandom.current().nextInt(10, maxWidth);\r\n        }\r\n\r\n        while ((boxHeight &lt; 10) || ((boxPosY + boxHeight) &gt;= maxHeight)) {\r\n            this.boxPosY = java.util.concurrent.ThreadLocalRandom.current().nextInt(10, maxHeight);\r\n            this.boxHeight = java.util.concurrent.ThreadLocalRandom.current().nextInt(10, maxHeight);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/h5EsU.gif","link":"https://stackoverflow.com/questions/77580331/i-am-trying-to-make-a-simple-box-clicking-game-with-java-and-im-stuck/77588979#77588979","title":"I am trying to make a simple box clicking game with java and im stuck","body":"<p>Here is another example which utilizes a <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">Swing Timer</a> to provide Game Duration and Time Remaining display:</p>\n<h1>Runnable example:</h1>\n<p>Be sure to read the comments in code:</p>\n<p><a href=\"https://i.stack.imgur.com/h5EsU.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h5EsU.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>public class ClickBox {\n\n    /* Swing components declared a class members for so\n       that they can be accessed class globlly:    */\n    private javax.swing.JFrame frame;\n    private javax.swing.JButton startButton;\n    private javax.swing.JLabel pointLabel;\n\n    private int boxWidth;\n    private int boxHeight;\n    private int boxPosY;\n    private int boxPosX;\n    private int points = 0;\n    private javax.swing.Timer timer;\n    private final int timeLimit = 60;  // Game time limit In seconds\n    private int secondsRemaining = (timeLimit + 1); // Keeps track of seconds remaining:\n    private int titleBarHeight;\n\n    // Constructor:\n    public ClickBox() {\n        // Create Game Window:\n        initializeForm();\n\n        /* Add a Mouse Lister to JFrame to catch the MouseClick event\n           in the case where the player misses clicking on a box. If\n           he/she misses a box, then a point is removed:        */\n        frame.addMouseListener(new java.awt.event.MouseAdapter() {\n            @Override\n            public void mouseClicked(java.awt.event.MouseEvent e) {\n                if (timer != null &amp;&amp; timer.isRunning()) {\n                    points--;\n                    pointLabel.setText(String.format(&quot;Points: %s%20s&quot;, points, &quot;Seconds: &quot; + secondsRemaining));\n                }\n            }\n        });\n\n        /* Add a Window Listener for JFrame to make use of the \n           `windowClosing` event in order to shut down the swing\n           timer if it's running and the Window is abruptly closed:  */\n        frame.addWindowListener(new java.awt.event.WindowAdapter() {\n            @Override\n            public void windowClosing(java.awt.event.WindowEvent e) {\n                if (timer != null &amp;&amp; timer.isRunning()) {\n                    timer.stop();\n                }\n            }\n        });\n        \n        /* Add a JFrame resize event to maintain center for the Points and \n           Seconds Remaining as well as set the location of the Start button \n           in the center of JFrame Window when it is resized.           */\n        frame.addComponentListener(new java.awt.event.ComponentAdapter() {\n            @Override\n            public void componentResized(java.awt.event.ComponentEvent evt) {\n                java.awt.Component c = (java.awt.Component) evt.getSource();\n                pointLabel.setSize(frame.getWidth(), 30);\n                startButton.setLocation(((frame.getWidth() / 2) - (150/2)), \n                                       ((frame.getHeight() / 2) - (30/2)) - \n                                       (titleBarHeight == 0 ? 35 : titleBarHeight));\n            }\n        });\n    }\n\n    public static void main(String[] args) {\n        /* App started this way to avoid the need for statics\n           unless we really want them:        */\n        new ClickBox().startGame(args);\n\n    }\n\n    private void startGame(String[] args) {\n        // Make the JFrame (Game) Window visible:\n        java.awt.EventQueue.invokeLater(() -&gt; {\n            frame.setVisible(true);\n            \n            // Center Window in Screen\n            frame.setLocationRelativeTo(null); \n            \n            /* Get the JFrame's TitleBar height. This value is used\n               in maintaining center for the Game `Start` Button: */\n            titleBarHeight = frame.getInsets().top + frame.getInsets().bottom;\n        });\n    }\n\n    private void initializeForm() {\n        // Initialize a JFrame Window &amp; set properties:\n        frame = new javax.swing.JFrame(&quot;Click-Box Game - You have &quot; + timeLimit + &quot; seconds to click on Boxes!&quot;);\n        frame.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);\n        frame.setAlwaysOnTop(true);\n        frame.setSize(600, 600);\n        frame.setLayout(null);\n\n        // Initialize the Start Button &amp; set properties:\n        startButton = new javax.swing.JButton(&quot;Click to start&quot;);\n        // Size and Placement for the Start Button:\n        startButton.setSize(150, 30);\n        startButton.setLocation(((frame.getWidth() / 2) - (150/2)), \n                               ((frame.getHeight() / 2) - (30/2)) - 20);\n\n        // BOX (which is actually a JButton)\n        javax.swing.JButton boxButton = new javax.swing.JButton(&quot;&quot;);\n        boxButton.setVisible(false);\n        /* Get &amp; set the random Size and random Location \n           for 'first' box (boxButton JButton). This is\n           later radomly continued within the boxButton's \n           MouseClick event:                          */\n        randomize();\n        boxButton.setSize(boxWidth, boxHeight);\n        boxButton.setLocation(boxPosY, boxPosY);\n\n        // Game label for points (score) and seconds remaining display:\n        pointLabel = new javax.swing.JLabel();\n        pointLabel.setHorizontalAlignment(javax.swing.JLabel.CENTER);\n        pointLabel.setSize(frame.getWidth(), 30);\n        pointLabel.setLocation(0, 0);\n        pointLabel.setFont(new java.awt.Font(&quot;Arial&quot;, java.awt.Font.PLAIN, 32));\n        pointLabel.setForeground(java.awt.Color.BLUE);\n\n        // Add components to JFrame:\n        frame.add(startButton); // Starts as visible:\n        frame.add(boxButton);   // Starts as non-visible:\n        frame.add(pointLabel);  // Starts as non-visible:\n\n        // Add an ActionPerformed event for 'Start' button click:\n        startButton.addActionListener((java.awt.event.ActionEvent e) -&gt; {\n            boxButton.setVisible(true);\n            startButton.setVisible(false);\n            points = 0;\n            \n            /* Setup and start the Game (Swing) Timer. The ActionEvent \n               is fired every one second (1000 milliseconds) and the \n               game duration is maintained with the `secondsRemaining`\n               counter:                        */\n            timer = new javax.swing.Timer(1000, (java.awt.event.ActionEvent evt) -&gt; {\n                secondsRemaining--;\n                if (secondsRemaining &lt;= 0) {\n                    timer.stop();\n                    pointLabel.setText(&quot;Game Over! You have &quot; + points + &quot; points!&quot;);\n                    boxButton.setVisible(false);\n                    startButton.setVisible(true);\n                    secondsRemaining = (timeLimit + 1);\n                }\n                else {\n                    pointLabel.setText(String.format(&quot;Points: %s%20s&quot;, points, &quot;Seconds: &quot; + secondsRemaining));\n                }\n            });\n            timer.setInitialDelay(0); // No Timer Startup Delay:\n            timer.start();            // Start the Game Timer:\n        });\n\n        // Add an ActionPerformed event for 'BOX' buttons:\n        boxButton.addActionListener((java.awt.event.ActionEvent e) -&gt; {\n            points++;   // Add a point to the Score:\n            // Update the Points Label in Game Window:\n            pointLabel.setText(String.format(&quot;Points: %s%20s&quot;, points, &quot;Seconds: &quot; + secondsRemaining));\n            /* Get &amp; set the random Size and random Location \n               for next box (boxButton JButton) to be displayed.  */\n            randomize();\n            boxButton.setSize(boxWidth, boxHeight);\n            boxButton.setLocation(boxPosY, boxPosY);\n        });\n    }\n\n    /**\n     * Generates a new Random Size and Location for the Box (`boxButton`) to \n     * be displayed within the Game Window. Sizes and Locations can change if\n     * the Game Window is resized.\n     */\n    public void randomize() {\n        boxWidth = 0;\n        boxHeight = 0;\n        int maxWidth = (frame.getWidth() - 10);\n        int maxHeight = (frame.getHeight() - 10);\n\n        // Create a box that fits in location x and y:\n        while ((boxWidth &lt; 10) || ((boxPosX + boxWidth) &gt;= maxWidth)) {\n            this.boxPosX = java.util.concurrent.ThreadLocalRandom.current().nextInt(10, maxWidth);\n            this.boxWidth = java.util.concurrent.ThreadLocalRandom.current().nextInt(10, maxWidth);\n        }\n\n        while ((boxHeight &lt; 10) || ((boxPosY + boxHeight) &gt;= maxHeight)) {\n            this.boxPosY = java.util.concurrent.ThreadLocalRandom.current().nextInt(10, maxHeight);\n            this.boxHeight = java.util.concurrent.ThreadLocalRandom.current().nextInt(10, maxHeight);\n        }\n    }\n}\n</code></pre>\n"}],"comment_count":1,"is_answered":true,"view_count":35,"answer_count":2,"score":-1,"last_activity_date":1701484791,"creation_date":1701363778,"last_edit_date":1701372069,"question_id":77580331,"body_markdown":"I am making a box clicking game where I want the box to have a random shape and position on a 500x500 JFrame. Also, I want to add a minute timer so that the game ends after that minute has expired.\r\n\r\n**Here is my code:**\r\n    \r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.awt.event.\\*;\r\n\r\n    public class Main {\r\n\r\n        int boxSize;\r\n        int boxPosY;\r\n        int boxPosX;\r\n        int points = 0;\r\n        boolean isLooping = false;\r\n\r\n        public static void main(String\\[\\] args) {\r\n            // A JFrame is a window where we can design our UI\r\n            JFrame frame = new JFrame(&quot;My Game&quot;);\r\n            frame.setSize(500, 500);\r\n            frame.setLayout(null);\r\n\r\n            // create a Button and a Label\r\n            JButton startButton = new JButton(&quot;Click to start&quot;);\r\n            JButton pointButton = new JButton(&quot;&quot;);\r\n            pointButton.setVisible(false);\r\n            JLabel pointLabel = new JLabel();\r\n    \r\n            // place and size for components\r\n            // setBounds(x position, y position, width, height)\r\n            startButton.setBounds(175, 200, 150, 50);\r\n            pointButton.setBounds(100, 100, 100, 100);\r\n            pointLabel.setBounds(0,0,200,50);\r\n            pointLabel.setFont(new Font(&quot;Arial&quot;, Font.PLAIN, 32));\r\n            pointLabel.setForeground(Color.BLUE);\r\n    \r\n            // add components to JFrame f\r\n            frame.add(startButton);\r\n            frame.add(pointButton);\r\n            frame.add(pointLabel);\r\n    \r\n            // add event listener for button click\r\n\r\n            startButton.addActionListener(new ActionListener() {\r\n                public void actionPerformed(ActionEvent e) {\r\n                    pointButton.setVisible(true);\r\n                    startButton.setVisible(false);\r\n                    final int points = 0;\r\n                    pointLabel.setText(&quot;Points: &quot; + points);  \r\n                }\r\n            });\r\n\r\n            while (true) {\r\n                pointButton.addActionListener(new ActionListener() {\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        final int points = 0 + 1;\r\n                        pointLabel.setText(&quot;Points: &quot; + points);\r\n                    } \r\n                });\r\n                break; // here to just break out of the loop not finished.\r\n            }\r\n\r\n            // make the frame visible\r\n            frame.setVisible(true);\r\n\r\n        }\r\n\r\n        public void randomiz() {\r\n            boxSize = (int)(Math.random() \\* 100) + 1;\r\n            boxPosY = (int)(Math.random() \\* 500) + 1;\r\n            boxPosX = (int)(Math.random() \\* 500) + 1;\r\n        }\r\n    }\r\n\r\nI want to make a simple box clicking game but when I click on a box, I want to generate and place a new random box with my `randomiz()` method in my `actionPerformed` method. How do I fix this, also, how do i make a one minute timer to stop the game after one minute has expired.","link":"https://stackoverflow.com/questions/77580331/i-am-trying-to-make-a-simple-box-clicking-game-with-java-and-im-stuck","title":"I am trying to make a simple box clicking game with java and im stuck","body":"<p>I am making a box clicking game where I want the box to have a random shape and position on a 500x500 JFrame. Also, I want to add a minute timer so that the game ends after that minute has expired.</p>\n<p><strong>Here is my code:</strong></p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.\\*;\n\npublic class Main {\n\n    int boxSize;\n    int boxPosY;\n    int boxPosX;\n    int points = 0;\n    boolean isLooping = false;\n\n    public static void main(String\\[\\] args) {\n        // A JFrame is a window where we can design our UI\n        JFrame frame = new JFrame(&quot;My Game&quot;);\n        frame.setSize(500, 500);\n        frame.setLayout(null);\n\n        // create a Button and a Label\n        JButton startButton = new JButton(&quot;Click to start&quot;);\n        JButton pointButton = new JButton(&quot;&quot;);\n        pointButton.setVisible(false);\n        JLabel pointLabel = new JLabel();\n\n        // place and size for components\n        // setBounds(x position, y position, width, height)\n        startButton.setBounds(175, 200, 150, 50);\n        pointButton.setBounds(100, 100, 100, 100);\n        pointLabel.setBounds(0,0,200,50);\n        pointLabel.setFont(new Font(&quot;Arial&quot;, Font.PLAIN, 32));\n        pointLabel.setForeground(Color.BLUE);\n\n        // add components to JFrame f\n        frame.add(startButton);\n        frame.add(pointButton);\n        frame.add(pointLabel);\n\n        // add event listener for button click\n\n        startButton.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                pointButton.setVisible(true);\n                startButton.setVisible(false);\n                final int points = 0;\n                pointLabel.setText(&quot;Points: &quot; + points);  \n            }\n        });\n\n        while (true) {\n            pointButton.addActionListener(new ActionListener() {\n                public void actionPerformed(ActionEvent e) {\n                    final int points = 0 + 1;\n                    pointLabel.setText(&quot;Points: &quot; + points);\n                } \n            });\n            break; // here to just break out of the loop not finished.\n        }\n\n        // make the frame visible\n        frame.setVisible(true);\n\n    }\n\n    public void randomiz() {\n        boxSize = (int)(Math.random() \\* 100) + 1;\n        boxPosY = (int)(Math.random() \\* 500) + 1;\n        boxPosX = (int)(Math.random() \\* 500) + 1;\n    }\n}\n</code></pre>\n<p>I want to make a simple box clicking game but when I click on a box, I want to generate and place a new random box with my <code>randomiz()</code> method in my <code>actionPerformed</code> method. How do I fix this, also, how do i make a one minute timer to stop the game after one minute has expired.</p>\n"},{"tags":["java","android","kotlin","security","keystore"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701482939,"creation_date":1701482939,"answer_id":77588916,"question_id":77550642,"body_markdown":"If you want to store password in Room, you need to run hash function and then store hash value of your password. Hash is fixed size, no matter how long is your password.\r\n\r\nTo compare input password with stored in DB you hash your input and compare it with hash stored in database. Because If you apply hash function to the same string, you&#39;ll get the same result. If, at least, 1 symbol is wrong - resulting hash will be completely different.\r\n\r\nYou can check [this one][1] and use PBKDF2 algorithm. More details on how to choose hash function and what not to use is [here][2]\r\n\r\n\r\n  [1]: https://codersee.com/kotlin-pbkdf2-secure-password-hashing/\r\n  [2]: https://www.baeldung.com/java-password-hashing","link":"https://stackoverflow.com/questions/77550642/how-to-securely-store-keys-in-androidkeystore-with-a-password/77588916#77588916","title":"How to securely store keys in AndroidKeyStore with a password?","body":"<p>If you want to store password in Room, you need to run hash function and then store hash value of your password. Hash is fixed size, no matter how long is your password.</p>\n<p>To compare input password with stored in DB you hash your input and compare it with hash stored in database. Because If you apply hash function to the same string, you'll get the same result. If, at least, 1 symbol is wrong - resulting hash will be completely different.</p>\n<p>You can check <a href=\"https://codersee.com/kotlin-pbkdf2-secure-password-hashing/\" rel=\"nofollow noreferrer\">this one</a> and use PBKDF2 algorithm. More details on how to choose hash function and what not to use is <a href=\"https://www.baeldung.com/java-password-hashing\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"comment_count":0,"is_answered":false,"view_count":36,"answer_count":1,"score":0,"last_activity_date":1701482939,"creation_date":1700978804,"question_id":77550642,"body_markdown":"I am trying to create an app which allows users to store their passwords. Now, I allow the users to encrypt their passwords by two ways, first being the biometrics and other being the password\r\n\r\nI was able to implement the `biometrics` encryption by creating a secret key in the AndroidKeyStore and setting the `setUsetAuthenticationRequired(true)` when creating the secret key and then authorizing the Cipher with the BiometricsManager.\r\n\r\nHowever, I am not sure, how to implement the password one. I tried looking for `PBE` encrypting but Android docs didn&#39;t have much written in it. What is the best solution for this case which is also secure? I would appreciate if there are any links to the same :)\r\n\r\n(Note: If I am using PBE encryption, and I am storing the encrypted data (multiple of user&#39;s name and password) inside of a RoomDB, how can \r\nI check if the password is correct on the next app run, if there is nothing in the DB  to decrypt and test)\r\n\r\nI also found a way that creates a Secret key and then stores the secret key as an entry and uses [https://developer.android.com/reference/java/security/KeyStore.PasswordProtection](KeyStore.PasswordProtection) to secure the entry. Let me know if this is a secure enough solution or there are even better solutions.\r\n\r\nThanks!","link":"https://stackoverflow.com/questions/77550642/how-to-securely-store-keys-in-androidkeystore-with-a-password","title":"How to securely store keys in AndroidKeyStore with a password?","body":"<p>I am trying to create an app which allows users to store their passwords. Now, I allow the users to encrypt their passwords by two ways, first being the biometrics and other being the password</p>\n<p>I was able to implement the <code>biometrics</code> encryption by creating a secret key in the AndroidKeyStore and setting the <code>setUsetAuthenticationRequired(true)</code> when creating the secret key and then authorizing the Cipher with the BiometricsManager.</p>\n<p>However, I am not sure, how to implement the password one. I tried looking for <code>PBE</code> encrypting but Android docs didn't have much written in it. What is the best solution for this case which is also secure? I would appreciate if there are any links to the same :)</p>\n<p>(Note: If I am using PBE encryption, and I am storing the encrypted data (multiple of user's name and password) inside of a RoomDB, how can\nI check if the password is correct on the next app run, if there is nothing in the DB  to decrypt and test)</p>\n<p>I also found a way that creates a Secret key and then stores the secret key as an entry and uses https://developer.android.com/reference/java/security/KeyStore.PasswordProtection to secure the entry. Let me know if this is a secure enough solution or there are even better solutions.</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring-boot","gradle","entity","aspectj"],"comments":[{"score":0,"post_type":"question","creation_date":1701176214,"post_id":77563811,"comment_id":136740518,"body_markdown":"You need to setup loadtimeweaving for this to work and yes you need a javaagent for that. This is also explained in the spring (not spring boot!) reference guide.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136740518_77563811","body":"You need to setup loadtimeweaving for this to work and yes you need a javaagent for that. This is also explained in the spring (not spring boot!) reference guide."},{"score":0,"post_type":"question","creation_date":1701180325,"post_id":77563811,"comment_id":136741321,"body_markdown":"@M.Deinum Used annotation `@EnableLoadTimeWeaving` but get BeanCreationException which suggest to make custom LoadTimeWeaver. Deaclaring a `@Bean` of new InstrumentationLoadTimeWeaver dosen&#39;t help. Is there any way to make it as declarative as possible?","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136741321_77563811","body":"@M.Deinum Used annotation <code>@EnableLoadTimeWeaving</code> but get BeanCreationException which suggest to make custom LoadTimeWeaver. Deaclaring a <code>@Bean</code> of new InstrumentationLoadTimeWeaver dosen&#39;t help. Is there any way to make it as declarative as possible?"},{"score":0,"post_type":"question","creation_date":1701180770,"post_id":77563811,"comment_id":136741412,"body_markdown":"No you will need an agent just the annotation won&#39;t be enough as it will start instrumentation too late.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136741412_77563811","body":"No you will need an agent just the annotation won&#39;t be enough as it will start instrumentation too late."},{"score":0,"post_type":"question","creation_date":1701181963,"post_id":77563811,"comment_id":136741667,"body_markdown":"@M.Deinum So its necessary to make some building intervention through plugins or so?","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136741667_77563811","body":"@M.Deinum So its necessary to make some building intervention through plugins or so?"},{"score":0,"post_type":"question","creation_date":1701182700,"post_id":77563811,"comment_id":136741841,"body_markdown":"No you need a javaagent when starting the application. SO it needs to be part of the application command.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136741841_77563811","body":"No you need a javaagent when starting the application. SO it needs to be part of the application command."},{"score":0,"post_type":"question","creation_date":1701185252,"post_id":77563811,"comment_id":136742350,"body_markdown":"@M.Deinum Ok I add VM option -javaagent: \\\\full-path-to\\\\spring-instrument-6.0.11.jar which get from `implementation group: &#39;org.springframework&#39;, name: &#39;spring-instrument&#39;, version: &#39;6.0.11&#39;(my Spring (not boot) actual version)\n` as suggested in BeanCreationException message:`Failed to instantiate [org.springframework.instrument.classloading.LoadTimeWeaver]: ... Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring&#39;s agent: -javaagent:spring-instrument-{version}.jar`\nand get Totall mess with kilometers of stacktrace in a start. Seems like its not enough.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136742350_77563811","body":"@M.Deinum Ok I add VM option -javaagent: \\\\full-path-to\\\\spring-instrument-6.0.11.jar which get from <code>implementation group: &#39;org.springframework&#39;, name: &#39;spring-instrument&#39;, version: &#39;6.0.11&#39;(my Spring (not boot) actual version) </code> as suggested in BeanCreationException message:<code>Failed to instantiate [org.springframework.instrument.classloading.LoadTimeWeaver]&zwnj;&#8203;: ... Specify a custom LoadTimeWeaver or start your Java virtual machine with Spring&#39;s agent: -javaagent:spring-instrument-{version}.jar</code> and get Totall mess with kilometers of stacktrace in a start. Seems like its not enough."},{"score":0,"post_type":"question","creation_date":1701185380,"post_id":77563811,"comment_id":136742383,"body_markdown":"WIthout knowing what the errors/logging are that is impossible to answer.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136742383_77563811","body":"WIthout knowing what the errors/logging are that is impossible to answer."},{"score":0,"post_type":"question","creation_date":1701186224,"post_id":77563811,"comment_id":136742571,"body_markdown":"@M.Deinum `jakarta.persistence.spi.TransformerException: Error performing enhancement of org/springframework/data/querydsl/SimpleEntityPathResolver\nCaused by: net.bytebuddy.pool.TypePool$Resolution$NoSuchTypeException: Cannot resolve type description for com.querydsl.core.types.EntityPath\n`\nand aprx 12k of trase like  \nCaused by: java.lang.IllegalAccessException: module java.base does not open java.lang to unnamed module @8c3b9d","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136742571_77563811","body":"@M.Deinum <code>jakarta.persistence.spi.TransformerException: Error performing enhancement of org&#47;springframework&#47;data&#47;querydsl&#47;SimpleEntityPathResolver Caused by: net.bytebuddy.pool.TypePool$Resolution$NoSuchTypeException: Cannot resolve type description for com.querydsl.core.types.EntityPath </code> and aprx 12k of trase like   Caused by: java.lang.IllegalAccessException: module java.base does not open java.lang to unnamed module @8c3b9d"},{"score":0,"post_type":"question","creation_date":1701186438,"post_id":77563811,"comment_id":136742618,"body_markdown":"Looks like either some incompatible versions (you are now mixing Spring 6.0.11 and 6.0.8) and could be that the JDK isn&#39;t supported if it is too new. I also wonder why Jakarta is now trying to enhance things.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136742618_77563811","body":"Looks like either some incompatible versions (you are now mixing Spring 6.0.11 and 6.0.8) and could be that the JDK isn&#39;t supported if it is too new. I also wonder why Jakarta is now trying to enhance things."},{"score":0,"post_type":"question","creation_date":1701187113,"post_id":77563811,"comment_id":136742764,"body_markdown":"@M.Deinum From where 6.0.8 version appeared? I posted spring libs list screenshot for you. JDK is corretto-17 do you suggest that for this kind of injection modern java versions is no suitable?","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136742764_77563811","body":"@M.Deinum From where 6.0.8 version appeared? I posted spring libs list screenshot for you. JDK is corretto-17 do you suggest that for this kind of injection modern java versions is no suitable?"},{"score":0,"post_type":"question","creation_date":1701243426,"post_id":77563811,"comment_id":136750029,"body_markdown":"That is what you stated **Graddle shows that spring-aspects-6.0.8.jar**.  So going with that and you adding 6.0.11 for instrumentation is mixing versions. Next to that the agent will produce a ton of logging (which you can disable). So those errors and warnings might not even matter. It will try to enhance all loaded classes.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136750029_77563811","body":"That is what you stated <b>Graddle shows that spring-aspects-6.0.8.jar</b>.  So going with that and you adding 6.0.11 for instrumentation is mixing versions. Next to that the agent will produce a ton of logging (which you can disable). So those errors and warnings might not even matter. It will try to enhance all loaded classes."},{"score":0,"post_type":"question","creation_date":1701253534,"post_id":77563811,"comment_id":136751829,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/256092/discussion-between-ludov-dmitrii-and-m-deinum).","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136751829_77563811","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/256092/discussion-between-ludov-dmitrii-and-m-deinum\">continue this discussion in chat</a>."},{"score":0,"post_type":"question","creation_date":1701311513,"post_id":77563811,"comment_id":136761194,"body_markdown":"No, let us not continue the discussion in a chat, because SO is no discussion forum but a Q/A platform. The correct next step is for you to provide an [MCVE](https://stackoverflow.com/help/mcve) on GitHub, so we can reproduce your problem instead of relying on incomplete info snippets. Please note that I also beautified your code snippets above a bit and fixed your typo(?) &quot;graddle&quot; to correctly read Gradle in several places.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136761194_77563811","body":"No, let us not continue the discussion in a chat, because SO is no discussion forum but a Q/A platform. The correct next step is for you to provide an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> on GitHub, so we can reproduce your problem instead of relying on incomplete info snippets. Please note that I also beautified your code snippets above a bit and fixed your typo(?) &quot;graddle&quot; to correctly read Gradle in several places."},{"score":0,"post_type":"question","creation_date":1701360810,"post_id":77563811,"comment_id":136768545,"body_markdown":"@kriegaex  The platform suggests to do so if comment section becomes like this. However you can act any way you like. If you can make a substantive solution - please. If only typo corrections are in your interests, thank you, appreciated your contribution.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136768545_77563811","body":"@kriegaex  The platform suggests to do so if comment section becomes like this. However you can act any way you like. If you can make a substantive solution - please. If only typo corrections are in your interests, thank you, appreciated your contribution."},{"score":0,"post_type":"question","creation_date":1701390779,"post_id":77563811,"comment_id":136773101,"body_markdown":"I am aware of the fact that SO suggests that. It is a smell if that happens, not meant to incentivise long-winded debates. Being an AOP expert, my interest is to help you. That I fixed some cosmetical things in your question does not mean that it is my main interest. It was meant to be a free service to you, guiding you by example towards giving more love to your future questions. Being sloppy in small things as a developer (or in any job) means that those small things will add up to a big pile of mess eventually. Garbage in, garbage out.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136773101_77563811","body":"I am aware of the fact that SO suggests that. It is a smell if that happens, not meant to incentivise long-winded debates. Being an AOP expert, my interest is to help you. That I fixed some cosmetical things in your question does not mean that it is my main interest. It was meant to be a free service to you, guiding you by example towards giving more love to your future questions. Being sloppy in small things as a developer (or in any job) means that those small things will add up to a big pile of mess eventually. Garbage in, garbage out."},{"score":0,"post_type":"question","creation_date":1701390922,"post_id":77563811,"comment_id":136773112,"body_markdown":"So, if you want to do yourself a favour, provide the minimal, complete reproducer I suggested (not your full, possibly copyrighted project, just the smallest abstraction of it reproducing the problem at hand). Do that, and I will look into it. Don&#39;t and I won&#39;t. Spoiler: I am the current maintainer of AspectJ and know a thing or two about Spring AOP, too. As for M. Deinum, he is as insightful a Spring expert as you can get. If I cannot answer your question, he can for sure. A reproducer would help him as well. It is hard to reason about invisible code without a magical crystal globe.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136773112_77563811","body":"So, if you want to do yourself a favour, provide the minimal, complete reproducer I suggested (not your full, possibly copyrighted project, just the smallest abstraction of it reproducing the problem at hand). Do that, and I will look into it. Don&#39;t and I won&#39;t. Spoiler: I am the current maintainer of AspectJ and know a thing or two about Spring AOP, too. As for M. Deinum, he is as insightful a Spring expert as you can get. If I cannot answer your question, he can for sure. A reproducer would help him as well. It is hard to reason about invisible code without a magical crystal globe."},{"score":0,"post_type":"question","creation_date":1701423378,"post_id":77563811,"comment_id":136776376,"body_markdown":"@kriegaex well if you insist so much, be my guest https://github.com/lDummyl/dddservice.git","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136776376_77563811","body":"@kriegaex well if you insist so much, be my guest <a href=\"https://github.com/lDummyl/dddservice.git\" rel=\"nofollow noreferrer\">github.com/lDummyl/dddservice.git</a>"},{"score":0,"post_type":"question","creation_date":1701444802,"post_id":77563811,"comment_id":136780129,"body_markdown":"The application does not start: `Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured. Reason: Failed to determine a suitable driver class`. The test does not start either. Like this, I cannot help you. Please push an update which either makes it work without any DB or add an in-memory DB.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136780129_77563811","body":"The application does not start: <code>Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured. Reason: Failed to determine a suitable driver class</code>. The test does not start either. Like this, I cannot help you. Please push an update which either makes it work without any DB or add an in-memory DB."},{"score":0,"post_type":"question","creation_date":1701460224,"post_id":77563811,"comment_id":136782707,"body_markdown":"@kriegaex as you wish.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle#comment136782707_77563811","body":"@kriegaex as you wish."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701696356,"post_id":77588813,"comment_id":136803930,"body_markdown":"Well it worked. 11 does not require this key. Spring boot now limits the initlzr to the choice of 17 or 21 versions of Java. I don’t like the numerous warnings and side errors (which can be suppressed as was said), obviously this requires setting up access and for this we need verbose plugins, which I hoped we could do without. It feels like this aspect is currently poorly developed in the framework. I will think twice before using this. Indicate the path(or mess with classpath) to jar and God knows what kind of pitfalls will be possible in the future if there will be mess in reflection tools.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle/77588813#comment136803930_77588813","body":"Well it worked. 11 does not require this key. Spring boot now limits the initlzr to the choice of 17 or 21 versions of Java. I don’t like the numerous warnings and side errors (which can be suppressed as was said), obviously this requires setting up access and for this we need verbose plugins, which I hoped we could do without. It feels like this aspect is currently poorly developed in the framework. I will think twice before using this. Indicate the path(or mess with classpath) to jar and God knows what kind of pitfalls will be possible in the future if there will be mess in reflection tools."},{"score":0,"post_type":"answer","creation_date":1701696400,"post_id":77588813,"comment_id":136803942,"body_markdown":"Perhaps, after all, the path through custom LoadTimeWeaver, which was proposed in the exception message as an alternative to the Java Agent, will be more convenient in the current modern versions of the boot. But how to configure it is not yet clear.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle/77588813#comment136803942_77588813","body":"Perhaps, after all, the path through custom LoadTimeWeaver, which was proposed in the exception message as an alternative to the Java Agent, will be more convenient in the current modern versions of the boot. But how to configure it is not yet clear."},{"score":0,"post_type":"answer","creation_date":1701708108,"post_id":77588813,"comment_id":136806422,"body_markdown":"Don&#39;t blame the framework. It is the JVM that has changed, introducing more and more new &quot;security features&quot;, making tool development harder and harder. Just because you quickly judge something as &quot;poorly developed&quot;, it does not mean it is. The JVM wants more explicit user decisions concerning what should be allowed to be done by tools. This is supposed to prevent hacks the user is unaware of. So just give permission, if it is what you want. Your complaints are not going to stop the JVM from developing.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle/77588813#comment136806422_77588813","body":"Don&#39;t blame the framework. It is the JVM that has changed, introducing more and more new &quot;security features&quot;, making tool development harder and harder. Just because you quickly judge something as &quot;poorly developed&quot;, it does not mean it is. The JVM wants more explicit user decisions concerning what should be allowed to be done by tools. This is supposed to prevent hacks the user is unaware of. So just give permission, if it is what you want. Your complaints are not going to stop the JVM from developing."},{"score":0,"post_type":"answer","creation_date":1701708463,"post_id":77588813,"comment_id":136806496,"body_markdown":"By the way, you said my solution works. Then please, accept the answer.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle/77588813#comment136806496_77588813","body":"By the way, you said my solution works. Then please, accept the answer."},{"score":0,"post_type":"answer","creation_date":1701718557,"post_id":77588813,"comment_id":136808274,"body_markdown":"My, as you call them, complains is simply an explanation of why I will not use this approach. I don’t need to set up spring bins via XML for a long time now. This is done easily and declaratively and does not require me to poke the framework’s nose into jars or say which packages to scan or classes to load. I am interested in a simple boxed solution, it is not available at the moment, from a learning point of view it is interesting and my gratitude is immeasurable. But I do not consider this as a suitable solution for the project, for which I am very sorry.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle/77588813#comment136808274_77588813","body":"My, as you call them, complains is simply an explanation of why I will not use this approach. I don’t need to set up spring bins via XML for a long time now. This is done easily and declaratively and does not require me to poke the framework’s nose into jars or say which packages to scan or classes to load. I am interested in a simple boxed solution, it is not available at the moment, from a learning point of view it is interesting and my gratitude is immeasurable. But I do not consider this as a suitable solution for the project, for which I am very sorry."},{"score":0,"post_type":"answer","creation_date":1701922495,"post_id":77588813,"comment_id":136835818,"body_markdown":"What does a Java agent on the JVM command line have to do with XML config? Let us not start comparing apples to pears, please. As for your wish to use a weaving agent without declaring same agent on the command line, please be informed that since JDK 21, dynamic attachment of agents without the user explicitly allowing it via command line flag has been prepared to be removed in the future., see [JEP 451](https://openjdk.org/jeps/451). I.e., in the future there will be no stealth mode agent attachment anymore, even though now there still are ways to achieve it. I suggest to get used to it now.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle/77588813#comment136835818_77588813","body":"What does a Java agent on the JVM command line have to do with XML config? Let us not start comparing apples to pears, please. As for your wish to use a weaving agent without declaring same agent on the command line, please be informed that since JDK 21, dynamic attachment of agents without the user explicitly allowing it via command line flag has been prepared to be removed in the future., see <a href=\"https://openjdk.org/jeps/451\" rel=\"nofollow noreferrer\">JEP 451</a>. I.e., in the future there will be no stealth mode agent attachment anymore, even though now there still are ways to achieve it. I suggest to get used to it now."},{"score":0,"post_type":"answer","creation_date":1701922743,"post_id":77588813,"comment_id":136835843,"body_markdown":"Setting a simple command line parameter like you also do for the class path, debug logging or other JVM or application features, is a reality you cannot just deny, magically wishing for a &quot;simple boxed solution&quot;. What looks simple from the outside, might require lots of plumbing on the inside, and still not work reliably in every situation. If you do not like that prospect, maybe you want to consider using compile-time instead of load-time weaving.","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle/77588813#comment136835843_77588813","body":"Setting a simple command line parameter like you also do for the class path, debug logging or other JVM or application features, is a reality you cannot just deny, magically wishing for a &quot;simple boxed solution&quot;. What looks simple from the outside, might require lots of plumbing on the inside, and still not work reliably in every situation. If you do not like that prospect, maybe you want to consider using compile-time instead of load-time weaving."}],"comment_count":7,"score":1,"last_activity_date":1701480527,"last_edit_date":1701480527,"creation_date":1701480112,"answer_id":77588813,"question_id":77563811,"body_markdown":"I am assuming that you run on JDK 16+. Maybe you forgot to add `--add-opens java.base/java.lang=ALL-UNNAMED` as [documented in the AspectJ release notes](https://htmlpreview.github.io/?https://github.com/eclipse-aspectj/aspectj/blob/master/docs/dist/doc/README-1919.html) when trying to use the AspectJ weaver. Unfortunately, the [Spring manual chapter about using AspectJ](https://docs.spring.io/spring-framework/reference/core/aop/using-aspectj.html) does not mention that.  Anyway, when I add that to the JVM command line in your example project and also activate `@EnableLoadTimeWeaving`, it works.\r\n\r\n```java\r\npackage com.test.ddd;\r\n\r\nimport com.test.ddd.domain.wire.TestEnt;\r\nimport com.test.ddd.repo.TestRepo;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.boot.context.properties.ConfigurationPropertiesScan;\r\nimport org.springframework.cloud.openfeign.EnableFeignClients;\r\nimport org.springframework.context.ConfigurableApplicationContext;\r\nimport org.springframework.context.annotation.EnableLoadTimeWeaving;\r\nimport org.springframework.context.annotation.aspectj.EnableSpringConfigured;\r\nimport org.springframework.data.jpa.repository.config.EnableJpaAuditing;\r\nimport org.springframework.retry.annotation.EnableRetry;\r\nimport org.springframework.scheduling.annotation.EnableScheduling;\r\n\r\nimport java.util.UUID;\r\n\r\n@EnableRetry\r\n@ConfigurationPropertiesScan\r\n@EnableFeignClients\r\n@EnableScheduling\r\n@SpringBootApplication\r\n@EnableJpaAuditing\r\n@EnableLoadTimeWeaving //goes with -javaagent:{full-path}spring-instrument-6.0.11.jar\r\n@EnableSpringConfigured\r\npublic class DDDApplication {\r\n  public static void main(String[] args) {\r\n    try (ConfigurableApplicationContext context = SpringApplication.run(DDDApplication.class, args)) {\r\n      TestRepo testRepo = context.getBean(TestRepo.class);\r\n      testRepo.save(new TestEnt(UUID.randomUUID(), 1));\r\n      testRepo.findAll().get(0).call();\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n```none\r\n--add-opens java.base/java.lang=ALL-UNNAMED -javaagent:/my/path/spring-instrument-6.0.11.jar\r\n```\r\n\r\n[![IntelliJ IDEA run config for class DDDApplication][1]][1]\r\n\r\nRunning the application, the console log says:\r\n\r\n```none\r\n2023-12-02T08:18:02.884+07:00  INFO 10888 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n2023-12-02T08:18:03.880+07:00  INFO 10888 --- [           main] com.test.ddd.DDDApplication              : Started DDDApplication in 33.258 seconds (process running for 34.46)\r\nHibernate: select t1_0.id,t1_0.incr from test_ent t1_0 where t1_0.id=?\r\nHibernate: insert into test_ent (incr,id) values (?,?)\r\nHibernate: select t1_0.id,t1_0.incr from test_ent t1_0\r\ntestRepo = org.springframework.data.jpa.repository.support.SimpleJpaRepository@33880bed\r\n```\r\n\r\nHow you can set that option for your test in Gradle or in an IDE running tests via Gradle, I do not know. I am a Maven guy.\r\n\r\n  [1]: https://i.stack.imgur.com/mvgCt.png","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle/77588813#77588813","title":"Inject domain service to entity Spring boot + Gradle","body":"<p>I am assuming that you run on JDK 16+. Maybe you forgot to add <code>--add-opens java.base/java.lang=ALL-UNNAMED</code> as <a href=\"https://htmlpreview.github.io/?https://github.com/eclipse-aspectj/aspectj/blob/master/docs/dist/doc/README-1919.html\" rel=\"nofollow noreferrer\">documented in the AspectJ release notes</a> when trying to use the AspectJ weaver. Unfortunately, the <a href=\"https://docs.spring.io/spring-framework/reference/core/aop/using-aspectj.html\" rel=\"nofollow noreferrer\">Spring manual chapter about using AspectJ</a> does not mention that.  Anyway, when I add that to the JVM command line in your example project and also activate <code>@EnableLoadTimeWeaving</code>, it works.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.test.ddd;\n\nimport com.test.ddd.domain.wire.TestEnt;\nimport com.test.ddd.repo.TestRepo;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.context.properties.ConfigurationPropertiesScan;\nimport org.springframework.cloud.openfeign.EnableFeignClients;\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.context.annotation.EnableLoadTimeWeaving;\nimport org.springframework.context.annotation.aspectj.EnableSpringConfigured;\nimport org.springframework.data.jpa.repository.config.EnableJpaAuditing;\nimport org.springframework.retry.annotation.EnableRetry;\nimport org.springframework.scheduling.annotation.EnableScheduling;\n\nimport java.util.UUID;\n\n@EnableRetry\n@ConfigurationPropertiesScan\n@EnableFeignClients\n@EnableScheduling\n@SpringBootApplication\n@EnableJpaAuditing\n@EnableLoadTimeWeaving //goes with -javaagent:{full-path}spring-instrument-6.0.11.jar\n@EnableSpringConfigured\npublic class DDDApplication {\n  public static void main(String[] args) {\n    try (ConfigurableApplicationContext context = SpringApplication.run(DDDApplication.class, args)) {\n      TestRepo testRepo = context.getBean(TestRepo.class);\n      testRepo.save(new TestEnt(UUID.randomUUID(), 1));\n      testRepo.findAll().get(0).call();\n    }\n  }\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>--add-opens java.base/java.lang=ALL-UNNAMED -javaagent:/my/path/spring-instrument-6.0.11.jar\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/mvgCt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mvgCt.png\" alt=\"IntelliJ IDEA run config for class DDDApplication\" /></a></p>\n<p>Running the application, the console log says:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2023-12-02T08:18:02.884+07:00  INFO 10888 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2023-12-02T08:18:03.880+07:00  INFO 10888 --- [           main] com.test.ddd.DDDApplication              : Started DDDApplication in 33.258 seconds (process running for 34.46)\nHibernate: select t1_0.id,t1_0.incr from test_ent t1_0 where t1_0.id=?\nHibernate: insert into test_ent (incr,id) values (?,?)\nHibernate: select t1_0.id,t1_0.incr from test_ent t1_0\ntestRepo = org.springframework.data.jpa.repository.support.SimpleJpaRepository@33880bed\n</code></pre>\n<p>How you can set that option for your test in Gradle or in an IDE running tests via Gradle, I do not know. I am a Maven guy.</p>\n"}],"comment_count":19,"is_answered":true,"view_count":81,"answer_count":1,"score":0,"last_activity_date":1701480527,"creation_date":1701174024,"last_edit_date":1701311394,"question_id":77563811,"body_markdown":"Trying to inject domain Service to Entity and getting NPE while calling it. \r\nUsing Spring Boot 3+ and Gradle. I hope its not the case that I need manually set plugins to enable Aspects. Tryed with no good result.\r\n\r\n```java\r\n@Entity\r\n@Getter\r\n@Table(name = &quot;usr&quot;)\r\n@Configurable(preConstruction=true,dependencyCheck=true,autowire=Autowire.BY_TYPE)\r\npublic class User  {\r\n  @Transient\r\n  @Autowired\r\n  private SomeService service;\r\n  // ...\r\n}\r\n```\r\n\r\nApplication annotated with\r\n\r\n```java\r\n@SpringBootApplication\r\n@EnableSpringConfigured\r\npublic class UserServiceApplication {\r\n  // ...\r\n}\r\n```\r\n\r\nGradle shows that spring-aspects-6.0.11.jar is in the clip.\r\nSince all annotations are imported from the box I assume that this dependencies would be enough \r\n\r\n```java\r\nimplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\nimplementation &#39;org.springframework.cloud:spring-cloud-starter-config&#39;\r\nimplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\nimplementation &#39;org.springframework.cloud:spring-cloud-starter-bootstrap&#39;\r\n```\r\n\r\nHope there is some elegant way Spring provides to make it work. Add some verbose configuration elements to force this injection is not a problem, except getting some verbose elements.\r\n\r\nI kindly ask to leave aside the questions about the purpose of such injection. Since this can be done, a technical issue needs to be resolved.\r\n\r\n[![versions][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/nq2tW.jpg","link":"https://stackoverflow.com/questions/77563811/inject-domain-service-to-entity-spring-boot-gradle","title":"Inject domain service to entity Spring boot + Gradle","body":"<p>Trying to inject domain Service to Entity and getting NPE while calling it.\nUsing Spring Boot 3+ and Gradle. I hope its not the case that I need manually set plugins to enable Aspects. Tryed with no good result.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Getter\n@Table(name = &quot;usr&quot;)\n@Configurable(preConstruction=true,dependencyCheck=true,autowire=Autowire.BY_TYPE)\npublic class User  {\n  @Transient\n  @Autowired\n  private SomeService service;\n  // ...\n}\n</code></pre>\n<p>Application annotated with</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableSpringConfigured\npublic class UserServiceApplication {\n  // ...\n}\n</code></pre>\n<p>Gradle shows that spring-aspects-6.0.11.jar is in the clip.\nSince all annotations are imported from the box I assume that this dependencies would be enough</p>\n<pre class=\"lang-java prettyprint-override\"><code>implementation 'org.springframework.boot:spring-boot-starter-web'\nimplementation 'org.springframework.cloud:spring-cloud-starter-config'\nimplementation 'org.springframework.boot:spring-boot-starter-data-jpa'\nimplementation 'org.springframework.cloud:spring-cloud-starter-bootstrap'\n</code></pre>\n<p>Hope there is some elegant way Spring provides to make it work. Add some verbose configuration elements to force this injection is not a problem, except getting some verbose elements.</p>\n<p>I kindly ask to leave aside the questions about the purpose of such injection. Since this can be done, a technical issue needs to be resolved.</p>\n<p><a href=\"https://i.stack.imgur.com/nq2tW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nq2tW.jpg\" alt=\"versions\" /></a></p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"comments":[{"score":0,"post_type":"question","creation_date":1701422174,"post_id":77582143,"comment_id":136776156,"body_markdown":"I dont think you can get any such broker-info from your producer or consumer. That sounds like a possible security issue as well, if that was the case!\n\nIs there a specific reason you need that? if it is just for debugging, you can add more logs and use metrics on your broker side","link":"https://stackoverflow.com/questions/77582143/how-to-get-the-broker-address-of-kafka-in-the-app#comment136776156_77582143","body":"I dont think you can get any such broker-info from your producer or consumer. That sounds like a possible security issue as well, if that was the case!  Is there a specific reason you need that? if it is just for debugging, you can add more logs and use metrics on your broker side"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701478512,"creation_date":1701478512,"answer_id":77588750,"question_id":77582143,"body_markdown":"It depends on your app config, but you can just load the value\r\n\r\n```\r\n@Value(&quot;spring.kafka.bootstrap-servers&quot;)\r\nprivate String bootstrapServers;\r\n```\r\n\r\nOtherwise, you&#39;d Autowire the `AdminClient`, then call `describeCluster` and parse it.","link":"https://stackoverflow.com/questions/77582143/how-to-get-the-broker-address-of-kafka-in-the-app/77588750#77588750","title":"How to get the broker address of Kafka in the app?","body":"<p>It depends on your app config, but you can just load the value</p>\n<pre><code>@Value(&quot;spring.kafka.bootstrap-servers&quot;)\nprivate String bootstrapServers;\n</code></pre>\n<p>Otherwise, you'd Autowire the <code>AdminClient</code>, then call <code>describeCluster</code> and parse it.</p>\n"}],"comment_count":1,"is_answered":false,"view_count":21,"answer_count":1,"score":0,"last_activity_date":1701478512,"creation_date":1701385403,"question_id":77582143,"body_markdown":"I use Java, Spring-Boot and Kafka in a project.\r\n\r\n\r\n    @Autowired\r\n\tprivate KafkaTemplate &lt;String, MyRecord&gt; kt;\r\n\r\n    private void produce ()\r\n    {\r\n        MyRecord mr = new MyRecord (&quot;abc&quot;);\r\n        ProducerRecord &lt;String, MyRecord&gt; pr = new ProducerRecord &lt;String, MyRecord&gt; (&quot;mytest&quot;, &quot;test&quot;, mr);\r\n\t    this.templ.send (pr);   // produce\r\n    }\r\n\t\r\n\t@KafkaListener (topics = &quot;mytest&quot;)\r\n\tprivate void consume (ConsumerRecord &lt;String, MyRecord&gt; cr)\r\n\t{\t\r\n    \t// consume\r\n\t}\r\n\t\r\nHere my dependency.\r\n\r\n    &lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI have it configured as cluster with multiple brokers. How can I find out which broker my app is connected to?","link":"https://stackoverflow.com/questions/77582143/how-to-get-the-broker-address-of-kafka-in-the-app","title":"How to get the broker address of Kafka in the app?","body":"<p>I use Java, Spring-Boot and Kafka in a project.</p>\n<pre><code>@Autowired\nprivate KafkaTemplate &lt;String, MyRecord&gt; kt;\n\nprivate void produce ()\n{\n    MyRecord mr = new MyRecord (&quot;abc&quot;);\n    ProducerRecord &lt;String, MyRecord&gt; pr = new ProducerRecord &lt;String, MyRecord&gt; (&quot;mytest&quot;, &quot;test&quot;, mr);\n    this.templ.send (pr);   // produce\n}\n\n@KafkaListener (topics = &quot;mytest&quot;)\nprivate void consume (ConsumerRecord &lt;String, MyRecord&gt; cr)\n{   \n    // consume\n}\n</code></pre>\n<p>Here my dependency.</p>\n<pre><code>&lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I have it configured as cluster with multiple brokers. How can I find out which broker my app is connected to?</p>\n"},{"tags":["java","jmx","micrometer"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701680429,"post_id":77588608,"comment_id":136801223,"body_markdown":"Thank you @Jonatan Ivanov for the reply. I&#39;m new to Micrometer. Could you tell me more about which `Map` should be empty here?","link":"https://stackoverflow.com/questions/77562685/remove-other-attributes-except-count/77588608#comment136801223_77588608","body":"Thank you @Jonatan Ivanov for the reply. I&#39;m new to Micrometer. Could you tell me more about which <code>Map</code> should be empty here?"},{"score":0,"post_type":"answer","creation_date":1701773469,"post_id":77588608,"comment_id":136814474,"body_markdown":"This: https://github.com/dropwizard/metrics/blob/da71539d0956a36f3ccde7cc05c2e891e4dc76c9/metrics-jmx/src/main/java/com/codahale/metrics/jmx/JmxReporter.java#L139-L148","link":"https://stackoverflow.com/questions/77562685/remove-other-attributes-except-count/77588608#comment136814474_77588608","body":"This: <a href=\"https://github.com/dropwizard/metrics/blob/da71539d0956a36f3ccde7cc05c2e891e4dc76c9/metrics-jmx/src/main/java/com/codahale/metrics/jmx/JmxReporter.java#L139-L148\" rel=\"nofollow noreferrer\">github.com/dropwizard/metrics/blob/&hellip;</a>"}],"comment_count":2,"score":1,"last_activity_date":1701474315,"creation_date":1701474315,"answer_id":77588608,"question_id":77562685,"body_markdown":"Micrometer&#39;s [`JmxMeterRegistry`](https://github.com/micrometer-metrics/micrometer/blob/7367d983f397238abaacfb02944f4cc8426a45d1/implementations/micrometer-registry-jmx/src/main/java/io/micrometer/jmx/JmxMeterRegistry.java) uses Dropwizard&#39;s `JmxReporter` that creates these values. `JmxMeterRegistry` has a ctor that enables you to specify your own `JmxReporter` and `JmxReporter` seems to have a capability to specify `specificRateUnits`, I think if you pass an empty `Map`, it should not produce the rates above. ","link":"https://stackoverflow.com/questions/77562685/remove-other-attributes-except-count/77588608#77588608","title":"Remove other attributes except count","body":"<p>Micrometer's <a href=\"https://github.com/micrometer-metrics/micrometer/blob/7367d983f397238abaacfb02944f4cc8426a45d1/implementations/micrometer-registry-jmx/src/main/java/io/micrometer/jmx/JmxMeterRegistry.java\" rel=\"nofollow noreferrer\"><code>JmxMeterRegistry</code></a> uses Dropwizard's <code>JmxReporter</code> that creates these values. <code>JmxMeterRegistry</code> has a ctor that enables you to specify your own <code>JmxReporter</code> and <code>JmxReporter</code> seems to have a capability to specify <code>specificRateUnits</code>, I think if you pass an empty <code>Map</code>, it should not produce the rates above.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":30,"answer_count":1,"score":0,"last_activity_date":1701474315,"creation_date":1701163826,"question_id":77562685,"body_markdown":"We have JMX registry in Micrometer.\r\n\r\nQuestions:\r\n\r\n 1. Are there any performance considerations associated with the calculations of these attributes: *FifteenMinuteRate*, *FiveMinuteRate*, *MeanRate* and *OneMinuteRate*?\r\n 2. How can we remove them except for *Count*? (Just to make sure there will be no performace overhead)\r\n\r\n[![JMX attributes][1]][1]\r\n\r\n Here is a sample of our code:\r\n```java\r\nJmxMeterRegistry meterRegistry = new JmxMeterRegistry(MyJmxConfig.DEFAULT, Clock.SYSTEM);\r\nmeterRegistry.counter(name, tags).increment(amount);\r\n\r\ninterface MyJmxConfig extends JmxConfig {\r\n    MyJmxConfig DEFAULT = k -&gt; null;\r\n\r\n    @Override\r\n    default String domain() {\r\n         return &quot;com.example.platform.metrics.test&quot;;\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/V0Dud.png","link":"https://stackoverflow.com/questions/77562685/remove-other-attributes-except-count","title":"Remove other attributes except count","body":"<p>We have JMX registry in Micrometer.</p>\n<p>Questions:</p>\n<ol>\n<li>Are there any performance considerations associated with the calculations of these attributes: <em>FifteenMinuteRate</em>, <em>FiveMinuteRate</em>, <em>MeanRate</em> and <em>OneMinuteRate</em>?</li>\n<li>How can we remove them except for <em>Count</em>? (Just to make sure there will be no performace overhead)</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/V0Dud.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V0Dud.png\" alt=\"JMX attributes\" /></a></p>\n<p>Here is a sample of our code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>JmxMeterRegistry meterRegistry = new JmxMeterRegistry(MyJmxConfig.DEFAULT, Clock.SYSTEM);\nmeterRegistry.counter(name, tags).increment(amount);\n\ninterface MyJmxConfig extends JmxConfig {\n    MyJmxConfig DEFAULT = k -&gt; null;\n\n    @Override\n    default String domain() {\n         return &quot;com.example.platform.metrics.test&quot;;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","selenium-webdriver","spring-boot-test"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1700910666,"post_id":77547287,"comment_id":136711680,"body_markdown":"Thank you, but I am pretty sure one can use both Selenium and Spring Boot at the same time. Selenium for UI automation and Spring for asserting the values of object&#39;s fields after some automated actions.","link":"https://stackoverflow.com/questions/77546392/how-can-i-manipulate-the-data-in-spring-boot-test-class-so-that-it-is-updated-on/77547287#comment136711680_77547287","body":"Thank you, but I am pretty sure one can use both Selenium and Spring Boot at the same time. Selenium for UI automation and Spring for asserting the values of object&#39;s fields after some automated actions."}],"comment_count":1,"score":0,"last_activity_date":1700903969,"creation_date":1700903969,"answer_id":77547287,"question_id":77546392,"body_markdown":"Well you are trying to do two different things at same time.. You need to understand Selenium is used for automation of web UI, if you want to perform some other tasks or processing other than that, you have to work with some other libraries/packages. In this you want to work with Spring Boot, which is to create BackEnd end points.. For that you can work with [RestAssured][1] or [UniRest][2].\r\n\r\n\r\n  [1]: https://rest-assured.io/\r\n  [2]: http://kong.github.io/unirest-java/","link":"https://stackoverflow.com/questions/77546392/how-can-i-manipulate-the-data-in-spring-boot-test-class-so-that-it-is-updated-on/77547287#77547287","title":"How can I manipulate the data in Spring Boot Test class so that it is updated on the Server as well? (Integration testing, Selenium)","body":"<p>Well you are trying to do two different things at same time.. You need to understand Selenium is used for automation of web UI, if you want to perform some other tasks or processing other than that, you have to work with some other libraries/packages. In this you want to work with Spring Boot, which is to create BackEnd end points.. For that you can work with <a href=\"https://rest-assured.io/\" rel=\"nofollow noreferrer\">RestAssured</a> or <a href=\"http://kong.github.io/unirest-java/\" rel=\"nofollow noreferrer\">UniRest</a>.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701468994,"creation_date":1701468994,"answer_id":77588356,"question_id":77546392,"body_markdown":"So I&#39;ve figured out it was just a silly mistake, I should have used a @LocalServerPort field in order to connect to the server, which is:\r\n```\r\n@LocalServerPort\r\nint port;\r\n```\r\n\r\nSo connecting to the server should take the following form:\r\n```\r\ndriver.get(&quot;http://localhost:&quot; + port);\r\n```\r\n\r\nThis way all necessary data are injected properly, so that we can manipulate it in our tests.","link":"https://stackoverflow.com/questions/77546392/how-can-i-manipulate-the-data-in-spring-boot-test-class-so-that-it-is-updated-on/77588356#77588356","title":"How can I manipulate the data in Spring Boot Test class so that it is updated on the Server as well? (Integration testing, Selenium)","body":"<p>So I've figured out it was just a silly mistake, I should have used a @LocalServerPort field in order to connect to the server, which is:</p>\n<pre><code>@LocalServerPort\nint port;\n</code></pre>\n<p>So connecting to the server should take the following form:</p>\n<pre><code>driver.get(&quot;http://localhost:&quot; + port);\n</code></pre>\n<p>This way all necessary data are injected properly, so that we can manipulate it in our tests.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":33,"answer_count":2,"score":0,"last_activity_date":1701468994,"creation_date":1700877545,"question_id":77546392,"body_markdown":"I want to make an integration **Selenium** test of my **Spring Boot Web application**, however I can&#39;t figure out how to **update** the object inside my test class, so that the server would use the **updated version** of it.\r\n\r\nBasically, the question is how to connect the object &quot;**ad**&quot; with the same object on the server side?\r\n\r\n```\r\n@DirtiesContext\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@ContextConfiguration(classes = Application.class)\r\npublic class IntegrationTest {\r\n    // this field I want to update during the testing, so that the server knows about it\r\n    @Autowired\r\n    AppData ad;\r\n    @Autowired\r\n    AppLogic logic;\r\n    @LocalServerPort\r\n    int port;\r\n\r\n    private WebDriver driver;\r\n    private ChromeOptions options;\r\n\r\n    @BeforeEach\r\n    public void setUp() throws InterruptedException {\r\n        // SpringApplication.run(Application.class);\r\n\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;D:\\\\chromedriver.exe&quot;);\r\n        options = new ChromeOptions();\r\n        options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n        options.setBinary(&quot;D:\\\\chrome.exe&quot;);\r\n    }\r\n\r\n    public void test() {\r\n        // loading the browser and connecting to the server\r\n        WebDriver driver = new ChromeDriver(options);\r\n        driver.get(&quot;http://localhost:8081&quot;);\r\n\r\n        // here I want to rig and manipulate the data, which the server is using (&quot;ad&quot; object),\r\n        // but the problem is it does not affect it on the server side\r\n        ad.getPlayers();\r\n        ad.setCards(&quot;rigged data&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@SpringBootApplication\r\npublic class Application {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@Controller\r\npublic class AppController {\r\n    AppLogic logic;\r\n    AppData ad;\r\n\r\n    public AppController(AppLogic logic, AppData ad) {\r\n        this.logic = logic;\r\n        this.ad = ad;\r\n    }\r\n\r\n    // ...\r\n}\r\n```\r\n\r\n```\r\n@Component\r\npublic class AppLogic {\r\n    // ...\r\n}\r\n```\r\n\r\n```\r\npublic interface AppData {\r\n    // ...\r\n}\r\n```\r\n\r\n```\r\n@Component\r\npublic class AppDataImpl implements AppData {\r\n    ...\r\n}\r\n```\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77546392/how-can-i-manipulate-the-data-in-spring-boot-test-class-so-that-it-is-updated-on","title":"How can I manipulate the data in Spring Boot Test class so that it is updated on the Server as well? (Integration testing, Selenium)","body":"<p>I want to make an integration <strong>Selenium</strong> test of my <strong>Spring Boot Web application</strong>, however I can't figure out how to <strong>update</strong> the object inside my test class, so that the server would use the <strong>updated version</strong> of it.</p>\n<p>Basically, the question is how to connect the object &quot;<strong>ad</strong>&quot; with the same object on the server side?</p>\n<pre><code>@DirtiesContext\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@ContextConfiguration(classes = Application.class)\npublic class IntegrationTest {\n    // this field I want to update during the testing, so that the server knows about it\n    @Autowired\n    AppData ad;\n    @Autowired\n    AppLogic logic;\n    @LocalServerPort\n    int port;\n\n    private WebDriver driver;\n    private ChromeOptions options;\n\n    @BeforeEach\n    public void setUp() throws InterruptedException {\n        // SpringApplication.run(Application.class);\n\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;D:\\\\chromedriver.exe&quot;);\n        options = new ChromeOptions();\n        options.addArguments(&quot;--remote-allow-origins=*&quot;);\n        options.setBinary(&quot;D:\\\\chrome.exe&quot;);\n    }\n\n    public void test() {\n        // loading the browser and connecting to the server\n        WebDriver driver = new ChromeDriver(options);\n        driver.get(&quot;http://localhost:8081&quot;);\n\n        // here I want to rig and manipulate the data, which the server is using (&quot;ad&quot; object),\n        // but the problem is it does not affect it on the server side\n        ad.getPlayers();\n        ad.setCards(&quot;rigged data&quot;);\n    }\n}\n</code></pre>\n<pre><code>@SpringBootApplication\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n<pre><code>@Controller\npublic class AppController {\n    AppLogic logic;\n    AppData ad;\n\n    public AppController(AppLogic logic, AppData ad) {\n        this.logic = logic;\n        this.ad = ad;\n    }\n\n    // ...\n}\n</code></pre>\n<pre><code>@Component\npublic class AppLogic {\n    // ...\n}\n</code></pre>\n<pre><code>public interface AppData {\n    // ...\n}\n</code></pre>\n<pre><code>@Component\npublic class AppDataImpl implements AppData {\n    ...\n}\n</code></pre>\n"},{"tags":["java","xml","jaxb","unmarshalling"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701466759,"creation_date":1701466759,"answer_id":77588214,"question_id":77469160,"body_markdown":"Your target namespace in XSD, and so in your Java generated code is `targetNamespace=&quot;http://ws.services.company.com&quot;` but you receive the `webServiceResponse` in the `http://rest.ws.services.company.com` namespace.\r\n\r\nThat why the unmarshaller complains about not receiving one of the expected elements\r\n\r\nIs your XSD created by yourself or send by someone else ? In any case to make it work, you should change the `targetNamespace` according to the expected one (with the `rest` prefix in it).","link":"https://stackoverflow.com/questions/77469160/unmarshalling-error-when-i-try-to-unmarshall-the-webserviceresponse/77588214#77588214","title":"Unmarshalling Error when I try to unmarshall the WebServiceResponse","body":"<p>Your target namespace in XSD, and so in your Java generated code is <code>targetNamespace=&quot;http://ws.services.company.com&quot;</code> but you receive the <code>webServiceResponse</code> in the <code>http://rest.ws.services.company.com</code> namespace.</p>\n<p>That why the unmarshaller complains about not receiving one of the expected elements</p>\n<p>Is your XSD created by yourself or send by someone else ? In any case to make it work, you should change the <code>targetNamespace</code> according to the expected one (with the <code>rest</code> prefix in it).</p>\n"}],"comment_count":0,"is_answered":false,"view_count":27,"answer_count":1,"score":-1,"last_activity_date":1701466759,"creation_date":1699796721,"last_edit_date":1699869055,"question_id":77469160,"body_markdown":"I have a response from a 3rd party API, that give me an error for unmarshalling the xml response is similar to that:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n&lt;ns2:webServiceResponse\r\n\txmlns=&quot;http://ws.services.company.com&quot;\r\n\txmlns:ns2=&quot;http://rest.ws.services.company.com&quot;&gt;\r\n\t&lt;ns2:result&gt;\r\n\t\t&lt;success&gt;true&lt;/success&gt;\r\n\t\t&lt;id&gt;7054986&lt;/id&gt;\r\n\t&lt;/ns2:result&gt;\r\n&lt;/ns2:webServiceResponse&gt;\r\n```\r\n\r\nNormally I was testing my Java code with a xml response like that and I get success:\r\n\r\n```\r\n&lt;webServiceResponse xmlns=&quot;http://ws.services.company.com&quot;&gt;\r\n  &lt;result&gt;\r\n    &lt;success&gt;true&lt;/success&gt;\r\n    &lt;id&gt;1&lt;/id&gt;\r\n  &lt;/result&gt;\r\n&lt;/webServiceResponse&gt;\r\n```\r\n\r\nIn Java, I have been creating the respective XML Data class with the following xsd files.\r\n\r\n`CompanyWS.xsd`\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;xsd:schema elementFormDefault=&quot;qualified&quot; xmlns:jxb=&quot;https://jakarta.ee/xml/ns/jaxb&quot; jxb:version=&quot;3.0&quot; targetNamespace=&quot;http://ws.services.company.com&quot; xmlns=&quot;http://ws.services.company.com&quot; version=&quot;1.0&quot; xmlns:ns2=&quot;http://ws.services.company.com&quot; xmlns:ws=&quot;http://ws.services.company.com&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\r\n\r\n    &lt;xsd:include schemaLocation=&quot;CompanyWSTypes.xsd&quot;/&gt;\r\n\r\n    &lt;xsd:element name=&quot;someFunctionality&quot;&gt;\r\n        &lt;xsd:complexType&gt;\r\n            &lt;xsd:complexContent&gt;\r\n                &lt;xsd:extension base=&quot;ns2:WebServiceRequest&quot;&gt;\r\n                    &lt;xsd:sequence&gt;\r\n                        &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;someEvent&quot; type=&quot;ns2:InteractObject&quot;/&gt;\r\n                        &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;recipientData&quot; type=&quot;ns2:RecipientData&quot;/&gt;\r\n                    &lt;/xsd:sequence&gt;\r\n                &lt;/xsd:extension&gt;\r\n            &lt;/xsd:complexContent&gt;\r\n        &lt;/xsd:complexType&gt;\r\n    &lt;/xsd:element&gt;\r\n    &lt;xsd:element name=&quot;someFunctionality2&quot;&gt;\r\n        &lt;xsd:complexType&gt;\r\n            &lt;xsd:complexContent&gt;\r\n                &lt;xsd:extension base=&quot;ns2:WebServiceRequest&quot;&gt;\r\n                    &lt;xsd:sequence&gt;\r\n                        &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;customEvent&quot; type=&quot;ns2:CustomEvent&quot;/&gt;\r\n                        &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;recipientData&quot; type=&quot;ns2:RecipientData&quot;/&gt;\r\n                    &lt;/xsd:sequence&gt;\r\n                &lt;/xsd:extension&gt;\r\n            &lt;/xsd:complexContent&gt;\r\n        &lt;/xsd:complexType&gt;\r\n    &lt;/xsd:element&gt;\r\n    &lt;xsd:element name=&quot;webServiceResponse&quot;&gt;\r\n        &lt;xsd:complexType&gt;\r\n            &lt;xsd:sequence&gt;\r\n                &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;result&quot; nillable=&quot;true&quot; type=&quot;ns2:WebServiceResult&quot;/&gt;\r\n            &lt;/xsd:sequence&gt;\r\n        &lt;/xsd:complexType&gt;\r\n    &lt;/xsd:element&gt;\r\n\r\n\r\n&lt;/xsd:schema&gt;\r\n```\r\n\r\n`CompanyWSTypes.xsd`\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;xsd:schema elementFormDefault=&quot;qualified&quot; xmlns:jxb=&quot;https://jakarta.ee/xml/ns/jaxb&quot; jxb:version=&quot;3.0&quot; targetNamespace=&quot;http://ws.services.company.com&quot; version=&quot;1.0&quot; xmlns:ns2=&quot;http://ws.services.company.com&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\r\n\r\n  &lt;xsd:complexType name=&quot;InteractObject&quot;&gt;\r\n    &lt;xsd:sequence&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;folderName&quot; type=&quot;ns2:minLengthString&quot;/&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;objectName&quot; type=&quot;ns2:minLengthString&quot;/&gt;\r\n    &lt;/xsd:sequence&gt;\r\n  &lt;/xsd:complexType&gt;\r\n  &lt;xsd:complexType name=&quot;RecipientData&quot;&gt;\r\n    &lt;xsd:sequence&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;recipient&quot; type=&quot;ns2:Recipient&quot;/&gt;\r\n      &lt;xsd:element maxOccurs=&quot;unbounded&quot; minOccurs=&quot;0&quot; name=&quot;optionalData&quot; nillable=&quot;true&quot; type=&quot;ns2:OptionalData&quot;/&gt;\r\n    &lt;/xsd:sequence&gt;\r\n  &lt;/xsd:complexType&gt;\r\n  &lt;xsd:complexType name=&quot;Recipient&quot;&gt;\r\n    &lt;xsd:sequence&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;listName&quot; type=&quot;ns2:InteractObject&quot;/&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;recipientId&quot; nillable=&quot;true&quot; type=&quot;xsd:long&quot;/&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;customerId&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;mobileNumber&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;emailAddress&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;permissionStatus&quot; nillable=&quot;true&quot; type=&quot;ns2:PermissionStatus&quot;/&gt;\r\n    &lt;/xsd:sequence&gt;\r\n  &lt;/xsd:complexType&gt;\r\n  &lt;xsd:complexType name=&quot;OptionalData&quot;&gt;\r\n    &lt;xsd:sequence&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;name&quot; type=&quot;ns2:minLengthString&quot;/&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;value&quot; type=&quot;ns2:minLengthString&quot;/&gt;\r\n    &lt;/xsd:sequence&gt;\r\n  &lt;/xsd:complexType&gt;\r\n\r\n  &lt;xsd:simpleType name=&quot;minLengthString&quot;&gt;\r\n    &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;\r\n      &lt;xsd:minLength value=&quot;1&quot;/&gt;\r\n    &lt;/xsd:restriction&gt;\r\n  &lt;/xsd:simpleType&gt;\r\n  &lt;xsd:simpleType name=&quot;CampaignType&quot;&gt;\r\n    &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;\r\n      &lt;xsd:enumeration value=&quot;TRANSACTIONAL&quot;/&gt;\r\n      &lt;xsd:enumeration value=&quot;PROMOTIONAL&quot;/&gt;\r\n    &lt;/xsd:restriction&gt;\r\n  &lt;/xsd:simpleType&gt;\r\n  &lt;xsd:simpleType name=&quot;PermissionStatus&quot;&gt;\r\n    &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;\r\n      &lt;xsd:enumeration value=&quot;OPTIN&quot;/&gt;\r\n      &lt;xsd:enumeration value=&quot;OPTOUT&quot;/&gt;\r\n      &lt;xsd:enumeration value=&quot;NOT_SPECIFIED&quot;/&gt;\r\n    &lt;/xsd:restriction&gt;\r\n  &lt;/xsd:simpleType&gt;\r\n  &lt;xsd:simpleType name=&quot;PriorityLevel&quot;&gt;\r\n    &lt;xsd:restriction base=&quot;xsd:int&quot;&gt;\r\n      &lt;xsd:enumeration value=&quot;1&quot;/&gt;\r\n      &lt;xsd:enumeration value=&quot;2&quot;/&gt;\r\n      &lt;xsd:enumeration value=&quot;3&quot;/&gt;\r\n    &lt;/xsd:restriction&gt;\r\n  &lt;/xsd:simpleType&gt;\r\n  &lt;xsd:complexType name=&quot;WebServiceRequest&quot;&gt;\r\n    &lt;xsd:sequence&gt;\r\n      &lt;xsd:element maxOccurs=&quot;unbounded&quot; minOccurs=&quot;0&quot; name=&quot;additionalData&quot; nillable=&quot;true&quot; type=&quot;xsd:anyType&quot;/&gt;\r\n    &lt;/xsd:sequence&gt;\r\n    &lt;xsd:attribute name=&quot;transactionId&quot; type=&quot;xsd:string&quot;/&gt;\r\n    &lt;xsd:attribute name=&quot;accountId&quot; type=&quot;xsd:string&quot;/&gt;\r\n    &lt;xsd:attribute name=&quot;brandId&quot; type=&quot;xsd:string&quot;/&gt;\r\n    &lt;xsd:attribute name=&quot;langLocale&quot; type=&quot;xsd:string&quot;/&gt;\r\n    &lt;xsd:attribute default=&quot;1&quot; name=&quot;priorityLevel&quot; type=&quot;ns2:PriorityLevel&quot;/&gt;\r\n    &lt;xsd:attribute default=&quot;TRANSACTIONAL&quot; name=&quot;campaignType&quot; type=&quot;ns2:CampaignType&quot;/&gt;\r\n  &lt;/xsd:complexType&gt;\r\n  &lt;xsd:complexType name=&quot;CustomEvent&quot;&gt;\r\n    &lt;xsd:sequence&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;eventName&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;eventId&quot; nillable=&quot;true&quot; type=&quot;xsd:long&quot;/&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;eventStringDataMapping&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;eventDateDataMapping&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;eventNumberDataMapping&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\r\n    &lt;/xsd:sequence&gt;\r\n  &lt;/xsd:complexType&gt;\r\n  &lt;xsd:complexType name=&quot;WebServiceResult&quot;&gt;\r\n    &lt;xsd:sequence&gt;\r\n      &lt;xsd:element name=&quot;success&quot; type=&quot;xsd:boolean&quot;/&gt;\r\n      &lt;xsd:element minOccurs=&quot;0&quot; name=&quot;id&quot; nillable=&quot;true&quot; type=&quot;xsd:long&quot;/&gt;\r\n      &lt;xsd:element minOccurs=&quot;0&quot; name=&quot;error&quot; nillable=&quot;true&quot; type=&quot;ns2:WebServiceError&quot;/&gt;\r\n    &lt;/xsd:sequence&gt;\r\n  &lt;/xsd:complexType&gt;\r\n  &lt;xsd:complexType name=&quot;WebServiceError&quot;&gt;\r\n    &lt;xsd:sequence&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;code&quot; nillable=&quot;true&quot; type=&quot;ns2:ErrorCode&quot;/&gt;\r\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;message&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\r\n    &lt;/xsd:sequence&gt;\r\n  &lt;/xsd:complexType&gt;\r\n  &lt;xsd:simpleType name=&quot;ErrorCode&quot;&gt;\r\n    &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;\r\n      &lt;xsd:enumeration value=&quot;MISSING_REQUIRED_FIELD&quot;/&gt;\r\n      &lt;xsd:enumeration value=&quot;DATABASE_ERROR&quot;/&gt;\r\n      &lt;xsd:enumeration value=&quot;SERVER_ERROR&quot;/&gt;\r\n      &lt;xsd:enumeration value=&quot;LOGIN_ERROR&quot;/&gt;\r\n    &lt;/xsd:restriction&gt;\r\n  &lt;/xsd:simpleType&gt;\r\n&lt;/xsd:schema&gt;\r\n```\r\n\r\nThe error I get:\r\n\r\n```\r\nUnable to unmarshal to WebServiceResponse.\r\njakarta.xml.bind.UnmarshalException: unexpected element (uri:&quot;http://rest.ws.services.company.com&quot;, local:&quot;webServiceResponse&quot;). Expected elements are &lt;{http://ws.services.company.com}someFunctionality&gt;,&lt;{http://ws.services.company.com}someFunctionality2&gt;,&lt;{http://ws.services.company.com}webServiceResponse&gt;\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:693) ~[task/:?]\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.Loader.reportError(Loader.java:230) ~[task/:?]\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.Loader.reportError(Loader.java:225) ~[task/:?]\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:92) ~[task/:?]\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(UnmarshallingContext.java:1102) ~[task/:?]\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:527) ~[task/:?]\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:509) ~[task/:?]\r\n\tat org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.SAXConnector.startElement(SAXConnector.java:137) ~[task/:?]\r\n.\r\n.\r\n.\r\n```\r\n\r\nCan anyone help regarding this issue?\r\n\r\nI think it cant associate the response namespace with ns2 which is associated with the uri start as `rest`. But I cant to do it on xsd files to associate with ns2 as it gives error all time.","link":"https://stackoverflow.com/questions/77469160/unmarshalling-error-when-i-try-to-unmarshall-the-webserviceresponse","title":"Unmarshalling Error when I try to unmarshall the WebServiceResponse","body":"<p>I have a response from a 3rd party API, that give me an error for unmarshalling the xml response is similar to that:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;ns2:webServiceResponse\n    xmlns=&quot;http://ws.services.company.com&quot;\n    xmlns:ns2=&quot;http://rest.ws.services.company.com&quot;&gt;\n    &lt;ns2:result&gt;\n        &lt;success&gt;true&lt;/success&gt;\n        &lt;id&gt;7054986&lt;/id&gt;\n    &lt;/ns2:result&gt;\n&lt;/ns2:webServiceResponse&gt;\n</code></pre>\n<p>Normally I was testing my Java code with a xml response like that and I get success:</p>\n<pre><code>&lt;webServiceResponse xmlns=&quot;http://ws.services.company.com&quot;&gt;\n  &lt;result&gt;\n    &lt;success&gt;true&lt;/success&gt;\n    &lt;id&gt;1&lt;/id&gt;\n  &lt;/result&gt;\n&lt;/webServiceResponse&gt;\n</code></pre>\n<p>In Java, I have been creating the respective XML Data class with the following xsd files.</p>\n<p><code>CompanyWS.xsd</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;xsd:schema elementFormDefault=&quot;qualified&quot; xmlns:jxb=&quot;https://jakarta.ee/xml/ns/jaxb&quot; jxb:version=&quot;3.0&quot; targetNamespace=&quot;http://ws.services.company.com&quot; xmlns=&quot;http://ws.services.company.com&quot; version=&quot;1.0&quot; xmlns:ns2=&quot;http://ws.services.company.com&quot; xmlns:ws=&quot;http://ws.services.company.com&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\n\n    &lt;xsd:include schemaLocation=&quot;CompanyWSTypes.xsd&quot;/&gt;\n\n    &lt;xsd:element name=&quot;someFunctionality&quot;&gt;\n        &lt;xsd:complexType&gt;\n            &lt;xsd:complexContent&gt;\n                &lt;xsd:extension base=&quot;ns2:WebServiceRequest&quot;&gt;\n                    &lt;xsd:sequence&gt;\n                        &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;someEvent&quot; type=&quot;ns2:InteractObject&quot;/&gt;\n                        &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;recipientData&quot; type=&quot;ns2:RecipientData&quot;/&gt;\n                    &lt;/xsd:sequence&gt;\n                &lt;/xsd:extension&gt;\n            &lt;/xsd:complexContent&gt;\n        &lt;/xsd:complexType&gt;\n    &lt;/xsd:element&gt;\n    &lt;xsd:element name=&quot;someFunctionality2&quot;&gt;\n        &lt;xsd:complexType&gt;\n            &lt;xsd:complexContent&gt;\n                &lt;xsd:extension base=&quot;ns2:WebServiceRequest&quot;&gt;\n                    &lt;xsd:sequence&gt;\n                        &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;customEvent&quot; type=&quot;ns2:CustomEvent&quot;/&gt;\n                        &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;recipientData&quot; type=&quot;ns2:RecipientData&quot;/&gt;\n                    &lt;/xsd:sequence&gt;\n                &lt;/xsd:extension&gt;\n            &lt;/xsd:complexContent&gt;\n        &lt;/xsd:complexType&gt;\n    &lt;/xsd:element&gt;\n    &lt;xsd:element name=&quot;webServiceResponse&quot;&gt;\n        &lt;xsd:complexType&gt;\n            &lt;xsd:sequence&gt;\n                &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;result&quot; nillable=&quot;true&quot; type=&quot;ns2:WebServiceResult&quot;/&gt;\n            &lt;/xsd:sequence&gt;\n        &lt;/xsd:complexType&gt;\n    &lt;/xsd:element&gt;\n\n\n&lt;/xsd:schema&gt;\n</code></pre>\n<p><code>CompanyWSTypes.xsd</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;xsd:schema elementFormDefault=&quot;qualified&quot; xmlns:jxb=&quot;https://jakarta.ee/xml/ns/jaxb&quot; jxb:version=&quot;3.0&quot; targetNamespace=&quot;http://ws.services.company.com&quot; version=&quot;1.0&quot; xmlns:ns2=&quot;http://ws.services.company.com&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\n\n  &lt;xsd:complexType name=&quot;InteractObject&quot;&gt;\n    &lt;xsd:sequence&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;folderName&quot; type=&quot;ns2:minLengthString&quot;/&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;objectName&quot; type=&quot;ns2:minLengthString&quot;/&gt;\n    &lt;/xsd:sequence&gt;\n  &lt;/xsd:complexType&gt;\n  &lt;xsd:complexType name=&quot;RecipientData&quot;&gt;\n    &lt;xsd:sequence&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;recipient&quot; type=&quot;ns2:Recipient&quot;/&gt;\n      &lt;xsd:element maxOccurs=&quot;unbounded&quot; minOccurs=&quot;0&quot; name=&quot;optionalData&quot; nillable=&quot;true&quot; type=&quot;ns2:OptionalData&quot;/&gt;\n    &lt;/xsd:sequence&gt;\n  &lt;/xsd:complexType&gt;\n  &lt;xsd:complexType name=&quot;Recipient&quot;&gt;\n    &lt;xsd:sequence&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;listName&quot; type=&quot;ns2:InteractObject&quot;/&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;recipientId&quot; nillable=&quot;true&quot; type=&quot;xsd:long&quot;/&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;customerId&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;mobileNumber&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;emailAddress&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;permissionStatus&quot; nillable=&quot;true&quot; type=&quot;ns2:PermissionStatus&quot;/&gt;\n    &lt;/xsd:sequence&gt;\n  &lt;/xsd:complexType&gt;\n  &lt;xsd:complexType name=&quot;OptionalData&quot;&gt;\n    &lt;xsd:sequence&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;name&quot; type=&quot;ns2:minLengthString&quot;/&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;1&quot; name=&quot;value&quot; type=&quot;ns2:minLengthString&quot;/&gt;\n    &lt;/xsd:sequence&gt;\n  &lt;/xsd:complexType&gt;\n\n  &lt;xsd:simpleType name=&quot;minLengthString&quot;&gt;\n    &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;\n      &lt;xsd:minLength value=&quot;1&quot;/&gt;\n    &lt;/xsd:restriction&gt;\n  &lt;/xsd:simpleType&gt;\n  &lt;xsd:simpleType name=&quot;CampaignType&quot;&gt;\n    &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;\n      &lt;xsd:enumeration value=&quot;TRANSACTIONAL&quot;/&gt;\n      &lt;xsd:enumeration value=&quot;PROMOTIONAL&quot;/&gt;\n    &lt;/xsd:restriction&gt;\n  &lt;/xsd:simpleType&gt;\n  &lt;xsd:simpleType name=&quot;PermissionStatus&quot;&gt;\n    &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;\n      &lt;xsd:enumeration value=&quot;OPTIN&quot;/&gt;\n      &lt;xsd:enumeration value=&quot;OPTOUT&quot;/&gt;\n      &lt;xsd:enumeration value=&quot;NOT_SPECIFIED&quot;/&gt;\n    &lt;/xsd:restriction&gt;\n  &lt;/xsd:simpleType&gt;\n  &lt;xsd:simpleType name=&quot;PriorityLevel&quot;&gt;\n    &lt;xsd:restriction base=&quot;xsd:int&quot;&gt;\n      &lt;xsd:enumeration value=&quot;1&quot;/&gt;\n      &lt;xsd:enumeration value=&quot;2&quot;/&gt;\n      &lt;xsd:enumeration value=&quot;3&quot;/&gt;\n    &lt;/xsd:restriction&gt;\n  &lt;/xsd:simpleType&gt;\n  &lt;xsd:complexType name=&quot;WebServiceRequest&quot;&gt;\n    &lt;xsd:sequence&gt;\n      &lt;xsd:element maxOccurs=&quot;unbounded&quot; minOccurs=&quot;0&quot; name=&quot;additionalData&quot; nillable=&quot;true&quot; type=&quot;xsd:anyType&quot;/&gt;\n    &lt;/xsd:sequence&gt;\n    &lt;xsd:attribute name=&quot;transactionId&quot; type=&quot;xsd:string&quot;/&gt;\n    &lt;xsd:attribute name=&quot;accountId&quot; type=&quot;xsd:string&quot;/&gt;\n    &lt;xsd:attribute name=&quot;brandId&quot; type=&quot;xsd:string&quot;/&gt;\n    &lt;xsd:attribute name=&quot;langLocale&quot; type=&quot;xsd:string&quot;/&gt;\n    &lt;xsd:attribute default=&quot;1&quot; name=&quot;priorityLevel&quot; type=&quot;ns2:PriorityLevel&quot;/&gt;\n    &lt;xsd:attribute default=&quot;TRANSACTIONAL&quot; name=&quot;campaignType&quot; type=&quot;ns2:CampaignType&quot;/&gt;\n  &lt;/xsd:complexType&gt;\n  &lt;xsd:complexType name=&quot;CustomEvent&quot;&gt;\n    &lt;xsd:sequence&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;eventName&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;eventId&quot; nillable=&quot;true&quot; type=&quot;xsd:long&quot;/&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;eventStringDataMapping&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;eventDateDataMapping&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;eventNumberDataMapping&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\n    &lt;/xsd:sequence&gt;\n  &lt;/xsd:complexType&gt;\n  &lt;xsd:complexType name=&quot;WebServiceResult&quot;&gt;\n    &lt;xsd:sequence&gt;\n      &lt;xsd:element name=&quot;success&quot; type=&quot;xsd:boolean&quot;/&gt;\n      &lt;xsd:element minOccurs=&quot;0&quot; name=&quot;id&quot; nillable=&quot;true&quot; type=&quot;xsd:long&quot;/&gt;\n      &lt;xsd:element minOccurs=&quot;0&quot; name=&quot;error&quot; nillable=&quot;true&quot; type=&quot;ns2:WebServiceError&quot;/&gt;\n    &lt;/xsd:sequence&gt;\n  &lt;/xsd:complexType&gt;\n  &lt;xsd:complexType name=&quot;WebServiceError&quot;&gt;\n    &lt;xsd:sequence&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;code&quot; nillable=&quot;true&quot; type=&quot;ns2:ErrorCode&quot;/&gt;\n      &lt;xsd:element maxOccurs=&quot;1&quot; minOccurs=&quot;0&quot; name=&quot;message&quot; nillable=&quot;true&quot; type=&quot;xsd:string&quot;/&gt;\n    &lt;/xsd:sequence&gt;\n  &lt;/xsd:complexType&gt;\n  &lt;xsd:simpleType name=&quot;ErrorCode&quot;&gt;\n    &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;\n      &lt;xsd:enumeration value=&quot;MISSING_REQUIRED_FIELD&quot;/&gt;\n      &lt;xsd:enumeration value=&quot;DATABASE_ERROR&quot;/&gt;\n      &lt;xsd:enumeration value=&quot;SERVER_ERROR&quot;/&gt;\n      &lt;xsd:enumeration value=&quot;LOGIN_ERROR&quot;/&gt;\n    &lt;/xsd:restriction&gt;\n  &lt;/xsd:simpleType&gt;\n&lt;/xsd:schema&gt;\n</code></pre>\n<p>The error I get:</p>\n<pre><code>Unable to unmarshal to WebServiceResponse.\njakarta.xml.bind.UnmarshalException: unexpected element (uri:&quot;http://rest.ws.services.company.com&quot;, local:&quot;webServiceResponse&quot;). Expected elements are &lt;{http://ws.services.company.com}someFunctionality&gt;,&lt;{http://ws.services.company.com}someFunctionality2&gt;,&lt;{http://ws.services.company.com}webServiceResponse&gt;\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:693) ~[task/:?]\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.Loader.reportError(Loader.java:230) ~[task/:?]\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.Loader.reportError(Loader.java:225) ~[task/:?]\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.Loader.reportUnexpectedChildElement(Loader.java:92) ~[task/:?]\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext$DefaultRootLoader.childElement(UnmarshallingContext.java:1102) ~[task/:?]\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext._startElement(UnmarshallingContext.java:527) ~[task/:?]\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.UnmarshallingContext.startElement(UnmarshallingContext.java:509) ~[task/:?]\n    at org.glassfish.jaxb.runtime.v2.runtime.unmarshaller.SAXConnector.startElement(SAXConnector.java:137) ~[task/:?]\n.\n.\n.\n</code></pre>\n<p>Can anyone help regarding this issue?</p>\n<p>I think it cant associate the response namespace with ns2 which is associated with the uri start as <code>rest</code>. But I cant to do it on xsd files to associate with ns2 as it gives error all time.</p>\n"},{"tags":["java","maven","google-cloud-functions","integration-testing"],"comments":[{"score":0,"post_type":"question","creation_date":1701299667,"post_id":77574969,"comment_id":136760100,"body_markdown":"Does your code know how to find mvn in your shell PATH, since you&#39;re not providing the full path to it to ProcessBuilder?  If not, the result isn&#39;t surprising at all.  See: https://stackoverflow.com/questions/40168112/path-is-different-when-i-run-bash-from-java-processbuilder","link":"https://stackoverflow.com/questions/77574969/adding-integration-tests-to-cloud-functions#comment136760100_77574969","body":"Does your code know how to find mvn in your shell PATH, since you&#39;re not providing the full path to it to ProcessBuilder?  If not, the result isn&#39;t surprising at all.  See: <a href=\"https://stackoverflow.com/questions/40168112/path-is-different-when-i-run-bash-from-java-processbuilder\" title=\"path is different when i run bash from java processbuilder\">stackoverflow.com/questions/40168112/&hellip;</a>"},{"score":0,"post_type":"question","creation_date":1701358597,"post_id":77574969,"comment_id":136768113,"body_markdown":"Hello @DougStevenson, and thanks for your interest in my question. When I pass the full path of the mvn command I end up with CreateProcess error=193, %1 is not a valid Win32 application. The path looks like &quot;C:\\\\Users\\\\carlos.palma\\\\apache-maven-3.8.8\\\\bin\\\\mvn&quot;","link":"https://stackoverflow.com/questions/77574969/adding-integration-tests-to-cloud-functions#comment136768113_77574969","body":"Hello @DougStevenson, and thanks for your interest in my question. When I pass the full path of the mvn command I end up with CreateProcess error=193, %1 is not a valid Win32 application. The path looks like &quot;C:\\\\Users\\\\carlos.palma\\\\apache-maven-3.8.8\\\\bin\\\\mvn&quot;"},{"score":1,"post_type":"question","creation_date":1701359233,"post_id":77574969,"comment_id":136768239,"body_markdown":"That&#39;s information you should probably add to your question to make it more clear what you tried and what doesn&#39;t work.","link":"https://stackoverflow.com/questions/77574969/adding-integration-tests-to-cloud-functions#comment136768239_77574969","body":"That&#39;s information you should probably add to your question to make it more clear what you tried and what doesn&#39;t work."}],"comment_count":3,"is_answered":false,"view_count":39,"answer_count":0,"score":0,"last_activity_date":1701466224,"creation_date":1701299302,"last_edit_date":1701466224,"question_id":77574969,"body_markdown":"I am trying to follow this documentation to add integration tests to a cloud function:\r\n\r\nhttps://cloud.google.com/functions/docs/samples/functions-storage-integration-test\r\n\r\nThe first step (setup) basically starts a process using java.lang.Process:\r\n```\r\n   @BeforeClass\r\n  public static void setUp() throws IOException {\r\n\r\n\r\n    // Get the sample&#39;s base directory (the one containing a pom.xml file)\r\n    String baseDir = System.getProperty(&quot;user.dir&quot;);\r\n\r\n    // Emulate the function locally by running the Functions Framework Maven plugin\r\n    emulatorProcess = new ProcessBuilder()\r\n        .command(&quot;mvn&quot;, &quot;function:run -Drun.functionTarget=function.MyFunction&quot;)\r\n        .directory(new File(&quot;C:/&quot;))\r\n        .start();\r\n  }\r\n```\r\n\r\nThis throws the error \r\n\r\n&gt; java.io.IOException: Cannot run program &quot;mvn&quot; (in directory &quot;C:\\&quot;): CreateProcess error=2, The system cannot find the file specified\r\n\r\nThe same happens if I instead of C:\\  I follow the example and use \r\n\r\n```\r\n  String baseDir = System.getProperty(&quot;user.dir&quot;);\r\n```\r\n\r\nThe funny thing is that if I just open a console and type\r\n```\r\nmvn function:run -Drun.functionTarget=function.MyFunction\r\n```\r\n\r\nWhen I pass the full path of the mvn command I end up with \r\n```\r\nCreateProcess error=193, %1 is not a valid Win32 application.\r\n```\r\n\r\n The path looks like &quot;C:\\\\Users\\\\carlos.palma\\\\apache-maven-3.8.8\\\\bin\\\\mvn&quot;\r\n\r\nI can execute the cloud function locally. Is there something I&#39;m missing related to the setup of this &quot;Functions Framework Maven plugin&quot; ?","link":"https://stackoverflow.com/questions/77574969/adding-integration-tests-to-cloud-functions","title":"Adding integration tests to cloud functions","body":"<p>I am trying to follow this documentation to add integration tests to a cloud function:</p>\n<p><a href=\"https://cloud.google.com/functions/docs/samples/functions-storage-integration-test\" rel=\"nofollow noreferrer\">https://cloud.google.com/functions/docs/samples/functions-storage-integration-test</a></p>\n<p>The first step (setup) basically starts a process using java.lang.Process:</p>\n<pre><code>   @BeforeClass\n  public static void setUp() throws IOException {\n\n\n    // Get the sample's base directory (the one containing a pom.xml file)\n    String baseDir = System.getProperty(&quot;user.dir&quot;);\n\n    // Emulate the function locally by running the Functions Framework Maven plugin\n    emulatorProcess = new ProcessBuilder()\n        .command(&quot;mvn&quot;, &quot;function:run -Drun.functionTarget=function.MyFunction&quot;)\n        .directory(new File(&quot;C:/&quot;))\n        .start();\n  }\n</code></pre>\n<p>This throws the error</p>\n<blockquote>\n<p>java.io.IOException: Cannot run program &quot;mvn&quot; (in directory &quot;C:&quot;): CreateProcess error=2, The system cannot find the file specified</p>\n</blockquote>\n<p>The same happens if I instead of C:\\  I follow the example and use</p>\n<pre><code>  String baseDir = System.getProperty(&quot;user.dir&quot;);\n</code></pre>\n<p>The funny thing is that if I just open a console and type</p>\n<pre><code>mvn function:run -Drun.functionTarget=function.MyFunction\n</code></pre>\n<p>When I pass the full path of the mvn command I end up with</p>\n<pre><code>CreateProcess error=193, %1 is not a valid Win32 application.\n</code></pre>\n<p>The path looks like &quot;C:\\Users\\carlos.palma\\apache-maven-3.8.8\\bin\\mvn&quot;</p>\n<p>I can execute the cloud function locally. Is there something I'm missing related to the setup of this &quot;Functions Framework Maven plugin&quot; ?</p>\n"},{"tags":["java","eclipse"],"comments":[{"score":1,"post_type":"question","creation_date":1683354655,"post_id":76187442,"comment_id":134357256,"body_markdown":"Eclipse 2023-03 supports up to Java 19. There is a patch to support Java 20. I don&#39;t think the code for Java 21 is available yet. Look at the https://download.eclipse.org/eclipse/updates/4.27-P-builds/ update site for the patch","link":"https://stackoverflow.com/questions/76187442/how-to-configure-and-use-an-early-access-jdk-in-eclipse#comment134357256_76187442","body":"Eclipse 2023-03 supports up to Java 19. There is a patch to support Java 20. I don&#39;t think the code for Java 21 is available yet. Look at the <a href=\"https://download.eclipse.org/eclipse/updates/4.27-P-builds/\" rel=\"nofollow noreferrer\">download.eclipse.org/eclipse/updates/4.27-P-builds</a> update site for the patch"},{"score":2,"post_type":"question","creation_date":1683363406,"post_id":76187442,"comment_id":134358060,"body_markdown":"[Java 21 will be released in September](https://openjdk.org/projects/jdk/21/). Most JEPs targeting Java 21 are proposed but not yet confirmed. All new Java 21 language features that will no longer preview features in Java 21 (JEP 440 and JEP 441), are included in Java 20 as preview features.","link":"https://stackoverflow.com/questions/76187442/how-to-configure-and-use-an-early-access-jdk-in-eclipse#comment134358060_76187442","body":"<a href=\"https://openjdk.org/projects/jdk/21/\" rel=\"nofollow noreferrer\">Java 21 will be released in September</a>. Most JEPs targeting Java 21 are proposed but not yet confirmed. All new Java 21 language features that will no longer preview features in Java 21 (JEP 440 and JEP 441), are included in Java 20 as preview features."}],"answers":[{"comment_count":0,"score":3,"last_activity_date":1698292184,"last_edit_date":1698292184,"creation_date":1691653206,"answer_id":76873560,"question_id":76187442,"body_markdown":"If it&#39;s the same as previous releases, I would expect Java 21 BETA to appear on the Eclipse marketplace in September 2023.\r\n\r\nJava 20 Support for Eclipse 2023-03 (4.27)&lt;br&gt;\r\nhttps://marketplace.eclipse.org/content/java-20-support-eclipse-2023-03-427\r\n\r\nJava 21 Support for Eclipse 2023-09 (4.29) &lt;del&gt;Unreleased&lt;/del&gt;&lt;br&gt;\r\nhttps://marketplace.eclipse.org/content/java-21-support-eclipse-2023-09-429\r\n\r\nJava 21 implementation progress&lt;br&gt;\r\nhttps://github.com/eclipse-jdt/eclipse.jdt.core/issues?q=milestone%3ABETA_JAVA21","link":"https://stackoverflow.com/questions/76187442/how-to-configure-and-use-an-early-access-jdk-in-eclipse/76873560#76873560","title":"How to configure and use an early-access JDK in Eclipse?","body":"<p>If it's the same as previous releases, I would expect Java 21 BETA to appear on the Eclipse marketplace in September 2023.</p>\n<p>Java 20 Support for Eclipse 2023-03 (4.27)<br>\n<a href=\"https://marketplace.eclipse.org/content/java-20-support-eclipse-2023-03-427\" rel=\"nofollow noreferrer\">https://marketplace.eclipse.org/content/java-20-support-eclipse-2023-03-427</a></p>\n<p>Java 21 Support for Eclipse 2023-09 (4.29) <del>Unreleased</del><br>\n<a href=\"https://marketplace.eclipse.org/content/java-21-support-eclipse-2023-09-429\" rel=\"nofollow noreferrer\">https://marketplace.eclipse.org/content/java-21-support-eclipse-2023-09-429</a></p>\n<p>Java 21 implementation progress<br>\n<a href=\"https://github.com/eclipse-jdt/eclipse.jdt.core/issues?q=milestone%3ABETA_JAVA21\" rel=\"nofollow noreferrer\">https://github.com/eclipse-jdt/eclipse.jdt.core/issues?q=milestone%3ABETA_JAVA21</a></p>\n"},{"comment_count":0,"score":0,"last_activity_date":1698294075,"creation_date":1698294075,"answer_id":77364100,"question_id":76187442,"body_markdown":"I&#39;m using JDK-21 in Eclipse. By default Eclipse doesn&#39;t have JDK-21 yet still you can configure externally JDK21 in following ways:\r\n\r\nStep(1): Download and install JDK-21 in any drive. I use Adopt JDK-21, [https://adoptium.net/temurin/archive/][1] \r\n\r\nStep(2): Download Eclipse 2023-09 which is already available. [https://www.eclipse.org/downloads/packages/][2]  \r\n\r\nStep(3): Open your Java project in Eclipse and configure for new JDK-21\r\n\r\nStep(3.1): Right click on project &gt; Properties &gt; Java Build Path &gt; Libraries (tab) &gt;  Select Existing JRE and click on Edit button &gt; Click on Installed JRE button &gt; Add &gt; Standard VM &gt; Next &gt; Directory &gt; locate home folder on JDK-21 (e.g. jdk-21+35) &gt; Finish &gt; Select JDK-21 from the list and Apply.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\nYou are ready to use JDK-21 in Eclipse now. Enjoy!\r\n\r\n\r\n  [1]: https://adoptium.net/temurin/archive/\r\n  [2]: https://www.eclipse.org/downloads/packages/\r\n  [3]: https://i.stack.imgur.com/bGUjx.png","link":"https://stackoverflow.com/questions/76187442/how-to-configure-and-use-an-early-access-jdk-in-eclipse/77364100#77364100","title":"How to configure and use an early-access JDK in Eclipse?","body":"<p>I'm using JDK-21 in Eclipse. By default Eclipse doesn't have JDK-21 yet still you can configure externally JDK21 in following ways:</p>\n<p>Step(1): Download and install JDK-21 in any drive. I use Adopt JDK-21, <a href=\"https://adoptium.net/temurin/archive/\" rel=\"nofollow noreferrer\">https://adoptium.net/temurin/archive/</a></p>\n<p>Step(2): Download Eclipse 2023-09 which is already available. <a href=\"https://www.eclipse.org/downloads/packages/\" rel=\"nofollow noreferrer\">https://www.eclipse.org/downloads/packages/</a></p>\n<p>Step(3): Open your Java project in Eclipse and configure for new JDK-21</p>\n<p>Step(3.1): Right click on project &gt; Properties &gt; Java Build Path &gt; Libraries (tab) &gt;  Select Existing JRE and click on Edit button &gt; Click on Installed JRE button &gt; Add &gt; Standard VM &gt; Next &gt; Directory &gt; locate home folder on JDK-21 (e.g. jdk-21+35) &gt; Finish &gt; Select JDK-21 from the list and Apply.</p>\n<p><a href=\"https://i.stack.imgur.com/bGUjx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bGUjx.png\" alt=\"enter image description here\" /></a></p>\n<p>You are ready to use JDK-21 in Eclipse now. Enjoy!</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701463023,"creation_date":1701463023,"answer_id":77587963,"question_id":76187442,"body_markdown":"Note: [Eclipse 4.30 RC2 (2023-12)](https://eclipse.dev/eclipse/news/4.30/jdt.php) does include:\r\n\r\n&gt; ## Java Language Features\r\n&gt;\r\n&gt; The release notably includes the following Java features:\r\n&gt;\r\n&gt; - [JEP 440: Record Patterns](https://openjdk.java.net/jeps/440).\r\n&gt; - [JEP 441: Pattern Matching for Switch](https://openjdk.java.net/jeps/441).\r\n","link":"https://stackoverflow.com/questions/76187442/how-to-configure-and-use-an-early-access-jdk-in-eclipse/77587963#77587963","title":"How to configure and use an early-access JDK in Eclipse?","body":"<p>Note: <a href=\"https://eclipse.dev/eclipse/news/4.30/jdt.php\" rel=\"nofollow noreferrer\">Eclipse 4.30 RC2 (2023-12)</a> does include:</p>\n<blockquote>\n<h2>Java Language Features</h2>\n<p>The release notably includes the following Java features:</p>\n<ul>\n<li><a href=\"https://openjdk.java.net/jeps/440\" rel=\"nofollow noreferrer\">JEP 440: Record Patterns</a>.</li>\n<li><a href=\"https://openjdk.java.net/jeps/441\" rel=\"nofollow noreferrer\">JEP 441: Pattern Matching for Switch</a>.</li>\n</ul>\n</blockquote>\n"}],"comment_count":2,"is_answered":true,"view_count":1291,"answer_count":3,"score":4,"last_activity_date":1701463023,"creation_date":1683354011,"last_edit_date":1698294379,"question_id":76187442,"body_markdown":"I want to try JDK21 Early Access release but I don&#39;t see a compliance level of 21 or even 20 which is GA already.\r\n\r\nIn the latest official Eclipse distro highest level is 17.\r\nIn the latest Spring IDE the highest level is 18\r\n\r\nHow do I go about trying new features of JDK21 Early Access release from an IDE? \r\n\r\nPS: I am going to need the new language features, so its not simply old java code running on a new VM. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vVpea.png","link":"https://stackoverflow.com/questions/76187442/how-to-configure-and-use-an-early-access-jdk-in-eclipse","title":"How to configure and use an early-access JDK in Eclipse?","body":"<p>I want to try JDK21 Early Access release but I don't see a compliance level of 21 or even 20 which is GA already.</p>\n<p>In the latest official Eclipse distro highest level is 17.\nIn the latest Spring IDE the highest level is 18</p>\n<p>How do I go about trying new features of JDK21 Early Access release from an IDE?</p>\n<p>PS: I am going to need the new language features, so its not simply old java code running on a new VM.</p>\n<p><a href=\"https://i.stack.imgur.com/vVpea.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vVpea.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","linux","jvm","hotspot"],"answers":[{"comments":[{"score":3,"post_type":"answer","creation_date":1700222339,"post_id":77501115,"comment_id":136630766,"body_markdown":"That doesn’t answer the question, which was, is the JVM always capable of detecting whether an external `SIGSEGV` is an external `SIGSEGV` or is it possible to confuse an external `SIGSEGV` for a `null` access when it happens at a specific time, i.e. when a potential `null` access is expected.","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77501115#comment136630766_77501115","body":"That doesn’t answer the question, which was, is the JVM always capable of detecting whether an external <code>SIGSEGV</code> is an external <code>SIGSEGV</code> or is it possible to confuse an external <code>SIGSEGV</code> for a <code>null</code> access when it happens at a specific time, i.e. when a potential <code>null</code> access is expected."},{"score":0,"post_type":"answer","creation_date":1700225737,"post_id":77501115,"comment_id":136631339,"body_markdown":"@Holger I have edited the answer to address your comment.","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77501115#comment136631339_77501115","body":"@Holger I have edited the answer to address your comment."},{"score":0,"post_type":"answer","creation_date":1700225765,"post_id":77501115,"comment_id":136631346,"body_markdown":"@Holger  can JVM  always detect that correctly? Because the external signal can happen at any time, including the moment at which JVM thought itself to be in Nullpointer status","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77501115#comment136631346_77501115","body":"@Holger  can JVM  always detect that correctly? Because the external signal can happen at any time, including the moment at which JVM thought itself to be in Nullpointer status"},{"score":0,"post_type":"answer","creation_date":1700225890,"post_id":77501115,"comment_id":136631381,"body_markdown":"@choxsword Yes, but it happens through different execution paths (each with their own execution stack). The JVM should be able to differentiate from *where* the SIGSEV is coming from.","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77501115#comment136631381_77501115","body":"@choxsword Yes, but it happens through different execution paths (each with their own execution stack). The JVM should be able to differentiate from <i>where</i> the SIGSEV is coming from."},{"score":1,"post_type":"answer","creation_date":1700225989,"post_id":77501115,"comment_id":136631400,"body_markdown":"@choxsword I know, that’s the question and if I knew the answer for sure, I would post an answer.  I suppose, the operating system must be able to tell the JVM which thread triggered the signal and since external signals lack an associated thread, they must be distinguishable.","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77501115#comment136631400_77501115","body":"@choxsword I know, that’s the question and if I knew the answer for sure, I would post an answer.  I suppose, the operating system must be able to tell the JVM which thread triggered the signal and since external signals lack an associated thread, they must be distinguishable."},{"score":0,"post_type":"answer","creation_date":1700226074,"post_id":77501115,"comment_id":136631420,"body_markdown":"@VonC but it seems that linux does not tell user where the signal is come from.","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77501115#comment136631420_77501115","body":"@VonC but it seems that linux does not tell user where the signal is come from."},{"score":0,"post_type":"answer","creation_date":1700226171,"post_id":77501115,"comment_id":136631445,"body_markdown":"@choxsword The internal execution stack should still be able to illustrate whether the SIGSEV is trapped from a NPE, or from an external signal.","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77501115#comment136631445_77501115","body":"@choxsword The internal execution stack should still be able to illustrate whether the SIGSEV is trapped from a NPE, or from an external signal."},{"score":0,"post_type":"answer","creation_date":1700228171,"post_id":77501115,"comment_id":136631810,"body_markdown":"what if the stack happens to locate at accessing an address when the SIGSEGV is triggered externally?","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77501115#comment136631810_77501115","body":"what if the stack happens to locate at accessing an address when the SIGSEGV is triggered externally?"},{"score":0,"post_type":"answer","creation_date":1700233964,"post_id":77501115,"comment_id":136632907,"body_markdown":"@choxsword I have edited the answer to include the actual code from the Hotspot which handles signals for Linux. I really don&#39;t think such a scenario is likely.","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77501115#comment136632907_77501115","body":"@choxsword I have edited the answer to include the actual code from the Hotspot which handles signals for Linux. I really don&#39;t think such a scenario is likely."}],"comment_count":9,"score":3,"last_activity_date":1700233923,"last_edit_date":1700233923,"creation_date":1700218542,"answer_id":77501115,"question_id":77485058,"body_markdown":"&gt; Will sending `kill -11` to java process raises a NullPointerException?\r\n\r\nIt should not: a `NullPointerException` is a specific exception that occurs when an application tries to use an object reference that has the null value.\r\n\r\nYet, from [JavaSE 17 / Troubleshooting guide / Handle Signals and Exceptions](https://docs.oracle.com/en/java/javase/17/troubleshoot/handle-signals-and-exceptions.html#GUID-CBA7BA16-F89F-4BE2-B653-139BABA997D4)\r\n\r\n&gt; The Java HotSpot VM installs signal handlers to implement various features and to handle fatal error conditions.\r\n&gt; \r\n&gt; For example, in an optimization to avoid explicit null checks in cases where `java.lang.NullPointerException` will be thrown rarely, the `SIGSEGV` signal is caught and handled, and the `NullPointerException` is thrown.\r\n&gt; \r\n&gt; In general, there are two categories where signal/traps happen:\r\n&gt; \r\n&gt; * When signals are expected and handled, like implicit null-handling. Another example is the safepoint polling mechanism, which protects a page in memory when a safepoint is required. Any thread that accesses that page causes a `SIGSEGV`, which results in the execution of a stub that brings the thread to a safepoint.\r\n&gt; \r\n&gt; * Unexpected signals. That includes a `SIGSEGV` when executing in VM code, Java Native Interface (JNI) code, or native code. In these cases, the signal is unexpected, so fatal error handling is invoked to create the error log and terminate the process.\r\n\r\nThat approach allows the JVM to optimize performance by reducing the overhead of explicit null checks in the code, relying instead on the operating system&#39;s memory protection mechanisms to detect access to null references. When such access occurs, the operating system generates a `SIGSEGV` signal, which the JVM then interprets as an attempt to dereference a null pointer, leading to the throwing of a `NullPointerException`.\r\n\r\nHowever, it is important to note that this is an *internal* mechanism of the JVM and is distinct from externally generated `SIGSEGV` signals, such as those sent using the `kill` command. External `SIGSEGV` signals are generally used to indicate serious errors, including invalid memory access, and are more likely to result in a JVM crash or core dump rather than a `NullPointerException`.\r\n\r\n```bash\r\n+---------------------+         +-----------------------------------+\r\n| External Process    |         | Java Process running on HotSpot   |\r\n| sending SIGSEGV     | ------&gt; | JVM                               |\r\n| (kill -11)          |         | Likely JVM Crash or Core Dump     |\r\n+---------------------+         +-----------------------------------+\r\n```\r\n\r\n----\r\n\r\n&gt; Is the JVM always capable of detecting whether an external `SIGSEGV` is an external `SIGSEGV` or is it possible to confuse an external `SIGSEGV` for a null access when it happens at a specific time, i.e. when a potential null access is expected?\r\n\r\nAgain, it should not, but this is an *implementation*-specific aspect of JVM behavior.  \r\nThat means the likelihood of such confusion happening in practice may vary depending on the JVM version, the specific code being executed, and the state of the JVM at the time of the signal. \r\n\r\nSee for instance &quot;[How does the JVM know when to throw a NullPointerException](https://stackoverflow.com/a/36955888/6309)&quot;\r\n\r\n&gt; The JVM could implement the null check using virtual memory hardware. The JVM arranges that page zero in its virtual address space is mapped to a page that is unreadable + unwriteable. \r\n&gt;\r\n&gt; Since null is represented as zero, when Java code tries to dereference null this will try to access a non-addressible page and will lead to the OS delivering a &quot;segfault&quot; signal to the JVM. \r\n&gt;\r\n&gt; The JVM&#39;s segfault signal handler could trap this, figure out where the code was executing, and create and throw an NPE on the stack of the appropriate thread.\r\n\r\nIn that scenario, it should be easy to distinguish a trapped signal from within the code execution, from a received signal from the OS.\r\n\r\nAlso: &quot;[Can a `SIGSEGV` in Java not crash the JVM?](https://stackoverflow.com/a/43346525/6309)&quot;\r\n\r\n&gt; There are definitely scenarios where the JVM&#39;s `SIGSEGV` signal handler may turn the `SIGSEGV` event into a Java exception.  \r\nYou will only get a JVM hard crash if that cannot happen; e.g. if the thread that triggered the `SIGSEGV` was executing code in a native library when the event happened.\r\n\r\n[For instance](https://stackoverflow.com/questions/44501096/avoid-nullpointerexception-on-jni-vm-startup#comment76037746_44501096): \r\n\r\n&gt; [HotSpot JVM deliberately generates SIGSEGV at startup](https://hg.openjdk.org/jdk8u/jdk8u/hotspot/file/68758c5ab0c1/src/cpu/x86/vm/vm_version_x86.cpp#l259) to check certain CPU features. There is no switch to turn it off. I suggest skipping `SIGSEGV` in `gdb` altogether, because JVM uses it for its own purpose in many cases. \r\n\r\n----\r\n\r\n&gt; What if the stack happens to locate at accessing an address when the `SIGSEGV` is triggered externally?\r\n\r\nThe hotspot had a major refactoring around signal handling in [JDK-8255711](https://bugs.openjdk.org/browse/JDK-8255711), resulting in [commit dd8e4ff](https://github.com/openjdk/jdk/commit/dd8e4ffbe559568222fc21c09d162a867df2e805).\r\n\r\nThe current code is [`os_linux_x86.cpp#PosixSignals::pd_hotspot_signal_handler`](https://github.com/openjdk/jdk/blob/9902d2eb177072c108933056cba544cc5a34bb54/src/hotspot/os_cpu/linux_x86/os_linux_x86.cpp#L207-L421)\r\n\r\n```cpp\r\n  // decide if this trap can be handled by a stub\r\n  address stub = nullptr;\r\n\r\n  address pc          = nullptr;\r\n\r\n  //%note os_trap_1\r\n  if (info != nullptr &amp;&amp; uc != nullptr &amp;&amp; thread != nullptr) {\r\n    pc = (address) os::Posix::ucontext_get_pc(uc);\r\n\r\n    if (sig == SIGSEGV &amp;&amp; info-&gt;si_addr == 0 &amp;&amp; info-&gt;si_code == SI_KERNEL) {\r\n      // An irrecoverable SI_KERNEL SIGSEGV has occurred.\r\n      // It&#39;s likely caused by dereferencing an address larger than TASK_SIZE.\r\n      return false;\r\n    }\r\n\r\n    // Handle ALL stack overflow variations here\r\n    if (sig == SIGSEGV) {\r\n      address addr = (address) info-&gt;si_addr;\r\n\r\n      // check if fault address is within thread stack\r\n      if (thread-&gt;is_in_full_stack(addr)) {\r\n        // stack overflow\r\n        if (os::Posix::handle_stack_overflow(thread, addr, pc, uc, &amp;stub)) {\r\n          return true; // continue\r\n        }\r\n      }\r\n    }\r\n\r\n    if ((sig == SIGSEGV) &amp;&amp; VM_Version::is_cpuinfo_segv_addr(pc)) {\r\n      // Verify that OS save/restore AVX registers.\r\n      stub = VM_Version::cpuinfo_cont_addr();\r\n    }\r\n\r\n    if (thread-&gt;thread_state() == _thread_in_Java) {\r\n      // Java thread running in Java code =&gt; find exception handler if any\r\n      // a fault inside compiled code, the interpreter, or a stub\r\n\r\n      if (sig == SIGSEGV &amp;&amp; SafepointMechanism::is_poll_address((address)info-&gt;si_addr)) {\r\n        stub = SharedRuntime::get_poll_stub(pc);\r\n      } else if (sig == SIGBUS /* &amp;&amp; info-&gt;si_code == BUS_OBJERR */) {\r\n        // BugId 4454115: A read from a MappedByteBuffer can fault\r\n        // here if the underlying file has been truncated.\r\n        // Do not crash the VM in such a case.\r\n        CodeBlob* cb = CodeCache::find_blob(pc);\r\n        CompiledMethod* nm = (cb != nullptr) ? cb-&gt;as_compiled_method_or_null() : nullptr;\r\n        bool is_unsafe_arraycopy = thread-&gt;doing_unsafe_access() &amp;&amp; UnsafeCopyMemory::contains_pc(pc);\r\n        if ((nm != nullptr &amp;&amp; nm-&gt;has_unsafe_access()) || is_unsafe_arraycopy) {\r\n          address next_pc = Assembler::locate_next_instruction(pc);\r\n          if (is_unsafe_arraycopy) {\r\n            next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\r\n          }\r\n          stub = SharedRuntime::handle_unsafe_access(thread, next_pc);\r\n        }\r\n      }\r\n      else\r\n\r\n#ifdef AMD64\r\n      if (sig == SIGFPE  &amp;&amp;\r\n          (info-&gt;si_code == FPE_INTDIV || info-&gt;si_code == FPE_FLTDIV)) {\r\n        stub =\r\n          SharedRuntime::\r\n          continuation_for_implicit_exception(thread,\r\n                                              pc,\r\n                                              SharedRuntime::\r\n                                              IMPLICIT_DIVIDE_BY_ZERO);\r\n#else\r\n      if (sig == SIGFPE /* &amp;&amp; info-&gt;si_code == FPE_INTDIV */) {\r\n        // HACK: si_code does not work on linux 2.2.12-20!!!\r\n        int op = pc[0];\r\n        if (op == 0xDB) {\r\n          // FIST\r\n          // TODO: The encoding of D2I in x86_32.ad can cause an exception\r\n          // prior to the fist instruction if there was an invalid operation\r\n          // pending. We want to dismiss that exception. From the win_32\r\n          // side it also seems that if it really was the fist causing\r\n          // the exception that we do the d2i by hand with different\r\n          // rounding. Seems kind of weird.\r\n          // NOTE: that we take the exception at the NEXT floating point instruction.\r\n          assert(pc[0] == 0xDB, &quot;not a FIST opcode&quot;);\r\n          assert(pc[1] == 0x14, &quot;not a FIST opcode&quot;);\r\n          assert(pc[2] == 0x24, &quot;not a FIST opcode&quot;);\r\n          return true;\r\n        } else if (op == 0xF7) {\r\n          // IDIV\r\n          stub = SharedRuntime::continuation_for_implicit_exception(thread, pc, SharedRuntime::IMPLICIT_DIVIDE_BY_ZERO);\r\n        } else {\r\n          // TODO: handle more cases if we are using other x86 instructions\r\n          //   that can generate SIGFPE signal on linux.\r\n          tty-&gt;print_cr(&quot;unknown opcode 0x%X with SIGFPE.&quot;, op);\r\n          fatal(&quot;please update this code.&quot;);\r\n        }\r\n#endif // AMD64\r\n      } else if (sig == SIGSEGV &amp;&amp;\r\n                 MacroAssembler::uses_implicit_null_check(info-&gt;si_addr)) {\r\n          // Determination of interpreter/vtable stub/compiled code null exception\r\n          stub = SharedRuntime::continuation_for_implicit_exception(thread, pc, SharedRuntime::IMPLICIT_NULL);\r\n      }\r\n    } else if ((thread-&gt;thread_state() == _thread_in_vm ||\r\n                thread-&gt;thread_state() == _thread_in_native) &amp;&amp;\r\n               (sig == SIGBUS &amp;&amp; /* info-&gt;si_code == BUS_OBJERR &amp;&amp; */\r\n               thread-&gt;doing_unsafe_access())) {\r\n        address next_pc = Assembler::locate_next_instruction(pc);\r\n        if (UnsafeCopyMemory::contains_pc(pc)) {\r\n          next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\r\n        }\r\n        stub = SharedRuntime::handle_unsafe_access(thread, next_pc);\r\n    }\r\n\r\n    // jni_fast_Get&lt;Primitive&gt;Field can trap at certain pc&#39;s if a GC kicks in\r\n    // and the heap gets shrunk before the field access.\r\n    if ((sig == SIGSEGV) || (sig == SIGBUS)) {\r\n      address addr = JNI_FastGetField::find_slowcase_pc(pc);\r\n      if (addr != (address)-1) {\r\n        stub = addr;\r\n      }\r\n    }\r\n  }\r\n```\r\n\r\nThe JVM uses various checks to determine the context of a `SIGSEGV` signal. However, I do not see a straightforward mechanism to distinguish an externally sent `SIGSEGV` from one internally generated due to a null reference access.\r\n\r\nThe signal handler examines the execution context, including the program counter and the stack, to infer the cause of the `SIGSEGV`. In case of a null reference, it looks for specific patterns that suggest a null pointer exception. But if an external `SIGSEGV` happens to coincide precisely with a situation where the JVM&#39;s execution state resembles that of a null pointer access, distinguishing between the two can be challenging.\r\n\r\nHowever, such a scenario is relatively unlikely due to the level of precision required in timing.","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77501115#77501115","title":"Will sending `kill -11` to java process raises a NullPointerException?","body":"<blockquote>\n<p>Will sending <code>kill -11</code> to java process raises a NullPointerException?</p>\n</blockquote>\n<p>It should not: a <code>NullPointerException</code> is a specific exception that occurs when an application tries to use an object reference that has the null value.</p>\n<p>Yet, from <a href=\"https://docs.oracle.com/en/java/javase/17/troubleshoot/handle-signals-and-exceptions.html#GUID-CBA7BA16-F89F-4BE2-B653-139BABA997D4\" rel=\"nofollow noreferrer\">JavaSE 17 / Troubleshooting guide / Handle Signals and Exceptions</a></p>\n<blockquote>\n<p>The Java HotSpot VM installs signal handlers to implement various features and to handle fatal error conditions.</p>\n<p>For example, in an optimization to avoid explicit null checks in cases where <code>java.lang.NullPointerException</code> will be thrown rarely, the <code>SIGSEGV</code> signal is caught and handled, and the <code>NullPointerException</code> is thrown.</p>\n<p>In general, there are two categories where signal/traps happen:</p>\n<ul>\n<li><p>When signals are expected and handled, like implicit null-handling. Another example is the safepoint polling mechanism, which protects a page in memory when a safepoint is required. Any thread that accesses that page causes a <code>SIGSEGV</code>, which results in the execution of a stub that brings the thread to a safepoint.</p>\n</li>\n<li><p>Unexpected signals. That includes a <code>SIGSEGV</code> when executing in VM code, Java Native Interface (JNI) code, or native code. In these cases, the signal is unexpected, so fatal error handling is invoked to create the error log and terminate the process.</p>\n</li>\n</ul>\n</blockquote>\n<p>That approach allows the JVM to optimize performance by reducing the overhead of explicit null checks in the code, relying instead on the operating system's memory protection mechanisms to detect access to null references. When such access occurs, the operating system generates a <code>SIGSEGV</code> signal, which the JVM then interprets as an attempt to dereference a null pointer, leading to the throwing of a <code>NullPointerException</code>.</p>\n<p>However, it is important to note that this is an <em>internal</em> mechanism of the JVM and is distinct from externally generated <code>SIGSEGV</code> signals, such as those sent using the <code>kill</code> command. External <code>SIGSEGV</code> signals are generally used to indicate serious errors, including invalid memory access, and are more likely to result in a JVM crash or core dump rather than a <code>NullPointerException</code>.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>+---------------------+         +-----------------------------------+\n| External Process    |         | Java Process running on HotSpot   |\n| sending SIGSEGV     | ------&gt; | JVM                               |\n| (kill -11)          |         | Likely JVM Crash or Core Dump     |\n+---------------------+         +-----------------------------------+\n</code></pre>\n<hr />\n<blockquote>\n<p>Is the JVM always capable of detecting whether an external <code>SIGSEGV</code> is an external <code>SIGSEGV</code> or is it possible to confuse an external <code>SIGSEGV</code> for a null access when it happens at a specific time, i.e. when a potential null access is expected?</p>\n</blockquote>\n<p>Again, it should not, but this is an <em>implementation</em>-specific aspect of JVM behavior.<br />\nThat means the likelihood of such confusion happening in practice may vary depending on the JVM version, the specific code being executed, and the state of the JVM at the time of the signal.</p>\n<p>See for instance &quot;<a href=\"https://stackoverflow.com/a/36955888/6309\">How does the JVM know when to throw a NullPointerException</a>&quot;</p>\n<blockquote>\n<p>The JVM could implement the null check using virtual memory hardware. The JVM arranges that page zero in its virtual address space is mapped to a page that is unreadable + unwriteable.</p>\n<p>Since null is represented as zero, when Java code tries to dereference null this will try to access a non-addressible page and will lead to the OS delivering a &quot;segfault&quot; signal to the JVM.</p>\n<p>The JVM's segfault signal handler could trap this, figure out where the code was executing, and create and throw an NPE on the stack of the appropriate thread.</p>\n</blockquote>\n<p>In that scenario, it should be easy to distinguish a trapped signal from within the code execution, from a received signal from the OS.</p>\n<p>Also: &quot;<a href=\"https://stackoverflow.com/a/43346525/6309\">Can a <code>SIGSEGV</code> in Java not crash the JVM?</a>&quot;</p>\n<blockquote>\n<p>There are definitely scenarios where the JVM's <code>SIGSEGV</code> signal handler may turn the <code>SIGSEGV</code> event into a Java exception.<br />\nYou will only get a JVM hard crash if that cannot happen; e.g. if the thread that triggered the <code>SIGSEGV</code> was executing code in a native library when the event happened.</p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/questions/44501096/avoid-nullpointerexception-on-jni-vm-startup#comment76037746_44501096\">For instance</a>:</p>\n<blockquote>\n<p><a href=\"https://hg.openjdk.org/jdk8u/jdk8u/hotspot/file/68758c5ab0c1/src/cpu/x86/vm/vm_version_x86.cpp#l259\" rel=\"nofollow noreferrer\">HotSpot JVM deliberately generates SIGSEGV at startup</a> to check certain CPU features. There is no switch to turn it off. I suggest skipping <code>SIGSEGV</code> in <code>gdb</code> altogether, because JVM uses it for its own purpose in many cases.</p>\n</blockquote>\n<hr />\n<blockquote>\n<p>What if the stack happens to locate at accessing an address when the <code>SIGSEGV</code> is triggered externally?</p>\n</blockquote>\n<p>The hotspot had a major refactoring around signal handling in <a href=\"https://bugs.openjdk.org/browse/JDK-8255711\" rel=\"nofollow noreferrer\">JDK-8255711</a>, resulting in <a href=\"https://github.com/openjdk/jdk/commit/dd8e4ffbe559568222fc21c09d162a867df2e805\" rel=\"nofollow noreferrer\">commit dd8e4ff</a>.</p>\n<p>The current code is <a href=\"https://github.com/openjdk/jdk/blob/9902d2eb177072c108933056cba544cc5a34bb54/src/hotspot/os_cpu/linux_x86/os_linux_x86.cpp#L207-L421\" rel=\"nofollow noreferrer\"><code>os_linux_x86.cpp#PosixSignals::pd_hotspot_signal_handler</code></a></p>\n<pre class=\"lang-cpp prettyprint-override\"><code>  // decide if this trap can be handled by a stub\n  address stub = nullptr;\n\n  address pc          = nullptr;\n\n  //%note os_trap_1\n  if (info != nullptr &amp;&amp; uc != nullptr &amp;&amp; thread != nullptr) {\n    pc = (address) os::Posix::ucontext_get_pc(uc);\n\n    if (sig == SIGSEGV &amp;&amp; info-&gt;si_addr == 0 &amp;&amp; info-&gt;si_code == SI_KERNEL) {\n      // An irrecoverable SI_KERNEL SIGSEGV has occurred.\n      // It's likely caused by dereferencing an address larger than TASK_SIZE.\n      return false;\n    }\n\n    // Handle ALL stack overflow variations here\n    if (sig == SIGSEGV) {\n      address addr = (address) info-&gt;si_addr;\n\n      // check if fault address is within thread stack\n      if (thread-&gt;is_in_full_stack(addr)) {\n        // stack overflow\n        if (os::Posix::handle_stack_overflow(thread, addr, pc, uc, &amp;stub)) {\n          return true; // continue\n        }\n      }\n    }\n\n    if ((sig == SIGSEGV) &amp;&amp; VM_Version::is_cpuinfo_segv_addr(pc)) {\n      // Verify that OS save/restore AVX registers.\n      stub = VM_Version::cpuinfo_cont_addr();\n    }\n\n    if (thread-&gt;thread_state() == _thread_in_Java) {\n      // Java thread running in Java code =&gt; find exception handler if any\n      // a fault inside compiled code, the interpreter, or a stub\n\n      if (sig == SIGSEGV &amp;&amp; SafepointMechanism::is_poll_address((address)info-&gt;si_addr)) {\n        stub = SharedRuntime::get_poll_stub(pc);\n      } else if (sig == SIGBUS /* &amp;&amp; info-&gt;si_code == BUS_OBJERR */) {\n        // BugId 4454115: A read from a MappedByteBuffer can fault\n        // here if the underlying file has been truncated.\n        // Do not crash the VM in such a case.\n        CodeBlob* cb = CodeCache::find_blob(pc);\n        CompiledMethod* nm = (cb != nullptr) ? cb-&gt;as_compiled_method_or_null() : nullptr;\n        bool is_unsafe_arraycopy = thread-&gt;doing_unsafe_access() &amp;&amp; UnsafeCopyMemory::contains_pc(pc);\n        if ((nm != nullptr &amp;&amp; nm-&gt;has_unsafe_access()) || is_unsafe_arraycopy) {\n          address next_pc = Assembler::locate_next_instruction(pc);\n          if (is_unsafe_arraycopy) {\n            next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n          }\n          stub = SharedRuntime::handle_unsafe_access(thread, next_pc);\n        }\n      }\n      else\n\n#ifdef AMD64\n      if (sig == SIGFPE  &amp;&amp;\n          (info-&gt;si_code == FPE_INTDIV || info-&gt;si_code == FPE_FLTDIV)) {\n        stub =\n          SharedRuntime::\n          continuation_for_implicit_exception(thread,\n                                              pc,\n                                              SharedRuntime::\n                                              IMPLICIT_DIVIDE_BY_ZERO);\n#else\n      if (sig == SIGFPE /* &amp;&amp; info-&gt;si_code == FPE_INTDIV */) {\n        // HACK: si_code does not work on linux 2.2.12-20!!!\n        int op = pc[0];\n        if (op == 0xDB) {\n          // FIST\n          // TODO: The encoding of D2I in x86_32.ad can cause an exception\n          // prior to the fist instruction if there was an invalid operation\n          // pending. We want to dismiss that exception. From the win_32\n          // side it also seems that if it really was the fist causing\n          // the exception that we do the d2i by hand with different\n          // rounding. Seems kind of weird.\n          // NOTE: that we take the exception at the NEXT floating point instruction.\n          assert(pc[0] == 0xDB, &quot;not a FIST opcode&quot;);\n          assert(pc[1] == 0x14, &quot;not a FIST opcode&quot;);\n          assert(pc[2] == 0x24, &quot;not a FIST opcode&quot;);\n          return true;\n        } else if (op == 0xF7) {\n          // IDIV\n          stub = SharedRuntime::continuation_for_implicit_exception(thread, pc, SharedRuntime::IMPLICIT_DIVIDE_BY_ZERO);\n        } else {\n          // TODO: handle more cases if we are using other x86 instructions\n          //   that can generate SIGFPE signal on linux.\n          tty-&gt;print_cr(&quot;unknown opcode 0x%X with SIGFPE.&quot;, op);\n          fatal(&quot;please update this code.&quot;);\n        }\n#endif // AMD64\n      } else if (sig == SIGSEGV &amp;&amp;\n                 MacroAssembler::uses_implicit_null_check(info-&gt;si_addr)) {\n          // Determination of interpreter/vtable stub/compiled code null exception\n          stub = SharedRuntime::continuation_for_implicit_exception(thread, pc, SharedRuntime::IMPLICIT_NULL);\n      }\n    } else if ((thread-&gt;thread_state() == _thread_in_vm ||\n                thread-&gt;thread_state() == _thread_in_native) &amp;&amp;\n               (sig == SIGBUS &amp;&amp; /* info-&gt;si_code == BUS_OBJERR &amp;&amp; */\n               thread-&gt;doing_unsafe_access())) {\n        address next_pc = Assembler::locate_next_instruction(pc);\n        if (UnsafeCopyMemory::contains_pc(pc)) {\n          next_pc = UnsafeCopyMemory::page_error_continue_pc(pc);\n        }\n        stub = SharedRuntime::handle_unsafe_access(thread, next_pc);\n    }\n\n    // jni_fast_Get&lt;Primitive&gt;Field can trap at certain pc's if a GC kicks in\n    // and the heap gets shrunk before the field access.\n    if ((sig == SIGSEGV) || (sig == SIGBUS)) {\n      address addr = JNI_FastGetField::find_slowcase_pc(pc);\n      if (addr != (address)-1) {\n        stub = addr;\n      }\n    }\n  }\n</code></pre>\n<p>The JVM uses various checks to determine the context of a <code>SIGSEGV</code> signal. However, I do not see a straightforward mechanism to distinguish an externally sent <code>SIGSEGV</code> from one internally generated due to a null reference access.</p>\n<p>The signal handler examines the execution context, including the program counter and the stack, to infer the cause of the <code>SIGSEGV</code>. In case of a null reference, it looks for specific patterns that suggest a null pointer exception. But if an external <code>SIGSEGV</code> happens to coincide precisely with a situation where the JVM's execution state resembles that of a null pointer access, distinguishing between the two can be challenging.</p>\n<p>However, such a scenario is relatively unlikely due to the level of precision required in timing.</p>\n"},{"comment_count":0,"score":-1,"last_activity_date":1700400224,"creation_date":1700400224,"answer_id":77510914,"question_id":77485058,"body_markdown":"Sending a `kill -11` to a Java process will send a `SIGSEGV` (segmentation fault) signal to that process. `SIGSEGV` is a signal sent by the operating system to a process when it makes an invalid memory reference, or segmentation fault.\r\n\r\nIn the context of the Java HotSpot JVM, a `NullPointerException` is typically raised internally by the JVM when it detects an attempt to dereference a null reference. This is often implemented by catching a `SIGSEGV` signal that results from such an attempt. The JVM has a mechanism to differentiate between a `SIGSEGV` that is a legitimate `NullPointerException` and other segmentation faults.\r\n\r\nWhen you externally send a `SIGSEGV` to a Java process (using `kill -11`), it&#39;s not equivalent to the JVM internally detecting a null reference access. Instead, it&#39;s an abrupt signal to the process that it has attempted to access memory that it shouldn&#39;t, which is typically outside the scope of normal Java exception handling.\r\n\r\nTo answer your questions:\r\n\r\n 1. **Will sending `kill -11` to a Java process raise a `NullPointerException`?**: No, sending a `kill -11` (or `SIGSEGV`) to a Java process will not raise a `NullPointerException`. Instead, it will likely cause the JVM to crash or terminate unexpectedly because it&#39;s a signal that the process has attempted to access an invalid memory location.\r\n 2. **Is the JVM capable of detecting whether a `SIGSEGV` is external or due to a null access?**: Yes, the JVM is generally capable of distinguishing between a `SIGSEGV` caused by a genuine null pointer dereference within the Java program (which would result in a `NullPointerException`) and other causes of `SIGSEGV`, such as an external `kill` command or other invalid memory accesses. The JVM uses its internal mechanisms to determine the context of the SIGSEGV and whether it corresponds to a null reference access.\r\n 3. **Can an external SIGSEGV be confused for a null access?**: Under normal circumstances, an external `SIGSEGV` should not be confused with a null access within the JVM. The JVM&#39;s signal handlers are designed to interpret the context of the fault and distinguish between different causes of `SIGSEGV`. However, in complex systems or in cases of JVM bugs, unexpected behavior can occur, but this would be highly unusual and not the norm.","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77510914#77510914","title":"Will sending `kill -11` to java process raises a NullPointerException?","body":"<p>Sending a <code>kill -11</code> to a Java process will send a <code>SIGSEGV</code> (segmentation fault) signal to that process. <code>SIGSEGV</code> is a signal sent by the operating system to a process when it makes an invalid memory reference, or segmentation fault.</p>\n<p>In the context of the Java HotSpot JVM, a <code>NullPointerException</code> is typically raised internally by the JVM when it detects an attempt to dereference a null reference. This is often implemented by catching a <code>SIGSEGV</code> signal that results from such an attempt. The JVM has a mechanism to differentiate between a <code>SIGSEGV</code> that is a legitimate <code>NullPointerException</code> and other segmentation faults.</p>\n<p>When you externally send a <code>SIGSEGV</code> to a Java process (using <code>kill -11</code>), it's not equivalent to the JVM internally detecting a null reference access. Instead, it's an abrupt signal to the process that it has attempted to access memory that it shouldn't, which is typically outside the scope of normal Java exception handling.</p>\n<p>To answer your questions:</p>\n<ol>\n<li><strong>Will sending <code>kill -11</code> to a Java process raise a <code>NullPointerException</code>?</strong>: No, sending a <code>kill -11</code> (or <code>SIGSEGV</code>) to a Java process will not raise a <code>NullPointerException</code>. Instead, it will likely cause the JVM to crash or terminate unexpectedly because it's a signal that the process has attempted to access an invalid memory location.</li>\n<li><strong>Is the JVM capable of detecting whether a <code>SIGSEGV</code> is external or due to a null access?</strong>: Yes, the JVM is generally capable of distinguishing between a <code>SIGSEGV</code> caused by a genuine null pointer dereference within the Java program (which would result in a <code>NullPointerException</code>) and other causes of <code>SIGSEGV</code>, such as an external <code>kill</code> command or other invalid memory accesses. The JVM uses its internal mechanisms to determine the context of the SIGSEGV and whether it corresponds to a null reference access.</li>\n<li><strong>Can an external SIGSEGV be confused for a null access?</strong>: Under normal circumstances, an external <code>SIGSEGV</code> should not be confused with a null access within the JVM. The JVM's signal handlers are designed to interpret the context of the fault and distinguish between different causes of <code>SIGSEGV</code>. However, in complex systems or in cases of JVM bugs, unexpected behavior can occur, but this would be highly unusual and not the norm.</li>\n</ol>\n"},{"comments":[{"score":3,"post_type":"answer","creation_date":1700672021,"post_id":77527064,"comment_id":136684199,"body_markdown":"Got the `NullPointerException` on the 3rd attempt, +1","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77527064#comment136684199_77527064","body":"Got the <code>NullPointerException</code> on the 3rd attempt, +1"},{"score":1,"post_type":"answer","creation_date":1700680936,"post_id":77527064,"comment_id":136685715,"body_markdown":"you never seize to amaze with your knowledge and perseverance. +1","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77527064#comment136685715_77527064","body":"you never seize to amaze with your knowledge and perseverance. +1"},{"score":1,"post_type":"answer","creation_date":1701070255,"post_id":77527064,"comment_id":136724650,"body_markdown":"Great answer (more accurate [than mine](https://stackoverflow.com/a/77501115/6309)). I have returned to you the bounty you should have had.","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77527064#comment136724650_77527064","body":"Great answer (more accurate <a href=\"https://stackoverflow.com/a/77501115/6309\">than mine</a>). I have returned to you the bounty you should have had."}],"comment_count":3,"score":12,"last_activity_date":1700655204,"last_edit_date":1700655204,"creation_date":1700621244,"answer_id":77527064,"question_id":77485058,"body_markdown":"#### Summary\r\n\r\nYes, in some marginal cases an external `kill` command may cause a bogus `NullPointerException` in a Java application. This behavior is platform-dependent and difficult to reproduce, however, I managed to trigger this in practice.\r\n\r\n#### Background\r\n\r\nHotSpot JVM employs a technique called [&quot;implicit null check&quot;](https://shipilev.net/jvm/anatomy-quarks/25-implicit-null-checks/), where the JVM compiles an access to an object field which offset is less than a page size (4096) to a single load/store instruction without extra overhead for checking the object reference for `null`. If such an instruction is executed for `null` reference, the OS raises `SIGSEGV`. The JVM&#39;s signal handler catches this signal and transfers control to the code that throws `NullPointerException`.\r\n\r\nNot every `SIGSEGV` ends up with a NPE. [HotSpot signal handler](https://github.com/openjdk/jdk/blob/e47cf611c9490225e50a548787cbba66ab147058/src/hotspot/os_cpu/linux_x86/os_linux_x86.cpp#L207) checks that\r\n - the current thread is a Java thread;\r\n - SIGSEGV occurs in a JIT-compiled code;\r\n - the address being accessed is within zero page (0x0 - 0xfff);\r\n - the fault instruction is marked as &quot;implicit exception&quot; and there is an exception handler assigned to this instruction.\r\n\r\nIn theory, if we craft a signal that satisfies all the conditions, HotSpot will treat it as NPE.\r\n\r\n#### Practice\r\n\r\nTo increase chances of a user signal hitting the right instruction, we&#39;ll write an infinite loop that repeatedly stores to an object field. To prevent hoisting of the null check, the reference itself should be loaded from a volatile field.\r\n\r\n```\r\npublic class BogusNPE {\r\n    static volatile BogusNPE X = new BogusNPE();\r\n\r\n    int n;\r\n\r\n    public static void main(String[] args) {\r\n        while (true) {\r\n            BogusNPE x0 = X, x1 = X, x2 = X, x3 = X, x4 = X, x5 = X, x6 = X, x7 = X, x8 = X, x9 = X;\r\n            x0.n = x1.n = x2.n = x3.n = x4.n = x5.n = x6.n = x7.n = x8.n = x9.n = 0;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nHere I generated 10 stores in a row, all with an implicit null check.\r\n\r\nUse `-XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly` to verify that the corresponding `mov` instructions are annotated with `implicit exception`:\r\n\r\n```\r\n  0x00007fb4a4bd440c:   mov    0x70(%r10),%edx              ;*getstatic X {reexecute=0 rethrow=0 return_oop=0}\r\n                                                            ; - BogusNPE::main@32 (line 8)\r\n  0x00007fb4a4bd4410:   mov    0x70(%r10),%ebp              ;*getstatic X {reexecute=0 rethrow=0 return_oop=0}\r\n                                                            ; - BogusNPE::main@37 (line 8)\r\n  0x00007fb4a4bd4414:   mov    0x70(%r10),%eax              ;*getstatic X {reexecute=0 rethrow=0 return_oop=0}\r\n                                                            ; - BogusNPE::main@42 (line 8)\r\n  0x00007fb4a4bd4418:   mov    %r12d,0xc(%r12,%rax,8)       ; implicit exception: dispatches to 0x00007fb4a4bd4456\r\n                                                            ;*putfield n {reexecute=0 rethrow=0 return_oop=0}\r\n                                                            ; - BogusNPE::main@66 (line 9)\r\n  0x00007fb4a4bd441d:   mov    %r12d,0xc(%r12,%rbp,8)       ; implicit exception: dispatches to 0x00007fb4a4bd4468\r\n                                                            ;*putfield n {reexecute=0 rethrow=0 return_oop=0}\r\n                                                            ; - BogusNPE::main@70 (line 9)\r\n  0x00007fb4a4bd4422:   mov    %r12d,0xc(%r12,%rdx,8)       ; implicit exception: dispatches to 0x00007fb4a4bd447c\r\n                                                            ;*putfield n {reexecute=0 rethrow=0 return_oop=0}\r\n                                                            ; - BogusNPE::main@74 (line 9)\r\n```\r\n\r\nRun the program and get its PID:\r\n```\r\n$ jps\r\n256 BogusNPE\r\n280 Jps\r\n```\r\n\r\nHere pid=256, but we should send the signal not to a process, but to the particular thread. ID of the main thread is usually pid+1, that is 257.\r\n\r\n```\r\n$ sudo kill -11 257\r\n```\r\n\r\nIt may take several attempts before we finally achieve the goal:\r\n```\r\nException in thread &quot;main&quot; java.lang.NullPointerException: Cannot assign field &quot;n&quot; because &quot;x5&quot; is null\r\n        at BogusNPE.main(BogusNPE.java:9)\r\n```\r\n\r\n#### Nuances\r\n\r\nOn x86 platform, I could trigger NPE without `sudo`, but on 64-bit platforms `sudo` is important. Also, it&#39;s substantial that PID of the shell where we run `kill` is less than 4096. And that is why.\r\n\r\nHotSpot [checks](https://github.com/openjdk/jdk/blob/e47cf611c9490225e50a548787cbba66ab147058/src/hotspot/os_cpu/linux_x86/os_linux_x86.cpp#L311C9-L312) that the fault address `siginfo-&gt;si_addr` is located in zero page (otherwise load/store instruction requires an explicit null check). However, `si_addr` is set only when SIGSEGV is raised by kernel, we cannot control it with `kill` command. For user-generated signals, `si_pid` (sending process ID) and `si_uid` (user ID of sending process) are set instead.\r\n\r\nBy a lucky chance, `siginfo_t` structure [contains a union](https://github.com/lattera/glibc/blob/master/sysdeps/unix/sysv/linux/bits/types/siginfo_t.h#L36-L124), where `si_addr` overlaps with `si_pid` and `si_uid`.\r\n\r\n```\r\n63       31       0\r\n+-----------------+\r\n|     si_addr     |\r\n+-----------------+\r\n| si_uid | si_pid |\r\n+-----------------+\r\n```\r\nSo, to produce `si_addr` value between 0 and 4096, we need to make `si_uid = 0` (that is, invoke kill by user 0 or `root`), and set `si_pid &lt; 4096`. On 32-bit systems, `si_addr` overlaps with `si_pid` only.\r\n\r\nIf the signal misses `mov` instruction with an implicit null check, or if `si_addr` is larger than the page size, the JVM will crash with a fatal error instead of throwing NPE.\r\n\r\n\r\n#### Can JVM detect the source of SIGSEGV?\r\n\r\nIt is certainly possible to distinguish user-generated SIGSEGV from a signal caused by invalid memory access. The signal handler could just check `si_code` field of [siginfo_t](https://man7.org/linux/man-pages/man2/sigaction.2.html) structure:\r\n - for a real NullPointerException, `si_code` will be `SEGV_MAPERR`;\r\n - for a signal sent by `kill`, `tgkill` or `sigqueue`, the code will be `SI_USER`, `SI_TKILL` or `SI_QUEUE` respectively.\r\n\r\nHowever, current HotSpot implementation does not do that, and therefore it is possible to fool the JVM using the above trick.","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception/77527064#77527064","title":"Will sending `kill -11` to java process raises a NullPointerException?","body":"<h4>Summary</h4>\n<p>Yes, in some marginal cases an external <code>kill</code> command may cause a bogus <code>NullPointerException</code> in a Java application. This behavior is platform-dependent and difficult to reproduce, however, I managed to trigger this in practice.</p>\n<h4>Background</h4>\n<p>HotSpot JVM employs a technique called <a href=\"https://shipilev.net/jvm/anatomy-quarks/25-implicit-null-checks/\" rel=\"noreferrer\">&quot;implicit null check&quot;</a>, where the JVM compiles an access to an object field which offset is less than a page size (4096) to a single load/store instruction without extra overhead for checking the object reference for <code>null</code>. If such an instruction is executed for <code>null</code> reference, the OS raises <code>SIGSEGV</code>. The JVM's signal handler catches this signal and transfers control to the code that throws <code>NullPointerException</code>.</p>\n<p>Not every <code>SIGSEGV</code> ends up with a NPE. <a href=\"https://github.com/openjdk/jdk/blob/e47cf611c9490225e50a548787cbba66ab147058/src/hotspot/os_cpu/linux_x86/os_linux_x86.cpp#L207\" rel=\"noreferrer\">HotSpot signal handler</a> checks that</p>\n<ul>\n<li>the current thread is a Java thread;</li>\n<li>SIGSEGV occurs in a JIT-compiled code;</li>\n<li>the address being accessed is within zero page (0x0 - 0xfff);</li>\n<li>the fault instruction is marked as &quot;implicit exception&quot; and there is an exception handler assigned to this instruction.</li>\n</ul>\n<p>In theory, if we craft a signal that satisfies all the conditions, HotSpot will treat it as NPE.</p>\n<h4>Practice</h4>\n<p>To increase chances of a user signal hitting the right instruction, we'll write an infinite loop that repeatedly stores to an object field. To prevent hoisting of the null check, the reference itself should be loaded from a volatile field.</p>\n<pre><code>public class BogusNPE {\n    static volatile BogusNPE X = new BogusNPE();\n\n    int n;\n\n    public static void main(String[] args) {\n        while (true) {\n            BogusNPE x0 = X, x1 = X, x2 = X, x3 = X, x4 = X, x5 = X, x6 = X, x7 = X, x8 = X, x9 = X;\n            x0.n = x1.n = x2.n = x3.n = x4.n = x5.n = x6.n = x7.n = x8.n = x9.n = 0;\n        }\n    }\n}\n</code></pre>\n<p>Here I generated 10 stores in a row, all with an implicit null check.</p>\n<p>Use <code>-XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly</code> to verify that the corresponding <code>mov</code> instructions are annotated with <code>implicit exception</code>:</p>\n<pre><code>  0x00007fb4a4bd440c:   mov    0x70(%r10),%edx              ;*getstatic X {reexecute=0 rethrow=0 return_oop=0}\n                                                            ; - BogusNPE::main@32 (line 8)\n  0x00007fb4a4bd4410:   mov    0x70(%r10),%ebp              ;*getstatic X {reexecute=0 rethrow=0 return_oop=0}\n                                                            ; - BogusNPE::main@37 (line 8)\n  0x00007fb4a4bd4414:   mov    0x70(%r10),%eax              ;*getstatic X {reexecute=0 rethrow=0 return_oop=0}\n                                                            ; - BogusNPE::main@42 (line 8)\n  0x00007fb4a4bd4418:   mov    %r12d,0xc(%r12,%rax,8)       ; implicit exception: dispatches to 0x00007fb4a4bd4456\n                                                            ;*putfield n {reexecute=0 rethrow=0 return_oop=0}\n                                                            ; - BogusNPE::main@66 (line 9)\n  0x00007fb4a4bd441d:   mov    %r12d,0xc(%r12,%rbp,8)       ; implicit exception: dispatches to 0x00007fb4a4bd4468\n                                                            ;*putfield n {reexecute=0 rethrow=0 return_oop=0}\n                                                            ; - BogusNPE::main@70 (line 9)\n  0x00007fb4a4bd4422:   mov    %r12d,0xc(%r12,%rdx,8)       ; implicit exception: dispatches to 0x00007fb4a4bd447c\n                                                            ;*putfield n {reexecute=0 rethrow=0 return_oop=0}\n                                                            ; - BogusNPE::main@74 (line 9)\n</code></pre>\n<p>Run the program and get its PID:</p>\n<pre><code>$ jps\n256 BogusNPE\n280 Jps\n</code></pre>\n<p>Here pid=256, but we should send the signal not to a process, but to the particular thread. ID of the main thread is usually pid+1, that is 257.</p>\n<pre><code>$ sudo kill -11 257\n</code></pre>\n<p>It may take several attempts before we finally achieve the goal:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot assign field &quot;n&quot; because &quot;x5&quot; is null\n        at BogusNPE.main(BogusNPE.java:9)\n</code></pre>\n<h4>Nuances</h4>\n<p>On x86 platform, I could trigger NPE without <code>sudo</code>, but on 64-bit platforms <code>sudo</code> is important. Also, it's substantial that PID of the shell where we run <code>kill</code> is less than 4096. And that is why.</p>\n<p>HotSpot <a href=\"https://github.com/openjdk/jdk/blob/e47cf611c9490225e50a548787cbba66ab147058/src/hotspot/os_cpu/linux_x86/os_linux_x86.cpp#L311C9-L312\" rel=\"noreferrer\">checks</a> that the fault address <code>siginfo-&gt;si_addr</code> is located in zero page (otherwise load/store instruction requires an explicit null check). However, <code>si_addr</code> is set only when SIGSEGV is raised by kernel, we cannot control it with <code>kill</code> command. For user-generated signals, <code>si_pid</code> (sending process ID) and <code>si_uid</code> (user ID of sending process) are set instead.</p>\n<p>By a lucky chance, <code>siginfo_t</code> structure <a href=\"https://github.com/lattera/glibc/blob/master/sysdeps/unix/sysv/linux/bits/types/siginfo_t.h#L36-L124\" rel=\"noreferrer\">contains a union</a>, where <code>si_addr</code> overlaps with <code>si_pid</code> and <code>si_uid</code>.</p>\n<pre><code>63       31       0\n+-----------------+\n|     si_addr     |\n+-----------------+\n| si_uid | si_pid |\n+-----------------+\n</code></pre>\n<p>So, to produce <code>si_addr</code> value between 0 and 4096, we need to make <code>si_uid = 0</code> (that is, invoke kill by user 0 or <code>root</code>), and set <code>si_pid &lt; 4096</code>. On 32-bit systems, <code>si_addr</code> overlaps with <code>si_pid</code> only.</p>\n<p>If the signal misses <code>mov</code> instruction with an implicit null check, or if <code>si_addr</code> is larger than the page size, the JVM will crash with a fatal error instead of throwing NPE.</p>\n<h4>Can JVM detect the source of SIGSEGV?</h4>\n<p>It is certainly possible to distinguish user-generated SIGSEGV from a signal caused by invalid memory access. The signal handler could just check <code>si_code</code> field of <a href=\"https://man7.org/linux/man-pages/man2/sigaction.2.html\" rel=\"noreferrer\">siginfo_t</a> structure:</p>\n<ul>\n<li>for a real NullPointerException, <code>si_code</code> will be <code>SEGV_MAPERR</code>;</li>\n<li>for a signal sent by <code>kill</code>, <code>tgkill</code> or <code>sigqueue</code>, the code will be <code>SI_USER</code>, <code>SI_TKILL</code> or <code>SI_QUEUE</code> respectively.</li>\n</ul>\n<p>However, current HotSpot implementation does not do that, and therefore it is possible to fool the JVM using the above trick.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":320,"answer_count":3,"score":8,"last_activity_date":1701462432,"creation_date":1700018412,"last_edit_date":1701462432,"question_id":77485058,"body_markdown":"For example, the HotSpot JVM implement null-pointer detection by catching SIGSEGV signal.  So if we manually generate a SIGSEGV from external, will that also be recognized as `NullPointerException` **in some circumstances** ?","link":"https://stackoverflow.com/questions/77485058/will-sending-kill-11-to-java-process-raises-a-nullpointerexception","title":"Will sending `kill -11` to java process raises a NullPointerException?","body":"<p>For example, the HotSpot JVM implement null-pointer detection by catching SIGSEGV signal.  So if we manually generate a SIGSEGV from external, will that also be recognized as <code>NullPointerException</code> <strong>in some circumstances</strong> ?</p>\n"},{"tags":["java","json","jackson"],"comments":[{"score":0,"post_type":"question","creation_date":1701137783,"post_id":77560912,"comment_id":136735475,"body_markdown":"By the way, I cannot think of a situation where calling `LocalDateTime.now` would be appropriate. To capture a moment, use `Instant` or `ZonedDateTime`.","link":"https://stackoverflow.com/questions/77560912/jackson-jsonnode-putpojo-do-not-work-for-localdatetime#comment136735475_77560912","body":"By the way, I cannot think of a situation where calling <code>LocalDateTime.now</code> would be appropriate. To capture a moment, use <code>Instant</code> or <code>ZonedDateTime</code>."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701461280,"creation_date":1701461280,"answer_id":77587826,"question_id":77560912,"body_markdown":"In the `test3` you missed to register `JavaTimeModule()`: \r\n\r\n```Java\r\n@Test\r\npublic void test3() throws JsonProcessingException {\r\n      User user = new User(1L, &quot;Alice&quot;, LocalDateTime.now());\r\n      log.info(&quot;user json is \\n{}&quot;, new ObjectMapper()\r\n                                   .registerModule(new JavaTimeModule())\r\n                                   .writeValueAsString(user));\r\n}\r\n\r\n```\r\n\r\n\r\nIssue `test4` Maybe the problem is about how the `putPOJO` method handles the LocalDateTime property in the `ObjectNode`.\r\nThe `putPOJO` method is used to add a POJO as a field in the ObjectNode, and in your case it encounters difficulties in serializing the `LocalDateTime` property.\r\nTo solve this problem, you can use the `valueToTree` method to convert the User object to a `JsonNode` and then add it to the `ObjectNode`:\r\n\r\n```Java\r\n@Test\r\npublic void test4() {\r\n   User user = new User(1L, &quot;Alice&quot;, LocalDateTime.now());\r\n\r\n   ObjectNode objectNode = om.createObjectNode();\r\n   objectNode.set(&quot;user&quot;, om.valueToTree(user));\r\n\r\n   log.info(&quot;user json is \\n{}&quot;, objectNode.toPrettyString());\r\n}\r\n```","link":"https://stackoverflow.com/questions/77560912/jackson-jsonnode-putpojo-do-not-work-for-localdatetime/77587826#77587826","title":"Jackson JsonNode putPojo do not work for LocalDatetime","body":"<p>In the <code>test3</code> you missed to register <code>JavaTimeModule()</code>:</p>\n<pre><code>@Test\npublic void test3() throws JsonProcessingException {\n      User user = new User(1L, &quot;Alice&quot;, LocalDateTime.now());\n      log.info(&quot;user json is \\n{}&quot;, new ObjectMapper()\n                                   .registerModule(new JavaTimeModule())\n                                   .writeValueAsString(user));\n}\n\n</code></pre>\n<p>Issue <code>test4</code> Maybe the problem is about how the <code>putPOJO</code> method handles the LocalDateTime property in the <code>ObjectNode</code>.\nThe <code>putPOJO</code> method is used to add a POJO as a field in the ObjectNode, and in your case it encounters difficulties in serializing the <code>LocalDateTime</code> property.\nTo solve this problem, you can use the <code>valueToTree</code> method to convert the User object to a <code>JsonNode</code> and then add it to the <code>ObjectNode</code>:</p>\n<pre><code>@Test\npublic void test4() {\n   User user = new User(1L, &quot;Alice&quot;, LocalDateTime.now());\n\n   ObjectNode objectNode = om.createObjectNode();\n   objectNode.set(&quot;user&quot;, om.valueToTree(user));\n\n   log.info(&quot;user json is \\n{}&quot;, objectNode.toPrettyString());\n}\n</code></pre>\n"}],"comment_count":1,"is_answered":false,"view_count":30,"answer_count":1,"score":0,"last_activity_date":1701461280,"creation_date":1701136344,"question_id":77560912,"body_markdown":"I am changing JSONObject to JsonNode in my project. It is easy to do with String or Primitive Type. However, when I attempt to put a pojo, especially the LocalDatetime property of it, it does not work.\r\n\r\n```java\r\npublic class JacksonTest {\r\n    private static final Logger log = LoggerFactory.getLogger(JacksonTest.class);\r\n    final ObjectMapper om = new ObjectMapper()\r\n            .disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS)\r\n            .registerModule(new JavaTimeModule());\r\n\r\n    @Test\r\n    void test() throws JsonProcessingException {\r\n        User user = new User(1L, &quot;Alice&quot;, LocalDateTime.now());\r\n        log.info(&quot;user json is \\n{}&quot;, om.writeValueAsString(user));\r\n    }\r\n\r\n    @Test\r\n    void test2() throws JsonProcessingException {\r\n        User user = new User(1L, &quot;Alice&quot;, LocalDateTime.now());\r\n        log.info(&quot;user json is \\n{}&quot;, new ObjectMapper()\r\n                .registerModule(new JavaTimeModule()).writeValueAsString(user));\r\n    }\r\n\r\n    @Test\r\n    void test3() throws JsonProcessingException {\r\n        User user = new User(1L, &quot;Alice&quot;, LocalDateTime.now());\r\n        log.info(&quot;user json is \\n{}&quot;, new ObjectMapper().writeValueAsString(user));\r\n    }\r\n\r\n    @Test\r\n    void test4() {\r\n        User user = new User(1L, &quot;Alice&quot;, LocalDateTime.now());\r\n        log.info(&quot;user json is \\n{}&quot;, om.createObjectNode()\r\n                .putPOJO(&quot;user&quot;, user).toPrettyString());\r\n    }\r\n}\r\n\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\nclass User {\r\n    Long id;\r\n    String username;\r\n    LocalDateTime lastLogin;\r\n}\r\n```\r\n\r\nI wrote a test class, but I got different results\r\n\r\n1. test() and test2() return `{&quot;id&quot;:1,&quot;username&quot;:&quot;Alice&quot;,&quot;lastLogin&quot;:&quot;2023-11-28T09:25:06.7124585&quot;}`, an expected result\r\n\r\n2. test3() throws `com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type &#39;java.time.LocalDateTime&#39; not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling (through reference chain: com.example.demo.test.User[&quot;lastLogin&quot;])`, no surprise\r\n\r\n3. test() return a json but contains an exception, that really confuse me\r\n```json\r\n{\r\n  &quot;user&quot; : {\r\n    &quot;id&quot; : 1,\r\n    &quot;username&quot; : &quot;Alice&quot;,\r\n    &quot;lastLogin&quot; : &quot;[ERROR: (com.fasterxml.jackson.databind.exc.InvalidDefinitionException) Java 8 date/time type `java.time.LocalDateTime` not supported by default: add Module \\&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310\\&quot; to enable handling (through reference chain: com.example.winter.demo.User[\\&quot;lastLogin\\&quot;])]&quot;\r\n  }\r\n}\r\n```\r\n\r\nThe method *putPojo(String, Object)* does not seem to work consistently. In this case, I have to use the alternative method *ObjectMapper#valueToTree(Object)* instead.\r\n\r\nCan anyone explain why this happens?","link":"https://stackoverflow.com/questions/77560912/jackson-jsonnode-putpojo-do-not-work-for-localdatetime","title":"Jackson JsonNode putPojo do not work for LocalDatetime","body":"<p>I am changing JSONObject to JsonNode in my project. It is easy to do with String or Primitive Type. However, when I attempt to put a pojo, especially the LocalDatetime property of it, it does not work.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JacksonTest {\n    private static final Logger log = LoggerFactory.getLogger(JacksonTest.class);\n    final ObjectMapper om = new ObjectMapper()\n            .disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS)\n            .registerModule(new JavaTimeModule());\n\n    @Test\n    void test() throws JsonProcessingException {\n        User user = new User(1L, &quot;Alice&quot;, LocalDateTime.now());\n        log.info(&quot;user json is \\n{}&quot;, om.writeValueAsString(user));\n    }\n\n    @Test\n    void test2() throws JsonProcessingException {\n        User user = new User(1L, &quot;Alice&quot;, LocalDateTime.now());\n        log.info(&quot;user json is \\n{}&quot;, new ObjectMapper()\n                .registerModule(new JavaTimeModule()).writeValueAsString(user));\n    }\n\n    @Test\n    void test3() throws JsonProcessingException {\n        User user = new User(1L, &quot;Alice&quot;, LocalDateTime.now());\n        log.info(&quot;user json is \\n{}&quot;, new ObjectMapper().writeValueAsString(user));\n    }\n\n    @Test\n    void test4() {\n        User user = new User(1L, &quot;Alice&quot;, LocalDateTime.now());\n        log.info(&quot;user json is \\n{}&quot;, om.createObjectNode()\n                .putPOJO(&quot;user&quot;, user).toPrettyString());\n    }\n}\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\nclass User {\n    Long id;\n    String username;\n    LocalDateTime lastLogin;\n}\n</code></pre>\n<p>I wrote a test class, but I got different results</p>\n<ol>\n<li><p>test() and test2() return <code>{&quot;id&quot;:1,&quot;username&quot;:&quot;Alice&quot;,&quot;lastLogin&quot;:&quot;2023-11-28T09:25:06.7124585&quot;}</code>, an expected result</p>\n</li>\n<li><p>test3() throws <code>com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type 'java.time.LocalDateTime' not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling (through reference chain: com.example.demo.test.User[&quot;lastLogin&quot;])</code>, no surprise</p>\n</li>\n<li><p>test() return a json but contains an exception, that really confuse me</p>\n</li>\n</ol>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;user&quot; : {\n    &quot;id&quot; : 1,\n    &quot;username&quot; : &quot;Alice&quot;,\n    &quot;lastLogin&quot; : &quot;[ERROR: (com.fasterxml.jackson.databind.exc.InvalidDefinitionException) Java 8 date/time type `java.time.LocalDateTime` not supported by default: add Module \\&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310\\&quot; to enable handling (through reference chain: com.example.winter.demo.User[\\&quot;lastLogin\\&quot;])]&quot;\n  }\n}\n</code></pre>\n<p>The method <em>putPojo(String, Object)</em> does not seem to work consistently. In this case, I have to use the alternative method <em>ObjectMapper#valueToTree(Object)</em> instead.</p>\n<p>Can anyone explain why this happens?</p>\n"},{"tags":["java","eclipse","javafx"],"comments":[{"score":2,"post_type":"question","creation_date":1689133532,"post_id":76667004,"comment_id":135168400,"body_markdown":"I know you think you explained what you did, but your description is both vague and unorganized. You should indicate what **exactly** you did, step by step. As you already know, there are tons of tutorials on how to do exactly what you need. Which tutorial did you use, and where does it go wrong? No one can help you without specific details, and no one is going to custom write a tutorial just for you when there are many out there already.","link":"https://stackoverflow.com/questions/76667004/how-to-install-javafx-in-eclipse-2023-03#comment135168400_76667004","body":"I know you think you explained what you did, but your description is both vague and unorganized. You should indicate what <b>exactly</b> you did, step by step. As you already know, there are tons of tutorials on how to do exactly what you need. Which tutorial did you use, and where does it go wrong? No one can help you without specific details, and no one is going to custom write a tutorial just for you when there are many out there already."},{"score":0,"post_type":"question","creation_date":1689146199,"post_id":76667004,"comment_id":135170070,"body_markdown":"Thank you for acknowledging that I at least think I&#39;ve explained what I did. I&#39;ve just been at a complete dead end for a week now, i&#39;m something like 40 - 50 hours in on solutions that don&#39;t work on their faces and coming up with an exhaustive list of what I&#39;ve tried would be both impossible and unhelpful. https://www.youtube.com/watch?v=mUbORGu-z6Q I have recently followed this... and https://www.youtube.com/watch?v=nz8P528uGjk both, most of what I&#39;ve done has been along these lines and everyone claims this should work. Is the problem perhaps that the package wasn&#39;t started as a JFX project?","link":"https://stackoverflow.com/questions/76667004/how-to-install-javafx-in-eclipse-2023-03#comment135170070_76667004","body":"Thank you for acknowledging that I at least think I&#39;ve explained what I did. I&#39;ve just been at a complete dead end for a week now, i&#39;m something like 40 - 50 hours in on solutions that don&#39;t work on their faces and coming up with an exhaustive list of what I&#39;ve tried would be both impossible and unhelpful. <a href=\"https://www.youtube.com/watch?v=mUbORGu-z6Q\" rel=\"nofollow noreferrer\">youtube.com/watch?v=mUbORGu-z6Q</a> I have recently followed this... and <a href=\"https://www.youtube.com/watch?v=nz8P528uGjk\" rel=\"nofollow noreferrer\">youtube.com/watch?v=nz8P528uGjk</a> both, most of what I&#39;ve done has been along these lines and everyone claims this should work. Is the problem perhaps that the package wasn&#39;t started as a JFX project?"},{"score":0,"post_type":"question","creation_date":1689146808,"post_id":76667004,"comment_id":135170190,"body_markdown":"So I know what I did wrong, and thank you SO MUCH for your patience Mars, and for not just telling me I&#39;m bad at providing details. So the problem I ran into is that my module-info.java didn&#39;t include\n`requires javafx.controls;\nopens com.packagename to javafx.graphics, javafx.fxml;`\n\nSo that&#39;s definitely on me! I knew I was doing something stupid just didn&#39;t know where ti was.","link":"https://stackoverflow.com/questions/76667004/how-to-install-javafx-in-eclipse-2023-03#comment135170190_76667004","body":"So I know what I did wrong, and thank you SO MUCH for your patience Mars, and for not just telling me I&#39;m bad at providing details. So the problem I ran into is that my module-info.java didn&#39;t include <code>requires javafx.controls; opens com.packagename to javafx.graphics, javafx.fxml;</code>  So that&#39;s definitely on me! I knew I was doing something stupid just didn&#39;t know where ti was."},{"score":1,"post_type":"question","creation_date":1689148467,"post_id":76667004,"comment_id":135170535,"body_markdown":"I have found that often those who try YouTube videos to learn JavaFX often can’t get started with JavaFX development, unlike those that follow the official [getting started instructions at openjfx.io](https://openjfx.io/openjfx-docs/).","link":"https://stackoverflow.com/questions/76667004/how-to-install-javafx-in-eclipse-2023-03#comment135170535_76667004","body":"I have found that often those who try YouTube videos to learn JavaFX often can’t get started with JavaFX development, unlike those that follow the official <a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\">getting started instructions at openjfx.io</a>."},{"score":0,"post_type":"question","creation_date":1689152118,"post_id":76667004,"comment_id":135171431,"body_markdown":"That was where I started. Like I said after dozens of hours trying to solve the problem and fix it, an exhaustive list of everything I&#39;d followed would neither be possible, nor helpful. And those getting started instructions mention nothing about the module info file, so even if I hadn&#39;t followed those official instructions first, directing me to them would have been no more helpful than any of the youtube videos. I do appreciate the time, but since you saw the solution you must know that the problem wasn&#39;t in those instructions. So what was the point of this comment?","link":"https://stackoverflow.com/questions/76667004/how-to-install-javafx-in-eclipse-2023-03#comment135171431_76667004","body":"That was where I started. Like I said after dozens of hours trying to solve the problem and fix it, an exhaustive list of everything I&#39;d followed would neither be possible, nor helpful. And those getting started instructions mention nothing about the module info file, so even if I hadn&#39;t followed those official instructions first, directing me to them would have been no more helpful than any of the youtube videos. I do appreciate the time, but since you saw the solution you must know that the problem wasn&#39;t in those instructions. So what was the point of this comment?"},{"score":0,"post_type":"question","creation_date":1689190357,"post_id":76667004,"comment_id":135180038,"body_markdown":"The question is &quot;How to install JavaFX in Eclipse 2023-03&quot;, the answer is to follow the [getting started instructions at openjfx.io](https://openjfx.io/openjfx-docs/).  StackOverflow doesn&#39;t recommend posting link-only answers.  I commented so that if somebody searches for &quot;How to install JavaFX in Eclipse&quot;, they can find a reference to the recommended solution.  I understand that you did not find the answer you were seeking in that resource.  Nevertheless, the official instructions are a good starting place for many developers IMO.","link":"https://stackoverflow.com/questions/76667004/how-to-install-javafx-in-eclipse-2023-03#comment135180038_76667004","body":"The question is &quot;How to install JavaFX in Eclipse 2023-03&quot;, the answer is to follow the <a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\">getting started instructions at openjfx.io</a>.  StackOverflow doesn&#39;t recommend posting link-only answers.  I commented so that if somebody searches for &quot;How to install JavaFX in Eclipse&quot;, they can find a reference to the recommended solution.  I understand that you did not find the answer you were seeking in that resource.  Nevertheless, the official instructions are a good starting place for many developers IMO."}],"answers":[{"comments":[{"score":1,"post_type":"answer","creation_date":1689148145,"post_id":76668100,"comment_id":135170461,"body_markdown":"You don’t need to open to `javafx.fxml` if you aren’t using fxml.  And if you are using fxml, then you need to `requires javafx.fxml;` as shown in the [openjfx modular sample code](https://github.com/openjfx/samples/blob/master/IDE/IntelliJ/Modular/Maven/hellofx/src/main/java/module-info.java).  Also I fixed formatting, as the code was formatted as executable JavaScript/html, which it is not.","link":"https://stackoverflow.com/questions/76667004/how-to-install-javafx-in-eclipse-2023-03/76668100#comment135170461_76668100","body":"You don’t need to open to <code>javafx.fxml</code> if you aren’t using fxml.  And if you are using fxml, then you need to <code>requires javafx.fxml;</code> as shown in the <a href=\"https://github.com/openjfx/samples/blob/master/IDE/IntelliJ/Modular/Maven/hellofx/src/main/java/module-info.java\" rel=\"nofollow noreferrer\">openjfx modular sample code</a>.  Also I fixed formatting, as the code was formatted as executable JavaScript/html, which it is not."}],"comment_count":1,"score":0,"last_activity_date":1689147574,"last_edit_date":1689147574,"creation_date":1689146992,"answer_id":76668100,"question_id":76667004,"body_markdown":"The problem I was running into is that the package didn&#39;t include the requirement for javafx in the module-info.java file, adding \r\n\r\n    requires javafx.controls;\r\n    opens com.packagename to javafx.graphics, javafx.fxml;\r\n\r\nsolved the problem. Just adding the files to the buildpath did nothing without changing that file.","link":"https://stackoverflow.com/questions/76667004/how-to-install-javafx-in-eclipse-2023-03/76668100#76668100","title":"How to install JavaFX in Eclipse 2023-03","body":"<p>The problem I was running into is that the package didn't include the requirement for javafx in the module-info.java file, adding</p>\n<pre><code>requires javafx.controls;\nopens com.packagename to javafx.graphics, javafx.fxml;\n</code></pre>\n<p>solved the problem. Just adding the files to the buildpath did nothing without changing that file.</p>\n"}],"comment_count":6,"is_answered":false,"view_count":231,"answer_count":1,"score":0,"last_activity_date":1701460254,"creation_date":1689132854,"question_id":76667004,"body_markdown":"I have tried everything I can find, help install new software and given the Oxygen link, selecting e(fx)clipse and installing, adding the external jars to the build path, duplicating my JRE and including the javafx files, everything I can find says to find jfsrt in &lt;JAVA_HOME&gt;/jre/lib but that doesn&#39;t exist there. I&#39;ve been trying for hours to fix the imports so I can import JavaFX classes but Eclipse just refuses. Please, explain this to me like I am a fifth grader, I cannot figure out for the life of me what to do.\r\n\r\nI already explained what I did.","link":"https://stackoverflow.com/questions/76667004/how-to-install-javafx-in-eclipse-2023-03","title":"How to install JavaFX in Eclipse 2023-03","body":"<p>I have tried everything I can find, help install new software and given the Oxygen link, selecting e(fx)clipse and installing, adding the external jars to the build path, duplicating my JRE and including the javafx files, everything I can find says to find jfsrt in &lt;JAVA_HOME&gt;/jre/lib but that doesn't exist there. I've been trying for hours to fix the imports so I can import JavaFX classes but Eclipse just refuses. Please, explain this to me like I am a fifth grader, I cannot figure out for the life of me what to do.</p>\n<p>I already explained what I did.</p>\n"},{"tags":["java","button","javafx"],"comments":[{"score":2,"post_type":"question","creation_date":1701353449,"post_id":77577831,"comment_id":136767038,"body_markdown":"Do you have a model class? Typically you would have an `ObservableList&lt;Book&gt;` in the model; your list view can use that list as its `items` list, and your button action can add the appropriate book to the list, which will result in the list view automatically updating. See https://stackoverflow.com/questions/36868391/using-javafx-controller-without-fxml/36873768#36873768","link":"https://stackoverflow.com/questions/77577831/how-to-add-buy-book-button-to-every-row-in-a-table-and-print-the-book-in-area#comment136767038_77577831","body":"Do you have a model class? Typically you would have an <code>ObservableList&lt;Book&gt;</code> in the model; your list view can use that list as its <code>items</code> list, and your button action can add the appropriate book to the list, which will result in the list view automatically updating. See <a href=\"https://stackoverflow.com/questions/36868391/using-javafx-controller-without-fxml/36873768#36873768\" title=\"using javafx controller without fxml\">stackoverflow.com/questions/36868391/&hellip;</a>"}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701458993,"last_edit_date":1701458993,"creation_date":1701390931,"answer_id":77582427,"question_id":77577831,"body_markdown":"**Solution Approach**\r\n\r\nThe approach here is as outlined by James_D in comments:\r\n\r\n&gt; Typically you would have an ObservableList&lt;Book&gt; in the model; your list view can use that list as its items list, and your button action can add the appropriate book to the list, which will result in the list view automatically updating.\r\n\r\nFor the implementation the logic described in the comment, see this `BuyCell` class, where `Cart` is the part of the model managing the items list in the shopping cart.\r\n\r\n    class BuyCell extends TableCell&lt;Book, Void&gt; {\r\n        private final Button buy = new Button(&quot;Buy&quot;);\r\n    \r\n        public BuyCell(Cart cart) {\r\n            buy.setOnAction(e -&gt;\r\n                    cart.addBook(getTableRow().getItem())\r\n            );\r\n        }\r\n\r\n        @Override\r\n        protected void updateItem(Void item, boolean empty) {\r\n            super.updateItem(item, empty);\r\n    \r\n            setGraphic(empty ? null : buy);\r\n        }\r\n    }\r\n\r\n**Complete Example**\r\n\r\nYou should model your domain (a book store) and then write the code to make use of the modeled domain.\r\n\r\nYou need something to represent a Book:\r\n\r\n    record Book(String title, String author) {}\r\n\r\nAnd something to represent a shopping cart:\r\n\r\n    import javafx.collections.FXCollections;\r\n    import javafx.collections.ObservableList;\r\n    \r\n    import java.util.Optional;\r\n    \r\n    class Cart {\r\n        private final ObservableList&lt;CartItem&gt; items = FXCollections.observableArrayList();\r\n    \r\n        public ObservableList&lt;CartItem&gt; getItems() {\r\n            return items;\r\n        }\r\n    \r\n        public void addBook(Book book) {\r\n            Optional&lt;CartItem&gt; cartItem =\r\n                    items.stream()\r\n                            .filter(item -&gt; item.getBook().equals(book))\r\n                            .findFirst();\r\n    \r\n            if (cartItem.isPresent()) {\r\n                cartItem.get().setQuantity(\r\n                        cartItem.get().getQuantity() + 1\r\n                );\r\n            } else {\r\n                items.add(new CartItem(book, 1));\r\n            }\r\n        }\r\n    \r\n        public void clear() {\r\n            items.clear();\r\n        }\r\n    }\r\n\r\nAnd something to represent a line item in the shopping cart:\r\n\r\n    import javafx.beans.property.SimpleIntegerProperty;\r\n    \r\n    class CartItem {\r\n        private final Book book;\r\n        private final SimpleIntegerProperty quantity;\r\n    \r\n        public CartItem(Book book, int quantity) {\r\n            this.book = book;\r\n            this.quantity = new SimpleIntegerProperty(quantity);\r\n        }\r\n    \r\n        public Book getBook() {\r\n            return book;\r\n        }\r\n    \r\n        public int getQuantity() {\r\n            return quantity.get();\r\n        }\r\n    \r\n        public SimpleIntegerProperty quantityProperty() {\r\n            return quantity;\r\n        }\r\n    \r\n        public void setQuantity(int quantity) {\r\n            this.quantity.set(quantity);\r\n        }\r\n    }\r\n\r\nAnd something to represent all of the available books in the store and the current shopping cart.\r\n\r\n    import javafx.collections.FXCollections;\r\n    import javafx.collections.ObservableList;\r\n    \r\n    class BookStoreModel {\r\n        private final ObservableList&lt;Book&gt; books = FXCollections.observableArrayList();\r\n        private final Cart cart = new Cart();\r\n    \r\n        public BookStoreModel() {\r\n            books.addAll(\r\n                    new Book(&quot;The Seven Lamps of Architecture&quot;, &quot;John Ruskin&quot;),\r\n                    new Book(&quot;Collapse: How Societies Choose to Fail or Succeed&quot;, &quot;Jared Diamond&quot;)\r\n            );\r\n        }\r\n    \r\n        public ObservableList&lt;Book&gt; getBooks() {\r\n            return books;\r\n        }\r\n    \r\n        public Cart getCart() {\r\n            return cart;\r\n        }\r\n    }\r\n\r\nThen you need a UI for it:\r\n\r\n    import javafx.beans.binding.Bindings;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.collections.ObservableList;\r\n    import javafx.scene.Parent;\r\n    import javafx.scene.control.Button;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.TableView;\r\n    \r\n    class BookStoreUI {\r\n        public TableView&lt;Book&gt; createAvailableBooksView(\r\n                ObservableList&lt;Book&gt; books, Cart cart\r\n        ) {\r\n            TableView&lt;Book&gt; availableBooks = new TableView&lt;&gt;(books);\r\n    \r\n            TableColumn&lt;Book, String&gt; titleColumn = new TableColumn&lt;&gt;(&quot;Title&quot;);\r\n            titleColumn.setCellValueFactory(p -&gt;\r\n                    new SimpleStringProperty(p.getValue().title())\r\n            );\r\n            titleColumn.setPrefWidth(250);\r\n    \r\n            TableColumn&lt;Book, String&gt; authorColumn = new TableColumn&lt;&gt;(&quot;Author&quot;);\r\n            authorColumn.setCellValueFactory(p -&gt;\r\n                    new SimpleStringProperty(p.getValue().author())\r\n            );\r\n    \r\n            TableColumn&lt;Book, Void&gt; buyColumn = new TableColumn&lt;&gt;(&quot;Buy&quot;);\r\n            buyColumn.setMaxWidth(70);\r\n            buyColumn.setCellFactory(p -&gt;\r\n                    new BuyCell(cart)\r\n            );\r\n    \r\n            //noinspection unchecked\r\n            availableBooks.getColumns().addAll(titleColumn, authorColumn, buyColumn);\r\n    \r\n            availableBooks.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY_ALL_COLUMNS);\r\n    \r\n            return availableBooks;\r\n        }\r\n    \r\n        public TableView&lt;CartItem&gt; createPurchasesView(Cart cart) {\r\n            TableView&lt;CartItem&gt; purchases = new TableView&lt;&gt;(cart.getItems());\r\n            TableColumn&lt;CartItem, String&gt; purchasedTitleColumn = new TableColumn&lt;&gt;(&quot;Title&quot;);\r\n            purchasedTitleColumn.setCellValueFactory(p -&gt;\r\n                    new SimpleStringProperty(p.getValue().getBook().title())\r\n            );\r\n            purchasedTitleColumn.setPrefWidth(250);\r\n    \r\n            TableColumn&lt;CartItem, Integer&gt; quantityColumn = new TableColumn&lt;&gt;(&quot;Quantity&quot;);\r\n            quantityColumn.setMaxWidth(70);\r\n            quantityColumn.setCellValueFactory(p -&gt;\r\n                    p.getValue().quantityProperty().asObject()\r\n            );\r\n    \r\n            //noinspection unchecked\r\n            purchases.getColumns().addAll(purchasedTitleColumn, quantityColumn);\r\n    \r\n            purchases.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY_ALL_COLUMNS);\r\n    \r\n            return purchases;\r\n        }\r\n    \r\n        public Parent createCartControl(Cart cart) {\r\n            Button clear = new Button(&quot;Clear&quot;);\r\n            clear.setOnAction(e -&gt; cart.clear());\r\n            clear.disableProperty().bind(Bindings.isEmpty(cart.getItems()));\r\n    \r\n            return clear;\r\n        }\r\n    }\r\n\r\nAnd a widget for the Buy button.\r\n\r\n    import javafx.geometry.Insets;\r\n    import javafx.scene.control.Button;\r\n    import javafx.scene.control.TableCell;\r\n    import javafx.scene.layout.StackPane;\r\n    \r\n    class BuyCell extends TableCell&lt;Book, Void&gt; {\r\n        private final Button buy = new Button(&quot;Buy&quot;);\r\n        private final StackPane container = new StackPane(buy);\r\n    \r\n        public BuyCell(Cart cart) {\r\n            container.setPadding(new Insets(5));\r\n            buy.setOnAction(e -&gt;\r\n                    cart.addBook(getTableRow().getItem())\r\n            );\r\n        }\r\n    \r\n        @Override\r\n        protected void updateItem(Void item, boolean empty) {\r\n            super.updateItem(item, empty);\r\n    \r\n            setGraphic(empty ? null : container);\r\n        }\r\n    }\r\n\r\nAnd an application to tie it all together.\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Label;\r\n    import javafx.scene.layout.VBox;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class BookStoreApp extends Application {\r\n        private final BookStoreModel model = new BookStoreModel();\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n            BookStoreUI ui = new BookStoreUI();\r\n    \r\n            VBox layout = new VBox(\r\n                    10,\r\n                    new Label(&quot;Available Books&quot;),\r\n                    ui.createAvailableBooksView(model.getBooks(), model.getCart()),\r\n                    new Label(&quot;Shopping Cart&quot;),\r\n                    ui.createPurchasesView(model.getCart()),\r\n                    ui.createCartControl(model.getCart())\r\n            );\r\n            layout.setPadding(new Insets(10));\r\n            layout.setPrefSize(500, 400);\r\n    \r\n            stage.setScene(new Scene(layout));\r\n            stage.show();\r\n        }\r\n    }\r\n\r\nThen you end up with something like this:\r\n\r\n[![screenshot][1]][1]\r\n\r\n**Additional resources**\r\n\r\n * [Eden provides a tutorial on TableView cell customization][2], it is more comprehensive than what you need, but it may be worth your time reviewing it.\r\n * Here is an example of [buttons in a TableView with FXML][3]. Doing it without FXML is pretty much similar.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4B0OR.png\r\n  [2]: https://edencoding.com/tableview-customization-cellfactory/\r\n  [3]: https://stackoverflow.com/questions/48724948/accessing-buttons-in-tableview\r\n","link":"https://stackoverflow.com/questions/77577831/how-to-add-buy-book-button-to-every-row-in-a-table-and-print-the-book-in-area/77582427#77582427","title":"How to add buy book button to every row in a table and print the book in area?","body":"<p><strong>Solution Approach</strong></p>\n<p>The approach here is as outlined by James_D in comments:</p>\n<blockquote>\n<p>Typically you would have an ObservableList in the model; your list view can use that list as its items list, and your button action can add the appropriate book to the list, which will result in the list view automatically updating.</p>\n</blockquote>\n<p>For the implementation the logic described in the comment, see this <code>BuyCell</code> class, where <code>Cart</code> is the part of the model managing the items list in the shopping cart.</p>\n<pre><code>class BuyCell extends TableCell&lt;Book, Void&gt; {\n    private final Button buy = new Button(&quot;Buy&quot;);\n\n    public BuyCell(Cart cart) {\n        buy.setOnAction(e -&gt;\n                cart.addBook(getTableRow().getItem())\n        );\n    }\n\n    @Override\n    protected void updateItem(Void item, boolean empty) {\n        super.updateItem(item, empty);\n\n        setGraphic(empty ? null : buy);\n    }\n}\n</code></pre>\n<p><strong>Complete Example</strong></p>\n<p>You should model your domain (a book store) and then write the code to make use of the modeled domain.</p>\n<p>You need something to represent a Book:</p>\n<pre><code>record Book(String title, String author) {}\n</code></pre>\n<p>And something to represent a shopping cart:</p>\n<pre><code>import javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\n\nimport java.util.Optional;\n\nclass Cart {\n    private final ObservableList&lt;CartItem&gt; items = FXCollections.observableArrayList();\n\n    public ObservableList&lt;CartItem&gt; getItems() {\n        return items;\n    }\n\n    public void addBook(Book book) {\n        Optional&lt;CartItem&gt; cartItem =\n                items.stream()\n                        .filter(item -&gt; item.getBook().equals(book))\n                        .findFirst();\n\n        if (cartItem.isPresent()) {\n            cartItem.get().setQuantity(\n                    cartItem.get().getQuantity() + 1\n            );\n        } else {\n            items.add(new CartItem(book, 1));\n        }\n    }\n\n    public void clear() {\n        items.clear();\n    }\n}\n</code></pre>\n<p>And something to represent a line item in the shopping cart:</p>\n<pre><code>import javafx.beans.property.SimpleIntegerProperty;\n\nclass CartItem {\n    private final Book book;\n    private final SimpleIntegerProperty quantity;\n\n    public CartItem(Book book, int quantity) {\n        this.book = book;\n        this.quantity = new SimpleIntegerProperty(quantity);\n    }\n\n    public Book getBook() {\n        return book;\n    }\n\n    public int getQuantity() {\n        return quantity.get();\n    }\n\n    public SimpleIntegerProperty quantityProperty() {\n        return quantity;\n    }\n\n    public void setQuantity(int quantity) {\n        this.quantity.set(quantity);\n    }\n}\n</code></pre>\n<p>And something to represent all of the available books in the store and the current shopping cart.</p>\n<pre><code>import javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\n\nclass BookStoreModel {\n    private final ObservableList&lt;Book&gt; books = FXCollections.observableArrayList();\n    private final Cart cart = new Cart();\n\n    public BookStoreModel() {\n        books.addAll(\n                new Book(&quot;The Seven Lamps of Architecture&quot;, &quot;John Ruskin&quot;),\n                new Book(&quot;Collapse: How Societies Choose to Fail or Succeed&quot;, &quot;Jared Diamond&quot;)\n        );\n    }\n\n    public ObservableList&lt;Book&gt; getBooks() {\n        return books;\n    }\n\n    public Cart getCart() {\n        return cart;\n    }\n}\n</code></pre>\n<p>Then you need a UI for it:</p>\n<pre><code>import javafx.beans.binding.Bindings;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.collections.ObservableList;\nimport javafx.scene.Parent;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\n\nclass BookStoreUI {\n    public TableView&lt;Book&gt; createAvailableBooksView(\n            ObservableList&lt;Book&gt; books, Cart cart\n    ) {\n        TableView&lt;Book&gt; availableBooks = new TableView&lt;&gt;(books);\n\n        TableColumn&lt;Book, String&gt; titleColumn = new TableColumn&lt;&gt;(&quot;Title&quot;);\n        titleColumn.setCellValueFactory(p -&gt;\n                new SimpleStringProperty(p.getValue().title())\n        );\n        titleColumn.setPrefWidth(250);\n\n        TableColumn&lt;Book, String&gt; authorColumn = new TableColumn&lt;&gt;(&quot;Author&quot;);\n        authorColumn.setCellValueFactory(p -&gt;\n                new SimpleStringProperty(p.getValue().author())\n        );\n\n        TableColumn&lt;Book, Void&gt; buyColumn = new TableColumn&lt;&gt;(&quot;Buy&quot;);\n        buyColumn.setMaxWidth(70);\n        buyColumn.setCellFactory(p -&gt;\n                new BuyCell(cart)\n        );\n\n        //noinspection unchecked\n        availableBooks.getColumns().addAll(titleColumn, authorColumn, buyColumn);\n\n        availableBooks.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY_ALL_COLUMNS);\n\n        return availableBooks;\n    }\n\n    public TableView&lt;CartItem&gt; createPurchasesView(Cart cart) {\n        TableView&lt;CartItem&gt; purchases = new TableView&lt;&gt;(cart.getItems());\n        TableColumn&lt;CartItem, String&gt; purchasedTitleColumn = new TableColumn&lt;&gt;(&quot;Title&quot;);\n        purchasedTitleColumn.setCellValueFactory(p -&gt;\n                new SimpleStringProperty(p.getValue().getBook().title())\n        );\n        purchasedTitleColumn.setPrefWidth(250);\n\n        TableColumn&lt;CartItem, Integer&gt; quantityColumn = new TableColumn&lt;&gt;(&quot;Quantity&quot;);\n        quantityColumn.setMaxWidth(70);\n        quantityColumn.setCellValueFactory(p -&gt;\n                p.getValue().quantityProperty().asObject()\n        );\n\n        //noinspection unchecked\n        purchases.getColumns().addAll(purchasedTitleColumn, quantityColumn);\n\n        purchases.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY_ALL_COLUMNS);\n\n        return purchases;\n    }\n\n    public Parent createCartControl(Cart cart) {\n        Button clear = new Button(&quot;Clear&quot;);\n        clear.setOnAction(e -&gt; cart.clear());\n        clear.disableProperty().bind(Bindings.isEmpty(cart.getItems()));\n\n        return clear;\n    }\n}\n</code></pre>\n<p>And a widget for the Buy button.</p>\n<pre><code>import javafx.geometry.Insets;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.TableCell;\nimport javafx.scene.layout.StackPane;\n\nclass BuyCell extends TableCell&lt;Book, Void&gt; {\n    private final Button buy = new Button(&quot;Buy&quot;);\n    private final StackPane container = new StackPane(buy);\n\n    public BuyCell(Cart cart) {\n        container.setPadding(new Insets(5));\n        buy.setOnAction(e -&gt;\n                cart.addBook(getTableRow().getItem())\n        );\n    }\n\n    @Override\n    protected void updateItem(Void item, boolean empty) {\n        super.updateItem(item, empty);\n\n        setGraphic(empty ? null : container);\n    }\n}\n</code></pre>\n<p>And an application to tie it all together.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Label;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\n\npublic class BookStoreApp extends Application {\n    private final BookStoreModel model = new BookStoreModel();\n\n    @Override\n    public void start(Stage stage) {\n        BookStoreUI ui = new BookStoreUI();\n\n        VBox layout = new VBox(\n                10,\n                new Label(&quot;Available Books&quot;),\n                ui.createAvailableBooksView(model.getBooks(), model.getCart()),\n                new Label(&quot;Shopping Cart&quot;),\n                ui.createPurchasesView(model.getCart()),\n                ui.createCartControl(model.getCart())\n        );\n        layout.setPadding(new Insets(10));\n        layout.setPrefSize(500, 400);\n\n        stage.setScene(new Scene(layout));\n        stage.show();\n    }\n}\n</code></pre>\n<p>Then you end up with something like this:</p>\n<p><a href=\"https://i.stack.imgur.com/4B0OR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4B0OR.png\" alt=\"screenshot\" /></a></p>\n<p><strong>Additional resources</strong></p>\n<ul>\n<li><a href=\"https://edencoding.com/tableview-customization-cellfactory/\" rel=\"nofollow noreferrer\">Eden provides a tutorial on TableView cell customization</a>, it is more comprehensive than what you need, but it may be worth your time reviewing it.</li>\n<li>Here is an example of <a href=\"https://stackoverflow.com/questions/48724948/accessing-buttons-in-tableview\">buttons in a TableView with FXML</a>. Doing it without FXML is pretty much similar.</li>\n</ul>\n"}],"comment_count":1,"is_answered":true,"view_count":71,"answer_count":1,"score":0,"last_activity_date":1701458993,"creation_date":1701341549,"question_id":77577831,"body_markdown":"The code that I have bellow prints the book from the row that I press buyButton. But I want to change that. Every time I press the buyButton I need the book to apear in the &quot;Your cart:&quot; Area and I am stuck at that. I dont know how to make a handler for the buyButton from Controller class.\r\nThis is my View class:\r\n```\r\npublic CustomerView(Stage primaryStage) {\r\n        primaryStage.setTitle(&quot;Book Store&quot;);\r\n\r\n        GridPane gridPane = new GridPane();\r\n        initializeGridPane(gridPane);\r\n\r\n        Scene scene = new Scene(gridPane, 720, 480);\r\n        primaryStage.setScene(scene);\r\n\r\n        initializeSceneTitle(gridPane);\r\n\r\n        initializeTableView(gridPane);\r\n\r\n        initializeFields(gridPane);\r\n\r\n        primaryStage.show();\r\n    }\r\n\r\n    private void initializeGridPane(GridPane gridPane) {\r\n        gridPane.setAlignment(Pos.CENTER);\r\n        gridPane.setHgap(10);\r\n        gridPane.setVgap(10);\r\n        gridPane.setPadding(new Insets(40, 40, 40, 40));\r\n    }\r\n\r\n    private void initializeSceneTitle(GridPane gridPane) {\r\n        Text sceneTitle = new Text(&quot;Our book colection&quot;);\r\n        sceneTitle.setFont(Font.font(&quot;Tahome&quot;, FontWeight.NORMAL, 20));\r\n        gridPane.add(sceneTitle, 0, 0, 1, 3);\r\n    }\r\n\r\n    private void initializeTableView(GridPane gridPane) {\r\n        table = new TableView&lt;&gt;();\r\n\r\n        idColumn = new TableColumn&lt;&gt;(&quot;ID&quot;);\r\n        titleColumn = new TableColumn&lt;&gt;(&quot;Title&quot;);\r\n        authorColumn = new TableColumn&lt;&gt;(&quot;Author&quot;);\r\n        pubDateColumn = new TableColumn&lt;&gt;(&quot;Published Date&quot;);\r\n        priceColumn = new TableColumn&lt;&gt;(&quot;Price&quot;);\r\n        stockColumn = new TableColumn&lt;&gt;(&quot;Stock&quot;);\r\n        buyColumn = new TableColumn&lt;&gt;(&quot;Buy&quot;);\r\n\r\n        idColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;id&quot;));\r\n        titleColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;title&quot;));\r\n        authorColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;author&quot;));\r\n        pubDateColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;publishedDate&quot;));\r\n        priceColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;price&quot;));\r\n        stockColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;stock&quot;));\r\n\r\n        //final Button buyButton = new Button(&quot;Buy&quot;);\r\n\r\n        //bibliografie pentru codul de mai jos\r\n        //https://stackoverflow.com/questions/29489366/how-to-add-button-in-javafx-table-view\r\n        Callback&lt;TableColumn&lt;Book, Button&gt;, TableCell&lt;Book, Button&gt;&gt; cellFactory\r\n                = //\r\n                new Callback&lt;TableColumn&lt;Book, Button&gt;, TableCell&lt;Book, Button&gt;&gt;() {\r\n                    @Override\r\n                    public TableCell call(final TableColumn&lt;Book, Button&gt; param) {\r\n                        final TableCell&lt;Book, Button&gt; cell = new TableCell&lt;Book, Button&gt;() {\r\n\r\n                            final Button buyButton = new Button(&quot;Buy&quot;);\r\n\r\n                            @Override\r\n                            protected void updateItem(Button item, boolean empty) {\r\n                                super.updateItem(item, empty);\r\n                                if (empty) {\r\n                                    setGraphic(null);\r\n                                } else {\r\n                                    buyButton.setOnAction(event -&gt; {\r\n                                        Book book = getTableView().getItems().get(getIndex());\r\n                                        System.out.println(book.getAuthor()\r\n                                                + &quot;   &quot; + book.getTitle());\r\n                                        //buyBookHandler.handle(event);\r\n                                    });\r\n                                    setGraphic(buyButton);\r\n                                }\r\n\r\n                            }\r\n                        };\r\n                        return cell;\r\n                    }\r\n                };\r\n\r\n        buyColumn.setCellFactory(cellFactory);\r\n\r\n        table.getColumns().add(idColumn);\r\n        table.getColumns().add(titleColumn);\r\n        table.getColumns().add(authorColumn);\r\n        table.getColumns().add(pubDateColumn);\r\n        table.getColumns().add(priceColumn);\r\n        table.getColumns().add(stockColumn);\r\n        table.getColumns().add(buyColumn);\r\n        gridPane.add(table,2, 4, 25,25);//1:0\r\n\r\n        VBox tableViewBox = new VBox(10);\r\n        tableViewBox.getChildren().add(table);\r\n\r\n        showAllBooksButton = new Button(&quot;See out book colection&quot;);\r\n\r\n        HBox viewAllBooksHBox = new HBox(10);\r\n        viewAllBooksHBox.setAlignment(Pos.BOTTOM_LEFT);\r\n        viewAllBooksHBox.getChildren().add(showAllBooksButton);\r\n        gridPane.add(viewAllBooksHBox, 5, 1);\r\n\r\n        //HBox buyButtonHBox = new HBox(10);\r\n        //buyButtonHBox.setAlignment(Pos.BOTTOM_LEFT);\r\n\r\n        //gridPane.add(buyButtonHBox, 0,20,2,1);\r\n        gridPane.add(tableViewBox, 0, 5, 10, 20);\r\n\r\n    }\r\n\r\n    private void initializeFields(GridPane gridPane) {\r\n        cartArea = new TextArea();\r\n        cartArea.setEditable(false);\r\n        cartArea.setText(&quot;Your cart: \\n&quot;);\r\n\r\n        HBox buttonsHBox = new HBox(5);\r\n        buttonsHBox.setAlignment(Pos.BOTTOM_CENTER);\r\n        buttonsHBox.getChildren().addAll(cartArea);\r\n        gridPane.add(buttonsHBox, 0, 27, 2, 5);\r\n\r\n        totalPriceLabel = new Label(&quot;Total price: &quot;);\r\n        gridPane.add(totalPriceLabel, 0, 32, 5, 1);\r\n    }\r\n\r\n    public void setBooksData(List&lt;Book&gt; books) {\r\n        booksList = FXCollections.observableArrayList(books);\r\n        table.setItems(booksList);\r\n    }\r\n\r\n    public void showAllBooks(EventHandler&lt;ActionEvent&gt; show){\r\n        showAllBooksButton.setOnAction(show);\r\n    }\r\n\r\n    public void setCartArea(String msj){\r\n        cartArea.appendText(msj);\r\n    }\r\n\r\n    public void setPriceTotal(int price){\r\n        totalPriceLabel.setText(totalPriceLabel.getText() + price);\r\n    }\r\n```\r\n\r\nThis in my Controller class:\r\n\r\n```\r\npublic class CustomerController {\r\n    private final CustomerView customerView;\r\n    private final BookService bookService;\r\n    List&lt;Book&gt; booksInCart = new ArrayList&lt;&gt;();\r\n\r\n    public CustomerController(CustomerView customerView, BookService bookService) {\r\n        this.customerView = customerView;\r\n        this.bookService = bookService;\r\n\r\n        //this.customerView.setBuyButtonHandler(new BuyBook());\r\n        this.customerView.showAllBooks(new ViewAllBooks());\r\n    }\r\n\r\n    private class ViewAllBooks implements EventHandler&lt;ActionEvent&gt; {\r\n        private List&lt;Book&gt; books;\r\n        @Override\r\n        public void handle(ActionEvent event) {\r\n            books = bookService.findAll();\r\n            customerView.setBooksData(books);\r\n        }\r\n    }\r\n\r\n    private class BuyBook implements EventHandler&lt;ActionEvent&gt; {\r\n        private String title;\r\n        private int stock;\r\n        private Book selectedBook;\r\n        private int price = 0;\r\n        @Override\r\n        public void handle(ActionEvent event) {\r\n            selectedBook = customerView.getSelectedBook();\r\n            //booksInCart.add(selectedBook);\r\n            title = selectedBook.getTitle();\r\n            stock = selectedBook.getStock();\r\n\r\n            if(stock &gt; 0){\r\n                selectedBook.setStock(stock - 1);\r\n                customerView.setCartArea(title);\r\n\r\n                price += selectedBook.getPrice();\r\n                customerView.setPriceTotal(price);\r\n            }\r\n            else {\r\n                customerView.setCartArea(&quot;Sold out!&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n```","link":"https://stackoverflow.com/questions/77577831/how-to-add-buy-book-button-to-every-row-in-a-table-and-print-the-book-in-area","title":"How to add buy book button to every row in a table and print the book in area?","body":"<p>The code that I have bellow prints the book from the row that I press buyButton. But I want to change that. Every time I press the buyButton I need the book to apear in the &quot;Your cart:&quot; Area and I am stuck at that. I dont know how to make a handler for the buyButton from Controller class.\nThis is my View class:</p>\n<pre><code>public CustomerView(Stage primaryStage) {\n        primaryStage.setTitle(&quot;Book Store&quot;);\n\n        GridPane gridPane = new GridPane();\n        initializeGridPane(gridPane);\n\n        Scene scene = new Scene(gridPane, 720, 480);\n        primaryStage.setScene(scene);\n\n        initializeSceneTitle(gridPane);\n\n        initializeTableView(gridPane);\n\n        initializeFields(gridPane);\n\n        primaryStage.show();\n    }\n\n    private void initializeGridPane(GridPane gridPane) {\n        gridPane.setAlignment(Pos.CENTER);\n        gridPane.setHgap(10);\n        gridPane.setVgap(10);\n        gridPane.setPadding(new Insets(40, 40, 40, 40));\n    }\n\n    private void initializeSceneTitle(GridPane gridPane) {\n        Text sceneTitle = new Text(&quot;Our book colection&quot;);\n        sceneTitle.setFont(Font.font(&quot;Tahome&quot;, FontWeight.NORMAL, 20));\n        gridPane.add(sceneTitle, 0, 0, 1, 3);\n    }\n\n    private void initializeTableView(GridPane gridPane) {\n        table = new TableView&lt;&gt;();\n\n        idColumn = new TableColumn&lt;&gt;(&quot;ID&quot;);\n        titleColumn = new TableColumn&lt;&gt;(&quot;Title&quot;);\n        authorColumn = new TableColumn&lt;&gt;(&quot;Author&quot;);\n        pubDateColumn = new TableColumn&lt;&gt;(&quot;Published Date&quot;);\n        priceColumn = new TableColumn&lt;&gt;(&quot;Price&quot;);\n        stockColumn = new TableColumn&lt;&gt;(&quot;Stock&quot;);\n        buyColumn = new TableColumn&lt;&gt;(&quot;Buy&quot;);\n\n        idColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;id&quot;));\n        titleColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;title&quot;));\n        authorColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;author&quot;));\n        pubDateColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;publishedDate&quot;));\n        priceColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;price&quot;));\n        stockColumn.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;stock&quot;));\n\n        //final Button buyButton = new Button(&quot;Buy&quot;);\n\n        //bibliografie pentru codul de mai jos\n        //https://stackoverflow.com/questions/29489366/how-to-add-button-in-javafx-table-view\n        Callback&lt;TableColumn&lt;Book, Button&gt;, TableCell&lt;Book, Button&gt;&gt; cellFactory\n                = //\n                new Callback&lt;TableColumn&lt;Book, Button&gt;, TableCell&lt;Book, Button&gt;&gt;() {\n                    @Override\n                    public TableCell call(final TableColumn&lt;Book, Button&gt; param) {\n                        final TableCell&lt;Book, Button&gt; cell = new TableCell&lt;Book, Button&gt;() {\n\n                            final Button buyButton = new Button(&quot;Buy&quot;);\n\n                            @Override\n                            protected void updateItem(Button item, boolean empty) {\n                                super.updateItem(item, empty);\n                                if (empty) {\n                                    setGraphic(null);\n                                } else {\n                                    buyButton.setOnAction(event -&gt; {\n                                        Book book = getTableView().getItems().get(getIndex());\n                                        System.out.println(book.getAuthor()\n                                                + &quot;   &quot; + book.getTitle());\n                                        //buyBookHandler.handle(event);\n                                    });\n                                    setGraphic(buyButton);\n                                }\n\n                            }\n                        };\n                        return cell;\n                    }\n                };\n\n        buyColumn.setCellFactory(cellFactory);\n\n        table.getColumns().add(idColumn);\n        table.getColumns().add(titleColumn);\n        table.getColumns().add(authorColumn);\n        table.getColumns().add(pubDateColumn);\n        table.getColumns().add(priceColumn);\n        table.getColumns().add(stockColumn);\n        table.getColumns().add(buyColumn);\n        gridPane.add(table,2, 4, 25,25);//1:0\n\n        VBox tableViewBox = new VBox(10);\n        tableViewBox.getChildren().add(table);\n\n        showAllBooksButton = new Button(&quot;See out book colection&quot;);\n\n        HBox viewAllBooksHBox = new HBox(10);\n        viewAllBooksHBox.setAlignment(Pos.BOTTOM_LEFT);\n        viewAllBooksHBox.getChildren().add(showAllBooksButton);\n        gridPane.add(viewAllBooksHBox, 5, 1);\n\n        //HBox buyButtonHBox = new HBox(10);\n        //buyButtonHBox.setAlignment(Pos.BOTTOM_LEFT);\n\n        //gridPane.add(buyButtonHBox, 0,20,2,1);\n        gridPane.add(tableViewBox, 0, 5, 10, 20);\n\n    }\n\n    private void initializeFields(GridPane gridPane) {\n        cartArea = new TextArea();\n        cartArea.setEditable(false);\n        cartArea.setText(&quot;Your cart: \\n&quot;);\n\n        HBox buttonsHBox = new HBox(5);\n        buttonsHBox.setAlignment(Pos.BOTTOM_CENTER);\n        buttonsHBox.getChildren().addAll(cartArea);\n        gridPane.add(buttonsHBox, 0, 27, 2, 5);\n\n        totalPriceLabel = new Label(&quot;Total price: &quot;);\n        gridPane.add(totalPriceLabel, 0, 32, 5, 1);\n    }\n\n    public void setBooksData(List&lt;Book&gt; books) {\n        booksList = FXCollections.observableArrayList(books);\n        table.setItems(booksList);\n    }\n\n    public void showAllBooks(EventHandler&lt;ActionEvent&gt; show){\n        showAllBooksButton.setOnAction(show);\n    }\n\n    public void setCartArea(String msj){\n        cartArea.appendText(msj);\n    }\n\n    public void setPriceTotal(int price){\n        totalPriceLabel.setText(totalPriceLabel.getText() + price);\n    }\n</code></pre>\n<p>This in my Controller class:</p>\n<pre><code>public class CustomerController {\n    private final CustomerView customerView;\n    private final BookService bookService;\n    List&lt;Book&gt; booksInCart = new ArrayList&lt;&gt;();\n\n    public CustomerController(CustomerView customerView, BookService bookService) {\n        this.customerView = customerView;\n        this.bookService = bookService;\n\n        //this.customerView.setBuyButtonHandler(new BuyBook());\n        this.customerView.showAllBooks(new ViewAllBooks());\n    }\n\n    private class ViewAllBooks implements EventHandler&lt;ActionEvent&gt; {\n        private List&lt;Book&gt; books;\n        @Override\n        public void handle(ActionEvent event) {\n            books = bookService.findAll();\n            customerView.setBooksData(books);\n        }\n    }\n\n    private class BuyBook implements EventHandler&lt;ActionEvent&gt; {\n        private String title;\n        private int stock;\n        private Book selectedBook;\n        private int price = 0;\n        @Override\n        public void handle(ActionEvent event) {\n            selectedBook = customerView.getSelectedBook();\n            //booksInCart.add(selectedBook);\n            title = selectedBook.getTitle();\n            stock = selectedBook.getStock();\n\n            if(stock &gt; 0){\n                selectedBook.setStock(stock - 1);\n                customerView.setCartArea(title);\n\n                price += selectedBook.getPrice();\n                customerView.setPriceTotal(price);\n            }\n            else {\n                customerView.setCartArea(&quot;Sold out!&quot;);\n            }\n        }\n    }\n\n}\n\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701450167,"creation_date":1701450167,"answer_id":77586941,"question_id":76601400,"body_markdown":"As far as I know you can&#39;t import eslint as you do in Angular for example but descent IDEs as intelliJ you can configure to enforce some kind of style.\r\n\r\nYou can read more here: https://www.jetbrains.com/help/idea/configuring-code-style.html#delete-code-style-schemes","link":"https://stackoverflow.com/questions/76601400/is-there-a-spring-boot-code-style-enforce-linter/77586941#77586941","title":"Is there a Spring boot code style enforce, linter?","body":"<p>As far as I know you can't import eslint as you do in Angular for example but descent IDEs as intelliJ you can configure to enforce some kind of style.</p>\n<p>You can read more here: <a href=\"https://www.jetbrains.com/help/idea/configuring-code-style.html#delete-code-style-schemes\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/configuring-code-style.html#delete-code-style-schemes</a></p>\n"}],"comment_count":0,"is_answered":false,"view_count":265,"answer_count":1,"score":1,"last_activity_date":1701450167,"creation_date":1688347996,"question_id":76601400,"body_markdown":"My project currently using Springboot, and I want to enforce code styles like eslint and prettier. How do I do this?\r\nFor example:\r\n```java\r\n@GetMapping()\r\n    public ResponseEntity&lt;byte[]&gt; getJson(@RequestHeader(&quot;Accept&quot;) String acceptHeader, @RequestParam(required = false) Optional&lt;String&gt; msisdn, @RequestParam(required = false) Optional&lt;LocalDate&gt; startDate, @RequestParam(required = false) Optional&lt;LocalDate&gt; endDate, @RequestParam(required = false) Optional&lt;BlockStatusEnum&gt; status, @RequestParam(required = false) Optional&lt;Integer&gt; pageSize, @RequestParam(required = false) Optional&lt;Integer&gt; pageNumber) throws IOException {\r\n    \r\n```\r\nI want to enforce it to\r\n```java\r\n@GetMapping()\r\n    public ResponseEntity&lt;byte[]&gt; get(\r\n            @RequestHeader(&quot;Accept&quot;) String acceptHeader,\r\n            @RequestParam(required = false) Optional&lt;String&gt; msisdn,\r\n            @RequestParam(required = false) Optional&lt;LocalDate&gt; startDate, \r\n            @RequestParam(required = false) Optional&lt;LocalDate&gt; endDate, \r\n            @RequestParam(required = false) Optional&lt;BlockStatusEnum&gt; status, \r\n            @RequestParam(required = false) Optional&lt;Integer&gt; pageSize, \r\n            @RequestParam(required = false) Optional&lt;Integer&gt; pageNumber)\r\n            throws IOException {\r\n\r\n```","link":"https://stackoverflow.com/questions/76601400/is-there-a-spring-boot-code-style-enforce-linter","title":"Is there a Spring boot code style enforce, linter?","body":"<p>My project currently using Springboot, and I want to enforce code styles like eslint and prettier. How do I do this?\nFor example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping()\n    public ResponseEntity&lt;byte[]&gt; getJson(@RequestHeader(&quot;Accept&quot;) String acceptHeader, @RequestParam(required = false) Optional&lt;String&gt; msisdn, @RequestParam(required = false) Optional&lt;LocalDate&gt; startDate, @RequestParam(required = false) Optional&lt;LocalDate&gt; endDate, @RequestParam(required = false) Optional&lt;BlockStatusEnum&gt; status, @RequestParam(required = false) Optional&lt;Integer&gt; pageSize, @RequestParam(required = false) Optional&lt;Integer&gt; pageNumber) throws IOException {\n    \n</code></pre>\n<p>I want to enforce it to</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping()\n    public ResponseEntity&lt;byte[]&gt; get(\n            @RequestHeader(&quot;Accept&quot;) String acceptHeader,\n            @RequestParam(required = false) Optional&lt;String&gt; msisdn,\n            @RequestParam(required = false) Optional&lt;LocalDate&gt; startDate, \n            @RequestParam(required = false) Optional&lt;LocalDate&gt; endDate, \n            @RequestParam(required = false) Optional&lt;BlockStatusEnum&gt; status, \n            @RequestParam(required = false) Optional&lt;Integer&gt; pageSize, \n            @RequestParam(required = false) Optional&lt;Integer&gt; pageNumber)\n            throws IOException {\n\n</code></pre>\n"},{"tags":["java","spring-boot","rest","controller"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701470263,"post_id":77586821,"comment_id":136784027,"body_markdown":"Thanks for the answer :) Turns out adding @Data to the Wallet model solved the problem, but it&#39;s nice to know a way to do it without depending solely on notations","link":"https://stackoverflow.com/questions/77582100/how-to-print-nested-objects-parameters-in-spring-boot-when-using-get-method/77586821#comment136784027_77586821","body":"Thanks for the answer :) Turns out adding @Data to the Wallet model solved the problem, but it&#39;s nice to know a way to do it without depending solely on notations"}],"comment_count":1,"score":0,"last_activity_date":1701449024,"creation_date":1701449024,"answer_id":77586821,"question_id":77582100,"body_markdown":"I think you should create a custom DTO class that represents the structure you want in the response. You can then manually map the data from the Basket and Wallet objects to this DTO.\r\n   \r\n\r\n     @Data\r\n    public class BasketResponse {\r\n        private String fruit1;\r\n        private String fruit2;\r\n        private String fruit3;\r\n        private WalletResponse wallet;\r\n    }\r\n    \r\n    @Data\r\n    public class WalletResponse {\r\n        private String item1;\r\n        private String item2;\r\n        private String item3;\r\n    }\r\n\r\n    @Service\r\n    public class BasketService {\r\n        @Autowired\r\n        private BasketRepository basketRepo;\r\n    \r\n        public List&lt;BasketResponse&gt; find() {\r\n            List&lt;Basket&gt; baskets = basketRepo.findAll();\r\n            return baskets.stream().map(this::mapToResponse).collect(Collectors.toList());\r\n        }\r\n    \r\n        private BasketResponse mapToResponse(Basket basket) {\r\n            BasketResponse basketResponse = new BasketResponse();\r\n            basketResponse.setFruit1(basket.getFruit1());\r\n            basketResponse.setFruit2(basket.getFruit2());\r\n            basketResponse.setFruit3(basket.getFruit3());\r\n    \r\n            Wallet wallet = basket.getWallet();\r\n            if (wallet != null) {\r\n                WalletResponse walletResponse = new WalletResponse();\r\n                walletResponse.setItem1(wallet.getItem1());\r\n                walletResponse.setItem2(wallet.getItem2());\r\n                walletResponse.setItem3(wallet.getItem3());\r\n                basketResponse.setWallet(walletResponse);\r\n            }\r\n    \r\n            return basketResponse;\r\n        }\r\n    }\r\n\r\n\r\n    @RestController\r\n    @RequestMapping(value = &quot;/baskets&quot;)\r\n    public class BasketController {\r\n        @Autowired\r\n        private BasketService basketService;\r\n    \r\n        @GetMapping\r\n        public ResponseEntity&lt;List&lt;BasketResponse&gt;&gt; find() {\r\n            List&lt;BasketResponse&gt; baskets = basketService.find();\r\n            return ResponseEntity.ok(baskets);\r\n        }\r\n    }\r\n","link":"https://stackoverflow.com/questions/77582100/how-to-print-nested-objects-parameters-in-spring-boot-when-using-get-method/77586821#77586821","title":"How to print nested objects parameters in spring boot when using GET method?","body":"<p>I think you should create a custom DTO class that represents the structure you want in the response. You can then manually map the data from the Basket and Wallet objects to this DTO.</p>\n<pre><code> @Data\npublic class BasketResponse {\n    private String fruit1;\n    private String fruit2;\n    private String fruit3;\n    private WalletResponse wallet;\n}\n\n@Data\npublic class WalletResponse {\n    private String item1;\n    private String item2;\n    private String item3;\n}\n\n@Service\npublic class BasketService {\n    @Autowired\n    private BasketRepository basketRepo;\n\n    public List&lt;BasketResponse&gt; find() {\n        List&lt;Basket&gt; baskets = basketRepo.findAll();\n        return baskets.stream().map(this::mapToResponse).collect(Collectors.toList());\n    }\n\n    private BasketResponse mapToResponse(Basket basket) {\n        BasketResponse basketResponse = new BasketResponse();\n        basketResponse.setFruit1(basket.getFruit1());\n        basketResponse.setFruit2(basket.getFruit2());\n        basketResponse.setFruit3(basket.getFruit3());\n\n        Wallet wallet = basket.getWallet();\n        if (wallet != null) {\n            WalletResponse walletResponse = new WalletResponse();\n            walletResponse.setItem1(wallet.getItem1());\n            walletResponse.setItem2(wallet.getItem2());\n            walletResponse.setItem3(wallet.getItem3());\n            basketResponse.setWallet(walletResponse);\n        }\n\n        return basketResponse;\n    }\n}\n\n\n@RestController\n@RequestMapping(value = &quot;/baskets&quot;)\npublic class BasketController {\n    @Autowired\n    private BasketService basketService;\n\n    @GetMapping\n    public ResponseEntity&lt;List&lt;BasketResponse&gt;&gt; find() {\n        List&lt;BasketResponse&gt; baskets = basketService.find();\n        return ResponseEntity.ok(baskets);\n    }\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":16,"answer_count":1,"score":1,"last_activity_date":1701449024,"creation_date":1701384765,"question_id":77582100,"body_markdown":"Don&#39;t know if I managed to phrase if correctly, but basicaly: \r\n- I have an object &quot;Basket&quot; for example, it has 3 fruits and a wallet inside, the wallet containing more objects in itself.\r\n- When printing the Basket after receiving a GET request, I want not only the fruits and the wallet to be printed, but also what is inside the wallet.\r\n\r\n```\r\n**What I want:**\r\n[\r\n {\r\n  &quot;fruit1&quot;: &quot;x&quot;,\r\n  &quot;fruit2&quot;: &quot;y&quot;,\r\n  &quot;fruit3&quot; &quot;z&quot;,\r\n  &quot;wallet&quot;: {\r\n    &quot;item1&quot;: &quot;a&quot;,\r\n    &quot;item2&quot;: &quot;b&quot;,\r\n    &quot;item3&quot;: &quot;c&quot;}\r\n }\r\n]\r\n\r\n**What I&#39;m getting:**\r\n[\r\n {\r\n  &quot;fruit1&quot;: &quot;x&quot;,\r\n  &quot;fruit2&quot;: &quot;y&quot;,\r\n  &quot;fruit3&quot; &quot;z&quot;,\r\n  &quot;wallet&quot;: {}\r\n }\r\n]\r\n```\r\nMy code currently is like this:\r\n\r\n\r\n**Basket model**\r\n```\r\n@Data\r\n@Entity\r\n@Table(name = &quot;BASKETS&quot;)\r\n public class Basket{\r\n  @Id\r\n  private String owner;\r\n  private String fruit1;\r\n  private String fruit2;\r\n  private String fruit3;\r\n  @Embedded\r\n  private Wallet wallet;\r\n}\r\n```\r\n**Wallet model**\r\n```\r\n@Embeddable\r\npublic class Wallet{\r\n  private String item1;\r\n  private String item2;\r\n  private String item3;\r\n}\r\n```\r\n**Basket Service**\r\n```\r\n@Service\r\npublic class BasketService{\r\n\r\n  @Autowired\r\n  private BasketRepository basketRepo;\r\n\r\n  public List&lt;Basket&gt; find(){\r\n    return basketRepo.findAll();\r\n  }\r\n}\r\n```\r\n**Basket Controller**\r\n```\r\n@RestController\r\n@RequestMapping(value = &quot;/baskets&quot;)\r\npublic class BasketController{\r\n\r\n @Autowired\r\n private BasketRepository basketRepo;\r\n\r\n @Autowired\r\n private BasketService basketService;\r\n\r\n @Autowired\r\n private ModdelMapper mapper;\r\n\r\n  @GetMapping\r\n    public ResponseEntity&lt;List&lt;BasketResponse&gt;&gt; find(){\r\n        var baskets = basketService.find();\r\n        var result = new ArrayList&lt;BasketResponse&gt;();\r\n        for (Basket basket : baskets){\r\n            var basketDTO = mapper.map(basket, BasketResponse.class);\r\n            result.add(basketDTO);\r\n        }\r\n        return ResponseEntity.ok(result);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\nI don&#39;t know what exactly to change, tried to search for a solution, but probably I don&#39;t know how to search for this specifically.","link":"https://stackoverflow.com/questions/77582100/how-to-print-nested-objects-parameters-in-spring-boot-when-using-get-method","title":"How to print nested objects parameters in spring boot when using GET method?","body":"<p>Don't know if I managed to phrase if correctly, but basicaly:</p>\n<ul>\n<li>I have an object &quot;Basket&quot; for example, it has 3 fruits and a wallet inside, the wallet containing more objects in itself.</li>\n<li>When printing the Basket after receiving a GET request, I want not only the fruits and the wallet to be printed, but also what is inside the wallet.</li>\n</ul>\n<pre><code>**What I want:**\n[\n {\n  &quot;fruit1&quot;: &quot;x&quot;,\n  &quot;fruit2&quot;: &quot;y&quot;,\n  &quot;fruit3&quot; &quot;z&quot;,\n  &quot;wallet&quot;: {\n    &quot;item1&quot;: &quot;a&quot;,\n    &quot;item2&quot;: &quot;b&quot;,\n    &quot;item3&quot;: &quot;c&quot;}\n }\n]\n\n**What I'm getting:**\n[\n {\n  &quot;fruit1&quot;: &quot;x&quot;,\n  &quot;fruit2&quot;: &quot;y&quot;,\n  &quot;fruit3&quot; &quot;z&quot;,\n  &quot;wallet&quot;: {}\n }\n]\n</code></pre>\n<p>My code currently is like this:</p>\n<p><strong>Basket model</strong></p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;BASKETS&quot;)\n public class Basket{\n  @Id\n  private String owner;\n  private String fruit1;\n  private String fruit2;\n  private String fruit3;\n  @Embedded\n  private Wallet wallet;\n}\n</code></pre>\n<p><strong>Wallet model</strong></p>\n<pre><code>@Embeddable\npublic class Wallet{\n  private String item1;\n  private String item2;\n  private String item3;\n}\n</code></pre>\n<p><strong>Basket Service</strong></p>\n<pre><code>@Service\npublic class BasketService{\n\n  @Autowired\n  private BasketRepository basketRepo;\n\n  public List&lt;Basket&gt; find(){\n    return basketRepo.findAll();\n  }\n}\n</code></pre>\n<p><strong>Basket Controller</strong></p>\n<pre><code>@RestController\n@RequestMapping(value = &quot;/baskets&quot;)\npublic class BasketController{\n\n @Autowired\n private BasketRepository basketRepo;\n\n @Autowired\n private BasketService basketService;\n\n @Autowired\n private ModdelMapper mapper;\n\n  @GetMapping\n    public ResponseEntity&lt;List&lt;BasketResponse&gt;&gt; find(){\n        var baskets = basketService.find();\n        var result = new ArrayList&lt;BasketResponse&gt;();\n        for (Basket basket : baskets){\n            var basketDTO = mapper.map(basket, BasketResponse.class);\n            result.add(basketDTO);\n        }\n        return ResponseEntity.ok(result);\n    }\n}\n</code></pre>\n<p>I don't know what exactly to change, tried to search for a solution, but probably I don't know how to search for this specifically.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"score":0,"post_type":"question","creation_date":1701438262,"post_id":77578964,"comment_id":136778807,"body_markdown":"Please edit to provide a [mcve]. As written, you&#39;ve shown no code, no data, no behavior, no errors... it&#39;s impossible to answer as written.","link":"https://stackoverflow.com/questions/77578964/springboot-accept-invitation#comment136778807_77578964","body":"Please edit to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. As written, you&#39;ve shown no code, no data, no behavior, no errors... it&#39;s impossible to answer as written."},{"score":0,"post_type":"question","creation_date":1701440533,"post_id":77578964,"comment_id":136779261,"body_markdown":"I added a picture of my function","link":"https://stackoverflow.com/questions/77578964/springboot-accept-invitation#comment136779261_77578964","body":"I added a picture of my function"},{"score":0,"post_type":"question","creation_date":1701440720,"post_id":77578964,"comment_id":136779300,"body_markdown":"Pictures don&#39;t help - you need to provide actual text, properly formatted. See [Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551) Also posting all your code, without any other context, doesn&#39;t help - you still need to explain exactly what&#39;s happening, along with sample input, observed vs expected behavior, etc.","link":"https://stackoverflow.com/questions/77578964/springboot-accept-invitation#comment136779300_77578964","body":"Pictures don&#39;t help - you need to provide actual text, properly formatted. See <a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a> Also posting all your code, without any other context, doesn&#39;t help - you still need to explain exactly what&#39;s happening, along with sample input, observed vs expected behavior, etc."},{"score":0,"post_type":"question","creation_date":1701441348,"post_id":77578964,"comment_id":136779423,"body_markdown":"Is it more clear now?","link":"https://stackoverflow.com/questions/77578964/springboot-accept-invitation#comment136779423_77578964","body":"Is it more clear now?"},{"score":0,"post_type":"question","creation_date":1701445307,"post_id":77578964,"comment_id":136780213,"body_markdown":"I don&#39;t think you&#39;re understanding: you have to *show your work* - you almost got there by posting an image of code, but images don&#39;t help. You then deleted your image without adding your code properly. You need to edit your question and provide properly-formatted code (the code editor is built-in, when you edit your question). Then provide all other details, to help others help you. Not sure I can give any other advice at this point.","link":"https://stackoverflow.com/questions/77578964/springboot-accept-invitation#comment136780213_77578964","body":"I don&#39;t think you&#39;re understanding: you have to <i>show your work</i> - you almost got there by posting an image of code, but images don&#39;t help. You then deleted your image without adding your code properly. You need to edit your question and provide properly-formatted code (the code editor is built-in, when you edit your question). Then provide all other details, to help others help you. Not sure I can give any other advice at this point."}],"comment_count":5,"is_answered":false,"view_count":54,"answer_count":0,"score":0,"last_activity_date":1701447241,"creation_date":1701352000,"last_edit_date":1701447241,"question_id":77578964,"body_markdown":"\r\n\r\nMy project consist of inviting other users to a project , let&#39;s say it&#39;s a project management web app \r\n\r\n-The Invitation is sent via email , when the user is authenticated and logged in the project gets added.Now my problem here and im asking what is the common methods to deal of a user not logged in clicking the invitation link what should i do.\r\n-Redirect the user to login and send invitation again? \r\n-Force the login without user interaction \r\nor is there some other methods . i dont have a problem in code it s just im asking of how to deal with this situation.\r\n\r\nHere is my Code :\r\n\r\n\r\n      public ResponseEntity&lt;String&gt; acceptInvitation(/*Long projectId, String email,*/ String uuid, Principal principal) {\r\n            try {\r\n                // Check if auth\r\n                if (principal == null) {\r\n                    // If not authenticated, redirect to login\r\n                    return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(&quot;Redirect to login page&quot;);\r\n                }\r\n                String authenticatedEmail = principal.getName();\r\n                User authenticatedUser = userRepository.findByEmail(authenticatedEmail)\r\n                        .orElseThrow(() -&gt; new EntityNotFoundException(&quot;Authenticated user not found&quot;));\r\n                \r\n                Invite invitation = invitationRepository.findInviteByInvitationCode(uuid)\r\n                        .orElseThrow(() -&gt; new EntityNotFoundException(&quot;Invitation not found&quot;));\r\n    \r\n                // Check if pending\r\n                if (invitation.getStatus() != Status.pending) {\r\n                    return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(&quot;Invalid invitation status&quot;);\r\n                }\r\n                LocalDateTime now = LocalDateTime.now();\r\n                if (invitation.getCreatedAt().plusHours(24).isBefore(now)) {\r\n                    // check if expired\r\n                    return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(&quot;Invitation has expired&quot;);\r\n                }\r\n                \r\n                User receiver =  userRepository.findByEmail(invitation.getReceiver().getEmail())\r\n                        .orElseThrow(() new EntityNotFoundException(&quot;Receiver user not found&quot;));invitation.setStatus(Status.accepted);\r\n                invitationRepository.save(invitation);\r\n                receiver.addProject(invitation.getProject_inv());\r\n                userRepository.save(receiver);\r\n                return ResponseEntity.ok(&quot;Invitation accepted successfully&quot;);\r\n            }\r\n            catch (Exception e) {\r\n                //logger.error(&quot;Error accepting invitation&quot;, e);\r\n                return \r\n       ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(&quot;Error \r\n    accepting invitation&quot;);\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n\r\nSo Here Im Sending the invitation Code if the user is authenticated then i check if the user exist ,if not throw exception then i get invitation from the invitation code check it satuts if its different from pending and not expired etc if and checkif the receiver exist if it does get the user receiver and add the project to it . Now im asking about the not authenticated part what should i do if the user not logged and clicks on the link.\r\n\r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77578964/springboot-accept-invitation","title":"Springboot accept invitation","body":"<p>My project consist of inviting other users to a project , let's say it's a project management web app</p>\n<p>-The Invitation is sent via email , when the user is authenticated and logged in the project gets added.Now my problem here and im asking what is the common methods to deal of a user not logged in clicking the invitation link what should i do.\n-Redirect the user to login and send invitation again?\n-Force the login without user interaction\nor is there some other methods . i dont have a problem in code it s just im asking of how to deal with this situation.</p>\n<p>Here is my Code :</p>\n<pre><code>  public ResponseEntity&lt;String&gt; acceptInvitation(/*Long projectId, String email,*/ String uuid, Principal principal) {\n        try {\n            // Check if auth\n            if (principal == null) {\n                // If not authenticated, redirect to login\n                return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(&quot;Redirect to login page&quot;);\n            }\n            String authenticatedEmail = principal.getName();\n            User authenticatedUser = userRepository.findByEmail(authenticatedEmail)\n                    .orElseThrow(() -&gt; new EntityNotFoundException(&quot;Authenticated user not found&quot;));\n            \n            Invite invitation = invitationRepository.findInviteByInvitationCode(uuid)\n                    .orElseThrow(() -&gt; new EntityNotFoundException(&quot;Invitation not found&quot;));\n\n            // Check if pending\n            if (invitation.getStatus() != Status.pending) {\n                return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(&quot;Invalid invitation status&quot;);\n            }\n            LocalDateTime now = LocalDateTime.now();\n            if (invitation.getCreatedAt().plusHours(24).isBefore(now)) {\n                // check if expired\n                return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(&quot;Invitation has expired&quot;);\n            }\n            \n            User receiver =  userRepository.findByEmail(invitation.getReceiver().getEmail())\n                    .orElseThrow(() new EntityNotFoundException(&quot;Receiver user not found&quot;));invitation.setStatus(Status.accepted);\n            invitationRepository.save(invitation);\n            receiver.addProject(invitation.getProject_inv());\n            userRepository.save(receiver);\n            return ResponseEntity.ok(&quot;Invitation accepted successfully&quot;);\n        }\n        catch (Exception e) {\n            //logger.error(&quot;Error accepting invitation&quot;, e);\n            return \n   ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(&quot;Error \naccepting invitation&quot;);\n        }\n    }\n</code></pre>\n<p>So Here Im Sending the invitation Code if the user is authenticated then i check if the user exist ,if not throw exception then i get invitation from the invitation code check it satuts if its different from pending and not expired etc if and checkif the receiver exist if it does get the user receiver and add the project to it . Now im asking about the not authenticated part what should i do if the user not logged and clicks on the link.</p>\n"},{"tags":["java","javafx","tableview"],"comments":[{"score":1,"post_type":"question","creation_date":1701333524,"post_id":77576921,"comment_id":136763310,"body_markdown":"JavaFX components support observable properties. You can provide data to your table via ObservableList. Then do your filtering logic on ObservableList. The TableView will update itself accordingly.","link":"https://stackoverflow.com/questions/77576921/java-fx-tableview-access-cell-contents-for-searching#comment136763310_77576921","body":"JavaFX components support observable properties. You can provide data to your table via ObservableList. Then do your filtering logic on ObservableList. The TableView will update itself accordingly."},{"score":4,"post_type":"question","creation_date":1701333583,"post_id":77576921,"comment_id":136763320,"body_markdown":"You should have a model class that you&#39;re using as the item type of your table. Each column would then display one property from that model class, or possibly a value derived from those properties. Then you should have the `items` property of the table set to a `FilteredList`. When the search box updates, set a new filter on the `FilteredList` and the table will update automatically.","link":"https://stackoverflow.com/questions/77576921/java-fx-tableview-access-cell-contents-for-searching#comment136763320_77576921","body":"You should have a model class that you&#39;re using as the item type of your table. Each column would then display one property from that model class, or possibly a value derived from those properties. Then you should have the <code>items</code> property of the table set to a <code>FilteredList</code>. When the search box updates, set a new filter on the <code>FilteredList</code> and the table will update automatically."},{"score":3,"post_type":"question","creation_date":1701340107,"post_id":77576921,"comment_id":136764477,"body_markdown":"*”I want to search the cells content directly, not just the data”*. This doesn’t really make sense. Cells are only created for the visible portion of the data. If you used these for filtering, your filtering would not be able to consider data scrolled out of view, for example.","link":"https://stackoverflow.com/questions/77576921/java-fx-tableview-access-cell-contents-for-searching#comment136764477_77576921","body":"<i>”I want to search the cells content directly, not just the data”</i>. This doesn’t really make sense. Cells are only created for the visible portion of the data. If you used these for filtering, your filtering would not be able to consider data scrolled out of view, for example."},{"score":2,"post_type":"question","creation_date":1701353567,"post_id":77576921,"comment_id":136767068,"body_markdown":"It might help to create a [mre] demonstrating the issue. Just a small application with a table with one or two columns, and indicate where the scalability problem (the *&quot;which is tedious and time consuming ...&quot;* part) lies.","link":"https://stackoverflow.com/questions/77576921/java-fx-tableview-access-cell-contents-for-searching#comment136767068_77576921","body":"It might help to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the issue. Just a small application with a table with one or two columns, and indicate where the scalability problem (the <i>&quot;which is tedious and time consuming ...&quot;</i> part) lies."},{"score":0,"post_type":"question","creation_date":1701377066,"post_id":77576921,"comment_id":136771492,"body_markdown":"You mention *&quot;a boolean is represented as a checkbox with no text, which would not match the search &quot;false&quot;, the toString() method however would)&quot;* -&gt; I suggest creating a question (with the requested [mcve]), which demonstrates just the problem and making it clear what the requirements for that problem are.  For example, would the match to &quot;false&quot; be case insensitive, how would &quot;Y&quot; or &quot;N&quot; values be handled, etc.","link":"https://stackoverflow.com/questions/77576921/java-fx-tableview-access-cell-contents-for-searching#comment136771492_77576921","body":"You mention <i>&quot;a boolean is represented as a checkbox with no text, which would not match the search &quot;false&quot;, the toString() method however would)&quot;</i> -&gt; I suggest creating a question (with the requested <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>), which demonstrates just the problem and making it clear what the requirements for that problem are.  For example, would the match to &quot;false&quot; be case insensitive, how would &quot;Y&quot; or &quot;N&quot; values be handled, etc."}],"answers":[{"comment_count":0,"score":3,"last_activity_date":1701361362,"creation_date":1701361362,"answer_id":77580029,"question_id":77576921,"body_markdown":"If I understand you correctly, you need to use `OR`/`||` in your filter. It&#39;s hard to know given that you posted zero code.\r\n\r\n```\r\nimport javafx.application.Application;\r\nimport javafx.beans.property.SimpleStringProperty;\r\nimport javafx.collections.FXCollections;\r\nimport javafx.collections.ObservableList;\r\nimport javafx.collections.transformation.FilteredList;\r\nimport javafx.geometry.Insets;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.control.TableColumn;\r\nimport javafx.scene.control.TableView;\r\nimport javafx.scene.control.TextField;\r\nimport javafx.scene.control.cell.PropertyValueFactory;\r\nimport javafx.scene.layout.VBox;\r\nimport javafx.scene.text.Font;\r\nimport javafx.stage.Stage;\r\n\r\npublic class App extends Application\r\n{\r\n\r\n    private final TableView&lt;Person&gt; table = new TableView();\r\n    private final ObservableList&lt;Person&gt; data = FXCollections.observableArrayList(\r\n                                                    new Person(&quot;Jane&quot;, &quot;Smith&quot;, &quot;jacob.smith@example.com&quot;),\r\n                                                    new Person(&quot;Isabella&quot;, &quot;Jane&quot;, &quot;isabella.johnson@example.com&quot;),\r\n                                                    new Person(&quot;Ethan&quot;, &quot;Williams&quot;, &quot;ethan.Jane@example.com&quot;),\r\n                                                    new Person(&quot;Emma&quot;, &quot;Jones&quot;, &quot;emma.jones@example.com&quot;),\r\n                                                    new Person(&quot;Michael&quot;, &quot;Brown&quot;, &quot;michael.brown@example.com&quot;)\r\n                                                );\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        launch(args);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage stage)\r\n    {\r\n        stage.setTitle(&quot;Table View Sample&quot;);\r\n        stage.setWidth(450);\r\n        stage.setHeight(550);\r\n\r\n        Label label = new Label(&quot;Address Book&quot;);\r\n        label.setFont(new Font(&quot;Arial&quot;, 20));\r\n\r\n        TableColumn firstNameCol = new TableColumn(&quot;First Name&quot;);\r\n        firstNameCol.setMinWidth(100);\r\n        firstNameCol.setCellValueFactory(new PropertyValueFactory&lt;Person, String&gt;(&quot;firstName&quot;));\r\n\r\n        TableColumn lastNameCol = new TableColumn(&quot;Last Name&quot;);\r\n        lastNameCol.setMinWidth(100);\r\n        lastNameCol.setCellValueFactory(new PropertyValueFactory&lt;Person, String&gt;(&quot;lastName&quot;));\r\n\r\n        TableColumn emailCol = new TableColumn(&quot;Email&quot;);\r\n        emailCol.setMinWidth(200);\r\n        emailCol.setCellValueFactory(new PropertyValueFactory&lt;Person, String&gt;(&quot;email&quot;));\r\n\r\n        FilteredList&lt;Person&gt; flPerson = new FilteredList(data, p -&gt; true);//Pass the data to a filtered list\r\n        table.setItems(flPerson);//Set the table&#39;s items using the filtered list\r\n        table.getColumns().addAll(firstNameCol, lastNameCol, emailCol);\r\n\r\n        TextField textField = new TextField();\r\n        textField.setPromptText(&quot;Search here!&quot;);\r\n        textField.textProperty().addListener((obs, oldValue, newValue) -&gt; {\r\n            flPerson.setPredicate((p) -&gt; {\r\n                return p.getFirstName().toLowerCase().contains(newValue.toLowerCase().trim()) || \r\n                p.getLastName().toLowerCase().contains(newValue.toLowerCase().trim()) ||\r\n                p.getEmail().toLowerCase().contains(newValue.toLowerCase().trim());           \r\n            });\r\n        });\r\n            \r\n        final VBox root = new VBox();\r\n        root.setSpacing(5);\r\n        root.setPadding(new Insets(10, 0, 0, 10));\r\n        root.getChildren().addAll(label, table, textField);\r\n\r\n        Scene scene = new Scene(root);\r\n\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n                \r\n    public static class Person\r\n    {\r\n        private final SimpleStringProperty firstName = new SimpleStringProperty();\r\n        private final SimpleStringProperty lastName = new SimpleStringProperty();\r\n        private final SimpleStringProperty email = new SimpleStringProperty();\r\n\r\n        private Person(String fName, String lName, String email)\r\n        {\r\n            this.firstName.setValue(fName);\r\n            this.lastName.setValue(lName);\r\n            this.email.setValue(email);\r\n        }\r\n\r\n        public String getFirstName()\r\n        {\r\n            return firstName.get();\r\n        }\r\n\r\n        public void setFirstName(String fName)\r\n        {\r\n            firstName.set(fName);\r\n        }\r\n        \r\n        public SimpleStringProperty getFirstNameProperty()\r\n        {\r\n            return firstName;\r\n        }\r\n        \r\n        public String getLastName()\r\n        {\r\n            return lastName.get();\r\n        }\r\n\r\n        public void setLastName(String fName)\r\n        {\r\n            lastName.set(fName);\r\n        }\r\n\r\n        public SimpleStringProperty getLastNameProperty()\r\n        {\r\n            return lastName;\r\n        }\r\n        \r\n        public String getEmail()\r\n        {\r\n            return email.get();\r\n        }\r\n\r\n        public void setEmail(String fName)\r\n        {\r\n            email.set(fName);\r\n        }\r\n        \r\n        public SimpleStringProperty getEmailProperty()\r\n        {\r\n            return email;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAltered code from https://stackoverflow.com/a/47560767/2423906\r\n\r\n**Output**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OaCGa.gif","link":"https://stackoverflow.com/questions/77576921/java-fx-tableview-access-cell-contents-for-searching/77580029#77580029","title":"(Java FX) TableView access cell contents for searching","body":"<p>If I understand you correctly, you need to use <code>OR</code>/<code>||</code> in your filter. It's hard to know given that you posted zero code.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.collections.transformation.FilteredList;\nimport javafx.geometry.Insets;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.scene.control.TextField;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.VBox;\nimport javafx.scene.text.Font;\nimport javafx.stage.Stage;\n\npublic class App extends Application\n{\n\n    private final TableView&lt;Person&gt; table = new TableView();\n    private final ObservableList&lt;Person&gt; data = FXCollections.observableArrayList(\n                                                    new Person(&quot;Jane&quot;, &quot;Smith&quot;, &quot;jacob.smith@example.com&quot;),\n                                                    new Person(&quot;Isabella&quot;, &quot;Jane&quot;, &quot;isabella.johnson@example.com&quot;),\n                                                    new Person(&quot;Ethan&quot;, &quot;Williams&quot;, &quot;ethan.Jane@example.com&quot;),\n                                                    new Person(&quot;Emma&quot;, &quot;Jones&quot;, &quot;emma.jones@example.com&quot;),\n                                                    new Person(&quot;Michael&quot;, &quot;Brown&quot;, &quot;michael.brown@example.com&quot;)\n                                                );\n\n    public static void main(String[] args)\n    {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage stage)\n    {\n        stage.setTitle(&quot;Table View Sample&quot;);\n        stage.setWidth(450);\n        stage.setHeight(550);\n\n        Label label = new Label(&quot;Address Book&quot;);\n        label.setFont(new Font(&quot;Arial&quot;, 20));\n\n        TableColumn firstNameCol = new TableColumn(&quot;First Name&quot;);\n        firstNameCol.setMinWidth(100);\n        firstNameCol.setCellValueFactory(new PropertyValueFactory&lt;Person, String&gt;(&quot;firstName&quot;));\n\n        TableColumn lastNameCol = new TableColumn(&quot;Last Name&quot;);\n        lastNameCol.setMinWidth(100);\n        lastNameCol.setCellValueFactory(new PropertyValueFactory&lt;Person, String&gt;(&quot;lastName&quot;));\n\n        TableColumn emailCol = new TableColumn(&quot;Email&quot;);\n        emailCol.setMinWidth(200);\n        emailCol.setCellValueFactory(new PropertyValueFactory&lt;Person, String&gt;(&quot;email&quot;));\n\n        FilteredList&lt;Person&gt; flPerson = new FilteredList(data, p -&gt; true);//Pass the data to a filtered list\n        table.setItems(flPerson);//Set the table's items using the filtered list\n        table.getColumns().addAll(firstNameCol, lastNameCol, emailCol);\n\n        TextField textField = new TextField();\n        textField.setPromptText(&quot;Search here!&quot;);\n        textField.textProperty().addListener((obs, oldValue, newValue) -&gt; {\n            flPerson.setPredicate((p) -&gt; {\n                return p.getFirstName().toLowerCase().contains(newValue.toLowerCase().trim()) || \n                p.getLastName().toLowerCase().contains(newValue.toLowerCase().trim()) ||\n                p.getEmail().toLowerCase().contains(newValue.toLowerCase().trim());           \n            });\n        });\n            \n        final VBox root = new VBox();\n        root.setSpacing(5);\n        root.setPadding(new Insets(10, 0, 0, 10));\n        root.getChildren().addAll(label, table, textField);\n\n        Scene scene = new Scene(root);\n\n        stage.setScene(scene);\n        stage.show();\n    }\n                \n    public static class Person\n    {\n        private final SimpleStringProperty firstName = new SimpleStringProperty();\n        private final SimpleStringProperty lastName = new SimpleStringProperty();\n        private final SimpleStringProperty email = new SimpleStringProperty();\n\n        private Person(String fName, String lName, String email)\n        {\n            this.firstName.setValue(fName);\n            this.lastName.setValue(lName);\n            this.email.setValue(email);\n        }\n\n        public String getFirstName()\n        {\n            return firstName.get();\n        }\n\n        public void setFirstName(String fName)\n        {\n            firstName.set(fName);\n        }\n        \n        public SimpleStringProperty getFirstNameProperty()\n        {\n            return firstName;\n        }\n        \n        public String getLastName()\n        {\n            return lastName.get();\n        }\n\n        public void setLastName(String fName)\n        {\n            lastName.set(fName);\n        }\n\n        public SimpleStringProperty getLastNameProperty()\n        {\n            return lastName;\n        }\n        \n        public String getEmail()\n        {\n            return email.get();\n        }\n\n        public void setEmail(String fName)\n        {\n            email.set(fName);\n        }\n        \n        public SimpleStringProperty getEmailProperty()\n        {\n            return email;\n        }\n    }\n}\n</code></pre>\n<p>Altered code from <a href=\"https://stackoverflow.com/a/47560767/2423906\">https://stackoverflow.com/a/47560767/2423906</a></p>\n<p><strong>Output</strong></p>\n<p><a href=\"https://i.stack.imgur.com/OaCGa.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OaCGa.gif\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701681383,"post_id":77581200,"comment_id":136801368,"body_markdown":"Thank you, this was indeed what I was asking and it seems to be the best way to solve my problem. And you are right: It is just tedious to refactor all the columns that are already implemented, not ones added in the future.","link":"https://stackoverflow.com/questions/77576921/java-fx-tableview-access-cell-contents-for-searching/77581200#comment136801368_77581200","body":"Thank you, this was indeed what I was asking and it seems to be the best way to solve my problem. And you are right: It is just tedious to refactor all the columns that are already implemented, not ones added in the future."}],"comment_count":1,"score":3,"last_activity_date":1701443963,"last_edit_date":1701443963,"creation_date":1701372525,"answer_id":77581200,"question_id":77576921,"body_markdown":"It&#39;s not entirely clear to me what you&#39;re asking, but it seems you want to filter a table view by the text actually displayed in the cells, without replicating code between the filter and the cell. There seems to be some concern that factoring this out into some external representation is not scalable:\r\n\r\n&gt; storing all the converters manually (which is tedious and time consuming, because there are a lot of different Entities)\r\n\r\nI dispute this assertion: the &quot;converter&quot; is just a function from the property type to a `String` which can be succinctly expressed as either a lambda expression or a method reference. Given you need to specify this at least once for each property no matter what you do, there seems to be no scalability issue to reuse this.\r\n\r\nFor example, given a model class for your table data which I&#39;ll call `Friend` (shown later), you can define\r\n\r\n\r\n```\r\nprivate record ColumnSpec&lt;T&gt;(String title, Function&lt;Friend, ObservableValue&lt;T&gt;&gt; property, Function&lt;T, String&gt; formatter) {}\r\n```\r\n\r\nand create a list of these, one for each column:\r\n\r\n        List&lt;ColumnSpec&lt;?&gt;&gt; columns = List.of(\r\n                new ColumnSpec&lt;&gt;(&quot;First Name&quot;, Friend::firstNameProperty, Function.identity()),\r\n                new ColumnSpec&lt;&gt;(&quot;Last Name&quot;, Friend::lastNameProperty, Function.identity()),\r\n                new ColumnSpec&lt;&gt;( &quot;Email&quot;, Friend::emailProperty, String::toLowerCase),\r\n                new ColumnSpec&lt;&gt;(&quot;Birthday&quot;, Friend::birthdayProperty, formatter::format)\r\n        );\r\n\r\nThen you can easily create filtering which reference these:\r\n\r\n    private &lt;T&gt; boolean match(Friend friend, ColumnSpec&lt;T&gt; column, String searchText) {\r\n        T propertyValue = column.property().apply(friend).getValue();\r\n        String formattedValue = column.formatter().apply(propertyValue);\r\n        return formattedValue.contains(searchText);\r\n    }\r\n\r\nwith, for example,\r\n\r\n        ObservableList&lt;Friend&gt; allFriends = FXCollections.observableArrayList();\r\n        FilteredList&lt;Friend&gt; filteredFriends = allFriends.filtered(f -&gt; true);\r\n        table.setItems(filteredFriends);\r\n\r\n        TextField searchField = new TextField();\r\n        searchField.textProperty().addListener((obs, oldSearch, newSearch) -&gt; {\r\n            String search = newSearch.trim();\r\n            if (search.isBlank()) {\r\n                filteredFriends.setPredicate(friend -&gt; true);\r\n            } else {\r\n                filteredFriends.setPredicate(friend -&gt; {\r\n                    for (ColumnSpec&lt;?&gt; column : columns) {\r\n                        if (match(friend, column, search)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    return false;\r\n                });\r\n            }\r\n        });\r\n\r\nand you can additionally create the columns from them:\r\n\r\n    private &lt;T&gt; TableColumn&lt;Friend, T&gt; createColumn(ColumnSpec&lt;T&gt; col) {\r\n        TableColumn&lt;Friend, T&gt; column = new TableColumn&lt;&gt;(col.title());\r\n        column.setCellValueFactory(data -&gt; col.property().apply(data.getValue()));\r\n        column.setCellFactory(tc -&gt; new TableCell&lt;&gt;() {\r\n            @Override\r\n            protected void updateItem(T item, boolean empty) {\r\n                super.updateItem(item, empty);\r\n                if (empty || item == null) {\r\n                    setText(&quot;&quot;);\r\n                } else {\r\n                    setText(col.formatter().apply(item));\r\n                }\r\n            }\r\n        });\r\n        return column;\r\n    }\r\n\r\nwith\r\n\r\n        for (ColumnSpec&lt;?&gt; column : columns) {\r\n            table.getColumns().add(createColumn(column));\r\n        }\r\n\r\n\r\nThe chunk of code that begins `List&lt;ColumnSpec&gt; columns =` has `O(n)` lines of code (each being pretty succinct) for `n` columns, and the remaining code is identical no matter how many columns you have.\r\n\r\nHere is a complete example, which is just a minor adaptation of [another answer in this post](https://stackoverflow.com/a/77580029/2189127):\r\n\r\n```\r\npackage org.jamesd.examples.tabledemo;\r\n\r\nimport javafx.beans.property.ObjectProperty;\r\nimport javafx.beans.property.SimpleObjectProperty;\r\nimport javafx.beans.property.SimpleStringProperty;\r\nimport javafx.beans.property.StringProperty;\r\n\r\nimport java.time.LocalDate;\r\n\r\npublic class Friend {\r\n    private final StringProperty firstName = new SimpleStringProperty();\r\n    private final StringProperty lastName = new SimpleStringProperty();\r\n    private final StringProperty email = new SimpleStringProperty();\r\n    private final ObjectProperty&lt;LocalDate&gt; birthday = new SimpleObjectProperty&lt;&gt;();\r\n\r\n    public Friend(String firstName, String lastName, String email, LocalDate birthday) {\r\n        setFirstName(firstName);\r\n        setLastName(lastName);\r\n        setEmail(email);\r\n        setBirthday(birthday);\r\n    }\r\n\r\n    public final String getFirstName() {\r\n        return firstNameProperty().get();\r\n    }\r\n\r\n    public StringProperty firstNameProperty() {\r\n        return firstName;\r\n    }\r\n\r\n    public final void setFirstName(String firstName) {\r\n        this.firstNameProperty().set(firstName);\r\n    }\r\n\r\n    public final String getLastName() {\r\n        return lastNameProperty().get();\r\n    }\r\n\r\n    public StringProperty lastNameProperty() {\r\n        return lastName;\r\n    }\r\n\r\n    public final void setLastName(String lastName) {\r\n        this.lastNameProperty().set(lastName);\r\n    }\r\n\r\n    public final LocalDate getBirthday() {\r\n        return birthdayProperty().get();\r\n    }\r\n\r\n    public ObjectProperty&lt;LocalDate&gt; birthdayProperty() {\r\n        return birthday;\r\n    }\r\n\r\n    public final void setBirthday(LocalDate birthday) {\r\n        this.birthdayProperty().set(birthday);\r\n    }\r\n\r\n    public final String getEmail() {\r\n        return emailProperty().get();\r\n    }\r\n\r\n    public StringProperty emailProperty() {\r\n        return email;\r\n    }\r\n\r\n    public final void setEmail(String email) {\r\n        this.emailProperty().set(email);\r\n    }\r\n}\r\n``` \r\n\r\n```\r\npackage org.jamesd.examples.tabledemo;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.beans.value.ObservableValue;\r\nimport javafx.collections.FXCollections;\r\nimport javafx.collections.ObservableList;\r\nimport javafx.collections.transformation.FilteredList;\r\nimport javafx.geometry.Insets;\r\nimport javafx.geometry.Pos;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.TableCell;\r\nimport javafx.scene.control.TableColumn;\r\nimport javafx.scene.control.TableView;\r\nimport javafx.scene.control.TextField;\r\nimport javafx.scene.layout.BorderPane;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.time.LocalDate;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.List;\r\nimport java.util.function.Function;\r\n\r\npublic class HelloApplication extends Application {\r\n\r\n    private record ColumnSpec&lt;T&gt;(String title, Function&lt;Friend, ObservableValue&lt;T&gt;&gt; property, Function&lt;T, String&gt; formatter) {}\r\n\r\n    @Override\r\n    public void start(Stage stage) {\r\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;YYYY-MM-dd&quot;);\r\n        List&lt;ColumnSpec&gt; columns = List.of(\r\n                new ColumnSpec&lt;&gt;(&quot;First Name&quot;, Friend::firstNameProperty, Function.identity()),\r\n                new ColumnSpec&lt;&gt;(&quot;Last Name&quot;, Friend::lastNameProperty, Function.identity()),\r\n                new ColumnSpec&lt;&gt;( &quot;Email&quot;, Friend::emailProperty, String::toLowerCase),\r\n                new ColumnSpec&lt;&gt;(&quot;Birthday&quot;, Friend::birthdayProperty, formatter::format)\r\n        );\r\n\r\n        TableView&lt;Friend&gt; table = new TableView&lt;&gt;();\r\n        ObservableList&lt;Friend&gt; allFriends = FXCollections.observableArrayList();\r\n        FilteredList&lt;Friend&gt; filteredFriends = allFriends.filtered(f -&gt; true);\r\n        table.setItems(filteredFriends);\r\n\r\n        TextField searchField = new TextField();\r\n        searchField.textProperty().addListener((obs, oldSearch, newSearch) -&gt; {\r\n            String search = newSearch.trim();\r\n            if (search.isBlank()) {\r\n                filteredFriends.setPredicate(friend -&gt; true);\r\n            } else {\r\n                filteredFriends.setPredicate(friend -&gt; {\r\n                    for (ColumnSpec&lt;?&gt; column : columns) {\r\n                        if (match(friend, column, search)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    return false;\r\n                });\r\n            }\r\n        });\r\n\r\n        for (ColumnSpec&lt;?&gt; column : columns) {\r\n            table.getColumns().add(createColumn(column));\r\n        }\r\n\r\n        allFriends.setAll(\r\n                new Friend(&quot;Jane&quot;, &quot;Smith&quot;, &quot;jacob.smith@example.com&quot;, LocalDate.of(2001, 5, 30)),\r\n                new Friend(&quot;Isabella&quot;, &quot;Jane&quot;, &quot;isabella.johnson@example.com&quot;, LocalDate.of(2003, 3, 25)),\r\n                new Friend(&quot;Ethan&quot;, &quot;Williams&quot;, &quot;ethan.Jane@example.com&quot;, LocalDate.of(1995, 3, 25)),\r\n                new Friend(&quot;Emma&quot;, &quot;Jones&quot;, &quot;emma.jones@example.com&quot;, LocalDate.of(2005, 5, 3)),\r\n                new Friend(&quot;Michael&quot;, &quot;Brown&quot;, &quot;michael.brown@example.com&quot;, LocalDate.of(1998, 10, 5))\r\n        );\r\n\r\n        BorderPane root = new BorderPane(table);\r\n        root.setTop(searchField);\r\n        BorderPane.setAlignment(searchField, Pos.CENTER);\r\n        BorderPane.setMargin(searchField, new Insets(5));\r\n        root.setPadding(new Insets(5));\r\n        Scene scene = new Scene(root, 600, 400);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n\r\n    private &lt;T&gt; boolean match(Friend friend, ColumnSpec&lt;T&gt; column, String searchText) {\r\n        T propertyValue = column.property().apply(friend).getValue();\r\n        String formattedValue = column.formatter().apply(propertyValue);\r\n        return formattedValue.contains(searchText);\r\n    }\r\n\r\n    private &lt;T&gt; TableColumn&lt;Friend, T&gt; createColumn(ColumnSpec&lt;T&gt; col) {\r\n        TableColumn&lt;Friend, T&gt; column = new TableColumn&lt;&gt;(col.title());\r\n        column.setCellValueFactory(data -&gt; col.property().apply(data.getValue()));\r\n        column.setCellFactory(tc -&gt; new TableCell&lt;&gt;() {\r\n            @Override\r\n            protected void updateItem(T item, boolean empty) {\r\n                super.updateItem(item, empty);\r\n                if (empty || item == null) {\r\n                    setText(&quot;&quot;);\r\n                } else {\r\n                    setText(col.formatter().apply(item));\r\n                }\r\n            }\r\n        });\r\n        return column;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n}\r\n```","link":"https://stackoverflow.com/questions/77576921/java-fx-tableview-access-cell-contents-for-searching/77581200#77581200","title":"(Java FX) TableView access cell contents for searching","body":"<p>It's not entirely clear to me what you're asking, but it seems you want to filter a table view by the text actually displayed in the cells, without replicating code between the filter and the cell. There seems to be some concern that factoring this out into some external representation is not scalable:</p>\n<blockquote>\n<p>storing all the converters manually (which is tedious and time consuming, because there are a lot of different Entities)</p>\n</blockquote>\n<p>I dispute this assertion: the &quot;converter&quot; is just a function from the property type to a <code>String</code> which can be succinctly expressed as either a lambda expression or a method reference. Given you need to specify this at least once for each property no matter what you do, there seems to be no scalability issue to reuse this.</p>\n<p>For example, given a model class for your table data which I'll call <code>Friend</code> (shown later), you can define</p>\n<pre><code>private record ColumnSpec&lt;T&gt;(String title, Function&lt;Friend, ObservableValue&lt;T&gt;&gt; property, Function&lt;T, String&gt; formatter) {}\n</code></pre>\n<p>and create a list of these, one for each column:</p>\n<pre><code>    List&lt;ColumnSpec&lt;?&gt;&gt; columns = List.of(\n            new ColumnSpec&lt;&gt;(&quot;First Name&quot;, Friend::firstNameProperty, Function.identity()),\n            new ColumnSpec&lt;&gt;(&quot;Last Name&quot;, Friend::lastNameProperty, Function.identity()),\n            new ColumnSpec&lt;&gt;( &quot;Email&quot;, Friend::emailProperty, String::toLowerCase),\n            new ColumnSpec&lt;&gt;(&quot;Birthday&quot;, Friend::birthdayProperty, formatter::format)\n    );\n</code></pre>\n<p>Then you can easily create filtering which reference these:</p>\n<pre><code>private &lt;T&gt; boolean match(Friend friend, ColumnSpec&lt;T&gt; column, String searchText) {\n    T propertyValue = column.property().apply(friend).getValue();\n    String formattedValue = column.formatter().apply(propertyValue);\n    return formattedValue.contains(searchText);\n}\n</code></pre>\n<p>with, for example,</p>\n<pre><code>    ObservableList&lt;Friend&gt; allFriends = FXCollections.observableArrayList();\n    FilteredList&lt;Friend&gt; filteredFriends = allFriends.filtered(f -&gt; true);\n    table.setItems(filteredFriends);\n\n    TextField searchField = new TextField();\n    searchField.textProperty().addListener((obs, oldSearch, newSearch) -&gt; {\n        String search = newSearch.trim();\n        if (search.isBlank()) {\n            filteredFriends.setPredicate(friend -&gt; true);\n        } else {\n            filteredFriends.setPredicate(friend -&gt; {\n                for (ColumnSpec&lt;?&gt; column : columns) {\n                    if (match(friend, column, search)) {\n                        return true;\n                    }\n                }\n                return false;\n            });\n        }\n    });\n</code></pre>\n<p>and you can additionally create the columns from them:</p>\n<pre><code>private &lt;T&gt; TableColumn&lt;Friend, T&gt; createColumn(ColumnSpec&lt;T&gt; col) {\n    TableColumn&lt;Friend, T&gt; column = new TableColumn&lt;&gt;(col.title());\n    column.setCellValueFactory(data -&gt; col.property().apply(data.getValue()));\n    column.setCellFactory(tc -&gt; new TableCell&lt;&gt;() {\n        @Override\n        protected void updateItem(T item, boolean empty) {\n            super.updateItem(item, empty);\n            if (empty || item == null) {\n                setText(&quot;&quot;);\n            } else {\n                setText(col.formatter().apply(item));\n            }\n        }\n    });\n    return column;\n}\n</code></pre>\n<p>with</p>\n<pre><code>    for (ColumnSpec&lt;?&gt; column : columns) {\n        table.getColumns().add(createColumn(column));\n    }\n</code></pre>\n<p>The chunk of code that begins <code>List&lt;ColumnSpec&gt; columns =</code> has <code>O(n)</code> lines of code (each being pretty succinct) for <code>n</code> columns, and the remaining code is identical no matter how many columns you have.</p>\n<p>Here is a complete example, which is just a minor adaptation of <a href=\"https://stackoverflow.com/a/77580029/2189127\">another answer in this post</a>:</p>\n<pre><code>package org.jamesd.examples.tabledemo;\n\nimport javafx.beans.property.ObjectProperty;\nimport javafx.beans.property.SimpleObjectProperty;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.beans.property.StringProperty;\n\nimport java.time.LocalDate;\n\npublic class Friend {\n    private final StringProperty firstName = new SimpleStringProperty();\n    private final StringProperty lastName = new SimpleStringProperty();\n    private final StringProperty email = new SimpleStringProperty();\n    private final ObjectProperty&lt;LocalDate&gt; birthday = new SimpleObjectProperty&lt;&gt;();\n\n    public Friend(String firstName, String lastName, String email, LocalDate birthday) {\n        setFirstName(firstName);\n        setLastName(lastName);\n        setEmail(email);\n        setBirthday(birthday);\n    }\n\n    public final String getFirstName() {\n        return firstNameProperty().get();\n    }\n\n    public StringProperty firstNameProperty() {\n        return firstName;\n    }\n\n    public final void setFirstName(String firstName) {\n        this.firstNameProperty().set(firstName);\n    }\n\n    public final String getLastName() {\n        return lastNameProperty().get();\n    }\n\n    public StringProperty lastNameProperty() {\n        return lastName;\n    }\n\n    public final void setLastName(String lastName) {\n        this.lastNameProperty().set(lastName);\n    }\n\n    public final LocalDate getBirthday() {\n        return birthdayProperty().get();\n    }\n\n    public ObjectProperty&lt;LocalDate&gt; birthdayProperty() {\n        return birthday;\n    }\n\n    public final void setBirthday(LocalDate birthday) {\n        this.birthdayProperty().set(birthday);\n    }\n\n    public final String getEmail() {\n        return emailProperty().get();\n    }\n\n    public StringProperty emailProperty() {\n        return email;\n    }\n\n    public final void setEmail(String email) {\n        this.emailProperty().set(email);\n    }\n}\n</code></pre>\n<pre><code>package org.jamesd.examples.tabledemo;\n\nimport javafx.application.Application;\nimport javafx.beans.value.ObservableValue;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.collections.transformation.FilteredList;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.TableCell;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.BorderPane;\nimport javafx.stage.Stage;\n\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.util.List;\nimport java.util.function.Function;\n\npublic class HelloApplication extends Application {\n\n    private record ColumnSpec&lt;T&gt;(String title, Function&lt;Friend, ObservableValue&lt;T&gt;&gt; property, Function&lt;T, String&gt; formatter) {}\n\n    @Override\n    public void start(Stage stage) {\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;YYYY-MM-dd&quot;);\n        List&lt;ColumnSpec&gt; columns = List.of(\n                new ColumnSpec&lt;&gt;(&quot;First Name&quot;, Friend::firstNameProperty, Function.identity()),\n                new ColumnSpec&lt;&gt;(&quot;Last Name&quot;, Friend::lastNameProperty, Function.identity()),\n                new ColumnSpec&lt;&gt;( &quot;Email&quot;, Friend::emailProperty, String::toLowerCase),\n                new ColumnSpec&lt;&gt;(&quot;Birthday&quot;, Friend::birthdayProperty, formatter::format)\n        );\n\n        TableView&lt;Friend&gt; table = new TableView&lt;&gt;();\n        ObservableList&lt;Friend&gt; allFriends = FXCollections.observableArrayList();\n        FilteredList&lt;Friend&gt; filteredFriends = allFriends.filtered(f -&gt; true);\n        table.setItems(filteredFriends);\n\n        TextField searchField = new TextField();\n        searchField.textProperty().addListener((obs, oldSearch, newSearch) -&gt; {\n            String search = newSearch.trim();\n            if (search.isBlank()) {\n                filteredFriends.setPredicate(friend -&gt; true);\n            } else {\n                filteredFriends.setPredicate(friend -&gt; {\n                    for (ColumnSpec&lt;?&gt; column : columns) {\n                        if (match(friend, column, search)) {\n                            return true;\n                        }\n                    }\n                    return false;\n                });\n            }\n        });\n\n        for (ColumnSpec&lt;?&gt; column : columns) {\n            table.getColumns().add(createColumn(column));\n        }\n\n        allFriends.setAll(\n                new Friend(&quot;Jane&quot;, &quot;Smith&quot;, &quot;jacob.smith@example.com&quot;, LocalDate.of(2001, 5, 30)),\n                new Friend(&quot;Isabella&quot;, &quot;Jane&quot;, &quot;isabella.johnson@example.com&quot;, LocalDate.of(2003, 3, 25)),\n                new Friend(&quot;Ethan&quot;, &quot;Williams&quot;, &quot;ethan.Jane@example.com&quot;, LocalDate.of(1995, 3, 25)),\n                new Friend(&quot;Emma&quot;, &quot;Jones&quot;, &quot;emma.jones@example.com&quot;, LocalDate.of(2005, 5, 3)),\n                new Friend(&quot;Michael&quot;, &quot;Brown&quot;, &quot;michael.brown@example.com&quot;, LocalDate.of(1998, 10, 5))\n        );\n\n        BorderPane root = new BorderPane(table);\n        root.setTop(searchField);\n        BorderPane.setAlignment(searchField, Pos.CENTER);\n        BorderPane.setMargin(searchField, new Insets(5));\n        root.setPadding(new Insets(5));\n        Scene scene = new Scene(root, 600, 400);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    private &lt;T&gt; boolean match(Friend friend, ColumnSpec&lt;T&gt; column, String searchText) {\n        T propertyValue = column.property().apply(friend).getValue();\n        String formattedValue = column.formatter().apply(propertyValue);\n        return formattedValue.contains(searchText);\n    }\n\n    private &lt;T&gt; TableColumn&lt;Friend, T&gt; createColumn(ColumnSpec&lt;T&gt; col) {\n        TableColumn&lt;Friend, T&gt; column = new TableColumn&lt;&gt;(col.title());\n        column.setCellValueFactory(data -&gt; col.property().apply(data.getValue()));\n        column.setCellFactory(tc -&gt; new TableCell&lt;&gt;() {\n            @Override\n            protected void updateItem(T item, boolean empty) {\n                super.updateItem(item, empty);\n                if (empty || item == null) {\n                    setText(&quot;&quot;);\n                } else {\n                    setText(col.formatter().apply(item));\n                }\n            }\n        });\n        return column;\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n}\n</code></pre>\n"}],"comment_count":5,"is_answered":true,"view_count":76,"answer_count":2,"score":0,"last_activity_date":1701443963,"creation_date":1701332894,"last_edit_date":1701338479,"question_id":77576921,"body_markdown":"I am currently working on implementing a search box, which should search through all rows and columns of a (Filtered)TableView. I want the search box to filter items directly in the table and only show rows where the search-string matches any of the text in any of the currently displayed columns (as a user would expect).\r\n\r\nHerein lies my problem: I want to search **the cells content directly, not just the data**. \r\nI can&#39;t use toString() for each data object, because toString() and the displayed value may vastly differ (f.e. a boolean is represented as a checkbox with no text, which would not match the search &quot;false&quot;, the toString() method however would). \r\nI tried generating an empty cell with the cellValueFactory for each column and filling it with data, but I can&#39;t access the updateItem()-Method (it&#39;s protected), which generates the cell and according to the docs I shouldn&#39;t do that anyway.\r\n\r\n\r\nOther than implementing a cell, which makes updateItem() public (which probably shouldn&#39;t be done), or storing all the converters manually (which is tedious and time consuming, because there are a lot of different Entities), do you know of any better solution for searching in a tableView?","link":"https://stackoverflow.com/questions/77576921/java-fx-tableview-access-cell-contents-for-searching","title":"(Java FX) TableView access cell contents for searching","body":"<p>I am currently working on implementing a search box, which should search through all rows and columns of a (Filtered)TableView. I want the search box to filter items directly in the table and only show rows where the search-string matches any of the text in any of the currently displayed columns (as a user would expect).</p>\n<p>Herein lies my problem: I want to search <strong>the cells content directly, not just the data</strong>.\nI can't use toString() for each data object, because toString() and the displayed value may vastly differ (f.e. a boolean is represented as a checkbox with no text, which would not match the search &quot;false&quot;, the toString() method however would).\nI tried generating an empty cell with the cellValueFactory for each column and filling it with data, but I can't access the updateItem()-Method (it's protected), which generates the cell and according to the docs I shouldn't do that anyway.</p>\n<p>Other than implementing a cell, which makes updateItem() public (which probably shouldn't be done), or storing all the converters manually (which is tedious and time consuming, because there are a lot of different Entities), do you know of any better solution for searching in a tableView?</p>\n"},{"tags":["java","intellij-idea","switch-statement"],"comments":[{"score":1,"post_type":"question","creation_date":1681735113,"post_id":76035021,"comment_id":134099695,"body_markdown":"I do not use IDEA but can&#39;t you choose which warnings it shows? Despite I never heard of &quot;enhanced&quot; switch. AFAIK in the Java Language Specification there is only an enhanced `for` - a switch can be a switch statement or a switch expression; both accept switch rules or switch block statements","link":"https://stackoverflow.com/questions/76035021/what-are-the-benefits-of-enhanced-switch#comment134099695_76035021","body":"I do not use IDEA but can&#39;t you choose which warnings it shows? Despite I never heard of &quot;enhanced&quot; switch. AFAIK in the Java Language Specification there is only an enhanced <code>for</code> - a switch can be a switch statement or a switch expression; both accept switch rules or switch block statements"},{"score":0,"post_type":"question","creation_date":1681904806,"post_id":76035021,"comment_id":134131427,"body_markdown":"Is it possible to provide code example?","link":"https://stackoverflow.com/questions/76035021/what-are-the-benefits-of-enhanced-switch#comment134131427_76035021","body":"Is it possible to provide code example?"}],"answers":[{"comment_count":0,"score":3,"last_activity_date":1682349900,"last_edit_date":1682349900,"creation_date":1682007433,"answer_id":76066259,"question_id":76035021,"body_markdown":"[IntelliJ blogpost][1] talks about three benefits of the enhanced switch:\r\n\r\n 1. Concise code.\r\n 2. Can return a value. \r\n 3. No need to use `break`. In absence of a break statement, the control doesn’t fall through the switch labels which helps avoid logical errors.\r\n\r\nIn your particular example, you are already returning from the switch statement and the enhanced switch statement might not offer much. The enhanced switch improves the code when the old switch uses value assignments and breaks. For example:\r\n\r\n    \r\n\r\n    int height = 0; \r\n        switch (size) {\r\n            case S:\r\n                height = 18;\r\n                // missing break (bug)\r\n            case M:\r\n                height = 20;\r\n                break;\r\n            case L:\r\n                height = 25;\r\n                break;\r\n        }\r\n\r\n\r\nwhich enhanced to:\r\n\r\n    int height = 0; \r\n        switch (size) {\r\n            case S -&gt; height = 18;\r\n            case M -&gt; height = 20;\r\n            case L -&gt; height = 25;\r\n        }\r\n\r\n\r\nHowever, if your wish is to no longer get this warning, it is possible to turn it off in IntelliJ IDEA. To do so, open Preferences, and go to Editor -&gt; Inspections (I&#39;m using version 2023.1). Search for (part of) the warning (`Switch statement can be replaced with enhanced &#39;switch&#39;`) and de-select it.\r\n\r\n\r\n  [1]: https://blog.jetbrains.com/idea/2019/02/java-12-and-intellij-idea/","link":"https://stackoverflow.com/questions/76035021/what-are-the-benefits-of-enhanced-switch/76066259#76066259","title":"What are the benefits of enhanced switch?","body":"<p><a href=\"https://blog.jetbrains.com/idea/2019/02/java-12-and-intellij-idea/\" rel=\"nofollow noreferrer\">IntelliJ blogpost</a> talks about three benefits of the enhanced switch:</p>\n<ol>\n<li>Concise code.</li>\n<li>Can return a value.</li>\n<li>No need to use <code>break</code>. In absence of a break statement, the control doesn’t fall through the switch labels which helps avoid logical errors.</li>\n</ol>\n<p>In your particular example, you are already returning from the switch statement and the enhanced switch statement might not offer much. The enhanced switch improves the code when the old switch uses value assignments and breaks. For example:</p>\n<pre><code>int height = 0; \n    switch (size) {\n        case S:\n            height = 18;\n            // missing break (bug)\n        case M:\n            height = 20;\n            break;\n        case L:\n            height = 25;\n            break;\n    }\n</code></pre>\n<p>which enhanced to:</p>\n<pre><code>int height = 0; \n    switch (size) {\n        case S -&gt; height = 18;\n        case M -&gt; height = 20;\n        case L -&gt; height = 25;\n    }\n</code></pre>\n<p>However, if your wish is to no longer get this warning, it is possible to turn it off in IntelliJ IDEA. To do so, open Preferences, and go to Editor -&gt; Inspections (I'm using version 2023.1). Search for (part of) the warning (<code>Switch statement can be replaced with enhanced 'switch'</code>) and de-select it.</p>\n"}],"comment_count":2,"is_answered":true,"view_count":1066,"answer_count":1,"score":-2,"last_activity_date":1701443877,"creation_date":1681733393,"last_edit_date":1701443877,"question_id":76035021,"body_markdown":"Recently we upgrade our code base from Java 8 to Java 17. Since then, IntelliJ IDEA warns about old switch-case statements: \r\n &gt; Switch statement can be replaced with enhanced &#39;switch&#39;\r\n\r\nWhat are the benefits of the enhanced switch, besides readability? \r\n\r\nExample: java 8 switch:\r\n\r\n            switch (foo) {\r\n                case &quot;bla&quot;: return 1;\r\n                case &quot;bla_bla&quot;: return 2;\r\n            }\r\nafter accepting `Switch statement can be replaced with enhanced &#39;switch&#39;` it looks like that:\r\n\r\n            switch (foo) {\r\n                case &quot;bla&quot; -&gt; { return 1; }\r\n                case &quot;bla_bla&quot; -&gt; { return 2; }\r\n            }\r\n\r\n  [1]: https://medium.com/@javatechie/the-evolution-of-switch-statement-from-java-7-to-java-17-4b5eee8d29b7","link":"https://stackoverflow.com/questions/76035021/what-are-the-benefits-of-enhanced-switch","title":"What are the benefits of enhanced switch?","body":"<p>Recently we upgrade our code base from Java 8 to Java 17. Since then, IntelliJ IDEA warns about old switch-case statements:</p>\n<blockquote>\n<p>Switch statement can be replaced with enhanced 'switch'</p>\n</blockquote>\n<p>What are the benefits of the enhanced switch, besides readability?</p>\n<p>Example: java 8 switch:</p>\n<pre><code>        switch (foo) {\n            case &quot;bla&quot;: return 1;\n            case &quot;bla_bla&quot;: return 2;\n        }\n</code></pre>\n<p>after accepting <code>Switch statement can be replaced with enhanced 'switch'</code> it looks like that:</p>\n<pre><code>        switch (foo) {\n            case &quot;bla&quot; -&gt; { return 1; }\n            case &quot;bla_bla&quot; -&gt; { return 2; }\n        }\n</code></pre>\n"},{"tags":["java","big-o"],"comments":[{"score":0,"post_type":"question","creation_date":1701376309,"post_id":77581477,"comment_id":136771363,"body_markdown":"For reference, the source of this problem appears to be https://leetcode.com/problems/valid-palindrome/","link":"https://stackoverflow.com/questions/77581477/what-is-the-time-complexity-on-this-code-im-confused#comment136771363_77581477","body":"For reference, the source of this problem appears to be <a href=\"https://leetcode.com/problems/valid-palindrome/\" rel=\"nofollow noreferrer\">leetcode.com/problems/valid-palindrome</a>"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701380868,"post_id":77581562,"comment_id":136772103,"body_markdown":"Thank you so much! I really liked the detailed example you gave, it all makes sense now.","link":"https://stackoverflow.com/questions/77581477/what-is-the-time-complexity-on-this-code-im-confused/77581562#comment136772103_77581562","body":"Thank you so much! I really liked the detailed example you gave, it all makes sense now."}],"comment_count":1,"score":2,"last_activity_date":1701376824,"creation_date":1701376824,"answer_id":77581562,"question_id":77581477,"body_markdown":"The inner while loops are just used to skip whitespaces or punctuation.\r\nLet&#39;s run an example with the palindrome &#39;g; aag&#39;\r\n\r\ni = 0, j = 5\r\nboth inner while loops get skipped, since both the char at index 0 and 5 are letters\r\nsince both are equal to &#39;g&#39; we skip the if as well\r\n\r\ni = 1, j = 4\r\nnow the first inner while loop gets triggered since the char at index 1 isn&#39;t a letter or a digit. \r\n\r\ni = 2, j = 4\r\nwe&#39;re still in the inner while loop and the character at index 2 isn&#39;t a letter or a digit again\r\n\r\ni = 3, j = 4\r\nnow the first inner while loop is false, since the character at index 3 is a letter.\r\nthe second inner while loop gets skipped since the character at index 4 is a letter\r\n\r\ni = 4, j = 3\r\nnow the outer while loop is false since i &gt; j. \r\nTherefore, true is returned and it is a valid palindrome.\r\n\r\n\r\nThe complexity is O(n) since every index is only looked at once.\r\n","link":"https://stackoverflow.com/questions/77581477/what-is-the-time-complexity-on-this-code-im-confused/77581562#77581562","title":"What is the time complexity on this code? I&#39;m confused","body":"<p>The inner while loops are just used to skip whitespaces or punctuation.\nLet's run an example with the palindrome 'g; aag'</p>\n<p>i = 0, j = 5\nboth inner while loops get skipped, since both the char at index 0 and 5 are letters\nsince both are equal to 'g' we skip the if as well</p>\n<p>i = 1, j = 4\nnow the first inner while loop gets triggered since the char at index 1 isn't a letter or a digit.</p>\n<p>i = 2, j = 4\nwe're still in the inner while loop and the character at index 2 isn't a letter or a digit again</p>\n<p>i = 3, j = 4\nnow the first inner while loop is false, since the character at index 3 is a letter.\nthe second inner while loop gets skipped since the character at index 4 is a letter</p>\n<p>i = 4, j = 3\nnow the outer while loop is false since i &gt; j.\nTherefore, true is returned and it is a valid palindrome.</p>\n<p>The complexity is O(n) since every index is only looked at once.</p>\n"},{"comment_count":0,"score":1,"last_activity_date":1701377505,"last_edit_date":1701377505,"creation_date":1701377042,"answer_id":77581583,"question_id":77581477,"body_markdown":"It looks like O(n), where `n` is the length of `s`. \r\n\r\nAt each iteration of `while(i &lt; j)`, the value of `i` will be increased by at least 1, and the value of `j` will be reduced by at least 1. When a non alphanumeric character is encountered, the value of `i`, `j`, or both will be changed by more than one.  The number of comparisons `(s.charAt(i) != s.charAt(j))` never exceeds `n/2`. So, O(n). \r\n\r\nIf I may guess as to the source of your confusion, it would be O(n^2) if either or both the inner `while` loops began iteration at the ends of `s`. But, that&#39;s not what happens. When there is an iteration of either or both, the number of remaining iterations of the outer `while` is reduced. ","link":"https://stackoverflow.com/questions/77581477/what-is-the-time-complexity-on-this-code-im-confused/77581583#77581583","title":"What is the time complexity on this code? I&#39;m confused","body":"<p>It looks like O(n), where <code>n</code> is the length of <code>s</code>.</p>\n<p>At each iteration of <code>while(i &lt; j)</code>, the value of <code>i</code> will be increased by at least 1, and the value of <code>j</code> will be reduced by at least 1. When a non alphanumeric character is encountered, the value of <code>i</code>, <code>j</code>, or both will be changed by more than one.  The number of comparisons <code>(s.charAt(i) != s.charAt(j))</code> never exceeds <code>n/2</code>. So, O(n).</p>\n<p>If I may guess as to the source of your confusion, it would be O(n^2) if either or both the inner <code>while</code> loops began iteration at the ends of <code>s</code>. But, that's not what happens. When there is an iteration of either or both, the number of remaining iterations of the outer <code>while</code> is reduced.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701378870,"post_id":77581597,"comment_id":136771778,"body_markdown":"My main point was that they strictly get closer with each iteration (never stagnating or even getting further away). In the inner while loops, the `i` and `j` get closer only by 1 with each iteration.","link":"https://stackoverflow.com/questions/77581477/what-is-the-time-complexity-on-this-code-im-confused/77581597#comment136771778_77581597","body":"My main point was that they strictly get closer with each iteration (never stagnating or even getting further away). In the inner while loops, the <code>i</code> and <code>j</code> get closer only by 1 with each iteration."},{"score":0,"post_type":"answer","creation_date":1701379552,"post_id":77581597,"comment_id":136771892,"body_markdown":"Take string `&quot;       &quot;`.","link":"https://stackoverflow.com/questions/77581477/what-is-the-time-complexity-on-this-code-im-confused/77581597#comment136771892_77581597","body":"Take string <code>&quot;       &quot;</code>."}],"comment_count":2,"score":1,"last_activity_date":1701377154,"creation_date":1701377154,"answer_id":77581597,"question_id":77581477,"body_markdown":"The string has only `N` elements.\r\n\r\nIn your code, the `i = 0` and `j = s.length() - 1` only ever keep getting closer (with each iteration by at least `1`). And when they meet you terminate.\r\n\r\nSo no matter what happens, you will do at most `N` iterations (doesn&#39;t matter how many of those happen in outer or inner loop).","link":"https://stackoverflow.com/questions/77581477/what-is-the-time-complexity-on-this-code-im-confused/77581597#77581597","title":"What is the time complexity on this code? I&#39;m confused","body":"<p>The string has only <code>N</code> elements.</p>\n<p>In your code, the <code>i = 0</code> and <code>j = s.length() - 1</code> only ever keep getting closer (with each iteration by at least <code>1</code>). And when they meet you terminate.</p>\n<p>So no matter what happens, you will do at most <code>N</code> iterations (doesn't matter how many of those happen in outer or inner loop).</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701443625,"last_edit_date":1701443625,"creation_date":1701387583,"answer_id":77582267,"question_id":77581477,"body_markdown":"The number of iterations does not always match the String length, even for a valid palindrome.  Due to the asynchronous way `i and j` are updated, if the outer loop ends and `i and j` are equal, the count must be incremented by 1, otherwise, decremented by 1.\r\n\r\nBut all that matters is to show that the execution time is `related` to the String length. `O(n)` simply means that the execution time is `linear`, even when you short-circuit the method when two characters don&#39;t match. \r\n```\r\nString[] pals = {&quot;radar   &quot;, &quot;ra       dar&quot;, &quot;radar             &quot;, &quot;r a d a r&quot;,\r\n        &quot;A man, a plan, a canal:    Panama&quot;, &quot;Amanapla    nacanalPanama&quot;};\r\n\r\nfor (String s : pals) {\r\n    boolean result = isAPalindrome(s);\r\n    System.out.println(&quot;Length = &quot; + s.length());\r\n    System.out.println(result);\r\n}\r\n```\r\nprints\r\n```\r\nCount = 8\r\nLength = 8\r\ntrue\r\nCount = 12\r\nLength = 12\r\ntrue\r\nCount = 18\r\nLength = 18\r\ntrue\r\nCount = 9\r\nLength = 9\r\ntrue\r\nCount = 33\r\nLength = 33\r\ntrue\r\nCount = 25\r\nLength = 25\r\ntrue\r\n\r\n```\r\nThe modified methpd\r\n``` \r\npublic static boolean isAPalindrome(String s) {\r\n    int i = 0; \r\n    int j = s.length()-1;\r\n\r\n    s = s.toLowerCase();\r\n    int count = 0;\r\n    while(i &lt; j) {\r\n\r\n        while(i &lt; j &amp;&amp; !Character.isLetterOrDigit(s.charAt(i))){\r\n            count++;\r\n            i++;\r\n        }\r\n\r\n        while(i &lt; j &amp;&amp; !Character.isLetterOrDigit(s.charAt(j))){\r\n            count++;\r\n            j--;\r\n        }\r\n\r\n        if(s.charAt(i) != s.charAt(j)){\r\n            return false;\r\n        }\r\n        count+=2;\r\n        \r\n        i++;\r\n        j--;\r\n\r\n    } \r\n    count += (i == j) ? 1 : -1;\r\n    System.out.println(&quot;Count = &quot; + count);\r\n    return true;\r\n}","link":"https://stackoverflow.com/questions/77581477/what-is-the-time-complexity-on-this-code-im-confused/77582267#77582267","title":"What is the time complexity on this code? I&#39;m confused","body":"<p>The number of iterations does not always match the String length, even for a valid palindrome.  Due to the asynchronous way <code>i and j</code> are updated, if the outer loop ends and <code>i and j</code> are equal, the count must be incremented by 1, otherwise, decremented by 1.</p>\n<p>But all that matters is to show that the execution time is <code>related</code> to the String length. <code>O(n)</code> simply means that the execution time is <code>linear</code>, even when you short-circuit the method when two characters don't match.</p>\n<pre><code>String[] pals = {&quot;radar   &quot;, &quot;ra       dar&quot;, &quot;radar             &quot;, &quot;r a d a r&quot;,\n        &quot;A man, a plan, a canal:    Panama&quot;, &quot;Amanapla    nacanalPanama&quot;};\n\nfor (String s : pals) {\n    boolean result = isAPalindrome(s);\n    System.out.println(&quot;Length = &quot; + s.length());\n    System.out.println(result);\n}\n</code></pre>\n<p>prints</p>\n<pre><code>Count = 8\nLength = 8\ntrue\nCount = 12\nLength = 12\ntrue\nCount = 18\nLength = 18\ntrue\nCount = 9\nLength = 9\ntrue\nCount = 33\nLength = 33\ntrue\nCount = 25\nLength = 25\ntrue\n\n</code></pre>\n<p>The modified methpd</p>\n<pre><code>public static boolean isAPalindrome(String s) {\n    int i = 0; \n    int j = s.length()-1;\n\n    s = s.toLowerCase();\n    int count = 0;\n    while(i &lt; j) {\n\n        while(i &lt; j &amp;&amp; !Character.isLetterOrDigit(s.charAt(i))){\n            count++;\n            i++;\n        }\n\n        while(i &lt; j &amp;&amp; !Character.isLetterOrDigit(s.charAt(j))){\n            count++;\n            j--;\n        }\n\n        if(s.charAt(i) != s.charAt(j)){\n            return false;\n        }\n        count+=2;\n        \n        i++;\n        j--;\n\n    } \n    count += (i == j) ? 1 : -1;\n    System.out.println(&quot;Count = &quot; + count);\n    return true;\n}\n</code></pre>\n"}],"comment_count":1,"is_answered":true,"view_count":105,"answer_count":4,"score":0,"last_activity_date":1701443625,"creation_date":1701375858,"last_edit_date":1701375945,"question_id":77581477,"body_markdown":"So I&#39;m solving the leetcode &quot;Valid Palindrome&quot; problem, and I&#39;m unsure what the time complexity of my code is, I thought it was O(n^2) but I wasn&#39;t so sure so I used chatgpt to confirm and it keeps saying it is O(n). Apparently the inner while loops run constant. \r\n\r\nI can&#39;t wrap my head around this for some reason. Any explanations are welcome. Thanks!\r\n\r\nHere is my code:\r\n\r\n```\r\nclass Solution {\r\n    public boolean isPalindrome(String s) {\r\n\r\n        int i = 0; \r\n        int j = s.length()-1;\r\n\r\n        s = s.toLowerCase();\r\n\r\n        while(i &lt; j) {\r\n\r\n            while(i &lt; j &amp;&amp; !Character.isLetterOrDigit(s.charAt(i))){\r\n                i++;\r\n            }\r\n\r\n            while(i &lt; j &amp;&amp; !Character.isLetterOrDigit(s.charAt(j))){\r\n                j--;\r\n            }\r\n\r\n            if(s.charAt(i) != s.charAt(j)){\r\n                return false;\r\n            }\r\n\r\n            i++;\r\n            j--;\r\n\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n```","link":"https://stackoverflow.com/questions/77581477/what-is-the-time-complexity-on-this-code-im-confused","title":"What is the time complexity on this code? I&#39;m confused","body":"<p>So I'm solving the leetcode &quot;Valid Palindrome&quot; problem, and I'm unsure what the time complexity of my code is, I thought it was O(n^2) but I wasn't so sure so I used chatgpt to confirm and it keeps saying it is O(n). Apparently the inner while loops run constant.</p>\n<p>I can't wrap my head around this for some reason. Any explanations are welcome. Thanks!</p>\n<p>Here is my code:</p>\n<pre><code>class Solution {\n    public boolean isPalindrome(String s) {\n\n        int i = 0; \n        int j = s.length()-1;\n\n        s = s.toLowerCase();\n\n        while(i &lt; j) {\n\n            while(i &lt; j &amp;&amp; !Character.isLetterOrDigit(s.charAt(i))){\n                i++;\n            }\n\n            while(i &lt; j &amp;&amp; !Character.isLetterOrDigit(s.charAt(j))){\n                j--;\n            }\n\n            if(s.charAt(i) != s.charAt(j)){\n                return false;\n            }\n\n            i++;\n            j--;\n\n        }\n\n        return true;\n    }\n}\n</code></pre>\n"},{"tags":["java","android","activity-recognition","activity-transition"],"comment_count":0,"is_answered":false,"view_count":70,"answer_count":0,"score":1,"last_activity_date":1701443351,"creation_date":1693680914,"question_id":77029652,"body_markdown":"I&#39;m developing a mobility monitoring system for educational purposes and so I decided to use the Android API Activity Transitions to recognize activities such as IN_VEHICLE or ON_BICYCLING.\r\n\r\nI followed the implementation given by android in the documentation right here:\r\nhttps://developer.android.com/guide/topics/location/transitions\r\n\r\nThis is my ActivityRecognitionService.java:\r\n\r\n```java\r\n\r\npublic class ActivityRecognitionService extends Service {\r\n\r\n    private ActivityTransitionRequest request;\r\n    private ActivityTransitionsReceiver transitionsReceiver;\r\n\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId) {\r\n\r\n        List&lt;ActivityTransition&gt; transitions = new ArrayList&lt;&gt;();\r\n        transitions.add(\r\n                new ActivityTransition.Builder()\r\n                        .setActivityType(DetectedActivity.STILL)\r\n                        .setActivityTransition(ActivityTransition.ACTIVITY_TRANSITION_ENTER)\r\n                        .build());\r\n\r\n        transitions.add(\r\n                new ActivityTransition.Builder()\r\n                        .setActivityType(DetectedActivity.STILL)\r\n                        .setActivityTransition(ActivityTransition.ACTIVITY_TRANSITION_EXIT)\r\n                        .build());\r\n\r\n        transitions.add(\r\n                new ActivityTransition.Builder()\r\n                        .setActivityType(DetectedActivity.ON_FOOT)\r\n                        .setActivityTransition(ActivityTransition.ACTIVITY_TRANSITION_ENTER)\r\n                        .build());\r\n\r\n        transitions.add(\r\n                new ActivityTransition.Builder()\r\n                        .setActivityType(DetectedActivity.ON_FOOT)\r\n                        .setActivityTransition(ActivityTransition.ACTIVITY_TRANSITION_EXIT)\r\n                        .build());\r\n\r\n        request = new ActivityTransitionRequest(transitions);\r\n\r\n        transitionsReceiver = new ActivityTransitionsReceiver();\r\n\r\n        LocalBroadcastManager.getInstance(this).registerReceiver(transitionsReceiver, new IntentFilter(&quot;PROVA&quot;));\r\n\r\n        startForeground(NOTIFICATION_ID, createNotification());\r\n        new Thread(this::startActivityRecognition).start();\r\n        return START_STICKY;\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        super.onDestroy();\r\n        stopAll();\r\n    }\r\n\r\n    @Override\r\n    public void onTaskRemoved(Intent rootIntent) {\r\n        super.onTaskRemoved(rootIntent);\r\n        stopAll();\r\n    }\r\n\r\n    /* Start activity recognition */\r\n    @SuppressLint(&quot;MissingPermission&quot;)\r\n    private void startActivityRecognition() {\r\n        Task&lt;Void&gt; task = ActivityRecognition.getClient(this)\r\n                .requestActivityTransitionUpdates(request, getActivityRecognitionPendingIntent());\r\n\r\n        task.addOnSuccessListener(\r\n                result -&gt; Log.i(&quot;SERVICE AR&quot;, &quot;Start activity recognition!&quot;)\r\n        );\r\n\r\n        task.addOnFailureListener(\r\n                e -&gt; Log.i(&quot;SERVICE AR&quot;, &quot;Start activity recognition failed!&quot;)\r\n        );\r\n    }\r\n\r\n    /* Stop l&#39;activity recognition */\r\n    @SuppressLint(&quot;MissingPermission&quot;)\r\n    private void stopActivityRecognition() {\r\n\r\n        PendingIntent intent = getActivityRecognitionPendingIntent();\r\n\r\n        Task&lt;Void&gt; task = ActivityRecognition.getClient(this)\r\n                .removeActivityTransitionUpdates(intent);\r\n\r\n        task.addOnSuccessListener(\r\n                result -&gt; {\r\n                    intent.cancel();\r\n                    Log.e(&quot;SERVICE AR&quot;, &quot;Stop activity recognition!&quot;);\r\n                }\r\n        );\r\n\r\n        task.addOnFailureListener(\r\n                e -&gt; Log.e(&quot;SERVICE AR&quot;, &quot;Stop activity recognition failed!&quot;)\r\n        );\r\n    }\r\n\r\n    private PendingIntent getActivityRecognitionPendingIntent() {\r\n        Intent intent = new Intent(&quot;PROVA&quot;);\r\n        return PendingIntent.getBroadcast(ActivityRecognitionService.this, 0, intent, PendingIntent.FLAG_MUTABLE);\r\n    }\r\n\r\n    public static class ActivityTransitionsReceiver extends BroadcastReceiver {\r\n\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            Log.i(&quot;RECEIVED&quot;, &quot;RECEIVED!&quot;); \r\n        }\r\n    }\r\n}\r\n\r\n```\r\nThe activity recognition starts successfully as I also get the `&quot;Start activity recognition&quot;` log which confirms the correct start. After that, the flow enters the `getActivityRecognitionPendingIntent()` function and from there it gets blocked, I don&#39;t get anything inside the receiver&#39;s `onReceive()`.\r\n\r\nWhat am I doing wrong?\r\n\r\n\r\nFinally, I also leave my manifest.xml\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; package=&quot;com.unibo.mobilitytrackingsystem&quot;&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACTIVITY_RECOGNITION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;com.google.android.gms.permission.ACTIVITY_RECOGNITION&quot; /&gt;\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:animateLayoutChanges=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.MobilityTrackingSystem&quot;\r\n        android:usesCleartextTraffic=&quot;true&quot;\r\n        &gt;\r\n        &lt;meta-data\r\n            android:name=&quot;com.google.android.gms.location.base&quot;\r\n            android:value=&quot;com.unibo.mobilitytrackingsystem.ARServices.ActivityRecognitionService&quot; /&gt;\r\n\r\n        &lt;meta-data\r\n            android:name=&quot;com.google.android.geo.API_KEY&quot;\r\n            android:value=&quot;AIzaSyC4RCfGvTFnTG4ePRvdmyiOi2G84vnW2o0&quot;/&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;com.unibo.mobilitytrackingsystem.AuthActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:theme=&quot;@style/Theme.MobilityTrackingSystem&quot;\r\n            android:screenOrientation=&quot;portrait&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;com.unibo.mobilitytrackingsystem.HomeActivity&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:theme=&quot;@style/Theme.MobilityTrackingSystem&quot;\r\n            android:screenOrientation=&quot;portrait&quot;\r\n            /&gt;\r\n\r\n        &lt;activity\r\n            android:name=&quot;com.unibo.mobilitytrackingsystem.SettingsActivity&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:theme=&quot;@style/Theme.MobilityTrackingSystem&quot;\r\n            android:screenOrientation=&quot;portrait&quot;\r\n            /&gt;\r\n\r\n        &lt;service\r\n            android:name=&quot;com.unibo.mobilitytrackingsystem.ARServices.ActivityRecognitionService&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n\r\n        &lt;receiver\r\n            android:name=&quot;com.unibo.mobilitytrackingsystem.ARServices.ActivityRecognitionService$ActivityTransitionsReceiver&quot;\r\n            android:exported=&quot;false&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;PROVA&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n\r\n```\r\n\r\nI want to point out that the only error I get on Logcat when starting the AR is the following:\r\n\r\n`attributionTag com.google.android.gms.location_base not declared in manifest`","link":"https://stackoverflow.com/questions/77029652/activity-recognition-transitions-api-issue","title":"Activity Recognition Transitions API issue","body":"<p>I'm developing a mobility monitoring system for educational purposes and so I decided to use the Android API Activity Transitions to recognize activities such as IN_VEHICLE or ON_BICYCLING.</p>\n<p>I followed the implementation given by android in the documentation right here:\n<a href=\"https://developer.android.com/guide/topics/location/transitions\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/location/transitions</a></p>\n<p>This is my ActivityRecognitionService.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class ActivityRecognitionService extends Service {\n\n    private ActivityTransitionRequest request;\n    private ActivityTransitionsReceiver transitionsReceiver;\n\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n\n        List&lt;ActivityTransition&gt; transitions = new ArrayList&lt;&gt;();\n        transitions.add(\n                new ActivityTransition.Builder()\n                        .setActivityType(DetectedActivity.STILL)\n                        .setActivityTransition(ActivityTransition.ACTIVITY_TRANSITION_ENTER)\n                        .build());\n\n        transitions.add(\n                new ActivityTransition.Builder()\n                        .setActivityType(DetectedActivity.STILL)\n                        .setActivityTransition(ActivityTransition.ACTIVITY_TRANSITION_EXIT)\n                        .build());\n\n        transitions.add(\n                new ActivityTransition.Builder()\n                        .setActivityType(DetectedActivity.ON_FOOT)\n                        .setActivityTransition(ActivityTransition.ACTIVITY_TRANSITION_ENTER)\n                        .build());\n\n        transitions.add(\n                new ActivityTransition.Builder()\n                        .setActivityType(DetectedActivity.ON_FOOT)\n                        .setActivityTransition(ActivityTransition.ACTIVITY_TRANSITION_EXIT)\n                        .build());\n\n        request = new ActivityTransitionRequest(transitions);\n\n        transitionsReceiver = new ActivityTransitionsReceiver();\n\n        LocalBroadcastManager.getInstance(this).registerReceiver(transitionsReceiver, new IntentFilter(&quot;PROVA&quot;));\n\n        startForeground(NOTIFICATION_ID, createNotification());\n        new Thread(this::startActivityRecognition).start();\n        return START_STICKY;\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        stopAll();\n    }\n\n    @Override\n    public void onTaskRemoved(Intent rootIntent) {\n        super.onTaskRemoved(rootIntent);\n        stopAll();\n    }\n\n    /* Start activity recognition */\n    @SuppressLint(&quot;MissingPermission&quot;)\n    private void startActivityRecognition() {\n        Task&lt;Void&gt; task = ActivityRecognition.getClient(this)\n                .requestActivityTransitionUpdates(request, getActivityRecognitionPendingIntent());\n\n        task.addOnSuccessListener(\n                result -&gt; Log.i(&quot;SERVICE AR&quot;, &quot;Start activity recognition!&quot;)\n        );\n\n        task.addOnFailureListener(\n                e -&gt; Log.i(&quot;SERVICE AR&quot;, &quot;Start activity recognition failed!&quot;)\n        );\n    }\n\n    /* Stop l'activity recognition */\n    @SuppressLint(&quot;MissingPermission&quot;)\n    private void stopActivityRecognition() {\n\n        PendingIntent intent = getActivityRecognitionPendingIntent();\n\n        Task&lt;Void&gt; task = ActivityRecognition.getClient(this)\n                .removeActivityTransitionUpdates(intent);\n\n        task.addOnSuccessListener(\n                result -&gt; {\n                    intent.cancel();\n                    Log.e(&quot;SERVICE AR&quot;, &quot;Stop activity recognition!&quot;);\n                }\n        );\n\n        task.addOnFailureListener(\n                e -&gt; Log.e(&quot;SERVICE AR&quot;, &quot;Stop activity recognition failed!&quot;)\n        );\n    }\n\n    private PendingIntent getActivityRecognitionPendingIntent() {\n        Intent intent = new Intent(&quot;PROVA&quot;);\n        return PendingIntent.getBroadcast(ActivityRecognitionService.this, 0, intent, PendingIntent.FLAG_MUTABLE);\n    }\n\n    public static class ActivityTransitionsReceiver extends BroadcastReceiver {\n\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            Log.i(&quot;RECEIVED&quot;, &quot;RECEIVED!&quot;); \n        }\n    }\n}\n\n</code></pre>\n<p>The activity recognition starts successfully as I also get the <code>&quot;Start activity recognition&quot;</code> log which confirms the correct start. After that, the flow enters the <code>getActivityRecognitionPendingIntent()</code> function and from there it gets blocked, I don't get anything inside the receiver's <code>onReceive()</code>.</p>\n<p>What am I doing wrong?</p>\n<p>Finally, I also leave my manifest.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; package=&quot;com.unibo.mobilitytrackingsystem&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACTIVITY_RECOGNITION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;com.google.android.gms.permission.ACTIVITY_RECOGNITION&quot; /&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:animateLayoutChanges=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.MobilityTrackingSystem&quot;\n        android:usesCleartextTraffic=&quot;true&quot;\n        &gt;\n        &lt;meta-data\n            android:name=&quot;com.google.android.gms.location.base&quot;\n            android:value=&quot;com.unibo.mobilitytrackingsystem.ARServices.ActivityRecognitionService&quot; /&gt;\n\n        &lt;meta-data\n            android:name=&quot;com.google.android.geo.API_KEY&quot;\n            android:value=&quot;AIzaSyC4RCfGvTFnTG4ePRvdmyiOi2G84vnW2o0&quot;/&gt;\n\n        &lt;activity\n            android:name=&quot;com.unibo.mobilitytrackingsystem.AuthActivity&quot;\n            android:exported=&quot;true&quot;\n            android:theme=&quot;@style/Theme.MobilityTrackingSystem&quot;\n            android:screenOrientation=&quot;portrait&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;activity\n            android:name=&quot;com.unibo.mobilitytrackingsystem.HomeActivity&quot;\n            android:exported=&quot;false&quot;\n            android:theme=&quot;@style/Theme.MobilityTrackingSystem&quot;\n            android:screenOrientation=&quot;portrait&quot;\n            /&gt;\n\n        &lt;activity\n            android:name=&quot;com.unibo.mobilitytrackingsystem.SettingsActivity&quot;\n            android:exported=&quot;false&quot;\n            android:theme=&quot;@style/Theme.MobilityTrackingSystem&quot;\n            android:screenOrientation=&quot;portrait&quot;\n            /&gt;\n\n        &lt;service\n            android:name=&quot;com.unibo.mobilitytrackingsystem.ARServices.ActivityRecognitionService&quot;\n            android:exported=&quot;false&quot; /&gt;\n\n        &lt;receiver\n            android:name=&quot;com.unibo.mobilitytrackingsystem.ARServices.ActivityRecognitionService$ActivityTransitionsReceiver&quot;\n            android:exported=&quot;false&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;PROVA&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n\n</code></pre>\n<p>I want to point out that the only error I get on Logcat when starting the AR is the following:</p>\n<p><code>attributionTag com.google.android.gms.location_base not declared in manifest</code></p>\n"},{"tags":["java","jboss","vaadin","crud","cdi"],"comments":[{"score":1,"post_type":"question","creation_date":1701276797,"post_id":77572814,"comment_id":136756649,"body_markdown":"Please provide the relevant info here. No-one will read your Word file somewhere else to help you.","link":"https://stackoverflow.com/questions/77572814/crud-weirdness-after-switching-from-spring-boot-vaadin-14-to-vaadin-14-cdi#comment136756649_77572814","body":"Please provide the relevant info here. No-one will read your Word file somewhere else to help you."},{"score":0,"post_type":"question","creation_date":1701379361,"post_id":77572814,"comment_id":136771857,"body_markdown":"I have pared back the test app to one view with one column, and have simplified the supporting service class.  The issue and question are still unchanged.  How can the main view and the edit and delete dialogs be reconciled to affect the same list of items?","link":"https://stackoverflow.com/questions/77572814/crud-weirdness-after-switching-from-spring-boot-vaadin-14-to-vaadin-14-cdi#comment136771857_77572814","body":"I have pared back the test app to one view with one column, and have simplified the supporting service class.  The issue and question are still unchanged.  How can the main view and the edit and delete dialogs be reconciled to affect the same list of items?"}],"comment_count":2,"is_answered":false,"view_count":47,"answer_count":0,"score":-1,"last_activity_date":1701441168,"creation_date":1701274262,"last_edit_date":1701441168,"question_id":77572814,"body_markdown":"Per a different question thread, I&#39;m following someone&#39;s advise to switch from Spring Boot/Vaadin to Vaadin CDI, so my app will finally deploy on JBoss 7.1 under Java 8.  I&#39;ve successfully deployed a test list-crud app to JBoss, but now the CRUD operations are acting screwy.  I&#39;m including [the repo branch for this test app][1], which includes an illustrated Word doc of my steps to recreate the issue.  Is there a quick fix involving scope annotations, or does the code need to work differently in CDI?\r\n\r\n1.\tClone project locally\r\n2.\tCd to project folder\r\n3.\tmvn clean package -Pproduction\r\n4.\tDeploy to JBoss 7.1\r\n5.\tNavigate to localhost:8080/animals\r\n[![image][2]][2]\r\n7.\tSelect “Cat” row, and click “Edit”.\r\n[![image][3]][3]\r\n10.\tModify city name “Cat” to “Top Cat”, and click “Save”.\r\n[![image][4]][4]\r\n[![image][5]][5]\r\n12.\tObserve main view now shows a list with only the modified row showing.\r\n[![image][6]][6]\r\n14.\tClick page 2 navigation button.\r\n[![image][7]][7]\r\n16.\tClick page 1 navigation button.\r\n[![image][8]][8]\r\n17.\tObserve main view now shows original list with previous value of “Cat” row.\r\n[![image][9]][9]\r\n19.\tSelect “Dog” row, and click “Delete”.\r\n[![image][10]][10]\r\n21.\tOn confirmation prompt, click “Delete” to delete this row.\r\n[![image][11]][11]\r\n23.\tObserve main view now shows the same lone row we saw after we edited the “Top Cat” row.\r\n[![image][12]][12]\r\n25.\tClick page 2 navigation button.\r\n[![image][13]][13]\r\n27.\tClick page 1 navigation button.  The original list appears including the edited “Cat” row in its pre-edit state, and the deleted “Dog” row which should have been deleted.\r\n\r\nCreates, Edits and Deletes were all updating to the main list in my Spring Boot/Vaadin implementation, which I’ve only moved away from because it couldn’t deploy it to JBoss.\r\nI think since switching to Vaadin CDI, the main view loses state after update.  Does a way exist in Vaadin CDI to maintain state after updates like Saves and Deletes?\r\n\r\n\r\n  [1]: https://github.com/NCIDevRonR/vaadin-issues/tree/Vaadin-CDI-CRUD-scope\r\n  [2]: https://i.stack.imgur.com/ugSjP.jpg\r\n  [3]: https://i.stack.imgur.com/C1wmu.jpg\r\n  [4]: https://i.stack.imgur.com/iY51d.jpg\r\n  [5]: https://i.stack.imgur.com/0MUlE.jpg\r\n  [6]: https://i.stack.imgur.com/yd9dL.jpg\r\n  [7]: https://i.stack.imgur.com/DhBZN.jpg\r\n  [8]: https://i.stack.imgur.com/eJ9aT.jpg\r\n  [9]: https://i.stack.imgur.com/vYq5D.jpg\r\n  [10]: https://i.stack.imgur.com/OCvoj.jpg\r\n  [11]: https://i.stack.imgur.com/OMZyx.jpg\r\n  [12]: https://i.stack.imgur.com/IJbEC.jpg\r\n  [13]: https://i.stack.imgur.com/oyxNa.jpg","link":"https://stackoverflow.com/questions/77572814/crud-weirdness-after-switching-from-spring-boot-vaadin-14-to-vaadin-14-cdi","title":"CRUD Weirdness After Switching from Spring Boot/Vaadin 14 to Vaadin 14 CDI","body":"<p>Per a different question thread, I'm following someone's advise to switch from Spring Boot/Vaadin to Vaadin CDI, so my app will finally deploy on JBoss 7.1 under Java 8.  I've successfully deployed a test list-crud app to JBoss, but now the CRUD operations are acting screwy.  I'm including <a href=\"https://github.com/NCIDevRonR/vaadin-issues/tree/Vaadin-CDI-CRUD-scope\" rel=\"nofollow noreferrer\">the repo branch for this test app</a>, which includes an illustrated Word doc of my steps to recreate the issue.  Is there a quick fix involving scope annotations, or does the code need to work differently in CDI?</p>\n<ol>\n<li>Clone project locally</li>\n<li>Cd to project folder</li>\n<li>mvn clean package -Pproduction</li>\n<li>Deploy to JBoss 7.1</li>\n<li>Navigate to localhost:8080/animals\n<a href=\"https://i.stack.imgur.com/ugSjP.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ugSjP.jpg\" alt=\"image\" /></a></li>\n<li>Select “Cat” row, and click “Edit”.\n<a href=\"https://i.stack.imgur.com/C1wmu.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C1wmu.jpg\" alt=\"image\" /></a></li>\n<li>Modify city name “Cat” to “Top Cat”, and click “Save”.\n<a href=\"https://i.stack.imgur.com/iY51d.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iY51d.jpg\" alt=\"image\" /></a>\n<a href=\"https://i.stack.imgur.com/0MUlE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0MUlE.jpg\" alt=\"image\" /></a></li>\n<li>Observe main view now shows a list with only the modified row showing.\n<a href=\"https://i.stack.imgur.com/yd9dL.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yd9dL.jpg\" alt=\"image\" /></a></li>\n<li>Click page 2 navigation button.\n<a href=\"https://i.stack.imgur.com/DhBZN.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DhBZN.jpg\" alt=\"image\" /></a></li>\n<li>Click page 1 navigation button.\n<a href=\"https://i.stack.imgur.com/eJ9aT.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eJ9aT.jpg\" alt=\"image\" /></a></li>\n<li>Observe main view now shows original list with previous value of “Cat” row.\n<a href=\"https://i.stack.imgur.com/vYq5D.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vYq5D.jpg\" alt=\"image\" /></a></li>\n<li>Select “Dog” row, and click “Delete”.\n<a href=\"https://i.stack.imgur.com/OCvoj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OCvoj.jpg\" alt=\"image\" /></a></li>\n<li>On confirmation prompt, click “Delete” to delete this row.\n<a href=\"https://i.stack.imgur.com/OMZyx.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OMZyx.jpg\" alt=\"image\" /></a></li>\n<li>Observe main view now shows the same lone row we saw after we edited the “Top Cat” row.\n<a href=\"https://i.stack.imgur.com/IJbEC.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IJbEC.jpg\" alt=\"image\" /></a></li>\n<li>Click page 2 navigation button.\n<a href=\"https://i.stack.imgur.com/oyxNa.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oyxNa.jpg\" alt=\"image\" /></a></li>\n<li>Click page 1 navigation button.  The original list appears including the edited “Cat” row in its pre-edit state, and the deleted “Dog” row which should have been deleted.</li>\n</ol>\n<p>Creates, Edits and Deletes were all updating to the main list in my Spring Boot/Vaadin implementation, which I’ve only moved away from because it couldn’t deploy it to JBoss.\nI think since switching to Vaadin CDI, the main view loses state after update.  Does a way exist in Vaadin CDI to maintain state after updates like Saves and Deletes?</p>\n"},{"tags":["java","tiff","geotools"],"comments":[{"score":2,"post_type":"question","creation_date":1701270170,"post_id":77571884,"comment_id":136755146,"body_markdown":"Looks like the TIFF uses JPEG compressed tiles, and the colors are incorrectly converted from YCC to RGB (they were already RGB and shouldn&#39;t have been).","link":"https://stackoverflow.com/questions/77571884/how-to-create-rgbstyle-while-rendering-tif-file-using-geotools#comment136755146_77571884","body":"Looks like the TIFF uses JPEG compressed tiles, and the colors are incorrectly converted from YCC to RGB (they were already RGB and shouldn&#39;t have been)."},{"score":0,"post_type":"question","creation_date":1701333476,"post_id":77571884,"comment_id":136763302,"body_markdown":"i have uploaded a new tiff file  which render fine with geotools, I can&#39;t see any specific difference between them.","link":"https://stackoverflow.com/questions/77571884/how-to-create-rgbstyle-while-rendering-tif-file-using-geotools#comment136763302_77571884","body":"i have uploaded a new tiff file  which render fine with geotools, I can&#39;t see any specific difference between them."},{"score":0,"post_type":"question","creation_date":1701336233,"post_id":77571884,"comment_id":136763782,"body_markdown":"the compilation issues stem from mixing your GeoTools versions stable is 30.x currently not 28.5 - there were substantial changes see the [blog](https://geotoolsnews.blogspot.com/2023/10/geotools-300-released.html) for details","link":"https://stackoverflow.com/questions/77571884/how-to-create-rgbstyle-while-rendering-tif-file-using-geotools#comment136763782_77571884","body":"the compilation issues stem from mixing your GeoTools versions stable is 30.x currently not 28.5 - there were substantial changes see the <a href=\"https://geotoolsnews.blogspot.com/2023/10/geotools-300-released.html\" rel=\"nofollow noreferrer\">blog</a> for details"},{"score":0,"post_type":"question","creation_date":1701337009,"post_id":77571884,"comment_id":136763934,"body_markdown":"One possible issue is that one of your files (the one that fails) is an image/world file pair and the other is a real GeoTiff and they take different routes to the renderer.","link":"https://stackoverflow.com/questions/77571884/how-to-create-rgbstyle-while-rendering-tif-file-using-geotools#comment136763934_77571884","body":"One possible issue is that one of your files (the one that fails) is an image/world file pair and the other is a real GeoTiff and they take different routes to the renderer."},{"score":0,"post_type":"question","creation_date":1701339146,"post_id":77571884,"comment_id":136764296,"body_markdown":"the L21.tfw file just contains data bounds information, very simple. Deleting this file will have the same effect","link":"https://stackoverflow.com/questions/77571884/how-to-create-rgbstyle-while-rendering-tif-file-using-geotools#comment136764296_77571884","body":"the L21.tfw file just contains data bounds information, very simple. Deleting this file will have the same effect"},{"score":0,"post_type":"question","creation_date":1701402819,"post_id":77571884,"comment_id":136774076,"body_markdown":"i have been tested geotools version 29.3 and 30.1, not difference at all.","link":"https://stackoverflow.com/questions/77571884/how-to-create-rgbstyle-while-rendering-tif-file-using-geotools#comment136774076_77571884","body":"i have been tested geotools version 29.3 and 30.1, not difference at all."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701437388,"creation_date":1701437388,"answer_id":77585603,"question_id":77571884,"body_markdown":"The cause of the problem was found. It was caused by the tiff file not generating an image pyramid. It should also be noted that when generating an image pyramid, you need to use the external mode, which is to generate the external pyramid file of ovr. Otherwise, there will still be problems when rendering with geotools. .\r\nFinally, geotools still has some problems when rendering tiff pyramid images. After zooming in to a certain extent, the color will be distorted.","link":"https://stackoverflow.com/questions/77571884/how-to-create-rgbstyle-while-rendering-tif-file-using-geotools/77585603#77585603","title":"how to create rgbstyle while rendering tif file using geotools?","body":"<p>The cause of the problem was found. It was caused by the tiff file not generating an image pyramid. It should also be noted that when generating an image pyramid, you need to use the external mode, which is to generate the external pyramid file of ovr. Otherwise, there will still be problems when rendering with geotools. .\nFinally, geotools still has some problems when rendering tiff pyramid images. After zooming in to a certain extent, the color will be distorted.</p>\n"}],"comment_count":6,"is_answered":true,"view_count":44,"answer_count":1,"score":0,"last_activity_date":1701437388,"creation_date":1701267108,"last_edit_date":1701419528,"question_id":77571884,"body_markdown":"I have a tiff file, and the effect when opened in qgis is very inconsistent with the effect rendered with geotools.\r\n\r\nopen by qgis\r\n[![enter image description here][1]][1]\r\n\r\nthe imagelab snapshot (Color is obviously distorted).\r\n[![enter image description here][2]][2]\r\nthe Imagelab source code can be download from here:\r\nhttps://docs.geotools.org/stable/userguide/_downloads/b1a328d258da28a4e9da534d4aaca37c/ImageLab.java\r\nThe key code is the createRGBStyle function, the code has some compilation errors, mainly namespace issues. I will put the modified code in the link below.\r\n\r\nThe strange thing is that some tiff files have normal effects after being opened with imagelab. what is the reason behind the scene?\r\n\r\n[the source tiff file and modified imagelabs][3]\r\n\r\ngeotools&#39;s version: 28.5,29.3,30.1\r\n\r\nI used qgis to view the metadata information of the two tiff data and found nothing special.\r\ngeotools imagelab render with color error tiff\r\n[![geotools render error tiff][4]][4]\r\ngeotools imagelab render ok tiff\r\n[![geotools render ok tiff][5]][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xkR6w.jpg\r\n  [2]: https://i.stack.imgur.com/Dwxzd.jpg\r\n  [3]: https://drive.google.com/drive/folders/1wG30b7BEgLSgt9wpLqYce1Lv6pvhs59b?usp=sharing\r\n  [4]: https://i.stack.imgur.com/1g5BG.png\r\n  [5]: https://i.stack.imgur.com/T11H8.png","link":"https://stackoverflow.com/questions/77571884/how-to-create-rgbstyle-while-rendering-tif-file-using-geotools","title":"how to create rgbstyle while rendering tif file using geotools?","body":"<p>I have a tiff file, and the effect when opened in qgis is very inconsistent with the effect rendered with geotools.</p>\n<p>open by qgis\n<a href=\"https://i.stack.imgur.com/xkR6w.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xkR6w.jpg\" alt=\"enter image description here\" /></a></p>\n<p>the imagelab snapshot (Color is obviously distorted).\n<a href=\"https://i.stack.imgur.com/Dwxzd.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dwxzd.jpg\" alt=\"enter image description here\" /></a>\nthe Imagelab source code can be download from here:\n<a href=\"https://docs.geotools.org/stable/userguide/_downloads/b1a328d258da28a4e9da534d4aaca37c/ImageLab.java\" rel=\"nofollow noreferrer\">https://docs.geotools.org/stable/userguide/_downloads/b1a328d258da28a4e9da534d4aaca37c/ImageLab.java</a>\nThe key code is the createRGBStyle function, the code has some compilation errors, mainly namespace issues. I will put the modified code in the link below.</p>\n<p>The strange thing is that some tiff files have normal effects after being opened with imagelab. what is the reason behind the scene?</p>\n<p><a href=\"https://drive.google.com/drive/folders/1wG30b7BEgLSgt9wpLqYce1Lv6pvhs59b?usp=sharing\" rel=\"nofollow noreferrer\">the source tiff file and modified imagelabs</a></p>\n<p>geotools's version: 28.5,29.3,30.1</p>\n<p>I used qgis to view the metadata information of the two tiff data and found nothing special.\ngeotools imagelab render with color error tiff\n<a href=\"https://i.stack.imgur.com/1g5BG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1g5BG.png\" alt=\"geotools render error tiff\" /></a>\ngeotools imagelab render ok tiff\n<a href=\"https://i.stack.imgur.com/T11H8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T11H8.png\" alt=\"geotools render ok tiff\" /></a></p>\n"},{"tags":["java","android-studio","gradle","android-gradle-plugin"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701368114,"post_id":77579725,"comment_id":136769948,"body_markdown":"after migrating i got a new error\n\nCaused by: org.gradle.api.internal.artifacts.ivyservice.DefaultLenientConfiguration$ArtifactResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;.","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#comment136769948_77579725","body":"after migrating i got a new error  Caused by: org.gradle.api.internal.artifacts.ivyservice.DefaultLenientC&zwnj;&#8203;onfiguration$Artifac&zwnj;&#8203;tResolveException: Could not resolve all files for configuration &#39;:app:debugRuntimeClasspath&#39;."},{"score":0,"post_type":"answer","creation_date":1701397564,"post_id":77579725,"comment_id":136773630,"body_markdown":"@LastCode You can try to clean and rebuild the project, check your internet connection, or check your gradle version or dependencies","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#comment136773630_77579725","body":"@LastCode You can try to clean and rebuild the project, check your internet connection, or check your gradle version or dependencies"},{"score":0,"post_type":"answer","creation_date":1701414344,"post_id":77579725,"comment_id":136775021,"body_markdown":"still received the same error maybe i share to you the code via github link you check?","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#comment136775021_77579725","body":"still received the same error maybe i share to you the code via github link you check?"},{"score":0,"post_type":"answer","creation_date":1701414697,"post_id":77579725,"comment_id":136775059,"body_markdown":"sure @LastCode . I would love to help you","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#comment136775059_77579725","body":"sure @LastCode . I would love to help you"},{"score":0,"post_type":"answer","creation_date":1701421707,"post_id":77579725,"comment_id":136776065,"body_markdown":"below is the link\nhttps://github.com/mzunye-777/twitterclone.git","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#comment136776065_77579725","body":"below is the link <a href=\"https://github.com/mzunye-777/twitterclone.git\" rel=\"nofollow noreferrer\">github.com/mzunye-777/twitterclone.git</a>"},{"score":0,"post_type":"answer","creation_date":1701434117,"post_id":77579725,"comment_id":136778047,"body_markdown":"sorry @LastCode I though it was flutter not java. I don&#39;t know java","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#comment136778047_77579725","body":"sorry @LastCode I though it was flutter not java. I don&#39;t know java"},{"score":0,"post_type":"answer","creation_date":1701434548,"post_id":77579725,"comment_id":136778131,"body_markdown":"okay thanks Adam","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#comment136778131_77579725","body":"okay thanks Adam"},{"score":0,"post_type":"answer","creation_date":1701438295,"post_id":77579725,"comment_id":136778819,"body_markdown":"hi Adam i am trying to build a social app i have some experience in Java and little of flutter i want to start over what do you think i should head for?","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#comment136778819_77579725","body":"hi Adam i am trying to build a social app i have some experience in Java and little of flutter i want to start over what do you think i should head for?"},{"score":0,"post_type":"answer","creation_date":1701438463,"post_id":77579725,"comment_id":136778845,"body_markdown":"@LastCode Hello! Based on your experience in Java and some experience in Flutter, you have a good foundation for building a social app. Both Java and Flutter have their own advantages and disadvantages when it comes to mobile app development.","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#comment136778845_77579725","body":"@LastCode Hello! Based on your experience in Java and some experience in Flutter, you have a good foundation for building a social app. Both Java and Flutter have their own advantages and disadvantages when it comes to mobile app development."},{"score":0,"post_type":"answer","creation_date":1701452372,"post_id":77579725,"comment_id":136781553,"body_markdown":"hi i had to uninstall my android","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#comment136781553_77579725","body":"hi i had to uninstall my android"},{"score":0,"post_type":"answer","creation_date":1701454079,"post_id":77579725,"comment_id":136781808,"body_markdown":"hi Adam do you know any social app project i can check from GitHub, I am currently working on one but it will take me like forever to complete?","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#comment136781808_77579725","body":"hi Adam do you know any social app project i can check from GitHub, I am currently working on one but it will take me like forever to complete?"},{"score":0,"post_type":"answer","creation_date":1701487114,"post_id":77579725,"comment_id":136785304,"body_markdown":"I am sorry that you had to go through the uninstallation and reinstallation process. I have searched a little and I have found this, but it is only dart\nhttps://github.com/CharlyKeleb/SocialMedia-App","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#comment136785304_77579725","body":"I am sorry that you had to go through the uninstallation and reinstallation process. I have searched a little and I have found this, but it is only dart <a href=\"https://github.com/CharlyKeleb/SocialMedia-App\" rel=\"nofollow noreferrer\">github.com/CharlyKeleb/SocialMedia-App</a>"},{"score":0,"post_type":"answer","creation_date":1701500421,"post_id":77579725,"comment_id":136785941,"body_markdown":"this is nice Adam working on a new project i would love some help, will you be available to help me since this will be some what of a new experience and a learning opportunity for both of us, how can i reach you via your WhatsApp? maybe send me your number via WhatsApp ?\n\nmy email is mzunye777@gmail.com","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#comment136785941_77579725","body":"this is nice Adam working on a new project i would love some help, will you be available to help me since this will be some what of a new experience and a learning opportunity for both of us, how can i reach you via your WhatsApp? maybe send me your number via WhatsApp ?  my email is mzunye777@gmail.com"},{"score":0,"post_type":"answer","creation_date":1701501625,"post_id":77579725,"comment_id":136786005,"body_markdown":"you can reach me on discord @LastCode you will find it in my youtube channel","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#comment136786005_77579725","body":"you can reach me on discord @LastCode you will find it in my youtube channel"}],"comment_count":14,"score":0,"last_activity_date":1701358602,"creation_date":1701358602,"answer_id":77579725,"question_id":77579664,"body_markdown":"After some research about the error. I found that to solve this you should migrate to AndroidX.\r\nThis is a full documentation about how to migrate:\r\nhttps://developer.android.com/jetpack/androidx/migrate\r\n\r\nThe conclusion is to migrate to AndroidX you should follow these steps:\r\n\r\nWith Android Studio 3.2 and higher, you can migrate an existing project to AndroidX by selecting Refactor &gt; Migrate to AndroidX from the menu bar.\r\n\r\nThe refactor command makes use of two flags. By default, both of them are set to true in your `gradle.properties` file:\r\n\r\n`android.useAndroidX=true`\r\nThe Android plugin uses the appropriate AndroidX library instead of a Support Library.\r\n`android.enableJetifier=true`\r\nThe Android plugin automatically migrates existing third-party libraries to use AndroidX by rewriting their binaries.","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem/77579725#77579725","title":"android studio latest version gradle update problem","body":"<p>After some research about the error. I found that to solve this you should migrate to AndroidX.\nThis is a full documentation about how to migrate:\n<a href=\"https://developer.android.com/jetpack/androidx/migrate\" rel=\"nofollow noreferrer\">https://developer.android.com/jetpack/androidx/migrate</a></p>\n<p>The conclusion is to migrate to AndroidX you should follow these steps:</p>\n<p>With Android Studio 3.2 and higher, you can migrate an existing project to AndroidX by selecting Refactor &gt; Migrate to AndroidX from the menu bar.</p>\n<p>The refactor command makes use of two flags. By default, both of them are set to true in your <code>gradle.properties</code> file:</p>\n<p><code>android.useAndroidX=true</code>\nThe Android plugin uses the appropriate AndroidX library instead of a Support Library.\n<code>android.enableJetifier=true</code>\nThe Android plugin automatically migrates existing third-party libraries to use AndroidX by rewriting their binaries.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":71,"answer_count":1,"score":0,"last_activity_date":1701436278,"creation_date":1701358136,"last_edit_date":1701436278,"question_id":77579664,"body_markdown":"I tried to updated my project which I was working on like 2016, I was updating everything within the code from the gradle version to 28.0.0\r\n\r\nWhile updating an error came up that I have never seen:\r\n```\r\nVersion 28 (intended for Android Pie and below) is the last version of the legacy support library, so we recommend that you migrate to AndroidX libraries when using Android Q and moving forward. The IDE can help with this: Refactor &gt; Migrate to AndroidX...\r\n\r\nthis is line 28 from the code build.gradle (   implementation &#39;com.android.support:appcompat-v7:28.0.0&#39;   )\r\n\r\n\r\nVersion 28 (intended for Android Pie and below) is the last version of the legacy support library, so we recommend that you migrate to AndroidX libraries when using Android Q and moving forward. The IDE can help with this: Refactor &gt; Migrate to AndroidX...\r\n\r\nimplementation &#39;com.android.support:design:28.0.0&#39;\r\n\r\nVersion 28 (intended for Android Pie and below) is the last version of the legacy support library, so we recommend that you migrate to AndroidX libraries when using Android Q and moving forward. The IDE can help with this: Refactor &gt; Migrate to AndroidX...\r\n\r\n\r\nimplementation &#39;com.android.support:support-v4:28.0.0&#39;\r\n\r\n\r\nimplementation &#39;com.android.support:support-vector-drawable:28.0.0&#39;\r\n    implementation &#39;com.android.support:cardview-v7:28.0.0&#39;\r\n```\r\nI tried updating everything to latest version and checking from android studio libraries, but I failed maybe I did something wrong?","link":"https://stackoverflow.com/questions/77579664/android-studio-latest-version-gradle-update-problem","title":"android studio latest version gradle update problem","body":"<p>I tried to updated my project which I was working on like 2016, I was updating everything within the code from the gradle version to 28.0.0</p>\n<p>While updating an error came up that I have never seen:</p>\n<pre><code>Version 28 (intended for Android Pie and below) is the last version of the legacy support library, so we recommend that you migrate to AndroidX libraries when using Android Q and moving forward. The IDE can help with this: Refactor &gt; Migrate to AndroidX...\n\nthis is line 28 from the code build.gradle (   implementation 'com.android.support:appcompat-v7:28.0.0'   )\n\n\nVersion 28 (intended for Android Pie and below) is the last version of the legacy support library, so we recommend that you migrate to AndroidX libraries when using Android Q and moving forward. The IDE can help with this: Refactor &gt; Migrate to AndroidX...\n\nimplementation 'com.android.support:design:28.0.0'\n\nVersion 28 (intended for Android Pie and below) is the last version of the legacy support library, so we recommend that you migrate to AndroidX libraries when using Android Q and moving forward. The IDE can help with this: Refactor &gt; Migrate to AndroidX...\n\n\nimplementation 'com.android.support:support-v4:28.0.0'\n\n\nimplementation 'com.android.support:support-vector-drawable:28.0.0'\n    implementation 'com.android.support:cardview-v7:28.0.0'\n</code></pre>\n<p>I tried updating everything to latest version and checking from android studio libraries, but I failed maybe I did something wrong?</p>\n"},{"tags":["java","apache-poi"],"comments":[{"score":2,"post_type":"question","creation_date":1701382736,"post_id":77581977,"comment_id":136772322,"body_markdown":"Can you please share the full stack trace?","link":"https://stackoverflow.com/questions/77581977/java-lang-nosuchmethoderror-org-apache-poi-xssf-eventusermodel-xssfreader-getsh#comment136772322_77581977","body":"Can you please share the full stack trace?"},{"score":1,"post_type":"question","creation_date":1701408153,"post_id":77581977,"comment_id":136774481,"body_markdown":"&quot;I am not sure from where this method is getting invoked (XSSFReader.getSharedStringsTable())&quot;: The full stack trace will show you this.","link":"https://stackoverflow.com/questions/77581977/java-lang-nosuchmethoderror-org-apache-poi-xssf-eventusermodel-xssfreader-getsh#comment136774481_77581977","body":"&quot;I am not sure from where this method is getting invoked (XSSFReader.getSharedStringsTable())&quot;: The full stack trace will show you this."},{"score":0,"post_type":"question","creation_date":1701435475,"post_id":77581977,"comment_id":136778307,"body_markdown":"Thanks everyone for your support. Unfortunately i did not get full stack trace. Finally i found the root cause, the particular method is invoked by one of the third party jar. I will explain the details in the answer.","link":"https://stackoverflow.com/questions/77581977/java-lang-nosuchmethoderror-org-apache-poi-xssf-eventusermodel-xssfreader-getsh#comment136778307_77581977","body":"Thanks everyone for your support. Unfortunately i did not get full stack trace. Finally i found the root cause, the particular method is invoked by one of the third party jar. I will explain the details in the answer."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701436226,"post_id":77582350,"comment_id":136778439,"body_markdown":"Thanks for sharing the details @Jim Garrison","link":"https://stackoverflow.com/questions/77581977/java-lang-nosuchmethoderror-org-apache-poi-xssf-eventusermodel-xssfreader-getsh/77582350#comment136778439_77582350","body":"Thanks for sharing the details @Jim Garrison"}],"comment_count":1,"score":2,"last_activity_date":1701389041,"creation_date":1701389041,"answer_id":77582350,"question_id":77581977,"body_markdown":"In 5.2.4 that method&#39;s signature has changed.  It returns an instance implementing the `SharedStrings` interface, not a concrete `SharedStringsTable`.  \r\n\r\nYou would have seen this if you looked at the [Javadoc](https://javadoc.io/doc/org.apache.poi/poi-ooxml/5.2.4/index.html) \r\n\r\nThis appears to be a change introduced in 5.2.0.","link":"https://stackoverflow.com/questions/77581977/java-lang-nosuchmethoderror-org-apache-poi-xssf-eventusermodel-xssfreader-getsh/77582350#77582350","title":"java.lang.NoSuchMethodError: org.apache.poi.xssf.eventusermodel.XSSFReader.getSharedStringsTable()Lorg/apache/poi/xssf/model/SharedStringsTable","body":"<p>In 5.2.4 that method's signature has changed.  It returns an instance implementing the <code>SharedStrings</code> interface, not a concrete <code>SharedStringsTable</code>.</p>\n<p>You would have seen this if you looked at the <a href=\"https://javadoc.io/doc/org.apache.poi/poi-ooxml/5.2.4/index.html\" rel=\"nofollow noreferrer\">Javadoc</a></p>\n<p>This appears to be a change introduced in 5.2.0.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701435763,"creation_date":1701435763,"answer_id":77585460,"question_id":77581977,"body_markdown":"I did some analysis and identified the root cause of this issue. \r\n\r\nXSSFReader.getSharedStringsTable() is not invoked from our source\r\nActually, it&#39;s invoked by another third-party jar called **org.openl.rules-5.22.7**, also it&#39;s expecting the return type as SharedStringsTable. \r\n\r\nI will try to upgrade the openl.rules jar as the current version is not compatible with the **org.apache.poi-poi-ooxml-5.2.4** [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nqvzr.png","link":"https://stackoverflow.com/questions/77581977/java-lang-nosuchmethoderror-org-apache-poi-xssf-eventusermodel-xssfreader-getsh/77585460#77585460","title":"java.lang.NoSuchMethodError: org.apache.poi.xssf.eventusermodel.XSSFReader.getSharedStringsTable()Lorg/apache/poi/xssf/model/SharedStringsTable","body":"<p>I did some analysis and identified the root cause of this issue.</p>\n<p>XSSFReader.getSharedStringsTable() is not invoked from our source\nActually, it's invoked by another third-party jar called <strong>org.openl.rules-5.22.7</strong>, also it's expecting the return type as SharedStringsTable.</p>\n<p>I will try to upgrade the openl.rules jar as the current version is not compatible with the <strong>org.apache.poi-poi-ooxml-5.2.4</strong> <a href=\"https://i.stack.imgur.com/nqvzr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nqvzr.png\" alt=\"enter image description here\" /></a></p>\n"}],"comment_count":3,"is_answered":true,"view_count":69,"answer_count":2,"score":-1,"last_activity_date":1701435763,"creation_date":1701382232,"last_edit_date":1701389323,"question_id":77581977,"body_markdown":"I have upgraded the **org.apache.poi-poi-ooxml-4.1.2** to **5.2.4** to fix few vulnerability issues. \r\n\r\nAfter that I got an error mentioned [here][1] and fixed it by adding a dependency **commons-io.commons-io-2.13.0**.\r\n\r\n  [1]: https://stackoverflow.com/questions/77256330/java-lang-nosuchmethoderror-org-apache-commons-io-output-unsynchronizedbytearr\r\n\r\nNow I am getting another exception mentioned below.\r\n\r\n    java.lang.NoSuchMethodError: org.apache.poi.xssf.eventusermodel.XSSFReader.getSharedStringsTable()Lorg/apache/poi/xssf/model/SharedStringsTable;\r\n\r\nI could see the method getSharedStringsTable() in XSSFReader class of poi-ooxml-5.2.4 , but the return type is not SharedStringsTable, its SharedStrings. \r\n\r\nI am not sure from where this method is getting invoked (XSSFReader.getSharedStringsTable()) and why its expecting the return type as SharedStringsTable. \r\n\r\nAnyone faced the similar issue? Do i need to upgrade any other dependency? \r\n","link":"https://stackoverflow.com/questions/77581977/java-lang-nosuchmethoderror-org-apache-poi-xssf-eventusermodel-xssfreader-getsh","title":"java.lang.NoSuchMethodError: org.apache.poi.xssf.eventusermodel.XSSFReader.getSharedStringsTable()Lorg/apache/poi/xssf/model/SharedStringsTable","body":"<p>I have upgraded the <strong>org.apache.poi-poi-ooxml-4.1.2</strong> to <strong>5.2.4</strong> to fix few vulnerability issues.</p>\n<p>After that I got an error mentioned <a href=\"https://stackoverflow.com/questions/77256330/java-lang-nosuchmethoderror-org-apache-commons-io-output-unsynchronizedbytearr\">here</a> and fixed it by adding a dependency <strong>commons-io.commons-io-2.13.0</strong>.</p>\n<p>Now I am getting another exception mentioned below.</p>\n<pre><code>java.lang.NoSuchMethodError: org.apache.poi.xssf.eventusermodel.XSSFReader.getSharedStringsTable()Lorg/apache/poi/xssf/model/SharedStringsTable;\n</code></pre>\n<p>I could see the method getSharedStringsTable() in XSSFReader class of poi-ooxml-5.2.4 , but the return type is not SharedStringsTable, its SharedStrings.</p>\n<p>I am not sure from where this method is getting invoked (XSSFReader.getSharedStringsTable()) and why its expecting the return type as SharedStringsTable.</p>\n<p>Anyone faced the similar issue? Do i need to upgrade any other dependency?</p>\n"},{"tags":["java","spring","mapstruct"],"answers":[{"comment_count":0,"score":1,"last_activity_date":1699871058,"creation_date":1699871058,"answer_id":77473177,"question_id":77473032,"body_markdown":"Using `expression` is useless in your case, you can simply use `qualifiedByName` like this:\r\n\r\n    @Mapping(target = &quot;id&quot;, source = &quot;source&quot;, qualifiedByName = &quot;getIdDtoBasedOnFlag&quot;)\r\n    public TargetDto toTargetDto(IpEntity source);\r\n    \r\n    @Named(&quot;getIdDtoBasedOnFlag&quot;)\r\n    default IdDto getIdDtoBasedOnFlag(IpEntity src) {\r\n      // ...\r\n    }","link":"https://stackoverflow.com/questions/77473032/mapstruct-mapper-error-cannot-find-symbol/77473177#77473177","title":"Mapstruct Mapper Error : Cannot Find Symbol","body":"<p>Using <code>expression</code> is useless in your case, you can simply use <code>qualifiedByName</code> like this:</p>\n<pre><code>@Mapping(target = &quot;id&quot;, source = &quot;source&quot;, qualifiedByName = &quot;getIdDtoBasedOnFlag&quot;)\npublic TargetDto toTargetDto(IpEntity source);\n\n@Named(&quot;getIdDtoBasedOnFlag&quot;)\ndefault IdDto getIdDtoBasedOnFlag(IpEntity src) {\n  // ...\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":119,"answer_count":1,"score":1,"last_activity_date":1701434846,"creation_date":1699869501,"last_edit_date":1701434846,"question_id":77473032,"body_markdown":"I had existing mapper in code. I am trying to modify it.\r\n\r\nLine Before Mapping is as follow. I was directly mapping id to id.\r\n\r\n    @Mapping(target = &quot;id&quot;, source = &quot;source.id&quot;)\r\n    public TargetDto toTargetDto(IpEntity source);\r\n\r\nUpdated the mapping as follow. I needed to add mapping based on function because I am reading some flag and setting it up.\r\n\r\n    @Mapping(target = &quot;id&quot;, expression = &quot;java(getIdDtoBasedOnFlag(source))&quot;)\r\n    public TargetDto toTargetDto(IpEntity source);\r\n\r\nMethod I added is as follows.\r\n\r\n    default IdDto getIdDtoBasedOnFlag(IpEntity src) {\r\n        IdDto cd = new IdDto();\r\n        if(idType.equalsIgnoreCase(&quot;standard&quot;)){\r\n            StndIdRelationEntity c = src.getPrimaryId();\r\n            cd.setIdCode(c.getIdNumber());\r\n            cd.setId(c.getId().toString());\r\n            cd.setIdName(c.getIdName());\r\n        }\r\n        else{\r\n            IdRelationEntity c = src.getId();\r\n            cd.setIdCode(c.getSourceCode());\r\n            cd.setId(c.getId().toString());\r\n            cd.setIdName(c.getIdName());\r\n        }\r\n        return cd;\r\n    }\r\n\r\nNow I am getting error in Impl class that gets generated as\r\n```\r\n  java: cannot find symbol\r\n  symbol:   variable source\r\n  location: class com.package.mapper.MapperImpl\r\n```\r\n\r\nIdDto class is as follows.\r\n```\r\n@Data\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class IdDto {\r\n    @JsonProperty(value = &quot;id&quot;)\r\n    private String idId;\r\n\r\n    @JsonProperty(value = &quot;display&quot;)\r\n    private String idName;\r\n\r\n    @JsonProperty(value = &quot;idCode&quot;)\r\n    private String idCode;\r\n\r\n    private Map&lt;String, String&gt; links;\r\n}\r\n\r\n```\r\n\r\nIf check the line in Impl class \r\n```\r\n    protected IdDto idRelationEntityToIdDto(IdRelationEntity idRelationEntity) {\r\n        if ( idRelationEntity == null ) {\r\n            return null;\r\n        }\r\n        IdDto IdDto = new IdDto();\r\n        IdDto.setIdName( idRelationEntity.getIdName() );\r\n        IdDto.setId( getIdIdBasedOnFlag(source) );//Error is coming from this line\r\n        return IdDto;\r\n    }\r\n\r\n\r\nsPLTargetDto.setId( idRelationEntityToIdDto( source.getId() ) );\r\n```\r\nAs you can see source is not getting passed properly in generated Impl method, Because of which it is failing. How do I fix it.\r\n\r\n\r\n\r\nI tried adding using qualifiedName but it didn&#39;t work.\r\n```\r\n@Mapping(target = &quot;Id&quot;, expression = &quot;java(getIdDtoBasedOnFlag(source))&quot;,qualifiedByName=&quot;getIdDtoBasedOnFlag&quot;)\r\n```","link":"https://stackoverflow.com/questions/77473032/mapstruct-mapper-error-cannot-find-symbol","title":"Mapstruct Mapper Error : Cannot Find Symbol","body":"<p>I had existing mapper in code. I am trying to modify it.</p>\n<p>Line Before Mapping is as follow. I was directly mapping id to id.</p>\n<pre><code>@Mapping(target = &quot;id&quot;, source = &quot;source.id&quot;)\npublic TargetDto toTargetDto(IpEntity source);\n</code></pre>\n<p>Updated the mapping as follow. I needed to add mapping based on function because I am reading some flag and setting it up.</p>\n<pre><code>@Mapping(target = &quot;id&quot;, expression = &quot;java(getIdDtoBasedOnFlag(source))&quot;)\npublic TargetDto toTargetDto(IpEntity source);\n</code></pre>\n<p>Method I added is as follows.</p>\n<pre><code>default IdDto getIdDtoBasedOnFlag(IpEntity src) {\n    IdDto cd = new IdDto();\n    if(idType.equalsIgnoreCase(&quot;standard&quot;)){\n        StndIdRelationEntity c = src.getPrimaryId();\n        cd.setIdCode(c.getIdNumber());\n        cd.setId(c.getId().toString());\n        cd.setIdName(c.getIdName());\n    }\n    else{\n        IdRelationEntity c = src.getId();\n        cd.setIdCode(c.getSourceCode());\n        cd.setId(c.getId().toString());\n        cd.setIdName(c.getIdName());\n    }\n    return cd;\n}\n</code></pre>\n<p>Now I am getting error in Impl class that gets generated as</p>\n<pre><code>  java: cannot find symbol\n  symbol:   variable source\n  location: class com.package.mapper.MapperImpl\n</code></pre>\n<p>IdDto class is as follows.</p>\n<pre><code>@Data\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class IdDto {\n    @JsonProperty(value = &quot;id&quot;)\n    private String idId;\n\n    @JsonProperty(value = &quot;display&quot;)\n    private String idName;\n\n    @JsonProperty(value = &quot;idCode&quot;)\n    private String idCode;\n\n    private Map&lt;String, String&gt; links;\n}\n\n</code></pre>\n<p>If check the line in Impl class</p>\n<pre><code>    protected IdDto idRelationEntityToIdDto(IdRelationEntity idRelationEntity) {\n        if ( idRelationEntity == null ) {\n            return null;\n        }\n        IdDto IdDto = new IdDto();\n        IdDto.setIdName( idRelationEntity.getIdName() );\n        IdDto.setId( getIdIdBasedOnFlag(source) );//Error is coming from this line\n        return IdDto;\n    }\n\n\nsPLTargetDto.setId( idRelationEntityToIdDto( source.getId() ) );\n</code></pre>\n<p>As you can see source is not getting passed properly in generated Impl method, Because of which it is failing. How do I fix it.</p>\n<p>I tried adding using qualifiedName but it didn't work.</p>\n<pre><code>@Mapping(target = &quot;Id&quot;, expression = &quot;java(getIdDtoBasedOnFlag(source))&quot;,qualifiedByName=&quot;getIdDtoBasedOnFlag&quot;)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","maven","spring-data-jpa"],"comments":[{"score":0,"post_type":"question","creation_date":1676967065,"post_id":75517513,"comment_id":133238296,"body_markdown":"Remove `sqlite-dialect` and `hibernate-jpa-2.1-api`. Fix your imports (which now will probably fail as you probably have `javax.persistence` instead `jakarta.persistence`. As the `sqlite-dialect` you are using is from 2017 I doubt it is compatible with the most recent version(s) of Hibernate.","link":"https://stackoverflow.com/questions/75517513/correct-the-classpath-of-your-application-so-that-it-contains-a-single-compatib#comment133238296_75517513","body":"Remove <code>sqlite-dialect</code> and <code>hibernate-jpa-2.1-api</code>. Fix your imports (which now will probably fail as you probably have <code>javax.persistence</code> instead <code>jakarta.persistence</code>. As the <code>sqlite-dialect</code> you are using is from 2017 I doubt it is compatible with the most recent version(s) of Hibernate."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1679497770,"creation_date":1679497770,"answer_id":75814034,"question_id":75517513,"body_markdown":"I had the same error as you.\r\nYou should remove from your pom.xml the **sqlite-dialect** dependency and modify your **hibernate** dependency this way : \r\n\r\nthe **groupId tag** should contain **org.hibernate.orm**\r\n\r\nand your **artifactId** should contain **hibernate-community-dialects**\r\n\r\nalso in your **application.properties** you should have **spring.jpa.database-platform=org.hibernate.community.dialect.SQLiteDialect**","link":"https://stackoverflow.com/questions/75517513/correct-the-classpath-of-your-application-so-that-it-contains-a-single-compatib/75814034#75814034","title":"Correct the classpath of your application so that it contains a single, compatible version of org.hibernate.dialect.SQLiteDialect","body":"<p>I had the same error as you.\nYou should remove from your pom.xml the <strong>sqlite-dialect</strong> dependency and modify your <strong>hibernate</strong> dependency this way :</p>\n<p>the <strong>groupId tag</strong> should contain <strong>org.hibernate.orm</strong></p>\n<p>and your <strong>artifactId</strong> should contain <strong>hibernate-community-dialects</strong></p>\n<p>also in your <strong>application.properties</strong> you should have <strong>spring.jpa.database-platform=org.hibernate.community.dialect.SQLiteDialect</strong></p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701434140,"creation_date":1701434140,"answer_id":77585321,"question_id":75517513,"body_markdown":"From Hibernate 6, SQLite dialect is supported.\r\nWe have to import in our pom.xml:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-community-dialects&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nCopy\r\nAnd in our application properties:\r\n\r\n    spring.jpa.database-platform=org.hibernate.community.dialect.SQLiteDialect\r\n\r\nhttps://www.baeldung.com/spring-boot-sqlite","link":"https://stackoverflow.com/questions/75517513/correct-the-classpath-of-your-application-so-that-it-contains-a-single-compatib/77585321#77585321","title":"Correct the classpath of your application so that it contains a single, compatible version of org.hibernate.dialect.SQLiteDialect","body":"<p>From Hibernate 6, SQLite dialect is supported.\nWe have to import in our pom.xml:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-community-dialects&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Copy\nAnd in our application properties:</p>\n<pre><code>spring.jpa.database-platform=org.hibernate.community.dialect.SQLiteDialect\n</code></pre>\n<p><a href=\"https://www.baeldung.com/spring-boot-sqlite\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-sqlite</a></p>\n"}],"comment_count":1,"is_answered":false,"view_count":884,"answer_count":2,"score":-1,"last_activity_date":1701434140,"creation_date":1676965246,"question_id":75517513,"body_markdown":"Im new to SpringBoot. Please let me know how to fix this below error. \r\n\r\n&quot;Correct the classpath of your application so that it contains a single, compatible version of org.hibernate.dialect.SQLiteDialect&quot;\r\n\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\r\n\r\n    org.hibernate.dialect.SQLiteDialect.&lt;init&gt;(SQLiteDialect.java:20)\r\n\r\nThe following method did not exist:\r\n\r\n    &#39;void org.hibernate.dialect.SQLiteDialect.registerColumnType(int, java.lang.String)&#39;\r\n\r\nThe calling method&#39;s class, org.hibernate.dialect.SQLiteDialect, was loaded from the following location:\r\n\r\n    jar:file:/C:/Users/kakarthi/.m2/repository/com/zsoltfabok/sqlite-dialect/1.0/sqlite-dialect-1.0.jar!/org/hibernate/dialect/SQLiteDialect.class\r\n\r\nThe called method&#39;s class, org.hibernate.dialect.SQLiteDialect, is available from the following locations:\r\n\r\n    jar:file:/C:/Users/kakarthi/.m2/repository/com/zsoltfabok/sqlite-dialect/1.0/sqlite-dialect-1.0.jar!/org/hibernate/dialect/SQLiteDialect.class\r\n\r\nThe called method&#39;s class hierarchy was loaded from the following locations:\r\n\r\n    org.hibernate.dialect.SQLiteDialect: file:/C:/Users/kakarthi/.m2/repository/com/zsoltfabok/sqlite-dialect/1.0/sqlite-dialect-1.0.jar\r\n    org.hibernate.dialect.Dialect: file:/C:/Users/kakarthi/.m2/repository/org/hibernate/orm/hibernate-core/6.1.6.Final/hibernate-core-6.1.6.Final.jar\r\n\r\n\r\nAction:\r\n\r\nCorrect the classpath of your application so that it contains a single, compatible version of org.hibernate.dialect.SQLiteDialect\r\n\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\nMy POM.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.springLearning&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;springLearning&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;springLearning&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.zsoltfabok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;sqlite-dialect&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.xerial&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.40.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nPlease let me know how to fix this below error. \r\n\r\n&quot;Correct the classpath of your application so that it contains a single, compatible version of org.hibernate.dialect.SQLiteDialect&quot;. \r\n\r\nI have tried removing or increasing verisons but still im facing issue. Any help would be apricated.\r\n\r\n","link":"https://stackoverflow.com/questions/75517513/correct-the-classpath-of-your-application-so-that-it-contains-a-single-compatib","title":"Correct the classpath of your application so that it contains a single, compatible version of org.hibernate.dialect.SQLiteDialect","body":"<p>Im new to SpringBoot. Please let me know how to fix this below error.</p>\n<p>&quot;Correct the classpath of your application so that it contains a single, compatible version of org.hibernate.dialect.SQLiteDialect&quot;</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\n\n    org.hibernate.dialect.SQLiteDialect.&lt;init&gt;(SQLiteDialect.java:20)\n\nThe following method did not exist:\n\n    'void org.hibernate.dialect.SQLiteDialect.registerColumnType(int, java.lang.String)'\n\nThe calling method's class, org.hibernate.dialect.SQLiteDialect, was loaded from the following location:\n\n    jar:file:/C:/Users/kakarthi/.m2/repository/com/zsoltfabok/sqlite-dialect/1.0/sqlite-dialect-1.0.jar!/org/hibernate/dialect/SQLiteDialect.class\n\nThe called method's class, org.hibernate.dialect.SQLiteDialect, is available from the following locations:\n\n    jar:file:/C:/Users/kakarthi/.m2/repository/com/zsoltfabok/sqlite-dialect/1.0/sqlite-dialect-1.0.jar!/org/hibernate/dialect/SQLiteDialect.class\n\nThe called method's class hierarchy was loaded from the following locations:\n\n    org.hibernate.dialect.SQLiteDialect: file:/C:/Users/kakarthi/.m2/repository/com/zsoltfabok/sqlite-dialect/1.0/sqlite-dialect-1.0.jar\n    org.hibernate.dialect.Dialect: file:/C:/Users/kakarthi/.m2/repository/org/hibernate/orm/hibernate-core/6.1.6.Final/hibernate-core-6.1.6.Final.jar\n\n\nAction:\n\nCorrect the classpath of your application so that it contains a single, compatible version of org.hibernate.dialect.SQLiteDialect\n\n\nProcess finished with exit code 1\n</code></pre>\n<p>My POM.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.springLearning&lt;/groupId&gt;\n    &lt;artifactId&gt;springLearning&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;springLearning&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.zsoltfabok&lt;/groupId&gt;\n            &lt;artifactId&gt;sqlite-dialect&lt;/artifactId&gt;\n            &lt;version&gt;1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.xerial&lt;/groupId&gt;\n            &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;3.40.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Please let me know how to fix this below error.</p>\n<p>&quot;Correct the classpath of your application so that it contains a single, compatible version of org.hibernate.dialect.SQLiteDialect&quot;.</p>\n<p>I have tried removing or increasing verisons but still im facing issue. Any help would be apricated.</p>\n"},{"tags":["java","android","firebase-realtime-database"],"comments":[{"score":0,"post_type":"question","creation_date":1701367423,"post_id":77580723,"comment_id":136769847,"body_markdown":"Do not shout!!!","link":"https://stackoverflow.com/questions/77580723/mobile-number-not-saved-in-firedatabase-from-previous-activity#comment136769847_77580723","body":"Do not shout!!!"},{"score":0,"post_type":"question","creation_date":1701373792,"post_id":77580723,"comment_id":136770975,"body_markdown":"Your shift key seems to be stuck. Please fix that.","link":"https://stackoverflow.com/questions/77580723/mobile-number-not-saved-in-firedatabase-from-previous-activity#comment136770975_77580723","body":"Your shift key seems to be stuck. Please fix that."},{"score":2,"post_type":"question","creation_date":1701378790,"post_id":77580723,"comment_id":136771765,"body_markdown":"What a great format - the title all in lowercase, the text all in uppercase - that cannot be a *serious* question  :-/","link":"https://stackoverflow.com/questions/77580723/mobile-number-not-saved-in-firedatabase-from-previous-activity#comment136771765_77580723","body":"What a great format - the title all in lowercase, the text all in uppercase - that cannot be a <i>serious</i> question  :-/"},{"score":0,"post_type":"question","creation_date":1701433877,"post_id":77580723,"comment_id":136778003,"body_markdown":"Hey Uday. As you probably noticed, you question attracted some negative comments and downvotes. The reason for that is that you posted the text in the question in all-caps, which is generally perceived on the internet as SHOUTING. To increase the chances that someone will actually help going forward, use proper casing for the text - and follow the other guidance in [how to ask a good question](https://stackoverflow.com/help/how-to-ask)","link":"https://stackoverflow.com/questions/77580723/mobile-number-not-saved-in-firedatabase-from-previous-activity#comment136778003_77580723","body":"Hey Uday. As you probably noticed, you question attracted some negative comments and downvotes. The reason for that is that you posted the text in the question in all-caps, which is generally perceived on the internet as SHOUTING. To increase the chances that someone will actually help going forward, use proper casing for the text - and follow the other guidance in <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a good question</a>"},{"score":0,"post_type":"question","creation_date":1701433968,"post_id":77580723,"comment_id":136778014,"body_markdown":"On the actual content, it helps if you provide basic information on what happens when you step through the app in a debugger. Since you have `addOnCompleteListener`, does that get called? If so, which of the toasts is shown?","link":"https://stackoverflow.com/questions/77580723/mobile-number-not-saved-in-firedatabase-from-previous-activity#comment136778014_77580723","body":"On the actual content, it helps if you provide basic information on what happens when you step through the app in a debugger. Since you have <code>addOnCompleteListener</code>, does that get called? If so, which of the toasts is shown?"},{"score":0,"post_type":"question","creation_date":1701436653,"post_id":77580723,"comment_id":136778508,"body_markdown":"Please edit your question and add the information Frank asked for, and please also respond using @.","link":"https://stackoverflow.com/questions/77580723/mobile-number-not-saved-in-firedatabase-from-previous-activity#comment136778508_77580723","body":"Please edit your question and add the information Frank asked for, and please also respond using @."}],"comment_count":6,"is_answered":false,"view_count":44,"answer_count":0,"score":-4,"last_activity_date":1701433851,"creation_date":1701367254,"last_edit_date":1701433851,"question_id":77580723,"body_markdown":"I created first &#39;login activity; in which mobile no enter by user and send otp after click submit btn and create putextra method, so I can mobile number enter by user is use in next acivity.\r\n\r\n````\r\nIntent intent = new Intent(LoginActivity.this, OTPAuthentication.class);\r\n                intent.putExtra(&quot;mobile&quot;, edttxtmobileno.getText().toString());\r\n                intent.putExtra(&quot;otp&quot;,codesent);\r\n                startActivity(intent);\r\n````\r\n\r\n\r\nAfter in which second activity (otp authentication) above enter otp input create textview in which mobile number show which enter by user.\r\n\r\n````\r\ntextmobile.setText(String.format(\r\n                &quot;91-%s&quot;, getIntent().getStringExtra(&quot;mobile&quot;)\r\n        ));\r\n````\r\n\r\nAfter both activity successfull third activity save username and profession from spinner in Firebase\r\n\r\n````\r\ndatabaseReference = FirebaseDatabase.getInstance().getReference(&quot;users&quot;);\r\n                String userId = databaseReference.push().getKey();\r\n                User user = new User(username, profession,mobile);\r\n\r\n                assert userId != null;\r\n                databaseReference.child(userId).setValue(user)\r\n                        .addOnCompleteListener(task -&gt; {\r\n                            if (task.isSuccessful()) {\r\n                                Toast.makeText(getApplicationContext(), &quot;Success&quot;, Toast.LENGTH_SHORT).show();\r\n                                Log.d(&quot;Firebase&quot;, &quot;Data saved successfully&quot;); // Log success\r\n                                Intent intent = new Intent(getApplicationContext(), NexusHome.class);\r\n                                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n                                startActivity(intent);\r\n                            } else {\r\n                                Toast.makeText(getApplicationContext(), &quot;Failed to save data&quot;, Toast.LENGTH_SHORT).show();\r\n                                Log.e(&quot;Firebase&quot;, &quot;Failed to save data: &quot; + task.getException()); // Log failure with exception\r\n                            }\r\n\r\n                            btnsaveprofile.setVisibility(View.VISIBLE);\r\n                            mprogressbarofsaveprofile.setVisibility(View.INVISIBLE);\r\n\r\n                        });\r\n````\r\n\r\nAnd user java class for save data in firebase:\r\n\r\n````\r\npackage com.example.nexus_architecture;\r\n\r\npublic class User {\r\n    private String username;\r\n    private String profession;\r\n    private String mobile;\r\n\r\n\r\n    public User() {\r\n    }\r\n\r\n    public User(String username, String profession, String mobile) {\r\n        this.username = username;\r\n        this.profession = profession;\r\n        this.mobile = mobile;\r\n    }\r\n\r\n    public String getUsername() {\r\n        return username;\r\n    }\r\n\r\n    public void setUsername(String username) {\r\n        this.username = username;\r\n    }\r\n\r\n    public String getProfession() {\r\n        return profession;\r\n    }\r\n\r\n    public void setProfession(String profession) {\r\n        this.profession = profession;\r\n    }\r\n\r\n    public String getMobile() {\r\n        return mobile;\r\n    }\r\n\r\n    public void setMobile(String mobile) {\r\n        this.mobile = mobile;\r\n    }\r\n}\r\n````\r\n\r\n\r\n\r\nWhen I click save userprofile btn then username and profession saved, but the mobile number is not saved.\r\n\r\nHow can mobile no save with username and profession?","link":"https://stackoverflow.com/questions/77580723/mobile-number-not-saved-in-firedatabase-from-previous-activity","title":"mobile number not saved in firedatabase from previous activity","body":"<p>I created first 'login activity; in which mobile no enter by user and send otp after click submit btn and create putextra method, so I can mobile number enter by user is use in next acivity.</p>\n<pre><code>Intent intent = new Intent(LoginActivity.this, OTPAuthentication.class);\n                intent.putExtra(&quot;mobile&quot;, edttxtmobileno.getText().toString());\n                intent.putExtra(&quot;otp&quot;,codesent);\n                startActivity(intent);\n</code></pre>\n<p>After in which second activity (otp authentication) above enter otp input create textview in which mobile number show which enter by user.</p>\n<pre><code>textmobile.setText(String.format(\n                &quot;91-%s&quot;, getIntent().getStringExtra(&quot;mobile&quot;)\n        ));\n</code></pre>\n<p>After both activity successfull third activity save username and profession from spinner in Firebase</p>\n<pre><code>databaseReference = FirebaseDatabase.getInstance().getReference(&quot;users&quot;);\n                String userId = databaseReference.push().getKey();\n                User user = new User(username, profession,mobile);\n\n                assert userId != null;\n                databaseReference.child(userId).setValue(user)\n                        .addOnCompleteListener(task -&gt; {\n                            if (task.isSuccessful()) {\n                                Toast.makeText(getApplicationContext(), &quot;Success&quot;, Toast.LENGTH_SHORT).show();\n                                Log.d(&quot;Firebase&quot;, &quot;Data saved successfully&quot;); // Log success\n                                Intent intent = new Intent(getApplicationContext(), NexusHome.class);\n                                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\n                                startActivity(intent);\n                            } else {\n                                Toast.makeText(getApplicationContext(), &quot;Failed to save data&quot;, Toast.LENGTH_SHORT).show();\n                                Log.e(&quot;Firebase&quot;, &quot;Failed to save data: &quot; + task.getException()); // Log failure with exception\n                            }\n\n                            btnsaveprofile.setVisibility(View.VISIBLE);\n                            mprogressbarofsaveprofile.setVisibility(View.INVISIBLE);\n\n                        });\n</code></pre>\n<p>And user java class for save data in firebase:</p>\n<pre><code>package com.example.nexus_architecture;\n\npublic class User {\n    private String username;\n    private String profession;\n    private String mobile;\n\n\n    public User() {\n    }\n\n    public User(String username, String profession, String mobile) {\n        this.username = username;\n        this.profession = profession;\n        this.mobile = mobile;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getProfession() {\n        return profession;\n    }\n\n    public void setProfession(String profession) {\n        this.profession = profession;\n    }\n\n    public String getMobile() {\n        return mobile;\n    }\n\n    public void setMobile(String mobile) {\n        this.mobile = mobile;\n    }\n}\n</code></pre>\n<p>When I click save userprofile btn then username and profession saved, but the mobile number is not saved.</p>\n<p>How can mobile no save with username and profession?</p>\n"},{"tags":["java","android","get"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701431991,"creation_date":1701431991,"answer_id":77585120,"question_id":77580312,"body_markdown":"It&#39;s simple to make a request get with okhttp3:\r\n\r\n```\r\n\r\n\r\npublic class Client extends AppCompatActivity {\r\n    @Override\r\n    protected void onCreate(Bundle bundle) {\r\n        //Toast.makeText(getApplicationContext(), &quot;Clicado o 2&quot;, Toast.LENGTH_LONG).show();\r\n        super.onCreate(bundle);\r\n        setContentView(R.layout.activity_client);\r\n        Background_DoWork();\r\n\r\n    }\r\n\r\n    private final int Fine_Permision_Code = 1;\r\n    private GoogleMap myMap;\r\n    Location location;\r\n    FusedLocationProviderClient fs;\r\n\r\n    private void Background_DoWork() {\r\n        ImageButton imgbtnBack = findViewById(R.id.BackActivity);\r\n        imgbtnBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                finish();\r\n            }\r\n        });\r\n\r\n\r\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\r\n                .findFragmentById(R.id.map);\r\n\r\n\r\n        ActivityResultLauncher&lt;String[]&gt; locationPermissionRequest =\r\n                registerForActivityResult(new ActivityResultContracts\r\n                        .RequestMultiplePermissions(), result -&gt; {\r\n                    Boolean fineLocationGranted = result.getOrDefault(\r\n                            android.Manifest.permission.ACCESS_FINE_LOCATION, false);\r\n                    Boolean coarseLocationGranted = result.getOrDefault(\r\n                            android.Manifest.permission.ACCESS_COARSE_LOCATION, false);\r\n                    if ((fineLocationGranted != null &amp;&amp; fineLocationGranted) || (coarseLocationGranted != null &amp;&amp; coarseLocationGranted)) {\r\n\r\n                        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\r\n                        List&lt;String&gt; providers = lm.getProviders(true);\r\n                        Location location = null;\r\n\r\n\r\n                        if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n\r\n                                return;\r\n                        }\r\n\r\n                        lm.requestSingleUpdate(LocationManager.GPS_PROVIDER, new LocationListener() {\r\n                            @Override\r\n                            public void onLocationChanged(@NonNull Location location) {\r\n                                double lat = location.getLatitude();\r\n                                Log.d(&quot;lat: &quot;, &quot;&quot;+lat);\r\n                                double lng = location.getLongitude();\r\n                                Log.d(&quot;lng: &quot;, &quot;&quot;+lng);\r\n\r\n                                String path = &quot;https://nominatim.openstreetmap.org/reverse?lat=&quot; + lat + &quot;&amp;lon=&quot; + lng + &quot;&amp;format=json&amp;extratags=1&quot;;\r\n\r\n                                try {\r\n                                    Request rq = new Request.Builder().url(path).build();\r\n                                    OkHttpClient client = new OkHttpClient();\r\n\r\n                                    client.newCall(rq).enqueue(new Callback() {\r\n                                        @Override\r\n                                        public void onFailure(@NonNull Call call, @NonNull IOException e) {\r\n                                            Log.d(&quot;Error&quot;, &quot;&quot;+e);\r\n                                        }\r\n\r\n                                        @Override\r\n                                        public void onResponse(@NonNull Call call, @NonNull Response response) throws IOException {\r\n                                            Log.d(&quot;Message&quot;, &quot;&quot;+response);\r\n                                        }\r\n                                    });\r\n                                }\r\n                                catch (Exception ex) {\r\n                                    Log.d(&quot;s&quot;, &quot;&quot;+ex);\r\n                                }\r\n                                finally {\r\n                                    //urlConnection.disconnect();\r\n                                }\r\n\r\n                            }\r\n                        }, null);\r\n\r\n                    }\r\n                });\r\n\r\n        locationPermissionRequest.launch(new String[] {\r\n                android.Manifest.permission.ACCESS_FINE_LOCATION,\r\n                android.Manifest.permission.ACCESS_COARSE_LOCATION\r\n        });\r\n    }\r\n}\r\n\r\n```\r\n\r\nI recomend read the documentation of [okhttp](https://square.github.io/okhttp/)","link":"https://stackoverflow.com/questions/77580312/request-get-on-android-studio/77585120#77585120","title":"Request Get on Android Studio","body":"<p>It's simple to make a request get with okhttp3:</p>\n<pre><code>\n\npublic class Client extends AppCompatActivity {\n    @Override\n    protected void onCreate(Bundle bundle) {\n        //Toast.makeText(getApplicationContext(), &quot;Clicado o 2&quot;, Toast.LENGTH_LONG).show();\n        super.onCreate(bundle);\n        setContentView(R.layout.activity_client);\n        Background_DoWork();\n\n    }\n\n    private final int Fine_Permision_Code = 1;\n    private GoogleMap myMap;\n    Location location;\n    FusedLocationProviderClient fs;\n\n    private void Background_DoWork() {\n        ImageButton imgbtnBack = findViewById(R.id.BackActivity);\n        imgbtnBack.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                finish();\n            }\n        });\n\n\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\n                .findFragmentById(R.id.map);\n\n\n        ActivityResultLauncher&lt;String[]&gt; locationPermissionRequest =\n                registerForActivityResult(new ActivityResultContracts\n                        .RequestMultiplePermissions(), result -&gt; {\n                    Boolean fineLocationGranted = result.getOrDefault(\n                            android.Manifest.permission.ACCESS_FINE_LOCATION, false);\n                    Boolean coarseLocationGranted = result.getOrDefault(\n                            android.Manifest.permission.ACCESS_COARSE_LOCATION, false);\n                    if ((fineLocationGranted != null &amp;&amp; fineLocationGranted) || (coarseLocationGranted != null &amp;&amp; coarseLocationGranted)) {\n\n                        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\n                        List&lt;String&gt; providers = lm.getProviders(true);\n                        Location location = null;\n\n\n                        if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n\n                                return;\n                        }\n\n                        lm.requestSingleUpdate(LocationManager.GPS_PROVIDER, new LocationListener() {\n                            @Override\n                            public void onLocationChanged(@NonNull Location location) {\n                                double lat = location.getLatitude();\n                                Log.d(&quot;lat: &quot;, &quot;&quot;+lat);\n                                double lng = location.getLongitude();\n                                Log.d(&quot;lng: &quot;, &quot;&quot;+lng);\n\n                                String path = &quot;https://nominatim.openstreetmap.org/reverse?lat=&quot; + lat + &quot;&amp;lon=&quot; + lng + &quot;&amp;format=json&amp;extratags=1&quot;;\n\n                                try {\n                                    Request rq = new Request.Builder().url(path).build();\n                                    OkHttpClient client = new OkHttpClient();\n\n                                    client.newCall(rq).enqueue(new Callback() {\n                                        @Override\n                                        public void onFailure(@NonNull Call call, @NonNull IOException e) {\n                                            Log.d(&quot;Error&quot;, &quot;&quot;+e);\n                                        }\n\n                                        @Override\n                                        public void onResponse(@NonNull Call call, @NonNull Response response) throws IOException {\n                                            Log.d(&quot;Message&quot;, &quot;&quot;+response);\n                                        }\n                                    });\n                                }\n                                catch (Exception ex) {\n                                    Log.d(&quot;s&quot;, &quot;&quot;+ex);\n                                }\n                                finally {\n                                    //urlConnection.disconnect();\n                                }\n\n                            }\n                        }, null);\n\n                    }\n                });\n\n        locationPermissionRequest.launch(new String[] {\n                android.Manifest.permission.ACCESS_FINE_LOCATION,\n                android.Manifest.permission.ACCESS_COARSE_LOCATION\n        });\n    }\n}\n\n</code></pre>\n<p>I recomend read the documentation of <a href=\"https://square.github.io/okhttp/\" rel=\"nofollow noreferrer\">okhttp</a></p>\n"}],"comment_count":0,"is_answered":true,"view_count":23,"answer_count":1,"score":0,"last_activity_date":1701431991,"creation_date":1701363631,"question_id":77580312,"body_markdown":"I&#39;m create a app to found where is the client (city, localization, route, ...) and to solve this i need make a request get to this website \r\n`https://nominatim.openstreetmap.org` \r\non android studio with language java, its possible to make?\r\n\r\n```\r\npublic class Player extends AppCompatActivity {\r\n    @Override\r\n    protected void onCreate(Bundle bundle) {\r\n        super.onCreate(bundle);\r\n        setContentView(R.layout.activity_client);\r\n        Background_DoWork();\r\n\r\n    }\r\n\r\n    \r\n    private void Background_DoWork() {\r\n        ImageButton imgbtnBack = findViewById(R.id.BackActivity);\r\n        imgbtnBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                finish();\r\n            }\r\n        });\r\n\r\n\r\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\r\n                .findFragmentById(R.id.map);\r\n\r\n\r\n        ActivityResultLauncher&lt;String[]&gt; locationPermissionRequest =\r\n                registerForActivityResult(new ActivityResultContracts\r\n                        .RequestMultiplePermissions(), result -&gt; {\r\n                    Boolean fineLocationGranted = result.getOrDefault(\r\n                            android.Manifest.permission.ACCESS_FINE_LOCATION, false);\r\n                    Boolean coarseLocationGranted = result.getOrDefault(\r\n                            android.Manifest.permission.ACCESS_COARSE_LOCATION, false);\r\n                    if ((fineLocationGranted != null &amp;&amp; fineLocationGranted) || (coarseLocationGranted != null &amp;&amp; coarseLocationGranted)) {\r\n\r\n                        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\r\n                        List&lt;String&gt; providers = lm.getProviders(true);\r\n                        Location location = null;\r\n\r\n\r\n                        if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n\r\n                                return;\r\n                        }\r\n\r\n                        lm.requestSingleUpdate(LocationManager.GPS_PROVIDER, new LocationListener() {\r\n                            @Override\r\n                            public void onLocationChanged(@NonNull Location location) {\r\n                                double lat = location.getLatitude();\r\n                                Log.d(&quot;lat: &quot;, &quot;&quot;+lat);\r\n                                double lng = location.getLongitude();\r\n                                Log.d(&quot;lng: &quot;, &quot;&quot;+lng);\r\n\r\n                                String path = &quot;https://nominatim.openstreetmap.org/reverse?lat=&quot; + lat +\r\n                                        &quot;&amp;lon=&quot; + lng + &quot;&amp;format=json&amp;extratags=1&quot;;\r\n\r\n\r\n                                try {\r\n                                    /* Make the request here*/\r\n                                }\r\n                                catch (Exception ex) {\r\n                                }\r\n\r\n                            }\r\n                        }, null);\r\n\r\n                    }\r\n                });\r\n\r\n        locationPermissionRequest.launch(new String[] {\r\n                android.Manifest.permission.ACCESS_FINE_LOCATION,\r\n                android.Manifest.permission.ACCESS_COARSE_LOCATION\r\n        });\r\n    }\r\n}\r\n\r\n```\r\n\r\nI would like a simple request get, to understand from future projects. ","link":"https://stackoverflow.com/questions/77580312/request-get-on-android-studio","title":"Request Get on Android Studio","body":"<p>I'm create a app to found where is the client (city, localization, route, ...) and to solve this i need make a request get to this website\n<code>https://nominatim.openstreetmap.org</code>\non android studio with language java, its possible to make?</p>\n<pre><code>public class Player extends AppCompatActivity {\n    @Override\n    protected void onCreate(Bundle bundle) {\n        super.onCreate(bundle);\n        setContentView(R.layout.activity_client);\n        Background_DoWork();\n\n    }\n\n    \n    private void Background_DoWork() {\n        ImageButton imgbtnBack = findViewById(R.id.BackActivity);\n        imgbtnBack.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                finish();\n            }\n        });\n\n\n        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()\n                .findFragmentById(R.id.map);\n\n\n        ActivityResultLauncher&lt;String[]&gt; locationPermissionRequest =\n                registerForActivityResult(new ActivityResultContracts\n                        .RequestMultiplePermissions(), result -&gt; {\n                    Boolean fineLocationGranted = result.getOrDefault(\n                            android.Manifest.permission.ACCESS_FINE_LOCATION, false);\n                    Boolean coarseLocationGranted = result.getOrDefault(\n                            android.Manifest.permission.ACCESS_COARSE_LOCATION, false);\n                    if ((fineLocationGranted != null &amp;&amp; fineLocationGranted) || (coarseLocationGranted != null &amp;&amp; coarseLocationGranted)) {\n\n                        LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);\n                        List&lt;String&gt; providers = lm.getProviders(true);\n                        Location location = null;\n\n\n                        if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n\n                                return;\n                        }\n\n                        lm.requestSingleUpdate(LocationManager.GPS_PROVIDER, new LocationListener() {\n                            @Override\n                            public void onLocationChanged(@NonNull Location location) {\n                                double lat = location.getLatitude();\n                                Log.d(&quot;lat: &quot;, &quot;&quot;+lat);\n                                double lng = location.getLongitude();\n                                Log.d(&quot;lng: &quot;, &quot;&quot;+lng);\n\n                                String path = &quot;https://nominatim.openstreetmap.org/reverse?lat=&quot; + lat +\n                                        &quot;&amp;lon=&quot; + lng + &quot;&amp;format=json&amp;extratags=1&quot;;\n\n\n                                try {\n                                    /* Make the request here*/\n                                }\n                                catch (Exception ex) {\n                                }\n\n                            }\n                        }, null);\n\n                    }\n                });\n\n        locationPermissionRequest.launch(new String[] {\n                android.Manifest.permission.ACCESS_FINE_LOCATION,\n                android.Manifest.permission.ACCESS_COARSE_LOCATION\n        });\n    }\n}\n\n</code></pre>\n<p>I would like a simple request get, to understand from future projects.</p>\n"},{"tags":["java","scala","gradle"],"comments":[{"score":0,"post_type":"question","creation_date":1701355245,"post_id":77577695,"comment_id":136767439,"body_markdown":"Perhaps indicate the desired end state?  You want all the files, but you don&#39;t want them merged into one.  If you want all the files, then you&#39;ll will need to either have varying filenames or something else.  If you indicate what you would prefer your end jar to look like, it would be easier to suggest a solution.","link":"https://stackoverflow.com/questions/77577695/gradle-multiproject-merge-config-files-on-build#comment136767439_77577695","body":"Perhaps indicate the desired end state?  You want all the files, but you don&#39;t want them merged into one.  If you want all the files, then you&#39;ll will need to either have varying filenames or something else.  If you indicate what you would prefer your end jar to look like, it would be easier to suggest a solution."},{"score":0,"post_type":"question","creation_date":1701431575,"post_id":77577695,"comment_id":136777665,"body_markdown":"I need a kind of partial merge, when all conf files are merged, but other files are copied without merge","link":"https://stackoverflow.com/questions/77577695/gradle-multiproject-merge-config-files-on-build#comment136777665_77577695","body":"I need a kind of partial merge, when all conf files are merged, but other files are copied without merge"}],"comment_count":2,"is_answered":false,"view_count":27,"answer_count":0,"score":0,"last_activity_date":1701431535,"creation_date":1701340293,"last_edit_date":1701431535,"question_id":77577695,"body_markdown":"I have a gradle project (scala) with inner structure like this:\r\n```\r\napp\r\n|-reference.conf\r\nlib1\r\n|  |- reference.conf\r\nlib2\r\n   |-reference.conf\r\n   lib3\r\n      |- reference.conf\r\n```\r\nMy goal is to build fat jar with all these configs included, from bottom to top level. They all lie in the classpath root, so applying default merge strategies from gradle will save only first one. Is where a plugin to achieve that, or maybe any ideas how to write such plugin? Searching gives me variants with just appending all content to one file, but I need somehow to preserve applying order, lowest level libs should go first. Any ideas how to achieve that? default [merge strategies][1] have no content merge policies included. Renaming files by extension can also fit, but then I need to sort them somehow before reading.\r\nI want all files by mask **/*.conf merged into one, and all the rest should be added as is.\r\n \r\n  [1]: https://docs.gradle.org/8.4/javadoc/org/gradle/api/file/DuplicatesStrategy.html#INCLUDE","link":"https://stackoverflow.com/questions/77577695/gradle-multiproject-merge-config-files-on-build","title":"Gradle multiproject merge config files on build","body":"<p>I have a gradle project (scala) with inner structure like this:</p>\n<pre><code>app\n|-reference.conf\nlib1\n|  |- reference.conf\nlib2\n   |-reference.conf\n   lib3\n      |- reference.conf\n</code></pre>\n<p>My goal is to build fat jar with all these configs included, from bottom to top level. They all lie in the classpath root, so applying default merge strategies from gradle will save only first one. Is where a plugin to achieve that, or maybe any ideas how to write such plugin? Searching gives me variants with just appending all content to one file, but I need somehow to preserve applying order, lowest level libs should go first. Any ideas how to achieve that? default <a href=\"https://docs.gradle.org/8.4/javadoc/org/gradle/api/file/DuplicatesStrategy.html#INCLUDE\" rel=\"nofollow noreferrer\">merge strategies</a> have no content merge policies included. Renaming files by extension can also fit, but then I need to sort them somehow before reading.\nI want all files by mask **/*.conf merged into one, and all the rest should be added as is.</p>\n"},{"tags":["java","arrays","for-loop"],"comments":[{"score":0,"post_type":"question","creation_date":1695317443,"post_id":77152289,"comment_id":136011726,"body_markdown":"Okay, thanks for identifying that issue, any input on how to go about fixing it?","link":"https://stackoverflow.com/questions/77152289/printing-2d-array-java#comment136011726_77152289","body":"Okay, thanks for identifying that issue, any input on how to go about fixing it?"},{"score":0,"post_type":"question","creation_date":1695317505,"post_id":77152289,"comment_id":136011738,"body_markdown":"@AlexisH change `myList.length` to `myList[0].length`","link":"https://stackoverflow.com/questions/77152289/printing-2d-array-java#comment136011738_77152289","body":"@AlexisH change <code>myList.length</code> to <code>myList[0].length</code>"}],"answers":[{"comment_count":0,"score":3,"last_activity_date":1695317434,"creation_date":1695317434,"answer_id":77152439,"question_id":77152289,"body_markdown":"    String[][] myList = {{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;}, {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}};\r\n    for (int i = 0; i &lt; myList[0].length; i++) {\r\n        for (int j = 0; j &lt; myList.length; j++) {\r\n            System.out.printf(&quot;%-8s&quot;, myList[j][i]);\r\n        }\r\n    System.out.println();\r\n    }\r\nThe outer loop (i) iterates through the columns (0, 1, 2).\r\nThe inner loop (j) iterates through the rows (0 and 1).\r\nWe use printf to format the output with a width of 8 characters for each element, using %-8s as the format specifier. This ensures that each element is printed in a column of the specified width.\r\nAfter printing each column, we add System.out.println(); to move to the next line to create the desired format.","link":"https://stackoverflow.com/questions/77152289/printing-2d-array-java/77152439#77152439","title":"Printing 2d array Java","body":"<pre><code>String[][] myList = {{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;}, {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}};\nfor (int i = 0; i &lt; myList[0].length; i++) {\n    for (int j = 0; j &lt; myList.length; j++) {\n        System.out.printf(&quot;%-8s&quot;, myList[j][i]);\n    }\nSystem.out.println();\n}\n</code></pre>\n<p>The outer loop (i) iterates through the columns (0, 1, 2).\nThe inner loop (j) iterates through the rows (0 and 1).\nWe use printf to format the output with a width of 8 characters for each element, using %-8s as the format specifier. This ensures that each element is printed in a column of the specified width.\nAfter printing each column, we add System.out.println(); to move to the next line to create the desired format.</p>\n"},{"comment_count":0,"score":2,"last_activity_date":1695317507,"creation_date":1695317507,"answer_id":77152445,"question_id":77152289,"body_markdown":"Try it like this.  Use [System.out.printf()](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/io/PrintStream.html#printf(java.lang.String,java.lang.Object...)) to format the output. Note this this will only work for rectangular arrays as it uses the number of columns of the first row for all rows.\r\n- `&quot;%-7s&quot;` - the `7` is the field width and the `-` says to left justify the string in that field. \r\n```\r\nString [][]myList = {{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;},\r\n                     {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}};\r\n\r\n\r\nfor (int col = 0; col &lt; myList[0].length; col++) {\r\n    for ( int row = 0; row &lt; myList.length; row++ ) {\r\n        System.out.printf(&quot;%-7s &quot;, myList[row][col]); \r\n    }\r\n    System.out.println();\r\n}\r\n```\r\nprints\r\n```\r\ncat     chair   \r\ndog     bench   \r\nmouse   stool   \r\n","link":"https://stackoverflow.com/questions/77152289/printing-2d-array-java/77152445#77152445","title":"Printing 2d array Java","body":"<p>Try it like this.  Use <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/io/PrintStream.html#printf(java.lang.String,java.lang.Object...)\" rel=\"nofollow noreferrer\">System.out.printf()</a> to format the output. Note this this will only work for rectangular arrays as it uses the number of columns of the first row for all rows.</p>\n<ul>\n<li><code>&quot;%-7s&quot;</code> - the <code>7</code> is the field width and the <code>-</code> says to left justify the string in that field.</li>\n</ul>\n<pre><code>String [][]myList = {{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;},\n                     {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}};\n\n\nfor (int col = 0; col &lt; myList[0].length; col++) {\n    for ( int row = 0; row &lt; myList.length; row++ ) {\n        System.out.printf(&quot;%-7s &quot;, myList[row][col]); \n    }\n    System.out.println();\n}\n</code></pre>\n<p>prints</p>\n<pre><code>cat     chair   \ndog     bench   \nmouse   stool   \n</code></pre>\n"},{"comment_count":0,"score":3,"last_activity_date":1695398264,"last_edit_date":1695398264,"creation_date":1695319236,"answer_id":77152608,"question_id":77152289,"body_markdown":"Right now, if I run your code, all I see is this.\r\n\r\n```\r\ncatdogchairbench\r\n```\r\n\r\nIt is just jamming each word together *(and it looks like you are missing your `mouse` and your `stool`?)*.\r\n\r\nIn order to answer your question, we need to deal with the several bugs that are here. Your problem is buried underneath 2-4 other problems.\r\n\r\nFirst order of business is to clean up the formatting here. We can do that by adding an empty call to `System.out.println()`.\r\n\r\n```java\r\nString [][]myList = {{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;},{&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}};\r\n\r\nfor (int i= 0; i &lt; myList.length; i++)\r\n{\r\n\r\n    for (int j= 0; j &lt; myList.length; j++)\r\n    {\r\n        System.out.print(myList[i][j]);\r\n    }\r\n    \r\n    System.out.println();\r\n\r\n}\r\n```\r\n\r\nNow, your output is like this.\r\n\r\n```\r\ncatdog\r\nchairbench\r\n```\r\n\r\nThis is an improvement.\r\n\r\nNext, we want whitespace in between the words. We can use the tab character (`&#39;\\t&#39;`) to create that whitespace.\r\n\r\n```java\r\nString [][]myList = {{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;},{&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}};\r\n\r\nfor (int i= 0; i &lt; myList.length; i++)\r\n{\r\n\r\n    for (int j= 0; j &lt; myList.length; j++)\r\n    {\r\n        System.out.print(myList[i][j] + &quot;\\t&quot;);\r\n    }\r\n    \r\n    System.out.println();\r\n\r\n}\r\n```\r\n\r\nHere is the output.\r\n\r\n```\r\ncat     dog\r\nchair   bench\r\n```\r\n\r\nAlso an improvement.\r\n\r\nNext, let&#39;s get back those missing elements -- `mouse` and `stool`.\r\n\r\nIn order to do that, we must first understand what happened to them. You correctly inserted them into your 2-d array, so that is not the issue. However, you are incorrectly ***fetching*** them from the array. Here is where that problem is.\r\n\r\nLet&#39;s refactor your array creation a little, so that we can better see it&#39;s shape.\r\n\r\n```java\r\nString[][] myList =\r\n    {\r\n        {&quot;cat&quot;,   &quot;dog&quot;,   &quot;mouse&quot;},\r\n        {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}\r\n    }\r\n    ;\r\n\r\nfor (int i= 0; i &lt; myList.length; i++)\r\n{\r\n\r\n    for (int j= 0; j &lt; myList.length; j++)\r\n    {\r\n        System.out.print(myList[i][j] + &quot;\\t&quot;);\r\n    }\r\n\r\n    System.out.println();\r\n\r\n}\r\n```\r\n\r\nSo, your array has 2 rows, and 3 columns. We can clearly see that now. So, when you iterate through your array via the for loops, your for loops need to know about and iterate through those rows and columns correctly.\r\n\r\nThe way most people do this is by having a for loop for each component. That is, a for loop for your rows, and then another for loop for the columns in that row.\r\n\r\nLet&#39;s refactor your code to make that clearer.\r\n\r\n```java\r\nString[][] myList =\r\n    {\r\n        {&quot;cat&quot;,   &quot;dog&quot;,   &quot;mouse&quot;},\r\n        {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}\r\n    }\r\n    ;\r\n\r\nfor (int row = 0; row &lt; myList.length; row++)\r\n{\r\n\r\n    for (int column = 0; column &lt; myList.length; column++)\r\n    {\r\n        System.out.print(myList[row][column] + &quot;\\t&quot;);\r\n    }\r\n\r\n    System.out.println();\r\n\r\n}\r\n```\r\n\r\nNow, we can clearly see what the indices represent. It&#39;s no longer `i` and `j`, but a `row` and a `column` within the specified row.\r\n\r\nUnderstanding that, let&#39;s look back at the for loops again.\r\n\r\nYour `row` is looping from `0` all the way up to `myList.length`. Well, how long is `myList.length`? It is `2`, because, as we saw earlier, `myList` has 2 rows, so the value of `myList.length` is `2`.\r\n\r\nBut what about your `column`? It is ***also*** looping from `0` all the way up to `myList.length`. But `myList.length` is supposed to represent the number of ***`rows`***, not the number of ***`columns`***!\r\n\r\nSo, how do we fetch the number of columns? You get that by asking the length of ***the specific row you are on***. Your 2-d array has a length, but each row on your 2-d array also has a length. The reason why is because each element in your `myList` array is another array! And each array has a length. Thus, the number of columns = the length of the specific row.\r\n\r\nBut how do we represent that in your code?\r\n\r\nWell, you do it like this. Instead of saying `myList.length`, you say `myList[someIndexValueHere].length`. Of course, we need to replace `someIndexValueHere` with an actual index value. That index value will be the row you are currently on. So, instead, it would be `myList[row].length`. This will give you the number of columns in the row specified by the index `row`.\r\n\r\n```java\r\nString[][] myList =\r\n    {\r\n        {&quot;cat&quot;,   &quot;dog&quot;,   &quot;mouse&quot;},\r\n        {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}\r\n    }\r\n    ;\r\n\r\nfor (int row = 0; row &lt; myList.length; row++)\r\n{\r\n\r\n    for (int column = 0; column &lt; myList[row].length; column++)\r\n    {\r\n        System.out.print(myList[row][column] + &quot;\\t&quot;);\r\n    }\r\n\r\n    System.out.println();\r\n\r\n}\r\n```\r\n\r\nHere is the output now.\r\n\r\n```\r\ncat     dog     mouse\r\nchair   bench   stool\r\n```\r\n\r\nNow, things look a lot better.\r\n\r\nNow, we still have not solved your original problem. That was because we had to fix all of the bugs that were in the way. Let&#39;s solve your requested problem now.\r\n\r\nEssentially, what you seem to want is for the above output to be &quot;turned sideways&quot;. Meaning, it sounds like you want something like the following instead.\r\n\r\n```\r\ncat     chair\r\ndog     bench\r\nmouse   stool\r\n```\r\n\r\nIf so, then this is a little tricky, but can definitely be done.\r\n\r\nFirst, the way we are currently going is we are going to each row, then fetching all of the columns on it and printing them out.\r\n\r\nTo get this new output, we will have to reverse this process. Instead of going to each row and fetching each column, ***we now need to go to each column, and fetch each row on it***.\r\n\r\nLuckily for you, your array has a special property -- all of the rows on your array have the exact same number of columns! If it was not for this fact, this problem would be much harder to solve.\r\n\r\nBut since we know that all the rows have the same number of columns, that means we can use the size from any row, and it will be the same size as every other row!\r\n\r\nSo, let&#39;s acknowledge that fact, and replace our call to `myList[row].length` to `myList[0].length`. We can get away with this because, the `0` row has the exact same number of columns (the same length!) as any other row on `myList`!\r\n\r\n```java\r\nString[][] myList =\r\n    {\r\n        {&quot;cat&quot;,   &quot;dog&quot;,   &quot;mouse&quot;},\r\n        {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}\r\n    }\r\n    ;\r\n\r\nfor (int row = 0; row &lt; myList.length; row++)\r\n{\r\n\r\n    for (int column = 0; column &lt; myList[0].length; column++)\r\n    {\r\n        System.out.print(myList[row][column] + &quot;\\t&quot;);\r\n    }\r\n\r\n    System.out.println();\r\n\r\n}\r\n```\r\n\r\nNow, we can make one simple change to solve your original problem -- just swap your for loops!\r\n\r\n```java\r\nString[][] myList =\r\n    {\r\n        {&quot;cat&quot;,   &quot;dog&quot;,   &quot;mouse&quot;},\r\n        {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}\r\n    }\r\n    ;\r\n\r\nfor (int column = 0; column &lt; myList[0].length; column++)\r\n{\r\n\r\n    for (int row = 0; row &lt; myList.length; row++)\r\n    {\r\n\r\n        System.out.print(myList[row][column] + &quot;\\t&quot;);\r\n\r\n    }\r\n\r\n    System.out.println();\r\n\r\n}\r\n```\r\n\r\nIf we run that, here is our output.\r\n\r\n```\r\ncat     chair\r\ndog     bench\r\nmouse   stool\r\n```\r\n\r\nYour problem is now solved. Let me know if there are any questions.\r\n\r\n**EDIT** - To improve the answer, we could use `System.out.printf()` to help us with formatting. However, in order to use this, we need to know how long the longest element in your 2-d array is. Looking at it, we can see that the longest element is 5 characters long, so anything above 6 would work. But again, you either need to know that ahead of time, or figure out before you start printing. Here is the code refactored to use the new method.\r\n\r\n```java\r\nString[][] myList =\r\n    {\r\n        {&quot;cat&quot;,   &quot;dog&quot;,   &quot;mouse&quot;},\r\n        {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}\r\n    }\r\n    ;\r\n\r\nfor (int column = 0; column &lt; myList[0].length; column++)\r\n{\r\n\r\n    for (int row = 0; row &lt; myList.length; row++)\r\n    {\r\n\r\n        System.out.printf(&quot;%-7s&quot;, myList[row][column]);\r\n\r\n    }\r\n\r\n    System.out.println();\r\n\r\n}\r\n```\r\n\r\nAs for an explanation of how the function works, I will link to the answer by @WJS that explains it much better.\r\n\r\nhttps://stackoverflow.com/a/77152445/10118965","link":"https://stackoverflow.com/questions/77152289/printing-2d-array-java/77152608#77152608","title":"Printing 2d array Java","body":"<p>Right now, if I run your code, all I see is this.</p>\n<pre><code>catdogchairbench\n</code></pre>\n<p>It is just jamming each word together <em>(and it looks like you are missing your <code>mouse</code> and your <code>stool</code>?)</em>.</p>\n<p>In order to answer your question, we need to deal with the several bugs that are here. Your problem is buried underneath 2-4 other problems.</p>\n<p>First order of business is to clean up the formatting here. We can do that by adding an empty call to <code>System.out.println()</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String [][]myList = {{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;},{&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}};\n\nfor (int i= 0; i &lt; myList.length; i++)\n{\n\n    for (int j= 0; j &lt; myList.length; j++)\n    {\n        System.out.print(myList[i][j]);\n    }\n    \n    System.out.println();\n\n}\n</code></pre>\n<p>Now, your output is like this.</p>\n<pre><code>catdog\nchairbench\n</code></pre>\n<p>This is an improvement.</p>\n<p>Next, we want whitespace in between the words. We can use the tab character (<code>'\\t'</code>) to create that whitespace.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String [][]myList = {{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;},{&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}};\n\nfor (int i= 0; i &lt; myList.length; i++)\n{\n\n    for (int j= 0; j &lt; myList.length; j++)\n    {\n        System.out.print(myList[i][j] + &quot;\\t&quot;);\n    }\n    \n    System.out.println();\n\n}\n</code></pre>\n<p>Here is the output.</p>\n<pre><code>cat     dog\nchair   bench\n</code></pre>\n<p>Also an improvement.</p>\n<p>Next, let's get back those missing elements -- <code>mouse</code> and <code>stool</code>.</p>\n<p>In order to do that, we must first understand what happened to them. You correctly inserted them into your 2-d array, so that is not the issue. However, you are incorrectly <em><strong>fetching</strong></em> them from the array. Here is where that problem is.</p>\n<p>Let's refactor your array creation a little, so that we can better see it's shape.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[][] myList =\n    {\n        {&quot;cat&quot;,   &quot;dog&quot;,   &quot;mouse&quot;},\n        {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}\n    }\n    ;\n\nfor (int i= 0; i &lt; myList.length; i++)\n{\n\n    for (int j= 0; j &lt; myList.length; j++)\n    {\n        System.out.print(myList[i][j] + &quot;\\t&quot;);\n    }\n\n    System.out.println();\n\n}\n</code></pre>\n<p>So, your array has 2 rows, and 3 columns. We can clearly see that now. So, when you iterate through your array via the for loops, your for loops need to know about and iterate through those rows and columns correctly.</p>\n<p>The way most people do this is by having a for loop for each component. That is, a for loop for your rows, and then another for loop for the columns in that row.</p>\n<p>Let's refactor your code to make that clearer.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[][] myList =\n    {\n        {&quot;cat&quot;,   &quot;dog&quot;,   &quot;mouse&quot;},\n        {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}\n    }\n    ;\n\nfor (int row = 0; row &lt; myList.length; row++)\n{\n\n    for (int column = 0; column &lt; myList.length; column++)\n    {\n        System.out.print(myList[row][column] + &quot;\\t&quot;);\n    }\n\n    System.out.println();\n\n}\n</code></pre>\n<p>Now, we can clearly see what the indices represent. It's no longer <code>i</code> and <code>j</code>, but a <code>row</code> and a <code>column</code> within the specified row.</p>\n<p>Understanding that, let's look back at the for loops again.</p>\n<p>Your <code>row</code> is looping from <code>0</code> all the way up to <code>myList.length</code>. Well, how long is <code>myList.length</code>? It is <code>2</code>, because, as we saw earlier, <code>myList</code> has 2 rows, so the value of <code>myList.length</code> is <code>2</code>.</p>\n<p>But what about your <code>column</code>? It is <em><strong>also</strong></em> looping from <code>0</code> all the way up to <code>myList.length</code>. But <code>myList.length</code> is supposed to represent the number of <em><strong><code>rows</code></strong></em>, not the number of <em><strong><code>columns</code></strong></em>!</p>\n<p>So, how do we fetch the number of columns? You get that by asking the length of <em><strong>the specific row you are on</strong></em>. Your 2-d array has a length, but each row on your 2-d array also has a length. The reason why is because each element in your <code>myList</code> array is another array! And each array has a length. Thus, the number of columns = the length of the specific row.</p>\n<p>But how do we represent that in your code?</p>\n<p>Well, you do it like this. Instead of saying <code>myList.length</code>, you say <code>myList[someIndexValueHere].length</code>. Of course, we need to replace <code>someIndexValueHere</code> with an actual index value. That index value will be the row you are currently on. So, instead, it would be <code>myList[row].length</code>. This will give you the number of columns in the row specified by the index <code>row</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[][] myList =\n    {\n        {&quot;cat&quot;,   &quot;dog&quot;,   &quot;mouse&quot;},\n        {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}\n    }\n    ;\n\nfor (int row = 0; row &lt; myList.length; row++)\n{\n\n    for (int column = 0; column &lt; myList[row].length; column++)\n    {\n        System.out.print(myList[row][column] + &quot;\\t&quot;);\n    }\n\n    System.out.println();\n\n}\n</code></pre>\n<p>Here is the output now.</p>\n<pre><code>cat     dog     mouse\nchair   bench   stool\n</code></pre>\n<p>Now, things look a lot better.</p>\n<p>Now, we still have not solved your original problem. That was because we had to fix all of the bugs that were in the way. Let's solve your requested problem now.</p>\n<p>Essentially, what you seem to want is for the above output to be &quot;turned sideways&quot;. Meaning, it sounds like you want something like the following instead.</p>\n<pre><code>cat     chair\ndog     bench\nmouse   stool\n</code></pre>\n<p>If so, then this is a little tricky, but can definitely be done.</p>\n<p>First, the way we are currently going is we are going to each row, then fetching all of the columns on it and printing them out.</p>\n<p>To get this new output, we will have to reverse this process. Instead of going to each row and fetching each column, <em><strong>we now need to go to each column, and fetch each row on it</strong></em>.</p>\n<p>Luckily for you, your array has a special property -- all of the rows on your array have the exact same number of columns! If it was not for this fact, this problem would be much harder to solve.</p>\n<p>But since we know that all the rows have the same number of columns, that means we can use the size from any row, and it will be the same size as every other row!</p>\n<p>So, let's acknowledge that fact, and replace our call to <code>myList[row].length</code> to <code>myList[0].length</code>. We can get away with this because, the <code>0</code> row has the exact same number of columns (the same length!) as any other row on <code>myList</code>!</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[][] myList =\n    {\n        {&quot;cat&quot;,   &quot;dog&quot;,   &quot;mouse&quot;},\n        {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}\n    }\n    ;\n\nfor (int row = 0; row &lt; myList.length; row++)\n{\n\n    for (int column = 0; column &lt; myList[0].length; column++)\n    {\n        System.out.print(myList[row][column] + &quot;\\t&quot;);\n    }\n\n    System.out.println();\n\n}\n</code></pre>\n<p>Now, we can make one simple change to solve your original problem -- just swap your for loops!</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[][] myList =\n    {\n        {&quot;cat&quot;,   &quot;dog&quot;,   &quot;mouse&quot;},\n        {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}\n    }\n    ;\n\nfor (int column = 0; column &lt; myList[0].length; column++)\n{\n\n    for (int row = 0; row &lt; myList.length; row++)\n    {\n\n        System.out.print(myList[row][column] + &quot;\\t&quot;);\n\n    }\n\n    System.out.println();\n\n}\n</code></pre>\n<p>If we run that, here is our output.</p>\n<pre><code>cat     chair\ndog     bench\nmouse   stool\n</code></pre>\n<p>Your problem is now solved. Let me know if there are any questions.</p>\n<p><strong>EDIT</strong> - To improve the answer, we could use <code>System.out.printf()</code> to help us with formatting. However, in order to use this, we need to know how long the longest element in your 2-d array is. Looking at it, we can see that the longest element is 5 characters long, so anything above 6 would work. But again, you either need to know that ahead of time, or figure out before you start printing. Here is the code refactored to use the new method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[][] myList =\n    {\n        {&quot;cat&quot;,   &quot;dog&quot;,   &quot;mouse&quot;},\n        {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}\n    }\n    ;\n\nfor (int column = 0; column &lt; myList[0].length; column++)\n{\n\n    for (int row = 0; row &lt; myList.length; row++)\n    {\n\n        System.out.printf(&quot;%-7s&quot;, myList[row][column]);\n\n    }\n\n    System.out.println();\n\n}\n</code></pre>\n<p>As for an explanation of how the function works, I will link to the answer by @WJS that explains it much better.</p>\n<p><a href=\"https://stackoverflow.com/a/77152445/10118965\">https://stackoverflow.com/a/77152445/10118965</a></p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701426300,"last_edit_date":1701426300,"creation_date":1695321149,"answer_id":77152803,"question_id":77152289,"body_markdown":"# Challenges\r\n\r\nTrying to achieve exactly your desired result, you have two challenges:\r\n\r\n1. Printing the subarrays vertically\r\n2. Printing it in a nice table-looking way\r\n\r\n## 1. Printing the sub-arrays vertically\r\n\r\nFrom your gut feeling, you want to iterate over the outter array and do something. But here you want to process the 1st item of all subarrays together, then the 2nd items of all subarrays, then the 3rd items and so on...\r\n\r\nTherefor **you have to figure out what&#39;s the longest-subarray?** That&#39;s how long you&#39;ll have do your outter loop, because that is how many lines you&#39;ll have to print!\r\n\r\nNow you can loop over all subarrays at once. But they may not all be equally long, so **always do null-checks** to verify if an element exists.\r\n\r\n## 2. Printing it in a nice table-looking way\r\n\r\nEnsuring all table cells have an equal width is easy (see other answers). `System.out.printf(&quot;%-6s&quot;, &quot;abc&quot;);` will make all cells be 6 characters wide.\r\n\r\nBut depending on the strings in your array, you might need wider cells or maybe smaller ones to not waste space. **Calculate a reasonable cell width.**\r\n\r\n# Solution\r\n\r\n1. Figure out the longest subarray\r\n2. Calculate the right cell width\r\n3. Print the table\r\n\r\n```java\r\nString [][]myList = {{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;},{&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}};\r\n\r\n// Figure out longest subarray\r\nint longestArray = 0;\r\nfor (String[] array : myList) {\r\n    if (array.length &gt; longestArray) longestArray = array.length;\r\n}\r\n\r\n// Calculate the right cell width: find the longest string + add 2 chars for padding\r\nint cellWidth = 0;\r\nfor (int i = 0; i &lt; myList.length; i++) {\r\n    for (int j = 0; j &lt; myList[i].length; j++) {\r\n        if (myList[i][j].length() &gt; cellWidth) cellWidth = myList[i][j].length();\r\n    }\r\n}\r\ncellWidth += 2;\r\n\r\n// Print the table\r\nfor (int i = 0; i &lt; longestArray; i++) {\r\n    for (int j = 0; j &lt; myList.length; j++) {\r\n        if (myList[j].length &gt; i) System.out.printf(&quot;%-&quot; + cellWidth + &quot;s&quot;, myList[j][i]);\r\n        else System.out.printf(&quot;%-&quot; + cellWidth + &quot;s&quot;, &quot;&quot;);\r\n    }\r\n    System.out.printf(&quot;\\n&quot;);\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```\r\ncat    chair  \r\ndog    bench  \r\nmouse  stool\r\n```\r\n\r\nThis **works for any number of subarrays and any number of items in them**.","link":"https://stackoverflow.com/questions/77152289/printing-2d-array-java/77152803#77152803","title":"Printing 2d array Java","body":"<h1>Challenges</h1>\n<p>Trying to achieve exactly your desired result, you have two challenges:</p>\n<ol>\n<li>Printing the subarrays vertically</li>\n<li>Printing it in a nice table-looking way</li>\n</ol>\n<h2>1. Printing the sub-arrays vertically</h2>\n<p>From your gut feeling, you want to iterate over the outter array and do something. But here you want to process the 1st item of all subarrays together, then the 2nd items of all subarrays, then the 3rd items and so on...</p>\n<p>Therefor <strong>you have to figure out what's the longest-subarray?</strong> That's how long you'll have do your outter loop, because that is how many lines you'll have to print!</p>\n<p>Now you can loop over all subarrays at once. But they may not all be equally long, so <strong>always do null-checks</strong> to verify if an element exists.</p>\n<h2>2. Printing it in a nice table-looking way</h2>\n<p>Ensuring all table cells have an equal width is easy (see other answers). <code>System.out.printf(&quot;%-6s&quot;, &quot;abc&quot;);</code> will make all cells be 6 characters wide.</p>\n<p>But depending on the strings in your array, you might need wider cells or maybe smaller ones to not waste space. <strong>Calculate a reasonable cell width.</strong></p>\n<h1>Solution</h1>\n<ol>\n<li>Figure out the longest subarray</li>\n<li>Calculate the right cell width</li>\n<li>Print the table</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>String [][]myList = {{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;},{&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}};\n\n// Figure out longest subarray\nint longestArray = 0;\nfor (String[] array : myList) {\n    if (array.length &gt; longestArray) longestArray = array.length;\n}\n\n// Calculate the right cell width: find the longest string + add 2 chars for padding\nint cellWidth = 0;\nfor (int i = 0; i &lt; myList.length; i++) {\n    for (int j = 0; j &lt; myList[i].length; j++) {\n        if (myList[i][j].length() &gt; cellWidth) cellWidth = myList[i][j].length();\n    }\n}\ncellWidth += 2;\n\n// Print the table\nfor (int i = 0; i &lt; longestArray; i++) {\n    for (int j = 0; j &lt; myList.length; j++) {\n        if (myList[j].length &gt; i) System.out.printf(&quot;%-&quot; + cellWidth + &quot;s&quot;, myList[j][i]);\n        else System.out.printf(&quot;%-&quot; + cellWidth + &quot;s&quot;, &quot;&quot;);\n    }\n    System.out.printf(&quot;\\n&quot;);\n}\n</code></pre>\n<p>Output</p>\n<pre><code>cat    chair  \ndog    bench  \nmouse  stool\n</code></pre>\n<p>This <strong>works for any number of subarrays and any number of items in them</strong>.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1695327138,"post_id":77153122,"comment_id":136013402,"body_markdown":"You&#39;re using some ideas/features than may not be  familiar to the OP (e.g. `StringBuilder`, max string length to compute proper width format, `formatted`, etc).  You may want to add some explanations.","link":"https://stackoverflow.com/questions/77152289/printing-2d-array-java/77153122#comment136013402_77153122","body":"You&#39;re using some ideas/features than may not be  familiar to the OP (e.g. <code>StringBuilder</code>, max string length to compute proper width format, <code>formatted</code>, etc).  You may want to add some explanations."}],"comment_count":1,"score":0,"last_activity_date":1695357697,"last_edit_date":1695357697,"creation_date":1695324458,"answer_id":77153122,"question_id":77152289,"body_markdown":"&gt; _&quot;... the issue I&#39;m having is that the array print as a list, but I want it to print as: ...&quot;_\r\n\r\nDetermine the width for each column, additionally the longest list.\r\n\r\n```java\r\nString [][]myList = {{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;},{&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}};\r\nint max = 0, widths[] = new int[myList.length];\r\nString[] strings;\r\nfor (int i = 0, n = myList.length; i &lt; n; i++) {\r\n    widths[i] = maximum(strings = myList[i]);\r\n    if (strings.length &gt; max) max = strings.length;\r\n}\r\n```\r\n\r\n```java\r\nint maximum(String[] s) {\r\n    return Stream.of(s).mapToInt(String::length).max().getAsInt();\r\n}\r\n```\r\n\r\nThen, create a _[format-string](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html)_ for the row.\\\r\nI&#39;m adding _+2_ to create space between the columns.\r\n\r\n```java\r\nStringBuilder fs = new StringBuilder();\r\nfor (int v : widths) fs.append(&quot;%%-%ds&quot;.formatted(v + 2));\r\n```\r\n\r\nFinally, build a _String_ array for the corresponding elements, and apply the _format-string_.\r\n\r\n```java\r\nStringBuilder s = new StringBuilder();\r\nString[] row;\r\nfor (int i = 0, j; i &lt; max; i++) {\r\n    row = new String[myList.length];\r\n    for (j = 0; j &lt; row.length; j++)\r\n        row[j] = i &gt; myList[j].length - 1 ? &quot;&quot; : myList[j][i];\r\n    s.append((fs + &quot;%n&quot;).formatted(row));\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\ncat    chair  \r\ndog    bench  \r\nmouse  stool  \r\n```\r\n\r\nHere is an example using a set of randomly generated values.\r\n\r\n```java\r\nRandom r = new Random();\r\nString strings[], myList[][] = new String[4][];\r\nfor (int i = 0, j, n1 = myList.length, n2; i &lt; n1; i++) {\r\n    strings = new String[r.nextInt(5, 20)];\r\n    for (j = 0, n2 = strings.length; j &lt; n2; j++) {\r\n        strings[j] = r.ints(&#39;a&#39;, &#39;z&#39; + 1)\r\n                      .limit(r.nextInt(4, 10))\r\n                      .mapToObj(x -&gt; String.valueOf((char) x))\r\n                      .collect(Collectors.joining());\r\n    }\r\n    myList[i] = strings;\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\neoiigbu    eaglbxp    uiou       eygdnizf   \r\nbfkcmid    snlz       vkbkqdo    obfxwtax   \r\nxtxmo      nqtaoxijq  nlorcz     wpwdhk     \r\ndwtdihj    tnsxp      zjeszm     vfeasklyj  \r\nwsmgwegr   tolsnxauk  immxl      trbwlmxft  \r\nlhejlvqh   wfhh       efwkdri               \r\nbjiltokvt  hsprvsfpu  muoqp                 \r\nnmerh      jfkuhr     ycylr                 \r\nmmtcun     mgrj       lunarw                \r\njlnicv     faapyhjb   vlsqz                 \r\nnehy       nfnmtdxai  yzxrivxn              \r\nkiace      oorrj      jfbfgeo               \r\n           hpzaaa     fwmpqcjbi             \r\n           lxvnnqieo                        \r\n           iqujzwnv                         \r\n           hjjz                             \r\n           dthlgtip                         \r\n           oggqr                            \r\n           dbpbr                            \r\n```","link":"https://stackoverflow.com/questions/77152289/printing-2d-array-java/77153122#77153122","title":"Printing 2d array Java","body":"<blockquote>\n<p><em>&quot;... the issue I'm having is that the array print as a list, but I want it to print as: ...&quot;</em></p>\n</blockquote>\n<p>Determine the width for each column, additionally the longest list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String [][]myList = {{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;},{&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}};\nint max = 0, widths[] = new int[myList.length];\nString[] strings;\nfor (int i = 0, n = myList.length; i &lt; n; i++) {\n    widths[i] = maximum(strings = myList[i]);\n    if (strings.length &gt; max) max = strings.length;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>int maximum(String[] s) {\n    return Stream.of(s).mapToInt(String::length).max().getAsInt();\n}\n</code></pre>\n<p>Then, create a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html\" rel=\"nofollow noreferrer\">format-string</a></em> for the row.<br />\nI'm adding <em>+2</em> to create space between the columns.</p>\n<pre class=\"lang-java prettyprint-override\"><code>StringBuilder fs = new StringBuilder();\nfor (int v : widths) fs.append(&quot;%%-%ds&quot;.formatted(v + 2));\n</code></pre>\n<p>Finally, build a <em>String</em> array for the corresponding elements, and apply the <em>format-string</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>StringBuilder s = new StringBuilder();\nString[] row;\nfor (int i = 0, j; i &lt; max; i++) {\n    row = new String[myList.length];\n    for (j = 0; j &lt; row.length; j++)\n        row[j] = i &gt; myList[j].length - 1 ? &quot;&quot; : myList[j][i];\n    s.append((fs + &quot;%n&quot;).formatted(row));\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>cat    chair  \ndog    bench  \nmouse  stool  \n</code></pre>\n<p>Here is an example using a set of randomly generated values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Random r = new Random();\nString strings[], myList[][] = new String[4][];\nfor (int i = 0, j, n1 = myList.length, n2; i &lt; n1; i++) {\n    strings = new String[r.nextInt(5, 20)];\n    for (j = 0, n2 = strings.length; j &lt; n2; j++) {\n        strings[j] = r.ints('a', 'z' + 1)\n                      .limit(r.nextInt(4, 10))\n                      .mapToObj(x -&gt; String.valueOf((char) x))\n                      .collect(Collectors.joining());\n    }\n    myList[i] = strings;\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>eoiigbu    eaglbxp    uiou       eygdnizf   \nbfkcmid    snlz       vkbkqdo    obfxwtax   \nxtxmo      nqtaoxijq  nlorcz     wpwdhk     \ndwtdihj    tnsxp      zjeszm     vfeasklyj  \nwsmgwegr   tolsnxauk  immxl      trbwlmxft  \nlhejlvqh   wfhh       efwkdri               \nbjiltokvt  hsprvsfpu  muoqp                 \nnmerh      jfkuhr     ycylr                 \nmmtcun     mgrj       lunarw                \njlnicv     faapyhjb   vlsqz                 \nnehy       nfnmtdxai  yzxrivxn              \nkiace      oorrj      jfbfgeo               \n           hpzaaa     fwmpqcjbi             \n           lxvnnqieo                        \n           iqujzwnv                         \n           hjjz                             \n           dthlgtip                         \n           oggqr                            \n           dbpbr                            \n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1695381650,"creation_date":1695381650,"answer_id":77157171,"question_id":77152289,"body_markdown":"\r\n\t\t\r\n\t\tString [][]myList = {\r\n\t\t\t\t{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;},\r\n\t\t\t\t{&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;,&quot;stood&quot;},\r\n\t\t\t\t{&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;,&quot;stood&quot;,&quot;ascefq&quot;,&quot;efwef&quot;},\r\n\t\t\t\t{&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;},\r\n\t\t\t\t{&quot;chair&quot;, &quot;bench&quot;},\r\n\t\t\t\t{&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;,&quot;stood&quot;,&quot;ascefq&quot;,&quot;efwef&quot;}\r\n\t\t\t\t};\r\n\t\t\r\n\t\tint max = Integer.MIN_VALUE;\r\n\t\t\r\n\t\tfor (int i = 0 ; i&lt; myList.length; i++)\r\n\t\t{\r\n\t\t\tif(myList[i].length &gt; max)\r\n\t\t\t\t\tmax = myList[i].length;\r\n\t\t}\r\n\r\n\t\tSystem.out.println(max);\r\n\t\t\r\n\t\tfor (int column= 0; column &lt; max; column++)\r\n\t\t{\r\n\t\t    for (int row= 0; row &lt; myList.length; row++)\r\n\t\t    {\r\n\t\t    \tif(myList[row].length &lt;= column)\r\n\t\t    \t\t{\r\n\t\t    \t\t\tSystem.out.printf(&quot;%-8s&quot;,&quot;&quot;);\r\n\t\t    \t\t\tcontinue;\r\n\t\t    \t\t}\r\n\t\t    \t\t\r\n\t\t    \tSystem.out.printf(&quot;%-8s&quot;,myList[row][column]);\r\n\t\t    }\r\n\t\t    System.out.println();\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\r\nWith this solution you need less loop and still you will get the accurate result for any nxm array.\r\n\r\nActual logic is in the below part.\r\n\r\n             if(myList[row].length &lt;= column)\r\n                {\r\n                    System.out.printf(&quot;%-8s&quot;,&quot;&quot;);\r\n                    continue;\r\n                }\r\nThis loop is checking if the length of the row is less than or equal to the current column (as we are doing column iteration), means if row length is less or equal then we need to add space else add the string.\r\n\r\nHope it helps.","link":"https://stackoverflow.com/questions/77152289/printing-2d-array-java/77157171#77157171","title":"Printing 2d array Java","body":"<pre><code>    String [][]myList = {\n            {&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;},\n            {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;,&quot;stood&quot;},\n            {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;,&quot;stood&quot;,&quot;ascefq&quot;,&quot;efwef&quot;},\n            {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;},\n            {&quot;chair&quot;, &quot;bench&quot;},\n            {&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;,&quot;stood&quot;,&quot;ascefq&quot;,&quot;efwef&quot;}\n            };\n    \n    int max = Integer.MIN_VALUE;\n    \n    for (int i = 0 ; i&lt; myList.length; i++)\n    {\n        if(myList[i].length &gt; max)\n                max = myList[i].length;\n    }\n\n    System.out.println(max);\n    \n    for (int column= 0; column &lt; max; column++)\n    {\n        for (int row= 0; row &lt; myList.length; row++)\n        {\n            if(myList[row].length &lt;= column)\n                {\n                    System.out.printf(&quot;%-8s&quot;,&quot;&quot;);\n                    continue;\n                }\n                \n            System.out.printf(&quot;%-8s&quot;,myList[row][column]);\n        }\n        System.out.println();\n    }\n    \n    \n</code></pre>\n<p>With this solution you need less loop and still you will get the accurate result for any nxm array.</p>\n<p>Actual logic is in the below part.</p>\n<pre><code>         if(myList[row].length &lt;= column)\n            {\n                System.out.printf(&quot;%-8s&quot;,&quot;&quot;);\n                continue;\n            }\n</code></pre>\n<p>This loop is checking if the length of the row is less than or equal to the current column (as we are doing column iteration), means if row length is less or equal then we need to add space else add the string.</p>\n<p>Hope it helps.</p>\n"}],"comment_count":2,"is_answered":true,"view_count":98,"answer_count":6,"score":2,"last_activity_date":1701426300,"creation_date":1695315882,"last_edit_date":1695316705,"question_id":77152289,"body_markdown":"I am trying print the array I&#39;ve created below.\r\n\r\n***NOTE: this is only a portion of my code that I extracted, so any commentary on anything needed before this portion is unnecessary.***\r\n   \r\n```\r\nString [][]myList = {{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;},{&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}};\r\n\r\nfor (int i= 0; i &lt; myList.length; i++)\r\n{\r\n    for (int j= 0; j &lt; myList.length; j++)\r\n    {\r\n        System.out.print(myList[i][j]);\r\n    }\r\n}\r\n```\r\n\r\nHowever, the issue I&#39;m having is that the array print as a list, but I want it to print as:\r\n\r\n```\r\nCat      chair\r\nDog      bench\r\nMouse    stool\r\n```\r\n\r\nAny help would be greatly appreciated.","link":"https://stackoverflow.com/questions/77152289/printing-2d-array-java","title":"Printing 2d array Java","body":"<p>I am trying print the array I've created below.</p>\n<p><em><strong>NOTE: this is only a portion of my code that I extracted, so any commentary on anything needed before this portion is unnecessary.</strong></em></p>\n<pre><code>String [][]myList = {{&quot;cat&quot;, &quot;dog&quot;, &quot;mouse&quot;},{&quot;chair&quot;, &quot;bench&quot;, &quot;stool&quot;}};\n\nfor (int i= 0; i &lt; myList.length; i++)\n{\n    for (int j= 0; j &lt; myList.length; j++)\n    {\n        System.out.print(myList[i][j]);\n    }\n}\n</code></pre>\n<p>However, the issue I'm having is that the array print as a list, but I want it to print as:</p>\n<pre><code>Cat      chair\nDog      bench\nMouse    stool\n</code></pre>\n<p>Any help would be greatly appreciated.</p>\n"},{"tags":["java","google-chrome","selenium-webdriver","webdrivermanager-java"],"comments":[{"score":0,"post_type":"question","creation_date":1701389372,"post_id":77582319,"comment_id":136773001,"body_markdown":"There is no &quot;Chrome 160&quot;... the highest version in preview is 120.","link":"https://stackoverflow.com/questions/77582319/chromedriver-only-supports-chrome-version-114-not-160#comment136773001_77582319","body":"There is no &quot;Chrome 160&quot;... the highest version in preview is 120."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701901700,"post_id":77584320,"comment_id":136833920,"body_markdown":"WebDriver driver = new ChromeDriver(); raises exception:\n\njava.lang.NoClassDefFoundError: org/openqa/selenium/HasDownloads\n\nCaused by: java.lang.ClassNotFoundException: org.openqa.selenium.HasDownloads\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:583)\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)","link":"https://stackoverflow.com/questions/77582319/chromedriver-only-supports-chrome-version-114-not-160/77584320#comment136833920_77584320","body":"WebDriver driver = new ChromeDriver(); raises exception:  java.lang.NoClassDefFoundError: org/openqa/selenium/HasDownloads  Caused by: java.lang.ClassNotFoundException: org.openqa.selenium.HasDownloads \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(B&zwnj;&#8203;uiltinClassLoader.ja&zwnj;&#8203;va:583) \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.lo&zwnj;&#8203;adClass(ClassLoaders&zwnj;&#8203;.java:178) \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:5&zwnj;&#8203;21)"}],"comment_count":1,"score":0,"last_activity_date":1701424149,"creation_date":1701424149,"answer_id":77584320,"question_id":77582319,"body_markdown":"````\r\n&lt;version&gt;3.141.59&lt;/version&gt;\r\n````\r\nYou are using very old version of Selenium. Upgrade to the latest version of selenium i.e. `v4.15.0`.\r\n\r\nAnd once you upgrade to latest selenium, you no longer need `WebDriverManager` library. The new built-in tool `Selenium Manager` will do what `WebDriverManager` used to do before.\r\n\r\nCode can be as simple as:\r\n````\r\npublic static void main(String[] args) {\r\n    WebDriver driver = new ChromeDriver();\r\n    driver.manage().window().maximize();\r\n    driver.get(&quot;https://www.google.com/&quot;);\r\n    driver.quit();\r\n}\r\n````\r\nRefer below answers for more details on this topic:\r\n- https://stackoverflow.com/a/76463081/7598774\r\n- https://stackoverflow.com/a/76752843/7598774\r\n- https://stackoverflow.com/a/77281456/7598774","link":"https://stackoverflow.com/questions/77582319/chromedriver-only-supports-chrome-version-114-not-160/77584320#77584320","title":"ChromeDriver only supports Chrome version 114 not 160","body":"<pre><code>&lt;version&gt;3.141.59&lt;/version&gt;\n</code></pre>\n<p>You are using very old version of Selenium. Upgrade to the latest version of selenium i.e. <code>v4.15.0</code>.</p>\n<p>And once you upgrade to latest selenium, you no longer need <code>WebDriverManager</code> library. The new built-in tool <code>Selenium Manager</code> will do what <code>WebDriverManager</code> used to do before.</p>\n<p>Code can be as simple as:</p>\n<pre><code>public static void main(String[] args) {\n    WebDriver driver = new ChromeDriver();\n    driver.manage().window().maximize();\n    driver.get(&quot;https://www.google.com/&quot;);\n    driver.quit();\n}\n</code></pre>\n<p>Refer below answers for more details on this topic:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/a/76463081/7598774\">https://stackoverflow.com/a/76463081/7598774</a></li>\n<li><a href=\"https://stackoverflow.com/a/76752843/7598774\">https://stackoverflow.com/a/76752843/7598774</a></li>\n<li><a href=\"https://stackoverflow.com/a/77281456/7598774\">https://stackoverflow.com/a/77281456/7598774</a></li>\n</ul>\n"}],"comment_count":1,"is_answered":false,"view_count":103,"answer_count":1,"score":0,"last_activity_date":1701424342,"creation_date":1701388408,"last_edit_date":1701424342,"question_id":77582319,"body_markdown":"I&#39;ve got the following error when my Chrome browser got updated to version 160:\r\n```\r\n&quot;org.openqa.selenium.SessionNotCreatedException: session not created: This version of ChromeDriver only supports Chrome version 114\r\nCurrent browser version is 119.0.6045.160 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;&quot;\r\n```\r\n\r\nMy POM file settings:\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;3.141.59&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n            &lt;version&gt;4.2.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nI tried to bump up webdrivermanager to 5.6.2 but it did not help.\r\nAnyone can help with this issue?\r\nThanks a lot!!!\r\n\r\n\r\nI tried to bump up webdrivermanager version and it did not help ","link":"https://stackoverflow.com/questions/77582319/chromedriver-only-supports-chrome-version-114-not-160","title":"ChromeDriver only supports Chrome version 114 not 160","body":"<p>I've got the following error when my Chrome browser got updated to version 160:</p>\n<pre><code>&quot;org.openqa.selenium.SessionNotCreatedException: session not created: This version of ChromeDriver only supports Chrome version 114\nCurrent browser version is 119.0.6045.160 with binary path C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'&quot;\n</code></pre>\n<p>My POM file settings:</p>\n<pre><code>    &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n        &lt;version&gt;3.141.59&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n        &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n        &lt;version&gt;4.2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>I tried to bump up webdrivermanager to 5.6.2 but it did not help.\nAnyone can help with this issue?\nThanks a lot!!!</p>\n<p>I tried to bump up webdrivermanager version and it did not help</p>\n"},{"tags":["java","hazelcast"],"comments":[{"score":1,"post_type":"question","creation_date":1701339072,"post_id":77571602,"comment_id":136764284,"body_markdown":"Check out this link. https://docs.hazelcast.com/hazelcast/5.2/kubernetes/kubernetes-auto-discovery.adoc#discovering-members-from-hazelcast-clients","link":"https://stackoverflow.com/questions/77571602/hazelcast-5-3-6-kubernetes-set-to-dns-lookup-but-client-launched-with-kubernetes#comment136764284_77571602","body":"Check out this link. <a href=\"https://docs.hazelcast.com/hazelcast/5.2/kubernetes/kubernetes-auto-discovery.adoc#discovering-members-from-hazelcast-clients\" rel=\"nofollow noreferrer\">docs.hazelcast.com/hazelcast/5.2/kubernetes/&hellip;</a>"}],"comment_count":1,"is_answered":false,"view_count":36,"answer_count":0,"score":0,"last_activity_date":1701423850,"creation_date":1701264823,"last_edit_date":1701423850,"question_id":77571602,"body_markdown":"Hazelcast creates a client in discovery mode kubernetes_api that tries to connect in an infinite loop and blocks the app start\r\n\r\n\r\nI created a hazelcast instance with version 5.3.6 and set discovery strategy to dns_lookup the cluster starts perfectly using this discovery mode but then a client is launched hz.client1 [dev] using kubernetes_api as discovery mode, and it gets stucked as i have no RBAC,  and it is unable to get live cluster connection\r\nHow can I use also dns_lookup for this client? I tried to create a bean ClientConfigand set strategy to dns_lookup but it still tries to connect using kubernetes_api \r\n\r\n[See hazelcast log creating hazelcast cluster][1]\r\n\r\n[See hazelcast log with cluster up][2]\r\n\r\n[See client trying to connect the kubernetes API][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TfrRK.png\r\n  [2]: https://i.stack.imgur.com/2Dn0R.jpg\r\n  [3]: https://i.stack.imgur.com/CYLsg.jpg","link":"https://stackoverflow.com/questions/77571602/hazelcast-5-3-6-kubernetes-set-to-dns-lookup-but-client-launched-with-kubernetes","title":"hazelcast 5.3.6 kubernetes set to dns_lookup but client launched with kubernetes_api","body":"<p>Hazelcast creates a client in discovery mode kubernetes_api that tries to connect in an infinite loop and blocks the app start</p>\n<p>I created a hazelcast instance with version 5.3.6 and set discovery strategy to dns_lookup the cluster starts perfectly using this discovery mode but then a client is launched hz.client1 [dev] using kubernetes_api as discovery mode, and it gets stucked as i have no RBAC,  and it is unable to get live cluster connection\nHow can I use also dns_lookup for this client? I tried to create a bean ClientConfigand set strategy to dns_lookup but it still tries to connect using kubernetes_api</p>\n<p><a href=\"https://i.stack.imgur.com/TfrRK.png\" rel=\"nofollow noreferrer\">See hazelcast log creating hazelcast cluster</a></p>\n<p><a href=\"https://i.stack.imgur.com/2Dn0R.jpg\" rel=\"nofollow noreferrer\">See hazelcast log with cluster up</a></p>\n<p><a href=\"https://i.stack.imgur.com/CYLsg.jpg\" rel=\"nofollow noreferrer\">See client trying to connect the kubernetes API</a></p>\n"},{"tags":["java","spring","spring-boot","saml"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701422715,"creation_date":1701422715,"answer_id":77584170,"question_id":77530975,"body_markdown":"I&#39;m assuming you&#39;re trying to implement SP intiated SSO flow which include request and response. It seems like you understood something wrong because `Assertion` element can&#39;t be part of `AuthnRequest` element.\r\nMinimal working example of `AuthnRequest` looks like this\r\n\r\n    &lt;samlp:AuthnRequest xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot; xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot; ID=&quot;ONELOGIN_809707f0030a5d00620c9d9df97f627afe9dcc24&quot; Version=&quot;2.0&quot; ProviderName=&quot;SP test&quot; IssueInstant=&quot;2014-07-16T23:52:45Z&quot; Destination=&quot;http://idp.example.com/SSOService.php&quot; ProtocolBinding=&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&quot; AssertionConsumerServiceURL=&quot;http://sp.example.com/demo1/index.php?acs&quot;&gt;\r\n      &lt;saml:Issuer&gt;http://sp.example.com/demo1/metadata.php&lt;/saml:Issuer&gt;\r\n      &lt;samlp:NameIDPolicy Format=&quot;urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress&quot; AllowCreate=&quot;true&quot;/&gt;\r\n      &lt;samlp:RequestedAuthnContext Comparison=&quot;exact&quot;&gt;\r\n        &lt;saml:AuthnContextClassRef&gt;urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport&lt;/saml:AuthnContextClassRef&gt;\r\n      &lt;/samlp:RequestedAuthnContext&gt;\r\n    &lt;/samlp:AuthnRequest&gt;\r\n\r\n`Assertion` element is actually part of `Response` element that you&#39;re going to receive from identity provider. Example of response looks something like this\r\n\r\n    &lt;samlp:Response xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot; xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot; ID=&quot;_8e8dc5f69a98cc4c1ff3427e5ce34606fd672f91e6&quot; Version=&quot;2.0&quot; IssueInstant=&quot;2014-07-17T01:01:48Z&quot; Destination=&quot;http://sp.example.com/demo1/index.php?acs&quot; InResponseTo=&quot;ONELOGIN_4fee3b046395c4e751011e97f8900b5273d56685&quot;&gt;\r\n      &lt;saml:Issuer&gt;http://idp.example.com/metadata.php&lt;/saml:Issuer&gt;\r\n      &lt;samlp:Status&gt;\r\n        &lt;samlp:StatusCode Value=&quot;urn:oasis:names:tc:SAML:2.0:status:Success&quot;/&gt;\r\n      &lt;/samlp:Status&gt;\r\n      &lt;saml:Assertion xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; ID=&quot;_d71a3a8e9fcc45c9e9d248ef7049393fc8f04e5f75&quot; Version=&quot;2.0&quot; IssueInstant=&quot;2014-07-17T01:01:48Z&quot;&gt;\r\n        &lt;saml:Issuer&gt;http://idp.example.com/metadata.php&lt;/saml:Issuer&gt;\r\n        &lt;saml:Subject&gt;\r\n          &lt;saml:NameID SPNameQualifier=&quot;http://sp.example.com/demo1/metadata.php&quot; Format=&quot;urn:oasis:names:tc:SAML:2.0:nameid-format:transient&quot;&gt;_ce3d2948b4cf20146dee0a0b3dd6f69b6cf86f62d7&lt;/saml:NameID&gt;\r\n          &lt;saml:SubjectConfirmation Method=&quot;urn:oasis:names:tc:SAML:2.0:cm:bearer&quot;&gt;\r\n            &lt;saml:SubjectConfirmationData NotOnOrAfter=&quot;2024-01-18T06:21:48Z&quot; Recipient=&quot;http://sp.example.com/demo1/index.php?acs&quot; InResponseTo=&quot;ONELOGIN_4fee3b046395c4e751011e97f8900b5273d56685&quot;/&gt;\r\n          &lt;/saml:SubjectConfirmation&gt;\r\n        &lt;/saml:Subject&gt;\r\n        &lt;saml:Conditions NotBefore=&quot;2014-07-17T01:01:18Z&quot; NotOnOrAfter=&quot;2024-01-18T06:21:48Z&quot;&gt;\r\n          &lt;saml:AudienceRestriction&gt;\r\n            &lt;saml:Audience&gt;http://sp.example.com/demo1/metadata.php&lt;/saml:Audience&gt;\r\n          &lt;/saml:AudienceRestriction&gt;\r\n        &lt;/saml:Conditions&gt;\r\n        &lt;saml:AuthnStatement AuthnInstant=&quot;2014-07-17T01:01:48Z&quot; SessionNotOnOrAfter=&quot;2024-07-17T09:01:48Z&quot; SessionIndex=&quot;_be9967abd904ddcae3c0eb4189adbe3f71e327cf93&quot;&gt;\r\n          &lt;saml:AuthnContext&gt;\r\n            &lt;saml:AuthnContextClassRef&gt;urn:oasis:names:tc:SAML:2.0:ac:classes:Password&lt;/saml:AuthnContextClassRef&gt;\r\n          &lt;/saml:AuthnContext&gt;\r\n        &lt;/saml:AuthnStatement&gt;\r\n        &lt;saml:AttributeStatement&gt;\r\n          &lt;saml:Attribute Name=&quot;uid&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;&gt;\r\n            &lt;saml:AttributeValue xsi:type=&quot;xs:string&quot;&gt;test&lt;/saml:AttributeValue&gt;\r\n          &lt;/saml:Attribute&gt;\r\n          &lt;saml:Attribute Name=&quot;mail&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;&gt;\r\n            &lt;saml:AttributeValue xsi:type=&quot;xs:string&quot;&gt;test@example.com&lt;/saml:AttributeValue&gt;\r\n          &lt;/saml:Attribute&gt;\r\n          &lt;saml:Attribute Name=&quot;eduPersonAffiliation&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;&gt;\r\n            &lt;saml:AttributeValue xsi:type=&quot;xs:string&quot;&gt;users&lt;/saml:AttributeValue&gt;\r\n            &lt;saml:AttributeValue xsi:type=&quot;xs:string&quot;&gt;examplerole1&lt;/saml:AttributeValue&gt;\r\n          &lt;/saml:Attribute&gt;\r\n        &lt;/saml:AttributeStatement&gt;\r\n      &lt;/saml:Assertion&gt;\r\n    &lt;/samlp:Response&gt;\r\n\r\nNotice `Assertion` element here, it contains all the important data. Users `NameID` depending on the identity provider configuration, conditions under which this response is issued and SAML attributes.\r\n\r\nLet me know if this helps you.","link":"https://stackoverflow.com/questions/77530975/how-can-i-use-assertion-in-saml-request/77584170#77584170","title":"How can i use assertion in Saml Request?","body":"<p>I'm assuming you're trying to implement SP intiated SSO flow which include request and response. It seems like you understood something wrong because <code>Assertion</code> element can't be part of <code>AuthnRequest</code> element.\nMinimal working example of <code>AuthnRequest</code> looks like this</p>\n<pre><code>&lt;samlp:AuthnRequest xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot; xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot; ID=&quot;ONELOGIN_809707f0030a5d00620c9d9df97f627afe9dcc24&quot; Version=&quot;2.0&quot; ProviderName=&quot;SP test&quot; IssueInstant=&quot;2014-07-16T23:52:45Z&quot; Destination=&quot;http://idp.example.com/SSOService.php&quot; ProtocolBinding=&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&quot; AssertionConsumerServiceURL=&quot;http://sp.example.com/demo1/index.php?acs&quot;&gt;\n  &lt;saml:Issuer&gt;http://sp.example.com/demo1/metadata.php&lt;/saml:Issuer&gt;\n  &lt;samlp:NameIDPolicy Format=&quot;urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress&quot; AllowCreate=&quot;true&quot;/&gt;\n  &lt;samlp:RequestedAuthnContext Comparison=&quot;exact&quot;&gt;\n    &lt;saml:AuthnContextClassRef&gt;urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport&lt;/saml:AuthnContextClassRef&gt;\n  &lt;/samlp:RequestedAuthnContext&gt;\n&lt;/samlp:AuthnRequest&gt;\n</code></pre>\n<p><code>Assertion</code> element is actually part of <code>Response</code> element that you're going to receive from identity provider. Example of response looks something like this</p>\n<pre><code>&lt;samlp:Response xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot; xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot; ID=&quot;_8e8dc5f69a98cc4c1ff3427e5ce34606fd672f91e6&quot; Version=&quot;2.0&quot; IssueInstant=&quot;2014-07-17T01:01:48Z&quot; Destination=&quot;http://sp.example.com/demo1/index.php?acs&quot; InResponseTo=&quot;ONELOGIN_4fee3b046395c4e751011e97f8900b5273d56685&quot;&gt;\n  &lt;saml:Issuer&gt;http://idp.example.com/metadata.php&lt;/saml:Issuer&gt;\n  &lt;samlp:Status&gt;\n    &lt;samlp:StatusCode Value=&quot;urn:oasis:names:tc:SAML:2.0:status:Success&quot;/&gt;\n  &lt;/samlp:Status&gt;\n  &lt;saml:Assertion xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; ID=&quot;_d71a3a8e9fcc45c9e9d248ef7049393fc8f04e5f75&quot; Version=&quot;2.0&quot; IssueInstant=&quot;2014-07-17T01:01:48Z&quot;&gt;\n    &lt;saml:Issuer&gt;http://idp.example.com/metadata.php&lt;/saml:Issuer&gt;\n    &lt;saml:Subject&gt;\n      &lt;saml:NameID SPNameQualifier=&quot;http://sp.example.com/demo1/metadata.php&quot; Format=&quot;urn:oasis:names:tc:SAML:2.0:nameid-format:transient&quot;&gt;_ce3d2948b4cf20146dee0a0b3dd6f69b6cf86f62d7&lt;/saml:NameID&gt;\n      &lt;saml:SubjectConfirmation Method=&quot;urn:oasis:names:tc:SAML:2.0:cm:bearer&quot;&gt;\n        &lt;saml:SubjectConfirmationData NotOnOrAfter=&quot;2024-01-18T06:21:48Z&quot; Recipient=&quot;http://sp.example.com/demo1/index.php?acs&quot; InResponseTo=&quot;ONELOGIN_4fee3b046395c4e751011e97f8900b5273d56685&quot;/&gt;\n      &lt;/saml:SubjectConfirmation&gt;\n    &lt;/saml:Subject&gt;\n    &lt;saml:Conditions NotBefore=&quot;2014-07-17T01:01:18Z&quot; NotOnOrAfter=&quot;2024-01-18T06:21:48Z&quot;&gt;\n      &lt;saml:AudienceRestriction&gt;\n        &lt;saml:Audience&gt;http://sp.example.com/demo1/metadata.php&lt;/saml:Audience&gt;\n      &lt;/saml:AudienceRestriction&gt;\n    &lt;/saml:Conditions&gt;\n    &lt;saml:AuthnStatement AuthnInstant=&quot;2014-07-17T01:01:48Z&quot; SessionNotOnOrAfter=&quot;2024-07-17T09:01:48Z&quot; SessionIndex=&quot;_be9967abd904ddcae3c0eb4189adbe3f71e327cf93&quot;&gt;\n      &lt;saml:AuthnContext&gt;\n        &lt;saml:AuthnContextClassRef&gt;urn:oasis:names:tc:SAML:2.0:ac:classes:Password&lt;/saml:AuthnContextClassRef&gt;\n      &lt;/saml:AuthnContext&gt;\n    &lt;/saml:AuthnStatement&gt;\n    &lt;saml:AttributeStatement&gt;\n      &lt;saml:Attribute Name=&quot;uid&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;&gt;\n        &lt;saml:AttributeValue xsi:type=&quot;xs:string&quot;&gt;test&lt;/saml:AttributeValue&gt;\n      &lt;/saml:Attribute&gt;\n      &lt;saml:Attribute Name=&quot;mail&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;&gt;\n        &lt;saml:AttributeValue xsi:type=&quot;xs:string&quot;&gt;test@example.com&lt;/saml:AttributeValue&gt;\n      &lt;/saml:Attribute&gt;\n      &lt;saml:Attribute Name=&quot;eduPersonAffiliation&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;&gt;\n        &lt;saml:AttributeValue xsi:type=&quot;xs:string&quot;&gt;users&lt;/saml:AttributeValue&gt;\n        &lt;saml:AttributeValue xsi:type=&quot;xs:string&quot;&gt;examplerole1&lt;/saml:AttributeValue&gt;\n      &lt;/saml:Attribute&gt;\n    &lt;/saml:AttributeStatement&gt;\n  &lt;/saml:Assertion&gt;\n&lt;/samlp:Response&gt;\n</code></pre>\n<p>Notice <code>Assertion</code> element here, it contains all the important data. Users <code>NameID</code> depending on the identity provider configuration, conditions under which this response is issued and SAML attributes.</p>\n<p>Let me know if this helps you.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":36,"answer_count":1,"score":0,"last_activity_date":1701422715,"creation_date":1700664949,"last_edit_date":1700665171,"question_id":77530975,"body_markdown":"I have implemented a Service Provider (SP) with Spring Boot and would like to generate a saml request like this:\r\n\r\n```\r\n&lt;saml:Assertion Version=&quot;2.0&quot; ID=&quot;_e2294424-9055-4b32-ac27-39c1c53f66e7&quot; IssueInstant=&quot;2023-08-03T09:09:30.036Z&quot; xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;&gt;\r\n    &lt;samlp:AuthnRequest Version=&quot;2.0&quot; IssueInstant=&quot;2023-08-03T09:09:30.036Z&quot; ProtocolBinding=&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&quot; AssertionConsumerServiceURL=..... xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot; /&gt;\r\n    &lt;saml2:Issuer xmlns:saml2=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;\r\n                      Format=&quot;urn:oasis:names:tc:SAML:2.0:nameid-format:entity&quot;\r\n                      &gt;.....\r\n    &lt;/saml2:Issuer&gt;\r\n    &lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;..&lt;/ds:Signature&gt;\r\n&lt;/saml:Assertion&gt;\r\n```\r\nhow can i configure spring security to obtain this saml request?\r\n\r\n\r\n\r\nI currently get the following request, but I cannot insert the Assertion tag:\r\n```\r\n&lt;samlp:AuthnRequest Version=&quot;2.0&quot; IssueInstant=&quot;2023-08-03T09:09:30.036Z&quot; ProtocolBinding=&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&quot; AssertionConsumerServiceURL=..... xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot; /&gt;\r\n     &lt;saml2:Issuer xmlns:saml2=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;\r\n              Format=&quot;urn:oasis:names:tc:SAML:2.0:nameid-format:entity&quot;\r\n             &gt;......\r\n     &lt;/saml2:Issuer&gt;\r\n     &lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;..&lt;/ds:Signature&gt;\r\n&lt;/samlp:AuthnRequest&gt;\r\n```","link":"https://stackoverflow.com/questions/77530975/how-can-i-use-assertion-in-saml-request","title":"How can i use assertion in Saml Request?","body":"<p>I have implemented a Service Provider (SP) with Spring Boot and would like to generate a saml request like this:</p>\n<pre><code>&lt;saml:Assertion Version=&quot;2.0&quot; ID=&quot;_e2294424-9055-4b32-ac27-39c1c53f66e7&quot; IssueInstant=&quot;2023-08-03T09:09:30.036Z&quot; xmlns:saml=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;&gt;\n    &lt;samlp:AuthnRequest Version=&quot;2.0&quot; IssueInstant=&quot;2023-08-03T09:09:30.036Z&quot; ProtocolBinding=&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&quot; AssertionConsumerServiceURL=..... xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot; /&gt;\n    &lt;saml2:Issuer xmlns:saml2=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;\n                      Format=&quot;urn:oasis:names:tc:SAML:2.0:nameid-format:entity&quot;\n                      &gt;.....\n    &lt;/saml2:Issuer&gt;\n    &lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;..&lt;/ds:Signature&gt;\n&lt;/saml:Assertion&gt;\n</code></pre>\n<p>how can i configure spring security to obtain this saml request?</p>\n<p>I currently get the following request, but I cannot insert the Assertion tag:</p>\n<pre><code>&lt;samlp:AuthnRequest Version=&quot;2.0&quot; IssueInstant=&quot;2023-08-03T09:09:30.036Z&quot; ProtocolBinding=&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&quot; AssertionConsumerServiceURL=..... xmlns:samlp=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot; /&gt;\n     &lt;saml2:Issuer xmlns:saml2=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;\n              Format=&quot;urn:oasis:names:tc:SAML:2.0:nameid-format:entity&quot;\n             &gt;......\n     &lt;/saml2:Issuer&gt;\n     &lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;..&lt;/ds:Signature&gt;\n&lt;/samlp:AuthnRequest&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","resttemplate"],"answers":[{"comment_count":0,"score":2,"last_activity_date":1701279872,"creation_date":1701279872,"answer_id":77573428,"question_id":77570517,"body_markdown":"There&#39;s no test variant of `RestClient`. [This Spring Framework issue](https://github.com/spring-projects/spring-framework/issues/31275) is tracking a `RestClient` equivalent of `WebClient`&#39;s `WebTestClient`.","link":"https://stackoverflow.com/questions/77570517/does-the-new-restclient-introduced-in-spring-framework-6-1-have-a-variant-suitab/77573428#77573428","title":"Does the new RestClient introduced in Spring Framework 6.1 have a variant suitable for testing like RestTemplate had with TestRestTemplate?","body":"<p>There's no test variant of <code>RestClient</code>. <a href=\"https://github.com/spring-projects/spring-framework/issues/31275\" rel=\"nofollow noreferrer\">This Spring Framework issue</a> is tracking a <code>RestClient</code> equivalent of <code>WebClient</code>'s <code>WebTestClient</code>.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":97,"answer_count":1,"score":2,"last_activity_date":1701422203,"creation_date":1701255275,"last_edit_date":1701422203,"question_id":77570517,"body_markdown":"In spring framework 6.1, a new synchronous HTTP client `RestClient` was introduced. See also:\r\n\r\nhttps://github.com/spring-projects/spring-framework/issues/29552\r\n\r\nIt aims to replace the existing `RestTemplate`.\r\n\r\nIn Spring Boot, there was a `TestRestTemplate` which could be used for integration tests. See also:\r\n\r\nhttps://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing.utilities.test-rest-template\r\n\r\nHowever, I could not find any mention of a variant for `RestClient`. What is the recommended way to do integration testing using `RestClient` ?","link":"https://stackoverflow.com/questions/77570517/does-the-new-restclient-introduced-in-spring-framework-6-1-have-a-variant-suitab","title":"Does the new RestClient introduced in Spring Framework 6.1 have a variant suitable for testing like RestTemplate had with TestRestTemplate?","body":"<p>In spring framework 6.1, a new synchronous HTTP client <code>RestClient</code> was introduced. See also:</p>\n<p><a href=\"https://github.com/spring-projects/spring-framework/issues/29552\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-framework/issues/29552</a></p>\n<p>It aims to replace the existing <code>RestTemplate</code>.</p>\n<p>In Spring Boot, there was a <code>TestRestTemplate</code> which could be used for integration tests. See also:</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing.utilities.test-rest-template\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing.utilities.test-rest-template</a></p>\n<p>However, I could not find any mention of a variant for <code>RestClient</code>. What is the recommended way to do integration testing using <code>RestClient</code> ?</p>\n"},{"tags":["java","tomcat","centos","http-status-code-500"],"comments":[{"score":0,"post_type":"question","creation_date":1701376996,"post_id":77579015,"comment_id":136771482,"body_markdown":"Err, provide a ChartRenderingInfo value?","link":"https://stackoverflow.com/questions/77579015/http-status-500-internal-server-error-about-servletutilities#comment136771482_77579015","body":"Err, provide a ChartRenderingInfo value?"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701420528,"creation_date":1701420528,"answer_id":77583974,"question_id":77579015,"body_markdown":"As per [documentation][1], nulls are allowed for ChartRenderingInfo in &#39;saveChartAsPNG&#39;, so check if your other object parameters (JFreeChart and HttpSession) are the ones expected, as in package, versions etc.\r\n\r\n\r\n  [1]: https://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/servlet/ServletUtilities.html#saveChartAsPNG-org.jfree.chart.JFreeChart-int-int-org.jfree.chart.ChartRenderingInfo-javax.servlet.http.HttpSession-","link":"https://stackoverflow.com/questions/77579015/http-status-500-internal-server-error-about-servletutilities/77583974#77583974","title":"HTTP Status 500 – Internal Server Error about ServletUtilities","body":"<p>As per <a href=\"https://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/servlet/ServletUtilities.html#saveChartAsPNG-org.jfree.chart.JFreeChart-int-int-org.jfree.chart.ChartRenderingInfo-javax.servlet.http.HttpSession-\" rel=\"nofollow noreferrer\">documentation</a>, nulls are allowed for ChartRenderingInfo in 'saveChartAsPNG', so check if your other object parameters (JFreeChart and HttpSession) are the ones expected, as in package, versions etc.</p>\n"}],"comment_count":1,"is_answered":false,"view_count":40,"answer_count":1,"score":0,"last_activity_date":1701420528,"creation_date":1701352473,"last_edit_date":1701352978,"question_id":77579015,"body_markdown":"I am trying to make a Web Service using Tomcat 10 and jdk11 on centos.\r\n\r\nbut I got HTTP Status 500 – Internal Server Error, and show An error occurred at line: [703] in the jsp file: [/index.jsp] \r\n    \r\nIt&#39;s  said The method saveChartAsPNG(JFreeChart, int, int, ChartRenderingInfo, HttpSession) in the type ServletUtilities is not applicable for the arguments (JFreeChart, int, int, null, HttpSession)\r\n\r\n[![enter image description here][1]][1]\r\n\r\nmy code as below,\r\n\r\n    ValueAxis   rangeAxis   =   plot.getRangeAxis();   \r\n    rangeAxis.setUpperMargin(1);\r\n \r\n    String filename = ServletUtilities.saveChartAsPNG(chart, 200, 160, null, session);\r\n    String graphURL = request.getContextPath()+&quot;/DisplayChart?filename=&quot;+filename; \r\n\r\n\r\n \r\n\r\nPlease anyone can tell me what to do to fix this?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IvxTp.jpg","link":"https://stackoverflow.com/questions/77579015/http-status-500-internal-server-error-about-servletutilities","title":"HTTP Status 500 – Internal Server Error about ServletUtilities","body":"<p>I am trying to make a Web Service using Tomcat 10 and jdk11 on centos.</p>\n<p>but I got HTTP Status 500 – Internal Server Error, and show An error occurred at line: [703] in the jsp file: [/index.jsp]</p>\n<p>It's  said The method saveChartAsPNG(JFreeChart, int, int, ChartRenderingInfo, HttpSession) in the type ServletUtilities is not applicable for the arguments (JFreeChart, int, int, null, HttpSession)</p>\n<p><a href=\"https://i.stack.imgur.com/IvxTp.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IvxTp.jpg\" alt=\"enter image description here\" /></a></p>\n<p>my code as below,</p>\n<pre><code>ValueAxis   rangeAxis   =   plot.getRangeAxis();   \nrangeAxis.setUpperMargin(1);\n\nString filename = ServletUtilities.saveChartAsPNG(chart, 200, 160, null, session);\nString graphURL = request.getContextPath()+&quot;/DisplayChart?filename=&quot;+filename; \n</code></pre>\n<p>Please anyone can tell me what to do to fix this?</p>\n"},{"tags":["java","maven"],"comments":[{"score":2,"post_type":"question","creation_date":1701297120,"post_id":77574719,"comment_id":136759800,"body_markdown":"Sometimes new classes and packages are introduced between versions. For example, [`java.time`](https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html) was introduced in Java 8. Setting the `-source` target to Java 7 doesn&#39;t mean the code won&#39;t compile if you use `java.time` with JDK 8 and target Java 7. But just because it compiles, doesn&#39;t mean it will work. It won&#39;t. The `java.time` package is not present in Java 7.","link":"https://stackoverflow.com/questions/77574719/understanding-java-compiler-source-and-target-flags#comment136759800_77574719","body":"Sometimes new classes and packages are introduced between versions. For example, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\"><code>java.time</code></a> was introduced in Java 8. Setting the <code>-source</code> target to Java 7 doesn&#39;t mean the code won&#39;t compile if you use <code>java.time</code> with JDK 8 and target Java 7. But just because it compiles, doesn&#39;t mean it will work. It won&#39;t. The <code>java.time</code> package is not present in Java 7."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701337625,"post_id":77575006,"comment_id":136764053,"body_markdown":"Starting with JDK9 you should not use `--target` / `--source` anymore.. use `--release` only.. or `&lt;maven.compiler.release&gt;10&lt;/maven.compiler.release&gt;`..","link":"https://stackoverflow.com/questions/77574719/understanding-java-compiler-source-and-target-flags/77575006#comment136764053_77575006","body":"Starting with JDK9 you should not use <code>--target</code> / <code>--source</code> anymore.. use <code>--release</code> only.. or <code>&lt;maven.compiler.release&gt;10&lt;&#47;maven.compiler.release&gt;</code>.."}],"comment_count":1,"score":1,"last_activity_date":1701299901,"creation_date":1701299901,"answer_id":77575006,"question_id":77574719,"body_markdown":"It is not contradictory but maybe not well described. \r\n\r\nFor `--source` to add more context of the description for Java 17 helps:\r\n\r\n&gt; --source release or -source release\r\n&gt;\r\n&gt;    Compiles source code according to the rules of the Java programming &gt;language for the specified Java SE release. The supported values of release &gt;are the current Java SE release and a limited number of previous releases, &gt;detailed in the command-line help.\r\n\r\nIt means that the compiler will use the source language rules or parser for the version selected, with limited support for some but not all previous versions of Java. This is limited to the language specification, not libraries. You can select a previous version to avoid using newer features, but you are still linking to the current library of the JDK so you could be using newer class and/or methods that will not be present if you actually execute with an older version of the JDK.\r\n\r\n`--target` indicates that you want the generated bytecode to be compatible with the target version and not use bytecodes that are only available in a newer version. Again you still could be depending on APIs (classes/methods) available in a newer version so if you try to execute in the older version of the JDK it may fail.\r\n\r\n`--release` was introduce in Java 9 to resolve the problem of API compatibility. In addition to set `--source` and `--target` to the same version it ensures that also the standard library used is compatible with the version selected. More information is available in this answer: https://stackoverflow.com/a/43103038/721855\r\n\r\n`--release` documentation for Java 17:\r\n&gt; --release release\r\n&gt; \r\n&gt; Compiles source code according to the rules of the Java programming language for the specified Java SE release, generating\r\n&gt; class files which target that release. Source code is compiled against\r\n&gt; the combined Java SE and JDK API for the specified release.\r\n&gt; \r\n&gt; The supported values of release are the current Java SE release and a limited number of previous releases, detailed in the\r\n&gt; command-line help.\r\n&gt; \r\n&gt; For the current release, the Java SE API consists of the java.*, javax.*, and org.* packages that are exported by the Java SE modules\r\n&gt; in the release; the JDK API consists of the com.* and jdk.* packages\r\n&gt; that are exported by the JDK modules in the release, plus the javax.*\r\n&gt; packages that are exported by standard, but non-Java SE, modules in\r\n&gt; the release.\r\n&gt; \r\n&gt; For previous releases, the Java SE API and the JDK API are as defined in that release.\r\n&gt;  \r\n&gt; The Maven configurations mentioned just lets you configure those\r\n&gt; values.","link":"https://stackoverflow.com/questions/77574719/understanding-java-compiler-source-and-target-flags/77575006#77575006","title":"Understanding java compiler source and target flags","body":"<p>It is not contradictory but maybe not well described.</p>\n<p>For <code>--source</code> to add more context of the description for Java 17 helps:</p>\n<blockquote>\n<p>--source release or -source release</p>\n<p>Compiles source code according to the rules of the Java programming &gt;language for the specified Java SE release. The supported values of release &gt;are the current Java SE release and a limited number of previous releases, &gt;detailed in the command-line help.</p>\n</blockquote>\n<p>It means that the compiler will use the source language rules or parser for the version selected, with limited support for some but not all previous versions of Java. This is limited to the language specification, not libraries. You can select a previous version to avoid using newer features, but you are still linking to the current library of the JDK so you could be using newer class and/or methods that will not be present if you actually execute with an older version of the JDK.</p>\n<p><code>--target</code> indicates that you want the generated bytecode to be compatible with the target version and not use bytecodes that are only available in a newer version. Again you still could be depending on APIs (classes/methods) available in a newer version so if you try to execute in the older version of the JDK it may fail.</p>\n<p><code>--release</code> was introduce in Java 9 to resolve the problem of API compatibility. In addition to set <code>--source</code> and <code>--target</code> to the same version it ensures that also the standard library used is compatible with the version selected. More information is available in this answer: <a href=\"https://stackoverflow.com/a/43103038/721855\">https://stackoverflow.com/a/43103038/721855</a></p>\n<p><code>--release</code> documentation for Java 17:</p>\n<blockquote>\n<p>--release release</p>\n<p>Compiles source code according to the rules of the Java programming language for the specified Java SE release, generating\nclass files which target that release. Source code is compiled against\nthe combined Java SE and JDK API for the specified release.</p>\n<p>The supported values of release are the current Java SE release and a limited number of previous releases, detailed in the\ncommand-line help.</p>\n<p>For the current release, the Java SE API consists of the java.<em>, javax.</em>, and org.* packages that are exported by the Java SE modules\nin the release; the JDK API consists of the com.* and jdk.* packages\nthat are exported by the JDK modules in the release, plus the javax.*\npackages that are exported by standard, but non-Java SE, modules in\nthe release.</p>\n<p>For previous releases, the Java SE API and the JDK API are as defined in that release.</p>\n<p>The Maven configurations mentioned just lets you configure those\nvalues.</p>\n</blockquote>\n"},{"comment_count":0,"score":1,"last_activity_date":1701418885,"last_edit_date":1701418885,"creation_date":1701329556,"answer_id":77576616,"question_id":77574719,"body_markdown":"This is about how the Java compiler is told to do its work. \r\n\r\nThe rules of how to interpret Java programs, and what the output files should look like has changed over the years.  \r\n\r\n* `-source X` means the compiler should follow the rules when parsing source code for Java version X.  An example could be how to interpret the `@Overrides` annotation which was invalid in Java 5, but very useful in Java 6.  Another that lambda expressions came in Java 8.\r\n* `-target Y` means that the output files (classfiles) should follow the rules for Java version Y.  This is usually important because old JVM&#39;s cannot understand classes compiled for newer JVM&#39;s as they contain new stuff that they don&#39;t know how to handle.\r\n* `-release X` is a newer flag combining the two.  This is most likely because the OpenJDK java compiler hasn&#39;t allowed different source and target arguments for quite some time.  See https://stackoverflow.com/q/8970920/53897 for how the world looked when I wanted to have Java 6 sources compiled for a Java 5 target (there were very good reasons for that).\r\n\r\nThis is what the Oracle documentation tries to tell you.\r\n\r\nThe tricky part here is that even if the Java 17 compiler knows it is compiling Java 8 code, the default behavior is that it can only resolve class references against what is present in the Java 17 JVM it is running in.  Hence, if you happen to use a class not present in Java 8 but in Java 17 the compiler has no way of knowing that and therefore can generate code that can run but not work on the Java 8 JVM.   \r\n\r\nThis is what the Maven documentation tries to tell you (as Maven essentially just passes these arguments on to javac in its default configuration).\r\n\r\nNotes:  \r\n\r\n* Unless you have very, very good reason not to, you should write for the latest relevant Long Term Support version.  A good choice is Java 17. \r\n* These days you should compile your sources for others with the JVM intended to run the program.  This is very easy using docker or build tools like Github Actions.\r\n","link":"https://stackoverflow.com/questions/77574719/understanding-java-compiler-source-and-target-flags/77576616#77576616","title":"Understanding java compiler source and target flags","body":"<p>This is about how the Java compiler is told to do its work.</p>\n<p>The rules of how to interpret Java programs, and what the output files should look like has changed over the years.</p>\n<ul>\n<li><code>-source X</code> means the compiler should follow the rules when parsing source code for Java version X.  An example could be how to interpret the <code>@Overrides</code> annotation which was invalid in Java 5, but very useful in Java 6.  Another that lambda expressions came in Java 8.</li>\n<li><code>-target Y</code> means that the output files (classfiles) should follow the rules for Java version Y.  This is usually important because old JVM's cannot understand classes compiled for newer JVM's as they contain new stuff that they don't know how to handle.</li>\n<li><code>-release X</code> is a newer flag combining the two.  This is most likely because the OpenJDK java compiler hasn't allowed different source and target arguments for quite some time.  See <a href=\"https://stackoverflow.com/q/8970920/53897\">Maven: javac: source release 1.6 requires target release 1.6</a> for how the world looked when I wanted to have Java 6 sources compiled for a Java 5 target (there were very good reasons for that).</li>\n</ul>\n<p>This is what the Oracle documentation tries to tell you.</p>\n<p>The tricky part here is that even if the Java 17 compiler knows it is compiling Java 8 code, the default behavior is that it can only resolve class references against what is present in the Java 17 JVM it is running in.  Hence, if you happen to use a class not present in Java 8 but in Java 17 the compiler has no way of knowing that and therefore can generate code that can run but not work on the Java 8 JVM.</p>\n<p>This is what the Maven documentation tries to tell you (as Maven essentially just passes these arguments on to javac in its default configuration).</p>\n<p>Notes:</p>\n<ul>\n<li>Unless you have very, very good reason not to, you should write for the latest relevant Long Term Support version.  A good choice is Java 17.</li>\n<li>These days you should compile your sources for others with the JVM intended to run the program.  This is very easy using docker or build tools like Github Actions.</li>\n</ul>\n"}],"comment_count":1,"is_answered":true,"view_count":66,"answer_count":2,"score":1,"last_activity_date":1701418885,"creation_date":1701295270,"question_id":77574719,"body_markdown":"The `javac` [documentation](https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html) says:\r\n\r\n&gt;--source release or -source release\r\nCompiles source code according to the rules of the Java programming language for the specified Java SE release.\r\n\r\n&gt;--target release or -target release\r\nGenerates class files suitable for the specified Java SE release. \r\n\r\nbut Maven [documentation](https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html) says:\r\n\r\n&gt;setting the source option does not guarantee that your code actually compiles on a JDK with the specified version.\r\n\r\n&gt;Merely setting the target option does not guarantee that your code actually runs on a JRE with the specified version.\r\n\r\nI don&#39;t understand this and find it conflicting. Which of the above is correct? Or, can anyone explain with an example how both are correct?\r\n\r\nOn another [page](https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-release.html) Maven seems to advocate using the `release` flag instead and says:\r\n\r\n&gt;This means that, unlike the -source and -target options, the compiler will detect and generate an error when using APIs that don&#39;t exist in previous releases of Java SE","link":"https://stackoverflow.com/questions/77574719/understanding-java-compiler-source-and-target-flags","title":"Understanding java compiler source and target flags","body":"<p>The <code>javac</code> <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/javac.html\" rel=\"nofollow noreferrer\">documentation</a> says:</p>\n<blockquote>\n<p>--source release or -source release\nCompiles source code according to the rules of the Java programming language for the specified Java SE release.</p>\n</blockquote>\n<blockquote>\n<p>--target release or -target release\nGenerates class files suitable for the specified Java SE release.</p>\n</blockquote>\n<p>but Maven <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html\" rel=\"nofollow noreferrer\">documentation</a> says:</p>\n<blockquote>\n<p>setting the source option does not guarantee that your code actually compiles on a JDK with the specified version.</p>\n</blockquote>\n<blockquote>\n<p>Merely setting the target option does not guarantee that your code actually runs on a JRE with the specified version.</p>\n</blockquote>\n<p>I don't understand this and find it conflicting. Which of the above is correct? Or, can anyone explain with an example how both are correct?</p>\n<p>On another <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-release.html\" rel=\"nofollow noreferrer\">page</a> Maven seems to advocate using the <code>release</code> flag instead and says:</p>\n<blockquote>\n<p>This means that, unlike the -source and -target options, the compiler will detect and generate an error when using APIs that don't exist in previous releases of Java SE</p>\n</blockquote>\n"},{"tags":["java","java-21","virtual-threads"],"comments":[{"score":1,"post_type":"question","creation_date":1700129388,"post_id":77492181,"comment_id":136617687,"body_markdown":"Maybe when you’re using `synchronized` a lot.","link":"https://stackoverflow.com/questions/77492181/under-what-circumstances-will-virtual-threads-expand-the-number-of-underlying-ca#comment136617687_77492181","body":"Maybe when you’re using <code>synchronized</code> a lot."},{"score":0,"post_type":"question","creation_date":1700138557,"post_id":77492181,"comment_id":136619301,"body_markdown":"@Holger `synchronized` alone isn&#39;t that much of a problem - but _blocking operations inside `synchronized`_ would cause pinning - However, I don&#39;t think the OP is asking about pinning but things like file I/O that temporarily increases the number of platform threads in the pool.","link":"https://stackoverflow.com/questions/77492181/under-what-circumstances-will-virtual-threads-expand-the-number-of-underlying-ca#comment136619301_77492181","body":"@Holger <code>synchronized</code> alone isn&#39;t that much of a problem - but <i>blocking operations inside <code>synchronized</code></i> would cause pinning - However, I don&#39;t think the OP is asking about pinning but things like file I/O that temporarily increases the number of platform threads in the pool."},{"score":1,"post_type":"question","creation_date":1700213491,"post_id":77492181,"comment_id":136629191,"body_markdown":"@dan1st the thread is pinned the entire time it owns the object’s monitor (the entire `synchronized` block when not using `wait`) though you’re right that this is not a problem when the thread does not use blocking operations. But keep in mind that trying to enter a `synchronized` block also is a blocking operation when another thread own the object’s monitor. So nested `synchronized` blocks (on different objects) alone are sufficient to create an actual problem.","link":"https://stackoverflow.com/questions/77492181/under-what-circumstances-will-virtual-threads-expand-the-number-of-underlying-ca#comment136629191_77492181","body":"@dan1st the thread is pinned the entire time it owns the object’s monitor (the entire <code>synchronized</code> block when not using <code>wait</code>) though you’re right that this is not a problem when the thread does not use blocking operations. But keep in mind that trying to enter a <code>synchronized</code> block also is a blocking operation when another thread own the object’s monitor. So nested <code>synchronized</code> blocks (on different objects) alone are sufficient to create an actual problem."},{"score":0,"post_type":"question","creation_date":1700231026,"post_id":77492181,"comment_id":136632316,"body_markdown":"Pinning from `synchronized` blocks doesn&#39;t temporarily increase the number of carrier threads IIRC. As I said, I think the OP is asking about things like `FileInputStream` which is not yet implemented asynchronously. Also, if you have high-contention nested `synchronized` blocks (i.e. the inner one is contended) or `synchronized` blocks that take a long time without blocking, you might be doing something wrong.","link":"https://stackoverflow.com/questions/77492181/under-what-circumstances-will-virtual-threads-expand-the-number-of-underlying-ca#comment136632316_77492181","body":"Pinning from <code>synchronized</code> blocks doesn&#39;t temporarily increase the number of carrier threads IIRC. As I said, I think the OP is asking about things like <code>FileInputStream</code> which is not yet implemented asynchronously. Also, if you have high-contention nested <code>synchronized</code> blocks (i.e. the inner one is contended) or <code>synchronized</code> blocks that take a long time without blocking, you might be doing something wrong."},{"score":0,"post_type":"question","creation_date":1701244790,"post_id":77492181,"comment_id":136750246,"body_markdown":"@dan1st&#160;丹1st You&#39;are right that I&#39;m not asking about pinning. Pinning will not cause carrier threads expansion.\nI want to know what operation will cause carrier threads expansion. Could you give me some  code to reach this? Thank you very much!","link":"https://stackoverflow.com/questions/77492181/under-what-circumstances-will-virtual-threads-expand-the-number-of-underlying-ca#comment136750246_77492181","body":"@dan1st 丹1st You&#39;are right that I&#39;m not asking about pinning. Pinning will not cause carrier threads expansion. I want to know what operation will cause carrier threads expansion. Could you give me some  code to reach this? Thank you very much!"},{"score":0,"post_type":"question","creation_date":1701244894,"post_id":77492181,"comment_id":136750263,"body_markdown":"Any code blocking on `FileInputStream#read`/`FileOutputStream#write` (you might need `FileOutputStream#flush` after writing) in virtual threads should work - but I don&#39;t know about other ways/I don&#39;t have a full list.","link":"https://stackoverflow.com/questions/77492181/under-what-circumstances-will-virtual-threads-expand-the-number-of-underlying-ca#comment136750263_77492181","body":"Any code blocking on <code>FileInputStream#read</code>/<code>FileOutputStream#write</code> (you might need <code>FileOutputStream#flush</code> after writing) in virtual threads should work - but I don&#39;t know about other ways/I don&#39;t have a full list."},{"score":0,"post_type":"question","creation_date":1701417676,"post_id":77492181,"comment_id":136775467,"body_markdown":"@dan1st Sorry, how can I print the number of  carrier threads?","link":"https://stackoverflow.com/questions/77492181/under-what-circumstances-will-virtual-threads-expand-the-number-of-underlying-ca#comment136775467_77492181","body":"@dan1st Sorry, how can I print the number of  carrier threads?"},{"score":0,"post_type":"question","creation_date":1701418598,"post_id":77492181,"comment_id":136775598,"body_markdown":"@dan1st You&#39;re right. I have sawn the carrier threads expansion in `FileInputStream#read`  by `jstack pid`","link":"https://stackoverflow.com/questions/77492181/under-what-circumstances-will-virtual-threads-expand-the-number-of-underlying-ca#comment136775598_77492181","body":"@dan1st You&#39;re right. I have sawn the carrier threads expansion in <code>FileInputStream#read</code>  by <code>jstack pid</code>"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701418749,"creation_date":1701418749,"answer_id":77583843,"question_id":77492181,"body_markdown":"```\r\npublic class CarrierThreadExpandTest {\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor();\r\n        File file = new File(&quot;/Users/info.log&quot;);\r\n        for (int i = 0; i &lt; 32; i++) {\r\n            executorService.execute(() -&gt; {\r\n                while (true) {\r\n                    try (FileInputStream fis = new FileInputStream(file)) {\r\n                        int content;\r\n                        while ((content = fis.read()) != -1) {\r\n                            System.out.print((char) content);\r\n                        }\r\n                    } catch (IOException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n\r\n                }\r\n            });\r\n        }\r\n        Thread.sleep(1000 * 60 * 60);\r\n    }\r\n}\r\n\r\n```\r\n```\r\n$ jps\r\n$ jstack pid\r\n```\r\nlook at the &quot;ForkJoinPool-1-worker-xx&quot; thread.\r\n","link":"https://stackoverflow.com/questions/77492181/under-what-circumstances-will-virtual-threads-expand-the-number-of-underlying-ca/77583843#77583843","title":"Under what circumstances will virtual threads expand the number of underlying carrier threads?","body":"<pre><code>public class CarrierThreadExpandTest {\n\n    public static void main(String[] args) throws InterruptedException {\n        ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor();\n        File file = new File(&quot;/Users/info.log&quot;);\n        for (int i = 0; i &lt; 32; i++) {\n            executorService.execute(() -&gt; {\n                while (true) {\n                    try (FileInputStream fis = new FileInputStream(file)) {\n                        int content;\n                        while ((content = fis.read()) != -1) {\n                            System.out.print((char) content);\n                        }\n                    } catch (IOException e) {\n                        throw new RuntimeException(e);\n                    }\n\n                }\n            });\n        }\n        Thread.sleep(1000 * 60 * 60);\n    }\n}\n\n</code></pre>\n<pre><code>$ jps\n$ jstack pid\n</code></pre>\n<p>look at the &quot;ForkJoinPool-1-worker-xx&quot; thread.</p>\n"}],"comment_count":8,"is_answered":false,"view_count":98,"answer_count":1,"score":0,"last_activity_date":1701418749,"creation_date":1700106248,"question_id":77492181,"body_markdown":"In the jep444, I see &quot;The implementations of these blocking operations compensate for the capture of the OS thread by temporarily expanding the parallelism of the scheduler&quot;.\r\nUnder what circumstances will virtual threads expand the number of underlying carrier threads?\r\n\r\n\r\nCan you give me some code to reach this?","link":"https://stackoverflow.com/questions/77492181/under-what-circumstances-will-virtual-threads-expand-the-number-of-underlying-ca","title":"Under what circumstances will virtual threads expand the number of underlying carrier threads?","body":"<p>In the jep444, I see &quot;The implementations of these blocking operations compensate for the capture of the OS thread by temporarily expanding the parallelism of the scheduler&quot;.\nUnder what circumstances will virtual threads expand the number of underlying carrier threads?</p>\n<p>Can you give me some code to reach this?</p>\n"},{"tags":["java","spring-security"],"comments":[{"score":0,"post_type":"question","creation_date":1700788496,"post_id":77537657,"comment_id":136699380,"body_markdown":"please update with debug logs for the others and we can explain exacctly what is happening.","link":"https://stackoverflow.com/questions/77537657/spring-security-unsecured-basic-authentication#comment136699380_77537657","body":"please update with debug logs for the others and we can explain exacctly what is happening."},{"score":0,"post_type":"question","creation_date":1700811489,"post_id":77537657,"comment_id":136701175,"body_markdown":"debug logs from what others?","link":"https://stackoverflow.com/questions/77537657/spring-security-unsecured-basic-authentication#comment136701175_77537657","body":"debug logs from what others?"},{"score":0,"post_type":"question","creation_date":1700822926,"post_id":77537657,"comment_id":136703048,"body_markdown":"When you are accessing the other endpoints","link":"https://stackoverflow.com/questions/77537657/spring-security-unsecured-basic-authentication#comment136703048_77537657","body":"When you are accessing the other endpoints"},{"score":0,"post_type":"question","creation_date":1700908055,"post_id":77537657,"comment_id":136711506,"body_markdown":"There is no debug logging then.\nBefore I added the /api/third, I got the debug logging as above. When I added the /api/thid, it got the debug logging, but when I access the other, there was no logging.","link":"https://stackoverflow.com/questions/77537657/spring-security-unsecured-basic-authentication#comment136711506_77537657","body":"There is no debug logging then. Before I added the /api/third, I got the debug logging as above. When I added the /api/thid, it got the debug logging, but when I access the other, there was no logging."},{"score":0,"post_type":"question","creation_date":1700910666,"post_id":77537657,"comment_id":136711681,"body_markdown":"What you are claiming makes no sense. Well no logs i cant help you, good luck","link":"https://stackoverflow.com/questions/77537657/spring-security-unsecured-basic-authentication#comment136711681_77537657","body":"What you are claiming makes no sense. Well no logs i cant help you, good luck"},{"score":0,"post_type":"question","creation_date":1701352760,"post_id":77537657,"comment_id":136766892,"body_markdown":"That is exactly why I am asking. When I added the third security configuration to HttpSecurity, the logs shows Secured Get for that API endpoint, but nothing for the first others.","link":"https://stackoverflow.com/questions/77537657/spring-security-unsecured-basic-authentication#comment136766892_77537657","body":"That is exactly why I am asking. When I added the third security configuration to HttpSecurity, the logs shows Secured Get for that API endpoint, but nothing for the first others."},{"score":0,"post_type":"question","creation_date":1701371389,"post_id":77537657,"comment_id":136770566,"body_markdown":"well we usually dont ask for peoples opinions on logs, we prefer that you post your logs in full so that we get an ubiased full picture of what is happening in your server. So no, there are no logs good luck.","link":"https://stackoverflow.com/questions/77537657/spring-security-unsecured-basic-authentication#comment136770566_77537657","body":"well we usually dont ask for peoples opinions on logs, we prefer that you post your logs in full so that we get an ubiased full picture of what is happening in your server. So no, there are no logs good luck."},{"score":0,"post_type":"question","creation_date":1701413900,"post_id":77537657,"comment_id":136774971,"body_markdown":"I am not asking about an opinion, but why Spring Security is behaving like it does in my example. Full logs coming up...","link":"https://stackoverflow.com/questions/77537657/spring-security-unsecured-basic-authentication#comment136774971_77537657","body":"I am not asking about an opinion, but why Spring Security is behaving like it does in my example. Full logs coming up..."},{"score":0,"post_type":"question","creation_date":1701417641,"post_id":77537657,"comment_id":136775455,"body_markdown":"I didnt say you were asking for an opinion. I said we ask for logs so we can read them. We dont ask for someones intepretation of their logs.","link":"https://stackoverflow.com/questions/77537657/spring-security-unsecured-basic-authentication#comment136775455_77537657","body":"I didnt say you were asking for an opinion. I said we ask for logs so we can read them. We dont ask for someones intepretation of their logs."}],"comment_count":9,"is_answered":false,"view_count":79,"answer_count":0,"score":0,"last_activity_date":1701415064,"creation_date":1700749714,"last_edit_date":1701415064,"question_id":77537657,"body_markdown":"I have a Spring Boot Application, and in the process of learning Spring Security.\\\r\nSpring Boot 3.1.5, Java 17\r\n\r\nI have configured Spring Security and it works.\r\n\r\nThere is a few issues I wonder why it is working the way it does.\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n\r\n    private static final String[] ENDPOINTS = { &quot;/api/first/**&quot;, &quot;/api/second/**&quot; };\r\n\r\n    private static final String ROLE = &quot;USER&quot;;\r\n\r\n    private final String username;\r\n\r\n    private final String password;\r\n\r\n    public SecurityConfig(\r\n        @Value(&quot;${spring.security.user.name}&quot;) final String username,\r\n        @Value(&quot;${spring.security.user.password}&quot;) final String password\r\n    ) {\r\n        this.username = username;\r\n        this.password = password;\r\n    }\r\n\r\n    @Bean\r\n    public InMemoryUserDetailsManager userDetailsService(final PasswordEncoder passwordEncoder) {\r\n        final UserDetails anyUser = User.builder()\r\n            .username(username)\r\n            .password(passwordEncoder.encode(password))\r\n            .roles(ROLE)\r\n            .build();\r\n        return new InMemoryUserDetailsManager(anyUser);\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(final HttpSecurity http) throws Exception {\r\n        http.securityMatcher(ENDPOINTS)\r\n            .authorizeHttpRequests(createRequestMatchers())\r\n            .csrf(AbstractHttpConfigurer::disable)\r\n            .httpBasic(Customizer.withDefaults());\r\n        return http.build();\r\n    }\r\n\r\n    @NotNull\r\n    private Customizer&lt;AuthorizeHttpRequestsConfigurer&lt;HttpSecurity&gt;.AuthorizationManagerRequestMatcherRegistry&gt; createRequestMatchers() {\r\n        return (authz) -&gt;\r\n            authz.requestMatchers(ENDPOINTS).authenticated();\r\n    }\r\n}\r\n```\r\n\r\nWhen accessing the APIs I can see that it is authenticating the user when calling the API /api/second?id=7324325\r\n```\r\n2023-12-01T07:59:05.955+01:00  INFO 5548 --- [           main] t.r.a.t.MyApplication : Starting MyApplication using Java 21.0.1 with PID 5548 (C:\\Users\\djviking\\workspace-company\\java-my-application\\target\\classes started by djviking in C:\\Users\\djviking\\workspace-company\\java-my-application)\r\n2023-12-01T07:59:05.956+01:00 DEBUG 5548 --- [           main] t.r.a.t.MyApplication : Running with Spring Boot v3.1.5, Spring v6.0.13\r\n2023-12-01T07:59:05.956+01:00  INFO 5548 --- [           main] t.r.a.t.MyApplication : The following 1 profile is active: &quot;test&quot;\r\n2023-12-01T07:59:06.535+01:00  INFO 5548 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2023-12-01T07:59:06.669+01:00  INFO 5548 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 124 ms. Found 3 JPA repository interfaces.\r\n2023-12-01T07:59:06.966+01:00  INFO 5548 --- [           main] faultConfiguringBeanFactoryPostProcessor : No bean named &#39;errorChannel&#39; has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.\r\n2023-12-01T07:59:06.974+01:00  INFO 5548 --- [           main] faultConfiguringBeanFactoryPostProcessor : No bean named &#39;integrationHeaderChannelRegistry&#39; has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.\r\n2023-12-01T07:59:07.429+01:00  INFO 5548 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8306 (http)\r\n2023-12-01T07:59:07.436+01:00  INFO 5548 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-12-01T07:59:07.437+01:00  INFO 5548 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]\r\n2023-12-01T07:59:07.519+01:00  INFO 5548 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-12-01T07:59:07.519+01:00  INFO 5548 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1525 ms\r\nStandard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts\r\n2023-12-01T07:59:07.715+01:00  INFO 5548 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2023-12-01T07:59:07.752+01:00  INFO 5548 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final\r\n2023-12-01T07:59:07.754+01:00  INFO 5548 --- [           main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\r\n2023-12-01T07:59:07.829+01:00  INFO 5548 --- [           main] o.h.e.boot.internal.EnversServiceImpl    : Envers integration enabled? : true\r\n2023-12-01T07:59:07.951+01:00  INFO 5548 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\r\n2023-12-01T07:59:07.968+01:00  INFO 5548 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-12-01T07:59:08.475+01:00  INFO 5548 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: f46ed47e-63af-407b-b0c8-cfee5a773ff8\r\n2023-12-01T07:59:08.476+01:00  INFO 5548 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2023-12-01T07:59:08.494+01:00  WARN 5548 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: SQLServer2012Dialect does not need to be specified explicitly using &#39;hibernate.dialect&#39; (remove the property setting and it will be selected by default)\r\n2023-12-01T07:59:08.495+01:00  WARN 5548 --- [           main] org.hibernate.orm.deprecation            : HHH90000026: SQLServer2012Dialect has been deprecated; use org.hibernate.dialect.SQLServerDialect instead\r\n2023-12-01T07:59:09.377+01:00  INFO 5548 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set &#39;hibernate.transaction.jta.platform&#39; to enable JTA platform integration)\r\n2023-12-01T07:59:10.208+01:00  INFO 5548 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2023-12-01T07:59:10.767+01:00  INFO 5548 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.\r\n2023-12-01T07:59:11.312+01:00  WARN 5548 --- [           main] i.l.graphql.generator.OperationMapper    : Potential type name collision detected: Int bound to multiple types: java.lang.Integer and int. Assign unique names using the appropriate annotations or override the TypeInfoGenerator. For details and solutions see https://github.com/leangen/graphql-spqr/wiki/Errors#non-unique-type-name\r\n2023-12-01T07:59:11.465+01:00  WARN 5548 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n2023-12-01T07:59:11.871+01:00  INFO 5548 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Or [Mvc [pattern=&#39;/api/first/**&#39;], Mvc [pattern=&#39;/api/second/**&#39;]] with [org.springframework.security.web.session.DisableEncodeUrlFilter@67a84d80, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@21d297a, org.springframework.security.web.context.SecurityContextHolderFilter@7445fdb2, org.springframework.security.web.header.HeaderWriterFilter@56ed0511, org.springframework.security.web.authentication.logout.LogoutFilter@5db553f9, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@495590a7, com.company.raavare.avregning.tilleggtrekk.config.SecurityConfig$HeaderFilter@7879348, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@35069061, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5199d74e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6b869242, org.springframework.security.web.access.ExceptionTranslationFilter@2afee2ee, org.springframework.security.web.access.intercept.AuthorizationFilter@77ad33c]\r\n2023-12-01T07:59:12.224+01:00  INFO 5548 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the &#39;errorChannel&#39; channel\r\n2023-12-01T07:59:12.224+01:00  INFO 5548 --- [           main] o.s.i.channel.PublishSubscribeChannel    : Channel &#39;my-application.errorChannel&#39; has 1 subscriber(s).\r\n2023-12-01T07:59:12.225+01:00  INFO 5548 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : started bean &#39;_org.springframework.integration.errorLogger&#39;\r\n2023-12-01T07:59:12.248+01:00  INFO 5548 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8306 (http) with context path &#39;&#39;\r\n2023-12-01T07:59:12.301+01:00  INFO 5548 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8088 (http)\r\n2023-12-01T07:59:12.301+01:00  INFO 5548 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-12-01T07:59:12.302+01:00  INFO 5548 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]\r\n2023-12-01T07:59:12.327+01:00  INFO 5548 --- [           main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext\r\n2023-12-01T07:59:12.327+01:00  INFO 5548 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 75 ms\r\nStandard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts\r\n2023-12-01T07:59:12.339+01:00  INFO 5548 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path &#39;/actuator&#39;\r\n2023-12-01T07:59:12.370+01:00  INFO 5548 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8088 (http) with context path &#39;&#39;\r\n2023-12-01T07:59:12.377+01:00  INFO 5548 --- [           main] t.r.a.t.MyApplication : Started MyApplication in 6.738 seconds (process running for 7.222)\r\n2023-12-01T07:59:20.608+01:00  INFO 5548 --- [nio-8306-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2023-12-01T07:59:20.609+01:00  INFO 5548 --- [nio-8306-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2023-12-01T07:59:20.610+01:00  INFO 5548 --- [nio-8306-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\n2023-12-01T07:59:20.623+01:00 DEBUG 5548 --- [nio-8306-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/second?id=7324325\r\n2023-12-01T07:59:20.757+01:00 DEBUG 5548 --- [nio-8306-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user\r\n2023-12-01T07:59:20.760+01:00 DEBUG 5548 --- [nio-8306-exec-3] o.s.s.w.a.www.BasicAuthenticationFilter  : Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=username, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]\r\n2023-12-01T07:59:20.768+01:00 DEBUG 5548 --- [nio-8306-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/second?id=7324325\r\n2023-12-01T07:59:20.782+01:00 DEBUG 5548 --- [nio-8306-exec-3] .r.a.t.w.MyApplicationController : Get Result for Id Id=7324325\r\n```\r\n\r\n\r\nI have a third API &quot;/api/third&quot;, that is not configured in the SecurityConfig.\r\n\r\nWhen calling this /api/third, it does not log from Spring Security, as it did for the /api/second. Does that mean that the third API is unsecured?\r\n\r\nIf I add Security configuration for the third API in SpringSecurity:\r\n```\r\n@Bean\r\n    public SecurityFilterChain filterChain(final HttpSecurity http) throws Exception {\r\n        http.securityMatcher(ENDPOINTS).authorizeHttpRequests(createRequestMatchers())   \r\n            .securityMatcher(&quot;/api/third/**&quot;).authorizeHttpRequests(authz -&gt; authz.requestMatchers(&quot;/api/third/**&quot;).hasRole(&quot;ADMIN&quot;))\r\n            .csrf(AbstractHttpConfigurer::disable)\r\n            .httpBasic(Customizer.withDefaults());\r\n        return http.build();\r\n    }\r\n```\r\n\r\nWhen I call the second API this time, it does not log Spring Security like it did before.\r\n\r\nNow when I call the third API, with the User (who is not Admin role), then it logs Security.\r\n```\r\n2023-12-01T08:11:42.857+01:00  INFO 24016 --- [           main] t.r.a.t.MyApplication                    : Started MyApplication in 6.072 seconds (process running for 6.54)\r\n2023-12-01T08:12:09.529+01:00  INFO 24016 --- [nio-8306-exec-5] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#39;dispatcherServlet&#39;\r\n2023-12-01T08:12:09.530+01:00  INFO 24016 --- [nio-8306-exec-5] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2023-12-01T08:12:09.531+01:00  INFO 24016 --- [nio-8306-exec-5] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\r\n2023-12-01T08:12:09.560+01:00 DEBUG 24016 --- [nio-8306-exec-5] .r.a.t.w.MyApplicationController         : Get Result for Id Id=7324325\r\n2023-12-01T08:12:24.736+01:00 DEBUG 24016 --- [nio-8306-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/third?id=7324325\r\n2023-12-01T08:12:24.871+01:00 DEBUG 24016 --- [nio-8306-exec-8] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user\r\n2023-12-01T08:12:24.872+01:00 DEBUG 24016 --- [nio-8306-exec-8] o.s.s.w.a.www.BasicAuthenticationFilter  : Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=username, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]\r\n2023-12-01T08:12:24.879+01:00 DEBUG 24016 --- [nio-8306-exec-8] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code\r\n```\r\n\r\nThe log &quot;Get Result for Id Id=7324325&quot; is when me calling the /api/second\r\n\r\nThe log Securing GET is now only for the third API.","link":"https://stackoverflow.com/questions/77537657/spring-security-unsecured-basic-authentication","title":"Spring Security: Unsecured Basic Authentication","body":"<p>I have a Spring Boot Application, and in the process of learning Spring Security.<br />\nSpring Boot 3.1.5, Java 17</p>\n<p>I have configured Spring Security and it works.</p>\n<p>There is a few issues I wonder why it is working the way it does.</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    private static final String[] ENDPOINTS = { &quot;/api/first/**&quot;, &quot;/api/second/**&quot; };\n\n    private static final String ROLE = &quot;USER&quot;;\n\n    private final String username;\n\n    private final String password;\n\n    public SecurityConfig(\n        @Value(&quot;${spring.security.user.name}&quot;) final String username,\n        @Value(&quot;${spring.security.user.password}&quot;) final String password\n    ) {\n        this.username = username;\n        this.password = password;\n    }\n\n    @Bean\n    public InMemoryUserDetailsManager userDetailsService(final PasswordEncoder passwordEncoder) {\n        final UserDetails anyUser = User.builder()\n            .username(username)\n            .password(passwordEncoder.encode(password))\n            .roles(ROLE)\n            .build();\n        return new InMemoryUserDetailsManager(anyUser);\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(final HttpSecurity http) throws Exception {\n        http.securityMatcher(ENDPOINTS)\n            .authorizeHttpRequests(createRequestMatchers())\n            .csrf(AbstractHttpConfigurer::disable)\n            .httpBasic(Customizer.withDefaults());\n        return http.build();\n    }\n\n    @NotNull\n    private Customizer&lt;AuthorizeHttpRequestsConfigurer&lt;HttpSecurity&gt;.AuthorizationManagerRequestMatcherRegistry&gt; createRequestMatchers() {\n        return (authz) -&gt;\n            authz.requestMatchers(ENDPOINTS).authenticated();\n    }\n}\n</code></pre>\n<p>When accessing the APIs I can see that it is authenticating the user when calling the API /api/second?id=7324325</p>\n<pre><code>2023-12-01T07:59:05.955+01:00  INFO 5548 --- [           main] t.r.a.t.MyApplication : Starting MyApplication using Java 21.0.1 with PID 5548 (C:\\Users\\djviking\\workspace-company\\java-my-application\\target\\classes started by djviking in C:\\Users\\djviking\\workspace-company\\java-my-application)\n2023-12-01T07:59:05.956+01:00 DEBUG 5548 --- [           main] t.r.a.t.MyApplication : Running with Spring Boot v3.1.5, Spring v6.0.13\n2023-12-01T07:59:05.956+01:00  INFO 5548 --- [           main] t.r.a.t.MyApplication : The following 1 profile is active: &quot;test&quot;\n2023-12-01T07:59:06.535+01:00  INFO 5548 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-12-01T07:59:06.669+01:00  INFO 5548 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 124 ms. Found 3 JPA repository interfaces.\n2023-12-01T07:59:06.966+01:00  INFO 5548 --- [           main] faultConfiguringBeanFactoryPostProcessor : No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.\n2023-12-01T07:59:06.974+01:00  INFO 5548 --- [           main] faultConfiguringBeanFactoryPostProcessor : No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.\n2023-12-01T07:59:07.429+01:00  INFO 5548 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8306 (http)\n2023-12-01T07:59:07.436+01:00  INFO 5548 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-12-01T07:59:07.437+01:00  INFO 5548 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]\n2023-12-01T07:59:07.519+01:00  INFO 5548 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-12-01T07:59:07.519+01:00  INFO 5548 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1525 ms\nStandard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts\n2023-12-01T07:59:07.715+01:00  INFO 5548 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-12-01T07:59:07.752+01:00  INFO 5548 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.13.Final\n2023-12-01T07:59:07.754+01:00  INFO 5548 --- [           main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\n2023-12-01T07:59:07.829+01:00  INFO 5548 --- [           main] o.h.e.boot.internal.EnversServiceImpl    : Envers integration enabled? : true\n2023-12-01T07:59:07.951+01:00  INFO 5548 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\n2023-12-01T07:59:07.968+01:00  INFO 5548 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-12-01T07:59:08.475+01:00  INFO 5548 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: f46ed47e-63af-407b-b0c8-cfee5a773ff8\n2023-12-01T07:59:08.476+01:00  INFO 5548 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-12-01T07:59:08.494+01:00  WARN 5548 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: SQLServer2012Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)\n2023-12-01T07:59:08.495+01:00  WARN 5548 --- [           main] org.hibernate.orm.deprecation            : HHH90000026: SQLServer2012Dialect has been deprecated; use org.hibernate.dialect.SQLServerDialect instead\n2023-12-01T07:59:09.377+01:00  INFO 5548 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)\n2023-12-01T07:59:10.208+01:00  INFO 5548 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2023-12-01T07:59:10.767+01:00  INFO 5548 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.\n2023-12-01T07:59:11.312+01:00  WARN 5548 --- [           main] i.l.graphql.generator.OperationMapper    : Potential type name collision detected: Int bound to multiple types: java.lang.Integer and int. Assign unique names using the appropriate annotations or override the TypeInfoGenerator. For details and solutions see https://github.com/leangen/graphql-spqr/wiki/Errors#non-unique-type-name\n2023-12-01T07:59:11.465+01:00  WARN 5548 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2023-12-01T07:59:11.871+01:00  INFO 5548 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure Or [Mvc [pattern='/api/first/**'], Mvc [pattern='/api/second/**']] with [org.springframework.security.web.session.DisableEncodeUrlFilter@67a84d80, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@21d297a, org.springframework.security.web.context.SecurityContextHolderFilter@7445fdb2, org.springframework.security.web.header.HeaderWriterFilter@56ed0511, org.springframework.security.web.authentication.logout.LogoutFilter@5db553f9, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@495590a7, com.company.raavare.avregning.tilleggtrekk.config.SecurityConfig$HeaderFilter@7879348, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@35069061, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5199d74e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6b869242, org.springframework.security.web.access.ExceptionTranslationFilter@2afee2ee, org.springframework.security.web.access.intercept.AuthorizationFilter@77ad33c]\n2023-12-01T07:59:12.224+01:00  INFO 5548 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel\n2023-12-01T07:59:12.224+01:00  INFO 5548 --- [           main] o.s.i.channel.PublishSubscribeChannel    : Channel 'my-application.errorChannel' has 1 subscriber(s).\n2023-12-01T07:59:12.225+01:00  INFO 5548 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : started bean '_org.springframework.integration.errorLogger'\n2023-12-01T07:59:12.248+01:00  INFO 5548 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8306 (http) with context path ''\n2023-12-01T07:59:12.301+01:00  INFO 5548 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8088 (http)\n2023-12-01T07:59:12.301+01:00  INFO 5548 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-12-01T07:59:12.302+01:00  INFO 5548 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.15]\n2023-12-01T07:59:12.327+01:00  INFO 5548 --- [           main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext\n2023-12-01T07:59:12.327+01:00  INFO 5548 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 75 ms\nStandard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts\n2023-12-01T07:59:12.339+01:00  INFO 5548 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'\n2023-12-01T07:59:12.370+01:00  INFO 5548 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8088 (http) with context path ''\n2023-12-01T07:59:12.377+01:00  INFO 5548 --- [           main] t.r.a.t.MyApplication : Started MyApplication in 6.738 seconds (process running for 7.222)\n2023-12-01T07:59:20.608+01:00  INFO 5548 --- [nio-8306-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2023-12-01T07:59:20.609+01:00  INFO 5548 --- [nio-8306-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-12-01T07:59:20.610+01:00  INFO 5548 --- [nio-8306-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n2023-12-01T07:59:20.623+01:00 DEBUG 5548 --- [nio-8306-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/second?id=7324325\n2023-12-01T07:59:20.757+01:00 DEBUG 5548 --- [nio-8306-exec-3] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user\n2023-12-01T07:59:20.760+01:00 DEBUG 5548 --- [nio-8306-exec-3] o.s.s.w.a.www.BasicAuthenticationFilter  : Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=username, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]\n2023-12-01T07:59:20.768+01:00 DEBUG 5548 --- [nio-8306-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/second?id=7324325\n2023-12-01T07:59:20.782+01:00 DEBUG 5548 --- [nio-8306-exec-3] .r.a.t.w.MyApplicationController : Get Result for Id Id=7324325\n</code></pre>\n<p>I have a third API &quot;/api/third&quot;, that is not configured in the SecurityConfig.</p>\n<p>When calling this /api/third, it does not log from Spring Security, as it did for the /api/second. Does that mean that the third API is unsecured?</p>\n<p>If I add Security configuration for the third API in SpringSecurity:</p>\n<pre><code>@Bean\n    public SecurityFilterChain filterChain(final HttpSecurity http) throws Exception {\n        http.securityMatcher(ENDPOINTS).authorizeHttpRequests(createRequestMatchers())   \n            .securityMatcher(&quot;/api/third/**&quot;).authorizeHttpRequests(authz -&gt; authz.requestMatchers(&quot;/api/third/**&quot;).hasRole(&quot;ADMIN&quot;))\n            .csrf(AbstractHttpConfigurer::disable)\n            .httpBasic(Customizer.withDefaults());\n        return http.build();\n    }\n</code></pre>\n<p>When I call the second API this time, it does not log Spring Security like it did before.</p>\n<p>Now when I call the third API, with the User (who is not Admin role), then it logs Security.</p>\n<pre><code>2023-12-01T08:11:42.857+01:00  INFO 24016 --- [           main] t.r.a.t.MyApplication                    : Started MyApplication in 6.072 seconds (process running for 6.54)\n2023-12-01T08:12:09.529+01:00  INFO 24016 --- [nio-8306-exec-5] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2023-12-01T08:12:09.530+01:00  INFO 24016 --- [nio-8306-exec-5] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-12-01T08:12:09.531+01:00  INFO 24016 --- [nio-8306-exec-5] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms\n2023-12-01T08:12:09.560+01:00 DEBUG 24016 --- [nio-8306-exec-5] .r.a.t.w.MyApplicationController         : Get Result for Id Id=7324325\n2023-12-01T08:12:24.736+01:00 DEBUG 24016 --- [nio-8306-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/third?id=7324325\n2023-12-01T08:12:24.871+01:00 DEBUG 24016 --- [nio-8306-exec-8] o.s.s.a.dao.DaoAuthenticationProvider    : Authenticated user\n2023-12-01T08:12:24.872+01:00 DEBUG 24016 --- [nio-8306-exec-8] o.s.s.w.a.www.BasicAuthenticationFilter  : Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=username, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_USER]]\n2023-12-01T08:12:24.879+01:00 DEBUG 24016 --- [nio-8306-exec-8] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code\n</code></pre>\n<p>The log &quot;Get Result for Id Id=7324325&quot; is when me calling the /api/second</p>\n<p>The log Securing GET is now only for the third API.</p>\n"},{"tags":["java","maven","netbeans","netbeans-platform","maven-dependency-plugin"],"comments":[{"score":3,"post_type":"question","creation_date":1684694370,"post_id":76300401,"comment_id":134550806,"body_markdown":"please try with the latest dependency plugin version `mvn dependency:3.5.0:analyze`","link":"https://stackoverflow.com/questions/76300401/unable-to-process-file-error-with-maven-dependency-analyzer#comment134550806_76300401","body":"please try with the latest dependency plugin version <code>mvn dependency:3.5.0:analyze</code>"},{"score":1,"post_type":"question","creation_date":1685221394,"post_id":76300401,"comment_id":134632340,"body_markdown":"Thank you that solved my issue, you can post the answer...","link":"https://stackoverflow.com/questions/76300401/unable-to-process-file-error-with-maven-dependency-analyzer#comment134632340_76300401","body":"Thank you that solved my issue, you can post the answer..."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701410935,"creation_date":1701410935,"answer_id":77583291,"question_id":76300401,"body_markdown":"Use the latest version of the dependency plugin.\r\nAdd this to the pluginManagement section of your pom:\r\n\r\n    &lt;pluginManagement&gt;\r\n      &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n          &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.5.0&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n      &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n","link":"https://stackoverflow.com/questions/76300401/unable-to-process-file-error-with-maven-dependency-analyzer/77583291#77583291","title":"Unable to process file error with maven-dependency-analyzer","body":"<p>Use the latest version of the dependency plugin.\nAdd this to the pluginManagement section of your pom:</p>\n<pre><code>&lt;pluginManagement&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n      &lt;version&gt;3.5.0&lt;/version&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/pluginManagement&gt;\n</code></pre>\n"}],"comment_count":2,"is_answered":false,"view_count":1793,"answer_count":1,"score":1,"last_activity_date":1701410935,"creation_date":1684679457,"question_id":76300401,"body_markdown":"`mvn dependency:analyze` on my project is unable to process files (see log below). I can&#39;t understand why, the compilation seems OK since I can run the application fine.\r\n\r\n\r\nThe parent pom.xml configures `maven.compiler.plugin.version=3.10.0` with `release=17`, and `-Xlint:all` as compiler arguments. \r\n\r\nRepo is available [here][1]. The log was used on project `modules/Phrase`, but all the modules have the same problem. Win10, cygwin, JDK17, and I&#39;m a beginner in Maven...\r\n\r\n    $ mvn dependency:analyze -Dmaven.plugin.validation=VERBOSE\r\n    [INFO] Scanning for projects...\r\n    [INFO]\r\n    [INFO] -------------------&lt; org.jjazzlab:org-jjazz-phrase &gt;--------------------\r\n    [INFO] Building Phrase 1.0-SNAPSHOT\r\n    [INFO]   from pom.xml\r\n    [INFO] --------------------------------[ nbm ]---------------------------------\r\n    [INFO]\r\n    [INFO] &gt;&gt;&gt; dependency:2.8:analyze (default-cli) &gt; test-compile @ org-jjazz-phrase &gt;&gt;&gt;\r\n    [INFO]\r\n    [INFO] --- resources:3.3.1:resources (default-resources) @ org-jjazz-phrase ---\r\n    [INFO] Copying 1 resource from src\\main\\resources to target\\classes\r\n    [INFO]\r\n    [INFO] --- compiler:3.10.0:compile (default-compile) @ org-jjazz-phrase ---\r\n    [INFO] Nothing to compile - all classes are up to date\r\n    [INFO]\r\n    [INFO] --- nbm:4.8:manifest (default-manifest) @ org-jjazz-phrase ---\r\n    [INFO] NBM Plugin generates manifest\r\n    [INFO]\r\n    [INFO] --- resources:3.3.1:testResources (default-testResources) @ org-jjazz-phrase ---\r\n    [INFO] skip non existing resourceDirectory D:\\JeromeDocs\\NetBeansProjects\\JJazzLab\\modules\\Phrase\\src\\test\\resources\r\n    [INFO]\r\n    [INFO] --- compiler:3.10.0:testCompile (default-testCompile) @ org-jjazz-phrase ---\r\n    [INFO] No sources to compile\r\n    [INFO]\r\n    [INFO] &lt;&lt;&lt; dependency:2.8:analyze (default-cli) &lt; test-compile @ org-jjazz-phrase &lt;&lt;&lt;\r\n    [INFO]\r\n    [INFO]\r\n    [INFO] --- dependency:2.8:analyze (default-cli) @ org-jjazz-phrase ---\r\n    Unable to process: org.jjazz.phrase.api.CyclicPositions\r\n    Unable to process: org.jjazz.phrase.api.Grid\r\n    Unable to process: org.jjazz.phrase.api.NoteEvent$AsNoteKey\r\n    Unable to process: org.jjazz.phrase.api.NoteEvent\r\n    Unable to process: org.jjazz.phrase.api.Phrase$6\r\n    Unable to process: org.jjazz.phrase.api.Phrase\r\n    Unable to process: org.jjazz.phrase.api.Phrases\r\n    Unable to process: org.jjazz.phrase.api.PhraseSamples\r\n    Unable to process: org.jjazz.phrase.api.SizedPhrase\r\n    Unable to process: org.jjazz.phrase.api.SourcePhrase\r\n    Unable to process: org.jjazz.phrase.api.SourcePhraseSet\r\n    [WARNING] Used undeclared dependencies found:\r\n    [WARNING]    com.google.guava:guava:jar:23.6-jre:compile\r\n    [WARNING] Unused declared dependencies found:\r\n    [WARNING]    org.jjazzlab:org-jjazz-guava:jar:1.0-SNAPSHOT:compile\r\n    [WARNING]    org.jjazzlab:org-jjazz-chordleadsheet:jar:1.0-SNAPSHOT:compile\r\n    [WARNING]    org.jjazzlab:org-jjazz-midi:jar:1.0-SNAPSHOT:compile\r\n    [WARNING]    org.netbeans.api:org-openide-dialogs:jar:RELEASE170:compile\r\n    [WARNING]    org.netbeans.api:org-openide-util:jar:RELEASE170:compile\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD SUCCESS\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  2.754 s\r\n    [INFO] Finished at: 2023-05-21T16:24:36+02:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [WARNING]\r\n    [WARNING] Plugin validation issues were detected in 4 plugin(s)\r\n    [WARNING]\r\n    [WARNING]  * org.apache.maven.plugins:maven-site-plugin:3.12.1\r\n    [WARNING]   Plugin issue(s):\r\n    [WARNING]    * Plugin depends on the deprecated Maven 2.x compatibility layer, which may not be supported in Maven 4.x\r\n    [WARNING]\r\n    [WARNING]  * org.apache.maven.plugins:maven-compiler-plugin:3.10.0\r\n    [WARNING]   Declared at location(s):\r\n    [WARNING]    * org.jjazzlab:jjazzlab-parent:1.0-SNAPSHOT (C:\\Users\\Jerome\\.m2\\repository\\org\\jjazzlab\\jjazzlab-parent\\1.0-SNAPSHOT\\jjazzlab-parent-1.0-SNAPSHOT.pom) @ line 35\r\n    [WARNING]   Used in module(s):\r\n    [WARNING]    * org.jjazzlab:org-jjazz-phrase:1.0-SNAPSHOT (pom.xml)\r\n    [WARNING]   Plugin issue(s):\r\n    [WARNING]    * Plugin should declare these Maven artifacts in `provided` scope: [org.apache.maven:maven-plugin-api:3.2.5, org.apache.maven:maven-model:3.2.5, org.apache.maven:maven-core:3.2.5, org.apache.maven:\r\n    maven-settings:3.2.5, org.apache.maven:maven-model-builder:3.2.5, org.apache.maven:maven-repository-metadata:3.2.5, org.apache.maven:maven-aether-provider:3.2.5, org.apache.maven:maven-settings-builder:3.2.5, o\r\n    rg.apache.maven:maven-artifact:3.2.5]\r\n    [WARNING]\r\n    [WARNING]  * org.apache.netbeans.utilities:nbm-maven-plugin:4.8\r\n    [WARNING]   Declared at location(s):\r\n    [WARNING]    * org.jjazzlab:org-jjazz-phrase:1.0-SNAPSHOT (pom.xml) @ line 16\r\n    [WARNING]   Used in module(s):\r\n    [WARNING]    * org.jjazzlab:org-jjazz-phrase:1.0-SNAPSHOT (pom.xml)\r\n    [WARNING]   Plugin issue(s):\r\n    [WARNING]    * Plugin depends on the deprecated Maven 2.x compatibility layer, which may not be supported in Maven 4.x\r\n    [WARNING]    * Plugin depends on plexus-container-default, which is EOL\r\n    [WARNING]   Mojo issue(s):\r\n    [WARNING]    * Mojo nbm:manifest (org.apache.netbeans.nbm.NetBeansManifestUpdateMojo)\r\n    [WARNING]      - Parameter &#39;localRepository&#39; uses deprecated parameter expression &#39;${localRepository}&#39;: ArtifactRepository type is deprecated and its use in Mojos should be avoided.\r\n    [WARNING]\r\n    [WARNING]  * org.apache.maven.plugins:maven-dependency-plugin:2.8\r\n    [WARNING]   Declared at location(s):\r\n    [WARNING]    * unknown\r\n    [WARNING]   Used in module(s):\r\n    [WARNING]    * org.jjazzlab:org-jjazz-phrase:1.0-SNAPSHOT (pom.xml)\r\n    [WARNING]   Plugin issue(s):\r\n    [WARNING]    * Plugin is a Maven 2.x plugin, which will be not supported in Maven 4.x\r\n    [WARNING]    * Plugin depends on plexus-container-default, which is EOL\r\n    [WARNING]   Mojo issue(s):\r\n    [WARNING]    * Mojo dependency:analyze (org.apache.maven.plugin.dependency.analyze.AnalyzeMojo)\r\n    [WARNING]      - Implements `Contextualizable` interface from Plexus Container, which is EOL.\r\n    [WARNING]\r\n    [WARNING]\r\n    [WARNING] Fix reported issues by adjusting plugin configuration or by upgrading above listed plugins. If no upgrade available, please notify plugin maintainers about reported issues.\r\n    [WARNING] For more or less details, use &#39;maven.plugin.validation&#39; property with one of the values (case insensitive): [BRIEF, DEFAULT, VERBOSE]\r\n    [WARNING]\r\n\r\n\r\n  [1]: https://github.com/jjazzboss/JJazzLabTemp","link":"https://stackoverflow.com/questions/76300401/unable-to-process-file-error-with-maven-dependency-analyzer","title":"Unable to process file error with maven-dependency-analyzer","body":"<p><code>mvn dependency:analyze</code> on my project is unable to process files (see log below). I can't understand why, the compilation seems OK since I can run the application fine.</p>\n<p>The parent pom.xml configures <code>maven.compiler.plugin.version=3.10.0</code> with <code>release=17</code>, and <code>-Xlint:all</code> as compiler arguments.</p>\n<p>Repo is available <a href=\"https://github.com/jjazzboss/JJazzLabTemp\" rel=\"nofollow noreferrer\">here</a>. The log was used on project <code>modules/Phrase</code>, but all the modules have the same problem. Win10, cygwin, JDK17, and I'm a beginner in Maven...</p>\n<pre><code>$ mvn dependency:analyze -Dmaven.plugin.validation=VERBOSE\n[INFO] Scanning for projects...\n[INFO]\n[INFO] -------------------&lt; org.jjazzlab:org-jjazz-phrase &gt;--------------------\n[INFO] Building Phrase 1.0-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ nbm ]---------------------------------\n[INFO]\n[INFO] &gt;&gt;&gt; dependency:2.8:analyze (default-cli) &gt; test-compile @ org-jjazz-phrase &gt;&gt;&gt;\n[INFO]\n[INFO] --- resources:3.3.1:resources (default-resources) @ org-jjazz-phrase ---\n[INFO] Copying 1 resource from src\\main\\resources to target\\classes\n[INFO]\n[INFO] --- compiler:3.10.0:compile (default-compile) @ org-jjazz-phrase ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO]\n[INFO] --- nbm:4.8:manifest (default-manifest) @ org-jjazz-phrase ---\n[INFO] NBM Plugin generates manifest\n[INFO]\n[INFO] --- resources:3.3.1:testResources (default-testResources) @ org-jjazz-phrase ---\n[INFO] skip non existing resourceDirectory D:\\JeromeDocs\\NetBeansProjects\\JJazzLab\\modules\\Phrase\\src\\test\\resources\n[INFO]\n[INFO] --- compiler:3.10.0:testCompile (default-testCompile) @ org-jjazz-phrase ---\n[INFO] No sources to compile\n[INFO]\n[INFO] &lt;&lt;&lt; dependency:2.8:analyze (default-cli) &lt; test-compile @ org-jjazz-phrase &lt;&lt;&lt;\n[INFO]\n[INFO]\n[INFO] --- dependency:2.8:analyze (default-cli) @ org-jjazz-phrase ---\nUnable to process: org.jjazz.phrase.api.CyclicPositions\nUnable to process: org.jjazz.phrase.api.Grid\nUnable to process: org.jjazz.phrase.api.NoteEvent$AsNoteKey\nUnable to process: org.jjazz.phrase.api.NoteEvent\nUnable to process: org.jjazz.phrase.api.Phrase$6\nUnable to process: org.jjazz.phrase.api.Phrase\nUnable to process: org.jjazz.phrase.api.Phrases\nUnable to process: org.jjazz.phrase.api.PhraseSamples\nUnable to process: org.jjazz.phrase.api.SizedPhrase\nUnable to process: org.jjazz.phrase.api.SourcePhrase\nUnable to process: org.jjazz.phrase.api.SourcePhraseSet\n[WARNING] Used undeclared dependencies found:\n[WARNING]    com.google.guava:guava:jar:23.6-jre:compile\n[WARNING] Unused declared dependencies found:\n[WARNING]    org.jjazzlab:org-jjazz-guava:jar:1.0-SNAPSHOT:compile\n[WARNING]    org.jjazzlab:org-jjazz-chordleadsheet:jar:1.0-SNAPSHOT:compile\n[WARNING]    org.jjazzlab:org-jjazz-midi:jar:1.0-SNAPSHOT:compile\n[WARNING]    org.netbeans.api:org-openide-dialogs:jar:RELEASE170:compile\n[WARNING]    org.netbeans.api:org-openide-util:jar:RELEASE170:compile\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  2.754 s\n[INFO] Finished at: 2023-05-21T16:24:36+02:00\n[INFO] ------------------------------------------------------------------------\n[WARNING]\n[WARNING] Plugin validation issues were detected in 4 plugin(s)\n[WARNING]\n[WARNING]  * org.apache.maven.plugins:maven-site-plugin:3.12.1\n[WARNING]   Plugin issue(s):\n[WARNING]    * Plugin depends on the deprecated Maven 2.x compatibility layer, which may not be supported in Maven 4.x\n[WARNING]\n[WARNING]  * org.apache.maven.plugins:maven-compiler-plugin:3.10.0\n[WARNING]   Declared at location(s):\n[WARNING]    * org.jjazzlab:jjazzlab-parent:1.0-SNAPSHOT (C:\\Users\\Jerome\\.m2\\repository\\org\\jjazzlab\\jjazzlab-parent\\1.0-SNAPSHOT\\jjazzlab-parent-1.0-SNAPSHOT.pom) @ line 35\n[WARNING]   Used in module(s):\n[WARNING]    * org.jjazzlab:org-jjazz-phrase:1.0-SNAPSHOT (pom.xml)\n[WARNING]   Plugin issue(s):\n[WARNING]    * Plugin should declare these Maven artifacts in `provided` scope: [org.apache.maven:maven-plugin-api:3.2.5, org.apache.maven:maven-model:3.2.5, org.apache.maven:maven-core:3.2.5, org.apache.maven:\nmaven-settings:3.2.5, org.apache.maven:maven-model-builder:3.2.5, org.apache.maven:maven-repository-metadata:3.2.5, org.apache.maven:maven-aether-provider:3.2.5, org.apache.maven:maven-settings-builder:3.2.5, o\nrg.apache.maven:maven-artifact:3.2.5]\n[WARNING]\n[WARNING]  * org.apache.netbeans.utilities:nbm-maven-plugin:4.8\n[WARNING]   Declared at location(s):\n[WARNING]    * org.jjazzlab:org-jjazz-phrase:1.0-SNAPSHOT (pom.xml) @ line 16\n[WARNING]   Used in module(s):\n[WARNING]    * org.jjazzlab:org-jjazz-phrase:1.0-SNAPSHOT (pom.xml)\n[WARNING]   Plugin issue(s):\n[WARNING]    * Plugin depends on the deprecated Maven 2.x compatibility layer, which may not be supported in Maven 4.x\n[WARNING]    * Plugin depends on plexus-container-default, which is EOL\n[WARNING]   Mojo issue(s):\n[WARNING]    * Mojo nbm:manifest (org.apache.netbeans.nbm.NetBeansManifestUpdateMojo)\n[WARNING]      - Parameter 'localRepository' uses deprecated parameter expression '${localRepository}': ArtifactRepository type is deprecated and its use in Mojos should be avoided.\n[WARNING]\n[WARNING]  * org.apache.maven.plugins:maven-dependency-plugin:2.8\n[WARNING]   Declared at location(s):\n[WARNING]    * unknown\n[WARNING]   Used in module(s):\n[WARNING]    * org.jjazzlab:org-jjazz-phrase:1.0-SNAPSHOT (pom.xml)\n[WARNING]   Plugin issue(s):\n[WARNING]    * Plugin is a Maven 2.x plugin, which will be not supported in Maven 4.x\n[WARNING]    * Plugin depends on plexus-container-default, which is EOL\n[WARNING]   Mojo issue(s):\n[WARNING]    * Mojo dependency:analyze (org.apache.maven.plugin.dependency.analyze.AnalyzeMojo)\n[WARNING]      - Implements `Contextualizable` interface from Plexus Container, which is EOL.\n[WARNING]\n[WARNING]\n[WARNING] Fix reported issues by adjusting plugin configuration or by upgrading above listed plugins. If no upgrade available, please notify plugin maintainers about reported issues.\n[WARNING] For more or less details, use 'maven.plugin.validation' property with one of the values (case insensitive): [BRIEF, DEFAULT, VERBOSE]\n[WARNING]\n</code></pre>\n"},{"tags":["java","guidewire"],"comments":[{"score":0,"post_type":"question","creation_date":1701284777,"post_id":77557763,"comment_id":136757962,"body_markdown":"Can you say more about what you want to do with the class?  Maybe there is something else you could do besides a private constructor.","link":"https://stackoverflow.com/questions/77557763/create-instance-of-class-with-internal-private-constructor-in-gosu-language#comment136757962_77557763","body":"Can you say more about what you want to do with the class?  Maybe there is something else you could do besides a private constructor."},{"score":0,"post_type":"question","creation_date":1701411808,"post_id":77557763,"comment_id":136774767,"body_markdown":"@grambo25 Its actually good question, i whant to get mock S3 impl and reals S3 impl and write test to compare each other, to ensure they work identically.  Seems like i can manualy instantinate them using Configuration (app properties), instead of using static fabric (which all production code uses to obtain s3 impl depending on app env). But the question is still unanswered - is there a way to do so via reflection?","link":"https://stackoverflow.com/questions/77557763/create-instance-of-class-with-internal-private-constructor-in-gosu-language#comment136774767_77557763","body":"@grambo25 Its actually good question, i whant to get mock S3 impl and reals S3 impl and write test to compare each other, to ensure they work identically.  Seems like i can manualy instantinate them using Configuration (app properties), instead of using static fabric (which all production code uses to obtain s3 impl depending on app env). But the question is still unanswered - is there a way to do so via reflection?"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701103904,"creation_date":1701103904,"answer_id":77558620,"question_id":77557763,"body_markdown":"There is another way how to create instance:\r\n\r\n    var typeInfo = InternalBucketS3Service.TypeInfo\r\n    var ctor = typeInfo.Constructors.first().Constructor\r\n    return ctor.newInstance({_testClaim}) as S3Service\r\n\r\nBut seems like it works only for `private` constructors. In this case i cant use it, need `internal`.\r\n\r\nAm just gonna make constructor `public` and add `@Deprecated` to it to mark &quot;for tests only&quot;.\r\nPlease comment if it is actually possible to create `internal` object in Gosu via reflection.","link":"https://stackoverflow.com/questions/77557763/create-instance-of-class-with-internal-private-constructor-in-gosu-language/77558620#77558620","title":"Create instance of class with internal / private constructor in GOSU language","body":"<p>There is another way how to create instance:</p>\n<pre><code>var typeInfo = InternalBucketS3Service.TypeInfo\nvar ctor = typeInfo.Constructors.first().Constructor\nreturn ctor.newInstance({_testClaim}) as S3Service\n</code></pre>\n<p>But seems like it works only for <code>private</code> constructors. In this case i cant use it, need <code>internal</code>.</p>\n<p>Am just gonna make constructor <code>public</code> and add <code>@Deprecated</code> to it to mark &quot;for tests only&quot;.\nPlease comment if it is actually possible to create <code>internal</code> object in Gosu via reflection.</p>\n"}],"comment_count":2,"is_answered":false,"view_count":64,"answer_count":1,"score":1,"last_activity_date":1701410887,"creation_date":1701096297,"last_edit_date":1701410887,"question_id":77557763,"body_markdown":"I whant to create an instance of class with only one `internal` constructor for unit-tests purpose. Am running Guidewire version 10.\r\nGetting error on string with `.newInstance` call: \r\n```\r\n    var s3ServiceCtor = InternalBucketS3Service.getClass().getDeclaredConstructors().first()\r\n    s3ServiceCtor.setAccessible(true)\r\n    var newInstanceResult = s3ServiceCtor.newInstance({_testClaim}.toArray())\r\n    return newInstanceResult as S3Service\r\n```\r\n\r\nHere is a class i whant to create:\r\n```\r\nclass InternalBucketS3Service extends AbstractS3Service {\r\n\r\n  private var _claim : Claim\r\n\r\n  internal construct(claim : Claim) {\r\n    super(Configuration.S3InternalBucket)\r\n    _claim = claim\r\n  }\r\n  // no more constructors, only methods ...\r\n```\r\n\r\nAnd am getting this error:\r\n```\r\njunit.framework.AssertionFailedError: Exception in constructor: testGeneralS3ServicesCompare (java.lang.IllegalArgumentException\r\n\tat jdk.internal.reflect.GeneratedConstructorAccessor141.newInstance(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n\tat ru.tinkoff.util.s3.S3TestServiceImplComparisonTest.getRealS3(S3TestServiceImplComparisonTest.gs:59)\r\n\tat ru.tinkoff.util.s3.S3TestServiceImplComparisonTest.&lt;init&gt;(S3TestServiceImplComparisonTest.gs:25)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n```\r\n\r\nHow to fix it?","link":"https://stackoverflow.com/questions/77557763/create-instance-of-class-with-internal-private-constructor-in-gosu-language","title":"Create instance of class with internal / private constructor in GOSU language","body":"<p>I whant to create an instance of class with only one <code>internal</code> constructor for unit-tests purpose. Am running Guidewire version 10.\nGetting error on string with <code>.newInstance</code> call:</p>\n<pre><code>    var s3ServiceCtor = InternalBucketS3Service.getClass().getDeclaredConstructors().first()\n    s3ServiceCtor.setAccessible(true)\n    var newInstanceResult = s3ServiceCtor.newInstance({_testClaim}.toArray())\n    return newInstanceResult as S3Service\n</code></pre>\n<p>Here is a class i whant to create:</p>\n<pre><code>class InternalBucketS3Service extends AbstractS3Service {\n\n  private var _claim : Claim\n\n  internal construct(claim : Claim) {\n    super(Configuration.S3InternalBucket)\n    _claim = claim\n  }\n  // no more constructors, only methods ...\n</code></pre>\n<p>And am getting this error:</p>\n<pre><code>junit.framework.AssertionFailedError: Exception in constructor: testGeneralS3ServicesCompare (java.lang.IllegalArgumentException\n    at jdk.internal.reflect.GeneratedConstructorAccessor141.newInstance(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\n    at ru.tinkoff.util.s3.S3TestServiceImplComparisonTest.getRealS3(S3TestServiceImplComparisonTest.gs:59)\n    at ru.tinkoff.util.s3.S3TestServiceImplComparisonTest.&lt;init&gt;(S3TestServiceImplComparisonTest.gs:25)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\n</code></pre>\n<p>How to fix it?</p>\n"},{"tags":["java","hibernate","javafx","h2"],"answers":[{"comment_count":0,"score":2,"last_activity_date":1701410095,"creation_date":1701410095,"answer_id":77583246,"question_id":77577095,"body_markdown":"So the problem was with 2 things:\r\n\r\n 1. It should `import jakarta.persistence.Entity` not `import javax.persistence.Entity;`\r\n2. Turns out you can&#39;t connect to H2 file normally trough IntelliJ idea. So I have to download h2 gui, launch it and only after that I was able to see the content of the database. Also I needed to run h2 with `AUTO_SERVER=TRUE`.","link":"https://stackoverflow.com/questions/77577095/hibernate-and-h2-n-javafx-app-not-creating-tables/77583246#77583246","title":"Hibernate and H2 n JavaFX app, not creating tables","body":"<p>So the problem was with 2 things:</p>\n<ol>\n<li>It should <code>import jakarta.persistence.Entity</code> not <code>import javax.persistence.Entity;</code></li>\n<li>Turns out you can't connect to H2 file normally trough IntelliJ idea. So I have to download h2 gui, launch it and only after that I was able to see the content of the database. Also I needed to run h2 with <code>AUTO_SERVER=TRUE</code>.</li>\n</ol>\n"}],"comment_count":0,"is_answered":true,"view_count":80,"answer_count":1,"score":1,"last_activity_date":1701410095,"creation_date":1701334720,"last_edit_date":1701338083,"question_id":77577095,"body_markdown":"I want to include a database to my JavaFX app. I chose h2 and configured hibernate to use with it. \r\nThe problem is that it doesnt&#39; create tables from entities like it&#39;s supposed to. What I did, I have these dependecies:\r\n```\r\n&lt;dependency&gt;\r\n      &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n      &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n      &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n      &lt;version&gt;2.1.214&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n      &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n      &lt;version&gt;6.2.7.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n```\r\nI have this `hibernate.cfg.xml` configuration file stored in the `resources` folder:\r\n```\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n  &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n  &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n\r\n&lt;hibernate-configuration&gt;\r\n  &lt;session-factory&gt;\r\n    &lt;property name=&quot;connection.driver_class&quot;&gt;org.h2.Driver&lt;/property&gt;\r\n    &lt;property name=&quot;connection.url&quot;&gt;jdbc:h2:file:./database\r\n    &lt;/property&gt;\r\n    &lt;property name=&quot;connection.username&quot;&gt;...&lt;/property&gt;\r\n    &lt;property name=&quot;connection.password&quot;&gt;...&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.H2Dialect&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\r\n    &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt; // setting to create also didn&#39;t help\r\n    &lt;mapping class=&quot;my.package.model.TestEntity&quot;/&gt;\r\n  &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n`TestEntity` is annotated with needed annotations like `@Entity`:\r\n```\r\nimport javax.persistence.Column;\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.Id;\r\nimport javax.persistence.Table;\r\n\r\n@Entity\r\n@Table(name = &quot;test_entity&quot;)\r\npublic class TestEntity {\r\n\r\n  @Column(name = &quot;test&quot;)\r\n  @Id\r\n  private String test;\r\n\r\n}\r\n```\r\nBut it&#39;s not working, the database is getting created, but there is no `TestEntity` table. What could be the problem?","link":"https://stackoverflow.com/questions/77577095/hibernate-and-h2-n-javafx-app-not-creating-tables","title":"Hibernate and H2 n JavaFX app, not creating tables","body":"<p>I want to include a database to my JavaFX app. I chose h2 and configured hibernate to use with it.\nThe problem is that it doesnt' create tables from entities like it's supposed to. What I did, I have these dependecies:</p>\n<pre><code>&lt;dependency&gt;\n      &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n      &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n      &lt;version&gt;2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n      &lt;artifactId&gt;h2&lt;/artifactId&gt;\n      &lt;version&gt;2.1.214&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n      &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n      &lt;version&gt;6.2.7.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>I have this <code>hibernate.cfg.xml</code> configuration file stored in the <code>resources</code> folder:</p>\n<pre><code>&lt;!DOCTYPE hibernate-configuration PUBLIC\n  &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n  &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n\n&lt;hibernate-configuration&gt;\n  &lt;session-factory&gt;\n    &lt;property name=&quot;connection.driver_class&quot;&gt;org.h2.Driver&lt;/property&gt;\n    &lt;property name=&quot;connection.url&quot;&gt;jdbc:h2:file:./database\n    &lt;/property&gt;\n    &lt;property name=&quot;connection.username&quot;&gt;...&lt;/property&gt;\n    &lt;property name=&quot;connection.password&quot;&gt;...&lt;/property&gt;\n    &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.H2Dialect&lt;/property&gt;\n    &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\n    &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt; // setting to create also didn't help\n    &lt;mapping class=&quot;my.package.model.TestEntity&quot;/&gt;\n  &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p><code>TestEntity</code> is annotated with needed annotations like <code>@Entity</code>:</p>\n<pre><code>import javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = &quot;test_entity&quot;)\npublic class TestEntity {\n\n  @Column(name = &quot;test&quot;)\n  @Id\n  private String test;\n\n}\n</code></pre>\n<p>But it's not working, the database is getting created, but there is no <code>TestEntity</code> table. What could be the problem?</p>\n"},{"tags":["java","security","xsd","jaxb","unmarshalling"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701408850,"post_id":77572563,"comment_id":136774542,"body_markdown":"Great! I&#39;ve added more information to the question. I&#39;m basically trying to find out if JAXB, in its default configuration, is open to XML External Entity attacks. Thanks!","link":"https://stackoverflow.com/questions/77570462/demonstrate-that-jaxb-unmarshalling-will-not-load-an-xsd-schema/77572563#comment136774542_77572563","body":"Great! I&#39;ve added more information to the question. I&#39;m basically trying to find out if JAXB, in its default configuration, is open to XML External Entity attacks. Thanks!"},{"score":1,"post_type":"answer","creation_date":1701417266,"post_id":77572563,"comment_id":136775404,"body_markdown":"From what I know, there&#39;s no default validation of XML Input according to XSD since the schema is null in default configuration and there&#39;s no magic autoconfig behind-the-scene. After, the Java parser can fail or be lax about XML input : it can fail on unknown field received or unknown enum values, or just ignore them / assign null. From what I read about XML External Entity attacks, you can prevent them by removing DTD support and add the schema as validator.","link":"https://stackoverflow.com/questions/77570462/demonstrate-that-jaxb-unmarshalling-will-not-load-an-xsd-schema/77572563#comment136775404_77572563","body":"From what I know, there&#39;s no default validation of XML Input according to XSD since the schema is null in default configuration and there&#39;s no magic autoconfig behind-the-scene. After, the Java parser can fail or be lax about XML input : it can fail on unknown field received or unknown enum values, or just ignore them / assign null. From what I read about XML External Entity attacks, you can prevent them by removing DTD support and add the schema as validator."}],"comment_count":2,"score":1,"last_activity_date":1701272257,"creation_date":1701272257,"answer_id":77572563,"question_id":77570462,"body_markdown":"I don&#39;t truly understand the need to check this but here&#39;s a simple use-case that should give the proof that the XSD file won&#39;t be loaded by the JVM when unmarshalling XML :\r\n\r\n - Create the Java Classes from XSD by any plugin you want, or like here, create it manually. Package it in jar file without the XSD in it (only Java classes)\r\n - Write the unmarshalling code from XML in another Java program, that depends on the first JAR and run it with no XSD whatsoever in your classpath ==&gt; Your code will still work without knowing the XSD Schema\r\n\r\nYou can also look at the Java Code itself :\r\n - `com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl` which implements the `Unmarshaller` interface has default `schema` property to `null` (so setting it to `null` is a no-op in your above code)\r\n - Your code doesn&#39;t reference XSD itself from which you created the Java XML-annotated-POJO : the JVM cannot guess that you write your code based on external schema.\r\n - You could also run your program in debug mode and see that the XSD won&#39;t be loaded (again there&#39;s no reference in your Java Code : you could even have deleted it, it wouldn&#39;t have made a difference).\r\n\r\nStill, I Hope that I&#39;ve answered to your question.","link":"https://stackoverflow.com/questions/77570462/demonstrate-that-jaxb-unmarshalling-will-not-load-an-xsd-schema/77572563#77572563","title":"Demonstrate that JAXB unmarshalling will not load an XSD schema","body":"<p>I don't truly understand the need to check this but here's a simple use-case that should give the proof that the XSD file won't be loaded by the JVM when unmarshalling XML :</p>\n<ul>\n<li>Create the Java Classes from XSD by any plugin you want, or like here, create it manually. Package it in jar file without the XSD in it (only Java classes)</li>\n<li>Write the unmarshalling code from XML in another Java program, that depends on the first JAR and run it with no XSD whatsoever in your classpath ==&gt; Your code will still work without knowing the XSD Schema</li>\n</ul>\n<p>You can also look at the Java Code itself :</p>\n<ul>\n<li><code>com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl</code> which implements the <code>Unmarshaller</code> interface has default <code>schema</code> property to <code>null</code> (so setting it to <code>null</code> is a no-op in your above code)</li>\n<li>Your code doesn't reference XSD itself from which you created the Java XML-annotated-POJO : the JVM cannot guess that you write your code based on external schema.</li>\n<li>You could also run your program in debug mode and see that the XSD won't be loaded (again there's no reference in your Java Code : you could even have deleted it, it wouldn't have made a difference).</li>\n</ul>\n<p>Still, I Hope that I've answered to your question.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":51,"answer_count":1,"score":0,"last_activity_date":1701408755,"creation_date":1701254752,"last_edit_date":1701408755,"question_id":77570462,"body_markdown":"Related to [this question](https://stackoverflow.com/questions/24760796/how-to-validate-an-xml-against-schema-using-jaxb), given the following schema called `customer.xsd`:\r\n\r\n```xml\r\n&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\r\n    &lt;xs:simpleType name=&quot;stringMaxSize5&quot;&gt;\r\n        &lt;xs:restriction base=&quot;xs:string&quot;&gt;\r\n            &lt;xs:maxLength value=&quot;5&quot;/&gt;\r\n        &lt;/xs:restriction&gt;\r\n    &lt;/xs:simpleType&gt;\r\n    &lt;xs:element name=&quot;customer&quot;&gt;\r\n        &lt;xs:complexType&gt;\r\n            &lt;xs:sequence&gt;\r\n                &lt;xs:element name=&quot;name&quot; type=&quot;stringMaxSize5&quot;/&gt;\r\n                &lt;xs:element ref=&quot;phone-number&quot; maxOccurs=&quot;2&quot;/&gt;\r\n             &lt;/xs:sequence&gt;\r\n        &lt;/xs:complexType&gt;\r\n    &lt;/xs:element&gt;\r\n    &lt;xs:element name=&quot;phone-number&quot;&gt;\r\n        &lt;xs:complexType&gt;\r\n            &lt;xs:sequence/&gt;\r\n        &lt;/xs:complexType&gt;\r\n    &lt;/xs:element&gt;\r\n&lt;/xs:schema&gt;\r\n```\r\n\r\nThe following XML document called `input.xml`:\r\n\r\n```xml\r\n&lt;customer\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:noNamespaceSchemaLocation=&quot;./customer.xsd&quot;&gt;\r\n    &lt;name&gt;Jane Doe&lt;/name&gt;\r\n    &lt;phone-number/&gt;\r\n    &lt;phone-number/&gt;\r\n    &lt;phone-number/&gt;\r\n&lt;/customer&gt;\r\n```\r\n\r\nAnd the following unmarshalling code:\r\n\r\n```java\r\nimport java.io.File;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport javax.xml.bind.JAXBContext;\r\nimport javax.xml.bind.Unmarshaller;\r\nimport javax.xml.bind.annotation.XmlRootElement;\r\n\r\npublic class Unmarshal {\r\n\r\n    @XmlRootElement(name = &quot;customer&quot;)\r\n    public static class Customer {\r\n        public String name;\r\n        @XmlElement(name=&quot;phone-number&quot;)\r\n        public List&lt;PhoneNumber&gt; phoneNumbers = new ArrayList&lt;PhoneNumber&gt;();\r\n    }\r\n\r\n    public static class PhoneNumber {}\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        JAXBContext jc = JAXBContext.newInstance(Customer.class);\r\n        Unmarshaller unmarshaller = jc.createUnmarshaller();\r\n        unmarshaller.setSchema(null);\r\n        Customer customer = (Customer) unmarshaller.unmarshal(new File(&quot;input.xml&quot;));\r\n        System.out.println(customer.name);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe Java code is able to deserialize the XML input document into an instance of `Customer` even when this XML document produces 2 validation errors (indicated by an external editor):\r\n\r\n```\r\ncvc-maxLength-valid: Value &#39;Jane Doe&#39; with length = &#39;8&#39; is not facet-valid with respect to maxLength &#39;5&#39; for type &#39;stringMaxSize5&#39;.xml(cvc-maxLength-valid)\r\ncvc-type.3.1.3: The value &#39;Jane Doe&#39; of element &#39;name&#39; is not valid.xml(cvc-type.3.1.3)\r\n```\r\n\r\nand\r\n\r\n```\r\ncvc-complex-type.2.4.f: &#39;phone-number&#39; can occur a maximum of &#39;2&#39; times in the current sequence. This limit was exceeded. No child element is expected at this point.xml(cvc-complex-type.2.4.f)\r\n```\r\n\r\nThis means that JAXB did not validate the given XML input during unmarshalling, however:\r\n\r\nGiven that `unmarshaller.setSchema(null);` was set to DISABLE schema validation, is there a way to demonstrate that the content of the `customer.xsd` file WAS NOT accessed by the JVM when unmarshalling occurred?\r\n\r\nIn other words, is there a way to not blindly trust that the JVM won&#39;t load XSD references, even when schema validation is explicitly set to `null`?\r\n\r\n## Update 1:\r\n\r\nThe purpose is to find out how likely are XSD schema references inside an XML document likely to become a security attack vector, as described by:\r\n\r\n- https://owasp.org/www-community/vulnerabilities/XML_External_Entity_(XXE)_Processing\r\n-  https://cheatsheetseries.owasp.org/cheatsheets/XML_External_Entity_Prevention_Cheat_Sheet.html\r\n\r\nThanks.","link":"https://stackoverflow.com/questions/77570462/demonstrate-that-jaxb-unmarshalling-will-not-load-an-xsd-schema","title":"Demonstrate that JAXB unmarshalling will not load an XSD schema","body":"<p>Related to <a href=\"https://stackoverflow.com/questions/24760796/how-to-validate-an-xml-against-schema-using-jaxb\">this question</a>, given the following schema called <code>customer.xsd</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\n    &lt;xs:simpleType name=&quot;stringMaxSize5&quot;&gt;\n        &lt;xs:restriction base=&quot;xs:string&quot;&gt;\n            &lt;xs:maxLength value=&quot;5&quot;/&gt;\n        &lt;/xs:restriction&gt;\n    &lt;/xs:simpleType&gt;\n    &lt;xs:element name=&quot;customer&quot;&gt;\n        &lt;xs:complexType&gt;\n            &lt;xs:sequence&gt;\n                &lt;xs:element name=&quot;name&quot; type=&quot;stringMaxSize5&quot;/&gt;\n                &lt;xs:element ref=&quot;phone-number&quot; maxOccurs=&quot;2&quot;/&gt;\n             &lt;/xs:sequence&gt;\n        &lt;/xs:complexType&gt;\n    &lt;/xs:element&gt;\n    &lt;xs:element name=&quot;phone-number&quot;&gt;\n        &lt;xs:complexType&gt;\n            &lt;xs:sequence/&gt;\n        &lt;/xs:complexType&gt;\n    &lt;/xs:element&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n<p>The following XML document called <code>input.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;customer\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:noNamespaceSchemaLocation=&quot;./customer.xsd&quot;&gt;\n    &lt;name&gt;Jane Doe&lt;/name&gt;\n    &lt;phone-number/&gt;\n    &lt;phone-number/&gt;\n    &lt;phone-number/&gt;\n&lt;/customer&gt;\n</code></pre>\n<p>And the following unmarshalling code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.File;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.xml.bind.JAXBContext;\nimport javax.xml.bind.Unmarshaller;\nimport javax.xml.bind.annotation.XmlRootElement;\n\npublic class Unmarshal {\n\n    @XmlRootElement(name = &quot;customer&quot;)\n    public static class Customer {\n        public String name;\n        @XmlElement(name=&quot;phone-number&quot;)\n        public List&lt;PhoneNumber&gt; phoneNumbers = new ArrayList&lt;PhoneNumber&gt;();\n    }\n\n    public static class PhoneNumber {}\n\n    public static void main(String[] args) throws Exception {\n        JAXBContext jc = JAXBContext.newInstance(Customer.class);\n        Unmarshaller unmarshaller = jc.createUnmarshaller();\n        unmarshaller.setSchema(null);\n        Customer customer = (Customer) unmarshaller.unmarshal(new File(&quot;input.xml&quot;));\n        System.out.println(customer.name);\n    }\n\n}\n</code></pre>\n<p>The Java code is able to deserialize the XML input document into an instance of <code>Customer</code> even when this XML document produces 2 validation errors (indicated by an external editor):</p>\n<pre><code>cvc-maxLength-valid: Value 'Jane Doe' with length = '8' is not facet-valid with respect to maxLength '5' for type 'stringMaxSize5'.xml(cvc-maxLength-valid)\ncvc-type.3.1.3: The value 'Jane Doe' of element 'name' is not valid.xml(cvc-type.3.1.3)\n</code></pre>\n<p>and</p>\n<pre><code>cvc-complex-type.2.4.f: 'phone-number' can occur a maximum of '2' times in the current sequence. This limit was exceeded. No child element is expected at this point.xml(cvc-complex-type.2.4.f)\n</code></pre>\n<p>This means that JAXB did not validate the given XML input during unmarshalling, however:</p>\n<p>Given that <code>unmarshaller.setSchema(null);</code> was set to DISABLE schema validation, is there a way to demonstrate that the content of the <code>customer.xsd</code> file WAS NOT accessed by the JVM when unmarshalling occurred?</p>\n<p>In other words, is there a way to not blindly trust that the JVM won't load XSD references, even when schema validation is explicitly set to <code>null</code>?</p>\n<h2>Update 1:</h2>\n<p>The purpose is to find out how likely are XSD schema references inside an XML document likely to become a security attack vector, as described by:</p>\n<ul>\n<li><a href=\"https://owasp.org/www-community/vulnerabilities/XML_External_Entity_(XXE)_Processing\" rel=\"nofollow noreferrer\">https://owasp.org/www-community/vulnerabilities/XML_External_Entity_(XXE)_Processing</a></li>\n<li><a href=\"https://cheatsheetseries.owasp.org/cheatsheets/XML_External_Entity_Prevention_Cheat_Sheet.html\" rel=\"nofollow noreferrer\">https://cheatsheetseries.owasp.org/cheatsheets/XML_External_Entity_Prevention_Cheat_Sheet.html</a></li>\n</ul>\n<p>Thanks.</p>\n"},{"tags":["java","scala","apache-spark"],"comments":[{"score":0,"post_type":"question","creation_date":1681828376,"post_id":76045255,"comment_id":134117617,"body_markdown":"Your code is not self-contained. What are the imports around `toDatasetComptesIndividuels`? What are `rs`, `mr`, `alimenterCompteIndividuels`? Please try to minimize your reproduction. [How to create a Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example). In 3.4.0 pattern matching falls to the default case. What codec (what case) was selected in 3.3.2? The codec for Java bean?","link":"https://stackoverflow.com/questions/76045255/encoders-bean-attempts-to-check-the-validity-of-a-return-type-considering-its-ge#comment134117617_76045255","body":"Your code is not self-contained. What are the imports around <code>toDatasetComptesIndividuels</code>? What are <code>rs</code>, <code>mr</code>, <code>alimenterCompteIndividuels</code>? Please try to minimize your reproduction. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">How to create a Minimal, Reproducible Example</a>. In 3.4.0 pattern matching falls to the default case. What codec (what case) was selected in 3.3.2? The codec for Java bean?"},{"score":0,"post_type":"question","creation_date":1681828675,"post_id":76045255,"comment_id":134117707,"body_markdown":"What is the difference with https://stackoverflow.com/questions/76036349/encoders-bean-doesnt-work-anymore-on-a-java-pojo-with-spark-3-4-0 ?","link":"https://stackoverflow.com/questions/76045255/encoders-bean-attempts-to-check-the-validity-of-a-return-type-considering-its-ge#comment134117707_76045255","body":"What is the difference with <a href=\"https://stackoverflow.com/questions/76036349/encoders-bean-doesnt-work-anymore-on-a-java-pojo-with-spark-3-4-0\" title=\"encoders bean doesnt work anymore on a java pojo with spark 3 4 0\">stackoverflow.com/questions/76036349/&hellip;</a> ?"},{"score":0,"post_type":"question","creation_date":1681828874,"post_id":76045255,"comment_id":134117767,"body_markdown":"@DmytroMitin this one affects the encoding, the other one the decoding. The two links do not describe the same error (not the same message, not the same behavior). A minimal example cannot be created in some contexts like such a complex Spark application, your remarks cannot apply here. Debug session description is provided instead.","link":"https://stackoverflow.com/questions/76045255/encoders-bean-attempts-to-check-the-validity-of-a-return-type-considering-its-ge#comment134117767_76045255","body":"@DmytroMitin this one affects the encoding, the other one the decoding. The two links do not describe the same error (not the same message, not the same behavior). A minimal example cannot be created in some contexts like such a complex Spark application, your remarks cannot apply here. Debug session description is provided instead."},{"score":0,"post_type":"question","creation_date":1681829464,"post_id":76045255,"comment_id":134117967,"body_markdown":"The screenshot from debugger is not so useful without similar screenshot from 3.3.2 where everything was working. You could focus on differences.","link":"https://stackoverflow.com/questions/76045255/encoders-bean-attempts-to-check-the-validity-of-a-return-type-considering-its-ge#comment134117967_76045255","body":"The screenshot from debugger is not so useful without similar screenshot from 3.3.2 where everything was working. You could focus on differences."},{"score":1,"post_type":"question","creation_date":1681839922,"post_id":76045255,"comment_id":134120598,"body_markdown":"@DmytroMitin I replied to your question in my question (added a section about it). Spark `3.3.2` and `3.4.0` have a largely different code for `Encoders.bean`, and they are now difficult to compare. Understanding their changes would be difficult.","link":"https://stackoverflow.com/questions/76045255/encoders-bean-attempts-to-check-the-validity-of-a-return-type-considering-its-ge#comment134120598_76045255","body":"@DmytroMitin I replied to your question in my question (added a section about it). Spark <code>3.3.2</code> and <code>3.4.0</code> have a largely different code for <code>Encoders.bean</code>, and they are now difficult to compare. Understanding their changes would be difficult."}],"comment_count":5,"is_answered":false,"view_count":347,"answer_count":0,"score":1,"last_activity_date":1701405840,"creation_date":1681824820,"last_edit_date":1681839808,"question_id":76045255,"body_markdown":"That&#39;s a strange problem I stumbled into, since I&#39;ve switched to _Spark_ `3.4.0`\r\n\r\nI have a class that isn&#39;t simple to fill, with `Encoders.bean` in _Java_:\r\n\r\nWithout going too deep, the class I have to fill with data, has a base class with generic types in it:\r\n\r\n```java\r\npublic class ComptesIndividuels&lt;MR extends ComptesTotalOuBaseEtParHabitant, RS extends ComptesAvecRatioStructure, RV extends ComptesAvecReductionVotee, TV extends ComptesAvecTauxVote&gt; implements Serializable {\r\n[...]\r\n   /** Ann&#233;e d&#39;exercice */\r\n   private Integer anneeExercice;\r\n   \r\n   /** Nom de la collectivit&#233; */\r\n   private String nom;\r\n\r\n   /** PRODUITS DE FONCTIONNEMENT = A */\r\n   private MR produitsDeFonctionnement;\r\n\r\n   /** Produits de fonctionnement CAF */\r\n   private MR produitsDeFonctionnementCAF;\r\n   \r\n   /** PRODUITS DE FONCTIONNEMENT = A : CAF : Imp&#244;ts Locaux */ \r\n   private RS produitsDeFonctionnementCAFImpotsLocaux;\r\n\r\n   /** PRODUITS DE FONCTIONNEMENT = A : CAF : Autres imp&#244;ts et taxes */\r\n   private RS produitsDeFonctionnementCAFAutresImpotsEtTaxes;\r\n\r\n   /** PRODUITS DE FONCTIONNEMENT = A : CAF : Dotation globale de fonctionnement */\r\n   private RS produitsDeFonctionnementCAFDGF;\r\n   \r\n   /** CHARGES DE FONCTIONNEMENT = B */\r\n   private MR chargesDeFonctionnement;\r\n\r\n   /** Charges de fonctionnement CAF */\r\n   private MR chargesDeFonctionnementCAF;\r\n\r\n   /** CHARGES DE FONCTIONNEMENT = B : CAF : Charges de personnel */\r\n   private RS chargesDeFonctionnementCAFChargesDePersonnel;\r\n\r\n   /** CHARGES DE FONCTIONNEMENT = B : CAF : Achats et charges externes */\r\n   private RS chargesDeFonctionnementCAFAchatsEtChargesExternes;\r\n\r\n   /** CHARGES DE FONCTIONNEMENT = B : CAF : Charges financi&#232;res */\r\n   private RS chargesDeFonctionnementCAFChargesFinancieres;\r\n\r\n   /** CHARGES DE FONCTIONNEMENT = B : CAF : Subventions vers&#233;es */\r\n   private RS chargesDeFonctionnementCAFSubventionsVersees;\r\n[...]\r\n```\r\n\r\nThey are needed because departments, cities, local authorities, regions have the overhaul same structure, but with some small variations.\r\n\r\nSo, the concrete class I am willing to fill, for example, is a city individual accounts, `ComptesIndividuelsCommune` extending `ComptesIndividuels`:\r\n\r\n```java\r\n/**\r\n * Comptes individuels d&#39;une commune.\r\n * @author Marc Le Bihan\r\n */\r\npublic class ComptesIndividuelsCommune extends ComptesIndividuels&lt;ComptesAvecMoyenneStrate, ComptesAvecStrateEtRatioStructureEtStrate, ComptesAvecStrateEtReductionVotee, ComptesAvecStrateEtTauxVoteEtStrate&gt; {\r\n[...]\r\n   /** Code de la r&#233;gion */\r\n   private String codeRegion;\r\n   \r\n   /** Code du d&#233;partement */\r\n   private String codeDepartement;\r\n\r\n   /** CHARGES DE FONCTIONNEMENT = B : CAF : Contingents */\r\n   private ComptesAvecStrateEtRatioStructureEtStrate chargesDeFonctionnementCAFContingents;\r\n\r\n   /** RESSOURCES D&#39;INVESTISSEMENT : Retour de biens affect&#233;s conc&#233;d&#233;s ... */\r\n   private ComptesAvecStrateEtRatioStructureEtStrate ressourcesInvestissementRetourDeBiensAffectesConcedes;\r\n\r\n   /** EMPLOIS D&#39;INVESTISSEMENT : Charges &#224; r&#233;partir */\r\n   private ComptesAvecStrateEtRatioStructureEtStrate emploisInvestissementChargesARepartir;\r\n\r\n   /** EMPLOIS D&#39;INVESTISSEMENT : Immobilisations affect&#233;es, conc&#233;d&#233;es, ... */\r\n   private ComptesAvecStrateEtRatioStructureEtStrate emploisInvestissementImmobilisationsAffecteesConcedees;\r\n\r\n   /** AUTOFINANCEMENT : Exc&#233;dent brut de fonctionnement */\r\n   private ComptesAvecStrateEtRatioStructureEtStrate autoFinancementExcedentBrutDeFonctionnement;\r\n[...]\r\n```\r\n\r\nUntil `Spark 3.3.2` I was able to fill it from a row dataset with proper properties, with this function:\r\n\r\n```java\r\n/**\r\n * Convertir un Dataset Row en Dataset de comptes individuels de communes.\r\n * @param dsRow Dataset Row &#224; convertir.\r\n * @return Dataset de comptes de communes.\r\n */\r\n@Override\r\npublic Dataset&lt;ComptesIndividuelsCommune&gt; toDatasetComptesIndividuels(Dataset&lt;Row&gt; dsRow) {\r\n   Objects.requireNonNull(dsRow, &quot;Le dataset de comptes individuels de communes ne peut pas valoir null.&quot;);\r\n      \r\n   return dsRow.map((MapFunction&lt;Row, ComptesIndividuelsCommune&gt;)row -&gt; {\r\n      ComptesAvecStrateEtRatioStructureEtStrate chargesDeFonctionnementCAFContingents = rs(&quot;\\t\\tContingents\\t\\t\\t&quot;, &quot;chargesDeFonctionnementCAFContingents&quot;, true, row); \r\n\r\n      ComptesAvecStrateEtRatioStructureEtStrate ressourcesInvestissementRetourDeBiensAffectesConcedes = rs(&quot;\\tRetour de biens affect&#233;s, conc&#233;d&#233;s, ...\\t&quot;, &quot;ressourcesInvestissementRetourDeBiensAffectesConcedes&quot;, true, row);\r\n         \r\n      ComptesAvecStrateEtRatioStructureEtStrate emploisInvestissementChargesARepartir = rs(&quot;\\tCharges &#224; r&#233;partir\\t\\t\\t&quot;, &quot;emploisInvestissementChargesARepartir&quot;, true, row); \r\n      ComptesAvecStrateEtRatioStructureEtStrate emploisInvestissementImmobilisationsAffecteesConcedees = rs(&quot;\\tImmobilisations affect&#233;es, conc&#233;d&#233;es, ...&quot;, &quot;emploisInvestissementImmobilisationsAffecteesConcedees&quot;, true, row);\r\n\r\n      ComptesAvecMoyenneStrate operationsInvestissementBesoinOuCapaciteFinancementResiduelSectionInvestissement = mr(&quot;Besoin ou capacit&#233; de financement r&#233;siduel de la section d&#39;investissement = D - C&quot;, &quot;operationsInvestissementBesoinOuCapaciteFinancementResiduelSectionInvestissement&quot;, true, row);\r\n      ComptesAvecMoyenneStrate operationsInvestissementSoldeDesOperationsPourCompteDeTiers = mr(&quot;+ Solde des op&#233;rations pour le compte de tiers&quot;, &quot;operationsInvestissementSoldeDesOperationsPourCompteDeTiers&quot;, true, row);\r\n      ComptesAvecMoyenneStrate operationsInvestissementBesoinOuCapaciteFinancementSectionInvestissement = mr(&quot;Besoin ou capacit&#233; de financement de la section d&#39;investissement = E&quot;, &quot;operationsInvestissementBesoinOuCapaciteFinancementSectionInvestissement&quot;, true, row);\r\n      ComptesAvecMoyenneStrate operationsInvestissementResultatEnsemble = mr(&quot;R&#233;sultat d&#39;ensemble = R - E&quot;, &quot;operationsInvestissementResultatEnsemble&quot;, true, row);\r\n         \r\n      ComptesAvecStrateEtRatioStructureEtStrate autoFinancementExcedentBrutDeFonctionnement = rs(&quot;Exc&#233;dent brut de fonctionnement\\t\\t\\t&quot;, &quot;autoFinancementExcedentBrutDeFonctionnement&quot;, true, row);\r\n         \r\n      ComptesAvecMoyenneStrate endettementFondsDeRoulement = mr(&quot;FONDS DE ROULEMENT&quot;, &quot;endettementFondsDeRoulement&quot;, true, row);\r\n         \r\n      ComptesIndividuels&lt;ComptesAvecMoyenneStrate, ComptesAvecStrateEtRatioStructureEtStrate, ComptesAvecStrateEtReductionVotee, ComptesAvecStrateEtTauxVoteEtStrate&gt; comptesIndividuels = super.alimenterCompteIndividuels(row, \r\n         row.getAs(&quot;populationCommune&quot;), row.getAs(&quot;sirenCommune&quot;), row.getAs(&quot;codeCommune&quot;), row.getAs(&quot;nomCommune&quot;), true);\r\n         \r\n      return new ComptesIndividuelsCommune(comptesIndividuels,\r\n         row.getAs(&quot;codeRegion&quot;), row.getAs(&quot;codeDepartement&quot;),\r\n         row.getAs(&quot;typeGroupementAppartenance&quot;),\r\n         row.getAs(&quot;libelleStrateCommune&quot;),\r\n         ressourcesInvestissementRetourDeBiensAffectesConcedes,\r\n         chargesDeFonctionnementCAFContingents,\r\n         emploisInvestissementChargesARepartir, emploisInvestissementImmobilisationsAffecteesConcedees,\r\n         autoFinancementExcedentBrutDeFonctionnement,  \r\n         endettementFondsDeRoulement,\r\n         operationsInvestissementBesoinOuCapaciteFinancementResiduelSectionInvestissement, \r\n         operationsInvestissementSoldeDesOperationsPourCompteDeTiers, \r\n         operationsInvestissementBesoinOuCapaciteFinancementSectionInvestissement, \r\n         operationsInvestissementResultatEnsemble); \r\n   }, Encoders.bean(ComptesIndividuelsCommune.class));\r\n}\r\n```\r\n\r\nBut since _Spark_ `3.4.0`, it fails with this stacktrace:\r\n\r\n```log\r\norg.apache.spark.SparkUnsupportedOperationException: [ENCODER_NOT_FOUND] Not found an encoder of the type RS to Spark SQL internal representation. Consider to change the input type to one of supported at &#39;https://spark.apache.org/docs/latest/sql-ref-datatypes.html&#39;.\r\n\r\n\tat org.apache.spark.sql.errors.QueryExecutionErrors$.cannotFindEncoderForTypeError(QueryExecutionErrors.scala:1483)\r\n\tat org.apache.spark.sql.catalyst.JavaTypeInference$.encoderFor(JavaTypeInference.scala:142)\r\n\tat org.apache.spark.sql.catalyst.JavaTypeInference$.$anonfun$encoderFor$1(JavaTypeInference.scala:128)\r\n\tat scala.collection.ArrayOps$.map$extension(ArrayOps.scala:929)\r\n\tat org.apache.spark.sql.catalyst.JavaTypeInference$.encoderFor(JavaTypeInference.scala:126)\r\n\tat org.apache.spark.sql.catalyst.JavaTypeInference$.encoderFor(JavaTypeInference.scala:58)\r\n\tat org.apache.spark.sql.catalyst.JavaTypeInference$.encoderFor(JavaTypeInference.scala:51)\r\n\tat org.apache.spark.sql.catalyst.encoders.ExpressionEncoder$.javaBean(ExpressionEncoder.scala:62)\r\n\tat org.apache.spark.sql.Encoders$.bean(Encoders.scala:179)\r\n\tat org.apache.spark.sql.Encoders.bean(Encoders.scala)\r\n\tat fr.ecoemploi.spark.dataset.individuel.communes.ComptesIndividuelsCommunesDataset.toDatasetComptesIndividuels(ComptesIndividuelsCommunesDataset.java:614)\r\n\tat fr.ecoemploi.spark.dataset.individuel.AbstractComptesIndividuelsDataset.toComptesIndividuels(AbstractComptesIndividuelsDataset.java:119)\r\n\tat fr.ecoemploi.spark.dataset.balance.communes.ComptesIndividuelsCommunesIT.datasetComptesIndividuelsCommunesEPCI(ComptesIndividuelsCommunesIT.java:158)\r\n```\r\n\r\nI&#39;ve started a debug session. The problem happens in the encoding checking.\r\n\r\nThis function is called (visible in the stacktrace) by the _Scala_ engine of _Spark_:\r\n\r\n```scala\r\nprivate def encoderFor(t: Type, seenTypeSet: Set[Class[_]]): AgnosticEncoder[_] = t match {\r\n\r\n  case c: Class[_] if c == java.lang.Boolean.TYPE =&gt; PrimitiveBooleanEncoder\r\n  case c: Class[_] if c == java.lang.Byte.TYPE =&gt; PrimitiveByteEncoder\r\n  case c: Class[_] if c == java.lang.Short.TYPE =&gt; PrimitiveShortEncoder\r\n  case c: Class[_] if c == java.lang.Integer.TYPE =&gt; PrimitiveIntEncoder\r\n  case c: Class[_] if c == java.lang.Long.TYPE =&gt; PrimitiveLongEncoder\r\n  case c: Class[_] if c == java.lang.Float.TYPE =&gt; PrimitiveFloatEncoder\r\n  case c: Class[_] if c == java.lang.Double.TYPE =&gt; PrimitiveDoubleEncoder\r\n\r\n  case c: Class[_] if c == classOf[java.lang.Boolean] =&gt; BoxedBooleanEncoder\r\n  case c: Class[_] if c == classOf[java.lang.Byte] =&gt; BoxedByteEncoder\r\n  case c: Class[_] if c == classOf[java.lang.Short] =&gt; BoxedShortEncoder\r\n  case c: Class[_] if c == classOf[java.lang.Integer] =&gt; BoxedIntEncoder\r\n  case c: Class[_] if c == classOf[java.lang.Long] =&gt; BoxedLongEncoder\r\n  case c: Class[_] if c == classOf[java.lang.Float] =&gt; BoxedFloatEncoder\r\n  case c: Class[_] if c == classOf[java.lang.Double] =&gt; BoxedDoubleEncoder\r\n\r\n  case c: Class[_] if c == classOf[java.lang.String] =&gt; StringEncoder\r\n  case c: Class[_] if c == classOf[Array[Byte]] =&gt; BinaryEncoder\r\n  case c: Class[_] if c == classOf[java.math.BigDecimal] =&gt; DEFAULT_JAVA_DECIMAL_ENCODER\r\n  case c: Class[_] if c == classOf[java.math.BigInteger] =&gt; JavaBigIntEncoder\r\n  case c: Class[_] if c == classOf[java.time.LocalDate] =&gt; STRICT_LOCAL_DATE_ENCODER\r\n  case c: Class[_] if c == classOf[java.sql.Date] =&gt; STRICT_DATE_ENCODER\r\n  case c: Class[_] if c == classOf[java.time.Instant] =&gt; STRICT_INSTANT_ENCODER\r\n  case c: Class[_] if c == classOf[java.sql.Timestamp] =&gt; STRICT_TIMESTAMP_ENCODER\r\n  case c: Class[_] if c == classOf[java.time.LocalDateTime] =&gt; LocalDateTimeEncoder\r\n  case c: Class[_] if c == classOf[java.time.Duration] =&gt; DayTimeIntervalEncoder\r\n  case c: Class[_] if c == classOf[java.time.Period] =&gt; YearMonthIntervalEncoder\r\n\r\n  case c: Class[_] if c.isEnum =&gt; JavaEnumEncoder(ClassTag(c))\r\n\r\n  case c: Class[_] if c.isAnnotationPresent(classOf[SQLUserDefinedType]) =&gt;\r\n    val udt = c.getAnnotation(classOf[SQLUserDefinedType]).udt()\r\n      .getConstructor().newInstance().asInstanceOf[UserDefinedType[Any]]\r\n    val udtClass = udt.userClass.getAnnotation(classOf[SQLUserDefinedType]).udt()\r\n    UDTEncoder(udt, udtClass)\r\n\r\n  case c: Class[_] if UDTRegistration.exists(c.getName) =&gt;\r\n    val udt = UDTRegistration.getUDTFor(c.getName).get.getConstructor().\r\n      newInstance().asInstanceOf[UserDefinedType[Any]]\r\n    UDTEncoder(udt, udt.getClass)\r\n\r\n  case c: Class[_] if c.isArray =&gt;\r\n    val elementEncoder = encoderFor(c.getComponentType, seenTypeSet)\r\n    ArrayEncoder(elementEncoder, elementEncoder.nullable)\r\n\r\n  case ImplementsList(c, Array(elementCls)) =&gt;\r\n    val element = encoderFor(elementCls, seenTypeSet)\r\n    IterableEncoder(ClassTag(c), element, element.nullable, lenientSerialization = false)\r\n\r\n  case ImplementsMap(c, Array(keyCls, valueCls)) =&gt;\r\n    val keyEncoder = encoderFor(keyCls, seenTypeSet)\r\n    val valueEncoder = encoderFor(valueCls, seenTypeSet)\r\n    MapEncoder(ClassTag(c), keyEncoder, valueEncoder, valueEncoder.nullable)\r\n\r\n  case c: Class[_] =&gt;\r\n    if (seenTypeSet.contains(c)) {\r\n      throw QueryExecutionErrors.cannotHaveCircularReferencesInBeanClassError(c)\r\n    }\r\n\r\n    // TODO: we should only collect properties that have getter and setter. However, some tests\r\n    //   pass in scala case class as java bean class which doesn&#39;t have getter and setter.\r\n    val properties = getJavaBeanReadableProperties(c)\r\n    // Note that the fields are ordered by name.\r\n    val fields = properties.map { property =&gt;\r\n      val readMethod = property.getReadMethod\r\n      val encoder = encoderFor(readMethod.getGenericReturnType, seenTypeSet + c)\r\n      // The existence of `javax.annotation.Nonnull`, means this field is not nullable.\r\n      val hasNonNull = readMethod.isAnnotationPresent(classOf[Nonnull])\r\n      EncoderField(\r\n        property.getName,\r\n        encoder,\r\n        encoder.nullable &amp;&amp; !hasNonNull,\r\n        Metadata.empty,\r\n        Option(readMethod.getName),\r\n        Option(property.getWriteMethod).map(_.getName))\r\n    }\r\n    JavaBeanEncoder(ClassTag(c), fields)\r\n\r\n  case _ =&gt;\r\n    throw QueryExecutionErrors.cannotFindEncoderForTypeError(t.toString, SPARK_DOC_ROOT)\r\n}\r\n```\r\n\r\nwhere it fails, on the line  \r\n`val encoder = encoderFor(readMethod.getGenericReturnType, seenTypeSet + c)`  \r\nit has called with that content below:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nand then it jumps to the default case:\r\n\r\n```scala\r\ncase _ =&gt;\r\n  throw QueryExecutionErrors.cannotFindEncoderForTypeError(t.toString, SPARK_DOC_ROOT)\r\n```\r\n\r\nthrowing an exception: \r\n\r\n```\r\norg.apache.spark.SparkUnsupportedOperationException: [ENCODER_NOT_FOUND] Not found an encoder of the type RS to Spark SQL internal representation. Consider to change the input type to one of supported at &#39;https://spark.apache.org/docs/latest/sql-ref-datatypes.html&#39;.\r\n```\r\n\r\nand then I understand that the `t: Type` `encoderFor` is using, has for value `RS`...  \r\nand it appears me strange that such a type could hold a generic type declaration, instead of a concrete class, at this step.\r\n\r\nI am clueless, here. I wonder what I could do to solve my problem.  \r\nMaybe I am in front of a Spark `3.4.0` issue?\r\n\r\n----------\r\n\r\nFor @DmytroMitin question about the differences between Spark `3.4.0` and Spark `3.3.2`, in his comment below: the Spark `3.3.2` is different.  \r\nIts method is called `inferDataType` and execute this piece of code:\r\n\r\n```scala\r\ncase other =&gt;\r\n   if (seenTypeSet.contains(other)) {\r\n      throw QueryExecutionErrors.cannotHaveCircularReferencesInBeanClassError(other)\r\n     }\r\n\r\n   // TODO: we should only collect properties that have getter and setter. However, some tests\r\n   // pass in scala case class as java bean class which doesn&#39;t have getter and setter.\r\n   val properties = getJavaBeanReadableProperties(other)\r\n   val fields = properties.map { property =&gt;\r\n   val returnType = typeToken.method(property.getReadMethod).getReturnType\r\n   val (dataType, nullable) = inferDataType(returnType, seenTypeSet + other)\r\n   // The existence of `javax.annotation.Nonnull`, means this field is not nullable.\r\n   val hasNonNull = property.getReadMethod.isAnnotationPresent(classOf[Nonnull])\r\n    new StructField(property.getName, dataType, nullable &amp;&amp; !hasNonNull)\r\n  }\r\n  (new StructType(fields), true)\r\n}\r\n```\r\n\r\nand doesn&#39;t encouter the same problem:\r\n\r\n```\r\nreturnType = fr.ecoemploi.metier.territoire.comptabilite.comptesIndividuels.ComptesAvecStrateEtRatioStructureEtStrate\r\n```\r\n\r\nit is able to define a StructType from that class:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI think code between `3.3.2` and  `3.4.0` have largely enough changed, and are incomparable now (for normal understanding).\r\n\r\n  [1]: https://i.stack.imgur.com/MlmJs.png\r\n  [2]: https://i.stack.imgur.com/GOOsF.png","link":"https://stackoverflow.com/questions/76045255/encoders-bean-attempts-to-check-the-validity-of-a-return-type-considering-its-ge","title":"Encoders.bean attempts to check the validity of a return type considering its generic type and not its concrete class, with Spark 3.4.0","body":"<p>That's a strange problem I stumbled into, since I've switched to <em>Spark</em> <code>3.4.0</code></p>\n<p>I have a class that isn't simple to fill, with <code>Encoders.bean</code> in <em>Java</em>:</p>\n<p>Without going too deep, the class I have to fill with data, has a base class with generic types in it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ComptesIndividuels&lt;MR extends ComptesTotalOuBaseEtParHabitant, RS extends ComptesAvecRatioStructure, RV extends ComptesAvecReductionVotee, TV extends ComptesAvecTauxVote&gt; implements Serializable {\n[...]\n   /** Année d'exercice */\n   private Integer anneeExercice;\n   \n   /** Nom de la collectivité */\n   private String nom;\n\n   /** PRODUITS DE FONCTIONNEMENT = A */\n   private MR produitsDeFonctionnement;\n\n   /** Produits de fonctionnement CAF */\n   private MR produitsDeFonctionnementCAF;\n   \n   /** PRODUITS DE FONCTIONNEMENT = A : CAF : Impôts Locaux */ \n   private RS produitsDeFonctionnementCAFImpotsLocaux;\n\n   /** PRODUITS DE FONCTIONNEMENT = A : CAF : Autres impôts et taxes */\n   private RS produitsDeFonctionnementCAFAutresImpotsEtTaxes;\n\n   /** PRODUITS DE FONCTIONNEMENT = A : CAF : Dotation globale de fonctionnement */\n   private RS produitsDeFonctionnementCAFDGF;\n   \n   /** CHARGES DE FONCTIONNEMENT = B */\n   private MR chargesDeFonctionnement;\n\n   /** Charges de fonctionnement CAF */\n   private MR chargesDeFonctionnementCAF;\n\n   /** CHARGES DE FONCTIONNEMENT = B : CAF : Charges de personnel */\n   private RS chargesDeFonctionnementCAFChargesDePersonnel;\n\n   /** CHARGES DE FONCTIONNEMENT = B : CAF : Achats et charges externes */\n   private RS chargesDeFonctionnementCAFAchatsEtChargesExternes;\n\n   /** CHARGES DE FONCTIONNEMENT = B : CAF : Charges financières */\n   private RS chargesDeFonctionnementCAFChargesFinancieres;\n\n   /** CHARGES DE FONCTIONNEMENT = B : CAF : Subventions versées */\n   private RS chargesDeFonctionnementCAFSubventionsVersees;\n[...]\n</code></pre>\n<p>They are needed because departments, cities, local authorities, regions have the overhaul same structure, but with some small variations.</p>\n<p>So, the concrete class I am willing to fill, for example, is a city individual accounts, <code>ComptesIndividuelsCommune</code> extending <code>ComptesIndividuels</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Comptes individuels d'une commune.\n * @author Marc Le Bihan\n */\npublic class ComptesIndividuelsCommune extends ComptesIndividuels&lt;ComptesAvecMoyenneStrate, ComptesAvecStrateEtRatioStructureEtStrate, ComptesAvecStrateEtReductionVotee, ComptesAvecStrateEtTauxVoteEtStrate&gt; {\n[...]\n   /** Code de la région */\n   private String codeRegion;\n   \n   /** Code du département */\n   private String codeDepartement;\n\n   /** CHARGES DE FONCTIONNEMENT = B : CAF : Contingents */\n   private ComptesAvecStrateEtRatioStructureEtStrate chargesDeFonctionnementCAFContingents;\n\n   /** RESSOURCES D'INVESTISSEMENT : Retour de biens affectés concédés ... */\n   private ComptesAvecStrateEtRatioStructureEtStrate ressourcesInvestissementRetourDeBiensAffectesConcedes;\n\n   /** EMPLOIS D'INVESTISSEMENT : Charges à répartir */\n   private ComptesAvecStrateEtRatioStructureEtStrate emploisInvestissementChargesARepartir;\n\n   /** EMPLOIS D'INVESTISSEMENT : Immobilisations affectées, concédées, ... */\n   private ComptesAvecStrateEtRatioStructureEtStrate emploisInvestissementImmobilisationsAffecteesConcedees;\n\n   /** AUTOFINANCEMENT : Excédent brut de fonctionnement */\n   private ComptesAvecStrateEtRatioStructureEtStrate autoFinancementExcedentBrutDeFonctionnement;\n[...]\n</code></pre>\n<p>Until <code>Spark 3.3.2</code> I was able to fill it from a row dataset with proper properties, with this function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Convertir un Dataset Row en Dataset de comptes individuels de communes.\n * @param dsRow Dataset Row à convertir.\n * @return Dataset de comptes de communes.\n */\n@Override\npublic Dataset&lt;ComptesIndividuelsCommune&gt; toDatasetComptesIndividuels(Dataset&lt;Row&gt; dsRow) {\n   Objects.requireNonNull(dsRow, &quot;Le dataset de comptes individuels de communes ne peut pas valoir null.&quot;);\n      \n   return dsRow.map((MapFunction&lt;Row, ComptesIndividuelsCommune&gt;)row -&gt; {\n      ComptesAvecStrateEtRatioStructureEtStrate chargesDeFonctionnementCAFContingents = rs(&quot;\\t\\tContingents\\t\\t\\t&quot;, &quot;chargesDeFonctionnementCAFContingents&quot;, true, row); \n\n      ComptesAvecStrateEtRatioStructureEtStrate ressourcesInvestissementRetourDeBiensAffectesConcedes = rs(&quot;\\tRetour de biens affectés, concédés, ...\\t&quot;, &quot;ressourcesInvestissementRetourDeBiensAffectesConcedes&quot;, true, row);\n         \n      ComptesAvecStrateEtRatioStructureEtStrate emploisInvestissementChargesARepartir = rs(&quot;\\tCharges à répartir\\t\\t\\t&quot;, &quot;emploisInvestissementChargesARepartir&quot;, true, row); \n      ComptesAvecStrateEtRatioStructureEtStrate emploisInvestissementImmobilisationsAffecteesConcedees = rs(&quot;\\tImmobilisations affectées, concédées, ...&quot;, &quot;emploisInvestissementImmobilisationsAffecteesConcedees&quot;, true, row);\n\n      ComptesAvecMoyenneStrate operationsInvestissementBesoinOuCapaciteFinancementResiduelSectionInvestissement = mr(&quot;Besoin ou capacité de financement résiduel de la section d'investissement = D - C&quot;, &quot;operationsInvestissementBesoinOuCapaciteFinancementResiduelSectionInvestissement&quot;, true, row);\n      ComptesAvecMoyenneStrate operationsInvestissementSoldeDesOperationsPourCompteDeTiers = mr(&quot;+ Solde des opérations pour le compte de tiers&quot;, &quot;operationsInvestissementSoldeDesOperationsPourCompteDeTiers&quot;, true, row);\n      ComptesAvecMoyenneStrate operationsInvestissementBesoinOuCapaciteFinancementSectionInvestissement = mr(&quot;Besoin ou capacité de financement de la section d'investissement = E&quot;, &quot;operationsInvestissementBesoinOuCapaciteFinancementSectionInvestissement&quot;, true, row);\n      ComptesAvecMoyenneStrate operationsInvestissementResultatEnsemble = mr(&quot;Résultat d'ensemble = R - E&quot;, &quot;operationsInvestissementResultatEnsemble&quot;, true, row);\n         \n      ComptesAvecStrateEtRatioStructureEtStrate autoFinancementExcedentBrutDeFonctionnement = rs(&quot;Excédent brut de fonctionnement\\t\\t\\t&quot;, &quot;autoFinancementExcedentBrutDeFonctionnement&quot;, true, row);\n         \n      ComptesAvecMoyenneStrate endettementFondsDeRoulement = mr(&quot;FONDS DE ROULEMENT&quot;, &quot;endettementFondsDeRoulement&quot;, true, row);\n         \n      ComptesIndividuels&lt;ComptesAvecMoyenneStrate, ComptesAvecStrateEtRatioStructureEtStrate, ComptesAvecStrateEtReductionVotee, ComptesAvecStrateEtTauxVoteEtStrate&gt; comptesIndividuels = super.alimenterCompteIndividuels(row, \n         row.getAs(&quot;populationCommune&quot;), row.getAs(&quot;sirenCommune&quot;), row.getAs(&quot;codeCommune&quot;), row.getAs(&quot;nomCommune&quot;), true);\n         \n      return new ComptesIndividuelsCommune(comptesIndividuels,\n         row.getAs(&quot;codeRegion&quot;), row.getAs(&quot;codeDepartement&quot;),\n         row.getAs(&quot;typeGroupementAppartenance&quot;),\n         row.getAs(&quot;libelleStrateCommune&quot;),\n         ressourcesInvestissementRetourDeBiensAffectesConcedes,\n         chargesDeFonctionnementCAFContingents,\n         emploisInvestissementChargesARepartir, emploisInvestissementImmobilisationsAffecteesConcedees,\n         autoFinancementExcedentBrutDeFonctionnement,  \n         endettementFondsDeRoulement,\n         operationsInvestissementBesoinOuCapaciteFinancementResiduelSectionInvestissement, \n         operationsInvestissementSoldeDesOperationsPourCompteDeTiers, \n         operationsInvestissementBesoinOuCapaciteFinancementSectionInvestissement, \n         operationsInvestissementResultatEnsemble); \n   }, Encoders.bean(ComptesIndividuelsCommune.class));\n}\n</code></pre>\n<p>But since <em>Spark</em> <code>3.4.0</code>, it fails with this stacktrace:</p>\n<pre><code>org.apache.spark.SparkUnsupportedOperationException: [ENCODER_NOT_FOUND] Not found an encoder of the type RS to Spark SQL internal representation. Consider to change the input type to one of supported at 'https://spark.apache.org/docs/latest/sql-ref-datatypes.html'.\n\n    at org.apache.spark.sql.errors.QueryExecutionErrors$.cannotFindEncoderForTypeError(QueryExecutionErrors.scala:1483)\n    at org.apache.spark.sql.catalyst.JavaTypeInference$.encoderFor(JavaTypeInference.scala:142)\n    at org.apache.spark.sql.catalyst.JavaTypeInference$.$anonfun$encoderFor$1(JavaTypeInference.scala:128)\n    at scala.collection.ArrayOps$.map$extension(ArrayOps.scala:929)\n    at org.apache.spark.sql.catalyst.JavaTypeInference$.encoderFor(JavaTypeInference.scala:126)\n    at org.apache.spark.sql.catalyst.JavaTypeInference$.encoderFor(JavaTypeInference.scala:58)\n    at org.apache.spark.sql.catalyst.JavaTypeInference$.encoderFor(JavaTypeInference.scala:51)\n    at org.apache.spark.sql.catalyst.encoders.ExpressionEncoder$.javaBean(ExpressionEncoder.scala:62)\n    at org.apache.spark.sql.Encoders$.bean(Encoders.scala:179)\n    at org.apache.spark.sql.Encoders.bean(Encoders.scala)\n    at fr.ecoemploi.spark.dataset.individuel.communes.ComptesIndividuelsCommunesDataset.toDatasetComptesIndividuels(ComptesIndividuelsCommunesDataset.java:614)\n    at fr.ecoemploi.spark.dataset.individuel.AbstractComptesIndividuelsDataset.toComptesIndividuels(AbstractComptesIndividuelsDataset.java:119)\n    at fr.ecoemploi.spark.dataset.balance.communes.ComptesIndividuelsCommunesIT.datasetComptesIndividuelsCommunesEPCI(ComptesIndividuelsCommunesIT.java:158)\n</code></pre>\n<p>I've started a debug session. The problem happens in the encoding checking.</p>\n<p>This function is called (visible in the stacktrace) by the <em>Scala</em> engine of <em>Spark</em>:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>private def encoderFor(t: Type, seenTypeSet: Set[Class[_]]): AgnosticEncoder[_] = t match {\n\n  case c: Class[_] if c == java.lang.Boolean.TYPE =&gt; PrimitiveBooleanEncoder\n  case c: Class[_] if c == java.lang.Byte.TYPE =&gt; PrimitiveByteEncoder\n  case c: Class[_] if c == java.lang.Short.TYPE =&gt; PrimitiveShortEncoder\n  case c: Class[_] if c == java.lang.Integer.TYPE =&gt; PrimitiveIntEncoder\n  case c: Class[_] if c == java.lang.Long.TYPE =&gt; PrimitiveLongEncoder\n  case c: Class[_] if c == java.lang.Float.TYPE =&gt; PrimitiveFloatEncoder\n  case c: Class[_] if c == java.lang.Double.TYPE =&gt; PrimitiveDoubleEncoder\n\n  case c: Class[_] if c == classOf[java.lang.Boolean] =&gt; BoxedBooleanEncoder\n  case c: Class[_] if c == classOf[java.lang.Byte] =&gt; BoxedByteEncoder\n  case c: Class[_] if c == classOf[java.lang.Short] =&gt; BoxedShortEncoder\n  case c: Class[_] if c == classOf[java.lang.Integer] =&gt; BoxedIntEncoder\n  case c: Class[_] if c == classOf[java.lang.Long] =&gt; BoxedLongEncoder\n  case c: Class[_] if c == classOf[java.lang.Float] =&gt; BoxedFloatEncoder\n  case c: Class[_] if c == classOf[java.lang.Double] =&gt; BoxedDoubleEncoder\n\n  case c: Class[_] if c == classOf[java.lang.String] =&gt; StringEncoder\n  case c: Class[_] if c == classOf[Array[Byte]] =&gt; BinaryEncoder\n  case c: Class[_] if c == classOf[java.math.BigDecimal] =&gt; DEFAULT_JAVA_DECIMAL_ENCODER\n  case c: Class[_] if c == classOf[java.math.BigInteger] =&gt; JavaBigIntEncoder\n  case c: Class[_] if c == classOf[java.time.LocalDate] =&gt; STRICT_LOCAL_DATE_ENCODER\n  case c: Class[_] if c == classOf[java.sql.Date] =&gt; STRICT_DATE_ENCODER\n  case c: Class[_] if c == classOf[java.time.Instant] =&gt; STRICT_INSTANT_ENCODER\n  case c: Class[_] if c == classOf[java.sql.Timestamp] =&gt; STRICT_TIMESTAMP_ENCODER\n  case c: Class[_] if c == classOf[java.time.LocalDateTime] =&gt; LocalDateTimeEncoder\n  case c: Class[_] if c == classOf[java.time.Duration] =&gt; DayTimeIntervalEncoder\n  case c: Class[_] if c == classOf[java.time.Period] =&gt; YearMonthIntervalEncoder\n\n  case c: Class[_] if c.isEnum =&gt; JavaEnumEncoder(ClassTag(c))\n\n  case c: Class[_] if c.isAnnotationPresent(classOf[SQLUserDefinedType]) =&gt;\n    val udt = c.getAnnotation(classOf[SQLUserDefinedType]).udt()\n      .getConstructor().newInstance().asInstanceOf[UserDefinedType[Any]]\n    val udtClass = udt.userClass.getAnnotation(classOf[SQLUserDefinedType]).udt()\n    UDTEncoder(udt, udtClass)\n\n  case c: Class[_] if UDTRegistration.exists(c.getName) =&gt;\n    val udt = UDTRegistration.getUDTFor(c.getName).get.getConstructor().\n      newInstance().asInstanceOf[UserDefinedType[Any]]\n    UDTEncoder(udt, udt.getClass)\n\n  case c: Class[_] if c.isArray =&gt;\n    val elementEncoder = encoderFor(c.getComponentType, seenTypeSet)\n    ArrayEncoder(elementEncoder, elementEncoder.nullable)\n\n  case ImplementsList(c, Array(elementCls)) =&gt;\n    val element = encoderFor(elementCls, seenTypeSet)\n    IterableEncoder(ClassTag(c), element, element.nullable, lenientSerialization = false)\n\n  case ImplementsMap(c, Array(keyCls, valueCls)) =&gt;\n    val keyEncoder = encoderFor(keyCls, seenTypeSet)\n    val valueEncoder = encoderFor(valueCls, seenTypeSet)\n    MapEncoder(ClassTag(c), keyEncoder, valueEncoder, valueEncoder.nullable)\n\n  case c: Class[_] =&gt;\n    if (seenTypeSet.contains(c)) {\n      throw QueryExecutionErrors.cannotHaveCircularReferencesInBeanClassError(c)\n    }\n\n    // TODO: we should only collect properties that have getter and setter. However, some tests\n    //   pass in scala case class as java bean class which doesn't have getter and setter.\n    val properties = getJavaBeanReadableProperties(c)\n    // Note that the fields are ordered by name.\n    val fields = properties.map { property =&gt;\n      val readMethod = property.getReadMethod\n      val encoder = encoderFor(readMethod.getGenericReturnType, seenTypeSet + c)\n      // The existence of `javax.annotation.Nonnull`, means this field is not nullable.\n      val hasNonNull = readMethod.isAnnotationPresent(classOf[Nonnull])\n      EncoderField(\n        property.getName,\n        encoder,\n        encoder.nullable &amp;&amp; !hasNonNull,\n        Metadata.empty,\n        Option(readMethod.getName),\n        Option(property.getWriteMethod).map(_.getName))\n    }\n    JavaBeanEncoder(ClassTag(c), fields)\n\n  case _ =&gt;\n    throw QueryExecutionErrors.cannotFindEncoderForTypeError(t.toString, SPARK_DOC_ROOT)\n}\n</code></pre>\n<p>where it fails, on the line<br />\n<code>val encoder = encoderFor(readMethod.getGenericReturnType, seenTypeSet + c)</code><br />\nit has called with that content below:</p>\n<p><a href=\"https://i.stack.imgur.com/MlmJs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MlmJs.png\" alt=\"enter image description here\" /></a></p>\n<p>and then it jumps to the default case:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>case _ =&gt;\n  throw QueryExecutionErrors.cannotFindEncoderForTypeError(t.toString, SPARK_DOC_ROOT)\n</code></pre>\n<p>throwing an exception:</p>\n<pre><code>org.apache.spark.SparkUnsupportedOperationException: [ENCODER_NOT_FOUND] Not found an encoder of the type RS to Spark SQL internal representation. Consider to change the input type to one of supported at 'https://spark.apache.org/docs/latest/sql-ref-datatypes.html'.\n</code></pre>\n<p>and then I understand that the <code>t: Type</code> <code>encoderFor</code> is using, has for value <code>RS</code>...<br />\nand it appears me strange that such a type could hold a generic type declaration, instead of a concrete class, at this step.</p>\n<p>I am clueless, here. I wonder what I could do to solve my problem.<br />\nMaybe I am in front of a Spark <code>3.4.0</code> issue?</p>\n<hr />\n<p>For @DmytroMitin question about the differences between Spark <code>3.4.0</code> and Spark <code>3.3.2</code>, in his comment below: the Spark <code>3.3.2</code> is different.<br />\nIts method is called <code>inferDataType</code> and execute this piece of code:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>case other =&gt;\n   if (seenTypeSet.contains(other)) {\n      throw QueryExecutionErrors.cannotHaveCircularReferencesInBeanClassError(other)\n     }\n\n   // TODO: we should only collect properties that have getter and setter. However, some tests\n   // pass in scala case class as java bean class which doesn't have getter and setter.\n   val properties = getJavaBeanReadableProperties(other)\n   val fields = properties.map { property =&gt;\n   val returnType = typeToken.method(property.getReadMethod).getReturnType\n   val (dataType, nullable) = inferDataType(returnType, seenTypeSet + other)\n   // The existence of `javax.annotation.Nonnull`, means this field is not nullable.\n   val hasNonNull = property.getReadMethod.isAnnotationPresent(classOf[Nonnull])\n    new StructField(property.getName, dataType, nullable &amp;&amp; !hasNonNull)\n  }\n  (new StructType(fields), true)\n}\n</code></pre>\n<p>and doesn't encouter the same problem:</p>\n<pre><code>returnType = fr.ecoemploi.metier.territoire.comptabilite.comptesIndividuels.ComptesAvecStrateEtRatioStructureEtStrate\n</code></pre>\n<p>it is able to define a StructType from that class:</p>\n<p><a href=\"https://i.stack.imgur.com/GOOsF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GOOsF.png\" alt=\"enter image description here\" /></a></p>\n<p>I think code between <code>3.3.2</code> and  <code>3.4.0</code> have largely enough changed, and are incomparable now (for normal understanding).</p>\n"},{"tags":["java","apache-spark"],"comments":[{"score":1,"post_type":"question","creation_date":1681758451,"post_id":76036349,"comment_id":134105650,"body_markdown":"You need to provide a minimal example that demonstrates the issue. E.g. remove fields and setters from the Commune class until the problem stops occurring.","link":"https://stackoverflow.com/questions/76036349/encoders-bean-doesnt-work-anymore-on-a-java-pojo-with-spark-3-4-0#comment134105650_76036349","body":"You need to provide a minimal example that demonstrates the issue. E.g. remove fields and setters from the Commune class until the problem stops occurring."},{"score":0,"post_type":"question","creation_date":1681760509,"post_id":76036349,"comment_id":134106080,"body_markdown":"@jon-hanson it won&#39;t be easy. I&#39;m doing a step-by-step debugging instead, and might have the beginning of a solution. I hope that in few days, I can provide an helpful answer to all of those who will face this problem with the Spark new version.","link":"https://stackoverflow.com/questions/76036349/encoders-bean-doesnt-work-anymore-on-a-java-pojo-with-spark-3-4-0#comment134106080_76036349","body":"@jon-hanson it won&#39;t be easy. I&#39;m doing a step-by-step debugging instead, and might have the beginning of a solution. I hope that in few days, I can provide an helpful answer to all of those who will face this problem with the Spark new version."}],"answers":[{"comments":[{"score":1,"post_type":"answer","creation_date":1685005100,"post_id":76040939,"comment_id":134601308,"body_markdown":"This even breaks Dataset from bean Encoder, \nexactly produced same error when data set being generated.\nno way we can pass the writeMethod to a field from instantiation \nex:\n`spark.createDataSet(Seq(myCustomClassItems))(Encoders.bean(Class[MyCustomClass]).toDS`","link":"https://stackoverflow.com/questions/76036349/encoders-bean-doesnt-work-anymore-on-a-java-pojo-with-spark-3-4-0/76040939#comment134601308_76040939","body":"This even breaks Dataset from bean Encoder,  exactly produced same error when data set being generated. no way we can pass the writeMethod to a field from instantiation  ex: <code>spark.createDataSet(Seq(myCustomClassItems))(Encoders.bean(C&zwnj;&#8203;lass[MyCustomClass])&zwnj;&#8203;.toDS</code>"},{"score":2,"post_type":"answer","creation_date":1692356081,"post_id":76040939,"comment_id":135615032,"body_markdown":"Merci Marc. Vous me sauvez la vie. J&#39;avais aussi une m&#233;thode utilitaire getXXX qui n&#39;&#233;tait pas un getter sur un attribut et &#231;a faisait planter ce couillon de Spark 3.4.0. Gr&#226;ce &#224; votre post ci-dessus, j&#39;ai compris que je n&#39;avais qu&#39;&#224; renommer cette m&#233;thode afin qu&#39;elle ne commence pas par &quot;get&quot; et &#231;a a r&#233;solu le probl&#232;me.","link":"https://stackoverflow.com/questions/76036349/encoders-bean-doesnt-work-anymore-on-a-java-pojo-with-spark-3-4-0/76040939#comment135615032_76040939","body":"Merci Marc. Vous me sauvez la vie. J&#39;avais aussi une m&#233;thode utilitaire getXXX qui n&#39;&#233;tait pas un getter sur un attribut et &#231;a faisait planter ce couillon de Spark 3.4.0. Gr&#226;ce &#224; votre post ci-dessus, j&#39;ai compris que je n&#39;avais qu&#39;&#224; renommer cette m&#233;thode afin qu&#39;elle ne commence pas par &quot;get&quot; et &#231;a a r&#233;solu le probl&#232;me."},{"score":0,"post_type":"answer","creation_date":1692624394,"post_id":76040939,"comment_id":135644895,"body_markdown":"Hi @marc-le-bihan or anyone, I also faced the same issue and it is due to the get method, may I know if there is other workaround other than renaming the get method, maybe using annotation?","link":"https://stackoverflow.com/questions/76036349/encoders-bean-doesnt-work-anymore-on-a-java-pojo-with-spark-3-4-0/76040939#comment135644895_76040939","body":"Hi @marc-le-bihan or anyone, I also faced the same issue and it is due to the get method, may I know if there is other workaround other than renaming the get method, maybe using annotation?"},{"score":0,"post_type":"answer","creation_date":1692625840,"post_id":76040939,"comment_id":135645262,"body_markdown":"@weikangchia Currently, I don&#39;t know. I&#39;m awaiting the `Spark 3.4.2` version expecting they will correct this issue, because I&#39;m trying to create a minimal test case in order to create an issue, but this is very long to do.","link":"https://stackoverflow.com/questions/76036349/encoders-bean-doesnt-work-anymore-on-a-java-pojo-with-spark-3-4-0/76040939#comment135645262_76040939","body":"@weikangchia Currently, I don&#39;t know. I&#39;m awaiting the <code>Spark 3.4.2</code> version expecting they will correct this issue, because I&#39;m trying to create a minimal test case in order to create an issue, but this is very long to do."},{"score":0,"post_type":"answer","creation_date":1692665780,"post_id":76040939,"comment_id":135651849,"body_markdown":"I see, thanks. I guess I shall go with renaming my method first and share here if I find anything useful.","link":"https://stackoverflow.com/questions/76036349/encoders-bean-doesnt-work-anymore-on-a-java-pojo-with-spark-3-4-0/76040939#comment135651849_76040939","body":"I see, thanks. I guess I shall go with renaming my method first and share here if I find anything useful."},{"score":0,"post_type":"answer","creation_date":1697966854,"post_id":76040939,"comment_id":136343524,"body_markdown":"I&#39;ve created an issue about it, and two others linked troubles on https://issues.apache.org/jira/browse/SPARK-45311","link":"https://stackoverflow.com/questions/76036349/encoders-bean-doesnt-work-anymore-on-a-java-pojo-with-spark-3-4-0/76040939#comment136343524_76040939","body":"I&#39;ve created an issue about it, and two others linked troubles on <a href=\"https://issues.apache.org/jira/browse/SPARK-45311\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/SPARK-45311</a>"}],"comment_count":6,"score":0,"last_activity_date":1681798564,"last_edit_date":1681798564,"creation_date":1681789287,"answer_id":76040939,"question_id":76036349,"body_markdown":"The problem starts in the `private def deserializerFor(enc: AgnosticEncoder[_], path: Expression, walkedTypePath: WalkedTypePath)` in the stack trace.\r\n\r\nIt attempts to run that piece of code:\r\n\r\n```scala\r\ncase JavaBeanEncoder(tag, fields) =&gt;\r\n  val setters = fields.map { f =&gt;\r\n    val newTypePath = walkedTypePath.recordField(\r\n      f.enc.clsTag.runtimeClass.getName,\r\n      f.name)\r\n    val setter = expressionWithNullSafety(\r\n      deserializerFor(\r\n        f.enc,\r\n        addToPath(path, f.name, f.enc.dataType, newTypePath),\r\n        newTypePath),\r\n      nullable = f.nullable,\r\n      newTypePath)\r\n    f.writeMethod.get -&gt; setter\r\n  }\r\n[...]\r\n```\r\n\r\nHere, among its searches, it searches for `isCollectiviteOutremer` method, and finds:\r\n\r\n```scala\r\nEncoderField(isCollectiviteOutremer,PrimitiveBooleanEncoder,true,{},Some(isCollectiviteOutremer),None)\r\n```\r\n\r\n(or something like that, I solved it in a debug). What is important is that for setter it has: `None`.\r\n\r\nBecause the method it tries to encode is that one:\r\n\r\n```java\r\npublic boolean isCollectiviteOutremer() {\r\n   return this.codeCommune != null &amp;&amp;\r\n      (this.codeCommune.startsWith(&quot;975&quot;) || this.codeCommune.startsWith(&quot;977&quot;) || this.codeCommune.startsWith(&quot;978&quot;) || this.codeCommune.startsWith(&quot;98&quot;));\r\n}\r\n```\r\n\r\nThat is an utilitarian method, and doesn&#39;t need a setter.\r\n\r\nIn fact, that method doesn&#39;t need to be encoded into a field, but I don&#39;t know how to tell to `Encoders.bean(...)` to skip it. If an annotation exists, or something else.\r\n\r\nWhatever, I was able to remove that encoding attempt by changing its return type from `boolean` to `Boolean`, and then I hadn&#39;t the problem anymore: the method `isCollectiviteOutremer` wasn&#39;t listed in `fields` anymore.\r\n\r\nMy answer to this question counts, however, more for a workaround than a good solution.","link":"https://stackoverflow.com/questions/76036349/encoders-bean-doesnt-work-anymore-on-a-java-pojo-with-spark-3-4-0/76040939#76040939","title":"Encoders.bean doesn&#39;t work anymore on a Java POJO, with Spark 3.4.0","body":"<p>The problem starts in the <code>private def deserializerFor(enc: AgnosticEncoder[_], path: Expression, walkedTypePath: WalkedTypePath)</code> in the stack trace.</p>\n<p>It attempts to run that piece of code:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>case JavaBeanEncoder(tag, fields) =&gt;\n  val setters = fields.map { f =&gt;\n    val newTypePath = walkedTypePath.recordField(\n      f.enc.clsTag.runtimeClass.getName,\n      f.name)\n    val setter = expressionWithNullSafety(\n      deserializerFor(\n        f.enc,\n        addToPath(path, f.name, f.enc.dataType, newTypePath),\n        newTypePath),\n      nullable = f.nullable,\n      newTypePath)\n    f.writeMethod.get -&gt; setter\n  }\n[...]\n</code></pre>\n<p>Here, among its searches, it searches for <code>isCollectiviteOutremer</code> method, and finds:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>EncoderField(isCollectiviteOutremer,PrimitiveBooleanEncoder,true,{},Some(isCollectiviteOutremer),None)\n</code></pre>\n<p>(or something like that, I solved it in a debug). What is important is that for setter it has: <code>None</code>.</p>\n<p>Because the method it tries to encode is that one:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public boolean isCollectiviteOutremer() {\n   return this.codeCommune != null &amp;&amp;\n      (this.codeCommune.startsWith(&quot;975&quot;) || this.codeCommune.startsWith(&quot;977&quot;) || this.codeCommune.startsWith(&quot;978&quot;) || this.codeCommune.startsWith(&quot;98&quot;));\n}\n</code></pre>\n<p>That is an utilitarian method, and doesn't need a setter.</p>\n<p>In fact, that method doesn't need to be encoded into a field, but I don't know how to tell to <code>Encoders.bean(...)</code> to skip it. If an annotation exists, or something else.</p>\n<p>Whatever, I was able to remove that encoding attempt by changing its return type from <code>boolean</code> to <code>Boolean</code>, and then I hadn't the problem anymore: the method <code>isCollectiviteOutremer</code> wasn't listed in <code>fields</code> anymore.</p>\n<p>My answer to this question counts, however, more for a workaround than a good solution.</p>\n"},{"comment_count":0,"score":1,"last_activity_date":1701405682,"creation_date":1701405682,"answer_id":77583050,"question_id":76036349,"body_markdown":"This problem is now corrected with the `Spark 3.4.2` new release.","link":"https://stackoverflow.com/questions/76036349/encoders-bean-doesnt-work-anymore-on-a-java-pojo-with-spark-3-4-0/77583050#77583050","title":"Encoders.bean doesn&#39;t work anymore on a Java POJO, with Spark 3.4.0","body":"<p>This problem is now corrected with the <code>Spark 3.4.2</code> new release.</p>\n"}],"comment_count":2,"is_answered":true,"view_count":352,"answer_count":2,"score":4,"last_activity_date":1701405682,"creation_date":1681742397,"last_edit_date":1681743129,"question_id":76036349,"body_markdown":"This method that worked well from Spark `3.2.x` to Spark `3.3.x`,\r\n\r\n```java\r\npublic Dataset&lt;Commune&gt; obtenirCommunes(SparkSession session, int anneeCOG) throws TechniqueException {\r\n   Dataset&lt;Row&gt; communes = rowCommunes(session, anneeCOG);\r\n\r\n   return communes\r\n      .select(communes.col(&quot;typeCommune&quot;), communes.col(&quot;codeCommune&quot;), communes.col(&quot;codeRegion&quot;), communes.col(&quot;codeDepartement&quot;),\r\n          communes.col(&quot;arrondissement&quot;), communes.col(&quot;typeNomEtCharniere&quot;), communes.col(&quot;nomMajuscules&quot;), communes.col(&quot;nomCommune&quot;), \r\n          communes.col(&quot;codeCanton&quot;), communes.col(&quot;codeCommuneParente&quot;), communes.col(&quot;sirenCommune&quot;), communes.col(&quot;populationTotale&quot;).alias(&quot;population&quot;),\r\n          communes.col(&quot;strateCommune&quot;), communes.col(&quot;codeEPCI&quot;), communes.col(&quot;surface&quot;), communes.col(&quot;longitude&quot;), communes.col(&quot;latitude&quot;),\r\n          communes.col(&quot;nomDepartement&quot;), communes.col(&quot;nomEPCI&quot;))\r\n      .as(Encoders.bean(Commune.class))\r\n      .cache();\r\n   }\r\n```\r\n\r\nis now failing with Spark `3.4.0`, through this test:\r\n\r\n```java\r\n/**\r\n * Charger le Code Officiel G&#233;ographique entier.\r\n * @throws CommuneInexistanteException si la commune recherch&#233;e n&#39;existe pas.\r\n * @throws TechniqueException si un incident survient.\r\n */\r\n@Test\r\n@DisplayName(&quot;Lecture du code officiel g&#233;ographique&quot;)\r\nvoid cog() throws TechniqueException, CommuneInexistanteException {\r\n   for(int cog = COG_START; cog &lt;= COG_END; cog ++) {\r\n      if (this.toutesAnnees == false &amp;&amp; cog != COG_END) {\r\n         continue;\r\n      }\r\n         \r\n      CodeOfficielGeographique maillage = this.cogDataset.obtenirCodeOfficielGeographique(this.session, cog, true);\r\n      LOGGER.info(&quot;Code Officiel G&#233;ographique : {} communes, {} intercommunalit&#233;s.&quot;, maillage.getCommunes().size(), maillage.getIntercommunalites().size());\r\n         \r\n      Intercommunalite intercommunalite = maillage.getIntercommunalites().values().iterator().next();\r\n      LOGGER.info(&quot;La premi&#232;re intercommunalit&#233; : {}&quot;, intercommunalite);\r\n         \r\n      Commune cambremer = maillage.getCommune(&quot;14126&quot;);\r\n      assertNotNull(cambremer, MessageFormat.format(&quot;Cambremer aurait d&#251; &#234;tre trouv&#233; dans le COG {0}.&quot;, cog));\r\n      LOGGER.info(cambremer.toString());\r\n   }\r\n}\r\n```\r\n\r\nThe failure comes with a not very clear log (it&#39;s the line `CodeOfficielGeographique maillage = this.cogDataset.obtenirCodeOfficielGeographique(this.session, cog, true)` that calls `CogDataset:obtenirCommunes` who fails):\r\n\r\n```log\r\njava.util.NoSuchElementException: None.get\r\n\r\n\tat scala.None$.get(Option.scala:627)\r\n\tat scala.None$.get(Option.scala:626)\r\n\tat org.apache.spark.sql.catalyst.ScalaReflection$.$anonfun$deserializerFor$8(ScalaReflection.scala:359)\r\n\tat scala.collection.immutable.ArraySeq.map(ArraySeq.scala:75)\r\n\tat scala.collection.immutable.ArraySeq.map(ArraySeq.scala:35)\r\n\tat org.apache.spark.sql.catalyst.ScalaReflection$.deserializerFor(ScalaReflection.scala:348)\r\n\tat org.apache.spark.sql.catalyst.ScalaReflection$.deserializerFor(ScalaReflection.scala:183)\r\n\tat org.apache.spark.sql.catalyst.encoders.ExpressionEncoder$.apply(ExpressionEncoder.scala:56)\r\n\tat org.apache.spark.sql.catalyst.encoders.ExpressionEncoder$.javaBean(ExpressionEncoder.scala:62)\r\n\tat org.apache.spark.sql.Encoders$.bean(Encoders.scala:179)\r\n\tat org.apache.spark.sql.Encoders.bean(Encoders.scala)\r\n\tat fr.ecoemploi.spark.dataset.cog.CogDataset.obtenirCommunes(CogDataset.java:220)\r\n\tat fr.ecoemploi.spark.dataset.cog.CogDataset.obtenirCodeOfficielGeographique(CogDataset.java:186)\r\n\tat fr.ecoemploi.spark.dataset.cog.CommuneObjectsMetiersIT.cog(CommuneObjectsMetiersIT.java:92)\r\n```\r\n\r\nAnd the `Commune` object that `Encoders.bean` targets, is this one:\r\n\r\n```java\r\npackage fr.ecoemploi.metier.territoire;\r\n\r\nimport static fr.ecoemploi.metier.territoire.PrefixageNomCommune.*;\r\n\r\nimport java.io.Serial;\r\nimport java.text.*;\r\nimport java.util.*;\r\nimport java.util.function.Predicate;\r\n\r\nimport javax.validation.constraints.*;\r\n\r\nimport org.apache.commons.lang3.*;\r\n\r\nimport fr.fondation.utilitaires.autocontrole.*;\r\nimport fr.fondation.utilitaires.localisation.*;\r\nimport io.swagger.v3.oas.annotations.*;\r\nimport io.swagger.v3.oas.annotations.media.*;\r\n\r\n/**\r\n * Une commune.\r\n * @author Marc LE BIHAN.\r\n */\r\n@Schema(description = &quot;Une commune du Code Officiel G&#233;ographique&quot;)\r\npublic class Commune extends ObjetMetierSpark {\r\n   /** Serial ID */\r\n   @Serial\r\n   private static final long serialVersionUID = 4381577514414536917L;\r\n\r\n   /** Collator utilis&#233; pour comparer les noms de communes, sans accents. */\r\n   private static final Collator collator = Collator.getInstance(Locale.FRENCH);\r\n   \r\n   static {\r\n      collator.setStrength(Collator.PRIMARY);\r\n   }\r\n\r\n   /** Code de la commune. */\r\n   @NotNull @Size(min = 5, max = 5) @Schema(description = &quot;Code de la commune&quot;, example = &quot;29019&quot;)\r\n   private String codeCommune;\r\n   \r\n   /** Code dd&#233;partement. */\r\n   @NotNull @Size(min=2, max=3) @Schema(description = &quot;Code du d&#233;partement&quot;, example = &quot;972&quot;)\r\n   private String codeDepartement;\r\n   \r\n   /** Nom du d&#233;partement. */\r\n   @NotNull @Schema(description = &quot;Nom du d&#233;partement&quot;, example = &quot;Finist&#232;re&quot;)\r\n   private String nomDepartement;\r\n\r\n   /** Code de la commune parente (pour arrondissements, communes associ&#233;es ou d&#233;l&#233;gu&#233;es). */\r\n   @Size(min = 9, max = 9) @Schema(description = &quot;Code de la commune parente&quot;, example = &quot;75056&quot;, nullable = true)\r\n   private String codeCommuneParente;\r\n\r\n   /** Code INSEE de la r&#233;gion auquel appartient ce d&#233;partement. */\r\n   @NotNull @Size(min = 2, max = 2) @Schema(description = &quot;Code de la r&#233;gion&quot;, example = &quot;84&quot;)\r\n   private String codeRegion;\r\n   \r\n   /** Code Canton de la commune. */\r\n   @Schema(description = &quot;Code du canton&quot;, nullable = true)\r\n   private String codeCanton;\r\n\r\n   /** Nom de la ville. */\r\n   @NotNull @Schema(description = &quot;Nom de la commune&quot;, example = &quot;Brest&quot;)\r\n   private String nomCommune;\r\n\r\n   /** Nom en majuscule. */\r\n   @NotNull @Schema(description = &quot;Nom de la commune en majuscules&quot;, example = &quot;BREST&quot;)\r\n   private String nomMajuscules;\r\n\r\n   /** Type et nom charni&#232;re. */\r\n   @NotNull @Size(min=1, max=1)\r\n   @Schema(description = &quot;Type de nom et charni&#232;re: &lt;ul&gt;&quot;\r\n         + &quot;&lt;li&gt;0  Pas d&#39;article et le nom commence par une consonne sauf H muet  charni&#232;re = DE&lt;/li&gt;&quot;\r\n         + &quot;&lt;li&gt;1  Pas d&#39;article et le nom commence par une voyelle ou un H muet  charni&#232;re = D&#39;&lt;/li&gt;&quot;\r\n         + &quot;&lt;li&gt;2  Article = LE   charni&#232;re = DU&lt;/li&gt;&quot;\r\n         + &quot;&lt;li&gt;3  Article = LA   charni&#232;re = DE LA&lt;/li&gt;&quot;\r\n         + &quot;&lt;li&gt;4  Article = LES  charni&#232;re = DES&lt;/li&gt;&quot;\r\n         + &quot;&lt;li&gt;5  Article = L&#39;   charni&#232;re = DE L&#39;&lt;/li&gt;&quot;\r\n         + &quot;&lt;li&gt;6  Article = AUX  charni&#232;re = DES&lt;/li&gt;&quot;\r\n         + &quot;&lt;li&gt;7  Article = LAS  charni&#232;re = DE LAS&lt;/li&gt;&quot;\r\n         + &quot;&lt;li&gt;8  Article = LOS  charni&#232;re = DE LOS&lt;/li&gt;&quot;\r\n         + &quot;&lt;/ul&gt;&quot;)\r\n   private String typeNomEtCharniere;\r\n\r\n   /** SIREN de la commune (permet de la lier &#224; son intercommunalit&#233;). */\r\n   @NotNull @Size(min=9, max=9) @Schema(description = &quot;Num&#233;ro SIREN de la commune&quot;, example = &quot;212900195&quot;)\r\n   private String sirenCommune;\r\n\r\n   /** Liste des groupements dont cette commune est le si&#232;ge. */\r\n   @NotNull \r\n   @Schema(description = &quot;Liste des groupements (EPCI, ult&#233;rieurement : syndicats) dont cette commune est le si&#232;ge. &quot;\r\n         + &quot;Cette liste est vide si la commune n&#39;est si&#232;ge d&#39;aucun syndicat ou intercommunalit&#233;.&quot;, example = &quot;[242900314]&quot;)\r\n   private Set&lt;String&gt; siegeGroupements = new HashSet&lt;&gt;();\r\n   \r\n   /** Liste des intercommunalit&#233;s dont cette commune est membre. */\r\n   @NotNull @Schema(description = &quot;Liste des groupepements (EPCI, ult&#233;rieurement : syndicats) dont cette commune est membre.&quot;, example = &quot;[242900314]&quot;)\r\n   private Set&lt;String&gt; membreGroupements = new HashSet&lt;&gt;();\r\n   \r\n   /** Intercommunalit&#233; &#224; fiscalit&#233; propre &#224; laquelle cette commune appartient (qu&#39;elle en soit si&#232;ge ou membre). */\r\n   @NotNull @Size(min=9, max=9) @Schema(description = &quot;Num&#233;ro SIREN de l&#39;intercommunalit&#233; dont cette commune est si&#232;ge ou membre.&quot;, example = &quot;242900314&quot;)\r\n   private String epciFiscalitePropre;\r\n   \r\n   /** Nom de de l&#39;intercommunalit&#233; &#224; laquelle la commune appartient. */\r\n   @NotNull @Schema(description = &quot;Nom de l&#39;intercommunalit&#233; &#224; laquelle la commune appartient&quot;, example = &quot;Brest M&#233;tropole&quot;)\r\n   private String nomEPCI;\r\n   \r\n   /** Arrondissement de la commune. */\r\n   @Schema(description = &quot;Code de l&#39;arrondissement de la commune.&quot;, nullable = true)\r\n   private String arrondissement;\r\n   \r\n   /** Population de la commune. */\r\n   @NotNull @Schema(description = &quot;Population totale de la commune.&quot;)\r\n   private Integer population;\r\n   \r\n   /** Type de la commune. */\r\n   @NotNull\r\n   @Schema(description = &quot;Type de la commune : &lt;ul&gt;&quot; +\r\n      &quot;&lt;li&gt;COM   Commune&lt;/li&gt;&quot; + \r\n      &quot;&lt;li&gt;COMA  Commune associ&#233;e&lt;/li&gt;&quot; + \r\n      &quot;&lt;li&gt;COMD  Commune d&#233;l&#233;gu&#233;e&lt;/li&gt;&quot; + \r\n      &quot;&lt;li&gt;ARM   Arrondissement municipal&lt;/li&gt;&quot;\r\n      + &quot;&lt;/ul&gt;&quot;, example = &quot;COM&quot;)\r\n   private String typeCommune;\r\n   \r\n   /** Strate communale. */\r\n   @NotNull\r\n   @Schema(description = &quot;Strate communale : &lt;ul&gt;&quot; +\r\n         &quot;&lt;li&gt;1 : Moins de 100 habitants&lt;/li&gt;&quot; + \r\n         &quot;&lt;li&gt;2 : De 100 &#224; moins de 200 habitants&lt;/li&gt;&quot; + \r\n         &quot;&lt;li&gt;3 : De 200 &#224; moins de 500 habitants&lt;/li&gt;&quot; + \r\n         &quot;&lt;li&gt;4 : De 500 &#224; moins de 2 000 habitants&lt;/li&gt;&quot; + \r\n         &quot;&lt;li&gt;5 : De 2 000 &#224; moins de 3 500 habitants&lt;/li&gt;&quot; + \r\n         &quot;&lt;li&gt;6 : De 3 500 &#224; moins de 5 000 habitants&lt;/li&gt;&quot; + \r\n         &quot;&lt;li&gt;7 : De 5 000 &#224; moins de 10 000 habitants&lt;/li&gt;&quot; + \r\n         &quot;&lt;li&gt;8 : de 10 000 &#224; moins de 20 000 habitants&lt;/li&gt;&quot; + \r\n         &quot;&lt;li&gt;9 : de 20 000 &#224; moins de 50 000 habitants&lt;/li&gt;&quot; + \r\n         &quot;&lt;li&gt;10 : de 50 000 &#224; moins de 100 000 habitants&lt;/li&gt;&quot; + \r\n         &quot;&lt;li&gt;11 : 100 000 habitants et plus&lt;/li&gt;&quot; + \r\n         &quot;&lt;/ul&gt;&quot;, example = &quot;1&quot;)\r\n   private Integer strateCommune;\r\n   \r\n   /** Surface de la commune en hectares. */\r\n   @Schema(description = &quot;Surface de la commune, en hectares. N&#39;est pas aliment&#233; pour les arrondissements.&quot;, example = &quot;1520.25&quot;, nullable = true)\r\n   private Double surface;\r\n   \r\n   /** Longitude du centro&#239;de de la commune. */\r\n   @Schema(description = &quot;Longitude du centro&#239;de de la commune. N&#39;est pas aliment&#233; pour les arrondissements.&quot;, example = &quot;-4.2908&quot;, nullable = true)\r\n   private Double longitude;\r\n   \r\n   /** Latitude du centro&#239;de de la commune. */\r\n   @Schema(description = &quot;Latitude du centro&#239;de de la commune. N&#39;est pas aliment&#233; pour les arrondissements.&quot;, example = &quot;48.2327&quot;, nullable = true)\r\n   private Double latitude;\r\n\r\n   /**\r\n    * Construire une commune.\r\n    */\r\n   public Commune() {\r\n   }\r\n   \r\n   /**\r\n    * Ajouter une intercommunalit&#233; dont cette commune est membre.\r\n    * @param sirenIntercommunalite SIREN de l&#39;intercommunalit&#233;.\r\n    */\r\n   public void ajouterMembreGroupement(String sirenIntercommunalite) {\r\n      this.membreGroupements.add(sirenIntercommunalite);\r\n   }\r\n   \r\n   /**\r\n    * Ajouter une intercommunalit&#233; dont cette commune est le si&#232;ge.\r\n    * @param sirenIntercommunalite SIREN de l&#39;intercommunalit&#233;.\r\n    */\r\n   public void ajouterSiegeGroupement(String sirenIntercommunalite) {\r\n      this.siegeGroupements.add(sirenIntercommunalite);\r\n   }\r\n\r\n   /**\r\n    * Renvoyer le code Canton de la commune. \r\n    * @return Code canton de la commune.\r\n    */\r\n   public String getCodeCanton() {\r\n      return this.codeCanton;\r\n   }\r\n\r\n   /**\r\n    * Fixer le code canton de la commune.\r\n    * @param codeCanton Code canton de la commune.\r\n    */\r\n   public void setCodeCanton(String codeCanton) {\r\n      this.codeCanton = codeCanton;\r\n   }\r\n\r\n   /**\r\n    * Renvoyer le code de la commune.\r\n    * @return Code de la commune.\r\n    */\r\n   public String getCodeCommune() {\r\n      return this.codeCommune;\r\n   }\r\n\r\n   /**\r\n    * Renvoyer le code de la commune.\r\n    * @return Code de la commune.\r\n    */\r\n   public CodeCommune astCodeCommune() {\r\n      return new CodeCommune(this.codeCommune);\r\n   }\r\n\r\n   /**\r\n    * Renvoyer le code commune parente (pour arrondissements, communes associ&#233;es ou d&#233;l&#233;gu&#233;es).\r\n    * @return Code commune parente.\r\n    */\r\n   public CodeCommune astCodeCommuneParente() {\r\n      return new CodeCommune(this.codeCommuneParente);\r\n   }\r\n   \r\n   /**\r\n    * Renvoyer le code commune parente (pour arrondissements, communes associ&#233;es ou d&#233;l&#233;gu&#233;es).\r\n    * @return Code commune parente.\r\n    */\r\n   public String getCodeCommuneParente() {\r\n      return this.codeCommuneParente;\r\n   }\r\n\r\n   /**\r\n    * Renvoyer le code d&#233;partement.\r\n    * @return Code d&#233;partement.\r\n    */\r\n   public CodeDepartement asCodeDepartement() {\r\n      return new CodeDepartement(this.codeDepartement);\r\n   }\r\n\r\n   /**\r\n    * Renvoyer le code d&#233;partement.\r\n    * @return Code d&#233;partement.\r\n    */\r\n   public String getCodeDepartement() {\r\n      return this.codeDepartement;\r\n   }\r\n\r\n   /**\r\n    * Renvoyer le code r&#233;gion.\r\n    * @return Code r&#233;gion.\r\n    */\r\n   public CodeRegion asCodeRegion() {\r\n      return new CodeRegion(this.codeRegion);\r\n   }\r\n\r\n   /**\r\n    * Renvoyer le code r&#233;gion.\r\n    * @return Code r&#233;gion.\r\n    */\r\n   public String getCodeRegion() {\r\n      return this.codeRegion;\r\n   }\r\n   \r\n   /**\r\n    * Renvoyer l&#39;intercommunalit&#233; &#224; fiscalit&#233; propre &#224; laquelle cette commune appartient, qu&#39;elle en soit si&#232;ge ou membre.\r\n    * @return Intercommunalit&#233;.\r\n    */\r\n   public SIREN asEpciFiscalitePropre() {\r\n      return new SIREN(this.epciFiscalitePropre);\r\n   }\r\n\r\n   /**\r\n    * Renvoyer l&#39;intercommunalit&#233; &#224; fiscalit&#233; propre &#224; laquelle cette commune appartient, qu&#39;elle en soit si&#232;ge ou membre.\r\n    * @return Intercommunalit&#233;.\r\n    */\r\n   @Hidden\r\n   public String getCodeEPCI() {\r\n      return this.epciFiscalitePropre;\r\n   }\r\n\r\n   /**\r\n    * Fixer l&#39;intercommunalit&#233; &#224; fiscalit&#233; propre &#224; laquelle cette commune appartient, qu&#39;elle en soit si&#232;ge ou membre.\r\n    * @param epci Intercommunalit&#233;.\r\n    */\r\n   @Hidden\r\n   public void setCodeEPCI(String epci) {\r\n      this.epciFiscalitePropre = epci;\r\n   }\r\n\r\n   /**\r\n    * Renvoyer les groupements dont cette commune est membre.\r\n    * @return Groupements.\r\n    */\r\n   public Set&lt;String&gt; membreGroupements() {\r\n      return this.membreGroupements;\r\n   }\r\n\r\n   /**\r\n    * Renvoyer la liste des groupements dont cette commune est le si&#232;ge.\r\n    * @return liste des groupements.\r\n    */\r\n   public Set&lt;String&gt; siegeGroupements() {\r\n      return this.siegeGroupements;\r\n   }\r\n   \r\n   /**\r\n    * Renvoyer l&#39;arrondissement.\r\n    * @return Arrondissement.\r\n    */\r\n   public String getArrondissement() {\r\n      return this.arrondissement;\r\n   }\r\n   \r\n   /**\r\n    * D&#233;terminer si ce code commune d&#233;signe une collectivit&#233; d&#39;outre-mer :&lt;br&gt;\r\n    * Attention, il s&#39;agit des d&#233;partements 975, 977, 978 et 98, et pas les d&#233;partements d&#39;outremer 971, 972, 973, 974 et 976.\r\n    * @return true si c&#39;est le cas.\r\n    */\r\n   @Hidden\r\n   public boolean isCollectiviteOutremer() {\r\n      return this.codeCommune != null &amp;&amp;\r\n         (this.codeCommune.startsWith(&quot;975&quot;) || this.codeCommune.startsWith(&quot;977&quot;) || this.codeCommune.startsWith(&quot;978&quot;) || this.codeCommune.startsWith(&quot;98&quot;));\r\n   }\r\n\r\n   /**\r\n    * Fixer l&#39;arrondissement.\r\n    * @param arrondissement Arrondissement.\r\n    */\r\n   public void setArrondissement(String arrondissement) {\r\n      this.arrondissement = arrondissement;\r\n   }\r\n\r\n   /**\r\n    * Renvoyer le nom de la commune.\r\n    * @return Nom de la commune.\r\n    */\r\n   public String getNomCommune() {\r\n      return this.nomCommune;\r\n   }\r\n   \r\n   /**\r\n    * D&#233;terminer si notre commune a le m&#234;me nom que celle en param&#232;tre.\r\n    * @param nomCandidat Nom de commune : il peut contenir une charni&#232;re.\r\n    * @return true si c&#39;est le cas.\r\n    */\r\n   public boolean hasMemeNom(String nomCandidat) {\r\n      // Si le nom soumis vaut null, r&#233;pondre non.\r\n      if (nomCandidat == null) {\r\n         return false;\r\n      }\r\n\r\n      // Faire une comparaison directe de nom de commune tout d&#39;abord, car l&#39;emploi du collator est tr&#232;s co&#251;teux.\r\n      if (nomCandidat.equalsIgnoreCase(this.nomCommune)) {\r\n         return true;\r\n      }\r\n      \r\n      // Puis, rechercher avec les diff&#233;rentes charni&#232;res.\r\n      if (nomCandidat.equalsIgnoreCase(nomAvecType(false, PrefixageNomCommune.AUCUN))) {\r\n         return true;\r\n      }\r\n      \r\n      if (nomCandidat.equalsIgnoreCase(nomAvecType(false, PrefixageNomCommune.A))) {\r\n         return true;\r\n      }\r\n      \r\n      if (nomCandidat.equalsIgnoreCase(nomAvecType(false, PrefixageNomCommune.POUR))) {\r\n         return true;\r\n      }\r\n      \r\n      // En cas d&#39;&#233;chec, reprendre ces tests, mais avec le collator, plus lent, mais qui passera outre les caract&#232;res accentu&#233;s.\r\n      if (collator.equals(nomCandidat, this.nomCommune)) {\r\n         return true;\r\n      }\r\n      \r\n      if (collator.equals(nomCandidat, nomAvecType(false, PrefixageNomCommune.AUCUN))) {\r\n         return true;\r\n      }\r\n      \r\n      if (collator.equals(nomCandidat, nomAvecType(false, PrefixageNomCommune.A))) {\r\n         return true;\r\n      }\r\n\r\n      if (collator.equals(nomCandidat, nomAvecType(false, PrefixageNomCommune.POUR))) {\r\n         return true;\r\n      }\r\n\r\n      // Alternative aux tests pr&#233;c&#233;dents\r\n      List&lt;Predicate&lt;String&gt;&gt; memeNoms = new ArrayList&lt;&gt;();\r\n      memeNoms.add(nom -&gt; nom.equalsIgnoreCase(nomAvecType(false, PrefixageNomCommune.AUCUN)));\r\n      memeNoms.add(nom -&gt; nom.equalsIgnoreCase(nomAvecType(false, PrefixageNomCommune.A)));\r\n      memeNoms.add(nom -&gt; nom.equalsIgnoreCase(nomAvecType(false, PrefixageNomCommune.POUR)));\r\n      memeNoms.add(nom -&gt; collator.equals(nom, this.nomCommune));\r\n      memeNoms.add(nom -&gt; collator.equals(nom, nomAvecType(false, PrefixageNomCommune.AUCUN)));\r\n      memeNoms.add(nom -&gt; collator.equals(nom, nomAvecType(false, PrefixageNomCommune.A)));\r\n      memeNoms.add(nom -&gt; collator.equals(nom, nomAvecType(false, PrefixageNomCommune.POUR)));\r\n\r\n      return memeNoms.stream().anyMatch(memeNom -&gt; memeNom.test(nomCandidat));\r\n   }\r\n\r\n   /**\r\n    * Renvoyer le nom de la commune avec sa charni&#232;re accol&#233;e : Ville D&#39;Ermenouville, Ville de Villenoy\r\n    * @param majuscules true S&#39;il faut que la ville et sa charni&#232;re soient en majuscules.\r\n    * @return Nom de la commune avec sa charni&#232;re.\r\n    */\r\n   public String nomAvecCharniere(boolean majuscules) {\r\n      String articleCommune = switch(asArticleEtCharniere()) {\r\n         case AUCUN_D_APOSTROPHE -&gt; &quot;d&#39;&quot;;\r\n         case AUX_DES, LES_DES -&gt; &quot;des &quot;;\r\n         case LAS_DE_LAS -&gt; &quot;de las &quot;;\r\n         case LA_DE_LA -&gt; &quot;de la &quot;;\r\n         case LE_DU -&gt; &quot;du &quot;;\r\n         case LOS_DE_LOS -&gt; &quot;de los &quot;;\r\n         case L_APOSTROPHE_DE_L_APOSTROPHE -&gt; &quot;l&#39;&quot;;\r\n         default -&gt; // inclut le cas : AUCUN_CONSONNE_DE\r\n            &quot;de &quot;;\r\n      };\r\n\r\n      String texte = articleCommune + (majuscules ? this.nomMajuscules : this.nomCommune);\r\n      return majuscules ? texte.toUpperCase(Locale.FRENCH) : texte;\r\n   }\r\n\r\n   /**\r\n    * Renvoyer le nom de la commune avec son type accol&#233; : Bienvenue &#224; Ermenouville, Bienvenue aux Ullis.\r\n    * @param majuscules true S&#39;il faut que la ville et sa charni&#232;re soient en majuscules.\r\n    * @param prefixage Indique s&#39;il faut replacer type vide par &#39;&#224;&#39;, &#39;pour&#39; : &quot;Bienvenue &#224; St-Etienne&quot;, &quot;pour les Ullis&quot;.\r\n    * @return Nom de la commune avec sa charni&#232;re.\r\n    */\r\n   public String nomAvecType(boolean majuscules, PrefixageNomCommune prefixage) {\r\n      String articleCommune = &quot;&quot;;\r\n      String prefixe = &quot;&quot;;\r\n\r\n      final String PREFIXE_POUR = &quot;pour &quot;;\r\n\r\n      switch(asArticleEtCharniere()) {\r\n         case AUCUN_CONSONNE_DE -&gt; {\r\n            if (prefixage.equals(A))\r\n               articleCommune = &quot;&#224; &quot;;\r\n\r\n            if (prefixage.equals(POUR))\r\n               prefixe = PREFIXE_POUR;\r\n         }\r\n\r\n         case AUCUN_D_APOSTROPHE -&gt; {\r\n            if (prefixage.equals(A))\r\n               prefixe = &quot;&#224; &quot;;\r\n\r\n            if (prefixage.equals(POUR))\r\n               prefixe = PREFIXE_POUR;\r\n         }\r\n\r\n         case AUX_DES -&gt; articleCommune = &quot;aux &quot;;\r\n\r\n         case LAS_DE_LAS -&gt; {\r\n            articleCommune = &quot;las &quot;;\r\n\r\n            if (prefixage.equals(POUR))\r\n               prefixe = PREFIXE_POUR;\r\n         }\r\n\r\n         case LA_DE_LA -&gt; {\r\n            articleCommune = &quot;la &quot;;\r\n\r\n            if (prefixage.equals(POUR))\r\n               prefixe = PREFIXE_POUR;\r\n         }\r\n\r\n         case LES_DES -&gt; {\r\n            articleCommune = &quot;les &quot;;\r\n\r\n            if (prefixage.equals(POUR))\r\n               prefixe = PREFIXE_POUR;\r\n         }\r\n\r\n         case LE_DU -&gt; {\r\n            articleCommune = &quot;le &quot;;\r\n\r\n            if (prefixage.equals(POUR))\r\n               prefixe = PREFIXE_POUR;\r\n         }\r\n\r\n         case LOS_DE_LOS -&gt; {\r\n            articleCommune = &quot;los &quot;;\r\n\r\n            if (prefixage.equals(POUR))\r\n               prefixe = PREFIXE_POUR;\r\n         }\r\n\r\n         case L_APOSTROPHE_DE_L_APOSTROPHE -&gt; {\r\n            articleCommune = &quot;l&#39;&quot;;\r\n\r\n            if (prefixage.equals(POUR))\r\n               prefixe = PREFIXE_POUR;\r\n         }\r\n\r\n         default -&gt; {\r\n            if (prefixage.equals(A))\r\n               prefixe = &quot;&#224; &quot;;\r\n         }\r\n      }\r\n\r\n      String texte = prefixe + articleCommune + (majuscules ? this.nomMajuscules : this.nomCommune);\r\n      return majuscules ? texte.toUpperCase(Locale.FRENCH) : texte;\r\n   }\r\n\r\n   /**\r\n    * Renvoyer le nom de la commune en majuscules.\r\n    * @return Nom de la commune.\r\n    */\r\n   public String getNomMajuscules() {\r\n      return this.nomMajuscules;\r\n   }\r\n   \r\n   /**\r\n    * Obtenir la population de la commune une ann&#233;e particuli&#232;re.\r\n    * @return population de la commune.\r\n    */\r\n   public Integer getPopulation() {\r\n      return this.population;\r\n   }\r\n\r\n   /**\r\n    * Convertit un type de nom INSEE en enum charni&#232;re INSEE.\r\n    * @return Enum&#233;ration.\r\n    */\r\n   public ArticleEtCharniereINSEE asArticleEtCharniere() {\r\n      for(ArticleEtCharniereINSEE candidat : ArticleEtCharniereINSEE.values()) {\r\n         if (candidat.getCode().equals(this.typeNomEtCharniere))\r\n            return candidat;\r\n      }\r\n\r\n      return null;\r\n   }\r\n   \r\n   /**\r\n    * Renvoyer l&#39;article et la charni&#232;re.\r\n    * @return Article et charni&#232;re.\r\n    */\r\n   public String getTypeNomEtCharniere() {\r\n      return this.typeNomEtCharniere;\r\n   }\r\n   \r\n   /**\r\n    * D&#233;terminer si la commune a un num&#233;ro de SIREN aliment&#233;\r\n    * (elle en a forc&#233;ment un, mais parfois l&#39;objet m&#233;tier ne le porte pas encore).\r\n    * @return true, si c&#39;est le cas.\r\n    */\r\n   public boolean hasSIREN() {\r\n      return this.sirenCommune != null &amp;&amp; StringUtils.isBlank(this.sirenCommune) == false;\r\n   }\r\n\r\n   /**\r\n    * Fixer le code de la commune.\r\n    * @param code Code de la commune.\r\n    */\r\n   public void setCodeCommune(String code) {\r\n      this.codeCommune = code;\r\n   }\r\n\r\n   /**\r\n    * Fixer le code de la commune parente (pour arrondissements, communes associ&#233;es ou d&#233;l&#233;gu&#233;es).\r\n    * @param code Code de la commune parente (pour arrondissements, communes associ&#233;es ou d&#233;l&#233;gu&#233;es).\r\n    */\r\n   public void setCodeCommuneParente(String code) {\r\n      this.codeCommuneParente = code;\r\n   }\r\n\r\n   /**\r\n    * Fixer le code d&#233;partement.\r\n    * @param code Code d&#233;partement.\r\n    */\r\n   public void setCodeDepartement(String code) {\r\n      this.codeDepartement = code;\r\n   }\r\n\r\n   /**\r\n    * Fixer le code r&#233;gion.\r\n    * @param code Code r&#233;gion.\r\n    */\r\n   public void setCodeRegion(String code) {\r\n      this.codeRegion = code;\r\n   }\r\n\r\n   /**\r\n    * Fixer les groupements dont cette commune est membre.\r\n    * @param groupements Groupements.\r\n    */\r\n   public void membreGroupements(Set&lt;String&gt; groupements) {\r\n      this.membreGroupements = groupements;\r\n   }\r\n   \r\n   /**\r\n    * Fixer les groupements dont cette commune est le si&#232;ge.\r\n    * @param siegeIntercommunalites Intercommunalit&#233;s.\r\n    */\r\n   public void siegeGroupements(Set&lt;String&gt; siegeIntercommunalites) {\r\n      this.siegeGroupements = siegeIntercommunalites;\r\n   }\r\n\r\n   /**\r\n    * Renvoyer la latitude de la commune.\r\n    * @return Latitude de la commune.\r\n    */\r\n   public Double getLatitude() {\r\n      return this.latitude;\r\n   }\r\n\r\n   /**\r\n    * Fixer la latitude de la commune.\r\n    * @param latitude Latitude de la commune.\r\n    */\r\n   public void setLatitude(Double latitude) {\r\n      this.latitude = latitude;\r\n   }\r\n\r\n   /**\r\n    * Renvoyer la longitude de la commune.\r\n    * @return Longitude de la commune.\r\n    */\r\n   public Double getLongitude() {\r\n      return this.longitude;\r\n   }\r\n\r\n   /**\r\n    * Fixer la longitude de la commune.\r\n    * @param longitude Longitude de la commune. \r\n    */\r\n   public void setLongitude(Double longitude) {\r\n      this.longitude = longitude;\r\n   }\r\n   \r\n   /**\r\n    * Renvoyer le nom du d&#233;partement.\r\n    * @return Nom du d&#233;partement.\r\n    */\r\n   public String getNomDepartement() {\r\n      return this.nomDepartement;\r\n   }\r\n   \r\n   /**\r\n    * Fixer le nom du d&#233;partement.\r\n    * @param nomDepartement Nom du d&#233;partement.\r\n    */\r\n   public void setNomDepartement(String nomDepartement) {\r\n      this.nomDepartement = nomDepartement;\r\n   }\r\n   \r\n   /**\r\n    * Renvoyer le nom de l&#39;EPCI dont la commune est membre ou si&#232;ge.\r\n    * @return Nom de l&#39;EPCI.\r\n    */\r\n   public String getNomEPCI() {\r\n      return this.nomEPCI;\r\n   }\r\n\r\n   /**\r\n    * Fixer le nom de l&#39;EPCI dont la commune est membre ou si&#232;ge.\r\n    * @param nomEPCI Nom de l&#39;EPCI.\r\n    */\r\n   public void setNomEPCI(String nomEPCI) {\r\n      this.nomEPCI = nomEPCI;\r\n   }\r\n\r\n   /**\r\n    * Fixer le nom de la ville.\r\n    * @param nomVille Nom de la ville.\r\n    */\r\n   public void setNomCommune(String nomVille) {\r\n      this.nomCommune = nomVille;\r\n   }\r\n\r\n   /**\r\n    * Fixer le nom de la commune en majuscules.\r\n    * @param nomVille Nom de la commune.\r\n    */\r\n   public void setNomMajuscules(String nomVille) {\r\n      this.nomMajuscules = nomVille;\r\n   }\r\n   \r\n   /**\r\n    * Fixer la population de la commune une ann&#233;e donn&#233;e.\r\n    * @param population Population.\r\n    */\r\n   public void setPopulation(Integer population) {\r\n      this.population = population;\r\n   }\r\n\r\n   /**\r\n    * Renvoyer le SIREN de la commune.\r\n    * @return SIREN.\r\n    */\r\n   public SIRENCommune asSiren() {\r\n      return new SIRENCommune(this.sirenCommune);\r\n   }\r\n\r\n   /**\r\n    * Renvoyer le SIREN de la commune.\r\n    * @return SIREN.\r\n    */\r\n   public String getSirenCommune() {\r\n      return this.sirenCommune;\r\n   }\r\n\r\n   /**\r\n    * Fixer le code SIREN de la commune.\r\n    * @param sirenCommune Siren.\r\n    */\r\n   public void setSirenCommune(String sirenCommune) {\r\n      this.sirenCommune = sirenCommune;\r\n   }\r\n   \r\n   /**\r\n    * Renvoyer la strate communale.\r\n    * @return Strate :&lt;br&gt;\r\n    * 1 : Moins de 100 habitants&lt;br&gt; \r\n    * 2 : De 100 &#224; moins de 200 habitants&lt;br&gt;\r\n    * 3 : De 200 &#224; moins de 500 habitants&lt;br&gt;\r\n    * 4 : De 500 &#224; moins de 2 000 habitants&lt;br&gt;\r\n    * 5 : De 2 000 &#224; moins de 3 500 habitants&lt;br&gt;\r\n    * 6 : De 3 500 &#224; moins de 5 000 habitants&lt;br&gt;\r\n    * 7 : De 5 000 &#224; moins de 10 000 habitants&lt;br&gt;\r\n    * 8 : de 10 000 &#224; moins de 20 000 habitants&lt;br&gt;\r\n    * 9 : de 20 000 &#224; moins de 50 000 habitants&lt;br&gt;\r\n    * 10 : de 50 000 &#224; moins de 100 000 habitants&lt;br&gt;\r\n    * 11 : 100 000 habitants et plus\r\n    */\r\n   public Integer getStrateCommune() {\r\n      return this.strateCommune;\r\n   }\r\n   \r\n   /**\r\n    * Fixer la strate communale.\r\n    * @param strate Strate communele.\r\n    */\r\n   public void setStrateCommune(Integer strate) {\r\n      this.strateCommune = strate;\r\n   }\r\n\r\n   /**\r\n    * Renvoyer la surface de la commune, en hectares.\r\n    * @return Surface en hectares.\r\n    */\r\n   public Double getSurface() {\r\n      return this.surface;\r\n   }\r\n\r\n   /**\r\n    * Fixer la surface de la communes, en hectares.\r\n    * @param surface Surface en hectares.\r\n    */\r\n   public void setSurface(Double surface) {\r\n      this.surface = surface;\r\n   }\r\n\r\n   /**\r\n    * Fixer le type nom et charni&#232;re.\r\n    * @param type Type nom et charni&#232;re.\r\n    */\r\n   public void setTypeNomEtCharniere(String type) {\r\n      this.typeNomEtCharniere = type;\r\n   }\r\n   \r\n   /**\r\n    * Renvoyer le type de commune. \r\n    * @return Type de commune.\r\n    */\r\n   public String getTypeCommune() {\r\n      return this.typeCommune;\r\n   }\r\n\r\n   /**\r\n    * Fixer le type de commune.\r\n    * @param typeDeCommune Type de commune.\r\n    */\r\n   public void setTypeCommune(String typeDeCommune) {\r\n      this.typeCommune = typeDeCommune;\r\n   }\r\n\r\n   /**\r\n    * @see fr.fondation.objets.ObjetMetierIdentifiable#toString()\r\n    */\r\n   @Override\r\n   public String toString() {\r\n      return BabelTower.format(Commune.class, &quot;toString&quot;, this.nomCommune, this.nomMajuscules, this.codeDepartement, this.codeRegion,\r\n         this.codeCommuneParente, this.typeNomEtCharniere, this.codeCommune, this.sirenCommune, this.siegeGroupements, \r\n         this.membreGroupements, this.epciFiscalitePropre, this.arrondissement, this.codeCanton, this.population, this.strateCommune,\r\n         this.surface, this.longitude, this.latitude, this.nomDepartement, this.nomEPCI);\r\n   }\r\n}\r\n```\r\n\r\nMy hypothethis is that `Encoders.bean` change its way of working in `3.4.0`, or its prerequisites, but I have no clues about what it is refusing now.","link":"https://stackoverflow.com/questions/76036349/encoders-bean-doesnt-work-anymore-on-a-java-pojo-with-spark-3-4-0","title":"Encoders.bean doesn&#39;t work anymore on a Java POJO, with Spark 3.4.0","body":"<p>This method that worked well from Spark <code>3.2.x</code> to Spark <code>3.3.x</code>,</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Dataset&lt;Commune&gt; obtenirCommunes(SparkSession session, int anneeCOG) throws TechniqueException {\n   Dataset&lt;Row&gt; communes = rowCommunes(session, anneeCOG);\n\n   return communes\n      .select(communes.col(&quot;typeCommune&quot;), communes.col(&quot;codeCommune&quot;), communes.col(&quot;codeRegion&quot;), communes.col(&quot;codeDepartement&quot;),\n          communes.col(&quot;arrondissement&quot;), communes.col(&quot;typeNomEtCharniere&quot;), communes.col(&quot;nomMajuscules&quot;), communes.col(&quot;nomCommune&quot;), \n          communes.col(&quot;codeCanton&quot;), communes.col(&quot;codeCommuneParente&quot;), communes.col(&quot;sirenCommune&quot;), communes.col(&quot;populationTotale&quot;).alias(&quot;population&quot;),\n          communes.col(&quot;strateCommune&quot;), communes.col(&quot;codeEPCI&quot;), communes.col(&quot;surface&quot;), communes.col(&quot;longitude&quot;), communes.col(&quot;latitude&quot;),\n          communes.col(&quot;nomDepartement&quot;), communes.col(&quot;nomEPCI&quot;))\n      .as(Encoders.bean(Commune.class))\n      .cache();\n   }\n</code></pre>\n<p>is now failing with Spark <code>3.4.0</code>, through this test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Charger le Code Officiel Géographique entier.\n * @throws CommuneInexistanteException si la commune recherchée n'existe pas.\n * @throws TechniqueException si un incident survient.\n */\n@Test\n@DisplayName(&quot;Lecture du code officiel géographique&quot;)\nvoid cog() throws TechniqueException, CommuneInexistanteException {\n   for(int cog = COG_START; cog &lt;= COG_END; cog ++) {\n      if (this.toutesAnnees == false &amp;&amp; cog != COG_END) {\n         continue;\n      }\n         \n      CodeOfficielGeographique maillage = this.cogDataset.obtenirCodeOfficielGeographique(this.session, cog, true);\n      LOGGER.info(&quot;Code Officiel Géographique : {} communes, {} intercommunalités.&quot;, maillage.getCommunes().size(), maillage.getIntercommunalites().size());\n         \n      Intercommunalite intercommunalite = maillage.getIntercommunalites().values().iterator().next();\n      LOGGER.info(&quot;La première intercommunalité : {}&quot;, intercommunalite);\n         \n      Commune cambremer = maillage.getCommune(&quot;14126&quot;);\n      assertNotNull(cambremer, MessageFormat.format(&quot;Cambremer aurait dû être trouvé dans le COG {0}.&quot;, cog));\n      LOGGER.info(cambremer.toString());\n   }\n}\n</code></pre>\n<p>The failure comes with a not very clear log (it's the line <code>CodeOfficielGeographique maillage = this.cogDataset.obtenirCodeOfficielGeographique(this.session, cog, true)</code> that calls <code>CogDataset:obtenirCommunes</code> who fails):</p>\n<pre><code>java.util.NoSuchElementException: None.get\n\n    at scala.None$.get(Option.scala:627)\n    at scala.None$.get(Option.scala:626)\n    at org.apache.spark.sql.catalyst.ScalaReflection$.$anonfun$deserializerFor$8(ScalaReflection.scala:359)\n    at scala.collection.immutable.ArraySeq.map(ArraySeq.scala:75)\n    at scala.collection.immutable.ArraySeq.map(ArraySeq.scala:35)\n    at org.apache.spark.sql.catalyst.ScalaReflection$.deserializerFor(ScalaReflection.scala:348)\n    at org.apache.spark.sql.catalyst.ScalaReflection$.deserializerFor(ScalaReflection.scala:183)\n    at org.apache.spark.sql.catalyst.encoders.ExpressionEncoder$.apply(ExpressionEncoder.scala:56)\n    at org.apache.spark.sql.catalyst.encoders.ExpressionEncoder$.javaBean(ExpressionEncoder.scala:62)\n    at org.apache.spark.sql.Encoders$.bean(Encoders.scala:179)\n    at org.apache.spark.sql.Encoders.bean(Encoders.scala)\n    at fr.ecoemploi.spark.dataset.cog.CogDataset.obtenirCommunes(CogDataset.java:220)\n    at fr.ecoemploi.spark.dataset.cog.CogDataset.obtenirCodeOfficielGeographique(CogDataset.java:186)\n    at fr.ecoemploi.spark.dataset.cog.CommuneObjectsMetiersIT.cog(CommuneObjectsMetiersIT.java:92)\n</code></pre>\n<p>And the <code>Commune</code> object that <code>Encoders.bean</code> targets, is this one:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package fr.ecoemploi.metier.territoire;\n\nimport static fr.ecoemploi.metier.territoire.PrefixageNomCommune.*;\n\nimport java.io.Serial;\nimport java.text.*;\nimport java.util.*;\nimport java.util.function.Predicate;\n\nimport javax.validation.constraints.*;\n\nimport org.apache.commons.lang3.*;\n\nimport fr.fondation.utilitaires.autocontrole.*;\nimport fr.fondation.utilitaires.localisation.*;\nimport io.swagger.v3.oas.annotations.*;\nimport io.swagger.v3.oas.annotations.media.*;\n\n/**\n * Une commune.\n * @author Marc LE BIHAN.\n */\n@Schema(description = &quot;Une commune du Code Officiel Géographique&quot;)\npublic class Commune extends ObjetMetierSpark {\n   /** Serial ID */\n   @Serial\n   private static final long serialVersionUID = 4381577514414536917L;\n\n   /** Collator utilisé pour comparer les noms de communes, sans accents. */\n   private static final Collator collator = Collator.getInstance(Locale.FRENCH);\n   \n   static {\n      collator.setStrength(Collator.PRIMARY);\n   }\n\n   /** Code de la commune. */\n   @NotNull @Size(min = 5, max = 5) @Schema(description = &quot;Code de la commune&quot;, example = &quot;29019&quot;)\n   private String codeCommune;\n   \n   /** Code ddépartement. */\n   @NotNull @Size(min=2, max=3) @Schema(description = &quot;Code du département&quot;, example = &quot;972&quot;)\n   private String codeDepartement;\n   \n   /** Nom du département. */\n   @NotNull @Schema(description = &quot;Nom du département&quot;, example = &quot;Finistère&quot;)\n   private String nomDepartement;\n\n   /** Code de la commune parente (pour arrondissements, communes associées ou déléguées). */\n   @Size(min = 9, max = 9) @Schema(description = &quot;Code de la commune parente&quot;, example = &quot;75056&quot;, nullable = true)\n   private String codeCommuneParente;\n\n   /** Code INSEE de la région auquel appartient ce département. */\n   @NotNull @Size(min = 2, max = 2) @Schema(description = &quot;Code de la région&quot;, example = &quot;84&quot;)\n   private String codeRegion;\n   \n   /** Code Canton de la commune. */\n   @Schema(description = &quot;Code du canton&quot;, nullable = true)\n   private String codeCanton;\n\n   /** Nom de la ville. */\n   @NotNull @Schema(description = &quot;Nom de la commune&quot;, example = &quot;Brest&quot;)\n   private String nomCommune;\n\n   /** Nom en majuscule. */\n   @NotNull @Schema(description = &quot;Nom de la commune en majuscules&quot;, example = &quot;BREST&quot;)\n   private String nomMajuscules;\n\n   /** Type et nom charnière. */\n   @NotNull @Size(min=1, max=1)\n   @Schema(description = &quot;Type de nom et charnière: &lt;ul&gt;&quot;\n         + &quot;&lt;li&gt;0  Pas d'article et le nom commence par une consonne sauf H muet  charnière = DE&lt;/li&gt;&quot;\n         + &quot;&lt;li&gt;1  Pas d'article et le nom commence par une voyelle ou un H muet  charnière = D'&lt;/li&gt;&quot;\n         + &quot;&lt;li&gt;2  Article = LE   charnière = DU&lt;/li&gt;&quot;\n         + &quot;&lt;li&gt;3  Article = LA   charnière = DE LA&lt;/li&gt;&quot;\n         + &quot;&lt;li&gt;4  Article = LES  charnière = DES&lt;/li&gt;&quot;\n         + &quot;&lt;li&gt;5  Article = L'   charnière = DE L'&lt;/li&gt;&quot;\n         + &quot;&lt;li&gt;6  Article = AUX  charnière = DES&lt;/li&gt;&quot;\n         + &quot;&lt;li&gt;7  Article = LAS  charnière = DE LAS&lt;/li&gt;&quot;\n         + &quot;&lt;li&gt;8  Article = LOS  charnière = DE LOS&lt;/li&gt;&quot;\n         + &quot;&lt;/ul&gt;&quot;)\n   private String typeNomEtCharniere;\n\n   /** SIREN de la commune (permet de la lier à son intercommunalité). */\n   @NotNull @Size(min=9, max=9) @Schema(description = &quot;Numéro SIREN de la commune&quot;, example = &quot;212900195&quot;)\n   private String sirenCommune;\n\n   /** Liste des groupements dont cette commune est le siège. */\n   @NotNull \n   @Schema(description = &quot;Liste des groupements (EPCI, ultérieurement : syndicats) dont cette commune est le siège. &quot;\n         + &quot;Cette liste est vide si la commune n'est siège d'aucun syndicat ou intercommunalité.&quot;, example = &quot;[242900314]&quot;)\n   private Set&lt;String&gt; siegeGroupements = new HashSet&lt;&gt;();\n   \n   /** Liste des intercommunalités dont cette commune est membre. */\n   @NotNull @Schema(description = &quot;Liste des groupepements (EPCI, ultérieurement : syndicats) dont cette commune est membre.&quot;, example = &quot;[242900314]&quot;)\n   private Set&lt;String&gt; membreGroupements = new HashSet&lt;&gt;();\n   \n   /** Intercommunalité à fiscalité propre à laquelle cette commune appartient (qu'elle en soit siège ou membre). */\n   @NotNull @Size(min=9, max=9) @Schema(description = &quot;Numéro SIREN de l'intercommunalité dont cette commune est siège ou membre.&quot;, example = &quot;242900314&quot;)\n   private String epciFiscalitePropre;\n   \n   /** Nom de de l'intercommunalité à laquelle la commune appartient. */\n   @NotNull @Schema(description = &quot;Nom de l'intercommunalité à laquelle la commune appartient&quot;, example = &quot;Brest Métropole&quot;)\n   private String nomEPCI;\n   \n   /** Arrondissement de la commune. */\n   @Schema(description = &quot;Code de l'arrondissement de la commune.&quot;, nullable = true)\n   private String arrondissement;\n   \n   /** Population de la commune. */\n   @NotNull @Schema(description = &quot;Population totale de la commune.&quot;)\n   private Integer population;\n   \n   /** Type de la commune. */\n   @NotNull\n   @Schema(description = &quot;Type de la commune : &lt;ul&gt;&quot; +\n      &quot;&lt;li&gt;COM   Commune&lt;/li&gt;&quot; + \n      &quot;&lt;li&gt;COMA  Commune associée&lt;/li&gt;&quot; + \n      &quot;&lt;li&gt;COMD  Commune déléguée&lt;/li&gt;&quot; + \n      &quot;&lt;li&gt;ARM   Arrondissement municipal&lt;/li&gt;&quot;\n      + &quot;&lt;/ul&gt;&quot;, example = &quot;COM&quot;)\n   private String typeCommune;\n   \n   /** Strate communale. */\n   @NotNull\n   @Schema(description = &quot;Strate communale : &lt;ul&gt;&quot; +\n         &quot;&lt;li&gt;1 : Moins de 100 habitants&lt;/li&gt;&quot; + \n         &quot;&lt;li&gt;2 : De 100 à moins de 200 habitants&lt;/li&gt;&quot; + \n         &quot;&lt;li&gt;3 : De 200 à moins de 500 habitants&lt;/li&gt;&quot; + \n         &quot;&lt;li&gt;4 : De 500 à moins de 2 000 habitants&lt;/li&gt;&quot; + \n         &quot;&lt;li&gt;5 : De 2 000 à moins de 3 500 habitants&lt;/li&gt;&quot; + \n         &quot;&lt;li&gt;6 : De 3 500 à moins de 5 000 habitants&lt;/li&gt;&quot; + \n         &quot;&lt;li&gt;7 : De 5 000 à moins de 10 000 habitants&lt;/li&gt;&quot; + \n         &quot;&lt;li&gt;8 : de 10 000 à moins de 20 000 habitants&lt;/li&gt;&quot; + \n         &quot;&lt;li&gt;9 : de 20 000 à moins de 50 000 habitants&lt;/li&gt;&quot; + \n         &quot;&lt;li&gt;10 : de 50 000 à moins de 100 000 habitants&lt;/li&gt;&quot; + \n         &quot;&lt;li&gt;11 : 100 000 habitants et plus&lt;/li&gt;&quot; + \n         &quot;&lt;/ul&gt;&quot;, example = &quot;1&quot;)\n   private Integer strateCommune;\n   \n   /** Surface de la commune en hectares. */\n   @Schema(description = &quot;Surface de la commune, en hectares. N'est pas alimenté pour les arrondissements.&quot;, example = &quot;1520.25&quot;, nullable = true)\n   private Double surface;\n   \n   /** Longitude du centroïde de la commune. */\n   @Schema(description = &quot;Longitude du centroïde de la commune. N'est pas alimenté pour les arrondissements.&quot;, example = &quot;-4.2908&quot;, nullable = true)\n   private Double longitude;\n   \n   /** Latitude du centroïde de la commune. */\n   @Schema(description = &quot;Latitude du centroïde de la commune. N'est pas alimenté pour les arrondissements.&quot;, example = &quot;48.2327&quot;, nullable = true)\n   private Double latitude;\n\n   /**\n    * Construire une commune.\n    */\n   public Commune() {\n   }\n   \n   /**\n    * Ajouter une intercommunalité dont cette commune est membre.\n    * @param sirenIntercommunalite SIREN de l'intercommunalité.\n    */\n   public void ajouterMembreGroupement(String sirenIntercommunalite) {\n      this.membreGroupements.add(sirenIntercommunalite);\n   }\n   \n   /**\n    * Ajouter une intercommunalité dont cette commune est le siège.\n    * @param sirenIntercommunalite SIREN de l'intercommunalité.\n    */\n   public void ajouterSiegeGroupement(String sirenIntercommunalite) {\n      this.siegeGroupements.add(sirenIntercommunalite);\n   }\n\n   /**\n    * Renvoyer le code Canton de la commune. \n    * @return Code canton de la commune.\n    */\n   public String getCodeCanton() {\n      return this.codeCanton;\n   }\n\n   /**\n    * Fixer le code canton de la commune.\n    * @param codeCanton Code canton de la commune.\n    */\n   public void setCodeCanton(String codeCanton) {\n      this.codeCanton = codeCanton;\n   }\n\n   /**\n    * Renvoyer le code de la commune.\n    * @return Code de la commune.\n    */\n   public String getCodeCommune() {\n      return this.codeCommune;\n   }\n\n   /**\n    * Renvoyer le code de la commune.\n    * @return Code de la commune.\n    */\n   public CodeCommune astCodeCommune() {\n      return new CodeCommune(this.codeCommune);\n   }\n\n   /**\n    * Renvoyer le code commune parente (pour arrondissements, communes associées ou déléguées).\n    * @return Code commune parente.\n    */\n   public CodeCommune astCodeCommuneParente() {\n      return new CodeCommune(this.codeCommuneParente);\n   }\n   \n   /**\n    * Renvoyer le code commune parente (pour arrondissements, communes associées ou déléguées).\n    * @return Code commune parente.\n    */\n   public String getCodeCommuneParente() {\n      return this.codeCommuneParente;\n   }\n\n   /**\n    * Renvoyer le code département.\n    * @return Code département.\n    */\n   public CodeDepartement asCodeDepartement() {\n      return new CodeDepartement(this.codeDepartement);\n   }\n\n   /**\n    * Renvoyer le code département.\n    * @return Code département.\n    */\n   public String getCodeDepartement() {\n      return this.codeDepartement;\n   }\n\n   /**\n    * Renvoyer le code région.\n    * @return Code région.\n    */\n   public CodeRegion asCodeRegion() {\n      return new CodeRegion(this.codeRegion);\n   }\n\n   /**\n    * Renvoyer le code région.\n    * @return Code région.\n    */\n   public String getCodeRegion() {\n      return this.codeRegion;\n   }\n   \n   /**\n    * Renvoyer l'intercommunalité à fiscalité propre à laquelle cette commune appartient, qu'elle en soit siège ou membre.\n    * @return Intercommunalité.\n    */\n   public SIREN asEpciFiscalitePropre() {\n      return new SIREN(this.epciFiscalitePropre);\n   }\n\n   /**\n    * Renvoyer l'intercommunalité à fiscalité propre à laquelle cette commune appartient, qu'elle en soit siège ou membre.\n    * @return Intercommunalité.\n    */\n   @Hidden\n   public String getCodeEPCI() {\n      return this.epciFiscalitePropre;\n   }\n\n   /**\n    * Fixer l'intercommunalité à fiscalité propre à laquelle cette commune appartient, qu'elle en soit siège ou membre.\n    * @param epci Intercommunalité.\n    */\n   @Hidden\n   public void setCodeEPCI(String epci) {\n      this.epciFiscalitePropre = epci;\n   }\n\n   /**\n    * Renvoyer les groupements dont cette commune est membre.\n    * @return Groupements.\n    */\n   public Set&lt;String&gt; membreGroupements() {\n      return this.membreGroupements;\n   }\n\n   /**\n    * Renvoyer la liste des groupements dont cette commune est le siège.\n    * @return liste des groupements.\n    */\n   public Set&lt;String&gt; siegeGroupements() {\n      return this.siegeGroupements;\n   }\n   \n   /**\n    * Renvoyer l'arrondissement.\n    * @return Arrondissement.\n    */\n   public String getArrondissement() {\n      return this.arrondissement;\n   }\n   \n   /**\n    * Déterminer si ce code commune désigne une collectivité d'outre-mer :&lt;br&gt;\n    * Attention, il s'agit des départements 975, 977, 978 et 98, et pas les départements d'outremer 971, 972, 973, 974 et 976.\n    * @return true si c'est le cas.\n    */\n   @Hidden\n   public boolean isCollectiviteOutremer() {\n      return this.codeCommune != null &amp;&amp;\n         (this.codeCommune.startsWith(&quot;975&quot;) || this.codeCommune.startsWith(&quot;977&quot;) || this.codeCommune.startsWith(&quot;978&quot;) || this.codeCommune.startsWith(&quot;98&quot;));\n   }\n\n   /**\n    * Fixer l'arrondissement.\n    * @param arrondissement Arrondissement.\n    */\n   public void setArrondissement(String arrondissement) {\n      this.arrondissement = arrondissement;\n   }\n\n   /**\n    * Renvoyer le nom de la commune.\n    * @return Nom de la commune.\n    */\n   public String getNomCommune() {\n      return this.nomCommune;\n   }\n   \n   /**\n    * Déterminer si notre commune a le même nom que celle en paramètre.\n    * @param nomCandidat Nom de commune : il peut contenir une charnière.\n    * @return true si c'est le cas.\n    */\n   public boolean hasMemeNom(String nomCandidat) {\n      // Si le nom soumis vaut null, répondre non.\n      if (nomCandidat == null) {\n         return false;\n      }\n\n      // Faire une comparaison directe de nom de commune tout d'abord, car l'emploi du collator est très coûteux.\n      if (nomCandidat.equalsIgnoreCase(this.nomCommune)) {\n         return true;\n      }\n      \n      // Puis, rechercher avec les différentes charnières.\n      if (nomCandidat.equalsIgnoreCase(nomAvecType(false, PrefixageNomCommune.AUCUN))) {\n         return true;\n      }\n      \n      if (nomCandidat.equalsIgnoreCase(nomAvecType(false, PrefixageNomCommune.A))) {\n         return true;\n      }\n      \n      if (nomCandidat.equalsIgnoreCase(nomAvecType(false, PrefixageNomCommune.POUR))) {\n         return true;\n      }\n      \n      // En cas d'échec, reprendre ces tests, mais avec le collator, plus lent, mais qui passera outre les caractères accentués.\n      if (collator.equals(nomCandidat, this.nomCommune)) {\n         return true;\n      }\n      \n      if (collator.equals(nomCandidat, nomAvecType(false, PrefixageNomCommune.AUCUN))) {\n         return true;\n      }\n      \n      if (collator.equals(nomCandidat, nomAvecType(false, PrefixageNomCommune.A))) {\n         return true;\n      }\n\n      if (collator.equals(nomCandidat, nomAvecType(false, PrefixageNomCommune.POUR))) {\n         return true;\n      }\n\n      // Alternative aux tests précédents\n      List&lt;Predicate&lt;String&gt;&gt; memeNoms = new ArrayList&lt;&gt;();\n      memeNoms.add(nom -&gt; nom.equalsIgnoreCase(nomAvecType(false, PrefixageNomCommune.AUCUN)));\n      memeNoms.add(nom -&gt; nom.equalsIgnoreCase(nomAvecType(false, PrefixageNomCommune.A)));\n      memeNoms.add(nom -&gt; nom.equalsIgnoreCase(nomAvecType(false, PrefixageNomCommune.POUR)));\n      memeNoms.add(nom -&gt; collator.equals(nom, this.nomCommune));\n      memeNoms.add(nom -&gt; collator.equals(nom, nomAvecType(false, PrefixageNomCommune.AUCUN)));\n      memeNoms.add(nom -&gt; collator.equals(nom, nomAvecType(false, PrefixageNomCommune.A)));\n      memeNoms.add(nom -&gt; collator.equals(nom, nomAvecType(false, PrefixageNomCommune.POUR)));\n\n      return memeNoms.stream().anyMatch(memeNom -&gt; memeNom.test(nomCandidat));\n   }\n\n   /**\n    * Renvoyer le nom de la commune avec sa charnière accolée : Ville D'Ermenouville, Ville de Villenoy\n    * @param majuscules true S'il faut que la ville et sa charnière soient en majuscules.\n    * @return Nom de la commune avec sa charnière.\n    */\n   public String nomAvecCharniere(boolean majuscules) {\n      String articleCommune = switch(asArticleEtCharniere()) {\n         case AUCUN_D_APOSTROPHE -&gt; &quot;d'&quot;;\n         case AUX_DES, LES_DES -&gt; &quot;des &quot;;\n         case LAS_DE_LAS -&gt; &quot;de las &quot;;\n         case LA_DE_LA -&gt; &quot;de la &quot;;\n         case LE_DU -&gt; &quot;du &quot;;\n         case LOS_DE_LOS -&gt; &quot;de los &quot;;\n         case L_APOSTROPHE_DE_L_APOSTROPHE -&gt; &quot;l'&quot;;\n         default -&gt; // inclut le cas : AUCUN_CONSONNE_DE\n            &quot;de &quot;;\n      };\n\n      String texte = articleCommune + (majuscules ? this.nomMajuscules : this.nomCommune);\n      return majuscules ? texte.toUpperCase(Locale.FRENCH) : texte;\n   }\n\n   /**\n    * Renvoyer le nom de la commune avec son type accolé : Bienvenue à Ermenouville, Bienvenue aux Ullis.\n    * @param majuscules true S'il faut que la ville et sa charnière soient en majuscules.\n    * @param prefixage Indique s'il faut replacer type vide par 'à', 'pour' : &quot;Bienvenue à St-Etienne&quot;, &quot;pour les Ullis&quot;.\n    * @return Nom de la commune avec sa charnière.\n    */\n   public String nomAvecType(boolean majuscules, PrefixageNomCommune prefixage) {\n      String articleCommune = &quot;&quot;;\n      String prefixe = &quot;&quot;;\n\n      final String PREFIXE_POUR = &quot;pour &quot;;\n\n      switch(asArticleEtCharniere()) {\n         case AUCUN_CONSONNE_DE -&gt; {\n            if (prefixage.equals(A))\n               articleCommune = &quot;à &quot;;\n\n            if (prefixage.equals(POUR))\n               prefixe = PREFIXE_POUR;\n         }\n\n         case AUCUN_D_APOSTROPHE -&gt; {\n            if (prefixage.equals(A))\n               prefixe = &quot;à &quot;;\n\n            if (prefixage.equals(POUR))\n               prefixe = PREFIXE_POUR;\n         }\n\n         case AUX_DES -&gt; articleCommune = &quot;aux &quot;;\n\n         case LAS_DE_LAS -&gt; {\n            articleCommune = &quot;las &quot;;\n\n            if (prefixage.equals(POUR))\n               prefixe = PREFIXE_POUR;\n         }\n\n         case LA_DE_LA -&gt; {\n            articleCommune = &quot;la &quot;;\n\n            if (prefixage.equals(POUR))\n               prefixe = PREFIXE_POUR;\n         }\n\n         case LES_DES -&gt; {\n            articleCommune = &quot;les &quot;;\n\n            if (prefixage.equals(POUR))\n               prefixe = PREFIXE_POUR;\n         }\n\n         case LE_DU -&gt; {\n            articleCommune = &quot;le &quot;;\n\n            if (prefixage.equals(POUR))\n               prefixe = PREFIXE_POUR;\n         }\n\n         case LOS_DE_LOS -&gt; {\n            articleCommune = &quot;los &quot;;\n\n            if (prefixage.equals(POUR))\n               prefixe = PREFIXE_POUR;\n         }\n\n         case L_APOSTROPHE_DE_L_APOSTROPHE -&gt; {\n            articleCommune = &quot;l'&quot;;\n\n            if (prefixage.equals(POUR))\n               prefixe = PREFIXE_POUR;\n         }\n\n         default -&gt; {\n            if (prefixage.equals(A))\n               prefixe = &quot;à &quot;;\n         }\n      }\n\n      String texte = prefixe + articleCommune + (majuscules ? this.nomMajuscules : this.nomCommune);\n      return majuscules ? texte.toUpperCase(Locale.FRENCH) : texte;\n   }\n\n   /**\n    * Renvoyer le nom de la commune en majuscules.\n    * @return Nom de la commune.\n    */\n   public String getNomMajuscules() {\n      return this.nomMajuscules;\n   }\n   \n   /**\n    * Obtenir la population de la commune une année particulière.\n    * @return population de la commune.\n    */\n   public Integer getPopulation() {\n      return this.population;\n   }\n\n   /**\n    * Convertit un type de nom INSEE en enum charnière INSEE.\n    * @return Enumération.\n    */\n   public ArticleEtCharniereINSEE asArticleEtCharniere() {\n      for(ArticleEtCharniereINSEE candidat : ArticleEtCharniereINSEE.values()) {\n         if (candidat.getCode().equals(this.typeNomEtCharniere))\n            return candidat;\n      }\n\n      return null;\n   }\n   \n   /**\n    * Renvoyer l'article et la charnière.\n    * @return Article et charnière.\n    */\n   public String getTypeNomEtCharniere() {\n      return this.typeNomEtCharniere;\n   }\n   \n   /**\n    * Déterminer si la commune a un numéro de SIREN alimenté\n    * (elle en a forcément un, mais parfois l'objet métier ne le porte pas encore).\n    * @return true, si c'est le cas.\n    */\n   public boolean hasSIREN() {\n      return this.sirenCommune != null &amp;&amp; StringUtils.isBlank(this.sirenCommune) == false;\n   }\n\n   /**\n    * Fixer le code de la commune.\n    * @param code Code de la commune.\n    */\n   public void setCodeCommune(String code) {\n      this.codeCommune = code;\n   }\n\n   /**\n    * Fixer le code de la commune parente (pour arrondissements, communes associées ou déléguées).\n    * @param code Code de la commune parente (pour arrondissements, communes associées ou déléguées).\n    */\n   public void setCodeCommuneParente(String code) {\n      this.codeCommuneParente = code;\n   }\n\n   /**\n    * Fixer le code département.\n    * @param code Code département.\n    */\n   public void setCodeDepartement(String code) {\n      this.codeDepartement = code;\n   }\n\n   /**\n    * Fixer le code région.\n    * @param code Code région.\n    */\n   public void setCodeRegion(String code) {\n      this.codeRegion = code;\n   }\n\n   /**\n    * Fixer les groupements dont cette commune est membre.\n    * @param groupements Groupements.\n    */\n   public void membreGroupements(Set&lt;String&gt; groupements) {\n      this.membreGroupements = groupements;\n   }\n   \n   /**\n    * Fixer les groupements dont cette commune est le siège.\n    * @param siegeIntercommunalites Intercommunalités.\n    */\n   public void siegeGroupements(Set&lt;String&gt; siegeIntercommunalites) {\n      this.siegeGroupements = siegeIntercommunalites;\n   }\n\n   /**\n    * Renvoyer la latitude de la commune.\n    * @return Latitude de la commune.\n    */\n   public Double getLatitude() {\n      return this.latitude;\n   }\n\n   /**\n    * Fixer la latitude de la commune.\n    * @param latitude Latitude de la commune.\n    */\n   public void setLatitude(Double latitude) {\n      this.latitude = latitude;\n   }\n\n   /**\n    * Renvoyer la longitude de la commune.\n    * @return Longitude de la commune.\n    */\n   public Double getLongitude() {\n      return this.longitude;\n   }\n\n   /**\n    * Fixer la longitude de la commune.\n    * @param longitude Longitude de la commune. \n    */\n   public void setLongitude(Double longitude) {\n      this.longitude = longitude;\n   }\n   \n   /**\n    * Renvoyer le nom du département.\n    * @return Nom du département.\n    */\n   public String getNomDepartement() {\n      return this.nomDepartement;\n   }\n   \n   /**\n    * Fixer le nom du département.\n    * @param nomDepartement Nom du département.\n    */\n   public void setNomDepartement(String nomDepartement) {\n      this.nomDepartement = nomDepartement;\n   }\n   \n   /**\n    * Renvoyer le nom de l'EPCI dont la commune est membre ou siège.\n    * @return Nom de l'EPCI.\n    */\n   public String getNomEPCI() {\n      return this.nomEPCI;\n   }\n\n   /**\n    * Fixer le nom de l'EPCI dont la commune est membre ou siège.\n    * @param nomEPCI Nom de l'EPCI.\n    */\n   public void setNomEPCI(String nomEPCI) {\n      this.nomEPCI = nomEPCI;\n   }\n\n   /**\n    * Fixer le nom de la ville.\n    * @param nomVille Nom de la ville.\n    */\n   public void setNomCommune(String nomVille) {\n      this.nomCommune = nomVille;\n   }\n\n   /**\n    * Fixer le nom de la commune en majuscules.\n    * @param nomVille Nom de la commune.\n    */\n   public void setNomMajuscules(String nomVille) {\n      this.nomMajuscules = nomVille;\n   }\n   \n   /**\n    * Fixer la population de la commune une année donnée.\n    * @param population Population.\n    */\n   public void setPopulation(Integer population) {\n      this.population = population;\n   }\n\n   /**\n    * Renvoyer le SIREN de la commune.\n    * @return SIREN.\n    */\n   public SIRENCommune asSiren() {\n      return new SIRENCommune(this.sirenCommune);\n   }\n\n   /**\n    * Renvoyer le SIREN de la commune.\n    * @return SIREN.\n    */\n   public String getSirenCommune() {\n      return this.sirenCommune;\n   }\n\n   /**\n    * Fixer le code SIREN de la commune.\n    * @param sirenCommune Siren.\n    */\n   public void setSirenCommune(String sirenCommune) {\n      this.sirenCommune = sirenCommune;\n   }\n   \n   /**\n    * Renvoyer la strate communale.\n    * @return Strate :&lt;br&gt;\n    * 1 : Moins de 100 habitants&lt;br&gt; \n    * 2 : De 100 à moins de 200 habitants&lt;br&gt;\n    * 3 : De 200 à moins de 500 habitants&lt;br&gt;\n    * 4 : De 500 à moins de 2 000 habitants&lt;br&gt;\n    * 5 : De 2 000 à moins de 3 500 habitants&lt;br&gt;\n    * 6 : De 3 500 à moins de 5 000 habitants&lt;br&gt;\n    * 7 : De 5 000 à moins de 10 000 habitants&lt;br&gt;\n    * 8 : de 10 000 à moins de 20 000 habitants&lt;br&gt;\n    * 9 : de 20 000 à moins de 50 000 habitants&lt;br&gt;\n    * 10 : de 50 000 à moins de 100 000 habitants&lt;br&gt;\n    * 11 : 100 000 habitants et plus\n    */\n   public Integer getStrateCommune() {\n      return this.strateCommune;\n   }\n   \n   /**\n    * Fixer la strate communale.\n    * @param strate Strate communele.\n    */\n   public void setStrateCommune(Integer strate) {\n      this.strateCommune = strate;\n   }\n\n   /**\n    * Renvoyer la surface de la commune, en hectares.\n    * @return Surface en hectares.\n    */\n   public Double getSurface() {\n      return this.surface;\n   }\n\n   /**\n    * Fixer la surface de la communes, en hectares.\n    * @param surface Surface en hectares.\n    */\n   public void setSurface(Double surface) {\n      this.surface = surface;\n   }\n\n   /**\n    * Fixer le type nom et charnière.\n    * @param type Type nom et charnière.\n    */\n   public void setTypeNomEtCharniere(String type) {\n      this.typeNomEtCharniere = type;\n   }\n   \n   /**\n    * Renvoyer le type de commune. \n    * @return Type de commune.\n    */\n   public String getTypeCommune() {\n      return this.typeCommune;\n   }\n\n   /**\n    * Fixer le type de commune.\n    * @param typeDeCommune Type de commune.\n    */\n   public void setTypeCommune(String typeDeCommune) {\n      this.typeCommune = typeDeCommune;\n   }\n\n   /**\n    * @see fr.fondation.objets.ObjetMetierIdentifiable#toString()\n    */\n   @Override\n   public String toString() {\n      return BabelTower.format(Commune.class, &quot;toString&quot;, this.nomCommune, this.nomMajuscules, this.codeDepartement, this.codeRegion,\n         this.codeCommuneParente, this.typeNomEtCharniere, this.codeCommune, this.sirenCommune, this.siegeGroupements, \n         this.membreGroupements, this.epciFiscalitePropre, this.arrondissement, this.codeCanton, this.population, this.strateCommune,\n         this.surface, this.longitude, this.latitude, this.nomDepartement, this.nomEPCI);\n   }\n}\n</code></pre>\n<p>My hypothethis is that <code>Encoders.bean</code> change its way of working in <code>3.4.0</code>, or its prerequisites, but I have no clues about what it is refusing now.</p>\n"},{"tags":["java","android","flutter","kotlin","gradle"],"comments":[{"score":0,"post_type":"question","creation_date":1698312149,"post_id":77365668,"comment_id":136390299,"body_markdown":"Did you change the Java version inside File-&gt;Preferences-&gt;Build, Execution, Deployment -&gt; Build Tools -&gt; Gradle?","link":"https://stackoverflow.com/questions/77365668/android-studio-build-error-compiledebugjavawithjavac-task-current-target-is-1#comment136390299_77365668","body":"Did you change the Java version inside File-&gt;Preferences-&gt;Build, Execution, Deployment -&gt; Build Tools -&gt; Gradle?"},{"score":0,"post_type":"question","creation_date":1698312284,"post_id":77365668,"comment_id":136390321,"body_markdown":"I changed it to 17 there &#39;jbr 17&#39;","link":"https://stackoverflow.com/questions/77365668/android-studio-build-error-compiledebugjavawithjavac-task-current-target-is-1#comment136390321_77365668","body":"I changed it to 17 there &#39;jbr 17&#39;"},{"score":2,"post_type":"question","creation_date":1698312739,"post_id":77365668,"comment_id":136390418,"body_markdown":"Does [this](https://stackoverflow.com/questions/75480173/android-studio-build-error-compiledebugjavawithjavac-task-current-target-it-1) help?","link":"https://stackoverflow.com/questions/77365668/android-studio-build-error-compiledebugjavawithjavac-task-current-target-is-1#comment136390418_77365668","body":"Does <a href=\"https://stackoverflow.com/questions/75480173/android-studio-build-error-compiledebugjavawithjavac-task-current-target-it-1\">this</a> help?"}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1698322657,"creation_date":1698322657,"answer_id":77366929,"question_id":77365668,"body_markdown":"The error is caused because you are trying to use Java 17 instead of Java 8.\r\n\r\nIn your `build.gradle`\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    kotlinOptions {\r\n        jvmTarget = &#39;1.8&#39;\r\n    }\r\n\r\nCheck also: \r\n\r\n`Settings` -&gt; `Build, Execution, Deployment` -&gt; `Build Tools` -&gt; `Gradle` \r\n\r\nand check if `Gradle JDK` is set to 1.8","link":"https://stackoverflow.com/questions/77365668/android-studio-build-error-compiledebugjavawithjavac-task-current-target-is-1/77366929#77366929","title":"Android Studio build error - compileDebugJavaWithJavac task (current target is 1.8) and compileDebugKotlin task (current target is 17) f","body":"<p>The error is caused because you are trying to use Java 17 instead of Java 8.</p>\n<p>In your <code>build.gradle</code></p>\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_1_8\n}\n\nkotlinOptions {\n    jvmTarget = '1.8'\n}\n</code></pre>\n<p>Check also:</p>\n<p><code>Settings</code> -&gt; <code>Build, Execution, Deployment</code> -&gt; <code>Build Tools</code> -&gt; <code>Gradle</code></p>\n<p>and check if <code>Gradle JDK</code> is set to 1.8</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1698609837,"last_edit_date":1698609837,"creation_date":1698609505,"answer_id":77384997,"question_id":77365668,"body_markdown":"in your bulid.gradle update following\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-css --&gt;\r\n\r\n    //project level\r\n     id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.9.10&#39; apply false\r\n\r\n    //app level\r\n        composeOptions {\r\n            kotlinCompilerExtensionVersion &#39;1.5.3&#39;\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","link":"https://stackoverflow.com/questions/77365668/android-studio-build-error-compiledebugjavawithjavac-task-current-target-is-1/77384997#77384997","title":"Android Studio build error - compileDebugJavaWithJavac task (current target is 1.8) and compileDebugKotlin task (current target is 17) f","body":"<p>in your bulid.gradle update following</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>//project level\n id 'org.jetbrains.kotlin.android' version '1.9.10' apply false\n\n//app level\n    composeOptions {\n        kotlinCompilerExtensionVersion '1.5.3'\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1700559718,"creation_date":1700559718,"answer_id":77521756,"question_id":77365668,"body_markdown":"Try right-clicking on the project name and then click &#39;Open Module Settings&#39;\r\n\r\nChange the Gradle JDK to 17\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OfpGQ.png","link":"https://stackoverflow.com/questions/77365668/android-studio-build-error-compiledebugjavawithjavac-task-current-target-is-1/77521756#77521756","title":"Android Studio build error - compileDebugJavaWithJavac task (current target is 1.8) and compileDebugKotlin task (current target is 17) f","body":"<p>Try right-clicking on the project name and then click 'Open Module Settings'</p>\n<p>Change the Gradle JDK to 17</p>\n<p><a href=\"https://i.stack.imgur.com/OfpGQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OfpGQ.png\" alt=\"enter image description here\" /></a></p>\n"},{"comment_count":0,"score":-3,"last_activity_date":1701404774,"creation_date":1701404774,"answer_id":77583009,"question_id":77365668,"body_markdown":"\r\nThis error indicates a mismatch in Java and Kotlin compilation targets in your Android Studio project. The current target version for compileDebugJavaWithJavac is set to 1.8 (Java 8), while the target for compileDebugKotlin is set to 17. These should, ideally, match.\r\n\r\n\r\n1. Update Java Version\r\nEnsure that your compileOptions are in the Android block of your build.gradle file is set to a version compatible with both Java and Kotlin.\r\n\r\n \r\n\r\n    android {\r\n        compileOptions {\r\n            sourceCompatibility 1.8\r\n            targetCompatibility 1.8\r\n        }\r\n        // Other configurations...\r\n    }\r\n\r\n\r\n2. Update Kotlin Version\r\nCheck your build.gradle file for the Kotlin version and make sure it&#39;s compatible with your project. You can set the Kotlin version in the dependencies block:\r\n\r\n    dependencies {\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version&quot;\r\n    // Other dependencies...\r\n}\r\n\r\n\r\n\r\n3. Check Gradle Version\r\nEnsure that you are using an up-to-date version of the Gradle plugin in your build.gradle file:\r\n\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:7.0.0&#39; // Use the latest version\r\n        // Other dependencies...\r\n    }\r\n\r\n4. Clean and Rebuild\r\nAfter making these changes, clean your project and rebuild it. You can do this by selecting &quot;Build&quot; -&gt; &quot;Clean Project&quot; and then &quot;Build&quot; -&gt; &quot;Rebuild Project&quot; in Android Studio.\r\n\r\n5. Check Dependencies\r\nMake sure that all your dependencies, including any Kotlin or Java libraries, are compatible with the versions you are using.\r\n\r\n6. Review Android Studio Settings\r\nIn Android Studio, go to &quot;File&quot; -&gt; &quot;Project Structure&quot; and ensure that the JDK location is set correctly.\r\n\r\n7. Check Gradle Properties\r\nIn the gradle.properties file of your project, ensure that the Java version is set correctly:\r\n\r\norg.gradle.java.home=/path/to/your/jdk\r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77365668/android-studio-build-error-compiledebugjavawithjavac-task-current-target-is-1/77583009#77583009","title":"Android Studio build error - compileDebugJavaWithJavac task (current target is 1.8) and compileDebugKotlin task (current target is 17) f","body":"<p>This error indicates a mismatch in Java and Kotlin compilation targets in your Android Studio project. The current target version for compileDebugJavaWithJavac is set to 1.8 (Java 8), while the target for compileDebugKotlin is set to 17. These should, ideally, match.</p>\n<ol>\n<li><p>Update Java Version\nEnsure that your compileOptions are in the Android block of your build.gradle file is set to a version compatible with both Java and Kotlin.</p>\n<p>android {\ncompileOptions {\nsourceCompatibility 1.8\ntargetCompatibility 1.8\n}\n// Other configurations...\n}</p>\n</li>\n<li><p>Update Kotlin Version\nCheck your build.gradle file for the Kotlin version and make sure it's compatible with your project. You can set the Kotlin version in the dependencies block:</p>\n<p>dependencies {\nimplementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version&quot;\n// Other dependencies...\n}</p>\n</li>\n<li><p>Check Gradle Version\nEnsure that you are using an up-to-date version of the Gradle plugin in your build.gradle file:</p>\n<p>dependencies {\nclasspath 'com.android.tools.build:gradle:7.0.0' // Use the latest version\n// Other dependencies...\n}</p>\n</li>\n<li><p>Clean and Rebuild\nAfter making these changes, clean your project and rebuild it. You can do this by selecting &quot;Build&quot; -&gt; &quot;Clean Project&quot; and then &quot;Build&quot; -&gt; &quot;Rebuild Project&quot; in Android Studio.</p>\n</li>\n<li><p>Check Dependencies\nMake sure that all your dependencies, including any Kotlin or Java libraries, are compatible with the versions you are using.</p>\n</li>\n<li><p>Review Android Studio Settings\nIn Android Studio, go to &quot;File&quot; -&gt; &quot;Project Structure&quot; and ensure that the JDK location is set correctly.</p>\n</li>\n<li><p>Check Gradle Properties\nIn the gradle.properties file of your project, ensure that the Java version is set correctly:</p>\n</li>\n</ol>\n<p>org.gradle.java.home=/path/to/your/jdk</p>\n"}],"comment_count":3,"is_answered":true,"view_count":285,"answer_count":4,"score":2,"last_activity_date":1701404774,"creation_date":1698311819,"question_id":77365668,"body_markdown":"I am working on an app it was working fine until i upgraded the gradle version now this is the error. I also tried changing the version to 17 but it doesn&#39;t seems to work and also changed the java version for gradle in setting android studio to 17.\r\n\r\n    Execution failed for task &#39;:stripe_android:compileDebugKotlin&#39;.\r\n    &gt; &#39;compileDebugJavaWithJavac&#39; task (current target is 1.8) and &#39;compileDebugKotlin&#39; \r\n    task (current target is 17) jvm target compatibility should be set to the same Java \r\n    version.\r\n\r\nThis is my buld.gradle file. Here i changed according to the error.\r\n\r\n```\r\nplugins {\r\n    id &quot;com.android.application&quot;\r\n    id &quot;kotlin-android&quot;\r\n    id &quot;dev.flutter.flutter-gradle-plugin&quot;\r\n}\r\n\r\ndef localProperties = new Properties()\r\ndef localPropertiesFile = rootProject.file(&#39;local.properties&#39;)\r\nif (localPropertiesFile.exists()) {\r\n    localPropertiesFile.withReader(&#39;UTF-8&#39;) { reader -&gt;\r\n        localProperties.load(reader)\r\n    }\r\n}\r\n\r\ndef flutterVersionCode = localProperties.getProperty(&#39;flutter.versionCode&#39;)\r\nif (flutterVersionCode == null) {\r\n    flutterVersionCode = &#39;1&#39;\r\n}\r\n\r\ndef flutterVersionName = localProperties.getProperty(&#39;flutter.versionName&#39;)\r\nif (flutterVersionName == null) {\r\n    flutterVersionName = &#39;1.0&#39;\r\n}\r\n\r\nandroid {\r\n    namespace &quot;com.roam1.esim&quot;\r\n    compileSdkVersion flutter.compileSdkVersion\r\n    ndkVersion flutter.ndkVersion\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_17\r\n        targetCompatibility JavaVersion.VERSION_17\r\n    }\r\n\r\n    kotlinOptions {\r\n        jvmTarget = &#39;17&#39;\r\n    }\r\n\r\n    sourceSets {\r\n        main.java.srcDirs += &#39;src/main/kotlin&#39;\r\n    }\r\n\r\n    defaultConfig {\r\n        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).\r\n        applicationId &quot;com.example.sim&quot;\r\n        // You can update the following values to match your application needs.\r\n        // For more information, see: https://docs.flutter.dev/deployment/android#reviewing-the-gradle-build-configuration.\r\n        minSdkVersion 21\r\n        targetSdkVersion flutter.targetSdkVersion\r\n        versionCode flutterVersionCode.toInteger()\r\n        versionName flutterVersionName\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            // TODO: Add your own signing config for the release build.\r\n            // Signing with the debug keys for now, so `flutter run --release` works.\r\n            signingConfig signingConfigs.debug\r\n        }\r\n    }\r\n}\r\n\r\nflutter {\r\n    source &#39;../..&#39;\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;com.facebook.android:facebook-android-sdk:latest.release&#39;\r\n    implementation platform(&#39;com.google.firebase:firebase-bom:32.4.0&#39;)\r\n    implementation &#39;com.google.firebase:firebase-analytics-ktx&#39;\r\n}\r\n\r\n```\r\n","link":"https://stackoverflow.com/questions/77365668/android-studio-build-error-compiledebugjavawithjavac-task-current-target-is-1","title":"Android Studio build error - compileDebugJavaWithJavac task (current target is 1.8) and compileDebugKotlin task (current target is 17) f","body":"<p>I am working on an app it was working fine until i upgraded the gradle version now this is the error. I also tried changing the version to 17 but it doesn't seems to work and also changed the java version for gradle in setting android studio to 17.</p>\n<pre><code>Execution failed for task ':stripe_android:compileDebugKotlin'.\n&gt; 'compileDebugJavaWithJavac' task (current target is 1.8) and 'compileDebugKotlin' \ntask (current target is 17) jvm target compatibility should be set to the same Java \nversion.\n</code></pre>\n<p>This is my buld.gradle file. Here i changed according to the error.</p>\n<pre><code>plugins {\n    id &quot;com.android.application&quot;\n    id &quot;kotlin-android&quot;\n    id &quot;dev.flutter.flutter-gradle-plugin&quot;\n}\n\ndef localProperties = new Properties()\ndef localPropertiesFile = rootProject.file('local.properties')\nif (localPropertiesFile.exists()) {\n    localPropertiesFile.withReader('UTF-8') { reader -&gt;\n        localProperties.load(reader)\n    }\n}\n\ndef flutterVersionCode = localProperties.getProperty('flutter.versionCode')\nif (flutterVersionCode == null) {\n    flutterVersionCode = '1'\n}\n\ndef flutterVersionName = localProperties.getProperty('flutter.versionName')\nif (flutterVersionName == null) {\n    flutterVersionName = '1.0'\n}\n\nandroid {\n    namespace &quot;com.roam1.esim&quot;\n    compileSdkVersion flutter.compileSdkVersion\n    ndkVersion flutter.ndkVersion\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_17\n        targetCompatibility JavaVersion.VERSION_17\n    }\n\n    kotlinOptions {\n        jvmTarget = '17'\n    }\n\n    sourceSets {\n        main.java.srcDirs += 'src/main/kotlin'\n    }\n\n    defaultConfig {\n        // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).\n        applicationId &quot;com.example.sim&quot;\n        // You can update the following values to match your application needs.\n        // For more information, see: https://docs.flutter.dev/deployment/android#reviewing-the-gradle-build-configuration.\n        minSdkVersion 21\n        targetSdkVersion flutter.targetSdkVersion\n        versionCode flutterVersionCode.toInteger()\n        versionName flutterVersionName\n    }\n\n    buildTypes {\n        release {\n            // TODO: Add your own signing config for the release build.\n            // Signing with the debug keys for now, so `flutter run --release` works.\n            signingConfig signingConfigs.debug\n        }\n    }\n}\n\nflutter {\n    source '../..'\n}\n\ndependencies {\n    implementation 'com.facebook.android:facebook-android-sdk:latest.release'\n    implementation platform('com.google.firebase:firebase-bom:32.4.0')\n    implementation 'com.google.firebase:firebase-analytics-ktx'\n}\n\n</code></pre>\n"},{"tags":["java","selenium-webdriver","automation","webdriver-manager"],"comments":[{"score":0,"post_type":"question","creation_date":1699259122,"post_id":77429284,"comment_id":136504231,"body_markdown":"You need to add the slf4j-simple-1.6.2.jar file to your classpath","link":"https://stackoverflow.com/questions/77429284/i-can-not-open-the-chrome-browser-using-latest-webdriver-manager-5-6-0#comment136504231_77429284","body":"You need to add the slf4j-simple-1.6.2.jar file to your classpath"},{"score":0,"post_type":"question","creation_date":1699260714,"post_id":77429284,"comment_id":136504460,"body_markdown":"Thanks @bhairu . . . after adding above suggested dependency it has finally started working now :)","link":"https://stackoverflow.com/questions/77429284/i-can-not-open-the-chrome-browser-using-latest-webdriver-manager-5-6-0#comment136504460_77429284","body":"Thanks @bhairu . . . after adding above suggested dependency it has finally started working now :)"}],"comment_count":2,"is_answered":false,"view_count":1183,"answer_count":0,"score":1,"last_activity_date":1701403363,"creation_date":1699254308,"last_edit_date":1701403363,"question_id":77429284,"body_markdown":"I am getting below error on running my testng test:\r\n\r\n*&quot;org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. \r\nHost info: host: &#39;xxxxx&#39;, ip: &#39;xxxxxxxxxxx&#39;\r\nBuild info: version: &#39;4.15.0&#39;, revision: &#39;1d14b5521b&#39;\r\nSystem info: os.name: &#39;Mac OS X&#39;, os.arch: &#39;x86_64&#39;, os.version: &#39;13.5&#39;, java.version: &#39;21.0.1&#39;\r\nDriver info: org.openqa.selenium.chrome.ChromeDriver\r\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [], binary: /Application&quot;*\r\n\r\n**Below are the details of versions I am using:**\r\nChrome browser version: 119\r\nWebdrivermanager: 5.6.0\r\nTestNg version: 7.8.0\r\nSelenium-Java: 4.15.0\r\nJDK: Tried 21, 18 and 11 but facing same issue every time\r\n\r\n**Here is the code I am trying to run:**\r\n\r\n\r\n\r\n```\r\nimport io.github.bonigarcia.wdm.WebDriverManager;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.openqa.selenium.chrome.ChromeOptions;\r\nimport org.testng.annotations.*;\r\n\r\npublic class okta1 {\r\n\r\n    private WebDriver driver;\r\n\r\n    @BeforeClass\r\n    static void setupClass() {\r\n        WebDriverManager.chromedriver().clearDriverCache().setup();\r\n    }\r\n\r\n    @BeforeTest\r\n    void setupTest() {\r\n        ChromeOptions options = new ChromeOptions();\r\n        options.setCapability(&quot;browserVersion&quot;, &quot;119.0.6045.105&quot;);\r\n        driver = new ChromeDriver(options);\r\n    }\r\n\r\n    @AfterTest\r\n    void teardown() {\r\n        driver.quit();\r\n    }\r\n\r\n    @Test\r\n    void test() {\r\n        // Exercise\r\n        driver.get(&quot;https://bonigarcia.dev/selenium-webdriver-java/&quot;);\r\n        String title = driver.getTitle();\r\n\r\n        // Verify\r\n        // assertThat(title).contains(&quot;Selenium WebDriver&quot;);\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n**\r\nHere is the pom.xml:**\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;Teams-Automation-Framework&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;java.version&gt;21&lt;/java.version&gt;\r\n        &lt;maven.compiler.source&gt;21&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;21&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;4.15.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/org.testng/testng --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n            &lt;version&gt;7.8.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n            &lt;version&gt;5.6.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;```\r\n\r\n\r\n\r\nTried changing different version of JDK and webdriver manager but still getting same error on every attempt","link":"https://stackoverflow.com/questions/77429284/i-can-not-open-the-chrome-browser-using-latest-webdriver-manager-5-6-0","title":"I can not open the chrome browser using latest webdriver manager 5.6.0","body":"<p>I am getting below error on running my testng test:</p>\n<p><em>&quot;org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\nHost info: host: 'xxxxx', ip: 'xxxxxxxxxxx'\nBuild info: version: '4.15.0', revision: '1d14b5521b'\nSystem info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '13.5', java.version: '21.0.1'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [], binary: /Application&quot;</em></p>\n<p><strong>Below are the details of versions I am using:</strong>\nChrome browser version: 119\nWebdrivermanager: 5.6.0\nTestNg version: 7.8.0\nSelenium-Java: 4.15.0\nJDK: Tried 21, 18 and 11 but facing same issue every time</p>\n<p><strong>Here is the code I am trying to run:</strong></p>\n<pre><code>import io.github.bonigarcia.wdm.WebDriverManager;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.chrome.ChromeOptions;\nimport org.testng.annotations.*;\n\npublic class okta1 {\n\n    private WebDriver driver;\n\n    @BeforeClass\n    static void setupClass() {\n        WebDriverManager.chromedriver().clearDriverCache().setup();\n    }\n\n    @BeforeTest\n    void setupTest() {\n        ChromeOptions options = new ChromeOptions();\n        options.setCapability(&quot;browserVersion&quot;, &quot;119.0.6045.105&quot;);\n        driver = new ChromeDriver(options);\n    }\n\n    @AfterTest\n    void teardown() {\n        driver.quit();\n    }\n\n    @Test\n    void test() {\n        // Exercise\n        driver.get(&quot;https://bonigarcia.dev/selenium-webdriver-java/&quot;);\n        String title = driver.getTitle();\n\n        // Verify\n        // assertThat(title).contains(&quot;Selenium WebDriver&quot;);\n    }\n\n\n}\n</code></pre>\n<p>**\nHere is the pom.xml:**</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;Teams-Automation-Framework&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;java.version&gt;21&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;21&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;21&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;4.15.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!-- https://mvnrepository.com/artifact/org.testng/testng --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;7.8.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n            &lt;version&gt;5.6.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;```\n\n\n\nTried changing different version of JDK and webdriver manager but still getting same error on every attempt\n</code></pre>\n"},{"tags":["java","selenium-webdriver"],"comment_count":0,"is_answered":false,"view_count":24,"answer_count":0,"score":0,"last_activity_date":1701403107,"creation_date":1700167453,"last_edit_date":1701403107,"question_id":77497947,"body_markdown":"Here is the Pop up \r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/24STp.png\r\n\r\nHow to handle this and click on Keep.\r\n\r\nI have tried \r\n\r\n```\r\noptions.addArguments(&quot;--safebrowsing-disable-download-protection&quot;); \r\noptions.addArguments(&quot;safebrowsing-disable-extension-blacklist&quot;);\r\nMap&lt;String, Object&gt; prefs = new HashMap&lt;&gt;();\r\nprefs.put(&quot;download.default_directory&quot;, downloadDirectory);\r\nprefs.put(&quot;profile.default_content_settings.popups&quot;, 0);\r\noptions.setExperimentalOption(&quot;prefs&quot;, prefs);\r\n```\r\n\r\nBut not working.","link":"https://stackoverflow.com/questions/77497947/how-to-handle-download-blocked-pop-up-in-selenium-java","title":"How to handle Download blocked pop up in selenium Java?","body":"<p>Here is the Pop up\n<a href=\"https://i.stack.imgur.com/24STp.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>How to handle this and click on Keep.</p>\n<p>I have tried</p>\n<pre><code>options.addArguments(&quot;--safebrowsing-disable-download-protection&quot;); \noptions.addArguments(&quot;safebrowsing-disable-extension-blacklist&quot;);\nMap&lt;String, Object&gt; prefs = new HashMap&lt;&gt;();\nprefs.put(&quot;download.default_directory&quot;, downloadDirectory);\nprefs.put(&quot;profile.default_content_settings.popups&quot;, 0);\noptions.setExperimentalOption(&quot;prefs&quot;, prefs);\n</code></pre>\n<p>But not working.</p>\n"},{"tags":["java","maven","automated-tests","allure"],"comment_count":0,"is_answered":false,"view_count":21,"answer_count":0,"score":0,"last_activity_date":1701403056,"creation_date":1701352046,"last_edit_date":1701403056,"question_id":77578969,"body_markdown":"I have a problem. I want to use Allure Reports in my Java tests (Selenide + TestNG). I&#39;ve added all the dependencies to the `pom.xml` according to the documentation:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;test-repo&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;21&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;21&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;allure.version&gt;2.24.0&lt;/allure.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\r\n                &lt;artifactId&gt;allure-bom&lt;/artifactId&gt;\r\n                &lt;version&gt;${allure.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.codeborne&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenide&lt;/artifactId&gt;\r\n            &lt;version&gt;7.0.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n            &lt;version&gt;7.14.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-testng&lt;/artifactId&gt;\r\n            &lt;version&gt;7.14.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n            &lt;version&gt;7.6.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\r\n            &lt;artifactId&gt;allure-cucumber7-jvm&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\r\n            &lt;artifactId&gt;allure-testng&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n...\r\n\r\n```\r\nHere&#39;s how my test runner looks like:\r\n```\r\nimport io.cucumber.testng.AbstractTestNGCucumberTests;\r\nimport io.cucumber.testng.CucumberOptions;\r\nimport org.testng.annotations.Test;\r\n\r\n@Test\r\n@CucumberOptions(\r\n        features = &quot;src/test/resources/features&quot;,\r\n        glue = {&quot;stepDefinitions&quot;},\r\n        plugin = {&quot;io.qameta.allure.cucumber7jvm.AllureCucumber7Jvm&quot;}\r\n)\r\npublic class TestRunner extends AbstractTestNGCucumberTests {\r\n    static {\r\n        System.setProperty(&quot;IS_CUCUMBER_TEST&quot;, &quot;true&quot;);\r\n    }\r\n}\r\n```\r\nThe problem is that the `.json` files are generated in the allure-results folder, but when I try to use the command `allure serve allure-results`, a browser opens with an empty page and a message that the page is not accessible. I&#39;ve already tried changing the port, using the full path, changing the test folder, and nothing seems to work. Can anyone help?","link":"https://stackoverflow.com/questions/77578969/allure-html-report-wont-create-from-json-files","title":"Allure HTML report won&#39;t create from json files","body":"<p>I have a problem. I want to use Allure Reports in my Java tests (Selenide + TestNG). I've added all the dependencies to the <code>pom.xml</code> according to the documentation:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;test-repo&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;21&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;21&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;allure.version&gt;2.24.0&lt;/allure.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\n                &lt;artifactId&gt;allure-bom&lt;/artifactId&gt;\n                &lt;version&gt;${allure.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.codeborne&lt;/groupId&gt;\n            &lt;artifactId&gt;selenide&lt;/artifactId&gt;\n            &lt;version&gt;7.0.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n            &lt;version&gt;7.14.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-testng&lt;/artifactId&gt;\n            &lt;version&gt;7.14.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;version&gt;7.6.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\n            &lt;artifactId&gt;allure-cucumber7-jvm&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\n            &lt;artifactId&gt;allure-testng&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n...\n\n</code></pre>\n<p>Here's how my test runner looks like:</p>\n<pre><code>import io.cucumber.testng.AbstractTestNGCucumberTests;\nimport io.cucumber.testng.CucumberOptions;\nimport org.testng.annotations.Test;\n\n@Test\n@CucumberOptions(\n        features = &quot;src/test/resources/features&quot;,\n        glue = {&quot;stepDefinitions&quot;},\n        plugin = {&quot;io.qameta.allure.cucumber7jvm.AllureCucumber7Jvm&quot;}\n)\npublic class TestRunner extends AbstractTestNGCucumberTests {\n    static {\n        System.setProperty(&quot;IS_CUCUMBER_TEST&quot;, &quot;true&quot;);\n    }\n}\n</code></pre>\n<p>The problem is that the <code>.json</code> files are generated in the allure-results folder, but when I try to use the command <code>allure serve allure-results</code>, a browser opens with an empty page and a message that the page is not accessible. I've already tried changing the port, using the full path, changing the test folder, and nothing seems to work. Can anyone help?</p>\n"},{"tags":["java","gradle","junit","build.gradle"],"comment_count":0,"is_answered":false,"view_count":16,"answer_count":0,"score":0,"last_activity_date":1701403012,"creation_date":1701375763,"last_edit_date":1701403012,"question_id":77581468,"body_markdown":"I have a multi-module gradle project where each module has some test cases. With the default gradle behavior, test cases within a module run sequentially but test tasks of multiple modules will run in parallel. Due to some internal reason, I want to avoid this behavior and achieve the following things.\r\n\r\n - Each module&#39;s test task should run once the previous module&#39;s test execution is done.\r\n - Test cases present with a module should execute sequentially. ( happening by default )\r\n\r\nBelow is the build.gradle of my root project. Please suggest what changes can be done for the same.\r\n\r\n    /****************************************\r\n     * instructions for all projects\r\n     ****************************************/\r\n    \r\n    allprojects {\r\n        apply from: &quot;$rootDir/dependencies.gradle&quot;\r\n        apply from: &quot;$rootDir/build.properties&quot;\r\n    \r\n        apply plugin: &#39;project-report&#39;\r\n        apply plugin: &#39;java-library&#39;\r\n        apply plugin: &#39;maven-publish&#39;\r\n    \r\n    \r\n        repositories {\r\n            mavenCentral()\r\n            mavenLocal()\r\n        }\r\n    \r\n        group = projectName\r\n        projectVersion = projectVersion + &#39;.&#39; + jenkinsBuildNumber\r\n        version = projectVersion\r\n    \r\n        sourceCompatibility = 11\r\n        targetCompatibility = 11\r\n    \r\n    }\r\n    \r\n    /****************************************\r\n     * instructions for each sub project\r\n     ****************************************/\r\n    subprojects {\r\n        apply plugin: &#39;jacoco&#39;\r\n        jacoco {\r\n            toolVersion = &quot;0.8.5&quot;\r\n            reportsDir = file(&quot;$buildDir/reports/jacoco&quot;)\r\n        }\r\n    \r\n        jacocoTestReport {\r\n            def coverageSourceDirs = [&#39;src/main/java/&#39;]\r\n            reports {\r\n                xml.enabled false\r\n                csv.enabled false\r\n                html.enabled true\r\n            }\r\n        }\r\n    \r\n        // common dependencies\r\n        dependencies {\r\n            testImplementation(\r\n                    libs.testng,\r\n            )\r\n        }\r\n    \r\n        test {\r\n            systemProperty &quot;file.encoding&quot;, &quot;utf-8&quot;\r\n            useTestNG()\r\n            testLogging.showStandardStreams = true\r\n            testLogging.exceptionFormat = &#39;full&#39;\r\n            testLogging {\r\n                events &quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;\r\n            }\r\n            finalizedBy jacocoTestReport\r\n    \r\n        }\r\n    }\r\n\r\n","link":"https://stackoverflow.com/questions/77581468/how-to-ensure-sequential-module-wise-test-case-execution-in-multi-module-gradle","title":"How to ensure sequential module wise test case execution in multi module gradle project?","body":"<p>I have a multi-module gradle project where each module has some test cases. With the default gradle behavior, test cases within a module run sequentially but test tasks of multiple modules will run in parallel. Due to some internal reason, I want to avoid this behavior and achieve the following things.</p>\n<ul>\n<li>Each module's test task should run once the previous module's test execution is done.</li>\n<li>Test cases present with a module should execute sequentially. ( happening by default )</li>\n</ul>\n<p>Below is the build.gradle of my root project. Please suggest what changes can be done for the same.</p>\n<pre><code>/****************************************\n * instructions for all projects\n ****************************************/\n\nallprojects {\n    apply from: &quot;$rootDir/dependencies.gradle&quot;\n    apply from: &quot;$rootDir/build.properties&quot;\n\n    apply plugin: 'project-report'\n    apply plugin: 'java-library'\n    apply plugin: 'maven-publish'\n\n\n    repositories {\n        mavenCentral()\n        mavenLocal()\n    }\n\n    group = projectName\n    projectVersion = projectVersion + '.' + jenkinsBuildNumber\n    version = projectVersion\n\n    sourceCompatibility = 11\n    targetCompatibility = 11\n\n}\n\n/****************************************\n * instructions for each sub project\n ****************************************/\nsubprojects {\n    apply plugin: 'jacoco'\n    jacoco {\n        toolVersion = &quot;0.8.5&quot;\n        reportsDir = file(&quot;$buildDir/reports/jacoco&quot;)\n    }\n\n    jacocoTestReport {\n        def coverageSourceDirs = ['src/main/java/']\n        reports {\n            xml.enabled false\n            csv.enabled false\n            html.enabled true\n        }\n    }\n\n    // common dependencies\n    dependencies {\n        testImplementation(\n                libs.testng,\n        )\n    }\n\n    test {\n        systemProperty &quot;file.encoding&quot;, &quot;utf-8&quot;\n        useTestNG()\n        testLogging.showStandardStreams = true\n        testLogging.exceptionFormat = 'full'\n        testLogging {\n            events &quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;\n        }\n        finalizedBy jacocoTestReport\n\n    }\n}\n</code></pre>\n"},{"tags":["java","latency","catboost"],"comment_count":0,"is_answered":false,"view_count":30,"answer_count":0,"score":0,"last_activity_date":1701399378,"creation_date":1701357478,"last_edit_date":1701399378,"question_id":77579585,"body_markdown":"I am trying to use `catboost` **java** API but facing high latency issues at a large scale. I currently run a high-scale multi-threaded system with around 300+ worker threads that query the catboost model multiple times per client request. Here is the sample code:\r\n```\r\nloadModel(){\r\n// load model file\r\n// modelFilePath is around 1 GB\r\nCatBoostModel model = CatBoostModel.loadModel(modelFilePath);\r\n}\r\n...\r\n...\r\ngetprecition(){\r\n// called from multiple threads multiple times per user request\r\n// Predict for all inputs at once. \r\n// IMP: inputCount is always 1\r\nfloat[][] numericalFeatures = new float[inputCount][];\r\nString[][] catFeatures = new String[inputCount][];\r\n...\r\n...\r\nCatBoostPredictions prediction = model.predict(numericalFeatures, catFeatures);\r\ndouble result = sigmoid(prediction.get(0, 0));\r\n}\r\n```\r\nI have generated flame graph that shows significant times of CPU is used in catboost prediction\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI was expecting model prediction latency to be under 1 ms but it suddenly starts increasing when the load increases on the server (from 9-10k QPS to 12-13k QPS x 10-100 model queries per request).\r\n\r\n[![enter image description here][2]][2]\r\n\r\n**Another thing that I noticed is that the CPU load average also increases a lot (without using the model also) to 100+ on 48 core server.**\r\n\r\nI tried having 4 instances of model and querying each instance in a round-robin fashion but no improvement.\r\n\r\nIs there a way to optimize it?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ePb2o.jpg\r\n  [2]: https://i.stack.imgur.com/NuTtz.jpg","link":"https://stackoverflow.com/questions/77579585/catboost-java-prediction-slow-at-high-scale","title":"catboost java prediction slow at high scale","body":"<p>I am trying to use <code>catboost</code> <strong>java</strong> API but facing high latency issues at a large scale. I currently run a high-scale multi-threaded system with around 300+ worker threads that query the catboost model multiple times per client request. Here is the sample code:</p>\n<pre><code>loadModel(){\n// load model file\n// modelFilePath is around 1 GB\nCatBoostModel model = CatBoostModel.loadModel(modelFilePath);\n}\n...\n...\ngetprecition(){\n// called from multiple threads multiple times per user request\n// Predict for all inputs at once. \n// IMP: inputCount is always 1\nfloat[][] numericalFeatures = new float[inputCount][];\nString[][] catFeatures = new String[inputCount][];\n...\n...\nCatBoostPredictions prediction = model.predict(numericalFeatures, catFeatures);\ndouble result = sigmoid(prediction.get(0, 0));\n}\n</code></pre>\n<p>I have generated flame graph that shows significant times of CPU is used in catboost prediction\n<a href=\"https://i.stack.imgur.com/ePb2o.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ePb2o.jpg\" alt=\"enter image description here\" /></a></p>\n<p>I was expecting model prediction latency to be under 1 ms but it suddenly starts increasing when the load increases on the server (from 9-10k QPS to 12-13k QPS x 10-100 model queries per request).</p>\n<p><a href=\"https://i.stack.imgur.com/NuTtz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NuTtz.jpg\" alt=\"enter image description here\" /></a></p>\n<p><strong>Another thing that I noticed is that the CPU load average also increases a lot (without using the model also) to 100+ on 48 core server.</strong></p>\n<p>I tried having 4 instances of model and querying each instance in a round-robin fashion but no improvement.</p>\n<p>Is there a way to optimize it?</p>\n"},{"tags":["java","methods","refactoring"],"comments":[{"score":1,"post_type":"question","creation_date":1701387088,"post_id":77582156,"comment_id":136772781,"body_markdown":"You need to pass the `animal` created in `Screen`  object to your `FishAnimation` object, preferably via the constructor.","link":"https://stackoverflow.com/questions/77582156/moving-the-method-to-another-class-make-it-stop-working#comment136772781_77582156","body":"You need to pass the <code>animal</code> created in <code>Screen</code>  object to your <code>FishAnimation</code> object, preferably via the constructor."},{"score":0,"post_type":"question","creation_date":1701719345,"post_id":77582156,"comment_id":136808405,"body_markdown":"@JanezKuhar can you make me an example?","link":"https://stackoverflow.com/questions/77582156/moving-the-method-to-another-class-make-it-stop-working#comment136808405_77582156","body":"@JanezKuhar can you make me an example?"}],"comment_count":2,"is_answered":false,"view_count":59,"answer_count":0,"score":0,"last_activity_date":1701396936,"creation_date":1701385584,"last_edit_date":1701396936,"question_id":77582156,"body_markdown":"I have this class called Screen\r\n```\r\npackage main;\r\n\r\nimport java.awt.Dimension;\r\nimport java.io.IOException;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLayeredPane;\r\nimport javax.swing.JPanel;\r\nimport AnimatorHandler.FishAnimation;\r\nimport data.*;\r\nimport save.Data;\r\n\r\npublic class Screen extends JPanel{\r\n\t\r\n\tResources res = new Resources();\r\n\tBackground background = new Background();\r\n\tGround ground = new Ground();\r\n\tAnimal animal = new Animal(null, null, 0, null, 0, 0);\r\n\tFishAnimation fA = new FishAnimation();\r\n\t\r\n\tint screenSizeX = 1099;\r\n\tint screenSizeY = 735;\r\n\t\r\n\tvoid createWindow() throws IOException {\r\n\t\t\r\n\t\t//CREATION OF THE RESOURCES\r\n\t\tbackground.createBackground();\r\n\t\tground.createGround();\r\n\t\tanimal.createAnimal();\r\n\t\t\r\n\t\t//SETTING OF THE LAYEREDPANE\r\n\t\tJLayeredPane layeredPane = new JLayeredPane();\r\n\t\tlayeredPane.setBounds(0, 0, screenSizeX, screenSizeY);\r\n\t\tlayeredPane.add(background.background[Data.selectedBackground], Integer.valueOf(0));\r\n\t\tlayeredPane.add(ground.ground[Data.selectedGround], Integer.valueOf(1));\r\n\t\tlayeredPane.add(animal.animals[Data.selectedAnimal], Integer.valueOf(2));\r\n\t\tlayeredPane.add(animal.animals[Data.selectedAnimal+1], Integer.valueOf(2));\r\n\t\t   \r\n\t\t//SETTING OF THE FRAME\r\n\t    JFrame frame = new JFrame(&quot;Happy Aquarium&quot;);\r\n\t    frame.add(layeredPane);\r\n\t    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t    frame.setSize(new Dimension(screenSizeX, screenSizeY));\r\n\t    frame.setLayout(null);\r\n\t    frame.setVisible(true);\r\n\t    \r\n\t    //ANIMATION\r\n\t    fA.action();\r\n\t    \r\n    }\r\n}\r\n\r\n```\r\nAnd I just tried to export the `fA.action()` in another class (before the export was called just `action`, created automatically by `ActionListener`) So I just cut and paste the method to the `Screen` class to the `FishAnimation` class.\r\n\r\n\r\n```\r\npackage AnimatorHandler;\r\n\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.io.IOException;\r\n\r\nimport javax.swing.Timer;\r\n\r\nimport data.Animal;\r\nimport save.Data;\r\n\r\npublic class FishAnimation implements ActionListener{\r\n\t\r\n\tAnimal animal = new Animal(null, null, 0, null, 0, 0);\r\n\tTimer timer;\r\n\t\r\n\tpublic void action() throws IOException {\r\n\t\tanimal.createAnimal();\r\n\t\t\r\n\t\ttimer = new Timer(1, this);\r\n\t\ttimer.start();\r\n\t\t\t\r\n\t\t \r\n\t\t  \r\n\t\t  \r\n\t}\r\n\r\n\t@Override\r\n\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\r\n\r\n\t\tif(animal.animals[Data.selectedAnimal].getY() &gt;= 260 || animal.animals[Data.selectedAnimal].getY()&lt;-300) {\r\n\t\t\t\r\n\t\t\tanimal.animali[Data.selectedAnimal].setYVelocity(animal.animali[Data.selectedAnimal].getYVelocity() * -1);\r\n\t\t}\r\n\t\t\r\n\t\tif(animal.animals[Data.selectedAnimal].getX() &gt;= 456 || animal.animals[Data.selectedAnimal].getX()&lt;-456) {\r\n\t\t\t\r\n\t\t\tanimal.animali[Data.selectedAnimal].setXVelocity(animal.animali[Data.selectedAnimal].getXVelocity() * -1);\r\n\t\t\t\r\n\t\t}\r\n\t\tanimal.animals[Data.selectedAnimal].setBounds(animal.animals[Data.selectedAnimal].getX() + animal.animali[Data.selectedAnimal].getXVelocity(), animal.animals[Data.selectedAnimal].getY() + animal.animali[Data.selectedAnimal].getYVelocity(), 1083, 696);\r\n\r\n\t\tif(animal.animals[Data.selectedAnimal+1].getY() &gt;= 260 || animal.animals[Data.selectedAnimal+1].getY()&lt;-300) {\r\n\t\t\t\r\n\t\t\tanimal.animali[Data.selectedAnimal+1].setYVelocity(animal.animali[Data.selectedAnimal+1].getYVelocity() * -1);\r\n\t\t}\r\n\t\t\r\n\t\tif(animal.animals[Data.selectedAnimal+1].getX() &gt;= 456 || animal.animals[Data.selectedAnimal+1].getX()&lt;-456) {\r\n\r\n\t\t\tanimal.animali[Data.selectedAnimal+1].setXVelocity(animal.animali[Data.selectedAnimal+1].getXVelocity() * -1);\r\n\t\t\t\r\n\t\t}\r\n\t\tanimal.animals[Data.selectedAnimal+1].setBounds(animal.animals[Data.selectedAnimal+1].getX() + animal.animali[Data.selectedAnimal+1].getXVelocity(), animal.animals[Data.selectedAnimal+1].getY() + animal.animali[Data.selectedAnimal+1].getYVelocity(), 1083, 696);\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n}\r\n\r\n```\r\n\r\nSo I called the `action` method from this new class to the `Screen` class and nothing it stop working\r\n\r\nI tried google it but nothing, I tried to call the method in the `Main` class instead of the `Screen` class, but still nothing, BUT if I import again the exported `action` method to the `Screen` class, it works again.","link":"https://stackoverflow.com/questions/77582156/moving-the-method-to-another-class-make-it-stop-working","title":"Moving the method to another class make it stop working","body":"<p>I have this class called Screen</p>\n<pre><code>package main;\n\nimport java.awt.Dimension;\nimport java.io.IOException;\nimport javax.swing.JFrame;\nimport javax.swing.JLayeredPane;\nimport javax.swing.JPanel;\nimport AnimatorHandler.FishAnimation;\nimport data.*;\nimport save.Data;\n\npublic class Screen extends JPanel{\n    \n    Resources res = new Resources();\n    Background background = new Background();\n    Ground ground = new Ground();\n    Animal animal = new Animal(null, null, 0, null, 0, 0);\n    FishAnimation fA = new FishAnimation();\n    \n    int screenSizeX = 1099;\n    int screenSizeY = 735;\n    \n    void createWindow() throws IOException {\n        \n        //CREATION OF THE RESOURCES\n        background.createBackground();\n        ground.createGround();\n        animal.createAnimal();\n        \n        //SETTING OF THE LAYEREDPANE\n        JLayeredPane layeredPane = new JLayeredPane();\n        layeredPane.setBounds(0, 0, screenSizeX, screenSizeY);\n        layeredPane.add(background.background[Data.selectedBackground], Integer.valueOf(0));\n        layeredPane.add(ground.ground[Data.selectedGround], Integer.valueOf(1));\n        layeredPane.add(animal.animals[Data.selectedAnimal], Integer.valueOf(2));\n        layeredPane.add(animal.animals[Data.selectedAnimal+1], Integer.valueOf(2));\n           \n        //SETTING OF THE FRAME\n        JFrame frame = new JFrame(&quot;Happy Aquarium&quot;);\n        frame.add(layeredPane);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(new Dimension(screenSizeX, screenSizeY));\n        frame.setLayout(null);\n        frame.setVisible(true);\n        \n        //ANIMATION\n        fA.action();\n        \n    }\n}\n\n</code></pre>\n<p>And I just tried to export the <code>fA.action()</code> in another class (before the export was called just <code>action</code>, created automatically by <code>ActionListener</code>) So I just cut and paste the method to the <code>Screen</code> class to the <code>FishAnimation</code> class.</p>\n<pre><code>package AnimatorHandler;\n\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.io.IOException;\n\nimport javax.swing.Timer;\n\nimport data.Animal;\nimport save.Data;\n\npublic class FishAnimation implements ActionListener{\n    \n    Animal animal = new Animal(null, null, 0, null, 0, 0);\n    Timer timer;\n    \n    public void action() throws IOException {\n        animal.createAnimal();\n        \n        timer = new Timer(1, this);\n        timer.start();\n            \n         \n          \n          \n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        \n\n        if(animal.animals[Data.selectedAnimal].getY() &gt;= 260 || animal.animals[Data.selectedAnimal].getY()&lt;-300) {\n            \n            animal.animali[Data.selectedAnimal].setYVelocity(animal.animali[Data.selectedAnimal].getYVelocity() * -1);\n        }\n        \n        if(animal.animals[Data.selectedAnimal].getX() &gt;= 456 || animal.animals[Data.selectedAnimal].getX()&lt;-456) {\n            \n            animal.animali[Data.selectedAnimal].setXVelocity(animal.animali[Data.selectedAnimal].getXVelocity() * -1);\n            \n        }\n        animal.animals[Data.selectedAnimal].setBounds(animal.animals[Data.selectedAnimal].getX() + animal.animali[Data.selectedAnimal].getXVelocity(), animal.animals[Data.selectedAnimal].getY() + animal.animali[Data.selectedAnimal].getYVelocity(), 1083, 696);\n\n        if(animal.animals[Data.selectedAnimal+1].getY() &gt;= 260 || animal.animals[Data.selectedAnimal+1].getY()&lt;-300) {\n            \n            animal.animali[Data.selectedAnimal+1].setYVelocity(animal.animali[Data.selectedAnimal+1].getYVelocity() * -1);\n        }\n        \n        if(animal.animals[Data.selectedAnimal+1].getX() &gt;= 456 || animal.animals[Data.selectedAnimal+1].getX()&lt;-456) {\n\n            animal.animali[Data.selectedAnimal+1].setXVelocity(animal.animali[Data.selectedAnimal+1].getXVelocity() * -1);\n            \n        }\n        animal.animals[Data.selectedAnimal+1].setBounds(animal.animals[Data.selectedAnimal+1].getX() + animal.animali[Data.selectedAnimal+1].getXVelocity(), animal.animals[Data.selectedAnimal+1].getY() + animal.animali[Data.selectedAnimal+1].getYVelocity(), 1083, 696);\n        \n        \n    }\n    \n    \n}\n\n</code></pre>\n<p>So I called the <code>action</code> method from this new class to the <code>Screen</code> class and nothing it stop working</p>\n<p>I tried google it but nothing, I tried to call the method in the <code>Main</code> class instead of the <code>Screen</code> class, but still nothing, BUT if I import again the exported <code>action</code> method to the <code>Screen</code> class, it works again.</p>\n"},{"tags":["java","spring-boot","spring-boot-security"],"comments":[{"score":1,"post_type":"question","creation_date":1701330564,"post_id":77576150,"comment_id":136762899,"body_markdown":"Poor title. Rewrite to summarize your specific technical issue.","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security#comment136762899_77576150","body":"Poor title. Rewrite to summarize your specific technical issue."},{"score":0,"post_type":"question","creation_date":1701332131,"post_id":77576150,"comment_id":136763132,"body_markdown":"What&#39;s the benefit of writing &quot;I&#39;m new&quot; in all the questions?","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security#comment136763132_77576150","body":"What&#39;s the benefit of writing &quot;I&#39;m new&quot; in all the questions?"},{"score":0,"post_type":"question","creation_date":1701346326,"post_id":77576150,"comment_id":136765582,"body_markdown":"im sorry sir but i feel i have summarized my issue correctly. i cannot log in in the above page as no credentials i put work. i tried the default user and auto genetared password also but it didnt work","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security#comment136765582_77576150","body":"im sorry sir but i feel i have summarized my issue correctly. i cannot log in in the above page as no credentials i put work. i tried the default user and auto genetared password also but it didnt work"},{"score":0,"post_type":"question","creation_date":1701346773,"post_id":77576150,"comment_id":136765680,"body_markdown":"for What&#39;s the benefit of writing &quot;I&#39;m new&quot; in all the questions? . im sorry but i havnt used stackoverflow and i dont know the proper etiquitte","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security#comment136765680_77576150","body":"for What&#39;s the benefit of writing &quot;I&#39;m new&quot; in all the questions? . im sorry but i havnt used stackoverflow and i dont know the proper etiquitte"},{"score":0,"post_type":"question","creation_date":1701347401,"post_id":77576150,"comment_id":136765789,"body_markdown":"You have your own security configuration which will make the spring boot auto configuration back off and so the configuration in `application.properties` is ignored.","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security#comment136765789_77576150","body":"You have your own security configuration which will make the spring boot auto configuration back off and so the configuration in <code>application.properties</code> is ignored."},{"score":0,"post_type":"question","creation_date":1701348786,"post_id":77576150,"comment_id":136766066,"body_markdown":"ohh ?? okok then where will be the username and password for the default login page.","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security#comment136766066_77576150","body":"ohh ?? okok then where will be the username and password for the default login page."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701346098,"post_id":77576290,"comment_id":136765540,"body_markdown":"i tried that on day one itself but same error","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security/77576290#comment136765540_77576290","body":"i tried that on day one itself but same error"},{"score":1,"post_type":"answer","creation_date":1701346121,"post_id":77576290,"comment_id":136765545,"body_markdown":"how to add pics here. im new to stack overflow","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security/77576290#comment136765545_77576290","body":"how to add pics here. im new to stack overflow"},{"score":0,"post_type":"answer","creation_date":1701348863,"post_id":77576290,"comment_id":136766080,"body_markdown":"whats {noop}password?","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security/77576290#comment136766080_77576290","body":"whats {noop}password?"},{"score":0,"post_type":"answer","creation_date":1701393039,"post_id":77576290,"comment_id":136773279,"body_markdown":"Nothing, just ingone that. You have your own UserDetailsService, so user info in  application.properties file is ignored.","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security/77576290#comment136773279_77576290","body":"Nothing, just ingone that. You have your own UserDetailsService, so user info in  application.properties file is ignored."},{"score":0,"post_type":"answer","creation_date":1701405667,"post_id":77576290,"comment_id":136774276,"body_markdown":"ohh i see. then what is the username and password please help","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security/77576290#comment136774276_77576290","body":"ohh i see. then what is the username and password please help"},{"score":0,"post_type":"answer","creation_date":1701405705,"post_id":77576290,"comment_id":136774279,"body_markdown":"wont there be a default user and password though","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security/77576290#comment136774279_77576290","body":"wont there be a default user and password though"},{"score":0,"post_type":"answer","creation_date":1701410745,"post_id":77576290,"comment_id":136774673,"body_markdown":"@ParikshithG If you use my entity and my DB schema you will have 2 users: `{&quot;username&quot; : &quot;someemail@mail.com&quot;, &quot;password&quot; : &quot;password&quot;}, {&quot;username&quot; : &quot;johndoe@gmail.com&quot;, &quot;password&quot; : &quot;password&quot;}`. But, to achieve that, you must have in your props next: `spring.sql.init.mode=always`, and have file data.sql with my script. !IMPORTANT! to have semicolon on end of the script.","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security/77576290#comment136774673_77576290","body":"@ParikshithG If you use my entity and my DB schema you will have 2 users: <code>{&quot;username&quot; : &quot;someemail@mail.com&quot;, &quot;password&quot; : &quot;password&quot;}, {&quot;username&quot; : &quot;johndoe@gmail.com&quot;, &quot;password&quot; : &quot;password&quot;}</code>. But, to achieve that, you must have in your props next: <code>spring.sql.init.mode=always</code>, and have file data.sql with my script. !IMPORTANT! to have semicolon on end of the script."}],"comment_count":7,"score":0,"last_activity_date":1701396316,"last_edit_date":1701396316,"creation_date":1701325141,"answer_id":77576290,"question_id":77576150,"body_markdown":"You just need determine in your database Entity, that implements user details service like this: (or you can just map your entity on UserDetails later)\r\n\r\n```java\r\n\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Builder\r\n\r\n@Entity\r\n@Table(name = &quot;t_accounts&quot;)\r\npublic class Account implements UserDetails {\r\n    @Id\r\n    @Column(nullable = false, name = &quot;account_id&quot;)\r\n    private Long id;\r\n\r\n    private String email;\r\n\r\n    private String password;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(length = 20)\r\n    private Role role;\r\n\r\n    private boolean isAccountNonLocked;\r\n\r\n    private boolean isEnabled;\r\n\r\n    @Override\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return Set.of(role);\r\n    }\r\n\r\n    @Override\r\n    public String getUsername() {\r\n        return email;\r\n    }\r\n\r\n    @Override\r\n    public boolean isAccountNonExpired() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCredentialsNonExpired() {\r\n        return true;\r\n    }\r\n}\r\n```\r\n\r\nRole enum:\r\n\r\n```java\r\n\r\npublic enum Role implements GrantedAuthority {\r\n    USER, ADMIN;\r\n\r\n    @Override\r\n    public String getAuthority() {\r\n        return name();\r\n    }\r\n}\r\n```\r\nAccount repository:\r\n\r\n```java\r\n\r\npublic interface AccountRepository extends JpaRepository&lt;Account, Long&gt; {\r\n    Optional&lt;Account&gt; findByEmail(String email);\r\n}\r\n```\r\n\r\n\r\nYou must have next Beans: UserDetailsService (you already have this one, but I recommend separate UserService and UserDetailsService) and AuthenticationProvider.\r\n\r\n```java\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService(AccountRepository accountRepository) {\r\n        return email -&gt; accountRepository.findByEmail(email)\r\n                .orElseThrow(() -&gt; new ResponseStatusException(\r\n                        HttpStatus.NOT_FOUND,\r\n                        &quot;user with email = %s not found&quot;.formattet(email)\r\n                ));\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationProvider authenticationProvider() {\r\n        DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\r\n        authenticationProvider.setUserDetailsService(userDetailsService);\r\n        authenticationProvider.setPasswordEncoder(passwordEncoder);\r\n        return authenticationProvider;\r\n    }\r\n```\r\n\r\nAnd your configuration will be like:\r\n\r\n```java\r\n\r\n@Configuration\r\n@RequiredArgsConstructor //Generates a constructor with required arguments.\r\npublic class WebSecurityConfig {\r\n\r\n    private final UserDetailsService userDetailsService; //here you can use any bean, that implements UserDetailsService interface\r\n    private final PasswordEncoder passwordEncoder; //here you can use bean, that implements PasswordEncoder interface\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeHttpRequests((authorizeRequests) -&gt;\r\n                        authorizeRequests\r\n                                .requestMatchers(&quot;api/v1/register&quot;).permitAll()\r\n                                .requestMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n                                .requestMatchers(&quot;/**&quot;).hasRole(&quot;USER&quot;))\r\n                .httpBasic(Customizer.withDefaults())\r\n                .formLogin(Customizer.withDefaults());\r\n\r\n        return http.build();\r\n    }\r\n\r\n\r\n\r\n    @Bean\r\n    public DaoAuthenticationProvider daoAuthenticationProvider(){\r\n        DaoAuthenticationProvider provider=new DaoAuthenticationProvider();\r\n        provider.setPasswordEncoder(bCryptPasswordEncoder);\r\n        provider.setUserDetailsService(userDetailsService);\r\n\r\n        return provider;\r\n    }\r\n}\r\n```\r\n\r\nAnd of course you must have in your database already defined users:\r\n\r\n```sql\r\n\r\nINSERT INTO t_accounts(account_id, email, password, role, is_account_non_locked, is_enabled)\r\nVALUES\r\n    (1, &#39;someemail@mail.com&#39;, &#39;$2a$10$5d3w9sGDT47bFKKFw9oK8OvbOPH2lJCH2p3caVVwZtUIval2OFys2&#39;, &#39;USER&#39;, true, true),\r\n    (2, &#39;johndoe@gmail.com&#39;, &#39;$2a$10$rVjZv3bOHS7IkhKMsjn9X.boQ7GdGW14S7K4QtoKXKxynKlIlfnRa&#39;, &#39;USER&#39;, true, true);\r\n```\r\n\r\nPasswords are hashed, so in database they store like that, I just hashed &#39;password&#39; value with my BCryptPasswordEncoder. If you don&#39;t want to encrypt your passwords (it&#39;s a bad idea) - you can read about NoOpPasswordEncoder - that is deprecated.\r\n\r\n","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security/77576290#77576290","title":"How to fix bad credentials error - spring security","body":"<p>You just need determine in your database Entity, that implements user details service like this: (or you can just map your entity on UserDetails later)</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\n\n@Entity\n@Table(name = &quot;t_accounts&quot;)\npublic class Account implements UserDetails {\n    @Id\n    @Column(nullable = false, name = &quot;account_id&quot;)\n    private Long id;\n\n    private String email;\n\n    private String password;\n\n    @Enumerated(EnumType.STRING)\n    @Column(length = 20)\n    private Role role;\n\n    private boolean isAccountNonLocked;\n\n    private boolean isEnabled;\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return Set.of(role);\n    }\n\n    @Override\n    public String getUsername() {\n        return email;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n}\n</code></pre>\n<p>Role enum:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic enum Role implements GrantedAuthority {\n    USER, ADMIN;\n\n    @Override\n    public String getAuthority() {\n        return name();\n    }\n}\n</code></pre>\n<p>Account repository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic interface AccountRepository extends JpaRepository&lt;Account, Long&gt; {\n    Optional&lt;Account&gt; findByEmail(String email);\n}\n</code></pre>\n<p>You must have next Beans: UserDetailsService (you already have this one, but I recommend separate UserService and UserDetailsService) and AuthenticationProvider.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    @Bean\n    public UserDetailsService userDetailsService(AccountRepository accountRepository) {\n        return email -&gt; accountRepository.findByEmail(email)\n                .orElseThrow(() -&gt; new ResponseStatusException(\n                        HttpStatus.NOT_FOUND,\n                        &quot;user with email = %s not found&quot;.formattet(email)\n                ));\n    }\n\n    @Bean\n    public AuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\n        authenticationProvider.setUserDetailsService(userDetailsService);\n        authenticationProvider.setPasswordEncoder(passwordEncoder);\n        return authenticationProvider;\n    }\n</code></pre>\n<p>And your configuration will be like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Configuration\n@RequiredArgsConstructor //Generates a constructor with required arguments.\npublic class WebSecurityConfig {\n\n    private final UserDetailsService userDetailsService; //here you can use any bean, that implements UserDetailsService interface\n    private final PasswordEncoder passwordEncoder; //here you can use bean, that implements PasswordEncoder interface\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((authorizeRequests) -&gt;\n                        authorizeRequests\n                                .requestMatchers(&quot;api/v1/register&quot;).permitAll()\n                                .requestMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\n                                .requestMatchers(&quot;/**&quot;).hasRole(&quot;USER&quot;))\n                .httpBasic(Customizer.withDefaults())\n                .formLogin(Customizer.withDefaults());\n\n        return http.build();\n    }\n\n\n\n    @Bean\n    public DaoAuthenticationProvider daoAuthenticationProvider(){\n        DaoAuthenticationProvider provider=new DaoAuthenticationProvider();\n        provider.setPasswordEncoder(bCryptPasswordEncoder);\n        provider.setUserDetailsService(userDetailsService);\n\n        return provider;\n    }\n}\n</code></pre>\n<p>And of course you must have in your database already defined users:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>\nINSERT INTO t_accounts(account_id, email, password, role, is_account_non_locked, is_enabled)\nVALUES\n    (1, 'someemail@mail.com', '$2a$10$5d3w9sGDT47bFKKFw9oK8OvbOPH2lJCH2p3caVVwZtUIval2OFys2', 'USER', true, true),\n    (2, 'johndoe@gmail.com', '$2a$10$rVjZv3bOHS7IkhKMsjn9X.boQ7GdGW14S7K4QtoKXKxynKlIlfnRa', 'USER', true, true);\n</code></pre>\n<p>Passwords are hashed, so in database they store like that, I just hashed 'password' value with my BCryptPasswordEncoder. If you don't want to encrypt your passwords (it's a bad idea) - you can read about NoOpPasswordEncoder - that is deprecated.</p>\n"}],"comment_count":6,"is_answered":false,"view_count":81,"answer_count":1,"score":-3,"last_activity_date":1701396316,"creation_date":1701322939,"last_edit_date":1701347231,"question_id":77576150,"body_markdown":"As soon as I fire up server i&#39;m being redirected to login page, which always gives bad credentials.\r\n\r\nI have tried all that i could understand\r\n\r\n```\r\npackage com.example.anime_website_backend.security.config;\r\n\r\n\r\nimport com.example.anime_website_backend.user.AppUserService;\r\nimport lombok.AllArgsConstructor;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\nimport org.springframework.security.config.Customizer;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\n\r\n@Configuration\r\n@AllArgsConstructor\r\npublic class WebSecurityConfig {\r\n\r\n    private final AppUserService appUserService;\r\n    private final BCryptPasswordEncoder bCryptPasswordEncoder;\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeHttpRequests((authorizeRequests) -&gt;\r\n                        authorizeRequests\r\n                                .requestMatchers(&quot;api/v1/register&quot;).permitAll()\r\n                                .requestMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n                                .requestMatchers(&quot;/**&quot;).hasRole(&quot;USER&quot;))\r\n                .httpBasic(Customizer.withDefaults())\r\n                .formLogin(Customizer.withDefaults());\r\n\r\n        return http.build();\r\n    }\r\n\r\n\r\n\r\n    @Bean\r\n    public DaoAuthenticationProvider daoAuthenticationProvider(){\r\n        DaoAuthenticationProvider provider=new DaoAuthenticationProvider();\r\n        provider.setPasswordEncoder(bCryptPasswordEncoder);\r\n        provider.setUserDetailsService(appUserService);\r\n\r\n        return provider;\r\n    }\r\n}\r\n```\r\nThis is my websecurityconfig\r\n```\r\n# JPA configuration\r\nspring.jpa.hibernate.ddl-auto=create-drop\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\r\nspring.jpa.properties.hibernate.format_sql=true\r\nspring.jpa.show-sql=true\r\n\r\nspring.security.user.name=user\r\nspring.security.user.password=password\r\n\r\n\r\nserver.port=4000\r\n```\r\n\r\nThis is the porperties file.\r\n\r\n[![enter image description here](https://i.stack.imgur.com/Aqx50.png &quot;and this is my nightmare&quot;)](https://i.stack.imgur.com/Aqx50.png)\r\n\r\nI hope anyone can tell me where I have gone wrong. I tried searching all places, but spring 6 has deprecated many things and im at a loss. Tried chatgpt etc., but no help.\r\n\r\n```\r\npackage com.example.anime_website_backend.user;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\n@Service\r\n@AllArgsConstructor\r\npublic class AppUserService implements UserDetailsService {\r\n\r\n\r\n    private final AppUserRepository appUserRepository;\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String email)\r\n            throws UsernameNotFoundException{\r\n        AppUser appUser= appUserRepository\r\n                .findByEmail(email)\r\n                .orElseThrow(()-&gt;\r\n                        new UsernameNotFoundException(\r\n                        String\r\n                                .format(AppUserRelatedMessages\r\n                                        .USER_NOT_FOUND\r\n                                        .getMessage(email))\r\n                ));\r\n\r\n        List&lt;GrantedAuthority&gt; authorities=new ArrayList&lt;&gt;();\r\n        for(String role:appUser.getRoles()){\r\n            authorities.add(new SimpleGrantedAuthority(role));\r\n    }\r\n        return new org\r\n                .springframework\r\n                .security\r\n                .core\r\n                .userdetails\r\n                .User(\r\n                    appUser.getEmail(),\r\n                    appUser.getPassword(),\r\n                    authorities\r\n        );\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\nthis is the AppUser class \r\n\r\n\r\n\r\n\r\n\r\n\r\ni get a feeling that nothing from application.properties is being read ad when i comment the ``` spring.security.user.password=password``` the auto generated password isnt appearing in console.","link":"https://stackoverflow.com/questions/77576150/how-to-fix-bad-credentials-error-spring-security","title":"How to fix bad credentials error - spring security","body":"<p>As soon as I fire up server i'm being redirected to login page, which always gives bad credentials.</p>\n<p>I have tried all that i could understand</p>\n<pre><code>package com.example.anime_website_backend.security.config;\n\n\nimport com.example.anime_website_backend.user.AppUserService;\nimport lombok.AllArgsConstructor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\nimport org.springframework.security.config.Customizer;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\n\n@Configuration\n@AllArgsConstructor\npublic class WebSecurityConfig {\n\n    private final AppUserService appUserService;\n    private final BCryptPasswordEncoder bCryptPasswordEncoder;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((authorizeRequests) -&gt;\n                        authorizeRequests\n                                .requestMatchers(&quot;api/v1/register&quot;).permitAll()\n                                .requestMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\n                                .requestMatchers(&quot;/**&quot;).hasRole(&quot;USER&quot;))\n                .httpBasic(Customizer.withDefaults())\n                .formLogin(Customizer.withDefaults());\n\n        return http.build();\n    }\n\n\n\n    @Bean\n    public DaoAuthenticationProvider daoAuthenticationProvider(){\n        DaoAuthenticationProvider provider=new DaoAuthenticationProvider();\n        provider.setPasswordEncoder(bCryptPasswordEncoder);\n        provider.setUserDetailsService(appUserService);\n\n        return provider;\n    }\n}\n</code></pre>\n<p>This is my websecurityconfig</p>\n<pre><code># JPA configuration\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.properties.hibernate.format_sql=true\nspring.jpa.show-sql=true\n\nspring.security.user.name=user\nspring.security.user.password=password\n\n\nserver.port=4000\n</code></pre>\n<p>This is the porperties file.</p>\n<p><a href=\"https://i.stack.imgur.com/Aqx50.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Aqx50.png\" alt=\"enter image description here\" title=\"and this is my nightmare\" /></a></p>\n<p>I hope anyone can tell me where I have gone wrong. I tried searching all places, but spring 6 has deprecated many things and im at a loss. Tried chatgpt etc., but no help.</p>\n<pre><code>package com.example.anime_website_backend.user;\n\nimport lombok.AllArgsConstructor;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Service;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n\n@Service\n@AllArgsConstructor\npublic class AppUserService implements UserDetailsService {\n\n\n    private final AppUserRepository appUserRepository;\n\n    @Override\n    public UserDetails loadUserByUsername(String email)\n            throws UsernameNotFoundException{\n        AppUser appUser= appUserRepository\n                .findByEmail(email)\n                .orElseThrow(()-&gt;\n                        new UsernameNotFoundException(\n                        String\n                                .format(AppUserRelatedMessages\n                                        .USER_NOT_FOUND\n                                        .getMessage(email))\n                ));\n\n        List&lt;GrantedAuthority&gt; authorities=new ArrayList&lt;&gt;();\n        for(String role:appUser.getRoles()){\n            authorities.add(new SimpleGrantedAuthority(role));\n    }\n        return new org\n                .springframework\n                .security\n                .core\n                .userdetails\n                .User(\n                    appUser.getEmail(),\n                    appUser.getPassword(),\n                    authorities\n        );\n\n    }\n\n}\n\n</code></pre>\n<p>this is the AppUser class</p>\n<p>i get a feeling that nothing from application.properties is being read ad when i comment the <code> spring.security.user.password=password</code> the auto generated password isnt appearing in console.</p>\n"},{"tags":["java","multithreading","wait","notify"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701393545,"creation_date":1701393545,"answer_id":77582529,"question_id":77580308,"body_markdown":"When you write `notify()`, it means _exactly_ the same thing as if you wrote `this.notify()`.\r\n\r\nYour `deposit()` method is an instance method of the `NewProgram` class. When you write `notify()` inside the deposit() method, you are notifying the NewProgram instance on which the deposit() method was called. Inside deposit(), `this` refers to a NewProgram instance.\r\n\r\nYour `run()` method for thread2 is _not_ a NewProgram instance method. It is an instance method of the _anonymous_ class that you defined when you wrote `new Runnable(){ ... }`. Inside the `run()` method, `notify()` (which really means `this.notify()`) is notifying an instance of the anonymous class, and _not_ the NewProgram instance that is wait()ing in the `withdraw()` method in thread 1.","link":"https://stackoverflow.com/questions/77580308/issues-with-the-placement-of-notify-method/77582529#77582529","title":"Issues with the placement of notify method","body":"<p>When you write <code>notify()</code>, it means <em>exactly</em> the same thing as if you wrote <code>this.notify()</code>.</p>\n<p>Your <code>deposit()</code> method is an instance method of the <code>NewProgram</code> class. When you write <code>notify()</code> inside the deposit() method, you are notifying the NewProgram instance on which the deposit() method was called. Inside deposit(), <code>this</code> refers to a NewProgram instance.</p>\n<p>Your <code>run()</code> method for thread2 is <em>not</em> a NewProgram instance method. It is an instance method of the <em>anonymous</em> class that you defined when you wrote <code>new Runnable(){ ... }</code>. Inside the <code>run()</code> method, <code>notify()</code> (which really means <code>this.notify()</code>) is notifying an instance of the anonymous class, and <em>not</em> the NewProgram instance that is wait()ing in the <code>withdraw()</code> method in thread 1.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":23,"answer_count":1,"score":0,"last_activity_date":1701394625,"creation_date":1701363617,"last_edit_date":1701394625,"question_id":77580308,"body_markdown":"I was trying wait and notify methods. Notify method when put in run method does not work but when the same method is put in some other method it works.\r\n\r\n    public class NewProgram {\r\n    static int balance = 0;\r\n\r\n    public void withdraw(int amount) {\r\n        synchronized(this)\r\n        {\r\n            if(balance== 0) {\r\n            try{\r\n                System.out.println(&quot;Waiting for deposit&quot;);\r\n                wait();\r\n            } catch(InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n            }\r\n        }\r\n            balance = balance - amount;\r\n            System.out.println(&quot;Amount Withdrawn Successfully&quot;);   \r\n    }\r\n    public void deposit(int amount) {\r\n\r\n        balance = balance + amount;\r\n        System.out.println(&quot;Money Deposited Successfully&quot;);\r\n\r\n        //  The Notify method here works\r\n        //    synchronized(this) \r\n        //         {\r\n        //             notify();\r\n        //         }}\r\n\r\n    public static void main(String[] args) {\r\n\r\n        NewProgram app = new NewProgram();\r\n        Thread thread1 = new Thread (new Runnable(){\r\n\r\n            @Override\r\n            public void run(){\r\n                app.withdraw(2000);\r\n            }\r\n        }); \r\n        \r\n        thread1.start();\r\n\r\n        Thread thread2 = new Thread(new Runnable(){\r\n\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    Thread.sleep(5000);\r\n\r\n                //  The Notify method here doesn&#39;t work\r\n                //     synchronized(this) {\r\n                //     notify();\r\n                // }\r\n                    \r\n                } catch (InterruptedException e) {\r\n                    \r\n                    e.printStackTrace();\r\n                }\r\n                \r\n                app.deposit(3000);\r\n\r\n\r\n                // The notify method from here doesn&#39;t work\r\n                //synchronized(this) {\r\n                //     notify();\r\n                //}            \r\n                System.out.println(&quot;Thread 2 ends&quot;);\r\n            } \r\n        });\r\n        thread2.start();\r\n    }}\r\n\r\n\r\n\r\nSo, here in this program withdraw method when balance is zero waits for deposit method for the money to be deposited. Then the lock on wait is removed and withdraw operations continue. This program runs perfectly when notify method is called in deposit method. But when notify is placed is run method of Thread 2 after calling the deposit method, the lock on wait is not removed, but the next statement **Thread 2 ends** gets executed and the program waits indefinitely. Please help me with this.","link":"https://stackoverflow.com/questions/77580308/issues-with-the-placement-of-notify-method","title":"Issues with the placement of notify method","body":"<p>I was trying wait and notify methods. Notify method when put in run method does not work but when the same method is put in some other method it works.</p>\n<pre><code>public class NewProgram {\nstatic int balance = 0;\n\npublic void withdraw(int amount) {\n    synchronized(this)\n    {\n        if(balance== 0) {\n        try{\n            System.out.println(&quot;Waiting for deposit&quot;);\n            wait();\n        } catch(InterruptedException e) {\n            e.printStackTrace();\n        }\n        }\n    }\n        balance = balance - amount;\n        System.out.println(&quot;Amount Withdrawn Successfully&quot;);   \n}\npublic void deposit(int amount) {\n\n    balance = balance + amount;\n    System.out.println(&quot;Money Deposited Successfully&quot;);\n\n    //  The Notify method here works\n    //    synchronized(this) \n    //         {\n    //             notify();\n    //         }}\n\npublic static void main(String[] args) {\n\n    NewProgram app = new NewProgram();\n    Thread thread1 = new Thread (new Runnable(){\n\n        @Override\n        public void run(){\n            app.withdraw(2000);\n        }\n    }); \n    \n    thread1.start();\n\n    Thread thread2 = new Thread(new Runnable(){\n\n        @Override\n        public void run() {\n            try {\n                Thread.sleep(5000);\n\n            //  The Notify method here doesn't work\n            //     synchronized(this) {\n            //     notify();\n            // }\n                \n            } catch (InterruptedException e) {\n                \n                e.printStackTrace();\n            }\n            \n            app.deposit(3000);\n\n\n            // The notify method from here doesn't work\n            //synchronized(this) {\n            //     notify();\n            //}            \n            System.out.println(&quot;Thread 2 ends&quot;);\n        } \n    });\n    thread2.start();\n}}\n</code></pre>\n<p>So, here in this program withdraw method when balance is zero waits for deposit method for the money to be deposited. Then the lock on wait is removed and withdraw operations continue. This program runs perfectly when notify method is called in deposit method. But when notify is placed is run method of Thread 2 after calling the deposit method, the lock on wait is not removed, but the next statement <strong>Thread 2 ends</strong> gets executed and the program waits indefinitely. Please help me with this.</p>\n"}],"has_more":true,"quota_max":300,"quota_remaining":292}