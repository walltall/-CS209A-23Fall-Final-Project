{"items":[{"tags":["java","linux","spring","spring-boot","logback"],"comment_count":0,"is_answered":false,"view_count":18,"answer_count":0,"score":0,"last_activity_date":1701217649,"creation_date":1701217649,"question_id":77567913,"body_markdown":"I found out some problem with logback creating .tmp files.\r\nI did look at all of the previous questions about logback config questions about .tmp files, and I still have a question.\r\n\r\nIt&#39;s not about the logback-config.xml problem.\r\nMy config file is working well.\r\n\r\nThe problem is, my server is a **batch program server**, and the java process is not always running, but runs when my Jenkins scheduler tells it to run.\r\n\r\nMy logback config has this RollingPolicy\r\n\r\n    &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\r\n       &lt;fileNamePattern&gt;${appLogFilePath}.%d{yyyy-MM-dd}.%i.log.gz&lt;/fileNamePattern&gt;\r\n       &lt;maxFileSize&gt;200MB&lt;/maxFileSize&gt;\r\n       &lt;maxHistory&gt;5&lt;/maxHistory&gt;\r\n       &lt;totalSizeCap&gt;3GB&lt;/totalSizeCap&gt;\r\n    &lt;/rollingPolicy&gt;\r\nSo it rolls and create .gz file every 200MB or, at 00:00 every day.\r\n\r\nBut when it starts rolling, my batch java process could end before it&#39;s done with compressing.\r\nSo it leaves a .tmp file, and imcomplete .gz file.\r\n\r\nIs there any good solution for this problem?\r\n\r\nThis is my idea to a possible solution\r\n1. Create a shell script file to delete every *.tmp files every 5 days.\r\n\r\nBecause my log files are not that important,  I thought it could be okay to delete the *.tmp files.\r\n\r\nPlease share some good ideas to solve this problem.\r\n\r\nThank you","link":"https://stackoverflow.com/questions/77567913/spring-boot-logback-creating-and-leaving-big-size-tmp-files","title":"Spring Boot logback creating and leaving big size .tmp files","body":"<p>I found out some problem with logback creating .tmp files.\nI did look at all of the previous questions about logback config questions about .tmp files, and I still have a question.</p>\n<p>It's not about the logback-config.xml problem.\nMy config file is working well.</p>\n<p>The problem is, my server is a <strong>batch program server</strong>, and the java process is not always running, but runs when my Jenkins scheduler tells it to run.</p>\n<p>My logback config has this RollingPolicy</p>\n<pre><code>&lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\n   &lt;fileNamePattern&gt;${appLogFilePath}.%d{yyyy-MM-dd}.%i.log.gz&lt;/fileNamePattern&gt;\n   &lt;maxFileSize&gt;200MB&lt;/maxFileSize&gt;\n   &lt;maxHistory&gt;5&lt;/maxHistory&gt;\n   &lt;totalSizeCap&gt;3GB&lt;/totalSizeCap&gt;\n&lt;/rollingPolicy&gt;\n</code></pre>\n<p>So it rolls and create .gz file every 200MB or, at 00:00 every day.</p>\n<p>But when it starts rolling, my batch java process could end before it's done with compressing.\nSo it leaves a .tmp file, and imcomplete .gz file.</p>\n<p>Is there any good solution for this problem?</p>\n<p>This is my idea to a possible solution</p>\n<ol>\n<li>Create a shell script file to delete every *.tmp files every 5 days.</li>\n</ol>\n<p>Because my log files are not that important,  I thought it could be okay to delete the *.tmp files.</p>\n<p>Please share some good ideas to solve this problem.</p>\n<p>Thank you</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"comments":[{"score":1,"post_type":"question","creation_date":1701221456,"post_id":77566854,"comment_id":136747944,"body_markdown":"why not read the official documentation?","link":"https://stackoverflow.com/questions/77566854/how-to-allow-static-folder-and-css-files-in-spring-security-as-antmtchers-is-dpe#comment136747944_77566854","body":"why not read the official documentation?"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701216568,"creation_date":1701216568,"answer_id":77567869,"question_id":77566854,"body_markdown":"You need to add\r\n\r\n    http.requestMatchers(PathRequest.toStaticResources().atCommonLocations()).permitAll()\r\n\r\nto configure Spring Security to allow unauthenticated access to the resources under src/main/resources/static. Also, remove\r\n\r\n`&quot;../static/css&quot;, &quot;../static/images&quot;` \r\n\r\nfrom your configuration.","link":"https://stackoverflow.com/questions/77566854/how-to-allow-static-folder-and-css-files-in-spring-security-as-antmtchers-is-dpe/77567869#77567869","title":"how to allow static folder and css files in spring security as antMtchers is dperecated","body":"<p>You need to add</p>\n<pre><code>http.requestMatchers(PathRequest.toStaticResources().atCommonLocations()).permitAll()\n</code></pre>\n<p>to configure Spring Security to allow unauthenticated access to the resources under src/main/resources/static. Also, remove</p>\n<p><code>&quot;../static/css&quot;, &quot;../static/images&quot;</code></p>\n<p>from your configuration.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":38,"answer_count":1,"score":-1,"last_activity_date":1701216568,"creation_date":1701201825,"last_edit_date":1701213688,"question_id":77566854,"body_markdown":"    package com.example.config;\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    //import org.springframework.security.config.annotation.web.builders.WebSecurity;\r\n    import org.springframework.security.crypto.password.PasswordEncoder;\r\n    import org.springframework.security.web.SecurityFilterChain;\r\n    import org.springframework.security.web.util.matcher.AntPathRequestMatcher;\r\n    import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\n    import org.springframework.security.config.annotation.web.configuration.*;\r\n\r\n    import com.example.service.CustomUserDetailsService;\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n\r\n    @Autowired\r\n    CustomUserDetailsService customUserDetailsServcie;\r\n\r\n    @Bean\r\n    public static PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n\r\n        http.csrf().disable().authorizeHttpRequests()\r\n            .requestMatchers(&quot;/registration&quot;, &quot;/password-request&quot;, &quot;/reset-password&quot;, &quot;../static/css&quot;,\r\n                &quot;../static/images&quot;)\r\n            .permitAll().requestMatchers(&quot;home&quot;).permitAll().and().formLogin().loginPage(&quot;/login&quot;)\r\n            .loginProcessingUrl(&quot;/login&quot;).defaultSuccessUrl(&quot;/home&quot;, true).permitAll().and().logout()\r\n            .invalidateHttpSession(true).clearAuthentication(true)\r\n            .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;)).logoutSuccessUrl(&quot;/login?logout&quot;)\r\n            .permitAll();\r\n        return http.build();\r\n    }\r\n\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n\r\n        auth.userDetailsService(customUserDetailsServcie).passwordEncoder(passwordEncoder());\r\n\r\n    }\r\n\r\n}\r\nI have watch videos and read post but everywhere I see only solutions using antMatchers . Most of the post in stackoverflow are old and now as antMatchers doesnt work in latest spring there isnt any proper solultion.","link":"https://stackoverflow.com/questions/77566854/how-to-allow-static-folder-and-css-files-in-spring-security-as-antmtchers-is-dpe","title":"how to allow static folder and css files in spring security as antMtchers is dperecated","body":"<pre><code>package com.example.config;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\n//import org.springframework.security.config.annotation.web.builders.WebSecurity;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.config.annotation.web.configuration.*;\n\nimport com.example.service.CustomUserDetailsService;\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n@Autowired\nCustomUserDetailsService customUserDetailsServcie;\n\n@Bean\npublic static PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n\n@Bean\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n\n    http.csrf().disable().authorizeHttpRequests()\n        .requestMatchers(&quot;/registration&quot;, &quot;/password-request&quot;, &quot;/reset-password&quot;, &quot;../static/css&quot;,\n            &quot;../static/images&quot;)\n        .permitAll().requestMatchers(&quot;home&quot;).permitAll().and().formLogin().loginPage(&quot;/login&quot;)\n        .loginProcessingUrl(&quot;/login&quot;).defaultSuccessUrl(&quot;/home&quot;, true).permitAll().and().logout()\n        .invalidateHttpSession(true).clearAuthentication(true)\n        .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;)).logoutSuccessUrl(&quot;/login?logout&quot;)\n        .permitAll();\n    return http.build();\n}\n\npublic void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n\n    auth.userDetailsService(customUserDetailsServcie).passwordEncoder(passwordEncoder());\n\n}\n</code></pre>\n<p>}\nI have watch videos and read post but everywhere I see only solutions using antMatchers . Most of the post in stackoverflow are old and now as antMatchers doesnt work in latest spring there isnt any proper solultion.</p>\n"},{"tags":["java","filter","filtering"],"comment_count":0,"is_answered":false,"view_count":17,"answer_count":0,"score":0,"last_activity_date":1701216229,"creation_date":1701216229,"question_id":77567849,"body_markdown":"I got this exercise:\r\n\r\nExercise 4: Marr and Hildreth Filtering\r\n\r\nYou will implement edge detection using two Gaussian filters with different amplitudes. Construct two Gaussian filters, of size 5x5 and 7x7, using the following formula:\r\n\r\nf(x,y)=k⋅e^-(x+y)\r\n\r\nyou will use k=200. The values ​​for filters A and B that you should obtain are as follows (notice the divisor each time below, which sums up all the values ​​and allows for normalization):\r\n\r\nTo calculate the filters, vary x and y between -sqrt(2) and sqrt(2)\r\n\r\n.\r\n\r\nTo apply the Marr and Hildreth filter, perform convolutions using filters A and B to obtain two images, IA and IB, and then calculate IB-IA. Observe the result.\r\n\r\nI want to treat it: the problem is that I don&#39;t understand what they mean by To calculate the filters by varyingg x and y between -sqrt(2) and sqrt (2), how can I do this and what they mean ?\r\n\r\nI already started by implementing the functions to calculate and I found a formula that you will find in the program below: the problem here is that the filters that I generate depend on the x,y positions in the matrix and not values ​​​​-sqrt (2) and sqrt(2). and I think I don&#39;t really understand the filtering principle of Marr and Hildreth.\r\n\r\nin any case I know that it is necessary to standardize, which I obviously did in all if there is someone who knows images and filters who could help me I will be happy (and also i did the convolutions etc... the only thing is the sqrt(2) thing ...)\r\n\r\n```\r\n    //Classe qui construit le filtre avec une taille et le param&#232;tre k donn&#233; Tq k=200\r\n    public static double[][] construireFiltreGaussien(int taille, double k) {\r\n\r\n        double[][] filtre = new double[taille][taille];\r\n        double carreDeDeux = Math.sqrt(2); // initialisation d&#39;une valeur qui est &#233;gale a la r&#233;cine carr&#233; de 2 \r\n\r\n        // Calcul des valeurs du filtre gaussien\r\n        for (int x = 0; x &lt; taille; x++) {\r\n            for (int y = 0; y &lt; taille; y++) {\r\n                double e = Math.exp(-(Math.pow(x - taille / 2, 2) + Math.pow(y - taille / 2, 2)) / (2 * carreDeDeux * carreDeDeux));\r\n                //double e = Math.exp((-Math.pow(x, 2) - Math.pow(y , 2))); // Fonction de calcul \r\n                filtre[x][y] = k * e; //remplissage du filtre avec les valeur \r\n            }\r\n        }\r\n\r\n        //Calcul de la somme de la matrice du filtre\r\n        double somme = 0;\r\n        for (int x = 0; x &lt; taille; x++) {\r\n            for (int y = 0; y &lt; taille; y++) {\r\n                somme += filtre[x][y];\r\n            }\r\n        }\r\n        \r\n         // Normalisation du filtre\r\n        for (int x = 0; x &lt; taille; x++) {\r\n            for (int y = 0; y &lt; taille; y++) {\r\n                filtre[x][y] /= somme;\r\n            }\r\n        }\r\n        return filtre;\r\n    }\r\n```\r\n\r\nI will have to have counters of a black and white image it works with the formula that I found on the internet, but I feel that I am drifting from the subject.","link":"https://stackoverflow.com/questions/77567849/java-marr-and-hildreth-filtering","title":"Java Marr and Hildreth Filtering","body":"<p>I got this exercise:</p>\n<p>Exercise 4: Marr and Hildreth Filtering</p>\n<p>You will implement edge detection using two Gaussian filters with different amplitudes. Construct two Gaussian filters, of size 5x5 and 7x7, using the following formula:</p>\n<p>f(x,y)=k⋅e^-(x+y)</p>\n<p>you will use k=200. The values ​​for filters A and B that you should obtain are as follows (notice the divisor each time below, which sums up all the values ​​and allows for normalization):</p>\n<p>To calculate the filters, vary x and y between -sqrt(2) and sqrt(2)</p>\n<p>.</p>\n<p>To apply the Marr and Hildreth filter, perform convolutions using filters A and B to obtain two images, IA and IB, and then calculate IB-IA. Observe the result.</p>\n<p>I want to treat it: the problem is that I don't understand what they mean by To calculate the filters by varyingg x and y between -sqrt(2) and sqrt (2), how can I do this and what they mean ?</p>\n<p>I already started by implementing the functions to calculate and I found a formula that you will find in the program below: the problem here is that the filters that I generate depend on the x,y positions in the matrix and not values ​​​​-sqrt (2) and sqrt(2). and I think I don't really understand the filtering principle of Marr and Hildreth.</p>\n<p>in any case I know that it is necessary to standardize, which I obviously did in all if there is someone who knows images and filters who could help me I will be happy (and also i did the convolutions etc... the only thing is the sqrt(2) thing ...)</p>\n<pre><code>    //Classe qui construit le filtre avec une taille et le paramètre k donné Tq k=200\n    public static double[][] construireFiltreGaussien(int taille, double k) {\n\n        double[][] filtre = new double[taille][taille];\n        double carreDeDeux = Math.sqrt(2); // initialisation d'une valeur qui est égale a la récine carré de 2 \n\n        // Calcul des valeurs du filtre gaussien\n        for (int x = 0; x &lt; taille; x++) {\n            for (int y = 0; y &lt; taille; y++) {\n                double e = Math.exp(-(Math.pow(x - taille / 2, 2) + Math.pow(y - taille / 2, 2)) / (2 * carreDeDeux * carreDeDeux));\n                //double e = Math.exp((-Math.pow(x, 2) - Math.pow(y , 2))); // Fonction de calcul \n                filtre[x][y] = k * e; //remplissage du filtre avec les valeur \n            }\n        }\n\n        //Calcul de la somme de la matrice du filtre\n        double somme = 0;\n        for (int x = 0; x &lt; taille; x++) {\n            for (int y = 0; y &lt; taille; y++) {\n                somme += filtre[x][y];\n            }\n        }\n        \n         // Normalisation du filtre\n        for (int x = 0; x &lt; taille; x++) {\n            for (int y = 0; y &lt; taille; y++) {\n                filtre[x][y] /= somme;\n            }\n        }\n        return filtre;\n    }\n</code></pre>\n<p>I will have to have counters of a black and white image it works with the formula that I found on the internet, but I feel that I am drifting from the subject.</p>\n"},{"tags":["java","bigdecimal","rounding-error"],"comments":[{"score":1,"post_type":"question","creation_date":1701207640,"post_id":77567282,"comment_id":136746355,"body_markdown":"You lost precision when you overwrite your original price with the rounded price.","link":"https://stackoverflow.com/questions/77567282/precision-error-while-converting-dollars-gallon-to-dollars-liter-and-back#comment136746355_77567282","body":"You lost precision when you overwrite your original price with the rounded price."},{"score":0,"post_type":"question","creation_date":1701208129,"post_id":77567282,"comment_id":136746433,"body_markdown":"There are 3.785411784 liters in a gallon. You could also divide by that going the other way, instead of multiplying by the inverse truncated to three sig figs.","link":"https://stackoverflow.com/questions/77567282/precision-error-while-converting-dollars-gallon-to-dollars-liter-and-back#comment136746433_77567282","body":"There are 3.785411784 liters in a gallon. You could also divide by that going the other way, instead of multiplying by the inverse truncated to three sig figs."},{"score":0,"post_type":"question","creation_date":1701208258,"post_id":77567282,"comment_id":136746464,"body_markdown":"Of course, if you truncate the price to three sig figs, that&#39;s all the significance you&#39;ll have. Any further precision is lost, as jxh points out.","link":"https://stackoverflow.com/questions/77567282/precision-error-while-converting-dollars-gallon-to-dollars-liter-and-back#comment136746464_77567282","body":"Of course, if you truncate the price to three sig figs, that&#39;s all the significance you&#39;ll have. Any further precision is lost, as jxh points out."}],"answers":[{"comment_count":0,"score":2,"last_activity_date":1701208219,"creation_date":1701208219,"answer_id":77567355,"question_id":77567282,"body_markdown":"This is not a floating-point representation issue; it&#39;s a rounding issue.  When you round, your value is no longer accurate.  In addition, the two values you multiply with don&#39;t themselves multiply to be 1; they&#39;re not quite inverses.\r\n\r\nWhen you take `3.95` and multiply it by `0.264`, the value is `1.0428`, which you round down to `1.04`.  When you multiply `1.04` by `3.785`, you get `3.9364`, which is rounded up to `3.94`.\r\n\r\nBut you represent the inverse of `3.785` as `0.264`, which is close, but not quite equal to the actual inverse of about `0.2642008`.  But even multiplying the true inverse value by `3.95` you get `1.04359316`, which you would still round down to `1.04`.\r\n\r\nIf you must convert back to the same value, then store the un-rounded value for multiplying later, even if you display the rounded value.  Also, instead of multiplying by `0.264`, just divide by the same number that you multiplied by in the other case, `3.785`.","link":"https://stackoverflow.com/questions/77567282/precision-error-while-converting-dollars-gallon-to-dollars-liter-and-back/77567355#77567355","title":"Precision Error while converting dollars/gallon to dollars/liter and back","body":"<p>This is not a floating-point representation issue; it's a rounding issue.  When you round, your value is no longer accurate.  In addition, the two values you multiply with don't themselves multiply to be 1; they're not quite inverses.</p>\n<p>When you take <code>3.95</code> and multiply it by <code>0.264</code>, the value is <code>1.0428</code>, which you round down to <code>1.04</code>.  When you multiply <code>1.04</code> by <code>3.785</code>, you get <code>3.9364</code>, which is rounded up to <code>3.94</code>.</p>\n<p>But you represent the inverse of <code>3.785</code> as <code>0.264</code>, which is close, but not quite equal to the actual inverse of about <code>0.2642008</code>.  But even multiplying the true inverse value by <code>3.95</code> you get <code>1.04359316</code>, which you would still round down to <code>1.04</code>.</p>\n<p>If you must convert back to the same value, then store the un-rounded value for multiplying later, even if you display the rounded value.  Also, instead of multiplying by <code>0.264</code>, just divide by the same number that you multiplied by in the other case, <code>3.785</code>.</p>\n"},{"comment_count":0,"score":1,"last_activity_date":1701212027,"last_edit_date":1701212027,"creation_date":1701208749,"answer_id":77567408,"question_id":77567282,"body_markdown":"As soon as you are using floating point (`double`, `float`) you lost your precision after the period, the so called _scale_ (10&lt;sup&gt;**-3**&lt;/sup&gt; here for 3.785).\r\n\r\nSo do not use the `BigDecimal` constructor with a `double` but with a `String`. Then the scale, digits after the period, will be specified.\r\n\r\n    BigDecimal pricePerLiter = new BigDecimal(txtFields.get(1).getText());\r\n    BigDecimal pricePerGallon =  pricePerLiter.multiply(new BigDecimal(&quot;3.785&quot;));    \r\n\r\nSo &quot;1.00&quot; * &quot;3.785&quot; will become &quot;3.78500&quot;.\r\nThis cannot be achieved by a double 3.785 as that is an approximation, maybe equal to 3.7849999998.                    \r\n\r\nSo either use only `BigDecimal` or use the imprecise `double` and print a rounded text: `Sytem.out.printf(&quot;%5.2f&quot;, 3.785); // 3.79`.","link":"https://stackoverflow.com/questions/77567282/precision-error-while-converting-dollars-gallon-to-dollars-liter-and-back/77567408#77567408","title":"Precision Error while converting dollars/gallon to dollars/liter and back","body":"<p>As soon as you are using floating point (<code>double</code>, <code>float</code>) you lost your precision after the period, the so called <em>scale</em> (10<sup><strong>-3</strong></sup> here for 3.785).</p>\n<p>So do not use the <code>BigDecimal</code> constructor with a <code>double</code> but with a <code>String</code>. Then the scale, digits after the period, will be specified.</p>\n<pre><code>BigDecimal pricePerLiter = new BigDecimal(txtFields.get(1).getText());\nBigDecimal pricePerGallon =  pricePerLiter.multiply(new BigDecimal(&quot;3.785&quot;));    \n</code></pre>\n<p>So &quot;1.00&quot; * &quot;3.785&quot; will become &quot;3.78500&quot;.\nThis cannot be achieved by a double 3.785 as that is an approximation, maybe equal to 3.7849999998.</p>\n<p>So either use only <code>BigDecimal</code> or use the imprecise <code>double</code> and print a rounded text: <code>Sytem.out.printf(&quot;%5.2f&quot;, 3.785); // 3.79</code>.</p>\n"}],"comment_count":3,"is_answered":true,"view_count":48,"answer_count":2,"score":1,"last_activity_date":1701212027,"creation_date":1701207419,"question_id":77567282,"body_markdown":"The following code has a precision error but I&#39;m at a loss as to how to resolve it.  Given an initial value set in dollar/gal of $3.95, when change the ChoiceBox to &quot;dollars/liter&quot; I get $1.04, but when I change it back to dollar/gal I&#39;m getting $3.94 instead of $3.95\r\n\r\n\r\n```\r\nif (&quot;dollar/gal&quot;.equals(newValue)) {\r\n   double pricePerLiter = Double.parseDouble(txtFields.get(1).getText());\r\n   BigDecimal pricePerGallon =  BigDecimal.valueOf(pricePerLiter * 3.785);                        \r\n   pricePerGallon = pricePerGallon.setScale(2, RoundingMode.HALF_UP);                        \r\n   txtFields.get(1).setText(pricePerGallon.toString());\r\n\r\n} else if (&quot;dollars/liter&quot;.equals(newValue)) {\r\n\r\n  double pricePerGallon = Double.parseDouble(txtFields.get(1).getText());                        \r\n  BigDecimal pricePerLiter = BigDecimal.valueOf(pricePerGallon * 0.264);                        \r\n  pricePerLiter = pricePerLiter.setScale(2, RoundingMode.HALF_UP);\r\n  txtFields.get(1).setText(pricePerLiter.toString());\r\n}\r\n```\r\n\r\n\r\nI&#39;ve attempted this with both Math.Round() and BigDecimal and RoundingMode (which is the version above) but cannot resolve this issue.","link":"https://stackoverflow.com/questions/77567282/precision-error-while-converting-dollars-gallon-to-dollars-liter-and-back","title":"Precision Error while converting dollars/gallon to dollars/liter and back","body":"<p>The following code has a precision error but I'm at a loss as to how to resolve it.  Given an initial value set in dollar/gal of $3.95, when change the ChoiceBox to &quot;dollars/liter&quot; I get $1.04, but when I change it back to dollar/gal I'm getting $3.94 instead of $3.95</p>\n<pre><code>if (&quot;dollar/gal&quot;.equals(newValue)) {\n   double pricePerLiter = Double.parseDouble(txtFields.get(1).getText());\n   BigDecimal pricePerGallon =  BigDecimal.valueOf(pricePerLiter * 3.785);                        \n   pricePerGallon = pricePerGallon.setScale(2, RoundingMode.HALF_UP);                        \n   txtFields.get(1).setText(pricePerGallon.toString());\n\n} else if (&quot;dollars/liter&quot;.equals(newValue)) {\n\n  double pricePerGallon = Double.parseDouble(txtFields.get(1).getText());                        \n  BigDecimal pricePerLiter = BigDecimal.valueOf(pricePerGallon * 0.264);                        \n  pricePerLiter = pricePerLiter.setScale(2, RoundingMode.HALF_UP);\n  txtFields.get(1).setText(pricePerLiter.toString());\n}\n</code></pre>\n<p>I've attempted this with both Math.Round() and BigDecimal and RoundingMode (which is the version above) but cannot resolve this issue.</p>\n"},{"tags":["java","exception"],"comments":[{"score":2,"post_type":"question","creation_date":1701210847,"post_id":77567522,"comment_id":136746882,"body_markdown":"Why not just use an `IllegalArgumentException` for all three?","link":"https://stackoverflow.com/questions/77567522/should-i-create-exceptions-for-every-error-in-java#comment136746882_77567522","body":"Why not just use an <code>IllegalArgumentException</code> for all three?"},{"score":0,"post_type":"question","creation_date":1701212053,"post_id":77567522,"comment_id":136747021,"body_markdown":"@OldDogProgrammer well that is the point of the questions, if I should use something generic like IllegalArgumentException or if would be better to create custom exceptions.","link":"https://stackoverflow.com/questions/77567522/should-i-create-exceptions-for-every-error-in-java#comment136747021_77567522","body":"@OldDogProgrammer well that is the point of the questions, if I should use something generic like IllegalArgumentException or if would be better to create custom exceptions."},{"score":2,"post_type":"question","creation_date":1701212851,"post_id":77567522,"comment_id":136747123,"body_markdown":"For exceptions that can be handled  the same, like here and mostly elsewhere, OldDP is right. A different message should suffice.","link":"https://stackoverflow.com/questions/77567522/should-i-create-exceptions-for-every-error-in-java#comment136747123_77567522","body":"For exceptions that can be handled  the same, like here and mostly elsewhere, OldDP is right. A different message should suffice."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701211976,"post_id":77567555,"comment_id":136747009,"body_markdown":"I can see how creating custom hooks could make the codebase more complicated to work with, but isn&#39;t it worth to make the codebase more complicated and making debbuging the code less complicated by creating many custom exceptions?","link":"https://stackoverflow.com/questions/77567522/should-i-create-exceptions-for-every-error-in-java/77567555#comment136747009_77567555","body":"I can see how creating custom hooks could make the codebase more complicated to work with, but isn&#39;t it worth to make the codebase more complicated and making debbuging the code less complicated by creating many custom exceptions?"}],"comment_count":1,"score":1,"last_activity_date":1701211069,"creation_date":1701211069,"answer_id":77567555,"question_id":77567522,"body_markdown":"Creating custom exceptions in Java can be beneficial for better code organization and handling specific errors effectively. However, the decision to create custom exceptions depends on the context and the complexity of the application.\r\n\r\nIn your scenario, handling a negative balance could indeed benefit from a custom exception (NotEnoughBalanceException). This allows you to specifically catch and manage situations where the account balance falls below zero. \r\n\r\nRegarding whether to create numerous specific custom exceptions or use more generic Java exceptions, it&#39;s generally a good practice to strike a balance. Specific exceptions help in granular error handling and provide clearer insights into the issue, aiding in debugging and maintenance. Yet, excessive custom exceptions might overcomplicate the codebase.","link":"https://stackoverflow.com/questions/77567522/should-i-create-exceptions-for-every-error-in-java/77567555#77567555","title":"Should I create exceptions for every error in Java?","body":"<p>Creating custom exceptions in Java can be beneficial for better code organization and handling specific errors effectively. However, the decision to create custom exceptions depends on the context and the complexity of the application.</p>\n<p>In your scenario, handling a negative balance could indeed benefit from a custom exception (NotEnoughBalanceException). This allows you to specifically catch and manage situations where the account balance falls below zero.</p>\n<p>Regarding whether to create numerous specific custom exceptions or use more generic Java exceptions, it's generally a good practice to strike a balance. Specific exceptions help in granular error handling and provide clearer insights into the issue, aiding in debugging and maintenance. Yet, excessive custom exceptions might overcomplicate the codebase.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701211844,"post_id":77567562,"comment_id":136746998,"body_markdown":"So when i&#39;m working with web, it is a common practice to create custom exceptions to handle different HTTP status code instead of using a generic exception from java?","link":"https://stackoverflow.com/questions/77567522/should-i-create-exceptions-for-every-error-in-java/77567562#comment136746998_77567562","body":"So when i&#39;m working with web, it is a common practice to create custom exceptions to handle different HTTP status code instead of using a generic exception from java?"}],"comment_count":1,"score":1,"last_activity_date":1701211111,"creation_date":1701211111,"answer_id":77567562,"question_id":77567522,"body_markdown":"It all depends on your needs.\r\n\r\n1. If you need it for further handling such as in:\r\n - Aspects\r\n - returning a specific HTTP status code\r\n - returning a specific error key in the response body\r\n\r\nThen it is a necessity to create specific Exception classes.\r\n\r\n2. If you are fine with that the client always gets an `Internal server error` message with no further data, then `IllegalArgumentException` with the appropriate message would be sufficient in all cases.","link":"https://stackoverflow.com/questions/77567522/should-i-create-exceptions-for-every-error-in-java/77567562#77567562","title":"Should I create exceptions for every error in Java?","body":"<p>It all depends on your needs.</p>\n<ol>\n<li>If you need it for further handling such as in:</li>\n</ol>\n<ul>\n<li>Aspects</li>\n<li>returning a specific HTTP status code</li>\n<li>returning a specific error key in the response body</li>\n</ul>\n<p>Then it is a necessity to create specific Exception classes.</p>\n<ol start=\"2\">\n<li>If you are fine with that the client always gets an <code>Internal server error</code> message with no further data, then <code>IllegalArgumentException</code> with the appropriate message would be sufficient in all cases.</li>\n</ol>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701211751,"post_id":77567567,"comment_id":136746986,"body_markdown":"So even tho I could create a custom exception for each error, if i have a simple class its fine to use the exceptions that jave provides, in a more complex class, creating custom exceptions would be more benefitial?","link":"https://stackoverflow.com/questions/77567522/should-i-create-exceptions-for-every-error-in-java/77567567#comment136746986_77567567","body":"So even tho I could create a custom exception for each error, if i have a simple class its fine to use the exceptions that jave provides, in a more complex class, creating custom exceptions would be more benefitial?"}],"comment_count":1,"score":1,"last_activity_date":1701211239,"creation_date":1701211239,"answer_id":77567567,"question_id":77567522,"body_markdown":"The choice to create an exception class for every error depends on your specific needs.\r\n\r\nIf your program has complex error handling and needs to provide specific information about different errors, it may be beneficial to create an exception class for each type of error.\r\n\r\nFor example, in a game programming context, you might want to have different exception classes for network errors, input errors, and logic errors.\r\n\r\nOn the other hand, if your program doesn&#39;t need to provide much detail about different errors or doesn&#39;t have a lot of error conditions, you may be able to get away with using the standard exception classes that Java provides.\r\n\r\nIn summary, while creating a separate exception class for every error may offer more flexibility and control in your error handling, it&#39;s important to consider whether the effort is worth it given your specific requirements.","link":"https://stackoverflow.com/questions/77567522/should-i-create-exceptions-for-every-error-in-java/77567567#77567567","title":"Should I create exceptions for every error in Java?","body":"<p>The choice to create an exception class for every error depends on your specific needs.</p>\n<p>If your program has complex error handling and needs to provide specific information about different errors, it may be beneficial to create an exception class for each type of error.</p>\n<p>For example, in a game programming context, you might want to have different exception classes for network errors, input errors, and logic errors.</p>\n<p>On the other hand, if your program doesn't need to provide much detail about different errors or doesn't have a lot of error conditions, you may be able to get away with using the standard exception classes that Java provides.</p>\n<p>In summary, while creating a separate exception class for every error may offer more flexibility and control in your error handling, it's important to consider whether the effort is worth it given your specific requirements.</p>\n"}],"comment_count":3,"is_answered":true,"view_count":56,"answer_count":3,"score":0,"last_activity_date":1701211239,"creation_date":1701210592,"question_id":77567522,"body_markdown":"i&#39;m new to Java and I&#39;ve been studying exceptions, my question is when should I create a custom exception or not.\r\n\r\nFor example I&#39;m creating a simple app to deposit and withdraw from a Account, right now I have created 3 exceptions, but my account can&#39;t have a negative balance, so I would have to create a new exception to handle it in the constructor and possibly other custom exceptions, is it considered good practice to create very specific custom exceptions for each possible error, or should i try to use the more generic exceptions from java?\r\n\r\nit has its getters and setters i just didnt put it here to make it short.\r\n```\r\npublic class Account {\r\n\tprivate Integer number;\r\n\tprivate String holder;\r\n\tprivate Double balance;\r\n\tprivate Double withdrawLimit;\r\n\t\r\n\tpublic Account() {}\r\n\t\r\n\tpublic Account(Integer number, String holder, Double balance, Double withdrawLimit) {\r\n\t\tthis.number = number;\r\n\t\tthis.holder = holder;\r\n\t\tthis.balance = balance;\r\n\t\tthis.withdrawLimit = withdrawLimit;\r\n\t}\r\n\t\r\n\tpublic void deposit(Double amount) throws NegativeAmountException {\r\n\t\tif(amount &lt; 0) {\r\n\t\t\tthrow new NegativeAmountException(&quot;Amount must be positive.&quot;);\r\n\t\t}\r\n\t\tthis.balance += amount;\r\n\t}\r\n\t\r\n\tpublic void withdraw(Double amount) throws AccountingException {\r\n\t\t if (amount &gt; this.balance) {\r\n\t\t        throw new AccountingException(&quot;Account doesn&#39;t have enough balance. Current balance: &quot; + this.balance + &quot;, Withdrawal amount: &quot; + amount);\r\n\t\t    }\r\n\t\t    if (this.balance &lt;= 0) {\r\n\t\t        throw new NotEnoughBalanceException(&quot;Not enough balance. Current balance: &quot; + this.balance);\r\n\t\t    }\r\n\t\tthis.balance -= amount;\r\n\t}\r\n```\r\n\r\nAccountingException\r\n```\r\npackage model.exceptions;\r\n\r\npublic class AccountingException extends Exception {\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\tpublic AccountingException(String msg) {\r\n\t\tsuper(msg);\r\n\t}\r\n\t\r\n\t  public AccountingException(String msg, Throwable cause) {\r\n\t        super(msg, cause);\r\n\t  }\r\n}\r\n```\r\n\r\nNegativeAmountException\r\n```\r\npackage model.exceptions;\r\n\r\npublic class NegativeAmountException extends AccountingException {\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\tpublic NegativeAmountException(String msg) {\r\n\t\tsuper(msg);\r\n\t}\r\n}\r\n```\r\n\r\nNotEnoughBalanceException\r\n```\r\npackage model.exceptions;\r\n\r\npublic class NotEnoughBalanceException extends AccountingException {\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\tpublic NotEnoughBalanceException(String msg) {\r\n\t\tsuper(msg);\r\n\t}\r\n\r\n}\r\n\r\n```","link":"https://stackoverflow.com/questions/77567522/should-i-create-exceptions-for-every-error-in-java","title":"Should I create exceptions for every error in Java?","body":"<p>i'm new to Java and I've been studying exceptions, my question is when should I create a custom exception or not.</p>\n<p>For example I'm creating a simple app to deposit and withdraw from a Account, right now I have created 3 exceptions, but my account can't have a negative balance, so I would have to create a new exception to handle it in the constructor and possibly other custom exceptions, is it considered good practice to create very specific custom exceptions for each possible error, or should i try to use the more generic exceptions from java?</p>\n<p>it has its getters and setters i just didnt put it here to make it short.</p>\n<pre><code>public class Account {\n    private Integer number;\n    private String holder;\n    private Double balance;\n    private Double withdrawLimit;\n    \n    public Account() {}\n    \n    public Account(Integer number, String holder, Double balance, Double withdrawLimit) {\n        this.number = number;\n        this.holder = holder;\n        this.balance = balance;\n        this.withdrawLimit = withdrawLimit;\n    }\n    \n    public void deposit(Double amount) throws NegativeAmountException {\n        if(amount &lt; 0) {\n            throw new NegativeAmountException(&quot;Amount must be positive.&quot;);\n        }\n        this.balance += amount;\n    }\n    \n    public void withdraw(Double amount) throws AccountingException {\n         if (amount &gt; this.balance) {\n                throw new AccountingException(&quot;Account doesn't have enough balance. Current balance: &quot; + this.balance + &quot;, Withdrawal amount: &quot; + amount);\n            }\n            if (this.balance &lt;= 0) {\n                throw new NotEnoughBalanceException(&quot;Not enough balance. Current balance: &quot; + this.balance);\n            }\n        this.balance -= amount;\n    }\n</code></pre>\n<p>AccountingException</p>\n<pre><code>package model.exceptions;\n\npublic class AccountingException extends Exception {\n\n    private static final long serialVersionUID = 1L;\n\n    public AccountingException(String msg) {\n        super(msg);\n    }\n    \n      public AccountingException(String msg, Throwable cause) {\n            super(msg, cause);\n      }\n}\n</code></pre>\n<p>NegativeAmountException</p>\n<pre><code>package model.exceptions;\n\npublic class NegativeAmountException extends AccountingException {\n\n    private static final long serialVersionUID = 1L;\n\n    public NegativeAmountException(String msg) {\n        super(msg);\n    }\n}\n</code></pre>\n<p>NotEnoughBalanceException</p>\n<pre><code>package model.exceptions;\n\npublic class NotEnoughBalanceException extends AccountingException {\n\n    private static final long serialVersionUID = 1L;\n\n    public NotEnoughBalanceException(String msg) {\n        super(msg);\n    }\n\n}\n\n</code></pre>\n"},{"tags":["java","methods","service","nullpointerexception"],"comments":[{"score":0,"post_type":"question","creation_date":1701212363,"post_id":77567560,"comment_id":136747064,"body_markdown":"Does this answer your question? [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it)","link":"https://stackoverflow.com/questions/77567560/how-can-i-fix-nullpointerexception-when-calling-a-method-runned-by-service#comment136747064_77567560","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"}],"comment_count":1,"is_answered":false,"view_count":26,"answer_count":0,"score":-1,"last_activity_date":1701211086,"creation_date":1701211086,"question_id":77567560,"body_markdown":"I have an application to calculate prayer times. The final Fajr prayer time is set using the getFajrFinalTime() method in PrayersTimes.java. The current time is calculated and equated with the final Fajr time to find out the time and alert the user to pray. This is done via AzanService.java, but I get a null pointer exception. When getFajrFinalTime() is set to fajrTime.setText(AzanService.prayerTimes.getFajrFinalTime());\r\n\r\n`fajrTime.setText(AzanService.prayerTimes.getFajrFinalTime());`\r\n\r\nAzanService.java\r\n\r\n```\r\nimport android.app.Service;\r\nimport android.content.Intent;\r\nimport android.os.IBinder;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.core.app.JobIntentService;\r\n\r\nimport com.artist.ellasallaty.widgets.LargeWidgetProvider;\r\nimport com.artist.ellasallaty.widgets.LargeWidgetProviderService;\r\n\r\nimport java.util.Calendar;\r\n\r\npublic class AzanService extends JobIntentService {\r\n\r\n    public static int nextPrayerTimeInMinutes;\r\n    public static int nextPrayerCode;\r\n    public static int missing_hours_to_nextPrayer;\r\n    public static int missing_minutes_to_nextPrayer;\r\n    public static int missing_seconds_to_nextPrayer;\r\n\r\n    public static Boolean isFajrForNextDay = false;\r\n\r\n    public static int[] prayerTimesInMinutes;\r\n    public static PrayersTimes prayerTimes;\r\n\r\n    public static Boolean ifActualSalatTime = false;\r\n    public static int actualPrayerCode;\r\n\r\n    @Override\r\n    public IBinder onBind(@NonNull Intent intent) {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        super.onCreate();\r\n        PreferenceHandler.getSingleton().setContext(getApplicationContext());\r\n    }\r\n\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId) {\r\n\r\n        super.onStartCommand(intent, flags, startId);\r\n\r\n//        PreferenceHandler.getSingleton().setContext(getApplicationContext());\r\n\r\n        AzanService.prayerTimes = new PrayersTimes(Calendar.getInstance(), PreferenceHandler.getSingleton().getUserConfig());\r\n\r\n        AzanService.prayerTimesInMinutes = new int[6];\r\n        AzanService.prayerTimesInMinutes = AzanService.prayerTimes.getAllPrayrTimesInMinutes();\r\n\r\n        AzanService.getNextPrayer(false);\r\n\r\n        ifActualSalatTime = false;\r\n        actualPrayerCode = AzanService.nextPrayerCode;\r\n\r\n        AzanServiceBroasdcastReceiver.startNextPrayer(false, getApplicationContext());\r\n\r\n        refreshTime();\r\n\r\n        if (LargeWidgetProvider.isEnabled) {\r\n            this.startService(new Intent(this, LargeWidgetProviderService.class));\r\n        }\r\n\r\n        return Service.START_STICKY;\r\n    }\r\n\r\n    public static void refreshTime() {\r\n\r\n        try {\r\n\r\n            if (ifActualSalatTime == false) {\r\n\r\n                Calendar calendar = Calendar.getInstance();\r\n                int hour = calendar.get(Calendar.HOUR_OF_DAY);\r\n                int minutes = calendar.get(Calendar.MINUTE);\r\n                int second = calendar.get(Calendar.SECOND);\r\n\r\n                int totalMinutes = (hour * 60) + minutes;\r\n\r\n                if (AzanService.nextPrayerTimeInMinutes &gt; totalMinutes) {\r\n                    AzanService.missing_hours_to_nextPrayer = ((AzanService.nextPrayerTimeInMinutes - 1) - totalMinutes) / 60;\r\n                    AzanService.missing_minutes_to_nextPrayer = ((AzanService.nextPrayerTimeInMinutes - 1) - totalMinutes) % 60;\r\n                } else {\r\n                    AzanService.missing_hours_to_nextPrayer = (((AzanService.nextPrayerTimeInMinutes + 1440) - 1) - totalMinutes) / 60;\r\n                    AzanService.missing_minutes_to_nextPrayer = (((AzanService.nextPrayerTimeInMinutes + 1440) - 1) - totalMinutes) % 60;\r\n                }\r\n                AzanService.missing_seconds_to_nextPrayer = 59 - second;\r\n\r\n            }\r\n\r\n        } catch (Exception ignored) {\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n    }\r\n\r\n    @Override\r\n    protected void onHandleWork(@NonNull Intent intent) {\r\n\r\n    }\r\n\r\n    public static void getNextPrayer(boolean addOneMinute) {\r\n\r\n        Calendar calendar = Calendar.getInstance();\r\n        isFajrForNextDay = false;\r\n        int totalMinutes = (calendar.get(Calendar.HOUR_OF_DAY) * 60) + (calendar.get(Calendar.MINUTE));\r\n\r\n        if (addOneMinute) {\r\n            totalMinutes++;\r\n        }\r\n\r\n//        if (AzanService.prayerTimesInMinutes != null) {\r\n\r\n            if (totalMinutes == 0 || totalMinutes == 1440 || (totalMinutes &gt;= 0 &amp;&amp; totalMinutes &lt;= AzanService.prayerTimesInMinutes[0])) {\r\n                AzanService.nextPrayerCode = 1020;\r\n                AzanService.nextPrayerTimeInMinutes = AzanService.prayerTimesInMinutes[0];\r\n            } else {\r\n                if (totalMinutes &gt; AzanService.prayerTimesInMinutes[0] &amp;&amp; totalMinutes &lt;= AzanService.prayerTimesInMinutes[1]) {\r\n                    AzanService.nextPrayerCode = 1021;\r\n                    AzanService.nextPrayerTimeInMinutes = AzanService.prayerTimesInMinutes[1];\r\n                } else {\r\n                    if (totalMinutes &gt; AzanService.prayerTimesInMinutes[1] &amp;&amp; totalMinutes &lt;= AzanService.prayerTimesInMinutes[2]) {\r\n                        AzanService.nextPrayerCode = 1022;\r\n                        AzanService.nextPrayerTimeInMinutes = AzanService.prayerTimesInMinutes[2];\r\n                    } else {\r\n                        if (totalMinutes &gt; AzanService.prayerTimesInMinutes[2] &amp;&amp; totalMinutes &lt;= AzanService.prayerTimesInMinutes[3]) {\r\n                            AzanService.nextPrayerCode = 1023;\r\n                            AzanService.nextPrayerTimeInMinutes = AzanService.prayerTimesInMinutes[3];\r\n                        } else {\r\n                            if (totalMinutes &gt; AzanService.prayerTimesInMinutes[3] &amp;&amp; totalMinutes &lt;= AzanService.prayerTimesInMinutes[4]) {\r\n                                AzanService.nextPrayerCode = 1024;\r\n                                AzanService.nextPrayerTimeInMinutes = AzanService.prayerTimesInMinutes[4];\r\n                            } else {\r\n                                if (totalMinutes &gt; AzanService.prayerTimesInMinutes[4] &amp;&amp; totalMinutes &lt;= AzanService.prayerTimesInMinutes[5]) {\r\n                                    AzanService.nextPrayerCode = 1025;\r\n                                    AzanService.nextPrayerTimeInMinutes = AzanService.prayerTimesInMinutes[5];\r\n                                } else {\r\n                                    if (totalMinutes &gt; AzanService.prayerTimesInMinutes[5] &amp;&amp; totalMinutes &lt; 1440) {\r\n                                        AzanService.nextPrayerCode = 1020;\r\n\r\n                                        calendar.add(Calendar.DATE, 1);\r\n                                        PrayersTimes prayersTimes = new PrayersTimes(calendar, PreferenceHandler.getSingleton().getUserConfig());\r\n\r\n                                        isFajrForNextDay = true;\r\n                                        int[] nextDayPrayerTimesInMinutes = prayersTimes.getAllPrayrTimesInMinutes();\r\n                                        AzanService.nextPrayerTimeInMinutes = nextDayPrayerTimesInMinutes[0];\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n//    }\r\n\r\n}\r\n```\r\n\r\nPrayerTimes.java\r\n\r\n```\r\npackage com.artist.ellasallaty.utils;\r\n\r\nimport androidx.annotation.NonNull;\r\n\r\nimport java.io.IOException;\r\nimport java.text.DecimalFormat;\r\nimport java.text.NumberFormat;\r\nimport java.util.Calendar;\r\n\r\npublic class PrayersTimes {\r\n\r\n    private final int year, month, day;\r\n    private int totalMinutesFajr, totalMinutesShorouk, totalMinutesDuhr, totalMinutesAsr, totalMinutesMaghrib, totalMinutesIshaa;\r\n\r\n    private int[] allPrayrTimesInMinutes;\r\n\r\n    private int time12or24 = 24;\r\n\r\n    private String calculationMethod, mazhab, typeTime;\r\n\r\n    private final double DegToRad = 0.017453292;\r\n    private final double RadToDeg = 57.29577951;\r\n\r\n    private double longitude, latitude, timeZone, fajr, shorou9, duhr, asr, maghrib, ishaa, dec, fajrAlt, ishaAlt, fajrTime, shoroukTime, duhrTime, asrTime, maghribTime, ishaaTime;\r\n\r\n    private NumberFormat formatter;\r\n\r\n    public PrayersTimes(@NonNull Calendar cal, UserConfig userConfig) {\r\n        this.year = cal.get(Calendar.YEAR);\r\n        this.month = cal.get(Calendar.MONTH);\r\n        this.day = cal.get(Calendar.DAY_OF_MONTH);\r\n        setParameters(userConfig);\r\n    }\r\n\r\n    public void setParameters(@NonNull UserConfig userConfig) {\r\n\r\n        this.time12or24 = Integer.parseInt(userConfig.getTime12Or24());\r\n\r\n        this.longitude = Double.parseDouble(userConfig.getLongitude());\r\n        this.latitude = Double.parseDouble(userConfig.getLatitude());\r\n\r\n        this.timeZone = Double.parseDouble(userConfig.getTimezone());\r\n        this.calculationMethod = userConfig.getCalculationMethod();\r\n        this.mazhab = userConfig.getMazhab();\r\n        this.typeTime = userConfig.getTypeTime();\r\n\r\n        this.fajrTime = Double.parseDouble(userConfig.getFajrTime());\r\n        this.shoroukTime = Double.parseDouble(userConfig.getShoroukTime());\r\n        this.duhrTime = Double.parseDouble(userConfig.getDuhrTime());\r\n        this.asrTime = Double.parseDouble(userConfig.getAsrTime());\r\n        this.maghribTime = Double.parseDouble(userConfig.getMaghribTime());\r\n        this.ishaaTime = Double.parseDouble(userConfig.getIshaaTime());\r\n\r\n        init();\r\n        adjustTimes();\r\n    }\r\n\r\n    public void init() {\r\n        this.formatter = new DecimalFormat(&quot;00&quot;);\r\n\r\n        double julianDay = (367 * year) - (int) (((year + (int) (((month + 1) + 9) / 12)) * 7) / 4) + (int) (275 * (month + 1) / 9) + day - 730531.5;\r\n        double sunLength = removeDublication(280.461 + 0.9856474 * julianDay);\r\n        double middleSun = removeDublication(357.528 + 0.9856003 * julianDay);\r\n        double lambda = removeDublication(sunLength + 1.915 * Math.sin(middleSun * DegToRad) + 0.02 * Math.sin(2 * middleSun * DegToRad));\r\n        double obliquity = 23.439 - 0.0000004 * julianDay;\r\n        double alpha = RadToDeg * Math.atan(Math.cos(obliquity * DegToRad) * Math.tan(lambda * DegToRad));\r\n\r\n        if (lambda &gt; 90 &amp;&amp; lambda &lt; 180) {\r\n            alpha += 180;\r\n        } else if (lambda &gt; 180 &amp;&amp; lambda &lt; 360) {\r\n            alpha += 360;\r\n        }\r\n\r\n        double st = removeDublication(100.46 + 0.985647352 * julianDay);\r\n\r\n        this.dec = RadToDeg * Math.asin(Math.sin(obliquity * DegToRad) * Math.sin(lambda * DegToRad));\r\n\r\n        double noon = alpha - st;\r\n        if (noon &lt; 0) {\r\n            noon += 360;\r\n        }\r\n        double UTNoon = noon - longitude;\r\n\r\n        double localNoon = (UTNoon / 15) + timeZone;\r\n\r\n        this.duhr = localNoon;\r\n        this.maghrib = localNoon + equation(-0.8333) / 15;\r\n        this.shorou9 = localNoon - equation(-0.8333) / 15;\r\n\r\n        if (this.calculationMethod.equalsIgnoreCase(&quot;MuslimWorldLeague&quot;)) {\r\n            this.fajrAlt = -18;\r\n            this.ishaAlt = -17;\r\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;IslamicSocietyOfNorthAmerica&quot;)) {\r\n            this.fajrAlt = -15;\r\n            this.ishaAlt = -15;\r\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;EgytionGeneralAuthorityofSurvey&quot;)) {\r\n            this.fajrAlt = -19.5;\r\n            this.ishaAlt = -17.5;\r\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;UmmAlQuraUniv&quot;)) {\r\n            this.fajrAlt = -18.5;// fajr was 19 degrees before 1430 hijri\r\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;UnivOfIslamicScincesKarachi&quot;)) {\r\n            this.fajrAlt = -18;\r\n            this.ishaAlt = -18;\r\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;InstituteOfGeophysicsUniversityOfTehran&quot;)) {\r\n            this.fajrAlt = -17.7;\r\n            this.ishaAlt = -14;\r\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;ShiaIthnaAshariLevaInstituteQum&quot;)) {\r\n            this.fajrAlt = -16;\r\n            this.ishaAlt = -14;\r\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;GulfRegion&quot;)) {\r\n            this.fajrAlt = -19.5;\r\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;TheMinistryofAwqafandIslamicAffairsinKuwait&quot;)) {\r\n            this.fajrAlt = -18;\r\n            this.ishaAlt = -17.5;\r\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;Qatar&quot;)) {\r\n            this.fajrAlt = -18;\r\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;MajlisUgamaIslamSingapuraSingapore&quot;)) {\r\n            this.fajrAlt = -20;\r\n            this.ishaAlt = -18;\r\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;FederationofIslamicOrganizationsinFrance&quot;)) {\r\n            this.fajrAlt = -12;\r\n            this.ishaAlt = -12;\r\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;DirectorateOfReligiousAffairsTurkey&quot;)) {\r\n            this.fajrAlt = -18;\r\n            this.ishaAlt = -17;\r\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;SpiritualAdministrationOfMuslimsOfRussia&quot;)) {\r\n            this.fajrAlt = -16;\r\n            this.ishaAlt = -15;\r\n        }\r\n\r\n        this.fajr = localNoon - equation(fajrAlt) / 15;\r\n\r\n        this.ishaa = localNoon + equation(ishaAlt) / 15;\r\n\r\n        if (this.calculationMethod.equalsIgnoreCase(&quot;UmmAlQuraUniv&quot;) || this.calculationMethod.equalsIgnoreCase(&quot;GulfRegion&quot;) || this.calculationMethod.equalsIgnoreCase(&quot;Qatar&quot;)) {\r\n            try {\r\n                HijriTime hijriTime = new HijriTime(Calendar.getInstance());\r\n                if (hijriTime.isRamadan()) {\r\n                    this.ishaa = maghrib + 2;\r\n                } else {\r\n                    this.ishaa = maghrib + 1.5;\r\n                }\r\n            } catch (IOException e) {\r\n                this.ishaa = maghrib + 1.5;\r\n            }\r\n        }\r\n        double asrAlt;\r\n\r\n        if (this.mazhab.equalsIgnoreCase(&quot;hanafi&quot;)) {\r\n            asrAlt = 90 - RadToDeg * Math.atan(2 + Math.tan(abs(latitude - dec) * DegToRad));\r\n        } else {\r\n            asrAlt = 90 - RadToDeg * Math.atan(1 + Math.tan(abs(latitude - dec) * DegToRad));\r\n        }\r\n\r\n        this.asr = localNoon + equation(asrAlt) / 15;\r\n\r\n        if (this.typeTime.equalsIgnoreCase(&quot;sayfi&quot;)) {\r\n            this.fajr += 1;\r\n            this.shorou9 += 1;\r\n            this.duhr += 1;\r\n            this.asr += 1;\r\n            this.maghrib += 1;\r\n            this.ishaa += 1;\r\n        }\r\n    }\r\n\r\n    public double removeDublication(double d) {\r\n        if (d &gt; 360) {\r\n            d /= 360;\r\n            d -= (int) (d);\r\n            d *= 360;\r\n        }\r\n        return d;\r\n    }\r\n\r\n    public double equation(double d) {\r\n        return RadToDeg\r\n                * Math.acos((Math.sin(d * DegToRad) - Math\r\n                .sin(dec * DegToRad) * Math.sin(latitude * DegToRad))\r\n                / (Math.cos(dec * DegToRad) * Math.cos(latitude\r\n                * DegToRad)));\r\n    }\r\n\r\n    public double abs(double d) {\r\n        if (d &lt; 0) {\r\n            return -d;\r\n        } else {\r\n            return d;\r\n        }\r\n    }\r\n\r\n    public String getFajrFinalTime() {\r\n        int salatHour = totalMinutesFajr / 60;\r\n        int salatMinutes = totalMinutesFajr % 60;\r\n\r\n        String salatAM_PM;\r\n\r\n        if (salatHour &gt;= 12) {\r\n            salatAM_PM = &quot;pm&quot;;\r\n        } else {\r\n            salatAM_PM = &quot;am&quot;;\r\n        }\r\n\r\n        if (time12or24 == 12 &amp;&amp; salatHour &gt; 12) {\r\n            salatHour -= 12;\r\n        }\r\n\r\n        salatAM_PM = (time12or24 == 12) ? salatAM_PM : &quot;&quot;;\r\n\r\n        return formatter.format(salatHour) + &quot;:&quot; + formatter.format(salatMinutes) + &quot; &quot; + salatAM_PM;\r\n    }\r\n\r\n    public String getShorou9FinalTime() {\r\n        int salatHour = totalMinutesShorouk / 60;\r\n        int salatMinutes = totalMinutesShorouk % 60;\r\n\r\n        String salatAM_PM;\r\n\r\n        if (salatHour &gt;= 12) {\r\n            salatAM_PM = &quot;pm&quot;;\r\n        } else {\r\n            salatAM_PM = &quot;am&quot;;\r\n        }\r\n\r\n        if (time12or24 == 12 &amp;&amp; salatHour &gt; 12) {\r\n            salatHour -= 12;\r\n        }\r\n\r\n        salatAM_PM = (time12or24 == 12) ? salatAM_PM : &quot;&quot;;\r\n\r\n        return formatter.format(salatHour) + &quot;:&quot; + formatter.format(salatMinutes) + &quot; &quot; + salatAM_PM;\r\n    }\r\n\r\n    public String getDuhrFinalTime() {\r\n        int salatHour = totalMinutesDuhr / 60;\r\n        int salatMinutes = totalMinutesDuhr % 60;\r\n\r\n        String salatAM_PM;\r\n\r\n        if (salatHour &gt;= 12) {\r\n            salatAM_PM = &quot;pm&quot;;\r\n        } else {\r\n            salatAM_PM = &quot;am&quot;;\r\n        }\r\n\r\n        if (time12or24 == 12 &amp;&amp; salatHour &gt; 12) {\r\n            salatHour -= 12;\r\n        }\r\n\r\n        salatAM_PM = (time12or24 == 12) ? salatAM_PM : &quot;&quot;;\r\n\r\n        return formatter.format(salatHour) + &quot;:&quot; + formatter.format(salatMinutes) + &quot; &quot; + salatAM_PM;\r\n    }\r\n\r\n    public String getAsrFinalTime() {\r\n        int salatHour = totalMinutesAsr / 60;\r\n        int salatMinutes = totalMinutesAsr % 60;\r\n\r\n        String salatAM_PM;\r\n\r\n        if (salatHour &gt;= 12) {\r\n            salatAM_PM = &quot;pm&quot;;\r\n        } else {\r\n            salatAM_PM = &quot;am&quot;;\r\n        }\r\n\r\n        if (time12or24 == 12 &amp;&amp; salatHour &gt; 12) {\r\n            salatHour -= 12;\r\n        }\r\n\r\n        salatAM_PM = (time12or24 == 12) ? salatAM_PM : &quot;&quot;;\r\n\r\n        return formatter.format(salatHour) + &quot;:&quot; + formatter.format(salatMinutes) + &quot; &quot; + salatAM_PM;\r\n    }\r\n\r\n    public String getMaghribFinalTime() {\r\n        int salatHour = totalMinutesMaghrib / 60;\r\n        int salatMinutes = totalMinutesMaghrib % 60;\r\n\r\n        String salatAM_PM;\r\n\r\n        if (salatHour &gt;= 12) {\r\n            salatAM_PM = &quot;pm&quot;;\r\n        } else {\r\n            salatAM_PM = &quot;am&quot;;\r\n        }\r\n\r\n        if (time12or24 == 12 &amp;&amp; salatHour &gt; 12) {\r\n            salatHour -= 12;\r\n        }\r\n\r\n        salatAM_PM = (time12or24 == 12) ? salatAM_PM : &quot;&quot;;\r\n\r\n        return formatter.format(salatHour) + &quot;:&quot; + formatter.format(salatMinutes) + &quot; &quot; + salatAM_PM;\r\n    }\r\n\r\n    public String getIshaaFinalTime() {\r\n        int salatHour = totalMinutesIshaa / 60;\r\n        int salatMinutes = totalMinutesIshaa % 60;\r\n\r\n        String salatAM_PM;\r\n\r\n        if (salatHour &gt;= 12) {\r\n            salatAM_PM = &quot;pm&quot;;\r\n        } else {\r\n            salatAM_PM = &quot;am&quot;;\r\n        }\r\n\r\n        if (time12or24 == 12 &amp;&amp; salatHour &gt; 12) {\r\n            salatHour -= 12;\r\n        }\r\n\r\n        salatAM_PM = (time12or24 == 12) ? salatAM_PM : &quot;&quot;;\r\n\r\n        return formatter.format(salatHour) + &quot;:&quot; + formatter.format(salatMinutes) + &quot; &quot; + salatAM_PM;\r\n    }\r\n\r\n    public static int getMinutes(double d) {\r\n        int h = (int) d;\r\n        int m = (int) (Math.ceil((d - h) * 60));\r\n\r\n        return (h * 60) + m;\r\n    }\r\n\r\n    public void adjustTimes() {\r\n\r\n        this.allPrayrTimesInMinutes = new int[6];\r\n\r\n        this.totalMinutesFajr = (int) (getMinutes(fajr) + fajrTime);\r\n        this.totalMinutesShorouk = (int) (getMinutes(shorou9) + shoroukTime);\r\n        this.totalMinutesDuhr = (int) (getMinutes(duhr) + duhrTime);\r\n        this.totalMinutesAsr = (int) (getMinutes(asr) + asrTime);\r\n        this.totalMinutesMaghrib = (int) (getMinutes(maghrib) + maghribTime);\r\n        this.totalMinutesIshaa = (int) (getMinutes(ishaa) + ishaaTime);\r\n\r\n        this.allPrayrTimesInMinutes[0] = this.totalMinutesFajr;\r\n        this.allPrayrTimesInMinutes[1] = this.totalMinutesShorouk;\r\n        this.allPrayrTimesInMinutes[2] = this.totalMinutesDuhr;\r\n        this.allPrayrTimesInMinutes[3] = this.totalMinutesAsr;\r\n        this.allPrayrTimesInMinutes[4] = this.totalMinutesMaghrib;\r\n        this.allPrayrTimesInMinutes[5] = this.totalMinutesIshaa;\r\n\r\n        boolean b = true;\r\n\r\n        while (b) {\r\n            for (int i = 0; i &lt; allPrayrTimesInMinutes.length; i++) {\r\n                if (allPrayrTimesInMinutes[i] &gt; 1440) {\r\n                    for (int j = 0; j &lt; allPrayrTimesInMinutes.length; j++) {\r\n                        allPrayrTimesInMinutes[j] -= 720;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n\r\n            b = false;\r\n        }\r\n\r\n        this.totalMinutesFajr = allPrayrTimesInMinutes[0];\r\n        this.totalMinutesShorouk = allPrayrTimesInMinutes[1];\r\n        this.totalMinutesDuhr = allPrayrTimesInMinutes[2];\r\n        this.totalMinutesAsr = allPrayrTimesInMinutes[3];\r\n        this.totalMinutesMaghrib = allPrayrTimesInMinutes[4];\r\n        this.totalMinutesIshaa = allPrayrTimesInMinutes[5];\r\n    }\r\n\r\n    public int[] getAllPrayrTimesInMinutes() {//get all prayer times in minutes after adjustment\r\n        return allPrayrTimesInMinutes;\r\n    }\r\n\r\n    public double getLongitude() {\r\n        return longitude;\r\n    }\r\n\r\n    public void setLongitude(double longitude) {\r\n        this.longitude = longitude;\r\n    }\r\n\r\n    public double getLatitude() {\r\n        return latitude;\r\n    }\r\n\r\n    public void setLatitude(double latitude) {\r\n        this.latitude = latitude;\r\n    }\r\n\r\n    public void setTime12or24(int time12or24) {\r\n        this.time12or24 = time12or24;\r\n    }\r\n\r\n}\r\n```\r\n\r\nI have an application to calculate prayer times. The final Fajr prayer time is set using the getFajrFinalTime() method in PrayersTimes.java. The current time is calculated and equated with the final Fajr time to find out the time and alert the user to pray. This is done via AzanService.java, but I get a null pointer exception. When getFajrFinalTime() is set to fajrTime.setText(AzanService.prayerTimes.getFajrFinalTime());","link":"https://stackoverflow.com/questions/77567560/how-can-i-fix-nullpointerexception-when-calling-a-method-runned-by-service","title":"How can i fix NullPointerException when calling a method runned by service?","body":"<p>I have an application to calculate prayer times. The final Fajr prayer time is set using the getFajrFinalTime() method in PrayersTimes.java. The current time is calculated and equated with the final Fajr time to find out the time and alert the user to pray. This is done via AzanService.java, but I get a null pointer exception. When getFajrFinalTime() is set to fajrTime.setText(AzanService.prayerTimes.getFajrFinalTime());</p>\n<p><code>fajrTime.setText(AzanService.prayerTimes.getFajrFinalTime());</code></p>\n<p>AzanService.java</p>\n<pre><code>import android.app.Service;\nimport android.content.Intent;\nimport android.os.IBinder;\n\nimport androidx.annotation.NonNull;\nimport androidx.core.app.JobIntentService;\n\nimport com.artist.ellasallaty.widgets.LargeWidgetProvider;\nimport com.artist.ellasallaty.widgets.LargeWidgetProviderService;\n\nimport java.util.Calendar;\n\npublic class AzanService extends JobIntentService {\n\n    public static int nextPrayerTimeInMinutes;\n    public static int nextPrayerCode;\n    public static int missing_hours_to_nextPrayer;\n    public static int missing_minutes_to_nextPrayer;\n    public static int missing_seconds_to_nextPrayer;\n\n    public static Boolean isFajrForNextDay = false;\n\n    public static int[] prayerTimesInMinutes;\n    public static PrayersTimes prayerTimes;\n\n    public static Boolean ifActualSalatTime = false;\n    public static int actualPrayerCode;\n\n    @Override\n    public IBinder onBind(@NonNull Intent intent) {\n        return null;\n    }\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        PreferenceHandler.getSingleton().setContext(getApplicationContext());\n    }\n\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n\n        super.onStartCommand(intent, flags, startId);\n\n//        PreferenceHandler.getSingleton().setContext(getApplicationContext());\n\n        AzanService.prayerTimes = new PrayersTimes(Calendar.getInstance(), PreferenceHandler.getSingleton().getUserConfig());\n\n        AzanService.prayerTimesInMinutes = new int[6];\n        AzanService.prayerTimesInMinutes = AzanService.prayerTimes.getAllPrayrTimesInMinutes();\n\n        AzanService.getNextPrayer(false);\n\n        ifActualSalatTime = false;\n        actualPrayerCode = AzanService.nextPrayerCode;\n\n        AzanServiceBroasdcastReceiver.startNextPrayer(false, getApplicationContext());\n\n        refreshTime();\n\n        if (LargeWidgetProvider.isEnabled) {\n            this.startService(new Intent(this, LargeWidgetProviderService.class));\n        }\n\n        return Service.START_STICKY;\n    }\n\n    public static void refreshTime() {\n\n        try {\n\n            if (ifActualSalatTime == false) {\n\n                Calendar calendar = Calendar.getInstance();\n                int hour = calendar.get(Calendar.HOUR_OF_DAY);\n                int minutes = calendar.get(Calendar.MINUTE);\n                int second = calendar.get(Calendar.SECOND);\n\n                int totalMinutes = (hour * 60) + minutes;\n\n                if (AzanService.nextPrayerTimeInMinutes &gt; totalMinutes) {\n                    AzanService.missing_hours_to_nextPrayer = ((AzanService.nextPrayerTimeInMinutes - 1) - totalMinutes) / 60;\n                    AzanService.missing_minutes_to_nextPrayer = ((AzanService.nextPrayerTimeInMinutes - 1) - totalMinutes) % 60;\n                } else {\n                    AzanService.missing_hours_to_nextPrayer = (((AzanService.nextPrayerTimeInMinutes + 1440) - 1) - totalMinutes) / 60;\n                    AzanService.missing_minutes_to_nextPrayer = (((AzanService.nextPrayerTimeInMinutes + 1440) - 1) - totalMinutes) % 60;\n                }\n                AzanService.missing_seconds_to_nextPrayer = 59 - second;\n\n            }\n\n        } catch (Exception ignored) {\n        }\n\n    }\n\n    @Override\n    public void onDestroy() {\n    }\n\n    @Override\n    protected void onHandleWork(@NonNull Intent intent) {\n\n    }\n\n    public static void getNextPrayer(boolean addOneMinute) {\n\n        Calendar calendar = Calendar.getInstance();\n        isFajrForNextDay = false;\n        int totalMinutes = (calendar.get(Calendar.HOUR_OF_DAY) * 60) + (calendar.get(Calendar.MINUTE));\n\n        if (addOneMinute) {\n            totalMinutes++;\n        }\n\n//        if (AzanService.prayerTimesInMinutes != null) {\n\n            if (totalMinutes == 0 || totalMinutes == 1440 || (totalMinutes &gt;= 0 &amp;&amp; totalMinutes &lt;= AzanService.prayerTimesInMinutes[0])) {\n                AzanService.nextPrayerCode = 1020;\n                AzanService.nextPrayerTimeInMinutes = AzanService.prayerTimesInMinutes[0];\n            } else {\n                if (totalMinutes &gt; AzanService.prayerTimesInMinutes[0] &amp;&amp; totalMinutes &lt;= AzanService.prayerTimesInMinutes[1]) {\n                    AzanService.nextPrayerCode = 1021;\n                    AzanService.nextPrayerTimeInMinutes = AzanService.prayerTimesInMinutes[1];\n                } else {\n                    if (totalMinutes &gt; AzanService.prayerTimesInMinutes[1] &amp;&amp; totalMinutes &lt;= AzanService.prayerTimesInMinutes[2]) {\n                        AzanService.nextPrayerCode = 1022;\n                        AzanService.nextPrayerTimeInMinutes = AzanService.prayerTimesInMinutes[2];\n                    } else {\n                        if (totalMinutes &gt; AzanService.prayerTimesInMinutes[2] &amp;&amp; totalMinutes &lt;= AzanService.prayerTimesInMinutes[3]) {\n                            AzanService.nextPrayerCode = 1023;\n                            AzanService.nextPrayerTimeInMinutes = AzanService.prayerTimesInMinutes[3];\n                        } else {\n                            if (totalMinutes &gt; AzanService.prayerTimesInMinutes[3] &amp;&amp; totalMinutes &lt;= AzanService.prayerTimesInMinutes[4]) {\n                                AzanService.nextPrayerCode = 1024;\n                                AzanService.nextPrayerTimeInMinutes = AzanService.prayerTimesInMinutes[4];\n                            } else {\n                                if (totalMinutes &gt; AzanService.prayerTimesInMinutes[4] &amp;&amp; totalMinutes &lt;= AzanService.prayerTimesInMinutes[5]) {\n                                    AzanService.nextPrayerCode = 1025;\n                                    AzanService.nextPrayerTimeInMinutes = AzanService.prayerTimesInMinutes[5];\n                                } else {\n                                    if (totalMinutes &gt; AzanService.prayerTimesInMinutes[5] &amp;&amp; totalMinutes &lt; 1440) {\n                                        AzanService.nextPrayerCode = 1020;\n\n                                        calendar.add(Calendar.DATE, 1);\n                                        PrayersTimes prayersTimes = new PrayersTimes(calendar, PreferenceHandler.getSingleton().getUserConfig());\n\n                                        isFajrForNextDay = true;\n                                        int[] nextDayPrayerTimesInMinutes = prayersTimes.getAllPrayrTimesInMinutes();\n                                        AzanService.nextPrayerTimeInMinutes = nextDayPrayerTimesInMinutes[0];\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n\n            }\n        }\n\n//    }\n\n}\n</code></pre>\n<p>PrayerTimes.java</p>\n<pre><code>package com.artist.ellasallaty.utils;\n\nimport androidx.annotation.NonNull;\n\nimport java.io.IOException;\nimport java.text.DecimalFormat;\nimport java.text.NumberFormat;\nimport java.util.Calendar;\n\npublic class PrayersTimes {\n\n    private final int year, month, day;\n    private int totalMinutesFajr, totalMinutesShorouk, totalMinutesDuhr, totalMinutesAsr, totalMinutesMaghrib, totalMinutesIshaa;\n\n    private int[] allPrayrTimesInMinutes;\n\n    private int time12or24 = 24;\n\n    private String calculationMethod, mazhab, typeTime;\n\n    private final double DegToRad = 0.017453292;\n    private final double RadToDeg = 57.29577951;\n\n    private double longitude, latitude, timeZone, fajr, shorou9, duhr, asr, maghrib, ishaa, dec, fajrAlt, ishaAlt, fajrTime, shoroukTime, duhrTime, asrTime, maghribTime, ishaaTime;\n\n    private NumberFormat formatter;\n\n    public PrayersTimes(@NonNull Calendar cal, UserConfig userConfig) {\n        this.year = cal.get(Calendar.YEAR);\n        this.month = cal.get(Calendar.MONTH);\n        this.day = cal.get(Calendar.DAY_OF_MONTH);\n        setParameters(userConfig);\n    }\n\n    public void setParameters(@NonNull UserConfig userConfig) {\n\n        this.time12or24 = Integer.parseInt(userConfig.getTime12Or24());\n\n        this.longitude = Double.parseDouble(userConfig.getLongitude());\n        this.latitude = Double.parseDouble(userConfig.getLatitude());\n\n        this.timeZone = Double.parseDouble(userConfig.getTimezone());\n        this.calculationMethod = userConfig.getCalculationMethod();\n        this.mazhab = userConfig.getMazhab();\n        this.typeTime = userConfig.getTypeTime();\n\n        this.fajrTime = Double.parseDouble(userConfig.getFajrTime());\n        this.shoroukTime = Double.parseDouble(userConfig.getShoroukTime());\n        this.duhrTime = Double.parseDouble(userConfig.getDuhrTime());\n        this.asrTime = Double.parseDouble(userConfig.getAsrTime());\n        this.maghribTime = Double.parseDouble(userConfig.getMaghribTime());\n        this.ishaaTime = Double.parseDouble(userConfig.getIshaaTime());\n\n        init();\n        adjustTimes();\n    }\n\n    public void init() {\n        this.formatter = new DecimalFormat(&quot;00&quot;);\n\n        double julianDay = (367 * year) - (int) (((year + (int) (((month + 1) + 9) / 12)) * 7) / 4) + (int) (275 * (month + 1) / 9) + day - 730531.5;\n        double sunLength = removeDublication(280.461 + 0.9856474 * julianDay);\n        double middleSun = removeDublication(357.528 + 0.9856003 * julianDay);\n        double lambda = removeDublication(sunLength + 1.915 * Math.sin(middleSun * DegToRad) + 0.02 * Math.sin(2 * middleSun * DegToRad));\n        double obliquity = 23.439 - 0.0000004 * julianDay;\n        double alpha = RadToDeg * Math.atan(Math.cos(obliquity * DegToRad) * Math.tan(lambda * DegToRad));\n\n        if (lambda &gt; 90 &amp;&amp; lambda &lt; 180) {\n            alpha += 180;\n        } else if (lambda &gt; 180 &amp;&amp; lambda &lt; 360) {\n            alpha += 360;\n        }\n\n        double st = removeDublication(100.46 + 0.985647352 * julianDay);\n\n        this.dec = RadToDeg * Math.asin(Math.sin(obliquity * DegToRad) * Math.sin(lambda * DegToRad));\n\n        double noon = alpha - st;\n        if (noon &lt; 0) {\n            noon += 360;\n        }\n        double UTNoon = noon - longitude;\n\n        double localNoon = (UTNoon / 15) + timeZone;\n\n        this.duhr = localNoon;\n        this.maghrib = localNoon + equation(-0.8333) / 15;\n        this.shorou9 = localNoon - equation(-0.8333) / 15;\n\n        if (this.calculationMethod.equalsIgnoreCase(&quot;MuslimWorldLeague&quot;)) {\n            this.fajrAlt = -18;\n            this.ishaAlt = -17;\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;IslamicSocietyOfNorthAmerica&quot;)) {\n            this.fajrAlt = -15;\n            this.ishaAlt = -15;\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;EgytionGeneralAuthorityofSurvey&quot;)) {\n            this.fajrAlt = -19.5;\n            this.ishaAlt = -17.5;\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;UmmAlQuraUniv&quot;)) {\n            this.fajrAlt = -18.5;// fajr was 19 degrees before 1430 hijri\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;UnivOfIslamicScincesKarachi&quot;)) {\n            this.fajrAlt = -18;\n            this.ishaAlt = -18;\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;InstituteOfGeophysicsUniversityOfTehran&quot;)) {\n            this.fajrAlt = -17.7;\n            this.ishaAlt = -14;\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;ShiaIthnaAshariLevaInstituteQum&quot;)) {\n            this.fajrAlt = -16;\n            this.ishaAlt = -14;\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;GulfRegion&quot;)) {\n            this.fajrAlt = -19.5;\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;TheMinistryofAwqafandIslamicAffairsinKuwait&quot;)) {\n            this.fajrAlt = -18;\n            this.ishaAlt = -17.5;\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;Qatar&quot;)) {\n            this.fajrAlt = -18;\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;MajlisUgamaIslamSingapuraSingapore&quot;)) {\n            this.fajrAlt = -20;\n            this.ishaAlt = -18;\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;FederationofIslamicOrganizationsinFrance&quot;)) {\n            this.fajrAlt = -12;\n            this.ishaAlt = -12;\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;DirectorateOfReligiousAffairsTurkey&quot;)) {\n            this.fajrAlt = -18;\n            this.ishaAlt = -17;\n        } else if (this.calculationMethod.equalsIgnoreCase(&quot;SpiritualAdministrationOfMuslimsOfRussia&quot;)) {\n            this.fajrAlt = -16;\n            this.ishaAlt = -15;\n        }\n\n        this.fajr = localNoon - equation(fajrAlt) / 15;\n\n        this.ishaa = localNoon + equation(ishaAlt) / 15;\n\n        if (this.calculationMethod.equalsIgnoreCase(&quot;UmmAlQuraUniv&quot;) || this.calculationMethod.equalsIgnoreCase(&quot;GulfRegion&quot;) || this.calculationMethod.equalsIgnoreCase(&quot;Qatar&quot;)) {\n            try {\n                HijriTime hijriTime = new HijriTime(Calendar.getInstance());\n                if (hijriTime.isRamadan()) {\n                    this.ishaa = maghrib + 2;\n                } else {\n                    this.ishaa = maghrib + 1.5;\n                }\n            } catch (IOException e) {\n                this.ishaa = maghrib + 1.5;\n            }\n        }\n        double asrAlt;\n\n        if (this.mazhab.equalsIgnoreCase(&quot;hanafi&quot;)) {\n            asrAlt = 90 - RadToDeg * Math.atan(2 + Math.tan(abs(latitude - dec) * DegToRad));\n        } else {\n            asrAlt = 90 - RadToDeg * Math.atan(1 + Math.tan(abs(latitude - dec) * DegToRad));\n        }\n\n        this.asr = localNoon + equation(asrAlt) / 15;\n\n        if (this.typeTime.equalsIgnoreCase(&quot;sayfi&quot;)) {\n            this.fajr += 1;\n            this.shorou9 += 1;\n            this.duhr += 1;\n            this.asr += 1;\n            this.maghrib += 1;\n            this.ishaa += 1;\n        }\n    }\n\n    public double removeDublication(double d) {\n        if (d &gt; 360) {\n            d /= 360;\n            d -= (int) (d);\n            d *= 360;\n        }\n        return d;\n    }\n\n    public double equation(double d) {\n        return RadToDeg\n                * Math.acos((Math.sin(d * DegToRad) - Math\n                .sin(dec * DegToRad) * Math.sin(latitude * DegToRad))\n                / (Math.cos(dec * DegToRad) * Math.cos(latitude\n                * DegToRad)));\n    }\n\n    public double abs(double d) {\n        if (d &lt; 0) {\n            return -d;\n        } else {\n            return d;\n        }\n    }\n\n    public String getFajrFinalTime() {\n        int salatHour = totalMinutesFajr / 60;\n        int salatMinutes = totalMinutesFajr % 60;\n\n        String salatAM_PM;\n\n        if (salatHour &gt;= 12) {\n            salatAM_PM = &quot;pm&quot;;\n        } else {\n            salatAM_PM = &quot;am&quot;;\n        }\n\n        if (time12or24 == 12 &amp;&amp; salatHour &gt; 12) {\n            salatHour -= 12;\n        }\n\n        salatAM_PM = (time12or24 == 12) ? salatAM_PM : &quot;&quot;;\n\n        return formatter.format(salatHour) + &quot;:&quot; + formatter.format(salatMinutes) + &quot; &quot; + salatAM_PM;\n    }\n\n    public String getShorou9FinalTime() {\n        int salatHour = totalMinutesShorouk / 60;\n        int salatMinutes = totalMinutesShorouk % 60;\n\n        String salatAM_PM;\n\n        if (salatHour &gt;= 12) {\n            salatAM_PM = &quot;pm&quot;;\n        } else {\n            salatAM_PM = &quot;am&quot;;\n        }\n\n        if (time12or24 == 12 &amp;&amp; salatHour &gt; 12) {\n            salatHour -= 12;\n        }\n\n        salatAM_PM = (time12or24 == 12) ? salatAM_PM : &quot;&quot;;\n\n        return formatter.format(salatHour) + &quot;:&quot; + formatter.format(salatMinutes) + &quot; &quot; + salatAM_PM;\n    }\n\n    public String getDuhrFinalTime() {\n        int salatHour = totalMinutesDuhr / 60;\n        int salatMinutes = totalMinutesDuhr % 60;\n\n        String salatAM_PM;\n\n        if (salatHour &gt;= 12) {\n            salatAM_PM = &quot;pm&quot;;\n        } else {\n            salatAM_PM = &quot;am&quot;;\n        }\n\n        if (time12or24 == 12 &amp;&amp; salatHour &gt; 12) {\n            salatHour -= 12;\n        }\n\n        salatAM_PM = (time12or24 == 12) ? salatAM_PM : &quot;&quot;;\n\n        return formatter.format(salatHour) + &quot;:&quot; + formatter.format(salatMinutes) + &quot; &quot; + salatAM_PM;\n    }\n\n    public String getAsrFinalTime() {\n        int salatHour = totalMinutesAsr / 60;\n        int salatMinutes = totalMinutesAsr % 60;\n\n        String salatAM_PM;\n\n        if (salatHour &gt;= 12) {\n            salatAM_PM = &quot;pm&quot;;\n        } else {\n            salatAM_PM = &quot;am&quot;;\n        }\n\n        if (time12or24 == 12 &amp;&amp; salatHour &gt; 12) {\n            salatHour -= 12;\n        }\n\n        salatAM_PM = (time12or24 == 12) ? salatAM_PM : &quot;&quot;;\n\n        return formatter.format(salatHour) + &quot;:&quot; + formatter.format(salatMinutes) + &quot; &quot; + salatAM_PM;\n    }\n\n    public String getMaghribFinalTime() {\n        int salatHour = totalMinutesMaghrib / 60;\n        int salatMinutes = totalMinutesMaghrib % 60;\n\n        String salatAM_PM;\n\n        if (salatHour &gt;= 12) {\n            salatAM_PM = &quot;pm&quot;;\n        } else {\n            salatAM_PM = &quot;am&quot;;\n        }\n\n        if (time12or24 == 12 &amp;&amp; salatHour &gt; 12) {\n            salatHour -= 12;\n        }\n\n        salatAM_PM = (time12or24 == 12) ? salatAM_PM : &quot;&quot;;\n\n        return formatter.format(salatHour) + &quot;:&quot; + formatter.format(salatMinutes) + &quot; &quot; + salatAM_PM;\n    }\n\n    public String getIshaaFinalTime() {\n        int salatHour = totalMinutesIshaa / 60;\n        int salatMinutes = totalMinutesIshaa % 60;\n\n        String salatAM_PM;\n\n        if (salatHour &gt;= 12) {\n            salatAM_PM = &quot;pm&quot;;\n        } else {\n            salatAM_PM = &quot;am&quot;;\n        }\n\n        if (time12or24 == 12 &amp;&amp; salatHour &gt; 12) {\n            salatHour -= 12;\n        }\n\n        salatAM_PM = (time12or24 == 12) ? salatAM_PM : &quot;&quot;;\n\n        return formatter.format(salatHour) + &quot;:&quot; + formatter.format(salatMinutes) + &quot; &quot; + salatAM_PM;\n    }\n\n    public static int getMinutes(double d) {\n        int h = (int) d;\n        int m = (int) (Math.ceil((d - h) * 60));\n\n        return (h * 60) + m;\n    }\n\n    public void adjustTimes() {\n\n        this.allPrayrTimesInMinutes = new int[6];\n\n        this.totalMinutesFajr = (int) (getMinutes(fajr) + fajrTime);\n        this.totalMinutesShorouk = (int) (getMinutes(shorou9) + shoroukTime);\n        this.totalMinutesDuhr = (int) (getMinutes(duhr) + duhrTime);\n        this.totalMinutesAsr = (int) (getMinutes(asr) + asrTime);\n        this.totalMinutesMaghrib = (int) (getMinutes(maghrib) + maghribTime);\n        this.totalMinutesIshaa = (int) (getMinutes(ishaa) + ishaaTime);\n\n        this.allPrayrTimesInMinutes[0] = this.totalMinutesFajr;\n        this.allPrayrTimesInMinutes[1] = this.totalMinutesShorouk;\n        this.allPrayrTimesInMinutes[2] = this.totalMinutesDuhr;\n        this.allPrayrTimesInMinutes[3] = this.totalMinutesAsr;\n        this.allPrayrTimesInMinutes[4] = this.totalMinutesMaghrib;\n        this.allPrayrTimesInMinutes[5] = this.totalMinutesIshaa;\n\n        boolean b = true;\n\n        while (b) {\n            for (int i = 0; i &lt; allPrayrTimesInMinutes.length; i++) {\n                if (allPrayrTimesInMinutes[i] &gt; 1440) {\n                    for (int j = 0; j &lt; allPrayrTimesInMinutes.length; j++) {\n                        allPrayrTimesInMinutes[j] -= 720;\n                    }\n                    break;\n                }\n            }\n\n            b = false;\n        }\n\n        this.totalMinutesFajr = allPrayrTimesInMinutes[0];\n        this.totalMinutesShorouk = allPrayrTimesInMinutes[1];\n        this.totalMinutesDuhr = allPrayrTimesInMinutes[2];\n        this.totalMinutesAsr = allPrayrTimesInMinutes[3];\n        this.totalMinutesMaghrib = allPrayrTimesInMinutes[4];\n        this.totalMinutesIshaa = allPrayrTimesInMinutes[5];\n    }\n\n    public int[] getAllPrayrTimesInMinutes() {//get all prayer times in minutes after adjustment\n        return allPrayrTimesInMinutes;\n    }\n\n    public double getLongitude() {\n        return longitude;\n    }\n\n    public void setLongitude(double longitude) {\n        this.longitude = longitude;\n    }\n\n    public double getLatitude() {\n        return latitude;\n    }\n\n    public void setLatitude(double latitude) {\n        this.latitude = latitude;\n    }\n\n    public void setTime12or24(int time12or24) {\n        this.time12or24 = time12or24;\n    }\n\n}\n</code></pre>\n<p>I have an application to calculate prayer times. The final Fajr prayer time is set using the getFajrFinalTime() method in PrayersTimes.java. The current time is calculated and equated with the final Fajr time to find out the time and alert the user to pray. This is done via AzanService.java, but I get a null pointer exception. When getFajrFinalTime() is set to fajrTime.setText(AzanService.prayerTimes.getFajrFinalTime());</p>\n"},{"tags":["java","mergesort"],"comments":[{"score":0,"post_type":"question","creation_date":1701210659,"post_id":77567477,"comment_id":136746861,"body_markdown":"In order to wait for threads, you need to call &quot;join&quot; method: `for (int i = 0; i &lt; M; i++) {workers[i].join();}`","link":"https://stackoverflow.com/questions/77567477/concurrent-merge-sort#comment136746861_77567477","body":"In order to wait for threads, you need to call &quot;join&quot; method: <code>for (int i = 0; i &lt; M; i++) {workers[i].join();}</code>"},{"score":0,"post_type":"question","creation_date":1701277083,"post_id":77567477,"comment_id":136756696,"body_markdown":"This would be simpler with a bottom up merge sort. Split the array into M parts, and use M threads to create M sorted runs. Then use M/2 threads to merge the M runs into M/2 runs, until the result is a single run.","link":"https://stackoverflow.com/questions/77567477/concurrent-merge-sort#comment136756696_77567477","body":"This would be simpler with a bottom up merge sort. Split the array into M parts, and use M threads to create M sorted runs. Then use M/2 threads to merge the M runs into M/2 runs, until the result is a single run."},{"score":0,"post_type":"question","creation_date":1701277489,"post_id":77567477,"comment_id":136756768,"body_markdown":"For M = 4, split array into 4 parts, and create 4 threads to sort the 4 parts, thread 0, 1, 2, 3.  Thread 1 and 3 exit after sorting their part.  Thread 2 waits for thread 3 (join) and merges part 2 and 3 and exits. Thread 0 waits for thread 1 (join) and merges part 0 and 1, then waits for thread 2 (join), and merges the two halves and exits. The main thread can be thread 0 to avoid creating an unneeded thread.","link":"https://stackoverflow.com/questions/77567477/concurrent-merge-sort#comment136756768_77567477","body":"For M = 4, split array into 4 parts, and create 4 threads to sort the 4 parts, thread 0, 1, 2, 3.  Thread 1 and 3 exit after sorting their part.  Thread 2 waits for thread 3 (join) and merges part 2 and 3 and exits. Thread 0 waits for thread 1 (join) and merges part 0 and 1, then waits for thread 2 (join), and merges the two halves and exits. The main thread can be thread 0 to avoid creating an unneeded thread."}],"comment_count":3,"is_answered":false,"view_count":45,"answer_count":0,"score":0,"last_activity_date":1701209960,"creation_date":1701209912,"last_edit_date":1701209960,"question_id":77567477,"body_markdown":"I have been assigned in a class to make a concurrent merge sort using `java.util.concurrent.ConcurrentLinkedQueue&lt;&gt;` for the queue. The problem is I can&#39;t make it to work correctly, the output I get is not ordered, i suppose it is because the recursive call should wait before the final merge call, but i don&#39;t know how to do it, or even if that&#39;s the problem.\r\n```\r\nimport java.util.Arrays;\r\nimport java.util.concurrent.ConcurrentLinkedQueue;\r\n\r\npublic class Main {\r\n    private static final int M = 4; // Number of worker threads\r\n    private static final ConcurrentLinkedQueue&lt;Runnable&gt; taskQueue = new ConcurrentLinkedQueue&lt;&gt;();\r\n\r\n    public static void main(String[] args) {\r\n        int[] input = new int[100];\r\n        for (int i = 0; i &lt; input.length; i++) {\r\n            input[i] = (int) (Math.random() * 100);\r\n        }\r\n        mergeSort(input, 0, input.length - 1);\r\n\r\n        System.out.println(Arrays.toString(input));\r\n    }\r\n\r\n    private static void mergeSort(int[] arr, int l, int r) {\r\n        if (l &lt; r) {\r\n            int m = (l + r) / 2;\r\n\r\n            // Enqueue sort tasks for left and right subarrays\r\n            taskQueue.offer(() -&gt; mergeSort(arr, l, m));\r\n            taskQueue.offer(() -&gt; mergeSort(arr, m + 1, r));\r\n\r\n            // Start worker threads\r\n            startWorkerThreads();\r\n\r\n            // Enqueue merge task for subarrays\r\n            taskQueue.offer(() -&gt; merge(arr, l, m, r));\r\n\r\n            // Start worker threads again for merging\r\n            startWorkerThreads();\r\n        }\r\n    }\r\n\r\n    private static void startWorkerThreads() {\r\n        Thread[] workers = new Thread[M];\r\n        \r\n        for (int i = 0; i &lt; M; i++) {\r\n            workers[i] = new Thread(() -&gt; {\r\n                Runnable task;\r\n                while ((task = taskQueue.poll()) != null) {\r\n                    task.run();\r\n                }\r\n            });\r\n            workers[i].start();\r\n        }\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    private static void merge(int[] arr, int l, int m, int r) {\r\n        int n1 = m - l + 1;\r\n        int n2 = r - m;\r\n\r\n        int[] left = new int[n1];\r\n        int[] right = new int[n2];\r\n\r\n        for (int i = 0; i &lt; n1; i++) {\r\n            left[i] = arr[l + i];\r\n        }\r\n        for (int j = 0; j &lt; n2; j++) {\r\n            right[j] = arr[m + 1 + j];\r\n        }\r\n\r\n        int i = 0, j = 0, k = l;\r\n        while (i &lt; n1 &amp;&amp; j &lt; n2) {\r\n            if (left[i] &lt;= right[j]) {\r\n                arr[k] = left[i];\r\n                i++;\r\n            } else {\r\n                arr[k] = right[j];\r\n                j++;\r\n            }\r\n            k++;\r\n        }\r\n\r\n        while (i &lt; n1) {\r\n            arr[k] = left[i];\r\n            i++;\r\n            k++;\r\n        }\r\n\r\n        while (j &lt; n2) {\r\n            arr[k] = right[j];\r\n            j++;\r\n            k++;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI tried `Thread.sleep`, and works for small arrays, but for bigger ones it&#39;s bad.","link":"https://stackoverflow.com/questions/77567477/concurrent-merge-sort","title":"Concurrent Merge sort","body":"<p>I have been assigned in a class to make a concurrent merge sort using <code>java.util.concurrent.ConcurrentLinkedQueue&lt;&gt;</code> for the queue. The problem is I can't make it to work correctly, the output I get is not ordered, i suppose it is because the recursive call should wait before the final merge call, but i don't know how to do it, or even if that's the problem.</p>\n<pre><code>import java.util.Arrays;\nimport java.util.concurrent.ConcurrentLinkedQueue;\n\npublic class Main {\n    private static final int M = 4; // Number of worker threads\n    private static final ConcurrentLinkedQueue&lt;Runnable&gt; taskQueue = new ConcurrentLinkedQueue&lt;&gt;();\n\n    public static void main(String[] args) {\n        int[] input = new int[100];\n        for (int i = 0; i &lt; input.length; i++) {\n            input[i] = (int) (Math.random() * 100);\n        }\n        mergeSort(input, 0, input.length - 1);\n\n        System.out.println(Arrays.toString(input));\n    }\n\n    private static void mergeSort(int[] arr, int l, int r) {\n        if (l &lt; r) {\n            int m = (l + r) / 2;\n\n            // Enqueue sort tasks for left and right subarrays\n            taskQueue.offer(() -&gt; mergeSort(arr, l, m));\n            taskQueue.offer(() -&gt; mergeSort(arr, m + 1, r));\n\n            // Start worker threads\n            startWorkerThreads();\n\n            // Enqueue merge task for subarrays\n            taskQueue.offer(() -&gt; merge(arr, l, m, r));\n\n            // Start worker threads again for merging\n            startWorkerThreads();\n        }\n    }\n\n    private static void startWorkerThreads() {\n        Thread[] workers = new Thread[M];\n        \n        for (int i = 0; i &lt; M; i++) {\n            workers[i] = new Thread(() -&gt; {\n                Runnable task;\n                while ((task = taskQueue.poll()) != null) {\n                    task.run();\n                }\n            });\n            workers[i].start();\n        }\n\n\n\n\n    }\n\n\n\n    private static void merge(int[] arr, int l, int m, int r) {\n        int n1 = m - l + 1;\n        int n2 = r - m;\n\n        int[] left = new int[n1];\n        int[] right = new int[n2];\n\n        for (int i = 0; i &lt; n1; i++) {\n            left[i] = arr[l + i];\n        }\n        for (int j = 0; j &lt; n2; j++) {\n            right[j] = arr[m + 1 + j];\n        }\n\n        int i = 0, j = 0, k = l;\n        while (i &lt; n1 &amp;&amp; j &lt; n2) {\n            if (left[i] &lt;= right[j]) {\n                arr[k] = left[i];\n                i++;\n            } else {\n                arr[k] = right[j];\n                j++;\n            }\n            k++;\n        }\n\n        while (i &lt; n1) {\n            arr[k] = left[i];\n            i++;\n            k++;\n        }\n\n        while (j &lt; n2) {\n            arr[k] = right[j];\n            j++;\n            k++;\n        }\n    }\n}\n</code></pre>\n<p>I tried <code>Thread.sleep</code>, and works for small arrays, but for bigger ones it's bad.</p>\n"},{"tags":["java","spring","jpa"],"comments":[{"score":0,"post_type":"question","creation_date":1700674958,"post_id":77532109,"comment_id":136684741,"body_markdown":"why are you not posting the violent exception?","link":"https://stackoverflow.com/questions/77532109/how-to-remove-entities-annotated-with-many-to-many-relationship#comment136684741_77532109","body":"why are you not posting the violent exception?"},{"score":0,"post_type":"question","creation_date":1700736642,"post_id":77532109,"comment_id":136692351,"body_markdown":"@Loading what violent exception?","link":"https://stackoverflow.com/questions/77532109/how-to-remove-entities-annotated-with-many-to-many-relationship#comment136692351_77532109","body":"@Loading what violent exception?"},{"score":0,"post_type":"question","creation_date":1700748644,"post_id":77532109,"comment_id":136694481,"body_markdown":"typo: the violation of the key constraint. Normally the exception helps pinpointing which table did not get cleaned up","link":"https://stackoverflow.com/questions/77532109/how-to-remove-entities-annotated-with-many-to-many-relationship#comment136694481_77532109","body":"typo: the violation of the key constraint. Normally the exception helps pinpointing which table did not get cleaned up"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1700736723,"post_id":77532168,"comment_id":136692371,"body_markdown":"cascade.REMOVE isn&#39;t recommended for many to many that&#39;s why i didn&#39;t use it. also the exception is not there. It&#39;s in the if check for staff","link":"https://stackoverflow.com/questions/77532109/how-to-remove-entities-annotated-with-many-to-many-relationship/77532168#comment136692371_77532168","body":"cascade.REMOVE isn&#39;t recommended for many to many that&#39;s why i didn&#39;t use it. also the exception is not there. It&#39;s in the if check for staff"},{"score":0,"post_type":"answer","creation_date":1700748697,"post_id":77532168,"comment_id":136694491,"body_markdown":"can you please add these to the post? Its hard to follow exactly where you get the exception. Also did the getStaff().clear() work?","link":"https://stackoverflow.com/questions/77532109/how-to-remove-entities-annotated-with-many-to-many-relationship/77532168#comment136694491_77532168","body":"can you please add these to the post? Its hard to follow exactly where you get the exception. Also did the getStaff().clear() work?"},{"score":0,"post_type":"answer","creation_date":1700955364,"post_id":77532168,"comment_id":136715698,"body_markdown":"i did add that CASCADE.REMOVE isn&#39;t recommended as per the article i shared.","link":"https://stackoverflow.com/questions/77532109/how-to-remove-entities-annotated-with-many-to-many-relationship/77532168#comment136715698_77532168","body":"i did add that CASCADE.REMOVE isn&#39;t recommended as per the article i shared."},{"score":0,"post_type":"answer","creation_date":1701008233,"post_id":77532168,"comment_id":136719212,"body_markdown":"sorry its hard to follow you. On which line do you get the exception exactly? Can you post the exception message? did the clear() work or not?","link":"https://stackoverflow.com/questions/77532109/how-to-remove-entities-annotated-with-many-to-many-relationship/77532168#comment136719212_77532168","body":"sorry its hard to follow you. On which line do you get the exception exactly? Can you post the exception message? did the clear() work or not?"},{"score":0,"post_type":"answer","creation_date":1701209591,"post_id":77532168,"comment_id":136746692,"body_markdown":"I removed the problem entirely by actually declaring the staff_shifts entity. I&#39;ll close the question. Thanks for helping!","link":"https://stackoverflow.com/questions/77532109/how-to-remove-entities-annotated-with-many-to-many-relationship/77532168#comment136746692_77532168","body":"I removed the problem entirely by actually declaring the staff_shifts entity. I&#39;ll close the question. Thanks for helping!"}],"comment_count":5,"score":0,"last_activity_date":1700675393,"creation_date":1700675393,"answer_id":77532168,"question_id":77532109,"body_markdown":"To delete with a many to many relationship in hibernate you need to delete *BOTH* sides/entites from each other.\r\n\r\nIn this part of the code you take the staff entity and remove the shift. But you also need take the shifts entity and remove the staff out of it:\r\n\r\n\r\n    shiftToBeDeleted.getStaff().clear(); //SOMETHING LIKE THAT\r\n\r\n    for (Staff staff : shiftToBeDeleted.getStaff()){\r\n         System.out.println(&quot;this fucker is second:&quot;+ staff.getUsername());\r\n         staff.getShifts().remove(shiftToBeDeleted);\r\n         shiftToBeDeleted.getStaff().remove(staff); //SOMETHING LIKE THAT\r\n         staffRepository.save(staff);\r\n     }\r\n\r\nI can also imagine that you need to change the cascade to also add DELETE:\r\n\r\n    cascade = {CascadeType.ALL}","link":"https://stackoverflow.com/questions/77532109/how-to-remove-entities-annotated-with-many-to-many-relationship/77532168#77532168","title":"how to remove entities annotated with many to many relationship","body":"<p>To delete with a many to many relationship in hibernate you need to delete <em>BOTH</em> sides/entites from each other.</p>\n<p>In this part of the code you take the staff entity and remove the shift. But you also need take the shifts entity and remove the staff out of it:</p>\n<pre><code>shiftToBeDeleted.getStaff().clear(); //SOMETHING LIKE THAT\n\nfor (Staff staff : shiftToBeDeleted.getStaff()){\n     System.out.println(&quot;this fucker is second:&quot;+ staff.getUsername());\n     staff.getShifts().remove(shiftToBeDeleted);\n     shiftToBeDeleted.getStaff().remove(staff); //SOMETHING LIKE THAT\n     staffRepository.save(staff);\n }\n</code></pre>\n<p>I can also imagine that you need to change the cascade to also add DELETE:</p>\n<pre><code>cascade = {CascadeType.ALL}\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1701209633,"creation_date":1701209633,"answer_id":77567464,"question_id":77532109,"body_markdown":"Having not found a solution to this. I resulted to actually creating the staff_shifts entity and mapping it which worked without problems. ","link":"https://stackoverflow.com/questions/77532109/how-to-remove-entities-annotated-with-many-to-many-relationship/77567464#77567464","title":"how to remove entities annotated with many to many relationship","body":"<p>Having not found a solution to this. I resulted to actually creating the staff_shifts entity and mapping it which worked without problems.</p>\n"}],"comment_count":3,"is_answered":true,"view_count":36,"answer_count":2,"score":-3,"last_activity_date":1701209633,"creation_date":1700674774,"last_edit_date":1700955313,"question_id":77532109,"body_markdown":"I&#39;ve been at this for over 3 hours and no progress. I have this method: \r\n\r\n      public String deleteShift(Shifts shifts){\r\n\r\n         Shifts shiftToBeDeleted = shiftsRepository.findById(shifts.getId()).orElseThrow(() -&gt;new ShiftNotFoundException(&quot;This shift doesn&#39;t exist&quot;));\r\n               Set&lt;Staff&gt; staffListForShift = shiftToBeDeleted.getStaff();\r\n\r\n      if (shiftToBeDeleted.getStaff().isEmpty()){\r\n\r\n             System.out.println(&quot;this fucker:&quot; + shiftToBeDeleted.getStaff());\r\n             shiftsRepository.deleteById(shifts.getId());\r\n             return &quot;Shift removed.&quot;;\r\n         }else {\r\n             for (Staff staff : shiftToBeDeleted.getStaff()){\r\n                 System.out.println(&quot;this fucker is second:&quot;+ staff.getUsername());\r\n                 staff.getShifts().remove(shiftToBeDeleted);\r\n                 staffRepository.save(staff);\r\n             }\r\n             shiftsRepository.deleteById(shiftToBeDeleted.getId());\r\n             return &quot;Shift removed, assign the free staff to a different one.&quot;;\r\n         }\r\n    }\r\n\r\nit is supposed to delete a shift but it keeps returnning a violation of a foreign key constraint that i can&#39;t for the life of me fix. \r\n\r\nthis is the shifts class : \r\n\r\n       \r\n\r\n    public class Shifts {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    private Long id;\r\n    @Temporal(TemporalType.TIME)\r\n    private LocalTime shiftStart;\r\n    @Temporal(TemporalType.TIME)\r\n    private LocalTime shiftEnd;\r\n    @ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})\r\n    @JsonIgnore\r\n    private Set&lt;Staff&gt; staff;}\r\n\r\n\r\n\r\n\r\n\r\n\r\nthis is the staff class :\r\n   \r\n\r\n    public class Staff {\r\n    @Id\r\n    private Long id;\r\n    private String username;\r\n    private String password;\r\n    @Enumerated(EnumType.STRING)\r\n    private StaffStates state;\r\n    @Enumerated(EnumType.STRING)\r\n    private UserTypes type;\r\n\r\n\r\n    @OneToOne( cascade = CascadeType.ALL)\r\n    @MapsId\r\n    @JoinColumn(name = &quot;id&quot;)\r\n    private User user;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL)\r\n    @JoinColumn(name = &quot;staff&quot;)\r\n    private Set&lt;WorkHours&gt; workHoursSet;\r\n\r\n    @ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})\r\n    @JoinTable(\r\n            name = &quot;StaffShifts&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;staffId&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;shiftId&quot;))\r\n    private Set&lt;Shifts&gt; shifts;\r\n\r\n\r\n    @ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})\r\n    @JoinTable(\r\n            name = &quot;StaffPermissions&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;staffid&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;permissionId&quot;))\r\n            private Set&lt;Permissions&gt; permissions;\r\n\r\n    @OneToMany()\r\n    private Set&lt;Transactions&gt; transactionsSet;\r\n\r\n}\r\n\r\ni tried using cascade to solve the problem but cascade removal isn&#39;t recommended according to [this](https://www.baeldung.com/jpa-remove-entity-many-to-many)\r\n\r\nEdit : the error is in getStaff.isEMpty(). somehow the list of staff pops up empty in that check but when i move to delete from it it throws a violated foreign key exception.\r\n","link":"https://stackoverflow.com/questions/77532109/how-to-remove-entities-annotated-with-many-to-many-relationship","title":"how to remove entities annotated with many to many relationship","body":"<p>I've been at this for over 3 hours and no progress. I have this method:</p>\n<pre><code>  public String deleteShift(Shifts shifts){\n\n     Shifts shiftToBeDeleted = shiftsRepository.findById(shifts.getId()).orElseThrow(() -&gt;new ShiftNotFoundException(&quot;This shift doesn't exist&quot;));\n           Set&lt;Staff&gt; staffListForShift = shiftToBeDeleted.getStaff();\n\n  if (shiftToBeDeleted.getStaff().isEmpty()){\n\n         System.out.println(&quot;this fucker:&quot; + shiftToBeDeleted.getStaff());\n         shiftsRepository.deleteById(shifts.getId());\n         return &quot;Shift removed.&quot;;\n     }else {\n         for (Staff staff : shiftToBeDeleted.getStaff()){\n             System.out.println(&quot;this fucker is second:&quot;+ staff.getUsername());\n             staff.getShifts().remove(shiftToBeDeleted);\n             staffRepository.save(staff);\n         }\n         shiftsRepository.deleteById(shiftToBeDeleted.getId());\n         return &quot;Shift removed, assign the free staff to a different one.&quot;;\n     }\n}\n</code></pre>\n<p>it is supposed to delete a shift but it keeps returnning a violation of a foreign key constraint that i can't for the life of me fix.</p>\n<p>this is the shifts class :</p>\n<pre><code>public class Shifts {\n@Id\n@GeneratedValue(strategy = GenerationType.SEQUENCE)\nprivate Long id;\n@Temporal(TemporalType.TIME)\nprivate LocalTime shiftStart;\n@Temporal(TemporalType.TIME)\nprivate LocalTime shiftEnd;\n@ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})\n@JsonIgnore\nprivate Set&lt;Staff&gt; staff;}\n</code></pre>\n<p>this is the staff class :</p>\n<pre><code>public class Staff {\n@Id\nprivate Long id;\nprivate String username;\nprivate String password;\n@Enumerated(EnumType.STRING)\nprivate StaffStates state;\n@Enumerated(EnumType.STRING)\nprivate UserTypes type;\n\n\n@OneToOne( cascade = CascadeType.ALL)\n@MapsId\n@JoinColumn(name = &quot;id&quot;)\nprivate User user;\n\n@OneToMany(cascade = CascadeType.ALL)\n@JoinColumn(name = &quot;staff&quot;)\nprivate Set&lt;WorkHours&gt; workHoursSet;\n\n@ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})\n@JoinTable(\n        name = &quot;StaffShifts&quot;,\n        joinColumns = @JoinColumn(name = &quot;staffId&quot;),\n        inverseJoinColumns = @JoinColumn(name = &quot;shiftId&quot;))\nprivate Set&lt;Shifts&gt; shifts;\n\n\n@ManyToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})\n@JoinTable(\n        name = &quot;StaffPermissions&quot;,\n        joinColumns = @JoinColumn(name = &quot;staffid&quot;),\n        inverseJoinColumns = @JoinColumn(name = &quot;permissionId&quot;))\n        private Set&lt;Permissions&gt; permissions;\n\n@OneToMany()\nprivate Set&lt;Transactions&gt; transactionsSet;\n</code></pre>\n<p>}</p>\n<p>i tried using cascade to solve the problem but cascade removal isn't recommended according to <a href=\"https://www.baeldung.com/jpa-remove-entity-many-to-many\" rel=\"nofollow noreferrer\">this</a></p>\n<p>Edit : the error is in getStaff.isEMpty(). somehow the list of staff pops up empty in that check but when i move to delete from it it throws a violated foreign key exception.</p>\n"},{"tags":["java","amazon-web-services","amazon-dynamodb","dynamodb-mapper"],"comment_count":0,"is_answered":false,"view_count":20,"answer_count":0,"score":0,"last_activity_date":1701209167,"creation_date":1701209167,"question_id":77567435,"body_markdown":"I would like to update a single field in a nested property in DynamoDB. I figured using the `UPDATE_SKIP_NULL_ATTRIBUTES` `SaveConfiguration` would allow me to do this, but that appears to not be the case.\r\n\r\nMy `DynamoDBTable`:\r\n```\r\n@Getter\r\n@Setter\r\n@DynamoDBTable(tableName = &quot;users&quot;)\r\npublic class User {\r\n    @DynamoDBHashKey(attributeName = &quot;Id&quot;)\r\n    @DynamoDBAutoGeneratedKey\r\n    private String id;\r\n\r\n    @DynamoDBAtribute\r\n    private String phone;\r\n\r\n    @DynamoDBAtribute\r\n    @DynamoDBTypeConvertedJson(targetType = Name.class)\r\n    private Name name;\r\n\r\n    @Getter\r\n    @Setter\r\n    @DynamoDBDocument\r\n    public static class Name {\r\n        @DynamoDBAttribute\r\n        private String first;\r\n\r\n        @DynamoDBAttribute\r\n        private String last;\r\n    }\r\n}\r\n```\r\nI have a `DynamoDBMapperConfig` initialized like so:\r\n```\r\nprivate final DynamoDBMapperConfig config = DynamoDBMapperConfig.builder().withSaveBheavior(DynamoDBMapperConfig.SaveBehavior.UPDATE_SKIP_NULL_ATTRIBUTES).build();\r\n```\r\nAnd to save the record, I call the following:\r\n```\r\nmapper.save(user, config);\r\n```\r\nwhere `mapper` is a `DynamoDBMapper` and `user` is a `User` shown above.\r\n\r\nThe issue is that despite using the `UPDATE_SKIP_NULL_ATTRIBUTES` configuration, if `user.name.last` is null, the DB record&#39;s `last` field gets updated to `null` as well instead of the field being ignored.\r\n\r\nThis issue does not occur for non-nested fields, such as `phone` - if `phone` is `null`, the record&#39;s current value does **not** get overwritten.\r\n\r\nIs there a way to make `UPDATE_SKIP_NULL_ATTRIBUTES` apply to nested objects as well? I simply need a way to modify single fields in nested objects.","link":"https://stackoverflow.com/questions/77567435/dynamodb-update-skip-null-attributes-does-not-apply-to-complex-nested-properties","title":"DynamoDB UPDATE_SKIP_NULL_ATTRIBUTES does not Apply to Complex Nested Properties","body":"<p>I would like to update a single field in a nested property in DynamoDB. I figured using the <code>UPDATE_SKIP_NULL_ATTRIBUTES</code> <code>SaveConfiguration</code> would allow me to do this, but that appears to not be the case.</p>\n<p>My <code>DynamoDBTable</code>:</p>\n<pre><code>@Getter\n@Setter\n@DynamoDBTable(tableName = &quot;users&quot;)\npublic class User {\n    @DynamoDBHashKey(attributeName = &quot;Id&quot;)\n    @DynamoDBAutoGeneratedKey\n    private String id;\n\n    @DynamoDBAtribute\n    private String phone;\n\n    @DynamoDBAtribute\n    @DynamoDBTypeConvertedJson(targetType = Name.class)\n    private Name name;\n\n    @Getter\n    @Setter\n    @DynamoDBDocument\n    public static class Name {\n        @DynamoDBAttribute\n        private String first;\n\n        @DynamoDBAttribute\n        private String last;\n    }\n}\n</code></pre>\n<p>I have a <code>DynamoDBMapperConfig</code> initialized like so:</p>\n<pre><code>private final DynamoDBMapperConfig config = DynamoDBMapperConfig.builder().withSaveBheavior(DynamoDBMapperConfig.SaveBehavior.UPDATE_SKIP_NULL_ATTRIBUTES).build();\n</code></pre>\n<p>And to save the record, I call the following:</p>\n<pre><code>mapper.save(user, config);\n</code></pre>\n<p>where <code>mapper</code> is a <code>DynamoDBMapper</code> and <code>user</code> is a <code>User</code> shown above.</p>\n<p>The issue is that despite using the <code>UPDATE_SKIP_NULL_ATTRIBUTES</code> configuration, if <code>user.name.last</code> is null, the DB record's <code>last</code> field gets updated to <code>null</code> as well instead of the field being ignored.</p>\n<p>This issue does not occur for non-nested fields, such as <code>phone</code> - if <code>phone</code> is <code>null</code>, the record's current value does <strong>not</strong> get overwritten.</p>\n<p>Is there a way to make <code>UPDATE_SKIP_NULL_ATTRIBUTES</code> apply to nested objects as well? I simply need a way to modify single fields in nested objects.</p>\n"},{"tags":["java","spring","maven","jasper-reports"],"comment_count":0,"is_answered":false,"view_count":18,"answer_count":0,"score":0,"last_activity_date":1701208936,"creation_date":1701208936,"question_id":77567422,"body_markdown":"I&#39;m trying to generate a report with a barcode using jasperResports, but it gives this error:\r\n\r\n```\r\nThere was an unexpected error (type=Internal Server Error, status=500).\r\norg/apache/batik/bridge/UserAgent\r\njava.lang.NoClassDefFoundError: org/apache/batik/bridge/UserAgent\r\n\tat net.sf.jasperreports.renderers.util.RendererUtil.getSvgDataSniffer(RendererUtil.java:164)\r\n\tat net.sf.jasperreports.renderers.util.RendererUtil.getSvgInfo(RendererUtil.java:133)\r\n\tat net.sf.jasperreports.renderers.util.RendererUtil.isSvgData(RendererUtil.java:114)\r\n\tat net.sf.jasperreports.renderers.util.RendererUtil.isSvgData(RendererUtil.java:153)\r\n\tat...\r\n```\r\n\r\nremembering this error when I add the barcode4j barcode\r\n\r\nI researched it and saw that I had to add this dependency in Maven&#39;s .POM:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\r\n    &lt;artifactId&gt;batik-bridge&lt;/artifactId&gt;\r\n    &lt;version&gt;1.11&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nmy complete .pom file:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n       &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n       &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n       &lt;version&gt;3.1.5&lt;/version&gt;\r\n       &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;br.com.desktop&lt;/groupId&gt;\r\n    &lt;artifactId&gt;deskestoque&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;deskestoque&lt;/name&gt;\r\n    &lt;description&gt;projeto estoque&lt;/description&gt;\r\n    &lt;properties&gt;\r\n       &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n       &lt;!-- spring boot core --&gt;\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;!-- spring data and JPA --&gt;\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n       &lt;/dependency&gt;\r\n\r\n\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n          &lt;scope&gt;runtime&lt;/scope&gt;\r\n          &lt;optional&gt;true&lt;/optional&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;!-- MySQL JDBC connector --&gt;\r\n\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n          &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n          &lt;scope&gt;runtime&lt;/scope&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;!-- MariaDB JDBC connector --&gt;\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\r\n          &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\r\n          &lt;scope&gt;runtime&lt;/scope&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;!-- Lombok --&gt;\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n          &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n          &lt;optional&gt;true&lt;/optional&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;!-- POJO Mapper --&gt;\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n          &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n          &lt;version&gt;2.4.4&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;!-- JasperReports  --&gt;\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\r\n          &lt;artifactId&gt;jasperreports&lt;/artifactId&gt;\r\n          &lt;version&gt;6.20.0&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;!--  commons --&gt;\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;commons-collections&lt;/groupId&gt;\r\n          &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\r\n          &lt;version&gt;3.2.1&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n       &lt;!--  barcode4j --&gt;\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;com.singingbush&lt;/groupId&gt;\r\n          &lt;artifactId&gt;barcode4j&lt;/artifactId&gt;\r\n          &lt;version&gt;2.2.1&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;!--  barbecue --&gt;\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;net.sourceforge.barbecue&lt;/groupId&gt;\r\n          &lt;artifactId&gt;barbecue&lt;/artifactId&gt;\r\n          &lt;version&gt;1.5-beta1&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\r\n          &lt;artifactId&gt;annotations&lt;/artifactId&gt;\r\n          &lt;version&gt;RELEASE&lt;/version&gt;\r\n          &lt;scope&gt;compile&lt;/scope&gt;\r\n       &lt;/dependency&gt;\r\n\r\n\r\n       &lt;dependency&gt;\r\n          &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\r\n          &lt;artifactId&gt;batik-bridge&lt;/artifactId&gt;\r\n          &lt;version&gt;1.11&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n\r\n\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n       &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n             &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n             &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n             &lt;configuration&gt;\r\n                &lt;image&gt;\r\n                   &lt;builder&gt;paketobuildpacks/builder-jammy-base:latest&lt;/builder&gt;\r\n                &lt;/image&gt;\r\n             &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n       &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n    &lt;repositories&gt;\r\n       &lt;repository&gt;\r\n          &lt;id&gt;Maven Central&lt;/id&gt;\r\n          &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\r\n       &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nBut you still get the error, does anyone know what it could be?\r\n\r\nI&#39;m trying to generate a PDF of a report but I&#39;m having this problem, if anyone knows a solution or something to help I&#39;d appreciate it, I&#39;ve been looking for a solution for a long time...","link":"https://stackoverflow.com/questions/77567422/error-when-trying-to-generate-a-report-with-jasperreports-barcode-with-spring","title":"Error when trying to generate a report with jasperReports barcode with spring","body":"<p>I'm trying to generate a report with a barcode using jasperResports, but it gives this error:</p>\n<pre><code>There was an unexpected error (type=Internal Server Error, status=500).\norg/apache/batik/bridge/UserAgent\njava.lang.NoClassDefFoundError: org/apache/batik/bridge/UserAgent\n    at net.sf.jasperreports.renderers.util.RendererUtil.getSvgDataSniffer(RendererUtil.java:164)\n    at net.sf.jasperreports.renderers.util.RendererUtil.getSvgInfo(RendererUtil.java:133)\n    at net.sf.jasperreports.renderers.util.RendererUtil.isSvgData(RendererUtil.java:114)\n    at net.sf.jasperreports.renderers.util.RendererUtil.isSvgData(RendererUtil.java:153)\n    at...\n</code></pre>\n<p>remembering this error when I add the barcode4j barcode</p>\n<p>I researched it and saw that I had to add this dependency in Maven's .POM:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\n    &lt;artifactId&gt;batik-bridge&lt;/artifactId&gt;\n    &lt;version&gt;1.11&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>my complete .pom file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n       &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n       &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n       &lt;version&gt;3.1.5&lt;/version&gt;\n       &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;br.com.desktop&lt;/groupId&gt;\n    &lt;artifactId&gt;deskestoque&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;deskestoque&lt;/name&gt;\n    &lt;description&gt;projeto estoque&lt;/description&gt;\n    &lt;properties&gt;\n       &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n       &lt;!-- spring boot core --&gt;\n       &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n       &lt;/dependency&gt;\n\n       &lt;!-- spring data and JPA --&gt;\n       &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n       &lt;/dependency&gt;\n\n\n       &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n          &lt;scope&gt;runtime&lt;/scope&gt;\n          &lt;optional&gt;true&lt;/optional&gt;\n       &lt;/dependency&gt;\n\n       &lt;!-- MySQL JDBC connector --&gt;\n\n       &lt;dependency&gt;\n          &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n          &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n          &lt;scope&gt;runtime&lt;/scope&gt;\n       &lt;/dependency&gt;\n\n       &lt;!-- MariaDB JDBC connector --&gt;\n       &lt;dependency&gt;\n          &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\n          &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\n          &lt;scope&gt;runtime&lt;/scope&gt;\n       &lt;/dependency&gt;\n\n       &lt;!-- Lombok --&gt;\n       &lt;dependency&gt;\n          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n          &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n          &lt;optional&gt;true&lt;/optional&gt;\n       &lt;/dependency&gt;\n\n       &lt;!-- POJO Mapper --&gt;\n       &lt;dependency&gt;\n          &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n          &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n          &lt;version&gt;2.4.4&lt;/version&gt;\n       &lt;/dependency&gt;\n\n       &lt;!-- JasperReports  --&gt;\n       &lt;dependency&gt;\n          &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\n          &lt;artifactId&gt;jasperreports&lt;/artifactId&gt;\n          &lt;version&gt;6.20.0&lt;/version&gt;\n       &lt;/dependency&gt;\n\n       &lt;!--  commons --&gt;\n       &lt;dependency&gt;\n          &lt;groupId&gt;commons-collections&lt;/groupId&gt;\n          &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\n          &lt;version&gt;3.2.1&lt;/version&gt;\n       &lt;/dependency&gt;\n       &lt;!--  barcode4j --&gt;\n       &lt;dependency&gt;\n          &lt;groupId&gt;com.singingbush&lt;/groupId&gt;\n          &lt;artifactId&gt;barcode4j&lt;/artifactId&gt;\n          &lt;version&gt;2.2.1&lt;/version&gt;\n       &lt;/dependency&gt;\n\n       &lt;!--  barbecue --&gt;\n       &lt;dependency&gt;\n          &lt;groupId&gt;net.sourceforge.barbecue&lt;/groupId&gt;\n          &lt;artifactId&gt;barbecue&lt;/artifactId&gt;\n          &lt;version&gt;1.5-beta1&lt;/version&gt;\n       &lt;/dependency&gt;\n\n       &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n          &lt;scope&gt;test&lt;/scope&gt;\n       &lt;/dependency&gt;\n\n       &lt;dependency&gt;\n          &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\n          &lt;artifactId&gt;annotations&lt;/artifactId&gt;\n          &lt;version&gt;RELEASE&lt;/version&gt;\n          &lt;scope&gt;compile&lt;/scope&gt;\n       &lt;/dependency&gt;\n\n\n       &lt;dependency&gt;\n          &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\n          &lt;artifactId&gt;batik-bridge&lt;/artifactId&gt;\n          &lt;version&gt;1.11&lt;/version&gt;\n       &lt;/dependency&gt;\n\n\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n       &lt;plugins&gt;\n          &lt;plugin&gt;\n             &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n             &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n             &lt;configuration&gt;\n                &lt;image&gt;\n                   &lt;builder&gt;paketobuildpacks/builder-jammy-base:latest&lt;/builder&gt;\n                &lt;/image&gt;\n             &lt;/configuration&gt;\n          &lt;/plugin&gt;\n       &lt;/plugins&gt;\n    &lt;/build&gt;\n    &lt;repositories&gt;\n       &lt;repository&gt;\n          &lt;id&gt;Maven Central&lt;/id&gt;\n          &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;\n       &lt;/repository&gt;\n    &lt;/repositories&gt;\n&lt;/project&gt;\n</code></pre>\n<p>But you still get the error, does anyone know what it could be?</p>\n<p>I'm trying to generate a PDF of a report but I'm having this problem, if anyone knows a solution or something to help I'd appreciate it, I've been looking for a solution for a long time...</p>\n"},{"tags":["java","swing","user-interface","import","jframe"],"comment_count":0,"is_answered":false,"view_count":18,"answer_count":0,"score":-1,"last_activity_date":1701208700,"creation_date":1701208590,"question_id":77567395,"body_markdown":"\r\n```\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JPanel;\r\n```\r\n\r\ni tried to import the swing JFrame to my project but eclipse tells me &quot;The type javax.swing.JFrame is not accessible&quot;.\r\n\r\n\r\n\r\n\r\nplease help me with my problem. ","link":"https://stackoverflow.com/questions/77567395/i-cant-create-a-gui-in-eclipse","title":"I cant create a GUI in Eclipse","body":"<pre><code>import javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\n</code></pre>\n<p>i tried to import the swing JFrame to my project but eclipse tells me &quot;The type javax.swing.JFrame is not accessible&quot;.</p>\n<p>please help me with my problem.</p>\n"},{"tags":["java","list","optimization","arraylist","java-stream"],"comments":[{"score":0,"post_type":"question","creation_date":1701207029,"post_id":77567241,"comment_id":136746270,"body_markdown":"why `getClientName` returns nothing ?","link":"https://stackoverflow.com/questions/77567241/java-how-to-search-for-a-value-in-the-list-of-objects#comment136746270_77567241","body":"why <code>getClientName</code> returns nothing ?"},{"score":1,"post_type":"question","creation_date":1701207260,"post_id":77567241,"comment_id":136746292,"body_markdown":"`myCustomer.cID == customerID` is not doing what you thing it does.","link":"https://stackoverflow.com/questions/77567241/java-how-to-search-for-a-value-in-the-list-of-objects#comment136746292_77567241","body":"<code>myCustomer.cID == customerID</code> is not doing what you thing it does."},{"score":0,"post_type":"question","creation_date":1701207360,"post_id":77567241,"comment_id":136746309,"body_markdown":"`getClientName` does not return anything, it should return a `String`.","link":"https://stackoverflow.com/questions/77567241/java-how-to-search-for-a-value-in-the-list-of-objects#comment136746309_77567241","body":"<code>getClientName</code> does not return anything, it should return a <code>String</code>."},{"score":0,"post_type":"question","creation_date":1701207656,"post_id":77567241,"comment_id":136746359,"body_markdown":"*&quot;Maybe there&#39;s a simpler way to count subscribed customers and searching for customers by ID?&quot;*  Well, for getting total number of subscriptions, you could have a variable something like `static int totalSubscriptions = 0;` and increment it each time `activateSubscription` *acutally changes* the subscription to `true`.","link":"https://stackoverflow.com/questions/77567241/java-how-to-search-for-a-value-in-the-list-of-objects#comment136746359_77567241","body":"<i>&quot;Maybe there&#39;s a simpler way to count subscribed customers and searching for customers by ID?&quot;</i>  Well, for getting total number of subscriptions, you could have a variable something like <code>static int totalSubscriptions = 0;</code> and increment it each time <code>activateSubscription</code> <i>acutally changes</i> the subscription to <code>true</code>."},{"score":0,"post_type":"question","creation_date":1701207853,"post_id":77567241,"comment_id":136746391,"body_markdown":"You could also improve performance by using a `HashMap`. But, since you seem to be very new, it might be better to learn about that later.","link":"https://stackoverflow.com/questions/77567241/java-how-to-search-for-a-value-in-the-list-of-objects#comment136746391_77567241","body":"You could also improve performance by using a <code>HashMap</code>. But, since you seem to be very new, it might be better to learn about that later."},{"score":0,"post_type":"question","creation_date":1701208107,"post_id":77567241,"comment_id":136746429,"body_markdown":"One thing you can do is eliminate compiler errors. In a method that has a `void` return type, there cannot be something after the `return` keyword.","link":"https://stackoverflow.com/questions/77567241/java-how-to-search-for-a-value-in-the-list-of-objects#comment136746429_77567241","body":"One thing you can do is eliminate compiler errors. In a method that has a <code>void</code> return type, there cannot be something after the <code>return</code> keyword."},{"score":0,"post_type":"question","creation_date":1701209032,"post_id":77567241,"comment_id":136746592,"body_markdown":"== only works with primitive types.  == on object types is the identity check.  Strings are objects.  you will want to use equals with objects.","link":"https://stackoverflow.com/questions/77567241/java-how-to-search-for-a-value-in-the-list-of-objects#comment136746592_77567241","body":"== only works with primitive types.  == on object types is the identity check.  Strings are objects.  you will want to use equals with objects."}],"answers":[{"comments":[{"score":2,"post_type":"answer","creation_date":1701208382,"post_id":77567266,"comment_id":136746485,"body_markdown":"imho the `orElseThrow` combined with `catch` should be replaced with `map(Client::getFullName).orElse(null);`","link":"https://stackoverflow.com/questions/77567241/java-how-to-search-for-a-value-in-the-list-of-objects/77567266#comment136746485_77567266","body":"imho the <code>orElseThrow</code> combined with <code>catch</code> should be replaced with <code>map(Client::getFullName).orElse(null);</code>"}],"comment_count":1,"score":0,"last_activity_date":1701208548,"last_edit_date":1701208548,"creation_date":1701207254,"answer_id":77567266,"question_id":77567241,"body_markdown":"Using `Streams` you can simplify it yes\r\n\r\n    public long getNumberOfSubscription() {\r\n        return myClient.stream().filter(Client::getSubscription).count();\r\n    }\r\n\r\n    public void activateSubscription(String customerID) {\r\n        myClient.stream().filter(c -&gt; c.getcID().equals(customerID))\r\n                .findFirst()\r\n                .ifPresent(client -&gt; client.setSubscription(true));\r\n    }\r\n\r\n    public String getClientName(String customerID) {\r\n        return myClient.stream().filter(c -&gt; c.getcID().equals(customerID))\r\n                .map(Client::getFullName).findFirst().orElse(null);\r\n    }","link":"https://stackoverflow.com/questions/77567241/java-how-to-search-for-a-value-in-the-list-of-objects/77567266#77567266","title":"Java - How to search for a value in the list of objects","body":"<p>Using <code>Streams</code> you can simplify it yes</p>\n<pre><code>public long getNumberOfSubscription() {\n    return myClient.stream().filter(Client::getSubscription).count();\n}\n\npublic void activateSubscription(String customerID) {\n    myClient.stream().filter(c -&gt; c.getcID().equals(customerID))\n            .findFirst()\n            .ifPresent(client -&gt; client.setSubscription(true));\n}\n\npublic String getClientName(String customerID) {\n    return myClient.stream().filter(c -&gt; c.getcID().equals(customerID))\n            .map(Client::getFullName).findFirst().orElse(null);\n}\n</code></pre>\n"}],"comment_count":7,"is_answered":false,"view_count":46,"answer_count":1,"score":0,"last_activity_date":1701208548,"creation_date":1701206923,"last_edit_date":1701207359,"question_id":77567241,"body_markdown":"For example i have list, class and methods:\r\n```\r\nList&lt;Client&gt; myClient = new ArrayList&lt;&gt;();\r\n```\r\n\r\n```\r\npublic class Client {\r\n    String firstName;\r\n    String lastName;\r\n    String cID;\r\n    boolean subscription = false;\r\n}\r\n```\r\n\r\n```\r\npublic String activateSubscription(String customerID){\r\n    for( Client myCustomer: myClient ){\r\n        if( myCustomer.cID == customerID ){\r\n            myCustomer.setSubscription();\r\n            break;\r\n        }\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\npublic void getClientName(String customerID){\r\n    String nameCustomer = null;\r\n\r\n    for( Client myCustomer: myClient ){\r\n        if( myClient.clientID == customerID ){\r\n            nameCustomer = myCustomer.getFullName();\r\n            break;\r\n        }\r\n    }\r\n\r\n    return nameCustomer;\r\n}\r\n\r\npublic int getNumberOfSubsrtipion(){\r\n    int count = 0;\r\n\r\n    for( Client myCustomer: myClient ){\r\n        if( myCustomer.getSubscription ){\r\n            count += 1;\r\n        }\r\n    }\r\n\r\n    return count;\r\n}\r\n```\r\n\r\nI&#39;m new to Java, and I wondering if it&#39;s possible to simplify this code?\r\n\r\nMaybe there&#39;s a simpler way to count subscribed customers and searching for customers by ID?","link":"https://stackoverflow.com/questions/77567241/java-how-to-search-for-a-value-in-the-list-of-objects","title":"Java - How to search for a value in the list of objects","body":"<p>For example i have list, class and methods:</p>\n<pre><code>List&lt;Client&gt; myClient = new ArrayList&lt;&gt;();\n</code></pre>\n<pre><code>public class Client {\n    String firstName;\n    String lastName;\n    String cID;\n    boolean subscription = false;\n}\n</code></pre>\n<pre><code>public String activateSubscription(String customerID){\n    for( Client myCustomer: myClient ){\n        if( myCustomer.cID == customerID ){\n            myCustomer.setSubscription();\n            break;\n        }\n    }\n\n    return null;\n}\n\npublic void getClientName(String customerID){\n    String nameCustomer = null;\n\n    for( Client myCustomer: myClient ){\n        if( myClient.clientID == customerID ){\n            nameCustomer = myCustomer.getFullName();\n            break;\n        }\n    }\n\n    return nameCustomer;\n}\n\npublic int getNumberOfSubsrtipion(){\n    int count = 0;\n\n    for( Client myCustomer: myClient ){\n        if( myCustomer.getSubscription ){\n            count += 1;\n        }\n    }\n\n    return count;\n}\n</code></pre>\n<p>I'm new to Java, and I wondering if it's possible to simplify this code?</p>\n<p>Maybe there's a simpler way to count subscribed customers and searching for customers by ID?</p>\n"},{"tags":["java"],"comments":[{"score":4,"post_type":"question","creation_date":1701208183,"post_id":77567345,"comment_id":136746447,"body_markdown":"There&#39;s no reason to make this change. It&#39;s mostly stylistic.","link":"https://stackoverflow.com/questions/77567345/a-foreach-vs-for-type-a-collection#comment136746447_77567345","body":"There&#39;s no reason to make this change. It&#39;s mostly stylistic."},{"score":0,"post_type":"question","creation_date":1701208230,"post_id":77567345,"comment_id":136746460,"body_markdown":"In this case, it has not much value to change one to the other. `forEach` utilizes the stream api which is associated with functional style programming, the other is a classic enhanced loop. Both are equally readable.","link":"https://stackoverflow.com/questions/77567345/a-foreach-vs-for-type-a-collection#comment136746460_77567345","body":"In this case, it has not much value to change one to the other. <code>forEach</code> utilizes the stream api which is associated with functional style programming, the other is a classic enhanced loop. Both are equally readable."},{"score":0,"post_type":"question","creation_date":1701208256,"post_id":77567345,"comment_id":136746463,"body_markdown":"Seems pretty verbose for an otherwise identical approach? Performance changes? @Unmitigated","link":"https://stackoverflow.com/questions/77567345/a-foreach-vs-for-type-a-collection#comment136746463_77567345","body":"Seems pretty verbose for an otherwise identical approach? Performance changes? @Unmitigated"},{"score":0,"post_type":"question","creation_date":1701208292,"post_id":77567345,"comment_id":136746467,"body_markdown":"_&quot;... Is there a standard for Java ...&quot;_, no.  I imagine it&#39;s just a recommendation.","link":"https://stackoverflow.com/questions/77567345/a-foreach-vs-for-type-a-collection#comment136746467_77567345","body":"<i>&quot;... Is there a standard for Java ...&quot;</i>, no.  I imagine it&#39;s just a recommendation."},{"score":1,"post_type":"question","creation_date":1701208601,"post_id":77567345,"comment_id":136746519,"body_markdown":"@f1sh The `Iterable#forEach(Consumer)` method does not utilize streams. Or, more accurately, the [default implementation](https://github.com/openjdk/jdk/blob/ce4e6e2bd704a90abc8e8e1586325769076c208a/src/java.base/share/classes/java/lang/Iterable.java#L72) does not use streams (nor am I aware of any implementation that does, and I find it unlikely any implementation would).","link":"https://stackoverflow.com/questions/77567345/a-foreach-vs-for-type-a-collection#comment136746519_77567345","body":"@f1sh The <code>Iterable#forEach(Consumer)</code> method does not utilize streams. Or, more accurately, the <a href=\"https://github.com/openjdk/jdk/blob/ce4e6e2bd704a90abc8e8e1586325769076c208a/src/java.base/share/classes/java/lang/Iterable.java#L72\" rel=\"nofollow noreferrer\">default implementation</a> does not use streams (nor am I aware of any implementation that does, and I find it unlikely any implementation would)."},{"score":0,"post_type":"question","creation_date":1701208909,"post_id":77567345,"comment_id":136746572,"body_markdown":"@Slaw damn, i confused it with `stream().forEach()` and you are correct.","link":"https://stackoverflow.com/questions/77567345/a-foreach-vs-for-type-a-collection#comment136746572_77567345","body":"@Slaw damn, i confused it with <code>stream().forEach()</code> and you are correct."},{"score":0,"post_type":"question","creation_date":1701209340,"post_id":77567345,"comment_id":136746644,"body_markdown":"Nothing is wrong with either one but one may be more readable: one statement vs a loop.  To print each numbers in a list of integer: ``` list.forEach(System.out::println);```","link":"https://stackoverflow.com/questions/77567345/a-foreach-vs-for-type-a-collection#comment136746644_77567345","body":"Nothing is wrong with either one but one may be more readable: one statement vs a loop.  To print each numbers in a list of integer: ``` list.forEach(System.out::println);```"}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701208487,"creation_date":1701208487,"answer_id":77567383,"question_id":77567345,"body_markdown":"This is mostly a matter of style.\r\n\r\nFor example, `Iterable#forEach` is implemented in OpenJDK by just using an enhanced for loop:\r\n\r\n```java\r\ndefault void forEach(Consumer&lt;? super T&gt; action) {\r\n\tObjects.requireNonNull(action);\r\n\tfor (T t : this) {\r\n\t\taction.accept(t);\r\n\t}\r\n}\r\n```\r\n\r\nThe main difference between using an enhanced for loop and `forEach` is that you can only access effectively final local variables in the `Consumer` passed to `forEach`. If you want to assign to local variables, then an enhanced for loop is clearly the better choice.","link":"https://stackoverflow.com/questions/77567345/a-foreach-vs-for-type-a-collection/77567383#77567383","title":"a.ForEach vs. for (Type a: collection)","body":"<p>This is mostly a matter of style.</p>\n<p>For example, <code>Iterable#forEach</code> is implemented in OpenJDK by just using an enhanced for loop:</p>\n<pre class=\"lang-java prettyprint-override\"><code>default void forEach(Consumer&lt;? super T&gt; action) {\n    Objects.requireNonNull(action);\n    for (T t : this) {\n        action.accept(t);\n    }\n}\n</code></pre>\n<p>The main difference between using an enhanced for loop and <code>forEach</code> is that you can only access effectively final local variables in the <code>Consumer</code> passed to <code>forEach</code>. If you want to assign to local variables, then an enhanced for loop is clearly the better choice.</p>\n"}],"comment_count":7,"is_answered":true,"view_count":51,"answer_count":1,"score":1,"last_activity_date":1701208487,"creation_date":1701208091,"question_id":77567345,"body_markdown":"When playing with iterations, netbeans recommended using a functional approach to iteration. \r\n\r\nThe original method was: \r\n```java\r\nfor (Type obj : collection) {\r\n    foo();\r\n}\r\n```\r\n\r\nThough, netbeans highlighted this implementation approach and recommended:\r\n```java\r\ncollection.forEach((obj) -&gt; {\r\n    foo();\r\n});\r\n```\r\n\r\nWhy would this be preferable? Is there a standard for Java (similar to PEP8 for Python) that recommends the functional approach over the prior implementation strategy? \r\n\r\nWhat, if anything, is changing under the hood between these two approaches? \r\n\r\nThis seems to be a difference of syntactic sugar?","link":"https://stackoverflow.com/questions/77567345/a-foreach-vs-for-type-a-collection","title":"a.ForEach vs. for (Type a: collection)","body":"<p>When playing with iterations, netbeans recommended using a functional approach to iteration.</p>\n<p>The original method was:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (Type obj : collection) {\n    foo();\n}\n</code></pre>\n<p>Though, netbeans highlighted this implementation approach and recommended:</p>\n<pre class=\"lang-java prettyprint-override\"><code>collection.forEach((obj) -&gt; {\n    foo();\n});\n</code></pre>\n<p>Why would this be preferable? Is there a standard for Java (similar to PEP8 for Python) that recommends the functional approach over the prior implementation strategy?</p>\n<p>What, if anything, is changing under the hood between these two approaches?</p>\n<p>This seems to be a difference of syntactic sugar?</p>\n"},{"tags":["java"],"comment_count":0,"is_answered":false,"view_count":14,"answer_count":0,"score":0,"last_activity_date":1701208472,"creation_date":1701208472,"question_id":77567380,"body_markdown":"I&#39;ve just fixed my jar association so that my OpenJDK platform binary I could select in the open file with menu actually runs the jar program I&#39;ve been trying to run. Actually only one of the multiple OpenJDK platform binaries makes the programm run, which makes me think they are all for different java versions but than I can&#39;t see the java version they run. I&#39;m new to this so if anyone can explain me why there is multiple OpenJDK platform binaries or why where are that would be much appreciated. [![Multiple OpenJDK platform binaries in windows file explorer open width function](https://i.stack.imgur.com/LIS9M.png)](https://i.stack.imgur.com/LIS9M.png) There is also a 3rd one but it is a lot further down\r\n\r\nI searched for answers to this problem for quite a bit and found only a screenshot of someone else on I think macOS who had a java version next to the OpenJDK system libraries, but I cannot find the post on which the screenshot was anymore.","link":"https://stackoverflow.com/questions/77567380/multiple-openjdk-platform-binary-in-open-with-menu-on-windows","title":"Multiple OpenJDK platform binary in Open With menu on windows","body":"<p>I've just fixed my jar association so that my OpenJDK platform binary I could select in the open file with menu actually runs the jar program I've been trying to run. Actually only one of the multiple OpenJDK platform binaries makes the programm run, which makes me think they are all for different java versions but than I can't see the java version they run. I'm new to this so if anyone can explain me why there is multiple OpenJDK platform binaries or why where are that would be much appreciated. <a href=\"https://i.stack.imgur.com/LIS9M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LIS9M.png\" alt=\"Multiple OpenJDK platform binaries in windows file explorer open width function\" /></a> There is also a 3rd one but it is a lot further down</p>\n<p>I searched for answers to this problem for quite a bit and found only a screenshot of someone else on I think macOS who had a java version next to the OpenJDK system libraries, but I cannot find the post on which the screenshot was anymore.</p>\n"},{"tags":["java","file-handling"],"comments":[{"score":0,"post_type":"question","creation_date":1701162958,"post_id":77562500,"comment_id":136738153,"body_markdown":"Resources are not files. Use `getResource()` or `getResourceAsURL()`. Neither [tag:netbeans], [tag:windows], nor even (God help us) [tag:computer-science] has anything to do with it/","link":"https://stackoverflow.com/questions/77562500/how-do-i-open-a-file-inside-a-package-in-the-source-packages-of-netbeans#comment136738153_77562500","body":"Resources are not files. Use <code>getResource()</code> or <code>getResourceAsURL()</code>. Neither <a href=\"https://stackoverflow.com/questions/tagged/netbeans\">netbeans</a>, <a href=\"https://stackoverflow.com/questions/tagged/windows\">windows</a>, nor even (God help us) <a href=\"https://stackoverflow.com/questions/tagged/computer-science\">computer-science</a> has anything to do with it/"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701208466,"last_edit_date":1701208466,"creation_date":1701163058,"answer_id":77562591,"question_id":77562500,"body_markdown":"When working with resources in a Java project, the file paths are handled differently compared to typical file paths.\r\n\r\nIn Java, when you&#39;re accessing a file within your JAR (or within the resources folder), you can&#39;t directly treat it as a File object as you would with regular file paths on your file system. Instead, you need to use the `getResource()` method to access resources from within your JAR file:\r\n\r\n    public static void main(String[] args) {\r\n        String path = &quot;/bloodreports/resources/bloodreportformat.docx&quot;;\r\n        \r\n        // Get the URL of the resource\r\n        URL url = WordDocumentHandler.class.getResource(path);\r\n        \r\n        if (url != null) {\r\n            System.out.println(&quot;Exists&quot;);\r\n            // Now you can use this URL to access the resource\r\n            // For example, if you want to create a File object, you can do:\r\n            File file = new File(url.getFile());\r\n            // Do whatever operations you need with this file\r\n        } else {\r\n            System.out.println(&quot;Does not exist&quot;);\r\n        }\r\n    }","link":"https://stackoverflow.com/questions/77562500/how-do-i-open-a-file-inside-a-package-in-the-source-packages-of-netbeans/77562591#77562591","title":"How do I open a file inside a package in the Source Packages of Netbeans?","body":"<p>When working with resources in a Java project, the file paths are handled differently compared to typical file paths.</p>\n<p>In Java, when you're accessing a file within your JAR (or within the resources folder), you can't directly treat it as a File object as you would with regular file paths on your file system. Instead, you need to use the <code>getResource()</code> method to access resources from within your JAR file:</p>\n<pre><code>public static void main(String[] args) {\n    String path = &quot;/bloodreports/resources/bloodreportformat.docx&quot;;\n    \n    // Get the URL of the resource\n    URL url = WordDocumentHandler.class.getResource(path);\n    \n    if (url != null) {\n        System.out.println(&quot;Exists&quot;);\n        // Now you can use this URL to access the resource\n        // For example, if you want to create a File object, you can do:\n        File file = new File(url.getFile());\n        // Do whatever operations you need with this file\n    } else {\n        System.out.println(&quot;Does not exist&quot;);\n    }\n}\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1701163469,"creation_date":1701163469,"answer_id":77562644,"question_id":77562500,"body_markdown":"You are trying to access a resource in Netbeans. As @user207421 said, you can&#39;t access resources the way you&#39;ve done, because resources aren&#39;t files. You need to use the `getResource()` function to solve your problem. Modified code:\r\n```\r\npublic class WordDocumentHandler {\r\n    \r\n    public static void main(String[]args){\r\n        String resource_path = &quot;/resources/bloodreportformat.docx&quot;;\r\n        \r\n        URL resource_url = WordDocumentHandler.class.getResource(resource_path); //Use this function\r\n\r\n        //Check if the file exists\r\n        if (resource_url != null) {\r\n            System.out.println(&quot;Exists&quot;);\r\n            //Other code\r\n        }\r\n    }    \r\n    \r\n}\r\n```\r\n\r\nThe `getResource()` function returns a URL of the resource you&#39;re trying to access. Once you have the URL, you can access the resource.","link":"https://stackoverflow.com/questions/77562500/how-do-i-open-a-file-inside-a-package-in-the-source-packages-of-netbeans/77562644#77562644","title":"How do I open a file inside a package in the Source Packages of Netbeans?","body":"<p>You are trying to access a resource in Netbeans. As @user207421 said, you can't access resources the way you've done, because resources aren't files. You need to use the <code>getResource()</code> function to solve your problem. Modified code:</p>\n<pre><code>public class WordDocumentHandler {\n    \n    public static void main(String[]args){\n        String resource_path = &quot;/resources/bloodreportformat.docx&quot;;\n        \n        URL resource_url = WordDocumentHandler.class.getResource(resource_path); //Use this function\n\n        //Check if the file exists\n        if (resource_url != null) {\n            System.out.println(&quot;Exists&quot;);\n            //Other code\n        }\n    }    \n    \n}\n</code></pre>\n<p>The <code>getResource()</code> function returns a URL of the resource you're trying to access. Once you have the URL, you can access the resource.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":34,"answer_count":2,"score":-1,"last_activity_date":1701208466,"creation_date":1701162248,"last_edit_date":1701162863,"question_id":77562500,"body_markdown":"I&#39;m relatively new to Java and Netbeans. What I want to do is to topen this Word document file that&#39;s inside the package &quot;bloodreports.resources&quot;.\r\n[Location of the document](https://i.stack.imgur.com/GrM0t.png)\r\n\r\nThe reason I&#39;m trying to open it from there specifically is because I think once the runnable JAR file is built, it won&#39;t matter where and on which machine I run the JAR file; The resource will always be there. \r\n\r\nIs there a better way to do it? Am I wrong? \r\n\r\nI&#39;ve been trying to get this to work for past hour... any help is greatly appreciated!\r\n\r\n\r\n\r\nI tried something along the lines of the following code:\r\n\r\n```\r\npublic class WordDocumentHandler {\r\n    \r\n    public static void main(String[]args){\r\n        String path = &quot;/resources/bloodreportformat.docx&quot;;\r\n        File file = new File(path);\r\n        if(file.exists()){\r\n            System.out.println(&quot;Exists&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe word &quot;Exists&quot; never gets printed. What am I doing wrong? ","link":"https://stackoverflow.com/questions/77562500/how-do-i-open-a-file-inside-a-package-in-the-source-packages-of-netbeans","title":"How do I open a file inside a package in the Source Packages of Netbeans?","body":"<p>I'm relatively new to Java and Netbeans. What I want to do is to topen this Word document file that's inside the package &quot;bloodreports.resources&quot;.\n<a href=\"https://i.stack.imgur.com/GrM0t.png\" rel=\"nofollow noreferrer\">Location of the document</a></p>\n<p>The reason I'm trying to open it from there specifically is because I think once the runnable JAR file is built, it won't matter where and on which machine I run the JAR file; The resource will always be there.</p>\n<p>Is there a better way to do it? Am I wrong?</p>\n<p>I've been trying to get this to work for past hour... any help is greatly appreciated!</p>\n<p>I tried something along the lines of the following code:</p>\n<pre><code>public class WordDocumentHandler {\n    \n    public static void main(String[]args){\n        String path = &quot;/resources/bloodreportformat.docx&quot;;\n        File file = new File(path);\n        if(file.exists()){\n            System.out.println(&quot;Exists&quot;);\n        }\n    }\n}\n</code></pre>\n<p>The word &quot;Exists&quot; never gets printed. What am I doing wrong?</p>\n"},{"tags":["java","javafx","components","runtime","executable-jar"],"comments":[{"score":5,"post_type":"question","creation_date":1701174707,"post_id":77563617,"comment_id":136740240,"body_markdown":"Executable jar files are generally not supported in JavaFX (though there are unsupported workarounds to make it work). You should consider building a native package containing a JVM and the required modules using tools such as `jpackage` and/or `jlink`. See the &quot;Packaging&quot; section of the [tag wiki](https://stackoverflow.com/tags/javafx/info) for details.","link":"https://stackoverflow.com/questions/77563617/error-javafx-runtime-components-are-missing-and-are-required-to-run-this-appli#comment136740240_77563617","body":"Executable jar files are generally not supported in JavaFX (though there are unsupported workarounds to make it work). You should consider building a native package containing a JVM and the required modules using tools such as <code>jpackage</code> and/or <code>jlink</code>. See the &quot;Packaging&quot; section of the <a href=\"https://stackoverflow.com/tags/javafx/info\">tag wiki</a> for details."},{"score":1,"post_type":"question","creation_date":1701182975,"post_id":77563617,"comment_id":136741909,"body_markdown":"What I do is create a `Batch` file that calls the command to run the Jar. I double-click on the `.bat` file, and my apps run. It looks like you are creating a fat jar, so this should work.","link":"https://stackoverflow.com/questions/77563617/error-javafx-runtime-components-are-missing-and-are-required-to-run-this-appli#comment136741909_77563617","body":"What I do is create a <code>Batch</code> file that calls the command to run the Jar. I double-click on the <code>.bat</code> file, and my apps run. It looks like you are creating a fat jar, so this should work."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701199888,"creation_date":1701199888,"answer_id":77566675,"question_id":77563617,"body_markdown":"You need to create a fat JAR. \r\n\r\nTake a look at this example projects. They both include a Task/Goal for creating a fat JAR. You can just double click on it and the application starts. \r\n\r\nYou can either download one of this projects and edit it, or you can look how it is done.\r\n\r\n**Example working JavaFX application with gradle**\r\nhttps://github.com/davidweber411/JavaFxAppGradleNonModular\r\n\r\n**Example working JavaFX application with maven**\r\nhttps://github.com/davidweber411/JavaFxAppMavenNonModular\r\n\r\n**Note: This are non modular applications.**","link":"https://stackoverflow.com/questions/77563617/error-javafx-runtime-components-are-missing-and-are-required-to-run-this-appli/77566675#77566675","title":"Error: JavaFX runtime components are missing, and are required to run this application in generated jar using eclipse","body":"<p>You need to create a fat JAR.</p>\n<p>Take a look at this example projects. They both include a Task/Goal for creating a fat JAR. You can just double click on it and the application starts.</p>\n<p>You can either download one of this projects and edit it, or you can look how it is done.</p>\n<p><strong>Example working JavaFX application with gradle</strong>\n<a href=\"https://github.com/davidweber411/JavaFxAppGradleNonModular\" rel=\"nofollow noreferrer\">https://github.com/davidweber411/JavaFxAppGradleNonModular</a></p>\n<p><strong>Example working JavaFX application with maven</strong>\n<a href=\"https://github.com/davidweber411/JavaFxAppMavenNonModular\" rel=\"nofollow noreferrer\">https://github.com/davidweber411/JavaFxAppMavenNonModular</a></p>\n<p><strong>Note: This are non modular applications.</strong></p>\n"}],"comment_count":2,"is_answered":true,"view_count":82,"answer_count":1,"score":0,"last_activity_date":1701208131,"creation_date":1701172082,"last_edit_date":1701208131,"question_id":77563617,"body_markdown":"I am getting the above error while running the JavaFX jar file on the command prompt or by double-clicking.\r\nI want the jar file to be run like an application by double-clicking on it.\r\nI have tried creating another class and calling the main function from that which inherits the JavaFX Application class.\r\nPlease somebody help in resolving this error.\r\n\r\n[enter image description here](https://i.stack.imgur.com/qxJSu.png)\r\n\r\nPlease find this image\r\n\r\nlaunch.class code:\r\n\r\n    package com.application;\r\n    \r\n    public class launch {\r\n    \r\n    public static void main(String[] args) {\r\n    \t// TODO Auto-generated method stub\r\n    \tMain.main(args);\r\n    }\r\n    \r\n    }\r\n    \r\nMain.class code:\r\n    \r\n    package com.application;\r\n    \r\n    import java.io.File;\r\n    \r\n     import javafx.application.Application;\r\n    \r\n    import javafx.application.Platform;\r\n    \r\n    import javafx.event.EventHandler;\r\n    \r\n    import       javafx.fxml.FXMLLoader;\r\n    \r\n     import       javafx.stage.Stage;\r\n    \r\n    import               javafx.stage.WindowEvent;\r\n    \r\n     import              javafx.scene.Parent;\r\n    \r\n     import javafx.scene.Scene;\r\n    \r\n    public class Main extends Application {\r\n    \r\n    @Override\r\n    \r\n    public void start(Stage primaryStage) {\r\n    \r\n    \ttry {\r\n    \t\tFile del;\r\n    \t\ttry {\r\n    \t\t\tdel = new File(&quot;errorscanReport.txt&quot;);\r\n    \t\t\tdel.delete();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t}\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tdel = new File(&quot;errorss.txt&quot;);\r\n    \t\t\tdel.delete();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t}\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tdel = new File(&quot;error.txt&quot;);\r\n    \t\t\tdel.delete();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t}\r\n    \t\ttry {\r\n    \t\t\tFile f = new File(&quot;AutoMoveError.txt&quot;);\r\n    \t\t\tf.delete();\r\n    \t\t}catch (Exception em) {\r\n    \t\t\t// TODO: handle exception\r\n    \t\t}\r\n    \t\t\r\n    \t\tParent root = FXMLLoader.load(getClass().getResource(&quot;MainScene.fxml&quot;));\r\n    \t\tScene scene = new Scene(root);\r\n    \t\tprimaryStage.setHeight(500);\r\n    \t\tprimaryStage.setWidth(700);\r\n    \t\tprimaryStage.setTitle(&quot;HUMANOID&quot;);\r\n    \t\tprimaryStage.setScene(scene);\r\n    \t\tprimaryStage.show();\r\n    \t\t\r\n    \t\tprimaryStage.setOnCloseRequest(new EventHandler&lt;WindowEvent&gt;() {\r\n    \t\t\t\r\n    \t\t\t@Override\r\n    \t\t\tpublic void handle(WindowEvent arg0) {\r\n    \t\t\t\t// TODO Auto-generated method stub\r\n    \t\t\t\tMainSceneController.stop_flag = true;\r\n    \t\t\t\tPlatform.exit();\r\n    \t\t\t}\r\n    \t\t});\r\n    \t\t\r\n    \t} catch(Exception e) {\r\n    \t\tSystem.out.println(e.toString());\r\n    \t}\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n    \tlaunch(args);\r\n    }\r\n    \r\n    }","link":"https://stackoverflow.com/questions/77563617/error-javafx-runtime-components-are-missing-and-are-required-to-run-this-appli","title":"Error: JavaFX runtime components are missing, and are required to run this application in generated jar using eclipse","body":"<p>I am getting the above error while running the JavaFX jar file on the command prompt or by double-clicking.\nI want the jar file to be run like an application by double-clicking on it.\nI have tried creating another class and calling the main function from that which inherits the JavaFX Application class.\nPlease somebody help in resolving this error.</p>\n<p><a href=\"https://i.stack.imgur.com/qxJSu.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Please find this image</p>\n<p>launch.class code:</p>\n<pre><code>package com.application;\n\npublic class launch {\n\npublic static void main(String[] args) {\n    // TODO Auto-generated method stub\n    Main.main(args);\n}\n\n}\n</code></pre>\n<p>Main.class code:</p>\n<pre><code>package com.application;\n\nimport java.io.File;\n\n import javafx.application.Application;\n\nimport javafx.application.Platform;\n\nimport javafx.event.EventHandler;\n\nimport       javafx.fxml.FXMLLoader;\n\n import       javafx.stage.Stage;\n\nimport               javafx.stage.WindowEvent;\n\n import              javafx.scene.Parent;\n\n import javafx.scene.Scene;\n\npublic class Main extends Application {\n\n@Override\n\npublic void start(Stage primaryStage) {\n\n    try {\n        File del;\n        try {\n            del = new File(&quot;errorscanReport.txt&quot;);\n            del.delete();\n        } catch (Exception e) {\n            // TODO Auto-generated catch block\n        }\n        \n        try {\n            del = new File(&quot;errorss.txt&quot;);\n            del.delete();\n        } catch (Exception e) {\n            // TODO Auto-generated catch block\n        }\n        \n        try {\n            del = new File(&quot;error.txt&quot;);\n            del.delete();\n        } catch (Exception e) {\n            // TODO Auto-generated catch block\n        }\n        try {\n            File f = new File(&quot;AutoMoveError.txt&quot;);\n            f.delete();\n        }catch (Exception em) {\n            // TODO: handle exception\n        }\n        \n        Parent root = FXMLLoader.load(getClass().getResource(&quot;MainScene.fxml&quot;));\n        Scene scene = new Scene(root);\n        primaryStage.setHeight(500);\n        primaryStage.setWidth(700);\n        primaryStage.setTitle(&quot;HUMANOID&quot;);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n        \n        primaryStage.setOnCloseRequest(new EventHandler&lt;WindowEvent&gt;() {\n            \n            @Override\n            public void handle(WindowEvent arg0) {\n                // TODO Auto-generated method stub\n                MainSceneController.stop_flag = true;\n                Platform.exit();\n            }\n        });\n        \n    } catch(Exception e) {\n        System.out.println(e.toString());\n    }\n}\n\npublic static void main(String[] args) {\n    launch(args);\n}\n\n}\n</code></pre>\n"},{"tags":["java","spring","testing"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701209852,"post_id":77567306,"comment_id":136746733,"body_markdown":"but I have ~50 repository classes and add them all manually...","link":"https://stackoverflow.com/questions/77566915/springboottest-cant-fill-map-in-my-service/77567306#comment136746733_77567306","body":"but I have ~50 repository classes and add them all manually..."},{"score":0,"post_type":"answer","creation_date":1701284931,"post_id":77567306,"comment_id":136757993,"body_markdown":"no you have not, since the maps are empty. You can set a breakpoint there and it will show you that the lists are empty. Your ComponentScan is likely not working as you expect. In which packages are the tests? In which packages are the repos? Is ComponentScan even working on test classes? Can you create @TestConfiguration class which contains the ComponentScan annotation etc?","link":"https://stackoverflow.com/questions/77566915/springboottest-cant-fill-map-in-my-service/77567306#comment136757993_77567306","body":"no you have not, since the maps are empty. You can set a breakpoint there and it will show you that the lists are empty. Your ComponentScan is likely not working as you expect. In which packages are the tests? In which packages are the repos? Is ComponentScan even working on test classes? Can you create @TestConfiguration class which contains the ComponentScan annotation etc?"}],"comment_count":2,"score":0,"last_activity_date":1701208074,"last_edit_date":1701208074,"creation_date":1701207712,"answer_id":77567306,"question_id":77566915,"body_markdown":"    @SpringBootTest(classes = {RepoService.class})\r\n\r\nThis is specifying the configurations used for the test. That means RepoService is the *only* bean in this test context, so it makes sense that the maps are empty, because they are looking for other beans.\r\n\r\nIf you add beans which implement EnumRepo you will fill the map:\r\n\r\n    @SpringBootTest(classes = {RepoService.class, ENTER_HERE_REPO_NAME.class})\r\n\r\nThe reason why @DataJpaTest or @SpringBootTest() works, is because they load more beans into the spring context. ","link":"https://stackoverflow.com/questions/77566915/springboottest-cant-fill-map-in-my-service/77567306#77567306","title":"SpringBootTest cant fill Map in my Service","body":"<pre><code>@SpringBootTest(classes = {RepoService.class})\n</code></pre>\n<p>This is specifying the configurations used for the test. That means RepoService is the <em>only</em> bean in this test context, so it makes sense that the maps are empty, because they are looking for other beans.</p>\n<p>If you add beans which implement EnumRepo you will fill the map:</p>\n<pre><code>@SpringBootTest(classes = {RepoService.class, ENTER_HERE_REPO_NAME.class})\n</code></pre>\n<p>The reason why @DataJpaTest or @SpringBootTest() works, is because they load more beans into the spring context.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":38,"answer_count":1,"score":0,"last_activity_date":1701208074,"creation_date":1701202461,"question_id":77566915,"body_markdown":"i have this service \r\n```\r\n@Service\r\n@Slf4j\r\npublic class RepoService{\r\n    private final Map&lt;EnumRepoType, EnumRepo&lt;? extends AbstractType&gt;&gt; firstMap;\r\n    private final Map&lt;RepoType, Repo&lt;? extends AbstractType&gt;&gt; secondMap;\r\n\r\n    public DictionaryService(List&lt;EnumRepo&lt;? extends AbstractType&gt;&gt; enumTypeRepositories,\r\n                             List&lt;Repo&lt;? extends AbstractType&gt;&gt; typeRepositories) {\r\n        this.firstMap= enumTypeRepositories.stream()\r\n                .collect(Collectors.toMap(EnumRepo::getType, i -&gt; i));\r\n        this.secondMap= typeRepositories.stream()\r\n                .collect(Collectors.toMap(Repo::getType, i -&gt; i));\r\n    }\r\n}\r\n```\r\nEnumRepoType and RepoType is enum.\r\nWhen my app is starting, this map fill automatically with springbooot. But! when i write test for my app,  this map cant fill automatically!\r\n\r\nI write stupid simple test for this question -&gt; \r\n\r\n```\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest(classes = {RepoService.class})\r\n@ComponentScan(basePackages = {\r\n        &quot;package.with.repo.class&quot;\r\n})\r\npublic class RepoServiceTest {\r\n\r\n    @Autowired\r\n    RepoService repoService;\r\n\r\n    @Test\r\n    public void test() {\r\n        System.out.println(&quot;whyyy map in repoService empty???&quot;);\r\n    }\r\n}\r\n```\r\n\r\nI do not understand(((\r\n\r\n\r\nwith @DataJpaTest map is filled in correctly! with an empty @SpringBootTest() too, but the app starts too long(the whole context starts), i dont need it.","link":"https://stackoverflow.com/questions/77566915/springboottest-cant-fill-map-in-my-service","title":"SpringBootTest cant fill Map in my Service","body":"<p>i have this service</p>\n<pre><code>@Service\n@Slf4j\npublic class RepoService{\n    private final Map&lt;EnumRepoType, EnumRepo&lt;? extends AbstractType&gt;&gt; firstMap;\n    private final Map&lt;RepoType, Repo&lt;? extends AbstractType&gt;&gt; secondMap;\n\n    public DictionaryService(List&lt;EnumRepo&lt;? extends AbstractType&gt;&gt; enumTypeRepositories,\n                             List&lt;Repo&lt;? extends AbstractType&gt;&gt; typeRepositories) {\n        this.firstMap= enumTypeRepositories.stream()\n                .collect(Collectors.toMap(EnumRepo::getType, i -&gt; i));\n        this.secondMap= typeRepositories.stream()\n                .collect(Collectors.toMap(Repo::getType, i -&gt; i));\n    }\n}\n</code></pre>\n<p>EnumRepoType and RepoType is enum.\nWhen my app is starting, this map fill automatically with springbooot. But! when i write test for my app,  this map cant fill automatically!</p>\n<p>I write stupid simple test for this question -&gt;</p>\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(classes = {RepoService.class})\n@ComponentScan(basePackages = {\n        &quot;package.with.repo.class&quot;\n})\npublic class RepoServiceTest {\n\n    @Autowired\n    RepoService repoService;\n\n    @Test\n    public void test() {\n        System.out.println(&quot;whyyy map in repoService empty???&quot;);\n    }\n}\n</code></pre>\n<p>I do not understand(((</p>\n<p>with @DataJpaTest map is filled in correctly! with an empty @SpringBootTest() too, but the app starts too long(the whole context starts), i dont need it.</p>\n"},{"tags":["java","oracle","multithreading","jdbc"],"comments":[{"score":0,"post_type":"question","creation_date":1701198693,"post_id":77566535,"comment_id":136744938,"body_markdown":"I was extracting data from one table only which has 173 million rows","link":"https://stackoverflow.com/questions/77566535/extracting-data-from-very-large-oracle-database-which-has-blob-column-in-everyro#comment136744938_77566535","body":"I was extracting data from one table only which has 173 million rows"},{"score":1,"post_type":"question","creation_date":1701200649,"post_id":77566535,"comment_id":136745272,"body_markdown":"Why do you have to modify the query for every row? How are you measuring wait time? And how have you determined that the BLOB column is the problem? Including code for a [mre] might be helpful, but you also need to look at DB and maybe network settings etc.","link":"https://stackoverflow.com/questions/77566535/extracting-data-from-very-large-oracle-database-which-has-blob-column-in-everyro#comment136745272_77566535","body":"Why do you have to modify the query for every row? How are you measuring wait time? And how have you determined that the BLOB column is the problem? Including code for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> might be helpful, but you also need to look at DB and maybe network settings etc."},{"score":1,"post_type":"question","creation_date":1701201889,"post_id":77566535,"comment_id":136745487,"body_markdown":"At a minimum you will need to provide the SQL you are using so we see how you are distributing the data, and include an execution plan.","link":"https://stackoverflow.com/questions/77566535/extracting-data-from-very-large-oracle-database-which-has-blob-column-in-everyro#comment136745487_77566535","body":"At a minimum you will need to provide the SQL you are using so we see how you are distributing the data, and include an execution plan."},{"score":0,"post_type":"question","creation_date":1701421844,"post_id":77566535,"comment_id":136776089,"body_markdown":"So you have a file with &quot;something&quot;, and you want to extract data based on this file? Does the file contains IDs and such? I think 3 million queries sounds insane. Why not import the file into the database and use something called a JOIN to umm... join your imported data with the existing one and fetch whatever you need. You can still batch it up if memory etc is a problem but you definitely don&#39;t need 3 mils queries to fetch it all.","link":"https://stackoverflow.com/questions/77566535/extracting-data-from-very-large-oracle-database-which-has-blob-column-in-everyro#comment136776089_77566535","body":"So you have a file with &quot;something&quot;, and you want to extract data based on this file? Does the file contains IDs and such? I think 3 million queries sounds insane. Why not import the file into the database and use something called a JOIN to umm... join your imported data with the existing one and fetch whatever you need. You can still batch it up if memory etc is a problem but you definitely don&#39;t need 3 mils queries to fetch it all."}],"comment_count":4,"is_answered":false,"view_count":57,"answer_count":0,"score":0,"last_activity_date":1701207992,"creation_date":1701198423,"last_edit_date":1701207992,"question_id":77566535,"body_markdown":"I am trying extract data from Oracle database which has 173 million rows and 40 different columns and each row has one blob column which has size of 30-50kb.\r\n\r\nI am trying to extract data this data base using Java, the input file have 3 million rows, for every row we need modify the SQl statement according to that row and hit the database, we are going to make 3million different queries.\r\n\r\nI am using executorServices for multiple threading in Java and I have tried Apache Commons DBCP2 and also c3p0 for connection pooling in java.\r\n\r\nThe normal wait to execute one query is 3 seconds even though I had indexes for columns that I am using in the database.\r\n\r\nIf i try to increase the threads in database the wait time is increasing.\r\n\r\n\r\n|  Threads | wait time |\r\n| -------- | -------- |\r\n| 1   |  2  |\r\n| 10  |  3  |\r\n| 50  | 5.5 |\r\n| 100 |  10 |\r\n\r\nI am able to see the improvement in the speed but it very low.\r\n\r\nPlease some one help me with this problem.\r\n\r\n\r\n\r\n\r\n\r\n\r\nI am expecting better download speed and aby suggestions to improve the speed of fetching results.","link":"https://stackoverflow.com/questions/77566535/extracting-data-from-very-large-oracle-database-which-has-blob-column-in-everyro","title":"Extracting data from very large Oracle database which has blob column in everyrow","body":"<p>I am trying extract data from Oracle database which has 173 million rows and 40 different columns and each row has one blob column which has size of 30-50kb.</p>\n<p>I am trying to extract data this data base using Java, the input file have 3 million rows, for every row we need modify the SQl statement according to that row and hit the database, we are going to make 3million different queries.</p>\n<p>I am using executorServices for multiple threading in Java and I have tried Apache Commons DBCP2 and also c3p0 for connection pooling in java.</p>\n<p>The normal wait to execute one query is 3 seconds even though I had indexes for columns that I am using in the database.</p>\n<p>If i try to increase the threads in database the wait time is increasing.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Threads</th>\n<th>wait time</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>2</td>\n</tr>\n<tr>\n<td>10</td>\n<td>3</td>\n</tr>\n<tr>\n<td>50</td>\n<td>5.5</td>\n</tr>\n<tr>\n<td>100</td>\n<td>10</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I am able to see the improvement in the speed but it very low.</p>\n<p>Please some one help me with this problem.</p>\n<p>I am expecting better download speed and aby suggestions to improve the speed of fetching results.</p>\n"},{"tags":["java","android","google-maps","latitude-longitude","getlocation"],"comments":[{"score":0,"post_type":"question","creation_date":1701824044,"post_id":77567242,"comment_id":136822567,"body_markdown":"Would this related question help? https://stackoverflow.com/a/37183439/18422887","link":"https://stackoverflow.com/questions/77567242/get-latitude-and-longitude-from-google-maps-shared-location-in-my-own-android-a#comment136822567_77567242","body":"Would this related question help? <a href=\"https://stackoverflow.com/a/37183439/18422887\">stackoverflow.com/a/37183439/18422887</a>"},{"score":0,"post_type":"question","creation_date":1701843814,"post_id":77567242,"comment_id":136824003,"body_markdown":"@Yrll I&#39;m not implementing Google Maps SDK for Android, I took the shared link directly from Google Maps app installed in the device","link":"https://stackoverflow.com/questions/77567242/get-latitude-and-longitude-from-google-maps-shared-location-in-my-own-android-a#comment136824003_77567242","body":"@Yrll I&#39;m not implementing Google Maps SDK for Android, I took the shared link directly from Google Maps app installed in the device"},{"score":0,"post_type":"question","creation_date":1701913569,"post_id":77567242,"comment_id":136835141,"body_markdown":"You might want to check Google Maps Intents for Android. https://developers.google.com/maps/documentation/urls/android-intents Also what are you passing to the Geocoder? Is it just a URL? How about just using Maps APIs?","link":"https://stackoverflow.com/questions/77567242/get-latitude-and-longitude-from-google-maps-shared-location-in-my-own-android-a#comment136835141_77567242","body":"You might want to check Google Maps Intents for Android. <a href=\"https://developers.google.com/maps/documentation/urls/android-intents\" rel=\"nofollow noreferrer\">developers.google.com/maps/documentation/urls/android-intent&zwnj;&#8203;s</a> Also what are you passing to the Geocoder? Is it just a URL? How about just using Maps APIs?"}],"comment_count":3,"is_answered":false,"view_count":47,"answer_count":0,"score":0,"last_activity_date":1701207517,"creation_date":1701206934,"question_id":77567242,"body_markdown":"I&#39;m trying to share a location from Google Maps to my own Android, I&#39;m doing it with an Intent in my app and I successfully get the Intent in my app, but I&#39;m getting something like this:\r\n\r\nhttps://maps.app.goo.gl/SUeYVuEWd5u9Xn5B8\r\n\r\nSo, the problem is that I can&#39;t get latitude and longitude from this URL.\r\n\r\nIn my AndroidManifest I have and intent filter in the activity where I want to get the location\r\n\r\n```\r\n&lt;activity\r\n            android:name=&quot;.activities.MainActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:screenOrientation=&quot;portrait&quot;\r\n            android:windowSoftInputMode=&quot;adjustResize&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.SEND&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n                &lt;data android:mimeType=&quot;text/plain&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n&lt;/activity&gt;\r\n```\r\n\r\nThen, in my activity I receive the intent in this way\r\n\r\n```\r\nIntent intent = getIntent();\r\n        String action = intent.getAction();\r\n        String type = intent.getType();\r\n\r\n        if(Intent.ACTION_SEND.equals(action) &amp;&amp; type != null) {\r\n            if(&quot;text/plain&quot;.equals(type)) {\r\n                String sharedText = intent.getStringExtra(Intent.EXTRA_TEXT);\r\n                if(sharedText != null) {\r\n                    //sharedText = https://maps.app.goo.gl/SUeYVuEWd5u9Xn5B8\r\n                    Geocoder geocoder = new Geocoder(this);\r\n                    List&lt;Address&gt; addressesList = geocoder.getFromLocationName(sharedText, 1);\r\n                }\r\n            }\r\n        }\r\n```\r\n\r\nBut the `addressesList` object has a size of 0 since I can&#39;t get the location from https://maps.app.goo.gl/SUeYVuEWd5u9Xn5B8\r\n\r\nWhats is the best way to get latitude and longitude?\r\n","link":"https://stackoverflow.com/questions/77567242/get-latitude-and-longitude-from-google-maps-shared-location-in-my-own-android-a","title":"Get latitude and longitude from google maps&#39; shared location in my own Android app","body":"<p>I'm trying to share a location from Google Maps to my own Android, I'm doing it with an Intent in my app and I successfully get the Intent in my app, but I'm getting something like this:</p>\n<p><a href=\"https://maps.app.goo.gl/SUeYVuEWd5u9Xn5B8\" rel=\"nofollow noreferrer\">https://maps.app.goo.gl/SUeYVuEWd5u9Xn5B8</a></p>\n<p>So, the problem is that I can't get latitude and longitude from this URL.</p>\n<p>In my AndroidManifest I have and intent filter in the activity where I want to get the location</p>\n<pre><code>&lt;activity\n            android:name=&quot;.activities.MainActivity&quot;\n            android:exported=&quot;true&quot;\n            android:screenOrientation=&quot;portrait&quot;\n            android:windowSoftInputMode=&quot;adjustResize&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.SEND&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n                &lt;data android:mimeType=&quot;text/plain&quot; /&gt;\n            &lt;/intent-filter&gt;\n&lt;/activity&gt;\n</code></pre>\n<p>Then, in my activity I receive the intent in this way</p>\n<pre><code>Intent intent = getIntent();\n        String action = intent.getAction();\n        String type = intent.getType();\n\n        if(Intent.ACTION_SEND.equals(action) &amp;&amp; type != null) {\n            if(&quot;text/plain&quot;.equals(type)) {\n                String sharedText = intent.getStringExtra(Intent.EXTRA_TEXT);\n                if(sharedText != null) {\n                    //sharedText = https://maps.app.goo.gl/SUeYVuEWd5u9Xn5B8\n                    Geocoder geocoder = new Geocoder(this);\n                    List&lt;Address&gt; addressesList = geocoder.getFromLocationName(sharedText, 1);\n                }\n            }\n        }\n</code></pre>\n<p>But the <code>addressesList</code> object has a size of 0 since I can't get the location from <a href=\"https://maps.app.goo.gl/SUeYVuEWd5u9Xn5B8\" rel=\"nofollow noreferrer\">https://maps.app.goo.gl/SUeYVuEWd5u9Xn5B8</a></p>\n<p>Whats is the best way to get latitude and longitude?</p>\n"},{"tags":["java","arrays","list","set"],"comments":[{"score":1,"post_type":"question","creation_date":1701140884,"post_id":77561114,"comment_id":136735699,"body_markdown":"Where did you read equals documentation for arrays?  In any event, what matters is `.equals`, not `==`.","link":"https://stackoverflow.com/questions/77561114/java-set-doesnt-store-a-similar-list-with-same-elements-but-it-stores-a-duplica#comment136735699_77561114","body":"Where did you read equals documentation for arrays?  In any event, what matters is <code>.equals</code>, not <code>==</code>."},{"score":2,"post_type":"question","creation_date":1701141199,"post_id":77561114,"comment_id":136735727,"body_markdown":"This might be a partial duplicate of [What is the difference between == and equals() in Java?](https://stackoverflow.com/q/7520432/6395627).","link":"https://stackoverflow.com/questions/77561114/java-set-doesnt-store-a-similar-list-with-same-elements-but-it-stores-a-duplica#comment136735727_77561114","body":"This might be a partial duplicate of <a href=\"https://stackoverflow.com/q/7520432/6395627\">What is the difference between == and equals() in Java?</a>."},{"score":0,"post_type":"question","creation_date":1701207308,"post_id":77561114,"comment_id":136746299,"body_markdown":"Always search Stack Overflow thoroughly before posting. When drafting your Question, note how similar existing questions do not address your issue.","link":"https://stackoverflow.com/questions/77561114/java-set-doesnt-store-a-similar-list-with-same-elements-but-it-stores-a-duplica#comment136746299_77561114","body":"Always search Stack Overflow thoroughly before posting. When drafting your Question, note how similar existing questions do not address your issue."}],"answers":[{"comments":[{"score":2,"post_type":"answer","creation_date":1701154047,"post_id":77561272,"comment_id":136736797,"body_markdown":"_Meaning, no two keys may have the same hash-code_: sorry but this is nonsense. The Strings &quot;aa&quot; and &quot;bB&quot; have the same hashcode (3104) but I can easily add both of them to a `HashSet`.","link":"https://stackoverflow.com/questions/77561114/java-set-doesnt-store-a-similar-list-with-same-elements-but-it-stores-a-duplica/77561272#comment136736797_77561272","body":"<i>Meaning, no two keys may have the same hash-code</i>: sorry but this is nonsense. The Strings &quot;aa&quot; and &quot;bB&quot; have the same hashcode (3104) but I can easily add both of them to a <code>HashSet</code>."},{"score":0,"post_type":"answer","creation_date":1701194695,"post_id":77561272,"comment_id":136744300,"body_markdown":"@ThomasKl&#228;ger, _putVal(hash(key), key, value, false, true)_.","link":"https://stackoverflow.com/questions/77561114/java-set-doesnt-store-a-similar-list-with-same-elements-but-it-stores-a-duplica/77561272#comment136744300_77561272","body":"@ThomasKl&#228;ger, <i>putVal(hash(key), key, value, false, true)</i>."},{"score":0,"post_type":"answer","creation_date":1701195973,"post_id":77561272,"comment_id":136744496,"body_markdown":"@ThomasKl&#228;ger, and, why don&#39;t you just write an answer?","link":"https://stackoverflow.com/questions/77561114/java-set-doesnt-store-a-similar-list-with-same-elements-but-it-stores-a-duplica/77561272#comment136744496_77561272","body":"@ThomasKl&#228;ger, and, why don&#39;t you just write an answer?"},{"score":1,"post_type":"answer","creation_date":1701203950,"post_id":77561272,"comment_id":136745807,"body_markdown":"The condition in `putVal()` is `p.hash == hash &amp;&amp;  ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))`  which means that not only the hash values must match, it must also be true that the keys are either the same object (`p.key == key`) or if key is not null `key.equals(k)`","link":"https://stackoverflow.com/questions/77561114/java-set-doesnt-store-a-similar-list-with-same-elements-but-it-stores-a-duplica/77561272#comment136745807_77561272","body":"The condition in <code>putVal()</code> is <code>p.hash == hash &amp;&amp;  ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))</code>  which means that not only the hash values must match, it must also be true that the keys are either the same object (<code>p.key == key</code>) or if key is not null <code>key.equals(k)</code>"},{"score":0,"post_type":"answer","creation_date":1701204492,"post_id":77561272,"comment_id":136745904,"body_markdown":"@ThomasKl&#228;ger, ok, what should I adjust?","link":"https://stackoverflow.com/questions/77561114/java-set-doesnt-store-a-similar-list-with-same-elements-but-it-stores-a-duplica/77561272#comment136745904_77561272","body":"@ThomasKl&#228;ger, ok, what should I adjust?"},{"score":1,"post_type":"answer","creation_date":1701205979,"post_id":77561272,"comment_id":136746132,"body_markdown":"I would write something like &quot;no two equal keys (as defined by the `equals(Object)` method) may be added. Note that objects that are equal according to `equals(Object)` must have the same `hashCode()`&quot;.","link":"https://stackoverflow.com/questions/77561114/java-set-doesnt-store-a-similar-list-with-same-elements-but-it-stores-a-duplica/77561272#comment136746132_77561272","body":"I would write something like &quot;no two equal keys (as defined by the <code>equals(Object)</code> method) may be added. Note that objects that are equal according to <code>equals(Object)</code> must have the same <code>hashCode()</code>&quot;."},{"score":0,"post_type":"answer","creation_date":1701208425,"post_id":77561272,"comment_id":136746493,"body_markdown":"@ThomasKl&#228;ger, cool thanks, dude.","link":"https://stackoverflow.com/questions/77561114/java-set-doesnt-store-a-similar-list-with-same-elements-but-it-stores-a-duplica/77561272#comment136746493_77561272","body":"@ThomasKl&#228;ger, cool thanks, dude."}],"comment_count":7,"score":1,"last_activity_date":1701195876,"last_edit_date":1701195876,"creation_date":1701143944,"answer_id":77561272,"question_id":77561114,"body_markdown":"&gt; _&quot;... How does set compare objects in java? ...&quot;_\r\n\r\nThere are different implementations of the _[Set](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html)_ interface.\r\n\r\nIn your particular example, you&#39;re using the _[HashSet](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/HashSet.html)_, which utilizes a _[Map](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html)_, or more accurately, a _[HashMap](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/HashMap.html)_.\\\r\nOf which, in turn, generates a _&quot;[hash-code](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode())&quot;_ value of the supplied _key_, upon entry.\\\r\nMeaning, no two _keys_ may have the same _hash-code_.\r\n\r\nHere is the source code, for _[HashMap#put](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/HashMap.html#put(K,V))_.\\\r\n_[GitHub &amp;ndash; OpenJDK &amp;ndash; HashMap.java &amp;ndash; put(K, V)](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/HashMap.java#L617)_.\r\n\r\n```java\r\n/**\r\n * Associates the specified value with the specified key in this map.\r\n * If the map previously contained a mapping for the key, the old\r\n * value is replaced.\r\n *\r\n * @param key key with which the specified value is to be associated\r\n * @param value value to be associated with the specified key\r\n * @return the previous value associated with {@code key}, or\r\n *         {@code null} if there was no mapping for {@code key}.\r\n *         (A {@code null} return can also indicate that the map\r\n *         previously associated {@code null} with {@code key}.)\r\n */\r\npublic V put(K key, V value) {\r\n    return putVal(hash(key), key, value, false, true);\r\n}\r\n```\r\n\r\nAnd, here is _HashMap#putVal_.\\\r\n_[GitHub &amp;ndash; OpenJDK &amp;ndash; HashMap.java &amp;ndash; putVal(int, K, V, boolean, boolean)](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/HashMap.java#L631)_.\r\n\r\nIt appears to be the typical _Set_ abstraction; allowing only unique values.\\\r\nHere is a relevant _Wikipedia_ article.\\\r\n_[Wikipedia &amp;ndash; Set (abstract data type)](https://en.wikipedia.org/wiki/Set_(abstract_data_type))_.\r\n\r\n```java\r\n/**\r\n * Implements Map.put and related methods.\r\n *\r\n * @param hash hash for key\r\n * @param key the key\r\n * @param value the value to put\r\n * @param onlyIfAbsent if true, don&#39;t change existing value\r\n * @param evict if false, the table is in creation mode.\r\n * @return previous value, or null if none\r\n */\r\nfinal V putVal(int hash, K key, V value, boolean onlyIfAbsent,\r\n               boolean evict) {\r\n    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i;\r\n    if ((tab = table) == null || (n = tab.length) == 0)\r\n        n = (tab = resize()).length;\r\n    if ((p = tab[i = (n - 1) &amp; hash]) == null)\r\n        tab[i] = newNode(hash, key, value, null);\r\n    else {\r\n        Node&lt;K,V&gt; e; K k;\r\n        if (p.hash == hash &amp;&amp;\r\n            ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))\r\n            e = p;\r\n        else if (p instanceof TreeNode)\r\n            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);\r\n        else {\r\n            for (int binCount = 0; ; ++binCount) {\r\n                if ((e = p.next) == null) {\r\n                    p.next = newNode(hash, key, value, null);\r\n                    if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st\r\n                        treeifyBin(tab, hash);\r\n                    break;\r\n                }\r\n                if (e.hash == hash &amp;&amp;\r\n                    ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))\r\n                    break;\r\n                p = e;\r\n            }\r\n        }\r\n        if (e != null) { // existing mapping for key\r\n            V oldValue = e.value;\r\n            if (!onlyIfAbsent || oldValue == null)\r\n                e.value = value;\r\n            afterNodeAccess(e);\r\n            return oldValue;\r\n        }\r\n    }\r\n    ++modCount;\r\n    if (++size &gt; threshold)\r\n        resize();\r\n    afterNodeInsertion(evict);\r\n    return null;\r\n}\r\n```\r\n\r\n&gt; _&quot;... This post just recommends to use list but I wanted to understand how do I know for other data structures? ...&quot;_\r\n\r\nHere is a _Wikipedia_ article, listing the different types of _data structures_.\\\r\n_[Wikipedia &amp;ndash; List of data structures](https://en.wikipedia.org/wiki/List_of_data_structures)_.","link":"https://stackoverflow.com/questions/77561114/java-set-doesnt-store-a-similar-list-with-same-elements-but-it-stores-a-duplica/77561272#77561272","title":"Java Set doesn&#39;t store a similar list with same elements but it stores a duplicate for arrays","body":"<blockquote>\n<p><em>&quot;... How does set compare objects in java? ...&quot;</em></p>\n</blockquote>\n<p>There are different implementations of the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html\" rel=\"nofollow noreferrer\">Set</a></em> interface.</p>\n<p>In your particular example, you're using the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/HashSet.html\" rel=\"nofollow noreferrer\">HashSet</a></em>, which utilizes a <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html\" rel=\"nofollow noreferrer\">Map</a></em>, or more accurately, a <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/HashMap.html\" rel=\"nofollow noreferrer\">HashMap</a></em>.<br />\nOf which, in turn, generates a <em>&quot;<a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()\" rel=\"nofollow noreferrer\">hash-code</a>&quot;</em> value of the supplied <em>key</em>, upon entry.<br />\nMeaning, no two <em>keys</em> may have the same <em>hash-code</em>.</p>\n<p>Here is the source code, for <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/HashMap.html#put(K,V)\" rel=\"nofollow noreferrer\">HashMap#put</a></em>.<br />\n<em><a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/HashMap.java#L617\" rel=\"nofollow noreferrer\">GitHub – OpenJDK – HashMap.java – put(K, V)</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Associates the specified value with the specified key in this map.\n * If the map previously contained a mapping for the key, the old\n * value is replaced.\n *\n * @param key key with which the specified value is to be associated\n * @param value value to be associated with the specified key\n * @return the previous value associated with {@code key}, or\n *         {@code null} if there was no mapping for {@code key}.\n *         (A {@code null} return can also indicate that the map\n *         previously associated {@code null} with {@code key}.)\n */\npublic V put(K key, V value) {\n    return putVal(hash(key), key, value, false, true);\n}\n</code></pre>\n<p>And, here is <em>HashMap#putVal</em>.<br />\n<em><a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/HashMap.java#L631\" rel=\"nofollow noreferrer\">GitHub – OpenJDK – HashMap.java – putVal(int, K, V, boolean, boolean)</a></em>.</p>\n<p>It appears to be the typical <em>Set</em> abstraction; allowing only unique values.<br />\nHere is a relevant <em>Wikipedia</em> article.<br />\n<em><a href=\"https://en.wikipedia.org/wiki/Set_(abstract_data_type)\" rel=\"nofollow noreferrer\">Wikipedia – Set (abstract data type)</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Implements Map.put and related methods.\n *\n * @param hash hash for key\n * @param key the key\n * @param value the value to put\n * @param onlyIfAbsent if true, don't change existing value\n * @param evict if false, the table is in creation mode.\n * @return previous value, or null if none\n */\nfinal V putVal(int hash, K key, V value, boolean onlyIfAbsent,\n               boolean evict) {\n    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i;\n    if ((tab = table) == null || (n = tab.length) == 0)\n        n = (tab = resize()).length;\n    if ((p = tab[i = (n - 1) &amp; hash]) == null)\n        tab[i] = newNode(hash, key, value, null);\n    else {\n        Node&lt;K,V&gt; e; K k;\n        if (p.hash == hash &amp;&amp;\n            ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))\n            e = p;\n        else if (p instanceof TreeNode)\n            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);\n        else {\n            for (int binCount = 0; ; ++binCount) {\n                if ((e = p.next) == null) {\n                    p.next = newNode(hash, key, value, null);\n                    if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st\n                        treeifyBin(tab, hash);\n                    break;\n                }\n                if (e.hash == hash &amp;&amp;\n                    ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))\n                    break;\n                p = e;\n            }\n        }\n        if (e != null) { // existing mapping for key\n            V oldValue = e.value;\n            if (!onlyIfAbsent || oldValue == null)\n                e.value = value;\n            afterNodeAccess(e);\n            return oldValue;\n        }\n    }\n    ++modCount;\n    if (++size &gt; threshold)\n        resize();\n    afterNodeInsertion(evict);\n    return null;\n}\n</code></pre>\n<blockquote>\n<p><em>&quot;... This post just recommends to use list but I wanted to understand how do I know for other data structures? ...&quot;</em></p>\n</blockquote>\n<p>Here is a <em>Wikipedia</em> article, listing the different types of <em>data structures</em>.<br />\n<em><a href=\"https://en.wikipedia.org/wiki/List_of_data_structures\" rel=\"nofollow noreferrer\">Wikipedia – List of data structures</a></em>.</p>\n"},{"comment_count":0,"score":1,"last_activity_date":1701144432,"creation_date":1701144432,"answer_id":77561292,"question_id":77561114,"body_markdown":"In Java, double equals (==) on objects compares pointer equality.  So only two pointers to the same object instance will return true.\r\n\r\n    int[] arr1 = new int[] { 1, 2 };\r\n    int[] arr2 = new int[] { 1, 2 };\r\n    int[] arr3 = arr2;\r\n    System.out.println(arr1 == arr2); // false\r\n    System.out.println(arr3 == arr2); // true\r\n\r\nBy default `Object.equals()` does the same thing.  You can override it to do something sensible for a class you define.  Obviously `java.util.ArrayList` does this.\r\n\r\nA set is supposed to ensure that no two members are the same according to `Object.equals()`.  According to the documentation on `java.util.Set`: [&quot;More formally, sets contain no pair of elements e1 and e2 such that e1.equals(e2)&quot;][1]  However, this doesn&#39;t work the way you might expect.\r\n\r\nFor example, a `java.util.HashSet` doesn&#39;t call `Object.equals()` on its members when they&#39;re added unless the `Object.hashCode()` method returns the same value.  Here&#39;s an example of how you would create a custom class that avoids duplicating entries using `HashSet`:\r\n\r\n    import java.util.Set;\r\n    import java.util.HashSet;\r\n\r\n    public class CustomArray {\r\n        protected int[] _a;\r\n        public CustomArray(int[] a) { _a = a; }\r\n        public int hashCode() {\r\n            int result = _a.length;\r\n            for (int ii = 0; ii &lt; _a.length; ++ii)\r\n                result += ((Integer)_a[ii]).hashCode();\r\n            return result;\r\n        }\r\n        public boolean equals(Object o) {\r\n            if ((o != null) &amp;&amp; (o instanceof CustomArray) &amp;&amp;\r\n                (((CustomArray)o)._a.length == _a.length)) {\r\n               boolean result = true;\r\n               for (int ii = 0; ii &lt; _a.length; ++ii)\r\n                   if (((CustomArray)o)._a[ii] != _a[ii])\r\n                       result = false;\r\n            } else result = false;\r\n            return result;\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            Set&lt;CustomArray&gt; s = new HashSet&lt;&gt;();\r\n            s.add(new CustomArray(new int[] {1, 2}));\r\n            s.add(new CustomArray(new int[] {1, 2}));\r\n            System.out.println(s.size());  // prints &quot;1&quot;\r\n        }\r\n    }\r\n\r\nIn practice you might want to implement `hashCode()` differently to make collisions less likely (a [linear congruential generator][2] might work).  I also recommend making your custom class immutable if possible, since changing the contents of a set member may invalidate the set assumption with surprising results.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html\r\n  [2]: https://en.wikipedia.org/wiki/Linear_congruential_generator","link":"https://stackoverflow.com/questions/77561114/java-set-doesnt-store-a-similar-list-with-same-elements-but-it-stores-a-duplica/77561292#77561292","title":"Java Set doesn&#39;t store a similar list with same elements but it stores a duplicate for arrays","body":"<p>In Java, double equals (==) on objects compares pointer equality.  So only two pointers to the same object instance will return true.</p>\n<pre><code>int[] arr1 = new int[] { 1, 2 };\nint[] arr2 = new int[] { 1, 2 };\nint[] arr3 = arr2;\nSystem.out.println(arr1 == arr2); // false\nSystem.out.println(arr3 == arr2); // true\n</code></pre>\n<p>By default <code>Object.equals()</code> does the same thing.  You can override it to do something sensible for a class you define.  Obviously <code>java.util.ArrayList</code> does this.</p>\n<p>A set is supposed to ensure that no two members are the same according to <code>Object.equals()</code>.  According to the documentation on <code>java.util.Set</code>: <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Set.html\" rel=\"nofollow noreferrer\">&quot;More formally, sets contain no pair of elements e1 and e2 such that e1.equals(e2)&quot;</a>  However, this doesn't work the way you might expect.</p>\n<p>For example, a <code>java.util.HashSet</code> doesn't call <code>Object.equals()</code> on its members when they're added unless the <code>Object.hashCode()</code> method returns the same value.  Here's an example of how you would create a custom class that avoids duplicating entries using <code>HashSet</code>:</p>\n<pre><code>import java.util.Set;\nimport java.util.HashSet;\n\npublic class CustomArray {\n    protected int[] _a;\n    public CustomArray(int[] a) { _a = a; }\n    public int hashCode() {\n        int result = _a.length;\n        for (int ii = 0; ii &lt; _a.length; ++ii)\n            result += ((Integer)_a[ii]).hashCode();\n        return result;\n    }\n    public boolean equals(Object o) {\n        if ((o != null) &amp;&amp; (o instanceof CustomArray) &amp;&amp;\n            (((CustomArray)o)._a.length == _a.length)) {\n           boolean result = true;\n           for (int ii = 0; ii &lt; _a.length; ++ii)\n               if (((CustomArray)o)._a[ii] != _a[ii])\n                   result = false;\n        } else result = false;\n        return result;\n    }\n\n    public static void main(String[] args) {\n        Set&lt;CustomArray&gt; s = new HashSet&lt;&gt;();\n        s.add(new CustomArray(new int[] {1, 2}));\n        s.add(new CustomArray(new int[] {1, 2}));\n        System.out.println(s.size());  // prints &quot;1&quot;\n    }\n}\n</code></pre>\n<p>In practice you might want to implement <code>hashCode()</code> differently to make collisions less likely (a <a href=\"https://en.wikipedia.org/wiki/Linear_congruential_generator\" rel=\"nofollow noreferrer\">linear congruential generator</a> might work).  I also recommend making your custom class immutable if possible, since changing the contents of a set member may invalidate the set assumption with surprising results.</p>\n"}],"comment_count":3,"is_answered":true,"view_count":82,"answer_count":2,"score":0,"last_activity_date":1701207403,"creation_date":1701140667,"last_edit_date":1701206996,"question_id":77561114,"body_markdown":"How does set compare objects in java?\r\n\r\nI was reading java documentation for equals method for arrays and list and from the documentation it looks similar. Is there a better way to differentiate.\r\n\r\nThis post just recommends to use list but I wanted to understand how do I know for other data structures?\r\n[https://stackoverflow.com/questions/7488098/storing-arrays-in-set-and-avoiding-duplicates](https://stackoverflow.com)\r\n\r\nFor example:\r\n```\r\n   int[] arr1 = new int[] {1, 2};\r\n   int[] arr2 = new int[] {1, 2};\r\n   if (arr1 == arr2) {\r\n      // doesn&#39;t get printed\r\n      System.out.println(&quot;hello&quot;);\r\n   }\r\n   Set&lt;int[]&gt; set1 = new HashSet&lt;&gt;();\r\n   set1.add(arr1);\r\n   set1.add(arr2);\r\n   System.out.println(set1.size());\r\n   // Prints 2\r\n```\r\n\r\n```\r\n    Set&lt;List&lt;Integer&gt;&gt; set = new HashSet&lt;&gt;();\r\n    List&lt;Integer&gt; list1 = Arrays.asList(1, 2, 3, 4);\r\n    List&lt;Integer&gt; list2 = Arrays.asList(1, 2, 3, 4);\r\n    set.add(list1);\r\n    set.add(list2);\r\n    if (list1 == list2) {\r\n    // doesn&#39;t get printed\r\n      System.out.println(&quot;hello&quot;);\r\n    }\r\n    System.out.println(set);\r\n    System.out.println(set.size());\r\n    // Prints\r\n    // [[1, 2, 3, 4]]\r\n    // 1\r\n```","link":"https://stackoverflow.com/questions/77561114/java-set-doesnt-store-a-similar-list-with-same-elements-but-it-stores-a-duplica","title":"Java Set doesn&#39;t store a similar list with same elements but it stores a duplicate for arrays","body":"<p>How does set compare objects in java?</p>\n<p>I was reading java documentation for equals method for arrays and list and from the documentation it looks similar. Is there a better way to differentiate.</p>\n<p>This post just recommends to use list but I wanted to understand how do I know for other data structures?\n<a href=\"https://stackoverflow.com\">https://stackoverflow.com/questions/7488098/storing-arrays-in-set-and-avoiding-duplicates</a></p>\n<p>For example:</p>\n<pre><code>   int[] arr1 = new int[] {1, 2};\n   int[] arr2 = new int[] {1, 2};\n   if (arr1 == arr2) {\n      // doesn't get printed\n      System.out.println(&quot;hello&quot;);\n   }\n   Set&lt;int[]&gt; set1 = new HashSet&lt;&gt;();\n   set1.add(arr1);\n   set1.add(arr2);\n   System.out.println(set1.size());\n   // Prints 2\n</code></pre>\n<pre><code>    Set&lt;List&lt;Integer&gt;&gt; set = new HashSet&lt;&gt;();\n    List&lt;Integer&gt; list1 = Arrays.asList(1, 2, 3, 4);\n    List&lt;Integer&gt; list2 = Arrays.asList(1, 2, 3, 4);\n    set.add(list1);\n    set.add(list2);\n    if (list1 == list2) {\n    // doesn't get printed\n      System.out.println(&quot;hello&quot;);\n    }\n    System.out.println(set);\n    System.out.println(set.size());\n    // Prints\n    // [[1, 2, 3, 4]]\n    // 1\n</code></pre>\n"},{"tags":["java","oop"],"comments":[{"score":0,"post_type":"question","creation_date":1701200533,"post_id":77566664,"comment_id":136745251,"body_markdown":"Can you name a test that fails so we do not have to run your code in order to find out what your problem is?","link":"https://stackoverflow.com/questions/77566664/same-variables-different-values-across-testing#comment136745251_77566664","body":"Can you name a test that fails so we do not have to run your code in order to find out what your problem is?"},{"score":0,"post_type":"question","creation_date":1701202011,"post_id":77566664,"comment_id":136745506,"body_markdown":"This is the test that fails ```Assertions.assertEquals(nightsTotal + PricedHotel.SAFE_PRICE,\n                hotel.getBill(GUEST_NAME_1, NUMBER_OF_NIGHTS, printer).getSum());``` It outputs 500 when it should output 520","link":"https://stackoverflow.com/questions/77566664/same-variables-different-values-across-testing#comment136745506_77566664","body":"This is the test that fails <code>Assertions.assertEquals(nightsTotal + PricedHotel.SAFE_PRICE,                 hotel.getBill(GUEST_NAME_1, NUMBER_OF_NIGHTS, printer).getSum());</code> It outputs 500 when it should output 520"},{"score":0,"post_type":"question","creation_date":1701206727,"post_id":77566664,"comment_id":136746226,"body_markdown":"Look closely at `PricedHotel.checkIn` - if it creates a `PricedRoom` it does not set `this.r1` .  This means the result of `checkIn` and `hotel.getBill` are not using the same room instance which affects your test.  Would need to see `Hotel.checkIn` to confirm this.","link":"https://stackoverflow.com/questions/77566664/same-variables-different-values-across-testing#comment136746226_77566664","body":"Look closely at <code>PricedHotel.checkIn</code> - if it creates a <code>PricedRoom</code> it does not set <code>this.r1</code> .  This means the result of <code>checkIn</code> and <code>hotel.getBill</code> are not using the same room instance which affects your test.  Would need to see <code>Hotel.checkIn</code> to confirm this."},{"score":0,"post_type":"question","creation_date":1701207355,"post_id":77566664,"comment_id":136746308,"body_markdown":"I added Hotel.checkIn class hopefully it helps","link":"https://stackoverflow.com/questions/77566664/same-variables-different-values-across-testing#comment136746308_77566664","body":"I added Hotel.checkIn class hopefully it helps"},{"score":0,"post_type":"question","creation_date":1701211664,"post_id":77566664,"comment_id":136746974,"body_markdown":"So it is the case that `checkIn` will create a new `PricedRoom` but it does not set `this.r1` and so `getBill` uses `r1` but your test uses the result of `checkin` (which is a different room instance) to then manipulate the safe - so this is wrong.  Just set `this.r1` in the `PricedHotel.checkin` where you create the new `PricedRoom` instance.  As an aside, you very well could just use the room variables of the parent class without having to create new room variables in the subclass - provided `PricedRoom` does not change the behavior of its `Room` properties (LSP). Your tests were good!","link":"https://stackoverflow.com/questions/77566664/same-variables-different-values-across-testing#comment136746974_77566664","body":"So it is the case that <code>checkIn</code> will create a new <code>PricedRoom</code> but it does not set <code>this.r1</code> and so <code>getBill</code> uses <code>r1</code> but your test uses the result of <code>checkin</code> (which is a different room instance) to then manipulate the safe - so this is wrong.  Just set <code>this.r1</code> in the <code>PricedHotel.checkin</code> where you create the new <code>PricedRoom</code> instance.  As an aside, you very well could just use the room variables of the parent class without having to create new room variables in the subclass - provided <code>PricedRoom</code> does not change the behavior of its <code>Room</code> properties (LSP). Your tests were good!"},{"score":0,"post_type":"question","creation_date":1701279289,"post_id":77566664,"comment_id":136757093,"body_markdown":"I changed the checkIn to `PricedRoom pricedRoom = r1;` but still the same issue is happening","link":"https://stackoverflow.com/questions/77566664/same-variables-different-values-across-testing#comment136757093_77566664","body":"I changed the checkIn to <code>PricedRoom pricedRoom = r1;</code> but still the same issue is happening"},{"score":0,"post_type":"question","creation_date":1701279417,"post_id":77566664,"comment_id":136757115,"body_markdown":"The only line you need to add is `this.r1 = pricedRoom` in that method inside the conditional block.","link":"https://stackoverflow.com/questions/77566664/same-variables-different-values-across-testing#comment136757115_77566664","body":"The only line you need to add is <code>this.r1 = pricedRoom</code> in that method inside the conditional block."},{"score":0,"post_type":"question","creation_date":1701280555,"post_id":77566664,"comment_id":136757314,"body_markdown":"Still doesn&#39;t work, it makes the actual value 0.0 when 520.0 is expected","link":"https://stackoverflow.com/questions/77566664/same-variables-different-values-across-testing#comment136757314_77566664","body":"Still doesn&#39;t work, it makes the actual value 0.0 when 520.0 is expected"},{"score":1,"post_type":"question","creation_date":1701281374,"post_id":77566664,"comment_id":136757444,"body_markdown":"I got it to work. Thank you so much man!","link":"https://stackoverflow.com/questions/77566664/same-variables-different-values-across-testing#comment136757444_77566664","body":"I got it to work. Thank you so much man!"}],"comment_count":9,"is_answered":false,"view_count":63,"answer_count":0,"score":0,"last_activity_date":1701207334,"creation_date":1701199747,"last_edit_date":1701207334,"question_id":77566664,"body_markdown":"I have this Java assignment to do which involves multiple different classes. To check the assignment we are given a test file which we cannot modify. The main class that is being tested is PricedHotel. I am passing every test except the last assertion test. After using the debugger I found that the room and safe in the PricedHotel class is different than the room and safe in the Test class, I&#39;m not sure why this is happening I thought I referenced them properly. Can anybody help?\r\n\r\nPricedHotel class:\r\n\r\n```\r\npackage ss.week2.hotel;\r\n\r\nimport ss.week2.hotel.bill.Bill;\r\nimport ss.week2.hotel.bill.BillPrinter;\r\nimport ss.week2.hotel.bill.StringBillPrinter;\r\nimport ss.week2.hotel.PricedRoom;\r\n\r\npublic class PricedHotel extends Hotel {\r\n\r\n    public static final double ROOM_PRICE = 100.0;\r\n    public static final double SAFE_PRICE = 20.0;\r\n    public PricedRoom r1;\r\n    public Room r2;\r\n\r\n    private Guest g1;\r\n    private Guest g2;\r\n    private StringBillPrinter stringBillPrinter;\r\n\r\n    public PricedHotel(String name){\r\n        super(name);\r\n        r1 = new PricedRoom(1,ROOM_PRICE,SAFE_PRICE);\r\n        r2 = new Room(2, new Safe());\r\n        stringBillPrinter = new StringBillPrinter();\r\n    }\r\n\r\n   @Override\r\n    public Room checkIn(String guestName) {\r\n        Room room = super.checkIn(guestName);\r\n\r\n        if (!(room instanceof PricedRoom)) {\r\n            PricedRoom pricedRoom = new PricedRoom(room.getNumber(), ROOM_PRICE, SAFE_PRICE);\r\n            pricedRoom.setGuest(room.getGuest());\r\n            room = pricedRoom;\r\n        }\r\n\r\n        return room;\r\n    }\r\n\r\n\r\n    public Bill getBill(String guestName, int total, BillPrinter billPrinter){\r\n        PricedRoom room = this.r1;\r\n        PricedSafe safe = (PricedSafe) this.r1.getSafe();\r\n        Bill bill = new Bill(billPrinter);\r\n\r\n        if (safe.isActive()) {\r\n            Bill.Item item1 = new Bill.Item() {\r\n                @Override\r\n                public double getPrice() {\r\n                    return ((total*ROOM_PRICE) + SAFE_PRICE);\r\n                }\r\n\r\n                @Override\r\n                public String toString() {\r\n                    return guestName;\r\n                }\r\n            };\r\n        } else {\r\n            Bill.Item item1 = new Bill.Item() {\r\n                @Override\r\n                public double getPrice() {\r\n                    return total*ROOM_PRICE;\r\n                }\r\n\r\n                @Override\r\n                public String toString() {\r\n                    return guestName;\r\n                }\r\n            };\r\n            bill.addItem(item1);\r\n        }\r\n        return bill;\r\n    }\r\n}\r\n\r\n```\r\n\r\nTest class:\r\n```\r\npackage ss.week2.hotel.tests;\r\n\r\nimport org.junit.jupiter.api.Assertions;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport ss.week2.hotel.*;\r\nimport ss.week2.hotel.bill.Bill;\r\nimport ss.week2.hotel.bill.StringBillPrinter;\r\nimport ss.week2.hotel.password.Password;\r\n\r\nimport static org.junit.jupiter.api.Assertions.*;\r\n\r\npublic class PricedHotelTest {\r\n    /** Test variable for a &lt;tt&gt;Hotel&lt;/tt&gt; object. */\r\n    private PricedHotel hotel;\r\n    private String correctPassword;\r\n    private String wrongPassword;\r\n    public static final String GUEST_NAME_1 = &quot;Major Gowen&quot;;\r\n    public static final String GUEST_NAME_2 = &quot;Miss Tibbs&quot;;\r\n    public static final String GUEST_NAME_3 = &quot;Miss Gatsby&quot;;\r\n\r\n    public static final int NUMBER_OF_NIGHTS = 5;\r\n\r\n    /**\r\n     * Sets the instance variable &lt;tt&gt;hotel&lt;/tt&gt; to a well-defined initial value.\r\n     * All test methods should be preceded by a call to this method.\r\n     */\r\n    @BeforeEach\r\n    public void setUp() {\r\n        hotel = new PricedHotel(&quot;Fawlty Towers&quot;);\r\n\r\n        // initialisation of password-variable\r\n        correctPassword = new Password().getInitPass();\r\n        wrongPassword = correctPassword + &quot;_invalid&quot;;\r\n    }\r\n\r\n    /**\r\n     * checkIn First room should be a PricedRoom\r\n     */\r\n    @Test\r\n    public void testCheckIn() {\r\n        Room room = hotel.checkIn(GUEST_NAME_1);\r\n        assertTrue(room instanceof PricedRoom,\r\n    \t\t\t&quot;room should be an instance of PricedRoom&quot;);\r\n        Safe safe = room.getSafe();\r\n    \tassertTrue(safe instanceof PricedSafe,\r\n    \t\t\t&quot;safe should be an instance of PricedSafe&quot;);\r\n    }\r\n\r\n    /**\r\n     * If there is a free room, getFreeRoom must return a room without guest.\r\n     */\r\n    @Test\r\n    public void testGetFreeRoomFromNotFullHotel() {\r\n        Room room = hotel.getFreeRoom();\r\n        assertNull(room.getGuest(), &quot;A room is free&quot;);\r\n        hotel.checkIn(GUEST_NAME_1);\r\n        Room freeRoom = hotel.getFreeRoom();\r\n        assertNotNull(freeRoom, &quot;Another room is free&quot;);\r\n        assertNotEquals(room, freeRoom, &quot;Another room is free&quot;);\r\n    }\r\n\r\n    /**\r\n     * If there is no free room, getFreeRoom must return null.\r\n     */\r\n    @Test\r\n    public void testGetFreeRoomFromFullHotel() {\r\n        hotel.checkIn(GUEST_NAME_1);\r\n        hotel.checkIn(GUEST_NAME_2);\r\n\r\n        Room noRoom = hotel.getFreeRoom();\r\n        assertNull(noRoom, &quot;No room available in a full hotel&quot;);\r\n    }\r\n\r\n    /**\r\n     * getRoom must not return any room, if the guest is not checked in\r\n     */\r\n    @Test\r\n    public void testGetRoomBeforeCheckIn() {\r\n        Room room = hotel.getRoom(GUEST_NAME_1);\r\n        assertNull(room, &quot;Guest 1 not checked in&quot;);\r\n    }\r\n\r\n    /**\r\n     * If the guest is checked in, the returned room must be occupied by the specified guest.\r\n     */\r\n    @Test\r\n    public void testGetRoomAfterCheckIn() {\r\n        hotel.checkIn(GUEST_NAME_1);\r\n        Room room = hotel.getRoom(GUEST_NAME_1);\r\n        assertEquals(GUEST_NAME_1, room.getGuest().getName(), &quot;Guest 1 checked in&quot;);\r\n    }\r\n\r\n    /**\r\n     * A password object must be returned.\r\n     */\r\n    @Test\r\n    public void testGetPassword() {\r\n        Room room = hotel.checkIn(GUEST_NAME_1);\r\n        assertTrue(room instanceof PricedRoom,\r\n    \t\t\t&quot;room should be an instance of PricedRoom&quot;);\r\n        Safe safe = room.getSafe();\r\n    \tassertTrue(safe instanceof PricedSafe,\r\n    \t\t\t&quot;safe should be an instance of PricedSafe&quot;);\r\n\r\n        Password password = ((PricedSafe) safe).getPassword();\r\n        assertNotNull(password, &quot;Returned password is not null&quot;);\r\n    }\r\n\r\n    /**\r\n     * The Bill should be correctly calculated\r\n     */\r\n    @Test\r\n    public void testGetBill() {\r\n        Room room = hotel.checkIn(GUEST_NAME_1);\r\n        assertTrue(room instanceof PricedRoom,\r\n    \t\t\t&quot;room should be an instance of PricedRoom&quot;);\r\n        StringBillPrinter printer = new StringBillPrinter();\r\n        Bill bill = hotel.getBill(GUEST_NAME_1, NUMBER_OF_NIGHTS, printer);\r\n        double nightsTotal = NUMBER_OF_NIGHTS * PricedHotel.ROOM_PRICE;\r\n        assertEquals(nightsTotal, bill.getSum(), 0.01, &quot;Bill sum should contain only room costs.&quot;);\r\n\t\tassertTrue(printer.getResult().contains(String.format(&quot;%.2f&quot;, nightsTotal)));\r\n\r\n        // Now check sum again when safe is actually active\r\n        assertTrue(room.getSafe() instanceof PricedSafe);\r\n        PricedSafe safe = (PricedSafe) room.getSafe();\r\n        assertFalse(safe.isActive(), &quot;Safe should be deactivated after initialisation.&quot;);\r\n        safe.activate(correctPassword);\r\n        assertTrue(safe.isActive(), &quot;Safe should be activated after activation with password.&quot;);\r\n        Assertions.assertEquals(nightsTotal + PricedHotel.SAFE_PRICE,\r\n                hotel.getBill(GUEST_NAME_1, NUMBER_OF_NIGHTS, printer).getSum());\r\n\r\n    }\r\n}\r\n\r\n```\r\nHotel.checkIn class:\r\n```\r\npublic Room checkIn(String name){\r\n        if (room1.getGuest() != null &amp;&amp; room2.getGuest() != null){ //checks if the two rooms are empty\r\n            return null;\r\n        }\r\n\r\n        if (g1 != null &amp;&amp; Objects.equals(g1.getName(), name)){ //checks if g1 is already checked in\r\n            return null;\r\n        }\r\n        if (g2 != null &amp;&amp; Objects.equals(g2.getName(), name)){ //checks if g2 is already checked in\r\n            return null;\r\n        }\r\n\r\n        Room freeRoom = getFreeRoom(); //gets a free room\r\n        if (freeRoom == null){ // checks if hotel is fill\r\n            return null;\r\n        }\r\n\r\n        Guest newGuest = new Guest(name); //new guest object with the name we provided\r\n        newGuest.setRoom(freeRoom); // set&#39;s the new guest to the free room\r\n        freeRoom.setGuest(newGuest); // set&#39;s the guest to the free room\r\n\r\n        if (g1 == null){\r\n            g1 = newGuest;\r\n        } else if (g2 == null) {\r\n            g2 = newGuest;\r\n        }\r\n        return freeRoom;\r\n    }\r\n```","link":"https://stackoverflow.com/questions/77566664/same-variables-different-values-across-testing","title":"Same variables different values across testing","body":"<p>I have this Java assignment to do which involves multiple different classes. To check the assignment we are given a test file which we cannot modify. The main class that is being tested is PricedHotel. I am passing every test except the last assertion test. After using the debugger I found that the room and safe in the PricedHotel class is different than the room and safe in the Test class, I'm not sure why this is happening I thought I referenced them properly. Can anybody help?</p>\n<p>PricedHotel class:</p>\n<pre><code>package ss.week2.hotel;\n\nimport ss.week2.hotel.bill.Bill;\nimport ss.week2.hotel.bill.BillPrinter;\nimport ss.week2.hotel.bill.StringBillPrinter;\nimport ss.week2.hotel.PricedRoom;\n\npublic class PricedHotel extends Hotel {\n\n    public static final double ROOM_PRICE = 100.0;\n    public static final double SAFE_PRICE = 20.0;\n    public PricedRoom r1;\n    public Room r2;\n\n    private Guest g1;\n    private Guest g2;\n    private StringBillPrinter stringBillPrinter;\n\n    public PricedHotel(String name){\n        super(name);\n        r1 = new PricedRoom(1,ROOM_PRICE,SAFE_PRICE);\n        r2 = new Room(2, new Safe());\n        stringBillPrinter = new StringBillPrinter();\n    }\n\n   @Override\n    public Room checkIn(String guestName) {\n        Room room = super.checkIn(guestName);\n\n        if (!(room instanceof PricedRoom)) {\n            PricedRoom pricedRoom = new PricedRoom(room.getNumber(), ROOM_PRICE, SAFE_PRICE);\n            pricedRoom.setGuest(room.getGuest());\n            room = pricedRoom;\n        }\n\n        return room;\n    }\n\n\n    public Bill getBill(String guestName, int total, BillPrinter billPrinter){\n        PricedRoom room = this.r1;\n        PricedSafe safe = (PricedSafe) this.r1.getSafe();\n        Bill bill = new Bill(billPrinter);\n\n        if (safe.isActive()) {\n            Bill.Item item1 = new Bill.Item() {\n                @Override\n                public double getPrice() {\n                    return ((total*ROOM_PRICE) + SAFE_PRICE);\n                }\n\n                @Override\n                public String toString() {\n                    return guestName;\n                }\n            };\n        } else {\n            Bill.Item item1 = new Bill.Item() {\n                @Override\n                public double getPrice() {\n                    return total*ROOM_PRICE;\n                }\n\n                @Override\n                public String toString() {\n                    return guestName;\n                }\n            };\n            bill.addItem(item1);\n        }\n        return bill;\n    }\n}\n\n</code></pre>\n<p>Test class:</p>\n<pre><code>package ss.week2.hotel.tests;\n\nimport org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport ss.week2.hotel.*;\nimport ss.week2.hotel.bill.Bill;\nimport ss.week2.hotel.bill.StringBillPrinter;\nimport ss.week2.hotel.password.Password;\n\nimport static org.junit.jupiter.api.Assertions.*;\n\npublic class PricedHotelTest {\n    /** Test variable for a &lt;tt&gt;Hotel&lt;/tt&gt; object. */\n    private PricedHotel hotel;\n    private String correctPassword;\n    private String wrongPassword;\n    public static final String GUEST_NAME_1 = &quot;Major Gowen&quot;;\n    public static final String GUEST_NAME_2 = &quot;Miss Tibbs&quot;;\n    public static final String GUEST_NAME_3 = &quot;Miss Gatsby&quot;;\n\n    public static final int NUMBER_OF_NIGHTS = 5;\n\n    /**\n     * Sets the instance variable &lt;tt&gt;hotel&lt;/tt&gt; to a well-defined initial value.\n     * All test methods should be preceded by a call to this method.\n     */\n    @BeforeEach\n    public void setUp() {\n        hotel = new PricedHotel(&quot;Fawlty Towers&quot;);\n\n        // initialisation of password-variable\n        correctPassword = new Password().getInitPass();\n        wrongPassword = correctPassword + &quot;_invalid&quot;;\n    }\n\n    /**\n     * checkIn First room should be a PricedRoom\n     */\n    @Test\n    public void testCheckIn() {\n        Room room = hotel.checkIn(GUEST_NAME_1);\n        assertTrue(room instanceof PricedRoom,\n                &quot;room should be an instance of PricedRoom&quot;);\n        Safe safe = room.getSafe();\n        assertTrue(safe instanceof PricedSafe,\n                &quot;safe should be an instance of PricedSafe&quot;);\n    }\n\n    /**\n     * If there is a free room, getFreeRoom must return a room without guest.\n     */\n    @Test\n    public void testGetFreeRoomFromNotFullHotel() {\n        Room room = hotel.getFreeRoom();\n        assertNull(room.getGuest(), &quot;A room is free&quot;);\n        hotel.checkIn(GUEST_NAME_1);\n        Room freeRoom = hotel.getFreeRoom();\n        assertNotNull(freeRoom, &quot;Another room is free&quot;);\n        assertNotEquals(room, freeRoom, &quot;Another room is free&quot;);\n    }\n\n    /**\n     * If there is no free room, getFreeRoom must return null.\n     */\n    @Test\n    public void testGetFreeRoomFromFullHotel() {\n        hotel.checkIn(GUEST_NAME_1);\n        hotel.checkIn(GUEST_NAME_2);\n\n        Room noRoom = hotel.getFreeRoom();\n        assertNull(noRoom, &quot;No room available in a full hotel&quot;);\n    }\n\n    /**\n     * getRoom must not return any room, if the guest is not checked in\n     */\n    @Test\n    public void testGetRoomBeforeCheckIn() {\n        Room room = hotel.getRoom(GUEST_NAME_1);\n        assertNull(room, &quot;Guest 1 not checked in&quot;);\n    }\n\n    /**\n     * If the guest is checked in, the returned room must be occupied by the specified guest.\n     */\n    @Test\n    public void testGetRoomAfterCheckIn() {\n        hotel.checkIn(GUEST_NAME_1);\n        Room room = hotel.getRoom(GUEST_NAME_1);\n        assertEquals(GUEST_NAME_1, room.getGuest().getName(), &quot;Guest 1 checked in&quot;);\n    }\n\n    /**\n     * A password object must be returned.\n     */\n    @Test\n    public void testGetPassword() {\n        Room room = hotel.checkIn(GUEST_NAME_1);\n        assertTrue(room instanceof PricedRoom,\n                &quot;room should be an instance of PricedRoom&quot;);\n        Safe safe = room.getSafe();\n        assertTrue(safe instanceof PricedSafe,\n                &quot;safe should be an instance of PricedSafe&quot;);\n\n        Password password = ((PricedSafe) safe).getPassword();\n        assertNotNull(password, &quot;Returned password is not null&quot;);\n    }\n\n    /**\n     * The Bill should be correctly calculated\n     */\n    @Test\n    public void testGetBill() {\n        Room room = hotel.checkIn(GUEST_NAME_1);\n        assertTrue(room instanceof PricedRoom,\n                &quot;room should be an instance of PricedRoom&quot;);\n        StringBillPrinter printer = new StringBillPrinter();\n        Bill bill = hotel.getBill(GUEST_NAME_1, NUMBER_OF_NIGHTS, printer);\n        double nightsTotal = NUMBER_OF_NIGHTS * PricedHotel.ROOM_PRICE;\n        assertEquals(nightsTotal, bill.getSum(), 0.01, &quot;Bill sum should contain only room costs.&quot;);\n        assertTrue(printer.getResult().contains(String.format(&quot;%.2f&quot;, nightsTotal)));\n\n        // Now check sum again when safe is actually active\n        assertTrue(room.getSafe() instanceof PricedSafe);\n        PricedSafe safe = (PricedSafe) room.getSafe();\n        assertFalse(safe.isActive(), &quot;Safe should be deactivated after initialisation.&quot;);\n        safe.activate(correctPassword);\n        assertTrue(safe.isActive(), &quot;Safe should be activated after activation with password.&quot;);\n        Assertions.assertEquals(nightsTotal + PricedHotel.SAFE_PRICE,\n                hotel.getBill(GUEST_NAME_1, NUMBER_OF_NIGHTS, printer).getSum());\n\n    }\n}\n\n</code></pre>\n<p>Hotel.checkIn class:</p>\n<pre><code>public Room checkIn(String name){\n        if (room1.getGuest() != null &amp;&amp; room2.getGuest() != null){ //checks if the two rooms are empty\n            return null;\n        }\n\n        if (g1 != null &amp;&amp; Objects.equals(g1.getName(), name)){ //checks if g1 is already checked in\n            return null;\n        }\n        if (g2 != null &amp;&amp; Objects.equals(g2.getName(), name)){ //checks if g2 is already checked in\n            return null;\n        }\n\n        Room freeRoom = getFreeRoom(); //gets a free room\n        if (freeRoom == null){ // checks if hotel is fill\n            return null;\n        }\n\n        Guest newGuest = new Guest(name); //new guest object with the name we provided\n        newGuest.setRoom(freeRoom); // set's the new guest to the free room\n        freeRoom.setGuest(newGuest); // set's the guest to the free room\n\n        if (g1 == null){\n            g1 = newGuest;\n        } else if (g2 == null) {\n            g2 = newGuest;\n        }\n        return freeRoom;\n    }\n</code></pre>\n"},{"tags":["java"],"comments":[{"score":1,"post_type":"question","creation_date":1701200406,"post_id":77566706,"comment_id":136745227,"body_markdown":"Both are actually applicable. In the case that you&#39;re binding for a `Function&lt;Person, R&gt;`, you can provide either a static method (from anywhere) that consumes a `Person`, _or_ a method of `Person`, both returning `R` (inferred at this point). From a reverse engineering standpoint, you&#39;d go and find out which it is (though getters are _usually_ not static). This is done for you, and if both methods exist when you do the method reference I believe it&#39;s a compiler error at the callsite of the method reference (can&#39;t check atm)","link":"https://stackoverflow.com/questions/77566706/collectors-example-question-on-lambda-functions#comment136745227_77566706","body":"Both are actually applicable. In the case that you&#39;re binding for a <code>Function&lt;Person, R&gt;</code>, you can provide either a static method (from anywhere) that consumes a <code>Person</code>, <i>or</i> a method of <code>Person</code>, both returning <code>R</code> (inferred at this point). From a reverse engineering standpoint, you&#39;d go and find out which it is (though getters are <i>usually</i> not static). This is done for you, and if both methods exist when you do the method reference I believe it&#39;s a compiler error at the callsite of the method reference (can&#39;t check atm)"},{"score":0,"post_type":"question","creation_date":1701206179,"post_id":77566706,"comment_id":136746160,"body_markdown":"Does this answer your question? [:: (double colon) operator in Java 8](https://stackoverflow.com/questions/20001427/double-colon-operator-in-java-8)","link":"https://stackoverflow.com/questions/77566706/collectors-example-question-on-lambda-functions#comment136746160_77566706","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/20001427/double-colon-operator-in-java-8\">:: (double colon) operator in Java 8</a>"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701203633,"post_id":77566748,"comment_id":136745756,"body_markdown":"I added a comment to the OP. Can you clarify this?","link":"https://stackoverflow.com/questions/77566706/collectors-example-question-on-lambda-functions/77566748#comment136745756_77566748","body":"I added a comment to the OP. Can you clarify this?"},{"score":0,"post_type":"answer","creation_date":1701207020,"post_id":77566748,"comment_id":136746267,"body_markdown":"Are you talking about [this comment](https://stackoverflow.com/posts/comments/136745380)? _You_ are the OP in this question or are you referring to it as _other poster_? Yes, `void getName(int i)` would require 2 parameters. I added something regarding that to my answer.","link":"https://stackoverflow.com/questions/77566706/collectors-example-question-on-lambda-functions/77566748#comment136746267_77566748","body":"Are you talking about <a href=\"https://stackoverflow.com/posts/comments/136745380\">this comment</a>? <i>You</i> are the OP in this question or are you referring to it as <i>other poster</i>? Yes, <code>void getName(int i)</code> would require 2 parameters. I added something regarding that to my answer."},{"score":0,"post_type":"answer","creation_date":1701229083,"post_id":77566748,"comment_id":136748657,"body_markdown":"Yes thanks. Finally I get confused with ‘ T\treduce(T identity, BinaryOperator&lt;T&gt; accumulator)’ which is ‘  BiFunction&lt;T,U,R&gt;’ and ‘ R\tapply(T t, U u)’. Would ‘.reduce(C::red)’ be a member ‘static T red(U x, U y)’ and not having the object instance of the class as the first argument?","link":"https://stackoverflow.com/questions/77566706/collectors-example-question-on-lambda-functions/77566748#comment136748657_77566748","body":"Yes thanks. Finally I get confused with ‘ T\treduce(T identity, BinaryOperator&lt;T&gt; accumulator)’ which is ‘  BiFunction&lt;T,U,R&gt;’ and ‘ R\tapply(T t, U u)’. Would ‘.reduce(C::red)’ be a member ‘static T red(U x, U y)’ and not having the object instance of the class as the first argument?"},{"score":0,"post_type":"answer","creation_date":1701244079,"post_id":77566748,"comment_id":136750133,"body_markdown":"If it is non-static, it&#39;s like adding another argument at the beginning.  `reduce(C::red)` doesn&#39;t work for `reduce(T identity, BinaryOperator&lt;T&gt; accumulator)` since it&#39;s missing `identity`.","link":"https://stackoverflow.com/questions/77566706/collectors-example-question-on-lambda-functions/77566748#comment136750133_77566748","body":"If it is non-static, it&#39;s like adding another argument at the beginning.  <code>reduce(C::red)</code> doesn&#39;t work for <code>reduce(T identity, BinaryOperator&lt;T&gt; accumulator)</code> since it&#39;s missing <code>identity</code>."}],"comment_count":4,"score":0,"last_activity_date":1701207246,"last_edit_date":1701207246,"creation_date":1701200550,"answer_id":77566748,"question_id":77566706,"body_markdown":"The receiver object is equivalent to an argument when it comes to method references.\r\n\r\nIf you take a look at [the JLS](https://docs.oracle.com/javase/specs/jls/se21/html/jls-15.html#jls-15.13), you can see:\r\n&gt; The target reference of an instance method (&#167;15.12.4.1) may be provided by the method reference expression using an ExpressionName, a Primary, or super, or it may be provided later when the method is invoked. The immediately enclosing instance of a new inner class instance (&#167;15.9.2) is provided by a lexically enclosing instance of this (&#167;8.1.3).\r\n\r\n[More specifically](https://docs.oracle.com/javase/specs/jls/se21/html/jls-15.html#jls-15.13.1):\r\n&gt; - Second, given a targeted function type with n parameters, a set of potentially applicable methods is identified:\r\n&gt;   - If the method reference expression has the form ReferenceType :: [TypeArguments] Identifier, then the potentially applicable methods are:\r\n&gt;     - the member methods of the type to search that would be potentially applicable (&#167;15.12.2.1) for a method invocation which names Identifier, has arity n, has type arguments TypeArguments, and appears in the same class as the method reference expression; plus\r\n&gt;     - the member methods of the type to search that would be potentially applicable for a method invocation which names Identifier, has arity n-1, has type arguments TypeArguments, and appears in the same class as the method reference expression.\r\n&gt; \r\n&gt; Two different arities, n and n-1, are considered, to account for the possibility that this form refers to either a static method or an instance method.\r\n\r\nIf it is a non-static method, it requires one argument less as the receiver type is used for that.\r\n\r\nIn your case, using `Person::getName` for a `Function&lt;Person,String&gt;` would work for both a `String getName()` or `static String getName(Person person)` method.\r\n\r\nIf you now have a non-static method with a single (non-receiver) parameter, your functional interface would need to have two parameters in your functional interface:\r\n```java\r\npublic class Person{\r\n    public String getName(SomeOtherType someParameter){\r\n        return &quot;something&quot;;\r\n    }\r\n}\r\n```\r\n```java\r\n//Function&lt;Person,String&gt; f = Person::getName;//doesn&#39;t compile\r\n//Function&lt;SomeOtherType,String&gt; f = Person::getName;//doesn&#39;t compile\r\nBiFunction&lt;Person,SomeOtherType,String&gt; f = Person::getName;\r\n```","link":"https://stackoverflow.com/questions/77566706/collectors-example-question-on-lambda-functions/77566748#77566748","title":"Collectors example question on Lambda functions","body":"<p>The receiver object is equivalent to an argument when it comes to method references.</p>\n<p>If you take a look at <a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-15.html#jls-15.13\" rel=\"nofollow noreferrer\">the JLS</a>, you can see:</p>\n<blockquote>\n<p>The target reference of an instance method (§15.12.4.1) may be provided by the method reference expression using an ExpressionName, a Primary, or super, or it may be provided later when the method is invoked. The immediately enclosing instance of a new inner class instance (§15.9.2) is provided by a lexically enclosing instance of this (§8.1.3).</p>\n</blockquote>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se21/html/jls-15.html#jls-15.13.1\" rel=\"nofollow noreferrer\">More specifically</a>:</p>\n<blockquote>\n<ul>\n<li>Second, given a targeted function type with n parameters, a set of potentially applicable methods is identified:\n<ul>\n<li>If the method reference expression has the form ReferenceType :: [TypeArguments] Identifier, then the potentially applicable methods are:\n<ul>\n<li>the member methods of the type to search that would be potentially applicable (§15.12.2.1) for a method invocation which names Identifier, has arity n, has type arguments TypeArguments, and appears in the same class as the method reference expression; plus</li>\n<li>the member methods of the type to search that would be potentially applicable for a method invocation which names Identifier, has arity n-1, has type arguments TypeArguments, and appears in the same class as the method reference expression.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>Two different arities, n and n-1, are considered, to account for the possibility that this form refers to either a static method or an instance method.</p>\n</blockquote>\n<p>If it is a non-static method, it requires one argument less as the receiver type is used for that.</p>\n<p>In your case, using <code>Person::getName</code> for a <code>Function&lt;Person,String&gt;</code> would work for both a <code>String getName()</code> or <code>static String getName(Person person)</code> method.</p>\n<p>If you now have a non-static method with a single (non-receiver) parameter, your functional interface would need to have two parameters in your functional interface:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Person{\n    public String getName(SomeOtherType someParameter){\n        return &quot;something&quot;;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>//Function&lt;Person,String&gt; f = Person::getName;//doesn't compile\n//Function&lt;SomeOtherType,String&gt; f = Person::getName;//doesn't compile\nBiFunction&lt;Person,SomeOtherType,String&gt; f = Person::getName;\n</code></pre>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1701201243,"post_id":77566759,"comment_id":136745380,"body_markdown":"What if ‘getName’ required an argument other then ‘Person this’ like ‘String getName(int x)’? Would ‘Function&lt;T,R&gt; ‘ still work or would I need ‘ BiFunction&lt;T,U,R&gt;’?","link":"https://stackoverflow.com/questions/77566706/collectors-example-question-on-lambda-functions/77566759#comment136745380_77566759","body":"What if ‘getName’ required an argument other then ‘Person this’ like ‘String getName(int x)’? Would ‘Function&lt;T,R&gt; ‘ still work or would I need ‘ BiFunction&lt;T,U,R&gt;’?"},{"score":0,"post_type":"answer","creation_date":1701210334,"post_id":77566759,"comment_id":136746808,"body_markdown":"I’m the first instance of the Supplier, would getName be a static menthod with no arguments?","link":"https://stackoverflow.com/questions/77566706/collectors-example-question-on-lambda-functions/77566759#comment136746808_77566759","body":"I’m the first instance of the Supplier, would getName be a static menthod with no arguments?"},{"score":0,"post_type":"answer","creation_date":1701250436,"post_id":77566759,"comment_id":136751221,"body_markdown":"@notaorb to the first question: You&#39;d need a `BiFunction`, of course: To invoke the this getName method, you need 2 things: An instance of Person, and an int. It would return a String. That describes a `BiFunction&lt;Person, Integer, String&gt;`.","link":"https://stackoverflow.com/questions/77566706/collectors-example-question-on-lambda-functions/77566759#comment136751221_77566759","body":"@notaorb to the first question: You&#39;d need a <code>BiFunction</code>, of course: To invoke the this getName method, you need 2 things: An instance of Person, and an int. It would return a String. That describes a <code>BiFunction&lt;Person, Integer, String&gt;</code>."},{"score":0,"post_type":"answer","creation_date":1701250523,"post_id":77566759,"comment_id":136751239,"body_markdown":"To the second question: I don&#39;t know what &quot;I&#39;m the first instance of the Supplier&quot; means. `getName` is what it is; the fact that you make a lambda of it doesn&#39;t magically add or remove the `static` keyword. If `getName()`&#39;s signature is `public static String getName() {}`, you need nothing at all to call it (no args, and no instance of Person), hence, it would &#39;fit&#39; if you try to turn that into a `Supplier&lt;String&gt;`; `Supplier&lt;String&gt; s = Person::getName` would thus be allowed, _if_ `getName`&#39;s signature is `static String getName();`.","link":"https://stackoverflow.com/questions/77566706/collectors-example-question-on-lambda-functions/77566759#comment136751239_77566759","body":"To the second question: I don&#39;t know what &quot;I&#39;m the first instance of the Supplier&quot; means. <code>getName</code> is what it is; the fact that you make a lambda of it doesn&#39;t magically add or remove the <code>static</code> keyword. If <code>getName()</code>&#39;s signature is <code>public static String getName() {}</code>, you need nothing at all to call it (no args, and no instance of Person), hence, it would &#39;fit&#39; if you try to turn that into a <code>Supplier&lt;String&gt;</code>; <code>Supplier&lt;String&gt; s = Person::getName</code> would thus be allowed, <i>if</i> <code>getName</code>&#39;s signature is <code>static String getName();</code>."}],"comment_count":4,"score":1,"last_activity_date":1701200629,"creation_date":1701200629,"answer_id":77566759,"question_id":77566706,"body_markdown":"There is no significant difference between:\r\n\r\n```\r\nclass Person {\r\n  String getName() { ... }\r\n}\r\n```\r\n\r\nand:\r\n\r\n```\r\nclass Irrelevant {\r\n  static String getName(Person p) { ... }\r\n}\r\n```\r\n\r\nIn fact, at the class file level they are entirely identical, in the sense that the first argument of a non-static method __is__ an instance of its class. This hidden parameter is called the receiver. You can even write it:\r\n\r\n```\r\npublic class Person {\r\n  String getName(Person this) {}\r\n}\r\n```\r\n\r\nThe above method would be called with, for example, `somePersonInstance.getName()` - the &#39;receiver&#39; parameter is __always__ passed by sticking a dot in front of the method, and that &#39;argument&#39; in front of the dot.\r\n\r\nWhen looking at lambda notation, this effect shows up too. The concept `Person::getName`, given that `getName` is a zero-args, non-static method in a class named `Person` that returns a string, turns into a function that accepts a person, and returns a string.\r\n\r\nAfter all, to invoke the method you __must__ have an instance of `Person` to do that on. You can&#39;t write: `String name = Person.getName();` - that does not compile unless `getName` is static.\r\n\r\nYou can trivially use `::` to make a function that takes zero arguments and returns a string, e.g. a `Producer&lt;String&gt;`. Simply use an actual argument, instead:\r\n\r\n```\r\nPerson p = new Person();\r\nSupplier&lt;String&gt; x = p::getName;\r\nFunction&lt;Person, String&gt; y = Person::getName;\r\n```\r\n\r\nThe first example encodes the concept of &#39;invoking the getName method of this specific instance of person&#39; and the second example encodes the concept of &#39;invoking the getName method of some person instance; that instance must be supplied&#39;.\r\n\r\nhence why the first example &#39;fits&#39; an interface that takes no arguments (and `Function&lt;Person, String&gt; z = p::getName` wouldn&#39;t compile), and the second example &#39;fits&#39; one that takes 1 arg, namely, a Person instance.\r\n","link":"https://stackoverflow.com/questions/77566706/collectors-example-question-on-lambda-functions/77566759#77566759","title":"Collectors example question on Lambda functions","body":"<p>There is no significant difference between:</p>\n<pre><code>class Person {\n  String getName() { ... }\n}\n</code></pre>\n<p>and:</p>\n<pre><code>class Irrelevant {\n  static String getName(Person p) { ... }\n}\n</code></pre>\n<p>In fact, at the class file level they are entirely identical, in the sense that the first argument of a non-static method <strong>is</strong> an instance of its class. This hidden parameter is called the receiver. You can even write it:</p>\n<pre><code>public class Person {\n  String getName(Person this) {}\n}\n</code></pre>\n<p>The above method would be called with, for example, <code>somePersonInstance.getName()</code> - the 'receiver' parameter is <strong>always</strong> passed by sticking a dot in front of the method, and that 'argument' in front of the dot.</p>\n<p>When looking at lambda notation, this effect shows up too. The concept <code>Person::getName</code>, given that <code>getName</code> is a zero-args, non-static method in a class named <code>Person</code> that returns a string, turns into a function that accepts a person, and returns a string.</p>\n<p>After all, to invoke the method you <strong>must</strong> have an instance of <code>Person</code> to do that on. You can't write: <code>String name = Person.getName();</code> - that does not compile unless <code>getName</code> is static.</p>\n<p>You can trivially use <code>::</code> to make a function that takes zero arguments and returns a string, e.g. a <code>Producer&lt;String&gt;</code>. Simply use an actual argument, instead:</p>\n<pre><code>Person p = new Person();\nSupplier&lt;String&gt; x = p::getName;\nFunction&lt;Person, String&gt; y = Person::getName;\n</code></pre>\n<p>The first example encodes the concept of 'invoking the getName method of this specific instance of person' and the second example encodes the concept of 'invoking the getName method of some person instance; that instance must be supplied'.</p>\n<p>hence why the first example 'fits' an interface that takes no arguments (and <code>Function&lt;Person, String&gt; z = p::getName</code> wouldn't compile), and the second example 'fits' one that takes 1 arg, namely, a Person instance.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701203847,"creation_date":1701203847,"answer_id":77567014,"question_id":77566706,"body_markdown":"&gt; _&quot;... Can I assume the person class has a method as follows? ...&quot;_\r\n\r\nNo.&amp;nbsp; That would be helpful though.\r\n\r\nThe syntax you&#39;re describing is referred to as a _lambda method-reference_.\r\n\r\nHere is an excerpt from the following _Java_ tutorial.\\\r\n_[Method References (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Classes and Objects)](https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html)_.\r\n\r\n&gt; &quot;... You use [lambda expressions](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html) to create anonymous methods. Sometimes, however, a lambda expression does nothing but call an existing method. In those cases, it&#39;s often clearer to refer to the existing method by name. Method references enable you to do this; they are compact, easy-to-read lambda expressions for methods that already have a name. ...\\\r\n&gt;\\\r\n&gt; ...\\\r\n&gt;\\\r\n&gt; __Kinds of Method References__\\\r\n&gt; There are four kinds of method references:\r\n&gt;\r\n&gt; | Kind | Syntax | Examples |\r\n&gt; |------|--------|----------|\r\n&gt; | Reference to a static method | ContainingClass::staticMethodName | Person::compareByAge&lt;br /&gt;MethodReferencesExamples::appendStrings |\r\n&gt; | Reference to an instance method of a particular object | containingObject::instanceMethodName | myComparisonProvider::compareByName&lt;br /&gt;myApp::appendStrings2 |\r\n&gt; | Reference to an instance method of an arbitrary object of a particular type | ContainingType::methodName | String::compareToIgnoreCase&lt;br /&gt;String::concat |\r\n&gt; | Reference to a constructor | ClassName::new | HashSet::new |\r\n\r\nIn other words, it&#39;s simpler than writing the following.\r\n\r\n```java\r\nmap(x -&gt; x.getName())\r\n```\r\n\r\nIt&#39;s worth noting, the newer, _[record class](https://docs.oracle.com/en/java/javase/21/language/records.html)_, will infer methods for each parameter.\r\n\r\nFor example, the following is valid.\r\n\r\n```java\r\nrecord Person(String name) { }\r\nPerson p = new Person(&quot;abc&quot;);\r\nString s = p.name();\r\n```","link":"https://stackoverflow.com/questions/77566706/collectors-example-question-on-lambda-functions/77567014#77567014","title":"Collectors example question on Lambda functions","body":"<blockquote>\n<p><em>&quot;... Can I assume the person class has a method as follows? ...&quot;</em></p>\n</blockquote>\n<p>No.  That would be helpful though.</p>\n<p>The syntax you're describing is referred to as a <em>lambda method-reference</em>.</p>\n<p>Here is an excerpt from the following <em>Java</em> tutorial.<br />\n<em><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">Method References (The Java™ Tutorials &gt; Learning the Java Language &gt; Classes and Objects)</a></em>.</p>\n<blockquote>\n<p>&quot;... You use <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"nofollow noreferrer\">lambda expressions</a> to create anonymous methods. Sometimes, however, a lambda expression does nothing but call an existing method. In those cases, it's often clearer to refer to the existing method by name. Method references enable you to do this; they are compact, easy-to-read lambda expressions for methods that already have a name. ...<br />\n<br />\n...<br />\n<br />\n<strong>Kinds of Method References</strong><br />\nThere are four kinds of method references:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Kind</th>\n<th>Syntax</th>\n<th>Examples</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Reference to a static method</td>\n<td>ContainingClass::staticMethodName</td>\n<td>Person::compareByAge<br />MethodReferencesExamples::appendStrings</td>\n</tr>\n<tr>\n<td>Reference to an instance method of a particular object</td>\n<td>containingObject::instanceMethodName</td>\n<td>myComparisonProvider::compareByName<br />myApp::appendStrings2</td>\n</tr>\n<tr>\n<td>Reference to an instance method of an arbitrary object of a particular type</td>\n<td>ContainingType::methodName</td>\n<td>String::compareToIgnoreCase<br />String::concat</td>\n</tr>\n<tr>\n<td>Reference to a constructor</td>\n<td>ClassName::new</td>\n<td>HashSet::new</td>\n</tr>\n</tbody>\n</table>\n</div></blockquote>\n<p>In other words, it's simpler than writing the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>map(x -&gt; x.getName())\n</code></pre>\n<p>It's worth noting, the newer, <em><a href=\"https://docs.oracle.com/en/java/javase/21/language/records.html\" rel=\"nofollow noreferrer\">record class</a></em>, will infer methods for each parameter.</p>\n<p>For example, the following is valid.</p>\n<pre class=\"lang-java prettyprint-override\"><code>record Person(String name) { }\nPerson p = new Person(&quot;abc&quot;);\nString s = p.name();\n</code></pre>\n"}],"comment_count":2,"is_answered":true,"view_count":58,"answer_count":3,"score":0,"last_activity_date":1701207246,"creation_date":1701200177,"question_id":77566706,"body_markdown":"I&#39;m reading about [Collectors][1] and [Streams][2].  I have a question regarding some Collectors example code shown here:\r\n\r\n    List&lt;String&gt; list = people.stream().map(Person::getName).collect(Collectors.toList());\r\n\r\nCan I assume the person class has a method as follows?\r\n\r\n    class Person {\r\n       String name;\r\n       String getName() { return name; }\r\n    }\r\n\r\nIf so I&#39;m confused about the definition of `map` and `Function&lt;T,R&gt;` as follows:\r\n\r\n    &lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T,? extends R&gt; mapper)\r\n\r\nFor `Function&lt;&gt;`:\r\n    R apply(T t)\r\n\r\n**Question** if apply requires an argument as above should I assume `Person` looks as follows with a `static` method or how does above code work?\r\n\r\n    class Person {\r\n       String name;\r\n       String getName() { return name; }\r\n       static String getName(Person p) { return p.getName(); }\r\n    }\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html","link":"https://stackoverflow.com/questions/77566706/collectors-example-question-on-lambda-functions","title":"Collectors example question on Lambda functions","body":"<p>I'm reading about <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html\" rel=\"nofollow noreferrer\">Collectors</a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\">Streams</a>.  I have a question regarding some Collectors example code shown here:</p>\n<pre><code>List&lt;String&gt; list = people.stream().map(Person::getName).collect(Collectors.toList());\n</code></pre>\n<p>Can I assume the person class has a method as follows?</p>\n<pre><code>class Person {\n   String name;\n   String getName() { return name; }\n}\n</code></pre>\n<p>If so I'm confused about the definition of <code>map</code> and <code>Function&lt;T,R&gt;</code> as follows:</p>\n<pre><code>&lt;R&gt; Stream&lt;R&gt; map(Function&lt;? super T,? extends R&gt; mapper)\n</code></pre>\n<p>For <code>Function&lt;&gt;</code>:\nR apply(T t)</p>\n<p><strong>Question</strong> if apply requires an argument as above should I assume <code>Person</code> looks as follows with a <code>static</code> method or how does above code work?</p>\n<pre><code>class Person {\n   String name;\n   String getName() { return name; }\n   static String getName(Person p) { return p.getName(); }\n}\n</code></pre>\n"},{"tags":["java","digital-signature"],"comments":[{"score":0,"post_type":"question","creation_date":1700098416,"post_id":77488140,"comment_id":136614293,"body_markdown":"I have the same problem, I successfully embed all my certs (CA and from my organization) using PAdES-BASELINE-B and I always get the same INDETERMINATE result","link":"https://stackoverflow.com/questions/77488140/esig-dss-signature-validation-always-returns-indeterminate#comment136614293_77488140","body":"I have the same problem, I successfully embed all my certs (CA and from my organization) using PAdES-BASELINE-B and I always get the same INDETERMINATE result"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701206790,"creation_date":1701206790,"answer_id":77567231,"question_id":77488140,"body_markdown":"There&#39;s a difference between the sample app and your code.  \r\nThe sample app comes with a pre-configured list of trusted roots (EU LOTL).  \r\nYour code comes with an empty `CommonTrustedCertificateSource` (i.e., no certificate is trusted)\r\n\r\nSee the [DSS FAQ][1] \r\n\r\n&gt; When validating a signature I receive INDETERMINATE/NO_CERTIFICATE_CHAIN_FOUND indication\r\n\r\n&gt; The result means the validator was not able to reach a trust anchor when validating the certificate chain of the signature. More likely the issue is caused by the fact you have not configured a trusted certificate source within the used CertificateVerifier. To do it, you need to add trust anchors to the instance of CertificateVerifier you use within DocumentValidator:\r\n\r\nSo you need to add some certificates to the `CommonTrustedCertificateSource`. If you&#39;re only verifying signatures created by yourself, add your CA root/your signing certificate to the trusted source. If you&#39;re verifying third-party signatures, the solution is more complex. For example, you could extract all certificated from a PDF and add them to the trusted list before validation\r\n\r\n  [1]: https://dss-demo.nowina.lu/doc/dss-documentation.html#_frequently_asked_questions_and_implementation_issues","link":"https://stackoverflow.com/questions/77488140/esig-dss-signature-validation-always-returns-indeterminate/77567231#77567231","title":"ESig DSS signature validation always returns INDETERMINATE","body":"<p>There's a difference between the sample app and your code.<br />\nThe sample app comes with a pre-configured list of trusted roots (EU LOTL).<br />\nYour code comes with an empty <code>CommonTrustedCertificateSource</code> (i.e., no certificate is trusted)</p>\n<p>See the <a href=\"https://dss-demo.nowina.lu/doc/dss-documentation.html#_frequently_asked_questions_and_implementation_issues\" rel=\"nofollow noreferrer\">DSS FAQ</a></p>\n<blockquote>\n<p>When validating a signature I receive INDETERMINATE/NO_CERTIFICATE_CHAIN_FOUND indication</p>\n</blockquote>\n<blockquote>\n<p>The result means the validator was not able to reach a trust anchor when validating the certificate chain of the signature. More likely the issue is caused by the fact you have not configured a trusted certificate source within the used CertificateVerifier. To do it, you need to add trust anchors to the instance of CertificateVerifier you use within DocumentValidator:</p>\n</blockquote>\n<p>So you need to add some certificates to the <code>CommonTrustedCertificateSource</code>. If you're only verifying signatures created by yourself, add your CA root/your signing certificate to the trusted source. If you're verifying third-party signatures, the solution is more complex. For example, you could extract all certificated from a PDF and add them to the trusted list before validation</p>\n"}],"comment_count":1,"is_answered":false,"view_count":67,"answer_count":1,"score":2,"last_activity_date":1701206790,"creation_date":1700055420,"question_id":77488140,"body_markdown":"I am trying to use European Commission-sponsored Digital Signature Service (DSS) library 5.12.1 to validate electronic signatures of the digitally signed PDF-s and XML-s.\r\n\r\n\r\nThe code I am using is\r\n\r\n```\r\nbyte[] binaryPdf = Base64.getDecoder().decode(base64EncodedDocument);\r\nCommonTrustedCertificateSource trustedCertSource = new CommonTrustedCertificateSource();\r\nCertificateVerifier cv = new CommonCertificateVerifier();\r\ncv.setAIASource(new DefaultAIASource());\r\ncv.setOcspSource(new OnlineOCSPSource());\r\ncv.setCrlSource(new OnlineCRLSource());\r\ncv.addTrustedCertSources(trustedCertSource);\r\nDSSDocument document = new InMemoryDocument(binaryPdf, shortFileName);\r\nSignedDocumentValidator documentValidator = SignedDocumentValidator.fromDocument(document);\r\ndocumentValidator.setCertificateVerifier(cv);\r\nUserFriendlyIdentifierProvider userFriendlyIdentifierProvider = new UserFriendlyIdentifierProvider();\r\ndocumentValidator.setTokenIdentifierProvider(userFriendlyIdentifierProvider);\r\nReports reports = documentValidator.validateDocument();\r\n```\r\nindicated in the dss-documentation PDF. My application *always* gets the INDETERMINATE indication with subindication NO_CERTIFICATE_CHAIN_FOUND (visible in the Certificate element of the CertificateChain). It doesn&#39;t find the trust anchors. When I use the sample application 5.12.1 for signature validation and try to validate the same document, I get the expected TOTAL_PASSED indication. My app has internet access. What I am doing wrong?\r\nThanks!","link":"https://stackoverflow.com/questions/77488140/esig-dss-signature-validation-always-returns-indeterminate","title":"ESig DSS signature validation always returns INDETERMINATE","body":"<p>I am trying to use European Commission-sponsored Digital Signature Service (DSS) library 5.12.1 to validate electronic signatures of the digitally signed PDF-s and XML-s.</p>\n<p>The code I am using is</p>\n<pre><code>byte[] binaryPdf = Base64.getDecoder().decode(base64EncodedDocument);\nCommonTrustedCertificateSource trustedCertSource = new CommonTrustedCertificateSource();\nCertificateVerifier cv = new CommonCertificateVerifier();\ncv.setAIASource(new DefaultAIASource());\ncv.setOcspSource(new OnlineOCSPSource());\ncv.setCrlSource(new OnlineCRLSource());\ncv.addTrustedCertSources(trustedCertSource);\nDSSDocument document = new InMemoryDocument(binaryPdf, shortFileName);\nSignedDocumentValidator documentValidator = SignedDocumentValidator.fromDocument(document);\ndocumentValidator.setCertificateVerifier(cv);\nUserFriendlyIdentifierProvider userFriendlyIdentifierProvider = new UserFriendlyIdentifierProvider();\ndocumentValidator.setTokenIdentifierProvider(userFriendlyIdentifierProvider);\nReports reports = documentValidator.validateDocument();\n</code></pre>\n<p>indicated in the dss-documentation PDF. My application <em>always</em> gets the INDETERMINATE indication with subindication NO_CERTIFICATE_CHAIN_FOUND (visible in the Certificate element of the CertificateChain). It doesn't find the trust anchors. When I use the sample application 5.12.1 for signature validation and try to validate the same document, I get the expected TOTAL_PASSED indication. My app has internet access. What I am doing wrong?\nThanks!</p>\n"},{"tags":["java","pdf","pdfbox"],"comments":[{"score":1,"post_type":"question","creation_date":1701188033,"post_id":77565356,"comment_id":136742942,"body_markdown":"If you use `textStripper.setSortByPosition(true)`, the result may be a bit nearer to what you get without. If the text of interest always is at the same position, you may also try the `PDFTextStripperByArea` for the rectangles of interest.","link":"https://stackoverflow.com/questions/77565356/pdfbox-is-extracting-text-out-of-order#comment136742942_77565356","body":"If you use <code>textStripper.setSortByPosition(true)</code>, the result may be a bit nearer to what you get without. If the text of interest always is at the same position, you may also try the <code>PDFTextStripperByArea</code> for the rectangles of interest."},{"score":0,"post_type":"question","creation_date":1701188396,"post_id":77565356,"comment_id":136743019,"body_markdown":"Thanks! Will try it and reach back to you!","link":"https://stackoverflow.com/questions/77565356/pdfbox-is-extracting-text-out-of-order#comment136743019_77565356","body":"Thanks! Will try it and reach back to you!"},{"score":1,"post_type":"question","creation_date":1701202004,"post_id":77565356,"comment_id":136745502,"body_markdown":"Hey man. That did exactcly what I wanted, so, if you want, post this as an answer so I can accept it! Thanks!","link":"https://stackoverflow.com/questions/77565356/pdfbox-is-extracting-text-out-of-order#comment136745502_77565356","body":"Hey man. That did exactcly what I wanted, so, if you want, post this as an answer so I can accept it! Thanks!"}],"answers":[{"comment_count":0,"score":2,"last_activity_date":1701206143,"creation_date":1701206143,"answer_id":77567188,"question_id":77565356,"body_markdown":"There are two main options: \r\n\r\n* If you use `textStripper.setSortByPosition(true)`, the text pieces gets sorted by their position on the page.\r\n\r\n* If the text of interest always is at the same position, you may also try the `PDFTextStripperByArea` for the rectangles of interest","link":"https://stackoverflow.com/questions/77565356/pdfbox-is-extracting-text-out-of-order/77567188#77567188","title":"PDFBox is extracting text out of order","body":"<p>There are two main options:</p>\n<ul>\n<li><p>If you use <code>textStripper.setSortByPosition(true)</code>, the text pieces gets sorted by their position on the page.</p>\n</li>\n<li><p>If the text of interest always is at the same position, you may also try the <code>PDFTextStripperByArea</code> for the rectangles of interest</p>\n</li>\n</ul>\n"}],"comment_count":3,"is_answered":true,"view_count":36,"answer_count":1,"score":0,"last_activity_date":1701206143,"creation_date":1701187277,"question_id":77565356,"body_markdown":"I have a PDF file which I have to extract text and get some info.\r\nThe file is like this:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI am extracting the text this way:\r\n\r\n\t\t\t\tPDDocument document = PDDocument.load(file);\r\n\t\t    \tPDFTextStripper textStripper = new PDFTextStripper();\r\n\t\t    \tString[] auxTxt = textStripper.getText(document).split(&quot;\\\\r?\\\\n&quot;);\r\n\r\n\r\nWhen I print the text, it&#180;s out of order. I need it to be column like, or line like...\r\n\r\nExample: \r\n\r\n(Line 1) `Fonte Restri&#231;&#227;o Energia Vertida Turbin&#225;vel Valor de restri&#231;&#227;o e varia&#231;&#227;o em rela&#231;&#227;o ao m&#234;s anterior`\r\n\r\n(Line 2) `Energ&#233;tica Com EVT 22.660MWh`\r\n\r\n(Line 3) `(-70%)`\r\n\r\n(Line 4) `Sem EVT 466.961MWh`\r\n\r\n...\r\n\r\nOR:\r\n\r\nColumn 1:  `Fonte Usinas Hidr&#225;ulicas`\r\n\r\nColumn 2:  `Restri&#231;&#227;o Energ&#233;tica El&#233;trica (indisponibilidade Externa) Confiabilidade El&#233;trica`\r\n\r\n...\r\n\r\nThe text should be extracted any way, it&#180;s just has to be in order.\r\nBUT.... when I print the extracted text: this is what I got.\r\n\r\n    10:26:48,933 INFO  [stdout] (default task-1)  Usinas Hidr&#225;ulicas\r\n    10:26:48,933 INFO  [stdout] (default task-1) Usinas \r\n    10:26:48,933 INFO  [stdout] (default task-1) Hidr&#225;ulicas\r\n    10:26:48,933 INFO  [stdout] (default task-1) Energ&#233;tica\r\n    10:26:48,933 INFO  [stdout] (default task-1) Confiabilidade\r\n    10:26:48,933 INFO  [stdout] (default task-1) El&#233;trica\r\n    10:26:48,933 INFO  [stdout] (default task-1) El&#233;trica \r\n    10:26:48,933 INFO  [stdout] (default task-1) (indisponibilidade\r\n    10:26:48,933 INFO  [stdout] (default task-1) Externa)\r\n    10:26:48,933 INFO  [stdout] (default task-1) Com EVT\r\n    10:26:48,933 INFO  [stdout] (default task-1) Sem EVT\r\n    10:26:48,934 INFO  [stdout] (default task-1) Com EVT\r\n    10:26:48,934 INFO  [stdout] (default task-1) Sem EVT\r\n    10:26:48,934 INFO  [stdout] (default task-1) Com EVT\r\n    10:26:48,934 INFO  [stdout] (default task-1) Sem EVT\r\n    10:26:48,934 INFO  [stdout] (default task-1) Fonte Restri&#231;&#227;o\r\n    10:26:48,934 INFO  [stdout] (default task-1) Energia Vertida \r\n    10:26:48,934 INFO  [stdout] (default task-1) Turbin&#225;vel\r\n    10:26:48,934 INFO  [stdout] (default task-1) Valor de restri&#231;&#227;o e varia&#231;&#227;o \r\n    10:26:48,934 INFO  [stdout] (default task-1) em rela&#231;&#227;o ao m&#234;s anterior\r\n    10:26:48,934 INFO  [stdout] (default task-1) 466.961 MWh\r\n    10:26:48,934 INFO  [stdout] (default task-1) (10%)\r\n    10:26:48,934 INFO  [stdout] (default task-1) 22.660 MWh\r\n    10:26:48,934 INFO  [stdout] (default task-1) (-70%)\r\n    10:26:48,934 INFO  [stdout] (default task-1) 607 MWh\r\n    10:26:48,934 INFO  [stdout] (default task-1) (-81%)\r\n    10:26:48,934 INFO  [stdout] (default task-1) 90 MWh\r\n    10:26:48,934 INFO  [stdout] (default task-1) (-96%)\r\n    10:26:48,934 INFO  [stdout] (default task-1) N&#227;o houve \r\n    10:26:48,934 INFO  [stdout] (default task-1) restri&#231;&#227;o\r\n    10:26:48,934 INFO  [stdout] (default task-1) N&#227;o houve \r\n    10:26:48,934 INFO  [stdout] (default task-1) restri&#231;&#227;o\r\n\r\n\r\nSo that&#180;s it. How can I extract the text on the PDF in the proper order? (Lines or Columns)\r\n\r\nThanks!\r\n\r\n  [1]: https://i.stack.imgur.com/S2jRu.png","link":"https://stackoverflow.com/questions/77565356/pdfbox-is-extracting-text-out-of-order","title":"PDFBox is extracting text out of order","body":"<p>I have a PDF file which I have to extract text and get some info.\nThe file is like this:</p>\n<p><a href=\"https://i.stack.imgur.com/S2jRu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S2jRu.png\" alt=\"enter image description here\" /></a></p>\n<p>I am extracting the text this way:</p>\n<pre><code>            PDDocument document = PDDocument.load(file);\n            PDFTextStripper textStripper = new PDFTextStripper();\n            String[] auxTxt = textStripper.getText(document).split(&quot;\\\\r?\\\\n&quot;);\n</code></pre>\n<p>When I print the text, it´s out of order. I need it to be column like, or line like...</p>\n<p>Example:</p>\n<p>(Line 1) <code>Fonte Restrição Energia Vertida Turbinável Valor de restrição e variação em relação ao mês anterior</code></p>\n<p>(Line 2) <code>Energética Com EVT 22.660MWh</code></p>\n<p>(Line 3) <code>(-70%)</code></p>\n<p>(Line 4) <code>Sem EVT 466.961MWh</code></p>\n<p>...</p>\n<p>OR:</p>\n<p>Column 1:  <code>Fonte Usinas Hidráulicas</code></p>\n<p>Column 2:  <code>Restrição Energética Elétrica (indisponibilidade Externa) Confiabilidade Elétrica</code></p>\n<p>...</p>\n<p>The text should be extracted any way, it´s just has to be in order.\nBUT.... when I print the extracted text: this is what I got.</p>\n<pre><code>10:26:48,933 INFO  [stdout] (default task-1)  Usinas Hidráulicas\n10:26:48,933 INFO  [stdout] (default task-1) Usinas \n10:26:48,933 INFO  [stdout] (default task-1) Hidráulicas\n10:26:48,933 INFO  [stdout] (default task-1) Energética\n10:26:48,933 INFO  [stdout] (default task-1) Confiabilidade\n10:26:48,933 INFO  [stdout] (default task-1) Elétrica\n10:26:48,933 INFO  [stdout] (default task-1) Elétrica \n10:26:48,933 INFO  [stdout] (default task-1) (indisponibilidade\n10:26:48,933 INFO  [stdout] (default task-1) Externa)\n10:26:48,933 INFO  [stdout] (default task-1) Com EVT\n10:26:48,933 INFO  [stdout] (default task-1) Sem EVT\n10:26:48,934 INFO  [stdout] (default task-1) Com EVT\n10:26:48,934 INFO  [stdout] (default task-1) Sem EVT\n10:26:48,934 INFO  [stdout] (default task-1) Com EVT\n10:26:48,934 INFO  [stdout] (default task-1) Sem EVT\n10:26:48,934 INFO  [stdout] (default task-1) Fonte Restrição\n10:26:48,934 INFO  [stdout] (default task-1) Energia Vertida \n10:26:48,934 INFO  [stdout] (default task-1) Turbinável\n10:26:48,934 INFO  [stdout] (default task-1) Valor de restrição e variação \n10:26:48,934 INFO  [stdout] (default task-1) em relação ao mês anterior\n10:26:48,934 INFO  [stdout] (default task-1) 466.961 MWh\n10:26:48,934 INFO  [stdout] (default task-1) (10%)\n10:26:48,934 INFO  [stdout] (default task-1) 22.660 MWh\n10:26:48,934 INFO  [stdout] (default task-1) (-70%)\n10:26:48,934 INFO  [stdout] (default task-1) 607 MWh\n10:26:48,934 INFO  [stdout] (default task-1) (-81%)\n10:26:48,934 INFO  [stdout] (default task-1) 90 MWh\n10:26:48,934 INFO  [stdout] (default task-1) (-96%)\n10:26:48,934 INFO  [stdout] (default task-1) Não houve \n10:26:48,934 INFO  [stdout] (default task-1) restrição\n10:26:48,934 INFO  [stdout] (default task-1) Não houve \n10:26:48,934 INFO  [stdout] (default task-1) restrição\n</code></pre>\n<p>So that´s it. How can I extract the text on the PDF in the proper order? (Lines or Columns)</p>\n<p>Thanks!</p>\n"},{"tags":["java"],"comments":[{"score":0,"post_type":"question","creation_date":1701208159,"post_id":77567053,"comment_id":136746441,"body_markdown":"Here&#39;s a duplicate, _https://stackoverflow.com/questions/77238671/java-morse-code-program-the-program-gets-stuck-on-input?rq=2_.","link":"https://stackoverflow.com/questions/77567053/do-while-loop-how-to-make-it-continue-and-send-a-error-message-when-user-inpu#comment136746441_77567053","body":"Here&#39;s a duplicate, <i><a href=\"https://stackoverflow.com/questions/77238671/java-morse-code-program-the-program-gets-stuck-on-input?rq=2\" title=\"java morse code program the program gets stuck on input\">stackoverflow.com/questions/77238671/&hellip;</a></i>."}],"comment_count":1,"is_answered":false,"view_count":22,"answer_count":0,"score":0,"last_activity_date":1701204529,"creation_date":1701204356,"last_edit_date":1701204529,"question_id":77567053,"body_markdown":"I want to make a program that will translate from Morse to English and vice-versa. \r\n\r\nThe program works(kinda). I tried making it after the first loop to continue and ask the user again. Also I tried making after the user enters invalid input to ask the user again. \r\n```\r\nimport java.util.*;\r\n\r\npublic class StringMorse{\r\n\r\n    public static void Translator(String[] args) {\r\n        Scanner userInputScanner = new Scanner(System.in);\r\n        String userInput;\r\n        String textToTranslate;\r\n        StringBuilder translatedText = new StringBuilder();\r\n        char[] alpha = { &#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;I&#39;, &#39;J&#39;,\r\n        &#39;K&#39;, &#39;L&#39;, &#39;M&#39;, &#39;N&#39;, &#39;O&#39;, &#39;P&#39;, &#39;Q&#39;, &#39;R&#39;, &#39;S&#39;, &#39;T&#39;, &#39;U&#39;, &#39;V&#39;, &#39;W&#39;,\r\n        &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;, &#39;8&#39;, &#39;9&#39;, &#39;0&#39;,\r\n        &#39; &#39; };\r\n\r\n        String[] morse = { &quot;.-&quot;, &quot;-...&quot;, &quot;-.-.&quot;, &quot;-..&quot;, &quot;.&quot;, &quot;..-.&quot;, &quot;--.&quot;,\r\n        &quot;....&quot;, &quot;..&quot;, &quot;.---&quot;, &quot;-.-&quot;, &quot;.-..&quot;, &quot;--&quot;, &quot;-.&quot;, &quot;---&quot;, &quot;.--.&quot;,\r\n        &quot;--.-&quot;, &quot;.-.&quot;, &quot;...&quot;, &quot;-&quot;, &quot;..-&quot;, &quot;...-&quot;, &quot;.--&quot;, &quot;-..-&quot;, &quot;-.--&quot;,\r\n        &quot;--..&quot;, &quot;.----&quot;, &quot;..---&quot;, &quot;...--&quot;, &quot;....-&quot;, &quot;.....&quot;, &quot;-....&quot;,\r\n        &quot;--...&quot;, &quot;---..&quot;, &quot;----.&quot;, &quot;-----&quot;, &quot;|&quot; };\r\n        do {\r\n            // get the userinput\r\n            System.out.println(&quot;--------------------------------------------------------------&quot;);\r\n        System.out.println(&quot;Welcome to Morse to English and English to Morse translator!&quot;);\r\n        System.out.println(&quot;M - Morse to English&quot;);\r\n        System.out.println(&quot;E - English to Morse&quot;);\r\n        System.out.println(&quot;X - Exit&quot;);\r\n        System.out.println(&quot;--------------------------------------------------------------&quot;);\r\n        userInput = userInputScanner.nextLine().toUpperCase();\r\n        /*if(userInput.equals(&quot;M&quot;))/* */\r\n        if(!userInput.equals(&quot;M&quot;) &amp;&amp; !userInput.equals(&quot;E&quot;) &amp;&amp; !userInput.equals(&quot;X&quot;)){\r\n            System.out.print(&quot;That was invalid input.Please try again&quot;);\r\n        }\r\n        if(userInput.equals(&quot;M&quot;)){\r\n            System.out.println(&quot;Enter a phrase in Morse&quot;);\r\n            textToTranslate = userInputScanner.nextLine();\r\n            String[] strings = textToTranslate.split(&quot; &quot;);\r\n            for(String s : strings){\r\n                for(int i=0; i&lt;morse.length; i++){\r\n                    if(morse[i].equals(s)){\r\n                        translatedText.append(alpha[i]);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            System.out.println(translatedText);\r\n        }\r\n        if(userInput.equals(&quot;E&quot;)){\r\n            System.out.println(&quot;Enter a phrase in English&quot;);\r\n            textToTranslate = userInputScanner.nextLine().toUpperCase();\r\n            for(int y=0; y&lt;textToTranslate.length(); y++ ){\r\n                for(int z=0; z&lt;alpha.length; z++){\r\n                    if(textToTranslate.charAt(y) == alpha[z]){\r\n                        translatedText.append(morse[z] +&quot; &quot;);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            System.out.println(translatedText);\r\n        }\r\n    }\r\n    while(userInput.equals(&quot;X&quot;));\r\n\r\n    userInputScanner.close();\r\n    }       \r\n\r\n}\r\n```","link":"https://stackoverflow.com/questions/77567053/do-while-loop-how-to-make-it-continue-and-send-a-error-message-when-user-inpu","title":"Do...While Loop. How to make it continue and send a error message when user input is invalid?","body":"<p>I want to make a program that will translate from Morse to English and vice-versa.</p>\n<p>The program works(kinda). I tried making it after the first loop to continue and ask the user again. Also I tried making after the user enters invalid input to ask the user again.</p>\n<pre><code>import java.util.*;\n\npublic class StringMorse{\n\n    public static void Translator(String[] args) {\n        Scanner userInputScanner = new Scanner(System.in);\n        String userInput;\n        String textToTranslate;\n        StringBuilder translatedText = new StringBuilder();\n        char[] alpha = { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J',\n        'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W',\n        'X', 'Y', 'Z', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0',\n        ' ' };\n\n        String[] morse = { &quot;.-&quot;, &quot;-...&quot;, &quot;-.-.&quot;, &quot;-..&quot;, &quot;.&quot;, &quot;..-.&quot;, &quot;--.&quot;,\n        &quot;....&quot;, &quot;..&quot;, &quot;.---&quot;, &quot;-.-&quot;, &quot;.-..&quot;, &quot;--&quot;, &quot;-.&quot;, &quot;---&quot;, &quot;.--.&quot;,\n        &quot;--.-&quot;, &quot;.-.&quot;, &quot;...&quot;, &quot;-&quot;, &quot;..-&quot;, &quot;...-&quot;, &quot;.--&quot;, &quot;-..-&quot;, &quot;-.--&quot;,\n        &quot;--..&quot;, &quot;.----&quot;, &quot;..---&quot;, &quot;...--&quot;, &quot;....-&quot;, &quot;.....&quot;, &quot;-....&quot;,\n        &quot;--...&quot;, &quot;---..&quot;, &quot;----.&quot;, &quot;-----&quot;, &quot;|&quot; };\n        do {\n            // get the userinput\n            System.out.println(&quot;--------------------------------------------------------------&quot;);\n        System.out.println(&quot;Welcome to Morse to English and English to Morse translator!&quot;);\n        System.out.println(&quot;M - Morse to English&quot;);\n        System.out.println(&quot;E - English to Morse&quot;);\n        System.out.println(&quot;X - Exit&quot;);\n        System.out.println(&quot;--------------------------------------------------------------&quot;);\n        userInput = userInputScanner.nextLine().toUpperCase();\n        /*if(userInput.equals(&quot;M&quot;))/* */\n        if(!userInput.equals(&quot;M&quot;) &amp;&amp; !userInput.equals(&quot;E&quot;) &amp;&amp; !userInput.equals(&quot;X&quot;)){\n            System.out.print(&quot;That was invalid input.Please try again&quot;);\n        }\n        if(userInput.equals(&quot;M&quot;)){\n            System.out.println(&quot;Enter a phrase in Morse&quot;);\n            textToTranslate = userInputScanner.nextLine();\n            String[] strings = textToTranslate.split(&quot; &quot;);\n            for(String s : strings){\n                for(int i=0; i&lt;morse.length; i++){\n                    if(morse[i].equals(s)){\n                        translatedText.append(alpha[i]);\n                        break;\n                    }\n                }\n            }\n            System.out.println(translatedText);\n        }\n        if(userInput.equals(&quot;E&quot;)){\n            System.out.println(&quot;Enter a phrase in English&quot;);\n            textToTranslate = userInputScanner.nextLine().toUpperCase();\n            for(int y=0; y&lt;textToTranslate.length(); y++ ){\n                for(int z=0; z&lt;alpha.length; z++){\n                    if(textToTranslate.charAt(y) == alpha[z]){\n                        translatedText.append(morse[z] +&quot; &quot;);\n                        break;\n                    }\n                }\n            }\n            System.out.println(translatedText);\n        }\n    }\n    while(userInput.equals(&quot;X&quot;));\n\n    userInputScanner.close();\n    }       \n\n}\n</code></pre>\n"},{"tags":["java","android","appium"],"comments":[{"score":0,"post_type":"question","creation_date":1701320751,"post_id":77566973,"comment_id":136761946,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","link":"https://stackoverflow.com/questions/77566973/clicking-a-link-embedded-in-an-element-in-a-sentence-using-appium-java-on-my-w#comment136761946_77566973","body":"Please provide enough code so others can better understand or reproduce the problem."}],"comment_count":1,"is_answered":false,"view_count":11,"answer_count":0,"score":-1,"last_activity_date":1701203269,"creation_date":1701203269,"question_id":77566973,"body_markdown":"how can i click only the linked text from a sentence/ element with a text like this &quot; Please manually enter the address or scan for controllers. here i need to click only scan for controllers which is a clickable text in the sentence from the element in my android device using appium + java.\r\n\r\ni tried this  using uiautomator and uiselector with @androidFindBy using xpath but that didnt work\r\n\r\nalso i am not looking for x, y coordinates method to access this clickable text coz i need to automate this for different devices having different resolutions","link":"https://stackoverflow.com/questions/77566973/clicking-a-link-embedded-in-an-element-in-a-sentence-using-appium-java-on-my-w","title":"Clicking a link embedded in an element in a sentence using appium + java on my windows machine without using coordinate system","body":"<p>how can i click only the linked text from a sentence/ element with a text like this &quot; Please manually enter the address or scan for controllers. here i need to click only scan for controllers which is a clickable text in the sentence from the element in my android device using appium + java.</p>\n<p>i tried this  using uiautomator and uiselector with @androidFindBy using xpath but that didnt work</p>\n<p>also i am not looking for x, y coordinates method to access this clickable text coz i need to automate this for different devices having different resolutions</p>\n"},{"tags":["java","maven","pom.xml"],"comments":[{"score":0,"post_type":"question","creation_date":1701185591,"post_id":77565135,"comment_id":136742429,"body_markdown":"If you run the proper goals yes it will produce a jar.","link":"https://stackoverflow.com/questions/77565135/ways-to-generate-jar-file-from-pom-xml#comment136742429_77565135","body":"If you run the proper goals yes it will produce a jar."},{"score":1,"post_type":"question","creation_date":1701186159,"post_id":77565135,"comment_id":136742554,"body_markdown":"well i wonder, if you already have the files, why not just try it out?","link":"https://stackoverflow.com/questions/77565135/ways-to-generate-jar-file-from-pom-xml#comment136742554_77565135","body":"well i wonder, if you already have the files, why not just try it out?"},{"score":0,"post_type":"question","creation_date":1701187521,"post_id":77565135,"comment_id":136742832,"body_markdown":"@GyroGearless  I am using a buildpacks for java to produce the jar file with my minimalistic content of pom.xml. This is to test that buildpack works. It does not produce the jar file when I checked the container.  With my limited knowledge on maven workflows, I was testing with very minimal contents in pom.xml file. It produces a proper jar file  when i have a shade plugin &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;. So I was wondering, if user can try to produce jar file any other ways?","link":"https://stackoverflow.com/questions/77565135/ways-to-generate-jar-file-from-pom-xml#comment136742832_77565135","body":"@GyroGearless  I am using a buildpacks for java to produce the jar file with my minimalistic content of pom.xml. This is to test that buildpack works. It does not produce the jar file when I checked the container.  With my limited knowledge on maven workflows, I was testing with very minimal contents in pom.xml file. It produces a proper jar file  when i have a shade plugin &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;. So I was wondering, if user can try to produce jar file any other ways?"},{"score":0,"post_type":"question","creation_date":1701191473,"post_id":77565135,"comment_id":136743748,"body_markdown":"This is not your main problem. You even know the answer by testing it. You should post a new question about the original problem you are trying to resolve with the details for reproduction.","link":"https://stackoverflow.com/questions/77565135/ways-to-generate-jar-file-from-pom-xml#comment136743748_77565135","body":"This is not your main problem. You even know the answer by testing it. You should post a new question about the original problem you are trying to resolve with the details for reproduction."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701202682,"last_edit_date":1701202682,"creation_date":1701202172,"answer_id":77566888,"question_id":77565135,"body_markdown":"If you take a look at the `Packaging` section of `Introduction to the lifecycle` [in the documentation](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#packaging), you can see that it will execute `jar:jar` (the `jar` goal of the `maven-jar-plugin`) in the `package` phase by default.\r\n\r\nYou can also see this in [the `Usage` section of the `maven-jar-plugin` documentation](https://maven.apache.org/plugins/maven-jar-plugin/usage.html).\r\n&gt; Usually there is no need to mentioned the &#39;maven-jar-plugin&#39; explicit cause it&#39;s bound to the Maven Build Life Cycle.\r\n\r\nThis is assuming you are using the `jar` packaging which is the default. In your example, you even set this explicitely with `&lt;packaging&gt;jar&lt;/packaging&gt;` in your `pom.xml`.\r\n\r\nThe `jar` goal of the `maven-jar-plugin` will create a JAR from your compiled project sources and resources. However, it won&#39;t contain any dependencies.","link":"https://stackoverflow.com/questions/77565135/ways-to-generate-jar-file-from-pom-xml/77566888#77566888","title":"ways to generate jar file from pom.xml","body":"<p>If you take a look at the <code>Packaging</code> section of <code>Introduction to the lifecycle</code> <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#packaging\" rel=\"nofollow noreferrer\">in the documentation</a>, you can see that it will execute <code>jar:jar</code> (the <code>jar</code> goal of the <code>maven-jar-plugin</code>) in the <code>package</code> phase by default.</p>\n<p>You can also see this in <a href=\"https://maven.apache.org/plugins/maven-jar-plugin/usage.html\" rel=\"nofollow noreferrer\">the <code>Usage</code> section of the <code>maven-jar-plugin</code> documentation</a>.</p>\n<blockquote>\n<p>Usually there is no need to mentioned the 'maven-jar-plugin' explicit cause it's bound to the Maven Build Life Cycle.</p>\n</blockquote>\n<p>This is assuming you are using the <code>jar</code> packaging which is the default. In your example, you even set this explicitely with <code>&lt;packaging&gt;jar&lt;/packaging&gt;</code> in your <code>pom.xml</code>.</p>\n<p>The <code>jar</code> goal of the <code>maven-jar-plugin</code> will create a JAR from your compiled project sources and resources. However, it won't contain any dependencies.</p>\n"}],"comment_count":4,"is_answered":true,"view_count":50,"answer_count":1,"score":0,"last_activity_date":1701202682,"creation_date":1701185414,"question_id":77565135,"body_markdown":"Wanted to check , what produces a jar file from pom.xml with no plugins included?  Let say I a class file \r\n\r\n```\r\nmy-app/\r\n|-- src/\r\n    |-- main/\r\n        |-- java/\r\n            |-- com/\r\n                |-- example/\r\n                    |-- MyClass.java\r\n|-- pom.xml\r\n\r\n```\r\n\r\n```\r\nMyclass.java\r\npackage com.example;\r\n\r\npublic class MyClass {\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;Hello, Maven!&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npom.xml\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;my-app&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;build&gt;\r\n    &lt;finalName&gt;model&lt;/finalName&gt;\r\n    &lt;/build&gt;\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nshould the above pom.xml without plugins produce a jar file ?\r\n\r\n","link":"https://stackoverflow.com/questions/77565135/ways-to-generate-jar-file-from-pom-xml","title":"ways to generate jar file from pom.xml","body":"<p>Wanted to check , what produces a jar file from pom.xml with no plugins included?  Let say I a class file</p>\n<pre><code>my-app/\n|-- src/\n    |-- main/\n        |-- java/\n            |-- com/\n                |-- example/\n                    |-- MyClass.java\n|-- pom.xml\n\n</code></pre>\n<pre><code>Myclass.java\npackage com.example;\n\npublic class MyClass {\n    public static void main(String[] args) {\n        System.out.println(&quot;Hello, Maven!&quot;);\n    }\n}\n</code></pre>\n<pre><code>pom.xml\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;my-app&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;build&gt;\n    &lt;finalName&gt;model&lt;/finalName&gt;\n    &lt;/build&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n&lt;/project&gt;\n</code></pre>\n<p>should the above pom.xml without plugins produce a jar file ?</p>\n"},{"tags":["java","class","methods","overriding"],"comments":[{"score":1,"post_type":"question","creation_date":1701202822,"post_id":77566912,"comment_id":136745633,"body_markdown":"Add a block of code in your `paintComponent` method that will throw an exception. Then catch it and inside the catch block, call the exception&#39;s `printStackTrace` method. Then you&#39;ll see how it&#39;s called.","link":"https://stackoverflow.com/questions/77566912/why-is-the-paintcomponent-method-executed-without-being-called#comment136745633_77566912","body":"Add a block of code in your <code>paintComponent</code> method that will throw an exception. Then catch it and inside the catch block, call the exception&#39;s <code>printStackTrace</code> method. Then you&#39;ll see how it&#39;s called."},{"score":0,"post_type":"question","creation_date":1701205539,"post_id":77566912,"comment_id":136746072,"body_markdown":"Internally Swing components will call the paintComponent(...) method when the component needs to be painted. Read the section from the Swing tutorial on [Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html) for the high level overview of how painting works. Don&#39;t forget to click on the &quot;Painting in Awt and Swing&quot; link for more details.","link":"https://stackoverflow.com/questions/77566912/why-is-the-paintcomponent-method-executed-without-being-called#comment136746072_77566912","body":"Internally Swing components will call the paintComponent(...) method when the component needs to be painted. Read the section from the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Custom Painting</a> for the high level overview of how painting works. Don&#39;t forget to click on the &quot;Painting in Awt and Swing&quot; link for more details."},{"score":0,"post_type":"question","creation_date":1701208107,"post_id":77566912,"comment_id":136746428,"body_markdown":"The system where you’re running (Windows, OSX, Linux, etc.) will continually ask windows to paint themselves.  Java translates each such request into a call to `paint`, which in Swing components will delegate to paintComponent (and a few other methods).","link":"https://stackoverflow.com/questions/77566912/why-is-the-paintcomponent-method-executed-without-being-called#comment136746428_77566912","body":"The system where you’re running (Windows, OSX, Linux, etc.) will continually ask windows to paint themselves.  Java translates each such request into a call to <code>paint</code>, which in Swing components will delegate to paintComponent (and a few other methods)."},{"score":0,"post_type":"question","creation_date":1701208535,"post_id":77566912,"comment_id":136746508,"body_markdown":"See the checked answer to this question: https://stackoverflow.com/questions/7764602/how-is-paint-running-without-being-called-in-the-main-method","link":"https://stackoverflow.com/questions/77566912/why-is-the-paintcomponent-method-executed-without-being-called#comment136746508_77566912","body":"See the checked answer to this question: <a href=\"https://stackoverflow.com/questions/7764602/how-is-paint-running-without-being-called-in-the-main-method\" title=\"how is paint running without being called in the main method\">stackoverflow.com/questions/7764602/&hellip;</a>"},{"score":2,"post_type":"question","creation_date":1701212179,"post_id":77566912,"comment_id":136747035,"body_markdown":"@Jeff FYI `Thread#dumpStack()` does that without needing to throw and catch an Exception","link":"https://stackoverflow.com/questions/77566912/why-is-the-paintcomponent-method-executed-without-being-called#comment136747035_77566912","body":"@Jeff FYI <code>Thread#dumpStack()</code> does that without needing to throw and catch an Exception"},{"score":0,"post_type":"question","creation_date":1701212307,"post_id":77566912,"comment_id":136747053,"body_markdown":"@amir check the [documentation](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/swing/JComponent.html#paint(java.awt.Graphics)) of `paint()`: &quot;Invoked by Swing to draw components. ...  This method actually delegates the work of painting to three protected methods: `paintComponent`, `paintBorder`, and `paintChildren`.&quot;","link":"https://stackoverflow.com/questions/77566912/why-is-the-paintcomponent-method-executed-without-being-called#comment136747053_77566912","body":"@amir check the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/javax/swing/JComponent.html#paint(java.awt.Graphics)\" rel=\"nofollow noreferrer\">documentation</a> of <code>paint()</code>: &quot;Invoked by Swing to draw components. ...  This method actually delegates the work of painting to three protected methods: <code>paintComponent</code>, <code>paintBorder</code>, and <code>paintChildren</code>.&quot;"},{"score":0,"post_type":"question","creation_date":1701216927,"post_id":77566912,"comment_id":136747548,"body_markdown":"@user85421, poor wording on my part. My point was that behind the scenes  paintComponent() is automatically invoked whenever the component needs to be painted so you NEVER need to invoke it directly.  You should also NEVER invoke paint() directly, so I would not consider that the starting point for painting a component. As I stated in my answer read the tutorial and follow the links for a more in depth description of everything that goes on for a component to be painted.","link":"https://stackoverflow.com/questions/77566912/why-is-the-paintcomponent-method-executed-without-being-called#comment136747548_77566912","body":"@user85421, poor wording on my part. My point was that behind the scenes  paintComponent() is automatically invoked whenever the component needs to be painted so you NEVER need to invoke it directly.  You should also NEVER invoke paint() directly, so I would not consider that the starting point for painting a component. As I stated in my answer read the tutorial and follow the links for a more in depth description of everything that goes on for a component to be painted."},{"score":0,"post_type":"question","creation_date":1701245593,"post_id":77566912,"comment_id":136750376,"body_markdown":"@camickr 1) my comment was clearly meant to OP, I even added an (unnecessary) @; 2) I never said it is the starting point of anything, it is just an explanation of &quot;Why is the paintComponent() method executed&quot; - the title of this question; 3) it also explains that, I quote: &quot;Applications should not invoke paint directly, ...&quot; (I will not repeat the whole documentation here, you are actually one that already disapproved such before)","link":"https://stackoverflow.com/questions/77566912/why-is-the-paintcomponent-method-executed-without-being-called#comment136750376_77566912","body":"@camickr 1) my comment was clearly meant to OP, I even added an (unnecessary) @; 2) I never said it is the starting point of anything, it is just an explanation of &quot;Why is the paintComponent() method executed&quot; - the title of this question; 3) it also explains that, I quote: &quot;Applications should not invoke paint directly, ...&quot; (I will not repeat the whole documentation here, you are actually one that already disapproved such before)"}],"comment_count":8,"is_answered":false,"view_count":40,"answer_count":0,"score":0,"last_activity_date":1701202453,"creation_date":1701202453,"question_id":77566912,"body_markdown":"i am just learning Java , today i ran into a problem while practicing. first, I inherited from **JPanel** and drew a diagonal line using the paintComponent method. but in the main class of the program, I never called the paintComponent method, but still it was executed. How is such a thing possible? \r\n\r\n```\r\nimport java.awt.Graphics;\r\nimport javax.swing.JPanel;\r\npublic class MyPanel extends JPanel{\r\n    @Override\r\n    public void paintComponent(Graphics g){\r\n        super.paintComponent(g);\r\n        int w = getWidth();\r\n        int h = getHeight();\r\n        g.drawLine(0 , 0 , w , h);\r\n     }\r\n} \r\n```\r\n\r\n\r\nthen i added MyPanel to JFrame in the main class : \r\n\r\n\r\n```\r\nimport javax.swing.JFrame;\r\npublic class main26 {\r\n    public static void main(String[] args) {\r\n        MyPanel p1 = new MyPanel();\r\n        JFrame f1 = new JFrame();\r\n        f1.add(p1);\r\n        f1.setSize(500,500);\r\n        f1.setLocationRelativeTo(null);\r\n        f1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        f1.setVisible(true);\r\n     }\r\n}\r\n   \r\n        \r\n```\r\n\r\n\r\n\r\nIn fact, i expected that the diagonal line would not be executed until I called the paintComponent method from MyPanel. But to my surprise, this line was drawn without calling it and just by adding MyPanel to JFrame . ","link":"https://stackoverflow.com/questions/77566912/why-is-the-paintcomponent-method-executed-without-being-called","title":"Why is the paintComponent() method executed without being called?","body":"<p>i am just learning Java , today i ran into a problem while practicing. first, I inherited from <strong>JPanel</strong> and drew a diagonal line using the paintComponent method. but in the main class of the program, I never called the paintComponent method, but still it was executed. How is such a thing possible?</p>\n<pre><code>import java.awt.Graphics;\nimport javax.swing.JPanel;\npublic class MyPanel extends JPanel{\n    @Override\n    public void paintComponent(Graphics g){\n        super.paintComponent(g);\n        int w = getWidth();\n        int h = getHeight();\n        g.drawLine(0 , 0 , w , h);\n     }\n} \n</code></pre>\n<p>then i added MyPanel to JFrame in the main class :</p>\n<pre><code>import javax.swing.JFrame;\npublic class main26 {\n    public static void main(String[] args) {\n        MyPanel p1 = new MyPanel();\n        JFrame f1 = new JFrame();\n        f1.add(p1);\n        f1.setSize(500,500);\n        f1.setLocationRelativeTo(null);\n        f1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        f1.setVisible(true);\n     }\n}\n   \n        \n</code></pre>\n<p>In fact, i expected that the diagonal line would not be executed until I called the paintComponent method from MyPanel. But to my surprise, this line was drawn without calling it and just by adding MyPanel to JFrame .</p>\n"},{"tags":["java","json","codeigniter","encoding"],"comments":[{"score":1,"post_type":"question","creation_date":1701187253,"post_id":77565205,"comment_id":136742783,"body_markdown":"You should show an attempt to solve this yourself. If you get stuck, then explain where you are stuck. To improve your understanding of Stack Overflow and how to use it, may I suggest these resources:  [Tour](https://stackoverflow.com/tour), [Help Center](https://stackoverflow.com/help), [How to Ask a Good Question](https://stackoverflow.com/help/how-to-ask), [Minimal Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example), [Ask / Answer Homework Questions](https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions)","link":"https://stackoverflow.com/questions/77565205/how-to-get-index-of-a-string-in-an-a-list#comment136742783_77565205","body":"You should show an attempt to solve this yourself. If you get stuck, then explain where you are stuck. To improve your understanding of Stack Overflow and how to use it, may I suggest these resources:  <a href=\"https://stackoverflow.com/tour\">Tour</a>, <a href=\"https://stackoverflow.com/help\">Help Center</a>, <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask a Good Question</a>, <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal Reproducible Example</a>, <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\">Ask / Answer Homework Questions</a>"},{"score":2,"post_type":"question","creation_date":1701188729,"post_id":77565205,"comment_id":136743102,"body_markdown":"In the question body, the description of what is to be done, seems to be very different from what is being asked in the question header.  Also, in your sample code, the three `String []` seem to be not related to the problem.","link":"https://stackoverflow.com/questions/77565205/how-to-get-index-of-a-string-in-an-a-list#comment136743102_77565205","body":"In the question body, the description of what is to be done, seems to be very different from what is being asked in the question header.  Also, in your sample code, the three <code>String []</code> seem to be not related to the problem."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701195203,"post_id":77565266,"comment_id":136744373,"body_markdown":"For reference, _[Comparable#compareTo](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Comparable.html#compareTo(T))_.","link":"https://stackoverflow.com/questions/77565205/how-to-get-index-of-a-string-in-an-a-list/77565266#comment136744373_77565266","body":"For reference, <i><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Comparable.html#compareTo(T)\" rel=\"nofollow noreferrer\">Comparable#compareTo</a></i>."}],"comment_count":1,"score":3,"last_activity_date":1701186602,"creation_date":1701186602,"answer_id":77565266,"question_id":77565205,"body_markdown":"I&#39;d compare each component individually, and then use [`signum`](https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#signum-double-) to get strictly `1`, `-1` or `0`.\r\n\r\n```\r\npublic int userCompare(User a, User b) {\r\n    int retVal = a.getName().compareTo(b.getName);\r\n    if (retVal != 0) {\r\n        return (int) Math.signum(retVal);\r\n    }\r\n\r\n    retVal = Integer.compare(a.getId(), b.getId());\r\n    return (int) Math.signum(retVal);\r\n}\r\n```\r\n\r\nSide note - for the purpose of sorting in Java, you don&#39;t need to strictly return `1`, `-1` or `0`, you can just return an arbitrary positive, negative or zero value. In other words, the usage of `signum` is required by question, but isn&#39;t strictly required for sorting.","link":"https://stackoverflow.com/questions/77565205/how-to-get-index-of-a-string-in-an-a-list/77565266#77565266","title":"How to get index of a string in an a list","body":"<p>I'd compare each component individually, and then use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#signum-double-\" rel=\"nofollow noreferrer\"><code>signum</code></a> to get strictly <code>1</code>, <code>-1</code> or <code>0</code>.</p>\n<pre><code>public int userCompare(User a, User b) {\n    int retVal = a.getName().compareTo(b.getName);\n    if (retVal != 0) {\n        return (int) Math.signum(retVal);\n    }\n\n    retVal = Integer.compare(a.getId(), b.getId());\n    return (int) Math.signum(retVal);\n}\n</code></pre>\n<p>Side note - for the purpose of sorting in Java, you don't need to strictly return <code>1</code>, <code>-1</code> or <code>0</code>, you can just return an arbitrary positive, negative or zero value. In other words, the usage of <code>signum</code> is required by question, but isn't strictly required for sorting.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701196771,"creation_date":1701196771,"answer_id":77566385,"question_id":77565205,"body_markdown":"I would utilize the _[String#compareTo](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html#compareTo(java.lang.String))_, and _[Integer#compare](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#compare(int,int))_ methods here.\r\n\r\n```java\r\nint userCompare(String nameA, int idA, String nameB, int idB) {\r\n    int t;\r\n    if ((t = nameA.compareTo(nameB)) == 0)\r\n        return Integer.compare(idA, idB);\r\n    return t;\r\n}\r\n```\r\n\r\nIf you&#39;re looking to implement the actual comparison routine, review the _source_ for each of those methods.\\\r\nFor a _String_, it&#39;s just a traversal of the _bytes_.\r\n\r\nHere is utilized _StringLatin1#compareTo_ method.\\\r\n_[GitHub &amp;ndash; OpenJDK &amp;ndash; StringLatin1.java &amp;ndash; compareTo(byte[], byte[], int, int)](https://github.com/openjdk/jdk/blob/jdk-21%2B9/src/java.base/share/classes/java/lang/StringLatin1.java#L110)_.\r\n\r\n```java\r\npublic static int compareTo(byte[] value, byte[] other, int len1, int len2) {\r\n    int lim = Math.min(len1, len2);\r\n    for (int k = 0; k &lt; lim; k++) {\r\n        if (value[k] != other[k]) {\r\n            return getChar(value, k) - getChar(other, k);\r\n        }\r\n    }\r\n    return len1 - len2;\r\n}\r\n```\r\n\r\nAnd, for an _Integer_ it&#39;s just a _relational_, and _equality_, operation.\\\r\n_[GitHub &amp;ndash; OpenJDK &amp;ndash; Integer.java &amp;ndash; compare(int, int)](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/lang/Integer.java#L1432)_.\r\n\r\n```java\r\n/**\r\n * Compares two {@code int} values numerically.\r\n * The value returned is identical to what would be returned by:\r\n * &lt;pre&gt;\r\n *    Integer.valueOf(x).compareTo(Integer.valueOf(y))\r\n * &lt;/pre&gt;\r\n *\r\n * @param  x the first {@code int} to compare\r\n * @param  y the second {@code int} to compare\r\n * @return the value {@code 0} if {@code x == y};\r\n *         a value less than {@code 0} if {@code x &lt; y}; and\r\n *         a value greater than {@code 0} if {@code x &gt; y}\r\n * @since 1.7\r\n */\r\npublic static int compare(int x, int y) {\r\n    return (x &lt; y) ? -1 : ((x == y) ? 0 : 1);\r\n}\r\n```","link":"https://stackoverflow.com/questions/77565205/how-to-get-index-of-a-string-in-an-a-list/77566385#77566385","title":"How to get index of a string in an a list","body":"<p>I would utilize the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html#compareTo(java.lang.String)\" rel=\"nofollow noreferrer\">String#compareTo</a></em>, and <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Integer.html#compare(int,int)\" rel=\"nofollow noreferrer\">Integer#compare</a></em> methods here.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int userCompare(String nameA, int idA, String nameB, int idB) {\n    int t;\n    if ((t = nameA.compareTo(nameB)) == 0)\n        return Integer.compare(idA, idB);\n    return t;\n}\n</code></pre>\n<p>If you're looking to implement the actual comparison routine, review the <em>source</em> for each of those methods.<br />\nFor a <em>String</em>, it's just a traversal of the <em>bytes</em>.</p>\n<p>Here is utilized <em>StringLatin1#compareTo</em> method.<br />\n<em><a href=\"https://github.com/openjdk/jdk/blob/jdk-21%2B9/src/java.base/share/classes/java/lang/StringLatin1.java#L110\" rel=\"nofollow noreferrer\">GitHub – OpenJDK – StringLatin1.java – compareTo(byte[], byte[], int, int)</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int compareTo(byte[] value, byte[] other, int len1, int len2) {\n    int lim = Math.min(len1, len2);\n    for (int k = 0; k &lt; lim; k++) {\n        if (value[k] != other[k]) {\n            return getChar(value, k) - getChar(other, k);\n        }\n    }\n    return len1 - len2;\n}\n</code></pre>\n<p>And, for an <em>Integer</em> it's just a <em>relational</em>, and <em>equality</em>, operation.<br />\n<em><a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/lang/Integer.java#L1432\" rel=\"nofollow noreferrer\">GitHub – OpenJDK – Integer.java – compare(int, int)</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Compares two {@code int} values numerically.\n * The value returned is identical to what would be returned by:\n * &lt;pre&gt;\n *    Integer.valueOf(x).compareTo(Integer.valueOf(y))\n * &lt;/pre&gt;\n *\n * @param  x the first {@code int} to compare\n * @param  y the second {@code int} to compare\n * @return the value {@code 0} if {@code x == y};\n *         a value less than {@code 0} if {@code x &lt; y}; and\n *         a value greater than {@code 0} if {@code x &gt; y}\n * @since 1.7\n */\npublic static int compare(int x, int y) {\n    return (x &lt; y) ? -1 : ((x == y) ? 0 : 1);\n}\n</code></pre>\n"}],"comment_count":2,"is_answered":true,"view_count":80,"answer_count":2,"score":2,"last_activity_date":1701202079,"creation_date":1701186050,"last_edit_date":1701186176,"question_id":77565205,"body_markdown":"```\r\npublic int userCompare(String s1, int i1, String s2, int i2){\r\n        String[] alphabety = {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;o&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;, &quot;t&quot;, &quot;u&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;};\r\n        String[] firstThing = s1.split(&quot;(?!^)&quot;);\r\n        String[] secondThing = s2.split(&quot;(?!^)&quot;);\r\n}\r\n```\r\nHow do I complete the following:\r\n\r\nCreate a method called userCompare that will return a -1, 1, or 0 based on the following: We have data for two users, A and B, each with a String name and an int id. The goal is to order the users such as for sorting. Return -1 if A comes before B, 1 if A comes after B, and 0 if they are the same. Order first by the string names, and then by the id numbers if the names are the same.","link":"https://stackoverflow.com/questions/77565205/how-to-get-index-of-a-string-in-an-a-list","title":"How to get index of a string in an a list","body":"<pre><code>public int userCompare(String s1, int i1, String s2, int i2){\n        String[] alphabety = {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;o&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;, &quot;t&quot;, &quot;u&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;};\n        String[] firstThing = s1.split(&quot;(?!^)&quot;);\n        String[] secondThing = s2.split(&quot;(?!^)&quot;);\n}\n</code></pre>\n<p>How do I complete the following:</p>\n<p>Create a method called userCompare that will return a -1, 1, or 0 based on the following: We have data for two users, A and B, each with a String name and an int id. The goal is to order the users such as for sorting. Return -1 if A comes before B, 1 if A comes after B, and 0 if they are the same. Order first by the string names, and then by the id numbers if the names are the same.</p>\n"},{"tags":["java","maven","dependencies"],"comments":[{"score":0,"post_type":"question","creation_date":1701202986,"post_id":77566751,"comment_id":136745670,"body_markdown":"Maybe these are `test` or `provided` dependencies (even though these don&#39;t look like test dependencies). `mvn package` also runs tests while `dependency:copy-dependencies` doesn&#39;t.","link":"https://stackoverflow.com/questions/77566751/why-does-mvn-dependencycopy-dependencies-then-mvn-package-download-more-and#comment136745670_77566751","body":"Maybe these are <code>test</code> or <code>provided</code> dependencies (even though these don&#39;t look like test dependencies). <code>mvn package</code> also runs tests while <code>dependency:copy-dependencies</code> doesn&#39;t."},{"score":0,"post_type":"question","creation_date":1701203065,"post_id":77566751,"comment_id":136745688,"body_markdown":"`I&#39;d like to download dependencies in a separate step before compiling. ` first why in separate step? If they are needed they will be downloaded why using dependency plugin for that?","link":"https://stackoverflow.com/questions/77566751/why-does-mvn-dependencycopy-dependencies-then-mvn-package-download-more-and#comment136745688_77566751","body":"<code>I&#39;d like to download dependencies in a separate step before compiling. </code> first why in separate step? If they are needed they will be downloaded why using dependency plugin for that?"},{"score":0,"post_type":"question","creation_date":1701203098,"post_id":77566751,"comment_id":136745695,"body_markdown":"By the way, you can use [`mvn dependency:go-offline`](https://maven.apache.org/plugins/maven-dependency-plugin/go-offline-mojo.html) for downloading dependencies.","link":"https://stackoverflow.com/questions/77566751/why-does-mvn-dependencycopy-dependencies-then-mvn-package-download-more-and#comment136745695_77566751","body":"By the way, you can use <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/go-offline-mojo.html\" rel=\"nofollow noreferrer\"><code>mvn dependency:go-offline</code></a> for downloading dependencies."},{"score":0,"post_type":"question","creation_date":1701204118,"post_id":77566751,"comment_id":136745838,"body_markdown":"@khmarbaise when building a docker image, it is more efficient to separate steps that change frequently from those that don&#39;t. Earlier steps can be cached and not repeated on later runs.","link":"https://stackoverflow.com/questions/77566751/why-does-mvn-dependencycopy-dependencies-then-mvn-package-download-more-and#comment136745838_77566751","body":"@khmarbaise when building a docker image, it is more efficient to separate steps that change frequently from those that don&#39;t. Earlier steps can be cached and not repeated on later runs."},{"score":0,"post_type":"question","creation_date":1701204185,"post_id":77566751,"comment_id":136745851,"body_markdown":"@dan1st my real workflow, before reducing to a test case, had `-Dmaven.test.skip=true` but maybe it was still downloading test dependencies? I will investigate.","link":"https://stackoverflow.com/questions/77566751/why-does-mvn-dependencycopy-dependencies-then-mvn-package-download-more-and#comment136745851_77566751","body":"@dan1st my real workflow, before reducing to a test case, had <code>-Dmaven.test.skip=true</code> but maybe it was still downloading test dependencies? I will investigate."},{"score":0,"post_type":"question","creation_date":1701207385,"post_id":77566751,"comment_id":136746317,"body_markdown":"Can you run `mvn dependency:tree` and check how these dependencies are referenced? That command should also display the scopes of these dependencies. The dependencies might also be referenced by the some plugins themselves in which case `dependency:tree` would not necessarily show them. Anyways, I recommend `mvn dependency:go-offline` if you really want to make sure all necessary dependencies etc are downloaded.","link":"https://stackoverflow.com/questions/77566751/why-does-mvn-dependencycopy-dependencies-then-mvn-package-download-more-and#comment136746317_77566751","body":"Can you run <code>mvn dependency:tree</code> and check how these dependencies are referenced? That command should also display the scopes of these dependencies. The dependencies might also be referenced by the some plugins themselves in which case <code>dependency:tree</code> would not necessarily show them. Anyways, I recommend <code>mvn dependency:go-offline</code> if you really want to make sure all necessary dependencies etc are downloaded."},{"score":0,"post_type":"question","creation_date":1701215565,"post_id":77566751,"comment_id":136747421,"body_markdown":"@dan1st `mvn dependency:go-offline` downloads about 1850 files, 50-80% more than the amount needed to build and test. It also still leaves 25 files (9 jar+pom pairs, 7 just pom files) to be downloaded by `mvn package`.","link":"https://stackoverflow.com/questions/77566751/why-does-mvn-dependencycopy-dependencies-then-mvn-package-download-more-and#comment136747421_77566751","body":"@dan1st <code>mvn dependency:go-offline</code> downloads about 1850 files, 50-80% more than the amount needed to build and test. It also still leaves 25 files (9 jar+pom pairs, 7 just pom files) to be downloaded by <code>mvn package</code>."}],"comment_count":7,"is_answered":false,"view_count":33,"answer_count":0,"score":1,"last_activity_date":1701201035,"creation_date":1701200561,"last_edit_date":1701201035,"question_id":77566751,"body_markdown":"I have a java project using maven, which I&#39;m going to build as part of building a docker image. To optimize the docker build process, I&#39;d like to download dependencies in a separate step before compiling. So I end up with these two commands:\r\n\r\n1. `mvn dependency:copy-dependencies`\r\n2. `mvn package`\r\n\r\nMy real use case has more parameters, but I&#39;ve narrowed it down to just these two simple commands while troubleshooting this problem.\r\n\r\nThe first command downloads 1080 files from Maven Central. The second command, after the first command, downloads 232 more files.\r\n\r\nThe second command, by itself in a fresh environment, downloads 1080 files... but they only mostly match the 1080 that the first command would download, maybe 10% are different.\r\n\r\nHere is the start of a diff between their outputs filtered for downloads and sorted, where `...12...log` is the two-step process and `...2...log` is just the second step alone, showing some common downloads and some unique to each process. Notice that in two cases, both processes download a pom but one downloads the matching jar and the other doesn&#39;t. In the first lines of the diff there&#39;s an example of a jar+pom pair that are downloaded by the two step process but not downloaded at all by the single step process.\r\n\r\n\r\n``` diff\r\n--- download_simple_12_sort.log 2023-11-28 14:37:53\r\n+++ download_simple_2_sort.log  2023-11-28 14:37:58\r\n@@ -1,5 +1,3 @@\r\n-https://repo.maven.apache.org/maven2/backport-util-concurrent/backport-util-concurrent/3.1/backport-util-concurrent-3.1.jar\r\n-https://repo.maven.apache.org/maven2/backport-util-concurrent/backport-util-concurrent/3.1/backport-util-concurrent-3.1.pom\r\n https://repo.maven.apache.org/maven2/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar\r\n https://repo.maven.apache.org/maven2/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.pom\r\n https://repo.maven.apache.org/maven2/ch/qos/logback/logback-core/1.2.3/logback-core-1.2.3.jar\r\n@@ -63,6 +61,7 @@\r\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-augmentedairuntime/1.12.552/aws-java-sdk-augmentedairuntime-1.12.552.jar\r\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-augmentedairuntime/1.12.552/aws-java-sdk-augmentedairuntime-1.12.552.pom\r\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-autoscaling/1.12.552/aws-java-sdk-autoscaling-1.12.552.pom\r\n+https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-autoscalingplans/1.12.552/aws-java-sdk-autoscalingplans-1.12.552.jar\r\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-autoscalingplans/1.12.552/aws-java-sdk-autoscalingplans-1.12.552.pom\r\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-backup/1.12.552/aws-java-sdk-backup-1.12.552.jar\r\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-backup/1.12.552/aws-java-sdk-backup-1.12.552.pom\r\n@@ -589,6 +588,7 @@\r\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-workdocs/1.12.552/aws-java-sdk-workdocs-1.12.552.pom\r\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-worklink/1.12.552/aws-java-sdk-worklink-1.12.552.jar\r\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-worklink/1.12.552/aws-java-sdk-worklink-1.12.552.pom\r\n+https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-workmail/1.12.552/aws-java-sdk-workmail-1.12.552.jar\r\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-workmail/1.12.552/aws-java-sdk-workmail-1.12.552.pom\r\n```\r\n\r\nI suspect the next step here would be to investigate the dependency tree to see what leads to the the exceptional downloads, but that&#39;s getting to the edge of my maven knowledge. So I&#39;m asking here either how to proceed with troubleshooting, or what obvious situation(s) might lead to this outcome.","link":"https://stackoverflow.com/questions/77566751/why-does-mvn-dependencycopy-dependencies-then-mvn-package-download-more-and","title":"Why does `mvn dependency:copy-dependencies` then `mvn package` download more and different dependencies than just `mvn package`?","body":"<p>I have a java project using maven, which I'm going to build as part of building a docker image. To optimize the docker build process, I'd like to download dependencies in a separate step before compiling. So I end up with these two commands:</p>\n<ol>\n<li><code>mvn dependency:copy-dependencies</code></li>\n<li><code>mvn package</code></li>\n</ol>\n<p>My real use case has more parameters, but I've narrowed it down to just these two simple commands while troubleshooting this problem.</p>\n<p>The first command downloads 1080 files from Maven Central. The second command, after the first command, downloads 232 more files.</p>\n<p>The second command, by itself in a fresh environment, downloads 1080 files... but they only mostly match the 1080 that the first command would download, maybe 10% are different.</p>\n<p>Here is the start of a diff between their outputs filtered for downloads and sorted, where <code>...12...log</code> is the two-step process and <code>...2...log</code> is just the second step alone, showing some common downloads and some unique to each process. Notice that in two cases, both processes download a pom but one downloads the matching jar and the other doesn't. In the first lines of the diff there's an example of a jar+pom pair that are downloaded by the two step process but not downloaded at all by the single step process.</p>\n<pre><code>--- download_simple_12_sort.log 2023-11-28 14:37:53\n+++ download_simple_2_sort.log  2023-11-28 14:37:58\n@@ -1,5 +1,3 @@\n-https://repo.maven.apache.org/maven2/backport-util-concurrent/backport-util-concurrent/3.1/backport-util-concurrent-3.1.jar\n-https://repo.maven.apache.org/maven2/backport-util-concurrent/backport-util-concurrent/3.1/backport-util-concurrent-3.1.pom\n https://repo.maven.apache.org/maven2/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.jar\n https://repo.maven.apache.org/maven2/ch/qos/logback/logback-classic/1.2.3/logback-classic-1.2.3.pom\n https://repo.maven.apache.org/maven2/ch/qos/logback/logback-core/1.2.3/logback-core-1.2.3.jar\n@@ -63,6 +61,7 @@\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-augmentedairuntime/1.12.552/aws-java-sdk-augmentedairuntime-1.12.552.jar\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-augmentedairuntime/1.12.552/aws-java-sdk-augmentedairuntime-1.12.552.pom\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-autoscaling/1.12.552/aws-java-sdk-autoscaling-1.12.552.pom\n+https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-autoscalingplans/1.12.552/aws-java-sdk-autoscalingplans-1.12.552.jar\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-autoscalingplans/1.12.552/aws-java-sdk-autoscalingplans-1.12.552.pom\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-backup/1.12.552/aws-java-sdk-backup-1.12.552.jar\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-backup/1.12.552/aws-java-sdk-backup-1.12.552.pom\n@@ -589,6 +588,7 @@\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-workdocs/1.12.552/aws-java-sdk-workdocs-1.12.552.pom\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-worklink/1.12.552/aws-java-sdk-worklink-1.12.552.jar\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-worklink/1.12.552/aws-java-sdk-worklink-1.12.552.pom\n+https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-workmail/1.12.552/aws-java-sdk-workmail-1.12.552.jar\n https://repo.maven.apache.org/maven2/com/amazonaws/aws-java-sdk-workmail/1.12.552/aws-java-sdk-workmail-1.12.552.pom\n</code></pre>\n<p>I suspect the next step here would be to investigate the dependency tree to see what leads to the the exceptional downloads, but that's getting to the edge of my maven knowledge. So I'm asking here either how to proceed with troubleshooting, or what obvious situation(s) might lead to this outcome.</p>\n"},{"tags":["java","logging","log4j2","rest-assured"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701244730,"post_id":77566745,"comment_id":136750231,"body_markdown":"Seems that I misunderstood that little detail. I thought that `RestAssured` sends the log events at level specified by them and setting the level of the PrintStream by me is not needed.\n\nThank you!","link":"https://stackoverflow.com/questions/77563546/how-to-control-rest-assureds-logging-filters-through-log4j2-xml/77566745#comment136750231_77566745","body":"Seems that I misunderstood that little detail. I thought that <code>RestAssured</code> sends the log events at level specified by them and setting the level of the PrintStream by me is not needed.  Thank you!"}],"comment_count":1,"score":1,"last_activity_date":1701200544,"creation_date":1701200544,"answer_id":77566745,"question_id":77563546,"body_markdown":"Since you didn&#39;t specify a logging level in `IoBuilder`, the log events are issued with the **configured** logging event (`OFF`). You just need to call `setLevel`:\r\n\r\n```lang-java\r\nIoBuilder.forLogger(RestAssured.class).setLevel(Level.DEBUG).buildPrintStream();\r\n```\r\n\r\n**Remark**: IMHO using `IoBuilder` is never the best approach if you have other choices: you don&#39;t control where each log event ends. In your case, you could write a [`Filter`](https://www.javadoc.io/doc/io.rest-assured/rest-assured/latest/io/restassured/filter/Filter.html) that calls the Log4j API directly.","link":"https://stackoverflow.com/questions/77563546/how-to-control-rest-assureds-logging-filters-through-log4j2-xml/77566745#77566745","title":"How to control Rest Assured&#39;s logging filters through log4j2.xml?","body":"<p>Since you didn't specify a logging level in <code>IoBuilder</code>, the log events are issued with the <strong>configured</strong> logging event (<code>OFF</code>). You just need to call <code>setLevel</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>IoBuilder.forLogger(RestAssured.class).setLevel(Level.DEBUG).buildPrintStream();\n</code></pre>\n<p><strong>Remark</strong>: IMHO using <code>IoBuilder</code> is never the best approach if you have other choices: you don't control where each log event ends. In your case, you could write a <a href=\"https://www.javadoc.io/doc/io.rest-assured/rest-assured/latest/io/restassured/filter/Filter.html\" rel=\"nofollow noreferrer\"><code>Filter</code></a> that calls the Log4j API directly.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":38,"answer_count":1,"score":0,"last_activity_date":1701200544,"creation_date":1701171259,"question_id":77563546,"body_markdown":"I want to redirect `RestAssured 5.3.0` logging to `log4j2` and be able to control the logging from `log4j2.xml` config.\r\n\r\nMy App example:\r\n```\r\npackage org.example;\r\n\r\nimport io.restassured.RestAssured;\r\nimport io.restassured.filter.log.RequestLoggingFilter;\r\nimport io.restassured.filter.log.ResponseLoggingFilter;\r\nimport org.apache.logging.log4j.io.IoBuilder;\r\n\r\npublic class App {\r\n\r\n    static {\r\n        var logStream = IoBuilder.forLogger(RestAssured.class).buildPrintStream();\r\n\r\n        var requestFilter = new RequestLoggingFilter(logStream);\r\n        var responseFilter = new ResponseLoggingFilter(logStream);\r\n\r\n        RestAssured.filters(requestFilter, responseFilter);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        RestAssured.given().get(&quot;https://httpbin.org/&quot;);\r\n    }\r\n}\r\n```\r\n\r\nMy `log4j2.xml`:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Configuration status=&quot;WARN&quot; strict=&quot;true&quot;&gt;\r\n\r\n    &lt;Appenders&gt;\r\n        &lt;Appender type=&quot;Console&quot; name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{3} - %msg%n&quot;/&gt;\r\n        &lt;/Appender&gt;\r\n    &lt;/Appenders&gt;\r\n\r\n    &lt;Loggers&gt;\r\n        &lt;Root level=&quot;debug&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt;\r\n        &lt;/Root&gt;\r\n\r\n        &lt;Logger name=&quot;io.restassured&quot; level=&quot;OFF&quot;/&gt;\r\n\r\n    &lt;/Loggers&gt;\r\n\r\n&lt;/Configuration&gt;\r\n```\r\n\r\nOutput:\r\n\r\n```\r\n13:25:43.198 [main] OFF   io.restassured.RestAssured - Request method:\tGET\r\n13:25:43.200 [main] OFF   io.restassured.RestAssured - Request URI:\thttps://httpbin.org/\r\n13:25:43.200 [main] OFF   io.restassured.RestAssured - Proxy:\t\t\t&lt;none&gt;\r\n13:25:43.200 [main] OFF   io.restassured.RestAssured - Request params:\t&lt;none&gt;\r\n```\r\n\r\n1. Is this the correct approach for redirecting RestAssured logging to log4j2?\r\n2. Why logs still show but with level `OFF`? Actually the logs show with whatever level I set for the `io.restassured` logger.","link":"https://stackoverflow.com/questions/77563546/how-to-control-rest-assureds-logging-filters-through-log4j2-xml","title":"How to control Rest Assured&#39;s logging filters through log4j2.xml?","body":"<p>I want to redirect <code>RestAssured 5.3.0</code> logging to <code>log4j2</code> and be able to control the logging from <code>log4j2.xml</code> config.</p>\n<p>My App example:</p>\n<pre><code>package org.example;\n\nimport io.restassured.RestAssured;\nimport io.restassured.filter.log.RequestLoggingFilter;\nimport io.restassured.filter.log.ResponseLoggingFilter;\nimport org.apache.logging.log4j.io.IoBuilder;\n\npublic class App {\n\n    static {\n        var logStream = IoBuilder.forLogger(RestAssured.class).buildPrintStream();\n\n        var requestFilter = new RequestLoggingFilter(logStream);\n        var responseFilter = new ResponseLoggingFilter(logStream);\n\n        RestAssured.filters(requestFilter, responseFilter);\n    }\n\n    public static void main(String[] args) {\n        RestAssured.given().get(&quot;https://httpbin.org/&quot;);\n    }\n}\n</code></pre>\n<p>My <code>log4j2.xml</code>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;WARN&quot; strict=&quot;true&quot;&gt;\n\n    &lt;Appenders&gt;\n        &lt;Appender type=&quot;Console&quot; name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{3} - %msg%n&quot;/&gt;\n        &lt;/Appender&gt;\n    &lt;/Appenders&gt;\n\n    &lt;Loggers&gt;\n        &lt;Root level=&quot;debug&quot;&gt;\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n        &lt;/Root&gt;\n\n        &lt;Logger name=&quot;io.restassured&quot; level=&quot;OFF&quot;/&gt;\n\n    &lt;/Loggers&gt;\n\n&lt;/Configuration&gt;\n</code></pre>\n<p>Output:</p>\n<pre><code>13:25:43.198 [main] OFF   io.restassured.RestAssured - Request method:  GET\n13:25:43.200 [main] OFF   io.restassured.RestAssured - Request URI: https://httpbin.org/\n13:25:43.200 [main] OFF   io.restassured.RestAssured - Proxy:           &lt;none&gt;\n13:25:43.200 [main] OFF   io.restassured.RestAssured - Request params:  &lt;none&gt;\n</code></pre>\n<ol>\n<li>Is this the correct approach for redirecting RestAssured logging to log4j2?</li>\n<li>Why logs still show but with level <code>OFF</code>? Actually the logs show with whatever level I set for the <code>io.restassured</code> logger.</li>\n</ol>\n"},{"tags":["java"],"comments":[{"score":4,"post_type":"question","creation_date":1701198555,"post_id":77566530,"comment_id":136744910,"body_markdown":"`dognames[dogs]` is *never* going to be valid, when the length of `dognames` is `dogs`. For example, if you&#39;ve got an array of 2 elements, the indexes will be 0 and 1 - so `array[2]` will always be invalid.","link":"https://stackoverflow.com/questions/77566530/am-getting-arrayoutofbounds-exception-and-am-not-sure-why#comment136744910_77566530","body":"<code>dognames[dogs]</code> is <i>never</i> going to be valid, when the length of <code>dognames</code> is <code>dogs</code>. For example, if you&#39;ve got an array of 2 elements, the indexes will be 0 and 1 - so <code>array[2]</code> will always be invalid."},{"score":1,"post_type":"question","creation_date":1701198598,"post_id":77566530,"comment_id":136744918,"body_markdown":"(As an aside, I&#39;d very strongly encourage you to format your code in a more conventional way. And I doubt that you want the `;` after `while((!&quot;quit&quot;.equals(dognames[dogs])))` either - you&#39;ve got an empty loop body.","link":"https://stackoverflow.com/questions/77566530/am-getting-arrayoutofbounds-exception-and-am-not-sure-why#comment136744918_77566530","body":"(As an aside, I&#39;d very strongly encourage you to format your code in a more conventional way. And I doubt that you want the <code>;</code> after <code>while((!&quot;quit&quot;.equals(dognames[dogs])))</code> either - you&#39;ve got an empty loop body."},{"score":1,"post_type":"question","creation_date":1701205100,"post_id":77566530,"comment_id":136746007,"body_markdown":"What is happening in this line? `if(dognames[index].equals(dognames))` This is asking if a specific name in the array is equal to the entire array? How is that going to work?...","link":"https://stackoverflow.com/questions/77566530/am-getting-arrayoutofbounds-exception-and-am-not-sure-why#comment136746007_77566530","body":"What is happening in this line? <code>if(dognames[index].equals(dognames))</code> This is asking if a specific name in the array is equal to the entire array? How is that going to work?..."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701200483,"creation_date":1701200483,"answer_id":77566739,"question_id":77566530,"body_markdown":"You are getting error **ArrayOutOfBounds** beacuse the **index** different from **dimenssion** so you must so you have to do -1. You should remove **;** after while to go into the while, like that:\r\n\r\n```\r\n    while ((!&quot;quit&quot;.equals(dognames[dogs -1]))) // i add -1\r\n        { .....}\r\n```","link":"https://stackoverflow.com/questions/77566530/am-getting-arrayoutofbounds-exception-and-am-not-sure-why/77566739#77566739","title":"Am getting ArrayOutOfBounds exception and am not sure why","body":"<p>You are getting error <strong>ArrayOutOfBounds</strong> beacuse the <strong>index</strong> different from <strong>dimenssion</strong> so you must so you have to do -1. You should remove <strong>;</strong> after while to go into the while, like that:</p>\n<pre><code>    while ((!&quot;quit&quot;.equals(dognames[dogs -1]))) // i add -1\n        { .....}\n</code></pre>\n"}],"comment_count":3,"is_answered":true,"view_count":58,"answer_count":1,"score":-1,"last_activity_date":1701200483,"creation_date":1701198383,"question_id":77566530,"body_markdown":"I am trying to create a dowhile loop to check my array created by user input, and I am getting ArrayOutOfBounds exception. I am unsure as to why, and I am not certain on how to fix it. I am new to coding, so any assistance is appreciated.\r\n\r\n\r\n\r\n```\r\n    public static void main(String[] args) {\r\n\t\t\r\n\t\tboolean found;\r\n\t\t\r\n\t\t Scanner input = new Scanner(System.in);\r\n\t\tint dogs;\r\n\t\r\n\t\t System.out.println(&quot;How many dogs?&quot;);\r\n\t\t dogs = input.nextInt();\r\n\t\t int index;\r\n\t\t\r\n\t\tString[] dognames = new String [dogs];\r\n\t\tDouble [] dogweights = new Double [dogs];\r\n\t\t\r\n\t\tfor (int i = 0; i &lt; dogs; i++) {\r\n            System.out.println(&quot;Enter dog name and weight: &quot;);\r\n            dognames[i]= input.next();\r\n            dogweights[i]=input.nextDouble();}\r\n\t\t\r\n\t\twhile((!&quot;quit&quot;.equals(dognames[dogs])));{\r\n\t\tfound = false;\r\n\t\tindex = 0;\r\n\t\twhile(!found &amp;&amp; index &lt; dognames.length)\r\n\t\t{\r\n\t\tif(dognames[index].equals(dognames))\r\n\t\t\tfound = true;\r\n\t\telse\r\n\t\t\tindex++;\r\n\t\t}\r\n\t\t\r\n\t\tif(!found)\r\n\t\t\tindex = -1;\r\n\t\t\r\n\t\tif (index == -1)\r\n\t\t\tSystem.out.println(&quot;Error&quot;);\r\n\t\t\r\n\t\telse\r\n\t\t\tSystem.out.println(dognames);\r\n\t\t}\r\n\t\t\r\n        double length = dogweights.length;\r\n \r\n       \r\n        double sum = 0;\r\n \r\n       \r\n        for (int i = 0; i &lt; dogweights.length; i++) {\r\n            sum += dogweights[i];\r\n        }\r\n \r\n        double dogweightsaverage = sum / length;\r\n\t\t\r\n\t\tSystem.out.print(&quot;AHHHHH&quot;);\r\n\t\r\n\r\n\t\r\n\t\r\n\t}\r\n    }\r\n\r\n\r\n```\r\n\r\n\r\n\r\nI&#39;ve tried changing the while condition, but that just creates more problems. ","link":"https://stackoverflow.com/questions/77566530/am-getting-arrayoutofbounds-exception-and-am-not-sure-why","title":"Am getting ArrayOutOfBounds exception and am not sure why","body":"<p>I am trying to create a dowhile loop to check my array created by user input, and I am getting ArrayOutOfBounds exception. I am unsure as to why, and I am not certain on how to fix it. I am new to coding, so any assistance is appreciated.</p>\n<pre><code>    public static void main(String[] args) {\n        \n        boolean found;\n        \n         Scanner input = new Scanner(System.in);\n        int dogs;\n    \n         System.out.println(&quot;How many dogs?&quot;);\n         dogs = input.nextInt();\n         int index;\n        \n        String[] dognames = new String [dogs];\n        Double [] dogweights = new Double [dogs];\n        \n        for (int i = 0; i &lt; dogs; i++) {\n            System.out.println(&quot;Enter dog name and weight: &quot;);\n            dognames[i]= input.next();\n            dogweights[i]=input.nextDouble();}\n        \n        while((!&quot;quit&quot;.equals(dognames[dogs])));{\n        found = false;\n        index = 0;\n        while(!found &amp;&amp; index &lt; dognames.length)\n        {\n        if(dognames[index].equals(dognames))\n            found = true;\n        else\n            index++;\n        }\n        \n        if(!found)\n            index = -1;\n        \n        if (index == -1)\n            System.out.println(&quot;Error&quot;);\n        \n        else\n            System.out.println(dognames);\n        }\n        \n        double length = dogweights.length;\n \n       \n        double sum = 0;\n \n       \n        for (int i = 0; i &lt; dogweights.length; i++) {\n            sum += dogweights[i];\n        }\n \n        double dogweightsaverage = sum / length;\n        \n        System.out.print(&quot;AHHHHH&quot;);\n    \n\n    \n    \n    }\n    }\n\n\n</code></pre>\n<p>I've tried changing the while condition, but that just creates more problems.</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"comments":[{"score":0,"post_type":"question","creation_date":1701177452,"post_id":77564139,"comment_id":136740757,"body_markdown":"f you run `package` it will run tests, which will read and use your configuration. Which will create the datbase. You shouldn&#39;t use `data.sql` in production use seomthing like Flyway or LIquibase for more elaborate support and solutions.","link":"https://stackoverflow.com/questions/77564139/spring-boot-runs-data-sql-twice#comment136740757_77564139","body":"f you run <code>package</code> it will run tests, which will read and use your configuration. Which will create the datbase. You shouldn&#39;t use <code>data.sql</code> in production use seomthing like Flyway or LIquibase for more elaborate support and solutions."},{"score":0,"post_type":"question","creation_date":1701177900,"post_id":77564139,"comment_id":136740856,"body_markdown":"Why? I dont know these libraries, why cannot pure spring hibernate do the job in production? Why always need to use third party","link":"https://stackoverflow.com/questions/77564139/spring-boot-runs-data-sql-twice#comment136740856_77564139","body":"Why? I dont know these libraries, why cannot pure spring hibernate do the job in production? Why always need to use third party"},{"score":0,"post_type":"question","creation_date":1701178094,"post_id":77564139,"comment_id":136740903,"body_markdown":"Because **you** want to control your schema, you don&#39;t want to hand that over to your ORM framework. Which might decide to drop a column because of crappy mapping, it won&#39;t properly update if you modify fields (like length, type etc.) nor will it migrate your data. It is nice for toy projects not for real-life projects. Flyway is one way to properly manage and version your schema.","link":"https://stackoverflow.com/questions/77564139/spring-boot-runs-data-sql-twice#comment136740903_77564139","body":"Because <b>you</b> want to control your schema, you don&#39;t want to hand that over to your ORM framework. Which might decide to drop a column because of crappy mapping, it won&#39;t properly update if you modify fields (like length, type etc.) nor will it migrate your data. It is nice for toy projects not for real-life projects. Flyway is one way to properly manage and version your schema."},{"score":0,"post_type":"question","creation_date":1701199393,"post_id":77564139,"comment_id":136745046,"body_markdown":"@M.Deinum also, what is strange is that running the same application with mysql does not run execute the `data.sql` twice. That is, with mysql, it work correctly. So why it does not with postgres?","link":"https://stackoverflow.com/questions/77564139/spring-boot-runs-data-sql-twice#comment136745046_77564139","body":"@M.Deinum also, what is strange is that running the same application with mysql does not run execute the <code>data.sql</code> twice. That is, with mysql, it work correctly. So why it does not with postgres?"},{"score":0,"post_type":"question","creation_date":1701243191,"post_id":77564139,"comment_id":136749986,"body_markdown":"I doubt that it doesn&#39;t run twice but that for some reason the records don&#39;t get inserted (due to a different schema being generated by hibernate).","link":"https://stackoverflow.com/questions/77564139/spring-boot-runs-data-sql-twice#comment136749986_77564139","body":"I doubt that it doesn&#39;t run twice but that for some reason the records don&#39;t get inserted (due to a different schema being generated by hibernate)."},{"score":0,"post_type":"question","creation_date":1701253712,"post_id":77564139,"comment_id":136751874,"body_markdown":"@M.Deinum can you please elaborate? Does hibernate handles mysql schema differently then postrgres? Particularly, in both cases, we are just talking about insertion, not creation (that is done by hibernate if you specify ddl-auto to update or create). And insertion is the same for both mysql and postgres (`insert into &lt;table&gt;(&lt;columns...&gt;) values(&lt;values&gt;...)`, so why and how does hibernate do it differently?","link":"https://stackoverflow.com/questions/77564139/spring-boot-runs-data-sql-twice#comment136751874_77564139","body":"@M.Deinum can you please elaborate? Does hibernate handles mysql schema differently then postrgres? Particularly, in both cases, we are just talking about insertion, not creation (that is done by hibernate if you specify ddl-auto to update or create). And insertion is the same for both mysql and postgres (<code>insert into &lt;table&gt;(&lt;columns...&gt;) values(&lt;values&gt;...)</code>, so why and how does hibernate do it differently?"},{"score":0,"post_type":"question","creation_date":1701254800,"post_id":77564139,"comment_id":136752056,"body_markdown":"MySQL is a different dialect, as you let Hibernate generate your schema it might use different types, constraints as each dtabase is different (hence the use for Flyway that way you know for certain what is being executed). Due to the difference is schema it might be that PostgreSQL inserts the data double and MySQL overrides (one has sequences the other not IIRC).","link":"https://stackoverflow.com/questions/77564139/spring-boot-runs-data-sql-twice#comment136752056_77564139","body":"MySQL is a different dialect, as you let Hibernate generate your schema it might use different types, constraints as each dtabase is different (hence the use for Flyway that way you know for certain what is being executed). Due to the difference is schema it might be that PostgreSQL inserts the data double and MySQL overrides (one has sequences the other not IIRC)."},{"score":0,"post_type":"question","creation_date":1701255791,"post_id":77564139,"comment_id":136752222,"body_markdown":"The reason I asked is they are very similar in developer aspect, that is sql language is same. Only postgres is older and more mature database so has more features, and I know about the generation of IDs where in mysql is simply `auto_increment` on primary key whereas postgres creates separate sequence object which increments. So could I consider this &quot;id generation&quot; as the reason postgres was executed twice whereas mysql once?","link":"https://stackoverflow.com/questions/77564139/spring-boot-runs-data-sql-twice#comment136752222_77564139","body":"The reason I asked is they are very similar in developer aspect, that is sql language is same. Only postgres is older and more mature database so has more features, and I know about the generation of IDs where in mysql is simply <code>auto_increment</code> on primary key whereas postgres creates separate sequence object which increments. So could I consider this &quot;id generation&quot; as the reason postgres was executed twice whereas mysql once?"},{"score":0,"post_type":"question","creation_date":1701255983,"post_id":77564139,"comment_id":136752262,"body_markdown":"The `data.sql` is executed twice (I suggest you enable debug logging and check that). The result of the inserts is apparently different.","link":"https://stackoverflow.com/questions/77564139/spring-boot-runs-data-sql-twice#comment136752262_77564139","body":"The <code>data.sql</code> is executed twice (I suggest you enable debug logging and check that). The result of the inserts is apparently different."},{"score":0,"post_type":"question","creation_date":1701257321,"post_id":77564139,"comment_id":136752507,"body_markdown":"@M.Deinum I have `logging.level.org.hibernate.SQL=DEBUG`, how else should I see the debugged execution?","link":"https://stackoverflow.com/questions/77564139/spring-boot-runs-data-sql-twice#comment136752507_77564139","body":"@M.Deinum I have <code>logging.level.org.hibernate.SQL=DEBUG</code>, how else should I see the debugged execution?"},{"score":0,"post_type":"question","creation_date":1701258378,"post_id":77564139,"comment_id":136752723,"body_markdown":"It isn&#39;t hibernate that executes the `data.sql` but Spring.","link":"https://stackoverflow.com/questions/77564139/spring-boot-runs-data-sql-twice#comment136752723_77564139","body":"It isn&#39;t hibernate that executes the <code>data.sql</code> but Spring."}],"comment_count":11,"is_answered":false,"view_count":37,"answer_count":0,"score":0,"last_activity_date":1701199414,"creation_date":1701177006,"last_edit_date":1701199414,"question_id":77564139,"body_markdown":"*aplication.properties*:\r\n\r\n    spring.datasource.url=jdbc:postgresql://localhost:5432/webdev_simplified\r\n    spring.datasource.username=postgres\r\n    spring.datasource.password=postgres\r\n    \r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    \r\n    spring.sql.init.mode=always\r\n    spring.jpa.defer-datasource-initialization=true\r\n    #spring.datasource.initialization-mode=always\r\n\r\nNow if I run `mvn clean package` I can see the table is created and data.sql executed (tested in local postgres that data is there - i.e. `select * from cart_item` returns data). This was for packaging and after then, when run as `java -jar target/app.jar`, it again executes the `data.sql` (or I think it does, but I ended up with duplicate data (or rather inserted is better word since data is not duplicated, their keys are incremeneted, as in sql insert). So how to prevent the second execution of `data.sql`?\r\n\r\nFull source code:\r\nhttps://github.com/shepherd123456/springapp_with_postgres/\r\n\r\nwhat is strange is that running the same application with mysql does not run execute the data.sql twice. That is, with mysql, it work correctly. So why it does not with postgres","link":"https://stackoverflow.com/questions/77564139/spring-boot-runs-data-sql-twice","title":"spring boot runs data.sql twice","body":"<p><em>aplication.properties</em>:</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://localhost:5432/webdev_simplified\nspring.datasource.username=postgres\nspring.datasource.password=postgres\n\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.properties.hibernate.format_sql=true\nlogging.level.org.hibernate.SQL=DEBUG\n\nspring.sql.init.mode=always\nspring.jpa.defer-datasource-initialization=true\n#spring.datasource.initialization-mode=always\n</code></pre>\n<p>Now if I run <code>mvn clean package</code> I can see the table is created and data.sql executed (tested in local postgres that data is there - i.e. <code>select * from cart_item</code> returns data). This was for packaging and after then, when run as <code>java -jar target/app.jar</code>, it again executes the <code>data.sql</code> (or I think it does, but I ended up with duplicate data (or rather inserted is better word since data is not duplicated, their keys are incremeneted, as in sql insert). So how to prevent the second execution of <code>data.sql</code>?</p>\n<p>Full source code:\n<a href=\"https://github.com/shepherd123456/springapp_with_postgres/\" rel=\"nofollow noreferrer\">https://github.com/shepherd123456/springapp_with_postgres/</a></p>\n<p>what is strange is that running the same application with mysql does not run execute the data.sql twice. That is, with mysql, it work correctly. So why it does not with postgres</p>\n"},{"tags":["java","snmp","snmp4j"],"comments":[{"score":0,"post_type":"question","creation_date":1700790807,"post_id":77539215,"comment_id":136699543,"body_markdown":"What is the snmpget command that works? You must make it part of the question.","link":"https://stackoverflow.com/questions/77539215/snmp4j-request-timeout-with-snmpv3#comment136699543_77539215","body":"What is the snmpget command that works? You must make it part of the question."},{"score":0,"post_type":"question","creation_date":1700846241,"post_id":77539215,"comment_id":136706761,"body_markdown":"I am talking about the snmpget command provided by the net-snmp package.\n\n\nsnmpget -v3 -l AuthPriv -u snmpuser -a MD5 -A &quot;foo#Bar0815&quot; -x DES -X &quot;foo#Bar0815&quot; 10.1.0.4 1.3.111.2.802.1.1.30.1.2.1.1.8.1.1","link":"https://stackoverflow.com/questions/77539215/snmp4j-request-timeout-with-snmpv3#comment136706761_77539215","body":"I am talking about the snmpget command provided by the net-snmp package.   snmpget -v3 -l AuthPriv -u snmpuser -a MD5 -A &quot;foo#Bar0815&quot; -x DES -X &quot;foo#Bar0815&quot; 10.1.0.4 1.3.111.2.802.1.1.30.1.2.1.1.8.1.1"},{"score":0,"post_type":"question","creation_date":1701110809,"post_id":77539215,"comment_id":136732103,"body_markdown":"wow, Java doesn&#39;t make it easy. I looked at one other example and noticed that it had `transport.listen()` after the `snmp.getUSM().addUser()`, maybe try that. Would it be possible to post a packet capture? I normallly use `tcpdump` with the `-X` flag to print the packet contents in hex","link":"https://stackoverflow.com/questions/77539215/snmp4j-request-timeout-with-snmpv3#comment136732103_77539215","body":"wow, Java doesn&#39;t make it easy. I looked at one other example and noticed that it had <code>transport.listen()</code> after the <code>snmp.getUSM().addUser()</code>, maybe try that. Would it be possible to post a packet capture? I normallly use <code>tcpdump</code> with the <code>-X</code> flag to print the packet contents in hex"},{"score":0,"post_type":"question","creation_date":1701117918,"post_id":77539215,"comment_id":136733245,"body_markdown":"Unfortunately, that change didn&#180;t resolve the issue. Since I use udp for communication with the switch, I used this command for a packet capture:\n\nsudo tcpdump -i ens82f0 udp and dst 10.1.0.4 -w udpdump.pcap\n\nIt captured only a single package, and the result doesn&#180;t appear readable to me:\n\n&#212;&#195;&#178;&#161;                F&#255;dew5 g   g   &#236;t&#186;&#173;q&#39;&#208;P™&#252;\n&#215; E  Y&#223;&#172;@ @F&#217;\n \t\n &#221;ˆ &#161; Ee0;0N&#182;„ &#255;&#255;0      0  &#160;   0","link":"https://stackoverflow.com/questions/77539215/snmp4j-request-timeout-with-snmpv3#comment136733245_77539215","body":"Unfortunately, that change didn&#180;t resolve the issue. Since I use udp for communication with the switch, I used this command for a packet capture:  sudo tcpdump -i ens82f0 udp and dst 10.1.0.4 -w udpdump.pcap  It captured only a single package, and the result doesn&#180;t appear readable to me:  &#212;&#195;&#178;&#161;                F&#255;dew5 g   g   &#236;t&#186;&#173;q&#39;&#208;P™&#252; &#215; E  Y&#223;&#172;@ @F&#217;  \t  &#221;ˆ &#161; Ee0;0N&#182;„ &#255;&#255;0      0      0"},{"score":0,"post_type":"question","creation_date":1701122878,"post_id":77539215,"comment_id":136733915,"body_markdown":"use `-X` instead of `-w &lt;file&gt;` and it will print it in hex on the screen\n\nEDIT: I notice you have `dst 10.1.0.4` in your filter, which will filter out any response from the switch. I&#39;m not an expert on filters, but see if you can capture the traffic going both ways","link":"https://stackoverflow.com/questions/77539215/snmp4j-request-timeout-with-snmpv3#comment136733915_77539215","body":"use <code>-X</code> instead of <code>-w &lt;file&gt;</code> and it will print it in hex on the screen  EDIT: I notice you have <code>dst 10.1.0.4</code> in your filter, which will filter out any response from the switch. I&#39;m not an expert on filters, but see if you can capture the traffic going both ways"},{"score":1,"post_type":"question","creation_date":1701196603,"post_id":77539215,"comment_id":136744596,"body_markdown":"Thanks for the assistance, but I did actually find a solution - since SNMP4J 3.X.X it is required to activate the security protocols for the SecurityProtocols instance with SecurityProtocols.addAuthenticationProtocol( new AuthSHA()); and\nSecurityProtocols.addAuthenticationProtocol( new AuthMD5()); before passing the instance to the USM. This solved all of my issues.","link":"https://stackoverflow.com/questions/77539215/snmp4j-request-timeout-with-snmpv3#comment136744596_77539215","body":"Thanks for the assistance, but I did actually find a solution - since SNMP4J 3.X.X it is required to activate the security protocols for the SecurityProtocols instance with SecurityProtocols.addAuthenticationProtocol( new AuthSHA()); and SecurityProtocols.addAuthenticationProtocol( new AuthMD5()); before passing the instance to the USM. This solved all of my issues."}],"comment_count":6,"is_answered":false,"view_count":80,"answer_count":0,"score":0,"last_activity_date":1701199404,"creation_date":1700766970,"last_edit_date":1701199404,"question_id":77539215,"body_markdown":"I am looking to make a Java program that manages some switches. For now, I am just trying to get a single value from the switch. I have a working example that uses SNMPv2, however, my attempts at SNMPv3 always result in no response (Error: Agent Timeout). I have, however, tried it using the &quot;snmpget&quot; command with the exact same values, and it outputs the expected results. So in principle, SNMPv3 should work with my current setup. \r\n\r\nThe non-functional SNMPv3 code:\r\n\r\n\r\n```\r\npublic static void getAdminCycleTimeNumeratorv3() throws IOException\r\n{\r\n    String  ipAddress  = &quot;10.1.0.4&quot;;\r\n\tString  port    = &quot;161&quot;; \r\n\tString  oidValue  = &quot;1.3.111.2.802.1.1.30.1.2.1.1.8.1.1&quot;;  \r\n\tint     snmpVersion  = SnmpConstants.version3;\r\n \r\n\tTransportMapping transport = new DefaultUdpTransportMapping();\r\n    Snmp snmp = new Snmp(transport);\r\n\r\n    USM usm = new USM(\r\n        SecurityProtocols.getInstance(),\r\n        new OctetString(MPv3.createLocalEngineID()),\r\n        0\r\n    );\r\n\r\n    SecurityModels.getInstance().addSecurityModel(usm);\r\n\r\n    transport.listen();\r\n\r\n    // Set the target\r\n    UserTarget target = new UserTarget();\r\n    target.setAddress(GenericAddress.parse(&quot;udp:10.1.0.4/161&quot;));\r\n    target.setRetries(2);\r\n    target.setTimeout(2000);\r\n    target.setVersion(SnmpConstants.version3);\r\n    target.setSecurityLevel(SecurityLevel.AUTH_PRIV);\r\n    target.setSecurityName(new OctetString(&quot;snmpuser&quot;));\r\n\r\n    // Set the security settings\r\n    snmp.getUSM().addUser(\r\n        new OctetString(&quot;snmpuser&quot;),\r\n        new UsmUser(\r\n            new OctetString(&quot;snmpuser&quot;),\r\n            AuthMD5.ID,\r\n            new OctetString(&quot;foo#Bar0815&quot;),\r\n            PrivDES.ID,\r\n            new OctetString(&quot;foo#Bar0815&quot;)\r\n        )\r\n    );\r\n\r\n    // Create PDU\r\n    PDU pdu = new ScopedPDU();\r\n    pdu.add(new VariableBinding(new OID(oidValue))); \r\n    pdu.setType(PDU.GET);\r\n\r\n    System.out.println(&quot;Sending SNMP Request&quot;);\r\n    ResponseEvent response = snmp.get(pdu, target);\r\n\r\n    // Process Agent Response\r\n    if (response != null)\r\n    {\r\n        PDU responsePDU = response.getResponse();\r\n\r\n        if (responsePDU != null)\r\n        {\r\n            int errorStatus = responsePDU.getErrorStatus();\r\n            int errorIndex = responsePDU.getErrorIndex();\r\n            String errorStatusText = responsePDU.getErrorStatusText();\r\n\r\n            if (errorStatus == PDU.noError)\r\n            {\r\n                System.out.println(&quot;Snmp Get Response = &quot; + responsePDU.getVariableBindings());\r\n            }\r\n            else\r\n            {\r\n                System.out.println(&quot;Error: Request Failed&quot;);\r\n                System.out.println(&quot;Error Status = &quot; + errorStatus);\r\n                System.out.println(&quot;Error Index = &quot; + errorIndex);\r\n                System.out.println(&quot;Error Status Text = &quot; + errorStatusText);\r\n            }\r\n        }\r\n        else\r\n        {\r\n            System.out.println(&quot;Error: Response PDU is null&quot;);\r\n        }\r\n    }\r\n    else\r\n    {\r\n        System.out.println(&quot;Error: Agent Timeout&quot;);\r\n    }\r\n     \r\n    snmp.close();\r\n}\r\n```\r\n\r\n\r\nThe same code with SNMPv2c and a CommunityTarget instead of a UserTarget does work just fine. So I suspect that the culprit is my user or target management, but I can&#180;t seem to find a solution. It works via the net-snmp console tool, so my switch is configured properly.\r\n\r\nEdit: the working snmpget command is:\r\n\r\n    snmpget -v3 -l AuthPriv -u snmpuser -a MD5 -A &quot;foo#Bar0815&quot; -x DES -X &quot;foo#Bar0815&quot; 10.1.0.4:161 1.3.111.2.802.1.1.30.1.2.1.1.8.1.1    \r\n\r\nEdit 2: For anyone wondering, the problem can be solved by creating a SecurityProtocols instance first, and then calling \r\n\r\n    SecurityProtocolsInstance.addAuthenticationProtocol( new AuthSHA());\r\n    SecurityProtocolsInstance.addAuthenticationProtocol( new AuthMD5());\r\n\r\nBefore passing the instance to the USM.\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77539215/snmp4j-request-timeout-with-snmpv3","title":"SNMP4J request timeout with SNMPv3","body":"<p>I am looking to make a Java program that manages some switches. For now, I am just trying to get a single value from the switch. I have a working example that uses SNMPv2, however, my attempts at SNMPv3 always result in no response (Error: Agent Timeout). I have, however, tried it using the &quot;snmpget&quot; command with the exact same values, and it outputs the expected results. So in principle, SNMPv3 should work with my current setup.</p>\n<p>The non-functional SNMPv3 code:</p>\n<pre><code>public static void getAdminCycleTimeNumeratorv3() throws IOException\n{\n    String  ipAddress  = &quot;10.1.0.4&quot;;\n    String  port    = &quot;161&quot;; \n    String  oidValue  = &quot;1.3.111.2.802.1.1.30.1.2.1.1.8.1.1&quot;;  \n    int     snmpVersion  = SnmpConstants.version3;\n \n    TransportMapping transport = new DefaultUdpTransportMapping();\n    Snmp snmp = new Snmp(transport);\n\n    USM usm = new USM(\n        SecurityProtocols.getInstance(),\n        new OctetString(MPv3.createLocalEngineID()),\n        0\n    );\n\n    SecurityModels.getInstance().addSecurityModel(usm);\n\n    transport.listen();\n\n    // Set the target\n    UserTarget target = new UserTarget();\n    target.setAddress(GenericAddress.parse(&quot;udp:10.1.0.4/161&quot;));\n    target.setRetries(2);\n    target.setTimeout(2000);\n    target.setVersion(SnmpConstants.version3);\n    target.setSecurityLevel(SecurityLevel.AUTH_PRIV);\n    target.setSecurityName(new OctetString(&quot;snmpuser&quot;));\n\n    // Set the security settings\n    snmp.getUSM().addUser(\n        new OctetString(&quot;snmpuser&quot;),\n        new UsmUser(\n            new OctetString(&quot;snmpuser&quot;),\n            AuthMD5.ID,\n            new OctetString(&quot;foo#Bar0815&quot;),\n            PrivDES.ID,\n            new OctetString(&quot;foo#Bar0815&quot;)\n        )\n    );\n\n    // Create PDU\n    PDU pdu = new ScopedPDU();\n    pdu.add(new VariableBinding(new OID(oidValue))); \n    pdu.setType(PDU.GET);\n\n    System.out.println(&quot;Sending SNMP Request&quot;);\n    ResponseEvent response = snmp.get(pdu, target);\n\n    // Process Agent Response\n    if (response != null)\n    {\n        PDU responsePDU = response.getResponse();\n\n        if (responsePDU != null)\n        {\n            int errorStatus = responsePDU.getErrorStatus();\n            int errorIndex = responsePDU.getErrorIndex();\n            String errorStatusText = responsePDU.getErrorStatusText();\n\n            if (errorStatus == PDU.noError)\n            {\n                System.out.println(&quot;Snmp Get Response = &quot; + responsePDU.getVariableBindings());\n            }\n            else\n            {\n                System.out.println(&quot;Error: Request Failed&quot;);\n                System.out.println(&quot;Error Status = &quot; + errorStatus);\n                System.out.println(&quot;Error Index = &quot; + errorIndex);\n                System.out.println(&quot;Error Status Text = &quot; + errorStatusText);\n            }\n        }\n        else\n        {\n            System.out.println(&quot;Error: Response PDU is null&quot;);\n        }\n    }\n    else\n    {\n        System.out.println(&quot;Error: Agent Timeout&quot;);\n    }\n     \n    snmp.close();\n}\n</code></pre>\n<p>The same code with SNMPv2c and a CommunityTarget instead of a UserTarget does work just fine. So I suspect that the culprit is my user or target management, but I can´t seem to find a solution. It works via the net-snmp console tool, so my switch is configured properly.</p>\n<p>Edit: the working snmpget command is:</p>\n<pre><code>snmpget -v3 -l AuthPriv -u snmpuser -a MD5 -A &quot;foo#Bar0815&quot; -x DES -X &quot;foo#Bar0815&quot; 10.1.0.4:161 1.3.111.2.802.1.1.30.1.2.1.1.8.1.1    \n</code></pre>\n<p>Edit 2: For anyone wondering, the problem can be solved by creating a SecurityProtocols instance first, and then calling</p>\n<pre><code>SecurityProtocolsInstance.addAuthenticationProtocol( new AuthSHA());\nSecurityProtocolsInstance.addAuthenticationProtocol( new AuthMD5());\n</code></pre>\n<p>Before passing the instance to the USM.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"score":0,"post_type":"question","creation_date":1701175150,"post_id":77563863,"comment_id":136740327,"body_markdown":"Why not give the `DynamicStringMakerBeanDefinitionRegistrar` from the accepted answer in your linked question the `CustomHttpClient` for spring boot to autowire it so you can use it when the string makers are created?","link":"https://stackoverflow.com/questions/77563863/how-to-instantiate-n-beans-that-require-a-3rd-party-bean-to-create-a-wrapper-a#comment136740327_77563863","body":"Why not give the <code>DynamicStringMakerBeanDefinitionRegistrar</code> from the accepted answer in your linked question the <code>CustomHttpClient</code> for spring boot to autowire it so you can use it when the string makers are created?"},{"score":0,"post_type":"question","creation_date":1701175432,"post_id":77563863,"comment_id":136740365,"body_markdown":"@daniu, that was my first idea, but the CustomHttpClient is not yet a bean so can’t be used. I get an exception to create a bean with name ‘CustomHttpClient’","link":"https://stackoverflow.com/questions/77563863/how-to-instantiate-n-beans-that-require-a-3rd-party-bean-to-create-a-wrapper-a#comment136740365_77563863","body":"@daniu, that was my first idea, but the CustomHttpClient is not yet a bean so can’t be used. I get an exception to create a bean with name ‘CustomHttpClient’"},{"score":0,"post_type":"question","creation_date":1701175789,"post_id":77563863,"comment_id":136740442,"body_markdown":"What do you mean &quot;is not yet a bean&quot;, you say it&#39;s autoconfigured, that means it&#39;s created. What happens when you add a constructor parameter of type `CustomHttpClient` to `DynamicStringMakerBeanDefinitionRegistrar`?","link":"https://stackoverflow.com/questions/77563863/how-to-instantiate-n-beans-that-require-a-3rd-party-bean-to-create-a-wrapper-a#comment136740442_77563863","body":"What do you mean &quot;is not yet a bean&quot;, you say it&#39;s autoconfigured, that means it&#39;s created. What happens when you add a constructor parameter of type <code>CustomHttpClient</code> to <code>DynamicStringMakerBeanDefinitionRegistrar</code>?"},{"score":0,"post_type":"question","creation_date":1701176141,"post_id":77563863,"comment_id":136740496,"body_markdown":"I think the beans are not yet instantiated, &quot;before beans are instantiated&quot; - from the other answer, I get an application failed to start as the &#39;CustomHttpClient&#39; bean is not there, similar to this https://www.baeldung.com/spring-nosuchbeandefinitionexception","link":"https://stackoverflow.com/questions/77563863/how-to-instantiate-n-beans-that-require-a-3rd-party-bean-to-create-a-wrapper-a#comment136740496_77563863","body":"I think the beans are not yet instantiated, &quot;before beans are instantiated&quot; - from the other answer, I get an application failed to start as the &#39;CustomHttpClient&#39; bean is not there, similar to this <a href=\"https://www.baeldung.com/spring-nosuchbeandefinitionexception\" rel=\"nofollow noreferrer\">baeldung.com/spring-nosuchbeandefinitionexception</a>"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701230201,"post_id":77566455,"comment_id":136748750,"body_markdown":"Thank you, I will test this again today! Can you point me at any resources for further reading into this kind of bean creation? It seems pretty advanced knowledge and I would like to better understand the code, to prevent further questions and allow me to help answer others","link":"https://stackoverflow.com/questions/77563863/how-to-instantiate-n-beans-that-require-a-3rd-party-bean-to-create-a-wrapper-a/77566455#comment136748750_77566455","body":"Thank you, I will test this again today! Can you point me at any resources for further reading into this kind of bean creation? It seems pretty advanced knowledge and I would like to better understand the code, to prevent further questions and allow me to help answer others"},{"score":1,"post_type":"answer","creation_date":1701245486,"post_id":77566455,"comment_id":136750352,"body_markdown":"I&#39;d recommend official javadocs: [BeanDefinitionBuilder](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/support/BeanDefinitionBuilder.html) and [GenericBeanDefinition](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/support/GenericBeanDefinition.html).  Additionally, you might find valuable insights from the community here on StackOverflow.","link":"https://stackoverflow.com/questions/77563863/how-to-instantiate-n-beans-that-require-a-3rd-party-bean-to-create-a-wrapper-a/77566455#comment136750352_77566455","body":"I&#39;d recommend official javadocs: <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/support/BeanDefinitionBuilder.html\" rel=\"nofollow noreferrer\">BeanDefinitionBuilder</a> and <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/support/GenericBeanDefinition.html\" rel=\"nofollow noreferrer\">GenericBeanDefinition</a>.  Additionally, you might find valuable insights from the community here on StackOverflow."},{"score":0,"post_type":"answer","creation_date":1701343185,"post_id":77566455,"comment_id":136765005,"body_markdown":"Thanks, This worked, but I needed to use @Lazy on the client beans when AutoWired (config.beanName().concat(&quot;Client&quot;))","link":"https://stackoverflow.com/questions/77563863/how-to-instantiate-n-beans-that-require-a-3rd-party-bean-to-create-a-wrapper-a/77566455#comment136765005_77566455","body":"Thanks, This worked, but I needed to use @Lazy on the client beans when AutoWired (config.beanName().concat(&quot;Client&quot;))"},{"score":0,"post_type":"answer","creation_date":1701344448,"post_id":77566455,"comment_id":136765235,"body_markdown":"Slight follow up for this, how do I ensure the password has been unencrypted by the JASPYT lib (https://github.com/ulisesbocchio/jasypt-spring-boot/issues/310)","link":"https://stackoverflow.com/questions/77563863/how-to-instantiate-n-beans-that-require-a-3rd-party-bean-to-create-a-wrapper-a/77566455#comment136765235_77566455","body":"Slight follow up for this, how do I ensure the password has been unencrypted by the JASPYT lib (<a href=\"https://github.com/ulisesbocchio/jasypt-spring-boot/issues/310\" rel=\"nofollow noreferrer\">github.com/ulisesbocchio/jasypt-spring-boot/issues/310</a>)"},{"score":1,"post_type":"answer","creation_date":1701362558,"post_id":77566455,"comment_id":136768925,"body_markdown":"Unfortunately, I cannot help you with that.","link":"https://stackoverflow.com/questions/77563863/how-to-instantiate-n-beans-that-require-a-3rd-party-bean-to-create-a-wrapper-a/77566455#comment136768925_77566455","body":"Unfortunately, I cannot help you with that."}],"comment_count":5,"score":1,"last_activity_date":1701198780,"last_edit_date":1701198780,"creation_date":1701197617,"answer_id":77566455,"question_id":77563863,"body_markdown":"Defining bean dependencies in `BeanDefinitionRegistryPostProcessor` can be tricky sometimes, especially considering that beans are not instantiated yet, they can&#39;t be passed as a parameter to a constructor in `setInstanceSupplier`.\r\n\r\nSpring can handle the injection for you if the setter injection is used instead of the constructor injection. All you need to do is define a setter for the dependency, mark it as `@Autowired`, and remove the property from the constructor. This solution is applicable to the first case, where `CustomHttpClient` should be injected into `Http` beans. \r\n\r\nHowever, for the second case, where `Http` beans&#39; names are defined at runtime, setter injection is not applicable, because Spring can&#39;t determine which bean to inject to `Client` beans. Instead, the bean name can be defined in `BeanDefinitionRegistryPostProcessor` while registering `Client` beans.\r\n\r\nLet&#39;s assume, the `Http` and `Client` classes look like this:\r\n```java\r\npublic final class Http {\r\n  private CustomHttpClient customHttpClient;\r\n  private final String userName;\r\n  private final String password;\r\n  private final String url;\r\n\r\n  public Http(String url, String userName, String password) {\r\n    this.userName = userName;\r\n    this.password = password;\r\n    this.url = url;\r\n  }\r\n\r\n  @Autowired\r\n  public void setCustomHttpClient(CustomHttpClient customHttpClient) {\r\n    this.customHttpClient = customHttpClient;\r\n  }\r\n\r\n  // ...\r\n}\r\n```\r\n```java\r\npublic class Client {\r\n  private Http http;\r\n\r\n  public void setHttp(Http http) {\r\n    this.http = http;\r\n  }\r\n\r\n  // ...\r\n}\r\n```\r\nBelow is the modified `DynamicStringMakerBeanDefinitionRegistrar` from [the referenced answer][1]. \r\n```java\r\npublic class DynamicStringMakerBeanDefinitionRegistrar\r\n    implements BeanDefinitionRegistryPostProcessor {\r\n\r\n  public static final String PROPERTIES_PREFIX = &quot;uk.co.iamsimonsmale.dynamic-strings&quot;;\r\n  private final Multi multi;\r\n\r\n  public DynamicStringMakerBeanDefinitionRegistrar(Environment environment) {\r\n    multi =\r\n        Binder.get(environment)\r\n            .bind(PROPERTIES_PREFIX, Bindable.of(Multi.class))\r\n            .orElseThrow(IllegalStateException::new);\r\n  }\r\n\r\n  @Override\r\n  public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry)\r\n      throws BeansException {\r\n    multi.configs().forEach(config -&gt; registerBeanDefinitions(registry, config));\r\n  }\r\n\r\n  private void registerBeanDefinitions(BeanDefinitionRegistry registry, Single config) {\r\n    registerHttpBeanDefinition(registry, config);\r\n    registerClientBeanDefinition(registry, config);\r\n  }\r\n\r\n  private void registerHttpBeanDefinition(BeanDefinitionRegistry registry, Single config) {\r\n    GenericBeanDefinition beanDefinition = new GenericBeanDefinition();\r\n    beanDefinition.setBeanClass(Http.class);\r\n    beanDefinition.setInstanceSupplier(\r\n        () -&gt; new Http(multi.url(), config.userName(), config.password()));\r\n    registry.registerBeanDefinition(config.beanName().concat(&quot;Http&quot;), beanDefinition);\r\n  }\r\n\r\n  private void registerClientBeanDefinition(BeanDefinitionRegistry registry, Single config) {\r\n    BeanDefinitionBuilder beanDefinitionBuilder =\r\n        BeanDefinitionBuilder.genericBeanDefinition(Client.class)\r\n            // This method can be used to inject dependency to constructor argument\r\n            //.addConstructorArgReference(config.beanName().concat(&quot;Http&quot;)) \r\n            .addPropertyReference(&quot;http&quot;, config.beanName().concat(&quot;Http&quot;));\r\n    registry.registerBeanDefinition(\r\n        config.beanName().concat(&quot;Client&quot;), beanDefinitionBuilder.getBeanDefinition());\r\n  }\r\n\r\n  @Override\r\n  public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory)\r\n      throws BeansException {}\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77547803/10231374","link":"https://stackoverflow.com/questions/77563863/how-to-instantiate-n-beans-that-require-a-3rd-party-bean-to-create-a-wrapper-a/77566455#77566455","title":"How to instantiate N beans that require a 3rd party bean, to create a wrapper, and then instantiate N more beans using the wrapper as a named Bean","body":"<p>Defining bean dependencies in <code>BeanDefinitionRegistryPostProcessor</code> can be tricky sometimes, especially considering that beans are not instantiated yet, they can't be passed as a parameter to a constructor in <code>setInstanceSupplier</code>.</p>\n<p>Spring can handle the injection for you if the setter injection is used instead of the constructor injection. All you need to do is define a setter for the dependency, mark it as <code>@Autowired</code>, and remove the property from the constructor. This solution is applicable to the first case, where <code>CustomHttpClient</code> should be injected into <code>Http</code> beans.</p>\n<p>However, for the second case, where <code>Http</code> beans' names are defined at runtime, setter injection is not applicable, because Spring can't determine which bean to inject to <code>Client</code> beans. Instead, the bean name can be defined in <code>BeanDefinitionRegistryPostProcessor</code> while registering <code>Client</code> beans.</p>\n<p>Let's assume, the <code>Http</code> and <code>Client</code> classes look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class Http {\n  private CustomHttpClient customHttpClient;\n  private final String userName;\n  private final String password;\n  private final String url;\n\n  public Http(String url, String userName, String password) {\n    this.userName = userName;\n    this.password = password;\n    this.url = url;\n  }\n\n  @Autowired\n  public void setCustomHttpClient(CustomHttpClient customHttpClient) {\n    this.customHttpClient = customHttpClient;\n  }\n\n  // ...\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Client {\n  private Http http;\n\n  public void setHttp(Http http) {\n    this.http = http;\n  }\n\n  // ...\n}\n</code></pre>\n<p>Below is the modified <code>DynamicStringMakerBeanDefinitionRegistrar</code> from <a href=\"https://stackoverflow.com/a/77547803/10231374\">the referenced answer</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DynamicStringMakerBeanDefinitionRegistrar\n    implements BeanDefinitionRegistryPostProcessor {\n\n  public static final String PROPERTIES_PREFIX = &quot;uk.co.iamsimonsmale.dynamic-strings&quot;;\n  private final Multi multi;\n\n  public DynamicStringMakerBeanDefinitionRegistrar(Environment environment) {\n    multi =\n        Binder.get(environment)\n            .bind(PROPERTIES_PREFIX, Bindable.of(Multi.class))\n            .orElseThrow(IllegalStateException::new);\n  }\n\n  @Override\n  public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry)\n      throws BeansException {\n    multi.configs().forEach(config -&gt; registerBeanDefinitions(registry, config));\n  }\n\n  private void registerBeanDefinitions(BeanDefinitionRegistry registry, Single config) {\n    registerHttpBeanDefinition(registry, config);\n    registerClientBeanDefinition(registry, config);\n  }\n\n  private void registerHttpBeanDefinition(BeanDefinitionRegistry registry, Single config) {\n    GenericBeanDefinition beanDefinition = new GenericBeanDefinition();\n    beanDefinition.setBeanClass(Http.class);\n    beanDefinition.setInstanceSupplier(\n        () -&gt; new Http(multi.url(), config.userName(), config.password()));\n    registry.registerBeanDefinition(config.beanName().concat(&quot;Http&quot;), beanDefinition);\n  }\n\n  private void registerClientBeanDefinition(BeanDefinitionRegistry registry, Single config) {\n    BeanDefinitionBuilder beanDefinitionBuilder =\n        BeanDefinitionBuilder.genericBeanDefinition(Client.class)\n            // This method can be used to inject dependency to constructor argument\n            //.addConstructorArgReference(config.beanName().concat(&quot;Http&quot;)) \n            .addPropertyReference(&quot;http&quot;, config.beanName().concat(&quot;Http&quot;));\n    registry.registerBeanDefinition(\n        config.beanName().concat(&quot;Client&quot;), beanDefinitionBuilder.getBeanDefinition());\n  }\n\n  @Override\n  public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory)\n      throws BeansException {}\n}\n</code></pre>\n"}],"comment_count":4,"is_answered":true,"view_count":83,"answer_count":1,"score":0,"last_activity_date":1701198780,"creation_date":1701174460,"question_id":77563863,"body_markdown":"I tried to implement [the answer from another question I had asked][1] in my main codebase and I had oversimplified the problem. \r\n\r\nIn my codebase I am dependant on an AutoConfigured bean from a 3rd party package (A custom HTTP Client) and I have to create N beans based on the number of items in the yaml config array to create a wrapper of the 3rd party client. \r\n\r\nI then need to create another N beans of a different type that take one of the above named beans as input and create an other named bean. This is the one used in my application. \r\n\r\n```\r\n# BeanConfig\r\nuk.co.iamsimonsmale.dynamic-strings:\r\n  url: http:localhost:8000/api\r\n  configs:\r\n    - beanName: simonBean\r\n      userName: Simon\r\n      password: ABC\r\n    - beanName: griffinBean\r\n      userName: Griffin\r\n      password: XYZ\r\n```\r\n\r\nSo for the above config I would use `CustomHttpClient` to create 2 beans `simonBeanHttp` and `griffinBeanHttp` and then create 2 more beans `simonBeanClient` and `griffinBeanClient` with the `*Client` bean depending on its respectively named `*Http` bean.\r\n\r\nTesting the code from the other question, I was not sure how to create them when they required the `CustomHtppClient` as it was not created yet, and then how to either use 1 class and loop to create both the `*Client` bean and `*Http` bean (how do I get access to the bean rather than its definition) or pass in the bean via its name dynamically via the `DynamicStringMakerBeanDefinitionRegistrar`.\r\n\r\nI did also try to create another map of the `*Client` beans (as I don&#39;t need these outside of this setup process) and pass that map into the `*Http` registrar, but that was also missing the `CustomHttpClient`\r\n\r\n  [1]: https://stackoverflow.com/questions/77547518/how-to-dynamically-create-n-beans-based-on-configuration/77547803","link":"https://stackoverflow.com/questions/77563863/how-to-instantiate-n-beans-that-require-a-3rd-party-bean-to-create-a-wrapper-a","title":"How to instantiate N beans that require a 3rd party bean, to create a wrapper, and then instantiate N more beans using the wrapper as a named Bean","body":"<p>I tried to implement <a href=\"https://stackoverflow.com/questions/77547518/how-to-dynamically-create-n-beans-based-on-configuration/77547803\">the answer from another question I had asked</a> in my main codebase and I had oversimplified the problem.</p>\n<p>In my codebase I am dependant on an AutoConfigured bean from a 3rd party package (A custom HTTP Client) and I have to create N beans based on the number of items in the yaml config array to create a wrapper of the 3rd party client.</p>\n<p>I then need to create another N beans of a different type that take one of the above named beans as input and create an other named bean. This is the one used in my application.</p>\n<pre><code># BeanConfig\nuk.co.iamsimonsmale.dynamic-strings:\n  url: http:localhost:8000/api\n  configs:\n    - beanName: simonBean\n      userName: Simon\n      password: ABC\n    - beanName: griffinBean\n      userName: Griffin\n      password: XYZ\n</code></pre>\n<p>So for the above config I would use <code>CustomHttpClient</code> to create 2 beans <code>simonBeanHttp</code> and <code>griffinBeanHttp</code> and then create 2 more beans <code>simonBeanClient</code> and <code>griffinBeanClient</code> with the <code>*Client</code> bean depending on its respectively named <code>*Http</code> bean.</p>\n<p>Testing the code from the other question, I was not sure how to create them when they required the <code>CustomHtppClient</code> as it was not created yet, and then how to either use 1 class and loop to create both the <code>*Client</code> bean and <code>*Http</code> bean (how do I get access to the bean rather than its definition) or pass in the bean via its name dynamically via the <code>DynamicStringMakerBeanDefinitionRegistrar</code>.</p>\n<p>I did also try to create another map of the <code>*Client</code> beans (as I don't need these outside of this setup process) and pass that map into the <code>*Http</code> registrar, but that was also missing the <code>CustomHttpClient</code></p>\n"},{"tags":["java","javafx","serial-port","com-port"],"comments":[{"score":3,"post_type":"question","creation_date":1701199454,"post_id":77566561,"comment_id":136745061,"body_markdown":"Your problem (at the moment) is only with communicating with the com port correctly. That has nothing to do with JavaFX or Jasper reports.  Create a standalone class with a main method (a [mcve]) which just communicates with the com port and test that.  When in doubt consult the documentation for your device and [the serial communication library you are using](https://fazecast.github.io/jSerialComm/), including the provided examples.","link":"https://stackoverflow.com/questions/77566561/reading-d70a-weighing-data-from-serial-com-port-with-java#comment136745061_77566561","body":"Your problem (at the moment) is only with communicating with the com port correctly. That has nothing to do with JavaFX or Jasper reports.  Create a standalone class with a main method (a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) which just communicates with the com port and test that.  When in doubt consult the documentation for your device and <a href=\"https://fazecast.github.io/jSerialComm/\" rel=\"nofollow noreferrer\">the serial communication library you are using</a>, including the provided examples."},{"score":0,"post_type":"question","creation_date":1701199929,"post_id":77566561,"comment_id":136745134,"body_markdown":"After finding the weight from the Serial Port, I use a Jasper report to print from the printer.","link":"https://stackoverflow.com/questions/77566561/reading-d70a-weighing-data-from-serial-com-port-with-java#comment136745134_77566561","body":"After finding the weight from the Serial Port, I use a Jasper report to print from the printer."},{"score":3,"post_type":"question","creation_date":1701200987,"post_id":77566561,"comment_id":136745324,"body_markdown":"Yes, but your issue is that you can’t read the weight from the serial port, not with using Jasper reports to print to a printer.  Better to keep questions focused.  Context can help, but not so much in this case.","link":"https://stackoverflow.com/questions/77566561/reading-d70a-weighing-data-from-serial-com-port-with-java#comment136745324_77566561","body":"Yes, but your issue is that you can’t read the weight from the serial port, not with using Jasper reports to print to a printer.  Better to keep questions focused.  Context can help, but not so much in this case."}],"comment_count":3,"is_answered":false,"view_count":45,"answer_count":0,"score":0,"last_activity_date":1701198673,"creation_date":1701198673,"question_id":77566561,"body_markdown":"I want to read data from the scale and print it on the label with JavaFX. I made all the settings according to the documentation, but I cannot read the data. comPort.readBytes() always returns 0. Does anyone have any ideas about this? I am adding the document as a URL. I am working with cb string RS232.\r\nhttps://www.manualslib.com/manual/2121484/Bilanciai-D70e.html?page=51#manual\r\n\r\n``` java\r\npackage com.togisoft.venetacollaudipeso;\r\n\r\nimport com.fazecast.jSerialComm.SerialPort;\r\nimport javafx.application.Platform;\r\nimport javafx.fxml.FXML;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.input.KeyCode;\r\nimport javafx.scene.input.KeyEvent;\r\nimport net.sf.jasperreports.engine.JREmptyDataSource;\r\nimport net.sf.jasperreports.engine.JasperFillManager;\r\nimport net.sf.jasperreports.engine.JasperPrint;\r\nimport net.sf.jasperreports.engine.JasperPrintManager;\r\n\r\nimport javax.print.PrintServiceLookup;\r\n\r\nimport javax.print.PrintService;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.concurrent.Executors;\r\nimport java.util.concurrent.ScheduledExecutorService;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\n\r\npublic class AppController {\r\n    private SerialPort comPort;\r\n\r\n    @FXML\r\n    private Label weightLabel;\r\n\r\n\r\n    @FXML\r\n    public void initialize() {\r\n        // COM Portunu bul ver a&#231;\r\n        comPort = SerialPort.getCommPort(Helper.getComPort());\r\n        comPort.setNumDataBits(7);\r\n        comPort.setBaudRate(Helper.getBaudRate());\r\n        comPort.setParity(Helper.getComParity());\r\n        comPort.setNumStopBits(Helper.getStopBit());\r\n        ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);\r\n        if (comPort.openPort()) {\r\n            System.out.println(&quot;Port başarıyla a&#231;ıldı.&quot;);\r\n\r\n            executor.scheduleAtFixedRate(this::readFromSerial, 0, 300, TimeUnit.MILLISECONDS);\r\n        } else {\r\n            System.out.println(&quot;Port a&#231;ılırken hata oluştu!.&quot;);\r\n            Platform.runLater(() -&gt; weightLabel.setText(&quot;PORT Errore!&quot;));\r\n        }\r\n\r\n    }\r\n\r\n    private void readFromSerial() {\r\n        while (comPort.isOpen()) {\r\n            byte[] readBuffer = new byte[8];\r\n            int numRead = comPort.readBytes(readBuffer, readBuffer.length);\r\n            if (numRead &gt; 0) {\r\n                StringBuilder receivedData = new StringBuilder();\r\n                for (int i = 0; i &lt; numRead; i++) {\r\n                    // Son biti (en anlamsız biti) d&#252;ş&#252;rerek 7 bitlik veriyi elde et\r\n                    int sevenBitData = readBuffer[i] &amp; 0x7F;\r\n                    receivedData.append((char) sevenBitData); // Veriyi String olarak birleştir\r\n                }\r\n                String weight = extractWeightFromData(receivedData.toString());\r\n                updateUIWithWeight(formatWeight(weight));\r\n            }\r\n        }\r\n    }\r\n\r\n    private String formatWeight(String weightData) {\r\n        if (weightData == null || !weightData.contains(&quot;.&quot;)) {\r\n            return &quot;0.0&quot;;\r\n        }\r\n\r\n        int significantDigits = 0;\r\n        for (char c : weightData.toCharArray()) {\r\n            if (Character.isDigit(c)) {\r\n                significantDigits++;\r\n            }\r\n        }\r\n\r\n        if (significantDigits &gt;= 5) {\r\n            try {\r\n                float weight = Float.parseFloat(weightData);\r\n                if (weight == (int) weight) {\r\n                    // Ondalık kısmı sıfır ise, ondalık kısmı g&#246;sterme\r\n                    return String.format(&quot;%.0f&quot;, weight);\r\n                } else {\r\n                    // Ondalık kısmı sıfırdan farklı ise, ondalık kısmı g&#246;ster\r\n                    return String.format(&quot;%.1f&quot;, weight);\r\n                }\r\n            } catch (NumberFormatException e) {\r\n                System.out.println(e.getLocalizedMessage());// Hata durumunda işlemler\r\n            }\r\n        }\r\n\r\n        return &quot;0.0&quot;; // Varsayılan olarak 0 d&#246;nd&#252;r\r\n    }\r\n\r\n\r\n    private String extractWeightFromData(String data) {\r\n        if (data.length() &gt;= 8 &amp;&amp; data.startsWith(&quot;$(24H&quot;)) {\r\n            return data.substring(2, 7); // 3–7 karakterleri alarak ağırlık bilgisini &#231;ıkar\r\n        }\r\n        return &quot;&quot;;\r\n    }\r\n\r\n    private void updateUIWithWeight(String weight) {\r\n        Platform.runLater(() -&gt; weightLabel.setText(weight));\r\n    }\r\n\r\n\r\n    @FXML\r\n    void onStamp() {\r\n        System.out.println(weightLabel.getText());\r\n        try {\r\n            String sourceFileName = &quot;weight.jasper&quot;;\r\n\r\n            Map&lt;String, Object&gt; parameters = new HashMap&lt;&gt;();\r\n            parameters.put(&quot;kilo&quot;, weightLabel.getText() + &quot; KG&quot;); // &#214;rnek parametre\r\n\r\n            JasperPrint print = JasperFillManager.fillReport(sourceFileName, parameters, new JREmptyDataSource());\r\n\r\n            PrintService[] printServices = PrintServiceLookup.lookupPrintServices(null, null);\r\n            PrintService selectedPrintService = null;\r\n            for (PrintService printService : printServices) {\r\n                if (printService.getName().equalsIgnoreCase(Helper.getPrinter())) {\r\n                    selectedPrintService = printService;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (selectedPrintService != null) {\r\n                JasperPrintManager.printReport(print, false);\r\n            } else {\r\n                System.out.println(&quot;Belirtilen yazıcı bulunamadı.&quot;);\r\n            }\r\n\r\n        } catch (Exception ex) {\r\n            System.out.println(ex.getMessage());\r\n        }\r\n    }\r\n\r\n    @FXML\r\n    public void onEnterPressed(KeyEvent event) {\r\n        if (event.getCode() == KeyCode.ENTER) {\r\n            System.out.println(&quot;Enter pressed&quot;);\r\n            onStamp();\r\n        }\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void finalize() {\r\n        if (comPort != null &amp;&amp; comPort.isOpen()) {\r\n            comPort.closePort();\r\n            System.out.println(&quot;Port closed.&quot;);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n","link":"https://stackoverflow.com/questions/77566561/reading-d70a-weighing-data-from-serial-com-port-with-java","title":"Reading D70A weighing data from serial COM port with Java","body":"<p>I want to read data from the scale and print it on the label with JavaFX. I made all the settings according to the documentation, but I cannot read the data. comPort.readBytes() always returns 0. Does anyone have any ideas about this? I am adding the document as a URL. I am working with cb string RS232.\n<a href=\"https://www.manualslib.com/manual/2121484/Bilanciai-D70e.html?page=51#manual\" rel=\"nofollow noreferrer\">https://www.manualslib.com/manual/2121484/Bilanciai-D70e.html?page=51#manual</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.togisoft.venetacollaudipeso;\n\nimport com.fazecast.jSerialComm.SerialPort;\nimport javafx.application.Platform;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Label;\nimport javafx.scene.input.KeyCode;\nimport javafx.scene.input.KeyEvent;\nimport net.sf.jasperreports.engine.JREmptyDataSource;\nimport net.sf.jasperreports.engine.JasperFillManager;\nimport net.sf.jasperreports.engine.JasperPrint;\nimport net.sf.jasperreports.engine.JasperPrintManager;\n\nimport javax.print.PrintServiceLookup;\n\nimport javax.print.PrintService;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\n\n\npublic class AppController {\n    private SerialPort comPort;\n\n    @FXML\n    private Label weightLabel;\n\n\n    @FXML\n    public void initialize() {\n        // COM Portunu bul ver aç\n        comPort = SerialPort.getCommPort(Helper.getComPort());\n        comPort.setNumDataBits(7);\n        comPort.setBaudRate(Helper.getBaudRate());\n        comPort.setParity(Helper.getComParity());\n        comPort.setNumStopBits(Helper.getStopBit());\n        ScheduledExecutorService executor = Executors.newScheduledThreadPool(1);\n        if (comPort.openPort()) {\n            System.out.println(&quot;Port başarıyla açıldı.&quot;);\n\n            executor.scheduleAtFixedRate(this::readFromSerial, 0, 300, TimeUnit.MILLISECONDS);\n        } else {\n            System.out.println(&quot;Port açılırken hata oluştu!.&quot;);\n            Platform.runLater(() -&gt; weightLabel.setText(&quot;PORT Errore!&quot;));\n        }\n\n    }\n\n    private void readFromSerial() {\n        while (comPort.isOpen()) {\n            byte[] readBuffer = new byte[8];\n            int numRead = comPort.readBytes(readBuffer, readBuffer.length);\n            if (numRead &gt; 0) {\n                StringBuilder receivedData = new StringBuilder();\n                for (int i = 0; i &lt; numRead; i++) {\n                    // Son biti (en anlamsız biti) düşürerek 7 bitlik veriyi elde et\n                    int sevenBitData = readBuffer[i] &amp; 0x7F;\n                    receivedData.append((char) sevenBitData); // Veriyi String olarak birleştir\n                }\n                String weight = extractWeightFromData(receivedData.toString());\n                updateUIWithWeight(formatWeight(weight));\n            }\n        }\n    }\n\n    private String formatWeight(String weightData) {\n        if (weightData == null || !weightData.contains(&quot;.&quot;)) {\n            return &quot;0.0&quot;;\n        }\n\n        int significantDigits = 0;\n        for (char c : weightData.toCharArray()) {\n            if (Character.isDigit(c)) {\n                significantDigits++;\n            }\n        }\n\n        if (significantDigits &gt;= 5) {\n            try {\n                float weight = Float.parseFloat(weightData);\n                if (weight == (int) weight) {\n                    // Ondalık kısmı sıfır ise, ondalık kısmı gösterme\n                    return String.format(&quot;%.0f&quot;, weight);\n                } else {\n                    // Ondalık kısmı sıfırdan farklı ise, ondalık kısmı göster\n                    return String.format(&quot;%.1f&quot;, weight);\n                }\n            } catch (NumberFormatException e) {\n                System.out.println(e.getLocalizedMessage());// Hata durumunda işlemler\n            }\n        }\n\n        return &quot;0.0&quot;; // Varsayılan olarak 0 döndür\n    }\n\n\n    private String extractWeightFromData(String data) {\n        if (data.length() &gt;= 8 &amp;&amp; data.startsWith(&quot;$(24H&quot;)) {\n            return data.substring(2, 7); // 3–7 karakterleri alarak ağırlık bilgisini çıkar\n        }\n        return &quot;&quot;;\n    }\n\n    private void updateUIWithWeight(String weight) {\n        Platform.runLater(() -&gt; weightLabel.setText(weight));\n    }\n\n\n    @FXML\n    void onStamp() {\n        System.out.println(weightLabel.getText());\n        try {\n            String sourceFileName = &quot;weight.jasper&quot;;\n\n            Map&lt;String, Object&gt; parameters = new HashMap&lt;&gt;();\n            parameters.put(&quot;kilo&quot;, weightLabel.getText() + &quot; KG&quot;); // Örnek parametre\n\n            JasperPrint print = JasperFillManager.fillReport(sourceFileName, parameters, new JREmptyDataSource());\n\n            PrintService[] printServices = PrintServiceLookup.lookupPrintServices(null, null);\n            PrintService selectedPrintService = null;\n            for (PrintService printService : printServices) {\n                if (printService.getName().equalsIgnoreCase(Helper.getPrinter())) {\n                    selectedPrintService = printService;\n                    break;\n                }\n            }\n\n            if (selectedPrintService != null) {\n                JasperPrintManager.printReport(print, false);\n            } else {\n                System.out.println(&quot;Belirtilen yazıcı bulunamadı.&quot;);\n            }\n\n        } catch (Exception ex) {\n            System.out.println(ex.getMessage());\n        }\n    }\n\n    @FXML\n    public void onEnterPressed(KeyEvent event) {\n        if (event.getCode() == KeyCode.ENTER) {\n            System.out.println(&quot;Enter pressed&quot;);\n            onStamp();\n        }\n    }\n\n\n    @Override\n    protected void finalize() {\n        if (comPort != null &amp;&amp; comPort.isOpen()) {\n            comPort.closePort();\n            System.out.println(&quot;Port closed.&quot;);\n        }\n    }\n}\n\n</code></pre>\n"},{"tags":["java","mongodb","dropwizard","datastore","morphia"],"comments":[{"score":0,"post_type":"question","creation_date":1701197790,"post_id":77543204,"comment_id":136744798,"body_markdown":"What does `Event` look like?","link":"https://stackoverflow.com/questions/77543204/morphia-datastore-find-query-yields-0-results-but-it-works-fine-with-aggregate#comment136744798_77543204","body":"What does <code>Event</code> look like?"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701197849,"creation_date":1701197849,"answer_id":77566473,"question_id":77543204,"body_markdown":"If you&#39;re using Morphia you don&#39;t need, or probably even want, `PojoCodec`.  That might be introducing conflicting resolutions.","link":"https://stackoverflow.com/questions/77543204/morphia-datastore-find-query-yields-0-results-but-it-works-fine-with-aggregate/77566473#77566473","title":"Morphia datastore.find() query yields 0 results but it works fine with aggregate","body":"<p>If you're using Morphia you don't need, or probably even want, <code>PojoCodec</code>.  That might be introducing conflicting resolutions.</p>\n"}],"comment_count":1,"is_answered":false,"view_count":21,"answer_count":1,"score":0,"last_activity_date":1701197849,"creation_date":1700829450,"question_id":77543204,"body_markdown":"I am making code changes to upgrade to MongoDB 5 for a java dropwizard application.\r\nUpgraded versions\r\nmongodb-driver-sync : 4.10.2\r\nmorphia-core: 2.3.8\r\n\r\nFor test case setup I have used this code : \r\n\r\n\r\n```\r\nserver = new MongoServer(new MemoryBackend());\r\n        InetSocketAddress serverAddress = server.bind();\r\n        String connectionString = &quot;mongodb://&quot; + serverAddress.getHostString() + &quot;:&quot; + serverAddress.getPort();\r\n        client = MongoClients.create(connectionString);\r\n        CodecProvider pojoCodecProvider = PojoCodecProvider.builder().automatic(true)\r\n            .build();\r\n\r\n        CodecRegistry pojoCodecRegistry = fromRegistries(CodecRegistries.fromCodecs(new UuidCodec(UuidRepresentation.JAVA_LEGACY)), getDefaultCodecRegistry()\r\n            , fromProviders(pojoCodecProvider));\r\n\r\n        MapperOptions mapperOptions = MapperOptions.builder()\r\n            .codecProvider(pojoCodecRegistry)\r\n            .build();\r\n\r\n        datastore = Morphia.createDatastore(client, &quot;events&quot;, mapperOptions);\r\n        datastore.getMapper().mapPackageFromClass(Event.class);\r\n        datastore.ensureIndexes();\r\n```\r\nSaved events using \r\n`datastore.save(event)`\r\nno issue, but while retrieving events  \r\n\r\n```\r\nList&lt;Event&gt; events = datastore.find(Event.class).iterator().toList();;\r\n```\r\nyields 0 results while\r\n\r\n```\r\nAggregation&lt;Event&gt; temp = datastore.aggregate(Event.class);\r\n        List&lt;Event&gt; aggList =  temp.execute(Event.class).toList();\r\n```\r\nworks fine.\r\n\r\n \r\n\r\n\r\nWhat could be the reason for above mentioned behaviour?\r\n","link":"https://stackoverflow.com/questions/77543204/morphia-datastore-find-query-yields-0-results-but-it-works-fine-with-aggregate","title":"Morphia datastore.find() query yields 0 results but it works fine with aggregate","body":"<p>I am making code changes to upgrade to MongoDB 5 for a java dropwizard application.\nUpgraded versions\nmongodb-driver-sync : 4.10.2\nmorphia-core: 2.3.8</p>\n<p>For test case setup I have used this code :</p>\n<pre><code>server = new MongoServer(new MemoryBackend());\n        InetSocketAddress serverAddress = server.bind();\n        String connectionString = &quot;mongodb://&quot; + serverAddress.getHostString() + &quot;:&quot; + serverAddress.getPort();\n        client = MongoClients.create(connectionString);\n        CodecProvider pojoCodecProvider = PojoCodecProvider.builder().automatic(true)\n            .build();\n\n        CodecRegistry pojoCodecRegistry = fromRegistries(CodecRegistries.fromCodecs(new UuidCodec(UuidRepresentation.JAVA_LEGACY)), getDefaultCodecRegistry()\n            , fromProviders(pojoCodecProvider));\n\n        MapperOptions mapperOptions = MapperOptions.builder()\n            .codecProvider(pojoCodecRegistry)\n            .build();\n\n        datastore = Morphia.createDatastore(client, &quot;events&quot;, mapperOptions);\n        datastore.getMapper().mapPackageFromClass(Event.class);\n        datastore.ensureIndexes();\n</code></pre>\n<p>Saved events using\n<code>datastore.save(event)</code>\nno issue, but while retrieving events</p>\n<pre><code>List&lt;Event&gt; events = datastore.find(Event.class).iterator().toList();;\n</code></pre>\n<p>yields 0 results while</p>\n<pre><code>Aggregation&lt;Event&gt; temp = datastore.aggregate(Event.class);\n        List&lt;Event&gt; aggList =  temp.execute(Event.class).toList();\n</code></pre>\n<p>works fine.</p>\n<p>What could be the reason for above mentioned behaviour?</p>\n"},{"tags":["java","serialization","jackson","deserialization"],"comments":[{"score":0,"post_type":"question","creation_date":1700821968,"post_id":77542431,"comment_id":136702904,"body_markdown":"Have you tried [`@JsonView`](https://javadoc.io/doc/com.fasterxml.jackson.core/jackson-annotations/2.9.1/com/fasterxml/jackson/annotation/JsonView.html)?","link":"https://stackoverflow.com/questions/77542431/jackson-is-there-a-way-to-exclude-everything-by-default-in-a-class-and-include#comment136702904_77542431","body":"Have you tried <a href=\"https://javadoc.io/doc/com.fasterxml.jackson.core/jackson-annotations/2.9.1/com/fasterxml/jackson/annotation/JsonView.html\" rel=\"nofollow noreferrer\"><code>@JsonView</code></a>?"},{"score":0,"post_type":"question","creation_date":1701100864,"post_id":77542431,"comment_id":136730265,"body_markdown":"I hadn&#39;t tried that but from what I can see, it requires some boilerplate to be able to use @JsonView. Also, I don&#39;t quite see how it would help me to exclude everything by default and explicitly mark the properties I want.","link":"https://stackoverflow.com/questions/77542431/jackson-is-there-a-way-to-exclude-everything-by-default-in-a-class-and-include#comment136730265_77542431","body":"I hadn&#39;t tried that but from what I can see, it requires some boilerplate to be able to use @JsonView. Also, I don&#39;t quite see how it would help me to exclude everything by default and explicitly mark the properties I want."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701162809,"post_id":77545345,"comment_id":136738126,"body_markdown":"Both of your solutions unfortunately requires me to explicitly ignore, but what I actually want is ignore by default. Since there are many properties I don&#39;t want included, it is not feasible to manually exclude them.","link":"https://stackoverflow.com/questions/77542431/jackson-is-there-a-way-to-exclude-everything-by-default-in-a-class-and-include/77545345#comment136738126_77545345","body":"Both of your solutions unfortunately requires me to explicitly ignore, but what I actually want is ignore by default. Since there are many properties I don&#39;t want included, it is not feasible to manually exclude them."},{"score":0,"post_type":"answer","creation_date":1701197457,"post_id":77545345,"comment_id":136744737,"body_markdown":"i updated the the post, check the third solution and i hope this solution help you","link":"https://stackoverflow.com/questions/77542431/jackson-is-there-a-way-to-exclude-everything-by-default-in-a-class-and-include/77545345#comment136744737_77545345","body":"i updated the the post, check the third solution and i hope this solution help you"}],"comment_count":2,"score":0,"last_activity_date":1701197379,"last_edit_date":1701197379,"creation_date":1700854688,"answer_id":77545345,"question_id":77542431,"body_markdown":"You can try one of these solutions:\r\n\r\n\r\n 1. First solution\r\n```\r\n@JsonIgnoreProperties(value = {&quot;usefulProperty2&quot;, &quot;usefulProperty3&quot;}, ignoreUnknown = true)\r\npublic class BaseClass {\r\n    private long usefulProperty1;\r\n    private BigDecimal usefulProperty2;\r\n    private BigDecimal usefulProperty3;\r\n    private int garbageProperty;\r\n    // other properties\r\n}\r\n```\r\n 2. Second Solution\r\n```\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class BaseClass {\r\n\r\n    @JsonIgnore\r\n    private long usefulProperty1;\r\n\r\n    @JsonIgnore\r\n    private BigDecimal usefulProperty2;\r\n\r\n    @JsonProperty\r\n    private BigDecimal usefulProperty3;\r\n\r\n    @JsonProperty\r\n    private int garbageProperty;\r\n\r\n    // other properties\r\n}\r\n```\r\n \r\n\r\n 3. Third Solution: You can use **Mixin** is a class containing the fields you want to include with **@JsonInclude** annotations. This mixin will be used to configure the serialization of BaseClass\r\n\r\n```\r\npublic class Mixin {\r\n    @JsonInclude\r\n    private long usefulProperty1;\r\n\r\n    @JsonInclude\r\n    private BigDecimal usefulProperty2;\r\n\r\n    @JsonInclude\r\n    private BigDecimal usefulProperty3;\r\n}\r\n\r\npublic class BaseClass {\r\n    private long usefulProperty1;\r\n    private BigDecimal usefulProperty2;\r\n    private BigDecimal usefulProperty3;\r\n    private int garbageProperty;\r\n    // other properties\r\n}\r\n\r\n\r\npublic class Test {\r\n    public static void main(String[] args) throws Exception {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        objectMapper.addMixIn(BaseClass.class, Mixin.class);\r\n\r\n        BaseClass baseClass = new BaseClass();\r\n        baseClass.setUsefulProperty1(1000);\r\n        baseClass.setUsefulProperty2(BigDecimal.valueOf(42.000075));\r\n\r\n        String json = objectMapper.writeValueAsString(baseClass);\r\n        System.out.println(json);\r\n    }\r\n}\r\n```\r\nTry it and let me know","link":"https://stackoverflow.com/questions/77542431/jackson-is-there-a-way-to-exclude-everything-by-default-in-a-class-and-include/77545345#77545345","title":"Jackson: Is there a way to exclude everything by default in a class and include explicitly?","body":"<p>You can try one of these solutions:</p>\n<ol>\n<li>First solution</li>\n</ol>\n<pre><code>@JsonIgnoreProperties(value = {&quot;usefulProperty2&quot;, &quot;usefulProperty3&quot;}, ignoreUnknown = true)\npublic class BaseClass {\n    private long usefulProperty1;\n    private BigDecimal usefulProperty2;\n    private BigDecimal usefulProperty3;\n    private int garbageProperty;\n    // other properties\n}\n</code></pre>\n<ol start=\"2\">\n<li>Second Solution</li>\n</ol>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class BaseClass {\n\n    @JsonIgnore\n    private long usefulProperty1;\n\n    @JsonIgnore\n    private BigDecimal usefulProperty2;\n\n    @JsonProperty\n    private BigDecimal usefulProperty3;\n\n    @JsonProperty\n    private int garbageProperty;\n\n    // other properties\n}\n</code></pre>\n<ol start=\"3\">\n<li>Third Solution: You can use <strong>Mixin</strong> is a class containing the fields you want to include with <strong>@JsonInclude</strong> annotations. This mixin will be used to configure the serialization of BaseClass</li>\n</ol>\n<pre><code>public class Mixin {\n    @JsonInclude\n    private long usefulProperty1;\n\n    @JsonInclude\n    private BigDecimal usefulProperty2;\n\n    @JsonInclude\n    private BigDecimal usefulProperty3;\n}\n\npublic class BaseClass {\n    private long usefulProperty1;\n    private BigDecimal usefulProperty2;\n    private BigDecimal usefulProperty3;\n    private int garbageProperty;\n    // other properties\n}\n\n\npublic class Test {\n    public static void main(String[] args) throws Exception {\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.addMixIn(BaseClass.class, Mixin.class);\n\n        BaseClass baseClass = new BaseClass();\n        baseClass.setUsefulProperty1(1000);\n        baseClass.setUsefulProperty2(BigDecimal.valueOf(42.000075));\n\n        String json = objectMapper.writeValueAsString(baseClass);\n        System.out.println(json);\n    }\n}\n</code></pre>\n<p>Try it and let me know</p>\n"}],"comment_count":2,"is_answered":false,"view_count":38,"answer_count":1,"score":0,"last_activity_date":1701197379,"creation_date":1700821754,"question_id":77542431,"body_markdown":"I have been messing about with Jackson for a while now and can&#39;t for the life of me figure out how to make Jackson only include the properties I tell it to.\r\n\r\nWe have a setup with datamodels that inherit from a base class and we would like to exclude everything from this base class by default, perhaps with a few exceptions.\r\n\r\nBecause of this, it would make a lot more sense for us to be able to exclude everything unless it&#39;s explicitly included.\r\n\r\nWhy is this not possible? It seems like a very common use-case to me.\r\nI couldn&#39;t find anything that even resembled a solution after hours of googling and trial and error\r\n\r\nWhat I would like to end up with is something like this:\r\n\r\n```\r\n@JsonIgnore\r\npublic class BaseClass {\r\n    @JsonInclude\r\n    private long usefulProperty1;\r\n\r\n    @JsonInclude\r\n    private BigDecimal usefulProperty2;\r\n\r\n    @JsonInclude\r\n    private BigDecimal usefulProperty3;\r\n\r\n    private int garbageProperty;\r\n    //.\r\n    //.\r\n    //.\r\n    private int garbageProperty200;\r\n}\r\n\r\npublic class SubClass extends BaseClass {\r\n    private String usefulProperty1;\r\n    private long usefulProperty2;\r\n}\r\n```\r\nThat is, I&#39;d like to only use annotations, or at the very least, a one time implementation in the base class. I don&#39;t want extra boilerplate code in every class that tells Jackson what to include/exclude.\r\nAlso, we don&#39;t really care about getters and setters (we just specify the fields and have Lombok generate getters and setters), so it would be nice with a solution where we can apply annotations directly to the fields.\r\n\r\n\r\nI tried visibility options but that just resulted in the class not being serialized/deserialized at all.\r\nI feel like I&#39;ve tried every combination of @JsonInclude @JsonProperty @JsonIncludeProperties (on class) @JsonIgnore and the likes, and nothing worked for me.","link":"https://stackoverflow.com/questions/77542431/jackson-is-there-a-way-to-exclude-everything-by-default-in-a-class-and-include","title":"Jackson: Is there a way to exclude everything by default in a class and include explicitly?","body":"<p>I have been messing about with Jackson for a while now and can't for the life of me figure out how to make Jackson only include the properties I tell it to.</p>\n<p>We have a setup with datamodels that inherit from a base class and we would like to exclude everything from this base class by default, perhaps with a few exceptions.</p>\n<p>Because of this, it would make a lot more sense for us to be able to exclude everything unless it's explicitly included.</p>\n<p>Why is this not possible? It seems like a very common use-case to me.\nI couldn't find anything that even resembled a solution after hours of googling and trial and error</p>\n<p>What I would like to end up with is something like this:</p>\n<pre><code>@JsonIgnore\npublic class BaseClass {\n    @JsonInclude\n    private long usefulProperty1;\n\n    @JsonInclude\n    private BigDecimal usefulProperty2;\n\n    @JsonInclude\n    private BigDecimal usefulProperty3;\n\n    private int garbageProperty;\n    //.\n    //.\n    //.\n    private int garbageProperty200;\n}\n\npublic class SubClass extends BaseClass {\n    private String usefulProperty1;\n    private long usefulProperty2;\n}\n</code></pre>\n<p>That is, I'd like to only use annotations, or at the very least, a one time implementation in the base class. I don't want extra boilerplate code in every class that tells Jackson what to include/exclude.\nAlso, we don't really care about getters and setters (we just specify the fields and have Lombok generate getters and setters), so it would be nice with a solution where we can apply annotations directly to the fields.</p>\n<p>I tried visibility options but that just resulted in the class not being serialized/deserialized at all.\nI feel like I've tried every combination of @JsonInclude @JsonProperty @JsonIncludeProperties (on class) @JsonIgnore and the likes, and nothing worked for me.</p>\n"},{"tags":["java","future","latency"],"comments":[{"score":0,"post_type":"question","creation_date":1701123801,"post_id":77559200,"comment_id":136734054,"body_markdown":"Why not call `System.nanoTime` at the top and bottom of your task code, and return a `Duration` object as part of the `Future` object’s result?","link":"https://stackoverflow.com/questions/77559200/how-to-time-a-listenablefuture#comment136734054_77559200","body":"Why not call <code>System.nanoTime</code> at the top and bottom of your task code, and return a <code>Duration</code> object as part of the <code>Future</code> object’s result?"},{"score":0,"post_type":"question","creation_date":1701140391,"post_id":77559200,"comment_id":136735664,"body_markdown":"@BasilBourque Maybe I misunderstand your suggestion, but what if I don&#39;t control the task code?","link":"https://stackoverflow.com/questions/77559200/how-to-time-a-listenablefuture#comment136735664_77559200","body":"@BasilBourque Maybe I misunderstand your suggestion, but what if I don&#39;t control the task code?"},{"score":0,"post_type":"question","creation_date":1701142325,"post_id":77559200,"comment_id":136735806,"body_markdown":"Actually, I ran some tests where I force/suggest garbage collection after the method exits, and it seems that the `timer` object doesn&#39;t get GC&#39;ed, presumably because the future listener holds a reference to it.\nSo I think my approach works.\nBut if someone with more java knowledge can confirm, I&#39;d appreciate it","link":"https://stackoverflow.com/questions/77559200/how-to-time-a-listenablefuture#comment136735806_77559200","body":"Actually, I ran some tests where I force/suggest garbage collection after the method exits, and it seems that the <code>timer</code> object doesn&#39;t get GC&#39;ed, presumably because the future listener holds a reference to it. So I think my approach works. But if someone with more java knowledge can confirm, I&#39;d appreciate it"},{"score":0,"post_type":"question","creation_date":1701155373,"post_id":77559200,"comment_id":136736917,"body_markdown":"`Timer` is a legacy class, as noted in its Javadoc.","link":"https://stackoverflow.com/questions/77559200/how-to-time-a-listenablefuture#comment136736917_77559200","body":"<code>Timer</code> is a legacy class, as noted in its Javadoc."},{"score":0,"post_type":"question","creation_date":1701155428,"post_id":77559200,"comment_id":136736922,"body_markdown":"If you don&#39;t control the task code, wrap it in your own new task code. Wrap the original task’s result in a new result object, to be returned via the `Future`. Perhaps you can find a way to measure elapsed time outside the task, but that seems awkward.","link":"https://stackoverflow.com/questions/77559200/how-to-time-a-listenablefuture#comment136736922_77559200","body":"If you don&#39;t control the task code, wrap it in your own new task code. Wrap the original task’s result in a new result object, to be returned via the <code>Future</code>. Perhaps you can find a way to measure elapsed time outside the task, but that seems awkward."},{"score":0,"post_type":"question","creation_date":1701155565,"post_id":77559200,"comment_id":136736940,"body_markdown":"If you don&#39;t control the task code, you *really* should mention that in the Question.","link":"https://stackoverflow.com/questions/77559200/how-to-time-a-listenablefuture#comment136736940_77559200","body":"If you don&#39;t control the task code, you <i>really</i> should mention that in the Question."},{"score":0,"post_type":"question","creation_date":1701197014,"post_id":77559200,"comment_id":136744655,"body_markdown":"@BasilBourque I made some clarifying edits based on your suggestion. But I think my original solution actually works. My listener code copies the `timer` pointer and prevents it from being GC&#39;ed until after it closes, at which point, I capture the duration. I believe this would be similar to what you propose of calling `System.nanoTime` and passing that into the listener, which would copy the primitive `long` into the function.\nLet me know if you see any issues","link":"https://stackoverflow.com/questions/77559200/how-to-time-a-listenablefuture#comment136744655_77559200","body":"@BasilBourque I made some clarifying edits based on your suggestion. But I think my original solution actually works. My listener code copies the <code>timer</code> pointer and prevents it from being GC&#39;ed until after it closes, at which point, I capture the duration. I believe this would be similar to what you propose of calling <code>System.nanoTime</code> and passing that into the listener, which would copy the primitive <code>long</code> into the function. Let me know if you see any issues"},{"score":0,"post_type":"question","creation_date":1701201582,"post_id":77559200,"comment_id":136745438,"body_markdown":"It is not clear what ListenableFuture is, is it Guice or anything else? If you can control the ExecutorService that executes your tasks, there are mechanisms to instrument the task and measure what you want.","link":"https://stackoverflow.com/questions/77559200/how-to-time-a-listenablefuture#comment136745438_77559200","body":"It is not clear what ListenableFuture is, is it Guice or anything else? If you can control the ExecutorService that executes your tasks, there are mechanisms to instrument the task and measure what you want."},{"score":0,"post_type":"question","creation_date":1701208190,"post_id":77559200,"comment_id":136746449,"body_markdown":"Nothing is garbage-collected if there&#39;s still a reference to it. There&#39;s no such thing as &quot;the object is garbage, so I cannot call a method on it&quot; – that&#39;s simply not how the GC in Java works.","link":"https://stackoverflow.com/questions/77559200/how-to-time-a-listenablefuture#comment136746449_77559200","body":"Nothing is garbage-collected if there&#39;s still a reference to it. There&#39;s no such thing as &quot;the object is garbage, so I cannot call a method on it&quot; – that&#39;s simply not how the GC in Java works."}],"comment_count":9,"is_answered":false,"view_count":46,"answer_count":0,"score":0,"last_activity_date":1701197058,"creation_date":1701110160,"last_edit_date":1701197058,"question_id":77559200,"body_markdown":"I want to track how long an async process takes.\r\nMy general approach for synchronous processes is to record the current time, run the process, and finally calculate and record the difference. I use an `AutoCloseable` Timer object to do this. But I&#39;m not sure if this will work for futures.\r\n\r\n    class MyTimer implements AutoCloseable {\r\n      private final long startTime;\r\n      MyTimer(...) {\r\n        startTime = clock.millis();\r\n      }\r\n\r\n      @Override\r\n      public void close() {\r\n        recorder.record(clock.millis() - startTime);\r\n      }\r\n    }\r\n\r\nThis doesn&#39;t work obviously because I&#39;m only recording the time it takes to construct the future, not actually complete it fully\r\n\r\n    public ListenableFuture doSomethingAsync() {\r\n      try(MyTimer timer = new MyTimer()) {\r\n        return thirdPartyLib.readDatabase();\r\n      }\r\n    }\r\n\r\nI&#39;m not sure if this will work though\r\n\r\n    public ListenableFuture doSomethingAsync() {\r\n      MyTimer timer = new MyTimer();\r\n      ListenableFuture future = thirdPartyLib.readDatabase();\r\n      future.addListener(() -&gt; timer.close(), listeningExecutorService);\r\n      return future;\r\n    }\r\n\r\nWhat I&#39;m afraid of is that when the method exits, the method-scoped Timer is garbage collected so when the listener lambda executes, `timer` is in a unpredictable state.\r\nBut I&#39;m not sure if the fact that the lambda holds a reference to `timer` prevents it from going away once the method exists.\r\n\r\nWhat&#39;s the right way to time the future?\r\n\r\n**Edit** Edit to make clear that `readDatabase()` is not my task code but 3rd party library I don&#39;t control. Also, `timer` is a custom class I built.","link":"https://stackoverflow.com/questions/77559200/how-to-time-a-listenablefuture","title":"How to time a ListenableFuture","body":"<p>I want to track how long an async process takes.\nMy general approach for synchronous processes is to record the current time, run the process, and finally calculate and record the difference. I use an <code>AutoCloseable</code> Timer object to do this. But I'm not sure if this will work for futures.</p>\n<pre><code>class MyTimer implements AutoCloseable {\n  private final long startTime;\n  MyTimer(...) {\n    startTime = clock.millis();\n  }\n\n  @Override\n  public void close() {\n    recorder.record(clock.millis() - startTime);\n  }\n}\n</code></pre>\n<p>This doesn't work obviously because I'm only recording the time it takes to construct the future, not actually complete it fully</p>\n<pre><code>public ListenableFuture doSomethingAsync() {\n  try(MyTimer timer = new MyTimer()) {\n    return thirdPartyLib.readDatabase();\n  }\n}\n</code></pre>\n<p>I'm not sure if this will work though</p>\n<pre><code>public ListenableFuture doSomethingAsync() {\n  MyTimer timer = new MyTimer();\n  ListenableFuture future = thirdPartyLib.readDatabase();\n  future.addListener(() -&gt; timer.close(), listeningExecutorService);\n  return future;\n}\n</code></pre>\n<p>What I'm afraid of is that when the method exits, the method-scoped Timer is garbage collected so when the listener lambda executes, <code>timer</code> is in a unpredictable state.\nBut I'm not sure if the fact that the lambda holds a reference to <code>timer</code> prevents it from going away once the method exists.</p>\n<p>What's the right way to time the future?</p>\n<p><strong>Edit</strong> Edit to make clear that <code>readDatabase()</code> is not my task code but 3rd party library I don't control. Also, <code>timer</code> is a custom class I built.</p>\n"},{"tags":["java","spring-boot","spring-cloud-gateway"],"comment_count":0,"is_answered":false,"view_count":8,"answer_count":0,"score":0,"last_activity_date":1701196381,"creation_date":1701196381,"question_id":77566341,"body_markdown":"I am encountering an issue while utilizing the LocalResponseCache filter.\r\nHere is the route configuration I am using:\r\n\r\n```\r\n - id: findEntityByIdByKindPath\r\n  uri: ${app.backend.protocol}://${app.backend.host}:${app.backend.port}\r\n  predicates:\r\n    - Path=${app.inbound.baseUri}{kindPath}/{recordId}\r\n    - Method=GET\r\n  filters:\r\n    - name: CheckIfRouteEnabled\r\n    - RewritePath=${app.inbound.baseUri}(?&lt;kindPath&gt;/?.*)\\/(?&lt;recordId&gt;.*), ${app.backend.baseUri}generic-entities/${recordId}\r\n    - name: AuthenticateRequest\r\n    - name: RequestRateLimiter\r\n      args:\r\n        redis-rate-limiter:\r\n          replenishRate: 10\r\n          burstCapacity: 20\r\n    - name: AuthorizeRequest\r\n      args:\r\n        policyName: /policies/auth/routes/findEntityById/policy\r\n    - RemoveRequestHeader=Authorization\r\n    - LocalResponseCache=${app.caching.timeToLive},${app.caching.size}\r\n    - name: ApplyFieldsetConfig\r\n    - name: DropFieldsForFindEntityById\r\n      args:\r\n        policyName: /policies/fields/genericentities/policy\r\n```\r\n\r\nThe issue is about the execution order. Once the response is cached, subsequent requests made through gateway retrieve responses from the cache, cause gateway to bypass previous filters such as `CheckIfRouteEnabled`, `AuthenticateRequest`, and `Authorize`.\r\n\r\nThis behavior is undesirable for my use case, where I am generating a policy inquiry data and placing it in the gateway attributes within the `Authenticate` filter code. This data is then used to execute policies when filter needs it, such as `Authorize` and `DropFieldsForFindEntityById` to determine who can call and see what. As this data couldn&#39;t be prepared when `Authenticate` filter is skipped, `DropFieldsForFindEntityById` filter is failing.\r\n\r\nAnother issue is when I remove the `Authorization` header before forwarding the request to the downstream service. This causes the key calculated to put to the cache to differ from the key calculated when getting the data from the cache.\r\n\r\nThe expected behavior is to execute all filters in the specified order before reaching the `LocalResponseCache`. If the request is cached, I would expect filters `CheckIfRouteEnabled`, `AuthenticateRequest`, and `Authorize` to be executed and continue with `ApplyFieldsetConfig` and `DropFieldsForFindEntityById` as if the response were obtained from the backend. If the request is not cached, again the previous filters should be executed, then response should be cached, and the execution should proceed with `ApplyFieldsetConfig` and `DropFieldsForFindEntityById` filters.\r\n\r\nExecution order of the `ApplyFieldsetConfig` and `DropFieldsForFindEntityById` are:\r\n\r\n```java\r\nNettyWriteResponseFilter.WRITE_RESPONSE_FILTER_ORDER - 10\r\n```\r\n\r\nOther filters does not have given order in the code.","link":"https://stackoverflow.com/questions/77566341/localresponsecache-fails-to-retrieve-if-removerequestheader-is-used","title":"LocalResponseCache fails to retrieve if RemoveRequestHeader is used","body":"<p>I am encountering an issue while utilizing the LocalResponseCache filter.\nHere is the route configuration I am using:</p>\n<pre><code> - id: findEntityByIdByKindPath\n  uri: ${app.backend.protocol}://${app.backend.host}:${app.backend.port}\n  predicates:\n    - Path=${app.inbound.baseUri}{kindPath}/{recordId}\n    - Method=GET\n  filters:\n    - name: CheckIfRouteEnabled\n    - RewritePath=${app.inbound.baseUri}(?&lt;kindPath&gt;/?.*)\\/(?&lt;recordId&gt;.*), ${app.backend.baseUri}generic-entities/${recordId}\n    - name: AuthenticateRequest\n    - name: RequestRateLimiter\n      args:\n        redis-rate-limiter:\n          replenishRate: 10\n          burstCapacity: 20\n    - name: AuthorizeRequest\n      args:\n        policyName: /policies/auth/routes/findEntityById/policy\n    - RemoveRequestHeader=Authorization\n    - LocalResponseCache=${app.caching.timeToLive},${app.caching.size}\n    - name: ApplyFieldsetConfig\n    - name: DropFieldsForFindEntityById\n      args:\n        policyName: /policies/fields/genericentities/policy\n</code></pre>\n<p>The issue is about the execution order. Once the response is cached, subsequent requests made through gateway retrieve responses from the cache, cause gateway to bypass previous filters such as <code>CheckIfRouteEnabled</code>, <code>AuthenticateRequest</code>, and <code>Authorize</code>.</p>\n<p>This behavior is undesirable for my use case, where I am generating a policy inquiry data and placing it in the gateway attributes within the <code>Authenticate</code> filter code. This data is then used to execute policies when filter needs it, such as <code>Authorize</code> and <code>DropFieldsForFindEntityById</code> to determine who can call and see what. As this data couldn't be prepared when <code>Authenticate</code> filter is skipped, <code>DropFieldsForFindEntityById</code> filter is failing.</p>\n<p>Another issue is when I remove the <code>Authorization</code> header before forwarding the request to the downstream service. This causes the key calculated to put to the cache to differ from the key calculated when getting the data from the cache.</p>\n<p>The expected behavior is to execute all filters in the specified order before reaching the <code>LocalResponseCache</code>. If the request is cached, I would expect filters <code>CheckIfRouteEnabled</code>, <code>AuthenticateRequest</code>, and <code>Authorize</code> to be executed and continue with <code>ApplyFieldsetConfig</code> and <code>DropFieldsForFindEntityById</code> as if the response were obtained from the backend. If the request is not cached, again the previous filters should be executed, then response should be cached, and the execution should proceed with <code>ApplyFieldsetConfig</code> and <code>DropFieldsForFindEntityById</code> filters.</p>\n<p>Execution order of the <code>ApplyFieldsetConfig</code> and <code>DropFieldsForFindEntityById</code> are:</p>\n<pre class=\"lang-java prettyprint-override\"><code>NettyWriteResponseFilter.WRITE_RESPONSE_FILTER_ORDER - 10\n</code></pre>\n<p>Other filters does not have given order in the code.</p>\n"},{"tags":["java","maven","avro","pojo"],"comments":[{"score":0,"post_type":"question","creation_date":1685958840,"post_id":76405053,"comment_id":134728446,"body_markdown":"Check answer here: https://stackoverflow.com/questions/61642736/how-to-generate-source-code-from-avro-schema-in-maveneclipse","link":"https://stackoverflow.com/questions/76405053/convert-a-pojo-to-avro-schema#comment134728446_76405053","body":"Check answer here: <a href=\"https://stackoverflow.com/questions/61642736/how-to-generate-source-code-from-avro-schema-in-maveneclipse\" title=\"how to generate source code from avro schema in maveneclipse\">stackoverflow.com/questions/61642736/&hellip;</a>"},{"score":0,"post_type":"question","creation_date":1685958869,"post_id":76405053,"comment_id":134728452,"body_markdown":"Does this answer your question? [How to generate source code from avro schema in maven(eclipse)?](https://stackoverflow.com/questions/61642736/how-to-generate-source-code-from-avro-schema-in-maveneclipse)","link":"https://stackoverflow.com/questions/76405053/convert-a-pojo-to-avro-schema#comment134728452_76405053","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/61642736/how-to-generate-source-code-from-avro-schema-in-maveneclipse\">How to generate source code from avro schema in maven(eclipse)?</a>"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701195697,"creation_date":1701195697,"answer_id":77566270,"question_id":76405053,"body_markdown":"You can use the avro-maven-plugin with the &#39;induce&#39; goal to covert a Pojo class to a avsc schema file\r\n\r\n    &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\r\n                &lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.11.3&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;process-classes&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;induce&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;javaSourceDirectories&gt;${project.basedir}/target/generated-sources/annotations/src/main/java&lt;/javaSourceDirectories&gt;\r\n                            &lt;allowNull&gt;true&lt;/allowNull&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;","link":"https://stackoverflow.com/questions/76405053/convert-a-pojo-to-avro-schema/77566270#77566270","title":"Convert a POJO to AVRO schema","body":"<p>You can use the avro-maven-plugin with the 'induce' goal to covert a Pojo class to a avsc schema file</p>\n<pre><code>&lt;plugin&gt;\n            &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\n            &lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.11.3&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;process-classes&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;induce&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;javaSourceDirectories&gt;${project.basedir}/target/generated-sources/annotations/src/main/java&lt;/javaSourceDirectories&gt;\n                        &lt;allowNull&gt;true&lt;/allowNull&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"}],"comment_count":2,"is_answered":false,"view_count":56,"answer_count":1,"score":0,"last_activity_date":1701195697,"creation_date":1685957111,"last_edit_date":1685957381,"question_id":76405053,"body_markdown":"Given a POJO (e.g. User.java), are there any Maven plug-ins that convert it to an AVRO schema avsc on compilation?\r\n\r\nI tried `Schema schema = ReflectData.get().getSchema(User.class)` but this approach doesn&#39;t generate avsc on compilation.\r\n\r\nMany thanks!","link":"https://stackoverflow.com/questions/76405053/convert-a-pojo-to-avro-schema","title":"Convert a POJO to AVRO schema","body":"<p>Given a POJO (e.g. User.java), are there any Maven plug-ins that convert it to an AVRO schema avsc on compilation?</p>\n<p>I tried <code>Schema schema = ReflectData.get().getSchema(User.class)</code> but this approach doesn't generate avsc on compilation.</p>\n<p>Many thanks!</p>\n"},{"tags":["java","maven","intellij-idea","javafx","scenebuilder"],"comments":[{"score":2,"post_type":"question","creation_date":1701194989,"post_id":77566134,"comment_id":136744341,"body_markdown":"[Do not post images of text](https://meta.stackoverflow.com/q/285551/2189127)","link":"https://stackoverflow.com/questions/77566134/javafx-error-class-mediaview-could-not-be-found#comment136744341_77566134","body":"<a href=\"https://meta.stackoverflow.com/q/285551/2189127\">Do not post images of text</a>"},{"score":2,"post_type":"question","creation_date":1701195069,"post_id":77566134,"comment_id":136744353,"body_markdown":"When you post the code (as text, [correctly formatted](https://meta.stackoverflow.com/questions/251361/how-do-i-format-my-code-blocks)), include the relevant imports.","link":"https://stackoverflow.com/questions/77566134/javafx-error-class-mediaview-could-not-be-found#comment136744353_77566134","body":"When you post the code (as text, <a href=\"https://meta.stackoverflow.com/questions/251361/how-do-i-format-my-code-blocks\">correctly formatted</a>), include the relevant imports."},{"score":2,"post_type":"question","creation_date":1701198179,"post_id":77566134,"comment_id":136744853,"body_markdown":"I don&#39;t recommend using `ea` early access versions.","link":"https://stackoverflow.com/questions/77566134/javafx-error-class-mediaview-could-not-be-found#comment136744853_77566134","body":"I don&#39;t recommend using <code>ea</code> early access versions."}],"comment_count":3,"is_answered":false,"view_count":32,"answer_count":0,"score":0,"last_activity_date":1701194528,"creation_date":1701194292,"last_edit_date":1701194528,"question_id":77566134,"body_markdown":"I am currently starting to work with JavaFX using IntelliJIDEA and Maven.\r\nUntil now, everything worked out fine and I was able to use all the elements I needed.\r\n\r\nBut now I ran into a problem when I tried to add the MediaView element to play a video within my application interface. The element was displayed in SceneBuilder, but the MediaView class could not be accessed in my controller class: [screenshot](https://i.stack.imgur.com/r0LZA.png)\r\n\r\nAnd that even though I added the specific Maven dependency:\r\n\r\n```\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\r\n            &lt;version&gt;21-ea+24&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n\r\nI tried searching in the internet, on youtube, I asked ChatGPT, tried it with making a new intelliJ project, I tried adding the javafx.media library manually into my Project Structure and even the whole JavaFX-Lib.\r\nAnd I also tried adding VM-options but I&#39;m honest with you, that I had no clue what I was doing there.\r\nSomeone even asked this question once on Stack overflow, but its solution did not help me.\r\n\r\nOh, and if it helps in any way, here is the exact error message in the console: [error-screenshot](https://i.stack.imgur.com/k6XL8.png)\r\nIt&#39;s german, but it&#39;s basically saying: &quot;symbol not found, symbol: class MediaView&quot;\r\n\r\n\r\nI am pretty new to all that informatics stuff and I would really appreciate it if someone has another suggestion for me.","link":"https://stackoverflow.com/questions/77566134/javafx-error-class-mediaview-could-not-be-found","title":"JavaFX error: class &#39;MediaView&#39; could not be found","body":"<p>I am currently starting to work with JavaFX using IntelliJIDEA and Maven.\nUntil now, everything worked out fine and I was able to use all the elements I needed.</p>\n<p>But now I ran into a problem when I tried to add the MediaView element to play a video within my application interface. The element was displayed in SceneBuilder, but the MediaView class could not be accessed in my controller class: <a href=\"https://i.stack.imgur.com/r0LZA.png\" rel=\"nofollow noreferrer\">screenshot</a></p>\n<p>And that even though I added the specific Maven dependency:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\n            &lt;version&gt;21-ea+24&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I tried searching in the internet, on youtube, I asked ChatGPT, tried it with making a new intelliJ project, I tried adding the javafx.media library manually into my Project Structure and even the whole JavaFX-Lib.\nAnd I also tried adding VM-options but I'm honest with you, that I had no clue what I was doing there.\nSomeone even asked this question once on Stack overflow, but its solution did not help me.</p>\n<p>Oh, and if it helps in any way, here is the exact error message in the console: <a href=\"https://i.stack.imgur.com/k6XL8.png\" rel=\"nofollow noreferrer\">error-screenshot</a>\nIt's german, but it's basically saying: &quot;symbol not found, symbol: class MediaView&quot;</p>\n<p>I am pretty new to all that informatics stuff and I would really appreciate it if someone has another suggestion for me.</p>\n"},{"tags":["java","mybatis"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701253756,"post_id":77566007,"comment_id":136751881,"body_markdown":"Thanks for your input. I got your example working.\n\nUnfortenately there is a cascade of queries being fired to the database server.\n\nFor each item the properties are being queried (selectProperties) seperately.\n\nIs it possible to change the query selectItems to retrieve everything at once (join) and change the third constructor argument into something like:\n\n&lt;arg javaType=&quot;java.util.Collection&quot;\n      resultMap=&quot;mapProperties&quot; column=&quot;id&quot; /&gt;\n\nI tried this but it did not work. In stead of a Collection of items an item was being injected in the constructor.","link":"https://stackoverflow.com/questions/77564975/mybatis-yielding-java-records/77566007#comment136751881_77566007","body":"Thanks for your input. I got your example working.  Unfortenately there is a cascade of queries being fired to the database server.  For each item the properties are being queried (selectProperties) seperately.  Is it possible to change the query selectItems to retrieve everything at once (join) and change the third constructor argument into something like:  &lt;arg javaType=&quot;java.util.Collection&quot;       resultMap=&quot;mapProperties&quot; column=&quot;id&quot; /&gt;  I tried this but it did not work. In stead of a Collection of items an item was being injected in the constructor."},{"score":0,"post_type":"answer","creation_date":1701253764,"post_id":77566007,"comment_id":136751883,"body_markdown":"This question is a spin of of another question of mine:\nhttps://stackoverflow.com/questions/77563582/mybatis-error-converting-result-into-java-records-with-an-association","link":"https://stackoverflow.com/questions/77564975/mybatis-yielding-java-records/77566007#comment136751883_77566007","body":"This question is a spin of of another question of mine: <a href=\"https://stackoverflow.com/questions/77563582/mybatis-error-converting-result-into-java-records-with-an-association\" title=\"mybatis error converting result into java records with an association\">stackoverflow.com/questions/77563582/&hellip;</a>"},{"score":0,"post_type":"answer","creation_date":1701260286,"post_id":77566007,"comment_id":136753103,"body_markdown":"No, it&#39;s not possible with records (or traditional immutable class). You may have to use POJOs instead. If you have written a JDBC program that maps JOINed result set, you would understand why it&#39;s difficult to instantiate immutable objects with collections.","link":"https://stackoverflow.com/questions/77564975/mybatis-yielding-java-records/77566007#comment136753103_77566007","body":"No, it&#39;s not possible with records (or traditional immutable class). You may have to use POJOs instead. If you have written a JDBC program that maps JOINed result set, you would understand why it&#39;s difficult to instantiate immutable objects with collections."}],"comment_count":3,"score":0,"last_activity_date":1701193059,"creation_date":1701193059,"answer_id":77566007,"question_id":77564975,"body_markdown":"Possible, but with limitations.  \r\n\r\nBecause records are immutable, [constructor-mapping](https://mybatis.org/mybatis-3/sqlmap-xml.html#constructor) must be used.  \r\nAnd, to pass a `Collection` to a constructor, you have to use [nested select](https://mybatis.org/mybatis-3/sqlmap-xml.html#nested-select-for-collection).  \r\nThis means that if you are trying to retrieve N parent records, N+1 SELECTs will be executed.\r\n\r\nIf the N+1 problem is a blocker, you may have to use POJOs and convert them into records in the service layer or in a default method of the mapper interface.\r\n\r\nHere is a simple example.  \r\nIf this is too simple to apply to your project, please add more details to the question.\r\n\r\n```sql\r\ncreate table item (\r\n  id int primary key,\r\n  name varchar(10)\r\n);\r\n\r\ncreate table prop (\r\n  id int primary key,\r\n  url varchar(100),\r\n  item_id int\r\n)\r\n```\r\n\r\n```java\r\n@Results(id = &quot;propertyRM&quot;)\r\n@Arg(id = true, column = &quot;id&quot;, javaType = int.class)\r\n@Arg(column = &quot;url&quot;, javaType = String.class)\r\n@Select(&quot;select id, url from prop where item_id = #{itemId}&quot;)\r\nCollection&lt;Property&gt; selectProperties(Integer itemId);\r\n\r\n@Arg(id = true, column = &quot;id&quot;, javaType = Integer.class)\r\n@Arg(javaType = Collection.class,  select = &quot;selectProperties&quot;, column = &quot;id&quot;)\r\n@Select(&quot;select id, name from item&quot;)\r\nList&lt;Item&gt; selectItems();\r\n```\r\n\r\nHere is an equivalent XML version:\r\n\r\n```xml\r\n&lt;resultMap id=&quot;propertyRM&quot; type=&quot;pkg.Property&quot;&gt;\r\n  &lt;constructor&gt;\r\n    &lt;idArg column=&quot;id&quot; javaType=&quot;int&quot; /&gt;\r\n    &lt;arg column=&quot;url&quot; javaType=&quot;string&quot; /&gt;\r\n  &lt;/constructor&gt;\r\n&lt;/resultMap&gt;\r\n\r\n&lt;resultMap id=&quot;itemRM&quot; type=&quot;pkg.Item&quot;&gt;\r\n  &lt;constructor&gt;\r\n    &lt;idArg column=&quot;id&quot; javaType=&quot;int&quot; /&gt;\r\n    &lt;arg column=&quot;name&quot; javaType=&quot;string&quot; /&gt;\r\n    &lt;arg javaType=&quot;java.util.Collection&quot;\r\n      select=&quot;selectProperties&quot; column=&quot;id&quot; /&gt;\r\n  &lt;/constructor&gt;\r\n&lt;/resultMap&gt;\r\n\r\n&lt;select id=&quot;selectProperties&quot; resultMap=&quot;propertyRM&quot;&gt;\r\n  select id, url from prop where item_id = #{itemId}\r\n&lt;/select&gt;\r\n\r\n&lt;select id=&quot;selectItems&quot; resultMap=&quot;itemRM&quot;&gt;\r\n  select id, name from prop\r\n&lt;/select&gt;\r\n```\r\n\r\nNote that the `Collection` passed to the constructor is mutable, so if you want &quot;deeply immutable&quot; records, you may have to implement the constructor explicitly.\r\n","link":"https://stackoverflow.com/questions/77564975/mybatis-yielding-java-records/77566007#77566007","title":"MyBatis yielding Java records","body":"<p>Possible, but with limitations.</p>\n<p>Because records are immutable, <a href=\"https://mybatis.org/mybatis-3/sqlmap-xml.html#constructor\" rel=\"nofollow noreferrer\">constructor-mapping</a> must be used.<br />\nAnd, to pass a <code>Collection</code> to a constructor, you have to use <a href=\"https://mybatis.org/mybatis-3/sqlmap-xml.html#nested-select-for-collection\" rel=\"nofollow noreferrer\">nested select</a>.<br />\nThis means that if you are trying to retrieve N parent records, N+1 SELECTs will be executed.</p>\n<p>If the N+1 problem is a blocker, you may have to use POJOs and convert them into records in the service layer or in a default method of the mapper interface.</p>\n<p>Here is a simple example.<br />\nIf this is too simple to apply to your project, please add more details to the question.</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table item (\n  id int primary key,\n  name varchar(10)\n);\n\ncreate table prop (\n  id int primary key,\n  url varchar(100),\n  item_id int\n)\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Results(id = &quot;propertyRM&quot;)\n@Arg(id = true, column = &quot;id&quot;, javaType = int.class)\n@Arg(column = &quot;url&quot;, javaType = String.class)\n@Select(&quot;select id, url from prop where item_id = #{itemId}&quot;)\nCollection&lt;Property&gt; selectProperties(Integer itemId);\n\n@Arg(id = true, column = &quot;id&quot;, javaType = Integer.class)\n@Arg(javaType = Collection.class,  select = &quot;selectProperties&quot;, column = &quot;id&quot;)\n@Select(&quot;select id, name from item&quot;)\nList&lt;Item&gt; selectItems();\n</code></pre>\n<p>Here is an equivalent XML version:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;resultMap id=&quot;propertyRM&quot; type=&quot;pkg.Property&quot;&gt;\n  &lt;constructor&gt;\n    &lt;idArg column=&quot;id&quot; javaType=&quot;int&quot; /&gt;\n    &lt;arg column=&quot;url&quot; javaType=&quot;string&quot; /&gt;\n  &lt;/constructor&gt;\n&lt;/resultMap&gt;\n\n&lt;resultMap id=&quot;itemRM&quot; type=&quot;pkg.Item&quot;&gt;\n  &lt;constructor&gt;\n    &lt;idArg column=&quot;id&quot; javaType=&quot;int&quot; /&gt;\n    &lt;arg column=&quot;name&quot; javaType=&quot;string&quot; /&gt;\n    &lt;arg javaType=&quot;java.util.Collection&quot;\n      select=&quot;selectProperties&quot; column=&quot;id&quot; /&gt;\n  &lt;/constructor&gt;\n&lt;/resultMap&gt;\n\n&lt;select id=&quot;selectProperties&quot; resultMap=&quot;propertyRM&quot;&gt;\n  select id, url from prop where item_id = #{itemId}\n&lt;/select&gt;\n\n&lt;select id=&quot;selectItems&quot; resultMap=&quot;itemRM&quot;&gt;\n  select id, name from prop\n&lt;/select&gt;\n</code></pre>\n<p>Note that the <code>Collection</code> passed to the constructor is mutable, so if you want &quot;deeply immutable&quot; records, you may have to implement the constructor explicitly.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":42,"answer_count":1,"score":1,"last_activity_date":1701193059,"creation_date":1701184259,"question_id":77564975,"body_markdown":"I am moving from Java Pojo&#39;s to Java records using MyBatis.\r\nIs it possible in MyBatis to create a Java record which has a field of type collection?\r\nHow should the resultMap be defined?","link":"https://stackoverflow.com/questions/77564975/mybatis-yielding-java-records","title":"MyBatis yielding Java records","body":"<p>I am moving from Java Pojo's to Java records using MyBatis.\nIs it possible in MyBatis to create a Java record which has a field of type collection?\nHow should the resultMap be defined?</p>\n"},{"tags":["java","spring-boot","webserver","undertow"],"comment_count":0,"is_answered":false,"view_count":14,"answer_count":0,"score":0,"last_activity_date":1701192985,"creation_date":1701192985,"question_id":77566000,"body_markdown":"I am adding **https-listener** to the webserver with a customize method as below.When starting the webserver, it adds **http-listener** with port 8080 by default.How can I prevent it from adding http-listener?\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n      @Bean\r\n        public WebServerFactoryCustomizer&lt;UndertowServletWebServerFactory&gt; containerCustomizer() {\r\n            return (WebServerFactoryCustomizer) factory -&gt; {\r\n                UndertowServletWebServerFactory undertowFactory = (UndertowServletWebServerFactory) factory;\r\n                undertowFactory.addDeploymentInfoCustomizers(new ContextSecurityCustomizer());\r\n\r\n                undertowFactory.getBuilderCustomizers().add(builder -&gt; {\r\n                    try {\r\n                        builder.addHttpsListener(serverPort, httpInterface, getSSLContext());\r\n                        builder.setServerOption(UndertowOptions.ENABLE_HTTP2,true);\r\n                    } catch (Exception e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                });\r\n\r\n            };\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","link":"https://stackoverflow.com/questions/77566000/how-to-remove-default-http-listener-on-spring-boot-embedded-undertow","title":"How to remove default http-listener on spring boot embedded undertow","body":"<p>I am adding <strong>https-listener</strong> to the webserver with a customize method as below.When starting the webserver, it adds <strong>http-listener</strong> with port 8080 by default.How can I prevent it from adding http-listener?</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>  @Bean\n    public WebServerFactoryCustomizer&lt;UndertowServletWebServerFactory&gt; containerCustomizer() {\n        return (WebServerFactoryCustomizer) factory -&gt; {\n            UndertowServletWebServerFactory undertowFactory = (UndertowServletWebServerFactory) factory;\n            undertowFactory.addDeploymentInfoCustomizers(new ContextSecurityCustomizer());\n\n            undertowFactory.getBuilderCustomizers().add(builder -&gt; {\n                try {\n                    builder.addHttpsListener(serverPort, httpInterface, getSSLContext());\n                    builder.setServerOption(UndertowOptions.ENABLE_HTTP2,true);\n                } catch (Exception e) {\n                    throw new RuntimeException(e);\n                }\n            });\n\n        };\n    }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","multithreading"],"comments":[{"score":2,"post_type":"question","creation_date":1701164375,"post_id":77562680,"comment_id":136738454,"body_markdown":"When running in parallel it should still be thread safe? The underlying internal implementation of blockingqueues uses reentrantlocks which should prevent the methods from executing at the same time","link":"https://stackoverflow.com/questions/77562680/blockingqueue-drainto-and-add-multithreading#comment136738454_77562680","body":"When running in parallel it should still be thread safe? The underlying internal implementation of blockingqueues uses reentrantlocks which should prevent the methods from executing at the same time"},{"score":5,"post_type":"question","creation_date":1701164624,"post_id":77562680,"comment_id":136738504,"body_markdown":"The javadoc says _the behavior of this operation is undefined if **the specified collection** is modified while the operation is in progress_. The specified collection is the collection that is passed as argument. If it would mean the blocking queue it would say _if this blocking queue is modified_.","link":"https://stackoverflow.com/questions/77562680/blockingqueue-drainto-and-add-multithreading#comment136738504_77562680","body":"The javadoc says <i>the behavior of this operation is undefined if <b>the specified collection</b> is modified while the operation is in progress</i>. The specified collection is the collection that is passed as argument. If it would mean the blocking queue it would say <i>if this blocking queue is modified</i>."},{"score":1,"post_type":"question","creation_date":1701167069,"post_id":77562680,"comment_id":136738935,"body_markdown":"Looking at the implementation of `LinkedBlockingDeque`, looks like both methods `add` and `drainTo` use the same lock, so in theory it shouldn&#39;t fail when you use them in parallel. Take a look on your desired implementation source code.","link":"https://stackoverflow.com/questions/77562680/blockingqueue-drainto-and-add-multithreading#comment136738935_77562680","body":"Looking at the implementation of <code>LinkedBlockingDeque</code>, looks like both methods <code>add</code> and <code>drainTo</code> use the same lock, so in theory it shouldn&#39;t fail when you use them in parallel. Take a look on your desired implementation source code."},{"score":4,"post_type":"question","creation_date":1701176519,"post_id":77562680,"comment_id":136740584,"body_markdown":"There is no such thing as being “separately thread safe”. Being thread safe implies that calling them from different threads, potentially at the same time, is permitted. Otherwise, it wouldn’t be thread safe. As Thomas Kl&#228;ger said, this statement is not referring to the blocking queue. Read again, especially the phrase “*to add elements to collection c*”. Collection `c` is not the blocking queue.","link":"https://stackoverflow.com/questions/77562680/blockingqueue-drainto-and-add-multithreading#comment136740584_77562680","body":"There is no such thing as being “separately thread safe”. Being thread safe implies that calling them from different threads, potentially at the same time, is permitted. Otherwise, it wouldn’t be thread safe. As Thomas Kl&#228;ger said, this statement is not referring to the blocking queue. Read again, especially the phrase “<i>to add elements to collection c</i>”. Collection <code>c</code> is not the blocking queue."}],"answers":[{"comment_count":0,"score":2,"last_activity_date":1701191704,"creation_date":1701191704,"answer_id":77565862,"question_id":77562680,"body_markdown":"# Doc refers to sink, not source\r\n\r\nYou’ve misread the documentation. \r\n\r\nThe “given collection” is the destination collection into which you are draining elements, not the queue from which you are draining. \r\n\r\nSo you are responsible for:\r\n\r\n - Verifying that your “given collection” (the sink) can accept the elements being drained from the queue (the source). \r\n - Ensuring your “given collection” (the sink) is not modified during the draining.  \r\n\r\nSince `BlockingQueue` is documented as being thread-safe, you can add and drain at the same time across threads. \r\n","link":"https://stackoverflow.com/questions/77562680/blockingqueue-drainto-and-add-multithreading/77565862#77565862","title":"BlockingQueue drainTo and add - multithreading","body":"<h1>Doc refers to sink, not source</h1>\n<p>You’ve misread the documentation.</p>\n<p>The “given collection” is the destination collection into which you are draining elements, not the queue from which you are draining.</p>\n<p>So you are responsible for:</p>\n<ul>\n<li>Verifying that your “given collection” (the sink) can accept the elements being drained from the queue (the source).</li>\n<li>Ensuring your “given collection” (the sink) is not modified during the draining.</li>\n</ul>\n<p>Since <code>BlockingQueue</code> is documented as being thread-safe, you can add and drain at the same time across threads.</p>\n"}],"comment_count":4,"is_answered":true,"view_count":36,"answer_count":1,"score":0,"last_activity_date":1701191704,"creation_date":1701163798,"question_id":77562680,"body_markdown":"I have the following case:\r\n - Multiple threads are calling, regularly, the `add(E e)` function.\r\n - A thread which runs at every second and call `int drainTo(Collection&lt;? super E&gt; c)`.\r\n\r\nAs I have read about, that `add` and `drain-To`, separately, are thread-safe. But I am not sure in the case when are running in parallel.\r\n\r\nI docs, about `drainTo` is saying this: \r\n\r\n&gt; Removes all available elements from this queue and adds them to the given collection. This operation may be more efficient than repeatedly polling this queue. **A failure encountered while attempting to add elements to collection c may result in elements being in neither, either or both collections when the associated exception is thrown.** Attempts to drain a queue to itself result in IllegalArgumentException. Further, the behavior of this operation is undefined if the specified collection is modified while the operation is in progress.\r\n\r\nWhat I understand from here is that using `add` during `drainTo` will result in failure.\r\n\r\nI am understanding it right? If yes, can someone suggest me a solution for my case?","link":"https://stackoverflow.com/questions/77562680/blockingqueue-drainto-and-add-multithreading","title":"BlockingQueue drainTo and add - multithreading","body":"<p>I have the following case:</p>\n<ul>\n<li>Multiple threads are calling, regularly, the <code>add(E e)</code> function.</li>\n<li>A thread which runs at every second and call <code>int drainTo(Collection&lt;? super E&gt; c)</code>.</li>\n</ul>\n<p>As I have read about, that <code>add</code> and <code>drain-To</code>, separately, are thread-safe. But I am not sure in the case when are running in parallel.</p>\n<p>I docs, about <code>drainTo</code> is saying this:</p>\n<blockquote>\n<p>Removes all available elements from this queue and adds them to the given collection. This operation may be more efficient than repeatedly polling this queue. <strong>A failure encountered while attempting to add elements to collection c may result in elements being in neither, either or both collections when the associated exception is thrown.</strong> Attempts to drain a queue to itself result in IllegalArgumentException. Further, the behavior of this operation is undefined if the specified collection is modified while the operation is in progress.</p>\n</blockquote>\n<p>What I understand from here is that using <code>add</code> during <code>drainTo</code> will result in failure.</p>\n<p>I am understanding it right? If yes, can someone suggest me a solution for my case?</p>\n"},{"tags":["java","nullpointerexception"],"comments":[{"score":2,"post_type":"question","creation_date":1701190069,"post_id":77565660,"comment_id":136743395,"body_markdown":"If you know what variable/field having a Null value is causing the problem, you can set a watchpoint on it to see when it gets changed to Null.","link":"https://stackoverflow.com/questions/77565660/im-getting-a-nullpointerexception-in-my-java-code-any-ideas-on-how-to-troubl#comment136743395_77565660","body":"If you know what variable/field having a Null value is causing the problem, you can set a watchpoint on it to see when it gets changed to Null."},{"score":1,"post_type":"question","creation_date":1701192105,"post_id":77565660,"comment_id":136743873,"body_markdown":"You&#39;re going to have to [show that code](/help/how-to-ask), though. Show the stack trace, and show the code where things go wrong. We can&#39;t tell you what to use if we don&#39;t know what you&#39;re already using. The universal &quot;how do I find out what&#39;s wrong&quot; is by running your code in debug mode, watching variables, and setting breakpoints, working backwards form where your error gets thrown, which is only the final symptom of your problem, to the place where your data takes on a form that will eventually lead to that error, which is what needs fixing.","link":"https://stackoverflow.com/questions/77565660/im-getting-a-nullpointerexception-in-my-java-code-any-ideas-on-how-to-troubl#comment136743873_77565660","body":"You&#39;re going to have to <a href=\"/help/how-to-ask\">show that code</a>, though. Show the stack trace, and show the code where things go wrong. We can&#39;t tell you what to use if we don&#39;t know what you&#39;re already using. The universal &quot;how do I find out what&#39;s wrong&quot; is by running your code in debug mode, watching variables, and setting breakpoints, working backwards form where your error gets thrown, which is only the final symptom of your problem, to the place where your data takes on a form that will eventually lead to that error, which is what needs fixing."},{"score":1,"post_type":"question","creation_date":1701192844,"post_id":77565660,"comment_id":136744007,"body_markdown":"Unless you are using an old java version the actual exception tells you what exactly was null (variable names and which object out of it is null) and exactly where the error was, the line number of your code. So read the exception message.","link":"https://stackoverflow.com/questions/77565660/im-getting-a-nullpointerexception-in-my-java-code-any-ideas-on-how-to-troubl#comment136744007_77565660","body":"Unless you are using an old java version the actual exception tells you what exactly was null (variable names and which object out of it is null) and exactly where the error was, the line number of your code. So read the exception message."}],"comment_count":3,"is_answered":false,"view_count":41,"answer_count":0,"score":-2,"last_activity_date":1701191668,"creation_date":1701189693,"last_edit_date":1701191668,"question_id":77565660,"body_markdown":"I&#39;ve encountered a &#39;NullPointerException&#39; in my Java code. The error arises during runtime, and I&#39;m unsure about the specific part of my code causing this issue. I&#39;ve checked my variables, but I can&#39;t pinpoint where the null value is coming from. Can you provide guidance on a systematic approach to troubleshoot and resolve this &#39;NullPointerException&#39;? Any insights on common pitfalls or debugging techniques would be greatly appreciated.\r\n\r\nI reviewed the stack trace to identify the line in my Java code where the &#39;NullPointerException&#39; occurs. I examined the variables used in that line, checking for uninitialized objects or variables with &#39;null&#39; values. Additionally, I carefully inspected recent changes in my code to see if any modifications introduced this issue.\r\nI attempted to use conditional checks before accessing objects or invoking methods to prevent the &#39;NullPointerException&#39;. I also considered using &#39;Objects.requireNonNull&#39; for explicit null checks.\r\n\r\nI used debugging tools in my IDE to step through the code and inspect variable values during runtime. Furthermore, I added logging statements at critical points to trace the flow of the program.\r\n\r\nDespite these efforts, I haven&#39;t been able to pinpoint the exact source of the null value or resolve the &#39;NullPointerException&#39; issue. Any further guidance on effective debugging strategies or common pitfalls would be appreciated.\r\n\r\n","link":"https://stackoverflow.com/questions/77565660/im-getting-a-nullpointerexception-in-my-java-code-any-ideas-on-how-to-troubl","title":"I&#39;m getting a &#39;NullPointerException&#39; in my Java code. Any ideas on how to troubleshoot this?","body":"<p>I've encountered a 'NullPointerException' in my Java code. The error arises during runtime, and I'm unsure about the specific part of my code causing this issue. I've checked my variables, but I can't pinpoint where the null value is coming from. Can you provide guidance on a systematic approach to troubleshoot and resolve this 'NullPointerException'? Any insights on common pitfalls or debugging techniques would be greatly appreciated.</p>\n<p>I reviewed the stack trace to identify the line in my Java code where the 'NullPointerException' occurs. I examined the variables used in that line, checking for uninitialized objects or variables with 'null' values. Additionally, I carefully inspected recent changes in my code to see if any modifications introduced this issue.\nI attempted to use conditional checks before accessing objects or invoking methods to prevent the 'NullPointerException'. I also considered using 'Objects.requireNonNull' for explicit null checks.</p>\n<p>I used debugging tools in my IDE to step through the code and inspect variable values during runtime. Furthermore, I added logging statements at critical points to trace the flow of the program.</p>\n<p>Despite these efforts, I haven't been able to pinpoint the exact source of the null value or resolve the 'NullPointerException' issue. Any further guidance on effective debugging strategies or common pitfalls would be appreciated.</p>\n"},{"tags":["java","zimbra"],"comments":[{"score":0,"post_type":"question","creation_date":1701190973,"post_id":77565777,"comment_id":136743619,"body_markdown":"Find the JAR containing com.zimbra.cs.account.callback.EventLoggerCallback and add it to your CLASSPATH.  The JVM class loader cannot find it.","link":"https://stackoverflow.com/questions/77565777/zimbra-10-classnotfound-exception#comment136743619_77565777","body":"Find the JAR containing com.zimbra.cs.account.callback.EventLoggerCallback and add it to your CLASSPATH.  The JVM class loader cannot find it."},{"score":0,"post_type":"question","creation_date":1701191347,"post_id":77565777,"comment_id":136743718,"body_markdown":"thanks alot but... how can i so this?","link":"https://stackoverflow.com/questions/77565777/zimbra-10-classnotfound-exception#comment136743718_77565777","body":"thanks alot but... how can i so this?"},{"score":0,"post_type":"question","creation_date":1701214562,"post_id":77565777,"comment_id":136747320,"body_markdown":"Step 1: Find the JAR that has the missing class.  I found Zimbra JARs at Maven Central.  They look rather old - 2011.  https://mvnrepository.com/artifact/com.zimbra","link":"https://stackoverflow.com/questions/77565777/zimbra-10-classnotfound-exception#comment136747320_77565777","body":"Step 1: Find the JAR that has the missing class.  I found Zimbra JARs at Maven Central.  They look rather old - 2011.  <a href=\"https://mvnrepository.com/artifact/com.zimbra\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/com.zimbra</a>"},{"score":0,"post_type":"question","creation_date":1701214604,"post_id":77565777,"comment_id":136747328,"body_markdown":"Step 2: Add that JAR to your Maven or Gradle dependencies.  If you aren&#39;t using Maven or Gradle, you have to download the JAR with your class and add it to your CLASSPATH or application package.","link":"https://stackoverflow.com/questions/77565777/zimbra-10-classnotfound-exception#comment136747328_77565777","body":"Step 2: Add that JAR to your Maven or Gradle dependencies.  If you aren&#39;t using Maven or Gradle, you have to download the JAR with your class and add it to your CLASSPATH or application package."}],"comment_count":4,"is_answered":false,"view_count":16,"answer_count":0,"score":0,"last_activity_date":1701190825,"creation_date":1701190825,"question_id":77565777,"body_markdown":"After installing last patch on zimbra 10 FOSS i&#39;m getting warn on every zmprov request:\r\n\r\n    2023-11-28 19:52:40,943 [main] WARN : loadCallback caught exception\r\n    java.lang.ClassNotFoundException: com.zimbra.cs.account.callback.EventLoggerCallback\r\n            at jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[?:?]\r\n            at jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[?:?]\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[?:?]\r\n            at java.lang.Class.forName0(Native Method) ~[?:?]\r\n            at java.lang.Class.forName(Class.java:375) ~[?:?]\r\n            at com.zimbra.cs.account.AttributeManager.loadCallback(AttributeManager.java:1307) [zimbrastore.jar:10.0.5_GA_4574]\r\n            at com.zimbra.cs.account.AttributeManager.loadAttrs(AttributeManager.java:432) [zimbrastore.jar:10.0.5_GA_4574]\r\n            at com.zimbra.cs.account.AttributeManager.&lt;init&gt;(AttributeManager.java:300) [zimbrastore.jar:10.0.5_GA_4574]\r\n            at jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[?:?]\r\n            at jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) [?:?]\r\n            at jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) [?:?]\r\n            at java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) [?:?]\r\n            at java.lang.reflect.Constructor.newInstance(Constructor.java:480) [?:?]\r\n            at com.zimbra.cs.account.AttributeManager.getInstance(AttributeManager.java:188) [zimbrastore.jar:10.0.5_GA_4574]\r\n            at com.zimbra.cs.account.Entry.setAttributeManager(Entry.java:140) [zimbrastore.jar:10.0.5_GA_4574]\r\n            at com.zimbra.cs.account.Entry.&lt;init&gt;(Entry.java:117) [zimbrastore.jar:10.0.5_GA_4574]\r\n            at com.zimbra.cs.account.NamedEntry.&lt;init&gt;(NamedEntry.java:43) [zimbrastore.jar:10.0.5_GA_4574]\r\n            at com.zimbra.cs.account.ZAttrServer.&lt;init&gt;(ZAttrServer.java:44) [zimbrastore.jar:10.0.5_GA_4574]\r\n            at com.zimbra.cs.account.Server.&lt;init&gt;(Server.java:38) [zimbrastore.jar:10.0.5_GA_4574]\r\n            at com.zimbra.cs.account.soap.SoapServer.&lt;init&gt;(SoapServer.java:40) [zimbrastore.jar:10.0.5_GA_4574]\r\n            at com.zimbra.cs.account.soap.SoapProvisioning.getAllServers(SoapProvisioning.java:1518) [zimbrastore.jar:10.0.5_GA_4574]\r\n            at com.zimbra.cs.account.ProvUtil.doGetAllServers(ProvUtil.java:3076) [zimbrastore.jar:10.0.5_GA_4574]\r\n            at com.zimbra.cs.account.ProvUtil.execute(ProvUtil.java:1230) [zimbrastore.jar:10.0.5_GA_4574]\r\n            at com.zimbra.cs.account.ProvUtil.interactive(ProvUtil.java:3913) [zimbrastore.jar:10.0.5_GA_4574]\r\n            at com.zimbra.cs.account.ProvUtil.main(ProvUtil.java:4163) [zimbrastore.jar:10.0.5_GA_4574]\r\n\r\nHow I can get rid of this?","link":"https://stackoverflow.com/questions/77565777/zimbra-10-classnotfound-exception","title":"Zimbra 10 ClassNotFound exception","body":"<p>After installing last patch on zimbra 10 FOSS i'm getting warn on every zmprov request:</p>\n<pre><code>2023-11-28 19:52:40,943 [main] WARN : loadCallback caught exception\njava.lang.ClassNotFoundException: com.zimbra.cs.account.callback.EventLoggerCallback\n        at jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[?:?]\n        at jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[?:?]\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:520) ~[?:?]\n        at java.lang.Class.forName0(Native Method) ~[?:?]\n        at java.lang.Class.forName(Class.java:375) ~[?:?]\n        at com.zimbra.cs.account.AttributeManager.loadCallback(AttributeManager.java:1307) [zimbrastore.jar:10.0.5_GA_4574]\n        at com.zimbra.cs.account.AttributeManager.loadAttrs(AttributeManager.java:432) [zimbrastore.jar:10.0.5_GA_4574]\n        at com.zimbra.cs.account.AttributeManager.&lt;init&gt;(AttributeManager.java:300) [zimbrastore.jar:10.0.5_GA_4574]\n        at jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[?:?]\n        at jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) [?:?]\n        at jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) [?:?]\n        at java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) [?:?]\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:480) [?:?]\n        at com.zimbra.cs.account.AttributeManager.getInstance(AttributeManager.java:188) [zimbrastore.jar:10.0.5_GA_4574]\n        at com.zimbra.cs.account.Entry.setAttributeManager(Entry.java:140) [zimbrastore.jar:10.0.5_GA_4574]\n        at com.zimbra.cs.account.Entry.&lt;init&gt;(Entry.java:117) [zimbrastore.jar:10.0.5_GA_4574]\n        at com.zimbra.cs.account.NamedEntry.&lt;init&gt;(NamedEntry.java:43) [zimbrastore.jar:10.0.5_GA_4574]\n        at com.zimbra.cs.account.ZAttrServer.&lt;init&gt;(ZAttrServer.java:44) [zimbrastore.jar:10.0.5_GA_4574]\n        at com.zimbra.cs.account.Server.&lt;init&gt;(Server.java:38) [zimbrastore.jar:10.0.5_GA_4574]\n        at com.zimbra.cs.account.soap.SoapServer.&lt;init&gt;(SoapServer.java:40) [zimbrastore.jar:10.0.5_GA_4574]\n        at com.zimbra.cs.account.soap.SoapProvisioning.getAllServers(SoapProvisioning.java:1518) [zimbrastore.jar:10.0.5_GA_4574]\n        at com.zimbra.cs.account.ProvUtil.doGetAllServers(ProvUtil.java:3076) [zimbrastore.jar:10.0.5_GA_4574]\n        at com.zimbra.cs.account.ProvUtil.execute(ProvUtil.java:1230) [zimbrastore.jar:10.0.5_GA_4574]\n        at com.zimbra.cs.account.ProvUtil.interactive(ProvUtil.java:3913) [zimbrastore.jar:10.0.5_GA_4574]\n        at com.zimbra.cs.account.ProvUtil.main(ProvUtil.java:4163) [zimbrastore.jar:10.0.5_GA_4574]\n</code></pre>\n<p>How I can get rid of this?</p>\n"},{"tags":["java","spring-boot","h2","spring-data-jdbc"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701178018,"post_id":77564034,"comment_id":136740885,"body_markdown":"It doesn&#39;t look like the OP is using Hibernate or even JPA, but Spring Data JDBC.","link":"https://stackoverflow.com/questions/77563505/java-spring-data-jdbc-jdbcsqlsyntaxerrorexception-when-using-annotation-table/77564034#comment136740885_77564034","body":"It doesn&#39;t look like the OP is using Hibernate or even JPA, but Spring Data JDBC."}],"comment_count":1,"score":0,"last_activity_date":1701175788,"creation_date":1701175788,"answer_id":77564034,"question_id":77563505,"body_markdown":"This code snippet has some problems. Do this:\r\n&lt;br&gt;1- if you use &quot;hibernate.cfg.xml&quot; for your hibernate configurations add this property : \r\n\r\n    &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n\r\nor if you use annotations instead of xml , add appropriate annotation for table definition in hibernate.\r\n&lt;br&gt;2-add a field to this class for serving as the id of the class, like this: \r\n\r\n  \r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n\r\nit is better not to use this: \r\n\r\n    private Integer author;","link":"https://stackoverflow.com/questions/77563505/java-spring-data-jdbc-jdbcsqlsyntaxerrorexception-when-using-annotation-table/77564034#77564034","title":"Java spring data jdbc. JdbcSQLSyntaxErrorException when using annotation @Table","body":"<p>This code snippet has some problems. Do this:\n<br>1- if you use &quot;hibernate.cfg.xml&quot; for your hibernate configurations add this property :</p>\n<pre><code>&lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n</code></pre>\n<p>or if you use annotations instead of xml , add appropriate annotation for table definition in hibernate.\n<br>2-add a field to this class for serving as the id of the class, like this:</p>\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate Long id;\n</code></pre>\n<p>it is better not to use this:</p>\n<pre><code>private Integer author;\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1701177979,"creation_date":1701177979,"answer_id":77564255,"question_id":77563505,"body_markdown":"When you specify a table name in `@Table` that name is case sensitive. It has to match exactly what you use in the database.\r\nMost databases when default to all upper case which is also the ISO standard. This is why you see `BOOK_AUTHOR` as a candidate.\r\n\r\nYou have two main options:\r\n\r\nQuote the table name in the schema script and use it exactly as in the `@Table` annotation: `create table &quot;Book_Author&quot; ...`\r\n\r\nAlternatively use all caps in the annotation. That would be  `@Table(&quot;BOOK_AUTHOR&quot;)`\r\n\r\nThe same principle applies for columns including those specified in `@MappedCollection`.\r\n\r\nSee https://stackoverflow.com/questions/10789994/make-h2-treat-quoted-name-and-unquoted-name-as-the-same for details about case sensitivity of H2.","link":"https://stackoverflow.com/questions/77563505/java-spring-data-jdbc-jdbcsqlsyntaxerrorexception-when-using-annotation-table/77564255#77564255","title":"Java spring data jdbc. JdbcSQLSyntaxErrorException when using annotation @Table","body":"<p>When you specify a table name in <code>@Table</code> that name is case sensitive. It has to match exactly what you use in the database.\nMost databases when default to all upper case which is also the ISO standard. This is why you see <code>BOOK_AUTHOR</code> as a candidate.</p>\n<p>You have two main options:</p>\n<p>Quote the table name in the schema script and use it exactly as in the <code>@Table</code> annotation: <code>create table &quot;Book_Author&quot; ...</code></p>\n<p>Alternatively use all caps in the annotation. That would be  <code>@Table(&quot;BOOK_AUTHOR&quot;)</code></p>\n<p>The same principle applies for columns including those specified in <code>@MappedCollection</code>.</p>\n<p>See <a href=\"https://stackoverflow.com/questions/10789994/make-h2-treat-quoted-name-and-unquoted-name-as-the-same\">Make H2 treat quoted name and unquoted name as the same</a> for details about case sensitivity of H2.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1701188452,"creation_date":1701188452,"answer_id":77565504,"question_id":77563505,"body_markdown":"The table name is *unquated*. It means that the table name is case insensitive in the database and it is converted to *uppercase* when you use `create table` SQL statement. But `@Table` annotation is using a table name in a case sensitive manner.\r\n\r\nYou should read more about quoted and unquated table names [Make H2 treat quoted name and unquoted name as the same][1].\r\n\r\n&gt;In that H2 behaves in the same way as Oracle. This is a bit different on how other databases like MySQL and PostgreSQL deal with identifier names. H2 has a compatibility feature: If you append `;DATABASE_TO_UPPER=FALSE` to the database URL, unquotes identifiers are not converted to uppercase, that means they are case sensitive as well. But you need append this when creating the database, and each time you use it (if you append the setting for existing databases, the identifiers of existing objects are already converted to uppercase).\r\n\r\n  [1]: https://stackoverflow.com/q/10789994/573032","link":"https://stackoverflow.com/questions/77563505/java-spring-data-jdbc-jdbcsqlsyntaxerrorexception-when-using-annotation-table/77565504#77565504","title":"Java spring data jdbc. JdbcSQLSyntaxErrorException when using annotation @Table","body":"<p>The table name is <em>unquated</em>. It means that the table name is case insensitive in the database and it is converted to <em>uppercase</em> when you use <code>create table</code> SQL statement. But <code>@Table</code> annotation is using a table name in a case sensitive manner.</p>\n<p>You should read more about quoted and unquated table names <a href=\"https://stackoverflow.com/q/10789994/573032\">Make H2 treat quoted name and unquoted name as the same</a>.</p>\n<blockquote>\n<p>In that H2 behaves in the same way as Oracle. This is a bit different on how other databases like MySQL and PostgreSQL deal with identifier names. H2 has a compatibility feature: If you append <code>;DATABASE_TO_UPPER=FALSE</code> to the database URL, unquotes identifiers are not converted to uppercase, that means they are case sensitive as well. But you need append this when creating the database, and each time you use it (if you append the setting for existing databases, the identifiers of existing objects are already converted to uppercase).</p>\n</blockquote>\n"},{"comment_count":0,"score":0,"last_activity_date":1701190427,"creation_date":1701190427,"answer_id":77565735,"question_id":77563505,"body_markdown":"You can correct this error by changing the case of the table name in your annotation to match the case of the table name in your schema.sql file. For example:\r\n\r\n    @Table(&quot;BOOK_AUTHOR&quot;)\r\n    public class BookAuthor {\r\n        private Integer author;\r\n    \r\n        public BookAuthor(Integer authorId){\r\n            this.author =authorId;\r\n        }\r\n    }","link":"https://stackoverflow.com/questions/77563505/java-spring-data-jdbc-jdbcsqlsyntaxerrorexception-when-using-annotation-table/77565735#77565735","title":"Java spring data jdbc. JdbcSQLSyntaxErrorException when using annotation @Table","body":"<p>You can correct this error by changing the case of the table name in your annotation to match the case of the table name in your schema.sql file. For example:</p>\n<pre><code>@Table(&quot;BOOK_AUTHOR&quot;)\npublic class BookAuthor {\n    private Integer author;\n\n    public BookAuthor(Integer authorId){\n        this.author =authorId;\n    }\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":83,"answer_count":4,"score":1,"last_activity_date":1701190427,"creation_date":1701170876,"last_edit_date":1701188704,"question_id":77563505,"body_markdown":"If I use annotation `@Table(&quot;Book_Author&quot;)` then I get \r\n&gt;org.h2.jdbc.JdbcSQLSyntaxErrorException:\r\nTable &quot;Book_Author&quot; not found (candidates are: &quot;BOOK_AUTHOR&quot;) ...\r\n\r\n\r\n```\r\n@Table(&quot;Book_Author&quot;)\r\npublic class BookAuthor {\r\n    private Integer author;\r\n\r\n    public BookAuthor(Integer authorId){\r\n        this.author =authorId;\r\n    }\r\n}\r\n```\r\n**`schema.sql`:**\r\n\r\n```\r\ncreate table Book_Author(\r\n    author int not null ,\r\n    book int not null ,\r\n    primary key (author,book)\r\n);\r\n```\r\n\r\n\r\n\r\nWithout `@Table` everything works fine. Please tell me why?","link":"https://stackoverflow.com/questions/77563505/java-spring-data-jdbc-jdbcsqlsyntaxerrorexception-when-using-annotation-table","title":"Java spring data jdbc. JdbcSQLSyntaxErrorException when using annotation @Table","body":"<p>If I use annotation <code>@Table(&quot;Book_Author&quot;)</code> then I get</p>\n<blockquote>\n<p>org.h2.jdbc.JdbcSQLSyntaxErrorException:\nTable &quot;Book_Author&quot; not found (candidates are: &quot;BOOK_AUTHOR&quot;) ...</p>\n</blockquote>\n<pre><code>@Table(&quot;Book_Author&quot;)\npublic class BookAuthor {\n    private Integer author;\n\n    public BookAuthor(Integer authorId){\n        this.author =authorId;\n    }\n}\n</code></pre>\n<p><strong><code>schema.sql</code>:</strong></p>\n<pre><code>create table Book_Author(\n    author int not null ,\n    book int not null ,\n    primary key (author,book)\n);\n</code></pre>\n<p>Without <code>@Table</code> everything works fine. Please tell me why?</p>\n"},{"tags":["java","java-time","datetimeformatter"],"comments":[{"score":0,"post_type":"question","creation_date":1701206918,"post_id":77564928,"comment_id":136746258,"body_markdown":"Ideally, you would educate the publisher of your data about using only standard formats defined in [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) when communicating date-time values textually.","link":"https://stackoverflow.com/questions/77564928/java-datetimeformatter-with-optional-sections#comment136746258_77564928","body":"Ideally, you would educate the publisher of your data about using only standard formats defined in <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> when communicating date-time values textually."},{"score":0,"post_type":"question","creation_date":1701207019,"post_id":77564928,"comment_id":136746266,"body_markdown":"Pseudo time zones such as `EST` should *never* be used in data storage or data exchange. They are not standardized, and are not even unique! Use only [real time zone names](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones) in format of `Continent/Region`.","link":"https://stackoverflow.com/questions/77564928/java-datetimeformatter-with-optional-sections#comment136746266_77564928","body":"Pseudo time zones such as <code>EST</code> should <i>never</i> be used in data storage or data exchange. They are not standardized, and are not even unique! Use only <a href=\"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\" rel=\"nofollow noreferrer\">real time zone names</a> in format of <code>Continent&#47;Region</code>."},{"score":0,"post_type":"question","creation_date":1701209255,"post_id":77564928,"comment_id":136746631,"body_markdown":"@BasilBourque I don&#39;t have a choice. I am collecting data  from some network equipment and the format that the system clock is shown is user specified.  One of the options is to have the timezone displayed.    I have no way of enforcing how the user formats the system clock display.  I want the system clock so that I can record the system time of the equipment when I do the data collection.","link":"https://stackoverflow.com/questions/77564928/java-datetimeformatter-with-optional-sections#comment136746631_77564928","body":"@BasilBourque I don&#39;t have a choice. I am collecting data  from some network equipment and the format that the system clock is shown is user specified.  One of the options is to have the timezone displayed.    I have no way of enforcing how the user formats the system clock display.  I want the system clock so that I can record the system time of the equipment when I do the data collection."}],"answers":[{"comments":[{"score":1,"post_type":"answer","creation_date":1701188868,"post_id":77565216,"comment_id":136743137,"body_markdown":"Thanks.  I also noted your link is getting the same results I was where if the AM/PM is omitted the time is not parsed, only the date.  I changed the hh: to kk: and now get the time parsed whether or not the AM/PM is included in the input.","link":"https://stackoverflow.com/questions/77564928/java-datetimeformatter-with-optional-sections/77565216#comment136743137_77565216","body":"Thanks.  I also noted your link is getting the same results I was where if the AM/PM is omitted the time is not parsed, only the date.  I changed the hh: to kk: and now get the time parsed whether or not the AM/PM is included in the input."},{"score":0,"post_type":"answer","creation_date":1701190379,"post_id":77565216,"comment_id":136743466,"body_markdown":"@DavidGreen you&#39;re right, I&#39;ve just noticed. However, kk would be the right symbol only if the time is specified with hours between 1 and 24! If the hour is specified as a number within 0 and 23 you should use HH.  https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/format/DateTimeFormatter.html#patterns","link":"https://stackoverflow.com/questions/77564928/java-datetimeformatter-with-optional-sections/77565216#comment136743466_77565216","body":"@DavidGreen you&#39;re right, I&#39;ve just noticed. However, kk would be the right symbol only if the time is specified with hours between 1 and 24! If the hour is specified as a number within 0 and 23 you should use HH.  <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/format/DateTimeFormatter.html#patterns\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/21/docs/api/java.base/java/ti&zwnj;&#8203;me/&hellip;</a>"},{"score":1,"post_type":"answer","creation_date":1701190908,"post_id":77565216,"comment_id":136743604,"body_markdown":"thanks and noted.  I am parsing time from some networking equipment and will confirm whether it is 0-23 or 1-24.","link":"https://stackoverflow.com/questions/77564928/java-datetimeformatter-with-optional-sections/77565216#comment136743604_77565216","body":"thanks and noted.  I am parsing time from some networking equipment and will confirm whether it is 0-23 or 1-24."}],"comment_count":3,"score":1,"last_activity_date":1701190392,"last_edit_date":1701190392,"creation_date":1701186125,"answer_id":77565216,"question_id":77564928,"body_markdown":"This is a tricky one, because the syntax for an optional section of the `DateTimeFormatter` class specifically wants the space between the optional element and the previous one included within square brackets. \r\n\r\nThe documentation of the [parseBest()][1] method shows an example of a pattern with an optional timezone ID, `uuuu-MM-dd HH.mm[ VV]`, where the space between the minute and the timezone ID is included within the optional section.\r\n\r\nIn your snippet, the first optional was written properly `hh:mm:ss.SSS[ a...` (with the space between `SSS` and `a` included within square brackets), but then the optional part for the timezone name was written `a [z]zzz` instead of `a[ z]zzz`. In your case, you can either nest the optional sections like so `hh:mm:ss.SSS[[ a] zzz] E MMM dd yyyy`, or write them as individual optional sections `hh:mm:ss.SSS[ a][ z][ zzz] E MMM dd yyyy`.\r\n\r\nHere is a re-written version of your code covering the 4 cases:\r\n\r\n```\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        parseDate(&quot;09:10:05.584 AM EST Wed Nov 29 2023&quot;, TIME_FORMAT);\r\n        parseDate(&quot;09:10:05.584 AM Wed Nov 29 2023&quot;, TIME_FORMAT);\r\n        parseDate(&quot;09:10:05.584 EST Wed Nov 29 2023&quot;, TIME_FORMAT);\r\n        parseDate(&quot;09:10:05.584 Wed Nov 29 2023&quot;, TIME_FORMAT);\r\n    }\r\n    public static final String TIME_FORMAT = &quot;HH:mm:ss.SSS[ a][ z][zzz] E MMM dd yyyy&quot;;\r\n\r\n    public static String parseDate(String input, String format) {\r\n        String retVal = &quot;&quot;;\r\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(format, Locale.ENGLISH);\r\n        TemporalAccessor ta = formatter.parseBest(input, LocalDateTime::from, LocalDate::from);\r\n        retVal = ta.toString();\r\n        System.out.println(&quot;Parsed date is: &quot; + retVal);\r\n        return retVal;\r\n    }\r\n}\r\n```\r\n\r\nYou can quickly check the code here at this link:\r\n\r\nhttps://ideone.com/bpfw8o\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/format/DateTimeFormatter.html#parseBest(java.lang.CharSequence,java.time.temporal.TemporalQuery...)","link":"https://stackoverflow.com/questions/77564928/java-datetimeformatter-with-optional-sections/77565216#77565216","title":"Java DateTimeFormatter with Optional Sections","body":"<p>This is a tricky one, because the syntax for an optional section of the <code>DateTimeFormatter</code> class specifically wants the space between the optional element and the previous one included within square brackets.</p>\n<p>The documentation of the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/format/DateTimeFormatter.html#parseBest(java.lang.CharSequence,java.time.temporal.TemporalQuery...)\" rel=\"nofollow noreferrer\">parseBest()</a> method shows an example of a pattern with an optional timezone ID, <code>uuuu-MM-dd HH.mm[ VV]</code>, where the space between the minute and the timezone ID is included within the optional section.</p>\n<p>In your snippet, the first optional was written properly <code>hh:mm:ss.SSS[ a...</code> (with the space between <code>SSS</code> and <code>a</code> included within square brackets), but then the optional part for the timezone name was written <code>a [z]zzz</code> instead of <code>a[ z]zzz</code>. In your case, you can either nest the optional sections like so <code>hh:mm:ss.SSS[[ a] zzz] E MMM dd yyyy</code>, or write them as individual optional sections <code>hh:mm:ss.SSS[ a][ z][ zzz] E MMM dd yyyy</code>.</p>\n<p>Here is a re-written version of your code covering the 4 cases:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        parseDate(&quot;09:10:05.584 AM EST Wed Nov 29 2023&quot;, TIME_FORMAT);\n        parseDate(&quot;09:10:05.584 AM Wed Nov 29 2023&quot;, TIME_FORMAT);\n        parseDate(&quot;09:10:05.584 EST Wed Nov 29 2023&quot;, TIME_FORMAT);\n        parseDate(&quot;09:10:05.584 Wed Nov 29 2023&quot;, TIME_FORMAT);\n    }\n    public static final String TIME_FORMAT = &quot;HH:mm:ss.SSS[ a][ z][zzz] E MMM dd yyyy&quot;;\n\n    public static String parseDate(String input, String format) {\n        String retVal = &quot;&quot;;\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(format, Locale.ENGLISH);\n        TemporalAccessor ta = formatter.parseBest(input, LocalDateTime::from, LocalDate::from);\n        retVal = ta.toString();\n        System.out.println(&quot;Parsed date is: &quot; + retVal);\n        return retVal;\n    }\n}\n</code></pre>\n<p>You can quickly check the code here at this link:</p>\n<p><a href=\"https://ideone.com/bpfw8o\" rel=\"nofollow noreferrer\">https://ideone.com/bpfw8o</a></p>\n"},{"comments":[{"score":2,"post_type":"answer","creation_date":1701187511,"post_id":77565327,"comment_id":136742830,"body_markdown":"you can nest optional sections by properly including the space between elements within square brackets","link":"https://stackoverflow.com/questions/77564928/java-datetimeformatter-with-optional-sections/77565327#comment136742830_77565327","body":"you can nest optional sections by properly including the space between elements within square brackets"}],"comment_count":1,"score":0,"last_activity_date":1701187091,"creation_date":1701187091,"answer_id":77565327,"question_id":77564928,"body_markdown":"specifying the format this way:\r\n\r\n```\r\npublic static final String TIME_FORMAT = &quot;hh:mm:ss.SSS[ a][ z][ zzz] E MMM dd yyyy&quot;;\r\n```\r\nworked.  Trying to nest the [] was not working. \r\n\r\n","link":"https://stackoverflow.com/questions/77564928/java-datetimeformatter-with-optional-sections/77565327#77565327","title":"Java DateTimeFormatter with Optional Sections","body":"<p>specifying the format this way:</p>\n<pre><code>public static final String TIME_FORMAT = &quot;hh:mm:ss.SSS[ a][ z][ zzz] E MMM dd yyyy&quot;;\n</code></pre>\n<p>worked.  Trying to nest the [] was not working.</p>\n"}],"comment_count":3,"is_answered":true,"view_count":79,"answer_count":2,"score":2,"last_activity_date":1701190392,"creation_date":1701183759,"last_edit_date":1701185894,"question_id":77564928,"body_markdown":"I have done some reading on this and tried to work through examples from other StackOverflow threads but I keep running into an exception when parsing the date/time if I try to specify optional sections.  \r\n\r\nthis is the input.  The optional sections are the AM/PM which may not always be in the input,  and the timezone which may be 4 characters:\r\n\r\n```\r\n09:10:05.584 AM EST Wed Nov 29 2023\r\n```\r\n\r\nThis is the pattern that works for this input, but not other inputs, such as if there is no timezone\r\n\r\n```\r\nhh:mm:ss.SSS a zzz E MMM dd yyyy\r\n```\r\nIf I try to do something like this and create optional patterns I get a parse exception at position 12 in the input, which is just after the milliseconds\r\n\r\n```\r\nhh:mm:ss.SSS[ a [z]zzz ]E MMM dd yyyy\r\n```\r\n\r\nthis is the code, currently set to the format that fails:\r\n\r\n```\r\n\r\npublic static final String TIME_FORMAT = &quot;hh:mm:ss.SSS[ a [z]zzz ]E MMM dd yyyy&quot;;\r\n\r\n\r\npublic static String ParseDate(String input, String format) {\r\n\t\t\r\n\t\t\r\n\t\tString retVal = &quot;&quot;;\r\n\t\t\r\n\t\tDateTimeFormatter formatter = DateTimeFormatter.ofPattern(format, Locale.ENGLISH);\r\n\t\t\r\n\t\tTemporalAccessor ta = formatter.parseBest(input, LocalDateTime::from, LocalDate::from);\r\n\t\t\r\n\t\tretVal = ta.toString();\r\n       \r\n\t\tSystem.out.println(&quot;Parsed date is: &quot;+ retVal);\r\n\t\treturn retVal;\r\n\t}\r\n```","link":"https://stackoverflow.com/questions/77564928/java-datetimeformatter-with-optional-sections","title":"Java DateTimeFormatter with Optional Sections","body":"<p>I have done some reading on this and tried to work through examples from other StackOverflow threads but I keep running into an exception when parsing the date/time if I try to specify optional sections.</p>\n<p>this is the input.  The optional sections are the AM/PM which may not always be in the input,  and the timezone which may be 4 characters:</p>\n<pre><code>09:10:05.584 AM EST Wed Nov 29 2023\n</code></pre>\n<p>This is the pattern that works for this input, but not other inputs, such as if there is no timezone</p>\n<pre><code>hh:mm:ss.SSS a zzz E MMM dd yyyy\n</code></pre>\n<p>If I try to do something like this and create optional patterns I get a parse exception at position 12 in the input, which is just after the milliseconds</p>\n<pre><code>hh:mm:ss.SSS[ a [z]zzz ]E MMM dd yyyy\n</code></pre>\n<p>this is the code, currently set to the format that fails:</p>\n<pre><code>\npublic static final String TIME_FORMAT = &quot;hh:mm:ss.SSS[ a [z]zzz ]E MMM dd yyyy&quot;;\n\n\npublic static String ParseDate(String input, String format) {\n        \n        \n        String retVal = &quot;&quot;;\n        \n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(format, Locale.ENGLISH);\n        \n        TemporalAccessor ta = formatter.parseBest(input, LocalDateTime::from, LocalDate::from);\n        \n        retVal = ta.toString();\n       \n        System.out.println(&quot;Parsed date is: &quot;+ retVal);\n        return retVal;\n    }\n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"score":0,"post_type":"question","creation_date":1700845102,"post_id":77544649,"comment_id":136706606,"body_markdown":"They are the implementation provided by whatever framework or application server you&#39;re using.","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both#comment136706606_77544649","body":"They are the implementation provided by whatever framework or application server you&#39;re using."},{"score":1,"post_type":"question","creation_date":1700846706,"post_id":77544649,"comment_id":136706824,"body_markdown":"There are very very few (POJO) classes in the API, \n see here https://javadoc.io/doc/javax.persistence/javax.persistence-api/latest/index.html . All this stuff is the specification poured in a contract, a bunch of interfaces, enums (constants) and errors (Exceptions). Then an implementor (like Hibernate) probably can add their things, but your code should go against the interfaces.","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both#comment136706824_77544649","body":"There are very very few (POJO) classes in the API,   see here <a href=\"https://javadoc.io/doc/javax.persistence/javax.persistence-api/latest/index.html\" rel=\"nofollow noreferrer\">javadoc.io/doc/javax.persistence/javax.persistence-api/lates&zwnj;&#8203;t/&hellip;</a> . All this stuff is the specification poured in a contract, a bunch of interfaces, enums (constants) and errors (Exceptions). Then an implementor (like Hibernate) probably can add their things, but your code should go against the interfaces."},{"score":0,"post_type":"question","creation_date":1700875741,"post_id":77544649,"comment_id":136709523,"body_markdown":"Didn&#39;t someone ask this exact question a day or two ago?","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both#comment136709523_77544649","body":"Didn&#39;t someone ask this exact question a day or two ago?"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1700896004,"post_id":77546870,"comment_id":136710634,"body_markdown":"*&quot;... the use of abbreviations like JPA is now discouraged.&quot;* - IMO, Oracle&#39;s lawyers are &quot;on a hiding to nothing&quot; if they want to stop people using JPA.  (Like Xerox&#39;s lawyers were ...)","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both/77546870#comment136710634_77546870","body":"<i>&quot;... the use of abbreviations like JPA is now discouraged.&quot;</i> - IMO, Oracle&#39;s lawyers are &quot;on a hiding to nothing&quot; if they want to stop people using JPA.  (Like Xerox&#39;s lawyers were ...)"},{"score":0,"post_type":"answer","creation_date":1700896233,"post_id":77546870,"comment_id":136710646,"body_markdown":"@StephenC As I recall hearing from people involved in Jakarta EE, their reason to avoid such abbreviations was not legal concerns, nor any request by Oracle. Their motivation is that they fear all the &quot;J…&quot; abbreviations flying around is confusing to people new to the techonolgiies. They hope to make Jakarta EE more broadly accessible. Simplifying, and then using, the full names is one of their strategies towards that goal. I whole-heartedly agree with them.","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both/77546870#comment136710646_77546870","body":"@StephenC As I recall hearing from people involved in Jakarta EE, their reason to avoid such abbreviations was not legal concerns, nor any request by Oracle. Their motivation is that they fear all the &quot;J…&quot; abbreviations flying around is confusing to people new to the techonolgiies. They hope to make Jakarta EE more broadly accessible. Simplifying, and then using, the full names is one of their strategies towards that goal. I whole-heartedly agree with them."},{"score":0,"post_type":"answer","creation_date":1701096816,"post_id":77546870,"comment_id":136729279,"body_markdown":"I didn&#39;t understand anything. I need to put them in order. So based on &quot;If you are using a Jakarta EE compliant application server...&quot; I use TomEE. Then I searched where .jar file javax.persistence package came from. And I found a file &quot;eclipselink-2.7.7.jar&quot; under the Server Runtime library (TomEE) that my example uses. So the book uses this implementation by referring to it misleadingly as JPA and you get the impression that JPA is a normal library.","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both/77546870#comment136729279_77546870","body":"I didn&#39;t understand anything. I need to put them in order. So based on &quot;If you are using a Jakarta EE compliant application server...&quot; I use TomEE. Then I searched where .jar file javax.persistence package came from. And I found a file &quot;eclipselink-2.7.7.jar&quot; under the Server Runtime library (TomEE) that my example uses. So the book uses this implementation by referring to it misleadingly as JPA and you get the impression that JPA is a normal library."},{"score":0,"post_type":"answer","creation_date":1701106596,"post_id":77546870,"comment_id":136731369,"body_markdown":"@nonlinear Do you understand what it means to [program to an interface](https://stackoverflow.com/q/1992384/642706)? It is crucial that you understand that concept.","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both/77546870#comment136731369_77546870","body":"@nonlinear Do you understand what it means to <a href=\"https://stackoverflow.com/q/1992384/642706\">program to an interface</a>? It is crucial that you understand that concept."},{"score":0,"post_type":"answer","creation_date":1701107034,"post_id":77546870,"comment_id":136731443,"body_markdown":"(A) If one wants to develop  a console app or a desktop/mobile app that uses the Jakarta Persistence API, one must bundle with that app both the Jakarta Persistence API JAR file *and* an implementation JAR file such as EclipseLink or Hibernate. (B) In a web app on a Jakarta-compliant application server, the server comes with both the Jakarta Persistence API and an implementation. So you need both the Jakarta Persistence API and an implementation in your project during development but would *not* bundle into your final WAR/EAR file. Maven `scope` element controls whether those JARs get bundled.","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both/77546870#comment136731443_77546870","body":"(A) If one wants to develop  a console app or a desktop/mobile app that uses the Jakarta Persistence API, one must bundle with that app both the Jakarta Persistence API JAR file <i>and</i> an implementation JAR file such as EclipseLink or Hibernate. (B) In a web app on a Jakarta-compliant application server, the server comes with both the Jakarta Persistence API and an implementation. So you need both the Jakarta Persistence API and an implementation in your project during development but would <i>not</i> bundle into your final WAR/EAR file. Maven <code>scope</code> element controls whether those JARs get bundled."},{"score":0,"post_type":"answer","creation_date":1701108162,"post_id":77546870,"comment_id":136731659,"body_markdown":"&quot;Jakarta Persistence API JAR file&quot;. Where is this file in tomee? It contains only the interfaces? If I use Tomcat with a maven project then I need to add a dependency to get the function of persistence?","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both/77546870#comment136731659_77546870","body":"&quot;Jakarta Persistence API JAR file&quot;. Where is this file in tomee? It contains only the interfaces? If I use Tomcat with a maven project then I need to add a dependency to get the function of persistence?"},{"score":0,"post_type":"answer","creation_date":1701155259,"post_id":77546870,"comment_id":136736903,"body_markdown":"@nonlinear See [the documentation](https://tomee.apache.org/tomee-9.0/docs/comparison.html#implementations) for a list of Jakarta APIs supported by TomEE, along with a list of the implementations they utilize. How the makers of TomEE choose to package their app server product is irrelevant. All we care about is that the current version of TomEE supports *Jakarta Persistence (JPA) 3.0* in all editions. So your web app can rely on those APIs being available at runtime. P.S. Don&#39;t confuse Tomcat for TomEE. TomEE is a superset of Tomcat, adding on many more of the Jakarta EE technologies.","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both/77546870#comment136736903_77546870","body":"@nonlinear See <a href=\"https://tomee.apache.org/tomee-9.0/docs/comparison.html#implementations\" rel=\"nofollow noreferrer\">the documentation</a> for a list of Jakarta APIs supported by TomEE, along with a list of the implementations they utilize. How the makers of TomEE choose to package their app server product is irrelevant. All we care about is that the current version of TomEE supports <i>Jakarta Persistence (JPA) 3.0</i> in all editions. So your web app can rely on those APIs being available at runtime. P.S. Don&#39;t confuse Tomcat for TomEE. TomEE is a superset of Tomcat, adding on many more of the Jakarta EE technologies."},{"score":0,"post_type":"answer","creation_date":1701163683,"post_id":77546870,"comment_id":136738311,"body_markdown":"&quot;All we care about is that the current version of TomEE supports Jakarta Persistence (JPA) 3.0 in all editions.&quot;. No. Not me. That&#39;s not enough for me. I care to know which of these files are specification related and which are implementation related. Do I have to read all this to answer such a question?","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both/77546870#comment136738311_77546870","body":"&quot;All we care about is that the current version of TomEE supports Jakarta Persistence (JPA) 3.0 in all editions.&quot;. No. Not me. That&#39;s not enough for me. I care to know which of these files are specification related and which are implementation related. Do I have to read all this to answer such a question?"},{"score":0,"post_type":"answer","creation_date":1701163690,"post_id":77546870,"comment_id":136738313,"body_markdown":"And I haven&#39;t gotten an answer about the nature of the files related to the specifications. Since they are specifications I reasonably assume they will be interfaces. And also since the specification is a standard it should be a common shared .jar of interfaces that must be implemented from various providers.","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both/77546870#comment136738313_77546870","body":"And I haven&#39;t gotten an answer about the nature of the files related to the specifications. Since they are specifications I reasonably assume they will be interfaces. And also since the specification is a standard it should be a common shared .jar of interfaces that must be implemented from various providers."},{"score":0,"post_type":"answer","creation_date":1701189024,"post_id":77546870,"comment_id":136743176,"body_markdown":"@nonlinear Fortunately for your curiosity, TomEE is open-source. So you can dig around to see how it gets packaged. Happy spelunking.","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both/77546870#comment136743176_77546870","body":"@nonlinear Fortunately for your curiosity, TomEE is open-source. So you can dig around to see how it gets packaged. Happy spelunking."}],"comment_count":10,"score":1,"last_activity_date":1701190342,"last_edit_date":1701190342,"creation_date":1700893609,"answer_id":77546870,"question_id":77544649,"body_markdown":"# Specification\r\n\r\n[*Jakarta Persistence*][1] is a specification published by the [Eclipse Foundation][2]. (*Jakarta Persistence* was formerly known as *Java Persistence API (JPA)*, published  by [Oracle Corp.][3])\r\n\r\n - [`@Entity`][4] and [`@Table`][5] are [annotations][6]. \r\n - [`EntityManager`][7] is an interface.\r\n\r\nYou said:\r\n\r\n&gt; And then what are all those classes in the javax.persistence??? \r\n\r\nYour premise is incorrect. These annotations and interfaces are not classes.\r\n\r\nThe annotations and interfaces defined in those specs are also written as Java source code files, published in [JAR][8] files by the Eclipse Foundation. But those Java files do not *do* anything; you need an implementation of those annotations and interfaces, [concrete classes][9], to actually *do* something.\r\n\r\nTo be technically complete… The API of a specification such as *Jakarta Persistence* may contain some parts that are technically classes. For example, you may see enums and abstract classes. But their functionality is minimal. And these parts are useless without a complete implementation of the spec’s API. Conceptually, you should think of the spec’s API as having no classes. \r\n\r\n# Implementation\r\n\r\nMultiple implementations of the Jakarta Persistence [3.0][10] and [3.1][11] specs are available:\r\n\r\n - [*EclipseLink*][12] by Eclipse Foundation\r\n - [*Hibernate*][13] by Red Hat\r\n - [*DataNucleus*][14]\r\n\r\nYou must **choose one of these implementations** in order to use the Jakarta Persistence [API][15]. \r\n\r\nAlternatively, you can bypass the API of Jakarta Persistence, and instead directly access the API of one of those particular products. The product-specific API may be broader and more feature-rich than the Jakarta Persistence API. \r\n\r\nThe downside to using a product-specific API is that you are locking your code into that one particular product &amp; vendor. By going through the Jakarta Persistence you may be able to switch between implementations with little or no difficulty. \r\n\r\nYou said:\r\n\r\n&gt;a few articles that said &quot;JPA is just a specification, it doesn&#39;t perform any operation by itself. It requires an implementation (like Hibernate,TopLink etc)&quot;. \r\n\r\nThose articles are correct. The interfaces defined by the specification must be backed by an implementation at runtime. \r\n\r\n - If you are using a Jakarta EE compliant application server such as Glassfish, Payara, OpenLiberty, WildFly, etc., both the specification’s API and the implementation will be provided by that server product. So you do *not* bundle either in your WAR/EAR. \r\n - If you are developing a console app or desktop/mobile app, you bundle both the specification’s API and an implementation of your choice.\r\n\r\nMaven’s POM’s `scope` element controls whether the API and/or implementation JARs get bundled. Gradle has a similar feature. \r\n\r\nBy the way, [*TopLink*][16] was donated by Oracle to the Eclipse Foundation where it became *EclipseLink*. \r\n\r\n----------\r\n\r\nBy the way, as of the transition from Java EE to Jakarta EE, the use of abbreviations like *JPA* is now discouraged. The full name of each technology is preferred. \r\n\r\n\r\n  [1]: https://jakarta.ee/specifications/persistence/\r\n  [2]: https://www.eclipse.org/\r\n  [3]: https://en.wikipedia.org/wiki/Oracle_Corporation\r\n  [4]: https://jakarta.ee/specifications/persistence/3.1/apidocs/jakarta.persistence/jakarta/persistence/entity\r\n  [5]: https://jakarta.ee/specifications/persistence/3.1/apidocs/jakarta.persistence/jakarta/persistence/table\r\n  [6]: https://en.wikipedia.org/wiki/Java_annotation\r\n  [7]: https://jakarta.ee/specifications/persistence/3.1/apidocs/jakarta.persistence/jakarta/persistence/entitymanager\r\n  [8]: https://en.wikipedia.org/wiki/JAR_(file_format)\r\n  [9]: https://en.wikipedia.org/wiki/Class_(computer_programming)#Abstract_and_Concrete\r\n  [10]: https://jakarta.ee/specifications/persistence/3.0/\r\n  [11]: https://jakarta.ee/specifications/persistence/3.1/\r\n  [12]: https://en.wikipedia.org/wiki/EclipseLink\r\n  [13]: https://en.wikipedia.org/wiki/Hibernate_(framework)\r\n  [14]: https://en.wikipedia.org/wiki/DataNucleus\r\n  [15]: https://en.wikipedia.org/wiki/API\r\n  [16]: https://en.wikipedia.org/wiki/Oracle_TopLink","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both/77546870#77546870","title":"JPA. Specification, Implementation or both?","body":"<h1>Specification</h1>\n<p><a href=\"https://jakarta.ee/specifications/persistence/\" rel=\"nofollow noreferrer\"><em>Jakarta Persistence</em></a> is a specification published by the <a href=\"https://www.eclipse.org/\" rel=\"nofollow noreferrer\">Eclipse Foundation</a>. (<em>Jakarta Persistence</em> was formerly known as <em>Java Persistence API (JPA)</em>, published  by <a href=\"https://en.wikipedia.org/wiki/Oracle_Corporation\" rel=\"nofollow noreferrer\">Oracle Corp.</a>)</p>\n<ul>\n<li><a href=\"https://jakarta.ee/specifications/persistence/3.1/apidocs/jakarta.persistence/jakarta/persistence/entity\" rel=\"nofollow noreferrer\"><code>@Entity</code></a> and <a href=\"https://jakarta.ee/specifications/persistence/3.1/apidocs/jakarta.persistence/jakarta/persistence/table\" rel=\"nofollow noreferrer\"><code>@Table</code></a> are <a href=\"https://en.wikipedia.org/wiki/Java_annotation\" rel=\"nofollow noreferrer\">annotations</a>.</li>\n<li><a href=\"https://jakarta.ee/specifications/persistence/3.1/apidocs/jakarta.persistence/jakarta/persistence/entitymanager\" rel=\"nofollow noreferrer\"><code>EntityManager</code></a> is an interface.</li>\n</ul>\n<p>You said:</p>\n<blockquote>\n<p>And then what are all those classes in the javax.persistence???</p>\n</blockquote>\n<p>Your premise is incorrect. These annotations and interfaces are not classes.</p>\n<p>The annotations and interfaces defined in those specs are also written as Java source code files, published in <a href=\"https://en.wikipedia.org/wiki/JAR_(file_format)\" rel=\"nofollow noreferrer\">JAR</a> files by the Eclipse Foundation. But those Java files do not <em>do</em> anything; you need an implementation of those annotations and interfaces, <a href=\"https://en.wikipedia.org/wiki/Class_(computer_programming)#Abstract_and_Concrete\" rel=\"nofollow noreferrer\">concrete classes</a>, to actually <em>do</em> something.</p>\n<p>To be technically complete… The API of a specification such as <em>Jakarta Persistence</em> may contain some parts that are technically classes. For example, you may see enums and abstract classes. But their functionality is minimal. And these parts are useless without a complete implementation of the spec’s API. Conceptually, you should think of the spec’s API as having no classes.</p>\n<h1>Implementation</h1>\n<p>Multiple implementations of the Jakarta Persistence <a href=\"https://jakarta.ee/specifications/persistence/3.0/\" rel=\"nofollow noreferrer\">3.0</a> and <a href=\"https://jakarta.ee/specifications/persistence/3.1/\" rel=\"nofollow noreferrer\">3.1</a> specs are available:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/EclipseLink\" rel=\"nofollow noreferrer\"><em>EclipseLink</em></a> by Eclipse Foundation</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Hibernate_(framework)\" rel=\"nofollow noreferrer\"><em>Hibernate</em></a> by Red Hat</li>\n<li><a href=\"https://en.wikipedia.org/wiki/DataNucleus\" rel=\"nofollow noreferrer\"><em>DataNucleus</em></a></li>\n</ul>\n<p>You must <strong>choose one of these implementations</strong> in order to use the Jakarta Persistence <a href=\"https://en.wikipedia.org/wiki/API\" rel=\"nofollow noreferrer\">API</a>.</p>\n<p>Alternatively, you can bypass the API of Jakarta Persistence, and instead directly access the API of one of those particular products. The product-specific API may be broader and more feature-rich than the Jakarta Persistence API.</p>\n<p>The downside to using a product-specific API is that you are locking your code into that one particular product &amp; vendor. By going through the Jakarta Persistence you may be able to switch between implementations with little or no difficulty.</p>\n<p>You said:</p>\n<blockquote>\n<p>a few articles that said &quot;JPA is just a specification, it doesn't perform any operation by itself. It requires an implementation (like Hibernate,TopLink etc)&quot;.</p>\n</blockquote>\n<p>Those articles are correct. The interfaces defined by the specification must be backed by an implementation at runtime.</p>\n<ul>\n<li>If you are using a Jakarta EE compliant application server such as Glassfish, Payara, OpenLiberty, WildFly, etc., both the specification’s API and the implementation will be provided by that server product. So you do <em>not</em> bundle either in your WAR/EAR.</li>\n<li>If you are developing a console app or desktop/mobile app, you bundle both the specification’s API and an implementation of your choice.</li>\n</ul>\n<p>Maven’s POM’s <code>scope</code> element controls whether the API and/or implementation JARs get bundled. Gradle has a similar feature.</p>\n<p>By the way, <a href=\"https://en.wikipedia.org/wiki/Oracle_TopLink\" rel=\"nofollow noreferrer\"><em>TopLink</em></a> was donated by Oracle to the Eclipse Foundation where it became <em>EclipseLink</em>.</p>\n<hr />\n<p>By the way, as of the transition from Java EE to Jakarta EE, the use of abbreviations like <em>JPA</em> is now discouraged. The full name of each technology is preferred.</p>\n"}],"comment_count":3,"is_answered":true,"view_count":79,"answer_count":1,"score":0,"last_activity_date":1701190342,"creation_date":1700844953,"question_id":77544649,"body_markdown":"I study the JPA. The book uses classes, interfaces and annotations from javax.persistence package like @Entity,@Table,EntityManager etc to make a real and functional ORM application. When I searched to the Internet about JPA I read a few articles that said &quot;JPA is just a specification, it doesn&#39;t perform any operation by itself. It requires an implementation (like Hibernate,TopLink etc)&quot;. And then what are all those classes in the javax.persistence??? Am I missing something?","link":"https://stackoverflow.com/questions/77544649/jpa-specification-implementation-or-both","title":"JPA. Specification, Implementation or both?","body":"<p>I study the JPA. The book uses classes, interfaces and annotations from javax.persistence package like @Entity,@Table,EntityManager etc to make a real and functional ORM application. When I searched to the Internet about JPA I read a few articles that said &quot;JPA is just a specification, it doesn't perform any operation by itself. It requires an implementation (like Hibernate,TopLink etc)&quot;. And then what are all those classes in the javax.persistence??? Am I missing something?</p>\n"},{"tags":["javascript","java","stomp","spring-websocket"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701188620,"creation_date":1701188620,"answer_id":77565524,"question_id":77564305,"body_markdown":"Okay so apparently it&#39;s a routing issue. IntelliJ Community doesn&#39;t support Spring WebSockets, so it showed me a warning for my css and script import in my frontend-HTML. Those two imports need to get the &quot;/static&quot; part removed so that the server finds the userscript, the css and my STOMP layer while running on port 8080.\r\n\r\nI&#39;m pretty sure im just scratching the surface here, so i&#39;m happy if someone can explain the issue i somehow solved in more detail to me.","link":"https://stackoverflow.com/questions/77564305/websocket-connection-failing-using-stomp-js/77565524#77565524","title":"WebSocket connection failing using STOMP.js","body":"<p>Okay so apparently it's a routing issue. IntelliJ Community doesn't support Spring WebSockets, so it showed me a warning for my css and script import in my frontend-HTML. Those two imports need to get the &quot;/static&quot; part removed so that the server finds the userscript, the css and my STOMP layer while running on port 8080.</p>\n<p>I'm pretty sure im just scratching the surface here, so i'm happy if someone can explain the issue i somehow solved in more detail to me.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":68,"answer_count":1,"score":0,"last_activity_date":1701190077,"creation_date":1701178443,"last_edit_date":1701190077,"question_id":77564305,"body_markdown":"I&#39;m using Spring Boot WebSockets, STOMP.js, and JQuery to develop a short training project. Sadly I seem to have missed some crucial point while following guides and the official documentation because as soon as I try to activate my `StompJs.Client` object my browser console prints this error: \r\n```\r\nWebSocket connection to &#39;ws://localhost:8080/game-websocket&#39; failed: https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js\r\n```\r\nI suppose I am missing an extremely obvious point here, but after trying to understand the source of the error for some time now I can&#39;t seem to advance. Now follows my HTML-frontend, my JavaScript (Gamescript.js), the WebSocket configuration Java class and finally my controller Java class.\r\n\r\nFirst, my HTML-Frontend:\r\n```xml\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot;&gt;\r\n\r\n    &lt;head&gt;\r\n        &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n        &lt;title&gt;Battleships&lt;/title&gt;\r\n        &lt;link href=&quot;/static/GameDesign.css&quot; rel=&quot;stylesheet&quot;&gt;\r\n        &lt;script src=&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt;\r\n        &lt;script src=&quot;https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js&quot;&gt;&lt;/script&gt;\r\n        &lt;script src=&quot;/static/GameScript.js&quot;&gt;&lt;/script&gt;\r\n\r\n    &lt;/head&gt;\r\n\r\n    &lt;body&gt;\r\n\r\n        &lt;!-- generates the (for this session) hidden enemy board, that consists of 100 buttons with\r\n         according IDs (e-presign), beginning from the bottom-left corner and counting rows first --&gt;\r\n        &lt;script&gt;\r\n            document.write(&quot;&lt;form&gt;&lt;table&gt;&quot;);\r\n            for(var i=9; i&gt;=0; i--){\r\n                document.write(&quot;&lt;tr&gt;&quot;);\r\n                for(var k=0; k&lt;10; k++){\r\n                    document.write(&quot;&lt;td&gt;&lt;button type=\\&quot;submit\\&quot; id=\\&quot;e&quot; + k + i + &quot;\\&quot;&gt;&lt;/button&gt;&lt;/td&gt;&quot;);\r\n                }\r\n                document.write(&quot;&lt;/tr&gt;&quot;);\r\n            }\r\n            document.write(&quot;&lt;/table&gt;&lt;/form&gt;&quot;);\r\n        &lt;/script&gt;\r\n\r\n        &lt;!-- generates the own board of this session, that consists of 100 div-elements with\r\n         according IDs (o-presign), beginning from the bottom-left corner and counting rows first --&gt;\r\n        &lt;script&gt;\r\n            document.write(&quot;&lt;table&gt;&quot;);\r\n            for(var i=9; i&gt;=0; i--){\r\n                document.write(&quot;&lt;tr&gt;&quot;);\r\n                for(var k=0; k&lt;10; k++){\r\n                    document.write(&quot;&lt;td&gt;&lt;div id=\\&quot;o&quot; + k + i + &quot;\\&quot;&gt;&lt;/div&gt;&lt;/td&gt;&quot;);\r\n                }\r\n                document.write(&quot;&lt;/tr&gt;&quot;);\r\n            }\r\n            document.write(&quot;&lt;/table&gt;&quot;);\r\n        &lt;/script&gt;\r\n\r\n    &lt;/body&gt;\r\n\r\n&lt;/html&gt;\r\n```\r\nNow my JavaScript (GameScript.js):\r\n```javascript\r\nconst stompClient = new StompJs.Client({\r\n    brokerURL: &#39;ws://localhost:8080/game-websocket&#39;\r\n});\r\n\r\nfunction connect(){\r\n    stompClient.activate();\r\n}\r\n\r\nfunction sendID(){\r\n     stompClient.publish(&quot;/app/provideSession&quot;, {}, &quot;kevin&quot;);\r\n}\r\n\r\nstompClient.onConnect = (frame) =&gt; {\r\n    stompClient.subscribe(&quot;/queue/sessionResponse&quot;, (message) =&gt; {\r\n        console.log(message);\r\n    });\r\n}\r\n\r\n$(function () {\r\n    $(&quot;form&quot;).on(&#39;submit&#39;, (e) =&gt; e.preventDefault());\r\n    $( &quot;#e00&quot; ).click(() =&gt; connect());\r\n    $( &quot;#e99&quot; ).click(() =&gt; sendID());\r\n});\r\n```\r\nNow my Websocket configuration java class:\r\n```java\r\npackage com.md.battleships;\r\n\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.messaging.simp.config.MessageBrokerRegistry;\r\nimport org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker;\r\nimport org.springframework.web.socket.config.annotation.StompEndpointRegistry;\r\nimport org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer;\r\n\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n\r\n    @Override\r\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\r\n        registry.addEndpoint(&quot;/game-websocket&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void configureMessageBroker(MessageBrokerRegistry config) {\r\n        config.setApplicationDestinationPrefixes(&quot;/app&quot;);\r\n        config.enableSimpleBroker(&quot;/queue&quot;);\r\n    }\r\n}\r\n```\r\nAnd finally my Java controller class:\r\n```java\r\npackage com.md.battleships;\r\n\r\nimport org.springframework.messaging.handler.annotation.MessageMapping;\r\nimport org.springframework.messaging.handler.annotation.SendTo;\r\nimport org.springframework.stereotype.Controller;\r\n\r\n@Controller\r\npublic class GameController {\r\n\r\n    @MessageMapping(&quot;/provideSession&quot;)\r\n    @SendTo(&quot;/sessionResponse&quot;)\r\n    public String handshake (String session) throws Exception{\r\n        System.out.println(session);\r\n        return &quot;kevoon (Entwicklung von Kevin)&quot;;\r\n    }\r\n}\r\n```","link":"https://stackoverflow.com/questions/77564305/websocket-connection-failing-using-stomp-js","title":"WebSocket connection failing using STOMP.js","body":"<p>I'm using Spring Boot WebSockets, STOMP.js, and JQuery to develop a short training project. Sadly I seem to have missed some crucial point while following guides and the official documentation because as soon as I try to activate my <code>StompJs.Client</code> object my browser console prints this error:</p>\n<pre><code>WebSocket connection to 'ws://localhost:8080/game-websocket' failed: https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js\n</code></pre>\n<p>I suppose I am missing an extremely obvious point here, but after trying to understand the source of the error for some time now I can't seem to advance. Now follows my HTML-frontend, my JavaScript (Gamescript.js), the WebSocket configuration Java class and finally my controller Java class.</p>\n<p>First, my HTML-Frontend:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n\n    &lt;head&gt;\n        &lt;meta charset=&quot;UTF-8&quot;&gt;\n        &lt;title&gt;Battleships&lt;/title&gt;\n        &lt;link href=&quot;/static/GameDesign.css&quot; rel=&quot;stylesheet&quot;&gt;\n        &lt;script src=&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt;\n        &lt;script src=&quot;https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js&quot;&gt;&lt;/script&gt;\n        &lt;script src=&quot;/static/GameScript.js&quot;&gt;&lt;/script&gt;\n\n    &lt;/head&gt;\n\n    &lt;body&gt;\n\n        &lt;!-- generates the (for this session) hidden enemy board, that consists of 100 buttons with\n         according IDs (e-presign), beginning from the bottom-left corner and counting rows first --&gt;\n        &lt;script&gt;\n            document.write(&quot;&lt;form&gt;&lt;table&gt;&quot;);\n            for(var i=9; i&gt;=0; i--){\n                document.write(&quot;&lt;tr&gt;&quot;);\n                for(var k=0; k&lt;10; k++){\n                    document.write(&quot;&lt;td&gt;&lt;button type=\\&quot;submit\\&quot; id=\\&quot;e&quot; + k + i + &quot;\\&quot;&gt;&lt;/button&gt;&lt;/td&gt;&quot;);\n                }\n                document.write(&quot;&lt;/tr&gt;&quot;);\n            }\n            document.write(&quot;&lt;/table&gt;&lt;/form&gt;&quot;);\n        &lt;/script&gt;\n\n        &lt;!-- generates the own board of this session, that consists of 100 div-elements with\n         according IDs (o-presign), beginning from the bottom-left corner and counting rows first --&gt;\n        &lt;script&gt;\n            document.write(&quot;&lt;table&gt;&quot;);\n            for(var i=9; i&gt;=0; i--){\n                document.write(&quot;&lt;tr&gt;&quot;);\n                for(var k=0; k&lt;10; k++){\n                    document.write(&quot;&lt;td&gt;&lt;div id=\\&quot;o&quot; + k + i + &quot;\\&quot;&gt;&lt;/div&gt;&lt;/td&gt;&quot;);\n                }\n                document.write(&quot;&lt;/tr&gt;&quot;);\n            }\n            document.write(&quot;&lt;/table&gt;&quot;);\n        &lt;/script&gt;\n\n    &lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n<p>Now my JavaScript (GameScript.js):</p>\n<pre class=\"lang-js prettyprint-override\"><code>const stompClient = new StompJs.Client({\n    brokerURL: 'ws://localhost:8080/game-websocket'\n});\n\nfunction connect(){\n    stompClient.activate();\n}\n\nfunction sendID(){\n     stompClient.publish(&quot;/app/provideSession&quot;, {}, &quot;kevin&quot;);\n}\n\nstompClient.onConnect = (frame) =&gt; {\n    stompClient.subscribe(&quot;/queue/sessionResponse&quot;, (message) =&gt; {\n        console.log(message);\n    });\n}\n\n$(function () {\n    $(&quot;form&quot;).on('submit', (e) =&gt; e.preventDefault());\n    $( &quot;#e00&quot; ).click(() =&gt; connect());\n    $( &quot;#e99&quot; ).click(() =&gt; sendID());\n});\n</code></pre>\n<p>Now my Websocket configuration java class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.md.battleships;\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.messaging.simp.config.MessageBrokerRegistry;\nimport org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker;\nimport org.springframework.web.socket.config.annotation.StompEndpointRegistry;\nimport org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer;\n\n@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/game-websocket&quot;);\n    }\n\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry config) {\n        config.setApplicationDestinationPrefixes(&quot;/app&quot;);\n        config.enableSimpleBroker(&quot;/queue&quot;);\n    }\n}\n</code></pre>\n<p>And finally my Java controller class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.md.battleships;\n\nimport org.springframework.messaging.handler.annotation.MessageMapping;\nimport org.springframework.messaging.handler.annotation.SendTo;\nimport org.springframework.stereotype.Controller;\n\n@Controller\npublic class GameController {\n\n    @MessageMapping(&quot;/provideSession&quot;)\n    @SendTo(&quot;/sessionResponse&quot;)\n    public String handshake (String session) throws Exception{\n        System.out.println(session);\n        return &quot;kevoon (Entwicklung von Kevin)&quot;;\n    }\n}\n</code></pre>\n"},{"tags":["java","jframe","jpanel","gridbaglayout"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701190578,"post_id":77565151,"comment_id":136743524,"body_markdown":"The `JPanel` is meant to be the actual are the game is, while the `mainFrame` is meant to just be a background of the application that is meant to stay blank.","link":"https://stackoverflow.com/questions/77565089/resizing-and-relocating-jpanels-in-a-jframe-in-java/77565151#comment136743524_77565151","body":"The <code>JPanel</code> is meant to be the actual are the game is, while the <code>mainFrame</code> is meant to just be a background of the application that is meant to stay blank."},{"score":0,"post_type":"answer","creation_date":1701194409,"post_id":77565151,"comment_id":136744257,"body_markdown":"@KitchenSpice I understand. But my advice is to separate your JLabel from your game panel. This will give you the freedom to paint anywhere in the game panel instead of having to make sure that you aren&#39;t painting over the JLabel or that the JLabel is painting over your game.","link":"https://stackoverflow.com/questions/77565089/resizing-and-relocating-jpanels-in-a-jframe-in-java/77565151#comment136744257_77565151","body":"@KitchenSpice I understand. But my advice is to separate your JLabel from your game panel. This will give you the freedom to paint anywhere in the game panel instead of having to make sure that you aren&#39;t painting over the JLabel or that the JLabel is painting over your game."}],"comment_count":2,"score":0,"last_activity_date":1701190068,"last_edit_date":1701190068,"creation_date":1701185562,"answer_id":77565151,"question_id":77565089,"body_markdown":"calling setSize isn&#39;t effective if you also have a layout manager. But what you can call is setPreferredSize\r\n\r\n        setPreferredSize(GameScreenSize);\r\n\r\nThe size you specify here is used by the LayoutManager in allocating space for this JComponent\r\n\r\nUsing `setPreferredSize` is often frowned upon but in your case (for building a game board) I think this is the best way to achieve what you&#39;d like. The only suggestion I&#39;d give is that it might be cleaner to add the JLabel directly to the JFrame contentpane or on a higher level JPanel than your visScreen, because if you do this you can safely `paint(Component)` to the entire area of the JPanel.\r\n\r\n        JPanel p = new JPanel();\r\n        p.add(TitleLabel, BorderLayout.NORTH);\r\n        p.add(new visScreen(this.getSize(), BorderLayout.CENTER);\r\n        gbc.gridx = 1;\r\n        gbc.gridy = 1;\r\n        gbl.setConstraints(p, gbc);\r\n        add(p,gbc);\r\n ","link":"https://stackoverflow.com/questions/77565089/resizing-and-relocating-jpanels-in-a-jframe-in-java/77565151#77565151","title":"Resizing and Relocating JPanels in a JFrame in Java","body":"<p>calling setSize isn't effective if you also have a layout manager. But what you can call is setPreferredSize</p>\n<pre><code>    setPreferredSize(GameScreenSize);\n</code></pre>\n<p>The size you specify here is used by the LayoutManager in allocating space for this JComponent</p>\n<p>Using <code>setPreferredSize</code> is often frowned upon but in your case (for building a game board) I think this is the best way to achieve what you'd like. The only suggestion I'd give is that it might be cleaner to add the JLabel directly to the JFrame contentpane or on a higher level JPanel than your visScreen, because if you do this you can safely <code>paint(Component)</code> to the entire area of the JPanel.</p>\n<pre><code>    JPanel p = new JPanel();\n    p.add(TitleLabel, BorderLayout.NORTH);\n    p.add(new visScreen(this.getSize(), BorderLayout.CENTER);\n    gbc.gridx = 1;\n    gbc.gridy = 1;\n    gbl.setConstraints(p, gbc);\n    add(p,gbc);\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":22,"answer_count":1,"score":0,"last_activity_date":1701190068,"creation_date":1701185068,"question_id":77565089,"body_markdown":"I have been looking at how to use the `GridBagLayout` system for my java program. I am starting to use layouts because I kept reading and all the other articles use layouts and people keep saying that no layouts are buggy and messy. I was trying to make a game and wanted to create a whole application and a small window pane for the actual game. But when I go to set the location with `GridBagLayout.gridx()` and `GridBagLayout.gridy()`, it doesn&#39;t do anything. and when I set the layout of the `JFrame` from `null` to `GridBagLayout`, then the panel for the game gets resized so that it exactly fits the JLabel for the title in there.\r\n\r\n```\r\npackage MiniGolf;\r\n\r\nimport java.awt.Color;\r\nimport java.awt.GridBagConstraints;\r\nimport java.awt.GridBagLayout;\r\nimport java.awt.Toolkit;\r\nimport java.io.IOException;\r\n\r\nimport javax.swing.JFrame;\r\n\r\npublic class mainFrame extends JFrame{\r\n    public mainFrame(){\r\n        try{\r\n        setIconImage(FileInterperiter.GameIcon);\r\n        System.out.println(MiniGolf.RanFor() + &quot;Succesfully set Application Icon&quot;);\r\n        } catch(Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        \r\n        getContentPane().setBackground(new Color(10,10,10));\r\n        setSize(Toolkit.getDefaultToolkit().getScreenSize());\r\n        \r\n        GridBagLayout gbl = new GridBagLayout();\r\n        GridBagConstraints gbc = new GridBagConstraints();\r\n        setLayout(gbl);\r\n        \r\n        gbc.gridx = 1;\r\n        gbc.gridy = 1;\r\n        gbl.setConstraints(new visScreen(this.getSize()), gbc);\r\n        add(new visScreen(this.getSize()));\r\n        \r\n        System.out.println(MiniGolf.RanFor() + &quot;Debug &quot; + gbc);\r\n        finishInit();\r\n    }\r\n\r\n    void finishInit(){\r\n        setVisible(true);\r\n        setMinimumSize(getContentPane().getComponent(0).getSize());\r\n        System.out.println();\r\n    }\r\n}\r\n\r\n```\r\n\r\nAnd for the `JPabel`:\r\n\r\n```\r\npackage MiniGolf;\r\n\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.Image;\r\n\r\nimport javax.swing.ImageIcon;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JPanel;\r\n\r\npublic class visScreen extends JPanel{\r\n\r\n        Dimension GameScreenSize = new Dimension(600,600);\r\n\r\n    public visScreen(Dimension parentSize){\r\n        setBackground(new Color(10,100,10));\r\n        setForeground(new Color(10,100,10));\r\n        setSize(GameScreenSize);\r\n        setLocation((int) ((parentSize.getWidth() / 2) - (this.getWidth() / 2)),(int) ((parentSize.getHeight() / 2) - (this.getHeight() / 2)));\r\n        setVisible(true);\r\n        \r\n        JLabel TitleText = new JLabel(new ImageIcon(FileInterperiter.MenuTitle.getScaledInstance(300, 150, Image.SCALE_SMOOTH)));\r\n        add(TitleText);\r\n        System.out.println(MiniGolf.RanFor() + &quot;Applied Title Text Asset to Menu Screen&quot;);\r\n        TitleText.setLocation(60,60);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n......................","link":"https://stackoverflow.com/questions/77565089/resizing-and-relocating-jpanels-in-a-jframe-in-java","title":"Resizing and Relocating JPanels in a JFrame in Java","body":"<p>I have been looking at how to use the <code>GridBagLayout</code> system for my java program. I am starting to use layouts because I kept reading and all the other articles use layouts and people keep saying that no layouts are buggy and messy. I was trying to make a game and wanted to create a whole application and a small window pane for the actual game. But when I go to set the location with <code>GridBagLayout.gridx()</code> and <code>GridBagLayout.gridy()</code>, it doesn't do anything. and when I set the layout of the <code>JFrame</code> from <code>null</code> to <code>GridBagLayout</code>, then the panel for the game gets resized so that it exactly fits the JLabel for the title in there.</p>\n<pre><code>package MiniGolf;\n\nimport java.awt.Color;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.Toolkit;\nimport java.io.IOException;\n\nimport javax.swing.JFrame;\n\npublic class mainFrame extends JFrame{\n    public mainFrame(){\n        try{\n        setIconImage(FileInterperiter.GameIcon);\n        System.out.println(MiniGolf.RanFor() + &quot;Succesfully set Application Icon&quot;);\n        } catch(Exception e) {\n            e.printStackTrace();\n        }\n        \n        getContentPane().setBackground(new Color(10,10,10));\n        setSize(Toolkit.getDefaultToolkit().getScreenSize());\n        \n        GridBagLayout gbl = new GridBagLayout();\n        GridBagConstraints gbc = new GridBagConstraints();\n        setLayout(gbl);\n        \n        gbc.gridx = 1;\n        gbc.gridy = 1;\n        gbl.setConstraints(new visScreen(this.getSize()), gbc);\n        add(new visScreen(this.getSize()));\n        \n        System.out.println(MiniGolf.RanFor() + &quot;Debug &quot; + gbc);\n        finishInit();\n    }\n\n    void finishInit(){\n        setVisible(true);\n        setMinimumSize(getContentPane().getComponent(0).getSize());\n        System.out.println();\n    }\n}\n\n</code></pre>\n<p>And for the <code>JPabel</code>:</p>\n<pre><code>package MiniGolf;\n\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Image;\n\nimport javax.swing.ImageIcon;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\n\npublic class visScreen extends JPanel{\n\n        Dimension GameScreenSize = new Dimension(600,600);\n\n    public visScreen(Dimension parentSize){\n        setBackground(new Color(10,100,10));\n        setForeground(new Color(10,100,10));\n        setSize(GameScreenSize);\n        setLocation((int) ((parentSize.getWidth() / 2) - (this.getWidth() / 2)),(int) ((parentSize.getHeight() / 2) - (this.getHeight() / 2)));\n        setVisible(true);\n        \n        JLabel TitleText = new JLabel(new ImageIcon(FileInterperiter.MenuTitle.getScaledInstance(300, 150, Image.SCALE_SMOOTH)));\n        add(TitleText);\n        System.out.println(MiniGolf.RanFor() + &quot;Applied Title Text Asset to Menu Screen&quot;);\n        TitleText.setLocation(60,60);\n    }\n}\n\n</code></pre>\n<p>......................</p>\n"},{"tags":["java","openapi-generator","openapi-generator-maven-plugin"],"comment_count":0,"is_answered":false,"view_count":30,"answer_count":0,"score":0,"last_activity_date":1701188127,"creation_date":1701188127,"question_id":77565453,"body_markdown":"If i define a property like this:\r\n\r\n      scopes:\r\n        type: array\r\n        default: []\r\n        items:\r\n           type: string\r\n\r\nThe generated property is an ArrayList\r\n\r\n      @JsonProperty(&quot;scopes&quot;)\r\n      @Valid\r\n      private List&lt;String&gt; scopes = new ArrayList&lt;&gt;();\r\n\r\nHowever, if I want a set and use\r\n\r\n    uniqueItems: true\r\n\r\nI don&#39;t get a default value\r\n\r\n      @JsonProperty(&quot;scopes&quot;)\r\n      @Valid\r\n      private Set&lt;String&gt; scopes;\r\n\r\nHow can I get the following?\r\n\r\n      @JsonProperty(&quot;scopes&quot;)\r\n      @Valid\r\n      private Set&lt;String&gt; scopes = new LinkedHashSet();\r\n","link":"https://stackoverflow.com/questions/77565453/with-openapi-generator-how-do-you-generate-a-default-value-for-a-set","title":"With openapi-generator, how do you generate a default value for a set","body":"<p>If i define a property like this:</p>\n<pre><code>  scopes:\n    type: array\n    default: []\n    items:\n       type: string\n</code></pre>\n<p>The generated property is an ArrayList</p>\n<pre><code>  @JsonProperty(&quot;scopes&quot;)\n  @Valid\n  private List&lt;String&gt; scopes = new ArrayList&lt;&gt;();\n</code></pre>\n<p>However, if I want a set and use</p>\n<pre><code>uniqueItems: true\n</code></pre>\n<p>I don't get a default value</p>\n<pre><code>  @JsonProperty(&quot;scopes&quot;)\n  @Valid\n  private Set&lt;String&gt; scopes;\n</code></pre>\n<p>How can I get the following?</p>\n<pre><code>  @JsonProperty(&quot;scopes&quot;)\n  @Valid\n  private Set&lt;String&gt; scopes = new LinkedHashSet();\n</code></pre>\n"},{"tags":["javascript","java","localhost","vaadin","webauthn"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701194356,"post_id":77565444,"comment_id":136744247,"body_markdown":"How did you use a self-signed certificate?","link":"https://stackoverflow.com/questions/77558218/webauthn-does-navigator-credentials-create-work-from-localhost-to-another-su/77565444#comment136744247_77565444","body":"How did you use a self-signed certificate?"},{"score":0,"post_type":"answer","creation_date":1701198327,"post_id":77565444,"comment_id":136744882,"body_markdown":"@user2379123 Why do you accept the answer, if it does not answer your question?","link":"https://stackoverflow.com/questions/77558218/webauthn-does-navigator-credentials-create-work-from-localhost-to-another-su/77565444#comment136744882_77565444","body":"@user2379123 Why do you accept the answer, if it does not answer your question?"},{"score":0,"post_type":"answer","creation_date":1701201270,"post_id":77565444,"comment_id":136745385,"body_markdown":"@cfrick It does answer my question.","link":"https://stackoverflow.com/questions/77558218/webauthn-does-navigator-credentials-create-work-from-localhost-to-another-su/77565444#comment136745385_77565444","body":"@cfrick It does answer my question."}],"comment_count":3,"score":3,"last_activity_date":1701188069,"creation_date":1701188069,"answer_id":77565444,"question_id":77558218,"body_markdown":"Had a similar issue. But I successfully configured my local test site to work with subdomains using a self-signed certificate.","link":"https://stackoverflow.com/questions/77558218/webauthn-does-navigator-credentials-create-work-from-localhost-to-another-su/77565444#77565444","title":"WebAuthn: Does navigator.credentials.create() work from localhost to another (sub)domain?","body":"<p>Had a similar issue. But I successfully configured my local test site to work with subdomains using a self-signed certificate.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":88,"answer_count":1,"score":2,"last_activity_date":1701188069,"creation_date":1701100139,"question_id":77558218,"body_markdown":"I am trying to develope the WebAuthn registration flow in Java.\r\nFor this reason I got access to the privacyIDEA server from my university.\r\nLet&#39;s assume, for example, that the origin domain from my university is called `university-server.com`. The privacyIDEA server has the subdomain `webauthn.university-server.com`.\r\nFor building the web application I am using Vaadin.\r\n\r\nIf I start the web application, Tomcat will be started as local web server.\r\nThe idea behind this web application is: \r\n\r\n - Users can log in with their username and password and create a WebAuthn token as their 2nd factor.\r\n - The registration process should be triggered when users press on a button.\r\n - If enrollment succeed, the WebAuthn token should be saved on `webauthn.university-server.com`.\r\n\r\nFrom here, I encountered two problems:\r\n\r\n**Problem 1**:\r\n\r\nOn the localhost site, I am prompted to use my security key, but the registration process is never completed. Apparently the data never arrives.\r\n\r\n**Problem 2**:\r\n\r\nIf I set in the JavaScript function `navigator.credentials.create()` the parameter rp (Relying Party) to the subdomain `webauthn.university-server.com` and start the web application,\r\nunlike the first problem, I will never be prompted to use my security key. Instead, the error &quot;The operation is insecure&quot; appears.\r\n\r\nCan the WebAuth enrollment work at all with my test environment?\r\nTo be honest, I am not sure about this.\r\n","link":"https://stackoverflow.com/questions/77558218/webauthn-does-navigator-credentials-create-work-from-localhost-to-another-su","title":"WebAuthn: Does navigator.credentials.create() work from localhost to another (sub)domain?","body":"<p>I am trying to develope the WebAuthn registration flow in Java.\nFor this reason I got access to the privacyIDEA server from my university.\nLet's assume, for example, that the origin domain from my university is called <code>university-server.com</code>. The privacyIDEA server has the subdomain <code>webauthn.university-server.com</code>.\nFor building the web application I am using Vaadin.</p>\n<p>If I start the web application, Tomcat will be started as local web server.\nThe idea behind this web application is:</p>\n<ul>\n<li>Users can log in with their username and password and create a WebAuthn token as their 2nd factor.</li>\n<li>The registration process should be triggered when users press on a button.</li>\n<li>If enrollment succeed, the WebAuthn token should be saved on <code>webauthn.university-server.com</code>.</li>\n</ul>\n<p>From here, I encountered two problems:</p>\n<p><strong>Problem 1</strong>:</p>\n<p>On the localhost site, I am prompted to use my security key, but the registration process is never completed. Apparently the data never arrives.</p>\n<p><strong>Problem 2</strong>:</p>\n<p>If I set in the JavaScript function <code>navigator.credentials.create()</code> the parameter rp (Relying Party) to the subdomain <code>webauthn.university-server.com</code> and start the web application,\nunlike the first problem, I will never be prompted to use my security key. Instead, the error &quot;The operation is insecure&quot; appears.</p>\n<p>Can the WebAuth enrollment work at all with my test environment?\nTo be honest, I am not sure about this.</p>\n"},{"tags":["java","spring-boot","debugging","intellij-idea","jackson"],"comment_count":0,"is_answered":false,"view_count":31,"answer_count":0,"score":0,"last_activity_date":1701187915,"creation_date":1701181929,"last_edit_date":1701187915,"question_id":77564699,"body_markdown":"I would like some way to look at a json-string generated from an object I have in the debugger while on a breakpoint.\r\n\r\nThere are alternatives that work but are not quite what I want: I know I can annotate the constructor of a service and have Spring dependency-inject it for me, as for example explained here: https://stackoverflow.com/questions/30060006/how-do-i-obtain-the-jackson-objectmapper-in-use-by-spring-4-1, I am also aware I can create a _new_ object Mapper from static methods in the Jackson-library, but I want to use the objectMapper as it is configured in the real application.\r\n\r\nI am using intellij as a frontend for the java-debugger, SpringBoot 3.1.2 and jackson-core 2.15.2, though I suppose those things should not be too relevant.","link":"https://stackoverflow.com/questions/77564699/how-to-get-the-springboot-jackson-objectmapper-in-a-debugger","title":"How to get the SpringBoot (Jackson)-objectMapper in a debugger?","body":"<p>I would like some way to look at a json-string generated from an object I have in the debugger while on a breakpoint.</p>\n<p>There are alternatives that work but are not quite what I want: I know I can annotate the constructor of a service and have Spring dependency-inject it for me, as for example explained here: <a href=\"https://stackoverflow.com/questions/30060006/how-do-i-obtain-the-jackson-objectmapper-in-use-by-spring-4-1\">How do I obtain the Jackson ObjectMapper in use by Spring 4.1?</a>, I am also aware I can create a <em>new</em> object Mapper from static methods in the Jackson-library, but I want to use the objectMapper as it is configured in the real application.</p>\n<p>I am using intellij as a frontend for the java-debugger, SpringBoot 3.1.2 and jackson-core 2.15.2, though I suppose those things should not be too relevant.</p>\n"},{"tags":["java"],"comments":[{"score":1,"post_type":"question","creation_date":1701184728,"post_id":77565001,"comment_id":136742248,"body_markdown":"You can&#39;t create an enum of another type.  You could have an enum that has a field of another type.","link":"https://stackoverflow.com/questions/77565001/how-can-i-get-an-enum-from-an-object-values-in-java#comment136742248_77565001","body":"You can&#39;t create an enum of another type.  You could have an enum that has a field of another type."},{"score":3,"post_type":"question","creation_date":1701189779,"post_id":77565001,"comment_id":136743326,"body_markdown":"What is this going to give you above `StandardCharsets` itself though?","link":"https://stackoverflow.com/questions/77565001/how-can-i-get-an-enum-from-an-object-values-in-java#comment136743326_77565001","body":"What is this going to give you above <code>StandardCharsets</code> itself though?"}],"answers":[{"comment_count":0,"score":4,"last_activity_date":1701187912,"last_edit_date":1701187912,"creation_date":1701186766,"answer_id":77565278,"question_id":77565001,"body_markdown":"Maybe, it can be like this:\r\n\r\n    import java.nio.charset.Charset;\r\n    import java.nio.charset.StandardCharsets;\r\n\r\n    public enum CharsetEnum {\r\n    \r\n        ISO_8859_1(StandardCharsets.ISO_8859_1),\r\n        US_ASCII(StandardCharsets.US_ASCII),\r\n        UTF_16(StandardCharsets.UTF_16),\r\n        UTF_16BE(StandardCharsets.UTF_16BE),\r\n        UTF_16LE(StandardCharsets.UTF_16LE),\r\n        UTF_8(StandardCharsets.UTF_8);\r\n    \r\n    \r\n        private final Charset label;\r\n    \r\n        public Charset getLabel() {\r\n            return label;\r\n        }\r\n    \r\n        CharsetEnum(Charset label) {\r\n            this.label = label;\r\n        }\r\n    }","link":"https://stackoverflow.com/questions/77565001/how-can-i-get-an-enum-from-an-object-values-in-java/77565278#77565278","title":"How can I get an Enum from an object values in Java?","body":"<p>Maybe, it can be like this:</p>\n<pre><code>import java.nio.charset.Charset;\nimport java.nio.charset.StandardCharsets;\n\npublic enum CharsetEnum {\n\n    ISO_8859_1(StandardCharsets.ISO_8859_1),\n    US_ASCII(StandardCharsets.US_ASCII),\n    UTF_16(StandardCharsets.UTF_16),\n    UTF_16BE(StandardCharsets.UTF_16BE),\n    UTF_16LE(StandardCharsets.UTF_16LE),\n    UTF_8(StandardCharsets.UTF_8);\n\n\n    private final Charset label;\n\n    public Charset getLabel() {\n        return label;\n    }\n\n    CharsetEnum(Charset label) {\n        this.label = label;\n    }\n}\n</code></pre>\n"},{"comment_count":0,"score":1,"last_activity_date":1701187199,"creation_date":1701187199,"answer_id":77565343,"question_id":77565001,"body_markdown":"In Java, enums cannot extend classes or have fields like regular classes. However, you can achieve what you want by creating a constructor for your enum and passing the corresponding label for each charset.\r\n\r\n**Here&#39;s how you can modify your CharsetEnum enum:**\r\n\r\n    import java.nio.charset.Charset;\r\n    import java.nio.charset.StandardCharsets;\r\n    \r\n    public enum CharsetEnum {\r\n        ISO_8859_1(&quot;ISO-8859-1&quot;),\r\n        US_ASCII(&quot;US-ASCII&quot;),\r\n        UTF_16(&quot;UTF-16&quot;),\r\n        UTF_16BE(&quot;UTF-16BE&quot;),\r\n        UTF_16LE(&quot;UTF-16LE&quot;),\r\n        UTF_8(&quot;UTF-8&quot;);\r\n    \r\n        private final String label;\r\n    \r\n        CharsetEnum(String label) {\r\n            this.label = label;\r\n        }\r\n    \r\n        public String getLabel() {\r\n            return label;\r\n        }\r\n    \r\n        public Charset getCharset() {\r\n            return Charset.forName(label);\r\n        }\r\n    }\r\n\r\n**You can use the enum as follows:**\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            CharsetEnum utf8 = CharsetEnum.UTF_8;\r\n            System.out.println(&quot;Label: &quot; + utf8.getLabel());\r\n            System.out.println(&quot;Charset: &quot; + utf8.getCharset());\r\n        }\r\n    }\r\n\r\n**This will output:**\r\n\r\n    Label: UTF-8\r\n    Charset: UTF-8","link":"https://stackoverflow.com/questions/77565001/how-can-i-get-an-enum-from-an-object-values-in-java/77565343#77565343","title":"How can I get an Enum from an object values in Java?","body":"<p>In Java, enums cannot extend classes or have fields like regular classes. However, you can achieve what you want by creating a constructor for your enum and passing the corresponding label for each charset.</p>\n<p><strong>Here's how you can modify your CharsetEnum enum:</strong></p>\n<pre><code>import java.nio.charset.Charset;\nimport java.nio.charset.StandardCharsets;\n\npublic enum CharsetEnum {\n    ISO_8859_1(&quot;ISO-8859-1&quot;),\n    US_ASCII(&quot;US-ASCII&quot;),\n    UTF_16(&quot;UTF-16&quot;),\n    UTF_16BE(&quot;UTF-16BE&quot;),\n    UTF_16LE(&quot;UTF-16LE&quot;),\n    UTF_8(&quot;UTF-8&quot;);\n\n    private final String label;\n\n    CharsetEnum(String label) {\n        this.label = label;\n    }\n\n    public String getLabel() {\n        return label;\n    }\n\n    public Charset getCharset() {\n        return Charset.forName(label);\n    }\n}\n</code></pre>\n<p><strong>You can use the enum as follows:</strong></p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        CharsetEnum utf8 = CharsetEnum.UTF_8;\n        System.out.println(&quot;Label: &quot; + utf8.getLabel());\n        System.out.println(&quot;Charset: &quot; + utf8.getCharset());\n    }\n}\n</code></pre>\n<p><strong>This will output:</strong></p>\n<pre><code>Label: UTF-8\nCharset: UTF-8\n</code></pre>\n"}],"comment_count":2,"is_answered":true,"view_count":85,"answer_count":2,"score":0,"last_activity_date":1701187912,"creation_date":1701184495,"question_id":77565001,"body_markdown":"I want to create an Enum of all StandardCharsets elements (&quot;UTF_8&quot;, &quot;UTF_16LE&quot;, &quot;UTF_16BE&quot;, &quot;UTF_16&quot;, &quot;US_ASCII&quot; and &quot;ISO_8859_1&quot;).\r\n\r\nIs it possible?\r\n\r\nThis is what I have inside enum file but it gives me syntax error:\r\n\r\n    import java.nio.charset.StandardCharsets;\r\n    \r\n    public enum CharsetEnum {\r\n    \t\r\n    \tStandardCharsets.ISO_8859_1,  // Syntax error on token &quot;.&quot;, ( expected\r\n    \tStandardCharsets.US_ASCII,\r\n    \tStandardCharsets.UTF_16,\r\n    \tStandardCharsets.UTF_16BE,\r\n    \tStandardCharsets.UTF_16LE,\r\n    \tStandardCharsets.UTF_8;\r\n    \t\r\n    \tprivate String label;\r\n    \t\r\n    \tpublic String getLabel() {\r\n    \t\treturn label;\r\n    \t}\r\n    \r\n    \tprivate CharsetEnum(String label) {\r\n    \t\tthis.label = label;\r\n    \t}\r\n    }","link":"https://stackoverflow.com/questions/77565001/how-can-i-get-an-enum-from-an-object-values-in-java","title":"How can I get an Enum from an object values in Java?","body":"<p>I want to create an Enum of all StandardCharsets elements (&quot;UTF_8&quot;, &quot;UTF_16LE&quot;, &quot;UTF_16BE&quot;, &quot;UTF_16&quot;, &quot;US_ASCII&quot; and &quot;ISO_8859_1&quot;).</p>\n<p>Is it possible?</p>\n<p>This is what I have inside enum file but it gives me syntax error:</p>\n<pre><code>import java.nio.charset.StandardCharsets;\n\npublic enum CharsetEnum {\n    \n    StandardCharsets.ISO_8859_1,  // Syntax error on token &quot;.&quot;, ( expected\n    StandardCharsets.US_ASCII,\n    StandardCharsets.UTF_16,\n    StandardCharsets.UTF_16BE,\n    StandardCharsets.UTF_16LE,\n    StandardCharsets.UTF_8;\n    \n    private String label;\n    \n    public String getLabel() {\n        return label;\n    }\n\n    private CharsetEnum(String label) {\n        this.label = label;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1700910295,"post_id":77547581,"comment_id":136711659,"body_markdown":"Thank you, I am not sure where or how that would work. Any chance you would be able to add it to the repo code or put the class here?","link":"https://stackoverflow.com/questions/77547518/how-to-dynamically-create-n-beans-based-on-configuration/77547581#comment136711659_77547581","body":"Thank you, I am not sure where or how that would work. Any chance you would be able to add it to the repo code or put the class here?"}],"comment_count":1,"score":2,"last_activity_date":1700909983,"creation_date":1700909983,"answer_id":77547581,"question_id":77547518,"body_markdown":"You could use a custom implementation of a ```BeanDefinitionRegistryPostProcessor```. Create it and register it as a normal bean.\r\n\r\nBasically instead of registering many beans at runtime like your ```@Configuration``` tries to do, it would register many **bean definitions** earlier in the lifecycle of the application context, based on the ```Environment```&#39;s properties.\r\n\r\nYou can use the ```registry.registerBeanDefinition(&lt;dynamicBeanName&gt;, BeanDefinitionBuilder.genericBeanDefinition(DynamicStringMaker.class)  .addConstructorArgValue(firstname).addConstructorArgValue(lastname).getBeanDefinition())```. It&#39;s like creating ```@Bean``` methods manually. The definitions will be processed and the beans created. You can then inject them however you want.","link":"https://stackoverflow.com/questions/77547518/how-to-dynamically-create-n-beans-based-on-configuration/77547581#77547581","title":"How to dynamically create N beans based on configuration","body":"<p>You could use a custom implementation of a <code>BeanDefinitionRegistryPostProcessor</code>. Create it and register it as a normal bean.</p>\n<p>Basically instead of registering many beans at runtime like your <code>@Configuration</code> tries to do, it would register many <strong>bean definitions</strong> earlier in the lifecycle of the application context, based on the <code>Environment</code>'s properties.</p>\n<p>You can use the <code>registry.registerBeanDefinition(&lt;dynamicBeanName&gt;, BeanDefinitionBuilder.genericBeanDefinition(DynamicStringMaker.class)  .addConstructorArgValue(firstname).addConstructorArgValue(lastname).getBeanDefinition())</code>. It's like creating <code>@Bean</code> methods manually. The definitions will be processed and the beans created. You can then inject them however you want.</p>\n"},{"comments":[{"score":1,"post_type":"answer","creation_date":1700947805,"post_id":77547803,"comment_id":136715201,"body_markdown":"Thank you, that worked perfectly. \n\nTo pick up one of my points about conditional on property, that can be added to the bean def too https://github.com/SSmale/SpringBoot/commit/03006d35741db6b1839c13f17198dff644c52f18","link":"https://stackoverflow.com/questions/77547518/how-to-dynamically-create-n-beans-based-on-configuration/77547803#comment136715201_77547803","body":"Thank you, that worked perfectly.   To pick up one of my points about conditional on property, that can be added to the bean def too <a href=\"https://github.com/SSmale/SpringBoot/commit/03006d35741db6b1839c13f17198dff644c52f18\" rel=\"nofollow noreferrer\">github.com/SSmale/SpringBoot/commit/&hellip;</a>"},{"score":0,"post_type":"answer","creation_date":1701174528,"post_id":77547803,"comment_id":136740210,"body_markdown":"@Tony, When I got to the more complex codebase I ran into other troubles. I have posted a [follow up question](https://stackoverflow.com/questions/77563863/how-to-instantiate-n-beans-that-require-a-3rd-party-bean-to-create-a-wrapper-a)","link":"https://stackoverflow.com/questions/77547518/how-to-dynamically-create-n-beans-based-on-configuration/77547803#comment136740210_77547803","body":"@Tony, When I got to the more complex codebase I ran into other troubles. I have posted a <a href=\"https://stackoverflow.com/questions/77563863/how-to-instantiate-n-beans-that-require-a-3rd-party-bean-to-create-a-wrapper-a\">follow up question</a>"}],"comment_count":2,"score":2,"last_activity_date":1701187905,"last_edit_date":1701187905,"creation_date":1700914083,"answer_id":77547803,"question_id":77547518,"body_markdown":"Beans&#39; definitions should be registered earlier in the lifecycle of the Spring application context, before the bean instantiation phase. To do so, you can implement [`BeanDefinitionRegistryPostProcessor` interface][1] as follows:\r\n\r\n```java\r\npublic class DynamicStringMakerBeanDefinitionRegistrar\r\n    implements BeanDefinitionRegistryPostProcessor {\r\n\r\n  public static final String PROPERTIES_PREFIX = &quot;uk.co.iamsimonsmale.dynamic-strings&quot;;\r\n  private final Multi multi;\r\n\r\n  public DynamicStringMakerBeanDefinitionRegistrar(Environment environment) {\r\n    multi =\r\n        Binder.get(environment)\r\n            .bind(PROPERTIES_PREFIX, Bindable.of(Multi.class))\r\n            .orElseThrow(IllegalStateException::new);\r\n  }\r\n\r\n  @Override\r\n  public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry)\r\n      throws BeansException {\r\n    multi.configs().forEach(config -&gt; registerBeanDefinition(registry, config));\r\n  }\r\n\r\n  private void registerBeanDefinition(BeanDefinitionRegistry registry, Single config) {\r\n    GenericBeanDefinition beanDefinition = new GenericBeanDefinition();\r\n    beanDefinition.setBeanClass(DynamicStringMaker.class);\r\n    beanDefinition.setInstanceSupplier(\r\n        () -&gt; new DynamicStringMaker(multi.lastName(), config.firstName()));\r\n    registry.registerBeanDefinition(config.beanName(), beanDefinition);\r\n  }\r\n\r\n  @Override\r\n  public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory)\r\n      throws BeansException {}\r\n}\r\n```\r\n\r\nSince properties are needed before beans are instantiated, to register `DynamicStringMaker` beans&#39; definitions, `@ConfigurationProperties` are unsuitable for this case. Instead, [Binder API][2] is used to bind them programmatically.\r\n\r\nBecause `BeanFactoryPostProcessor` objects, in general, must be instantiated very early in the lifecycle, `@Bean` methods should be marked as static in `@Configuration` classes to avoid lifecycle issues, according to [Spring documentation][3].\r\n```java\r\n@Configuration\r\npublic class DynamicStringMakerBeanDefinitionRegistrarConfiguration {\r\n  @Bean\r\n  public static DynamicStringMakerBeanDefinitionRegistrar beanDefinitionRegistrar(Environment environment) {\r\n    return new DynamicStringMakerBeanDefinitionRegistrar(environment);\r\n  }\r\n}\r\n```\r\n\r\nTo use those beans, you can either inject one by a bean name or all of them as a collection.\r\n\r\nFor reference: [Dynamically register Spring Beans based on properties][4]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/support/BeanDefinitionRegistryPostProcessor.html\r\n  [2]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Release-Notes#configuration-property-binding\r\n  [3]: https://docs.spring.io/spring-framework/docs/5.0.x/javadoc-api/org/springframework/context/annotation/Bean.html\r\n  [4]: https://stackoverflow.com/a/75046618/10231374","link":"https://stackoverflow.com/questions/77547518/how-to-dynamically-create-n-beans-based-on-configuration/77547803#77547803","title":"How to dynamically create N beans based on configuration","body":"<p>Beans' definitions should be registered earlier in the lifecycle of the Spring application context, before the bean instantiation phase. To do so, you can implement <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/support/BeanDefinitionRegistryPostProcessor.html\" rel=\"nofollow noreferrer\"><code>BeanDefinitionRegistryPostProcessor</code> interface</a> as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DynamicStringMakerBeanDefinitionRegistrar\n    implements BeanDefinitionRegistryPostProcessor {\n\n  public static final String PROPERTIES_PREFIX = &quot;uk.co.iamsimonsmale.dynamic-strings&quot;;\n  private final Multi multi;\n\n  public DynamicStringMakerBeanDefinitionRegistrar(Environment environment) {\n    multi =\n        Binder.get(environment)\n            .bind(PROPERTIES_PREFIX, Bindable.of(Multi.class))\n            .orElseThrow(IllegalStateException::new);\n  }\n\n  @Override\n  public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry)\n      throws BeansException {\n    multi.configs().forEach(config -&gt; registerBeanDefinition(registry, config));\n  }\n\n  private void registerBeanDefinition(BeanDefinitionRegistry registry, Single config) {\n    GenericBeanDefinition beanDefinition = new GenericBeanDefinition();\n    beanDefinition.setBeanClass(DynamicStringMaker.class);\n    beanDefinition.setInstanceSupplier(\n        () -&gt; new DynamicStringMaker(multi.lastName(), config.firstName()));\n    registry.registerBeanDefinition(config.beanName(), beanDefinition);\n  }\n\n  @Override\n  public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory)\n      throws BeansException {}\n}\n</code></pre>\n<p>Since properties are needed before beans are instantiated, to register <code>DynamicStringMaker</code> beans' definitions, <code>@ConfigurationProperties</code> are unsuitable for this case. Instead, <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Release-Notes#configuration-property-binding\" rel=\"nofollow noreferrer\">Binder API</a> is used to bind them programmatically.</p>\n<p>Because <code>BeanFactoryPostProcessor</code> objects, in general, must be instantiated very early in the lifecycle, <code>@Bean</code> methods should be marked as static in <code>@Configuration</code> classes to avoid lifecycle issues, according to <a href=\"https://docs.spring.io/spring-framework/docs/5.0.x/javadoc-api/org/springframework/context/annotation/Bean.html\" rel=\"nofollow noreferrer\">Spring documentation</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class DynamicStringMakerBeanDefinitionRegistrarConfiguration {\n  @Bean\n  public static DynamicStringMakerBeanDefinitionRegistrar beanDefinitionRegistrar(Environment environment) {\n    return new DynamicStringMakerBeanDefinitionRegistrar(environment);\n  }\n}\n</code></pre>\n<p>To use those beans, you can either inject one by a bean name or all of them as a collection.</p>\n<p>For reference: <a href=\"https://stackoverflow.com/a/75046618/10231374\">Dynamically register Spring Beans based on properties</a></p>\n"}],"comment_count":0,"is_answered":true,"view_count":144,"answer_count":2,"score":1,"last_activity_date":1701187905,"creation_date":1700908647,"last_edit_date":1700916457,"question_id":77547518,"body_markdown":"I am trying to create N number of beans of type `DynamicStringMaker` in my code based on the configuration values provided as an array. This is intended to be packaged up and called by other applications, gated by a `@ConditionalOnProperty` annotation.\r\n\r\n\r\nI have the issue that following [this StackOverflow answer][1] I either need to find a way to always create the `myBeansList` bean, even if it is not used or I would have to auto wire it in somewhere and never use it. \r\n\r\nI have tried to use the `@PostConstruct` annotation instead, but then the named beans are not created so I get a null pointer exception when trying to use it, or the app doesn&#39;t start (using required = true/false)  \r\n\r\n[This is a simple example of a more complex codebase that I have at work so it is a little noddy. Here it is not working as the bean method is never called][2] \r\n\r\n[It working because I AutoWire in the array][3]\r\n\r\n```\r\n// BeanMaking Class\r\npackage uk.co.iamsimonsmale.facades.DynmicString.autoconfigure;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.config.ConfigurableListableBeanFactory;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport uk.co.iamsimonsmale.facades.DynmicString.DynamicStringMaker;\r\nimport uk.co.iamsimonsmale.facades.DynmicString.ConfigurationProperties.Multi;\r\nimport uk.co.iamsimonsmale.facades.DynmicString.ConfigurationProperties.Single;\r\n\r\n@Configuration\r\n@Slf4j\r\npublic class multiDynamicStrings {\r\n\r\n  @Autowired\r\n  private Multi multiConfig;\r\n\r\n  @Autowired\r\n  private ConfigurableListableBeanFactory beanFactory;\r\n\r\n  @Bean\r\n  public Map&lt;String, DynamicStringMaker&gt; makeMakers() {\r\n    Map&lt;String, DynamicStringMaker&gt; beanList = new HashMap&lt;&gt;();\r\n\r\n    log.info(multiConfig.lastName());\r\n\r\n    for (Single config : multiConfig.configs()) {\r\n      DynamicStringMaker newBean = new DynamicStringMaker(multiConfig.lastName(), config.firstName());\r\n      beanFactory.registerSingleton(config.beanName(), newBean);\r\n    }\r\n\r\n    return beanList;\r\n\r\n  }\r\n\r\n}\r\n\r\n```\r\n\r\n```\r\n# BeanConfig\r\nuk.co.iamsimonsmale.dynamic-strings:\r\n  lastName: Smale\r\n  configs:\r\n    - beanName: simonBean\r\n      firstName: Simon\r\n    - beanName: griffinBean\r\n      firstName: Griffin\r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/52106568/6395235\r\n  [2]: https://github.com/SSmale/SpringBoot/commit/9405a56dc012598f8a8ca9133b7fb945aac57e2d\r\n  [3]: https://github.com/SSmale/SpringBoot/commit/22c1e616599e77f2495a24b9b73915014d58575b","link":"https://stackoverflow.com/questions/77547518/how-to-dynamically-create-n-beans-based-on-configuration","title":"How to dynamically create N beans based on configuration","body":"<p>I am trying to create N number of beans of type <code>DynamicStringMaker</code> in my code based on the configuration values provided as an array. This is intended to be packaged up and called by other applications, gated by a <code>@ConditionalOnProperty</code> annotation.</p>\n<p>I have the issue that following <a href=\"https://stackoverflow.com/a/52106568/6395235\">this StackOverflow answer</a> I either need to find a way to always create the <code>myBeansList</code> bean, even if it is not used or I would have to auto wire it in somewhere and never use it.</p>\n<p>I have tried to use the <code>@PostConstruct</code> annotation instead, but then the named beans are not created so I get a null pointer exception when trying to use it, or the app doesn't start (using required = true/false)</p>\n<p><a href=\"https://github.com/SSmale/SpringBoot/commit/9405a56dc012598f8a8ca9133b7fb945aac57e2d\" rel=\"nofollow noreferrer\">This is a simple example of a more complex codebase that I have at work so it is a little noddy. Here it is not working as the bean method is never called</a></p>\n<p><a href=\"https://github.com/SSmale/SpringBoot/commit/22c1e616599e77f2495a24b9b73915014d58575b\" rel=\"nofollow noreferrer\">It working because I AutoWire in the array</a></p>\n<pre><code>// BeanMaking Class\npackage uk.co.iamsimonsmale.facades.DynmicString.autoconfigure;\n\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.config.ConfigurableListableBeanFactory;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport lombok.extern.slf4j.Slf4j;\nimport uk.co.iamsimonsmale.facades.DynmicString.DynamicStringMaker;\nimport uk.co.iamsimonsmale.facades.DynmicString.ConfigurationProperties.Multi;\nimport uk.co.iamsimonsmale.facades.DynmicString.ConfigurationProperties.Single;\n\n@Configuration\n@Slf4j\npublic class multiDynamicStrings {\n\n  @Autowired\n  private Multi multiConfig;\n\n  @Autowired\n  private ConfigurableListableBeanFactory beanFactory;\n\n  @Bean\n  public Map&lt;String, DynamicStringMaker&gt; makeMakers() {\n    Map&lt;String, DynamicStringMaker&gt; beanList = new HashMap&lt;&gt;();\n\n    log.info(multiConfig.lastName());\n\n    for (Single config : multiConfig.configs()) {\n      DynamicStringMaker newBean = new DynamicStringMaker(multiConfig.lastName(), config.firstName());\n      beanFactory.registerSingleton(config.beanName(), newBean);\n    }\n\n    return beanList;\n\n  }\n\n}\n\n</code></pre>\n<pre><code># BeanConfig\nuk.co.iamsimonsmale.dynamic-strings:\n  lastName: Smale\n  configs:\n    - beanName: simonBean\n      firstName: Simon\n    - beanName: griffinBean\n      firstName: Griffin\n</code></pre>\n"},{"tags":["java","json","logback"],"comment_count":0,"is_answered":false,"view_count":9,"answer_count":0,"score":0,"last_activity_date":1701187197,"creation_date":1701187197,"question_id":77565342,"body_markdown":"my project prints normal log, I need to refactor it into json format and mask PII data.\r\nI checked [logstash-logback-encoder][1], seems it&#39;s perfect. I trid but cannot achieve my goals.\r\n\r\nmy logback configuration:\r\n\r\n```xml\r\n&lt;configuration debug=&quot;true&quot;&gt;\r\n    &lt;appender name=&quot;stdout&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\r\n            &lt;jsonGeneratorDecorator class=&quot;net.logstash.logback.mask.MaskingJsonGeneratorDecorator&quot;&gt;\r\n                &lt;defaultMask&gt;****&lt;/defaultMask&gt;\r\n                &lt;path&gt;password&lt;/path&gt;\r\n            &lt;/jsonGeneratorDecorator&gt;\r\n            &lt;providers&gt;\r\n                &lt;timestamp&gt;\r\n                    &lt;timeZone&gt;UTC&lt;/timeZone&gt;\r\n                &lt;/timestamp&gt;\r\n                &lt;pattern&gt;\r\n                    &lt;pattern&gt;\r\n                        {\r\n                        &quot;time&quot;:&quot;%d{yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS+08:00}&quot;,\r\n                        &quot;level&quot;: &quot;%level&quot;,\r\n                        &quot;message&quot;: &quot;%m&quot;\r\n                        }\r\n                    &lt;/pattern&gt;\r\n                &lt;/pattern&gt;\r\n            &lt;/providers&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n    &lt;root level=&quot;INFO&quot;&gt;\r\n        &lt;appender-ref ref=&quot;stdout&quot;/&gt;\r\n    &lt;/root&gt;\r\n&lt;/configuration&gt;\r\n```\r\nmy application:\r\n```java\r\nlog.info(&quot;I want to print {}&quot;, new User(&quot;Jax&quot;,&quot;secret&quot;));\r\n```\r\nhere `User` is a POJO, only have 2 string fileds.\r\n\r\nwhat I got in console:\r\n\r\n```json\r\n{&quot;@timestamp&quot;:&quot;2023-11-28T15:46:24.5832727Z&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;I want to print User(userName=Jax, password=secret)&quot;}\r\n```\r\n\r\nmy expection:\r\n```json\r\n{&quot;@timestamp&quot;:&quot;2023-11-28T15:46:24.5832727Z&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;I want to print {\\&quot;userName&quot;:\\&quot;Jax\\&quot;,\\&quot;password\\&quot;:\\&quot;***\\&quot;}&quot;}\r\n```\r\n\r\nmy analysis:\r\n\r\nthe decorator `MaskingJsonGeneratorDecorator` does work, but form `JsonGenerator` viewpoint, it takes the whole output as it&#39;s target instead of my own parameter (POJO instance). if I change the `&lt;path&gt;password&lt;/path&gt;` to `&lt;path&gt;message&lt;/path&gt;` it can mask the whole message. but I need it only focus on the POJO instance, I tried:\r\n1. change the pattern, asked it to parse the message into json object by `#tryJson{...}`\r\n2. change `path` accordingly\r\n3. use jackson serialize `User` before printing\r\n\r\nit does work. but since my original log statement isn&#39;t json, it could be a xmlstring, json string or POJO.\r\n\r\nI also tried to use `MaskingJsonGenerator` to implement my own `jsonserializer`, it can&#39;t work because of StackOverflowException.\r\n\r\nwhat I supposed to change my logback configuration and log related class? please help. thanks a lot.\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/logfellow/logstash-logback-encoder","link":"https://stackoverflow.com/questions/77565342/how-to-mask-pii-data-with-leverage-of-logstach-logback-endcoder-and-format-data","title":"How to mask PII data with leverage of logstach-logback-endcoder and format data?","body":"<p>my project prints normal log, I need to refactor it into json format and mask PII data.\nI checked <a href=\"https://github.com/logfellow/logstash-logback-encoder\" rel=\"nofollow noreferrer\">logstash-logback-encoder</a>, seems it's perfect. I trid but cannot achieve my goals.</p>\n<p>my logback configuration:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration debug=&quot;true&quot;&gt;\n    &lt;appender name=&quot;stdout&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\n            &lt;jsonGeneratorDecorator class=&quot;net.logstash.logback.mask.MaskingJsonGeneratorDecorator&quot;&gt;\n                &lt;defaultMask&gt;****&lt;/defaultMask&gt;\n                &lt;path&gt;password&lt;/path&gt;\n            &lt;/jsonGeneratorDecorator&gt;\n            &lt;providers&gt;\n                &lt;timestamp&gt;\n                    &lt;timeZone&gt;UTC&lt;/timeZone&gt;\n                &lt;/timestamp&gt;\n                &lt;pattern&gt;\n                    &lt;pattern&gt;\n                        {\n                        &quot;time&quot;:&quot;%d{yyyy-MM-dd'T'HH:mm:ss.SSS+08:00}&quot;,\n                        &quot;level&quot;: &quot;%level&quot;,\n                        &quot;message&quot;: &quot;%m&quot;\n                        }\n                    &lt;/pattern&gt;\n                &lt;/pattern&gt;\n            &lt;/providers&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n    &lt;root level=&quot;INFO&quot;&gt;\n        &lt;appender-ref ref=&quot;stdout&quot;/&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>my application:</p>\n<pre class=\"lang-java prettyprint-override\"><code>log.info(&quot;I want to print {}&quot;, new User(&quot;Jax&quot;,&quot;secret&quot;));\n</code></pre>\n<p>here <code>User</code> is a POJO, only have 2 string fileds.</p>\n<p>what I got in console:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{&quot;@timestamp&quot;:&quot;2023-11-28T15:46:24.5832727Z&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;I want to print User(userName=Jax, password=secret)&quot;}\n</code></pre>\n<p>my expection:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{&quot;@timestamp&quot;:&quot;2023-11-28T15:46:24.5832727Z&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;message&quot;:&quot;I want to print {\\&quot;userName&quot;:\\&quot;Jax\\&quot;,\\&quot;password\\&quot;:\\&quot;***\\&quot;}&quot;}\n</code></pre>\n<p>my analysis:</p>\n<p>the decorator <code>MaskingJsonGeneratorDecorator</code> does work, but form <code>JsonGenerator</code> viewpoint, it takes the whole output as it's target instead of my own parameter (POJO instance). if I change the <code>&lt;path&gt;password&lt;/path&gt;</code> to <code>&lt;path&gt;message&lt;/path&gt;</code> it can mask the whole message. but I need it only focus on the POJO instance, I tried:</p>\n<ol>\n<li>change the pattern, asked it to parse the message into json object by <code>#tryJson{...}</code></li>\n<li>change <code>path</code> accordingly</li>\n<li>use jackson serialize <code>User</code> before printing</li>\n</ol>\n<p>it does work. but since my original log statement isn't json, it could be a xmlstring, json string or POJO.</p>\n<p>I also tried to use <code>MaskingJsonGenerator</code> to implement my own <code>jsonserializer</code>, it can't work because of StackOverflowException.</p>\n<p>what I supposed to change my logback configuration and log related class? please help. thanks a lot.</p>\n"},{"tags":["java","maven","plugins","maven-plugin","mojo"],"comments":[{"score":0,"post_type":"question","creation_date":1701187835,"post_id":77565325,"comment_id":136742900,"body_markdown":"What do you mean by &quot;install remote dependencies&quot;? Usually, these dependencies come from some Maven repository. Then you can add that repository and declare the necessary dependencies in the POM.","link":"https://stackoverflow.com/questions/77565325/how-to-install-remote-dependencies-using-mavensession#comment136742900_77565325","body":"What do you mean by &quot;install remote dependencies&quot;? Usually, these dependencies come from some Maven repository. Then you can add that repository and declare the necessary dependencies in the POM."},{"score":0,"post_type":"question","creation_date":1701189207,"post_id":77565325,"comment_id":136743212,"body_markdown":"Hi [J Fabian Meier](https://stackoverflow.com/users/927493/j-fabian-meier), in my maven plugin goal, I need to add dependencies that are on a remote repository (Nexus repo) programmatically. However, I don&#39;t want to add them using the MavenProject, instead I want to use a MavenSession.","link":"https://stackoverflow.com/questions/77565325/how-to-install-remote-dependencies-using-mavensession#comment136743212_77565325","body":"Hi <a href=\"https://stackoverflow.com/users/927493/j-fabian-meier\">J Fabian Meier</a>, in my maven plugin goal, I need to add dependencies that are on a remote repository (Nexus repo) programmatically. However, I don&#39;t want to add them using the MavenProject, instead I want to use a MavenSession."},{"score":0,"post_type":"question","creation_date":1701191757,"post_id":77565325,"comment_id":136743805,"body_markdown":"Are you writing a maven plugin? But the deps of a plugin are automatically downloaded by the core ... so there is no need to do that manually in your plugin? .... There seemed to be some misunderstandings how a plugin works...","link":"https://stackoverflow.com/questions/77565325/how-to-install-remote-dependencies-using-mavensession#comment136743805_77565325","body":"Are you writing a maven plugin? But the deps of a plugin are automatically downloaded by the core ... so there is no need to do that manually in your plugin? .... There seemed to be some misunderstandings how a plugin works..."},{"score":0,"post_type":"question","creation_date":1701194487,"post_id":77565325,"comment_id":136744276,"body_markdown":"@KevinNammour Why not just add them as dependency to your plugin project?","link":"https://stackoverflow.com/questions/77565325/how-to-install-remote-dependencies-using-mavensession#comment136744276_77565325","body":"@KevinNammour Why not just add them as dependency to your plugin project?"},{"score":0,"post_type":"question","creation_date":1701242197,"post_id":77565325,"comment_id":136749857,"body_markdown":"Hi [khmarbaise](https://stackoverflow.com/users/296328/khmarbaise) and [J Fabian Meier](https://stackoverflow.com/users/927493/j-fabian-meier) the thing is that in my plugin, I need to resolve dependencies at runtime while executing the plugin, providing the groupid and artifactid","link":"https://stackoverflow.com/questions/77565325/how-to-install-remote-dependencies-using-mavensession#comment136749857_77565325","body":"Hi <a href=\"https://stackoverflow.com/users/296328/khmarbaise\">khmarbaise</a> and <a href=\"https://stackoverflow.com/users/927493/j-fabian-meier\">J Fabian Meier</a> the thing is that in my plugin, I need to resolve dependencies at runtime while executing the plugin, providing the groupid and artifactid"},{"score":0,"post_type":"question","creation_date":1701282162,"post_id":77565325,"comment_id":136757568,"body_markdown":"Where do these groupIds and artifactIds come from? Does the user of the plugin specify them in the `&lt;configuration&gt;` in the POM?","link":"https://stackoverflow.com/questions/77565325/how-to-install-remote-dependencies-using-mavensession#comment136757568_77565325","body":"Where do these groupIds and artifactIds come from? Does the user of the plugin specify them in the <code>&lt;configuration&gt;</code> in the POM?"}],"comment_count":6,"is_answered":false,"view_count":31,"answer_count":0,"score":0,"last_activity_date":1701187080,"creation_date":1701187080,"question_id":77565325,"body_markdown":"How can I install remote dependencies using MavenSession in a Maven plugin that I am working on?\r\n\r\nI wasn&#39;t able to try because of the poor documentation of maven. I am new to maven so I don&#39;t know how things work here.\r\n\r\nThank you.","link":"https://stackoverflow.com/questions/77565325/how-to-install-remote-dependencies-using-mavensession","title":"How to install remote dependencies using MavenSession?","body":"<p>How can I install remote dependencies using MavenSession in a Maven plugin that I am working on?</p>\n<p>I wasn't able to try because of the poor documentation of maven. I am new to maven so I don't know how things work here.</p>\n<p>Thank you.</p>\n"},{"tags":["java","spring","spring-boot","spring-security","mockito"],"comment_count":0,"is_answered":false,"view_count":33,"answer_count":0,"score":-1,"last_activity_date":1701186990,"creation_date":1701186990,"question_id":77565316,"body_markdown":"I have a Spring application, and a test class. The test class mocks a bunch of different objects, such as HttpSecurity and CsrfConfigurer.\r\nThis was previously done like so:\r\n`\r\n```\r\n@Mock\r\nprivate CsrfConfigurer&lt;HttpSecurity&gt; csrfConfigurer;\r\n````\r\n Upon upgrading to Spring Security 5.8, in preparation for upgrading to spring 3.x, that above line of code broke, and I had to change it to:\r\n\r\n\r\n```\r\nprivate CsrfConfigurer&lt;HttpSecurity&gt; csrfConfigurer = mock(CsrfConfigurer.class);\r\n```\r\n\r\nThis fixed the issue and allowed my test to pass. But after upgrading to spring security 6.0, the same error now occurs. It says: “Mockito cannot mock this class: class org.springframework.security.config.annotation.web.configurers.CsrfConfigurer.\r\nCan not mock final classes with the following settings :\r\n- explicit serialization (e.g. withSettings) serializable))\r\n- extra interfaces (e.g. withSettings().extraInterfaces(...))\r\n\r\n\r\nI’ve tried using powermock which worked, but I don’t think is permitted. So I need another solution. Any help would be greatly appreciated. I just need to be able to mock the CsrfConfigurer class as simply as possible. This is a maven project. ","link":"https://stackoverflow.com/questions/77565316/how-do-i-use-mockito-to-mock-an-object-of-type-csrfconfigurer","title":"How do I use Mockito to mock an object of type CsrfConfigurer?","body":"<p>I have a Spring application, and a test class. The test class mocks a bunch of different objects, such as HttpSecurity and CsrfConfigurer.\nThis was previously done like so:\n`</p>\n<pre><code>@Mock\nprivate CsrfConfigurer&lt;HttpSecurity&gt; csrfConfigurer;\n</code></pre>\n<p>Upon upgrading to Spring Security 5.8, in preparation for upgrading to spring 3.x, that above line of code broke, and I had to change it to:</p>\n<pre><code>private CsrfConfigurer&lt;HttpSecurity&gt; csrfConfigurer = mock(CsrfConfigurer.class);\n</code></pre>\n<p>This fixed the issue and allowed my test to pass. But after upgrading to spring security 6.0, the same error now occurs. It says: “Mockito cannot mock this class: class org.springframework.security.config.annotation.web.configurers.CsrfConfigurer.\nCan not mock final classes with the following settings :</p>\n<ul>\n<li>explicit serialization (e.g. withSettings) serializable))</li>\n<li>extra interfaces (e.g. withSettings().extraInterfaces(...))</li>\n</ul>\n<p>I’ve tried using powermock which worked, but I don’t think is permitted. So I need another solution. Any help would be greatly appreciated. I just need to be able to mock the CsrfConfigurer class as simply as possible. This is a maven project.</p>\n"},{"tags":["java","spring","apache-kafka","spring-cloud-stream","spring-cloud-stream-binder-kafka"],"comments":[{"score":0,"post_type":"question","creation_date":1701125238,"post_id":77560349,"comment_id":136734224,"body_markdown":"It mainly depends on what is &quot;doesn&#39;t work correctly&quot;. I would suggest changing the logger level to wither debug or trace and see if something shows up, also, is this `server: kafka.host:9093` dns actually defined in your environment?","link":"https://stackoverflow.com/questions/77560349/streamlistener-doesnt-work-for-secured-kafka-streaming-topologyexception#comment136734224_77560349","body":"It mainly depends on what is &quot;doesn&#39;t work correctly&quot;. I would suggest changing the logger level to wither debug or trace and see if something shows up, also, is this <code>server: kafka.host:9093</code> dns actually defined in your environment?"},{"score":0,"post_type":"question","creation_date":1701125379,"post_id":77560349,"comment_id":136734248,"body_markdown":"Also another thing to look at is whether your producer is actually adding messages to the topic, I would test in separate, produce a message, check on kafka to see if the message is there and then test the consumer","link":"https://stackoverflow.com/questions/77560349/streamlistener-doesnt-work-for-secured-kafka-streaming-topologyexception#comment136734248_77560349","body":"Also another thing to look at is whether your producer is actually adding messages to the topic, I would test in separate, produce a message, check on kafka to see if the message is there and then test the consumer"},{"score":0,"post_type":"question","creation_date":1701126118,"post_id":77560349,"comment_id":136734329,"body_markdown":"read wither &gt; whether :)","link":"https://stackoverflow.com/questions/77560349/streamlistener-doesnt-work-for-secured-kafka-streaming-topologyexception#comment136734329_77560349","body":"read wither &gt; whether :)"},{"score":0,"post_type":"question","creation_date":1701128268,"post_id":77560349,"comment_id":136734562,"body_markdown":"@JorgeCampos, i&#39;ve just added P.S.2 to provide you more details after experimenting.","link":"https://stackoverflow.com/questions/77560349/streamlistener-doesnt-work-for-secured-kafka-streaming-topologyexception#comment136734562_77560349","body":"@JorgeCampos, i&#39;ve just added P.S.2 to provide you more details after experimenting."},{"score":0,"post_type":"question","creation_date":1701129535,"post_id":77560349,"comment_id":136734686,"body_markdown":"So then it is probably a configuration problem: https://stackoverflow.com/questions/67841137/topology-with-no-input-topics-will-create-no-stream-threads-and-no-global-thread","link":"https://stackoverflow.com/questions/77560349/streamlistener-doesnt-work-for-secured-kafka-streaming-topologyexception#comment136734686_77560349","body":"So then it is probably a configuration problem: <a href=\"https://stackoverflow.com/questions/67841137/topology-with-no-input-topics-will-create-no-stream-threads-and-no-global-thread\" title=\"topology with no input topics will create no stream threads and no global thread\">stackoverflow.com/questions/67841137/&hellip;</a>"},{"score":0,"post_type":"question","creation_date":1701129575,"post_id":77560349,"comment_id":136734688,"body_markdown":"Another reference: https://github.com/spring-projects/spring-kafka/issues/2230","link":"https://stackoverflow.com/questions/77560349/streamlistener-doesnt-work-for-secured-kafka-streaming-topologyexception#comment136734688_77560349","body":"Another reference: <a href=\"https://github.com/spring-projects/spring-kafka/issues/2230\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-kafka/issues/2230</a>"},{"score":0,"post_type":"question","creation_date":1701159396,"post_id":77560349,"comment_id":136737560,"body_markdown":"Another thing to add is that your Spring Cloud version `2020.0.4` isn&#39;t compatible with Spring Boot 3.1 for that you would need Spring Cloud version `2022.0.3` or up. Anything lower isn&#39;t officially supported on Spring Boot 3.x (and might even pull in older dependencies). You also don&#39;t need the `spring-boot-dependencies` in your `dependencyManagement` section, that is already taken care of by the parent you have (unless it was a fix to workaround incompatible versions due to yuour spring cloud version in use).","link":"https://stackoverflow.com/questions/77560349/streamlistener-doesnt-work-for-secured-kafka-streaming-topologyexception#comment136737560_77560349","body":"Another thing to add is that your Spring Cloud version <code>2020.0.4</code> isn&#39;t compatible with Spring Boot 3.1 for that you would need Spring Cloud version <code>2022.0.3</code> or up. Anything lower isn&#39;t officially supported on Spring Boot 3.x (and might even pull in older dependencies). You also don&#39;t need the <code>spring-boot-dependencies</code> in your <code>dependencyManagement</code> section, that is already taken care of by the parent you have (unless it was a fix to workaround incompatible versions due to yuour spring cloud version in use)."},{"score":0,"post_type":"question","creation_date":1701162721,"post_id":77560349,"comment_id":136738120,"body_markdown":"@M.Deinum, Invalid topology doesn&#39;t mean compatibility issue. And for note i verified your idea, issue still the same. P.S. `spring-boot-dependencies` in my `dependencyManagement` is just redundant.","link":"https://stackoverflow.com/questions/77560349/streamlistener-doesnt-work-for-secured-kafka-streaming-topologyexception#comment136738120_77560349","body":"@M.Deinum, Invalid topology doesn&#39;t mean compatibility issue. And for note i verified your idea, issue still the same. P.S. <code>spring-boot-dependencies</code> in my <code>dependencyManagement</code> is just redundant."},{"score":0,"post_type":"question","creation_date":1701163581,"post_id":77560349,"comment_id":136738286,"body_markdown":"Fact is it is incompatible leading to all sorts of issues. Invalid topology might not mean incompatibility it also doesn&#39;t mean that it is. Could be that the configuration mapping is added to newer versions and not in the older ones who knows. Fact is you should use compatible things.","link":"https://stackoverflow.com/questions/77560349/streamlistener-doesnt-work-for-secured-kafka-streaming-topologyexception#comment136738286_77560349","body":"Fact is it is incompatible leading to all sorts of issues. Invalid topology might not mean incompatibility it also doesn&#39;t mean that it is. Could be that the configuration mapping is added to newer versions and not in the older ones who knows. Fact is you should use compatible things."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701186902,"creation_date":1701186902,"answer_id":77565303,"question_id":77560349,"body_markdown":"Indeed `@StreamListener` does not work. It&#39;s been deprecated for over 5 years and has now been completely removed. Please upgrade to functional style.","link":"https://stackoverflow.com/questions/77560349/streamlistener-doesnt-work-for-secured-kafka-streaming-topologyexception/77565303#77565303","title":"@StreamListener doesn&#39;t work for secured Kafka streaming, TopologyException","body":"<p>Indeed <code>@StreamListener</code> does not work. It's been deprecated for over 5 years and has now been completely removed. Please upgrade to functional style.</p>\n"}],"comment_count":9,"is_answered":false,"view_count":35,"answer_count":1,"score":0,"last_activity_date":1701186902,"creation_date":1701124830,"last_edit_date":1701128690,"question_id":77560349,"body_markdown":"My demo application has:\r\n\r\n`application.yml`\r\n```yml\r\n# some values to reduce duplicates in configuration\r\nkafka-conf:\r\n  server: kafka.host:9093\r\n  topic-name: employee.test.incoming.json\r\n  keystore: classpath:kafka_client_keystore.jks\r\n  truststore: classpath:kafka_client_truststore.jks\r\n  group: hr-test\r\n\r\n\r\nspring:\r\n  application:\r\n    name: ${kafka-conf.group}-streaming\r\n  kafka:\r\n    security:\r\n      protocol: SSL\r\n    ssl:\r\n      key-store-location: ${kafka-conf.keystore}\r\n      key-store-password: ${KEY_STORE_PASSWORD}\r\n      key-store-type: JKS\r\n      key-password: ${KEY_PASSWORD}\r\n      trust-store-location: ${kafka-conf.truststore}\r\n      trust-store-password: ${TRUST_STORE_PASSWORD}\r\n      trust-store-type: JKS\r\n    topicName: ${kafka-conf.topic-name}\r\n    consumer:\r\n      bootstrap-servers: ${kafka-conf.server}\r\n      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer\r\n      value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer\r\n      group-id: ${kafka-conf.group}\r\n      auto-offset-reset: earliest\r\n    producer:\r\n      bootstrap-servers: ${kafka-conf.server}\r\n      key-serializer: org.apache.kafka.common.serialization.StringSerializer\r\n      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer\r\n    bootstrap-servers: ${kafka-conf.server}\r\n  cloud:\r\n    stream:\r\n      bindings:\r\n        kafka-input-channel:\r\n          contentType: application/json\r\n          destination: ${kafka-conf.topic-name}\r\n          group: ${kafka-conf.group}-streaming # todo check me\r\n      kafka:\r\n        # todo check this\r\n        bindings:\r\n          kafka-input-channel:\r\n            consumer:\r\n              keySerde: org.apache.kafka.common.serialization.Serdes.StringSerde\r\n              valueSerde: org.springframework.kafka.support.serializer.JsonSerde\r\n        binder:\r\n          # confirmed: https://docs.spring.io/spring-cloud-stream-binder-kafka/docs/3.1.5/reference/html/spring-cloud-stream-binder-kafka.html#_example_security_configuration\r\n          # + : https://kafka.apache.org/090/documentation.html#security_configclients\r\n          configuration:\r\n            [security.protocol]: SSL\r\n            [ssl.truststore.location]: ${kafka-conf.truststore}\r\n            [ssl.truststore.password]: ${TRUST_STORE_PASSWORD}\r\n            [ssl.truststore.type]: JKS\r\n            [ssl.keystore.location]: ${kafka-conf.keystore}\r\n            [ssl.keystore.password]: ${KEY_STORE_PASSWORD}\r\n            [ssl.key.password]: ${KEY_PASSWORD}\r\n            [ssl.keystore.type]: JKS\r\n            default:\r\n              key.serde: org.apache.kafka.common.serialization.Serdes.StringSerde\r\n              value.serde: org.springframework.kafka.support.serializer.JsonSerde\r\n        streams:\r\n          # confirmed: https://docs.spring.io/spring-cloud-stream/docs/current/reference/html/spring-cloud-stream-binder-kafka.html#_kafka_streams_consumer_properties\r\n          default:\r\n            consumer:\r\n              application.id: ${kafka-conf.group}-default\r\n          binder:\r\n            brokers: ${kafka-conf.server}\r\n```\r\n\r\n`KafkaProducer`\r\n```\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.kafka.core.KafkaTemplate;\r\nimport org.springframework.stereotype.Service;\r\n\r\n@Service\r\n@Slf4j(topic = &quot;Producer Logger&quot;)\r\npublic class KafkaProducer {\r\n\r\n    @Value(&quot;${kafka-conf.topic-name}&quot;)\r\n    private String topic;\r\n\r\n    @Autowired\r\n    private KafkaTemplate&lt;String, Message&gt; kafkaTemplate;\r\n\r\n    public void sendMessage(String key, Message message) {\r\n        log.debug(&quot;sending message. where key: &lt;{}&gt;, message: &lt;{}&gt;&quot;, key, message);\r\n        kafkaTemplate.send(topic, key, message);\r\n    }\r\n}\r\n```\r\n\r\n`KafkaConsumer`\r\n```\r\nimport lombok.extern.apachecommons.CommonsLog;\r\nimport org.springframework.kafka.annotation.KafkaListener;\r\nimport org.springframework.kafka.support.KafkaHeaders;\r\nimport org.springframework.messaging.handler.annotation.Header;\r\nimport org.springframework.messaging.handler.annotation.Payload;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.List;\r\nimport java.util.concurrent.CopyOnWriteArrayList;\r\n\r\n@Service\r\n@CommonsLog(topic = &quot;Consumer Logger&quot;)\r\npublic class KafkaConsumer {\r\n\r\n    private final List&lt;Message&gt; messages = new CopyOnWriteArrayList&lt;&gt;();\r\n\r\n    public List&lt;Message&gt; getMessages() {\r\n        return messages;\r\n    }\r\n\r\n    @KafkaListener(topics = &quot;${kafka-conf.topic-name}&quot;)\r\n    public void receive(@Payload Message message,\r\n//                        @Header(KafkaHeaders.RECEIVED_KEY) Integer key,\r\n                        @Header(KafkaHeaders.RECEIVED_PARTITION) int partition,\r\n                        @Header(KafkaHeaders.RECEIVED_TOPIC) String topic,\r\n                        @Header(KafkaHeaders.RECEIVED_TIMESTAMP) long ts) {\r\n        messages.add(message);\r\n        log.info(String.format(&quot;topic: %s&quot;, topic));\r\n        log.info(String.format(&quot;Message saved: %s&quot;, message));\r\n    }\r\n\r\n}\r\n```\r\n\r\n`KafkaStreamingConsumer`\r\n-\r\n```\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.apache.kafka.streams.kstream.KStream;\r\nimport org.springframework.cloud.stream.annotation.EnableBinding;\r\nimport org.springframework.cloud.stream.annotation.Input;\r\nimport org.springframework.cloud.stream.annotation.StreamListener;\r\nimport org.springframework.messaging.SubscribableChannel;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.List;\r\nimport java.util.concurrent.CopyOnWriteArrayList;\r\n\r\n@EnableBinding(KafkaSink.class)\r\n@Service\r\n@Slf4j(topic = &quot;Streaming Consumer Logger&quot;)\r\npublic class KafkaStreamingConsumer {\r\n\r\n    private final List&lt;Message&gt; messages = new CopyOnWriteArrayList&lt;&gt;();\r\n\r\n    public List&lt;Message&gt; getMessages() {\r\n        return messages;\r\n    }\r\n\r\n    @StreamListener(KafkaSink.INPUT)\r\n    public void consume(KStream&lt;String, Message&gt; message) {\r\n        log.info(&quot;income detected.&quot;);\r\n        message.peek((k, v) -&gt; log.info(&quot;Key: {}, value: {}&quot;, k, v));\r\n        log.info(&quot;Streamed message saved: {}&quot;, message);\r\n    }\r\n\r\n    public interface KafkaSink {\r\n\r\n        String INPUT = &quot;kafka-input-channel&quot;;\r\n\r\n        @Input(INPUT)\r\n        SubscribableChannel kafkaInputChannel();\r\n    }\r\n}\r\n```\r\n\r\n`KafkaStreamsConfig` - is an extraconfiguration\r\n-\r\n```\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.apache.kafka.common.serialization.Serdes;\r\nimport org.apache.kafka.streams.StreamsBuilder;\r\nimport org.apache.kafka.streams.kstream.Consumed;\r\nimport org.apache.kafka.streams.kstream.KStream;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.kafka.support.serializer.JsonSerde;\r\n\r\n@Configuration\r\n@Slf4j(topic = &quot;Streaming Config Logger&quot;)\r\npublic class KafkaStreamsConfig {\r\n\r\n    @Value(&quot;${kafka-conf.topic-name}&quot;)\r\n    private String topic;\r\n\r\n    @Bean\r\n    public KStream&lt;String, Message&gt; kStream(StreamsBuilder streamsBuilder) {\r\n        JsonSerde&lt;Message&gt; messageSerde = new JsonSerde&lt;&gt;(Message.class);\r\n\r\n        KStream&lt;String, Message&gt; input = streamsBuilder.stream(topic,\r\n                        Consumed.with(Serdes.String(), messageSerde))\r\n                .peek((k, v) -&gt; log.info(&quot;Received message &lt;{}&gt;, key: &lt;{}&gt;&quot;, k, v));\r\n\r\n        return input;\r\n    }\r\n}\r\n```\r\n\r\n`KafkaPocApplication`\r\n```\r\nthe enter point\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.kafka.annotation.EnableKafkaStreams;\r\n\r\n@SpringBootApplication\r\n@EnableKafkaStreams\r\npublic class KafkaPocApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(KafkaPocApplication.class, args);\r\n    }\r\n\r\n}\r\n```\r\n\r\n`pom.xml`\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.5&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.demo&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;kafka-poc&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;kafka-poc&lt;/name&gt;\r\n\t&lt;description&gt;PoC project that demonstrates how to work with kafka using java app&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2020.0.4&lt;/spring-cloud.version&gt;\r\n\t\t&lt;spring-boot.version&gt;3.1.5&lt;/spring-boot.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-stream&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-stream-binder-kafka-streams&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;kafka-streams&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\r\n\t\t\t&lt;!-- Spring Boot Dependencies --&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;repositories&gt;\r\n\t\t&lt;repository&gt;\r\n\t\t\t&lt;id&gt;spring-releases&lt;/id&gt;\r\n\t\t\t&lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\r\n\t\t&lt;/repository&gt;\r\n\t&lt;/repositories&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;image&gt;\r\n\t\t\t\t\t\t&lt;builder&gt;paketobuildpacks/builder-jammy-base:latest&lt;/builder&gt;\r\n\t\t\t\t\t&lt;/image&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nIssue\r\n---\r\n`KafkaStreamingConsumer` doesn&#39;t work correctly, no logged information about problem, no input stream data. Checked documentation and yml configguration `@StreamListener(KafkaSink.INPUT)` should working in my case but it doesn&#39;t.\r\nTo reduce research cases i&#39;ve created `KafkaStreamsConfig` and it works.\r\nThe main question is - how to make working secured kafka stream for case when topology configured in `yml` without extra java configurations (expect `@StreamListener`)?\r\n\r\nP.S.\r\n-\r\nThe important points (i think important), i highlighted using header font.\r\n\r\n\r\nP.S.2\r\n-\r\nExperimented to start only secured streaming kafka consumer.\r\n\r\n`yml reduced to\r\n```\r\n# some values to reduce duplicates in configuration\r\nkafka-conf:\r\n  server: kafka.host:9093\r\n  topic-name: employee.test.incoming.json\r\n  keystore: classpath:kafka_client_keystore.jks\r\n  truststore: classpath:kafka_client_truststore.jks\r\n  group: hr-test\r\n\r\n\r\nspring:\r\n  application:\r\n    name: ${kafka-conf.group}-streaming\r\n  cloud:\r\n    stream:\r\n      bindings:\r\n        kafka-input-channel:\r\n          destination: ${kafka-conf.topic-name}\r\n          group: ${kafka-conf.group}-streaming # todo check me\r\n      kafka:\r\n        # todo check this\r\n        bindings:\r\n          kafka-input-channel:\r\n            consumer:\r\n              keySerde: org.apache.kafka.common.serialization.Serdes.StringSerde\r\n              valueSerde: org.springframework.kafka.support.serializer.JsonSerde\r\n        binder:\r\n          # confirmed: https://docs.spring.io/spring-cloud-stream-binder-kafka/docs/3.1.5/reference/html/spring-cloud-stream-binder-kafka.html#_example_security_configuration\r\n          # + : https://kafka.apache.org/090/documentation.html#security_configclients\r\n          configuration:\r\n            [security.protocol]: SSL\r\n            [ssl.truststore.location]: ${kafka-conf.truststore}\r\n            [ssl.truststore.password]: ${TRUST_STORE_PASSWORD}\r\n            [ssl.truststore.type]: JKS\r\n            [ssl.keystore.location]: ${kafka-conf.keystore}\r\n            [ssl.keystore.password]: ${KEY_STORE_PASSWORD}\r\n            [ssl.key.password]: ${KEY_PASSWORD}\r\n            [ssl.keystore.type]: JKS\r\n            [ssl.enabled.protocols]: TLSv1.2\r\n            default:\r\n              key.serde: org.apache.kafka.common.serialization.Serdes.StringSerde\r\n              value.serde: org.springframework.kafka.support.serializer.JsonSerde\r\n        streams:\r\n          # confirmed: https://docs.spring.io/spring-cloud-stream/docs/current/reference/html/spring-cloud-stream-binder-kafka.html#_kafka_streams_consumer_properties\r\n          default:\r\n            consumer:\r\n              application.id: ${kafka-conf.group}-default\r\n          binder:\r\n            brokers: ${kafka-conf.server}\r\n```\r\n\r\n`KafkaStreamingConsumer`\r\n```\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.apache.kafka.streams.kstream.KStream;\r\nimport org.springframework.cloud.stream.annotation.EnableBinding;\r\nimport org.springframework.cloud.stream.annotation.Input;\r\nimport org.springframework.cloud.stream.annotation.StreamListener;\r\nimport org.springframework.messaging.SubscribableChannel;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.util.List;\r\nimport java.util.concurrent.CopyOnWriteArrayList;\r\n\r\n@EnableBinding(KafkaStreamingConsumer.KafkaSink.class)\r\n@Service\r\n@Slf4j(topic = &quot;Streaming Consumer Logger&quot;)\r\npublic class KafkaStreamingConsumer {\r\n\r\n    private final List&lt;Message&gt; messages = new CopyOnWriteArrayList&lt;&gt;();\r\n\r\n    public List&lt;Message&gt; getMessages() {\r\n        return messages;\r\n    }\r\n\r\n    @StreamListener(KafkaSink.INPUT)\r\n    public void consume(KStream&lt;String, Message&gt; message) {\r\n//    public void consume(KStream&lt;String, String&gt; message) {\r\n        log.info(&quot;income detected.&quot;);\r\n        message.peek((k, v) -&gt; log.info(&quot;Key: {}, value: {}&quot;, k, v));\r\n        log.info(&quot;Streamed message saved: {}&quot;, message);\r\n    }\r\n\r\n    public interface KafkaSink {\r\n\r\n        String INPUT = &quot;kafka-input-channel&quot;;\r\n\r\n        @Input(INPUT)\r\n        SubscribableChannel kafkaInputChannel();\r\n    }\r\n}\r\n```\r\n\r\nand failed with `TopologyException` (similar configuration worked for me if kafka streams are not secured):\r\n```\r\n01:34:14.776 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - \r\n\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n01:34:14.806 [main] ERROR o.s.boot.SpringApplication - Application run failed\r\norg.springframework.context.ApplicationContextException: Failed to start bean &#39;defaultKafkaStreamsBuilder&#39;\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:182)\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:357)\r\n\tat java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:156)\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:124)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:966)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:619)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:316)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\r\n\tat com.bayer.hrkafkapoc.KafkaPocApplication.main(KafkaPocApplication.java:12)\r\nCaused by: org.springframework.kafka.KafkaException: Could not start stream: \r\n\tat org.springframework.kafka.config.StreamsBuilderFactoryBean.start(StreamsBuilderFactoryBean.java:354)\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:179)\r\n\t... 13 common frames omitted\r\nCaused by: org.apache.kafka.streams.errors.TopologyException: Invalid topology: Topology has no stream threads and no global threads, must subscribe to at least one source topic or global table.\r\n\tat org.apache.kafka.streams.processor.internals.TopologyMetadata.getNumStreamThreads(TopologyMetadata.java:377)\r\n\tat org.apache.kafka.streams.KafkaStreams.&lt;init&gt;(KafkaStreams.java:930)\r\n\tat org.apache.kafka.streams.KafkaStreams.&lt;init&gt;(KafkaStreams.java:856)\r\n\tat org.apache.kafka.streams.KafkaStreams.&lt;init&gt;(KafkaStreams.java:762)\r\n\tat org.springframework.kafka.config.StreamsBuilderFactoryBean.start(StreamsBuilderFactoryBean.java:335)\r\n\t... 14 common frames omitted\r\n```","link":"https://stackoverflow.com/questions/77560349/streamlistener-doesnt-work-for-secured-kafka-streaming-topologyexception","title":"@StreamListener doesn&#39;t work for secured Kafka streaming, TopologyException","body":"<p>My demo application has:</p>\n<p><code>application.yml</code></p>\n<pre class=\"lang-yaml prettyprint-override\"><code># some values to reduce duplicates in configuration\nkafka-conf:\n  server: kafka.host:9093\n  topic-name: employee.test.incoming.json\n  keystore: classpath:kafka_client_keystore.jks\n  truststore: classpath:kafka_client_truststore.jks\n  group: hr-test\n\n\nspring:\n  application:\n    name: ${kafka-conf.group}-streaming\n  kafka:\n    security:\n      protocol: SSL\n    ssl:\n      key-store-location: ${kafka-conf.keystore}\n      key-store-password: ${KEY_STORE_PASSWORD}\n      key-store-type: JKS\n      key-password: ${KEY_PASSWORD}\n      trust-store-location: ${kafka-conf.truststore}\n      trust-store-password: ${TRUST_STORE_PASSWORD}\n      trust-store-type: JKS\n    topicName: ${kafka-conf.topic-name}\n    consumer:\n      bootstrap-servers: ${kafka-conf.server}\n      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer\n      value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer\n      group-id: ${kafka-conf.group}\n      auto-offset-reset: earliest\n    producer:\n      bootstrap-servers: ${kafka-conf.server}\n      key-serializer: org.apache.kafka.common.serialization.StringSerializer\n      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer\n    bootstrap-servers: ${kafka-conf.server}\n  cloud:\n    stream:\n      bindings:\n        kafka-input-channel:\n          contentType: application/json\n          destination: ${kafka-conf.topic-name}\n          group: ${kafka-conf.group}-streaming # todo check me\n      kafka:\n        # todo check this\n        bindings:\n          kafka-input-channel:\n            consumer:\n              keySerde: org.apache.kafka.common.serialization.Serdes.StringSerde\n              valueSerde: org.springframework.kafka.support.serializer.JsonSerde\n        binder:\n          # confirmed: https://docs.spring.io/spring-cloud-stream-binder-kafka/docs/3.1.5/reference/html/spring-cloud-stream-binder-kafka.html#_example_security_configuration\n          # + : https://kafka.apache.org/090/documentation.html#security_configclients\n          configuration:\n            [security.protocol]: SSL\n            [ssl.truststore.location]: ${kafka-conf.truststore}\n            [ssl.truststore.password]: ${TRUST_STORE_PASSWORD}\n            [ssl.truststore.type]: JKS\n            [ssl.keystore.location]: ${kafka-conf.keystore}\n            [ssl.keystore.password]: ${KEY_STORE_PASSWORD}\n            [ssl.key.password]: ${KEY_PASSWORD}\n            [ssl.keystore.type]: JKS\n            default:\n              key.serde: org.apache.kafka.common.serialization.Serdes.StringSerde\n              value.serde: org.springframework.kafka.support.serializer.JsonSerde\n        streams:\n          # confirmed: https://docs.spring.io/spring-cloud-stream/docs/current/reference/html/spring-cloud-stream-binder-kafka.html#_kafka_streams_consumer_properties\n          default:\n            consumer:\n              application.id: ${kafka-conf.group}-default\n          binder:\n            brokers: ${kafka-conf.server}\n</code></pre>\n<p><code>KafkaProducer</code></p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.kafka.core.KafkaTemplate;\nimport org.springframework.stereotype.Service;\n\n@Service\n@Slf4j(topic = &quot;Producer Logger&quot;)\npublic class KafkaProducer {\n\n    @Value(&quot;${kafka-conf.topic-name}&quot;)\n    private String topic;\n\n    @Autowired\n    private KafkaTemplate&lt;String, Message&gt; kafkaTemplate;\n\n    public void sendMessage(String key, Message message) {\n        log.debug(&quot;sending message. where key: &lt;{}&gt;, message: &lt;{}&gt;&quot;, key, message);\n        kafkaTemplate.send(topic, key, message);\n    }\n}\n</code></pre>\n<p><code>KafkaConsumer</code></p>\n<pre><code>import lombok.extern.apachecommons.CommonsLog;\nimport org.springframework.kafka.annotation.KafkaListener;\nimport org.springframework.kafka.support.KafkaHeaders;\nimport org.springframework.messaging.handler.annotation.Header;\nimport org.springframework.messaging.handler.annotation.Payload;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\nimport java.util.concurrent.CopyOnWriteArrayList;\n\n@Service\n@CommonsLog(topic = &quot;Consumer Logger&quot;)\npublic class KafkaConsumer {\n\n    private final List&lt;Message&gt; messages = new CopyOnWriteArrayList&lt;&gt;();\n\n    public List&lt;Message&gt; getMessages() {\n        return messages;\n    }\n\n    @KafkaListener(topics = &quot;${kafka-conf.topic-name}&quot;)\n    public void receive(@Payload Message message,\n//                        @Header(KafkaHeaders.RECEIVED_KEY) Integer key,\n                        @Header(KafkaHeaders.RECEIVED_PARTITION) int partition,\n                        @Header(KafkaHeaders.RECEIVED_TOPIC) String topic,\n                        @Header(KafkaHeaders.RECEIVED_TIMESTAMP) long ts) {\n        messages.add(message);\n        log.info(String.format(&quot;topic: %s&quot;, topic));\n        log.info(String.format(&quot;Message saved: %s&quot;, message));\n    }\n\n}\n</code></pre>\n<h2><code>KafkaStreamingConsumer</code></h2>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.apache.kafka.streams.kstream.KStream;\nimport org.springframework.cloud.stream.annotation.EnableBinding;\nimport org.springframework.cloud.stream.annotation.Input;\nimport org.springframework.cloud.stream.annotation.StreamListener;\nimport org.springframework.messaging.SubscribableChannel;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\nimport java.util.concurrent.CopyOnWriteArrayList;\n\n@EnableBinding(KafkaSink.class)\n@Service\n@Slf4j(topic = &quot;Streaming Consumer Logger&quot;)\npublic class KafkaStreamingConsumer {\n\n    private final List&lt;Message&gt; messages = new CopyOnWriteArrayList&lt;&gt;();\n\n    public List&lt;Message&gt; getMessages() {\n        return messages;\n    }\n\n    @StreamListener(KafkaSink.INPUT)\n    public void consume(KStream&lt;String, Message&gt; message) {\n        log.info(&quot;income detected.&quot;);\n        message.peek((k, v) -&gt; log.info(&quot;Key: {}, value: {}&quot;, k, v));\n        log.info(&quot;Streamed message saved: {}&quot;, message);\n    }\n\n    public interface KafkaSink {\n\n        String INPUT = &quot;kafka-input-channel&quot;;\n\n        @Input(INPUT)\n        SubscribableChannel kafkaInputChannel();\n    }\n}\n</code></pre>\n<h2><code>KafkaStreamsConfig</code> - is an extraconfiguration</h2>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.apache.kafka.common.serialization.Serdes;\nimport org.apache.kafka.streams.StreamsBuilder;\nimport org.apache.kafka.streams.kstream.Consumed;\nimport org.apache.kafka.streams.kstream.KStream;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.kafka.support.serializer.JsonSerde;\n\n@Configuration\n@Slf4j(topic = &quot;Streaming Config Logger&quot;)\npublic class KafkaStreamsConfig {\n\n    @Value(&quot;${kafka-conf.topic-name}&quot;)\n    private String topic;\n\n    @Bean\n    public KStream&lt;String, Message&gt; kStream(StreamsBuilder streamsBuilder) {\n        JsonSerde&lt;Message&gt; messageSerde = new JsonSerde&lt;&gt;(Message.class);\n\n        KStream&lt;String, Message&gt; input = streamsBuilder.stream(topic,\n                        Consumed.with(Serdes.String(), messageSerde))\n                .peek((k, v) -&gt; log.info(&quot;Received message &lt;{}&gt;, key: &lt;{}&gt;&quot;, k, v));\n\n        return input;\n    }\n}\n</code></pre>\n<p><code>KafkaPocApplication</code></p>\n<pre><code>the enter point\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.kafka.annotation.EnableKafkaStreams;\n\n@SpringBootApplication\n@EnableKafkaStreams\npublic class KafkaPocApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(KafkaPocApplication.class, args);\n    }\n\n}\n</code></pre>\n<p><code>pom.xml</code></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.5&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.demo&lt;/groupId&gt;\n    &lt;artifactId&gt;kafka-poc&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;kafka-poc&lt;/name&gt;\n    &lt;description&gt;PoC project that demonstrates how to work with kafka using java app&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-cloud.version&gt;2020.0.4&lt;/spring-cloud.version&gt;\n        &lt;spring-boot.version&gt;3.1.5&lt;/spring-boot.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-stream&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-stream-binder-kafka-streams&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;kafka-streams&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n\n            &lt;!-- Spring Boot Dependencies --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-releases&lt;/id&gt;\n            &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;image&gt;\n                        &lt;builder&gt;paketobuildpacks/builder-jammy-base:latest&lt;/builder&gt;\n                    &lt;/image&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<h2>Issue</h2>\n<p><code>KafkaStreamingConsumer</code> doesn't work correctly, no logged information about problem, no input stream data. Checked documentation and yml configguration <code>@StreamListener(KafkaSink.INPUT)</code> should working in my case but it doesn't.\nTo reduce research cases i've created <code>KafkaStreamsConfig</code> and it works.\nThe main question is - how to make working secured kafka stream for case when topology configured in <code>yml</code> without extra java configurations (expect <code>@StreamListener</code>)?</p>\n<h2>P.S.</h2>\n<p>The important points (i think important), i highlighted using header font.</p>\n<h2>P.S.2</h2>\n<p>Experimented to start only secured streaming kafka consumer.</p>\n<p>`yml reduced to</p>\n<pre><code># some values to reduce duplicates in configuration\nkafka-conf:\n  server: kafka.host:9093\n  topic-name: employee.test.incoming.json\n  keystore: classpath:kafka_client_keystore.jks\n  truststore: classpath:kafka_client_truststore.jks\n  group: hr-test\n\n\nspring:\n  application:\n    name: ${kafka-conf.group}-streaming\n  cloud:\n    stream:\n      bindings:\n        kafka-input-channel:\n          destination: ${kafka-conf.topic-name}\n          group: ${kafka-conf.group}-streaming # todo check me\n      kafka:\n        # todo check this\n        bindings:\n          kafka-input-channel:\n            consumer:\n              keySerde: org.apache.kafka.common.serialization.Serdes.StringSerde\n              valueSerde: org.springframework.kafka.support.serializer.JsonSerde\n        binder:\n          # confirmed: https://docs.spring.io/spring-cloud-stream-binder-kafka/docs/3.1.5/reference/html/spring-cloud-stream-binder-kafka.html#_example_security_configuration\n          # + : https://kafka.apache.org/090/documentation.html#security_configclients\n          configuration:\n            [security.protocol]: SSL\n            [ssl.truststore.location]: ${kafka-conf.truststore}\n            [ssl.truststore.password]: ${TRUST_STORE_PASSWORD}\n            [ssl.truststore.type]: JKS\n            [ssl.keystore.location]: ${kafka-conf.keystore}\n            [ssl.keystore.password]: ${KEY_STORE_PASSWORD}\n            [ssl.key.password]: ${KEY_PASSWORD}\n            [ssl.keystore.type]: JKS\n            [ssl.enabled.protocols]: TLSv1.2\n            default:\n              key.serde: org.apache.kafka.common.serialization.Serdes.StringSerde\n              value.serde: org.springframework.kafka.support.serializer.JsonSerde\n        streams:\n          # confirmed: https://docs.spring.io/spring-cloud-stream/docs/current/reference/html/spring-cloud-stream-binder-kafka.html#_kafka_streams_consumer_properties\n          default:\n            consumer:\n              application.id: ${kafka-conf.group}-default\n          binder:\n            brokers: ${kafka-conf.server}\n</code></pre>\n<p><code>KafkaStreamingConsumer</code></p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.apache.kafka.streams.kstream.KStream;\nimport org.springframework.cloud.stream.annotation.EnableBinding;\nimport org.springframework.cloud.stream.annotation.Input;\nimport org.springframework.cloud.stream.annotation.StreamListener;\nimport org.springframework.messaging.SubscribableChannel;\nimport org.springframework.stereotype.Service;\n\nimport java.util.List;\nimport java.util.concurrent.CopyOnWriteArrayList;\n\n@EnableBinding(KafkaStreamingConsumer.KafkaSink.class)\n@Service\n@Slf4j(topic = &quot;Streaming Consumer Logger&quot;)\npublic class KafkaStreamingConsumer {\n\n    private final List&lt;Message&gt; messages = new CopyOnWriteArrayList&lt;&gt;();\n\n    public List&lt;Message&gt; getMessages() {\n        return messages;\n    }\n\n    @StreamListener(KafkaSink.INPUT)\n    public void consume(KStream&lt;String, Message&gt; message) {\n//    public void consume(KStream&lt;String, String&gt; message) {\n        log.info(&quot;income detected.&quot;);\n        message.peek((k, v) -&gt; log.info(&quot;Key: {}, value: {}&quot;, k, v));\n        log.info(&quot;Streamed message saved: {}&quot;, message);\n    }\n\n    public interface KafkaSink {\n\n        String INPUT = &quot;kafka-input-channel&quot;;\n\n        @Input(INPUT)\n        SubscribableChannel kafkaInputChannel();\n    }\n}\n</code></pre>\n<p>and failed with <code>TopologyException</code> (similar configuration worked for me if kafka streams are not secured):</p>\n<pre><code>01:34:14.776 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - \n\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n01:34:14.806 [main] ERROR o.s.boot.SpringApplication - Application run failed\norg.springframework.context.ApplicationContextException: Failed to start bean 'defaultKafkaStreamsBuilder'\n    at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:182)\n    at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:357)\n    at java.base/java.lang.Iterable.forEach(Iterable.java:75)\n    at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:156)\n    at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:124)\n    at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:966)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:619)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:738)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:440)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\n    at com.bayer.hrkafkapoc.KafkaPocApplication.main(KafkaPocApplication.java:12)\nCaused by: org.springframework.kafka.KafkaException: Could not start stream: \n    at org.springframework.kafka.config.StreamsBuilderFactoryBean.start(StreamsBuilderFactoryBean.java:354)\n    at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:179)\n    ... 13 common frames omitted\nCaused by: org.apache.kafka.streams.errors.TopologyException: Invalid topology: Topology has no stream threads and no global threads, must subscribe to at least one source topic or global table.\n    at org.apache.kafka.streams.processor.internals.TopologyMetadata.getNumStreamThreads(TopologyMetadata.java:377)\n    at org.apache.kafka.streams.KafkaStreams.&lt;init&gt;(KafkaStreams.java:930)\n    at org.apache.kafka.streams.KafkaStreams.&lt;init&gt;(KafkaStreams.java:856)\n    at org.apache.kafka.streams.KafkaStreams.&lt;init&gt;(KafkaStreams.java:762)\n    at org.springframework.kafka.config.StreamsBuilderFactoryBean.start(StreamsBuilderFactoryBean.java:335)\n    ... 14 common frames omitted\n</code></pre>\n"},{"tags":["java","java-8","memory-leaks","hbase","netty"],"comments":[{"score":1,"post_type":"question","creation_date":1700582949,"post_id":77523272,"comment_id":136671132,"body_markdown":"Format properly the error log. It is very difficult to read a mulitline log in a single line. Preserve the original formatting for readability","link":"https://stackoverflow.com/questions/77523272/error-util-resourceleakdetector-leak-bytebuf-release-connection-gettable-p#comment136671132_77523272","body":"Format properly the error log. It is very difficult to read a mulitline log in a single line. Preserve the original formatting for readability"},{"score":0,"post_type":"question","creation_date":1701190485,"post_id":77523272,"comment_id":136743492,"body_markdown":"Please use [code format](https://stackoverflow.com/editing-help#code) for code, errors and logs. I didn&#39;t had the link at hand in my previous comment.","link":"https://stackoverflow.com/questions/77523272/error-util-resourceleakdetector-leak-bytebuf-release-connection-gettable-p#comment136743492_77523272","body":"Please use <a href=\"https://stackoverflow.com/editing-help#code\">code format</a> for code, errors and logs. I didn&#39;t had the link at hand in my previous comment."}],"comment_count":2,"is_answered":false,"view_count":27,"answer_count":0,"score":0,"last_activity_date":1701186268,"creation_date":1700573883,"last_edit_date":1701186268,"question_id":77523272,"body_markdown":"I am trying to do a lot of PUTs in Hbase, however, after some time of operation, a memory leak occurs due to the following error:\r\n\r\nERROR util.ResourceLeakDetector: LEAK: ByteBuf.release() was not called before it&#39;s garbage-collected. See http://netty.io/wiki/reference-counted-objects.html for more information. Recent access records: #1: org.apache.hbase.thirdparty.io.netty.buffer.AdvancedLeakAwareByteBuf.writeBytes(AdvancedLeakAwareByteBuf.java:616) org.apache.hbase.thirdparty.io.netty.buffer.ByteBufOutputStream.write(ByteBufOutputStream.java:68) org.apache.hadoop.hbase.KeyValue.write(KeyValue.java:2313) org.apache.hadoop.hbase.KeyValueUtil.oswrite(KeyValueUtil.java:805) org.apache.hadoop.hbase.codec.KeyValueCodec$KeyValueEncoder.write(KeyValueCodec.java:63) org.apache.hadoop.hbase.ipc.CellBlockBuilder.encodeCellsTo(CellBlockBuilder.java:192) org.apache.hadoop.hbase.ipc.CellBlockBuilder.buildCellBlock(CellBlockBuilder.java:171) org.apache.hadoop.hbase.ipc.CellBlockBuilder.buildCellBlock(CellBlockBuilder.java:155) org.apache.hadoop.hbase.ipc.NettyRpcDuplexHandler.writeRequest(NettyRpcDuplexHandler.java:81) org.apache.hadoop.hbase.ipc.NettyRpcDuplexHandler.write(NettyRpcDuplexHandler.java:119) org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:706) org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:753) org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:778) org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.writeAndFlush(AbstractChannelHandlerContext.java:747) org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.writeAndFlush(AbstractChannelHandlerContext.java:801) org.apache.hbase.thirdparty.io.netty.channel.DefaultChannelPipeline.writeAndFlush(DefaultChannelPipeline.java:1036) org.apache.hbase.thirdparty.io.netty.channel.AbstractChannel.writeAndFlush(AbstractChannel.java:305) org.apache.hadoop.hbase.ipc.NettyRpcConnection.write(NettyRpcConnection.java:284) org.apache.hadoop.hbase.ipc.NettyRpcConnection.access$1100(NettyRpcConnection.java:71) org.apache.hadoop.hbase.ipc.NettyRpcConnection$6$1.run(NettyRpcConnection.java:344) org.apache.hbase.thirdparty.io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) org.apache.hbase.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404) org.apache.hbase.thirdparty.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:495) org.apache.hbase.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:905) org.apache.hbase.thirdparty.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) java.lang.Thread.run(Thread.java:750)\r\n\r\nI am using the `hbase-client` version - `2.2.3`\r\n\r\nI tried to change the parameters recommended in the HBASE-19320 release, but it did not give results.","link":"https://stackoverflow.com/questions/77523272/error-util-resourceleakdetector-leak-bytebuf-release-connection-gettable-p","title":"ERROR util.ResourceLeakDetector: LEAK: ByteBuf.release() Connection.getTable().put(List)","body":"<p>I am trying to do a lot of PUTs in Hbase, however, after some time of operation, a memory leak occurs due to the following error:</p>\n<p>ERROR util.ResourceLeakDetector: LEAK: ByteBuf.release() was not called before it's garbage-collected. See <a href=\"http://netty.io/wiki/reference-counted-objects.html\" rel=\"nofollow noreferrer\">http://netty.io/wiki/reference-counted-objects.html</a> for more information. Recent access records: #1: org.apache.hbase.thirdparty.io.netty.buffer.AdvancedLeakAwareByteBuf.writeBytes(AdvancedLeakAwareByteBuf.java:616) org.apache.hbase.thirdparty.io.netty.buffer.ByteBufOutputStream.write(ByteBufOutputStream.java:68) org.apache.hadoop.hbase.KeyValue.write(KeyValue.java:2313) org.apache.hadoop.hbase.KeyValueUtil.oswrite(KeyValueUtil.java:805) org.apache.hadoop.hbase.codec.KeyValueCodec$KeyValueEncoder.write(KeyValueCodec.java:63) org.apache.hadoop.hbase.ipc.CellBlockBuilder.encodeCellsTo(CellBlockBuilder.java:192) org.apache.hadoop.hbase.ipc.CellBlockBuilder.buildCellBlock(CellBlockBuilder.java:171) org.apache.hadoop.hbase.ipc.CellBlockBuilder.buildCellBlock(CellBlockBuilder.java:155) org.apache.hadoop.hbase.ipc.NettyRpcDuplexHandler.writeRequest(NettyRpcDuplexHandler.java:81) org.apache.hadoop.hbase.ipc.NettyRpcDuplexHandler.write(NettyRpcDuplexHandler.java:119) org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(AbstractChannelHandlerContext.java:706) org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.invokeWriteAndFlush(AbstractChannelHandlerContext.java:753) org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.write(AbstractChannelHandlerContext.java:778) org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.writeAndFlush(AbstractChannelHandlerContext.java:747) org.apache.hbase.thirdparty.io.netty.channel.AbstractChannelHandlerContext.writeAndFlush(AbstractChannelHandlerContext.java:801) org.apache.hbase.thirdparty.io.netty.channel.DefaultChannelPipeline.writeAndFlush(DefaultChannelPipeline.java:1036) org.apache.hbase.thirdparty.io.netty.channel.AbstractChannel.writeAndFlush(AbstractChannel.java:305) org.apache.hadoop.hbase.ipc.NettyRpcConnection.write(NettyRpcConnection.java:284) org.apache.hadoop.hbase.ipc.NettyRpcConnection.access$1100(NettyRpcConnection.java:71) org.apache.hadoop.hbase.ipc.NettyRpcConnection$6$1.run(NettyRpcConnection.java:344) org.apache.hbase.thirdparty.io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:163) org.apache.hbase.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:404) org.apache.hbase.thirdparty.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:495) org.apache.hbase.thirdparty.io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:905) org.apache.hbase.thirdparty.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) java.lang.Thread.run(Thread.java:750)</p>\n<p>I am using the <code>hbase-client</code> version - <code>2.2.3</code></p>\n<p>I tried to change the parameters recommended in the HBASE-19320 release, but it did not give results.</p>\n"},{"tags":["java","spring","spring-boot","form-data"],"comments":[{"score":1,"post_type":"question","creation_date":1701196819,"post_id":77565065,"comment_id":136744632,"body_markdown":"Start reading here https://spring.io/guides/gs/uploading-files/ for handling file uploads in the &quot;springboot way&quot;. Anyway, at this point that seems a micro optimization with req/resp below 1s. When this is slow, probably there is a network &quot;problem&quot; elsewhere.","link":"https://stackoverflow.com/questions/77565065/is-there-a-way-to-receive-form-data-with-files-using-java-effectively#comment136744632_77565065","body":"Start reading here <a href=\"https://spring.io/guides/gs/uploading-files/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/uploading-files</a> for handling file uploads in the &quot;springboot way&quot;. Anyway, at this point that seems a micro optimization with req/resp below 1s. When this is slow, probably there is a network &quot;problem&quot; elsewhere."},{"score":0,"post_type":"question","creation_date":1701251409,"post_id":77565065,"comment_id":136751420,"body_markdown":"I belive it is not a network problem just because in the first case it is just uploading to localhost. Second case I tried to upload in local network (with pretty good speed) and uploading binary much faster than form data","link":"https://stackoverflow.com/questions/77565065/is-there-a-way-to-receive-form-data-with-files-using-java-effectively#comment136751420_77565065","body":"I belive it is not a network problem just because in the first case it is just uploading to localhost. Second case I tried to upload in local network (with pretty good speed) and uploading binary much faster than form data"},{"score":0,"post_type":"question","creation_date":1701283201,"post_id":77565065,"comment_id":136757713,"body_markdown":"I assure you, there are millions of springboot apps out there with no concerns about file upload.  A difference of 90ms can be anything on your local machine. You should clarify what is your problem.","link":"https://stackoverflow.com/questions/77565065/is-there-a-way-to-receive-form-data-with-files-using-java-effectively#comment136757713_77565065","body":"I assure you, there are millions of springboot apps out there with no concerns about file upload.  A difference of 90ms can be anything on your local machine. You should clarify what is your problem."}],"comment_count":3,"is_answered":false,"view_count":47,"answer_count":0,"score":0,"last_activity_date":1701185909,"creation_date":1701184924,"last_edit_date":1701185909,"question_id":77565065,"body_markdown":"&lt;p&gt;I&#39;m trying to find an effective way to receive several files in Java. I tried to use form-data and read several files but looks like Spring doing some manipulation with input data and wasting a lot of time. It&#39;s not so bad when I&#39;m trying it locally but when I  tried to upload a file via network things much worse. \r\n\r\nHere are 4 endpoints that I used in this test: \r\n\r\n    @SneakyThrows\r\n    @PostMapping(value = &quot;upload/formData/v1&quot;, consumes = &quot;multipart/form-data&quot;)\r\n    public void uploadFileUsingFormData(@RequestParam Map&lt;String, MultipartFile&gt; files) {\r\n        log.info(&quot;Received request, started downloading&quot;);\r\n        for (Map.Entry&lt;String, MultipartFile&gt; entry : files.entrySet()) {\r\n            var watch = new StopWatch();\r\n            watch.start();\r\n            var bytes = entry.getValue().getBytes();\r\n            watch.stop();\r\n            log.info(&quot;Got file with key: {}, size: {}, time spent: {} ms&quot;, entry.getKey(), bytes.length, watch.getTotalTimeMillis());\r\n        }\r\n        log.info(&quot;----------------------------------------&quot;);\r\n    }\r\n\r\n    @SneakyThrows\r\n    @PostMapping(value = &quot;upload/formData/v2&quot;, consumes = &quot;multipart/form-data&quot;)\r\n    public void uploadFileUsingFormDatav2(HttpServletRequest request) {\r\n        log.info(&quot;Received request, started downloading&quot;);\r\n        Collection&lt;Part&gt; parts = request.getParts();\r\n        for (Part part : parts) {\r\n            var watch = new StopWatch();\r\n            watch.start();\r\n            var bytes = part.getInputStream().readAllBytes();\r\n            watch.stop();\r\n            log.info(&quot;Got file with key: {}, size: {}, time spent: {} ms&quot;, part.getName(), bytes.length, watch.getTotalTimeMillis());\r\n        }\r\n        log.info(&quot;----------------------------------------&quot;);\r\n    }\r\n\r\n    @SneakyThrows\r\n    @PostMapping(value = &quot;upload/formData/v3&quot;, consumes = &quot;multipart/form-data&quot;)\r\n    public void uploadFileUsingFormDatav3(MultipartHttpServletRequest request) {\r\n        log.info(&quot;Received request, started downloading&quot;);\r\n        Collection&lt;Part&gt; parts = request.getParts();\r\n        for (Part part : parts) {\r\n            var watch = new StopWatch();\r\n            watch.start();\r\n            var bytes = part.getInputStream().readAllBytes();\r\n            watch.stop();\r\n            log.info(&quot;Got file with key: {}, size: {}, time spent: {} ms&quot;, part.getName(), bytes.length, watch.getTotalTimeMillis());\r\n        }\r\n        log.info(&quot;----------------------------------------&quot;);\r\n    }\r\n\r\n\r\n    @PostMapping (value = &quot;upload/binary&quot;)\r\n    public void acceptData(InputStream dataStream) throws Exception {\r\n        log.info(&quot;Received request, started downloading&quot;);\r\n\r\n        var watch = new StopWatch();\r\n        watch.start();\r\n        var bytes = dataStream.readAllBytes();\r\n        watch.stop();\r\n        log.info(&quot;Got file, size: {}, time spent: {} ms&quot;, bytes.length, watch.getTotalTimeMillis());\r\n\r\n        log.info(&quot;----------------------------------------&quot;);\r\n    }\r\nHere I&#39;m trying to get files in 4 ways (3 similar, it looks like they are the same) and just a binary. Unfortunately for me, binary upload works almost 2 times faster for the same file.\r\n\r\nHere is perf test for binary: [![enter image description here][1]][1]\r\n\r\n\r\nand for form data: [![enter image description here][2]][2]\r\n\r\nNote: v2 and v3 for multipart work in the same way with similar time. Java 17, gradle: 8.4, Spring 3.2.0. Please advise.\r\n\r\n  [1]: https://i.stack.imgur.com/zYhg6.png\r\n  [2]: https://i.stack.imgur.com/xAbSi.png","link":"https://stackoverflow.com/questions/77565065/is-there-a-way-to-receive-form-data-with-files-using-java-effectively","title":"Is there a way to receive form-data with files using java effectively?","body":"<p>I'm trying to find an effective way to receive several files in Java. I tried to use form-data and read several files but looks like Spring doing some manipulation with input data and wasting a lot of time. It's not so bad when I'm trying it locally but when I  tried to upload a file via network things much worse. \n<p>Here are 4 endpoints that I used in this test:</p>\n<pre><code>@SneakyThrows\n@PostMapping(value = &quot;upload/formData/v1&quot;, consumes = &quot;multipart/form-data&quot;)\npublic void uploadFileUsingFormData(@RequestParam Map&lt;String, MultipartFile&gt; files) {\n    log.info(&quot;Received request, started downloading&quot;);\n    for (Map.Entry&lt;String, MultipartFile&gt; entry : files.entrySet()) {\n        var watch = new StopWatch();\n        watch.start();\n        var bytes = entry.getValue().getBytes();\n        watch.stop();\n        log.info(&quot;Got file with key: {}, size: {}, time spent: {} ms&quot;, entry.getKey(), bytes.length, watch.getTotalTimeMillis());\n    }\n    log.info(&quot;----------------------------------------&quot;);\n}\n\n@SneakyThrows\n@PostMapping(value = &quot;upload/formData/v2&quot;, consumes = &quot;multipart/form-data&quot;)\npublic void uploadFileUsingFormDatav2(HttpServletRequest request) {\n    log.info(&quot;Received request, started downloading&quot;);\n    Collection&lt;Part&gt; parts = request.getParts();\n    for (Part part : parts) {\n        var watch = new StopWatch();\n        watch.start();\n        var bytes = part.getInputStream().readAllBytes();\n        watch.stop();\n        log.info(&quot;Got file with key: {}, size: {}, time spent: {} ms&quot;, part.getName(), bytes.length, watch.getTotalTimeMillis());\n    }\n    log.info(&quot;----------------------------------------&quot;);\n}\n\n@SneakyThrows\n@PostMapping(value = &quot;upload/formData/v3&quot;, consumes = &quot;multipart/form-data&quot;)\npublic void uploadFileUsingFormDatav3(MultipartHttpServletRequest request) {\n    log.info(&quot;Received request, started downloading&quot;);\n    Collection&lt;Part&gt; parts = request.getParts();\n    for (Part part : parts) {\n        var watch = new StopWatch();\n        watch.start();\n        var bytes = part.getInputStream().readAllBytes();\n        watch.stop();\n        log.info(&quot;Got file with key: {}, size: {}, time spent: {} ms&quot;, part.getName(), bytes.length, watch.getTotalTimeMillis());\n    }\n    log.info(&quot;----------------------------------------&quot;);\n}\n\n\n@PostMapping (value = &quot;upload/binary&quot;)\npublic void acceptData(InputStream dataStream) throws Exception {\n    log.info(&quot;Received request, started downloading&quot;);\n\n    var watch = new StopWatch();\n    watch.start();\n    var bytes = dataStream.readAllBytes();\n    watch.stop();\n    log.info(&quot;Got file, size: {}, time spent: {} ms&quot;, bytes.length, watch.getTotalTimeMillis());\n\n    log.info(&quot;----------------------------------------&quot;);\n}\n</code></pre>\n<p>Here I'm trying to get files in 4 ways (3 similar, it looks like they are the same) and just a binary. Unfortunately for me, binary upload works almost 2 times faster for the same file.</p>\n<p>Here is perf test for binary: <a href=\"https://i.stack.imgur.com/zYhg6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zYhg6.png\" alt=\"enter image description here\" /></a></p>\n<p>and for form data: <a href=\"https://i.stack.imgur.com/xAbSi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xAbSi.png\" alt=\"enter image description here\" /></a></p>\n<p>Note: v2 and v3 for multipart work in the same way with similar time. Java 17, gradle: 8.4, Spring 3.2.0. Please advise.</p>\n"},{"tags":["java","breadth-first-search"],"comments":[{"score":2,"post_type":"question","creation_date":1701105638,"post_id":77558781,"comment_id":136731200,"body_markdown":"When you use a debugger, what is the *first* thing it does that you did not expect?","link":"https://stackoverflow.com/questions/77558781/why-isnt-my-breadth-first-search-algorithm-working-correctly-to-solve-the-ladde#comment136731200_77558781","body":"When you use a debugger, what is the <i>first</i> thing it does that you did not expect?"},{"score":0,"post_type":"question","creation_date":1701114536,"post_id":77558781,"comment_id":136732707,"body_markdown":"The name `addUndirectedEdge` suggests that this will add an **undirected** edge. Then why do you call it twice with the arguments exchanged?","link":"https://stackoverflow.com/questions/77558781/why-isnt-my-breadth-first-search-algorithm-working-correctly-to-solve-the-ladde#comment136732707_77558781","body":"The name <code>addUndirectedEdge</code> suggests that this will add an <b>undirected</b> edge. Then why do you call it twice with the arguments exchanged?"},{"score":0,"post_type":"question","creation_date":1701115349,"post_id":77558781,"comment_id":136732833,"body_markdown":"@trincot calling it once does not seem to change the output.","link":"https://stackoverflow.com/questions/77558781/why-isnt-my-breadth-first-search-algorithm-working-correctly-to-solve-the-ladde#comment136732833_77558781","body":"@trincot calling it once does not seem to change the output."},{"score":0,"post_type":"question","creation_date":1701169069,"post_id":77558781,"comment_id":136739285,"body_markdown":"I know, but it was a question.","link":"https://stackoverflow.com/questions/77558781/why-isnt-my-breadth-first-search-algorithm-working-correctly-to-solve-the-ladde#comment136739285_77558781","body":"I know, but it was a question."}],"answers":[{"comment_count":0,"score":2,"last_activity_date":1701185768,"last_edit_date":1701185768,"creation_date":1701169042,"answer_id":77563317,"question_id":77558781,"body_markdown":"The main issue is that `visitedList` is populated in breadth-first order, so in general it will not represent a *path*. It contains all *visited* nodes, which of course have no guarantee to all be on the shortest path.\r\n\r\nIn your example graph, the starting node &quot;wing&quot; has as immediate neighbors &quot;ring&quot;, &quot;wind&quot; and &quot;wine&quot;, and these nodes will be visited before any other nodes, because that is what breadth first does. We can immediately see how these nodes will end up in `visitedList`, but also that they don&#39;t form a *path*. If there is a solution, it could be that only one of those three &quot;siblings&quot; will turn out to be on the path, but at the moment you visit them, you cannot know that yet. Only when the target node has been visited, you can reconstruct the path.\r\n\r\nIn order to do that, you need to remember for each node where you came from when you visited it. That will be information you can use to reconstruct the path once you have found the target node. From there you can follow those backreferences back to the starting node and reconstruct the path as you do that.\r\n\r\nSome other remarks:\r\n\r\n* Don&#39;t use a static `graph` field. You created `wordGraph` locally, which is good, but then you never use it, and use the static field instead. Drop the static field and only work with the local instance.\r\n\r\n* You cannot print an ArrayList just by giving it as argument to `System.out.println`. Instead iterate the list and print the individual vertices.\r\n\r\n* As the name `addUndirectedEdge` suggests that this method will create an **undirected** edge, it should not be necessary to call it twice -- which you would do if it would create a **directed** edge. But this depends on the actual implementation of that method. As you have not provided it, please check whether you need to call it twice or once.\r\n\r\n* Related to the previous point: as in `addEdgeForOneLetterApart` you look at all neighbors of all nodes, you&#39;ll anyhow visit the same pair of nodes in the two possible orders, and call `graph.addUndirectedEdge` on both. So you could even limit the inner loop to avoid that &quot;double&quot; call, and have it start with `for (int j = i + 1; ...`\r\n   \r\n\r\nHere is a corrected version of `adjustedBFS`:\r\n\r\n```\r\n    public static List&lt;Vertex&gt; adjustedBFS(Graph graph, Vertex startVertex, Vertex endVertex) {\r\n        // When discovering a node, track where we came from. Use a Map instead of Set:\r\n        HashMap&lt;Vertex, Vertex&gt; discoveredLink = new HashMap&lt;Vertex, Vertex&gt;(); \r\n        Queue&lt;Vertex&gt; frontierQueue = new LinkedList&lt;Vertex&gt;();\r\n        ArrayList&lt;Vertex&gt; visitedList = new ArrayList&lt;Vertex&gt;();\r\n        \r\n        frontierQueue.add(startVertex);\r\n        discoveredLink.put(startVertex, null); // Start-vertex has no predecessor \r\n        \r\n        while (frontierQueue.size() &gt; 0) {\r\n            Vertex currentVertex = frontierQueue.remove();\r\n            // We don&#39;t know if this vertex will be on the path,\r\n            //    so don&#39;t add it to visitedList yet\r\n            if (currentVertex.equals(endVertex)) {\r\n                // Reconstruct the path\r\n                while (currentVertex != null) {\r\n                    visitedList.add(currentVertex);\r\n                    currentVertex = discoveredLink.get(currentVertex);\r\n                }\r\n                // As we started from the end vertex, we need to reverse:\r\n                Collections.reverse(visitedList);\r\n                break;\r\n            }\r\n            for (Edge edge : graph.getEdgesFrom(currentVertex)) {\r\n                Vertex adjacentVertex = edge.toVertex;\r\n\r\n                if (!discoveredLink.containsKey(adjacentVertex)) {\r\n                    frontierQueue.add(adjacentVertex);\r\n                    discoveredLink.put(adjacentVertex, currentVertex); // remember predecessor\r\n                }\r\n            }\r\n        }\r\n        return visitedList;\r\n    }\r\n```\r\n\r\nThe example you have given should return an empty list, as &quot;left&quot; is not a node in the graph. You could even make that a check in your program to avoid a useless BFS search. This is the visual representation of the example:\r\n\r\n[![enter image description here][1]][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gYbGo.png","link":"https://stackoverflow.com/questions/77558781/why-isnt-my-breadth-first-search-algorithm-working-correctly-to-solve-the-ladde/77563317#77563317","title":"Why isn&#39;t my breadth first search algorithm working correctly to solve the ladder problem?","body":"<p>The main issue is that <code>visitedList</code> is populated in breadth-first order, so in general it will not represent a <em>path</em>. It contains all <em>visited</em> nodes, which of course have no guarantee to all be on the shortest path.</p>\n<p>In your example graph, the starting node &quot;wing&quot; has as immediate neighbors &quot;ring&quot;, &quot;wind&quot; and &quot;wine&quot;, and these nodes will be visited before any other nodes, because that is what breadth first does. We can immediately see how these nodes will end up in <code>visitedList</code>, but also that they don't form a <em>path</em>. If there is a solution, it could be that only one of those three &quot;siblings&quot; will turn out to be on the path, but at the moment you visit them, you cannot know that yet. Only when the target node has been visited, you can reconstruct the path.</p>\n<p>In order to do that, you need to remember for each node where you came from when you visited it. That will be information you can use to reconstruct the path once you have found the target node. From there you can follow those backreferences back to the starting node and reconstruct the path as you do that.</p>\n<p>Some other remarks:</p>\n<ul>\n<li><p>Don't use a static <code>graph</code> field. You created <code>wordGraph</code> locally, which is good, but then you never use it, and use the static field instead. Drop the static field and only work with the local instance.</p>\n</li>\n<li><p>You cannot print an ArrayList just by giving it as argument to <code>System.out.println</code>. Instead iterate the list and print the individual vertices.</p>\n</li>\n<li><p>As the name <code>addUndirectedEdge</code> suggests that this method will create an <strong>undirected</strong> edge, it should not be necessary to call it twice -- which you would do if it would create a <strong>directed</strong> edge. But this depends on the actual implementation of that method. As you have not provided it, please check whether you need to call it twice or once.</p>\n</li>\n<li><p>Related to the previous point: as in <code>addEdgeForOneLetterApart</code> you look at all neighbors of all nodes, you'll anyhow visit the same pair of nodes in the two possible orders, and call <code>graph.addUndirectedEdge</code> on both. So you could even limit the inner loop to avoid that &quot;double&quot; call, and have it start with <code>for (int j = i + 1; ...</code></p>\n</li>\n</ul>\n<p>Here is a corrected version of <code>adjustedBFS</code>:</p>\n<pre><code>    public static List&lt;Vertex&gt; adjustedBFS(Graph graph, Vertex startVertex, Vertex endVertex) {\n        // When discovering a node, track where we came from. Use a Map instead of Set:\n        HashMap&lt;Vertex, Vertex&gt; discoveredLink = new HashMap&lt;Vertex, Vertex&gt;(); \n        Queue&lt;Vertex&gt; frontierQueue = new LinkedList&lt;Vertex&gt;();\n        ArrayList&lt;Vertex&gt; visitedList = new ArrayList&lt;Vertex&gt;();\n        \n        frontierQueue.add(startVertex);\n        discoveredLink.put(startVertex, null); // Start-vertex has no predecessor \n        \n        while (frontierQueue.size() &gt; 0) {\n            Vertex currentVertex = frontierQueue.remove();\n            // We don't know if this vertex will be on the path,\n            //    so don't add it to visitedList yet\n            if (currentVertex.equals(endVertex)) {\n                // Reconstruct the path\n                while (currentVertex != null) {\n                    visitedList.add(currentVertex);\n                    currentVertex = discoveredLink.get(currentVertex);\n                }\n                // As we started from the end vertex, we need to reverse:\n                Collections.reverse(visitedList);\n                break;\n            }\n            for (Edge edge : graph.getEdgesFrom(currentVertex)) {\n                Vertex adjacentVertex = edge.toVertex;\n\n                if (!discoveredLink.containsKey(adjacentVertex)) {\n                    frontierQueue.add(adjacentVertex);\n                    discoveredLink.put(adjacentVertex, currentVertex); // remember predecessor\n                }\n            }\n        }\n        return visitedList;\n    }\n</code></pre>\n<p>The example you have given should return an empty list, as &quot;left&quot; is not a node in the graph. You could even make that a check in your program to avoid a useless BFS search. This is the visual representation of the example:</p>\n<p><a href=\"https://i.stack.imgur.com/gYbGo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gYbGo.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"score":1,"post_type":"answer","creation_date":1701170370,"post_id":77563413,"comment_id":136739484,"body_markdown":"Consider adding some extra information, explain the code, fix the formatting, and tell what you changed in the code, to make it a proper answer.","link":"https://stackoverflow.com/questions/77558781/why-isnt-my-breadth-first-search-algorithm-working-correctly-to-solve-the-ladde/77563413#comment136739484_77563413","body":"Consider adding some extra information, explain the code, fix the formatting, and tell what you changed in the code, to make it a proper answer."}],"comment_count":1,"score":-2,"last_activity_date":1701169916,"creation_date":1701169916,"answer_id":77563413,"question_id":77558781,"body_markdown":"    function ladderLength(beginWord, endWord, wordList) {\r\n    if (!wordList.includes(endWord)) {\r\n        return 0;\r\n    }\r\n    \r\n    let queue = [[beginWord, 1]];\r\n    let visited = new Set([beginWord]);\r\n    \r\n    while (queue.length &gt; 0) {\r\n        let [word, depth] = queue.shift();\r\n        \r\n        if (word === endWord) {\r\n            return depth;\r\n        }\r\n        \r\n        for (let i = 0; i &lt; word.length; i++) {\r\n            let newWord = &#39;&#39;;\r\n            \r\n            for (let j = 0; j &lt; word.length; j++) {\r\n                newWord += (j === i) ? &#39;_&#39; : word[j];\r\n            }\r\n            \r\n            for (let c = 97; c &lt;= 122; c++) {\r\n                let nextWord = newWord.replace(&#39;_&#39;, String.fromCharCode(c));\r\n                \r\n                if (wordList.includes(nextWord) &amp;&amp; !visited.has(nextWord)) {\r\n                    visited.add(nextWord);\r\n                    queue.push([nextWord, depth + 1]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    return 0;\r\n}","link":"https://stackoverflow.com/questions/77558781/why-isnt-my-breadth-first-search-algorithm-working-correctly-to-solve-the-ladde/77563413#77563413","title":"Why isn&#39;t my breadth first search algorithm working correctly to solve the ladder problem?","body":"<pre><code>function ladderLength(beginWord, endWord, wordList) {\nif (!wordList.includes(endWord)) {\n    return 0;\n}\n\nlet queue = [[beginWord, 1]];\nlet visited = new Set([beginWord]);\n\nwhile (queue.length &gt; 0) {\n    let [word, depth] = queue.shift();\n    \n    if (word === endWord) {\n        return depth;\n    }\n    \n    for (let i = 0; i &lt; word.length; i++) {\n        let newWord = '';\n        \n        for (let j = 0; j &lt; word.length; j++) {\n            newWord += (j === i) ? '_' : word[j];\n        }\n        \n        for (let c = 97; c &lt;= 122; c++) {\n            let nextWord = newWord.replace('_', String.fromCharCode(c));\n            \n            if (wordList.includes(nextWord) &amp;&amp; !visited.has(nextWord)) {\n                visited.add(nextWord);\n                queue.push([nextWord, depth + 1]);\n            }\n        }\n    }\n}\n\nreturn 0;\n</code></pre>\n<p>}</p>\n"}],"comment_count":4,"is_answered":true,"view_count":63,"answer_count":2,"score":0,"last_activity_date":1701185768,"creation_date":1701105553,"question_id":77558781,"body_markdown":"I am taking an algorithms and data structures class and I am working on an assignment where I have to use a breadth first search algorithm to solve the word ladder problem. It&#39;s not working and I&#39;m not sure why. For some words it will be correct for the first few and then just start using words that are not one letter apart. \r\n\r\n\r\n\r\n \r\n\r\nCode:\r\n\r\n```\r\nimport java.io.FileInputStream;\r\nimport java.io.FileNotFoundException;\r\nimport java.util.*;\r\n\r\npublic class SENG300_Assignment13 {\r\n\t\r\n\t\r\n\tstatic Graph graph = new Graph();\r\n\t\r\n\tpublic static List&lt;Vertex&gt; adjustedBFS(Graph graph, Vertex startVertex, Vertex endVertex) {\r\n\t\t\r\n\t      HashSet&lt;Vertex&gt; discoveredSet = new HashSet&lt;Vertex&gt;();\r\n\t      Queue&lt;Vertex&gt; frontierQueue = new LinkedList&lt;Vertex&gt;();\r\n\t      ArrayList&lt;Vertex&gt; visitedList = new ArrayList&lt;Vertex&gt;();\r\n\t    \r\n\t      // startVertex has a distance of 0 from itself\r\n\t      //distances.put(startVertex, 0.0);\r\n\t\r\n\t      frontierQueue.add(startVertex); // Enqueue startVertex in frontierQueue\r\n\t      discoveredSet.add(startVertex); // Add startVertex to discoveredSet\r\n\t      \r\n\t      while (frontierQueue.size() &gt; 0) {\r\n\t    \t  \r\n\t         Vertex currentVertex = frontierQueue.remove();\r\n\t         visitedList.add(currentVertex);\r\n\t         \r\n\t    \t  if (currentVertex.equals(endVertex)) {\r\n\t    \t\t  break;\r\n\t    \t  }\r\n\t         \r\n\t         for (Edge edge : graph.getEdgesFrom(currentVertex)) {\r\n\t            Vertex adjacentVertex = edge.toVertex;\r\n\t            \r\n\t            if (!discoveredSet.contains(adjacentVertex)) {\r\n\t               frontierQueue.add(adjacentVertex);\r\n\t               discoveredSet.add(adjacentVertex);\r\n\t                \r\n\t               // Distance of adjacentVertex is 1 more than currentVertex\r\n\t               //distances.put(adjacentVertex, distances.get(currentVertex) + 1);\r\n\t            }\r\n\t         }\r\n\t      }\r\n\t      return visitedList;\r\n\t   }\r\n\t\r\n\tpublic static void addEdgeForOneLetterApart(Graph graph) {\r\n\t\tList&lt;Vertex&gt; vertices = new ArrayList&lt;&gt;(graph.getVertices());\r\n\t\t\r\n\t\tfor (int i = 0; i &lt; vertices.size(); i++) {\r\n\t\t\tVertex v1 = vertices.get(i);\r\n\t\t\t\r\n\t\t\tfor (int j = 0; j &lt; vertices.size(); j++) {\r\n\t\t\t\tVertex v2 = vertices.get(j);\r\n\t\t\t\t\r\n\t\t\t\tif (areOneLetterApart(v1.getValue(), v2.getValue())) {\r\n\t\t\t\t\tgraph.addUndirectedEdge(v1, v2);\r\n\t\t\t\t\tgraph.addUndirectedEdge(v2, v1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static boolean areOneLetterApart(String v1, String v2) {\r\n\t\tint differenceCount = 0;\r\n\t\t\r\n\t\tif (v1.length() != v2.length()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tfor (int i = 0; i &lt; v1.length(); i++) {\r\n\t\t\tif (v1.charAt(i) != v2.charAt(i)) {\r\n\t\t\t\tdifferenceCount++;\r\n\t\t\t\t\r\n\t\t\t\tif (differenceCount &gt; 1) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn differenceCount == 1;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\r\n\t// Driver code\r\n\tpublic static void main(String[] args) {\r\n\t\tGraph wordGraph = new Graph();\r\n\t\tFileInputStream fileByteStream = null;\r\n\t\tScanner scnr = new Scanner(System.in);\r\n\t\tScanner inFS = null;\r\n\t\tString word;\r\n\t\tint counter = 0;\r\n\t\t\r\n\t\t\r\n\t\ttry {\r\n\t\t\tfileByteStream = new FileInputStream(&quot;words_alpha.txt&quot;);\r\n\t\t\tinFS = new Scanner(fileByteStream);\r\n\t\t\t\r\n\t\t\twhile (inFS.hasNextLine()) {\r\n\t\t\t\tword = inFS.nextLine();\r\n\t\t\t\t\r\n\t\t\t\tgraph.addVertex(word);\r\n\t\t\t\t\r\n\t\t\t\tcounter++;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} catch (FileNotFoundException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tVertex start = new Vertex(&quot;wing&quot;);\r\n\t\tVertex target = new Vertex(&quot;left&quot;);\r\n\t\t\r\n\t\taddEdgeForOneLetterApart(graph);\r\n\t\t\r\n\t\tSystem.out.println(adjustedBFS(graph, start, target));\r\n\t}\r\n}\r\n\r\n```\r\n\r\nAnd here is the output list when using those start and target variables: \r\n[wing, wind, wine, ring, kind, mind, line, wire, wise, mine, wide, like, fire, side, size]\r\n\r\nI&#39;m really not sure what is going on, any help would be greatly appreciated. Thank you.","link":"https://stackoverflow.com/questions/77558781/why-isnt-my-breadth-first-search-algorithm-working-correctly-to-solve-the-ladde","title":"Why isn&#39;t my breadth first search algorithm working correctly to solve the ladder problem?","body":"<p>I am taking an algorithms and data structures class and I am working on an assignment where I have to use a breadth first search algorithm to solve the word ladder problem. It's not working and I'm not sure why. For some words it will be correct for the first few and then just start using words that are not one letter apart.</p>\n<p>Code:</p>\n<pre><code>import java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.util.*;\n\npublic class SENG300_Assignment13 {\n    \n    \n    static Graph graph = new Graph();\n    \n    public static List&lt;Vertex&gt; adjustedBFS(Graph graph, Vertex startVertex, Vertex endVertex) {\n        \n          HashSet&lt;Vertex&gt; discoveredSet = new HashSet&lt;Vertex&gt;();\n          Queue&lt;Vertex&gt; frontierQueue = new LinkedList&lt;Vertex&gt;();\n          ArrayList&lt;Vertex&gt; visitedList = new ArrayList&lt;Vertex&gt;();\n        \n          // startVertex has a distance of 0 from itself\n          //distances.put(startVertex, 0.0);\n    \n          frontierQueue.add(startVertex); // Enqueue startVertex in frontierQueue\n          discoveredSet.add(startVertex); // Add startVertex to discoveredSet\n          \n          while (frontierQueue.size() &gt; 0) {\n              \n             Vertex currentVertex = frontierQueue.remove();\n             visitedList.add(currentVertex);\n             \n              if (currentVertex.equals(endVertex)) {\n                  break;\n              }\n             \n             for (Edge edge : graph.getEdgesFrom(currentVertex)) {\n                Vertex adjacentVertex = edge.toVertex;\n                \n                if (!discoveredSet.contains(adjacentVertex)) {\n                   frontierQueue.add(adjacentVertex);\n                   discoveredSet.add(adjacentVertex);\n                    \n                   // Distance of adjacentVertex is 1 more than currentVertex\n                   //distances.put(adjacentVertex, distances.get(currentVertex) + 1);\n                }\n             }\n          }\n          return visitedList;\n       }\n    \n    public static void addEdgeForOneLetterApart(Graph graph) {\n        List&lt;Vertex&gt; vertices = new ArrayList&lt;&gt;(graph.getVertices());\n        \n        for (int i = 0; i &lt; vertices.size(); i++) {\n            Vertex v1 = vertices.get(i);\n            \n            for (int j = 0; j &lt; vertices.size(); j++) {\n                Vertex v2 = vertices.get(j);\n                \n                if (areOneLetterApart(v1.getValue(), v2.getValue())) {\n                    graph.addUndirectedEdge(v1, v2);\n                    graph.addUndirectedEdge(v2, v1);\n                }\n            }\n        }\n    }\n    \n    public static boolean areOneLetterApart(String v1, String v2) {\n        int differenceCount = 0;\n        \n        if (v1.length() != v2.length()) {\n            return false;\n        }\n        \n        for (int i = 0; i &lt; v1.length(); i++) {\n            if (v1.charAt(i) != v2.charAt(i)) {\n                differenceCount++;\n                \n                if (differenceCount &gt; 1) {\n                    return false;\n                }\n            }\n        }\n        \n        return differenceCount == 1;\n        \n    }\n    \n    \n\n    // Driver code\n    public static void main(String[] args) {\n        Graph wordGraph = new Graph();\n        FileInputStream fileByteStream = null;\n        Scanner scnr = new Scanner(System.in);\n        Scanner inFS = null;\n        String word;\n        int counter = 0;\n        \n        \n        try {\n            fileByteStream = new FileInputStream(&quot;words_alpha.txt&quot;);\n            inFS = new Scanner(fileByteStream);\n            \n            while (inFS.hasNextLine()) {\n                word = inFS.nextLine();\n                \n                graph.addVertex(word);\n                \n                counter++;\n                \n            }\n            \n        } catch (FileNotFoundException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        \n        \n        \n        Vertex start = new Vertex(&quot;wing&quot;);\n        Vertex target = new Vertex(&quot;left&quot;);\n        \n        addEdgeForOneLetterApart(graph);\n        \n        System.out.println(adjustedBFS(graph, start, target));\n    }\n}\n\n</code></pre>\n<p>And here is the output list when using those start and target variables:\n[wing, wind, wine, ring, kind, mind, line, wire, wise, mine, wide, like, fire, side, size]</p>\n<p>I'm really not sure what is going on, any help would be greatly appreciated. Thank you.</p>\n"},{"tags":["java","sql","spring","hibernate"],"comments":[{"score":0,"post_type":"question","creation_date":1701185119,"post_id":77565015,"comment_id":136742317,"body_markdown":"Properly formatted SQL is so much easier to read, and to write.","link":"https://stackoverflow.com/questions/77565015/why-am-i-receiving-nonuniquediscoveredsqlaliasexception#comment136742317_77565015","body":"Properly formatted SQL is so much easier to read, and to write."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701185218,"last_edit_date":1701185218,"creation_date":1701184824,"answer_id":77565049,"question_id":77565015,"body_markdown":"As your query:\r\n\r\n```SQL\r\nSELECT \r\nb.id &lt;----ID, \r\nb.book_name, \r\nv.id &lt;----ID, \r\nv.majorVersion, \r\nv.minorVersion, \r\nv.generated_from_another IS NULL as isNotStable \r\nFROM book b \r\nINNER JOIN book_version v ON b.id = v.book_id \r\nWHERE b.type = :typeId \r\nAND \r\n(v.id in (\r\n          SELECT \r\n          max(v.id) \r\n          FROM book b \r\n          INNER JOIN book_version v ON b.id = v.book_id \r\nWHERE v.generated_from_another IS NULL \r\nAND b.type = :typeId GROUP BY b.id) \r\nor v.generated_from_another is not null) \r\nORDER BY b.book_name, \r\nv.majorVersion DESC, \r\nv.minorVersion DESC;\r\n\r\n```\r\nIs fetching two columns with alias `id`, you are getting the exception.\r\n\r\nIf you look at your error log properly, you can see it\r\n`Encountered a duplicated sql alias [id] during auto-discovery of a native-sql `\r\n\r\nYou can do something like:\r\n\r\n```SQL\r\nSELECT \r\nb.id AS bookId, \r\nb.book_name, \r\nv.id AS versionId, \r\n...\r\n\r\n```\r\n\r\nOR\r\n\r\n```SQL\r\nSELECT \r\nb.id  bookId, \r\nb.book_name, \r\nv.id  versionId, \r\n...\r\n\r\n```\r\n\r\n\r\nThis way the error can be avoided.","link":"https://stackoverflow.com/questions/77565015/why-am-i-receiving-nonuniquediscoveredsqlaliasexception/77565049#77565049","title":"Why am I receiving NonUniqueDiscoveredSqlAliasException?","body":"<p>As your query:</p>\n<pre><code>SELECT \nb.id &lt;----ID, \nb.book_name, \nv.id &lt;----ID, \nv.majorVersion, \nv.minorVersion, \nv.generated_from_another IS NULL as isNotStable \nFROM book b \nINNER JOIN book_version v ON b.id = v.book_id \nWHERE b.type = :typeId \nAND \n(v.id in (\n          SELECT \n          max(v.id) \n          FROM book b \n          INNER JOIN book_version v ON b.id = v.book_id \nWHERE v.generated_from_another IS NULL \nAND b.type = :typeId GROUP BY b.id) \nor v.generated_from_another is not null) \nORDER BY b.book_name, \nv.majorVersion DESC, \nv.minorVersion DESC;\n\n</code></pre>\n<p>Is fetching two columns with alias <code>id</code>, you are getting the exception.</p>\n<p>If you look at your error log properly, you can see it\n<code>Encountered a duplicated sql alias [id] during auto-discovery of a native-sql </code></p>\n<p>You can do something like:</p>\n<pre><code>SELECT \nb.id AS bookId, \nb.book_name, \nv.id AS versionId, \n...\n\n</code></pre>\n<p>OR</p>\n<pre><code>SELECT \nb.id  bookId, \nb.book_name, \nv.id  versionId, \n...\n\n</code></pre>\n<p>This way the error can be avoided.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":29,"answer_count":1,"score":0,"last_activity_date":1701185629,"creation_date":1701184636,"last_edit_date":1701185629,"question_id":77565015,"body_markdown":"The database have book and book versions. I need to get only books which:\r\n\r\n- The version it is the latest version or v.generated_from another is null (it means that isn&#39;t a stable version)\r\n- Get by a specific type\r\n\r\n\r\n```\r\nSELECT b.id, b.book_name, v.id, v.majorVersion, v.minorVersion, v.generated_from_another IS NULL as isNotStable\r\nFROM book b\r\n         INNER JOIN book_version v ON b.id = v.book_id\r\nWHERE b.type = :typeId\r\n  and (v.id in (SELECT max(v.id)\r\n                FROM book b\r\n                         INNER JOIN book_version v ON b.id = v.book_id\r\n                WHERE v.generated_from_another IS NULL\r\n                  AND b.type = :typeId\r\n                GROUP BY b.id) or v.generated_from_another is not null)\r\nORDER BY b.book_name, v.majorVersion DESC, v.minorVersion DESC;\r\n```\r\n\r\nIt works well in mysql but I&#39;m receiving \r\n\r\n    \r\n\r\n&gt; Caused by:\r\n&gt; org.hibernate.loader.custom.NonUniqueDiscoveredSqlAliasException:\r\n&gt; Encountered a duplicated sql alias [id] during auto-discovery of a\r\n&gt; native-sql query \tat\r\n&gt; org.hibernate.loader.custom.CustomLoader.validateAliases(CustomLoader.java:520)\r\n&gt; ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final] \tat\r\n&gt; org.hibernate.loader.custom.CustomLoader.autoDiscoverTypes(CustomLoader.java:497)\r\n&gt; ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final] \tat\r\n&gt; org.hibernate.loader.Loader.preprocessResultSet(Loader.java:2343)\r\n&gt; ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final] \tat\r\n&gt; org.hibernate.loader.Loader.getResultSet(Loader.java:2299)\r\n&gt; ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\r\nWhat is wrong?","link":"https://stackoverflow.com/questions/77565015/why-am-i-receiving-nonuniquediscoveredsqlaliasexception","title":"Why am I receiving NonUniqueDiscoveredSqlAliasException?","body":"<p>The database have book and book versions. I need to get only books which:</p>\n<ul>\n<li>The version it is the latest version or v.generated_from another is null (it means that isn't a stable version)</li>\n<li>Get by a specific type</li>\n</ul>\n<pre><code>SELECT b.id, b.book_name, v.id, v.majorVersion, v.minorVersion, v.generated_from_another IS NULL as isNotStable\nFROM book b\n         INNER JOIN book_version v ON b.id = v.book_id\nWHERE b.type = :typeId\n  and (v.id in (SELECT max(v.id)\n                FROM book b\n                         INNER JOIN book_version v ON b.id = v.book_id\n                WHERE v.generated_from_another IS NULL\n                  AND b.type = :typeId\n                GROUP BY b.id) or v.generated_from_another is not null)\nORDER BY b.book_name, v.majorVersion DESC, v.minorVersion DESC;\n</code></pre>\n<p>It works well in mysql but I'm receiving</p>\n<blockquote>\n<p>Caused by:\norg.hibernate.loader.custom.NonUniqueDiscoveredSqlAliasException:\nEncountered a duplicated sql alias [id] during auto-discovery of a\nnative-sql query  at\norg.hibernate.loader.custom.CustomLoader.validateAliases(CustomLoader.java:520)\n~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]   at\norg.hibernate.loader.custom.CustomLoader.autoDiscoverTypes(CustomLoader.java:497)\n~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]   at\norg.hibernate.loader.Loader.preprocessResultSet(Loader.java:2343)\n~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]   at\norg.hibernate.loader.Loader.getResultSet(Loader.java:2299)\n~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]</p>\n</blockquote>\n<p>What is wrong?</p>\n"},{"tags":["java","google-bigquery","google-cloud-dataflow","apache-beam"],"comments":[{"score":0,"post_type":"question","creation_date":1701684911,"post_id":77565117,"comment_id":136801940,"body_markdown":"Looks like a BigQuery issue. Are you sure you apply it to the exact same data when running the query on the console? As the error states, it looks like as if your `TIMESTAMP` column contains something of the [BigQuery type](https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types#timestamp_type) `TIMESTAMP` which is not supported by the [timestamp function](https://cloud.google.com/bigquery/docs/reference/standard-sql/timestamp_functions#timestamp).","link":"https://stackoverflow.com/questions/77565117/bigquery-datetime-extraction-query-on-apache-beam#comment136801940_77565117","body":"Looks like a BigQuery issue. Are you sure you apply it to the exact same data when running the query on the console? As the error states, it looks like as if your <code>TIMESTAMP</code> column contains something of the <a href=\"https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types#timestamp_type\" rel=\"nofollow noreferrer\">BigQuery type</a> <code>TIMESTAMP</code> which is not supported by the <a href=\"https://cloud.google.com/bigquery/docs/reference/standard-sql/timestamp_functions#timestamp\" rel=\"nofollow noreferrer\">timestamp function</a>."}],"comment_count":1,"is_answered":false,"view_count":26,"answer_count":0,"score":0,"last_activity_date":1701185275,"creation_date":1701185275,"question_id":77565117,"body_markdown":"\r\nI have this where clause in BigQuery&#39;s query and it works fine when used on console.\r\n\r\n&gt; DATE(TIMESTAMP) &gt;= DATE_SUB(current_date() , INTERVAL 8 DAY) AND DATE(TIMESTAMP) &lt; DATE_SUB(current_date() , INTERVAL 7 DAY) AND EXTRACT(hour from timestamp(TIMESTAMP)) &gt;= EXTRACT(hour from timestamp(DATE_SUB(CURRENT_DATETIME() , INTERVAL 8 DAY))) AND EXTRACT(hour from timestamp(TIMESTAMP)) &lt; EXTRACT(hour from timestamp(DATE_SUB(CURRENT_DATETIME() , INTERVAL 8 DAY) + INTERVAL 4 HOUR))\r\n\r\nBut when I am using the same in Apache Beam then it gives me the error\r\n\r\n&gt;INVALID_ARGUMENT: request failed: Query error: No matching signature for function TIMESTAMP for argument types: TIMESTAMP. Supported signatures: TIMESTAMP(STRING, [STRING]); TIMESTAMP(DATE, [STRING]); TIMESTAMP(DATETIME, [STRING]) at [1:498]\r\n\r\n\r\nCode that is used to make a call to BQ is\r\n```\r\nBigQueryIO.readTableRows()\r\n.from(queryConditions.tableName())                          \r\n.withRowRestriction(queryConditions.queryRestriction())                                     \r\n.withMethod(BigQueryIO.TypedRead.Method.DIRECT_READ)\r\n.withSelectedFields(ROW.SELECTED_FIELDS))\r\n```\r\n\r\nBeam SDK Version : `2.51.0`\r\n\r\nJava Version : `17`\r\n\r\nLibrary Used : `org.apache.beam:beam-sdks-java-io-google-cloud-platform:2.51.0`","link":"https://stackoverflow.com/questions/77565117/bigquery-datetime-extraction-query-on-apache-beam","title":"BigQuery DateTime Extraction Query on Apache Beam","body":"<p>I have this where clause in BigQuery's query and it works fine when used on console.</p>\n<blockquote>\n<p>DATE(TIMESTAMP) &gt;= DATE_SUB(current_date() , INTERVAL 8 DAY) AND DATE(TIMESTAMP) &lt; DATE_SUB(current_date() , INTERVAL 7 DAY) AND EXTRACT(hour from timestamp(TIMESTAMP)) &gt;= EXTRACT(hour from timestamp(DATE_SUB(CURRENT_DATETIME() , INTERVAL 8 DAY))) AND EXTRACT(hour from timestamp(TIMESTAMP)) &lt; EXTRACT(hour from timestamp(DATE_SUB(CURRENT_DATETIME() , INTERVAL 8 DAY) + INTERVAL 4 HOUR))</p>\n</blockquote>\n<p>But when I am using the same in Apache Beam then it gives me the error</p>\n<blockquote>\n<p>INVALID_ARGUMENT: request failed: Query error: No matching signature for function TIMESTAMP for argument types: TIMESTAMP. Supported signatures: TIMESTAMP(STRING, [STRING]); TIMESTAMP(DATE, [STRING]); TIMESTAMP(DATETIME, [STRING]) at [1:498]</p>\n</blockquote>\n<p>Code that is used to make a call to BQ is</p>\n<pre><code>BigQueryIO.readTableRows()\n.from(queryConditions.tableName())                          \n.withRowRestriction(queryConditions.queryRestriction())                                     \n.withMethod(BigQueryIO.TypedRead.Method.DIRECT_READ)\n.withSelectedFields(ROW.SELECTED_FIELDS))\n</code></pre>\n<p>Beam SDK Version : <code>2.51.0</code></p>\n<p>Java Version : <code>17</code></p>\n<p>Library Used : <code>org.apache.beam:beam-sdks-java-io-google-cloud-platform:2.51.0</code></p>\n"},{"tags":["java","apache-kafka","spring-kafka","reactor-kafka"],"comment_count":0,"is_answered":false,"view_count":23,"answer_count":0,"score":0,"last_activity_date":1701185257,"creation_date":1701185028,"last_edit_date":1701185257,"question_id":77565080,"body_markdown":"I am trying to consume/read/receive and publish/write/send data from/to Kafka without intermittent &quot;Node X disconnected&quot; issue.\r\n\r\nWith this reactive Kafka consumer and producer config:\r\n\r\n```\r\npublic KafkaReceiver&lt;String, String&gt; kafkaReceiver(final MeterRegistry registry, final ObservationRegistry observationRegistry) {\r\n        final Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\n        properties.put(SSL_PROTOCOL, SSL_VALUE);\r\n        properties.put(SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, keyStoreLocation);\r\n        properties.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG, keyStorePassphrase);\r\n        properties.put(SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, trustStoreLocation);\r\n        properties.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG, trustStorePassphrase);\r\n        properties.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;kafka-1.com:9092,kafka-2.com:9092&quot;,kafka-3.com:9092);\r\n        properties.put(ConsumerConfig.CLIENT_ID_CONFIG, consumerGroup);\r\n        properties.put(ConsumerConfig.GROUP_ID_CONFIG, consumerGroup);\r\n        properties.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, startOffset);\r\n```\r\n\r\n```\r\npublic KafkaSender&lt;String, Log&gt; kafkaSender(final MeterRegistry registry, final ObservationRegistry observationRegistry) {\r\n        final Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\n        properties.put(SSL_PROTOCOL, SSL_VALUE);\r\n        properties.put(SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, keyStoreLocation);\r\n        properties.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG, keyStorePassphrase);\r\n        properties.put(SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, trustStoreLocation);\r\n        properties.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG, trustStorePassphrase);\r\n        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;kafka-1.com:9092,kafka-2.com:9092&quot;,kafka-3.com:9092);\r\n```\r\n\r\nI am just doing some very simple consuming of data and sending the data to another topic.\r\n\r\nIn both scenarios where load is gentle, all the way to high, I am always seeing this issue:\r\n\r\n```none\r\n 1 INFO --- [reactive-kafka] [aaa,,] o.apache.kafka.clients.NetworkClient : [Consumer clientId=aaa-] Node -1 disconnected.\r\n 1 INFO --- [kafka-producer-network-thread | producer-1] [aaa,,] o.apache.kafka.clients.NetworkClient : [Producer clientId=producer-1] Node -1 disconnected.\r\n 1 INFO --- [kafka-producer-network-thread | producer-1] [aaa,,] o.apache.kafka.clients.NetworkClient : [Producer clientId=producer-1] Node 5 disconnected.\r\n```\r\n\r\nThe numbers are always like -1, and some other numbers\r\n\r\nAfter reading the doc, I believe the most appropriate properties to tune are `batch.size` and `linger.ms`.\r\n\r\nAfter trying several many values, the issue still persist.\r\n\r\nThe issue is from my app only, I do not believe they are from Kafka. Because at a time T, when my app is facing the issue, there are hundreds of other apps interacting with the same Kafka. If the Kafka server infrastructure is the issue, I would have expected to see the same logs in at least more than one app, however, no, only me.\r\n\r\nAre those two properties not suited to resolve this issue?\r\n\r\nHow to not have those issues?","link":"https://stackoverflow.com/questions/77565080/intermittent-node-x-disconnected-issue-for-kafka-despite-batch-size-linger-m","title":"Intermittent &quot;Node X disconnected&quot; issue for Kafka despite batch.size , linger.ms change","body":"<p>I am trying to consume/read/receive and publish/write/send data from/to Kafka without intermittent &quot;Node X disconnected&quot; issue.</p>\n<p>With this reactive Kafka consumer and producer config:</p>\n<pre><code>public KafkaReceiver&lt;String, String&gt; kafkaReceiver(final MeterRegistry registry, final ObservationRegistry observationRegistry) {\n        final Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\n        properties.put(SSL_PROTOCOL, SSL_VALUE);\n        properties.put(SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, keyStoreLocation);\n        properties.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG, keyStorePassphrase);\n        properties.put(SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, trustStoreLocation);\n        properties.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG, trustStorePassphrase);\n        properties.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;kafka-1.com:9092,kafka-2.com:9092&quot;,kafka-3.com:9092);\n        properties.put(ConsumerConfig.CLIENT_ID_CONFIG, consumerGroup);\n        properties.put(ConsumerConfig.GROUP_ID_CONFIG, consumerGroup);\n        properties.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, startOffset);\n</code></pre>\n<pre><code>public KafkaSender&lt;String, Log&gt; kafkaSender(final MeterRegistry registry, final ObservationRegistry observationRegistry) {\n        final Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\n        properties.put(SSL_PROTOCOL, SSL_VALUE);\n        properties.put(SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, keyStoreLocation);\n        properties.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG, keyStorePassphrase);\n        properties.put(SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, trustStoreLocation);\n        properties.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG, trustStorePassphrase);\n        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;kafka-1.com:9092,kafka-2.com:9092&quot;,kafka-3.com:9092);\n</code></pre>\n<p>I am just doing some very simple consuming of data and sending the data to another topic.</p>\n<p>In both scenarios where load is gentle, all the way to high, I am always seeing this issue:</p>\n<pre class=\"lang-none prettyprint-override\"><code> 1 INFO --- [reactive-kafka] [aaa,,] o.apache.kafka.clients.NetworkClient : [Consumer clientId=aaa-] Node -1 disconnected.\n 1 INFO --- [kafka-producer-network-thread | producer-1] [aaa,,] o.apache.kafka.clients.NetworkClient : [Producer clientId=producer-1] Node -1 disconnected.\n 1 INFO --- [kafka-producer-network-thread | producer-1] [aaa,,] o.apache.kafka.clients.NetworkClient : [Producer clientId=producer-1] Node 5 disconnected.\n</code></pre>\n<p>The numbers are always like -1, and some other numbers</p>\n<p>After reading the doc, I believe the most appropriate properties to tune are <code>batch.size</code> and <code>linger.ms</code>.</p>\n<p>After trying several many values, the issue still persist.</p>\n<p>The issue is from my app only, I do not believe they are from Kafka. Because at a time T, when my app is facing the issue, there are hundreds of other apps interacting with the same Kafka. If the Kafka server infrastructure is the issue, I would have expected to see the same logs in at least more than one app, however, no, only me.</p>\n<p>Are those two properties not suited to resolve this issue?</p>\n<p>How to not have those issues?</p>\n"},{"tags":["java","linux","windows","tcp","diameter-protocol"],"comments":[{"score":0,"post_type":"question","creation_date":1693593483,"post_id":77020601,"comment_id":135786462,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","link":"https://stackoverflow.com/questions/77020601/the-issue-of-jdiameter#comment135786462_77020601","body":"Please provide enough code so others can better understand or reproduce the problem."},{"score":0,"post_type":"question","creation_date":1693650999,"post_id":77020601,"comment_id":135790818,"body_markdown":"In the source code of  of Jdiameter,","link":"https://stackoverflow.com/questions/77020601/the-issue-of-jdiameter#comment135790818_77020601","body":"In the source code of  of Jdiameter,"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701185240,"last_edit_date":1701185240,"creation_date":1701133708,"answer_id":77560809,"question_id":77020601,"body_markdown":"Look at the stacktrace, it is telling you the reason:\r\n```\r\norg.jdiameter.api.RouteException: Unable to find valid connection to peer[172.17.13.31] in realm[exchange.example.org]\r\n    at org.jdiameter.client.impl.router.RouterImpl.getPeer(RouterImpl.java:381)\r\n```\r\n\r\nYou do not have the target peer configured in your peer table . Diameter Transport requires that any Diameter node  be &quot;routable&quot; by current Diameter node only if we either have a direct transport connection to it  , or have a connection to a node which is.\r\n\r\nPlease provide your peer table entries for us to be able to help more.\r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77020601/the-issue-of-jdiameter/77560809#77560809","title":"The issue of Jdiameter","body":"<p>Look at the stacktrace, it is telling you the reason:</p>\n<pre><code>org.jdiameter.api.RouteException: Unable to find valid connection to peer[172.17.13.31] in realm[exchange.example.org]\n    at org.jdiameter.client.impl.router.RouterImpl.getPeer(RouterImpl.java:381)\n</code></pre>\n<p>You do not have the target peer configured in your peer table . Diameter Transport requires that any Diameter node  be &quot;routable&quot; by current Diameter node only if we either have a direct transport connection to it  , or have a connection to a node which is.</p>\n<p>Please provide your peer table entries for us to be able to help more.</p>\n"}],"comment_count":2,"is_answered":false,"view_count":44,"answer_count":1,"score":0,"last_activity_date":1701185240,"creation_date":1693544134,"last_edit_date":1693562644,"question_id":77020601,"body_markdown":"```none\r\norg.jdiameter.api.RouteException: Unable to find valid connection to peer[172.17.13.31] in realm[exchange.example.org]\r\n\tat org.jdiameter.client.impl.router.RouterImpl.getPeer(RouterImpl.java:381)\r\n\tat org.jdiameter.client.impl.controller.PeerTableImpl.sendMessage(PeerTableImpl.java:200)\r\n\tat org.jdiameter.client.impl.StackImpl.sendMessage(StackImpl.java:471)\r\n\tat org.jdiameter.client.impl.BaseSessionImpl.genericSend(BaseSessionImpl.java:202)\r\n\tat org.jdiameter.client.impl.BaseSessionImpl.genericSend(BaseSessionImpl.java:168)\r\n\tat org.jdiameter.client.impl.SessionImpl.send(SessionImpl.java:110)\r\n```\r\n\r\n\r\nI used the Jdiameter of a client of Windows and tried to connect the server&#39;s Jdiameter of Linux,but I failed.\r\nThe Jdiameter&#39;s port of Linux is open, I can use the telent to access it, but I cannot use the client to connect it.","link":"https://stackoverflow.com/questions/77020601/the-issue-of-jdiameter","title":"The issue of Jdiameter","body":"<pre class=\"lang-none prettyprint-override\"><code>org.jdiameter.api.RouteException: Unable to find valid connection to peer[172.17.13.31] in realm[exchange.example.org]\n    at org.jdiameter.client.impl.router.RouterImpl.getPeer(RouterImpl.java:381)\n    at org.jdiameter.client.impl.controller.PeerTableImpl.sendMessage(PeerTableImpl.java:200)\n    at org.jdiameter.client.impl.StackImpl.sendMessage(StackImpl.java:471)\n    at org.jdiameter.client.impl.BaseSessionImpl.genericSend(BaseSessionImpl.java:202)\n    at org.jdiameter.client.impl.BaseSessionImpl.genericSend(BaseSessionImpl.java:168)\n    at org.jdiameter.client.impl.SessionImpl.send(SessionImpl.java:110)\n</code></pre>\n<p>I used the Jdiameter of a client of Windows and tried to connect the server's Jdiameter of Linux,but I failed.\nThe Jdiameter's port of Linux is open, I can use the telent to access it, but I cannot use the client to connect it.</p>\n"},{"tags":["java","maven","swagger"],"comments":[{"score":0,"post_type":"question","creation_date":1701182196,"post_id":77563692,"comment_id":136741727,"body_markdown":"Which generator are you using in the plugin? Because I can&#39;t remember having used a generator that doesn&#39;t add an `@JsonProperty(&quot;$ref&quot;)` annotation.","link":"https://stackoverflow.com/questions/77563692/open-api-yml-generate-java-class-file-field-returning-an-additional-json-key#comment136741727_77563692","body":"Which generator are you using in the plugin? Because I can&#39;t remember having used a generator that doesn&#39;t add an <code>@JsonProperty(&quot;$ref&quot;)</code> annotation."},{"score":0,"post_type":"question","creation_date":1701184759,"post_id":77563692,"comment_id":136742254,"body_markdown":"I used openapi-generator-maven-plugin\nYa my bad I didn&#39;t add it in my sample code cause was writing it manually here, \nit did add a @JsonProperty(&quot;$ref&quot;)","link":"https://stackoverflow.com/questions/77563692/open-api-yml-generate-java-class-file-field-returning-an-additional-json-key#comment136742254_77563692","body":"I used openapi-generator-maven-plugin Ya my bad I didn&#39;t add it in my sample code cause was writing it manually here,  it did add a @JsonProperty(&quot;$ref&quot;)"},{"score":0,"post_type":"question","creation_date":1701191828,"post_id":77563692,"comment_id":136743819,"body_markdown":"It was not the question which plugin you used. Which generator do you use `java`, `spring`, `kotlin` etc. ?","link":"https://stackoverflow.com/questions/77563692/open-api-yml-generate-java-class-file-field-returning-an-additional-json-key#comment136743819_77563692","body":"It was not the question which plugin you used. Which generator do you use <code>java</code>, <code>spring</code>, <code>kotlin</code> etc. ?"},{"score":0,"post_type":"question","creation_date":1701192089,"post_id":77563692,"comment_id":136743868,"body_markdown":"Java, https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin","link":"https://stackoverflow.com/questions/77563692/open-api-yml-generate-java-class-file-field-returning-an-additional-json-key#comment136743868_77563692","body":"Java, <a href=\"https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin\" rel=\"nofollow noreferrer\">github.com/OpenAPITools/openapi-generator/tree/master/module&zwnj;&#8203;s/&hellip;</a>"},{"score":0,"post_type":"question","creation_date":1701198354,"post_id":77563692,"comment_id":136744887,"body_markdown":"That would mean that https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/Java/pojo.mustache and https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/Java/jackson_annotations.mustache are used. These include `@JsonProperty(JSON_PROPERTY_{{nameInSnakeCase}})`. This is apparently not the same as from https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/JavaJaxRS/spec/pojo.mustache which uses `@JsonProperty(&quot;{{baseName}}&quot;)`.","link":"https://stackoverflow.com/questions/77563692/open-api-yml-generate-java-class-file-field-returning-an-additional-json-key#comment136744887_77563692","body":"That would mean that <a href=\"https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/Java/pojo.mustache\" rel=\"nofollow noreferrer\">github.com/OpenAPITools/openapi-generator/blob/master/module&zwnj;&#8203;s/&hellip;</a> and <a href=\"https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/Java/jackson_annotations.mustache\" rel=\"nofollow noreferrer\">github.com/OpenAPITools/openapi-generator/blob/master/module&zwnj;&#8203;s/&hellip;</a> are used. These include <code>@JsonProperty(JSON_PROPERTY_{{nameInSnakeCase}})</code>. This is apparently not the same as from <a href=\"https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/JavaJaxRS/spec/pojo.mustache\" rel=\"nofollow noreferrer\">github.com/OpenAPITools/openapi-generator/blob/master/module&zwnj;&#8203;s/&hellip;</a> which uses <code>@JsonProperty(&quot;{{baseName}}&quot;)</code>."},{"score":0,"post_type":"question","creation_date":1701198730,"post_id":77563692,"comment_id":136744944,"body_markdown":"Actually it is; it uses `public static final String JSON_PROPERTY_{{nameInSnakeCase}} = &quot;{{baseName}}&quot;;` which is the same. However, it appears that Gson is used by default: https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/Java/JSON.mustache explicitly uses it. The POJO mustache file does include `@SerializedName(SERIALIZED_NAME_{{nameInSnakeCase}})` and `public static final String SERIALIZED_NAME_{{nameInSnakeCase}} = &quot;{{baseName}}&quot;;`. Which JSON libraries are part of your dependencies?","link":"https://stackoverflow.com/questions/77563692/open-api-yml-generate-java-class-file-field-returning-an-additional-json-key#comment136744944_77563692","body":"Actually it is; it uses <code>public static final String JSON_PROPERTY_{{nameInSnakeCase}} = &quot;{{baseName}}&quot;;</code> which is the same. However, it appears that Gson is used by default: <a href=\"https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/Java/JSON.mustache\" rel=\"nofollow noreferrer\">github.com/OpenAPITools/openapi-generator/blob/master/module&zwnj;&#8203;s/&hellip;</a> explicitly uses it. The POJO mustache file does include <code>@SerializedName(SERIALIZED_NAME_{{nameInSnakeCase}})</code> and <code>public static final String SERIALIZED_NAME_{{nameInSnakeCase}} = &quot;{{baseName}}&quot;;</code>. Which JSON libraries are part of your dependencies?"}],"comment_count":6,"is_answered":false,"view_count":32,"answer_count":0,"score":0,"last_activity_date":1701185166,"creation_date":1701172791,"last_edit_date":1701185166,"question_id":77563692,"body_markdown":"I have created an api.yml file and generated them using openapi maven plugin my yml file consist of this \r\n\r\n     manager:\r\n            ...other fields\r\n              type: object\r\n              properties:\r\n                value:\r\n                  type: string\r\n                $ref:\r\n                  type: string\r\n                name:\r\n                  type: string\r\n\r\n\r\nIt created a java file for me \r\nwith variables with @JsonProperty being annotated on the variables\r\n\r\n    private String value;\r\n    private String $ref\r\n    private String name\r\n    \r\n    // getter setters\r\n    \r\n    for $ref , it created \r\n    \r\n        public String get$Ref() { return this.$ref }\r\n        public String set$Ref(String $ref) { return this.$ref = $ref }\r\n\r\nwhen i call my api endpoint to test \r\n\r\nit gave me an additonal key which is \r\n\r\n    {\r\n      value:&#39;1&#39;\r\n      $Ref: &quot;Reference&quot;\r\n      name: &quot;test&quot;\r\n      $ref : &quot;Reference&quot;\r\n    }\r\n\r\nim suspecting that the setter function is causing this issue as it is in capital &#39;R&#39; but i can&#39;t change that java file as it is generated via the api.yml \r\n\r\nif there is any idea on how i can remove that $Ref.\r\n\r\nedit* adding link for the generator i used\r\n\r\nhttps://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin","link":"https://stackoverflow.com/questions/77563692/open-api-yml-generate-java-class-file-field-returning-an-additional-json-key","title":"open api.yml generate java class file , field returning an additional json key","body":"<p>I have created an api.yml file and generated them using openapi maven plugin my yml file consist of this</p>\n<pre><code> manager:\n        ...other fields\n          type: object\n          properties:\n            value:\n              type: string\n            $ref:\n              type: string\n            name:\n              type: string\n</code></pre>\n<p>It created a java file for me\nwith variables with @JsonProperty being annotated on the variables</p>\n<pre><code>private String value;\nprivate String $ref\nprivate String name\n\n// getter setters\n\nfor $ref , it created \n\n    public String get$Ref() { return this.$ref }\n    public String set$Ref(String $ref) { return this.$ref = $ref }\n</code></pre>\n<p>when i call my api endpoint to test</p>\n<p>it gave me an additonal key which is</p>\n<pre><code>{\n  value:'1'\n  $Ref: &quot;Reference&quot;\n  name: &quot;test&quot;\n  $ref : &quot;Reference&quot;\n}\n</code></pre>\n<p>im suspecting that the setter function is causing this issue as it is in capital 'R' but i can't change that java file as it is generated via the api.yml</p>\n<p>if there is any idea on how i can remove that $Ref.</p>\n<p>edit* adding link for the generator i used</p>\n<p><a href=\"https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin\" rel=\"nofollow noreferrer\">https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin</a></p>\n"},{"tags":["java","macos","intellij-idea","apple-m1","java-21"],"comments":[{"score":0,"post_type":"question","creation_date":1701185241,"post_id":77564977,"comment_id":136742346,"body_markdown":"Please see if it works with Java 17 for the project. The current IntelliJ IDEA version runs on a Java 17 version which cannot load classes from higher Java versions to show the preview.","link":"https://stackoverflow.com/questions/77564977/intellij-error-trying-to-preview-from-swing-ui-designer-gui-form#comment136742346_77564977","body":"Please see if it works with Java 17 for the project. The current IntelliJ IDEA version runs on a Java 17 version which cannot load classes from higher Java versions to show the preview."},{"score":0,"post_type":"question","creation_date":1701185648,"post_id":77564977,"comment_id":136742441,"body_markdown":"With java20 or less it works. Is there any way to make it works on java 21? The entire project is based on java 21.","link":"https://stackoverflow.com/questions/77564977/intellij-error-trying-to-preview-from-swing-ui-designer-gui-form#comment136742441_77564977","body":"With java20 or less it works. Is there any way to make it works on java 21? The entire project is based on java 21."},{"score":0,"post_type":"question","creation_date":1701185895,"post_id":77564977,"comment_id":136742487,"body_markdown":"Probably needs fixing in the IDE. Feel free to report a bug at https://youtrack.jetbrains.com/newIssue?project=IDEA.","link":"https://stackoverflow.com/questions/77564977/intellij-error-trying-to-preview-from-swing-ui-designer-gui-form#comment136742487_77564977","body":"Probably needs fixing in the IDE. Feel free to report a bug at <a href=\"https://youtrack.jetbrains.com/newIssue?project=IDEA\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/newIssue?project=IDEA</a>."}],"comment_count":3,"is_answered":false,"view_count":35,"answer_count":0,"score":0,"last_activity_date":1701185117,"creation_date":1701184276,"last_edit_date":1701185117,"question_id":77564977,"body_markdown":"i&#39;m having some issues with intellij on Macos. \r\nI&#39;ve create a new class using swing UI designer but when on the form designer i right-click on the designer and select &quot;Preview&quot; the response is this error:\r\n\r\n![INTELLIJ ERROR ON PREVIEW](https://i.stack.imgur.com/ZFwvF.png).\r\n\r\nI&#39;m using Java 21 and the same project on Windows make the preview working correctly.\r\n\r\nif I launch the application printing the main panel it works but the preview generate this error.\r\n\r\nDoes anyone know how to fix it? It&#39;s quite complicated and cumbersome to launch the application every time to check the apparence of the graphics design. \r\n\r\nThe code of the class is the following: \r\n\r\n\r\n```\r\nimport javax.swing.*;\r\nimport javax.swing.table.DefaultTableModel;\r\n\r\npublic class JTable extends JFrame {\r\n    private javax.swing.JTable table1;\r\n    private JPanel mainPanel;\r\n\r\n    public JTable() {\r\n        Object[][] data = {{&quot;Toyota&quot;, &quot;Camry&quot;, &quot;Sedan&quot;}, {&quot;Honda&quot;, &quot;Accord&quot;, &quot;Sedan&quot;}, {&quot;Ford&quot;, &quot;Mustang&quot;, &quot;Coupe&quot;}};\r\n        String[] columnNames = {&quot;Make&quot;, &quot;Model&quot;, &quot;Type&quot;};\r\n        DefaultTableModel model = new DefaultTableModel(data, columnNames);\r\n        table1.setModel(model);\r\n    }\r\n\r\n    public JPanel getMainPanel() {\r\n        return mainPanel;\r\n    }\r\n}\r\n```\r\n\r\nThanks in advance to everyone.\r\n\r\n\r\nI attempted to create a new project and changed the Java version, but the result remains unchanged.\r\n\r\nI tried the same on IntelliJ using Windows as the operating system, and it worked there.","link":"https://stackoverflow.com/questions/77564977/intellij-error-trying-to-preview-from-swing-ui-designer-gui-form","title":"Intellij Error trying to preview from SWING UI DESIGNER, GUI FORM","body":"<p>i'm having some issues with intellij on Macos.\nI've create a new class using swing UI designer but when on the form designer i right-click on the designer and select &quot;Preview&quot; the response is this error:</p>\n<p><img src=\"https://i.stack.imgur.com/ZFwvF.png\" alt=\"INTELLIJ ERROR ON PREVIEW\" />.</p>\n<p>I'm using Java 21 and the same project on Windows make the preview working correctly.</p>\n<p>if I launch the application printing the main panel it works but the preview generate this error.</p>\n<p>Does anyone know how to fix it? It's quite complicated and cumbersome to launch the application every time to check the apparence of the graphics design.</p>\n<p>The code of the class is the following:</p>\n<pre><code>import javax.swing.*;\nimport javax.swing.table.DefaultTableModel;\n\npublic class JTable extends JFrame {\n    private javax.swing.JTable table1;\n    private JPanel mainPanel;\n\n    public JTable() {\n        Object[][] data = {{&quot;Toyota&quot;, &quot;Camry&quot;, &quot;Sedan&quot;}, {&quot;Honda&quot;, &quot;Accord&quot;, &quot;Sedan&quot;}, {&quot;Ford&quot;, &quot;Mustang&quot;, &quot;Coupe&quot;}};\n        String[] columnNames = {&quot;Make&quot;, &quot;Model&quot;, &quot;Type&quot;};\n        DefaultTableModel model = new DefaultTableModel(data, columnNames);\n        table1.setModel(model);\n    }\n\n    public JPanel getMainPanel() {\n        return mainPanel;\n    }\n}\n</code></pre>\n<p>Thanks in advance to everyone.</p>\n<p>I attempted to create a new project and changed the Java version, but the result remains unchanged.</p>\n<p>I tried the same on IntelliJ using Windows as the operating system, and it worked there.</p>\n"},{"tags":["java","spring-mvc","jms","activemq","amazon-mq"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1701185045,"creation_date":1701185045,"answer_id":77565084,"question_id":77563265,"body_markdown":"Yes, the onMessage() method is called one-at-a-time. \r\n\r\nIf you want a strict 1 message per-consumer design, you&#39;ll want to use a couple of features:\r\n\r\n1. ActiveMQ.INDIVIDUAL_ACKNOWLEDGE acknowledgement mode. When you processing is complete in the onMessage(), you then call message.acknowledge()\r\n\r\n        public void onMessage(Message message) {\r\n           ... do things ..\r\n           message.acknowledge()\r\n        }\r\n\r\n2. Set prefetch to 0 or 1\r\n\r\nCommon use cases for _strict_ 1 message per-consumer would be long running tasks, or industrial applications. For general enterprise data processing, this is not a practical design pattern.\r\n\r\n!!! Keep in mind, this design _drastically_ drops consuming performance due to the time waiting for the back-and-forth communication. The big advantage of ActiveMQ is its ability to use prefetch, which overcomes this latency. \r\n\r\nAnother way to think about the design is that each consumer may be responsible for a _batch_ of messages. For example, 1,000. or 100. Whatever that _batch size_ works for your app-- use that as the prefetch to keep messages moving.","link":"https://stackoverflow.com/questions/77563265/configuring-maximum-concurrent-message-processing-in-amazon-mq-w-activemq-with-j/77565084#77565084","title":"Configuring Maximum Concurrent Message Processing in Amazon MQ w/ActiveMQ with JMS","body":"<p>Yes, the onMessage() method is called one-at-a-time.</p>\n<p>If you want a strict 1 message per-consumer design, you'll want to use a couple of features:</p>\n<ol>\n<li><p>ActiveMQ.INDIVIDUAL_ACKNOWLEDGE acknowledgement mode. When you processing is complete in the onMessage(), you then call message.acknowledge()</p>\n<pre><code> public void onMessage(Message message) {\n    ... do things ..\n    message.acknowledge()\n }\n</code></pre>\n</li>\n<li><p>Set prefetch to 0 or 1</p>\n</li>\n</ol>\n<p>Common use cases for <em>strict</em> 1 message per-consumer would be long running tasks, or industrial applications. For general enterprise data processing, this is not a practical design pattern.</p>\n<p>!!! Keep in mind, this design <em>drastically</em> drops consuming performance due to the time waiting for the back-and-forth communication. The big advantage of ActiveMQ is its ability to use prefetch, which overcomes this latency.</p>\n<p>Another way to think about the design is that each consumer may be responsible for a <em>batch</em> of messages. For example, 1,000. or 100. Whatever that <em>batch size</em> works for your app-- use that as the prefetch to keep messages moving.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":33,"answer_count":1,"score":0,"last_activity_date":1701185045,"creation_date":1701168564,"last_edit_date":1701179813,"question_id":77563265,"body_markdown":"I&#39;m trying to understand how to integrate Amazon MQ using the ActiveMQ Engine and the JMS protocol into my application. The main goal is to slow down certain processes and execute them sequentially in a queue.\r\n\r\nI&#39;ve been exploring JMS integration because it simplifies the implementation of a listener to asynchronously receive messages from the queue whenever a sender pushes them into the queue. However, it&#39;s unclear to me whether the messages are consumed one-by-one. I require that, for each consumer, only one message is processed at a time. This way, I can track the maximum number of messages being processed across the entire nodes cluster at a specific moment, ensuring only one message is handled per node.\r\n\r\nOr, at the very least, I need a way to set a maximum number of messages processed by a consumer simultaneously.\r\n\r\n\r\n\r\nHere&#39;s an example of my code for a consumer deployed on each node:\r\n\r\n```java\r\n@Singleton\r\npublic class MmfgActiveMqConsumer {\r\n\r\n    Logger LOG = LogManager.getLogger(MmfgActiveMqConsumer.class);\r\n\r\n    // Specify the connection parameters.\r\n    private final static String WIRE_LEVEL_ENDPOINT\r\n            = &quot;ssl://b-1234a5b6-78cd-901e-2fgh-3i45j6k178l9-1.mq.us-east-2.amazonaws.com:61617&quot;;\r\n    private final static String ACTIVE_MQ_USERNAME = &quot;MyUsername123&quot;;\r\n    private final static String ACTIVE_MQ_PASSWORD = &quot;MyPassword456&quot;;\r\n\r\n    @PostConstruct\r\n    public void init() {\r\n        // Start to listen to ActiveMq Queue\r\n        listenToQueue();\r\n    }\r\n\r\n    public void listenToQueue() {\r\n        // Configure connection and session\r\n\r\n        new Thread(() -&gt; {\r\n            try {\r\n                final ActiveMQConnectionFactory connectionFactory = createActiveMQConnectionFactory();\r\n                receiveMessage(connectionFactory);\r\n            } catch (Exception e) {\r\n                Thread.currentThread().interrupt();\r\n            }\r\n        }).start();\r\n    }\r\n\r\n    private static void receiveMessage(ActiveMQConnectionFactory connectionFactory) throws JMSException {\r\n        // Establish a connection for the consumer.\r\n        // Note: Consumers should not use PooledConnectionFactory.\r\n        final Connection consumerConnection = connectionFactory.createConnection();\r\n        consumerConnection.start();\r\n\r\n        // Create a session.\r\n        final Session consumerSession = consumerConnection\r\n                .createSession(false, Session.AUTO_ACKNOWLEDGE);\r\n\r\n        // Create a queue named &quot;MyQueue&quot;.\r\n        final Destination consumerDestination = consumerSession\r\n                .createQueue(&quot;MyQueue&quot;);\r\n\r\n        // Create a message consumer from the session to the queue.\r\n        final MessageConsumer consumer = consumerSession\r\n                .createConsumer(consumerDestination);\r\n\r\n        consumer.setMessageListener(new ActiveMqMessageListener());\r\n\r\n        // Thread sleep logic\r\n        //TODO\r\n        // Clean up the consumer.\r\n        consumer.close();\r\n        consumerSession.close();\r\n\r\n    }\r\n\r\n    private static ActiveMQConnectionFactory createActiveMQConnectionFactory() {\r\n        // Create a connection factory.\r\n        final ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(WIRE_LEVEL_ENDPOINT);\r\n\r\n        // Pass the sign-in credentials.\r\n        connectionFactory.setUserName(ACTIVE_MQ_USERNAME);\r\n        connectionFactory.setPassword(ACTIVE_MQ_PASSWORD);\r\n        return connectionFactory;\r\n    }\r\n}\r\n```\r\n\r\nThis is the Listener that is set inside the consumer:\r\n\r\n```java\r\npublic class ActiveMqMessageListener implements MessageListener {\r\n\r\n    private Logger LOG = LogManager.getLogger(ActiveMqMessageListener.class);\r\n\r\n    @Override\r\n    public void onMessage(Message message) {\r\n        if (message instanceof TextMessage textMessage) {\r\n            try {\r\n                String payload = textMessage.getText();\r\n                LOG.info(&quot;Message receive from ActiveMq Queue: &quot; + payload);\r\n            } catch (JMSException e) {\r\n                LOG.error(&quot;Error receiving message from ActiveMq Queue: &quot; + e);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\nIs it correct that each time a message is pushed to the queue, the `onMessage()` method is invoked once, and the next message will wait in the queue until the method finishes its execution?\r\n\r\nHow would you recommend achieving this or is there a specific configuration in Amazon MQ or ActiveMQ that allows setting a maximum limit on the number of messages processed concurrently by a JMS consumer? Any insights or code examples would be greatly appreciated.","link":"https://stackoverflow.com/questions/77563265/configuring-maximum-concurrent-message-processing-in-amazon-mq-w-activemq-with-j","title":"Configuring Maximum Concurrent Message Processing in Amazon MQ w/ActiveMQ with JMS","body":"<p>I'm trying to understand how to integrate Amazon MQ using the ActiveMQ Engine and the JMS protocol into my application. The main goal is to slow down certain processes and execute them sequentially in a queue.</p>\n<p>I've been exploring JMS integration because it simplifies the implementation of a listener to asynchronously receive messages from the queue whenever a sender pushes them into the queue. However, it's unclear to me whether the messages are consumed one-by-one. I require that, for each consumer, only one message is processed at a time. This way, I can track the maximum number of messages being processed across the entire nodes cluster at a specific moment, ensuring only one message is handled per node.</p>\n<p>Or, at the very least, I need a way to set a maximum number of messages processed by a consumer simultaneously.</p>\n<p>Here's an example of my code for a consumer deployed on each node:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Singleton\npublic class MmfgActiveMqConsumer {\n\n    Logger LOG = LogManager.getLogger(MmfgActiveMqConsumer.class);\n\n    // Specify the connection parameters.\n    private final static String WIRE_LEVEL_ENDPOINT\n            = &quot;ssl://b-1234a5b6-78cd-901e-2fgh-3i45j6k178l9-1.mq.us-east-2.amazonaws.com:61617&quot;;\n    private final static String ACTIVE_MQ_USERNAME = &quot;MyUsername123&quot;;\n    private final static String ACTIVE_MQ_PASSWORD = &quot;MyPassword456&quot;;\n\n    @PostConstruct\n    public void init() {\n        // Start to listen to ActiveMq Queue\n        listenToQueue();\n    }\n\n    public void listenToQueue() {\n        // Configure connection and session\n\n        new Thread(() -&gt; {\n            try {\n                final ActiveMQConnectionFactory connectionFactory = createActiveMQConnectionFactory();\n                receiveMessage(connectionFactory);\n            } catch (Exception e) {\n                Thread.currentThread().interrupt();\n            }\n        }).start();\n    }\n\n    private static void receiveMessage(ActiveMQConnectionFactory connectionFactory) throws JMSException {\n        // Establish a connection for the consumer.\n        // Note: Consumers should not use PooledConnectionFactory.\n        final Connection consumerConnection = connectionFactory.createConnection();\n        consumerConnection.start();\n\n        // Create a session.\n        final Session consumerSession = consumerConnection\n                .createSession(false, Session.AUTO_ACKNOWLEDGE);\n\n        // Create a queue named &quot;MyQueue&quot;.\n        final Destination consumerDestination = consumerSession\n                .createQueue(&quot;MyQueue&quot;);\n\n        // Create a message consumer from the session to the queue.\n        final MessageConsumer consumer = consumerSession\n                .createConsumer(consumerDestination);\n\n        consumer.setMessageListener(new ActiveMqMessageListener());\n\n        // Thread sleep logic\n        //TODO\n        // Clean up the consumer.\n        consumer.close();\n        consumerSession.close();\n\n    }\n\n    private static ActiveMQConnectionFactory createActiveMQConnectionFactory() {\n        // Create a connection factory.\n        final ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(WIRE_LEVEL_ENDPOINT);\n\n        // Pass the sign-in credentials.\n        connectionFactory.setUserName(ACTIVE_MQ_USERNAME);\n        connectionFactory.setPassword(ACTIVE_MQ_PASSWORD);\n        return connectionFactory;\n    }\n}\n</code></pre>\n<p>This is the Listener that is set inside the consumer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ActiveMqMessageListener implements MessageListener {\n\n    private Logger LOG = LogManager.getLogger(ActiveMqMessageListener.class);\n\n    @Override\n    public void onMessage(Message message) {\n        if (message instanceof TextMessage textMessage) {\n            try {\n                String payload = textMessage.getText();\n                LOG.info(&quot;Message receive from ActiveMq Queue: &quot; + payload);\n            } catch (JMSException e) {\n                LOG.error(&quot;Error receiving message from ActiveMq Queue: &quot; + e);\n            }\n        }\n    }\n}\n</code></pre>\n<p>Is it correct that each time a message is pushed to the queue, the <code>onMessage()</code> method is invoked once, and the next message will wait in the queue until the method finishes its execution?</p>\n<p>How would you recommend achieving this or is there a specific configuration in Amazon MQ or ActiveMQ that allows setting a maximum limit on the number of messages processed concurrently by a JMS consumer? Any insights or code examples would be greatly appreciated.</p>\n"},{"tags":["java","html","angular","spring-boot","bootstrap-4"],"comments":[{"score":0,"post_type":"question","creation_date":1701180716,"post_id":77564527,"comment_id":136741399,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551)","link":"https://stackoverflow.com/questions/77564527/how-can-i-get-the-for-each-ground-his-owner-and-display-it-in-table-spring-boot#comment136741399_77564527","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a>"},{"score":0,"post_type":"question","creation_date":1701180824,"post_id":77564527,"comment_id":136741425,"body_markdown":"It would be helpful if you could provide a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) that shows the problem or error you&#39;re having, ideally in an online code editor like [Stackblitz](https://www.stackblitz.com).","link":"https://stackoverflow.com/questions/77564527/how-can-i-get-the-for-each-ground-his-owner-and-display-it-in-table-spring-boot#comment136741425_77564527","body":"It would be helpful if you could provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that shows the problem or error you&#39;re having, ideally in an online code editor like <a href=\"https://www.stackblitz.com\" rel=\"nofollow noreferrer\">Stackblitz</a>."}],"comment_count":2,"is_answered":false,"view_count":29,"answer_count":0,"score":0,"last_activity_date":1701184954,"creation_date":1701180269,"last_edit_date":1701184954,"question_id":77564527,"body_markdown":"In my Spring Boot project, this query returns the owner of a ground:\r\n![enter image description here](https://i.stack.imgur.com/VshC3.png)\r\n\r\nThis is the API:\r\n![enter image description here](https://i.stack.imgur.com/LpJ12.png)\r\n\r\nThis is the service in the Angular frontend:\r\n![enter image description here](https://i.stack.imgur.com/5YVvb.png)\r\n\r\nThis is the component:\r\n![enter image description here](https://i.stack.imgur.com/CZJxt.png)\r\n\r\nHow can i call this API from Angular in order to display it in the `&lt;span&gt;` here?\r\n![enter image description here](https://i.stack.imgur.com/S18aR.png)\r\n\r\nI need to display the owner for each ground instead of showing all owners.\r\n![here ](https://i.stack.imgur.com/vvKuH.png)\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DcVZG.png","link":"https://stackoverflow.com/questions/77564527/how-can-i-get-the-for-each-ground-his-owner-and-display-it-in-table-spring-boot","title":"how can i get the for each ground his owner and display it in table spring boot and angular","body":"<p>In my Spring Boot project, this query returns the owner of a ground:\n<img src=\"https://i.stack.imgur.com/VshC3.png\" alt=\"enter image description here\" /></p>\n<p>This is the API:\n<img src=\"https://i.stack.imgur.com/LpJ12.png\" alt=\"enter image description here\" /></p>\n<p>This is the service in the Angular frontend:\n<img src=\"https://i.stack.imgur.com/5YVvb.png\" alt=\"enter image description here\" /></p>\n<p>This is the component:\n<img src=\"https://i.stack.imgur.com/CZJxt.png\" alt=\"enter image description here\" /></p>\n<p>How can i call this API from Angular in order to display it in the <code>&lt;span&gt;</code> here?\n<img src=\"https://i.stack.imgur.com/S18aR.png\" alt=\"enter image description here\" /></p>\n<p>I need to display the owner for each ground instead of showing all owners.\n<img src=\"https://i.stack.imgur.com/vvKuH.png\" alt=\"here \" /></p>\n"},{"tags":["java","swing","jtable","jbutton"],"comments":[{"score":0,"post_type":"question","creation_date":1701149073,"post_id":77561441,"comment_id":136736282,"body_markdown":"For [example](https://stackoverflow.com/questions/17565169/unable-to-add-two-buttons-in-a-single-cell-in-a-jtable/17565826#17565826); [example](https://stackoverflow.com/questions/55801030/how-to-make-jbutton-clickable-in-jtable/55801928#55801928); [example](https://stackoverflow.com/questions/51841524/remove-a-row-from-jtable-with-jbutton/51842086#51842086); [example](https://stackoverflow.com/questions/24625083/how-to-delete-a-row-from-jtable/24626105#24626105)","link":"https://stackoverflow.com/questions/77561441/how-to-insert-a-button-in-a-jtable-cell#comment136736282_77561441","body":"For <a href=\"https://stackoverflow.com/questions/17565169/unable-to-add-two-buttons-in-a-single-cell-in-a-jtable/17565826#17565826\">example</a>; <a href=\"https://stackoverflow.com/questions/55801030/how-to-make-jbutton-clickable-in-jtable/55801928#55801928\">example</a>; <a href=\"https://stackoverflow.com/questions/51841524/remove-a-row-from-jtable-with-jbutton/51842086#51842086\">example</a>; <a href=\"https://stackoverflow.com/questions/24625083/how-to-delete-a-row-from-jtable/24626105#24626105\">example</a>"},{"score":0,"post_type":"question","creation_date":1701149288,"post_id":77561441,"comment_id":136736305,"body_markdown":"But I generally prefer to do something like [this](https://stackoverflow.com/questions/25070511/add-jbutton-to-each-row-of-a-jtable/25071138#25071138) in most cases","link":"https://stackoverflow.com/questions/77561441/how-to-insert-a-button-in-a-jtable-cell#comment136736305_77561441","body":"But I generally prefer to do something like <a href=\"https://stackoverflow.com/questions/25070511/add-jbutton-to-each-row-of-a-jtable/25071138#25071138\">this</a> in most cases"}],"comment_count":2,"is_answered":false,"view_count":28,"answer_count":0,"score":0,"last_activity_date":1701184181,"creation_date":1701147497,"last_edit_date":1701184181,"question_id":77561441,"body_markdown":"I tried this code but my button is just visible but not clickable and in addition how do I add an icon, when I choose an image as an icon the button is resized to the size of that image which doesn&#39;t look nice\r\nHere is my code:\r\n&#39;&#39;&#39; dataview.getColumnModel().getColumn(4).setCellRenderer(new ButtonRenderer());\r\n                \r\n//SET OUR CUSTOM EDITOR TO OUR COLUMN\r\n                \r\ndataview.getColumnModel().getColumn(4).setCellEditor(new ButtonEditor(new JTextField()));\r\n                \r\nclass ButtonRenderer extends JButton implements TableCellRenderer {\r\n\r\n        public ButtonRenderer() {\r\n            setOpaque(true);\r\n        }\r\n\r\n        @Override\r\n        public Component getTableCellRendererComponent(JTable dataview, Object obj, boolean selected, boolean focused, int row, int col) {\r\n           \r\n            setText((obj==null) ? &quot;&quot; : obj.toString());\r\n            return this;\r\n        }\r\n    }\r\n\r\n    class ButtonEditor extends DefaultCellEditor{\r\n        \r\n        protected JButton btn;\r\n        protected String lbl;\r\n        protected Boolean clicked; \r\n        \r\n        public ButtonEditor(JTextField txt) {\r\n            super(txt);\r\n            \r\n            btn = new JButton();\r\n            btn.setOpaque(true);\r\n            \r\n            \r\n            //WHEN BUTTON IS CLICKED.\r\n            btn.addActionListener((ActionEvent e) -&gt; {\r\n                fireEditingStopped();\r\n            });\r\n        \r\n        }\r\n        \r\n        @Override\r\n        public Component getTableCellEditorComponent(JTable dataview, Object obj, boolean selected, int row, int col) {\r\n            \r\n            //SET BUTTON TEXT, SET CLICKED TO TRUE, THEN RETURN THE BIN OBJECT\r\n            lbl = (obj==null)?&quot;&quot;:obj.toString();\r\n            btn.setText(lbl);\r\n            clicked = true;\r\n            \r\n            return btn;\r\n        }\r\n\r\n        @Override\r\n        public Object getCellEditorValue() {\r\n            \r\n            if(clicked){\r\n                JOptionPane.showMessageDialog(btn, lbl+&quot; Clicked&quot;);\r\n                \r\n            }\r\n            clicked=false;\r\n            return lbl;\r\n            \r\n        }\r\n\r\n        @Override\r\n        public boolean stopCellEditing() {\r\n            //SET CLICKED TO FALSE\r\n            clicked = false;\r\n            return super.stopCellEditing();\r\n        }\r\n        @Override\r\n        protected void fireEditingStopped(){\r\n            super.fireEditingStopped();\r\n        }\r\n    }\r\n}&#39;&#39;&#39;","link":"https://stackoverflow.com/questions/77561441/how-to-insert-a-button-in-a-jtable-cell","title":"How to insert a button in a jtable cell","body":"<p>I tried this code but my button is just visible but not clickable and in addition how do I add an icon, when I choose an image as an icon the button is resized to the size of that image which doesn't look nice\nHere is my code:\n''' dataview.getColumnModel().getColumn(4).setCellRenderer(new ButtonRenderer());</p>\n<p>//SET OUR CUSTOM EDITOR TO OUR COLUMN</p>\n<p>dataview.getColumnModel().getColumn(4).setCellEditor(new ButtonEditor(new JTextField()));</p>\n<p>class ButtonRenderer extends JButton implements TableCellRenderer {</p>\n<pre><code>    public ButtonRenderer() {\n        setOpaque(true);\n    }\n\n    @Override\n    public Component getTableCellRendererComponent(JTable dataview, Object obj, boolean selected, boolean focused, int row, int col) {\n       \n        setText((obj==null) ? &quot;&quot; : obj.toString());\n        return this;\n    }\n}\n\nclass ButtonEditor extends DefaultCellEditor{\n    \n    protected JButton btn;\n    protected String lbl;\n    protected Boolean clicked; \n    \n    public ButtonEditor(JTextField txt) {\n        super(txt);\n        \n        btn = new JButton();\n        btn.setOpaque(true);\n        \n        \n        //WHEN BUTTON IS CLICKED.\n        btn.addActionListener((ActionEvent e) -&gt; {\n            fireEditingStopped();\n        });\n    \n    }\n    \n    @Override\n    public Component getTableCellEditorComponent(JTable dataview, Object obj, boolean selected, int row, int col) {\n        \n        //SET BUTTON TEXT, SET CLICKED TO TRUE, THEN RETURN THE BIN OBJECT\n        lbl = (obj==null)?&quot;&quot;:obj.toString();\n        btn.setText(lbl);\n        clicked = true;\n        \n        return btn;\n    }\n\n    @Override\n    public Object getCellEditorValue() {\n        \n        if(clicked){\n            JOptionPane.showMessageDialog(btn, lbl+&quot; Clicked&quot;);\n            \n        }\n        clicked=false;\n        return lbl;\n        \n    }\n\n    @Override\n    public boolean stopCellEditing() {\n        //SET CLICKED TO FALSE\n        clicked = false;\n        return super.stopCellEditing();\n    }\n    @Override\n    protected void fireEditingStopped(){\n        super.fireEditingStopped();\n    }\n}\n</code></pre>\n<p>}'''</p>\n"},{"tags":["java","postgresql","spring-boot","spring-data","spring-data-jdbc"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701101595,"post_id":77558306,"comment_id":136730429,"body_markdown":"Still does not work. This time with this exception:\nCaused by: org.springframework.dao.IncorrectUpdateSemanticsDataAccessException: Failed to update entity [Season{id=-1, name=&#39;firstSeason&#39;, episodes=[Episode{id=-1, name=&#39;firstEpisode&#39;}, Episode{id=-1, name=&#39;secondEpisode&#39;}]}]; Id [-1] not found in database","link":"https://stackoverflow.com/questions/77558263/how-to-save-one-to-many-entities-to-postgresql-with-spring-data-jdbc/77558306#comment136730429_77558306","body":"Still does not work. This time with this exception: Caused by: org.springframework.dao.IncorrectUpdateSemanticsDataAccessEx&zwnj;&#8203;ception: Failed to update entity [Season{id=-1, name=&#39;firstSeason&#39;, episodes=[Episode{id=-1, name=&#39;firstEpisode&#39;}, Episode{id=-1, name=&#39;secondEpisode&#39;}]}]; Id [-1] not found in database"},{"score":0,"post_type":"answer","creation_date":1701102185,"post_id":77558306,"comment_id":136730527,"body_markdown":"Annotate the method `saveToDatabase` with `@Transactional`","link":"https://stackoverflow.com/questions/77558263/how-to-save-one-to-many-entities-to-postgresql-with-spring-data-jdbc/77558306#comment136730527_77558306","body":"Annotate the method <code>saveToDatabase</code> with <code>@Transactional</code>"},{"score":0,"post_type":"answer","creation_date":1701108017,"post_id":77558306,"comment_id":136731627,"body_markdown":"Still does not work. Same exception as in my previous comment.","link":"https://stackoverflow.com/questions/77558263/how-to-save-one-to-many-entities-to-postgresql-with-spring-data-jdbc/77558306#comment136731627_77558306","body":"Still does not work. Same exception as in my previous comment."}],"comment_count":3,"score":0,"last_activity_date":1701101062,"creation_date":1701101062,"answer_id":77558306,"question_id":77558263,"body_markdown":"The `id` of a **new** entity is `-1` instead of zero or you can leave it as `null`. \r\n\r\nUpdate the code to the following:\r\n\r\n    public Season(String name)\r\n    {\r\n        this(-1L, name, new ArrayList&lt;&gt;());\r\n    }\r\n\r\n    public Episode(String name)\r\n    {\r\n        this(-1L, name);\r\n    }","link":"https://stackoverflow.com/questions/77558263/how-to-save-one-to-many-entities-to-postgresql-with-spring-data-jdbc/77558306#77558306","title":"How to save one-to-many entities to PostgreSQL with Spring Data JDBC?","body":"<p>The <code>id</code> of a <strong>new</strong> entity is <code>-1</code> instead of zero or you can leave it as <code>null</code>.</p>\n<p>Update the code to the following:</p>\n<pre><code>public Season(String name)\n{\n    this(-1L, name, new ArrayList&lt;&gt;());\n}\n\npublic Episode(String name)\n{\n    this(-1L, name);\n}\n</code></pre>\n"},{"comments":[{"score":1,"post_type":"answer","creation_date":1701179957,"post_id":77560238,"comment_id":136741256,"body_markdown":"Wow. Rewriting @MappedCollection annotation and changing List to Set really worked! Thank you.\nCan you maybe provide a link to documentation? Why can&#39;t I use a List?","link":"https://stackoverflow.com/questions/77558263/how-to-save-one-to-many-entities-to-postgresql-with-spring-data-jdbc/77560238#comment136741256_77560238","body":"Wow. Rewriting @MappedCollection annotation and changing List to Set really worked! Thank you. Can you maybe provide a link to documentation? Why can&#39;t I use a List?"}],"comment_count":1,"score":0,"last_activity_date":1701183978,"last_edit_date":1701183978,"creation_date":1701123325,"answer_id":77560238,"question_id":77558263,"body_markdown":"Try to change your code like this:\r\n```\r\n@MappedCollection(idColumn = &quot;seasonid&quot;)\r\nprivate Set&lt; Season &gt; season = new HashSet&lt;&gt;();\r\n    \r\npublic void addSeason(Season s) {\r\n    this.season.add(s);\r\n}\r\n```\r\nThen change your Episode class as follows:\r\n```\r\nTable(&quot;episode&quot;)\r\npublic class Episode\r\n{\r\n    @Id\r\n    private long id;\r\n    /// rest of the stuff\r\n}\r\n```\r\n\r\nFinally, remove this part: `this(0, name, new ArrayList&lt;&gt;());`\r\n","link":"https://stackoverflow.com/questions/77558263/how-to-save-one-to-many-entities-to-postgresql-with-spring-data-jdbc/77560238#77560238","title":"How to save one-to-many entities to PostgreSQL with Spring Data JDBC?","body":"<p>Try to change your code like this:</p>\n<pre><code>@MappedCollection(idColumn = &quot;seasonid&quot;)\nprivate Set&lt; Season &gt; season = new HashSet&lt;&gt;();\n    \npublic void addSeason(Season s) {\n    this.season.add(s);\n}\n</code></pre>\n<p>Then change your Episode class as follows:</p>\n<pre><code>Table(&quot;episode&quot;)\npublic class Episode\n{\n    @Id\n    private long id;\n    /// rest of the stuff\n}\n</code></pre>\n<p>Finally, remove this part: <code>this(0, name, new ArrayList&lt;&gt;());</code></p>\n"}],"comment_count":0,"is_answered":true,"view_count":65,"answer_count":2,"score":-1,"last_activity_date":1701183978,"creation_date":1701100652,"question_id":77558263,"body_markdown":"I am trying to save one-to-many entities to PostgreSQL database using Spring Boot and Spring Data JDBC.\r\n\r\nMain application code:\r\n```\r\n@SpringBootApplication\r\npublic class TvApplication\r\n{\r\n\t@Autowired\r\n\tprivate SeasonRepository seasonRepository;\r\n\t@EventListener(ApplicationReadyEvent.class)\r\n\tpublic void saveToDatabase()\r\n\t{\r\n\t\tEpisode episode1 = new Episode(&quot;firstEpisode&quot;);\r\n\t\tEpisode episode2 = new Episode(&quot;secondEpisode&quot;);\r\n\t\tSeason season = new Season(&quot;firstSeason&quot;);\r\n\t\tseason.addEpisode(episode1);\r\n\t\tseason.addEpisode(episode2);\r\n\t\tseasonRepository.save(season);\r\n\t}\r\n}\r\n```\r\n\r\nSeason class:\r\n```\r\n@Table(&quot;season&quot;)\r\npublic class Season\r\n{\r\n    @Id\r\n    @Column(&quot;id&quot;)\r\n    private long id;\r\n    @Column(&quot;name&quot;)\r\n    private String name;\r\n    @MappedCollection(idColumn = &quot;id&quot;, keyColumn = &quot;seasonid&quot;)\r\n    private List&lt;Episode&gt; episodes;\r\n    public Season(long id, String name, List&lt;Episode&gt; episodes)\r\n    {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.episodes = episodes;\r\n    }\r\n    public Season(String name)\r\n    {\r\n        this(0, name, new ArrayList&lt;&gt;());\r\n    }\r\n    public void addEpisode(Episode episode)\r\n    {\r\n        episodes.add(episode);\r\n    }\r\n```\r\n\r\nEpisode class:\r\n```\r\n@Table(&quot;episode&quot;)\r\npublic class Episode\r\n{\r\n    @Id()\r\n    @Column(&quot;id&quot;)\r\n    private long id;\r\n    @Column(&quot;name&quot;)\r\n    private String name;\r\n    public Episode(long id, String name)\r\n    {\r\n        this.id = id;\r\n        this.name = name;\r\n    }\r\n    public Episode(String name)\r\n    {\r\n        this(0, name);\r\n    }\r\n```\r\n\r\nWhat I get is this exception:\r\n```\r\norg.postgresql.util.PSQLException: ERROR: insert or update on table &quot;episode&quot; violates foreign key constraint &quot;episode_seasonid_fkey&quot;\r\nDetail: Key (seasonid)=(0) is not present in table &quot;season&quot;\r\n```\r\n\r\nI think that Spring cannot read auto-generated key from table &quot;season&quot;.\r\n\r\n","link":"https://stackoverflow.com/questions/77558263/how-to-save-one-to-many-entities-to-postgresql-with-spring-data-jdbc","title":"How to save one-to-many entities to PostgreSQL with Spring Data JDBC?","body":"<p>I am trying to save one-to-many entities to PostgreSQL database using Spring Boot and Spring Data JDBC.</p>\n<p>Main application code:</p>\n<pre><code>@SpringBootApplication\npublic class TvApplication\n{\n    @Autowired\n    private SeasonRepository seasonRepository;\n    @EventListener(ApplicationReadyEvent.class)\n    public void saveToDatabase()\n    {\n        Episode episode1 = new Episode(&quot;firstEpisode&quot;);\n        Episode episode2 = new Episode(&quot;secondEpisode&quot;);\n        Season season = new Season(&quot;firstSeason&quot;);\n        season.addEpisode(episode1);\n        season.addEpisode(episode2);\n        seasonRepository.save(season);\n    }\n}\n</code></pre>\n<p>Season class:</p>\n<pre><code>@Table(&quot;season&quot;)\npublic class Season\n{\n    @Id\n    @Column(&quot;id&quot;)\n    private long id;\n    @Column(&quot;name&quot;)\n    private String name;\n    @MappedCollection(idColumn = &quot;id&quot;, keyColumn = &quot;seasonid&quot;)\n    private List&lt;Episode&gt; episodes;\n    public Season(long id, String name, List&lt;Episode&gt; episodes)\n    {\n        this.id = id;\n        this.name = name;\n        this.episodes = episodes;\n    }\n    public Season(String name)\n    {\n        this(0, name, new ArrayList&lt;&gt;());\n    }\n    public void addEpisode(Episode episode)\n    {\n        episodes.add(episode);\n    }\n</code></pre>\n<p>Episode class:</p>\n<pre><code>@Table(&quot;episode&quot;)\npublic class Episode\n{\n    @Id()\n    @Column(&quot;id&quot;)\n    private long id;\n    @Column(&quot;name&quot;)\n    private String name;\n    public Episode(long id, String name)\n    {\n        this.id = id;\n        this.name = name;\n    }\n    public Episode(String name)\n    {\n        this(0, name);\n    }\n</code></pre>\n<p>What I get is this exception:</p>\n<pre><code>org.postgresql.util.PSQLException: ERROR: insert or update on table &quot;episode&quot; violates foreign key constraint &quot;episode_seasonid_fkey&quot;\nDetail: Key (seasonid)=(0) is not present in table &quot;season&quot;\n</code></pre>\n<p>I think that Spring cannot read auto-generated key from table &quot;season&quot;.</p>\n"},{"tags":["java","json","spring-boot"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1700677985,"creation_date":1700677985,"answer_id":77532376,"question_id":77532150,"body_markdown":"To get the output that you want you muste create a custom class which has the attributes, like that:\r\n\r\nClass `Address`\r\n```\r\nclass Address{\r\n\r\n    @JsonProperty(&quot;Address&quot;)\r\n    private String address;\r\n\r\n    @JsonProperty(&quot;Village&quot;)\r\n    private String village;\r\n\r\n    @JsonProperty(&quot;Pincode&quot;)\r\n    private String pinCode;\r\n}\r\n```\r\n\r\nThen the Class which contains all `CustomData`, like that:\r\n```\r\nclass CustomData {\r\n    @JsonProperty(&quot;First Name&quot;)\r\n    private String firstName;\r\n\r\n    @JsonProperty(&quot;Middle Name&quot;)\r\n    private String middleName;\r\n\r\n    @JsonProperty(&quot;Last Name&quot;)\r\n    private String lastName;\r\n\r\n    @JsonProperty(&quot;Date of Birth&quot;)\r\n    private String dateOfBirth;\r\n\r\n    private Address address = new Address();\r\n\r\n    @JsonProperty(&quot;License Number&quot;)\r\n    private String licenseNumber;\r\n\r\n    // Getters and setters\r\n\r\n    @JsonProperty(&quot;Address&quot;)\r\n    private void setAddress(String val){\r\n        address.setAddress(val);\r\n    }\r\n\r\n    @JsonProperty(&quot;Village&quot;)\r\n    private void setVillage(String val){\r\n        address.setVillage(val);\r\n    }\r\n\r\n    @JsonProperty(&quot;Pincode&quot;)\r\n    private void setPinCode(String val){\r\n        address.setPinCode(val);\r\n    }\r\n}\r\n``` \r\nTEST:\r\n\r\n```\r\n public static void main(String[] args) throws Exception {\r\n        // Input JSON\r\n        String inputJson = &quot;&quot;&quot;\r\n                {\r\n                  &quot;First Name&quot;: &quot;XX&quot;,\r\n                  &quot;Middle Name&quot;: &quot;&quot;,\r\n                  &quot;Last Name&quot;: &quot;XX&quot;,\r\n                  &quot;Date of Birth&quot;: &quot;11/12/2013&quot;,\r\n                  &quot;Address&quot;: &quot;XXX&quot;,\r\n                  &quot;Village&quot;: &quot;XXX&quot;,\r\n                  &quot;Pincode&quot;: &quot;34234&quot;,\r\n                  &quot;License Number&quot;: &quot;1234567890&quot;\r\n                }\r\n                &quot;&quot;&quot;;\r\n\r\n        CustomData res = JsonMapper.builder().build().readValue(inputJson, CustomData.class);\r\n\r\n        System.out.println(JsonMapper.builder().build().writerWithDefaultPrettyPrinter().writeValueAsString(res));\r\n\r\n    }\r\n}\r\n```\r\n\r\nOUTPUT:\r\n```\r\n{\r\n  &quot;First Name&quot; : &quot;XX&quot;,\r\n  &quot;Middle Name&quot; : &quot;&quot;,\r\n  &quot;Last Name&quot; : &quot;XX&quot;,\r\n  &quot;Date of Birth&quot; : &quot;11/12/2013&quot;,\r\n  &quot;Address&quot; : {\r\n    &quot;Address&quot; : &quot;XXX&quot;,\r\n    &quot;Village&quot; : &quot;XXX&quot;,\r\n    &quot;Pincode&quot; : &quot;34234&quot;\r\n  },\r\n  &quot;License Number&quot; : &quot;1234567890&quot;\r\n}\r\n```\r\n\r\nTry it and let me know.","link":"https://stackoverflow.com/questions/77532150/java-input-json-to-output-json-conversion-should-be-based-on-json-schema-confi/77532376#77532376","title":"Java - input JSON to output JSON conversion should be based on JSON schema configuration","body":"<p>To get the output that you want you muste create a custom class which has the attributes, like that:</p>\n<p>Class <code>Address</code></p>\n<pre><code>class Address{\n\n    @JsonProperty(&quot;Address&quot;)\n    private String address;\n\n    @JsonProperty(&quot;Village&quot;)\n    private String village;\n\n    @JsonProperty(&quot;Pincode&quot;)\n    private String pinCode;\n}\n</code></pre>\n<p>Then the Class which contains all <code>CustomData</code>, like that:</p>\n<pre><code>class CustomData {\n    @JsonProperty(&quot;First Name&quot;)\n    private String firstName;\n\n    @JsonProperty(&quot;Middle Name&quot;)\n    private String middleName;\n\n    @JsonProperty(&quot;Last Name&quot;)\n    private String lastName;\n\n    @JsonProperty(&quot;Date of Birth&quot;)\n    private String dateOfBirth;\n\n    private Address address = new Address();\n\n    @JsonProperty(&quot;License Number&quot;)\n    private String licenseNumber;\n\n    // Getters and setters\n\n    @JsonProperty(&quot;Address&quot;)\n    private void setAddress(String val){\n        address.setAddress(val);\n    }\n\n    @JsonProperty(&quot;Village&quot;)\n    private void setVillage(String val){\n        address.setVillage(val);\n    }\n\n    @JsonProperty(&quot;Pincode&quot;)\n    private void setPinCode(String val){\n        address.setPinCode(val);\n    }\n}\n</code></pre>\n<p>TEST:</p>\n<pre><code> public static void main(String[] args) throws Exception {\n        // Input JSON\n        String inputJson = &quot;&quot;&quot;\n                {\n                  &quot;First Name&quot;: &quot;XX&quot;,\n                  &quot;Middle Name&quot;: &quot;&quot;,\n                  &quot;Last Name&quot;: &quot;XX&quot;,\n                  &quot;Date of Birth&quot;: &quot;11/12/2013&quot;,\n                  &quot;Address&quot;: &quot;XXX&quot;,\n                  &quot;Village&quot;: &quot;XXX&quot;,\n                  &quot;Pincode&quot;: &quot;34234&quot;,\n                  &quot;License Number&quot;: &quot;1234567890&quot;\n                }\n                &quot;&quot;&quot;;\n\n        CustomData res = JsonMapper.builder().build().readValue(inputJson, CustomData.class);\n\n        System.out.println(JsonMapper.builder().build().writerWithDefaultPrettyPrinter().writeValueAsString(res));\n\n    }\n}\n</code></pre>\n<p>OUTPUT:</p>\n<pre><code>{\n  &quot;First Name&quot; : &quot;XX&quot;,\n  &quot;Middle Name&quot; : &quot;&quot;,\n  &quot;Last Name&quot; : &quot;XX&quot;,\n  &quot;Date of Birth&quot; : &quot;11/12/2013&quot;,\n  &quot;Address&quot; : {\n    &quot;Address&quot; : &quot;XXX&quot;,\n    &quot;Village&quot; : &quot;XXX&quot;,\n    &quot;Pincode&quot; : &quot;34234&quot;\n  },\n  &quot;License Number&quot; : &quot;1234567890&quot;\n}\n</code></pre>\n<p>Try it and let me know.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1700910425,"creation_date":1700910425,"answer_id":77547595,"question_id":77532150,"body_markdown":"You may try to use JSON libraries with query, transform and restructure capability such as _Josson_.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{&quot; +\r\n        &quot;    \\&quot;First Name\\&quot;: \\&quot;XX\\&quot;,&quot; +\r\n        &quot;    \\&quot;Middle Name\\&quot;: \\&quot;\\&quot;,&quot; +\r\n        &quot;    \\&quot;Last Name\\&quot;: \\&quot;XX\\&quot;,&quot; +\r\n        &quot;    \\&quot;Date of Birth\\&quot;: \\&quot;11/12/2013\\&quot;,&quot; +\r\n        &quot;    \\&quot;Address\\&quot;: \\&quot;XXX\\&quot;,&quot; +\r\n        &quot;    \\&quot;Village\\&quot;: \\&quot;XXX\\&quot;,&quot; +\r\n        &quot;    \\&quot;Pincode\\&quot;: \\&quot;34234\\&quot;,&quot; +\r\n        &quot;    \\&quot;License Number\\&quot;: \\&quot;1234567890\\&quot;&quot; +\r\n        &quot;}&quot;);\r\n    JsonNode node = josson.getNode(&quot;field(Address: map(Village, Pincode), Village:, Pincode:)&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n__Output__\r\n\r\n    {\r\n      &quot;First Name&quot; : &quot;XX&quot;,\r\n      &quot;Middle Name&quot; : &quot;&quot;,\r\n      &quot;Last Name&quot; : &quot;XX&quot;,\r\n      &quot;Date of Birth&quot; : &quot;11/12/2013&quot;,\r\n      &quot;Address&quot; : {\r\n        &quot;Village&quot; : &quot;XXX&quot;,\r\n        &quot;Pincode&quot; : &quot;34234&quot;\r\n      },\r\n      &quot;License Number&quot; : &quot;1234567890&quot;\r\n    }","link":"https://stackoverflow.com/questions/77532150/java-input-json-to-output-json-conversion-should-be-based-on-json-schema-confi/77547595#77547595","title":"Java - input JSON to output JSON conversion should be based on JSON schema configuration","body":"<p>You may try to use JSON libraries with query, transform and restructure capability such as <em>Josson</em>.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{&quot; +\n    &quot;    \\&quot;First Name\\&quot;: \\&quot;XX\\&quot;,&quot; +\n    &quot;    \\&quot;Middle Name\\&quot;: \\&quot;\\&quot;,&quot; +\n    &quot;    \\&quot;Last Name\\&quot;: \\&quot;XX\\&quot;,&quot; +\n    &quot;    \\&quot;Date of Birth\\&quot;: \\&quot;11/12/2013\\&quot;,&quot; +\n    &quot;    \\&quot;Address\\&quot;: \\&quot;XXX\\&quot;,&quot; +\n    &quot;    \\&quot;Village\\&quot;: \\&quot;XXX\\&quot;,&quot; +\n    &quot;    \\&quot;Pincode\\&quot;: \\&quot;34234\\&quot;,&quot; +\n    &quot;    \\&quot;License Number\\&quot;: \\&quot;1234567890\\&quot;&quot; +\n    &quot;}&quot;);\nJsonNode node = josson.getNode(&quot;field(Address: map(Village, Pincode), Village:, Pincode:)&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>{\n  &quot;First Name&quot; : &quot;XX&quot;,\n  &quot;Middle Name&quot; : &quot;&quot;,\n  &quot;Last Name&quot; : &quot;XX&quot;,\n  &quot;Date of Birth&quot; : &quot;11/12/2013&quot;,\n  &quot;Address&quot; : {\n    &quot;Village&quot; : &quot;XXX&quot;,\n    &quot;Pincode&quot; : &quot;34234&quot;\n  },\n  &quot;License Number&quot; : &quot;1234567890&quot;\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":82,"answer_count":2,"score":0,"last_activity_date":1701183920,"creation_date":1700675186,"last_edit_date":1701183920,"question_id":77532150,"body_markdown":"I have a JSON input and I plan to generate below kind of output JSON. Now I want to generate a JSON schema for each of the use cases described below. \r\nWith the help of Java, I would like to dynamically pick the values and prepare the output format as expected.\r\n\r\n**Use Case 1**\r\n\r\nInput:\r\n\r\n    {\r\n        &quot;First Name&quot;: &quot;XX&quot;,\r\n        &quot;Middle Name&quot;: &quot;&quot;,\r\n        &quot;Last Name&quot;: &quot;XX&quot;,\r\n        &quot;Date of Birth&quot;: &quot;11/12/2013&quot;,\r\n        &quot;Address&quot;: &quot;XXX&quot;,\r\n        &quot;Village&quot;: &quot;XXX&quot;,\r\n        &quot;Pincode&quot;: &quot;34234&quot;\r\n        &quot;License Number&quot;: &quot;1234567890&quot;\r\n    }\r\n\r\nOutput:\r\n\r\n    {\r\n        &quot;First Name&quot;: &quot;XX&quot;,\r\n        &quot;Middle Name&quot;: &quot;&quot;,\r\n        &quot;Last Name&quot;: &quot;XX&quot;,\r\n        &quot;Date of Birth&quot;: &quot;11/12/2013&quot;,\r\n        &quot;Address&quot;: \r\n        {\r\n            &quot;Village&quot;: &quot;XXX&quot;,\r\n            &quot;Pincode&quot;: &quot;34234&quot;\r\n        }\r\n        &quot;License Number&quot;: &quot;1234567890&quot;\r\n    }\r\n\r\n**Use Case 2**\r\n\r\nInput:\r\n\r\n    {\r\n        &quot;First Name&quot;: &quot;XX&quot;,\r\n        &quot;Middle Name&quot;: &quot;&quot;,\r\n        &quot;Last Name&quot;: &quot;XX&quot;,\r\n        &quot;Date of Birth&quot;: &quot;11/12/2013&quot;,\r\n        &quot;Address&quot;: &quot;XXX&quot;,\r\n        &quot;Village&quot;: &quot;XXX&quot;,\r\n        &quot;Pincode&quot;: &quot;34234&quot;\r\n        &quot;License Number&quot;: &quot;1234567890&quot;\r\n    }\r\n\r\nOutput:\r\n\r\n    {\r\n        &quot;First Name&quot;: &quot;XX&quot;,\r\n        &quot;Middle Name&quot;: &quot;&quot;,\r\n        &quot;Last Name&quot;: &quot;XX&quot;,\r\n        &quot;Date of Birth&quot;: &quot;11/12/2013&quot;,\r\n        &quot;Address&quot;: \r\n        {\r\n            &quot;Village&quot;: &quot;XXX&quot;,\r\n            &quot;Pincode&quot;: &quot;34234&quot;\r\n        }\r\n        &quot;License Number&quot;: &quot;1234567890&quot;\r\n    }\r\n\r\n\r\n\r\nDid anyone achieve a similar kind of job?","link":"https://stackoverflow.com/questions/77532150/java-input-json-to-output-json-conversion-should-be-based-on-json-schema-confi","title":"Java - input JSON to output JSON conversion should be based on JSON schema configuration","body":"<p>I have a JSON input and I plan to generate below kind of output JSON. Now I want to generate a JSON schema for each of the use cases described below.\nWith the help of Java, I would like to dynamically pick the values and prepare the output format as expected.</p>\n<p><strong>Use Case 1</strong></p>\n<p>Input:</p>\n<pre><code>{\n    &quot;First Name&quot;: &quot;XX&quot;,\n    &quot;Middle Name&quot;: &quot;&quot;,\n    &quot;Last Name&quot;: &quot;XX&quot;,\n    &quot;Date of Birth&quot;: &quot;11/12/2013&quot;,\n    &quot;Address&quot;: &quot;XXX&quot;,\n    &quot;Village&quot;: &quot;XXX&quot;,\n    &quot;Pincode&quot;: &quot;34234&quot;\n    &quot;License Number&quot;: &quot;1234567890&quot;\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>{\n    &quot;First Name&quot;: &quot;XX&quot;,\n    &quot;Middle Name&quot;: &quot;&quot;,\n    &quot;Last Name&quot;: &quot;XX&quot;,\n    &quot;Date of Birth&quot;: &quot;11/12/2013&quot;,\n    &quot;Address&quot;: \n    {\n        &quot;Village&quot;: &quot;XXX&quot;,\n        &quot;Pincode&quot;: &quot;34234&quot;\n    }\n    &quot;License Number&quot;: &quot;1234567890&quot;\n}\n</code></pre>\n<p><strong>Use Case 2</strong></p>\n<p>Input:</p>\n<pre><code>{\n    &quot;First Name&quot;: &quot;XX&quot;,\n    &quot;Middle Name&quot;: &quot;&quot;,\n    &quot;Last Name&quot;: &quot;XX&quot;,\n    &quot;Date of Birth&quot;: &quot;11/12/2013&quot;,\n    &quot;Address&quot;: &quot;XXX&quot;,\n    &quot;Village&quot;: &quot;XXX&quot;,\n    &quot;Pincode&quot;: &quot;34234&quot;\n    &quot;License Number&quot;: &quot;1234567890&quot;\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>{\n    &quot;First Name&quot;: &quot;XX&quot;,\n    &quot;Middle Name&quot;: &quot;&quot;,\n    &quot;Last Name&quot;: &quot;XX&quot;,\n    &quot;Date of Birth&quot;: &quot;11/12/2013&quot;,\n    &quot;Address&quot;: \n    {\n        &quot;Village&quot;: &quot;XXX&quot;,\n        &quot;Pincode&quot;: &quot;34234&quot;\n    }\n    &quot;License Number&quot;: &quot;1234567890&quot;\n}\n</code></pre>\n<p>Did anyone achieve a similar kind of job?</p>\n"},{"tags":["java","spring-boot","jar","spring-cloud","spring-cloud-feign"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701186546,"post_id":77564878,"comment_id":136742641,"body_markdown":"Yeah, package changes will produce for sure breaking changes, but our api library only will contain POJOs and feign packages (I assume that they are the same in both spring versions) that should be fine?","link":"https://stackoverflow.com/questions/77564797/can-i-use-a-compiled-library-with-a-certain-spring-boot-version-in-another-proje/77564878#comment136742641_77564878","body":"Yeah, package changes will produce for sure breaking changes, but our api library only will contain POJOs and feign packages (I assume that they are the same in both spring versions) that should be fine?"},{"score":1,"post_type":"answer","creation_date":1701186949,"post_id":77564878,"comment_id":136742728,"body_markdown":"I would assume nothing across major versions. Spring Cloud supports multiple minor versions of spring boot see here https://github.com/spring-cloud/spring-cloud-release/wiki/Supported-Versions#supported-releases. Spring Cloud went from openfeign 11.x is the boot 2.7.x compatible line to 12.x in the boot 3 compatible line","link":"https://stackoverflow.com/questions/77564797/can-i-use-a-compiled-library-with-a-certain-spring-boot-version-in-another-proje/77564878#comment136742728_77564878","body":"I would assume nothing across major versions. Spring Cloud supports multiple minor versions of spring boot see here <a href=\"https://github.com/spring-cloud/spring-cloud-release/wiki/Supported-Versions#supported-releases\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-release/wiki/&hellip;</a>. Spring Cloud went from openfeign 11.x is the boot 2.7.x compatible line to 12.x in the boot 3 compatible line"},{"score":0,"post_type":"answer","creation_date":1701250989,"post_id":77564878,"comment_id":136751324,"body_markdown":"Thanks guys for your time !! \nI ve created a POC, 2 spring boot apps, 2.7 and 3.2 (java 11 and 21), compiled library with feign in 2.7 and injected in 3.2 as dependecy. It is working but as spencergibb has said I shouldn&#39;t assume nothing, If I use more functionalities I can have troubles in the future.","link":"https://stackoverflow.com/questions/77564797/can-i-use-a-compiled-library-with-a-certain-spring-boot-version-in-another-proje/77564878#comment136751324_77564878","body":"Thanks guys for your time !!  I ve created a POC, 2 spring boot apps, 2.7 and 3.2 (java 11 and 21), compiled library with feign in 2.7 and injected in 3.2 as dependecy. It is working but as spencergibb has said I shouldn&#39;t assume nothing, If I use more functionalities I can have troubles in the future."}],"comment_count":3,"score":0,"last_activity_date":1701183655,"last_edit_date":1701183655,"creation_date":1701183313,"answer_id":77564878,"question_id":77564797,"body_markdown":"&gt; The question is whether previously developed libraries using an older version of Spring would continue to function if a new service were to emerge with an updated version of Spring.\r\n\r\nIt depends.  For example, if your application uses Spring classes, methods and so on that were present in the old version of Spring but have been removed in the new version, then when you try to run the code, you are liable to get classloading errors;  e.g. `ClassNotFoundError`, `NoSuchMethodError` and so on.\r\n\r\n\r\nIf you had recompiled your application against the new version of Spring, then these issues (removed classes, methods, etc) would have shown up as compilation errors.\r\n\r\n--------------------\r\n\r\nActually, when you migrate from SpringBoot 2.x to 3, you will almost certainly encounter breaking changes. This transition involves changing from `javax.servlet.*` to `jakarta.servlet.*` and so on.","link":"https://stackoverflow.com/questions/77564797/can-i-use-a-compiled-library-with-a-certain-spring-boot-version-in-another-proje/77564878#77564878","title":"Can I use a compiled library with a certain Spring Boot version in another project with a different Spring Boot version?","body":"<blockquote>\n<p>The question is whether previously developed libraries using an older version of Spring would continue to function if a new service were to emerge with an updated version of Spring.</p>\n</blockquote>\n<p>It depends.  For example, if your application uses Spring classes, methods and so on that were present in the old version of Spring but have been removed in the new version, then when you try to run the code, you are liable to get classloading errors;  e.g. <code>ClassNotFoundError</code>, <code>NoSuchMethodError</code> and so on.</p>\n<p>If you had recompiled your application against the new version of Spring, then these issues (removed classes, methods, etc) would have shown up as compilation errors.</p>\n<hr />\n<p>Actually, when you migrate from SpringBoot 2.x to 3, you will almost certainly encounter breaking changes. This transition involves changing from <code>javax.servlet.*</code> to <code>jakarta.servlet.*</code> and so on.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":55,"answer_count":1,"score":0,"last_activity_date":1701183887,"creation_date":1701182699,"last_edit_date":1701183887,"question_id":77564797,"body_markdown":"We are developing a Spring Boot microservices with the typical multimodule scenario.\r\n\r\n    parent-pom\r\n      module 1 (api)\r\n      module 2 (server)\r\n        module1-api &lt;-- as dependency\r\n\r\nWe have a server module where we have our business logic, controllers, etc (Spring boot application) and we have an api module where we have our DTOs files and feign interfaces (not a spring boot application).\r\n\r\nNowadays all our applications have the same Spring Boot version, so we can inject api dependencies to use their methods and make REST calls.\r\n\r\n    service 1 (Spring boot 2.7)\r\n       service2-api\r\n       service3-api\r\n    \r\n    service 2 (Spring boot 2.7)\r\n    service 3 (Spring boot 2.7)\r\n\r\nThe question is whether previously developed libraries using an older version of Spring would continue to function if a new service were to emerge with an updated version of Spring.\r\n\r\n\r\n    service 1 (Spring boot 2.7)\r\n       service2-api\r\n       service3-api\r\n    \r\n    service 2 (Spring boot 2.7)\r\n    service 3 (Spring boot 2.7)\r\n    \r\n    service 4 (Spring boot 3.2)\r\n      service2-api (Spring boot 2.7) &lt;--- Possible ???","link":"https://stackoverflow.com/questions/77564797/can-i-use-a-compiled-library-with-a-certain-spring-boot-version-in-another-proje","title":"Can I use a compiled library with a certain Spring Boot version in another project with a different Spring Boot version?","body":"<p>We are developing a Spring Boot microservices with the typical multimodule scenario.</p>\n<pre><code>parent-pom\n  module 1 (api)\n  module 2 (server)\n    module1-api &lt;-- as dependency\n</code></pre>\n<p>We have a server module where we have our business logic, controllers, etc (Spring boot application) and we have an api module where we have our DTOs files and feign interfaces (not a spring boot application).</p>\n<p>Nowadays all our applications have the same Spring Boot version, so we can inject api dependencies to use their methods and make REST calls.</p>\n<pre><code>service 1 (Spring boot 2.7)\n   service2-api\n   service3-api\n\nservice 2 (Spring boot 2.7)\nservice 3 (Spring boot 2.7)\n</code></pre>\n<p>The question is whether previously developed libraries using an older version of Spring would continue to function if a new service were to emerge with an updated version of Spring.</p>\n<pre><code>service 1 (Spring boot 2.7)\n   service2-api\n   service3-api\n\nservice 2 (Spring boot 2.7)\nservice 3 (Spring boot 2.7)\n\nservice 4 (Spring boot 3.2)\n  service2-api (Spring boot 2.7) &lt;--- Possible ???\n</code></pre>\n"},{"tags":["java","java.util.scanner","filereader","verification"],"comment_count":0,"is_answered":false,"view_count":20,"answer_count":0,"score":0,"last_activity_date":1701183182,"creation_date":1701183182,"question_id":77564858,"body_markdown":"**Question**\r\nI&#39;m attempting to verify the scanner inputs in my main method with the contents of input.txt, which contains an id, salary, and employee status number. I&#39;m attempting to do this by reading the text file via a BufferedReader within the read() method in my main method. In this method, I validate the inputs passed through reader and return true if they match any contents of the input.txt file. If they return false by not fitting the parameters I&#39;ve set, the program should halt and send a println message. However I notice that when I call it within the if statement after the scanner inputs, the program completely skips over the if statement and the read() method. I&#39;ve tried experimenting around with different ideas and structure, but nothing has been successful. No matter what incorrect variables I input into the scanner, they are all allowed to pass because my code isn&#39;t calling the read() method. Is there a way to avoid this issue?\r\n\r\n\r\n**Main Method**\r\n\r\nimport java.io.*;\r\nimport java.util.Scanner;\r\n\r\npublic class HW4 {\r\n\r\n\t//Scanner for ID Input\r\n\tpublic static String idScan() {\r\n\t\tScanner x = new Scanner(System.in);\r\n\t\tString id = x.nextLine();\r\n\t\treturn id;\r\n\t}\r\n\t\r\n\t//Scanner for Salary Input\r\n\tpublic static double salaryScan() {\r\n\t\tScanner y = new Scanner(System.in);\r\n\t\tdouble salary = y.nextDouble();\r\n\t\treturn salary;\r\n\t}\r\n\t\r\n\t//Scanner for Status Input\r\n\tpublic static int statusScan() {\r\n\t\tScanner z = new Scanner(System.in);\r\n\t\tint status = z.nextInt();\r\n\t\treturn status;\r\n\t}\r\n\t\r\n\t//Read Input.txt For Verifying Scanner Inputs\r\n\tpublic static boolean read(String id, double sal, int stat) {\r\n\t\t\t\ttry (BufferedReader reader = new BufferedReader(new FileReader(&quot;input.txt&quot;)))\r\n\t\t\t\t{\t\r\n\t\t\t\t\tString line;\r\n\t\t\t\t\twhile ((line = reader.readLine()) !=null) {\r\n\t\t\t\t\t\tString[] data = line.split(&quot;,&quot;);\r\n\t\t\t\t\t\tString validid = data[0];\r\n\t\t\t\t\t\tdouble validSalary = Double.parseDouble(data[1]);\r\n\t\t                int validStatus = Integer.parseInt(data[2]);\r\n\t\t                \r\n\t\t                if (id.equals(validid) &amp;&amp; sal == validSalary &amp;&amp; stat == validStatus) {\r\n\t\t                    return true;\r\n\t\t                } \r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tcatch (IOException e) \r\n\t\t\t\t{ \t\r\n\t\t\t\t\tSystem.out.println(&quot;No&quot;);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\tpublic static void main(String args[]) {\r\n\t\t\r\n\t\t//Establishes an Array of 10 Employees\r\n\t\tEmployee [] employee = new Employee[10];\r\n\t\t\r\n\t\t\r\n\t\t//For Statement that Allows Input for All 10 Employee&#39;s Constructors and Status\r\n\t\tfor(int i = 0; i &lt; 4; i++) {\t\r\n\t\t\tSystem.out.println(&quot;Enter emplpoyee ID of an employee?&quot;);\r\n\t\t\tString id = idScan();\r\n\t\t\tSystem.out.println(&quot;Enter salary of the employee?&quot;);\r\n\t\t\tdouble sal = salaryScan();\r\n\t\t\tSystem.out.println(&quot;Is this employee a manager or worker? (Enter 1 for worker and 2 for manager)&quot;);\r\n\t\t\tint stat = statusScan();\r\n\t\t\t\r\n\t\t\t//Creates Worker and Manager Classes\r\n\t\t\tif(read(id, sal, stat)) {\r\n\t\t\t\tif (stat == 1) {\r\n\t\t\t\t\temployee [i] = new WorkerEmployee(0,0);\r\n\t\t\t\t} else if (stat == 2) {\r\n\t\t\t\t\temployee [i] = new ManagerEmployee(0,0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tSystem.out.println(&quot;No&quot;);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Write output.txt file with verified scanner inputs\r\n\t\t\ttry (BufferedWriter writer = new BufferedWriter(new FileWriter(&quot;output.txt&quot;, true))) {\r\n\t\t\t\twriter.write(&quot;&quot;+id+&quot; earns $&quot;+stat+&quot; per pay period&quot;);\r\n\t\t\t\twriter.newLine();\r\n\t\t\t\twriter.flush();\r\n\t\t\t\twriter.close();\r\n\t\t\t}\r\n\t\t\tcatch (IOException e)\r\n\t\t\t{\r\n\t\t\t\tSystem.out.println(&quot;No&quot;);\r\n\t\t\t}\r\n\t\t\r\n\t\t}\r\n\t}\r\n}\r\n\r\n**Employee.java**\r\npublic class Employee {\r\n\r\n\tprotected int employeeID;\r\n\tprotected double salary;\r\n\r\n\t//Constructor\r\n\tpublic Employee(int ID, double esalary) {\r\n\t\temployeeID = ID;\r\n\t\tesalary = salary;\r\n\t}\r\n\t\r\n\t//Getter ID\r\n\tpublic int getID() {\r\n\t\treturn employeeID;\r\n\t}\r\n\t//Setter ID\r\n\tpublic void setID(int ID) {\r\n\t\temployeeID = ID;\r\n\t}\r\n\t\r\n\t//Getter Salary\r\n\tpublic double getSalary() {\r\n\t\treturn salary;\r\n\t}\r\n\t//Setter Salary\r\n\tpublic void setSalary(double esalary) {\r\n\t\tsalary = esalary;\r\n\t}\r\n}\r\n\r\n**ManagerEmployee.java**\r\npublic class ManagerEmployee extends Employee {\r\n\r\n\t//Super Constructor\r\n\tpublic ManagerEmployee(int ID, double esalary) {\r\n\t\tsuper(ID, esalary);\r\n\t}\t\r\n\t\r\n\tpublic double monthlyPay(double esalary) {\t\t\r\n\t\tesalary = (salary/12) + ((salary/12) * 0.3);\r\n\t\treturn esalary;\r\n\t\t\t}\r\n}\r\n\r\n**WorkerEmployee.java**\r\npublic class WorkerEmployee extends Employee {\r\n\r\n\t//Super Constructor\r\n\tpublic WorkerEmployee(int ID, double esalary) {\r\n\t\tsuper(ID, esalary);\r\n\t}\r\n\t\r\n\tpublic double monthlyPay(double esalary) {\t\t\r\n\t\tesalary = (salary/12) - 100;\r\n\t\treturn esalary;\r\n\t\t\t}\r\n}\r\n\r\n**input.txt**\r\nu1234567, 50000,1\r\nu4322345, 72000,1\r\nu5874321, 110000,2\r\nu9876789, 250000,2\r\nu1111111, 230000,1\r\nu2222222, 400000,1\r\nu3333333, 5000,2\r\nu4444444, 740000,2\r\nu5555555, 120000,1\r\nu6666666, 35000,1","link":"https://stackoverflow.com/questions/77564858/issue-with-verifying-scanner-inputs-via-file-reading-in-java","title":"Issue With Verifying Scanner Inputs via File Reading in Java","body":"<p><strong>Question</strong>\nI'm attempting to verify the scanner inputs in my main method with the contents of input.txt, which contains an id, salary, and employee status number. I'm attempting to do this by reading the text file via a BufferedReader within the read() method in my main method. In this method, I validate the inputs passed through reader and return true if they match any contents of the input.txt file. If they return false by not fitting the parameters I've set, the program should halt and send a println message. However I notice that when I call it within the if statement after the scanner inputs, the program completely skips over the if statement and the read() method. I've tried experimenting around with different ideas and structure, but nothing has been successful. No matter what incorrect variables I input into the scanner, they are all allowed to pass because my code isn't calling the read() method. Is there a way to avoid this issue?</p>\n<p><strong>Main Method</strong></p>\n<p>import java.io.*;\nimport java.util.Scanner;</p>\n<p>public class HW4 {</p>\n<pre><code>//Scanner for ID Input\npublic static String idScan() {\n    Scanner x = new Scanner(System.in);\n    String id = x.nextLine();\n    return id;\n}\n\n//Scanner for Salary Input\npublic static double salaryScan() {\n    Scanner y = new Scanner(System.in);\n    double salary = y.nextDouble();\n    return salary;\n}\n\n//Scanner for Status Input\npublic static int statusScan() {\n    Scanner z = new Scanner(System.in);\n    int status = z.nextInt();\n    return status;\n}\n\n//Read Input.txt For Verifying Scanner Inputs\npublic static boolean read(String id, double sal, int stat) {\n            try (BufferedReader reader = new BufferedReader(new FileReader(&quot;input.txt&quot;)))\n            {   \n                String line;\n                while ((line = reader.readLine()) !=null) {\n                    String[] data = line.split(&quot;,&quot;);\n                    String validid = data[0];\n                    double validSalary = Double.parseDouble(data[1]);\n                    int validStatus = Integer.parseInt(data[2]);\n                    \n                    if (id.equals(validid) &amp;&amp; sal == validSalary &amp;&amp; stat == validStatus) {\n                        return true;\n                    } \n                }\n                return false;\n            }\n            catch (IOException e) \n            {   \n                System.out.println(&quot;No&quot;);\n            }\n            return false;\n                }\n\npublic static void main(String args[]) {\n    \n    //Establishes an Array of 10 Employees\n    Employee [] employee = new Employee[10];\n    \n    \n    //For Statement that Allows Input for All 10 Employee's Constructors and Status\n    for(int i = 0; i &lt; 4; i++) {    \n        System.out.println(&quot;Enter emplpoyee ID of an employee?&quot;);\n        String id = idScan();\n        System.out.println(&quot;Enter salary of the employee?&quot;);\n        double sal = salaryScan();\n        System.out.println(&quot;Is this employee a manager or worker? (Enter 1 for worker and 2 for manager)&quot;);\n        int stat = statusScan();\n        \n        //Creates Worker and Manager Classes\n        if(read(id, sal, stat)) {\n            if (stat == 1) {\n                employee [i] = new WorkerEmployee(0,0);\n            } else if (stat == 2) {\n                employee [i] = new ManagerEmployee(0,0);\n            } else {\n                System.out.println(&quot;No&quot;);\n                i--;\n            }\n        }\n        \n        //Write output.txt file with verified scanner inputs\n        try (BufferedWriter writer = new BufferedWriter(new FileWriter(&quot;output.txt&quot;, true))) {\n            writer.write(&quot;&quot;+id+&quot; earns $&quot;+stat+&quot; per pay period&quot;);\n            writer.newLine();\n            writer.flush();\n            writer.close();\n        }\n        catch (IOException e)\n        {\n            System.out.println(&quot;No&quot;);\n        }\n    \n    }\n}\n</code></pre>\n<p>}</p>\n<p><strong>Employee.java</strong>\npublic class Employee {</p>\n<pre><code>protected int employeeID;\nprotected double salary;\n\n//Constructor\npublic Employee(int ID, double esalary) {\n    employeeID = ID;\n    esalary = salary;\n}\n\n//Getter ID\npublic int getID() {\n    return employeeID;\n}\n//Setter ID\npublic void setID(int ID) {\n    employeeID = ID;\n}\n\n//Getter Salary\npublic double getSalary() {\n    return salary;\n}\n//Setter Salary\npublic void setSalary(double esalary) {\n    salary = esalary;\n}\n</code></pre>\n<p>}</p>\n<p><strong>ManagerEmployee.java</strong>\npublic class ManagerEmployee extends Employee {</p>\n<pre><code>//Super Constructor\npublic ManagerEmployee(int ID, double esalary) {\n    super(ID, esalary);\n}   \n\npublic double monthlyPay(double esalary) {      \n    esalary = (salary/12) + ((salary/12) * 0.3);\n    return esalary;\n        }\n</code></pre>\n<p>}</p>\n<p><strong>WorkerEmployee.java</strong>\npublic class WorkerEmployee extends Employee {</p>\n<pre><code>//Super Constructor\npublic WorkerEmployee(int ID, double esalary) {\n    super(ID, esalary);\n}\n\npublic double monthlyPay(double esalary) {      \n    esalary = (salary/12) - 100;\n    return esalary;\n        }\n</code></pre>\n<p>}</p>\n<p><strong>input.txt</strong>\nu1234567, 50000,1\nu4322345, 72000,1\nu5874321, 110000,2\nu9876789, 250000,2\nu1111111, 230000,1\nu2222222, 400000,1\nu3333333, 5000,2\nu4444444, 740000,2\nu5555555, 120000,1\nu6666666, 35000,1</p>\n"},{"tags":["java","android","android-studio"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701183385,"post_id":77564744,"comment_id":136741993,"body_markdown":"You&#39;re welcome. If the solution works, please accept the answer. @Osin94","link":"https://stackoverflow.com/questions/77564379/how-to-disable-some-random-days-in-materialdatepicker/77564744#comment136741993_77564744","body":"You&#39;re welcome. If the solution works, please accept the answer. @Osin94"}],"comment_count":1,"score":0,"last_activity_date":1701182291,"creation_date":1701182291,"answer_id":77564744,"question_id":77564379,"body_markdown":"In the method you are using now, only the last date is assigned to the **s1** variable while looping in the **isValid()** function and only this date is disable. \r\n\r\nI changed the **isValid()** function by using **Calendar**. I also added two new methods. When I try it in my own locale, it works smoothly. I hope it works for you too.\r\n\r\n```\r\n        @Override\r\n        public boolean isValid(long date) {\r\n            Calendar calendarInput = Calendar.getInstance();\r\n            calendarInput.setTimeInMillis(date);\r\n\r\n            for (Calendar blockedDate : getBlockedDates()) {\r\n                if (areSameDay(calendarInput, blockedDate)) {\r\n                    return false; // If it matches one of the blocked dates, return false.\r\n                }\r\n            }\r\n\r\n            return true; // If there is no match, the date is valid.\r\n        }\r\n\r\n        private List&lt;Calendar&gt; getBlockedDates() {\r\n            List&lt;Calendar&gt; blockedDates = new ArrayList&lt;&gt;();\r\n            Calendar nov10 = Calendar.getInstance();\r\n            nov10.set(2023, Calendar.NOVEMBER, 10);\r\n            blockedDates.add(nov10);\r\n\r\n            Calendar nov16 = Calendar.getInstance();\r\n            nov16.set(2023, Calendar.NOVEMBER, 16);\r\n            blockedDates.add(nov16);\r\n\r\n            return blockedDates;\r\n        }\r\n\r\n        private boolean areSameDay(Calendar cal1, Calendar cal2) {\r\n            return cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &amp;&amp;\r\n                    cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR);\r\n        }\r\n```\r\n\r\n[![DatePicker Screenshot][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zFOoI.png","link":"https://stackoverflow.com/questions/77564379/how-to-disable-some-random-days-in-materialdatepicker/77564744#77564744","title":"How to disable some random days in MaterialDatePicker","body":"<p>In the method you are using now, only the last date is assigned to the <strong>s1</strong> variable while looping in the <strong>isValid()</strong> function and only this date is disable.</p>\n<p>I changed the <strong>isValid()</strong> function by using <strong>Calendar</strong>. I also added two new methods. When I try it in my own locale, it works smoothly. I hope it works for you too.</p>\n<pre><code>        @Override\n        public boolean isValid(long date) {\n            Calendar calendarInput = Calendar.getInstance();\n            calendarInput.setTimeInMillis(date);\n\n            for (Calendar blockedDate : getBlockedDates()) {\n                if (areSameDay(calendarInput, blockedDate)) {\n                    return false; // If it matches one of the blocked dates, return false.\n                }\n            }\n\n            return true; // If there is no match, the date is valid.\n        }\n\n        private List&lt;Calendar&gt; getBlockedDates() {\n            List&lt;Calendar&gt; blockedDates = new ArrayList&lt;&gt;();\n            Calendar nov10 = Calendar.getInstance();\n            nov10.set(2023, Calendar.NOVEMBER, 10);\n            blockedDates.add(nov10);\n\n            Calendar nov16 = Calendar.getInstance();\n            nov16.set(2023, Calendar.NOVEMBER, 16);\n            blockedDates.add(nov16);\n\n            return blockedDates;\n        }\n\n        private boolean areSameDay(Calendar cal1, Calendar cal2) {\n            return cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) &amp;&amp;\n                    cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR);\n        }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zFOoI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zFOoI.png\" alt=\"DatePicker Screenshot\" /></a></p>\n"}],"comment_count":0,"is_answered":true,"view_count":29,"answer_count":1,"score":0,"last_activity_date":1701182291,"creation_date":1701179077,"question_id":77564379,"body_markdown":"Like in title my dates will completly random, the user will deliver this dates. And I have question how to disable this dates in MaterialDatePicker ? It must be MaterialDatePicker cous of I want to keep possibility of selecting date in range. What i found is in Main you can use like:\r\n\r\n \r\n\r\n    MaterialDatePicker materialDatePicker =\r\n                            MaterialDatePicker.Builder.dateRangePicker()\r\n                            .setCalendarConstraints(DaysOutOfValidate().build())\r\n                            .setSelection(Pair.create(MaterialDatePicker.thisMonthInUtcMilliseconds(),MaterialDatePicker.todayInUtcMilliseconds())).build();\r\n    \r\n                            materialDatePicker.show(getSupportFragmentManager(), &quot;S&quot;);\r\n\r\nthan in main also:\r\n\r\n \r\n\r\n      private CalendarConstraints.Builder DaysOutOfValidate() {\r\n    \r\n            List&lt;Date&gt; listDates = new ArrayList&lt;&gt;();\r\n            listDates.add(new Date(2023,Calendar.NOVEMBER,10));\r\n            listDates.add(new Date(2023,Calendar.NOVEMBER,16));\r\n    \r\n            CalendarConstraints.Builder constraintsBuilderRange = new CalendarConstraints.Builder();\r\n            constraintsBuilderRange.setValidator(new DaysOutOfValidate(listDates));\r\n                Log.i(&quot;Inovked twice&quot;,&quot;Twice&quot;);\r\n    \r\n            return constraintsBuilderRange;\r\n        }\r\nnext you write your ownValidator:\r\n\r\n\r\n\r\n    public class DaysOutOfValidate implements CalendarConstraints.DateValidator {\r\n    \r\n        int mYear, mMonth, mDayOfWeek;\r\n        List&lt;Date&gt; dates;\r\n    \r\n        DaysOutOfValidate(int year, int month, int dayOfWeek) {\r\n            mYear = year;\r\n            mMonth = month;\r\n            mDayOfWeek = dayOfWeek;\r\n        }\r\n    \r\n        public DaysOutOfValidate(List&lt;Date&gt; dates) {\r\n            this.dates = dates;\r\n        }\r\n    \r\n        DaysOutOfValidate(Parcel parcel) {\r\n            mYear = parcel.readInt();\r\n            mMonth = parcel.readInt();\r\n            mDayOfWeek = parcel.readInt();\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public boolean isValid(long date) {\r\n    \r\n            SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    \r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.set(2023,Calendar.NOVEMBER,16);\r\n    \r\n            Calendar calendar2 = Calendar.getInstance();\r\n            calendar2.set(2023,Calendar.NOVEMBER,10);\r\n    \r\n    \r\n            Calendar calendar1 = Calendar.getInstance();\r\n            calendar1.setTimeInMillis(date);\r\n    \r\n            Calendar[] calendars = new Calendar[2];\r\n            calendars[0]= calendar;\r\n            calendars[1]= calendar2;\r\n    \r\n            String s1 =&quot;&quot;;\r\n    \r\n            String s2 = sdf.format(calendar1.getTimeInMillis());\r\n    \r\n            for (int i = 0; i &lt; calendars.length; i++) {\r\n                s1 = sdf.format(calendars[i].getTimeInMillis());\r\n            }\r\n    \r\n            Log.i(&quot;What&#39;s inside&quot;,s1+&quot;&quot;);\r\n            Log.i(&quot;What&#39;s inside 2: &quot;,s2+&quot;&quot;);\r\n    \r\n            if (s1.equals(s2))\r\n            {\r\n                Log.i(&quot;Over here&quot;,&quot;properly&quot;);\r\n                return false;\r\n    \r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n    \r\n    \r\n\r\n    \r\n        }\r\n    \r\n    \r\n        @Override\r\n        public int describeContents() {\r\n            return 0;\r\n        }\r\n    \r\n        @Override\r\n        public void writeToParcel(Parcel dest, int flags) {\r\n            dest.writeInt(mYear);\r\n            dest.writeInt(mMonth);\r\n            dest.writeInt(mDayOfWeek);\r\n        }\r\n    \r\n    \r\n        public static final Parcelable.Creator&lt;DaysOutOfValidate&gt; CREATOR = new Parcelable.Creator&lt;DaysOutOfValidate&gt;() {\r\n    \r\n            @Override\r\n            public DaysOutOfValidate createFromParcel(Parcel parcel) {\r\n                return new DaysOutOfValidate(parcel);\r\n            }\r\n    \r\n            @Override\r\n            public DaysOutOfValidate[] newArray(int size) {\r\n                return new DaysOutOfValidate[size];\r\n            }\r\n        };\r\n    }\r\n\r\nIn DaysOutOfValidate are many wrong line but most impornant is method &quot;isValid&quot; which return true if the date is the same as the given date. I can&#39;t find how excatly work isValid but what I noticed that works like loop but I can&#39;t give more than one date cous of when I give more than one date like in example i give 16 November 2023 and 10 November 2023 only the last would disabled (10 november 2023), I know why it&#39;s happend like that but I don&#39;t know how to go around it. How to make to give some random dates and disable them in Calendar. Thanks in advance.\r\n\r\n","link":"https://stackoverflow.com/questions/77564379/how-to-disable-some-random-days-in-materialdatepicker","title":"How to disable some random days in MaterialDatePicker","body":"<p>Like in title my dates will completly random, the user will deliver this dates. And I have question how to disable this dates in MaterialDatePicker ? It must be MaterialDatePicker cous of I want to keep possibility of selecting date in range. What i found is in Main you can use like:</p>\n<pre><code>MaterialDatePicker materialDatePicker =\n                        MaterialDatePicker.Builder.dateRangePicker()\n                        .setCalendarConstraints(DaysOutOfValidate().build())\n                        .setSelection(Pair.create(MaterialDatePicker.thisMonthInUtcMilliseconds(),MaterialDatePicker.todayInUtcMilliseconds())).build();\n\n                        materialDatePicker.show(getSupportFragmentManager(), &quot;S&quot;);\n</code></pre>\n<p>than in main also:</p>\n<pre><code>  private CalendarConstraints.Builder DaysOutOfValidate() {\n\n        List&lt;Date&gt; listDates = new ArrayList&lt;&gt;();\n        listDates.add(new Date(2023,Calendar.NOVEMBER,10));\n        listDates.add(new Date(2023,Calendar.NOVEMBER,16));\n\n        CalendarConstraints.Builder constraintsBuilderRange = new CalendarConstraints.Builder();\n        constraintsBuilderRange.setValidator(new DaysOutOfValidate(listDates));\n            Log.i(&quot;Inovked twice&quot;,&quot;Twice&quot;);\n\n        return constraintsBuilderRange;\n    }\n</code></pre>\n<p>next you write your ownValidator:</p>\n<pre><code>public class DaysOutOfValidate implements CalendarConstraints.DateValidator {\n\n    int mYear, mMonth, mDayOfWeek;\n    List&lt;Date&gt; dates;\n\n    DaysOutOfValidate(int year, int month, int dayOfWeek) {\n        mYear = year;\n        mMonth = month;\n        mDayOfWeek = dayOfWeek;\n    }\n\n    public DaysOutOfValidate(List&lt;Date&gt; dates) {\n        this.dates = dates;\n    }\n\n    DaysOutOfValidate(Parcel parcel) {\n        mYear = parcel.readInt();\n        mMonth = parcel.readInt();\n        mDayOfWeek = parcel.readInt();\n    }\n\n\n    @Override\n    public boolean isValid(long date) {\n\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\n\n        Calendar calendar = Calendar.getInstance();\n        calendar.set(2023,Calendar.NOVEMBER,16);\n\n        Calendar calendar2 = Calendar.getInstance();\n        calendar2.set(2023,Calendar.NOVEMBER,10);\n\n\n        Calendar calendar1 = Calendar.getInstance();\n        calendar1.setTimeInMillis(date);\n\n        Calendar[] calendars = new Calendar[2];\n        calendars[0]= calendar;\n        calendars[1]= calendar2;\n\n        String s1 =&quot;&quot;;\n\n        String s2 = sdf.format(calendar1.getTimeInMillis());\n\n        for (int i = 0; i &lt; calendars.length; i++) {\n            s1 = sdf.format(calendars[i].getTimeInMillis());\n        }\n\n        Log.i(&quot;What's inside&quot;,s1+&quot;&quot;);\n        Log.i(&quot;What's inside 2: &quot;,s2+&quot;&quot;);\n\n        if (s1.equals(s2))\n        {\n            Log.i(&quot;Over here&quot;,&quot;properly&quot;);\n            return false;\n\n        }\n        else {\n            return true;\n        }\n\n\n\n\n    }\n\n\n    @Override\n    public int describeContents() {\n        return 0;\n    }\n\n    @Override\n    public void writeToParcel(Parcel dest, int flags) {\n        dest.writeInt(mYear);\n        dest.writeInt(mMonth);\n        dest.writeInt(mDayOfWeek);\n    }\n\n\n    public static final Parcelable.Creator&lt;DaysOutOfValidate&gt; CREATOR = new Parcelable.Creator&lt;DaysOutOfValidate&gt;() {\n\n        @Override\n        public DaysOutOfValidate createFromParcel(Parcel parcel) {\n            return new DaysOutOfValidate(parcel);\n        }\n\n        @Override\n        public DaysOutOfValidate[] newArray(int size) {\n            return new DaysOutOfValidate[size];\n        }\n    };\n}\n</code></pre>\n<p>In DaysOutOfValidate are many wrong line but most impornant is method &quot;isValid&quot; which return true if the date is the same as the given date. I can't find how excatly work isValid but what I noticed that works like loop but I can't give more than one date cous of when I give more than one date like in example i give 16 November 2023 and 10 November 2023 only the last would disabled (10 november 2023), I know why it's happend like that but I don't know how to go around it. How to make to give some random dates and disable them in Calendar. Thanks in advance.</p>\n"},{"tags":["java","quarkus"],"comments":[{"score":1,"post_type":"question","creation_date":1701183809,"post_id":77564657,"comment_id":136742073,"body_markdown":"here the reason https://github.com/quarkusio/quarkus/pull/36183","link":"https://stackoverflow.com/questions/77564657/upgrading-to-quarkus-3-5-raise-errors-at-execution-about-claim-without-claimva#comment136742073_77564657","body":"here the reason <a href=\"https://github.com/quarkusio/quarkus/pull/36183\" rel=\"nofollow noreferrer\">github.com/quarkusio/quarkus/pull/36183</a>"}],"comment_count":1,"is_answered":false,"view_count":42,"answer_count":0,"score":0,"last_activity_date":1701181585,"creation_date":1701181585,"question_id":77564657,"body_markdown":"I am upgrading my quarkus application from 3.4.3 to 3.5.3. According to this [Migration Guide][1], there is no mention of a breaking change about claim definition and @Claim annotation.\r\n\r\nHowever, I have this error message when I do a `mvn quarkus:dev`:\r\n\r\n```\r\nERROR [io.qua.dep.dev.IsolatedDevModeMain] (main) Failed to start quarkus: java.lang.RuntimeException: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\r\n        [error]: Build step io.quarkus.smallrye.jwt.deployment.SmallRyeJwtProcessor#registerOptionalClaimProducer threw an exception: java.lang.IllegalStateException: java.lang.String type can not be used to represent JWT claims in @Singleton or @ApplicationScoped beans, make the bean @RequestScoped or wrap this type with org.eclipse.microprofile.jwt.ClaimValue or jakarta.inject.Provider or jakarta.enterprise.inject.Instance\r\n        at io.quarkus.smallrye.jwt.deployment.SmallRyeJwtProcessor.registerOptionalClaimProducer(SmallRyeJwtProcessor.java:188)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:849)\r\n        at io.quarkus.builder.BuildContext.run(BuildContext.java:282)\r\n        at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n        at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n        at java.base/java.lang.Thread.run(Thread.java:833)\r\n        at org.jboss.threads.JBossThread.run(JBossThread.java:501)\r\n        at io.quarkus.runner.bootstrap.AugmentActionImpl.runAugment(AugmentActionImpl.java:336)\r\n        at io.quarkus.runner.bootstrap.AugmentActionImpl.createInitialRuntimeApplication(AugmentActionImpl.java:253)\r\n        at io.quarkus.runner.bootstrap.AugmentActionImpl.createInitialRuntimeApplication(AugmentActionImpl.java:60)\r\n        at io.quarkus.deployment.dev.IsolatedDevModeMain.firstStart(IsolatedDevModeMain.java:113)\r\n        at io.quarkus.deployment.dev.IsolatedDevModeMain.accept(IsolatedDevModeMain.java:438)\r\n        at io.quarkus.deployment.dev.IsolatedDevModeMain.accept(IsolatedDevModeMain.java:56)\r\n        at io.quarkus.bootstrap.app.CuratedApplication.runInCl(CuratedApplication.java:138)\r\n        at io.quarkus.bootstrap.app.CuratedApplication.runInAugmentClassLoader(CuratedApplication.java:93)\r\n        at io.quarkus.deployment.dev.DevModeMain.start(DevModeMain.java:131)\r\n        at io.quarkus.deployment.dev.DevModeMain.main(DevModeMain.java:62)\r\nCaused by: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\r\n        [error]: Build step io.quarkus.smallrye.jwt.deployment.SmallRyeJwtProcessor#registerOptionalClaimProducer threw an exception: java.lang.IllegalStateException: java.lang.String type can not be used to represent JWT claims in @Singleton or @ApplicationScoped beans, make the bean @RequestScoped or wrap this type with org.eclipse.microprofile.jwt.ClaimValue or jakarta.inject.Provider or jakarta.enterprise.inject.Instance\r\n        at io.quarkus.smallrye.jwt.deployment.SmallRyeJwtProcessor.registerOptionalClaimProducer(SmallRyeJwtProcessor.java:188)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:849)\r\n        at io.quarkus.builder.BuildContext.run(BuildContext.java:282)\r\n        at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n        at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n        at java.base/java.lang.Thread.run(Thread.java:833)\r\n        at org.jboss.threads.JBossThread.run(JBossThread.java:501)\r\n\r\n        at io.quarkus.builder.Execution.run(Execution.java:123)\r\n        at io.quarkus.builder.BuildExecutionBuilder.execute(BuildExecutionBuilder.java:79)\r\n        at io.quarkus.deployment.QuarkusAugmentor.run(QuarkusAugmentor.java:160)\r\n        at io.quarkus.runner.bootstrap.AugmentActionImpl.runAugment(AugmentActionImpl.java:332)\r\n        ... 9 more\r\nCaused by: java.lang.IllegalStateException: java.lang.String type can not be used to represent JWT claims in @Singleton or @ApplicationScoped beans, make the bean @RequestScoped or wrap this type with org.eclipse.microprofile.jwt.ClaimValue or jakarta.inject.Provider or jakarta.enterprise.inject.Instance\r\n        at io.quarkus.smallrye.jwt.deployment.SmallRyeJwtProcessor.registerOptionalClaimProducer(SmallRyeJwtProcessor.java:188)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:849)\r\n        at io.quarkus.builder.BuildContext.run(BuildContext.java:282)\r\n        at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n        at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n        at java.base/java.lang.Thread.run(Thread.java:833)\r\n        at org.jboss.threads.JBossThread.run(JBossThread.java:501)\r\n```\r\n\r\nIf I wrap all my `@Claim` types in my code with `ClaimValue&lt;&gt;` the error disappears and i am able to run my application normally.\r\n\r\nIs it a bug or may I miss something about the migration ?\r\n\r\n\r\n  [1]: https://github.com/quarkusio/quarkus/wiki/Migration-Guide-3.5","link":"https://stackoverflow.com/questions/77564657/upgrading-to-quarkus-3-5-raise-errors-at-execution-about-claim-without-claimva","title":"Upgrading to quarkus 3.5 raise errors at execution (about @Claim without ClaimValue wrapper)","body":"<p>I am upgrading my quarkus application from 3.4.3 to 3.5.3. According to this <a href=\"https://github.com/quarkusio/quarkus/wiki/Migration-Guide-3.5\" rel=\"nofollow noreferrer\">Migration Guide</a>, there is no mention of a breaking change about claim definition and @Claim annotation.</p>\n<p>However, I have this error message when I do a <code>mvn quarkus:dev</code>:</p>\n<pre><code>ERROR [io.qua.dep.dev.IsolatedDevModeMain] (main) Failed to start quarkus: java.lang.RuntimeException: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\n        [error]: Build step io.quarkus.smallrye.jwt.deployment.SmallRyeJwtProcessor#registerOptionalClaimProducer threw an exception: java.lang.IllegalStateException: java.lang.String type can not be used to represent JWT claims in @Singleton or @ApplicationScoped beans, make the bean @RequestScoped or wrap this type with org.eclipse.microprofile.jwt.ClaimValue or jakarta.inject.Provider or jakarta.enterprise.inject.Instance\n        at io.quarkus.smallrye.jwt.deployment.SmallRyeJwtProcessor.registerOptionalClaimProducer(SmallRyeJwtProcessor.java:188)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:849)\n        at io.quarkus.builder.BuildContext.run(BuildContext.java:282)\n        at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\n        at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\n        at java.base/java.lang.Thread.run(Thread.java:833)\n        at org.jboss.threads.JBossThread.run(JBossThread.java:501)\n        at io.quarkus.runner.bootstrap.AugmentActionImpl.runAugment(AugmentActionImpl.java:336)\n        at io.quarkus.runner.bootstrap.AugmentActionImpl.createInitialRuntimeApplication(AugmentActionImpl.java:253)\n        at io.quarkus.runner.bootstrap.AugmentActionImpl.createInitialRuntimeApplication(AugmentActionImpl.java:60)\n        at io.quarkus.deployment.dev.IsolatedDevModeMain.firstStart(IsolatedDevModeMain.java:113)\n        at io.quarkus.deployment.dev.IsolatedDevModeMain.accept(IsolatedDevModeMain.java:438)\n        at io.quarkus.deployment.dev.IsolatedDevModeMain.accept(IsolatedDevModeMain.java:56)\n        at io.quarkus.bootstrap.app.CuratedApplication.runInCl(CuratedApplication.java:138)\n        at io.quarkus.bootstrap.app.CuratedApplication.runInAugmentClassLoader(CuratedApplication.java:93)\n        at io.quarkus.deployment.dev.DevModeMain.start(DevModeMain.java:131)\n        at io.quarkus.deployment.dev.DevModeMain.main(DevModeMain.java:62)\nCaused by: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\n        [error]: Build step io.quarkus.smallrye.jwt.deployment.SmallRyeJwtProcessor#registerOptionalClaimProducer threw an exception: java.lang.IllegalStateException: java.lang.String type can not be used to represent JWT claims in @Singleton or @ApplicationScoped beans, make the bean @RequestScoped or wrap this type with org.eclipse.microprofile.jwt.ClaimValue or jakarta.inject.Provider or jakarta.enterprise.inject.Instance\n        at io.quarkus.smallrye.jwt.deployment.SmallRyeJwtProcessor.registerOptionalClaimProducer(SmallRyeJwtProcessor.java:188)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:849)\n        at io.quarkus.builder.BuildContext.run(BuildContext.java:282)\n        at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\n        at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\n        at java.base/java.lang.Thread.run(Thread.java:833)\n        at org.jboss.threads.JBossThread.run(JBossThread.java:501)\n\n        at io.quarkus.builder.Execution.run(Execution.java:123)\n        at io.quarkus.builder.BuildExecutionBuilder.execute(BuildExecutionBuilder.java:79)\n        at io.quarkus.deployment.QuarkusAugmentor.run(QuarkusAugmentor.java:160)\n        at io.quarkus.runner.bootstrap.AugmentActionImpl.runAugment(AugmentActionImpl.java:332)\n        ... 9 more\nCaused by: java.lang.IllegalStateException: java.lang.String type can not be used to represent JWT claims in @Singleton or @ApplicationScoped beans, make the bean @RequestScoped or wrap this type with org.eclipse.microprofile.jwt.ClaimValue or jakarta.inject.Provider or jakarta.enterprise.inject.Instance\n        at io.quarkus.smallrye.jwt.deployment.SmallRyeJwtProcessor.registerOptionalClaimProducer(SmallRyeJwtProcessor.java:188)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:849)\n        at io.quarkus.builder.BuildContext.run(BuildContext.java:282)\n        at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\n        at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\n        at java.base/java.lang.Thread.run(Thread.java:833)\n        at org.jboss.threads.JBossThread.run(JBossThread.java:501)\n</code></pre>\n<p>If I wrap all my <code>@Claim</code> types in my code with <code>ClaimValue&lt;&gt;</code> the error disappears and i am able to run my application normally.</p>\n<p>Is it a bug or may I miss something about the migration ?</p>\n"},{"tags":["java","jooq"],"answers":[{"comment_count":0,"score":1,"last_activity_date":1701180941,"creation_date":1701180941,"answer_id":77564592,"question_id":77563045,"body_markdown":"I actually missed a important part - the 1st arg is the mandatory first element (either literal as T Value or columnar as Field&lt;T&gt;), the rest is the list of args.\r\n\r\nso was able to fix it this way\r\n\r\n        List&lt;Field&lt;?&gt;&gt; fields = List.of(DSL.field(DSL.name(&quot;a&quot;, &quot;b&quot;)), DSL.field(DSL.name(&quot;c&quot;, &quot;d&quot;)));\r\n        Field&lt;? extends Object&gt; first = fields.get(0);\r\n        Field&lt;?&gt;[] others = fields.stream().skip(1).toList().toArray(new Field&lt;?&gt;[0]);\r\n        DSL.coalesce(first, others);\r\n\r\n\r\n\r\nmaybe it helps others...","link":"https://stackoverflow.com/questions/77563045/jooq-coalesce-on-collection-using-dsl/77564592#77564592","title":"Jooq coalesce on collection using DSL","body":"<p>I actually missed a important part - the 1st arg is the mandatory first element (either literal as T Value or columnar as Field), the rest is the list of args.</p>\n<p>so was able to fix it this way</p>\n<pre><code>    List&lt;Field&lt;?&gt;&gt; fields = List.of(DSL.field(DSL.name(&quot;a&quot;, &quot;b&quot;)), DSL.field(DSL.name(&quot;c&quot;, &quot;d&quot;)));\n    Field&lt;? extends Object&gt; first = fields.get(0);\n    Field&lt;?&gt;[] others = fields.stream().skip(1).toList().toArray(new Field&lt;?&gt;[0]);\n    DSL.coalesce(first, others);\n</code></pre>\n<p>maybe it helps others...</p>\n"}],"comment_count":0,"is_answered":true,"view_count":39,"answer_count":1,"score":1,"last_activity_date":1701180941,"creation_date":1701166768,"question_id":77563045,"body_markdown":"I&#39;m trying to use Jooq&#39;s coalesce function using the DSL on a collection of fields (or their extension).\r\n\r\nHowever, Jooq&#39;s coalesce function accepts input in the form of varags, which I&#39;m having trouble with since my translation from a collection to varargs seems to be breaking the input.\r\n\r\n    List&lt;Field&lt;?&gt;&gt; fields = List.of(DSL.field(DSL.name(&quot;a&quot;, &quot;b&quot;)), DSL.field(DSL.name(&quot;c&quot;, &quot;d&quot;)));\r\n    DSL.coalesce(fields.get(0), fields.get(1));  // this works as each field is of type TableFieldImpl\r\n    DSL.coalesce(fields.toArray(new Field&lt;?&gt;[0]));     // this throws &quot;Type interface org.jooq.Field is not supported in dialect DEFAULT&quot;\r\n\r\n\r\n\r\nI tried a few options in the toArray init, but nothing really works.\r\n\r\nWorth noting that the runtime type of the fields is TableFieldImpl","link":"https://stackoverflow.com/questions/77563045/jooq-coalesce-on-collection-using-dsl","title":"Jooq coalesce on collection using DSL","body":"<p>I'm trying to use Jooq's coalesce function using the DSL on a collection of fields (or their extension).</p>\n<p>However, Jooq's coalesce function accepts input in the form of varags, which I'm having trouble with since my translation from a collection to varargs seems to be breaking the input.</p>\n<pre><code>List&lt;Field&lt;?&gt;&gt; fields = List.of(DSL.field(DSL.name(&quot;a&quot;, &quot;b&quot;)), DSL.field(DSL.name(&quot;c&quot;, &quot;d&quot;)));\nDSL.coalesce(fields.get(0), fields.get(1));  // this works as each field is of type TableFieldImpl\nDSL.coalesce(fields.toArray(new Field&lt;?&gt;[0]));     // this throws &quot;Type interface org.jooq.Field is not supported in dialect DEFAULT&quot;\n</code></pre>\n<p>I tried a few options in the toArray init, but nothing really works.</p>\n<p>Worth noting that the runtime type of the fields is TableFieldImpl</p>\n"}],"has_more":true,"quota_max":300,"quota_remaining":287}