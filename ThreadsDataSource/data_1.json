{"items":[{"tags":["java","docker","docker-compose","spring-data-jpa","microservices"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1674614955,"last_edit_date":1674614955,"creation_date":1674602718,"answer_id":75228307,"question_id":75227586,"body_markdown":"You seem to be mixing spring-boot 3 starters with spring-boot 2 dependencies (for instance security 5). Don&#39;t do that or you&#39;ll get incompatibility issues (like the one you&#39;re probably hitting).\r\n\r\nUse spring-boot Graddle plug-in and specify a dependency version only when it is not managed by boot. ","link":"https://stackoverflow.com/questions/75227586/failed-to-instantiate-com-zaxxer-hikari-hikaridatasource-factory-method-dataso/75228307#75228307","title":"Failed to instantiate com.zaxxer.hikari.HikariDataSource: Factory method &#39;dataSource&#39;exception with message: Failed to determine suitable driver class","body":"<p>You seem to be mixing spring-boot 3 starters with spring-boot 2 dependencies (for instance security 5). Don't do that or you'll get incompatibility issues (like the one you're probably hitting).</p>\n<p>Use spring-boot Graddle plug-in and specify a dependency version only when it is not managed by boot.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1680193948,"last_edit_date":1680193948,"creation_date":1679975575,"answer_id":75862207,"question_id":75227586,"body_markdown":"Always make sure the versions of java and the spring boot version are compatible. The following checkpoints will also help you identify any dependency or configuration that is missing.\r\n \r\nCheck if the following dependencies(.pom/.gradle) are added:\r\n\r\n - `spring-boot-starter-data-jpa`\r\n - `mysql-connector-j`\r\n\r\nCheck if the proper configurations(`application.properties`) are given:\r\n\r\n - `spring.datasource.url=jdbc:mysql://localhost:3306/testdb`\r\n - `spring.datasource.username=dbusername`\r\n - `spring.datasource.password=dbpassword`\r\n\r\nMake sure the database(`testdb`) is created before starting the app\r\n\r\nMake sure the DB is up and running before starting the app\r\n\r\n","link":"https://stackoverflow.com/questions/75227586/failed-to-instantiate-com-zaxxer-hikari-hikaridatasource-factory-method-dataso/75862207#75862207","title":"Failed to instantiate com.zaxxer.hikari.HikariDataSource: Factory method &#39;dataSource&#39;exception with message: Failed to determine suitable driver class","body":"<p>Always make sure the versions of java and the spring boot version are compatible. The following checkpoints will also help you identify any dependency or configuration that is missing.</p>\n<p>Check if the following dependencies(.pom/.gradle) are added:</p>\n<ul>\n<li><code>spring-boot-starter-data-jpa</code></li>\n<li><code>mysql-connector-j</code></li>\n</ul>\n<p>Check if the proper configurations(<code>application.properties</code>) are given:</p>\n<ul>\n<li><code>spring.datasource.url=jdbc:mysql://localhost:3306/testdb</code></li>\n<li><code>spring.datasource.username=dbusername</code></li>\n<li><code>spring.datasource.password=dbpassword</code></li>\n</ul>\n<p>Make sure the database(<code>testdb</code>) is created before starting the app</p>\n<p>Make sure the DB is up and running before starting the app</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1685373377,"creation_date":1685373377,"answer_id":76358479,"question_id":75227586,"body_markdown":"Adding this to `src/main/resources/application.properties` file solved it:\r\n\r\n```\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/mydatabasename\r\nspring.datasource.username = myusername\r\nspring.datasource.password = mypassword\r\n\r\nserver.port=8082\r\n\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect\r\nspring.jpa.properties.hibernate.format_sql = true\r\n```","link":"https://stackoverflow.com/questions/75227586/failed-to-instantiate-com-zaxxer-hikari-hikaridatasource-factory-method-dataso/76358479#76358479","title":"Failed to instantiate com.zaxxer.hikari.HikariDataSource: Factory method &#39;dataSource&#39;exception with message: Failed to determine suitable driver class","body":"<p>Adding this to <code>src/main/resources/application.properties</code> file solved it:</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://localhost:5432/mydatabasename\nspring.datasource.username = myusername\nspring.datasource.password = mypassword\n\nserver.port=8082\n\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.properties.hibernate.format_sql = true\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1690621107,"creation_date":1690621107,"answer_id":76792836,"question_id":75227586,"body_markdown":"In my case, on version 3.1.2, I changed the name of the application.properties file to application-dev.properties file. Renaming it back to application.properties file worked. Now just need to find a way to have multiple configurations","link":"https://stackoverflow.com/questions/75227586/failed-to-instantiate-com-zaxxer-hikari-hikaridatasource-factory-method-dataso/76792836#76792836","title":"Failed to instantiate com.zaxxer.hikari.HikariDataSource: Factory method &#39;dataSource&#39;exception with message: Failed to determine suitable driver class","body":"<p>In my case, on version 3.1.2, I changed the name of the application.properties file to application-dev.properties file. Renaming it back to application.properties file worked. Now just need to find a way to have multiple configurations</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1700296394,"creation_date":1700296394,"answer_id":77506178,"question_id":75227586,"body_markdown":"Add this on **application.properties** class \r\n\r\n&gt; spring.datasource.driver-class-name = com.mysql.cj.jdbc.Driver\r\n\r\n&gt; spring.datasource.url = jdbc:mysql://localhost:3306/DBNAME\r\n\r\n&gt; spring.datasource.username = DBUSER spring.datasource.password = DBPASSWORD \r\n\r\n&gt; spring.jpa.hibernate.ddl-auto = update","link":"https://stackoverflow.com/questions/75227586/failed-to-instantiate-com-zaxxer-hikari-hikaridatasource-factory-method-dataso/77506178#77506178","title":"Failed to instantiate com.zaxxer.hikari.HikariDataSource: Factory method &#39;dataSource&#39;exception with message: Failed to determine suitable driver class","body":"<p>Add this on <strong>application.properties</strong> class</p>\n<blockquote>\n<p>spring.datasource.driver-class-name = com.mysql.cj.jdbc.Driver</p>\n</blockquote>\n<blockquote>\n<p>spring.datasource.url = jdbc:mysql://localhost:3306/DBNAME</p>\n</blockquote>\n<blockquote>\n<p>spring.datasource.username = DBUSER spring.datasource.password = DBPASSWORD</p>\n</blockquote>\n<blockquote>\n<p>spring.jpa.hibernate.ddl-auto = update</p>\n</blockquote>\n"}],"comment_count":0,"is_answered":false,"view_count":10608,"answer_count":5,"score":0,"last_activity_date":1702893800,"creation_date":1674596575,"last_edit_date":1691215304,"question_id":75227586,"body_markdown":"Iam trying to dockerizing springboot microservice application but getting below error while deploying. Below providing all configuration details. Please help to resolve by providing any hint.\r\n\r\nSame working fine on idea and able to test using postman\r\n\r\n    Failed to instantiate com.zaxxer.hikari.HikariDataSource: Factory method &#39;dataSource&#39;exception with message: Failed to determine suitable driver class\r\n\r\n**application.propertie**\r\n\r\n    spring.datasource.url= jdbc:sqlserver://localhost:1433;encrypt=true;trustServerCertificate=true;databaseName=The_Read\r\nspring.datasource.username= The_read\r\nspring.datasource.password= Read@123456\r\nspring.datasource.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver\r\n\r\n***gradle dependencies***\r\n\r\n    dependencies {\r\n    implementation(&#39;org.springframework.boot:spring-boot-starter-web&#39;)\r\n    implementation(&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;)\r\n    implementation(&#39;org.springframework.boot:spring-boot-starter-security:3.0.1&#39;)\r\n    implementation &#39;org.projectlombok:lombok:1.18.24&#39;\r\n    testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.8.1&#39;\r\n    testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.8.1&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    compileOnly &#39;org.projectlombok:lombok&#39;\r\n    testAnnotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    testCompileOnly &#39;org.projectlombok:lombok&#39;\r\n    implementation &#39;io.swagger.core.v3:swagger-models:2.2.7&#39;\r\n    implementation &#39;io.swagger.core.v3:swagger-annotations:2.2.6&#39;\r\n    implementation &#39;io.swagger:swagger-annotations:1.6.8&#39;\r\n\r\n    // https://mvnrepository.com/artifact/org.springframework.security.oauth/spring-security-oauth2\r\n    implementation(&quot;org.springframework.security.oauth:spring-security-oauth2:2.5.2.RELEASE&quot;)\r\n    //implementation(&quot;org.springframework.security:spring-security-oauth2-jose:5.3.8.RELEASE&quot;)\r\n    implementation(&quot;org.springframework.security:spring-security-oauth2-jose:5.7.3&quot;)\r\n// https://mvnrepository.com/artifact/com.auth0/java-jwt\r\n    implementation group: &#39;com.auth0&#39;, name: &#39;java-jwt&#39;, version: &#39;4.2.2&#39;\r\n\r\n\r\n// https://mvnrepository.com/artifact/org.springframework.security/spring-security-core\r\n    implementation group: &#39;org.springframework.security&#39;, name: &#39;spring-security-core&#39;, version: &#39;6.0.1&#39;\r\n    implementation group: &#39;org.springframework.security&#39;, name: &#39;spring-security-oauth2-resource-server&#39;, version: &#39;5.1.6.RELEASE&#39;\r\n//Thanks for using https://jar-download.com\r\n    // https://mvnrepository.com/artifact/com.microsoft.sqlserver/mssql-jdbc\r\n    implementation(&quot;com.microsoft.sqlserver:mssql-jdbc:11.2.3.jre18&quot;)\r\n// https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api\r\n    implementation(&quot;javax.annotation:javax.annotation-api:1.3.2&quot;)\r\n    implementation(&quot;org.springframework.security:spring-security-oauth2-resource-server:5.1.0.RELEASE&quot;)\r\n\r\n    annotationProcessor &quot;org.projectlombok:lombok:1.18.8&quot;\r\n    testAnnotationProcessor(&quot;org.projectlombok:lombok:1.18.8&quot;)\r\n    // https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt\r\n    implementation(&quot;io.jsonwebtoken:jjwt:0.9.1&quot;)\r\n    // https://mvnrepository.com/artifact/javax.validation/validation-api\r\n    implementation(&quot;javax.validation:validation-api:2.0.1.Final&quot;)\r\n\r\n\r\n    implementation(&quot;javax.xml.bind:jaxb-api:2.3.1&quot;)\r\n    implementation(&quot;org.apache.commons:commons-lang3:3.0&quot;)\r\n\r\n\r\n\r\n\r\n}\r\n\r\n***Log stacktrace***\r\n\r\n        2023-01-25 02:07:10 20:37:10.777 [main] WARN org.springframework.context.annotation.AnnotationConfigApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration&#39;: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception with message: Failed to determine a suitable driver class\r\n    2023-01-25 02:07:10 20:37:10.782 [main] ERROR org.springframework.boot.SpringApplication - Application run failed\r\n    2023-01-25 02:07:10 org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration&#39;: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception with message: Failed to determine a suitable driver class\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1344)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1188)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:415)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n    2023-01-25 02:07:10 at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)\r\n    2023-01-25 02:07:10 at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)\r\n    2023-01-25 02:07:10 at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)\r\n    2023-01-25 02:07:10 at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)\r\n    2023-01-25 02:07:10 at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)\r\n    2023-01-25 02:07:10 at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\r\n    2023-01-25 02:07:10 at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)\r\n    2023-01-25 02:07:10 at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)\r\n    2023-01-25 02:07:10 at SecurityServiceApplication.main(SecurityServiceApplication.java:9)\r\n    2023-01-25 02:07:10 Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception with message: Failed to determine a suitable driver class\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:885)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)\r\n    2023-01-25 02:07:10 ... 27 common frames omitted\r\n    2023-01-25 02:07:10 Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception with message: Failed to determine a suitable driver class\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n    2023-01-25 02:07:10 ... 41 common frames omitted\r\n    2023-01-25 02:07:10 Caused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n    2023-01-25 02:07:10 at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:182)\r\n    2023-01-25 02:07:10 at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.initializeDataSourceBuilder(DataSourceProperties.java:123)\r\n    2023-01-25 02:07:10 at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:48)\r\n    2023-01-25 02:07:10 at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:90)\r\n    2023-01-25 02:07:10 at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    2023-01-25 02:07:10 at java.base/java.lang.reflect.Method.invoke(Method.java:577)\r\n    2023-01-25 02:07:10 at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)\r\n    2023-01-25 02:07:10 ... 42 common frames omitted\r\n\r\nPlease help ","link":"https://stackoverflow.com/questions/75227586/failed-to-instantiate-com-zaxxer-hikari-hikaridatasource-factory-method-dataso","title":"Failed to instantiate com.zaxxer.hikari.HikariDataSource: Factory method &#39;dataSource&#39;exception with message: Failed to determine suitable driver class","body":"<p>Iam trying to dockerizing springboot microservice application but getting below error while deploying. Below providing all configuration details. Please help to resolve by providing any hint.</p>\n<p>Same working fine on idea and able to test using postman</p>\n<pre><code>Failed to instantiate com.zaxxer.hikari.HikariDataSource: Factory method 'dataSource'exception with message: Failed to determine suitable driver class\n</code></pre>\n<p><strong>application.propertie</strong></p>\n<pre><code>spring.datasource.url= jdbc:sqlserver://localhost:1433;encrypt=true;trustServerCertificate=true;databaseName=The_Read\n</code></pre>\n<p>spring.datasource.username= The_read\nspring.datasource.password= Read@123456\nspring.datasource.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver</p>\n<p><em><strong>gradle dependencies</strong></em></p>\n<pre><code>dependencies {\nimplementation('org.springframework.boot:spring-boot-starter-web')\nimplementation('org.springframework.boot:spring-boot-starter-data-jpa')\nimplementation('org.springframework.boot:spring-boot-starter-security:3.0.1')\nimplementation 'org.projectlombok:lombok:1.18.24'\ntestImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'\ntestRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.1'\nannotationProcessor 'org.projectlombok:lombok'\ncompileOnly 'org.projectlombok:lombok'\ntestAnnotationProcessor 'org.projectlombok:lombok'\ntestCompileOnly 'org.projectlombok:lombok'\nimplementation 'io.swagger.core.v3:swagger-models:2.2.7'\nimplementation 'io.swagger.core.v3:swagger-annotations:2.2.6'\nimplementation 'io.swagger:swagger-annotations:1.6.8'\n\n// https://mvnrepository.com/artifact/org.springframework.security.oauth/spring-security-oauth2\nimplementation(&quot;org.springframework.security.oauth:spring-security-oauth2:2.5.2.RELEASE&quot;)\n//implementation(&quot;org.springframework.security:spring-security-oauth2-jose:5.3.8.RELEASE&quot;)\nimplementation(&quot;org.springframework.security:spring-security-oauth2-jose:5.7.3&quot;)\n</code></pre>\n<p>// <a href=\"https://mvnrepository.com/artifact/com.auth0/java-jwt\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.auth0/java-jwt</a>\nimplementation group: 'com.auth0', name: 'java-jwt', version: '4.2.2'</p>\n<p>// <a href=\"https://mvnrepository.com/artifact/org.springframework.security/spring-security-core\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.springframework.security/spring-security-core</a>\nimplementation group: 'org.springframework.security', name: 'spring-security-core', version: '6.0.1'\nimplementation group: 'org.springframework.security', name: 'spring-security-oauth2-resource-server', version: '5.1.6.RELEASE'\n//Thanks for using <a href=\"https://jar-download.com\" rel=\"nofollow noreferrer\">https://jar-download.com</a>\n// <a href=\"https://mvnrepository.com/artifact/com.microsoft.sqlserver/mssql-jdbc\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.microsoft.sqlserver/mssql-jdbc</a>\nimplementation(&quot;com.microsoft.sqlserver:mssql-jdbc:11.2.3.jre18&quot;)\n// <a href=\"https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api</a>\nimplementation(&quot;javax.annotation:javax.annotation-api:1.3.2&quot;)\nimplementation(&quot;org.springframework.security:spring-security-oauth2-resource-server:5.1.0.RELEASE&quot;)</p>\n<pre><code>annotationProcessor &quot;org.projectlombok:lombok:1.18.8&quot;\ntestAnnotationProcessor(&quot;org.projectlombok:lombok:1.18.8&quot;)\n// https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt\nimplementation(&quot;io.jsonwebtoken:jjwt:0.9.1&quot;)\n// https://mvnrepository.com/artifact/javax.validation/validation-api\nimplementation(&quot;javax.validation:validation-api:2.0.1.Final&quot;)\n\n\nimplementation(&quot;javax.xml.bind:jaxb-api:2.3.1&quot;)\nimplementation(&quot;org.apache.commons:commons-lang3:3.0&quot;)\n</code></pre>\n<p>}</p>\n<p><em><strong>Log stacktrace</strong></em></p>\n<pre><code>    2023-01-25 02:07:10 20:37:10.777 [main] WARN org.springframework.context.annotation.AnnotationConfigApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration': Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class\n2023-01-25 02:07:10 20:37:10.782 [main] ERROR org.springframework.boot.SpringApplication - Application run failed\n2023-01-25 02:07:10 org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration': Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1344)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1188)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:415)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n2023-01-25 02:07:10 at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)\n2023-01-25 02:07:10 at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)\n2023-01-25 02:07:10 at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)\n2023-01-25 02:07:10 at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)\n2023-01-25 02:07:10 at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)\n2023-01-25 02:07:10 at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n2023-01-25 02:07:10 at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)\n2023-01-25 02:07:10 at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)\n2023-01-25 02:07:10 at SecurityServiceApplication.main(SecurityServiceApplication.java:9)\n2023-01-25 02:07:10 Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n2023-01-25 02:07:10 at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:885)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)\n2023-01-25 02:07:10 ... 27 common frames omitted\n2023-01-25 02:07:10 Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n2023-01-25 02:07:10 ... 41 common frames omitted\n2023-01-25 02:07:10 Caused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n2023-01-25 02:07:10 at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:182)\n2023-01-25 02:07:10 at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.initializeDataSourceBuilder(DataSourceProperties.java:123)\n2023-01-25 02:07:10 at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:48)\n2023-01-25 02:07:10 at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:90)\n2023-01-25 02:07:10 at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n2023-01-25 02:07:10 at java.base/java.lang.reflect.Method.invoke(Method.java:577)\n2023-01-25 02:07:10 at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)\n2023-01-25 02:07:10 ... 42 common frames omitted\n</code></pre>\n<p>Please help</p>\n"},{"tags":["java","maven","swing","look-and-feel","flatlaf"],"comments":[{"score":0,"post_type":"question","creation_date":1693361703,"post_id":77003536,"comment_id":135749428,"body_markdown":"Don&#39;t use `src/main` or `src/main/resources` or `resources`, these paths won&#39;t exist at runtime. First, I would recommend, creating a directory under resources (name it what ever you like), place your properties file in it and then use that directory name instead, for example `FlatLightLaf.registerCustomDefaultsSource(&quot;setup&quot;);`, where `setup` is the name of directory.  If you have subdirectories, then you need to use `.` to seperate them, for example `path.to.your.properties.file`","link":"https://stackoverflow.com/questions/77003536/swing-flatlaf-customized-properties-file#comment135749428_77003536","body":"Don&#39;t use <code>src&#47;main</code> or <code>src&#47;main&#47;resources</code> or <code>resources</code>, these paths won&#39;t exist at runtime. First, I would recommend, creating a directory under resources (name it what ever you like), place your properties file in it and then use that directory name instead, for example <code>FlatLightLaf.registerCustomDefaultsSource(&quot;setup&quot;);</code>, where <code>setup</code> is the name of directory.  If you have subdirectories, then you need to use <code>.</code> to seperate them, for example <code>path.to.your.properties.file</code>"},{"score":0,"post_type":"question","creation_date":1693361951,"post_id":77003536,"comment_id":135749439,"body_markdown":"The contents of the `resources` directory will be copied into your resulting application bundle (excluding the `resources` directory name itself), so a resource named `src/main/resources/image.png`, will appear to your application as `/image.png` and can accessed by using `Class#getResource` or variants.  This is standard maven practice and I would suggest spending some time to understand it","link":"https://stackoverflow.com/questions/77003536/swing-flatlaf-customized-properties-file#comment135749439_77003536","body":"The contents of the <code>resources</code> directory will be copied into your resulting application bundle (excluding the <code>resources</code> directory name itself), so a resource named <code>src&#47;main&#47;resources&#47;image.png</code>, will appear to your application as <code>&#47;image.png</code> and can accessed by using <code>Class#getResource</code> or variants.  This is standard maven practice and I would suggest spending some time to understand it"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702891333,"creation_date":1702891333,"answer_id":77678086,"question_id":77003536,"body_markdown":"To use a FlatLaf properties file in a Maven project:\r\n1. The properties file name must match the used theme class name. E.g. `FlatLightLaf.properties` for class `FlatLightLaf` or `FlatDarkLaf.properties` for class `FlatDarkLaf`.\r\n2. You must call the method below **BEFORE** setting the look and feel:\r\n```java\r\nFlatLaf.registerCustomDefaultsSource( &quot;com.myapp.themes&quot; );\r\n```\r\nwhere `com.myapp.themes` is the folder containing your `.properties` file/s.\r\n\r\n### Reference\r\nhttps://www.formdev.com/flatlaf/how-to-customize/#application_properties\r\n","link":"https://stackoverflow.com/questions/77003536/swing-flatlaf-customized-properties-file/77678086#77678086","title":"Swing Flatlaf customized properties file","body":"<p>To use a FlatLaf properties file in a Maven project:</p>\n<ol>\n<li>The properties file name must match the used theme class name. E.g. <code>FlatLightLaf.properties</code> for class <code>FlatLightLaf</code> or <code>FlatDarkLaf.properties</code> for class <code>FlatDarkLaf</code>.</li>\n<li>You must call the method below <strong>BEFORE</strong> setting the look and feel:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>FlatLaf.registerCustomDefaultsSource( &quot;com.myapp.themes&quot; );\n</code></pre>\n<p>where <code>com.myapp.themes</code> is the folder containing your <code>.properties</code> file/s.</p>\n<h3>Reference</h3>\n<p><a href=\"https://www.formdev.com/flatlaf/how-to-customize/#application_properties\" rel=\"nofollow noreferrer\">https://www.formdev.com/flatlaf/how-to-customize/#application_properties</a></p>\n"}],"comment_count":2,"is_answered":false,"view_count":185,"answer_count":1,"score":1,"last_activity_date":1702891333,"creation_date":1693341954,"question_id":77003536,"body_markdown":"I have integrated the flatlaf look and feel library into my Swing application via Maven, specifically utilizing version 1.6.2 of FlatLaf. \r\n\r\nWithin my application, I&#39;ve employed the existing theme named &quot;flatlaflight.setup()&quot;. However, prior to this step, I introduced a properties file bearing the same name into the resources directory. This file was utilized to tailor the style parameters according to my requirements. Regrettably, the system is unable to retrieve the customizations specified within this properties file.\r\n\r\nRegistered the custom default source to FlatLightLaf.registerCustomDefaultsSource(&quot;src/main/resources&quot;);\r\nalso tried\r\nFlatLightLaf.registerCustomDefaultsSource(&quot;resources&quot;);\r\n\r\n","link":"https://stackoverflow.com/questions/77003536/swing-flatlaf-customized-properties-file","title":"Swing Flatlaf customized properties file","body":"<p>I have integrated the flatlaf look and feel library into my Swing application via Maven, specifically utilizing version 1.6.2 of FlatLaf.</p>\n<p>Within my application, I've employed the existing theme named &quot;flatlaflight.setup()&quot;. However, prior to this step, I introduced a properties file bearing the same name into the resources directory. This file was utilized to tailor the style parameters according to my requirements. Regrettably, the system is unable to retrieve the customizations specified within this properties file.</p>\n<p>Registered the custom default source to FlatLightLaf.registerCustomDefaultsSource(&quot;src/main/resources&quot;);\nalso tried\nFlatLightLaf.registerCustomDefaultsSource(&quot;resources&quot;);</p>\n"},{"tags":["java","jwt","jjwt"],"comments":[{"score":1,"post_type":"question","creation_date":1686904015,"post_id":76487994,"comment_id":134865200,"body_markdown":"The latest release is 0.11.5 which was released last year. but the `encryptWith` method was added on 19 May 2023. you should download the latest code and compile it locally.","link":"https://stackoverflow.com/questions/76487994/generate-jwe-encrypted-jwt-using-json-web-token-jjwt#comment134865200_76487994","body":"The latest release is 0.11.5 which was released last year. but the <code>encryptWith</code> method was added on 19 May 2023. you should download the latest code and compile it locally."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702883161,"creation_date":1702883161,"answer_id":77677431,"question_id":76487994,"body_markdown":"```java\r\nString token = Jwts.builder().setClaims(claims).setIssuer(jwtIssuer)\r\n                .setIssuedAt(Date.from(currentTime.atZone(ZoneId.systemDefault()).toInstant()))\r\n                .setExpiration(Date\r\n                        .from(currentTime.plusMinutes(accessTokenExpiryMin).atZone(ZoneId.systemDefault()).toInstant()))\r\n                .signWith(getSigningKey()).compact();\r\n\r\nprivate static final String encryptSecret = &quot;ThisisnotSecret&quot;; //This must be a 256 bit long\r\nbyte[] encryptSecretBytes = encryptSecret.getBytes();\r\nKey key = new AesKey(encryptSecretBytes);\r\nJsonWebEncryption jwe = new JsonWebEncryption();\r\njwe.setPayload(jwt);\r\njwe.setAlgorithmHeaderValue(KeyManagementAlgorithmIdentifiers.A256KW); \r\njwe.setEncryptionMethodHeaderParameter(ContentEncryptionAlgorithmIdentifiers.AES_256_CBC_HMAC_SHA_512);\r\njwe.setKey(key);\r\nString encryptedToken = jwe.getCompactSerialization();   \r\n\r\n```\r\n\r\n\r\n```\r\n implementation &#39;org.bitbucket.b_c:jose4j:0.9.4&#39;\r\n runtimeOnly &#39;io.jsonwebtoken:jjwt-impl:0.12.3&#39;\r\n runtimeOnly &#39;io.jsonwebtoken:jjwt-jackson:0.12.3&#39;\r\n```","link":"https://stackoverflow.com/questions/76487994/generate-jwe-encrypted-jwt-using-json-web-token-jjwt/77677431#77677431","title":"Generate JWE (Encrypted JWT) using Json Web Token JJWT","body":"<pre class=\"lang-java prettyprint-override\"><code>String token = Jwts.builder().setClaims(claims).setIssuer(jwtIssuer)\n                .setIssuedAt(Date.from(currentTime.atZone(ZoneId.systemDefault()).toInstant()))\n                .setExpiration(Date\n                        .from(currentTime.plusMinutes(accessTokenExpiryMin).atZone(ZoneId.systemDefault()).toInstant()))\n                .signWith(getSigningKey()).compact();\n\nprivate static final String encryptSecret = &quot;ThisisnotSecret&quot;; //This must be a 256 bit long\nbyte[] encryptSecretBytes = encryptSecret.getBytes();\nKey key = new AesKey(encryptSecretBytes);\nJsonWebEncryption jwe = new JsonWebEncryption();\njwe.setPayload(jwt);\njwe.setAlgorithmHeaderValue(KeyManagementAlgorithmIdentifiers.A256KW); \njwe.setEncryptionMethodHeaderParameter(ContentEncryptionAlgorithmIdentifiers.AES_256_CBC_HMAC_SHA_512);\njwe.setKey(key);\nString encryptedToken = jwe.getCompactSerialization();   \n\n</code></pre>\n<pre><code> implementation 'org.bitbucket.b_c:jose4j:0.9.4'\n runtimeOnly 'io.jsonwebtoken:jjwt-impl:0.12.3'\n runtimeOnly 'io.jsonwebtoken:jjwt-jackson:0.12.3'\n</code></pre>\n"}],"comment_count":1,"is_answered":false,"view_count":431,"answer_count":1,"score":1,"last_activity_date":1702883161,"creation_date":1686901471,"question_id":76487994,"body_markdown":"I am trying to generate JWE using JJWT in Java.\r\n\r\nAs per the documentation https://github.com/jwtk/jjwt#creating-a-jwe there has to be an encryptWith method in JwtBuilder class but I am not able to find it and I am using the latest available version with JDK 8\r\n```\r\nimplementation &#39;io.jsonwebtoken:jjwt-api:0.11.5&#39;\r\nruntimeOnly &#39;io.jsonwebtoken:jjwt-impl:0.11.5&#39;\r\nruntimeOnly &#39;io.jsonwebtoken:jjwt-jackson:0.11.5&#39;\r\n```\r\n\r\nCurrently, I am using JWS and want to replace it with JWE\r\n\r\n```\r\nString token = Jwts.builder().setClaims(claims).setIssuer(jwtIssuer)\r\n\t\t\t\t.setIssuedAt(Date.from(currentTime.atZone(ZoneId.systemDefault()).toInstant()))\r\n\t\t\t\t.setExpiration(Date\r\n\t\t\t\t\t\t.from(currentTime.plusMinutes(accessTokenExpiryMin).atZone(ZoneId.systemDefault()).toInstant()))\r\n\t\t\t\t.signWith(getSigningKey()).compact();\r\n```\r\n\r\nHow to use the encryptWith method? Am I missing something?\r\n\r\nThanks in advance.\r\n","link":"https://stackoverflow.com/questions/76487994/generate-jwe-encrypted-jwt-using-json-web-token-jjwt","title":"Generate JWE (Encrypted JWT) using Json Web Token JJWT","body":"<p>I am trying to generate JWE using JJWT in Java.</p>\n<p>As per the documentation <a href=\"https://github.com/jwtk/jjwt#creating-a-jwe\" rel=\"nofollow noreferrer\">https://github.com/jwtk/jjwt#creating-a-jwe</a> there has to be an encryptWith method in JwtBuilder class but I am not able to find it and I am using the latest available version with JDK 8</p>\n<pre><code>implementation 'io.jsonwebtoken:jjwt-api:0.11.5'\nruntimeOnly 'io.jsonwebtoken:jjwt-impl:0.11.5'\nruntimeOnly 'io.jsonwebtoken:jjwt-jackson:0.11.5'\n</code></pre>\n<p>Currently, I am using JWS and want to replace it with JWE</p>\n<pre><code>String token = Jwts.builder().setClaims(claims).setIssuer(jwtIssuer)\n                .setIssuedAt(Date.from(currentTime.atZone(ZoneId.systemDefault()).toInstant()))\n                .setExpiration(Date\n                        .from(currentTime.plusMinutes(accessTokenExpiryMin).atZone(ZoneId.systemDefault()).toInstant()))\n                .signWith(getSigningKey()).compact();\n</code></pre>\n<p>How to use the encryptWith method? Am I missing something?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","generics"],"comments":[{"score":4,"post_type":"question","creation_date":1700810737,"post_id":77541056,"comment_id":136701058,"body_markdown":"what a title! a description of your problem would have been better","link":"https://stackoverflow.com/questions/77541056/hard-problem-with-generics-in-java-generics-extremly-hard-problem-nearly-unsolv#comment136701058_77541056","body":"what a title! a description of your problem would have been better"},{"score":0,"post_type":"question","creation_date":1702841803,"post_id":77541056,"comment_id":136939911,"body_markdown":"Sorry, it was like an hour before Uni&#39;s deadline haha, I solved it eventually","link":"https://stackoverflow.com/questions/77541056/hard-problem-with-generics-in-java-generics-extremly-hard-problem-nearly-unsolv#comment136939911_77541056","body":"Sorry, it was like an hour before Uni&#39;s deadline haha, I solved it eventually"}],"comment_count":2,"is_answered":false,"view_count":56,"answer_count":0,"score":-1,"last_activity_date":1702874076,"creation_date":1700806521,"last_edit_date":1702874076,"question_id":77541056,"body_markdown":"Hey I have a problem with generics in Java. \r\n\r\nI need to:\r\n\r\n&gt; Create an XList class, providing additional capabilities for creating lists and operating on them.\r\nThe class should contain appropriate constructors and static of methods, allowing you to create XList objects from other collections, arrays and comma-delimited arguments.\r\nIn addition, auxiliary methods for creating xlists from subtitles:\r\nofChars(subtitle) - returns an x-list of subtitle characters,\r\nofTokens(subtitle, [ sep ]) - returns an x-list of subtitle symbols, separated by separators with sep (if none - then by whitespace characters).\r\nIn addition, provide methods:\r\nunion(any_collection) - returns a new x-list with the contents of the collection appended to this x-list,\r\ndiff(any_collection) - returns an x-list containing those elements of this x-list that do not appear in the collection,\r\nunique() - returns a new x-list that contains all non-repeating elements of this x-list\r\ncombine() - returns an x-list of combinations of elements from each collection that are elements of this x-list\r\ncollect(Function) - returns a new x-list, the elements of which are the results of a function applied to the elements of this x-list,\r\njoin([sep]) - returns a caption, which is a combination of the elements of this x-list, with possibly a separator inserted between them,\r\nforEachWithIndex(consumer_with_two arguments: element, index) - to iterate through the list with access to both the elements and their indexes.\r\n\r\n\r\nThis is my Main.java and XList.java files, there is problem with combine (I know it needs to be done in a tree style but honestly no idea how to make it work)\r\n, collect and join it needs to print to ouput:  \r\n\r\n\r\n    [1, 3, 9, 11]\r\n    [5, 6, 9]\r\n    [100, 200, 300]\r\n    [100, 200, 300]\r\n    [3, 4, 5]\r\n    [3, 4, 5]\r\n    [a, l, a,  , m, a,  , k, o, t, a]\r\n    [ala, ma, kota]\r\n    [A, B, C]\r\n    [1, 3, 9, 11, 5, 6, 9]\r\n    [1, 3, 9, 11, 5, 6, 9, 11]\r\n    [1, 3, 9, 11, 5, 6, 9, 11]\r\n    [1, 3, 9, 11, 5, 6, 9, 11, 100, 200, 300, 4, 4]\r\n    [1, 3, 9, 11, 5, 6, 9, 11, 100, 200, 300, 4, 4, 3, 4, 5]\r\n    [1, 9, 11, 6, 9, 11, 100, 200, 300]\r\n    []\r\n    [1, 3, 9, 11, 5, 6, 100, 200, 300, 4]\r\n    [[a, b], [X, Y, Z], [1, 2]]\r\n    [[a, X, 1], [b, X, 1], [a, Y, 1], [b, Y, 1], [a, Z, 1], [b, Z, 1], [a, X, 2], [b, X, 2], [a, Y, 2], [b, Y, 2], [a, Z, 2], [b, Z, 2]]\r\n    aX1 bX1 aY1 bY1 aZ1 bZ1 aX2 bX2 aY2 bY2 aZ2 bZ2\r\n    a-X-1 b-X-1 a-Y-1 b-Y-1 a-Z-1 b-Z-1 a-X-2 b-X-2 a-Y-2 b-Y-2 a-Z-2 b-Z-2\r\n    [2, 4, 16, 20, 22, 60, 6, 8]\r\n    [4, 16, 22, 60, 8]\r\n    [16, 22, 60, 8] \r\n\r\nbut it prints now instead this:  \r\n\r\n    [1, 3, 9, 11]\r\n    [5, 6, 9]\r\n    [100, 200, 300]\r\n    [100, 200, 300]\r\n    [3, 4, 5]\r\n    [3, 4, 5]\r\n    [a, l, a,  , m, a,  , k, o, t, a]\r\n    [ala, ma, kota]\r\n    [A, B, C]\r\n    [1, 3, 9, 11, 5, 6, 9]\r\n    [1, 3, 9, 11, 5, 6, 9, 11]\r\n    [1, 3, 9, 11, 5, 6, 9, 11]\r\n    [1, 3, 9, 11, 5, 6, 9, 11, 100, 200, 300, 4, 4]\r\n    [1, 3, 9, 11, 5, 6, 9, 11, 100, 200, 300, 4, 4, 3, 4, 5]\r\n    [1, 9, 11, 6, 9, 11, 100, 200, 300]\r\n    []\r\n    [1, 3, 100, 4, 5, 6, 200, 9, 11, 300]\r\n    [[a, b], [X, Y, Z], [1, 2]]\r\n    [[], [], [], []]\r\n       \r\n       \r\n    [2, 4, 16, 20, 22, 60, 6, 8]\r\n    [4, 16, 22, 60, 8]\r\n    [16, 22, 60, 8]  \r\n\r\nthis is my Main.java: \r\n\r\n    import java.util.*;\r\n    \r\n    // Plik Main.java może być dowolnie modyfikowany,\r\n    // ale punkty uzyskuje się za właściwe dzialanie poszczeg&#243;lnych pokazanych tu metod klasy XList.\r\n    \r\n    // Jeżeli nie oprogramujemy wszystkich metod, to z klasy Main nalezy usunąć te fragmenty,\r\n    // kt&#243;re powodują błędy w kompilacji - w przeciwnym razie nie uzyskamy punkt&#243;w.\r\n    \r\n    public class Main {\r\n      public static void main(String[] args) {\r\n        // Pewne dodatkowe zestawy danych\r\n        Integer[] ints = { 100, 200, 300 };\r\n        Set&lt;Integer&gt; set = new HashSet&lt;&gt;(Arrays.asList(3, 4, 5));\r\n       \r\n        // Sposoby tworzenia\r\n        XList&lt;Integer&gt; list1 = new XList&lt;&gt;(1, 3, 9, 11);\r\n        XList&lt;Integer&gt; list2 = XList.of(5, 6, 9);\r\n        XList&lt;Integer&gt; list3 = new XList(ints);\r\n        XList&lt;Integer&gt; list4 = XList.of(ints);\r\n        XList&lt;Integer&gt; list5 = new XList(set);\r\n        XList&lt;Integer&gt; list6 = XList.of(set);\r\n    \r\n        System.out.println(list1);\r\n        System.out.println(list2);\r\n        System.out.println(list3);\r\n        System.out.println(list4);\r\n        System.out.println(list5);\r\n        System.out.println(list6);\r\n       \r\n        // --- i pomocnicze metody do tworzenia z napis&#243;w\r\n        XList&lt;String&gt; slist1 = XList.charsOf(&quot;ala ma kota&quot;);\r\n        XList&lt;String&gt; slist2 = XList.tokensOf(&quot;ala ma kota&quot;);\r\n        XList&lt;String&gt; slist3 = XList.tokensOf(&quot;A-B-C&quot;, &quot;-&quot;);\r\n    \r\n        System.out.println(slist1);\r\n        System.out.println(slist2);\r\n        System.out.println(slist3);\r\n    \r\n        // Metoda union - suma element&#243;w\r\n        List&lt;Integer&gt; m1 = list1.union(list2);  // oczywiście, można podstawiać na List\r\n        System.out.println(m1);\r\n        // można wykonywać wszystkie operacje z interfejsu List, np:\r\n        m1.add(11);\r\n        System.out.println(m1);\r\n        XList&lt;Integer&gt; m2 = (XList&lt;Integer&gt;) m1;\r\n        XList&lt;Integer&gt; m3 = m2.union(ints).union(XList.of(4, 4));\r\n        System.out.println(m2); // m2 się nie zmienia\r\n        System.out.println(m3); // wynik jest w m3\r\n        m3 = m3.union(set);\r\n        System.out.println(m3);\r\n       \r\n        // Widzieliśmy metode union\r\n        // Teraz metoda diff(dowolna kolekcja)\r\n        System.out.println(m3.diff(set));  // wszystko z m3, co nie jest w set\r\n        System.out.println(XList.of(set).diff(m3)); // co jest w set, czego nie ma w m3\r\n       \r\n        // Metoda unique -zwraca nową Xlist bez duplikatow  \r\n        XList&lt;Integer&gt; uniq = m3.unique(); // lista, nie Set\r\n        System.out.println(uniq);    \r\n       \r\n        // kombinacje (kolejność jest istotna)\r\n        List&lt;String&gt; sa = Arrays.asList( &quot;a&quot;, &quot;b&quot;);\r\n        List&lt;String&gt; sb = Arrays.asList( &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot; );\r\n        XList&lt;String&gt; sc = XList.charsOf( &quot;12&quot; );\r\n        XList toCombine = XList.of(sa, sb, sc);  // czy można tu uniknąć użycia typu surowego?\r\n        System.out.println(toCombine);\r\n        XList&lt;XList&lt;String&gt;&gt; cres = toCombine.combine();\r\n        System.out.println(cres);\r\n    \r\n        // collect i join\r\n        XList&lt;String&gt; j1 = cres.collect( list -&gt; list.join());\r\n        System.out.println(j1.join(&quot; &quot;));\r\n        XList&lt;String&gt; j2 =cres.collect( list -&gt; list.join(&quot;-&quot;));\r\n        System.out.println(j2.join(&quot; &quot;));\r\n       \r\n        // forEachWithIndex\r\n        XList&lt;Integer&gt; lmod = XList.of(1,2,8, 10, 11, 30, 3, 4);  \r\n        lmod.forEachWithIndex( (e, i) -&gt; lmod.set(i, e*2));\r\n        System.out.println(lmod);\r\n        lmod.forEachWithIndex( (e, i) -&gt; { if (i % 2 == 0) lmod.remove(e); } );\r\n        System.out.println(lmod);\r\n        lmod.forEachWithIndex( (e, i) -&gt; { if (i % 2 == 0) lmod.remove(i); } );\r\n        System.out.println(lmod); // Pytanie: dlaczego mamy taki efekt?\r\n    \r\n      }\r\n    }\r\n\r\nand XList.java: \r\n\r\n    import java.util.*;\r\n    import java.util.function.BiConsumer;\r\n    import java.util.function.Function;\r\n    \r\n    public class XList &lt;T&gt; extends ArrayList&lt;T&gt; {\r\n        \r\n        public  XList(T... t) {\r\n    \r\n            for(T wrt : t){\r\n                if (wrt instanceof Set&lt;?&gt;) {\r\n                    this.addAll((Set&lt;T&gt;) wrt);\r\n                } else\r\n                    this.add(wrt);\r\n            }\r\n        }\r\n    \r\n        public static &lt;T&gt; XList&lt;T&gt; of(Object... ts) {\r\n    \r\n            XList&lt;T&gt; xList = new XList&lt;&gt;();\r\n    \r\n            for (Object wrt : ts) {\r\n    \r\n                if (wrt instanceof Set&lt;?&gt;) {\r\n                    xList.addAll((Set&lt;T&gt;) wrt);\r\n                } else\r\n                    xList.add((T) wrt);\r\n            }\r\n    \r\n            return xList;\r\n        }\r\n    \r\n        public static XList&lt;String&gt; charsOf(String string) {\r\n    \r\n            char[] tab = string.toCharArray();\r\n            XList&lt;String&gt; xList = new XList&lt;&gt;();\r\n    \r\n            for (int i = 0; i &lt; tab.length; i++) {\r\n                xList.add(String.valueOf(tab[i]));\r\n            }\r\n    \r\n            return xList ;\r\n        }\r\n    \r\n        public static XList&lt;String&gt; tokensOf(String s, String sep) {\r\n    \r\n            String[] tab = s.split(sep);\r\n            XList&lt;String&gt; l;\r\n    \r\n            return l = new XList&lt;&gt;(tab);\r\n        }\r\n    \r\n        public static XList&lt;String&gt; tokensOf(String s) {\r\n    \r\n            return tokensOf(s, &quot; &quot;);\r\n        }\r\n    \r\n    \r\n        public XList&lt;T&gt; union(Collection&lt;T&gt; lista) {\r\n    \r\n            XList&lt;T&gt; xlist = new XList&lt;&gt;();\r\n            Iterator&lt;T&gt; it = this.iterator();\r\n    \r\n            while (it.hasNext()){\r\n                xlist.add(it.next());\r\n            }\r\n    \r\n            it = lista.iterator();\r\n    \r\n            while (it.hasNext()){\r\n                xlist.add(it.next());\r\n            }\r\n    \r\n            return xlist;\r\n        }\r\n    \r\n        public XList&lt;T&gt; union(T[] lista) {\r\n    \r\n            XList&lt;T&gt; xlist = new XList&lt;&gt;();\r\n            Iterator&lt;T&gt; it = this.iterator();\r\n    \r\n            while (it.hasNext()){\r\n                xlist.add(it.next());\r\n            }\r\n    \r\n            for (int i = 0; i &lt; lista.length; i++) {\r\n                xlist.add(lista[i]);\r\n            }\r\n    \r\n            return xlist;\r\n        }\r\n    \r\n    \r\n        public XList&lt;T&gt; diff(Collection obj) {\r\n    \r\n            Set&lt;T&gt; s = new HashSet&lt;&gt;(obj);\r\n            int size;\r\n            Iterator&lt;T&gt; iterator = this.iterator();\r\n            XList&lt;T&gt; xList = new XList&lt;&gt;();\r\n    \r\n            while (iterator.hasNext()){\r\n                xList.add(iterator.next());\r\n            }\r\n            Iterator&lt;T&gt; it;\r\n    \r\n            do{\r\n                it = s.iterator();\r\n                size = xList.size();\r\n    \r\n                while (it.hasNext()) {\r\n                    xList.remove(it.next());\r\n                }\r\n            }while (size != xList.size());\r\n    \r\n            return xList;\r\n        }\r\n    \r\n    \r\n        public XList&lt;T&gt; unique() {\r\n    \r\n            Set&lt;T&gt; s = new HashSet&lt;&gt;(this);\r\n            this.clear();\r\n            Iterator&lt;T&gt; it = s.iterator();\r\n    \r\n            while (it.hasNext()){\r\n                this.add(it.next());\r\n            }\r\n    \r\n            return this;\r\n        }\r\n    \r\n    \r\n        void sout(){\r\n    \r\n            Iterator&lt;T&gt; it = this.iterator();\r\n    \r\n            while (it.hasNext()){\r\n                System.out.println(it.next());\r\n            }\r\n        }\r\n    \r\n    \r\n        public XList&lt;XList&lt;T&gt;&gt; combine() {\r\n            XList&lt;XList&lt;T&gt;&gt; result = new XList&lt;&gt;();\r\n            kombinacjeRekurencyjne(new XList&lt;&gt;(this), result, new XList&lt;T&gt;(), 0);\r\n            return result;\r\n        }\r\n    \r\n        private static &lt;T&gt; void kombinacjeRekurencyjne(XList&lt;XList&lt;T&gt;&gt; listaList, XList&lt;XList&lt;T&gt;&gt; wynik, XList&lt;T&gt; aktualna, int indeks) {\r\n            if (indeks == listaList.size()) {\r\n                wynik.add(aktualna);\r\n                return;\r\n            }\r\n    \r\n            for (T element : listaList.get(indeks)) {\r\n                aktualna.add(element);\r\n                kombinacjeRekurencyjne(listaList, wynik, aktualna, indeks + 1);\r\n                aktualna.remove(aktualna.size() - 1);  // Usuwamy ostatni element, aby wr&#243;cić do poprzedniego stanu\r\n            }\r\n            kombinacjeRekurencyjne(listaList, wynik, aktualna, indeks + 1);\r\n        }\r\n    \r\n    \r\n        public void forEachWithIndex(BiConsumer&lt;T, Integer&gt; consumer) {\r\n    \r\n            for (int i = 0; i &lt; this.size(); i++) {\r\n                consumer.accept(this.get(i), i);\r\n            }\r\n        }\r\n    \r\n        public &lt;R&gt; XList&lt;R&gt; collect(Function&lt;T, R&gt; mapper) {\r\n    \r\n            XList&lt;R&gt; result = new XList&lt;&gt;();\r\n    \r\n            for (T element : this) {\r\n                result.add(mapper.apply(element));\r\n            }\r\n    \r\n            return result;\r\n        }\r\n    \r\n        public String join(){\r\n    \r\n            return join(&quot;&quot;);\r\n        }\r\n    \r\n    \r\n        public String join(String separator) {\r\n    \r\n            StringBuilder result = new StringBuilder();\r\n    \r\n            for (T element : this) {\r\n                result.append(element).append(separator);\r\n            }\r\n            if (result.length() &gt; 0) {\r\n                result.setLength(result.length() - separator.length());\r\n            }\r\n    \r\n            return result.toString();\r\n        }\r\n    }","link":"https://stackoverflow.com/questions/77541056/hard-problem-with-generics-in-java-generics-extremly-hard-problem-nearly-unsolv","title":"Hard problem with generics in Java Generics extremly hard problem, nearly unsolvable","body":"<p>Hey I have a problem with generics in Java.</p>\n<p>I need to:</p>\n<blockquote>\n<p>Create an XList class, providing additional capabilities for creating lists and operating on them.\nThe class should contain appropriate constructors and static of methods, allowing you to create XList objects from other collections, arrays and comma-delimited arguments.\nIn addition, auxiliary methods for creating xlists from subtitles:\nofChars(subtitle) - returns an x-list of subtitle characters,\nofTokens(subtitle, [ sep ]) - returns an x-list of subtitle symbols, separated by separators with sep (if none - then by whitespace characters).\nIn addition, provide methods:\nunion(any_collection) - returns a new x-list with the contents of the collection appended to this x-list,\ndiff(any_collection) - returns an x-list containing those elements of this x-list that do not appear in the collection,\nunique() - returns a new x-list that contains all non-repeating elements of this x-list\ncombine() - returns an x-list of combinations of elements from each collection that are elements of this x-list\ncollect(Function) - returns a new x-list, the elements of which are the results of a function applied to the elements of this x-list,\njoin([sep]) - returns a caption, which is a combination of the elements of this x-list, with possibly a separator inserted between them,\nforEachWithIndex(consumer_with_two arguments: element, index) - to iterate through the list with access to both the elements and their indexes.</p>\n</blockquote>\n<p>This is my Main.java and XList.java files, there is problem with combine (I know it needs to be done in a tree style but honestly no idea how to make it work)\n, collect and join it needs to print to ouput:</p>\n<pre><code>[1, 3, 9, 11]\n[5, 6, 9]\n[100, 200, 300]\n[100, 200, 300]\n[3, 4, 5]\n[3, 4, 5]\n[a, l, a,  , m, a,  , k, o, t, a]\n[ala, ma, kota]\n[A, B, C]\n[1, 3, 9, 11, 5, 6, 9]\n[1, 3, 9, 11, 5, 6, 9, 11]\n[1, 3, 9, 11, 5, 6, 9, 11]\n[1, 3, 9, 11, 5, 6, 9, 11, 100, 200, 300, 4, 4]\n[1, 3, 9, 11, 5, 6, 9, 11, 100, 200, 300, 4, 4, 3, 4, 5]\n[1, 9, 11, 6, 9, 11, 100, 200, 300]\n[]\n[1, 3, 9, 11, 5, 6, 100, 200, 300, 4]\n[[a, b], [X, Y, Z], [1, 2]]\n[[a, X, 1], [b, X, 1], [a, Y, 1], [b, Y, 1], [a, Z, 1], [b, Z, 1], [a, X, 2], [b, X, 2], [a, Y, 2], [b, Y, 2], [a, Z, 2], [b, Z, 2]]\naX1 bX1 aY1 bY1 aZ1 bZ1 aX2 bX2 aY2 bY2 aZ2 bZ2\na-X-1 b-X-1 a-Y-1 b-Y-1 a-Z-1 b-Z-1 a-X-2 b-X-2 a-Y-2 b-Y-2 a-Z-2 b-Z-2\n[2, 4, 16, 20, 22, 60, 6, 8]\n[4, 16, 22, 60, 8]\n[16, 22, 60, 8] \n</code></pre>\n<p>but it prints now instead this:</p>\n<pre><code>[1, 3, 9, 11]\n[5, 6, 9]\n[100, 200, 300]\n[100, 200, 300]\n[3, 4, 5]\n[3, 4, 5]\n[a, l, a,  , m, a,  , k, o, t, a]\n[ala, ma, kota]\n[A, B, C]\n[1, 3, 9, 11, 5, 6, 9]\n[1, 3, 9, 11, 5, 6, 9, 11]\n[1, 3, 9, 11, 5, 6, 9, 11]\n[1, 3, 9, 11, 5, 6, 9, 11, 100, 200, 300, 4, 4]\n[1, 3, 9, 11, 5, 6, 9, 11, 100, 200, 300, 4, 4, 3, 4, 5]\n[1, 9, 11, 6, 9, 11, 100, 200, 300]\n[]\n[1, 3, 100, 4, 5, 6, 200, 9, 11, 300]\n[[a, b], [X, Y, Z], [1, 2]]\n[[], [], [], []]\n   \n   \n[2, 4, 16, 20, 22, 60, 6, 8]\n[4, 16, 22, 60, 8]\n[16, 22, 60, 8]  \n</code></pre>\n<p>this is my Main.java:</p>\n<pre><code>import java.util.*;\n\n// Plik Main.java może być dowolnie modyfikowany,\n// ale punkty uzyskuje się za właściwe dzialanie poszczególnych pokazanych tu metod klasy XList.\n\n// Jeżeli nie oprogramujemy wszystkich metod, to z klasy Main nalezy usunąć te fragmenty,\n// które powodują błędy w kompilacji - w przeciwnym razie nie uzyskamy punktów.\n\npublic class Main {\n  public static void main(String[] args) {\n    // Pewne dodatkowe zestawy danych\n    Integer[] ints = { 100, 200, 300 };\n    Set&lt;Integer&gt; set = new HashSet&lt;&gt;(Arrays.asList(3, 4, 5));\n   \n    // Sposoby tworzenia\n    XList&lt;Integer&gt; list1 = new XList&lt;&gt;(1, 3, 9, 11);\n    XList&lt;Integer&gt; list2 = XList.of(5, 6, 9);\n    XList&lt;Integer&gt; list3 = new XList(ints);\n    XList&lt;Integer&gt; list4 = XList.of(ints);\n    XList&lt;Integer&gt; list5 = new XList(set);\n    XList&lt;Integer&gt; list6 = XList.of(set);\n\n    System.out.println(list1);\n    System.out.println(list2);\n    System.out.println(list3);\n    System.out.println(list4);\n    System.out.println(list5);\n    System.out.println(list6);\n   \n    // --- i pomocnicze metody do tworzenia z napisów\n    XList&lt;String&gt; slist1 = XList.charsOf(&quot;ala ma kota&quot;);\n    XList&lt;String&gt; slist2 = XList.tokensOf(&quot;ala ma kota&quot;);\n    XList&lt;String&gt; slist3 = XList.tokensOf(&quot;A-B-C&quot;, &quot;-&quot;);\n\n    System.out.println(slist1);\n    System.out.println(slist2);\n    System.out.println(slist3);\n\n    // Metoda union - suma elementów\n    List&lt;Integer&gt; m1 = list1.union(list2);  // oczywiście, można podstawiać na List\n    System.out.println(m1);\n    // można wykonywać wszystkie operacje z interfejsu List, np:\n    m1.add(11);\n    System.out.println(m1);\n    XList&lt;Integer&gt; m2 = (XList&lt;Integer&gt;) m1;\n    XList&lt;Integer&gt; m3 = m2.union(ints).union(XList.of(4, 4));\n    System.out.println(m2); // m2 się nie zmienia\n    System.out.println(m3); // wynik jest w m3\n    m3 = m3.union(set);\n    System.out.println(m3);\n   \n    // Widzieliśmy metode union\n    // Teraz metoda diff(dowolna kolekcja)\n    System.out.println(m3.diff(set));  // wszystko z m3, co nie jest w set\n    System.out.println(XList.of(set).diff(m3)); // co jest w set, czego nie ma w m3\n   \n    // Metoda unique -zwraca nową Xlist bez duplikatow  \n    XList&lt;Integer&gt; uniq = m3.unique(); // lista, nie Set\n    System.out.println(uniq);    \n   \n    // kombinacje (kolejność jest istotna)\n    List&lt;String&gt; sa = Arrays.asList( &quot;a&quot;, &quot;b&quot;);\n    List&lt;String&gt; sb = Arrays.asList( &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot; );\n    XList&lt;String&gt; sc = XList.charsOf( &quot;12&quot; );\n    XList toCombine = XList.of(sa, sb, sc);  // czy można tu uniknąć użycia typu surowego?\n    System.out.println(toCombine);\n    XList&lt;XList&lt;String&gt;&gt; cres = toCombine.combine();\n    System.out.println(cres);\n\n    // collect i join\n    XList&lt;String&gt; j1 = cres.collect( list -&gt; list.join());\n    System.out.println(j1.join(&quot; &quot;));\n    XList&lt;String&gt; j2 =cres.collect( list -&gt; list.join(&quot;-&quot;));\n    System.out.println(j2.join(&quot; &quot;));\n   \n    // forEachWithIndex\n    XList&lt;Integer&gt; lmod = XList.of(1,2,8, 10, 11, 30, 3, 4);  \n    lmod.forEachWithIndex( (e, i) -&gt; lmod.set(i, e*2));\n    System.out.println(lmod);\n    lmod.forEachWithIndex( (e, i) -&gt; { if (i % 2 == 0) lmod.remove(e); } );\n    System.out.println(lmod);\n    lmod.forEachWithIndex( (e, i) -&gt; { if (i % 2 == 0) lmod.remove(i); } );\n    System.out.println(lmod); // Pytanie: dlaczego mamy taki efekt?\n\n  }\n}\n</code></pre>\n<p>and XList.java:</p>\n<pre><code>import java.util.*;\nimport java.util.function.BiConsumer;\nimport java.util.function.Function;\n\npublic class XList &lt;T&gt; extends ArrayList&lt;T&gt; {\n    \n    public  XList(T... t) {\n\n        for(T wrt : t){\n            if (wrt instanceof Set&lt;?&gt;) {\n                this.addAll((Set&lt;T&gt;) wrt);\n            } else\n                this.add(wrt);\n        }\n    }\n\n    public static &lt;T&gt; XList&lt;T&gt; of(Object... ts) {\n\n        XList&lt;T&gt; xList = new XList&lt;&gt;();\n\n        for (Object wrt : ts) {\n\n            if (wrt instanceof Set&lt;?&gt;) {\n                xList.addAll((Set&lt;T&gt;) wrt);\n            } else\n                xList.add((T) wrt);\n        }\n\n        return xList;\n    }\n\n    public static XList&lt;String&gt; charsOf(String string) {\n\n        char[] tab = string.toCharArray();\n        XList&lt;String&gt; xList = new XList&lt;&gt;();\n\n        for (int i = 0; i &lt; tab.length; i++) {\n            xList.add(String.valueOf(tab[i]));\n        }\n\n        return xList ;\n    }\n\n    public static XList&lt;String&gt; tokensOf(String s, String sep) {\n\n        String[] tab = s.split(sep);\n        XList&lt;String&gt; l;\n\n        return l = new XList&lt;&gt;(tab);\n    }\n\n    public static XList&lt;String&gt; tokensOf(String s) {\n\n        return tokensOf(s, &quot; &quot;);\n    }\n\n\n    public XList&lt;T&gt; union(Collection&lt;T&gt; lista) {\n\n        XList&lt;T&gt; xlist = new XList&lt;&gt;();\n        Iterator&lt;T&gt; it = this.iterator();\n\n        while (it.hasNext()){\n            xlist.add(it.next());\n        }\n\n        it = lista.iterator();\n\n        while (it.hasNext()){\n            xlist.add(it.next());\n        }\n\n        return xlist;\n    }\n\n    public XList&lt;T&gt; union(T[] lista) {\n\n        XList&lt;T&gt; xlist = new XList&lt;&gt;();\n        Iterator&lt;T&gt; it = this.iterator();\n\n        while (it.hasNext()){\n            xlist.add(it.next());\n        }\n\n        for (int i = 0; i &lt; lista.length; i++) {\n            xlist.add(lista[i]);\n        }\n\n        return xlist;\n    }\n\n\n    public XList&lt;T&gt; diff(Collection obj) {\n\n        Set&lt;T&gt; s = new HashSet&lt;&gt;(obj);\n        int size;\n        Iterator&lt;T&gt; iterator = this.iterator();\n        XList&lt;T&gt; xList = new XList&lt;&gt;();\n\n        while (iterator.hasNext()){\n            xList.add(iterator.next());\n        }\n        Iterator&lt;T&gt; it;\n\n        do{\n            it = s.iterator();\n            size = xList.size();\n\n            while (it.hasNext()) {\n                xList.remove(it.next());\n            }\n        }while (size != xList.size());\n\n        return xList;\n    }\n\n\n    public XList&lt;T&gt; unique() {\n\n        Set&lt;T&gt; s = new HashSet&lt;&gt;(this);\n        this.clear();\n        Iterator&lt;T&gt; it = s.iterator();\n\n        while (it.hasNext()){\n            this.add(it.next());\n        }\n\n        return this;\n    }\n\n\n    void sout(){\n\n        Iterator&lt;T&gt; it = this.iterator();\n\n        while (it.hasNext()){\n            System.out.println(it.next());\n        }\n    }\n\n\n    public XList&lt;XList&lt;T&gt;&gt; combine() {\n        XList&lt;XList&lt;T&gt;&gt; result = new XList&lt;&gt;();\n        kombinacjeRekurencyjne(new XList&lt;&gt;(this), result, new XList&lt;T&gt;(), 0);\n        return result;\n    }\n\n    private static &lt;T&gt; void kombinacjeRekurencyjne(XList&lt;XList&lt;T&gt;&gt; listaList, XList&lt;XList&lt;T&gt;&gt; wynik, XList&lt;T&gt; aktualna, int indeks) {\n        if (indeks == listaList.size()) {\n            wynik.add(aktualna);\n            return;\n        }\n\n        for (T element : listaList.get(indeks)) {\n            aktualna.add(element);\n            kombinacjeRekurencyjne(listaList, wynik, aktualna, indeks + 1);\n            aktualna.remove(aktualna.size() - 1);  // Usuwamy ostatni element, aby wrócić do poprzedniego stanu\n        }\n        kombinacjeRekurencyjne(listaList, wynik, aktualna, indeks + 1);\n    }\n\n\n    public void forEachWithIndex(BiConsumer&lt;T, Integer&gt; consumer) {\n\n        for (int i = 0; i &lt; this.size(); i++) {\n            consumer.accept(this.get(i), i);\n        }\n    }\n\n    public &lt;R&gt; XList&lt;R&gt; collect(Function&lt;T, R&gt; mapper) {\n\n        XList&lt;R&gt; result = new XList&lt;&gt;();\n\n        for (T element : this) {\n            result.add(mapper.apply(element));\n        }\n\n        return result;\n    }\n\n    public String join(){\n\n        return join(&quot;&quot;);\n    }\n\n\n    public String join(String separator) {\n\n        StringBuilder result = new StringBuilder();\n\n        for (T element : this) {\n            result.append(element).append(separator);\n        }\n        if (result.length() &gt; 0) {\n            result.setLength(result.length() - separator.length());\n        }\n\n        return result.toString();\n    }\n}\n</code></pre>\n"},{"tags":["java","max","limit","record","java-record"],"comments":[{"score":0,"post_type":"question","creation_date":1694825098,"post_id":77115277,"comment_id":135946507,"body_markdown":"True, doesn&#39;t seem like the [JEP-395](https://openjdk.org/jeps/395) mentions the limitation around the [number of parameters limit](https://stackoverflow.com/questions/30581531/maximum-number-of-parameters-in-java-method-declaration) related to Records.","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold#comment135946507_77115277","body":"True, doesn&#39;t seem like the <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">JEP-395</a> mentions the limitation around the <a href=\"https://stackoverflow.com/questions/30581531/maximum-number-of-parameters-in-java-method-declaration\">number of parameters limit</a> related to Records."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1694815813,"post_id":77115278,"comment_id":135945871,"body_markdown":"I&#39;m not sure what your generating code should tell us? You&#39;re just generating Lists, so at least following your code, generating lists with `countProperties = 512` and displaying the results doesn&#39;t produce issues thus doesn&#39;t proof anything  - or am I missing something?","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold/77115278#comment135945871_77115278","body":"I&#39;m not sure what your generating code should tell us? You&#39;re just generating Lists, so at least following your code, generating lists with <code>countProperties = 512</code> and displaying the results doesn&#39;t produce issues thus doesn&#39;t proof anything  - or am I missing something?"},{"score":2,"post_type":"answer","creation_date":1694817616,"post_id":77115278,"comment_id":135946025,"body_markdown":"@Slevin it doesn&#39;t generate lists, it prints thing to `System.out`. What it prints, specifically, is java source code. Copy/paste it into a text file, compile it. The above code works. Set the above code to `countProperties = 256`, or anything higher than that, and __this__ code works fine but the java source it emits is no longer accepted.","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold/77115278#comment135946025_77115278","body":"@Slevin it doesn&#39;t generate lists, it prints thing to <code>System.out</code>. What it prints, specifically, is java source code. Copy/paste it into a text file, compile it. The above code works. Set the above code to <code>countProperties = 256</code>, or anything higher than that, and <b>this</b> code works fine but the java source it emits is no longer accepted."},{"score":1,"post_type":"answer","creation_date":1694817754,"post_id":77115278,"comment_id":135946039,"body_markdown":"As per the [JVM spec &#167;4.6](https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.6) that means intellij is broken. Up to either 32767, 65535, or 65536 args are validly representable and nowhere does it state that it is acceptable to accept any fewer.","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold/77115278#comment135946039_77115278","body":"As per the <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.6\" rel=\"nofollow noreferrer\">JVM spec &#167;4.6</a> that means intellij is broken. Up to either 32767, 65535, or 65536 args are validly representable and nowhere does it state that it is acceptable to accept any fewer."},{"score":0,"post_type":"answer","creation_date":1694820704,"post_id":77115278,"comment_id":135946254,"body_markdown":"@rzwitserloot But did you actually *try* it? I just tried it again, without IntelliJ. Copied that `record` source code from this Answer. Saved to a `MaxRec.java` file. Used `javac` from JDK 20.0.2 (verified with `javac --version`) with this command: `javac MaxRec.java`. That worked. Un-commented that 255 line. Ran `javac MaxRec.java` again. Console says… MaxRec.java:3: error: too many parameters","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold/77115278#comment135946254_77115278","body":"@rzwitserloot But did you actually <i>try</i> it? I just tried it again, without IntelliJ. Copied that <code>record</code> source code from this Answer. Saved to a <code>MaxRec.java</code> file. Used <code>javac</code> from JDK 20.0.2 (verified with <code>javac --version</code>) with this command: <code>javac MaxRec.java</code>. That worked. Un-commented that 255 line. Ran <code>javac MaxRec.java</code> again. Console says… MaxRec.java:3: error: too many parameters"},{"score":2,"post_type":"answer","creation_date":1694822085,"post_id":77115278,"comment_id":135946325,"body_markdown":"while it may be try there is no limit to the number of ARGUMENTS, the limit on PARAMETERS is 255. It&#39;s possible the &quot;this&quot; counts as the 255th. In this case, hitting parameter limit.","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold/77115278#comment135946325_77115278","body":"while it may be try there is no limit to the number of ARGUMENTS, the limit on PARAMETERS is 255. It&#39;s possible the &quot;this&quot; counts as the 255th. In this case, hitting parameter limit."},{"score":1,"post_type":"answer","creation_date":1694826148,"post_id":77115278,"comment_id":135946582,"body_markdown":"@rswitzerloot what&#39;s broken?  Check 4.11 https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.11: &quot;The number of method parameters is limited to 255 by the definition of a method descriptor (&#167;4.3.3), where the limit includes one unit for this in the case of instance or interface method invocations.&quot;","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold/77115278#comment135946582_77115278","body":"@rswitzerloot what&#39;s broken?  Check 4.11 <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.11\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jvms/se17/html/&hellip;</a>: &quot;The number of method parameters is limited to 255 by the definition of a method descriptor (&#167;4.3.3), where the limit includes one unit for this in the case of instance or interface method invocations.&quot;"},{"score":1,"post_type":"answer","creation_date":1694881342,"post_id":77115278,"comment_id":135951030,"body_markdown":"I stand corrected. I guess all we can now say is that the class file format is slightly inefficient, using 2 bytes to represent something that cannot possibly legally be outside the 0-255 range.","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold/77115278#comment135951030_77115278","body":"I stand corrected. I guess all we can now say is that the class file format is slightly inefficient, using 2 bytes to represent something that cannot possibly legally be outside the 0-255 range."},{"score":2,"post_type":"answer","creation_date":1695008356,"post_id":77115278,"comment_id":135961737,"body_markdown":"@rzwitserloot I see a field for the number of `attributes` being 2 bytes. I don&#39;t see a field for parameters.","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold/77115278#comment135961737_77115278","body":"@rzwitserloot I see a field for the number of <code>attributes</code> being 2 bytes. I don&#39;t see a field for parameters."},{"score":2,"post_type":"answer","creation_date":1696583876,"post_id":77115278,"comment_id":136174730,"body_markdown":"@rzwitserloot as said by Garr Godfrey, that number is the attribute count, not related to parameters at all. However, there are places in the class file where the representation is horribly inefficient. To stay at method parameters, the signature is a single string repeating every class name at each occurrence, rather than sharing it with the constant pool. While methods with exactly the same parameter list share the signature string, a method taking 200 strings has a different signature than a method taking 201 strings. Which makes 401 repetitions of `Ljava/lang/String;`…","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold/77115278#comment136174730_77115278","body":"@rzwitserloot as said by Garr Godfrey, that number is the attribute count, not related to parameters at all. However, there are places in the class file where the representation is horribly inefficient. To stay at method parameters, the signature is a single string repeating every class name at each occurrence, rather than sharing it with the constant pool. While methods with exactly the same parameter list share the signature string, a method taking 200 strings has a different signature than a method taking 201 strings. Which makes 401 repetitions of <code>Ljava&#47;lang&#47;String;</code>…"}],"comment_count":9,"score":6,"last_activity_date":1694821073,"last_edit_date":1694821073,"creation_date":1694810806,"answer_id":77115278,"question_id":77115277,"body_markdown":"## 254\r\n\r\nSome trial-and-error found 254 to be the limit. \r\n\r\nUsing 255 fields results in an error (*too many parameters*) in:\r\n\r\n - IntelliJ 2023.2 with [Java 21][1]\r\n - *javac* from JDK 20.0.2\r\n\r\nExample code:\r\n\r\n```java\r\npackage work.basil.example.codegen;\r\n\r\npublic record MaxRec (\r\n        String x001 ,\r\n        String x002 ,\r\n        String x003 ,\r\n        String x004 ,\r\n        String x005 ,\r\n        String x006 ,\r\n        String x007 ,\r\n        String x008 ,\r\n        String x009 ,\r\n        String x010 ,\r\n        String x011 ,\r\n        String x012 ,\r\n        String x013 ,\r\n        String x014 ,\r\n        String x015 ,\r\n        String x016 ,\r\n        String x017 ,\r\n        String x018 ,\r\n        String x019 ,\r\n        String x020 ,\r\n        String x021 ,\r\n        String x022 ,\r\n        String x023 ,\r\n        String x024 ,\r\n        String x025 ,\r\n        String x026 ,\r\n        String x027 ,\r\n        String x028 ,\r\n        String x029 ,\r\n        String x030 ,\r\n        String x031 ,\r\n        String x032 ,\r\n        String x033 ,\r\n        String x034 ,\r\n        String x035 ,\r\n        String x036 ,\r\n        String x037 ,\r\n        String x038 ,\r\n        String x039 ,\r\n        String x040 ,\r\n        String x041 ,\r\n        String x042 ,\r\n        String x043 ,\r\n        String x044 ,\r\n        String x045 ,\r\n        String x046 ,\r\n        String x047 ,\r\n        String x048 ,\r\n        String x049 ,\r\n        String x050 ,\r\n        String x051 ,\r\n        String x052 ,\r\n        String x053 ,\r\n        String x054 ,\r\n        String x055 ,\r\n        String x056 ,\r\n        String x057 ,\r\n        String x058 ,\r\n        String x059 ,\r\n        String x060 ,\r\n        String x061 ,\r\n        String x062 ,\r\n        String x063 ,\r\n        String x064 ,\r\n        String x065 ,\r\n        String x066 ,\r\n        String x067 ,\r\n        String x068 ,\r\n        String x069 ,\r\n        String x070 ,\r\n        String x071 ,\r\n        String x072 ,\r\n        String x073 ,\r\n        String x074 ,\r\n        String x075 ,\r\n        String x076 ,\r\n        String x077 ,\r\n        String x078 ,\r\n        String x079 ,\r\n        String x080 ,\r\n        String x081 ,\r\n        String x082 ,\r\n        String x083 ,\r\n        String x084 ,\r\n        String x085 ,\r\n        String x086 ,\r\n        String x087 ,\r\n        String x088 ,\r\n        String x089 ,\r\n        String x090 ,\r\n        String x091 ,\r\n        String x092 ,\r\n        String x093 ,\r\n        String x094 ,\r\n        String x095 ,\r\n        String x096 ,\r\n        String x097 ,\r\n        String x098 ,\r\n        String x099 ,\r\n        String x100 ,\r\n        String x101 ,\r\n        String x102 ,\r\n        String x103 ,\r\n        String x104 ,\r\n        String x105 ,\r\n        String x106 ,\r\n        String x107 ,\r\n        String x108 ,\r\n        String x109 ,\r\n        String x110 ,\r\n        String x111 ,\r\n        String x112 ,\r\n        String x113 ,\r\n        String x114 ,\r\n        String x115 ,\r\n        String x116 ,\r\n        String x117 ,\r\n        String x118 ,\r\n        String x119 ,\r\n        String x120 ,\r\n        String x121 ,\r\n        String x122 ,\r\n        String x123 ,\r\n        String x124 ,\r\n        String x125 ,\r\n        String x126 ,\r\n        String x127 ,\r\n        String x128 ,\r\n        String x129 ,\r\n        String x130 ,\r\n        String x131 ,\r\n        String x132 ,\r\n        String x133 ,\r\n        String x134 ,\r\n        String x135 ,\r\n        String x136 ,\r\n        String x137 ,\r\n        String x138 ,\r\n        String x139 ,\r\n        String x140 ,\r\n        String x141 ,\r\n        String x142 ,\r\n        String x143 ,\r\n        String x144 ,\r\n        String x145 ,\r\n        String x146 ,\r\n        String x147 ,\r\n        String x148 ,\r\n        String x149 ,\r\n        String x150 ,\r\n        String x151 ,\r\n        String x152 ,\r\n        String x153 ,\r\n        String x154 ,\r\n        String x155 ,\r\n        String x156 ,\r\n        String x157 ,\r\n        String x158 ,\r\n        String x159 ,\r\n        String x160 ,\r\n        String x161 ,\r\n        String x162 ,\r\n        String x163 ,\r\n        String x164 ,\r\n        String x165 ,\r\n        String x166 ,\r\n        String x167 ,\r\n        String x168 ,\r\n        String x169 ,\r\n        String x170 ,\r\n        String x171 ,\r\n        String x172 ,\r\n        String x173 ,\r\n        String x174 ,\r\n        String x175 ,\r\n        String x176 ,\r\n        String x177 ,\r\n        String x178 ,\r\n        String x179 ,\r\n        String x180 ,\r\n        String x181 ,\r\n        String x182 ,\r\n        String x183 ,\r\n        String x184 ,\r\n        String x185 ,\r\n        String x186 ,\r\n        String x187 ,\r\n        String x188 ,\r\n        String x189 ,\r\n        String x190 ,\r\n        String x191 ,\r\n        String x192 ,\r\n        String x193 ,\r\n        String x194 ,\r\n        String x195 ,\r\n        String x196 ,\r\n        String x197 ,\r\n        String x198 ,\r\n        String x199 ,\r\n        String x200 ,\r\n        String x201 ,\r\n        String x202 ,\r\n        String x203 ,\r\n        String x204 ,\r\n        String x205 ,\r\n        String x206 ,\r\n        String x207 ,\r\n        String x208 ,\r\n        String x209 ,\r\n        String x210 ,\r\n        String x211 ,\r\n        String x212 ,\r\n        String x213 ,\r\n        String x214 ,\r\n        String x215 ,\r\n        String x216 ,\r\n        String x217 ,\r\n        String x218 ,\r\n        String x219 ,\r\n        String x220 ,\r\n        String x221 ,\r\n        String x222 ,\r\n        String x223 ,\r\n        String x224 ,\r\n        String x225 ,\r\n        String x226 ,\r\n        String x227 ,\r\n        String x228 ,\r\n        String x229 ,\r\n        String x230 ,\r\n        String x231 ,\r\n        String x232 ,\r\n        String x233 ,\r\n        String x234 ,\r\n        String x235 ,\r\n        String x236 ,\r\n        String x237 ,\r\n        String x238 ,\r\n        String x239 ,\r\n        String x240 ,\r\n        String x241 ,\r\n        String x242 ,\r\n        String x243 ,\r\n        String x244 ,\r\n        String x245 ,\r\n        String x246 ,\r\n        String x247 ,\r\n        String x248 ,\r\n        String x249 ,\r\n        String x250 ,\r\n        String x251 ,\r\n        String x252 ,\r\n        String x253 ,\r\n        String x254\r\n        // , String x255  // Error: too many parameters\r\n) {}\r\n```\r\n\r\n\r\n----------\r\n\r\n\r\nBy the way, for fun, here is the code used to generate the above code. \r\n\r\nThis code generates Java source code. That source code appears on your console. Copy/paste that source code into a text file. Name that file `MaxRec.java`. Compile that file. See error appear.\r\n\r\n```java\r\npackage work.basil.example.codegen;\r\n\r\nimport java.util.List;\r\nimport java.util.stream.IntStream;\r\n\r\npublic class MaxArgsInRecord\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        System.out.println ( &quot;public record MaxRec (&quot; );\r\n        int countProperties = 255;\r\n        List &lt; String &gt; fields =\r\n                IntStream\r\n                        .rangeClosed ( 1 , countProperties )\r\n                        .mapToObj (\r\n                                ( int i ) -&gt; &quot;   String x&quot; + String.format ( &quot;%03d&quot; , i )\r\n                        )\r\n                        .toList ( );\r\n        System.out.println ( String.join ( &quot; ,\\n&quot; , fields ) );\r\n        System.out.println ( &quot;) {}&quot; );\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_version_history#Java_21","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold/77115278#77115278","title":"How many fields can a Java record hold?","body":"<h2>254</h2>\n<p>Some trial-and-error found 254 to be the limit.</p>\n<p>Using 255 fields results in an error (<em>too many parameters</em>) in:</p>\n<ul>\n<li>IntelliJ 2023.2 with <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_21\" rel=\"nofollow noreferrer\">Java 21</a></li>\n<li><em>javac</em> from JDK 20.0.2</li>\n</ul>\n<p>Example code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.codegen;\n\npublic record MaxRec (\n        String x001 ,\n        String x002 ,\n        String x003 ,\n        String x004 ,\n        String x005 ,\n        String x006 ,\n        String x007 ,\n        String x008 ,\n        String x009 ,\n        String x010 ,\n        String x011 ,\n        String x012 ,\n        String x013 ,\n        String x014 ,\n        String x015 ,\n        String x016 ,\n        String x017 ,\n        String x018 ,\n        String x019 ,\n        String x020 ,\n        String x021 ,\n        String x022 ,\n        String x023 ,\n        String x024 ,\n        String x025 ,\n        String x026 ,\n        String x027 ,\n        String x028 ,\n        String x029 ,\n        String x030 ,\n        String x031 ,\n        String x032 ,\n        String x033 ,\n        String x034 ,\n        String x035 ,\n        String x036 ,\n        String x037 ,\n        String x038 ,\n        String x039 ,\n        String x040 ,\n        String x041 ,\n        String x042 ,\n        String x043 ,\n        String x044 ,\n        String x045 ,\n        String x046 ,\n        String x047 ,\n        String x048 ,\n        String x049 ,\n        String x050 ,\n        String x051 ,\n        String x052 ,\n        String x053 ,\n        String x054 ,\n        String x055 ,\n        String x056 ,\n        String x057 ,\n        String x058 ,\n        String x059 ,\n        String x060 ,\n        String x061 ,\n        String x062 ,\n        String x063 ,\n        String x064 ,\n        String x065 ,\n        String x066 ,\n        String x067 ,\n        String x068 ,\n        String x069 ,\n        String x070 ,\n        String x071 ,\n        String x072 ,\n        String x073 ,\n        String x074 ,\n        String x075 ,\n        String x076 ,\n        String x077 ,\n        String x078 ,\n        String x079 ,\n        String x080 ,\n        String x081 ,\n        String x082 ,\n        String x083 ,\n        String x084 ,\n        String x085 ,\n        String x086 ,\n        String x087 ,\n        String x088 ,\n        String x089 ,\n        String x090 ,\n        String x091 ,\n        String x092 ,\n        String x093 ,\n        String x094 ,\n        String x095 ,\n        String x096 ,\n        String x097 ,\n        String x098 ,\n        String x099 ,\n        String x100 ,\n        String x101 ,\n        String x102 ,\n        String x103 ,\n        String x104 ,\n        String x105 ,\n        String x106 ,\n        String x107 ,\n        String x108 ,\n        String x109 ,\n        String x110 ,\n        String x111 ,\n        String x112 ,\n        String x113 ,\n        String x114 ,\n        String x115 ,\n        String x116 ,\n        String x117 ,\n        String x118 ,\n        String x119 ,\n        String x120 ,\n        String x121 ,\n        String x122 ,\n        String x123 ,\n        String x124 ,\n        String x125 ,\n        String x126 ,\n        String x127 ,\n        String x128 ,\n        String x129 ,\n        String x130 ,\n        String x131 ,\n        String x132 ,\n        String x133 ,\n        String x134 ,\n        String x135 ,\n        String x136 ,\n        String x137 ,\n        String x138 ,\n        String x139 ,\n        String x140 ,\n        String x141 ,\n        String x142 ,\n        String x143 ,\n        String x144 ,\n        String x145 ,\n        String x146 ,\n        String x147 ,\n        String x148 ,\n        String x149 ,\n        String x150 ,\n        String x151 ,\n        String x152 ,\n        String x153 ,\n        String x154 ,\n        String x155 ,\n        String x156 ,\n        String x157 ,\n        String x158 ,\n        String x159 ,\n        String x160 ,\n        String x161 ,\n        String x162 ,\n        String x163 ,\n        String x164 ,\n        String x165 ,\n        String x166 ,\n        String x167 ,\n        String x168 ,\n        String x169 ,\n        String x170 ,\n        String x171 ,\n        String x172 ,\n        String x173 ,\n        String x174 ,\n        String x175 ,\n        String x176 ,\n        String x177 ,\n        String x178 ,\n        String x179 ,\n        String x180 ,\n        String x181 ,\n        String x182 ,\n        String x183 ,\n        String x184 ,\n        String x185 ,\n        String x186 ,\n        String x187 ,\n        String x188 ,\n        String x189 ,\n        String x190 ,\n        String x191 ,\n        String x192 ,\n        String x193 ,\n        String x194 ,\n        String x195 ,\n        String x196 ,\n        String x197 ,\n        String x198 ,\n        String x199 ,\n        String x200 ,\n        String x201 ,\n        String x202 ,\n        String x203 ,\n        String x204 ,\n        String x205 ,\n        String x206 ,\n        String x207 ,\n        String x208 ,\n        String x209 ,\n        String x210 ,\n        String x211 ,\n        String x212 ,\n        String x213 ,\n        String x214 ,\n        String x215 ,\n        String x216 ,\n        String x217 ,\n        String x218 ,\n        String x219 ,\n        String x220 ,\n        String x221 ,\n        String x222 ,\n        String x223 ,\n        String x224 ,\n        String x225 ,\n        String x226 ,\n        String x227 ,\n        String x228 ,\n        String x229 ,\n        String x230 ,\n        String x231 ,\n        String x232 ,\n        String x233 ,\n        String x234 ,\n        String x235 ,\n        String x236 ,\n        String x237 ,\n        String x238 ,\n        String x239 ,\n        String x240 ,\n        String x241 ,\n        String x242 ,\n        String x243 ,\n        String x244 ,\n        String x245 ,\n        String x246 ,\n        String x247 ,\n        String x248 ,\n        String x249 ,\n        String x250 ,\n        String x251 ,\n        String x252 ,\n        String x253 ,\n        String x254\n        // , String x255  // Error: too many parameters\n) {}\n</code></pre>\n<hr />\n<p>By the way, for fun, here is the code used to generate the above code.</p>\n<p>This code generates Java source code. That source code appears on your console. Copy/paste that source code into a text file. Name that file <code>MaxRec.java</code>. Compile that file. See error appear.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.codegen;\n\nimport java.util.List;\nimport java.util.stream.IntStream;\n\npublic class MaxArgsInRecord\n{\n    public static void main ( String[] args )\n    {\n        System.out.println ( &quot;public record MaxRec (&quot; );\n        int countProperties = 255;\n        List &lt; String &gt; fields =\n                IntStream\n                        .rangeClosed ( 1 , countProperties )\n                        .mapToObj (\n                                ( int i ) -&gt; &quot;   String x&quot; + String.format ( &quot;%03d&quot; , i )\n                        )\n                        .toList ( );\n        System.out.println ( String.join ( &quot; ,\\n&quot; , fields ) );\n        System.out.println ( &quot;) {}&quot; );\n    }\n}\n</code></pre>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1694822660,"post_id":77115861,"comment_id":135946360,"body_markdown":"same limit in more up to date spec\nhttps://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.3.3","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold/77115861#comment135946360_77115861","body":"same limit in more up to date spec <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.3.3\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jvms/se17/html/&hellip;</a>"},{"score":2,"post_type":"answer","creation_date":1694823076,"post_id":77115861,"comment_id":135946389,"body_markdown":"Nice to have an explanation from the spec.","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold/77115861#comment135946389_77115861","body":"Nice to have an explanation from the spec."}],"comment_count":2,"score":5,"last_activity_date":1702847464,"last_edit_date":1702847464,"creation_date":1694822505,"answer_id":77115861,"question_id":77115277,"body_markdown":"## 255 - 1 = 254\r\n\r\nDue to the limit on method descriptor length, the maximum number of parameters a method can define is 255. Including the `this`, since a record constructor is non-static, that leaves 254.\r\n\r\nSee *Java Virtual Machine Specification*, [*4.3.3. Method Descriptors*][1]\r\n\r\nI believe a record must have at least one constructor that takes all properties as individual parameters, so this would effectively limit the number of record components.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.3.3","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold/77115861#77115861","title":"How many fields can a Java record hold?","body":"<h2>255 - 1 = 254</h2>\n<p>Due to the limit on method descriptor length, the maximum number of parameters a method can define is 255. Including the <code>this</code>, since a record constructor is non-static, that leaves 254.</p>\n<p>See <em>Java Virtual Machine Specification</em>, <a href=\"https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.3.3\" rel=\"nofollow noreferrer\"><em>4.3.3. Method Descriptors</em></a></p>\n<p>I believe a record must have at least one constructor that takes all properties as individual parameters, so this would effectively limit the number of record components.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":211,"answer_count":2,"score":2,"last_activity_date":1702847464,"creation_date":1694810806,"last_edit_date":1694811470,"question_id":77115277,"body_markdown":"What is the maximum number of properties (“record components”, technically) defined in a Java [record][1]?\r\n\r\nI read the specification, [*JEP 395: Records*](https://openjdk.org/jeps/395). No mention of a limit.\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-record-keyword","link":"https://stackoverflow.com/questions/77115277/how-many-fields-can-a-java-record-hold","title":"How many fields can a Java record hold?","body":"<p>What is the maximum number of properties (“record components”, technically) defined in a Java <a href=\"https://www.baeldung.com/java-record-keyword\" rel=\"nofollow noreferrer\">record</a>?</p>\n<p>I read the specification, <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\"><em>JEP 395: Records</em></a>. No mention of a limit.</p>\n"},{"tags":["java","selenium-webdriver","testing","testng"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702845183,"last_edit_date":1702845183,"creation_date":1702384370,"answer_id":77646136,"question_id":77138392,"body_markdown":"It looks like you are creating and closing the browser for each test; the same needs to be done with `LoginAndSignUpPage` as well. I think each of your tests needs to initialise `LoginAndSignUpPage`.","link":"https://stackoverflow.com/questions/77138392/why-im-getting-session-id-is-null-using-webdriver-after-calling-quit-exce/77646136#77646136","title":"Why I&#39;m getting &quot;Session ID is null. Using WebDriver after calling quit()?&quot; exception in SeleniumWebdriver?","body":"<p>It looks like you are creating and closing the browser for each test; the same needs to be done with <code>LoginAndSignUpPage</code> as well. I think each of your tests needs to initialise <code>LoginAndSignUpPage</code>.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":41,"answer_count":1,"score":0,"last_activity_date":1702845183,"creation_date":1695164161,"last_edit_date":1695175758,"question_id":77138392,"body_markdown":"I&#39;m getting &quot;org.openqa.selenium.NoSuchSessionException: Session ID is null. Using WebDriver after calling quit()?&quot; exception while I&#39;m running my test cases. \r\n\r\nMy test class is like this;\r\n```\r\nimport org.testng.annotations.Test;\r\n\r\npublic class LoginTests extends TestBase{\r\n\r\n    LoginAndSignUpPage loginAndSignUpPage=new LoginAndSignUpPage();\r\n\r\n    @Test (priority = 1)\r\n    public void loginWithValidCredentials(){\r\n\r\n        loginAndSignUpPage.navigateToModule(&quot;Log in&quot;);\r\n        loginAndSignUpPage.login_userName.sendKeys(ConfigurationReader.get(&quot;username&quot;));\r\n        loginAndSignUpPage.login_password.sendKeys(ConfigurationReader.get(&quot;password&quot;));\r\n        loginAndSignUpPage.login_button.click();\r\n        BrowserUtils.waitFor(3);\r\n\r\n        String expectedUser= &quot;Welcome &quot; + ConfigurationReader.get(&quot;username&quot;);\r\n        Assert.assertEquals(expectedUser, loginAndSignUpPage.nameOfUser.getText());\r\n       \r\n    }\r\n\r\n  \r\n    @Test (priority = 2)\r\n    public void loginWithInvalidPassword(){\r\n\r\n       loginAndSignUpPage.navigateToModule(&quot;Log in&quot;);\r\n       loginAndSignUpPage.login_userName.sendKeys(ConfigurationReader.get(&quot;username&quot;));\r\n       loginAndSignUpPage.login_password.sendKeys(&quot;wrongpassword)&quot;);\r\n       loginAndSignUpPage.login_button.click();\r\n\r\n        String actual =alert.getText();\r\n        String expected =&quot;Wrong password.&quot;;\r\n\r\n        BrowserUtils.waitFor(3);\r\n        Assert.assertEquals(expected, actual);*/\r\n\r\n    }\r\n\r\n    @Test (priority = 3)\r\n    public void loginWithInvalidUsername(){\r\n\r\n        loginAndSignUpPage.navigateToModule(&quot;Log in&quot;);\r\n        loginAndSignUpPage.login_userName.sendKeys(&quot;wrongUsername&quot;);\r\n        loginAndSignUpPage.login_password.sendKeys(ConfigurationReader.get(&quot;password&quot;));\r\n\r\n        loginAndSignUpPage.login_button.click();\r\n        Alert alert= Driver.get().switchTo().alert();;\r\n        String actual =alert.getText();\r\n        String expected =&quot;User does not exist.&quot;;\r\n        BrowserUtils.waitFor(3);\r\n       Assert.assertEquals(expected, actual);\r\n\r\n    }\r\n}\r\n\r\n```\r\nMy Driver class is shortly like this;\r\n\r\n```\r\npublic class Driver {\r\n\r\n    private Driver(){}\r\n\r\n    private static InheritableThreadLocal&lt;WebDriver&gt; driverPool = new InheritableThreadLocal&lt;&gt;();\r\n\r\n    public static WebDriver get(){\r\n\r\n        if (driverPool.get() == null){\r\n\r\n          \r\n            String browser = System.getProperty(&quot;browser&quot;) != null ? browser = System.getProperty(&quot;browser&quot;) : ConfigurationReader.get(&quot;browser&quot;);\r\n\r\n            switch (browser){\r\n                case &quot;chrome&quot;:\r\n                    WebDriverManager.chromedriver().setup();\r\n                    ChromeOptions options = new ChromeOptions();\r\n                    options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n                    driverPool.set(new ChromeDriver(options));\r\n                    driverPool.get().manage().window().maximize();\r\n                    driverPool.get().manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\r\n                    break;\r\n}\r\n....\r\n```\r\nAnd my TestBase is like this;\r\n\r\n\r\n```\r\npublic class TestBase {\r\n\r\n    protected WebDriver driver;\r\n    protected Actions actions;\r\n    protected WebDriverWait wait;\r\n\r\n    @BeforeMethod\r\n    public void setUp(){\r\n        driver= Driver.get();\r\n        actions= new Actions(driver);\r\n        wait = new WebDriverWait(driver, Duration.ofSeconds(10));\r\n        driver.get(ConfigurationReader.get(&quot;url&quot;));\r\n    }\r\n    @AfterMethod\r\n    public void tearDown(ITestResult result) throws IOException, InterruptedException {\r\n       \r\n            Thread.sleep(2000);\r\n            Driver.closeDriver();\r\n        }\r\n\r\n    }\r\n\r\n```\r\nAnd my POM class;\r\n\r\n```\r\npublic class LoginAndSignUpPage extends BasePage{\r\n    public LoginAndSignUpPage() { PageFactory.initElements(Driver.get(), this); }\r\n\r\n    @FindBy(id = &quot;sign-username&quot;)\r\n    public WebElement signUp_userName;\r\n...\r\n\r\n```\r\nand BasePage\r\n\r\n```\r\npublic abstract class BasePage {\r\n\r\n\r\n    public BasePage() { PageFactory.initElements(Driver.get(), this); }\r\n\r\n...\r\n```\r\n\r\n\r\nI execute my test class which extends testbase. First test gets executed but others not. I tried to use @AfterTestSuite, @AfterClass etc. method, they didn&#39;t work in the TestBase.","link":"https://stackoverflow.com/questions/77138392/why-im-getting-session-id-is-null-using-webdriver-after-calling-quit-exce","title":"Why I&#39;m getting &quot;Session ID is null. Using WebDriver after calling quit()?&quot; exception in SeleniumWebdriver?","body":"<p>I'm getting &quot;org.openqa.selenium.NoSuchSessionException: Session ID is null. Using WebDriver after calling quit()?&quot; exception while I'm running my test cases.</p>\n<p>My test class is like this;</p>\n<pre><code>import org.testng.annotations.Test;\n\npublic class LoginTests extends TestBase{\n\n    LoginAndSignUpPage loginAndSignUpPage=new LoginAndSignUpPage();\n\n    @Test (priority = 1)\n    public void loginWithValidCredentials(){\n\n        loginAndSignUpPage.navigateToModule(&quot;Log in&quot;);\n        loginAndSignUpPage.login_userName.sendKeys(ConfigurationReader.get(&quot;username&quot;));\n        loginAndSignUpPage.login_password.sendKeys(ConfigurationReader.get(&quot;password&quot;));\n        loginAndSignUpPage.login_button.click();\n        BrowserUtils.waitFor(3);\n\n        String expectedUser= &quot;Welcome &quot; + ConfigurationReader.get(&quot;username&quot;);\n        Assert.assertEquals(expectedUser, loginAndSignUpPage.nameOfUser.getText());\n       \n    }\n\n  \n    @Test (priority = 2)\n    public void loginWithInvalidPassword(){\n\n       loginAndSignUpPage.navigateToModule(&quot;Log in&quot;);\n       loginAndSignUpPage.login_userName.sendKeys(ConfigurationReader.get(&quot;username&quot;));\n       loginAndSignUpPage.login_password.sendKeys(&quot;wrongpassword)&quot;);\n       loginAndSignUpPage.login_button.click();\n\n        String actual =alert.getText();\n        String expected =&quot;Wrong password.&quot;;\n\n        BrowserUtils.waitFor(3);\n        Assert.assertEquals(expected, actual);*/\n\n    }\n\n    @Test (priority = 3)\n    public void loginWithInvalidUsername(){\n\n        loginAndSignUpPage.navigateToModule(&quot;Log in&quot;);\n        loginAndSignUpPage.login_userName.sendKeys(&quot;wrongUsername&quot;);\n        loginAndSignUpPage.login_password.sendKeys(ConfigurationReader.get(&quot;password&quot;));\n\n        loginAndSignUpPage.login_button.click();\n        Alert alert= Driver.get().switchTo().alert();;\n        String actual =alert.getText();\n        String expected =&quot;User does not exist.&quot;;\n        BrowserUtils.waitFor(3);\n       Assert.assertEquals(expected, actual);\n\n    }\n}\n\n</code></pre>\n<p>My Driver class is shortly like this;</p>\n<pre><code>public class Driver {\n\n    private Driver(){}\n\n    private static InheritableThreadLocal&lt;WebDriver&gt; driverPool = new InheritableThreadLocal&lt;&gt;();\n\n    public static WebDriver get(){\n\n        if (driverPool.get() == null){\n\n          \n            String browser = System.getProperty(&quot;browser&quot;) != null ? browser = System.getProperty(&quot;browser&quot;) : ConfigurationReader.get(&quot;browser&quot;);\n\n            switch (browser){\n                case &quot;chrome&quot;:\n                    WebDriverManager.chromedriver().setup();\n                    ChromeOptions options = new ChromeOptions();\n                    options.addArguments(&quot;--remote-allow-origins=*&quot;);\n                    driverPool.set(new ChromeDriver(options));\n                    driverPool.get().manage().window().maximize();\n                    driverPool.get().manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\n                    break;\n}\n....\n</code></pre>\n<p>And my TestBase is like this;</p>\n<pre><code>public class TestBase {\n\n    protected WebDriver driver;\n    protected Actions actions;\n    protected WebDriverWait wait;\n\n    @BeforeMethod\n    public void setUp(){\n        driver= Driver.get();\n        actions= new Actions(driver);\n        wait = new WebDriverWait(driver, Duration.ofSeconds(10));\n        driver.get(ConfigurationReader.get(&quot;url&quot;));\n    }\n    @AfterMethod\n    public void tearDown(ITestResult result) throws IOException, InterruptedException {\n       \n            Thread.sleep(2000);\n            Driver.closeDriver();\n        }\n\n    }\n\n</code></pre>\n<p>And my POM class;</p>\n<pre><code>public class LoginAndSignUpPage extends BasePage{\n    public LoginAndSignUpPage() { PageFactory.initElements(Driver.get(), this); }\n\n    @FindBy(id = &quot;sign-username&quot;)\n    public WebElement signUp_userName;\n...\n\n</code></pre>\n<p>and BasePage</p>\n<pre><code>public abstract class BasePage {\n\n\n    public BasePage() { PageFactory.initElements(Driver.get(), this); }\n\n...\n</code></pre>\n<p>I execute my test class which extends testbase. First test gets executed but others not. I tried to use @AfterTestSuite, @AfterClass etc. method, they didn't work in the TestBase.</p>\n"},{"tags":["java","mongodb","amazon-web-services","spring-boot","aws-documentdb"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702840980,"creation_date":1702840980,"answer_id":77675692,"question_id":77357123,"body_markdown":"There are two issues here:\r\n- First, when connecting locally, you can&#39;t connect directly - you need to connect through an SSH tunnel instead. See [Connecting to an Amazon DocumentDB Cluster from Outside an Amazon VPC](https://docs.aws.amazon.com/documentdb/latest/developerguide/connect-from-outside-a-vpc.html) for details on how to do this.\r\n- Second, the `.pem` certificate file isn&#39;t directly usable as a Java trust store. Instead, it contains the certificates which should be imported *into* a Java trust store (using the `keytool` Java utility), so that your program can then reference that trust store (via the `javax.net.ssl.trustStore` system property) in verifying the identity of the DocumentDB server. \r\n  - Context: The `sun.security.*` packages (referenced in the Fargate logs you posted) verify the DocumentDB server&#39;s identity by attempting to build a valid PKIX certification path from the root CA certificates found in the Java trust store to the certificate presented by the particular DocumentDB server you are targeting. If the Java trust store found at `javax.net.ssl.trustStore` is either invalid (e.g., because it&#39;s a `.pem` file instead of a valid `.jks` file), or if it doesn&#39;t contain the necessary certificates (e.g., because the root CA certificates found in `global-bundle.pem` were never imported using the Java `keytool` utility), PKIX path building fails, meaning the identity of the DocumentDB server cannot be established. See [Connecting with TLS Enabled](https://docs.aws.amazon.com/documentdb/latest/developerguide/connect_programmatically.html#connect_programmatically-tls_enabled) for more details (and be sure to select the &quot;Java&quot; tab to see Java-specific instructions.)","link":"https://stackoverflow.com/questions/77357123/how-to-connect-spring-boot-application-to-aws-document-db/77675692#77675692","title":"How to connect spring boot application to aws document db","body":"<p>There are two issues here:</p>\n<ul>\n<li>First, when connecting locally, you can't connect directly - you need to connect through an SSH tunnel instead. See <a href=\"https://docs.aws.amazon.com/documentdb/latest/developerguide/connect-from-outside-a-vpc.html\" rel=\"nofollow noreferrer\">Connecting to an Amazon DocumentDB Cluster from Outside an Amazon VPC</a> for details on how to do this.</li>\n<li>Second, the <code>.pem</code> certificate file isn't directly usable as a Java trust store. Instead, it contains the certificates which should be imported <em>into</em> a Java trust store (using the <code>keytool</code> Java utility), so that your program can then reference that trust store (via the <code>javax.net.ssl.trustStore</code> system property) in verifying the identity of the DocumentDB server.\n<ul>\n<li>Context: The <code>sun.security.*</code> packages (referenced in the Fargate logs you posted) verify the DocumentDB server's identity by attempting to build a valid PKIX certification path from the root CA certificates found in the Java trust store to the certificate presented by the particular DocumentDB server you are targeting. If the Java trust store found at <code>javax.net.ssl.trustStore</code> is either invalid (e.g., because it's a <code>.pem</code> file instead of a valid <code>.jks</code> file), or if it doesn't contain the necessary certificates (e.g., because the root CA certificates found in <code>global-bundle.pem</code> were never imported using the Java <code>keytool</code> utility), PKIX path building fails, meaning the identity of the DocumentDB server cannot be established. See <a href=\"https://docs.aws.amazon.com/documentdb/latest/developerguide/connect_programmatically.html#connect_programmatically-tls_enabled\" rel=\"nofollow noreferrer\">Connecting with TLS Enabled</a> for more details (and be sure to select the &quot;Java&quot; tab to see Java-specific instructions.)</li>\n</ul>\n</li>\n</ul>\n"}],"comment_count":0,"is_answered":false,"view_count":59,"answer_count":1,"score":0,"last_activity_date":1702840980,"creation_date":1698216165,"question_id":77357123,"body_markdown":"I&#39;m not able to connect my spring boot application to aws document db. Please tell me where am I going wrong.\r\n\r\npom.xml\r\n\r\n     &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven- \r\n    4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.0&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;groupId&gt;com.mercedes-benz.xdrs&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;xdrs_data_service_api&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.0.0.0&lt;/version&gt;\r\n\t&lt;name&gt;xdrs_data_service_api&lt;/name&gt;\r\n\t&lt;description&gt;xdrs data service api&lt;/description&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2021.0.2&lt;/spring-cloud.version&gt;\r\n\t\t&lt;log4j2.version&gt;2.19.0&lt;/log4j2.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-retry&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.5.13&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2.9&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mongo-java-driver&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.12.10&lt;/version&gt; &lt;!-- Use the latest version --&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.4.1&lt;/version&gt; &lt;!-- Use the latest version --&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;aws-java-sdk&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.11.986&lt;/version&gt; &lt;!-- Use the latest version --&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mapstruct-jdk8&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.3.0.Beta2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mongodb-driver-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.11.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t\t&lt;finalName&gt;xdrs-data-service-api&lt;/finalName&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\r\nDocumentDBConf.java\r\n\r\n    package com.mercedesBenz.xdrs.dataService.config;\r\n\r\n    import java.io.File;\r\n    import java.security.Security;\r\n\r\n    import javax.net.ssl.SSLContext;\r\n\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.data.mongodb.core.MongoTemplate;\r\n\r\n    import com.mongodb.ConnectionString;\r\n    import com.mongodb.MongoClientSettings;\r\n    import com.mongodb.client.MongoClient;\r\n    import com.mongodb.client.MongoClients;\r\n\r\n\r\n    @Configuration\r\n    public class DocumentDBConf {\r\n\t\r\n\r\n\t@Value(&quot;${documentdb.connectionString}&quot;)\r\n    private String connectionString;\r\n\r\n    @Value(&quot;${documentdb.pemFile}&quot;)\r\n    private String pemFile;\r\n\r\n    @Bean\r\n    public MongoClient mongoClient() throws Exception {\r\n        // Load the .pem certificate file\r\n        File pemCertificate = new File(pemFile);\r\n\r\n        // Enable AWS DocumentDB TLS\r\n        System.setProperty(&quot;javax.net.ssl.trustStore&quot;, pemCertificate.getAbsolutePath());\r\n        System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;changeit&quot;); // The default trust store password\r\n        System.setProperty(&quot;javax.net.debug&quot;, &quot;ssl&quot;);\r\n        \r\n        // Enable strong cryptography\r\n        // Security.setProperty(&quot;crypto.policy&quot;, &quot;unlimited&quot;);\r\n\r\n        ConnectionString connString = new ConnectionString(connectionString);\r\n        MongoClientSettings settings = MongoClientSettings.builder()\r\n                .applyToSslSettings(sslSettingsBuilder -&gt; {\r\n                    try {\r\n                        sslSettingsBuilder.enabled(true)\r\n                                .context(SSLContext.getDefault()); // Use the default SSLContext\r\n                    } catch (Exception e) {\r\n                        throw new RuntimeException(&quot;Error creating SSL context&quot;, e);\r\n                    }\r\n                })\r\n                .applyConnectionString(connString)\r\n                .build();\r\n\r\n        return MongoClients.create(settings);\r\n    }\r\n    \r\n    @Bean\r\n    public MongoTemplate mongoTemplate(MongoClient mongoClient) {\r\n        return new MongoTemplate(mongoClient, &quot;test&quot;); // Replace &#39;your_database_name&#39; with your actual database name\r\n    }\r\n}\r\n\r\n\r\napplication.properties\r\n\r\n    documentdb.connectionString=mongodb://user:pwd@xdrs-int-docdb- \r\n    cluster-identifier.cluster-c6wywertyiq6.eu-central-1.docdb.amazonaws.com:27017/test?tls=true\r\n    documentdb.pemFile=/xdrs_data_service_api/src/main/resources/global-bundle.pem\r\n    #documentdb.pemFile=classpath:docdb.cert\r\n    #documentdb.pemFile=classpath:rds-truststore.jks\r\n    management.metrics.mongo.command.enabled=false \r\n    management.metrics.mongo.connectionpool.enabled=false\r\n\r\nXdrsDataServiceApplication.java\r\n\r\n    package com.mercedesBenz.xdrs.dataService;\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.retry.annotation.EnableRetry;\r\n\r\n\r\n    @SpringBootApplication(exclude = {MongoAutoConfiguration.class, \r\n    MongoDataAutoConfiguration.class})\r\n    public class XdrsDataServiceApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(XdrsDataServiceApplication.class, args);\r\n\t}\r\n\r\n    }\r\n\r\n\r\nImage of where my pem file is stored\r\n[![enter image description here][1]][1]\r\n\r\nIn local I am getting following error\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nWhen I deploy the same code in AWS ECS Fargate, I see the following logs\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Porbd.png\r\n  [2]: https://i.stack.imgur.com/iwzJJ.png\r\n  [3]: https://i.stack.imgur.com/b03XX.png","link":"https://stackoverflow.com/questions/77357123/how-to-connect-spring-boot-application-to-aws-document-db","title":"How to connect spring boot application to aws document db","body":"<p>I'm not able to connect my spring boot application to aws document db. Please tell me where am I going wrong.</p>\n<p>pom.xml</p>\n<pre><code> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\nxmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven- \n4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.7.0&lt;/version&gt;\n    &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;groupId&gt;com.mercedes-benz.xdrs&lt;/groupId&gt;\n&lt;artifactId&gt;xdrs_data_service_api&lt;/artifactId&gt;\n&lt;version&gt;1.0.0.0&lt;/version&gt;\n&lt;name&gt;xdrs_data_service_api&lt;/name&gt;\n&lt;description&gt;xdrs data service api&lt;/description&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;spring-cloud.version&gt;2021.0.2&lt;/spring-cloud.version&gt;\n    &lt;log4j2.version&gt;2.19.0&lt;/log4j2.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.retry&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-retry&lt;/artifactId&gt;\n        &lt;version&gt;1.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;version&gt;4.5.13&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n        &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n        &lt;version&gt;1.2.9&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n        &lt;artifactId&gt;mongo-java-driver&lt;/artifactId&gt;\n        &lt;version&gt;3.12.10&lt;/version&gt; &lt;!-- Use the latest version --&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n        &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\n        &lt;version&gt;4.4.1&lt;/version&gt; &lt;!-- Use the latest version --&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n        &lt;artifactId&gt;aws-java-sdk&lt;/artifactId&gt;\n        &lt;version&gt;1.11.986&lt;/version&gt; &lt;!-- Use the latest version --&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n        &lt;artifactId&gt;mapstruct-jdk8&lt;/artifactId&gt;\n        &lt;version&gt;1.3.0.Beta2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n        &lt;artifactId&gt;mongodb-driver-core&lt;/artifactId&gt;\n        &lt;version&gt;3.11.2&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    &lt;finalName&gt;xdrs-data-service-api&lt;/finalName&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>DocumentDBConf.java</p>\n<pre><code>package com.mercedesBenz.xdrs.dataService.config;\n\nimport java.io.File;\nimport java.security.Security;\n\nimport javax.net.ssl.SSLContext;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.mongodb.core.MongoTemplate;\n\nimport com.mongodb.ConnectionString;\nimport com.mongodb.MongoClientSettings;\nimport com.mongodb.client.MongoClient;\nimport com.mongodb.client.MongoClients;\n\n\n@Configuration\npublic class DocumentDBConf {\n\n\n@Value(&quot;${documentdb.connectionString}&quot;)\nprivate String connectionString;\n\n@Value(&quot;${documentdb.pemFile}&quot;)\nprivate String pemFile;\n\n@Bean\npublic MongoClient mongoClient() throws Exception {\n    // Load the .pem certificate file\n    File pemCertificate = new File(pemFile);\n\n    // Enable AWS DocumentDB TLS\n    System.setProperty(&quot;javax.net.ssl.trustStore&quot;, pemCertificate.getAbsolutePath());\n    System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;changeit&quot;); // The default trust store password\n    System.setProperty(&quot;javax.net.debug&quot;, &quot;ssl&quot;);\n    \n    // Enable strong cryptography\n    // Security.setProperty(&quot;crypto.policy&quot;, &quot;unlimited&quot;);\n\n    ConnectionString connString = new ConnectionString(connectionString);\n    MongoClientSettings settings = MongoClientSettings.builder()\n            .applyToSslSettings(sslSettingsBuilder -&gt; {\n                try {\n                    sslSettingsBuilder.enabled(true)\n                            .context(SSLContext.getDefault()); // Use the default SSLContext\n                } catch (Exception e) {\n                    throw new RuntimeException(&quot;Error creating SSL context&quot;, e);\n                }\n            })\n            .applyConnectionString(connString)\n            .build();\n\n    return MongoClients.create(settings);\n}\n\n@Bean\npublic MongoTemplate mongoTemplate(MongoClient mongoClient) {\n    return new MongoTemplate(mongoClient, &quot;test&quot;); // Replace 'your_database_name' with your actual database name\n}\n</code></pre>\n<p>}</p>\n<p>application.properties</p>\n<pre><code>documentdb.connectionString=mongodb://user:pwd@xdrs-int-docdb- \ncluster-identifier.cluster-c6wywertyiq6.eu-central-1.docdb.amazonaws.com:27017/test?tls=true\ndocumentdb.pemFile=/xdrs_data_service_api/src/main/resources/global-bundle.pem\n#documentdb.pemFile=classpath:docdb.cert\n#documentdb.pemFile=classpath:rds-truststore.jks\nmanagement.metrics.mongo.command.enabled=false \nmanagement.metrics.mongo.connectionpool.enabled=false\n</code></pre>\n<p>XdrsDataServiceApplication.java</p>\n<pre><code>package com.mercedesBenz.xdrs.dataService;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration;\nimport org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration;\nimport org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.retry.annotation.EnableRetry;\n\n\n@SpringBootApplication(exclude = {MongoAutoConfiguration.class, \nMongoDataAutoConfiguration.class})\npublic class XdrsDataServiceApplication {\n\npublic static void main(String[] args) {\n    SpringApplication.run(XdrsDataServiceApplication.class, args);\n}\n\n}\n</code></pre>\n<p>Image of where my pem file is stored\n<a href=\"https://i.stack.imgur.com/Porbd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Porbd.png\" alt=\"enter image description here\" /></a></p>\n<p>In local I am getting following error</p>\n<p><a href=\"https://i.stack.imgur.com/iwzJJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iwzJJ.png\" alt=\"enter image description here\" /></a></p>\n<p>When I deploy the same code in AWS ECS Fargate, I see the following logs</p>\n<p><a href=\"https://i.stack.imgur.com/b03XX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b03XX.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","environment-variables"],"comment_count":0,"is_answered":false,"view_count":34,"answer_count":0,"score":0,"last_activity_date":1702838478,"creation_date":1681047186,"last_edit_date":1702838478,"question_id":75970833,"body_markdown":"I have the following configuration in my spring xml:\r\n\r\n```\r\n    &lt;jee:jndi-lookup expected-type=&quot;java.lang.String&quot; id=&quot;isTestSystem&quot; jndi-name=&quot;java:comp/env/isTestSystem&quot; /&gt;\r\n    &lt;jee:jndi-lookup expected-type=&quot;java.lang.String&quot; id=&quot;webURL&quot; jndi-name=&quot;java:comp/env/webURL&quot; /&gt;\r\n```\r\n\r\nAnd those are ```@Autowired``` into the code:\r\n\r\n```\r\n@Autowired private String webURL = null;\r\n@Autowired private String isTestSystem = null;\r\n```\r\n\r\nTheir getters and setters are standard get() and set(). I&#39;m getting the following message:\r\n\r\n```\r\n[Time: 09 Apr 2023 09:29:17,438][Thread: main][Log: org.springframework.web.context.support.XmlWebApplicationContext][Level: WARN ] - [File: AbstractApplicationContext.java:591] - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.springframework.web.context.support.ServletContextAttributeExporter#0&#39; defined in class path resource [eSolutions/eSolutions-servlet.xml]: Cannot resolve reference to bean &#39;appConfig&#39; while setting bean property &#39;attributes&#39; with key [TypedStringValue: value [appBean], target type [null]]; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;appConfig&#39;: Unsatisfied dependency expressed through field &#39;homePage&#39;; nested exception is org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type &#39;java.lang.String&#39; available: expected single matching bean but found 2: isTestSystem,webURL\r\n```\r\n\r\nIt appears to be complaining that there are 2 string values available in the naming environment but I can&#39;t understand why. Any ideas?\r\n","link":"https://stackoverflow.com/questions/75970833/multiple-string-environment-variables-and-spring-jeejndi-lookup","title":"Multiple string environment variables and Spring jee:jndi-lookup","body":"<p>I have the following configuration in my spring xml:</p>\n<pre><code>    &lt;jee:jndi-lookup expected-type=&quot;java.lang.String&quot; id=&quot;isTestSystem&quot; jndi-name=&quot;java:comp/env/isTestSystem&quot; /&gt;\n    &lt;jee:jndi-lookup expected-type=&quot;java.lang.String&quot; id=&quot;webURL&quot; jndi-name=&quot;java:comp/env/webURL&quot; /&gt;\n</code></pre>\n<p>And those are <code>@Autowired</code> into the code:</p>\n<pre><code>@Autowired private String webURL = null;\n@Autowired private String isTestSystem = null;\n</code></pre>\n<p>Their getters and setters are standard get() and set(). I'm getting the following message:</p>\n<pre><code>[Time: 09 Apr 2023 09:29:17,438][Thread: main][Log: org.springframework.web.context.support.XmlWebApplicationContext][Level: WARN ] - [File: AbstractApplicationContext.java:591] - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.web.context.support.ServletContextAttributeExporter#0' defined in class path resource [eSolutions/eSolutions-servlet.xml]: Cannot resolve reference to bean 'appConfig' while setting bean property 'attributes' with key [TypedStringValue: value [appBean], target type [null]]; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'appConfig': Unsatisfied dependency expressed through field 'homePage'; nested exception is org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type 'java.lang.String' available: expected single matching bean but found 2: isTestSystem,webURL\n</code></pre>\n<p>It appears to be complaining that there are 2 string values available in the naming environment but I can't understand why. Any ideas?</p>\n"},{"tags":["java","ignite","java-21"],"comments":[{"score":3,"post_type":"question","creation_date":1696168167,"post_id":77210731,"comment_id":136116141,"body_markdown":"Have you read the [documentation](https://ignite.apache.org/docs/latest/setup)? Given it states it was tested on _&quot;Oracle JDK 8, 11 or 17 Open JDK 8, 11 or 17, IBM JDK 8, 11 or 17&quot;_, you can pretty much assume it does not (yet) support Java 21. Also, [this issue](https://github.com/apache/ignite/issues/10954) suggests that it will simply not work.","link":"https://stackoverflow.com/questions/77210731/apache-ignite-support-for-java-21#comment136116141_77210731","body":"Have you read the <a href=\"https://ignite.apache.org/docs/latest/setup\" rel=\"nofollow noreferrer\">documentation</a>? Given it states it was tested on <i>&quot;Oracle JDK 8, 11 or 17 Open JDK 8, 11 or 17, IBM JDK 8, 11 or 17&quot;</i>, you can pretty much assume it does not (yet) support Java 21. Also, <a href=\"https://github.com/apache/ignite/issues/10954\" rel=\"nofollow noreferrer\">this issue</a> suggests that it will simply not work."},{"score":0,"post_type":"question","creation_date":1696170193,"post_id":77210731,"comment_id":136116363,"body_markdown":"As I mention I have checked docs and it does not mention Java 21. But just wanted to ask community, maybe someone tried and solve in somehow.","link":"https://stackoverflow.com/questions/77210731/apache-ignite-support-for-java-21#comment136116363_77210731","body":"As I mention I have checked docs and it does not mention Java 21. But just wanted to ask community, maybe someone tried and solve in somehow."},{"score":1,"post_type":"question","creation_date":1696496210,"post_id":77210731,"comment_id":136161265,"body_markdown":"You can safely expect a software needing that many `--add-opens` clauses to break at every Java update.","link":"https://stackoverflow.com/questions/77210731/apache-ignite-support-for-java-21#comment136161265_77210731","body":"You can safely expect a software needing that many <code>--add-opens</code> clauses to break at every Java update."}],"answers":[{"comment_count":0,"score":2,"last_activity_date":1696413833,"creation_date":1696413833,"answer_id":77228611,"question_id":77210731,"body_markdown":"The current version of Ignite (2.15) needs some code changes to work with Java 21 (a couple of PRs have already been merged). I would expect to see them in the next version.","link":"https://stackoverflow.com/questions/77210731/apache-ignite-support-for-java-21/77228611#77228611","title":"Apache Ignite Support For Java 21","body":"<p>The current version of Ignite (2.15) needs some code changes to work with Java 21 (a couple of PRs have already been merged). I would expect to see them in the next version.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1702830310,"creation_date":1702830310,"answer_id":77675148,"question_id":77210731,"body_markdown":"There is a related bug fix that will be part of Ignite 2.16\r\n\r\nSee https://issues.apache.org/jira/browse/IGNITE-19652\r\n","link":"https://stackoverflow.com/questions/77210731/apache-ignite-support-for-java-21/77675148#77675148","title":"Apache Ignite Support For Java 21","body":"<p>There is a related bug fix that will be part of Ignite 2.16</p>\n<p>See <a href=\"https://issues.apache.org/jira/browse/IGNITE-19652\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/IGNITE-19652</a></p>\n"}],"comment_count":3,"is_answered":true,"view_count":237,"answer_count":2,"score":-1,"last_activity_date":1702830310,"creation_date":1696167979,"question_id":77210731,"body_markdown":"Does Apache Ignite Support Java 21 ?\r\n\r\nIt works with Java 17 when I added these parameter\r\n\r\n\r\n    --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED \\\r\n    --add-opens=java.base/jdk.internal.misc=ALL-UNNAMED \\\r\n    --add-opens=java.base/sun.nio.ch=ALL-UNNAMED \\\r\n    --add-opens=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED \\\r\n    --add-opens=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED \\\r\n    --add-opens=java.base/sun.reflect.generics.reflectiveObjects=ALL-UNNAMED \\\r\n    --add-opens=java.base/java.io=ALL-UNNAMED \\\r\n    --add-opens=java.base/java.nio=ALL-UNNAMED \\\r\n    --add-opens=java.base/java.util=ALL-UNNAMED \\\r\n    --add-opens=java.base/java.lang=ALL-UNNAMED\r\n\r\n\r\nBut when I try with java 21  it throws exception\r\n\r\n\r\n&gt; java.lang.RuntimeException: jdk.internal.misc.JavaNioAccess class is\r\n&gt; unavailable. Please add the following parameters to JVM startup\r\n&gt; settings and restart the application: {parameters:\r\n&gt; --add-exports=java.base/jdk.internal.misc=ALL-UNNAMED\r\n&gt; --add-exports=java.base/sun.nio.ch=ALL-UNNAMED\r\n&gt; --add-exports=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED\r\n&gt; --add-exports=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED\r\n&gt; --add-exports=java.base/sun.reflect.generics.reflectiveObjects=ALL-UNNAMED\r\n&gt; --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED\r\n&gt; --illegal-access=permit }\r\n&gt; See https://apacheignite.readme.io/docs/getting-started#section-running-ignite-with-java-9-10-11 for more information.\r\n\r\n\r\n**And even I add new parameters, it throws the same exception**\r\n\r\nI have checked docs and it does not mention Java 21\r\nhttps://ignite.apache.org/docs/latest/quick-start/java\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Piz0X.jpg","link":"https://stackoverflow.com/questions/77210731/apache-ignite-support-for-java-21","title":"Apache Ignite Support For Java 21","body":"<p>Does Apache Ignite Support Java 21 ?</p>\n<p>It works with Java 17 when I added these parameter</p>\n<pre><code>--add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED \\\n--add-opens=java.base/jdk.internal.misc=ALL-UNNAMED \\\n--add-opens=java.base/sun.nio.ch=ALL-UNNAMED \\\n--add-opens=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED \\\n--add-opens=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED \\\n--add-opens=java.base/sun.reflect.generics.reflectiveObjects=ALL-UNNAMED \\\n--add-opens=java.base/java.io=ALL-UNNAMED \\\n--add-opens=java.base/java.nio=ALL-UNNAMED \\\n--add-opens=java.base/java.util=ALL-UNNAMED \\\n--add-opens=java.base/java.lang=ALL-UNNAMED\n</code></pre>\n<p>But when I try with java 21  it throws exception</p>\n<blockquote>\n<p>java.lang.RuntimeException: jdk.internal.misc.JavaNioAccess class is\nunavailable. Please add the following parameters to JVM startup\nsettings and restart the application: {parameters:\n--add-exports=java.base/jdk.internal.misc=ALL-UNNAMED\n--add-exports=java.base/sun.nio.ch=ALL-UNNAMED\n--add-exports=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED\n--add-exports=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED\n--add-exports=java.base/sun.reflect.generics.reflectiveObjects=ALL-UNNAMED\n--add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED\n--illegal-access=permit }\nSee <a href=\"https://apacheignite.readme.io/docs/getting-started#section-running-ignite-with-java-9-10-11\" rel=\"nofollow noreferrer\">https://apacheignite.readme.io/docs/getting-started#section-running-ignite-with-java-9-10-11</a> for more information.</p>\n</blockquote>\n<p><strong>And even I add new parameters, it throws the same exception</strong></p>\n<p>I have checked docs and it does not mention Java 21\n<a href=\"https://ignite.apache.org/docs/latest/quick-start/java\" rel=\"nofollow noreferrer\">https://ignite.apache.org/docs/latest/quick-start/java</a>\n<a href=\"https://i.stack.imgur.com/Piz0X.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Piz0X.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","arrays","string","char","reverse"],"comments":[{"score":3,"post_type":"question","creation_date":1700582378,"post_id":77524176,"comment_id":136671006,"body_markdown":"You are overwriting the data. You need to work in from both ends, meet in the middle, and use a temporary char variable to prevent overwriting the data as you go. The reason it works with `charAt` is because strings are immutable so you can&#39;t destroy the data while you&#39;re reversing it.","link":"https://stackoverflow.com/questions/77524176/issue-in-reversing-a-string-in-java#comment136671006_77524176","body":"You are overwriting the data. You need to work in from both ends, meet in the middle, and use a temporary char variable to prevent overwriting the data as you go. The reason it works with <code>charAt</code> is because strings are immutable so you can&#39;t destroy the data while you&#39;re reversing it."},{"score":1,"post_type":"question","creation_date":1700582504,"post_id":77524176,"comment_id":136671031,"body_markdown":"And that&#39;s exactly what you should use: `reverseword[j] = str.charAt(i);\n` and begin by creating an empty array And of course you can do `return new StringBuilder(str).reverse().toString();`","link":"https://stackoverflow.com/questions/77524176/issue-in-reversing-a-string-in-java#comment136671031_77524176","body":"And that&#39;s exactly what you should use: <code>reverseword[j] = str.charAt(i); </code> and begin by creating an empty array And of course you can do <code>return new StringBuilder(str).reverse().toString();</code>"},{"score":0,"post_type":"question","creation_date":1700583743,"post_id":77524176,"comment_id":136671305,"body_markdown":"Check out the example at the end of [reverse an array](https://stackoverflow.com/a/77466881/1552534).  You can do the same thing with an array of characters and the return a new String of those characters.  Note that you only need to iterate half way from each end towards the middle.","link":"https://stackoverflow.com/questions/77524176/issue-in-reversing-a-string-in-java#comment136671305_77524176","body":"Check out the example at the end of <a href=\"https://stackoverflow.com/a/77466881/1552534\">reverse an array</a>.  You can do the same thing with an array of characters and the return a new String of those characters.  Note that you only need to iterate half way from each end towards the middle."},{"score":2,"post_type":"question","creation_date":1700584292,"post_id":77524176,"comment_id":136671418,"body_markdown":"This might not apply to your exercise, but note that reversing a Java string using a character array will break if the string contains one or more  UTF-16 surrogate pairs. It&#39;s probably better to work with integer code points, e.g. String#codePoints().","link":"https://stackoverflow.com/questions/77524176/issue-in-reversing-a-string-in-java#comment136671418_77524176","body":"This might not apply to your exercise, but note that reversing a Java string using a character array will break if the string contains one or more  UTF-16 surrogate pairs. It&#39;s probably better to work with integer code points, e.g. String#codePoints()."},{"score":0,"post_type":"question","creation_date":1700591879,"post_id":77524176,"comment_id":136672791,"body_markdown":"Try the following, _String s = &quot;&quot;; for (char c : &quot;geeks&quot;.toCharArray()) s = c + s;_.","link":"https://stackoverflow.com/questions/77524176/issue-in-reversing-a-string-in-java#comment136672791_77524176","body":"Try the following, <i>String s = &quot;&quot;; for (char c : &quot;geeks&quot;.toCharArray()) s = c + s;</i>."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1700620551,"last_edit_date":1700620551,"creation_date":1700620340,"answer_id":77527027,"question_id":77524176,"body_markdown":"In your code, you are trying to read and write data in the same array at the same time, which is causing data loss. When you start reading data from the end of the array and write it to the beginning of the array, you are actually overwriting the original data.To fix this, you need to create a new array to store the reversed characters, so you&#39;re not overwriting the original characters. \r\n\r\nHowever, when you use the `charAt`, you are reading the original string, which has not been modified the entire process. So you can correctly take the character from the end of the string.","link":"https://stackoverflow.com/questions/77524176/issue-in-reversing-a-string-in-java/77527027#77527027","title":"issue in reversing a string in java","body":"<p>In your code, you are trying to read and write data in the same array at the same time, which is causing data loss. When you start reading data from the end of the array and write it to the beginning of the array, you are actually overwriting the original data.To fix this, you need to create a new array to store the reversed characters, so you're not overwriting the original characters.</p>\n<p>However, when you use the <code>charAt</code>, you are reading the original string, which has not been modified the entire process. So you can correctly take the character from the end of the string.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1700622675,"creation_date":1700622675,"answer_id":77527125,"question_id":77524176,"body_markdown":"Your code has two algorithmic problems:\r\n\r\n - `reverseword[j] = reverseword[i];` overwrites the character at index `j` and leaves the char at `i` as is. You can use a temporary variable to swap these two values;\r\n - by running the for loop from `reverseword.length - 1` to `0`, even if you use a temporary variable, you are going to swap them correctly, but you are going to do it twice and end up with the initial array.  \r\n\r\nBelow is a code that fixes it (and adds another way of reversing a string):  \r\n\r\n    public class Test {\r\n        public static void main(String [] args) {\r\n            for(String arg: args) {\r\n                System.out.println(arg + &quot; &lt;-&gt; &quot; + reverse(arg));\r\n                System.out.println(arg + &quot; &lt;-&gt; &quot; + reverse2(arg));\r\n            }\r\n        }\r\n    \r\n        static String reverse(String value) {\r\n            char [] characters = value.toCharArray();\r\n    \r\n            int len = characters.length;\r\n            for (int i = 0; i &lt;= len/2 - 1; i++) {\r\n                char tmp = characters[i];\r\n                characters[i] = characters[len-i-1];\r\n                characters[len-i-1] = tmp;\r\n            }\r\n            return new String(characters);\r\n        }\r\n    \r\n        static String reverse2(String value) {\r\n            StringBuilder reverse = new StringBuilder(value);\r\n            return reverse.reverse().toString();\r\n        }\r\n    }","link":"https://stackoverflow.com/questions/77524176/issue-in-reversing-a-string-in-java/77527125#77527125","title":"issue in reversing a string in java","body":"<p>Your code has two algorithmic problems:</p>\n<ul>\n<li><code>reverseword[j] = reverseword[i];</code> overwrites the character at index <code>j</code> and leaves the char at <code>i</code> as is. You can use a temporary variable to swap these two values;</li>\n<li>by running the for loop from <code>reverseword.length - 1</code> to <code>0</code>, even if you use a temporary variable, you are going to swap them correctly, but you are going to do it twice and end up with the initial array.</li>\n</ul>\n<p>Below is a code that fixes it (and adds another way of reversing a string):</p>\n<pre><code>public class Test {\n    public static void main(String [] args) {\n        for(String arg: args) {\n            System.out.println(arg + &quot; &lt;-&gt; &quot; + reverse(arg));\n            System.out.println(arg + &quot; &lt;-&gt; &quot; + reverse2(arg));\n        }\n    }\n\n    static String reverse(String value) {\n        char [] characters = value.toCharArray();\n\n        int len = characters.length;\n        for (int i = 0; i &lt;= len/2 - 1; i++) {\n            char tmp = characters[i];\n            characters[i] = characters[len-i-1];\n            characters[len-i-1] = tmp;\n        }\n        return new String(characters);\n    }\n\n    static String reverse2(String value) {\n        StringBuilder reverse = new StringBuilder(value);\n        return reverse.reverse().toString();\n    }\n}\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1702825954,"creation_date":1702825954,"answer_id":77674897,"question_id":77524176,"body_markdown":"You could use below code, which makes it 2 times faster, and works with no issue.\r\n\r\n    char[] arr = str.toCharArray();\r\n\r\n    for(int i = 0; i&lt; arr.length/2; i++){\r\n        char temp = arr[i];\r\n        arr[i] = arr[arr.length-1-i];\r\n        arr[arr.length-1-i] = temp;\r\n    }\r\n\r\n    return new String(arr);","link":"https://stackoverflow.com/questions/77524176/issue-in-reversing-a-string-in-java/77674897#77674897","title":"issue in reversing a string in java","body":"<p>You could use below code, which makes it 2 times faster, and works with no issue.</p>\n<pre><code>char[] arr = str.toCharArray();\n\nfor(int i = 0; i&lt; arr.length/2; i++){\n    char temp = arr[i];\n    arr[i] = arr[arr.length-1-i];\n    arr[arr.length-1-i] = temp;\n}\n\nreturn new String(arr);\n</code></pre>\n"}],"comment_count":5,"is_answered":false,"view_count":92,"answer_count":3,"score":1,"last_activity_date":1702825954,"creation_date":1700582034,"last_edit_date":1700582356,"question_id":77524176,"body_markdown":"cant reverse my string using char[] array\r\nif my input is geeks and output shpuld be skeeg \r\nif i reverse using charAt function it reverse the string correctly if i use the reverse[i]=reverse[j] i cant reverse it properly where (j=length of reverse)  for clear view please view my code .\r\nthe above code gives me output as wrong for example if my input is geeks it gives output as skeks\r\nif i change the line reverseword[j] = reverseword[i]; to reverseword[j] = test.charAt(i); it gives coorect output.\r\nsince reversedword also contains the same word but it gives issue while reversing a string but when using test.chatAt it works?\r\nwhats the issue in reversing a string using reverseword[j] = reverseword[i];?\r\n\r\n```\r\nclass reverse {\r\n\r\n\tpublic static String sample(String str) {\r\n\t\tString test = str;\r\n\t\tchar[] reverseword;\r\n\r\n\t\treverseword = test.toCharArray();\r\n\r\n\t\tint j = 0;\r\n\t\t\r\n\t\tfor (int i = reverseword.length - 1; i &gt;= 0; i--) {\r\n\t\t\treverseword[j] = reverseword[i];\r\n\t\t\tj++;\r\n\t\t}\r\n\r\n\t\tString finalresult = new String(reverseword);\r\n\t\treturn finalresult;\r\n\t}\r\n} \r\n```\r\n\r\n","link":"https://stackoverflow.com/questions/77524176/issue-in-reversing-a-string-in-java","title":"issue in reversing a string in java","body":"<p>cant reverse my string using char[] array\nif my input is geeks and output shpuld be skeeg\nif i reverse using charAt function it reverse the string correctly if i use the reverse[i]=reverse[j] i cant reverse it properly where (j=length of reverse)  for clear view please view my code .\nthe above code gives me output as wrong for example if my input is geeks it gives output as skeks\nif i change the line reverseword[j] = reverseword[i]; to reverseword[j] = test.charAt(i); it gives coorect output.\nsince reversedword also contains the same word but it gives issue while reversing a string but when using test.chatAt it works?\nwhats the issue in reversing a string using reverseword[j] = reverseword[i];?</p>\n<pre><code>class reverse {\n\n    public static String sample(String str) {\n        String test = str;\n        char[] reverseword;\n\n        reverseword = test.toCharArray();\n\n        int j = 0;\n        \n        for (int i = reverseword.length - 1; i &gt;= 0; i--) {\n            reverseword[j] = reverseword[i];\n            j++;\n        }\n\n        String finalresult = new String(reverseword);\n        return finalresult;\n    }\n} \n</code></pre>\n"},{"tags":["java","lombok","checkstyle"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1702727621,"post_id":77632355,"comment_id":136931333,"body_markdown":"Unfortunately, it still doesn&#39;t work and reports `val` as a violation of the final local variable check. I had to disable this check for now. Do you think there is something else I could try?","link":"https://stackoverflow.com/questions/77563442/suppress-checkstyle-for-lomboks-val-using-suppressionxpathfilter/77632355#comment136931333_77632355","body":"Unfortunately, it still doesn&#39;t work and reports <code>val</code> as a violation of the final local variable check. I had to disable this check for now. Do you think there is something else I could try?"},{"score":0,"post_type":"answer","creation_date":1702825499,"post_id":77632355,"comment_id":136938428,"body_markdown":"I&#39;ve included a more detailed configuration in the answer. Could you specify your source code using the val keyword for debugging?","link":"https://stackoverflow.com/questions/77563442/suppress-checkstyle-for-lomboks-val-using-suppressionxpathfilter/77632355#comment136938428_77632355","body":"I&#39;ve included a more detailed configuration in the answer. Could you specify your source code using the val keyword for debugging?"}],"comment_count":2,"score":0,"last_activity_date":1702825261,"last_edit_date":1702825261,"creation_date":1702145394,"answer_id":77632355,"question_id":77563442,"body_markdown":"You need to address the IDENT child node of the VARIABLE_DEF with the suppression query:\r\n\r\n    query=&quot;//VARIABLE_DEF[./TYPE/IDENT[@text=&#39;val&#39;]]/IDENT&quot;\r\n\r\nFor the following source code:\r\n```java\r\nclass C  {\r\n    void m() {\r\n        val a = 3;\r\n    }\r\n}\r\n```\r\nwith the following checkstyle config:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot;?&gt;\r\n&lt;!DOCTYPE module PUBLIC\r\n        &quot;-//Puppy Crawl//DTD Check Configuration 1.3//EN&quot;\r\n        &quot;http://www.puppycrawl.com/dtds/configuration_1_3.dtd&quot;&gt;\r\n&lt;module name=&quot;Checker&quot;&gt;\r\n    &lt;property name=&quot;fileExtensions&quot; value=&quot;java&quot;/&gt;\r\n    &lt;module name=&quot;TreeWalker&quot;&gt;\r\n        &lt;module name=&quot;SuppressionXpathFilter&quot;&gt;\r\n            &lt;property name=&quot;file&quot; value=&quot;suppressions-check.xml&quot;/&gt;\r\n        &lt;/module&gt;\r\n        &lt;module name=&quot;FinalLocalVariable&quot;/&gt;\r\n    &lt;/module&gt;\r\n&lt;/module&gt;\r\n```\r\nusing this suppression filter file:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot;?&gt;\r\n&lt;!DOCTYPE suppressions PUBLIC\r\n        &quot;-//Checkstyle//DTD SuppressionXpathFilter Experimental Configuration 1.2//EN&quot;\r\n        &quot;https://checkstyle.org/dtds/suppressions_1_2_xpath_experimental.dtd&quot;&gt;\r\n&lt;suppressions&gt;\r\n    &lt;suppress-xpath checks=&quot;FinalLocalVariable&quot; query=&quot;//VARIABLE_DEF[./TYPE/IDENT[@text=&#39;val&#39;]]/IDENT&quot;/&gt;\r\n&lt;/suppressions&gt;\r\n```\r\nCheckstyle won&#39;t report any error.","link":"https://stackoverflow.com/questions/77563442/suppress-checkstyle-for-lomboks-val-using-suppressionxpathfilter/77632355#77632355","title":"Suppress checkstyle for lombok&#39;s val using SuppressionXpathFilter","body":"<p>You need to address the IDENT child node of the VARIABLE_DEF with the suppression query:</p>\n<pre><code>query=&quot;//VARIABLE_DEF[./TYPE/IDENT[@text='val']]/IDENT&quot;\n</code></pre>\n<p>For the following source code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class C  {\n    void m() {\n        val a = 3;\n    }\n}\n</code></pre>\n<p>with the following checkstyle config:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;!DOCTYPE module PUBLIC\n        &quot;-//Puppy Crawl//DTD Check Configuration 1.3//EN&quot;\n        &quot;http://www.puppycrawl.com/dtds/configuration_1_3.dtd&quot;&gt;\n&lt;module name=&quot;Checker&quot;&gt;\n    &lt;property name=&quot;fileExtensions&quot; value=&quot;java&quot;/&gt;\n    &lt;module name=&quot;TreeWalker&quot;&gt;\n        &lt;module name=&quot;SuppressionXpathFilter&quot;&gt;\n            &lt;property name=&quot;file&quot; value=&quot;suppressions-check.xml&quot;/&gt;\n        &lt;/module&gt;\n        &lt;module name=&quot;FinalLocalVariable&quot;/&gt;\n    &lt;/module&gt;\n&lt;/module&gt;\n</code></pre>\n<p>using this suppression filter file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;!DOCTYPE suppressions PUBLIC\n        &quot;-//Checkstyle//DTD SuppressionXpathFilter Experimental Configuration 1.2//EN&quot;\n        &quot;https://checkstyle.org/dtds/suppressions_1_2_xpath_experimental.dtd&quot;&gt;\n&lt;suppressions&gt;\n    &lt;suppress-xpath checks=&quot;FinalLocalVariable&quot; query=&quot;//VARIABLE_DEF[./TYPE/IDENT[@text='val']]/IDENT&quot;/&gt;\n&lt;/suppressions&gt;\n</code></pre>\n<p>Checkstyle won't report any error.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":65,"answer_count":1,"score":0,"last_activity_date":1702825261,"creation_date":1701170235,"last_edit_date":1702287595,"question_id":77563442,"body_markdown":"I am using lombok&#39;s `val` to specify the final variables in my code. The checkstyle rule for FinalLocalVariable reports any `val` variable as non-final. I am trying to write a custom suppress.xml to suppress this check for any `val` field. Currently, my suppression.xml looks like this \r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;!DOCTYPE suppressions PUBLIC\r\n        &quot;-//Checkstyle//DTD SuppressionXpathFilter Experimental Configuration 1.2//EN&quot;\r\n        &quot;https://checkstyle.org/dtds/suppressions_1_2_xpath_experimental.dtd&quot;&gt;\r\n     &lt;suppressions&gt;\r\n    &lt;suppress-xpath \r\n            checks=&quot;FinalLocalVariable&quot; query=&quot;//VARIABLE_DEF[./TYPE/IDENT[@text=&#39;val&#39;]]&quot;/\r\n    &lt;/suppressions&gt;\r\n\r\n\r\nI have generated the AST tree for the class that has the `val` fields, here is the part where `val` is declared \r\n\r\n    `--SLIST -&gt; { [32:96]\r\n        |       |--VARIABLE_DEF -&gt; VARIABLE_DEF [33:4]\r\n        |       |   |--MODIFIERS -&gt; MODIFIERS [33:4]\r\n        |       |   |--TYPE -&gt; TYPE [33:4]\r\n        |       |   |   `--IDENT -&gt; val [33:4]\r\n\r\nMy idea was to specify that any variable definition of identity `val` should be ignored for this exact check. I have read the checkstyle&#39;s documentation for SuppressionXpathFilter and I cannot find what my issue is as the checkstyle keeps reporting that the variable should be declared final. Any help would be much appreciated.  \r\n\r\n","link":"https://stackoverflow.com/questions/77563442/suppress-checkstyle-for-lomboks-val-using-suppressionxpathfilter","title":"Suppress checkstyle for lombok&#39;s val using SuppressionXpathFilter","body":"<p>I am using lombok's <code>val</code> to specify the final variables in my code. The checkstyle rule for FinalLocalVariable reports any <code>val</code> variable as non-final. I am trying to write a custom suppress.xml to suppress this check for any <code>val</code> field. Currently, my suppression.xml looks like this</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;!DOCTYPE suppressions PUBLIC\n    &quot;-//Checkstyle//DTD SuppressionXpathFilter Experimental Configuration 1.2//EN&quot;\n    &quot;https://checkstyle.org/dtds/suppressions_1_2_xpath_experimental.dtd&quot;&gt;\n &lt;suppressions&gt;\n&lt;suppress-xpath \n        checks=&quot;FinalLocalVariable&quot; query=&quot;//VARIABLE_DEF[./TYPE/IDENT[@text='val']]&quot;/\n&lt;/suppressions&gt;\n</code></pre>\n<p>I have generated the AST tree for the class that has the <code>val</code> fields, here is the part where <code>val</code> is declared</p>\n<pre><code>`--SLIST -&gt; { [32:96]\n    |       |--VARIABLE_DEF -&gt; VARIABLE_DEF [33:4]\n    |       |   |--MODIFIERS -&gt; MODIFIERS [33:4]\n    |       |   |--TYPE -&gt; TYPE [33:4]\n    |       |   |   `--IDENT -&gt; val [33:4]\n</code></pre>\n<p>My idea was to specify that any variable definition of identity <code>val</code> should be ignored for this exact check. I have read the checkstyle's documentation for SuppressionXpathFilter and I cannot find what my issue is as the checkstyle keeps reporting that the variable should be declared final. Any help would be much appreciated.</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"score":0,"post_type":"question","creation_date":1701948481,"post_id":77547801,"comment_id":136839259,"body_markdown":"Firebase is not something like that. You need to get the value  inside the onDataChanged from Firebase.","link":"https://stackoverflow.com/questions/77547801/livedata-and-viewmodel-are-just-once-called-with-firebase-realtime-database-and#comment136839259_77547801","body":"Firebase is not something like that. You need to get the value  inside the onDataChanged from Firebase."},{"score":0,"post_type":"question","creation_date":1702048091,"post_id":77547801,"comment_id":136853244,"body_markdown":"@TicherhazFreePalestine: Thanks Ticherhaz for your comment. Acutally I have implemented the `public void onChanged` method and I call `liveData.observe` the livedata object that I get from the viewModel. So I have LiveData, ViewModel and the Firebase Queries. So I don&#39;t understand why the onChanged method is not called when something in the Database changes. With LiveData and ViewModel it should be possible to listen to changes in the db. Further, I don&#39;t understand why the `dataSnapshot` is null","link":"https://stackoverflow.com/questions/77547801/livedata-and-viewmodel-are-just-once-called-with-firebase-realtime-database-and#comment136853244_77547801","body":"@TicherhazFreePalestine: Thanks Ticherhaz for your comment. Acutally I have implemented the <code>public void onChanged</code> method and I call <code>liveData.observe</code> the livedata object that I get from the viewModel. So I have LiveData, ViewModel and the Firebase Queries. So I don&#39;t understand why the onChanged method is not called when something in the Database changes. With LiveData and ViewModel it should be possible to listen to changes in the db. Further, I don&#39;t understand why the <code>dataSnapshot</code> is null"},{"score":0,"post_type":"question","creation_date":1702199600,"post_id":77547801,"comment_id":136865633,"body_markdown":"@TicherhazFreePalestine: Thanks Ticherhaz for your comment. Any comments to my last comment? I&#39;ll highly appreciate any further comment from you.","link":"https://stackoverflow.com/questions/77547801/livedata-and-viewmodel-are-just-once-called-with-firebase-realtime-database-and#comment136865633_77547801","body":"@TicherhazFreePalestine: Thanks Ticherhaz for your comment. Any comments to my last comment? I&#39;ll highly appreciate any further comment from you."},{"score":0,"post_type":"question","creation_date":1702424497,"post_id":77547801,"comment_id":136893945,"body_markdown":"Try to put onChanged inside Firebase callback.","link":"https://stackoverflow.com/questions/77547801/livedata-and-viewmodel-are-just-once-called-with-firebase-realtime-database-and#comment136893945_77547801","body":"Try to put onChanged inside Firebase callback."},{"score":0,"post_type":"question","creation_date":1702649837,"post_id":77547801,"comment_id":136924319,"body_markdown":"@TicherhazFreePalestine: Thanks Ticherhaz for your comment. How can I put onChanged inside Firebase callback. I am using LiveData and ViewModel. That makes it really strange because I thought that LiveData and ViewModel can react to changes but they are not doing it","link":"https://stackoverflow.com/questions/77547801/livedata-and-viewmodel-are-just-once-called-with-firebase-realtime-database-and#comment136924319_77547801","body":"@TicherhazFreePalestine: Thanks Ticherhaz for your comment. How can I put onChanged inside Firebase callback. I am using LiveData and ViewModel. That makes it really strange because I thought that LiveData and ViewModel can react to changes but they are not doing it"}],"comment_count":5,"is_answered":false,"view_count":85,"answer_count":0,"score":1,"last_activity_date":1702805886,"creation_date":1700914083,"last_edit_date":1702805886,"question_id":77547801,"body_markdown":"I have the following DialogFrament with Firebase Realtime Database together with ViewModel and LiveData to continiously listen to changes in the database:\r\n\r\n\r\n    public class DialogFR_LevelEnd extends DialogFragment implements View.OnClickListener {\r\n        public DialoagFragmentLevelEndingBinding binding;\r\n    \r\n        private double co2SavingsScore;\r\n    \r\n        private RecyclerView recyclerView_HighScore;\r\n    \r\n        private RV_Adapter_Highscore adapter_HighScore;\r\n        private RecyclerView.LayoutManager layoutManager_HighScore;\r\n        private ArrayList&lt;RV_Item_Highscore&gt; arrayList_HighScore;\r\n    \r\n        private int pastDaysForDisplayingScores = 0;\r\n        private   int currentLevel;\r\n    \r\n        //Firebase components\r\n        private ViewModel_DialogFR_LevelEnd viewModel;\r\n        LiveData&lt;DataSnapshot&gt; liveData;\r\n        DataSnapshot currentDataSnapShotFromFirebase;\r\n        DatabaseReference rootRef_Firebase;\r\n    \r\n        String FIREBASE_CO_2_SCORE = &quot;co2_score&quot;;\r\n        String FIREBASE_DATE = &quot;date&quot;;\r\n        String FIREBASE_DATE_IN_MILLISECONDS = &quot;date_in_milliseconds&quot;;\r\n        String FIREBASE_LEVEL = &quot;level&quot;;\r\n        String FIREBASE_NAME = &quot;name&quot;;\r\n        \r\n        public static DialogFR_LevelEnd newInstance(double co2SavingsScore, double neededCO2SavingScore, int currentLevel) {\r\n            DialogFR_LevelEnd fragment = new DialogFR_LevelEnd();\r\n            Bundle args = new Bundle();\r\n            args.putDouble(&quot;co2SavingsScore&quot;, co2SavingsScore);\r\n            args.putDouble(&quot;neededCO2SavingScore&quot;, neededCO2SavingScore);\r\n            args.putInt(&quot;currentLevel&quot;, currentLevel);\r\n            fragment.setArguments(args);\r\n            return fragment;\r\n        }\r\n    \r\n        public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                                 Bundle savedInstanceState) {\r\n            binding = DialoagFragmentLevelEndingBinding.inflate(inflater, container, false);\r\n            double co2SavingsScore = getArguments().getDouble(&quot;co2SavingsScore&quot;, 0.0);\r\n            double neededCO2SavingsScore = getArguments().getDouble(&quot;neededCO2SavingScore&quot;, 0.0);\r\n            this.currentLevel = getArguments().getInt(&quot;currentLevel&quot;, 0);\r\n    \r\n            binding.textViewLevelFinishedMessageCO2.setText(&quot;You needed to save &quot; + neededCO2SavingsScore+ &quot;g of CO2 and you got &quot; + co2SavingsScore + &quot;g&quot;);\r\n    \r\n            //Check if the level was successfull\r\n            if (co2SavingsScore&gt;= neededCO2SavingsScore) {\r\n                //Level passed\r\n                binding.imageViewCloseSymbol.setVisibility(View.INVISIBLE);\r\n            }\r\n            else {\r\n                //Level not passed\r\n                binding.imageViewCheckmark.setVisibility(View.INVISIBLE);\r\n                binding.imageViewRepeatSymbol.setClickable(false);\r\n                binding.imageViewRepeatSymbol.setAlpha(0.5f);\r\n                binding.textViewNextLevel.setAlpha(0.5f);\r\n            }\r\n    \r\n            //Initialize highScore array list and the RV adapter\r\n            arrayList_HighScore = new ArrayList&lt;RV_Item_Highscore&gt;();\r\n            adapter_HighScore = new RV_Adapter_Highscore(arrayList_HighScore);\r\n    \r\n    \r\n            //Firebase components\r\n            String FIREBASE_URL = &quot;https://heatinggamehighscores-default-rtdb.europe-west1.firebasedatabase.app/&quot;;\r\n\r\n            if (FirebaseApp.getApps(getContext()).isEmpty()) {\r\n                FirebaseOptions options = new FirebaseOptions.Builder()\r\n                        .setApplicationId(&quot;1:248974012708:android:3f93234ba2066ed41643b1&quot;)\r\n                        .setDatabaseUrl(FIREBASE_URL)\r\n    \r\n                        .build();\r\n    \r\n                FirebaseApp.initializeApp(getContext(), options);\r\n            }\r\n            rootRef_Firebase = FirebaseDatabase.getInstance(FIREBASE_URL).getReference();\r\n            rootRef_Firebase.keepSynced(true);\r\n    \r\n    \r\n            // Initialize ViewModel\r\n            viewModel = new ViewModelProvider(this).get(ViewModel_DialogFR_LevelEnd.class);\r\n            viewModel.setFirebaseNodeLevel(currentLevel);\r\n            viewModel.setPastTimeMillis(pastDaysForDisplayingScores);\r\n    \r\n            liveData = viewModel.getData();\r\n            Log.e(&quot;Tag_Dialog&quot;, &quot;DialogFragment: ViewModel Get Data Called&quot;);\r\n            liveData.observe(this, new Observer&lt;DataSnapshot&gt;() {\r\n    \r\n                @Override\r\n                public void onChanged(@Nullable DataSnapshot dataSnapshot) {\r\n                    Log.e(&quot;Tag_Dialog&quot;, &quot;DialogFragment: onChanged Called&quot;);\r\n                    if (dataSnapshot != null) {\r\n    \r\n                        Log.e(&quot;Tag_Dialog&quot;, &quot;DialogFragment: DataSnapshot !=null&quot;);\r\n    \r\n                        arrayList_HighScore.clear();\r\n    \r\n    \r\n                        for(DataSnapshot ds: dataSnapshot.getChildren()) {\r\n                            Log.e(&quot;Tag_Dialog&quot;, &quot;DialogFragment: DataSnapshot iteration&quot;);\r\n                            if (ds != null) {\r\n    \r\n                                 String name = &quot;&quot;;\r\n                                 int co2Score = 0;\r\n                                 String date = &quot;&quot;;\r\n                                 int level = 0;\r\n    \r\n                                 int position = 0;\r\n    \r\n                                // update the UI here with values in the snapshot\r\n                                if(ds.child(FIREBASE_NAME).getValue(String.class)!=null) {\r\n                                    name = ds.child(FIREBASE_NAME).getValue(String.class);\r\n                                }\r\n    \r\n                                if(ds.child(FIREBASE_CO_2_SCORE).getValue(Integer.class)!=null) {\r\n                                    co2Score = ds.child(FIREBASE_CO_2_SCORE).getValue(Integer.class);\r\n                                }\r\n    \r\n                                if(ds.child(FIREBASE_LEVEL).getValue(Integer.class)!=null) {\r\n                                    level = ds.child(FIREBASE_LEVEL).getValue(Integer.class);\r\n                                }\r\n    \r\n    \r\n                                if(ds.child(FIREBASE_DATE).getValue(String.class)!=null) {\r\n                                    date =  ds.child(FIREBASE_DATE).getValue(String.class);\r\n                                }\r\n                                arrayList_HighScore.add(new RV_Item_Highscore(name, co2Score, date, level, position));\r\n    \r\n                            }\r\n                        }\r\n                    }\r\n                }// end onChange\r\n            }); //end observe    \r\n    \r\n            buildRecyclerView();\r\n    \r\n            return binding.getRoot();    \r\n        }\r\n    \r\n        public void buildRecyclerView() {\r\n            recyclerView_HighScore = binding.rvHighScoreStatisticsToBeDisplayed;\r\n            recyclerView_HighScore.setHasFixedSize(true);\r\n            layoutManager_HighScore = new LinearLayoutManager(this.getContext());    \r\n    \r\n            recyclerView_HighScore.setLayoutManager(layoutManager_HighScore);\r\n            recyclerView_HighScore.setAdapter(adapter_HighScore);\r\n        }\r\n        \r\n        public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n            super.onViewCreated(view, savedInstanceState);    \r\n        }    \r\n    \r\n        @Override\r\n        public void onClick(View view) {\r\n            if (view instanceof ToggleButton) {\r\n                if (binding.tbuttonHighScoreLastWeek.isChecked()) {\r\n                    this.pastDaysForDisplayingScores = 7;\r\n                }\r\n                if (binding.tbuttonHighScoreLastMonth.isChecked()) {\r\n                    this.pastDaysForDisplayingScores = 30;\r\n                }\r\n                if (binding.tbuttonHighScoreOverall.isChecked()) {\r\n                    this.pastDaysForDisplayingScores = 10000;\r\n                }\r\n                viewModel.setPastTimeMillis(pastDaysForDisplayingScores);\r\n            }\r\n        }\r\n    }\r\n\r\nand the corresponding ViewModel and LiveData class:\r\n\r\n    public class ViewModel_DialogFR_LevelEnd extends ViewModel {        \r\n        public static final String FIREBASE_URL = &quot;https://heatinggamehighscores-default-rtdb.europe-west1.firebasedatabase.app/&quot;;\r\n        public static String FIREBASE_NODE_LEVEL = &quot;&quot;;\r\n        public static final String FIREBASE_DATE_IN_MILLISECONDS = &quot;date_in_milliseconds&quot;;\r\n    \r\n        private MutableLiveData&lt;DataSnapshot&gt; data = new MutableLiveData&lt;DataSnapshot&gt;();\r\n    \r\n        private static long pastTimeMillis;\r\n    \r\n        public void setFirebaseNodeLevel(int levelNumber) {\r\n            FIREBASE_NODE_LEVEL = &quot;level_&quot; + levelNumber;\r\n        }\r\n    \r\n        public void setPastTimeMillis (int pastDaysForDisplayingScores) {\r\n            pastTimeMillis = System.currentTimeMillis() - (long) (pastDaysForDisplayingScores * 24L * 60 * 60 * 1000);\r\n            data.postValue(null);\r\n        }\r\n    \r\n        public LiveData&lt;DataSnapshot&gt; getData() {\r\n            Log.e(&quot;Tag_Dialog&quot;, &quot;ViewModel: getData called&quot;);\r\n              Query QUERY_DATE = FirebaseDatabase.getInstance(FIREBASE_URL).getReference().child(FIREBASE_NODE_LEVEL).orderByChild(FIREBASE_DATE_IN_MILLISECONDS).startAt(pastTimeMillis);\r\n            Log.e(&quot;Tag_Dialog&quot;, &quot;ViewModel: Query =&quot; + QUERY_DATE);\r\n            return data;\r\n        }\r\n    }\r\n\r\nThe Firebase Realtime Database looks like this:\r\n[![enter image description here][1]][1]\r\n\r\n[1]: https://i.stack.imgur.com/h2ILZ.png\r\n\r\nActually what I don&#39;t understand is why the `onChanged` method is only called once? Even when I change the values of the database, the onChanged method is not called again, altough I thought with liveData the method should be called every time when the database changes. Further, I don&#39;t understand why the `dataSnapshot` is always `null` altough the query in ViewModel `Query QUERY_DATE = FirebaseDatabase.getInstance(FIREBASE_URL).getReference().child(FIREBASE_NODE_LEVEL).orderByChild(FIREBASE_DATE_IN_MILLISECONDS).startAt(pastTimeMillis);` should return something? \r\n\r\n**Reminder**: Does someone have a solution for this issue?\r\n  ","link":"https://stackoverflow.com/questions/77547801/livedata-and-viewmodel-are-just-once-called-with-firebase-realtime-database-and","title":"LiveData and ViewModel are just once called with Firebase Realtime Database and not continiously","body":"<p>I have the following DialogFrament with Firebase Realtime Database together with ViewModel and LiveData to continiously listen to changes in the database:</p>\n<pre><code>public class DialogFR_LevelEnd extends DialogFragment implements View.OnClickListener {\n    public DialoagFragmentLevelEndingBinding binding;\n\n    private double co2SavingsScore;\n\n    private RecyclerView recyclerView_HighScore;\n\n    private RV_Adapter_Highscore adapter_HighScore;\n    private RecyclerView.LayoutManager layoutManager_HighScore;\n    private ArrayList&lt;RV_Item_Highscore&gt; arrayList_HighScore;\n\n    private int pastDaysForDisplayingScores = 0;\n    private   int currentLevel;\n\n    //Firebase components\n    private ViewModel_DialogFR_LevelEnd viewModel;\n    LiveData&lt;DataSnapshot&gt; liveData;\n    DataSnapshot currentDataSnapShotFromFirebase;\n    DatabaseReference rootRef_Firebase;\n\n    String FIREBASE_CO_2_SCORE = &quot;co2_score&quot;;\n    String FIREBASE_DATE = &quot;date&quot;;\n    String FIREBASE_DATE_IN_MILLISECONDS = &quot;date_in_milliseconds&quot;;\n    String FIREBASE_LEVEL = &quot;level&quot;;\n    String FIREBASE_NAME = &quot;name&quot;;\n    \n    public static DialogFR_LevelEnd newInstance(double co2SavingsScore, double neededCO2SavingScore, int currentLevel) {\n        DialogFR_LevelEnd fragment = new DialogFR_LevelEnd();\n        Bundle args = new Bundle();\n        args.putDouble(&quot;co2SavingsScore&quot;, co2SavingsScore);\n        args.putDouble(&quot;neededCO2SavingScore&quot;, neededCO2SavingScore);\n        args.putInt(&quot;currentLevel&quot;, currentLevel);\n        fragment.setArguments(args);\n        return fragment;\n    }\n\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        binding = DialoagFragmentLevelEndingBinding.inflate(inflater, container, false);\n        double co2SavingsScore = getArguments().getDouble(&quot;co2SavingsScore&quot;, 0.0);\n        double neededCO2SavingsScore = getArguments().getDouble(&quot;neededCO2SavingScore&quot;, 0.0);\n        this.currentLevel = getArguments().getInt(&quot;currentLevel&quot;, 0);\n\n        binding.textViewLevelFinishedMessageCO2.setText(&quot;You needed to save &quot; + neededCO2SavingsScore+ &quot;g of CO2 and you got &quot; + co2SavingsScore + &quot;g&quot;);\n\n        //Check if the level was successfull\n        if (co2SavingsScore&gt;= neededCO2SavingsScore) {\n            //Level passed\n            binding.imageViewCloseSymbol.setVisibility(View.INVISIBLE);\n        }\n        else {\n            //Level not passed\n            binding.imageViewCheckmark.setVisibility(View.INVISIBLE);\n            binding.imageViewRepeatSymbol.setClickable(false);\n            binding.imageViewRepeatSymbol.setAlpha(0.5f);\n            binding.textViewNextLevel.setAlpha(0.5f);\n        }\n\n        //Initialize highScore array list and the RV adapter\n        arrayList_HighScore = new ArrayList&lt;RV_Item_Highscore&gt;();\n        adapter_HighScore = new RV_Adapter_Highscore(arrayList_HighScore);\n\n\n        //Firebase components\n        String FIREBASE_URL = &quot;https://heatinggamehighscores-default-rtdb.europe-west1.firebasedatabase.app/&quot;;\n\n        if (FirebaseApp.getApps(getContext()).isEmpty()) {\n            FirebaseOptions options = new FirebaseOptions.Builder()\n                    .setApplicationId(&quot;1:248974012708:android:3f93234ba2066ed41643b1&quot;)\n                    .setDatabaseUrl(FIREBASE_URL)\n\n                    .build();\n\n            FirebaseApp.initializeApp(getContext(), options);\n        }\n        rootRef_Firebase = FirebaseDatabase.getInstance(FIREBASE_URL).getReference();\n        rootRef_Firebase.keepSynced(true);\n\n\n        // Initialize ViewModel\n        viewModel = new ViewModelProvider(this).get(ViewModel_DialogFR_LevelEnd.class);\n        viewModel.setFirebaseNodeLevel(currentLevel);\n        viewModel.setPastTimeMillis(pastDaysForDisplayingScores);\n\n        liveData = viewModel.getData();\n        Log.e(&quot;Tag_Dialog&quot;, &quot;DialogFragment: ViewModel Get Data Called&quot;);\n        liveData.observe(this, new Observer&lt;DataSnapshot&gt;() {\n\n            @Override\n            public void onChanged(@Nullable DataSnapshot dataSnapshot) {\n                Log.e(&quot;Tag_Dialog&quot;, &quot;DialogFragment: onChanged Called&quot;);\n                if (dataSnapshot != null) {\n\n                    Log.e(&quot;Tag_Dialog&quot;, &quot;DialogFragment: DataSnapshot !=null&quot;);\n\n                    arrayList_HighScore.clear();\n\n\n                    for(DataSnapshot ds: dataSnapshot.getChildren()) {\n                        Log.e(&quot;Tag_Dialog&quot;, &quot;DialogFragment: DataSnapshot iteration&quot;);\n                        if (ds != null) {\n\n                             String name = &quot;&quot;;\n                             int co2Score = 0;\n                             String date = &quot;&quot;;\n                             int level = 0;\n\n                             int position = 0;\n\n                            // update the UI here with values in the snapshot\n                            if(ds.child(FIREBASE_NAME).getValue(String.class)!=null) {\n                                name = ds.child(FIREBASE_NAME).getValue(String.class);\n                            }\n\n                            if(ds.child(FIREBASE_CO_2_SCORE).getValue(Integer.class)!=null) {\n                                co2Score = ds.child(FIREBASE_CO_2_SCORE).getValue(Integer.class);\n                            }\n\n                            if(ds.child(FIREBASE_LEVEL).getValue(Integer.class)!=null) {\n                                level = ds.child(FIREBASE_LEVEL).getValue(Integer.class);\n                            }\n\n\n                            if(ds.child(FIREBASE_DATE).getValue(String.class)!=null) {\n                                date =  ds.child(FIREBASE_DATE).getValue(String.class);\n                            }\n                            arrayList_HighScore.add(new RV_Item_Highscore(name, co2Score, date, level, position));\n\n                        }\n                    }\n                }\n            }// end onChange\n        }); //end observe    \n\n        buildRecyclerView();\n\n        return binding.getRoot();    \n    }\n\n    public void buildRecyclerView() {\n        recyclerView_HighScore = binding.rvHighScoreStatisticsToBeDisplayed;\n        recyclerView_HighScore.setHasFixedSize(true);\n        layoutManager_HighScore = new LinearLayoutManager(this.getContext());    \n\n        recyclerView_HighScore.setLayoutManager(layoutManager_HighScore);\n        recyclerView_HighScore.setAdapter(adapter_HighScore);\n    }\n    \n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);    \n    }    \n\n    @Override\n    public void onClick(View view) {\n        if (view instanceof ToggleButton) {\n            if (binding.tbuttonHighScoreLastWeek.isChecked()) {\n                this.pastDaysForDisplayingScores = 7;\n            }\n            if (binding.tbuttonHighScoreLastMonth.isChecked()) {\n                this.pastDaysForDisplayingScores = 30;\n            }\n            if (binding.tbuttonHighScoreOverall.isChecked()) {\n                this.pastDaysForDisplayingScores = 10000;\n            }\n            viewModel.setPastTimeMillis(pastDaysForDisplayingScores);\n        }\n    }\n}\n</code></pre>\n<p>and the corresponding ViewModel and LiveData class:</p>\n<pre><code>public class ViewModel_DialogFR_LevelEnd extends ViewModel {        \n    public static final String FIREBASE_URL = &quot;https://heatinggamehighscores-default-rtdb.europe-west1.firebasedatabase.app/&quot;;\n    public static String FIREBASE_NODE_LEVEL = &quot;&quot;;\n    public static final String FIREBASE_DATE_IN_MILLISECONDS = &quot;date_in_milliseconds&quot;;\n\n    private MutableLiveData&lt;DataSnapshot&gt; data = new MutableLiveData&lt;DataSnapshot&gt;();\n\n    private static long pastTimeMillis;\n\n    public void setFirebaseNodeLevel(int levelNumber) {\n        FIREBASE_NODE_LEVEL = &quot;level_&quot; + levelNumber;\n    }\n\n    public void setPastTimeMillis (int pastDaysForDisplayingScores) {\n        pastTimeMillis = System.currentTimeMillis() - (long) (pastDaysForDisplayingScores * 24L * 60 * 60 * 1000);\n        data.postValue(null);\n    }\n\n    public LiveData&lt;DataSnapshot&gt; getData() {\n        Log.e(&quot;Tag_Dialog&quot;, &quot;ViewModel: getData called&quot;);\n          Query QUERY_DATE = FirebaseDatabase.getInstance(FIREBASE_URL).getReference().child(FIREBASE_NODE_LEVEL).orderByChild(FIREBASE_DATE_IN_MILLISECONDS).startAt(pastTimeMillis);\n        Log.e(&quot;Tag_Dialog&quot;, &quot;ViewModel: Query =&quot; + QUERY_DATE);\n        return data;\n    }\n}\n</code></pre>\n<p>The Firebase Realtime Database looks like this:\n<a href=\"https://i.stack.imgur.com/h2ILZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h2ILZ.png\" alt=\"enter image description here\" /></a></p>\n<p>Actually what I don't understand is why the <code>onChanged</code> method is only called once? Even when I change the values of the database, the onChanged method is not called again, altough I thought with liveData the method should be called every time when the database changes. Further, I don't understand why the <code>dataSnapshot</code> is always <code>null</code> altough the query in ViewModel <code>Query QUERY_DATE = FirebaseDatabase.getInstance(FIREBASE_URL).getReference().child(FIREBASE_NODE_LEVEL).orderByChild(FIREBASE_DATE_IN_MILLISECONDS).startAt(pastTimeMillis);</code> should return something?</p>\n<p><strong>Reminder</strong>: Does someone have a solution for this issue?</p>\n"},{"tags":["java","xml","spring","mockito"],"comments":[{"score":2,"post_type":"question","creation_date":1688994508,"post_id":76653818,"comment_id":135146000,"body_markdown":"Specify the type of the constructor. Currently it will use a `String` add `type=&quot;java.lang.Class&quot;` that way it will call `Mockito.mock(Class)` intead of `Mockito.mock(String, varargs)`.","link":"https://stackoverflow.com/questions/76653818/xml-based-bean-configuration-with-mockito-5-1#comment135146000_76653818","body":"Specify the type of the constructor. Currently it will use a <code>String</code> add <code>type=&quot;java.lang.Class&quot;</code> that way it will call <code>Mockito.mock(Class)</code> intead of <code>Mockito.mock(String, varargs)</code>."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702805303,"creation_date":1702805303,"answer_id":77673897,"question_id":76653818,"body_markdown":"I had the same issue when upgrading from `Mockito 4.8.1` to `Mockito 5.7.0`&lt;br&gt;\r\nTo fix it you have to add the `type=java.lang.Class` attribute to the `constructor-arg` tag:\r\n\r\n    &lt;bean id=&quot;apiClient&quot; class=&quot;org.mockito.Mockito&quot; factory-method=&quot;mock&quot;&gt;\r\n         &lt;constructor-arg type=&quot;java.lang.Class&quot; value=&quot;org.example.ApiClient&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nHope this help\r\n\r\nRegards","link":"https://stackoverflow.com/questions/76653818/xml-based-bean-configuration-with-mockito-5-1/77673897#77673897","title":"XML-based bean configuration with mockito 5.1","body":"<p>I had the same issue when upgrading from <code>Mockito 4.8.1</code> to <code>Mockito 5.7.0</code><br>\nTo fix it you have to add the <code>type=java.lang.Class</code> attribute to the <code>constructor-arg</code> tag:</p>\n<pre><code>&lt;bean id=&quot;apiClient&quot; class=&quot;org.mockito.Mockito&quot; factory-method=&quot;mock&quot;&gt;\n     &lt;constructor-arg type=&quot;java.lang.Class&quot; value=&quot;org.example.ApiClient&quot; /&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>Hope this help</p>\n<p>Regards</p>\n"}],"comment_count":1,"is_answered":false,"view_count":661,"answer_count":1,"score":1,"last_activity_date":1702805303,"creation_date":1688992666,"last_edit_date":1689085153,"question_id":76653818,"body_markdown":"I want to update Mockito in my Spring project, but I get some errors with Mockito 5.1.0 or later.\r\n\r\nIt seems that Mockito have added new factory methods with varargs and my XML-based configuration does not select an old method.\r\n\r\nI have two questions.\r\n\r\n1. In this case (see below for details), why does Spring select another method?\r\n2. How do I tell Spring to call the expected method which is overloaded?\r\n\r\n---\r\n\r\nHere is a sample code and config. (Full: https://github.com/hmmnrst/spring-experiments/tree/mockito-bean )\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@ContextConfiguration(locations = &quot;classpath:testApplicationContext.xml&quot;)\r\npublic class MainTest {\r\n\r\n\t@Autowired\r\n\tApiClient apiClient;\r\n\r\n\t@Test\r\n\tpublic void test() {\r\n\t\tassertThat(apiClient).isNotNull();\r\n\t\tSystem.out.println(apiClient);\r\n\t}\r\n}\r\n```\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n                           http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\r\n\r\n\t&lt;bean id=&quot;apiClient&quot; class=&quot;org.mockito.Mockito&quot; factory-method=&quot;mock&quot;&gt;\r\n\t\t&lt;constructor-arg value=&quot;org.example.ApiClient&quot; /&gt;\r\n\t&lt;/bean&gt;\r\n&lt;/beans&gt;\r\n```\r\n\r\nWhen I use Mockito 5.0.0, this test passes.\r\nWhen I use Mockito 5.1.0, this test fails with following exceptions.\r\n\r\n```txt\r\nJul 10, 2023 9:02:27 PM org.springframework.context.support.AbstractApplicationContext refresh\r\nWARNING: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;apiClient&#39; defined in class path resource [testApplicationContext.xml]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.lang.Object]: Factory method &#39;mock&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Please don&#39;t pass any values here. Java will detect class automagically.\r\nJul 10, 2023 9:02:27 PM org.springframework.test.context.TestContextManager prepareTestInstance\r\nSEVERE: Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2de23121] to prepare test instance [org.example.MainTest@1d207fad]\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:98)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118)\r\n\tat org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:50)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\r\n\tat org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;apiClient&#39; defined in class path resource [testApplicationContext.xml]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.lang.Object]: Factory method &#39;mock&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Please don&#39;t pass any values here. Java will detect class automagically.\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:920)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n\tat org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:127)\r\n\tat org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)\r\n\tat org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:276)\r\n\tat org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:244)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:141)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:90)\r\n\t... 73 more\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.lang.Object]: Factory method &#39;mock&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Please don&#39;t pass any values here. Java will detect class automagically.\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n\t... 91 more\r\nCaused by: java.lang.IllegalArgumentException: Please don&#39;t pass any values here. Java will detect class automagically.\r\n\tat org.mockito.Mockito.mock(Mockito.java:1986)\r\n\tat org.mockito.Mockito.mock(Mockito.java:1940)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n\t... 92 more\r\n```\r\n","link":"https://stackoverflow.com/questions/76653818/xml-based-bean-configuration-with-mockito-5-1","title":"XML-based bean configuration with mockito 5.1","body":"<p>I want to update Mockito in my Spring project, but I get some errors with Mockito 5.1.0 or later.</p>\n<p>It seems that Mockito have added new factory methods with varargs and my XML-based configuration does not select an old method.</p>\n<p>I have two questions.</p>\n<ol>\n<li>In this case (see below for details), why does Spring select another method?</li>\n<li>How do I tell Spring to call the expected method which is overloaded?</li>\n</ol>\n<hr />\n<p>Here is a sample code and config. (Full: <a href=\"https://github.com/hmmnrst/spring-experiments/tree/mockito-bean\" rel=\"nofollow noreferrer\">https://github.com/hmmnrst/spring-experiments/tree/mockito-bean</a> )</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(locations = &quot;classpath:testApplicationContext.xml&quot;)\npublic class MainTest {\n\n    @Autowired\n    ApiClient apiClient;\n\n    @Test\n    public void test() {\n        assertThat(apiClient).isNotNull();\n        System.out.println(apiClient);\n    }\n}\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n                           http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;\n\n    &lt;bean id=&quot;apiClient&quot; class=&quot;org.mockito.Mockito&quot; factory-method=&quot;mock&quot;&gt;\n        &lt;constructor-arg value=&quot;org.example.ApiClient&quot; /&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n<p>When I use Mockito 5.0.0, this test passes.\nWhen I use Mockito 5.1.0, this test fails with following exceptions.</p>\n<pre><code>Jul 10, 2023 9:02:27 PM org.springframework.context.support.AbstractApplicationContext refresh\nWARNING: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'apiClient' defined in class path resource [testApplicationContext.xml]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.lang.Object]: Factory method 'mock' threw exception; nested exception is java.lang.IllegalArgumentException: Please don't pass any values here. Java will detect class automagically.\nJul 10, 2023 9:02:27 PM org.springframework.test.context.TestContextManager prepareTestInstance\nSEVERE: Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@2de23121] to prepare test instance [org.example.MainTest@1d207fad]\njava.lang.IllegalStateException: Failed to load ApplicationContext\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:98)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:118)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)\n    at java.base/java.util.Optional.orElseGet(Optional.java:364)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:50)\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)\n    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)\n    at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'apiClient' defined in class path resource [testApplicationContext.xml]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.lang.Object]: Factory method 'mock' threw exception; nested exception is java.lang.IllegalArgumentException: Please don't pass any values here. Java will detect class automagically.\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:920)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:127)\n    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:60)\n    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:276)\n    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:244)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:141)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:90)\n    ... 73 more\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.lang.Object]: Factory method 'mock' threw exception; nested exception is java.lang.IllegalArgumentException: Please don't pass any values here. Java will detect class automagically.\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n    ... 91 more\nCaused by: java.lang.IllegalArgumentException: Please don't pass any values here. Java will detect class automagically.\n    at org.mockito.Mockito.mock(Mockito.java:1986)\n    at org.mockito.Mockito.mock(Mockito.java:1940)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    ... 92 more\n</code></pre>\n"},{"tags":["java","spring","graalvm","graalvm-native-image","spring-native"],"comments":[{"score":0,"post_type":"question","creation_date":1694990308,"post_id":77123837,"comment_id":135960561,"body_markdown":"A quick search resulted in, for example [this file (`github.com`)](https://github.com/spring-projects/spring-framework/blob/HEAD/spring-core/src/main/java/org/springframework/aot/nativex/feature/PreComputeFieldFeature.java#L23) that uses `org.graalvm.nativeimage.hosted.Feature`.","link":"https://stackoverflow.com/questions/77123837/does-spring-implement-graal-specific-apis-like-imagesingletons-feature-etc#comment135960561_77123837","body":"A quick search resulted in, for example <a href=\"https://github.com/spring-projects/spring-framework/blob/HEAD/spring-core/src/main/java/org/springframework/aot/nativex/feature/PreComputeFieldFeature.java#L23\" rel=\"nofollow noreferrer\">this file (<code>github.com</code>)</a> that uses <code>org.graalvm.nativeimage.hosted.Feature</code>."},{"score":1,"post_type":"question","creation_date":1702395669,"post_id":77123837,"comment_id":136889415,"body_markdown":"Some convo happening in https://twitter.com/kaqqao/status/1734598071437123619","link":"https://stackoverflow.com/questions/77123837/does-spring-implement-graal-specific-apis-like-imagesingletons-feature-etc#comment136889415_77123837","body":"Some convo happening in <a href=\"https://twitter.com/kaqqao/status/1734598071437123619\" rel=\"nofollow noreferrer\">twitter.com/kaqqao/status/1734598071437123619</a>"}],"comment_count":2,"is_answered":false,"view_count":61,"answer_count":0,"score":0,"last_activity_date":1702769773,"creation_date":1694989882,"last_edit_date":1702769773,"question_id":77123837,"body_markdown":"When I search through Spring&#39;s entire repository, there are pretty much no references to [`ImageSingletons`](https://www.graalvm.org/sdk/javadoc/org/graalvm/nativeimage/ImageSingletons.html), [`Feature`](https://www.graalvm.org/sdk/javadoc/org/graalvm/nativeimage/hosted/Feature.html) (save for 1), \r\n[`@AutomaticFeature`](https://www.graalvm.org/sdk/javadoc/com/oracle/svm/core/annotate/AutomaticFeature.html), or anything else I&#39;d expect to see from something targeting GraalVM.\r\n\r\nCan I still add `Feature`s myself? Can I expect Graal&#39;s APIs like `ImageSingletons` to work?","link":"https://stackoverflow.com/questions/77123837/does-spring-implement-graal-specific-apis-like-imagesingletons-feature-etc","title":"Does Spring implement Graal specific APIs like ImageSingletons, Feature etc?","body":"<p>When I search through Spring's entire repository, there are pretty much no references to <a href=\"https://www.graalvm.org/sdk/javadoc/org/graalvm/nativeimage/ImageSingletons.html\" rel=\"nofollow noreferrer\"><code>ImageSingletons</code></a>, <a href=\"https://www.graalvm.org/sdk/javadoc/org/graalvm/nativeimage/hosted/Feature.html\" rel=\"nofollow noreferrer\"><code>Feature</code></a> (save for 1),\n<a href=\"https://www.graalvm.org/sdk/javadoc/com/oracle/svm/core/annotate/AutomaticFeature.html\" rel=\"nofollow noreferrer\"><code>@AutomaticFeature</code></a>, or anything else I'd expect to see from something targeting GraalVM.</p>\n<p>Can I still add <code>Feature</code>s myself? Can I expect Graal's APIs like <code>ImageSingletons</code> to work?</p>\n"},{"tags":["java","spring-boot","scheduler"],"comments":[{"score":0,"post_type":"question","creation_date":1674121648,"post_id":75163910,"comment_id":132648737,"body_markdown":"it looks like scheduler is not getting saved in db, that&#39;s why after restart it unable to find it.","link":"https://stackoverflow.com/questions/75163910/schedule-tasks-with-spring-boot-and-db-scheduler-which-run-after-server-restart#comment132648737_75163910","body":"it looks like scheduler is not getting saved in db, that&#39;s why after restart it unable to find it."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1697012492,"creation_date":1697012492,"answer_id":77271339,"question_id":75163910,"body_markdown":"try to use the SchedulerClient bean , that have a schedule method too..\r\nbut also show how you defined your table in db","link":"https://stackoverflow.com/questions/75163910/schedule-tasks-with-spring-boot-and-db-scheduler-which-run-after-server-restart/77271339#77271339","title":"Schedule tasks with Spring boot and db-scheduler which run after server restart","body":"<p>try to use the SchedulerClient bean , that have a schedule method too..\nbut also show how you defined your table in db</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1702760774,"creation_date":1702760774,"answer_id":77672505,"question_id":75163910,"body_markdown":"The problem is that when the scheduler initializes, the scheduler doesn&#39;t have the adHocTask registered, like you did here:\r\n\r\n            final Scheduler scheduler = Scheduler\r\n                .create(dataSource, adhocTask) &lt;------------\r\n                .registerShutdownHook()\r\n                .build();\r\n\r\nTherefore, when the scheduler initializes with the server and finds the task in its table, it doesn&#39;t know what to do with a task of this type.\r\n\r\nThe declaration of `adHocTask` should be added as part of the initialization of the server. For example, if you declare your scheduler in the initalization of the server you should register the adHocTask into it like you are doing in this controller.\r\n\r\nIf you are using springboot, make adHocTask a bean inside a configuration class and db-scheduler will auto-detect it, like this:\r\n\r\n    @Configuration\r\n    public class MyConfigClass {\r\n            \r\n\t  @Bean\r\n      private OneTimeTask&lt;TaskDefinition&gt; adHocTask() {\r\n        OneTimeTask&lt;TaskDefinition&gt; adhocTask = Tasks.oneTime(&quot;ad-hoc-task-test&quot;, TaskDefinition.class)\r\n                .execute((inst, ctx) -&gt; {\r\n                  System.out.println(&quot;Executed! Custom data, Id: &quot; + inst.getData());\r\n                });\r\n      }\r\n\t\t\t\r\n    }","link":"https://stackoverflow.com/questions/75163910/schedule-tasks-with-spring-boot-and-db-scheduler-which-run-after-server-restart/77672505#77672505","title":"Schedule tasks with Spring boot and db-scheduler which run after server restart","body":"<p>The problem is that when the scheduler initializes, the scheduler doesn't have the adHocTask registered, like you did here:</p>\n<pre><code>        final Scheduler scheduler = Scheduler\n            .create(dataSource, adhocTask) &lt;------------\n            .registerShutdownHook()\n            .build();\n</code></pre>\n<p>Therefore, when the scheduler initializes with the server and finds the task in its table, it doesn't know what to do with a task of this type.</p>\n<p>The declaration of <code>adHocTask</code> should be added as part of the initialization of the server. For example, if you declare your scheduler in the initalization of the server you should register the adHocTask into it like you are doing in this controller.</p>\n<p>If you are using springboot, make adHocTask a bean inside a configuration class and db-scheduler will auto-detect it, like this:</p>\n<pre><code>@Configuration\npublic class MyConfigClass {\n        \n  @Bean\n  private OneTimeTask&lt;TaskDefinition&gt; adHocTask() {\n    OneTimeTask&lt;TaskDefinition&gt; adhocTask = Tasks.oneTime(&quot;ad-hoc-task-test&quot;, TaskDefinition.class)\n            .execute((inst, ctx) -&gt; {\n              System.out.println(&quot;Executed! Custom data, Id: &quot; + inst.getData());\n            });\n  }\n        \n}\n</code></pre>\n"}],"comment_count":1,"is_answered":true,"view_count":701,"answer_count":2,"score":0,"last_activity_date":1702760774,"creation_date":1674067405,"last_edit_date":1674119415,"question_id":75163910,"body_markdown":"With Spring boot and kagkarlsson db-scheduler configured, through a rest request I create a dynamic OneTimeTask and it gets scheduled and works. However, if the task is scheduled in future say 70s, and I restart server, then I see following message in logs and the task is not run:\r\n\r\n```\r\n2023-01-18 18:29:27.527  WARN 1 --- [pool-4-thread-1] c.g.k.scheduler.jdbc.JdbcTaskRepository  : Failed to find implementation for task with name &#39;ad-hoc-task-test&#39;. Execution will be excluded from due. Either delete the execution from the database, or add an implementation for it. The scheduler may be configured to automatically delete unresolved tasks after a certain period of time.\r\n```\r\n\r\nRestController:\r\n```\r\n @PostMapping(path = &quot;/dbsched&quot;, consumes = &quot;application/json&quot;, produces = &quot;application/json&quot;)\r\n    public void dbScheduleATask(@RequestBody TaskDefinition taskDefinition) {\r\n        OneTimeTask&lt;TaskDefinition&gt; adhocTask = Tasks.oneTime(&quot;ad-hoc-task-test&quot;, TaskDefinition.class)\r\n                .execute((inst, ctx) -&gt; {\r\n                    System.out.println(&quot;Executed! Custom data, Id: &quot; + inst.getData());\r\n                });\r\n\r\n        final Scheduler scheduler = Scheduler\r\n                .create(dataSource, adhocTask)\r\n                .registerShutdownHook()\r\n                .build();\r\n\r\n        scheduler.start();\r\n\r\n        TaskDefinition td = new TaskDefinition();\r\n        td.setData(&quot;test&quot;);\r\n\r\n        scheduler.schedule(adhocTask.instance(&quot;1045&quot;, td),\r\n                Instant.now().plusSeconds(70));\r\n\r\n        System.out.println(&quot;Run job...&quot;);\r\n    }\r\n```\r\n\r\nPlease advise how I can get the task to run automatically after server restart.\r\n\r\nThanks.","link":"https://stackoverflow.com/questions/75163910/schedule-tasks-with-spring-boot-and-db-scheduler-which-run-after-server-restart","title":"Schedule tasks with Spring boot and db-scheduler which run after server restart","body":"<p>With Spring boot and kagkarlsson db-scheduler configured, through a rest request I create a dynamic OneTimeTask and it gets scheduled and works. However, if the task is scheduled in future say 70s, and I restart server, then I see following message in logs and the task is not run:</p>\n<pre><code>2023-01-18 18:29:27.527  WARN 1 --- [pool-4-thread-1] c.g.k.scheduler.jdbc.JdbcTaskRepository  : Failed to find implementation for task with name 'ad-hoc-task-test'. Execution will be excluded from due. Either delete the execution from the database, or add an implementation for it. The scheduler may be configured to automatically delete unresolved tasks after a certain period of time.\n</code></pre>\n<p>RestController:</p>\n<pre><code> @PostMapping(path = &quot;/dbsched&quot;, consumes = &quot;application/json&quot;, produces = &quot;application/json&quot;)\n    public void dbScheduleATask(@RequestBody TaskDefinition taskDefinition) {\n        OneTimeTask&lt;TaskDefinition&gt; adhocTask = Tasks.oneTime(&quot;ad-hoc-task-test&quot;, TaskDefinition.class)\n                .execute((inst, ctx) -&gt; {\n                    System.out.println(&quot;Executed! Custom data, Id: &quot; + inst.getData());\n                });\n\n        final Scheduler scheduler = Scheduler\n                .create(dataSource, adhocTask)\n                .registerShutdownHook()\n                .build();\n\n        scheduler.start();\n\n        TaskDefinition td = new TaskDefinition();\n        td.setData(&quot;test&quot;);\n\n        scheduler.schedule(adhocTask.instance(&quot;1045&quot;, td),\n                Instant.now().plusSeconds(70));\n\n        System.out.println(&quot;Run job...&quot;);\n    }\n</code></pre>\n<p>Please advise how I can get the task to run automatically after server restart.</p>\n<p>Thanks.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","spring-data-jpa"],"comments":[{"score":0,"post_type":"question","creation_date":1686569212,"post_id":76456197,"comment_id":134811681,"body_markdown":"References:\nhttps://www.baeldung.com/spring-jpa-like-queries\nRefer Section 4.1, 4.2","link":"https://stackoverflow.com/questions/76456197/springboot-jpa-hql-like-query-is-not-working-after-upgrade-to-spring-boot-3-1-0#comment134811681_76456197","body":"References: <a href=\"https://www.baeldung.com/spring-jpa-like-queries\" rel=\"nofollow noreferrer\">baeldung.com/spring-jpa-like-queries</a> Refer Section 4.1, 4.2"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1686581508,"post_id":76457688,"comment_id":134814625,"body_markdown":"Thanks for your response.\nYes, the above query without % symbol is working.\nHowever, our objective is to use &quot;%title%&quot; query. So that, query search for a sub-string title containing in the db column.\nIt is not working with %title% in the HQL query","link":"https://stackoverflow.com/questions/76456197/springboot-jpa-hql-like-query-is-not-working-after-upgrade-to-spring-boot-3-1-0/76457688#comment134814625_76457688","body":"Thanks for your response. Yes, the above query without % symbol is working. However, our objective is to use &quot;%title%&quot; query. So that, query search for a sub-string title containing in the db column. It is not working with %title% in the HQL query"},{"score":0,"post_type":"answer","creation_date":1686648664,"post_id":76457688,"comment_id":134824515,"body_markdown":"What if you will try this approach &#39;percent signs must be used outside the query string, unlike traditional SQL.&#39; . @Query(&quot;SELECT m FROM Movie m WHERE m.title LIKE &#39;:percent:title:percent&#39;&quot;)\nList&lt;Movie&gt; searchByTitleLike(@Param(&quot;title&quot;) String title, @Param(&quot;percent&quot;) String percentage);","link":"https://stackoverflow.com/questions/76456197/springboot-jpa-hql-like-query-is-not-working-after-upgrade-to-spring-boot-3-1-0/76457688#comment134824515_76457688","body":"What if you will try this approach &#39;percent signs must be used outside the query string, unlike traditional SQL.&#39; . @Query(&quot;SELECT m FROM Movie m WHERE m.title LIKE &#39;:percent:title:percent&#39;&quot;) List&lt;Movie&gt; searchByTitleLike(@Param(&quot;title&quot;) String title, @Param(&quot;percent&quot;) String percentage);"},{"score":0,"post_type":"answer","creation_date":1686823095,"post_id":76457688,"comment_id":134853517,"body_markdown":"But this was working fine in the previous Spring Boot Verison 3.0.6. Given the same \n\nHQL Query\n\n@Query(&quot;SELECT m FROM Movie m WHERE m.title LIKE %:title%&quot;)\nList&lt;Movie&gt; searchByTitleLike(@Param(&quot;title&quot;) String title);\n\nThere is nothing wrong in the HQL query.\nThis is a SpringBoot Upgrade issue.","link":"https://stackoverflow.com/questions/76456197/springboot-jpa-hql-like-query-is-not-working-after-upgrade-to-spring-boot-3-1-0/76457688#comment134853517_76457688","body":"But this was working fine in the previous Spring Boot Verison 3.0.6. Given the same   HQL Query  @Query(&quot;SELECT m FROM Movie m WHERE m.title LIKE %:title%&quot;) List&lt;Movie&gt; searchByTitleLike(@Param(&quot;title&quot;) String title);  There is nothing wrong in the HQL query. This is a SpringBoot Upgrade issue."}],"comment_count":3,"score":0,"last_activity_date":1686580390,"creation_date":1686580390,"answer_id":76457688,"question_id":76456197,"body_markdown":"**How i know % is a special character in a format string that indicates that a format specifier follows.** \r\n\r\nTry it:\r\n\r\n    @Query(&quot;SELECT m FROM Movie m WHERE m.title LIKE :title&quot;)\r\n    List&lt;Movie&gt; searchByTitleLike(@Param(&quot;title&quot;) String title);\r\n\r\n","link":"https://stackoverflow.com/questions/76456197/springboot-jpa-hql-like-query-is-not-working-after-upgrade-to-spring-boot-3-1-0/76457688#76457688","title":"SpringBoot JPA HQL LIKE query is not working after upgrade to Spring-boot 3.1.0, JDK17 from Spring boot 3.0.6","body":"<p><strong>How i know % is a special character in a format string that indicates that a format specifier follows.</strong></p>\n<p>Try it:</p>\n<pre><code>@Query(&quot;SELECT m FROM Movie m WHERE m.title LIKE :title&quot;)\nList&lt;Movie&gt; searchByTitleLike(@Param(&quot;title&quot;) String title);\n</code></pre>\n"},{"comment_count":0,"score":1,"last_activity_date":1688066098,"last_edit_date":1688066098,"creation_date":1686908208,"answer_id":76488872,"question_id":76456197,"body_markdown":"**Given this HQL query**\r\n\r\n    @Query(&quot;SELECT m FROM Movie m WHERE m.title LIKE %:title%&quot;)\r\n\r\nSpringBoot 3.0.7 Converted HQL Query for printing HQL Query in Logs:\r\n\r\n    SELECT m FROM Movie m WHERE m.title LIKE :title\r\n\r\nNote: here Spring Boot 3.0.7 library is stripping of % symbol before printing to logs.\r\n\r\nSpringBoot 3.1.0 Converted HQL Query for printing HQL query in Logs:\r\n\r\n    SELECT m \r\n    FROM Movie m \r\n    WHERE m.title LIKE CONCAT(&#39;%&#39;, :title, &#39;%&#39;)\r\n\r\nBut % symbol is used as format specifier when format() method is called before printing to logs. Refer Java.util.Formatter.format() method. \r\n\r\nSingle % symbol in string argument to format() method throws conversion exception.\r\n\r\n**Workarounds**\r\n\r\n**Option #1** \r\n\r\nAdd the INFO log level to package &#39;org.hibernate.orm.query.hql&#39; in the application.properties file to avoid the exception on the application start up during bean creation time.\r\n\r\n    logging.level.org.hibernate.orm.query.hql=INFO\r\n\r\n**Option #2** \r\n\r\nEscape the % symbol in the given HQL query with another % symbol as shown below to avoid the exception on the application start up during bean creation time.\r\n\r\n    SELECT m \r\n    FROM Movie m \r\n    WHERE m.title LIKE CONCAT(&#39;%%&#39;, :title, &#39;%%&#39;)\r\n\r\nLooks like it is bug in the Spring Boot 3.1.0 version.\r\n","link":"https://stackoverflow.com/questions/76456197/springboot-jpa-hql-like-query-is-not-working-after-upgrade-to-spring-boot-3-1-0/76488872#76488872","title":"SpringBoot JPA HQL LIKE query is not working after upgrade to Spring-boot 3.1.0, JDK17 from Spring boot 3.0.6","body":"<p><strong>Given this HQL query</strong></p>\n<pre><code>@Query(&quot;SELECT m FROM Movie m WHERE m.title LIKE %:title%&quot;)\n</code></pre>\n<p>SpringBoot 3.0.7 Converted HQL Query for printing HQL Query in Logs:</p>\n<pre><code>SELECT m FROM Movie m WHERE m.title LIKE :title\n</code></pre>\n<p>Note: here Spring Boot 3.0.7 library is stripping of % symbol before printing to logs.</p>\n<p>SpringBoot 3.1.0 Converted HQL Query for printing HQL query in Logs:</p>\n<pre><code>SELECT m \nFROM Movie m \nWHERE m.title LIKE CONCAT('%', :title, '%')\n</code></pre>\n<p>But % symbol is used as format specifier when format() method is called before printing to logs. Refer Java.util.Formatter.format() method.</p>\n<p>Single % symbol in string argument to format() method throws conversion exception.</p>\n<p><strong>Workarounds</strong></p>\n<p><strong>Option #1</strong></p>\n<p>Add the INFO log level to package 'org.hibernate.orm.query.hql' in the application.properties file to avoid the exception on the application start up during bean creation time.</p>\n<pre><code>logging.level.org.hibernate.orm.query.hql=INFO\n</code></pre>\n<p><strong>Option #2</strong></p>\n<p>Escape the % symbol in the given HQL query with another % symbol as shown below to avoid the exception on the application start up during bean creation time.</p>\n<pre><code>SELECT m \nFROM Movie m \nWHERE m.title LIKE CONCAT('%%', :title, '%%')\n</code></pre>\n<p>Looks like it is bug in the Spring Boot 3.1.0 version.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1691496687,"creation_date":1691496687,"answer_id":76859441,"question_id":76456197,"body_markdown":"The given issue is fixed in the latest version of Spring Boot 3.1.2 without doing any code changes for like query.","link":"https://stackoverflow.com/questions/76456197/springboot-jpa-hql-like-query-is-not-working-after-upgrade-to-spring-boot-3-1-0/76859441#76859441","title":"SpringBoot JPA HQL LIKE query is not working after upgrade to Spring-boot 3.1.0, JDK17 from Spring boot 3.0.6","body":"<p>The given issue is fixed in the latest version of Spring Boot 3.1.2 without doing any code changes for like query.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1702757567,"creation_date":1702757567,"answer_id":77672349,"question_id":76456197,"body_markdown":"It still not working in Spring Boot 3.2.0 version. I hadn&#39;t this problem in 2.7.5 version.\r\n\r\nIf somebody has problem with criteriaBuilder problem, I fixed this with adding third parameter to `criteriaBuilder.like(foo, foo, &#39;/&#39;)`\r\n\r\nNow hibernate adds `ESCAPE` to `like` clause","link":"https://stackoverflow.com/questions/76456197/springboot-jpa-hql-like-query-is-not-working-after-upgrade-to-spring-boot-3-1-0/77672349#77672349","title":"SpringBoot JPA HQL LIKE query is not working after upgrade to Spring-boot 3.1.0, JDK17 from Spring boot 3.0.6","body":"<p>It still not working in Spring Boot 3.2.0 version. I hadn't this problem in 2.7.5 version.</p>\n<p>If somebody has problem with criteriaBuilder problem, I fixed this with adding third parameter to <code>criteriaBuilder.like(foo, foo, '/')</code></p>\n<p>Now hibernate adds <code>ESCAPE</code> to <code>like</code> clause</p>\n"}],"comment_count":1,"is_answered":true,"view_count":992,"answer_count":4,"score":1,"last_activity_date":1702757567,"creation_date":1686569113,"last_edit_date":1686843436,"question_id":76456197,"body_markdown":"Spring Boot 3.1.0 JPA HQL LIKE query is not working after upgrade to **Spring-boot 3.1.0, JDK17** from **Spring boot 3.0.6**\r\n\r\nJPA Like query with named parameters was working fine before upgrade.\r\nBut after upgrading to SpringBoot 3.1.0 getting runtime error.\r\nWe get this error, when we use like operator with % symbol on string column for &#39;like&#39; condition.\r\n\r\nWe can reproduce the issue by mentioning the DEBUG log level for package &quot;org.hibernate.orm.query.hql&quot; in application.properties file.\r\n\r\nlogging.level.org.hibernate.orm.query.hql=DEBUG\r\n\r\n**Note: This query JPA HQL query was working fine using older versions of Spring boot (&lt; 3.0.6). It is upgrade issue.**\r\n\r\nJPA HQL query example using @Query annotation.\r\n```\r\n@Query(&quot;SELECT m FROM Movie m WHERE m.title LIKE %:title%&quot;)\r\nList&lt;Movie&gt; searchByTitleLike(@Param(&quot;title&quot;) String title);\r\n```\r\n\r\nError message/Stack Trace:\r\n\r\n```\r\nCaused by: java.util.UnknownFormatConversionException: Conversion = &#39;&#39;&#39;\r\n\tat java.base/java.util.Formatter.parse(Formatter.java:2750)\r\n\tat java.base/java.util.Formatter.format(Formatter.java:2671)\r\n\tat java.base/java.util.Formatter.format(Formatter.java:2625)\r\n\tat java.base/java.lang.String.format(String.java:4143)\r\n\tat org.jboss.logging.Slf4jLocationAwareLogger.doLogf(Slf4jLocationAwareLogger.java:81)\r\n\tat org.jboss.logging.Logger.logf(Logger.java:2445)\r\n\tat org.jboss.logging.DelegatingBasicLogger.debugf(DelegatingBasicLogger.java:344)\r\n\tat org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:75)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.lambda$interpretHql$2(AbstractSharedSessionContract.java:744)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:141)\r\n\tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:128)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704)\r\n\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360)\r\n\tat jdk.proxy3/jdk.proxy3.$Proxy153.createQuery(Unknown Source)\r\n\tat org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94)\r\n\t... 96 more\r\n```\r\n","link":"https://stackoverflow.com/questions/76456197/springboot-jpa-hql-like-query-is-not-working-after-upgrade-to-spring-boot-3-1-0","title":"SpringBoot JPA HQL LIKE query is not working after upgrade to Spring-boot 3.1.0, JDK17 from Spring boot 3.0.6","body":"<p>Spring Boot 3.1.0 JPA HQL LIKE query is not working after upgrade to <strong>Spring-boot 3.1.0, JDK17</strong> from <strong>Spring boot 3.0.6</strong></p>\n<p>JPA Like query with named parameters was working fine before upgrade.\nBut after upgrading to SpringBoot 3.1.0 getting runtime error.\nWe get this error, when we use like operator with % symbol on string column for 'like' condition.</p>\n<p>We can reproduce the issue by mentioning the DEBUG log level for package &quot;org.hibernate.orm.query.hql&quot; in application.properties file.</p>\n<p>logging.level.org.hibernate.orm.query.hql=DEBUG</p>\n<p><strong>Note: This query JPA HQL query was working fine using older versions of Spring boot (&lt; 3.0.6). It is upgrade issue.</strong></p>\n<p>JPA HQL query example using @Query annotation.</p>\n<pre><code>@Query(&quot;SELECT m FROM Movie m WHERE m.title LIKE %:title%&quot;)\nList&lt;Movie&gt; searchByTitleLike(@Param(&quot;title&quot;) String title);\n</code></pre>\n<p>Error message/Stack Trace:</p>\n<pre><code>Caused by: java.util.UnknownFormatConversionException: Conversion = '''\n    at java.base/java.util.Formatter.parse(Formatter.java:2750)\n    at java.base/java.util.Formatter.format(Formatter.java:2671)\n    at java.base/java.util.Formatter.format(Formatter.java:2625)\n    at java.base/java.lang.String.format(String.java:4143)\n    at org.jboss.logging.Slf4jLocationAwareLogger.doLogf(Slf4jLocationAwareLogger.java:81)\n    at org.jboss.logging.Logger.logf(Logger.java:2445)\n    at org.jboss.logging.DelegatingBasicLogger.debugf(DelegatingBasicLogger.java:344)\n    at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:75)\n    at org.hibernate.internal.AbstractSharedSessionContract.lambda$interpretHql$2(AbstractSharedSessionContract.java:744)\n    at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:141)\n    at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:128)\n    at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:741)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:786)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:704)\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:120)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360)\n    at jdk.proxy3/jdk.proxy3.$Proxy153.createQuery(Unknown Source)\n    at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94)\n    ... 96 more\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"score":0,"post_type":"question","creation_date":1679178452,"post_id":75779014,"comment_id":133675811,"body_markdown":"You should definitely post a [mre] in your question (as text).","link":"https://stackoverflow.com/questions/75779014/mocking-controller-in-sprinng-boot-test#comment133675811_75779014","body":"You should definitely post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in your question (as text)."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1702742836,"post_id":75797583,"comment_id":136932702,"body_markdown":"WireMock is a common tool/framework to test a integration layer from App A to B using REST APi. If you want to test URLs, Response, client config/security thats the way. For Unit-Tests ofcasue you use mocks instead and not wiremock. Just should start on WebMvc/SpringBoot Tests in that context. Just as info.","link":"https://stackoverflow.com/questions/75779014/mocking-controller-in-sprinng-boot-test/75797583#comment136932702_75797583","body":"WireMock is a common tool/framework to test a integration layer from App A to B using REST APi. If you want to test URLs, Response, client config/security thats the way. For Unit-Tests ofcasue you use mocks instead and not wiremock. Just should start on WebMvc/SpringBoot Tests in that context. Just as info."}],"comment_count":1,"score":2,"last_activity_date":1679731994,"last_edit_date":1679731994,"creation_date":1679376357,"answer_id":75797583,"question_id":75779014,"body_markdown":"Rather than creating a mock endpoint, you can try with a wiremock: Program it to have the same URL as the external endpoint and return a mock response.\r\n\r\nSomething like this:\r\n\r\n    WireMockServer wms = new WireMockServer({port $})\r\n    wms.start()\r\n    WireMock.configureFor(url, port)\r\n    WireMock.stubFor(\r\n                WireMock.({http method name})()(WireMock.urlEqualTo(&#39;/&#39;+suffix)). \r\n                    .willReturn(\r\n                        WireMock.aResponse(responseString(=Json string of return object, can be null))\r\n                            .withBody()\r\n                            .withStatus(statusCode)\r\n                )\r\n            );\r\n\r\nThen run your test normally; you won&#39;t need the mock controller. Not the ideal way to unit test stuff but it should get the job done.","link":"https://stackoverflow.com/questions/75779014/mocking-controller-in-sprinng-boot-test/75797583#75797583","title":"Mocking controller in sprinng boot test","body":"<p>Rather than creating a mock endpoint, you can try with a wiremock: Program it to have the same URL as the external endpoint and return a mock response.</p>\n<p>Something like this:</p>\n<pre><code>WireMockServer wms = new WireMockServer({port $})\nwms.start()\nWireMock.configureFor(url, port)\nWireMock.stubFor(\n            WireMock.({http method name})()(WireMock.urlEqualTo('/'+suffix)). \n                .willReturn(\n                    WireMock.aResponse(responseString(=Json string of return object, can be null))\n                        .withBody()\n                        .withStatus(statusCode)\n            )\n        );\n</code></pre>\n<p>Then run your test normally; you won't need the mock controller. Not the ideal way to unit test stuff but it should get the job done.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1702743737,"post_id":77671560,"comment_id":136932785,"body_markdown":"That&#39;s a valid comment but not the problems solution/answer.","link":"https://stackoverflow.com/questions/75779014/mocking-controller-in-sprinng-boot-test/77671560#comment136932785_77671560","body":"That&#39;s a valid comment but not the problems solution/answer."},{"score":0,"post_type":"answer","creation_date":1702744251,"post_id":77671560,"comment_id":136932843,"body_markdown":"i can&#39;t add just comment with my new low reputation. obliged to answer in this area..","link":"https://stackoverflow.com/questions/75779014/mocking-controller-in-sprinng-boot-test/77671560#comment136932843_77671560","body":"i can&#39;t add just comment with my new low reputation. obliged to answer in this area.."}],"comment_count":2,"score":0,"last_activity_date":1702741876,"creation_date":1702741876,"answer_id":77671560,"question_id":75779014,"body_markdown":"in your code example, @ExtendWith(SpringExtension.class) is useless,\r\nas you put @SpringBootTest annotation over WorkflowTest class and it already contains @ExtendWith(SpringExtension.class).","link":"https://stackoverflow.com/questions/75779014/mocking-controller-in-sprinng-boot-test/77671560#77671560","title":"Mocking controller in sprinng boot test","body":"<p>in your code example, @ExtendWith(SpringExtension.class) is useless,\nas you put @SpringBootTest annotation over WorkflowTest class and it already contains @ExtendWith(SpringExtension.class).</p>\n"}],"comment_count":1,"is_answered":true,"view_count":93,"answer_count":2,"score":0,"last_activity_date":1702741876,"creation_date":1679178214,"last_edit_date":1679211548,"question_id":75779014,"body_markdown":"I created a spring boot test, to test one of my endpoints. Here is the workflow I have running instance of my spring boot app and I want to test this endpoint when the spring boot app is running. In the business layer of this endpoint, we have logic calling external endpoint and I created I mock controller, but I&#39;m facing this error: \r\n```\r\n2023-03-19 00:21:22.082  INFO 13788 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring TestDispatcherServlet &#39;dispatcherServlet&#39;\r\n2023-03-19 00:21:22.082  INFO 13788 --- [nio-8080-exec-1] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet &#39;dispatcherServlet&#39;\r\n2023-03-19 00:21:22.087 DEBUG 13788 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : 1 mappings in &#39;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping&#39;\r\n2023-03-19 00:21:22.091 DEBUG 13788 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: none\r\n2023-03-19 00:21:22.094 DEBUG 13788 --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: none\r\n2023-03-19 00:21:22.095 DEBUG 13788 --- [nio-8080-exec-1] o.s.t.web.servlet.TestDispatcherServlet  : enableLoggingRequestDetails=&#39;false&#39;: request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data\r\n2023-03-19 00:21:22.095  INFO 13788 --- [nio-8080-exec-1] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 13 ms\r\n2023-03-19 00:21:22.109 DEBUG 13788 --- [nio-8080-exec-1] o.s.t.web.servlet.TestDispatcherServlet  : POST &quot;/blueprint/callback&quot;, parameters={}\r\n2023-03-19 00:21:22.116 DEBUG 13788 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.vmware.tango.integration.mock.MockBlueprintController#callback()\r\n2023-03-19 00:21:22.116 DEBUG 13788 --- [nio-8080-exec-1] o.s.t.web.servlet.TestDispatcherServlet  : Failed to complete request: java.lang.NullPointerException\r\n2023-03-19 00:21:22.119 ERROR 13788 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause\r\n\r\njava.lang.NullPointerException: null\r\n\tat org.springframework.test.web.servlet.TestDispatcherServlet.getHandler(TestDispatcherServlet.java:125)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1047)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:696)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:779)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n\r\n```\r\n\r\nHere is the test class:\r\n\r\n```\r\n@Log4j2\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest(classes = { WebSecurityConfig.class,  WebConfiguration.class },\r\n        webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@AutoConfigureMockMvc\r\n@AutoConfigureWebClient\r\npublic class WorkflowTest {\r\n}\r\n```\r\n\r\nWebConfugartion.class\r\n\r\n```\r\n@Configuration\r\npublic class WebConfiguration implements WebMvcConfigurer {\r\n\r\n    @Bean\r\n    public ServletWebServerFactory servletWebServerFactory() {\r\n        return new TomcatServletWebServerFactory();\r\n    }\r\n\r\n}\r\n```\r\n\r\nWebSecurityConfig \r\n\r\n```\r\n@EnableWebSecurity\r\n@Configuration\r\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.authorizeRequests()\r\n                .antMatchers(&quot;/**&quot;).permitAll()\r\n                .and()\r\n                .csrf().disable();\r\n    }\r\n\r\n    @Override\r\n    public void configure(WebSecurity web) throws Exception {\r\n        web.ignoring().antMatchers(&quot;/**&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nI want to mention that this class is in separate module","link":"https://stackoverflow.com/questions/75779014/mocking-controller-in-sprinng-boot-test","title":"Mocking controller in sprinng boot test","body":"<p>I created a spring boot test, to test one of my endpoints. Here is the workflow I have running instance of my spring boot app and I want to test this endpoint when the spring boot app is running. In the business layer of this endpoint, we have logic calling external endpoint and I created I mock controller, but I'm facing this error:</p>\n<pre><code>2023-03-19 00:21:22.082  INFO 13788 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring TestDispatcherServlet 'dispatcherServlet'\n2023-03-19 00:21:22.082  INFO 13788 --- [nio-8080-exec-1] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet 'dispatcherServlet'\n2023-03-19 00:21:22.087 DEBUG 13788 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : 1 mappings in 'org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping'\n2023-03-19 00:21:22.091 DEBUG 13788 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: none\n2023-03-19 00:21:22.094 DEBUG 13788 --- [nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: none\n2023-03-19 00:21:22.095 DEBUG 13788 --- [nio-8080-exec-1] o.s.t.web.servlet.TestDispatcherServlet  : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data\n2023-03-19 00:21:22.095  INFO 13788 --- [nio-8080-exec-1] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 13 ms\n2023-03-19 00:21:22.109 DEBUG 13788 --- [nio-8080-exec-1] o.s.t.web.servlet.TestDispatcherServlet  : POST &quot;/blueprint/callback&quot;, parameters={}\n2023-03-19 00:21:22.116 DEBUG 13788 --- [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.vmware.tango.integration.mock.MockBlueprintController#callback()\n2023-03-19 00:21:22.116 DEBUG 13788 --- [nio-8080-exec-1] o.s.t.web.servlet.TestDispatcherServlet  : Failed to complete request: java.lang.NullPointerException\n2023-03-19 00:21:22.119 ERROR 13788 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause\n\njava.lang.NullPointerException: null\n    at org.springframework.test.web.servlet.TestDispatcherServlet.getHandler(TestDispatcherServlet.java:125)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1047)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:696)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:891)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1784)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n\n</code></pre>\n<p>Here is the test class:</p>\n<pre><code>@Log4j2\n@ExtendWith(SpringExtension.class)\n@SpringBootTest(classes = { WebSecurityConfig.class,  WebConfiguration.class },\n        webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@AutoConfigureMockMvc\n@AutoConfigureWebClient\npublic class WorkflowTest {\n}\n</code></pre>\n<p>WebConfugartion.class</p>\n<pre><code>@Configuration\npublic class WebConfiguration implements WebMvcConfigurer {\n\n    @Bean\n    public ServletWebServerFactory servletWebServerFactory() {\n        return new TomcatServletWebServerFactory();\n    }\n\n}\n</code></pre>\n<p>WebSecurityConfig</p>\n<pre><code>@EnableWebSecurity\n@Configuration\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n                .antMatchers(&quot;/**&quot;).permitAll()\n                .and()\n                .csrf().disable();\n    }\n\n    @Override\n    public void configure(WebSecurity web) throws Exception {\n        web.ignoring().antMatchers(&quot;/**&quot;);\n    }\n\n}\n</code></pre>\n<p>I want to mention that this class is in separate module</p>\n"},{"tags":["java","android","google-play","in-app-billing","android-billing"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1682860791,"post_id":76141220,"comment_id":134278345,"body_markdown":"You needed to make what change? Please expand on the answer so that it is helpful to future visitors.","link":"https://stackoverflow.com/questions/76141204/android-play-store-subscription-billing-doesnt-trigger-any-action/76141220#comment134278345_76141220","body":"You needed to make what change? Please expand on the answer so that it is helpful to future visitors."}],"comment_count":1,"score":1,"last_activity_date":1702740190,"last_edit_date":1702740190,"creation_date":1682856973,"answer_id":76141220,"question_id":76141204,"body_markdown":"Ok so I needed to make this change:\r\n\r\n\r\n    List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\r\n                BillingFlowParams.ProductDetailsParams.newBuilder()\r\n                        .setOfferToken(productDetails.getSubscriptionOfferDetails().get(0).getOfferToken())\r\n                        .setProductDetails(productDetails)\r\n                        .build()\r\n        );\r\n\r\nI added this line:\r\n\r\n     .setOfferToken(productDetails.getSubscriptionOfferDetails().get(0).getOfferToken())","link":"https://stackoverflow.com/questions/76141204/android-play-store-subscription-billing-doesnt-trigger-any-action/76141220#76141220","title":"Android Play Store Subscription Billing doesn&#39;t trigger any action","body":"<p>Ok so I needed to make this change:</p>\n<pre><code>List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\n            BillingFlowParams.ProductDetailsParams.newBuilder()\n                    .setOfferToken(productDetails.getSubscriptionOfferDetails().get(0).getOfferToken())\n                    .setProductDetails(productDetails)\n                    .build()\n    );\n</code></pre>\n<p>I added this line:</p>\n<pre><code> .setOfferToken(productDetails.getSubscriptionOfferDetails().get(0).getOfferToken())\n</code></pre>\n"},{"comment_count":0,"score":1,"last_activity_date":1691009072,"creation_date":1691009072,"answer_id":76823394,"question_id":76141204,"body_markdown":"For anyone else who&#39;s running into this issue: The OP had the right idea, but didn&#39;t really explain it - and their solution doesn&#39;t help if you don&#39;t have an offer on your subscription.\r\n\r\nThe root issue seems to be that `BillingFlowParams.ProductDetailsParams.Builder` actually _hangs_ if you don&#39;t supply an `offerToken` for a subscription. This is pretty egregious, IMHO, but fortunately it&#39;s also pretty easy to get around:\r\n```\r\nval productBuilder = BillingFlowParams.ProductDetailsParams.newBuilder()\r\n    .setProductDetails(productDetails)\r\n    .setOfferToken(token)\r\n```\r\n...where `token` is a `String` that&#39;s set to a real offer token from `BillingClient` (using code like the OP&#39;s) if you have one, or **an empty string (`&quot;&quot;`) if you don&#39;t**.\r\n\r\nThe important bit being that you _must_ call `setOfferToken()` with a (non-null) value, or the `Builder` will hang.\r\n\r\n[The official docs][1] say &quot;Calling this method is not needed for One-time products&quot;, which _could_ be taken to mean that it **is** needed for subscription products - but that&#39;s not explicitly stated. Like I said, a pretty egregious fail in API design (and documentation).\r\n\r\n\r\n  [1]: https://developer.android.com/reference/com/android/billingclient/api/BillingFlowParams.ProductDetailsParams.Builder#setOfferToken(java.lang.String)","link":"https://stackoverflow.com/questions/76141204/android-play-store-subscription-billing-doesnt-trigger-any-action/76823394#76823394","title":"Android Play Store Subscription Billing doesn&#39;t trigger any action","body":"<p>For anyone else who's running into this issue: The OP had the right idea, but didn't really explain it - and their solution doesn't help if you don't have an offer on your subscription.</p>\n<p>The root issue seems to be that <code>BillingFlowParams.ProductDetailsParams.Builder</code> actually <em>hangs</em> if you don't supply an <code>offerToken</code> for a subscription. This is pretty egregious, IMHO, but fortunately it's also pretty easy to get around:</p>\n<pre><code>val productBuilder = BillingFlowParams.ProductDetailsParams.newBuilder()\n    .setProductDetails(productDetails)\n    .setOfferToken(token)\n</code></pre>\n<p>...where <code>token</code> is a <code>String</code> that's set to a real offer token from <code>BillingClient</code> (using code like the OP's) if you have one, or <strong>an empty string (<code>&quot;&quot;</code>) if you don't</strong>.</p>\n<p>The important bit being that you <em>must</em> call <code>setOfferToken()</code> with a (non-null) value, or the <code>Builder</code> will hang.</p>\n<p><a href=\"https://developer.android.com/reference/com/android/billingclient/api/BillingFlowParams.ProductDetailsParams.Builder#setOfferToken(java.lang.String)\" rel=\"nofollow noreferrer\">The official docs</a> say &quot;Calling this method is not needed for One-time products&quot;, which <em>could</em> be taken to mean that it <strong>is</strong> needed for subscription products - but that's not explicitly stated. Like I said, a pretty egregious fail in API design (and documentation).</p>\n"}],"comment_count":0,"is_answered":true,"view_count":183,"answer_count":2,"score":2,"last_activity_date":1702740190,"creation_date":1682856637,"question_id":76141204,"body_markdown":"I have successfully implemented the in-app purchase flow, now I am trying to switch to the subscription model but something is wrong in the makePurchase() method, it doesn&#39;t open the window for the user to make the payment. \r\n\r\n    private void createPurchaseFlow(String productID, PostTaskListener&lt;String&gt; callback)\r\n    {\r\n        Print.e(&quot;createPurchaseFlow productID: &quot;+ productID);\r\n        PurchasesUpdatedListener purchasesUpdatedListener = new PurchasesUpdatedListener()\r\n        {\r\n            @Override\r\n            public void onPurchasesUpdated(@NonNull BillingResult billingResult,\r\n                                           List&lt;Purchase&gt; purchases)\r\n            {\r\n                if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK\r\n                        &amp;&amp; purchases != null)\r\n                {\r\n                    for (Purchase purchase : purchases)\r\n                    {\r\n                        consumePurchase(purchase,productID,callback);\r\n                    }\r\n                }\r\n                else if (billingResult.getResponseCode() ==\r\n                        BillingClient.BillingResponseCode.USER_CANCELED)\r\n                {\r\n                    callback.onPostTask(&quot;User Canceled&quot;);\r\n                    Print.e(&quot;onPurchasesUpdated: Purchase Canceled&quot;);\r\n                }\r\n                else\r\n                {\r\n                    callback.onPostTask(&quot;Purchase Failed&quot;);\r\n                    Print.e(&quot;onPurchasesUpdated: Error&quot;);\r\n                }\r\n            }\r\n        };\r\n\r\n        billingClient = BillingClient.newBuilder(activity)\r\n                .setListener(purchasesUpdatedListener)\r\n                .enablePendingPurchases()\r\n                .build();\r\n\r\n        billingClient.startConnection(new BillingClientStateListener()\r\n        {\r\n            @Override\r\n            public void onBillingSetupFinished(@NonNull BillingResult billingResult)\r\n            {\r\n                if (billingResult.getResponseCode() ==\r\n                        BillingClient.BillingResponseCode.OK)\r\n                {\r\n                    Print.e(&quot;OnBillingSetupFinish connected&quot;);\r\n                    queryProduct(productID,callback);\r\n                }\r\n                else\r\n                {\r\n                    Print.e(&quot;OnBillingSetupFinish failed&quot;);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onBillingServiceDisconnected()\r\n            {\r\n                // Try to restart the connection on the next request to\r\n                // Google Play by calling the startConnection() method.\r\n                Print.e(&quot;onBillingServiceDisconnected&quot;);\r\n                callback.onPostTask(&quot;Billing Service Disconnected&quot;);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void queryProduct(String subscriptionID, PostTaskListener&lt;String&gt; callback)\r\n    {\r\n        QueryProductDetailsParams queryProductDetailsParams =\r\n                QueryProductDetailsParams.newBuilder()\r\n                        .setProductList(\r\n                                ImmutableList.from(\r\n                                        QueryProductDetailsParams.Product.newBuilder()\r\n                                                .setProductId(subscriptionID)\r\n                                                .setProductType(\r\n                                                        BillingClient.ProductType.SUBS)\r\n                                                .build()))\r\n                        .build();\r\n\r\n        billingClient.queryProductDetailsAsync(\r\n                queryProductDetailsParams,\r\n                new ProductDetailsResponseListener()\r\n                {\r\n                    @Override\r\n                    public void onProductDetailsResponse(@NonNull BillingResult billingResult,\r\n                                                         @NonNull List&lt;ProductDetails&gt; productDetailsList)\r\n                    {\r\n                        if (!productDetailsList.isEmpty())\r\n                        {\r\n                            Print.e(&quot;onProductDetailsResponse&quot;);\r\n                            ProductDetails productDetails = productDetailsList.get(0);\r\n                            makePurchase(productDetails);\r\n                        }\r\n                        else\r\n                        {\r\n                            callback.onPostTask(null);\r\n                            Print.e(&quot;onProductDetailsResponse: No subscriptions&quot;);\r\n                        }\r\n                    }\r\n                }\r\n        );\r\n    }\r\n\r\n    private void makePurchase(ProductDetails productDetails)\r\n    {\r\n        Print.e(&quot;makePurchase: &quot; + productDetails.getName());\r\n\r\n        List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\r\n                BillingFlowParams.ProductDetailsParams.newBuilder()\r\n                        .setProductDetails(productDetails)\r\n                        .build()\r\n        );\r\n\r\n        BillingFlowParams billingFlowParams =\r\n                BillingFlowParams.newBuilder()\r\n                        .setProductDetailsParamsList(productDetailsParamsList)\r\n                        .build();\r\n\r\n        BillingResult billingResult = billingClient.launchBillingFlow(activity, billingFlowParams);\r\n\r\n\r\n        Print.e(&quot;billingResult: &quot; + billingResult.getResponseCode() +\r\n                &quot; getDebugMessage: &quot; +  billingResult.getDebugMessage() +\r\n                &quot; toString: &quot; +  billingResult.toString());\r\n    }\r\n\r\nIt doesn&#39;t print the messages after this line\r\n\r\n    BillingResult billingResult = billingClient.launchBillingFlow(activity, billingFlowParams);\r\n\r\nso I placed breakpoints and the code run until this code:\r\n\r\n            List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\r\n                BillingFlowParams.ProductDetailsParams.newBuilder()\r\n                        .setProductDetails(productDetails)\r\n                        .build()\r\n        );\r\n\r\nand then nothing happens, no errors, zero logs. What is going on?","link":"https://stackoverflow.com/questions/76141204/android-play-store-subscription-billing-doesnt-trigger-any-action","title":"Android Play Store Subscription Billing doesn&#39;t trigger any action","body":"<p>I have successfully implemented the in-app purchase flow, now I am trying to switch to the subscription model but something is wrong in the makePurchase() method, it doesn't open the window for the user to make the payment.</p>\n<pre><code>private void createPurchaseFlow(String productID, PostTaskListener&lt;String&gt; callback)\n{\n    Print.e(&quot;createPurchaseFlow productID: &quot;+ productID);\n    PurchasesUpdatedListener purchasesUpdatedListener = new PurchasesUpdatedListener()\n    {\n        @Override\n        public void onPurchasesUpdated(@NonNull BillingResult billingResult,\n                                       List&lt;Purchase&gt; purchases)\n        {\n            if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK\n                    &amp;&amp; purchases != null)\n            {\n                for (Purchase purchase : purchases)\n                {\n                    consumePurchase(purchase,productID,callback);\n                }\n            }\n            else if (billingResult.getResponseCode() ==\n                    BillingClient.BillingResponseCode.USER_CANCELED)\n            {\n                callback.onPostTask(&quot;User Canceled&quot;);\n                Print.e(&quot;onPurchasesUpdated: Purchase Canceled&quot;);\n            }\n            else\n            {\n                callback.onPostTask(&quot;Purchase Failed&quot;);\n                Print.e(&quot;onPurchasesUpdated: Error&quot;);\n            }\n        }\n    };\n\n    billingClient = BillingClient.newBuilder(activity)\n            .setListener(purchasesUpdatedListener)\n            .enablePendingPurchases()\n            .build();\n\n    billingClient.startConnection(new BillingClientStateListener()\n    {\n        @Override\n        public void onBillingSetupFinished(@NonNull BillingResult billingResult)\n        {\n            if (billingResult.getResponseCode() ==\n                    BillingClient.BillingResponseCode.OK)\n            {\n                Print.e(&quot;OnBillingSetupFinish connected&quot;);\n                queryProduct(productID,callback);\n            }\n            else\n            {\n                Print.e(&quot;OnBillingSetupFinish failed&quot;);\n            }\n        }\n\n        @Override\n        public void onBillingServiceDisconnected()\n        {\n            // Try to restart the connection on the next request to\n            // Google Play by calling the startConnection() method.\n            Print.e(&quot;onBillingServiceDisconnected&quot;);\n            callback.onPostTask(&quot;Billing Service Disconnected&quot;);\n        }\n    });\n}\n\nprivate void queryProduct(String subscriptionID, PostTaskListener&lt;String&gt; callback)\n{\n    QueryProductDetailsParams queryProductDetailsParams =\n            QueryProductDetailsParams.newBuilder()\n                    .setProductList(\n                            ImmutableList.from(\n                                    QueryProductDetailsParams.Product.newBuilder()\n                                            .setProductId(subscriptionID)\n                                            .setProductType(\n                                                    BillingClient.ProductType.SUBS)\n                                            .build()))\n                    .build();\n\n    billingClient.queryProductDetailsAsync(\n            queryProductDetailsParams,\n            new ProductDetailsResponseListener()\n            {\n                @Override\n                public void onProductDetailsResponse(@NonNull BillingResult billingResult,\n                                                     @NonNull List&lt;ProductDetails&gt; productDetailsList)\n                {\n                    if (!productDetailsList.isEmpty())\n                    {\n                        Print.e(&quot;onProductDetailsResponse&quot;);\n                        ProductDetails productDetails = productDetailsList.get(0);\n                        makePurchase(productDetails);\n                    }\n                    else\n                    {\n                        callback.onPostTask(null);\n                        Print.e(&quot;onProductDetailsResponse: No subscriptions&quot;);\n                    }\n                }\n            }\n    );\n}\n\nprivate void makePurchase(ProductDetails productDetails)\n{\n    Print.e(&quot;makePurchase: &quot; + productDetails.getName());\n\n    List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\n            BillingFlowParams.ProductDetailsParams.newBuilder()\n                    .setProductDetails(productDetails)\n                    .build()\n    );\n\n    BillingFlowParams billingFlowParams =\n            BillingFlowParams.newBuilder()\n                    .setProductDetailsParamsList(productDetailsParamsList)\n                    .build();\n\n    BillingResult billingResult = billingClient.launchBillingFlow(activity, billingFlowParams);\n\n\n    Print.e(&quot;billingResult: &quot; + billingResult.getResponseCode() +\n            &quot; getDebugMessage: &quot; +  billingResult.getDebugMessage() +\n            &quot; toString: &quot; +  billingResult.toString());\n}\n</code></pre>\n<p>It doesn't print the messages after this line</p>\n<pre><code>BillingResult billingResult = billingClient.launchBillingFlow(activity, billingFlowParams);\n</code></pre>\n<p>so I placed breakpoints and the code run until this code:</p>\n<pre><code>        List&lt;BillingFlowParams.ProductDetailsParams&gt; productDetailsParamsList = ImmutableList.from(\n            BillingFlowParams.ProductDetailsParams.newBuilder()\n                    .setProductDetails(productDetails)\n                    .build()\n    );\n</code></pre>\n<p>and then nothing happens, no errors, zero logs. What is going on?</p>\n"},{"tags":["java","android"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701001511,"post_id":77550019,"comment_id":136718581,"body_markdown":"thx for clarifying on that. &#39;these lines are at the top&#39; means right below the onCreate","link":"https://stackoverflow.com/questions/77549565/data-extracted-from-memory-using-sharedpreferences-not-displaying/77550019#comment136718581_77550019","body":"thx for clarifying on that. &#39;these lines are at the top&#39; means right below the onCreate"}],"comment_count":1,"score":0,"last_activity_date":1702712697,"last_edit_date":1702712697,"creation_date":1700957711,"answer_id":77550019,"question_id":77549565,"body_markdown":"In my opinion, you missunderstand the role of the second argument of\r\n\r\n    score = settings.getInt(&quot;score&quot;,score);\r\n\r\n(see [here](https://developer.android.com/reference/android/content/SharedPreferences#getInt(java.lang.String,%20int))). You should use it like this\r\n\r\n    score = settings.getInt(&quot;score&quot;, -1);\r\n    if (score==-1) {\r\n      //there is no &quot;score&quot; entry in the settings\r\n    } else {\r\n      //continue with the loaded value for score\r\n    }\r\n\r\nThe line\r\n \r\n    editor.commit();\r\n\r\nmust be deleted. `.apply()` already does the same thing (apply does it asynchronously, commit synchronously).\r\n\r\nEDIT: And did you write the line \r\n\r\n    score = settings.getInt(&quot;score&quot;, -1);\r\n\r\nat the beginning of `onCreate` and **not** the Activity? It is not clear what you mean by &quot;these lines are at the top&quot;.","link":"https://stackoverflow.com/questions/77549565/data-extracted-from-memory-using-sharedpreferences-not-displaying/77550019#77550019","title":"Data extracted from memory using SharedPreferences not displaying","body":"<p>In my opinion, you missunderstand the role of the second argument of</p>\n<pre><code>score = settings.getInt(&quot;score&quot;,score);\n</code></pre>\n<p>(see <a href=\"https://developer.android.com/reference/android/content/SharedPreferences#getInt(java.lang.String,%20int)\" rel=\"nofollow noreferrer\">here</a>). You should use it like this</p>\n<pre><code>score = settings.getInt(&quot;score&quot;, -1);\nif (score==-1) {\n  //there is no &quot;score&quot; entry in the settings\n} else {\n  //continue with the loaded value for score\n}\n</code></pre>\n<p>The line</p>\n<pre><code>editor.commit();\n</code></pre>\n<p>must be deleted. <code>.apply()</code> already does the same thing (apply does it asynchronously, commit synchronously).</p>\n<p>EDIT: And did you write the line</p>\n<pre><code>score = settings.getInt(&quot;score&quot;, -1);\n</code></pre>\n<p>at the beginning of <code>onCreate</code> and <strong>not</strong> the Activity? It is not clear what you mean by &quot;these lines are at the top&quot;.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":45,"answer_count":1,"score":0,"last_activity_date":1702712697,"creation_date":1700945511,"question_id":77549565,"body_markdown":"I have an Android game.Evertime the user matches the &#39;Power Rating&#39; on the right block with the one on the left block,they get 10 points.The score is saved at every operation,meaning that at each +10 score,the score is saved with SharedPreferences on the memory.&lt;br/&gt;\r\nSaving the data works just fine but when I close the app and reopen it,something is off:&lt;br/&gt;\r\nthe saved score does not display right away,instead it displays only when it increases by 10 (when the user gets 10 points,i.e. if I have 60 saved score and reopen the app,it displays 0 initially and if I get another 10 points,it shows 70,meaning that the 60 was loaded later and it is weird given that score is not initialised as 0).&lt;br/&gt;\r\nHere is code:&lt;br/&gt;\r\n```\r\n//--------------------------------\r\npublic static final String PREFS_NAME = &quot;MyPrefsFile&quot;;\r\n\r\nSharedPreferences settings = getSharedPreferences(PREFS_NAME,0);\r\nSharedPreferences.Editor editor = settings.edit();\r\n\r\nscore = settings.getInt(&quot;score&quot;,score);\r\n/*---------------------------------\r\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nthese lines are at the top where I declare the other variables for the game\r\n*/\r\n\r\n//----------------------\r\neditor.putInt(&quot;score&quot;,score).apply();\r\neditor.commit();\r\n//^^^^^^^^^^^^^^^^^\r\n//this code is in the submit event listener,where &#39;score&#39; is also calculated\r\n```","link":"https://stackoverflow.com/questions/77549565/data-extracted-from-memory-using-sharedpreferences-not-displaying","title":"Data extracted from memory using SharedPreferences not displaying","body":"<p>I have an Android game.Evertime the user matches the 'Power Rating' on the right block with the one on the left block,they get 10 points.The score is saved at every operation,meaning that at each +10 score,the score is saved with SharedPreferences on the memory.<br/>\nSaving the data works just fine but when I close the app and reopen it,something is off:<br/>\nthe saved score does not display right away,instead it displays only when it increases by 10 (when the user gets 10 points,i.e. if I have 60 saved score and reopen the app,it displays 0 initially and if I get another 10 points,it shows 70,meaning that the 60 was loaded later and it is weird given that score is not initialised as 0).<br/>\nHere is code:<br/></p>\n<pre><code>//--------------------------------\npublic static final String PREFS_NAME = &quot;MyPrefsFile&quot;;\n\nSharedPreferences settings = getSharedPreferences(PREFS_NAME,0);\nSharedPreferences.Editor editor = settings.edit();\n\nscore = settings.getInt(&quot;score&quot;,score);\n/*---------------------------------\n^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nthese lines are at the top where I declare the other variables for the game\n*/\n\n//----------------------\neditor.putInt(&quot;score&quot;,score).apply();\neditor.commit();\n//^^^^^^^^^^^^^^^^^\n//this code is in the submit event listener,where 'score' is also calculated\n</code></pre>\n"},{"tags":["java","spring-boot","spring-boot-security"],"answers":[{"comments":[{"score":1,"post_type":"answer","creation_date":1685043470,"post_id":76326337,"comment_id":134610082,"body_markdown":"It seems that `WebSecurityConfigurerAdapter` got deprecated in version 5.7.0-M2.\nhttps://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter","link":"https://stackoverflow.com/questions/76326112/how-to-configure-custom-security-filters-to-trigger-only-for-specific-endpoints/76326337#comment134610082_76326337","body":"It seems that <code>WebSecurityConfigurerAdapter</code> got deprecated in version 5.7.0-M2. <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">spring.io/blog/2022/02/21/&hellip;</a>"}],"comment_count":1,"score":1,"last_activity_date":1684951660,"creation_date":1684951660,"answer_id":76326337,"question_id":76326112,"body_markdown":"That is true. `antMatchers()` method is deprecated. Could you try creating two custom request matchers(for endpoint 1 and 2). You can then use those matchers in two separate configuration classes(any class name of choice) where you’d define your specificity for each endpoint. This might help you trigger your filters for the right endpoints. \r\n\r\n   \r\n\r\n\r\n```\r\n// Custom request matchers for endpoint paths\r\nprivate static final RequestMatcher ENDPOINT_1_MATCHER = new AntPathRequestMatcher(&quot;/endpoint1/**&quot;);\r\nprivate static final RequestMatcher ENDPOINT_2_MATCHER = new AntPathRequestMatcher(&quot;/endpoint2/**&quot;);\r\n\r\n// Configuration for endpoint 1\r\n@Configuration\r\npublic static class Endpoint1SecurityFilter extends WebSecurityConfigurerAdapter {\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.requestMatchers()\r\n                .requestMatcher(ENDPOINT_1_MATCHER)\r\n                .and()\r\n                .authorizeRequests()\r\n                .anyRequest()\r\n                .authenticated();\r\n    }\r\n}\r\n\r\n// endpoint 2 configuration\r\n@Configuration\r\npublic static class Endpoint2SecurityFilter extends WebSecurityConfigurerAdapter {\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.requestMatchers()\r\n                .requestMatcher(ENDPOINT_2_MATCHER)\r\n                .and()\r\n                .authorizeRequests()\r\n                .anyRequest()\r\n                .authenticated();\r\n    }\r\n} ```\r\n\r\n\r\nPS: I  honestly don’t feel it is necessary to explicitly configure the absence of filters for endpoint3 since it doesn’t require any filters.\r\n\r\nOpen to better suggestions here!","link":"https://stackoverflow.com/questions/76326112/how-to-configure-custom-security-filters-to-trigger-only-for-specific-endpoints/76326337#76326337","title":"How to configure custom security filters to trigger only for specific endpoints in a Spring Boot application with Spring Security?","body":"<p>That is true. <code>antMatchers()</code> method is deprecated. Could you try creating two custom request matchers(for endpoint 1 and 2). You can then use those matchers in two separate configuration classes(any class name of choice) where you’d define your specificity for each endpoint. This might help you trigger your filters for the right endpoints.</p>\n<pre><code>// Custom request matchers for endpoint paths\nprivate static final RequestMatcher ENDPOINT_1_MATCHER = new AntPathRequestMatcher(&quot;/endpoint1/**&quot;);\nprivate static final RequestMatcher ENDPOINT_2_MATCHER = new AntPathRequestMatcher(&quot;/endpoint2/**&quot;);\n\n// Configuration for endpoint 1\n@Configuration\npublic static class Endpoint1SecurityFilter extends WebSecurityConfigurerAdapter {\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.requestMatchers()\n                .requestMatcher(ENDPOINT_1_MATCHER)\n                .and()\n                .authorizeRequests()\n                .anyRequest()\n                .authenticated();\n    }\n}\n\n// endpoint 2 configuration\n@Configuration\npublic static class Endpoint2SecurityFilter extends WebSecurityConfigurerAdapter {\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.requestMatchers()\n                .requestMatcher(ENDPOINT_2_MATCHER)\n                .and()\n                .authorizeRequests()\n                .anyRequest()\n                .authenticated();\n    }\n} ```\n\n\nPS: I  honestly don’t feel it is necessary to explicitly configure the absence of filters for endpoint3 since it doesn’t require any filters.\n\nOpen to better suggestions here!\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":550,"answer_count":1,"score":0,"last_activity_date":1702709143,"creation_date":1684949756,"last_edit_date":1684949774,"question_id":76326112,"body_markdown":"I have a spring boot 3 application with spring security 6. I am having a hard time to understand how security filters work.\r\nI have for the moment 3 exposed endpoint `/endpoint1`, `/endpoint2` and `/endpoint3`. I also have 2 filters `Filter1.java` and `Filter2.java`.\r\nI want to configure my Security in a way that `Filter1` only gets triggered when `/endpoint1` is called, `Filter2` only when `/endpoint2` gets called, and for `/endpoint3` no filter at all.\r\n\r\nThe outcome I am getting is that both filters are getting triggered when calling any of the endpoints.\r\n\r\nThis is my `SecurityFilterChain` configure method:\r\n\r\n```java\r\n@Bean\r\n    public SecurityFilterChain configure(HttpSecurity http) throws Exception {\r\n        http.csrf()\r\n                .disable()\r\n                .cors()\r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(PathRequest.toStaticResources().atCommonLocations())\r\n                .permitAll()\r\n                .requestMatchers(new AntPathRequestMatcher(&quot;/endpoin3/**&quot;))\r\n                .permitAll()\r\n                .requestMatchers(new AntPathRequestMatcher(&quot;/error/**&quot;))\r\n                .permitAll()\r\n                .requestMatchers(new AntPathRequestMatcher(&quot;/endpoint1/**&quot;))\r\n                .authenticated()\r\n                .requestMatchers(new AntPathRequestMatcher(&quot;/endpoint2/**&quot;))\r\n                .authenticated()\r\n                .anyRequest()\r\n                .denyAll()\r\n                .and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .addFilterBefore(\r\n                        new Filter1(),\r\n                        UsernamePasswordAuthenticationFilter.class)\r\n                .addFilterBefore(\r\n                        new Filter2(),\r\n                        UsernamePasswordAuthenticationFilter.class)\r\n                .logout()\r\n                .logoutSuccessHandler((request, response, authentication) -&gt; SecurityContextHolder.clearContext());\r\n        return http.build();\r\n    }\r\n```\r\n\r\n\r\nI tried to do the following but it did make any difference:\r\n\r\n```java\r\n@Bean\r\n    public SecurityFilterChain configure(HttpSecurity http) throws Exception {\r\n        http.csrf()\r\n                .disable()\r\n                .cors()\r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(PathRequest.toStaticResources().atCommonLocations())\r\n                .permitAll()\r\n                .requestMatchers(new AntPathRequestMatcher(&quot;/endpoin3/**&quot;))\r\n                .permitAll()\r\n                .requestMatchers(new AntPathRequestMatcher(&quot;/error/**&quot;))\r\n                .permitAll()\r\n                .and()\r\n                .authorizeHttpRequests(authorize -&gt; authorize\r\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/endpoint1/**&quot;))\r\n                        .authenticated()\r\n                        .and()\r\n                        .addFilterBefore(\r\n                                new Filter1(),\r\n                                UsernamePasswordAuthenticationFilter.class))\r\n                .authorizeHttpRequests(authorize -&gt; authorize\r\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/endpoint2/**&quot;))\r\n                        .authenticated()\r\n                        .and()\r\n                        .addFilterBefore(\r\n                                new Filter2(),\r\n                                UsernamePasswordAuthenticationFilter.class))\r\n                .authorizeHttpRequests()\r\n                .anyRequest()\r\n                .denyAll()\r\n                .and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .logout()\r\n                .logoutSuccessHandler((request, response, authentication) -&gt; SecurityContextHolder.clearContext());\r\n        return http.build();\r\n    }\r\n    }\r\n```\r\n\r\nI have searched to find an answer to my issue but only found found solutions for `Spring boot 2` using `antMatchers()` methods but it is depricated in `Spring Boot 3` because of `Spring security 6`.\r\nI also tried to create multiple `SecurityFilterChain`s with `@Bean` and `@Order` annotations on top of them but the filters stoped being triggered on all endpoints.","link":"https://stackoverflow.com/questions/76326112/how-to-configure-custom-security-filters-to-trigger-only-for-specific-endpoints","title":"How to configure custom security filters to trigger only for specific endpoints in a Spring Boot application with Spring Security?","body":"<p>I have a spring boot 3 application with spring security 6. I am having a hard time to understand how security filters work.\nI have for the moment 3 exposed endpoint <code>/endpoint1</code>, <code>/endpoint2</code> and <code>/endpoint3</code>. I also have 2 filters <code>Filter1.java</code> and <code>Filter2.java</code>.\nI want to configure my Security in a way that <code>Filter1</code> only gets triggered when <code>/endpoint1</code> is called, <code>Filter2</code> only when <code>/endpoint2</code> gets called, and for <code>/endpoint3</code> no filter at all.</p>\n<p>The outcome I am getting is that both filters are getting triggered when calling any of the endpoints.</p>\n<p>This is my <code>SecurityFilterChain</code> configure method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\n    public SecurityFilterChain configure(HttpSecurity http) throws Exception {\n        http.csrf()\n                .disable()\n                .cors()\n                .and()\n                .authorizeHttpRequests()\n                .requestMatchers(PathRequest.toStaticResources().atCommonLocations())\n                .permitAll()\n                .requestMatchers(new AntPathRequestMatcher(&quot;/endpoin3/**&quot;))\n                .permitAll()\n                .requestMatchers(new AntPathRequestMatcher(&quot;/error/**&quot;))\n                .permitAll()\n                .requestMatchers(new AntPathRequestMatcher(&quot;/endpoint1/**&quot;))\n                .authenticated()\n                .requestMatchers(new AntPathRequestMatcher(&quot;/endpoint2/**&quot;))\n                .authenticated()\n                .anyRequest()\n                .denyAll()\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .addFilterBefore(\n                        new Filter1(),\n                        UsernamePasswordAuthenticationFilter.class)\n                .addFilterBefore(\n                        new Filter2(),\n                        UsernamePasswordAuthenticationFilter.class)\n                .logout()\n                .logoutSuccessHandler((request, response, authentication) -&gt; SecurityContextHolder.clearContext());\n        return http.build();\n    }\n</code></pre>\n<p>I tried to do the following but it did make any difference:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\n    public SecurityFilterChain configure(HttpSecurity http) throws Exception {\n        http.csrf()\n                .disable()\n                .cors()\n                .and()\n                .authorizeHttpRequests()\n                .requestMatchers(PathRequest.toStaticResources().atCommonLocations())\n                .permitAll()\n                .requestMatchers(new AntPathRequestMatcher(&quot;/endpoin3/**&quot;))\n                .permitAll()\n                .requestMatchers(new AntPathRequestMatcher(&quot;/error/**&quot;))\n                .permitAll()\n                .and()\n                .authorizeHttpRequests(authorize -&gt; authorize\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/endpoint1/**&quot;))\n                        .authenticated()\n                        .and()\n                        .addFilterBefore(\n                                new Filter1(),\n                                UsernamePasswordAuthenticationFilter.class))\n                .authorizeHttpRequests(authorize -&gt; authorize\n                        .requestMatchers(new AntPathRequestMatcher(&quot;/endpoint2/**&quot;))\n                        .authenticated()\n                        .and()\n                        .addFilterBefore(\n                                new Filter2(),\n                                UsernamePasswordAuthenticationFilter.class))\n                .authorizeHttpRequests()\n                .anyRequest()\n                .denyAll()\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .logout()\n                .logoutSuccessHandler((request, response, authentication) -&gt; SecurityContextHolder.clearContext());\n        return http.build();\n    }\n    }\n</code></pre>\n<p>I have searched to find an answer to my issue but only found found solutions for <code>Spring boot 2</code> using <code>antMatchers()</code> methods but it is depricated in <code>Spring Boot 3</code> because of <code>Spring security 6</code>.\nI also tried to create multiple <code>SecurityFilterChain</code>s with <code>@Bean</code> and <code>@Order</code> annotations on top of them but the filters stoped being triggered on all endpoints.</p>\n"},{"tags":["java","micronaut","testcontainers","testcontainers-junit5"],"comments":[{"score":0,"post_type":"question","creation_date":1698164968,"post_id":77352776,"comment_id":136369459,"body_markdown":"When having `init.sql` in folder `src/test/resources/`,the file will end up in folder target/test-classes after build, and you&#39;ll use `classpath:init.sql` . Normally, you would create a folder called e.g. scripts inside folder `resources`, then use `classpath:scripts/init.sql` BR","link":"https://stackoverflow.com/questions/77352776/org-testcontainers-ext-scriptutilsscriptloadexception-could-not-load-classpath#comment136369459_77352776","body":"When having <code>init.sql</code> in folder <code>src&#47;test&#47;resources&#47;</code>,the file will end up in folder target/test-classes after build, and you&#39;ll use <code>classpath:init.sql</code> . Normally, you would create a folder called e.g. scripts inside folder <code>resources</code>, then use <code>classpath:scripts&#47;init.sql</code> BR"},{"score":0,"post_type":"question","creation_date":1698166324,"post_id":77352776,"comment_id":136369697,"body_markdown":"Thanks for the hint, but no success doing this. As already said in the thread, I tried every form of declaration I thought of, same result each time.","link":"https://stackoverflow.com/questions/77352776/org-testcontainers-ext-scriptutilsscriptloadexception-could-not-load-classpath#comment136369697_77352776","body":"Thanks for the hint, but no success doing this. As already said in the thread, I tried every form of declaration I thought of, same result each time."},{"score":0,"post_type":"question","creation_date":1698166552,"post_id":77352776,"comment_id":136369733,"body_markdown":"Can you verify that the file is copied to target/test-classes after build ? BR","link":"https://stackoverflow.com/questions/77352776/org-testcontainers-ext-scriptutilsscriptloadexception-could-not-load-classpath#comment136369733_77352776","body":"Can you verify that the file is copied to target/test-classes after build ? BR"},{"score":0,"post_type":"question","creation_date":1698167140,"post_id":77352776,"comment_id":136369836,"body_markdown":"Indeed it is (target/test-classes/scripts/init.sql) ! I can&#39;t really understand why it is not found by the ScriptUtils class. I took a look at the sources of the Testcontainers dependency and it uses &quot;Thread.currentThread().getContextClassLoader().getResource(initScriptPath)&quot; to find for the resource. Any idea why it is not resolved as supposed?","link":"https://stackoverflow.com/questions/77352776/org-testcontainers-ext-scriptutilsscriptloadexception-could-not-load-classpath#comment136369836_77352776","body":"Indeed it is (target/test-classes/scripts/init.sql) ! I can&#39;t really understand why it is not found by the ScriptUtils class. I took a look at the sources of the Testcontainers dependency and it uses &quot;Thread.currentThread().getContextClassLoader().getResource(&zwnj;&#8203;initScriptPath)&quot; to find for the resource. Any idea why it is not resolved as supposed?"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702698795,"creation_date":1702698795,"answer_id":77669760,"question_id":77352776,"body_markdown":"update script path to following it worked for me.\r\nafter adding script under db folder it works.\r\n\r\nsrc\\test\\java\\resources\\db\\schema-postgresql.sql\r\n\r\n\r\n\r\n@Container\r\nprivate static final PostgreSQLContainer&lt;?&gt; postgreSQLContainer = new PostgreSQLContainer&lt;&gt;(&quot;postgres:11.1&quot;)\r\n            .withDatabaseName(&quot;db&quot;).withUsername(&quot;test&quot;).withPassword(&quot;test&quot;)\r\n            .withInitScript(&quot;db/schema-postgresql.sql&quot;);\r\n\r\nOR \r\nprivate static final String initScriptPath=&quot;db/schema-postgresql.sql&quot;;\r\nScriptUtils.runInitScript(new JdbcDatabaseDelegate(postgreSQLContainer,&quot;&quot;), initScriptPath);\r\n\r\n","link":"https://stackoverflow.com/questions/77352776/org-testcontainers-ext-scriptutilsscriptloadexception-could-not-load-classpath/77669760#77669760","title":"org.testcontainers.ext.ScriptUtils$ScriptLoadException: Could not load classpath init script with Micronaut project using Test-Resources","body":"<p>update script path to following it worked for me.\nafter adding script under db folder it works.</p>\n<p>src\\test\\java\\resources\\db\\schema-postgresql.sql</p>\n<p>@Container\nprivate static final PostgreSQLContainer&lt;?&gt; postgreSQLContainer = new PostgreSQLContainer&lt;&gt;(&quot;postgres:11.1&quot;)\n.withDatabaseName(&quot;db&quot;).withUsername(&quot;test&quot;).withPassword(&quot;test&quot;)\n.withInitScript(&quot;db/schema-postgresql.sql&quot;);</p>\n<p>OR\nprivate static final String initScriptPath=&quot;db/schema-postgresql.sql&quot;;\nScriptUtils.runInitScript(new JdbcDatabaseDelegate(postgreSQLContainer,&quot;&quot;), initScriptPath);</p>\n"}],"comment_count":4,"is_answered":false,"view_count":134,"answer_count":1,"score":0,"last_activity_date":1702698795,"creation_date":1698156016,"last_edit_date":1698163786,"question_id":77352776,"body_markdown":"I am stuck on this since two days, while I am trying to implement the Test-resources capability of Micronaut framework.\r\n\r\nHere is the content of my application-test.properties : \r\n\r\n```\r\ndatasources.default.dialect=MYSQL\r\ndatasources.default.driverClassName=com.mysql.cj.jdbc.Driver\r\ndatasources.default.schema-generate=CREATE_DROP\r\n\r\ntest-resources.containers.mysql.image-name=mysql:8.1.0\r\ntest-resources.containers.mysql.db-name=testDB\r\ntest-resources.containers.mysql.username=dbuser\r\ntest-resources.containers.mysql.password=&quot;mypassword&quot;\r\ntest-resources.containers.mysql.init-script-path=&quot;src/test/resources/init.sql&quot;\r\n```\r\n\r\nMy `pom.xml` is declaring the common micronaut dependencies (generated from the Micronaut Launch app).\r\n\r\nAnyway, I always have the following error when trying the `mvn clean test` command.\r\n\r\n\r\n```\r\n[test-resources-service] 15:33:37.784 [default-nioEventLoopGroup-1-3] INFO  tc.mysql:8.1.0 - Container is started (JDBC URL: jdbc:mysql://localhost:53931/testDB)\r\n[test-resources-service] 15:33:37.785 [default-nioEventLoopGroup-1-3] WARN  org.testcontainers.ext.ScriptUtils - Could not load classpath init script: &quot;src/test/resources/init.sql&quot;\r\n[test-resources-service] 15:33:37.785 [default-nioEventLoopGroup-1-3] ERROR tc.mysql:8.1.0 - Could not start container\r\norg.testcontainers.ext.ScriptUtils$ScriptLoadException: Could not load classpath init script: &quot;src/test/resources/init.sql&quot;. Resource not found.\r\n        at org.testcontainers.ext.ScriptUtils.runInitScript(ScriptUtils.java:347)\r\n        at org.testcontainers.containers.JdbcDatabaseContainer.runInitScriptIfRequired(JdbcDatabaseContainer.java:332)\r\n        at org.testcontainers.containers.JdbcDatabaseContainer.containerIsStarted(JdbcDatabaseContainer.java:187)\r\n        at org.testcontainers.containers.GenericContainer.containerIsStarted(GenericContainer.java:712)\r\n        at org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:532)\r\n        at org.testcontainers.containers.GenericContainer.lambda$doStart$0(GenericContainer.java:344)\r\n        at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:81)\r\n        at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:334)\r\n        at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:322)\r\n        at io.micronaut.testresources.testcontainers.TestContainers.getOrCreate(TestContainers.java:80)\r\n        at io.micronaut.testresources.testcontainers.AbstractTestContainersProvider.resolve(AbstractTestContainersProvider.java:100)\r\n        at io.micronaut.testresources.server.TestResourcesController.resolve(TestResourcesController.java:90)\r\n```\r\n\r\nIn the Micronaut documentation it is mentioned that it has to be a file in the `classpath`.\r\n[Micronaut Test-Resources doc](https://micronaut-projects.github.io/micronaut-test-resources/snapshot/guide/#modules-databases)\r\n\r\nMy guess here is that the classpth does not use the same root as my java project.\r\n\r\nI tried different values for `test-resources.containers.mysql.init-script-path`. \r\n- Relative path using the project root as reference\r\n- Absolute path (not sure it is the best solution, but at least it confirmed that even an absolute path couldn&#39;t be resolved)\r\n- using the `classpath:` prefix for the relative path of the init script (ex : classpath:src/test/resources/init.sql&quot;)\r\n- using the declaration from the Testcontainers documentation ([init script in Classpath](https://java.testcontainers.org/modules/databases/jdbc/#using-a-classpath-init-script) &amp; [init script from a file](https://java.testcontainers.org/modules/databases/jdbc/#using-an-init-script-from-a-file)\r\n\r\nNone of them even worked.\r\n\r\nAnyway I am sure the other part of the Test-Resources module are working well because when I don&#39;t declare an init script, the database is used but none of the expected tables are present.\r\n\r\nAm I doing something wrong or missing something in the configuration?\r\n\r\nEdit : I am using the standard controller and CrudRepository from Micronaut. I just found appealing to use the Test-Resource for integration purpose.","link":"https://stackoverflow.com/questions/77352776/org-testcontainers-ext-scriptutilsscriptloadexception-could-not-load-classpath","title":"org.testcontainers.ext.ScriptUtils$ScriptLoadException: Could not load classpath init script with Micronaut project using Test-Resources","body":"<p>I am stuck on this since two days, while I am trying to implement the Test-resources capability of Micronaut framework.</p>\n<p>Here is the content of my application-test.properties :</p>\n<pre><code>datasources.default.dialect=MYSQL\ndatasources.default.driverClassName=com.mysql.cj.jdbc.Driver\ndatasources.default.schema-generate=CREATE_DROP\n\ntest-resources.containers.mysql.image-name=mysql:8.1.0\ntest-resources.containers.mysql.db-name=testDB\ntest-resources.containers.mysql.username=dbuser\ntest-resources.containers.mysql.password=&quot;mypassword&quot;\ntest-resources.containers.mysql.init-script-path=&quot;src/test/resources/init.sql&quot;\n</code></pre>\n<p>My <code>pom.xml</code> is declaring the common micronaut dependencies (generated from the Micronaut Launch app).</p>\n<p>Anyway, I always have the following error when trying the <code>mvn clean test</code> command.</p>\n<pre><code>[test-resources-service] 15:33:37.784 [default-nioEventLoopGroup-1-3] INFO  tc.mysql:8.1.0 - Container is started (JDBC URL: jdbc:mysql://localhost:53931/testDB)\n[test-resources-service] 15:33:37.785 [default-nioEventLoopGroup-1-3] WARN  org.testcontainers.ext.ScriptUtils - Could not load classpath init script: &quot;src/test/resources/init.sql&quot;\n[test-resources-service] 15:33:37.785 [default-nioEventLoopGroup-1-3] ERROR tc.mysql:8.1.0 - Could not start container\norg.testcontainers.ext.ScriptUtils$ScriptLoadException: Could not load classpath init script: &quot;src/test/resources/init.sql&quot;. Resource not found.\n        at org.testcontainers.ext.ScriptUtils.runInitScript(ScriptUtils.java:347)\n        at org.testcontainers.containers.JdbcDatabaseContainer.runInitScriptIfRequired(JdbcDatabaseContainer.java:332)\n        at org.testcontainers.containers.JdbcDatabaseContainer.containerIsStarted(JdbcDatabaseContainer.java:187)\n        at org.testcontainers.containers.GenericContainer.containerIsStarted(GenericContainer.java:712)\n        at org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:532)\n        at org.testcontainers.containers.GenericContainer.lambda$doStart$0(GenericContainer.java:344)\n        at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:81)\n        at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:334)\n        at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:322)\n        at io.micronaut.testresources.testcontainers.TestContainers.getOrCreate(TestContainers.java:80)\n        at io.micronaut.testresources.testcontainers.AbstractTestContainersProvider.resolve(AbstractTestContainersProvider.java:100)\n        at io.micronaut.testresources.server.TestResourcesController.resolve(TestResourcesController.java:90)\n</code></pre>\n<p>In the Micronaut documentation it is mentioned that it has to be a file in the <code>classpath</code>.\n<a href=\"https://micronaut-projects.github.io/micronaut-test-resources/snapshot/guide/#modules-databases\" rel=\"nofollow noreferrer\">Micronaut Test-Resources doc</a></p>\n<p>My guess here is that the classpth does not use the same root as my java project.</p>\n<p>I tried different values for <code>test-resources.containers.mysql.init-script-path</code>.</p>\n<ul>\n<li>Relative path using the project root as reference</li>\n<li>Absolute path (not sure it is the best solution, but at least it confirmed that even an absolute path couldn't be resolved)</li>\n<li>using the <code>classpath:</code> prefix for the relative path of the init script (ex : classpath:src/test/resources/init.sql&quot;)</li>\n<li>using the declaration from the Testcontainers documentation (<a href=\"https://java.testcontainers.org/modules/databases/jdbc/#using-a-classpath-init-script\" rel=\"nofollow noreferrer\">init script in Classpath</a> &amp; <a href=\"https://java.testcontainers.org/modules/databases/jdbc/#using-an-init-script-from-a-file\" rel=\"nofollow noreferrer\">init script from a file</a></li>\n</ul>\n<p>None of them even worked.</p>\n<p>Anyway I am sure the other part of the Test-Resources module are working well because when I don't declare an init script, the database is used but none of the expected tables are present.</p>\n<p>Am I doing something wrong or missing something in the configuration?</p>\n<p>Edit : I am using the standard controller and CrudRepository from Micronaut. I just found appealing to use the Test-Resource for integration purpose.</p>\n"},{"tags":["java","arrays","string","types","converters"],"comments":[{"score":0,"post_type":"question","creation_date":1676356879,"post_id":75444178,"comment_id":133115645,"body_markdown":"Assuming this to be in Java?","link":"https://stackoverflow.com/questions/75444178/convert-string-to-int-array#comment133115645_75444178","body":"Assuming this to be in Java?"},{"score":3,"post_type":"question","creation_date":1676357588,"post_id":75444178,"comment_id":133115776,"body_markdown":"Please add a tag indicating what language you&#39;re using. @AnushBM guessed Java, but there are several languages that look similar. Don&#39;t make us guess.","link":"https://stackoverflow.com/questions/75444178/convert-string-to-int-array#comment133115776_75444178","body":"Please add a tag indicating what language you&#39;re using. @AnushBM guessed Java, but there are several languages that look similar. Don&#39;t make us guess."},{"score":0,"post_type":"question","creation_date":1676613391,"post_id":75444178,"comment_id":133176237,"body_markdown":"Does this answer your question? [How to convert a String into an Integer\\[\\] array in Java?](https://stackoverflow.com/questions/53694806/how-to-convert-a-string-into-an-integer-array-in-java)","link":"https://stackoverflow.com/questions/75444178/convert-string-to-int-array#comment133176237_75444178","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/53694806/how-to-convert-a-string-into-an-integer-array-in-java\">How to convert a String into an Integer&#91;&#93; array in Java?</a>"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1676357198,"creation_date":1676357198,"answer_id":75444297,"question_id":75444178,"body_markdown":"I don&#39;t know what language you are working with. But I can tell you in c++.\r\n\r\ncharacter codes of digits start from 48(dec). You can add and remove this value for each element.\r\n\r\nThe code could roughly look like this.\r\n\r\n    int * _numbers=new int[numbers.size()];\r\n    for(int i=0;i&lt;numbers.size();i++)\r\n        _numbers[i]=numbers[i]+48;","link":"https://stackoverflow.com/questions/75444178/convert-string-to-int-array/75444297#75444297","title":"Convert String to int[] array","body":"<p>I don't know what language you are working with. But I can tell you in c++.</p>\n<p>character codes of digits start from 48(dec). You can add and remove this value for each element.</p>\n<p>The code could roughly look like this.</p>\n<pre><code>int * _numbers=new int[numbers.size()];\nfor(int i=0;i&lt;numbers.size();i++)\n    _numbers[i]=numbers[i]+48;\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1676357475,"last_edit_date":1676357475,"creation_date":1676357358,"answer_id":75444311,"question_id":75444178,"body_markdown":"The most straightforward way is to create an array variable and loop through the string characters and push them into the array. \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    var str = &quot;123456&quot;;\r\n    var arr = [];\r\n\r\n    for (let n of str) {\r\n      arr.push(parseInt(n))\r\n    }\r\n\r\n    console.log(arr);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","link":"https://stackoverflow.com/questions/75444178/convert-string-to-int-array/75444311#75444311","title":"Convert String to int[] array","body":"<p>The most straightforward way is to create an array variable and loop through the string characters and push them into the array.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var str = \"123456\";\nvar arr = [];\n\nfor (let n of str) {\n  arr.push(parseInt(n))\n}\n\nconsole.log(arr);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"comment_count":0,"score":1,"last_activity_date":1676357367,"creation_date":1676357367,"answer_id":75444314,"question_id":75444178,"body_markdown":"If the above question is for Java. \r\n\r\n     String numbers = &quot;123456&quot;;\r\n        int[] array = new int[numbers.length()];\r\n\r\n            for (int i = 0; i &lt; numbers.length(); i++) {\r\n                array[i] = Character.getNumericValue(numbers.charAt(i));\r\n                System.out.println(&quot;\\n&quot;+array[i]);\r\n            }","link":"https://stackoverflow.com/questions/75444178/convert-string-to-int-array/75444314#75444314","title":"Convert String to int[] array","body":"<p>If the above question is for Java.</p>\n<pre><code> String numbers = &quot;123456&quot;;\n    int[] array = new int[numbers.length()];\n\n        for (int i = 0; i &lt; numbers.length(); i++) {\n            array[i] = Character.getNumericValue(numbers.charAt(i));\n            System.out.println(&quot;\\n&quot;+array[i]);\n        }\n</code></pre>\n"},{"comment_count":0,"score":1,"last_activity_date":1676580819,"creation_date":1676580819,"answer_id":75477808,"question_id":75444178,"body_markdown":"Java 8 one liner would be:\r\n\r\n    int[] integers = Stream.of( numbers.split(&quot;&quot;) )\r\n      .mapToInt(Integer::valueOf)\r\n      .toArray();","link":"https://stackoverflow.com/questions/75444178/convert-string-to-int-array/75477808#75477808","title":"Convert String to int[] array","body":"<p>Java 8 one liner would be:</p>\n<pre><code>int[] integers = Stream.of( numbers.split(&quot;&quot;) )\n  .mapToInt(Integer::valueOf)\n  .toArray();\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1702689352,"creation_date":1702689352,"answer_id":77669501,"question_id":75444178,"body_markdown":"The above answers are more straightforward ways to do achieve this; however, you can also take the substring of the array between a value of i and i+1, parse that string as an integer, and then assign the array at index i to the value of the integer to achieve the same goal. Here is the code below: \r\n\r\n        public class StringtoIntArray {\r\n            public static void main(String[] args) throws Exception \r\n            {\r\n                String numbers = &quot;123456&quot;;\r\n                int[] array = new int[numbers.length()];\r\n\r\n                String temp; \r\n                int holder;\r\n\r\n                for(int i=0;i&lt;numbers.length();i++)\r\n                {\r\n                    temp=numbers.substring(i,i+1);\r\n                    holder = Integer.parseInt(temp);\r\n                    array[i]=holder;\r\n                    System.out.println(array[i]);\r\n                }\r\n            }\r\n        }","link":"https://stackoverflow.com/questions/75444178/convert-string-to-int-array/77669501#77669501","title":"Convert String to int[] array","body":"<p>The above answers are more straightforward ways to do achieve this; however, you can also take the substring of the array between a value of i and i+1, parse that string as an integer, and then assign the array at index i to the value of the integer to achieve the same goal. Here is the code below:</p>\n<pre><code>    public class StringtoIntArray {\n        public static void main(String[] args) throws Exception \n        {\n            String numbers = &quot;123456&quot;;\n            int[] array = new int[numbers.length()];\n\n            String temp; \n            int holder;\n\n            for(int i=0;i&lt;numbers.length();i++)\n            {\n                temp=numbers.substring(i,i+1);\n                holder = Integer.parseInt(temp);\n                array[i]=holder;\n                System.out.println(array[i]);\n            }\n        }\n    }\n</code></pre>\n"}],"comment_count":3,"is_answered":true,"view_count":89,"answer_count":5,"score":0,"last_activity_date":1702689352,"creation_date":1676356113,"last_edit_date":1676579431,"question_id":75444178,"body_markdown":"how could I convert my String to int array? \r\nmy input: \r\n```\r\nString numbers = &quot;123456&quot;;\r\n```\r\nWhat I&#39;d like to reach:\r\n```\r\nInt numbers[]={1,2,3,4,5,6};\r\n```\r\n\r\n\r\n\r\nThat String was splitted from String with this number. ","link":"https://stackoverflow.com/questions/75444178/convert-string-to-int-array","title":"Convert String to int[] array","body":"<p>how could I convert my String to int array?\nmy input:</p>\n<pre><code>String numbers = &quot;123456&quot;;\n</code></pre>\n<p>What I'd like to reach:</p>\n<pre><code>Int numbers[]={1,2,3,4,5,6};\n</code></pre>\n<p>That String was splitted from String with this number.</p>\n"},{"tags":["java","playframework"],"comment_count":0,"is_answered":false,"view_count":65,"answer_count":0,"score":0,"last_activity_date":1702680659,"creation_date":1689351902,"question_id":76689550,"body_markdown":"I&#39;m currently trying to find a way to use a filter to catch all inbound requests and then send the body off somewhere else, per the officaldocumentation here: https://www.playframework.com/documentation/2.8.x/JavaHttpFilters this should be possible as the last section states:\r\n&quot;Play provides a lower level filter API called EssentialFilter that gives you full access to the body of the request. This API allows you to wrap EssentialAction with another action.&quot;\r\n\r\nHowever, when I create an EssentialAction wrapped in my EssentialFilter I&#39;m only given access to the header of the request and the example listed doesn&#39;t really cover how to access the body.\r\n\r\nThis makes sense per this accepted answer: https://stackoverflow.com/questions/25492592/how-to-log-the-body-from-every-request-in-play, but is in conflict with what the official docs state.\r\n\r\nIs there something I&#39;m missing?\r\n\r\n\r\n```java\r\npublic class SendBodyFilter extends EssentialFilter {\r\n    private final Materializer mat;\r\n    \r\n    @Inject\r\n    SendBodyFilter(\r\n            Materializer mat\r\n    ) {\r\n        super();\r\n        this.mat = mat;\r\n    }\r\n    @Override\r\n    public EssentialAction apply(EssentialAction next) {\r\n        return EssentialAction.of(request -&gt; {\r\n            System.out.println(request);\r\n            return next.apply(request);\r\n        });\r\n    }\r\n}\r\n\r\n```\r\n","link":"https://stackoverflow.com/questions/76689550/java-play-using-an-essentialaction-in-an-essentialfilter-to-access-the-body-of","title":"Java Play: Using an EssentialAction in an EssentialFilter to access the body of a request?","body":"<p>I'm currently trying to find a way to use a filter to catch all inbound requests and then send the body off somewhere else, per the officaldocumentation here: <a href=\"https://www.playframework.com/documentation/2.8.x/JavaHttpFilters\" rel=\"nofollow noreferrer\">https://www.playframework.com/documentation/2.8.x/JavaHttpFilters</a> this should be possible as the last section states:\n&quot;Play provides a lower level filter API called EssentialFilter that gives you full access to the body of the request. This API allows you to wrap EssentialAction with another action.&quot;</p>\n<p>However, when I create an EssentialAction wrapped in my EssentialFilter I'm only given access to the header of the request and the example listed doesn't really cover how to access the body.</p>\n<p>This makes sense per this accepted answer: <a href=\"https://stackoverflow.com/questions/25492592/how-to-log-the-body-from-every-request-in-play\">How to log the body from every request in Play?</a>, but is in conflict with what the official docs state.</p>\n<p>Is there something I'm missing?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SendBodyFilter extends EssentialFilter {\n    private final Materializer mat;\n    \n    @Inject\n    SendBodyFilter(\n            Materializer mat\n    ) {\n        super();\n        this.mat = mat;\n    }\n    @Override\n    public EssentialAction apply(EssentialAction next) {\n        return EssentialAction.of(request -&gt; {\n            System.out.println(request);\n            return next.apply(request);\n        });\n    }\n}\n\n</code></pre>\n"},{"tags":["java","windows","active-directory","dacl","sddl"],"comment_count":0,"is_answered":false,"view_count":139,"bounty_amount":200,"answer_count":0,"score":3,"last_activity_date":1702679294,"creation_date":1700812440,"last_edit_date":1700815110,"question_id":77541474,"body_markdown":"Based on [this][1] I use library https://github.com/Tirasa/ADSDDL for manipulating SDDL \r\n\r\n    implementation(&quot;net.tirasa:adsddl:1.9&quot;)\r\n\r\nTo enable flag `user cannot change password` I use following [code line][2]:\r\n\r\n    SDDLHelper.userCannotChangePassword(sddl, true)\r\n\r\nBut when I go to Windows ADAC (Active Directory Administrative Center) I see the message that my aces are not in canonical order and it offers me to reorder them.  \r\nAs a result I get the following aces in DACL:\r\n \r\n\r\n\r\n    P(OA;;[16];4c164200-20c0-11d0-a768-00aa006e0529;;S-1-5-21-1313564838-424579665-4250201628-553)\r\n    (OA;;[16];5f202010-79a5-11d0-9020-00c04fc2d4cf;;S-1-5-21-1313564838-424579665-4250201628-553)\r\n    (OA;;[16];bc0ac240-79a9-11d0-9020-00c04fc2d4cf;;S-1-5-21-1313564838-424579665-4250201628-553)\r\n    (OA;;[16];037088f8-0ae1-11d2-b422-00a0c968f939;;S-1-5-21-1313564838-424579665-4250201628-553)\r\n    (OA;;WP[16];bf967a7f-0de6-11d0-a285-00aa003049e2;;S-1-5-21-1313564838-424579665-4250201628-517)\r\n    (OA;;[16];46a9b11d-60ae-405a-b7e8-ff8a58d456d2;;S-1-5-32-560)\r\n    (OA;;WP[16];6db69a1c-9422-11d1-aebd-0000f80367c1;;S-1-5-32-561)\r\n    (OA;;WP[16];5805bc62-bdc9-4428-a5e2-856a0f4c185e;;S-1-5-32-561)\r\n    (OD;;CR;ab721a53-1e2f-11d0-9819-00aa0040529b;;S-1-1-0)\r\n    (OD;;CR;ab721a53-1e2f-11d0-9819-00aa0040529b;;S-1-5-10)\r\n    (OA;;CR;ab721a54-1e2f-11d0-9819-00aa0040529b;;S-1-5-10)\r\n    (OA;;CR;ab721a56-1e2f-11d0-9819-00aa0040529b;;S-1-5-10)\r\n    (OA;;[16];59ba2f42-79a2-11d0-9020-00c04fc2d3cf;;S-1-5-11)\r\n    (OA;;[16];e48d0154-bcf8-11d1-8702-00c04fb96050;;S-1-5-11)\r\n    (OA;;[16];77b5b886-944a-11d1-aebd-0000f80367c1;;S-1-5-11)\r\n    (OA;;[16];e45795b3-9455-11d1-aebd-0000f80367c1;;S-1-5-11)\r\n    (OA;;WP[16];77b5b886-944a-11d1-aebd-0000f80367c1;;S-1-5-10)\r\n    (OA;;WP[16];e45795b2-9455-11d1-aebd-0000f80367c1;;S-1-5-10)\r\n    (OA;;WP[16];e45795b3-9455-11d1-aebd-0000f80367c1;;S-1-5-10)\r\n    (A;;WOWDRCSDCRWP[223];;;S-1-5-21-1313564838-424579665-4250201628-512)\r\n    (A;;WOWDRCSDCRWP[223];;;S-1-5-32-548)\r\n    (A;;RC;;;S-1-5-11)\r\n    (A;;RC[148];;;S-1-5-10)\r\n    (A;;WOWDRCSDCRWP[223];;;S-1-5-18)\r\n    (OA;CIIOID;[16];4c164200-20c0-11d0-a768-00aa006e0529;4828cc14-1437-45bc-9b07-ad6f015e5f28;S-1-5-32-554)\r\n    (OA;CIID;[16];4c164200-20c0-11d0-a768-00aa006e0529;bf967aba-0de6-11d0-a285-00aa003049e2;S-1-5-32-554)\r\n    (OA;CIIOID;[16];5f202010-79a5-11d0-9020-00c04fc2d4cf;4828cc14-1437-45bc-9b07-ad6f015e5f28;S-1-5-32-554)\r\n    (OA;CIID;[16];5f202010-79a5-11d0-9020-00c04fc2d4cf;bf967aba-0de6-11d0-a285-00aa003049e2;S-1-5-32-554)\r\n    (OA;CIIOID;[16];bc0ac240-79a9-11d0-9020-00c04fc2d4cf;4828cc14-1437-45bc-9b07-ad6f015e5f28;S-1-5-32-554)\r\n    (OA;CIID;[16];bc0ac240-79a9-11d0-9020-00c04fc2d4cf;bf967aba-0de6-11d0-a285-00aa003049e2;S-1-5-32-554)\r\n    (OA;CIIOID;[16];59ba2f42-79a2-11d0-9020-00c04fc2d3cf;4828cc14-1437-45bc-9b07-ad6f015e5f28;S-1-5-32-554)\r\n    (OA;CIID;[16];59ba2f42-79a2-11d0-9020-00c04fc2d3cf;bf967aba-0de6-11d0-a285-00aa003049e2;S-1-5-32-554)\r\n    (OA;CIIOID;[16];037088f8-0ae1-11d2-b422-00a0c968f939;4828cc14-1437-45bc-9b07-ad6f015e5f28;S-1-5-32-554)\r\n    (OA;CIID;[16];037088f8-0ae1-11d2-b422-00a0c968f939;bf967aba-0de6-11d0-a285-00aa003049e2;S-1-5-32-554)\r\n    (OA;CIID;WP[16];5b47d60f-6090-40b2-9f37-2a4de88f3063;;S-1-5-21-1313564838-424579665-4250201628-526)\r\n    (OA;CIID;WP[16];5b47d60f-6090-40b2-9f37-2a4de88f3063;;S-1-5-21-1313564838-424579665-4250201628-527)\r\n    (OA;CIIOID;[8];9b026da6-0d3c-465c-8bee-5199d7165cba;bf967a86-0de6-11d0-a285-00aa003049e2;S-1-3-0)\r\n    (OA;CIIOID;[8];9b026da6-0d3c-465c-8bee-5199d7165cba;bf967a86-0de6-11d0-a285-00aa003049e2;S-1-5-10)\r\n    (OA;CIIOID;[16];b7c69e6d-2cc7-11d2-854e-00a0c983f608;bf967a86-0de6-11d0-a285-00aa003049e2;S-1-5-9)\r\n    (OA;CIIOID;[16];b7c69e6d-2cc7-11d2-854e-00a0c983f608;bf967a9c-0de6-11d0-a285-00aa003049e2;S-1-5-9)\r\n    (OA;CIID;[16];b7c69e6d-2cc7-11d2-854e-00a0c983f608;bf967aba-0de6-11d0-a285-00aa003049e2;S-1-5-9)\r\n    (OA;CIIOID;WP;ea1b7b93-5e48-46d5-bc6c-4df4fda78a35;bf967a86-0de6-11d0-a285-00aa003049e2;S-1-5-10)\r\n    (OA;CIIOID;RC[148];;4828cc14-1437-45bc-9b07-ad6f015e5f28;S-1-5-32-554)\r\n    (OA;CIIOID;RC[148];;bf967a9c-0de6-11d0-a285-00aa003049e2;S-1-5-32-554)\r\n    (OA;CIID;RC[148];;bf967aba-0de6-11d0-a285-00aa003049e2;S-1-5-32-554)\r\n    (OA;CIIDOI;WP[16];3f78c3e5-f79a-46bd-a0b8-9d18116ddc79;;S-1-5-10)\r\n    (OA;CIID;CRWP[16];91e647de-d96f-4b70-9557-d63ff4f3ccd8;;S-1-5-10)\r\n    (A;CIID;WOWDRCSDCRWP[223];;;S-1-5-21-1313564838-424579665-4250201628-519)\r\n    (A;CIID;[4];;;S-1-5-32-554)\r\n    (A;CIID;WOWDRCSDCRWP[157];;;S-1-5-32-544)\r\n\r\nI&#39;ve understood the root cause is in fragment:\r\n\r\n    (OA;;WP[16];5805bc62-bdc9-4428-a5e2-856a0f4c185e;;S-1-5-32-561)\r\n    (OD;;CR;ab721a53-1e2f-11d0-9819-00aa0040529b;;S-1-1-0)\r\n    (OD;;CR;ab721a53-1e2f-11d0-9819-00aa0040529b;;S-1-5-10)\r\n    (OA;;CR;ab721a54-1e2f-11d0-9819-00aa0040529b;;S-1-5-10)\r\n    \r\nAs I understood all `OD` should be before all `OA`. But I want to decide the general issue and implement sorting. Where can I find all rules for sorting ?\r\n\r\nI&#39;ve found [this][3] but I don&#39;t understand what is:\r\n\r\n    Explicit ACEs\r\n    Deny ACEs\r\n    Regular ACEs\r\n    object ACEs\r\n\r\nHow can I identify them in code.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/27980885/2674303\r\n  [2]: https://github.com/Tirasa/ADSDDL/blob/1d92d39e558ca093857fb50d41c5b5fd08a11c76/src/main/java/net/tirasa/adsddl/ntsd/utils/SDDLHelper.java#L82\r\n  [3]: https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-adts/dbfdc00c-1e4b-4165-939b-974e8ea23733","link":"https://stackoverflow.com/questions/77541474/how-to-sort-sddl-dacl-aces-in-canonical-order","title":"How to sort SDDL DACL aces in canonical order?","body":"<p>Based on <a href=\"https://stackoverflow.com/a/27980885/2674303\">this</a> I use library <a href=\"https://github.com/Tirasa/ADSDDL\" rel=\"nofollow noreferrer\">https://github.com/Tirasa/ADSDDL</a> for manipulating SDDL</p>\n<pre><code>implementation(&quot;net.tirasa:adsddl:1.9&quot;)\n</code></pre>\n<p>To enable flag <code>user cannot change password</code> I use following <a href=\"https://github.com/Tirasa/ADSDDL/blob/1d92d39e558ca093857fb50d41c5b5fd08a11c76/src/main/java/net/tirasa/adsddl/ntsd/utils/SDDLHelper.java#L82\" rel=\"nofollow noreferrer\">code line</a>:</p>\n<pre><code>SDDLHelper.userCannotChangePassword(sddl, true)\n</code></pre>\n<p>But when I go to Windows ADAC (Active Directory Administrative Center) I see the message that my aces are not in canonical order and it offers me to reorder them.<br />\nAs a result I get the following aces in DACL:</p>\n<pre><code>P(OA;;[16];4c164200-20c0-11d0-a768-00aa006e0529;;S-1-5-21-1313564838-424579665-4250201628-553)\n(OA;;[16];5f202010-79a5-11d0-9020-00c04fc2d4cf;;S-1-5-21-1313564838-424579665-4250201628-553)\n(OA;;[16];bc0ac240-79a9-11d0-9020-00c04fc2d4cf;;S-1-5-21-1313564838-424579665-4250201628-553)\n(OA;;[16];037088f8-0ae1-11d2-b422-00a0c968f939;;S-1-5-21-1313564838-424579665-4250201628-553)\n(OA;;WP[16];bf967a7f-0de6-11d0-a285-00aa003049e2;;S-1-5-21-1313564838-424579665-4250201628-517)\n(OA;;[16];46a9b11d-60ae-405a-b7e8-ff8a58d456d2;;S-1-5-32-560)\n(OA;;WP[16];6db69a1c-9422-11d1-aebd-0000f80367c1;;S-1-5-32-561)\n(OA;;WP[16];5805bc62-bdc9-4428-a5e2-856a0f4c185e;;S-1-5-32-561)\n(OD;;CR;ab721a53-1e2f-11d0-9819-00aa0040529b;;S-1-1-0)\n(OD;;CR;ab721a53-1e2f-11d0-9819-00aa0040529b;;S-1-5-10)\n(OA;;CR;ab721a54-1e2f-11d0-9819-00aa0040529b;;S-1-5-10)\n(OA;;CR;ab721a56-1e2f-11d0-9819-00aa0040529b;;S-1-5-10)\n(OA;;[16];59ba2f42-79a2-11d0-9020-00c04fc2d3cf;;S-1-5-11)\n(OA;;[16];e48d0154-bcf8-11d1-8702-00c04fb96050;;S-1-5-11)\n(OA;;[16];77b5b886-944a-11d1-aebd-0000f80367c1;;S-1-5-11)\n(OA;;[16];e45795b3-9455-11d1-aebd-0000f80367c1;;S-1-5-11)\n(OA;;WP[16];77b5b886-944a-11d1-aebd-0000f80367c1;;S-1-5-10)\n(OA;;WP[16];e45795b2-9455-11d1-aebd-0000f80367c1;;S-1-5-10)\n(OA;;WP[16];e45795b3-9455-11d1-aebd-0000f80367c1;;S-1-5-10)\n(A;;WOWDRCSDCRWP[223];;;S-1-5-21-1313564838-424579665-4250201628-512)\n(A;;WOWDRCSDCRWP[223];;;S-1-5-32-548)\n(A;;RC;;;S-1-5-11)\n(A;;RC[148];;;S-1-5-10)\n(A;;WOWDRCSDCRWP[223];;;S-1-5-18)\n(OA;CIIOID;[16];4c164200-20c0-11d0-a768-00aa006e0529;4828cc14-1437-45bc-9b07-ad6f015e5f28;S-1-5-32-554)\n(OA;CIID;[16];4c164200-20c0-11d0-a768-00aa006e0529;bf967aba-0de6-11d0-a285-00aa003049e2;S-1-5-32-554)\n(OA;CIIOID;[16];5f202010-79a5-11d0-9020-00c04fc2d4cf;4828cc14-1437-45bc-9b07-ad6f015e5f28;S-1-5-32-554)\n(OA;CIID;[16];5f202010-79a5-11d0-9020-00c04fc2d4cf;bf967aba-0de6-11d0-a285-00aa003049e2;S-1-5-32-554)\n(OA;CIIOID;[16];bc0ac240-79a9-11d0-9020-00c04fc2d4cf;4828cc14-1437-45bc-9b07-ad6f015e5f28;S-1-5-32-554)\n(OA;CIID;[16];bc0ac240-79a9-11d0-9020-00c04fc2d4cf;bf967aba-0de6-11d0-a285-00aa003049e2;S-1-5-32-554)\n(OA;CIIOID;[16];59ba2f42-79a2-11d0-9020-00c04fc2d3cf;4828cc14-1437-45bc-9b07-ad6f015e5f28;S-1-5-32-554)\n(OA;CIID;[16];59ba2f42-79a2-11d0-9020-00c04fc2d3cf;bf967aba-0de6-11d0-a285-00aa003049e2;S-1-5-32-554)\n(OA;CIIOID;[16];037088f8-0ae1-11d2-b422-00a0c968f939;4828cc14-1437-45bc-9b07-ad6f015e5f28;S-1-5-32-554)\n(OA;CIID;[16];037088f8-0ae1-11d2-b422-00a0c968f939;bf967aba-0de6-11d0-a285-00aa003049e2;S-1-5-32-554)\n(OA;CIID;WP[16];5b47d60f-6090-40b2-9f37-2a4de88f3063;;S-1-5-21-1313564838-424579665-4250201628-526)\n(OA;CIID;WP[16];5b47d60f-6090-40b2-9f37-2a4de88f3063;;S-1-5-21-1313564838-424579665-4250201628-527)\n(OA;CIIOID;[8];9b026da6-0d3c-465c-8bee-5199d7165cba;bf967a86-0de6-11d0-a285-00aa003049e2;S-1-3-0)\n(OA;CIIOID;[8];9b026da6-0d3c-465c-8bee-5199d7165cba;bf967a86-0de6-11d0-a285-00aa003049e2;S-1-5-10)\n(OA;CIIOID;[16];b7c69e6d-2cc7-11d2-854e-00a0c983f608;bf967a86-0de6-11d0-a285-00aa003049e2;S-1-5-9)\n(OA;CIIOID;[16];b7c69e6d-2cc7-11d2-854e-00a0c983f608;bf967a9c-0de6-11d0-a285-00aa003049e2;S-1-5-9)\n(OA;CIID;[16];b7c69e6d-2cc7-11d2-854e-00a0c983f608;bf967aba-0de6-11d0-a285-00aa003049e2;S-1-5-9)\n(OA;CIIOID;WP;ea1b7b93-5e48-46d5-bc6c-4df4fda78a35;bf967a86-0de6-11d0-a285-00aa003049e2;S-1-5-10)\n(OA;CIIOID;RC[148];;4828cc14-1437-45bc-9b07-ad6f015e5f28;S-1-5-32-554)\n(OA;CIIOID;RC[148];;bf967a9c-0de6-11d0-a285-00aa003049e2;S-1-5-32-554)\n(OA;CIID;RC[148];;bf967aba-0de6-11d0-a285-00aa003049e2;S-1-5-32-554)\n(OA;CIIDOI;WP[16];3f78c3e5-f79a-46bd-a0b8-9d18116ddc79;;S-1-5-10)\n(OA;CIID;CRWP[16];91e647de-d96f-4b70-9557-d63ff4f3ccd8;;S-1-5-10)\n(A;CIID;WOWDRCSDCRWP[223];;;S-1-5-21-1313564838-424579665-4250201628-519)\n(A;CIID;[4];;;S-1-5-32-554)\n(A;CIID;WOWDRCSDCRWP[157];;;S-1-5-32-544)\n</code></pre>\n<p>I've understood the root cause is in fragment:</p>\n<pre><code>(OA;;WP[16];5805bc62-bdc9-4428-a5e2-856a0f4c185e;;S-1-5-32-561)\n(OD;;CR;ab721a53-1e2f-11d0-9819-00aa0040529b;;S-1-1-0)\n(OD;;CR;ab721a53-1e2f-11d0-9819-00aa0040529b;;S-1-5-10)\n(OA;;CR;ab721a54-1e2f-11d0-9819-00aa0040529b;;S-1-5-10)\n</code></pre>\n<p>As I understood all <code>OD</code> should be before all <code>OA</code>. But I want to decide the general issue and implement sorting. Where can I find all rules for sorting ?</p>\n<p>I've found <a href=\"https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-adts/dbfdc00c-1e4b-4165-939b-974e8ea23733\" rel=\"nofollow noreferrer\">this</a> but I don't understand what is:</p>\n<pre><code>Explicit ACEs\nDeny ACEs\nRegular ACEs\nobject ACEs\n</code></pre>\n<p>How can I identify them in code.</p>\n"},{"tags":["java","xml","camunda","dmn","decision-model-notation"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1702786098,"post_id":77668820,"comment_id":136935716,"body_markdown":"I have been using these classes to parse the dmn file and get the decision:\nDmnEngine dmnEngine = DmnEngineConfiguration.createDefaultDmnEngineConfiguration().buildEngine();\n        DmnDecision decision = dmnEngine.parseDecision(&quot;decision&quot;, inputStream);\n\nI have never used &#39;DecisionService&#39; or &#39;RepositoryService&#39; or even DecisionDefinition. Could you show me how you do it with your DMN File in an inputstream variable?","link":"https://stackoverflow.com/questions/77572748/getting-dmn-decision-variable-list-in-java/77668820#comment136935716_77668820","body":"I have been using these classes to parse the dmn file and get the decision: DmnEngine dmnEngine = DmnEngineConfiguration.createDefaultDmnEngineConfiguration()&zwnj;&#8203;.buildEngine();         DmnDecision decision = dmnEngine.parseDecision(&quot;decision&quot;, inputStream);  I have never used &#39;DecisionService&#39; or &#39;RepositoryService&#39; or even DecisionDefinition. Could you show me how you do it with your DMN File in an inputstream variable?"}],"comment_count":1,"score":0,"last_activity_date":1702674140,"creation_date":1702674140,"answer_id":77668820,"question_id":77572748,"body_markdown":"To retrieve the variable names from a DMN file using the Camunda Java library, you can use the following approach. Note that the Camunda DMN API does not provide a direct method to fetch variable names, so you need to navigate through the DMN model and extract the information.\r\n\r\nAssuming you have a DecisionDefinition object, you can use the following code to retrieve the variable names\r\n\r\n    import org.camunda.bpm.engine.DecisionService;\r\n    import org.camunda.bpm.engine.RepositoryService;\r\n    import org.camunda.bpm.engine.repository.DecisionDefinition;\r\n    import org.camunda.bpm.model.dmn.Dmn;\r\n    import org.camunda.bpm.model.dmn.DmnModelInstance;\r\n    import org.camunda.bpm.model.dmn.instance.Decision;\r\n    import org.camunda.bpm.model.dmn.instance.Input;\r\n    import org.camunda.bpm.model.dmn.instance.InputExpression;\r\n    \r\n    import java.util.Collection;\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n    \r\n    public class DMNVariableExtractor {\r\n    \r\n        public static List&lt;String&gt; getVariableNames(DecisionDefinition decisionDefinition, RepositoryService repositoryService) {\r\n            // Get the DMN model instance for the decision definition\r\n            DmnModelInstance dmnModelInstance = repositoryService.getDmnModelInstance(decisionDefinition.getId());\r\n    \r\n            // Get the decision element from the model\r\n            Decision decision = dmnModelInstance.getModelElementsByType(Decision.class).iterator().next();\r\n    \r\n            // Get the input elements (representing the variables)\r\n            Collection&lt;Input&gt; inputs = decision.getChildElementsByType(Input.class);\r\n    \r\n            // Extract variable names from the input elements\r\n            List&lt;String&gt; variableNames = inputs.stream()\r\n                    .map(input -&gt; {\r\n                        InputExpression inputExpression = input.getChildElementsByType(InputExpression.class).iterator().next();\r\n                        return inputExpression.getTextContent();\r\n                    })\r\n                    .collect(Collectors.toList());\r\n    \r\n            return variableNames;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            // Assuming you have a DecisionService and RepositoryService instance\r\n            DecisionService decisionService = ...; // Initialize your DecisionService\r\n            RepositoryService repositoryService = ...; // Initialize your RepositoryService\r\n    \r\n            // Assuming you have a DecisionDefinition instance\r\n            DecisionDefinition decisionDefinition = decisionService.createDecisionDefinitionQuery().singleResult();\r\n    \r\n            // Get the variable names\r\n            List&lt;String&gt; variableNames = getVariableNames(decisionDefinition, repositoryService);\r\n        }\r\n    }\r\n\r\n","link":"https://stackoverflow.com/questions/77572748/getting-dmn-decision-variable-list-in-java/77668820#77668820","title":"Getting DMN decision variable list in java","body":"<p>To retrieve the variable names from a DMN file using the Camunda Java library, you can use the following approach. Note that the Camunda DMN API does not provide a direct method to fetch variable names, so you need to navigate through the DMN model and extract the information.</p>\n<p>Assuming you have a DecisionDefinition object, you can use the following code to retrieve the variable names</p>\n<pre><code>import org.camunda.bpm.engine.DecisionService;\nimport org.camunda.bpm.engine.RepositoryService;\nimport org.camunda.bpm.engine.repository.DecisionDefinition;\nimport org.camunda.bpm.model.dmn.Dmn;\nimport org.camunda.bpm.model.dmn.DmnModelInstance;\nimport org.camunda.bpm.model.dmn.instance.Decision;\nimport org.camunda.bpm.model.dmn.instance.Input;\nimport org.camunda.bpm.model.dmn.instance.InputExpression;\n\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class DMNVariableExtractor {\n\n    public static List&lt;String&gt; getVariableNames(DecisionDefinition decisionDefinition, RepositoryService repositoryService) {\n        // Get the DMN model instance for the decision definition\n        DmnModelInstance dmnModelInstance = repositoryService.getDmnModelInstance(decisionDefinition.getId());\n\n        // Get the decision element from the model\n        Decision decision = dmnModelInstance.getModelElementsByType(Decision.class).iterator().next();\n\n        // Get the input elements (representing the variables)\n        Collection&lt;Input&gt; inputs = decision.getChildElementsByType(Input.class);\n\n        // Extract variable names from the input elements\n        List&lt;String&gt; variableNames = inputs.stream()\n                .map(input -&gt; {\n                    InputExpression inputExpression = input.getChildElementsByType(InputExpression.class).iterator().next();\n                    return inputExpression.getTextContent();\n                })\n                .collect(Collectors.toList());\n\n        return variableNames;\n    }\n\n    public static void main(String[] args) {\n        // Assuming you have a DecisionService and RepositoryService instance\n        DecisionService decisionService = ...; // Initialize your DecisionService\n        RepositoryService repositoryService = ...; // Initialize your RepositoryService\n\n        // Assuming you have a DecisionDefinition instance\n        DecisionDefinition decisionDefinition = decisionService.createDecisionDefinitionQuery().singleResult();\n\n        // Get the variable names\n        List&lt;String&gt; variableNames = getVariableNames(decisionDefinition, repositoryService);\n    }\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":38,"answer_count":1,"score":0,"last_activity_date":1702674140,"creation_date":1701273764,"last_edit_date":1701275252,"question_id":77572748,"body_markdown":"Given an xml file containing a some DMN decisions, I need to retrieve all of to the variable names process them. If i can&#39;t do this then I can&#39;t know what the name of the variables given by the user are, just the value.\r\nI&#39;ve been using the camunda java library and it doens&#39;t seem very straight forward\r\n\r\n\r\n```\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;definitions xmlns=&quot;http://www.omg.org/spec/DMN/20151101/dmn.xsd&quot; id=&quot;definitions&quot; name=&quot;definitions&quot; namespace=&quot;http://camunda.org/schema/1.0/dmn&quot;&gt;\r\n    &lt;decision id=&quot;decision&quot; name=&quot;Dish&quot;&gt;\r\n        &lt;decisionTable id=&quot;decisionTable&quot;&gt;\r\n            &lt;input id=&quot;input1&quot; label=&quot;Season&quot;&gt;\r\n                &lt;inputExpression id=&quot;inputExpression1&quot; typeRef=&quot;string&quot;&gt;\r\n                    &lt;text&gt;season&lt;/text&gt;\r\n                &lt;/inputExpression&gt;\r\n            &lt;/input&gt;\r\n            &lt;input id=&quot;InputClause_0hmkumv&quot; label=&quot;How many guests&quot;&gt;\r\n                &lt;inputExpression id=&quot;LiteralExpression_0m7s53h&quot; typeRef=&quot;integer&quot;&gt;\r\n                    &lt;text&gt;guestCount&lt;/text&gt;\r\n                &lt;/inputExpression&gt;\r\n            &lt;/input&gt;\r\n            &lt;output id=&quot;output1&quot; label=&quot;Dish&quot; name=&quot;desiredDish&quot; typeRef=&quot;string&quot; /&gt;\r\n            &lt;rule id=&quot;row-950612891-1&quot;&gt;\r\n                &lt;inputEntry id=&quot;UnaryTests_0c1o054&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&quot;Fall&quot;]]&gt;&lt;/text&gt;\r\n                &lt;/inputEntry&gt;\r\n                &lt;inputEntry id=&quot;UnaryTests_1lod0sz&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&lt;= 8]]&gt;&lt;/text&gt;\r\n                &lt;/inputEntry&gt;\r\n                &lt;outputEntry id=&quot;LiteralExpression_065u3ym&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&quot;Spareribs&quot;]]&gt;&lt;/text&gt;\r\n                &lt;/outputEntry&gt;\r\n            &lt;/rule&gt;\r\n            &lt;rule id=&quot;row-950612891-2&quot;&gt;\r\n                &lt;inputEntry id=&quot;UnaryTests_0u1z4ho&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&quot;Winter&quot;]]&gt;&lt;/text&gt;\r\n                &lt;/inputEntry&gt;\r\n                &lt;inputEntry id=&quot;UnaryTests_1euytqf&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&lt;= 8]]&gt;&lt;/text&gt;\r\n                &lt;/inputEntry&gt;\r\n                &lt;outputEntry id=&quot;LiteralExpression_198frve&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&quot;Roastbeef&quot;]]&gt;&lt;/text&gt;\r\n                &lt;/outputEntry&gt;\r\n            &lt;/rule&gt;\r\n            &lt;rule id=&quot;row-950612891-3&quot;&gt;\r\n                &lt;inputEntry id=&quot;UnaryTests_1vn9t5c&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&quot;Spring&quot;]]&gt;&lt;/text&gt;\r\n                &lt;/inputEntry&gt;\r\n                &lt;inputEntry id=&quot;UnaryTests_1bbbmvu&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&lt;= 4]]&gt;&lt;/text&gt;\r\n                &lt;/inputEntry&gt;\r\n                &lt;outputEntry id=&quot;LiteralExpression_1bewepn&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&quot;Dry Aged Gourmet Steak&quot;]]&gt;&lt;/text&gt;\r\n                &lt;/outputEntry&gt;\r\n            &lt;/rule&gt;\r\n            &lt;rule id=&quot;row-950612891-4&quot;&gt;\r\n                &lt;description&gt;Save money&lt;/description&gt;\r\n                &lt;inputEntry id=&quot;UnaryTests_0ogofox&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&quot;Spring&quot;]]&gt;&lt;/text&gt;\r\n                &lt;/inputEntry&gt;\r\n                &lt;inputEntry id=&quot;UnaryTests_0c60gjz&quot;&gt;\r\n                    &lt;text&gt;[5..8]&lt;/text&gt;\r\n                &lt;/inputEntry&gt;\r\n                &lt;outputEntry id=&quot;LiteralExpression_1lahvj7&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&quot;Steak&quot;]]&gt;&lt;/text&gt;\r\n                &lt;/outputEntry&gt;\r\n            &lt;/rule&gt;\r\n            &lt;rule id=&quot;row-950612891-5&quot;&gt;\r\n                &lt;description&gt;Less effort&lt;/description&gt;\r\n                &lt;inputEntry id=&quot;UnaryTests_1774yme&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&quot;Fall&quot;, &quot;Winter&quot;, &quot;Spring&quot;]]&gt;&lt;/text&gt;\r\n                &lt;/inputEntry&gt;\r\n                &lt;inputEntry id=&quot;UnaryTests_01rn17i&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&gt; 8]]&gt;&lt;/text&gt;\r\n                &lt;/inputEntry&gt;\r\n                &lt;outputEntry id=&quot;LiteralExpression_0jpd7hr&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&quot;Stew&quot;]]&gt;&lt;/text&gt;\r\n                &lt;/outputEntry&gt;\r\n            &lt;/rule&gt;\r\n            &lt;rule id=&quot;row-950612891-6&quot;&gt;\r\n                &lt;description&gt;Hey, why not!?&lt;/description&gt;\r\n                &lt;inputEntry id=&quot;UnaryTests_0ifdx8k&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&quot;Summer&quot;]]&gt;&lt;/text&gt;\r\n                &lt;/inputEntry&gt;\r\n                &lt;inputEntry id=&quot;UnaryTests_0c8ym7l&quot;&gt;\r\n                    &lt;text&gt;&lt;/text&gt;\r\n                &lt;/inputEntry&gt;\r\n                &lt;outputEntry id=&quot;LiteralExpression_08d4mb6&quot;&gt;\r\n                    &lt;text&gt;&lt;![CDATA[&quot;Light Salad and a nice Steak&quot;]]&gt;&lt;/text&gt;\r\n                &lt;/outputEntry&gt;\r\n            &lt;/rule&gt;\r\n        &lt;/decisionTable&gt;\r\n    &lt;/decision&gt;\r\n&lt;/definitions&gt;```\r\n\r\n\r\nabove is the following dmn file I took from the internet.\r\nIt contains 2 variables; Season and guestCount\r\nI already knew this so in my java file I simply did \r\n```\r\n\r\n            VariableMap variables = Variables\r\n                    .putValue(&quot;season&quot;, season)\r\n                    .putValue(&quot;guestCount&quot;, guestCount);```\r\n\r\nBut what if I didn&#39;t do this? Every example i come accross on camunda&#39;s github already has the names of the variables hard-coded into the example. No example I saw fetched the number and the name of these variables. Do you know if there is any built-in function for the camunda-engine in java?\r\n\r\nWent online trying to see some examples of people fetching these automatically from a java file. Asked AI to help me only to be given\r\n```List&lt;DecisionInputImpl&gt; decisionInputs = decisionDefinition.getInputs();```\r\nWhere the path of their &quot;DecisionInputImpl&quot; was non-existent\r\n(example of non existent path : ```import org.camunda.bpm.engine.DecisionService;```)\r\nscoured the forums and saw someone advise someone else to do a rest something but I didn&#39;t really understood","link":"https://stackoverflow.com/questions/77572748/getting-dmn-decision-variable-list-in-java","title":"Getting DMN decision variable list in java","body":"<p>Given an xml file containing a some DMN decisions, I need to retrieve all of to the variable names process them. If i can't do this then I can't know what the name of the variables given by the user are, just the value.\nI've been using the camunda java library and it doens't seem very straight forward</p>\n<pre><code>\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;definitions xmlns=&quot;http://www.omg.org/spec/DMN/20151101/dmn.xsd&quot; id=&quot;definitions&quot; name=&quot;definitions&quot; namespace=&quot;http://camunda.org/schema/1.0/dmn&quot;&gt;\n    &lt;decision id=&quot;decision&quot; name=&quot;Dish&quot;&gt;\n        &lt;decisionTable id=&quot;decisionTable&quot;&gt;\n            &lt;input id=&quot;input1&quot; label=&quot;Season&quot;&gt;\n                &lt;inputExpression id=&quot;inputExpression1&quot; typeRef=&quot;string&quot;&gt;\n                    &lt;text&gt;season&lt;/text&gt;\n                &lt;/inputExpression&gt;\n            &lt;/input&gt;\n            &lt;input id=&quot;InputClause_0hmkumv&quot; label=&quot;How many guests&quot;&gt;\n                &lt;inputExpression id=&quot;LiteralExpression_0m7s53h&quot; typeRef=&quot;integer&quot;&gt;\n                    &lt;text&gt;guestCount&lt;/text&gt;\n                &lt;/inputExpression&gt;\n            &lt;/input&gt;\n            &lt;output id=&quot;output1&quot; label=&quot;Dish&quot; name=&quot;desiredDish&quot; typeRef=&quot;string&quot; /&gt;\n            &lt;rule id=&quot;row-950612891-1&quot;&gt;\n                &lt;inputEntry id=&quot;UnaryTests_0c1o054&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&quot;Fall&quot;]]&gt;&lt;/text&gt;\n                &lt;/inputEntry&gt;\n                &lt;inputEntry id=&quot;UnaryTests_1lod0sz&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&lt;= 8]]&gt;&lt;/text&gt;\n                &lt;/inputEntry&gt;\n                &lt;outputEntry id=&quot;LiteralExpression_065u3ym&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&quot;Spareribs&quot;]]&gt;&lt;/text&gt;\n                &lt;/outputEntry&gt;\n            &lt;/rule&gt;\n            &lt;rule id=&quot;row-950612891-2&quot;&gt;\n                &lt;inputEntry id=&quot;UnaryTests_0u1z4ho&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&quot;Winter&quot;]]&gt;&lt;/text&gt;\n                &lt;/inputEntry&gt;\n                &lt;inputEntry id=&quot;UnaryTests_1euytqf&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&lt;= 8]]&gt;&lt;/text&gt;\n                &lt;/inputEntry&gt;\n                &lt;outputEntry id=&quot;LiteralExpression_198frve&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&quot;Roastbeef&quot;]]&gt;&lt;/text&gt;\n                &lt;/outputEntry&gt;\n            &lt;/rule&gt;\n            &lt;rule id=&quot;row-950612891-3&quot;&gt;\n                &lt;inputEntry id=&quot;UnaryTests_1vn9t5c&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&quot;Spring&quot;]]&gt;&lt;/text&gt;\n                &lt;/inputEntry&gt;\n                &lt;inputEntry id=&quot;UnaryTests_1bbbmvu&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&lt;= 4]]&gt;&lt;/text&gt;\n                &lt;/inputEntry&gt;\n                &lt;outputEntry id=&quot;LiteralExpression_1bewepn&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&quot;Dry Aged Gourmet Steak&quot;]]&gt;&lt;/text&gt;\n                &lt;/outputEntry&gt;\n            &lt;/rule&gt;\n            &lt;rule id=&quot;row-950612891-4&quot;&gt;\n                &lt;description&gt;Save money&lt;/description&gt;\n                &lt;inputEntry id=&quot;UnaryTests_0ogofox&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&quot;Spring&quot;]]&gt;&lt;/text&gt;\n                &lt;/inputEntry&gt;\n                &lt;inputEntry id=&quot;UnaryTests_0c60gjz&quot;&gt;\n                    &lt;text&gt;[5..8]&lt;/text&gt;\n                &lt;/inputEntry&gt;\n                &lt;outputEntry id=&quot;LiteralExpression_1lahvj7&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&quot;Steak&quot;]]&gt;&lt;/text&gt;\n                &lt;/outputEntry&gt;\n            &lt;/rule&gt;\n            &lt;rule id=&quot;row-950612891-5&quot;&gt;\n                &lt;description&gt;Less effort&lt;/description&gt;\n                &lt;inputEntry id=&quot;UnaryTests_1774yme&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&quot;Fall&quot;, &quot;Winter&quot;, &quot;Spring&quot;]]&gt;&lt;/text&gt;\n                &lt;/inputEntry&gt;\n                &lt;inputEntry id=&quot;UnaryTests_01rn17i&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&gt; 8]]&gt;&lt;/text&gt;\n                &lt;/inputEntry&gt;\n                &lt;outputEntry id=&quot;LiteralExpression_0jpd7hr&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&quot;Stew&quot;]]&gt;&lt;/text&gt;\n                &lt;/outputEntry&gt;\n            &lt;/rule&gt;\n            &lt;rule id=&quot;row-950612891-6&quot;&gt;\n                &lt;description&gt;Hey, why not!?&lt;/description&gt;\n                &lt;inputEntry id=&quot;UnaryTests_0ifdx8k&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&quot;Summer&quot;]]&gt;&lt;/text&gt;\n                &lt;/inputEntry&gt;\n                &lt;inputEntry id=&quot;UnaryTests_0c8ym7l&quot;&gt;\n                    &lt;text&gt;&lt;/text&gt;\n                &lt;/inputEntry&gt;\n                &lt;outputEntry id=&quot;LiteralExpression_08d4mb6&quot;&gt;\n                    &lt;text&gt;&lt;![CDATA[&quot;Light Salad and a nice Steak&quot;]]&gt;&lt;/text&gt;\n                &lt;/outputEntry&gt;\n            &lt;/rule&gt;\n        &lt;/decisionTable&gt;\n    &lt;/decision&gt;\n&lt;/definitions&gt;```\n\n\nabove is the following dmn file I took from the internet.\nIt contains 2 variables; Season and guestCount\nI already knew this so in my java file I simply did \n</code></pre>\n<pre><code>        VariableMap variables = Variables\n                .putValue(&quot;season&quot;, season)\n                .putValue(&quot;guestCount&quot;, guestCount);```\n</code></pre>\n<p>But what if I didn't do this? Every example i come accross on camunda's github already has the names of the variables hard-coded into the example. No example I saw fetched the number and the name of these variables. Do you know if there is any built-in function for the camunda-engine in java?</p>\n<p>Went online trying to see some examples of people fetching these automatically from a java file. Asked AI to help me only to be given\n<code>List&lt;DecisionInputImpl&gt; decisionInputs = decisionDefinition.getInputs();</code>\nWhere the path of their &quot;DecisionInputImpl&quot; was non-existent\n(example of non existent path : <code>import org.camunda.bpm.engine.DecisionService;</code>)\nscoured the forums and saw someone advise someone else to do a rest something but I didn't really understood</p>\n"},{"tags":["java","string","file","char","bufferedreader"],"comments":[{"score":1,"post_type":"question","creation_date":1700478781,"post_id":77515326,"comment_id":136655399,"body_markdown":"A `readline()` doesn&#39;t include the linebreak characters, presumably, `wc` does count them. And no, you can&#39;t naively count 2 characters for each lines, because that will depend on what the actual line terminator is of the file (e.g. `\\r\\n` or `\\n`).","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file#comment136655399_77515326","body":"A <code>readline()</code> doesn&#39;t include the linebreak characters, presumably, <code>wc</code> does count them. And no, you can&#39;t naively count 2 characters for each lines, because that will depend on what the actual line terminator is of the file (e.g. <code>\\r\\n</code> or <code>\\n</code>)."},{"score":0,"post_type":"question","creation_date":1700478815,"post_id":77515326,"comment_id":136655406,"body_markdown":"Indeed. I am aware of the issue. If I can&#39;t naively count 2 chars per line, then what is the correct method?","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file#comment136655406_77515326","body":"Indeed. I am aware of the issue. If I can&#39;t naively count 2 chars per line, then what is the correct method?"},{"score":0,"post_type":"question","creation_date":1700478943,"post_id":77515326,"comment_id":136655428,"body_markdown":"And maybe that off-by-one is due to you not counting the BOM?","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file#comment136655428_77515326","body":"And maybe that off-by-one is due to you not counting the BOM?"},{"score":0,"post_type":"question","creation_date":1700479004,"post_id":77515326,"comment_id":136655440,"body_markdown":"I checked on a single-line file and I was always counting one more character than wc for those files. Eventually I figured that it was probably the BOM.","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file#comment136655440_77515326","body":"I checked on a single-line file and I was always counting one more character than wc for those files. Eventually I figured that it was probably the BOM."},{"score":0,"post_type":"question","creation_date":1700479035,"post_id":77515326,"comment_id":136655446,"body_markdown":"Read the file character by character, and decide what to do (e.g. count character, count line for `\\r` or `\\n`, but not `\\n` preceded by `\\r`, etc).","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file#comment136655446_77515326","body":"Read the file character by character, and decide what to do (e.g. count character, count line for <code>\\r</code> or <code>\\n</code>, but not <code>\\n</code> preceded by <code>\\r</code>, etc)."},{"score":0,"post_type":"question","creation_date":1700479279,"post_id":77515326,"comment_id":136655481,"body_markdown":"Actually, looking at the `BufferedReader` docs, I can see that: `A line is considered to be terminated by any one of a line feed (&#39;\\n&#39;), a carriage return (&#39;\\r&#39;), or a carriage return followed immediately by a linefeed.`\n\nIn that case, I think I may be able to use the &#39;naive&#39; method after all? Or have I misunderstood something?","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file#comment136655481_77515326","body":"Actually, looking at the <code>BufferedReader</code> docs, I can see that: <code>A line is considered to be terminated by any one of a line feed (&#39;\\n&#39;), a carriage return (&#39;\\r&#39;), or a carriage return followed immediately by a linefeed.</code>  In that case, I think I may be able to use the &#39;naive&#39; method after all? Or have I misunderstood something?"},{"score":0,"post_type":"question","creation_date":1700479416,"post_id":77515326,"comment_id":136655503,"body_markdown":"You will miscount if the file has a different line-ending than you expected.","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file#comment136655503_77515326","body":"You will miscount if the file has a different line-ending than you expected."},{"score":0,"post_type":"question","creation_date":1700479513,"post_id":77515326,"comment_id":136655520,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/255994/discussion-between-mick-mccarthy-and-mark-rotteveel).","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file#comment136655520_77515326","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/255994/discussion-between-mick-mccarthy-and-mark-rotteveel\">continue this discussion in chat</a>."},{"score":0,"post_type":"question","creation_date":1700552799,"post_id":77515326,"comment_id":136665507,"body_markdown":"It seems wc is counting `\\r` as a character and you&#39;re not","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file#comment136665507_77515326","body":"It seems wc is counting <code>\\r</code> as a character and you&#39;re not"},{"score":1,"post_type":"question","creation_date":1700559208,"post_id":77515326,"comment_id":136666545,"body_markdown":"The BOM is at the beginning of the file, not on every line.","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file#comment136666545_77515326","body":"The BOM is at the beginning of the file, not on every line."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1700733164,"post_id":77521161,"comment_id":136691626,"body_markdown":"I don&#39;t think the missing BOM is the missing character - when I run it, my code consistently counts 1 extra character when compared to wc on the first line of a text file. So I think that wc is not counting the BOM. Otherwise your answer seems correct though, thanks very much.","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file/77521161#comment136691626_77521161","body":"I don&#39;t think the missing BOM is the missing character - when I run it, my code consistently counts 1 extra character when compared to wc on the first line of a text file. So I think that wc is not counting the BOM. Otherwise your answer seems correct though, thanks very much."},{"score":0,"post_type":"answer","creation_date":1700761521,"post_id":77521161,"comment_id":136696718,"body_markdown":"Can you show the ouptut of your code for one of those files with only one line, the output for wc and the result of `ls -l` for that file in the question? Also, a hexdump of the file: `xxd &lt;file&gt;`? So I (and others) can try to reproduce and improve the answer. Thanks.","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file/77521161#comment136696718_77521161","body":"Can you show the ouptut of your code for one of those files with only one line, the output for wc and the result of <code>ls -l</code> for that file in the question? Also, a hexdump of the file: <code>xxd &lt;file&gt;</code>? So I (and others) can try to reproduce and improve the answer. Thanks."},{"score":0,"post_type":"answer","creation_date":1700846300,"post_id":77521161,"comment_id":136706771,"body_markdown":"Unable to reproduce for a one-line file. Not sure now where I got that from. However I believe that editing the text file to trim it down to one line is removing the BOM automatically. Some quirk of my IDE maybe. Hex dump above if you&#39;re interested, but I think if your solution gives the correct answer then I&#39;m not too worried - haven&#39;t gotten round to implementing yet :)","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file/77521161#comment136706771_77521161","body":"Unable to reproduce for a one-line file. Not sure now where I got that from. However I believe that editing the text file to trim it down to one line is removing the BOM automatically. Some quirk of my IDE maybe. Hex dump above if you&#39;re interested, but I think if your solution gives the correct answer then I&#39;m not too worried - haven&#39;t gotten round to implementing yet :)"},{"score":0,"post_type":"answer","creation_date":1700998857,"post_id":77521161,"comment_id":136718314,"body_markdown":"Update: Works like a charm! You can actually ditch the `int r` entirely too, since you&#39;re not actually using it, and just go `while((reader.read()) &gt; 0)...` etc. Thanks for your help.","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file/77521161#comment136718314_77521161","body":"Update: Works like a charm! You can actually ditch the <code>int r</code> entirely too, since you&#39;re not actually using it, and just go <code>while((reader.read()) &gt; 0)...</code> etc. Thanks for your help."},{"score":0,"post_type":"answer","creation_date":1702662456,"post_id":77521161,"comment_id":136926437,"body_markdown":"Yes @MickMcCarthy, thank you, it was a reminder of when I was thinking the method would count all things in one pass. I just simplified the code.","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file/77521161#comment136926437_77521161","body":"Yes @MickMcCarthy, thank you, it was a reminder of when I was thinking the method would count all things in one pass. I just simplified the code."}],"comment_count":5,"score":1,"last_activity_date":1702662361,"last_edit_date":1702662361,"creation_date":1700553603,"answer_id":77521161,"question_id":77515326,"body_markdown":"It seems wc is counting `\\r` and `\\n` as a character and you&#39;re not. \r\n\r\nAdd to that the BOM you are ignoring and it gives the difference you are seeing. \r\n\r\nYou should probably not be reading by line if you want to count the `\\r` and the `\\n`. If that&#39;s the case, I would read by character, and then keep a state every time you read a `\\r` to ignore the following `\\n` to increment the number of lines. Actually, it seems you are making several passes, one for the lines, another for the characters, and I guess another for the words.\r\n\r\nSo you just need this:\r\n\r\n```java\r\npublic static long countChars(File inputFile) {\r\n    long count = 0;\r\n\r\n    try (Reader reader = new FileReader(inputFile)) {\r\n        while (reader.read() &gt; 0) count ++;\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n    return count;\r\n}\r\n```\r\n\r\nBut you could solve it in one pass with the suggestion I made about the state for saying the last read was a `\\r` for not counting the following `\\n`.\r\n\r\n","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file/77521161#77521161","title":"Counting the correct number of line breaks in a text file","body":"<p>It seems wc is counting <code>\\r</code> and <code>\\n</code> as a character and you're not.</p>\n<p>Add to that the BOM you are ignoring and it gives the difference you are seeing.</p>\n<p>You should probably not be reading by line if you want to count the <code>\\r</code> and the <code>\\n</code>. If that's the case, I would read by character, and then keep a state every time you read a <code>\\r</code> to ignore the following <code>\\n</code> to increment the number of lines. Actually, it seems you are making several passes, one for the lines, another for the characters, and I guess another for the words.</p>\n<p>So you just need this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static long countChars(File inputFile) {\n    long count = 0;\n\n    try (Reader reader = new FileReader(inputFile)) {\n        while (reader.read() &gt; 0) count ++;\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    return count;\n}\n</code></pre>\n<p>But you could solve it in one pass with the suggestion I made about the state for saying the last read was a <code>\\r</code> for not counting the following <code>\\n</code>.</p>\n"},{"comment_count":0,"score":1,"last_activity_date":1700934186,"last_edit_date":1700934186,"creation_date":1700889215,"answer_id":77546718,"question_id":77515326,"body_markdown":"&gt; _&quot;... Why are there two line breaks per line rather than per one? Surely every line has a line break at the end of it? ...&quot;_\r\n\r\nThere is a full article on _Wikipedia_ regarding this exact situation.\\\r\n_[Wikipedia &amp;ndash; Newline](https://en.wikipedia.org/wiki/Newline)_.\r\n\r\n&gt; _&quot;... What is the extra single character? ...&quot;_\r\n\r\nThat, I&#39;m unsure of.&amp;nbsp; Possibly an extra new-line delimiter, or even a _null_.\\\r\nOr, maybe the result of some type of encoding and decoding process.\r\n\r\n&gt; _&quot;... Is it naive to simply double the line count and add it onto the character count (and then +1)? Will this trip me up in some edge case somehow? ...&quot;_\r\n\r\nI wouldn&#39;t.&amp;nbsp;  It&#39;s a lot simpler to just re-evaluate.\r\n\r\nFor reference, here is an example of how I would count the, _&quot;... number of lines, bytes, words and characters&quot;_.\r\n\r\n```java\r\nBufferedReader r = null;\r\ntry {\r\n    r = new BufferedReader(new FileReader(&quot;files/pg132.txt&quot;));\r\n    Pattern p = Pattern.compile(&quot;[\\\\w&#39;-]+&quot;);\r\n    Matcher m;\r\n    String s;\r\n    int c, lines, words, chars, cr, lf;\r\n    lines = words = chars = cr = lf = 0;\r\n    while ((c = r.read()) != -1) {\r\n        chars++;\r\n        switch (c) {\r\n            case &#39;\\r&#39; -&gt; cr++;\r\n            case &#39;\\n&#39; -&gt; lf++;\r\n        }\r\n    }\r\n    r.close();\r\n    r = new BufferedReader(new FileReader(&quot;files/pg132.txt&quot;));\r\n    while ((s = r.readLine()) != null) {\r\n        lines++;\r\n        m = p.matcher(s);\r\n        while (m.find()) words++;\r\n    }\r\n    out.printf(&quot;%,7d lines%n&quot;, lines);\r\n    out.printf(&quot;%,7d words%n&quot;, words);\r\n    out.printf(&quot;%,7d chars%n&quot;, chars);\r\n    out.printf(&quot;%,7d cr%n&quot;, cr);\r\n    out.printf(&quot;%,7d lf%n&quot;, lf);\r\n} catch (IOException e) {\r\n    e.printStackTrace();\r\n} finally {\r\n    if (r != null) r.close();\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n  7,145 lines\r\n 59,350 words\r\n339,292 chars\r\n  7,145 cr\r\n  7,145 lf\r\n```","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file/77546718#77546718","title":"Counting the correct number of line breaks in a text file","body":"<blockquote>\n<p><em>&quot;... Why are there two line breaks per line rather than per one? Surely every line has a line break at the end of it? ...&quot;</em></p>\n</blockquote>\n<p>There is a full article on <em>Wikipedia</em> regarding this exact situation.<br />\n<em><a href=\"https://en.wikipedia.org/wiki/Newline\" rel=\"nofollow noreferrer\">Wikipedia – Newline</a></em>.</p>\n<blockquote>\n<p><em>&quot;... What is the extra single character? ...&quot;</em></p>\n</blockquote>\n<p>That, I'm unsure of.  Possibly an extra new-line delimiter, or even a <em>null</em>.<br />\nOr, maybe the result of some type of encoding and decoding process.</p>\n<blockquote>\n<p><em>&quot;... Is it naive to simply double the line count and add it onto the character count (and then +1)? Will this trip me up in some edge case somehow? ...&quot;</em></p>\n</blockquote>\n<p>I wouldn't.   It's a lot simpler to just re-evaluate.</p>\n<p>For reference, here is an example of how I would count the, <em>&quot;... number of lines, bytes, words and characters&quot;</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>BufferedReader r = null;\ntry {\n    r = new BufferedReader(new FileReader(&quot;files/pg132.txt&quot;));\n    Pattern p = Pattern.compile(&quot;[\\\\w'-]+&quot;);\n    Matcher m;\n    String s;\n    int c, lines, words, chars, cr, lf;\n    lines = words = chars = cr = lf = 0;\n    while ((c = r.read()) != -1) {\n        chars++;\n        switch (c) {\n            case '\\r' -&gt; cr++;\n            case '\\n' -&gt; lf++;\n        }\n    }\n    r.close();\n    r = new BufferedReader(new FileReader(&quot;files/pg132.txt&quot;));\n    while ((s = r.readLine()) != null) {\n        lines++;\n        m = p.matcher(s);\n        while (m.find()) words++;\n    }\n    out.printf(&quot;%,7d lines%n&quot;, lines);\n    out.printf(&quot;%,7d words%n&quot;, words);\n    out.printf(&quot;%,7d chars%n&quot;, chars);\n    out.printf(&quot;%,7d cr%n&quot;, cr);\n    out.printf(&quot;%,7d lf%n&quot;, lf);\n} catch (IOException e) {\n    e.printStackTrace();\n} finally {\n    if (r != null) r.close();\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>  7,145 lines\n 59,350 words\n339,292 chars\n  7,145 cr\n  7,145 lf\n</code></pre>\n"}],"comment_count":10,"is_answered":true,"view_count":90,"answer_count":2,"score":0,"last_activity_date":1702662361,"creation_date":1700477960,"last_edit_date":1700845980,"question_id":77515326,"body_markdown":"I&#39;m working through the first exercise in [John Crickett&#39;s coding challenges][1], which is to create a `wc` clone that counts the number of lines, bytes, words and characters in a text file. I&#39;m on Step 4, counting characters.\r\n\r\nMy code so far is as follows:\r\n\r\n    public static long countChars(File inputFile) {\r\n        long count = 0;\r\n\r\n        try (BufferedReader reader = new BufferedReader(new FileReader(inputFile))) {\r\n            String line;\r\n            while ((line = reader.readLine()) != null)\r\n                {\r\n                    line = line.replaceAll(&quot;\\uFEFF&quot;,&quot;&quot;); // Remove BOM\r\n                    count += line.length();\r\n                }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return count;\r\n    }\r\n\r\nThe issue is that `wc` returns an output of `339292`, whereas my code is returning `325001`. My initial suspicion was that my code was simply ignoring line break characters, and I noticed something interesting. The difference between the output of `wc` and my own code&#39;s output is `14291` missing characters, which is double the number of lines plus one.\r\n\r\nI am trying to understand the following:\r\n\r\n1. Why are there two line breaks per line rather than per one? Surely every line has a line break at the end of it?\r\n2. What is the extra single character?\r\n3. Is it naive to simply double the line count and add it onto the character count (and then +1)? Will this trip me up in some edge case somehow?\r\n\r\n----------------\r\n\r\nSome of the behaviour is a bit strange here. When I get the code to print out the character count for `theArtOfWar.txt` line by line, without the line of code that removes the BOM, it gives 46 for the character count of the first line. Then when I change it to remove the BOM, it gives 45 , which is what `wc` gives too.\r\n\r\nHowever, the same behaviour is not reproducible when I remove every line except the first line in a file called `theArtOfWarFirstLine.txt`. In that case, my code and `wc` both give 45, regardless of whether I include the line removing the BOM. It&#39;s like the act of removing every line except the first one removed the BOM as well.\r\n\r\nHex dump:\r\n\r\n**The Art of War:**\r\n(note: just the first ten lines of the hex dump, the whole thing was far too long)\r\n\r\n    00000000: efbb bf54 6865 2050 726f 6a65 6374 2047  ...The Project G\r\n    00000010: 7574 656e 6265 7267 2065 426f 6f6b 206f  utenberg eBook o\r\n    00000020: 6620 5468 6520 4172 7420 6f66 2057 6172  f The Art of War\r\n    00000030: 0d0a 2020 2020 0d0a 5468 6973 2065 626f  ..    ..This ebo\r\n    00000040: 6f6b 2069 7320 666f 7220 7468 6520 7573  ok is for the us\r\n    00000050: 6520 6f66 2061 6e79 6f6e 6520 616e 7977  e of anyone anyw\r\n    00000060: 6865 7265 2069 6e20 7468 6520 556e 6974  here in the Unit\r\n    00000070: 6564 2053 7461 7465 7320 616e 640d 0a6d  ed States and..m\r\n    00000080: 6f73 7420 6f74 6865 7220 7061 7274 7320  ost other parts \r\n    00000090: 6f66 2074 6865 2077 6f72 6c64 2061 7420  of the world at \r\n    000000a0: 6e6f 2063 6f73 7420 616e 6420 7769 7468  no cost and with\r\n\r\n**The Art of War (first line):**\r\n\r\n    00000000: 5468 6520 5072 6f6a 6563 7420 4775 7465  The Project Gute\r\n    00000010: 6e62 6572 6720 6542 6f6f 6b20 6f66 2054  nberg eBook of T\r\n    00000020: 6865 2041 7274 206f 6620 5761 72         he Art of War\r\n\r\nI can for sure see that there is *something* in the original that is missing from the start of the &#39;first line&#39; version. I suspect it&#39;s the BOM. It&#39;s hard to test if `wc` ignores the BOM or not without manually inserting it into one of these one liner text files, which I&#39;m not sure how to do.\r\n\r\n  [1]: https://codingchallenges.fyi/challenges/challenge-wc/","link":"https://stackoverflow.com/questions/77515326/counting-the-correct-number-of-line-breaks-in-a-text-file","title":"Counting the correct number of line breaks in a text file","body":"<p>I'm working through the first exercise in <a href=\"https://codingchallenges.fyi/challenges/challenge-wc/\" rel=\"nofollow noreferrer\">John Crickett's coding challenges</a>, which is to create a <code>wc</code> clone that counts the number of lines, bytes, words and characters in a text file. I'm on Step 4, counting characters.</p>\n<p>My code so far is as follows:</p>\n<pre><code>public static long countChars(File inputFile) {\n    long count = 0;\n\n    try (BufferedReader reader = new BufferedReader(new FileReader(inputFile))) {\n        String line;\n        while ((line = reader.readLine()) != null)\n            {\n                line = line.replaceAll(&quot;\\uFEFF&quot;,&quot;&quot;); // Remove BOM\n                count += line.length();\n            }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n    return count;\n}\n</code></pre>\n<p>The issue is that <code>wc</code> returns an output of <code>339292</code>, whereas my code is returning <code>325001</code>. My initial suspicion was that my code was simply ignoring line break characters, and I noticed something interesting. The difference between the output of <code>wc</code> and my own code's output is <code>14291</code> missing characters, which is double the number of lines plus one.</p>\n<p>I am trying to understand the following:</p>\n<ol>\n<li>Why are there two line breaks per line rather than per one? Surely every line has a line break at the end of it?</li>\n<li>What is the extra single character?</li>\n<li>Is it naive to simply double the line count and add it onto the character count (and then +1)? Will this trip me up in some edge case somehow?</li>\n</ol>\n<hr />\n<p>Some of the behaviour is a bit strange here. When I get the code to print out the character count for <code>theArtOfWar.txt</code> line by line, without the line of code that removes the BOM, it gives 46 for the character count of the first line. Then when I change it to remove the BOM, it gives 45 , which is what <code>wc</code> gives too.</p>\n<p>However, the same behaviour is not reproducible when I remove every line except the first line in a file called <code>theArtOfWarFirstLine.txt</code>. In that case, my code and <code>wc</code> both give 45, regardless of whether I include the line removing the BOM. It's like the act of removing every line except the first one removed the BOM as well.</p>\n<p>Hex dump:</p>\n<p><strong>The Art of War:</strong>\n(note: just the first ten lines of the hex dump, the whole thing was far too long)</p>\n<pre><code>00000000: efbb bf54 6865 2050 726f 6a65 6374 2047  ...The Project G\n00000010: 7574 656e 6265 7267 2065 426f 6f6b 206f  utenberg eBook o\n00000020: 6620 5468 6520 4172 7420 6f66 2057 6172  f The Art of War\n00000030: 0d0a 2020 2020 0d0a 5468 6973 2065 626f  ..    ..This ebo\n00000040: 6f6b 2069 7320 666f 7220 7468 6520 7573  ok is for the us\n00000050: 6520 6f66 2061 6e79 6f6e 6520 616e 7977  e of anyone anyw\n00000060: 6865 7265 2069 6e20 7468 6520 556e 6974  here in the Unit\n00000070: 6564 2053 7461 7465 7320 616e 640d 0a6d  ed States and..m\n00000080: 6f73 7420 6f74 6865 7220 7061 7274 7320  ost other parts \n00000090: 6f66 2074 6865 2077 6f72 6c64 2061 7420  of the world at \n000000a0: 6e6f 2063 6f73 7420 616e 6420 7769 7468  no cost and with\n</code></pre>\n<p><strong>The Art of War (first line):</strong></p>\n<pre><code>00000000: 5468 6520 5072 6f6a 6563 7420 4775 7465  The Project Gute\n00000010: 6e62 6572 6720 6542 6f6f 6b20 6f66 2054  nberg eBook of T\n00000020: 6865 2041 7274 206f 6620 5761 72         he Art of War\n</code></pre>\n<p>I can for sure see that there is <em>something</em> in the original that is missing from the start of the 'first line' version. I suspect it's the BOM. It's hard to test if <code>wc</code> ignores the BOM or not without manually inserting it into one of these one liner text files, which I'm not sure how to do.</p>\n"},{"tags":["java","selenium-webdriver","url","automation"],"comments":[{"score":0,"post_type":"question","creation_date":1699077025,"post_id":77413619,"comment_id":136488796,"body_markdown":"What is the expected URL? Why can&#39;t you just assert vs that? Also, please post the contents of the method `.NavigateToItemDescriptionPage()`? You really should be handling the URL transition in that method instead of `.getCurrentPageUrl()`.","link":"https://stackoverflow.com/questions/77413619/selenium-test-automation-issue-unable-to-verify-price-range-sorting-in-shopping#comment136488796_77413619","body":"What is the expected URL? Why can&#39;t you just assert vs that? Also, please post the contents of the method <code>.NavigateToItemDescriptionPage()</code>? You really should be handling the URL transition in that method instead of <code>.getCurrentPageUrl()</code>."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1699263658,"creation_date":1699263658,"answer_id":77430079,"question_id":77413619,"body_markdown":"For a web page, a title is a unique thing. If you navigate to a different page then the previous and current web page titles should be different.\r\n  \r\n Method inside Sort Class:\r\n\r\n     public boolean sortItems() {\r\n           String currentWebPageTitle= driver.getTitle();\r\n           By priceSortOption = By.cssSelector(&quot;add your locator here&quot;);\r\n\r\n           wait.until(ExpectedConditions.visibilityOfElementLocated(priceSortOption));\r\n           driver.findElement(priceSortOption).click();\r\n           String webPageTitleAfterSorting = driver.getTitle();\r\n           boolean isReloaded = currentWebPageTitle.equals(webPageTitleAfterSorting);\r\n           return isReloaded;\r\n        }\r\n\r\n TestCase:\r\n\r\n    @Test(priority = 1)\r\n        public void sortItemsTest(){\r\n            StorePage storePage=new StorePage(driver);\r\n            Assert.assertFalse(storePage.sortItems(), &quot;Sorting by price resulted in a page reload.&quot;);\r\n        }","link":"https://stackoverflow.com/questions/77413619/selenium-test-automation-issue-unable-to-verify-price-range-sorting-in-shopping/77430079#77430079","title":"Selenium Test Automation Issue: Unable to Verify Price Range Sorting in Shopping Cart (Problem in reloading same page)","body":"<p>For a web page, a title is a unique thing. If you navigate to a different page then the previous and current web page titles should be different.</p>\n<p>Method inside Sort Class:</p>\n<pre><code> public boolean sortItems() {\n       String currentWebPageTitle= driver.getTitle();\n       By priceSortOption = By.cssSelector(&quot;add your locator here&quot;);\n\n       wait.until(ExpectedConditions.visibilityOfElementLocated(priceSortOption));\n       driver.findElement(priceSortOption).click();\n       String webPageTitleAfterSorting = driver.getTitle();\n       boolean isReloaded = currentWebPageTitle.equals(webPageTitleAfterSorting);\n       return isReloaded;\n    }\n</code></pre>\n<p>TestCase:</p>\n<pre><code>@Test(priority = 1)\n    public void sortItemsTest(){\n        StorePage storePage=new StorePage(driver);\n        Assert.assertFalse(storePage.sortItems(), &quot;Sorting by price resulted in a page reload.&quot;);\n    }\n</code></pre>\n"}],"comment_count":1,"is_answered":true,"view_count":68,"answer_count":1,"score":0,"last_activity_date":1702655420,"creation_date":1698972455,"last_edit_date":1702655420,"question_id":77413619,"body_markdown":"I&#39;m doing a test automation project using selenium and this is my first time using it. Here I have to capture this bug. &quot;When I click a link to sort a shopping cart by price range it does not load the relevant page instead reload the current page&quot; . this is my Test.\r\n\r\n```\r\n   @Test(priority = 2 , groups = {&quot;smoke&quot;})\r\n    public void verifyFilterByPrice(){\r\n        ProductDetailPage productdetailpage = new ProductDetailPage(driver);\r\n        productdetailpage.NavigateToItemDescriptionPage();\r\n        String urlBefore = productdetailpage.getCurrentPageUrl();\r\n        productdetailpage.clickPriceRange();\r\n        String urlAfter = productdetailpage.getCurrentPageUrl();\r\n        Assert.assertNotEquals(urlBefore, urlAfter, &quot;Page URL didn&#39;t change after clicking Price Range.&quot;);\r\n\r\n    }\r\n```\r\nand these are the methods used in the code.\r\n\r\n```\r\n public String getCurrentPageUrl(){\r\n        try {\r\n            Thread.sleep(Duration.ofSeconds(5));\r\n        } catch (InterruptedException e) {\r\n            Thread.currentThread().interrupt();\r\n        }\r\n        String currentPageUrl = driver.getCurrentUrl();\r\n        System.out.println(&quot;the curent url you capture is &quot; + currentPageUrl);\r\n        return currentPageUrl;\r\n\r\n    }\r\n\r\n```\r\n\r\nbut when I log both urls they are like  follow. and they are not same to I cant assert as equal. Is ther is another way I could use to assert such senarios?\r\n\r\n```\r\n\r\nURL befor = https://xxxx/s/zzz/\r\nURL after = is https://xxxx/s/zzz/?perpage=25&amp;pricepoint=2\r\n```","link":"https://stackoverflow.com/questions/77413619/selenium-test-automation-issue-unable-to-verify-price-range-sorting-in-shopping","title":"Selenium Test Automation Issue: Unable to Verify Price Range Sorting in Shopping Cart (Problem in reloading same page)","body":"<p>I'm doing a test automation project using selenium and this is my first time using it. Here I have to capture this bug. &quot;When I click a link to sort a shopping cart by price range it does not load the relevant page instead reload the current page&quot; . this is my Test.</p>\n<pre><code>   @Test(priority = 2 , groups = {&quot;smoke&quot;})\n    public void verifyFilterByPrice(){\n        ProductDetailPage productdetailpage = new ProductDetailPage(driver);\n        productdetailpage.NavigateToItemDescriptionPage();\n        String urlBefore = productdetailpage.getCurrentPageUrl();\n        productdetailpage.clickPriceRange();\n        String urlAfter = productdetailpage.getCurrentPageUrl();\n        Assert.assertNotEquals(urlBefore, urlAfter, &quot;Page URL didn't change after clicking Price Range.&quot;);\n\n    }\n</code></pre>\n<p>and these are the methods used in the code.</p>\n<pre><code> public String getCurrentPageUrl(){\n        try {\n            Thread.sleep(Duration.ofSeconds(5));\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n        }\n        String currentPageUrl = driver.getCurrentUrl();\n        System.out.println(&quot;the curent url you capture is &quot; + currentPageUrl);\n        return currentPageUrl;\n\n    }\n\n</code></pre>\n<p>but when I log both urls they are like  follow. and they are not same to I cant assert as equal. Is ther is another way I could use to assert such senarios?</p>\n<pre><code>\nURL befor = https://xxxx/s/zzz/\nURL after = is https://xxxx/s/zzz/?perpage=25&amp;pricepoint=2\n</code></pre>\n"},{"tags":["java","unit-testing","groovy","migration","java-17"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702648411,"creation_date":1702648411,"answer_id":77666727,"question_id":77487321,"body_markdown":"I had the same problem; I replaced `cglib-nodep` by `byte-buddy`, then the error disappeared.","link":"https://stackoverflow.com/questions/77487321/test-case-in-groovy-failing-while-migrating-from-java-11-to-17/77666727#77666727","title":"Test case in groovy failing while migrating from java 11 to 17","body":"<p>I had the same problem; I replaced <code>cglib-nodep</code> by <code>byte-buddy</code>, then the error disappeared.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":61,"answer_count":1,"score":0,"last_activity_date":1702648411,"creation_date":1700047564,"question_id":77487321,"body_markdown":"I am getting this error when I am updating java version from 11 to 17.\r\n\r\n    SpecInternals.SpyImpl:168-&gt;SpecInternals.createMockImpl:295-&gt;SpecInternals.createMockImpl:305-   \r\n    &gt;SpecInternals.createMock:50 &#187; NoClassDefFound Could not initialize class \r\n    org.spockframework.mock.runtime.CglibMockFactory$ConstructorFriendlyEnhancer\r\n\r\nI updated to following versions:\r\n- spock - 2.3-groovy-3.0\r\n- groovy-all - 3.0.19\r\n- gmavenplus-plugin - 3.0.2\r\n- maven-surefire-plugin - 3.2.2\r\n- cglib-nodep.version - 3.2.9\r\n- maven-compiler-plugin - 3.9.0\r\n- jacoco-maven-plugin - 0.8.10\r\n\r\nBut I am still facing the issue. Please let me know if anyone has come across this error while migrating from java 11 to 17.\r\n","link":"https://stackoverflow.com/questions/77487321/test-case-in-groovy-failing-while-migrating-from-java-11-to-17","title":"Test case in groovy failing while migrating from java 11 to 17","body":"<p>I am getting this error when I am updating java version from 11 to 17.</p>\n<pre><code>SpecInternals.SpyImpl:168-&gt;SpecInternals.createMockImpl:295-&gt;SpecInternals.createMockImpl:305-   \n&gt;SpecInternals.createMock:50 » NoClassDefFound Could not initialize class \norg.spockframework.mock.runtime.CglibMockFactory$ConstructorFriendlyEnhancer\n</code></pre>\n<p>I updated to following versions:</p>\n<ul>\n<li>spock - 2.3-groovy-3.0</li>\n<li>groovy-all - 3.0.19</li>\n<li>gmavenplus-plugin - 3.0.2</li>\n<li>maven-surefire-plugin - 3.2.2</li>\n<li>cglib-nodep.version - 3.2.9</li>\n<li>maven-compiler-plugin - 3.9.0</li>\n<li>jacoco-maven-plugin - 0.8.10</li>\n</ul>\n<p>But I am still facing the issue. Please let me know if anyone has come across this error while migrating from java 11 to 17.</p>\n"},{"tags":["java","tomcat","iis","catalina"],"comments":[{"score":1,"post_type":"question","creation_date":1675916249,"post_id":75390980,"comment_id":133031970,"body_markdown":"Ever since Windows Vista, system folders like `Program Files` are heavily protected, so are you sure you want to keep temp files there? Maybe you should check Tomcat document to see how to move the files out to a less sensitive folder. In all cases, the tomcat process needs write permission to the temp files so as to remove them. The actual steps to configure permissions depend on how you configure Tomcat on this Windows machine, which you didn&#39;t even reveal in the question body.","link":"https://stackoverflow.com/questions/75390980/apache-tomcat-10-1-unable-to-delete-temporary-files#comment133031970_75390980","body":"Ever since Windows Vista, system folders like <code>Program Files</code> are heavily protected, so are you sure you want to keep temp files there? Maybe you should check Tomcat document to see how to move the files out to a less sensitive folder. In all cases, the tomcat process needs write permission to the temp files so as to remove them. The actual steps to configure permissions depend on how you configure Tomcat on this Windows machine, which you didn&#39;t even reveal in the question body."},{"score":0,"post_type":"question","creation_date":1675935154,"post_id":75390980,"comment_id":133035891,"body_markdown":"Maybe the file is being used by another thread or the permissions are insufficient. You can refer to related cases: https://stackoverflow.com/questions/6663202/cannot-delete-temp-folder-sometimes and https://stackoverflow.com/questions/50532263/java-delete-directory-ioexception-unable-to-delete-directory.","link":"https://stackoverflow.com/questions/75390980/apache-tomcat-10-1-unable-to-delete-temporary-files#comment133035891_75390980","body":"Maybe the file is being used by another thread or the permissions are insufficient. You can refer to related cases: <a href=\"https://stackoverflow.com/questions/6663202/cannot-delete-temp-folder-sometimes\" title=\"cannot delete temp folder sometimes\">stackoverflow.com/questions/6663202/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/50532263/java-delete-directory-ioexception-unable-to-delete-directory\" title=\"java delete directory ioexception unable to delete directory\">stackoverflow.com/questions/50532263/&hellip;</a>."},{"score":0,"post_type":"question","creation_date":1675957739,"post_id":75390980,"comment_id":133043373,"body_markdown":"@TengFeiXie I think you&#39;re right... After monitoring it a bit some files are being deleted and some are not.  This appears to be a situation where the file is in use and therefore unable to be deleted.","link":"https://stackoverflow.com/questions/75390980/apache-tomcat-10-1-unable-to-delete-temporary-files#comment133043373_75390980","body":"@TengFeiXie I think you&#39;re right... After monitoring it a bit some files are being deleted and some are not.  This appears to be a situation where the file is in use and therefore unable to be deleted."},{"score":0,"post_type":"question","creation_date":1682683573,"post_id":75390980,"comment_id":134258119,"body_markdown":"Hey @ZacharyMcArthur. We are seeing the same issue on a Windows host. Have you managed to solve this in the meantime? Looking into the linked questions right now.","link":"https://stackoverflow.com/questions/75390980/apache-tomcat-10-1-unable-to-delete-temporary-files#comment134258119_75390980","body":"Hey @ZacharyMcArthur. We are seeing the same issue on a Windows host. Have you managed to solve this in the meantime? Looking into the linked questions right now."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702646985,"last_edit_date":1702646985,"creation_date":1702041753,"answer_id":77626864,"question_id":75390980,"body_markdown":"It comes from the file handling section of your code. the code working fine for **tomcat 8.0.50** but in higher version it throws error like : **Failed to deleted temporary file** .\r\n\r\nThere are 2 ways to fix the issue :\r\n1) Don&#39;t use **`byte[]`** type arg while reading and writing data. \r\n   the correct way to read data from input file is :\r\n\r\n``` \r\ntry (FileOutputStream fos = new FileOutputStream(new File(newFileName));\r\n    InputStream is = file.getInputstream()) {\r\n    int byteValue;\r\n    while ((byteValue = is.read()) != -1) { // don&#39;t use: is.read(byte[] arg)\r\n        fos.write(byteValue);  // don&#39;t use: fos.write(byte[] arg, 0, byteValue)\r\n    }\r\n} catch (IOException e) {\r\n    e.printStackTrace();\r\n} \r\n```\r\nNOTE : it will take some time for processing files, but it will not throw any error.\r\n\r\n2) Revert back to old tomcat version to use **`byte[]`**.","link":"https://stackoverflow.com/questions/75390980/apache-tomcat-10-1-unable-to-delete-temporary-files/77626864#77626864","title":"Apache Tomcat 10.1 Unable to delete temporary files","body":"<p>It comes from the file handling section of your code. the code working fine for <strong>tomcat 8.0.50</strong> but in higher version it throws error like : <strong>Failed to deleted temporary file</strong> .</p>\n<p>There are 2 ways to fix the issue :</p>\n<ol>\n<li>Don't use <strong><code>byte[]</code></strong> type arg while reading and writing data.\nthe correct way to read data from input file is :</li>\n</ol>\n<pre><code>try (FileOutputStream fos = new FileOutputStream(new File(newFileName));\n    InputStream is = file.getInputstream()) {\n    int byteValue;\n    while ((byteValue = is.read()) != -1) { // don't use: is.read(byte[] arg)\n        fos.write(byteValue);  // don't use: fos.write(byte[] arg, 0, byteValue)\n    }\n} catch (IOException e) {\n    e.printStackTrace();\n} \n</code></pre>\n<p>NOTE : it will take some time for processing files, but it will not throw any error.</p>\n<ol start=\"2\">\n<li>Revert back to old tomcat version to use <strong><code>byte[]</code></strong>.</li>\n</ol>\n"}],"comment_count":4,"is_answered":false,"view_count":5113,"answer_count":1,"score":1,"last_activity_date":1702646985,"creation_date":1675885399,"last_edit_date":1702068358,"question_id":75390980,"body_markdown":"We just upgraded Tomcat from 9.0 to 10.1, and Java from 8 to 11.  everything is running fine except now we are having temp files pile up in `Apache Software Foundation\\Tomcat 10.1\\work\\Catalina\\localhost\\root`.  This is causing 502 errors after Java heap space issues.  We see errors like this..\r\n\r\n```none\r\n07-Feb-2023 23:33:11.414 SEVERE [http-nio-81-exec-3] org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun Error running socket processor\r\n\tjava.io.UncheckedIOException: Cannot delete C:\\Program Files\\Apache Software Foundation\\Tomcat 10.1\\work\\Catalina\\localhost\\root\\upload_ac88107d_733f_4b9d_a3a3_9274a46f92e3_00000509.tmp\r\n\t\tat org.apache.tomcat.util.http.fileupload.disk.DiskFileItem.delete(DiskFileItem.java:429)\r\n\t\tat org.apache.catalina.core.ApplicationPart.delete(ApplicationPart.java:54)\r\n\t\tat org.apache.catalina.connector.Request.recycle(Request.java:451)\r\n\t\tat org.apache.catalina.connector.CoyoteAdapter.log(CoyoteAdapter.java:512)\r\n\t\tat org.apache.catalina.connector.CoyoteAdapter.checkRecycled(CoyoteAdapter.java:536)\r\n\t\tat org.apache.coyote.http11.Http11Processor.recycle(Http11Processor.java:1440)\r\n\t\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.release(AbstractProtocol.java:1052)\r\n\t\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:1024)\r\n\t\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)\r\n\t\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\t\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\t\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\t\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n\tCaused by: java.io.IOException: Cannot delete C:\\Program Files\\Apache Software Foundation\\Tomcat 10.1\\work\\Catalina\\localhost\\root\\upload_ac88107d_733f_4b9d_a3a3_9274a46f92e3_00000509.tmp\r\n\t\t... 14 more\r\n```\r\n\r\nAny ideas what could be the issue?","link":"https://stackoverflow.com/questions/75390980/apache-tomcat-10-1-unable-to-delete-temporary-files","title":"Apache Tomcat 10.1 Unable to delete temporary files","body":"<p>We just upgraded Tomcat from 9.0 to 10.1, and Java from 8 to 11.  everything is running fine except now we are having temp files pile up in <code>Apache Software Foundation\\Tomcat 10.1\\work\\Catalina\\localhost\\root</code>.  This is causing 502 errors after Java heap space issues.  We see errors like this..</p>\n<pre class=\"lang-none prettyprint-override\"><code>07-Feb-2023 23:33:11.414 SEVERE [http-nio-81-exec-3] org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun Error running socket processor\n    java.io.UncheckedIOException: Cannot delete C:\\Program Files\\Apache Software Foundation\\Tomcat 10.1\\work\\Catalina\\localhost\\root\\upload_ac88107d_733f_4b9d_a3a3_9274a46f92e3_00000509.tmp\n        at org.apache.tomcat.util.http.fileupload.disk.DiskFileItem.delete(DiskFileItem.java:429)\n        at org.apache.catalina.core.ApplicationPart.delete(ApplicationPart.java:54)\n        at org.apache.catalina.connector.Request.recycle(Request.java:451)\n        at org.apache.catalina.connector.CoyoteAdapter.log(CoyoteAdapter.java:512)\n        at org.apache.catalina.connector.CoyoteAdapter.checkRecycled(CoyoteAdapter.java:536)\n        at org.apache.coyote.http11.Http11Processor.recycle(Http11Processor.java:1440)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.release(AbstractProtocol.java:1052)\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:1024)\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.base/java.lang.Thread.run(Thread.java:834)\n    Caused by: java.io.IOException: Cannot delete C:\\Program Files\\Apache Software Foundation\\Tomcat 10.1\\work\\Catalina\\localhost\\root\\upload_ac88107d_733f_4b9d_a3a3_9274a46f92e3_00000509.tmp\n        ... 14 more\n</code></pre>\n<p>Any ideas what could be the issue?</p>\n"},{"tags":["java","selenium-webdriver","selenium-grid","selenium-server"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702646940,"creation_date":1702646940,"answer_id":77666578,"question_id":77273374,"body_markdown":"\r\nYour hub is listening on 192.168.56.1 at ports 4442 and 4443 but your node is reporting itself as accessible via 10.0.2.15 at port 5555. \r\n\r\nIs that address accessible from the hub? Use curl or powershell tnc to test the accessibility. For curl, use &quot;curl http://10.0.2.15:5555/status&quot; (for Se v4). \r\n\r\nYou may need to use the &quot;--host&quot; parameter to specific that node listen on a different interface. ","link":"https://stackoverflow.com/questions/77273374/my-node-and-hub-couldnt-communicate-with-each-other-in-selenium-grid/77666578#77666578","title":"My node and hub couldn&#39;t communicate with each other in selenium grid","body":"<p>Your hub is listening on 192.168.56.1 at ports 4442 and 4443 but your node is reporting itself as accessible via 10.0.2.15 at port 5555.</p>\n<p>Is that address accessible from the hub? Use curl or powershell tnc to test the accessibility. For curl, use &quot;curl <a href=\"http://10.0.2.15:5555/status%22\" rel=\"nofollow noreferrer\">http://10.0.2.15:5555/status&quot;</a> (for Se v4).</p>\n<p>You may need to use the &quot;--host&quot; parameter to specific that node listen on a different interface.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":35,"answer_count":1,"score":0,"last_activity_date":1702646940,"creation_date":1697029855,"question_id":77273374,"body_markdown":"I download selenium-server-4.14.0 from official website and run it as hub on my machine (The operating system is window 11), I do the same on a virtual machine and run it as node (The operating system is window 10). When I register the node to the hub, my node keeps sending registration event and my hub keeps binding additional locator mechanisms: relative but the connection seems failed! Can you guys help me fix it?\r\n\r\n[My hub](https://i.stack.imgur.com/WnnTL.png)\r\n\r\n[My node](https://i.stack.imgur.com/1vr17.png)\r\n\r\nI try to find the solutions but found none!\r\n","link":"https://stackoverflow.com/questions/77273374/my-node-and-hub-couldnt-communicate-with-each-other-in-selenium-grid","title":"My node and hub couldn&#39;t communicate with each other in selenium grid","body":"<p>I download selenium-server-4.14.0 from official website and run it as hub on my machine (The operating system is window 11), I do the same on a virtual machine and run it as node (The operating system is window 10). When I register the node to the hub, my node keeps sending registration event and my hub keeps binding additional locator mechanisms: relative but the connection seems failed! Can you guys help me fix it?</p>\n<p><a href=\"https://i.stack.imgur.com/WnnTL.png\" rel=\"nofollow noreferrer\">My hub</a></p>\n<p><a href=\"https://i.stack.imgur.com/1vr17.png\" rel=\"nofollow noreferrer\">My node</a></p>\n<p>I try to find the solutions but found none!</p>\n"},{"tags":["java","networking","pcap","jnetpcap"],"comments":[{"score":0,"post_type":"question","creation_date":1687514193,"post_id":75737958,"comment_id":134950796,"body_markdown":"Does this answer your question? [Issue capturing packets from pcap file using JNetPcap](https://stackoverflow.com/questions/75739324/issue-capturing-packets-from-pcap-file-using-jnetpcap)","link":"https://stackoverflow.com/questions/75737958/jnetpcap-pcap-loop-issues#comment134950796_75737958","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75739324/issue-capturing-packets-from-pcap-file-using-jnetpcap\">Issue capturing packets from pcap file using JNetPcap</a>"}],"comment_count":1,"is_answered":false,"view_count":101,"answer_count":0,"score":0,"last_activity_date":1702642560,"creation_date":1678824859,"question_id":75737958,"body_markdown":"I&#39;m using JNetPcap to capture packets from a pcap file in Java. The code works fine sometimes, but other times it doesn&#39;t capture any packets even though the pcap file is full of packets.\r\nHere&#39;s my code:\r\n\r\n```\r\nimport org.jnetpcap.Pcap;\r\nimport org.jnetpcap.PcapPacket;\r\nimport org.jnetpcap.PcapPacketHandler;\r\n\r\npublic class OfflinePcapCapture {\r\n    public static void main(String[] args) {\r\n        String pcapFilePath = &quot;path/to/pcap/file&quot;;\r\n        StringBuilder errorBuffer = new StringBuilder();\r\n        Pcap pcap = Pcap.openOffline(pcapFilePath, errorBuffer);\r\n        if (pcap == null) {\r\n            System.err.println(&quot;Error opening pcap file: &quot; + errorBuffer.toString());\r\n            return;\r\n        }\r\n\r\n        // Setting filter to capture only TCP packets\r\n        String filter = &quot;tcp&quot;;\r\n        if (pcap.setFilter(filter, Pcap.MODE_FILTER) != Pcap.OK) {\r\n            System.err.println(&quot;Error setting filter expression: &quot; + pcap.getErr());\r\n            pcap.close();\r\n            return;\r\n        }\r\n\r\n        PcapPacketHandler&lt;String&gt; packetHandler = new PcapPacketHandler&lt;String&gt;() {\r\n            public void nextPacket(PcapPacket packet, String user) {\r\n                System.out.println(packet.toString());\r\n            }\r\n        };\r\n\r\n        int packetCount = pcap.loop(-1, packetHandler, &quot;&quot;);\r\n        if (packetCount &lt; 0) {\r\n            System.err.println(&quot;Error capturing packets: &quot; + Pcap.getErr(pcap));\r\n        } else {\r\n            System.out.println(&quot;Captured &quot; + packetCount + &quot; packets from &quot; + pcapFilePath);\r\n        }\r\n\r\n        pcap.close();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nI&#39;ve tried removing the filter expression to capture all packets in the file, but that didn&#39;t change anything. Sometimes the code captures packets from the file, and other times it doesn&#39;t capture any packets even though the file is full of packets.\r\n\r\nOne thing I noticed is that sometimes the code captures packets from the file on the first try, and other times I have to rerun the code multiple times to get a result.\r\n\r\nAny help on resolving this issue would be greatly appreciated. Thank you in advance!","link":"https://stackoverflow.com/questions/75737958/jnetpcap-pcap-loop-issues","title":"JnetPcap pcap.loop issues","body":"<p>I'm using JNetPcap to capture packets from a pcap file in Java. The code works fine sometimes, but other times it doesn't capture any packets even though the pcap file is full of packets.\nHere's my code:</p>\n<pre><code>import org.jnetpcap.Pcap;\nimport org.jnetpcap.PcapPacket;\nimport org.jnetpcap.PcapPacketHandler;\n\npublic class OfflinePcapCapture {\n    public static void main(String[] args) {\n        String pcapFilePath = &quot;path/to/pcap/file&quot;;\n        StringBuilder errorBuffer = new StringBuilder();\n        Pcap pcap = Pcap.openOffline(pcapFilePath, errorBuffer);\n        if (pcap == null) {\n            System.err.println(&quot;Error opening pcap file: &quot; + errorBuffer.toString());\n            return;\n        }\n\n        // Setting filter to capture only TCP packets\n        String filter = &quot;tcp&quot;;\n        if (pcap.setFilter(filter, Pcap.MODE_FILTER) != Pcap.OK) {\n            System.err.println(&quot;Error setting filter expression: &quot; + pcap.getErr());\n            pcap.close();\n            return;\n        }\n\n        PcapPacketHandler&lt;String&gt; packetHandler = new PcapPacketHandler&lt;String&gt;() {\n            public void nextPacket(PcapPacket packet, String user) {\n                System.out.println(packet.toString());\n            }\n        };\n\n        int packetCount = pcap.loop(-1, packetHandler, &quot;&quot;);\n        if (packetCount &lt; 0) {\n            System.err.println(&quot;Error capturing packets: &quot; + Pcap.getErr(pcap));\n        } else {\n            System.out.println(&quot;Captured &quot; + packetCount + &quot; packets from &quot; + pcapFilePath);\n        }\n\n        pcap.close();\n    }\n}\n\n</code></pre>\n<p>I've tried removing the filter expression to capture all packets in the file, but that didn't change anything. Sometimes the code captures packets from the file, and other times it doesn't capture any packets even though the file is full of packets.</p>\n<p>One thing I noticed is that sometimes the code captures packets from the file on the first try, and other times I have to rerun the code multiple times to get a result.</p>\n<p>Any help on resolving this issue would be greatly appreciated. Thank you in advance!</p>\n"},{"tags":["java","soap","cxf"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1692360543,"creation_date":1692360543,"answer_id":76929213,"question_id":76843921,"body_markdown":"In order to disable the service list page generated by cxf you can add the following line in your `application.properties` file:\r\n\r\n    cxf.servlet.init.hide-service-list-page=true","link":"https://stackoverflow.com/questions/76843921/how-to-disable-cxf-webservice-listing-page/76929213#76929213","title":"How to disable CXF webservice listing page?","body":"<p>In order to disable the service list page generated by cxf you can add the following line in your <code>application.properties</code> file:</p>\n<pre><code>cxf.servlet.init.hide-service-list-page=true\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1702641686,"creation_date":1702641686,"answer_id":77666133,"question_id":76843921,"body_markdown":"Assuming in web.xml you would have something like this:\r\n```xml\r\n\t&lt;servlet&gt;\r\n\t\t&lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\r\n\t\t&lt;servlet-class&gt;\r\n\t\t\t   org.apache.cxf.transport.servlet.CXFServlet\r\n\t\t&lt;/servlet-class&gt;\r\n\t&lt;/servlet&gt;\r\n```\r\n\r\nThis will disable the listing (show an empty page).\r\n```xml\r\n\t&lt;servlet&gt;\r\n\t\t&lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\r\n\t\t&lt;servlet-class&gt;\r\n\t\t\t   org.apache.cxf.transport.servlet.CXFServlet\r\n\t\t&lt;/servlet-class&gt;\r\n\t\t&lt;!-- security (listing has XSS) --&gt;\r\n\t\t&lt;init-param&gt;\r\n\t\t\t&lt;param-name&gt;hide-service-list-page&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;true&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt; \r\n\t&lt;/servlet&gt;\r\n```\r\nNote that the listing has an XSS vulnerability in some versions of CXF (maybe not strictly XSS, but loads external CSS).","link":"https://stackoverflow.com/questions/76843921/how-to-disable-cxf-webservice-listing-page/77666133#77666133","title":"How to disable CXF webservice listing page?","body":"<p>Assuming in web.xml you would have something like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;servlet&gt;\n        &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;\n               org.apache.cxf.transport.servlet.CXFServlet\n        &lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n</code></pre>\n<p>This will disable the listing (show an empty page).</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;servlet&gt;\n        &lt;servlet-name&gt;CXFServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;\n               org.apache.cxf.transport.servlet.CXFServlet\n        &lt;/servlet-class&gt;\n        &lt;!-- security (listing has XSS) --&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;hide-service-list-page&lt;/param-name&gt;\n            &lt;param-value&gt;true&lt;/param-value&gt;\n        &lt;/init-param&gt; \n    &lt;/servlet&gt;\n</code></pre>\n<p>Note that the listing has an XSS vulnerability in some versions of CXF (maybe not strictly XSS, but loads external CSS).</p>\n"}],"comment_count":0,"is_answered":false,"view_count":129,"answer_count":2,"score":0,"last_activity_date":1702641686,"creation_date":1691278362,"question_id":76843921,"body_markdown":"I am using cxf-spring-boot-starter-jaxws with Spring Boot for SOAP Services.\r\nThe web application has the URL http://localhost:8080/abc/def/.\r\nThe WSDL must be located at http://localhost:8080/abc/def/service?wsdl.\r\n\r\napplication.properties:\r\n\r\n    server.port=8080\r\n    server.servlet.context-path=/abc/def\r\n    cxf.path=/\r\n\r\nEndpoint registration in Application.java:\r\n\r\n    @Bean\r\n    public Endpoint endpoint(MySoapService service) {\r\n        Endpoint endpoint = Endpoint.create(service);\r\n        endpoint.publish(&quot;/service&quot;);\r\n        return endpoint;\r\n    }\r\n\t\r\nAs a result, the WSDL is placed correctly at http://localhost:8080/abc/def/service?wsdl.\r\nBut at http://localhost:8080/abc/def, instead of the web application, there is a cxf page with a list of services.\r\nHow can I disable it and make the web app open?","link":"https://stackoverflow.com/questions/76843921/how-to-disable-cxf-webservice-listing-page","title":"How to disable CXF webservice listing page?","body":"<p>I am using cxf-spring-boot-starter-jaxws with Spring Boot for SOAP Services.\nThe web application has the URL http://localhost:8080/abc/def/.\nThe WSDL must be located at http://localhost:8080/abc/def/service?wsdl.</p>\n<p>application.properties:</p>\n<pre><code>server.port=8080\nserver.servlet.context-path=/abc/def\ncxf.path=/\n</code></pre>\n<p>Endpoint registration in Application.java:</p>\n<pre><code>@Bean\npublic Endpoint endpoint(MySoapService service) {\n    Endpoint endpoint = Endpoint.create(service);\n    endpoint.publish(&quot;/service&quot;);\n    return endpoint;\n}\n</code></pre>\n<p>As a result, the WSDL is placed correctly at http://localhost:8080/abc/def/service?wsdl.\nBut at http://localhost:8080/abc/def, instead of the web application, there is a cxf page with a list of services.\nHow can I disable it and make the web app open?</p>\n"},{"tags":["java","android","google-fit","google-fit-api"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702633070,"creation_date":1702633070,"answer_id":77665387,"question_id":76776511,"body_markdown":"the first you should check the fit app has data in that range date, and use same google account with your app.\r\nTo enable querying the Google Fit server to fetch query results, in case the local store doesn&#39;t have data for the full requested time range.\r\n\r\n    DataReadRequest.Builder().enableServerQueries()\r\n\r\nI&#39;m using `Fitness.getHistoryClient(params).readData()` and pass the GoogleSignIn account.\r\n","link":"https://stackoverflow.com/questions/76776511/google-fit-api-returning-empty-bucket-while-fetching-last-week-data/77665387#77665387","title":"Google fit api returning empty bucket while fetching last week data","body":"<p>the first you should check the fit app has data in that range date, and use same google account with your app.\nTo enable querying the Google Fit server to fetch query results, in case the local store doesn't have data for the full requested time range.</p>\n<pre><code>DataReadRequest.Builder().enableServerQueries()\n</code></pre>\n<p>I'm using <code>Fitness.getHistoryClient(params).readData()</code> and pass the GoogleSignIn account.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":29,"answer_count":1,"score":0,"last_activity_date":1702633070,"creation_date":1690432260,"question_id":76776511,"body_markdown":"I am trying to fetch step count data of last week or last 7 days. I am getting the empty list of bucket which holds the data.\r\n\r\n\r\n```\r\n//Check how many steps were walked and recorded in the last 7 days\r\n        DataReadRequest readRequest = new DataReadRequest.Builder()\r\n                .aggregate(DataType.TYPE_STEP_COUNT_DELTA, DataType.AGGREGATE_STEP_COUNT_DELTA)\r\n                .bucketByTime(1, TimeUnit.DAYS)\r\n                .setTimeRange(startTime, endTime, TimeUnit.MILLISECONDS)\r\n                .build();\r\n\r\n        DataReadResult dataReadResult = Fitness.HistoryApi.readData(mGoogleApiClient, readRequest).await(1, TimeUnit.MINUTES);\r\n\r\n```\r\n","link":"https://stackoverflow.com/questions/76776511/google-fit-api-returning-empty-bucket-while-fetching-last-week-data","title":"Google fit api returning empty bucket while fetching last week data","body":"<p>I am trying to fetch step count data of last week or last 7 days. I am getting the empty list of bucket which holds the data.</p>\n<pre><code>//Check how many steps were walked and recorded in the last 7 days\n        DataReadRequest readRequest = new DataReadRequest.Builder()\n                .aggregate(DataType.TYPE_STEP_COUNT_DELTA, DataType.AGGREGATE_STEP_COUNT_DELTA)\n                .bucketByTime(1, TimeUnit.DAYS)\n                .setTimeRange(startTime, endTime, TimeUnit.MILLISECONDS)\n                .build();\n\n        DataReadResult dataReadResult = Fitness.HistoryApi.readData(mGoogleApiClient, readRequest).await(1, TimeUnit.MINUTES);\n\n</code></pre>\n"},{"tags":["java","ubuntu-20.04","cytoscape"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1697100270,"post_id":77277486,"comment_id":136237896,"body_markdown":"i think it is my problem. it report this error when i run Cytoscape `java.util.zip.ZipException: Invalid CEN header (invalid extra data field size for tag: 0xbfef at 1309602)`  and freeze on the OSGi","link":"https://stackoverflow.com/questions/77274425/cytoscape-is-stuck-on-iniziling-osgi/77277486#comment136237896_77277486","body":"i think it is my problem. it report this error when i run Cytoscape <code>java.util.zip.ZipException: Invalid CEN header (invalid extra data field size for tag: 0xbfef at 1309602)</code>  and freeze on the OSGi"},{"score":0,"post_type":"answer","creation_date":1697123308,"post_id":77277486,"comment_id":136242916,"body_markdown":"Thanks @ScooterMorris, i solved by updating to java 17 and installing cytoscape 3.10.1","link":"https://stackoverflow.com/questions/77274425/cytoscape-is-stuck-on-iniziling-osgi/77277486#comment136242916_77277486","body":"Thanks @ScooterMorris, i solved by updating to java 17 and installing cytoscape 3.10.1"}],"comment_count":2,"score":0,"last_activity_date":1700695218,"last_edit_date":1700695218,"creation_date":1697080605,"answer_id":77277486,"question_id":77274425,"body_markdown":"There was a recent update to both Java 11 and Java 17 that broke OSGi.  Not sure if that&#39;s your problem, but I would suggest updating to Java 17 and Cytoscape 3.10.1, which has a workaround for the problem.\r\n","link":"https://stackoverflow.com/questions/77274425/cytoscape-is-stuck-on-iniziling-osgi/77277486#77277486","title":"cytoscape is stuck on iniziling OSGi","body":"<p>There was a recent update to both Java 11 and Java 17 that broke OSGi.  Not sure if that's your problem, but I would suggest updating to Java 17 and Cytoscape 3.10.1, which has a workaround for the problem.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1702630198,"creation_date":1702630198,"answer_id":77665174,"question_id":77274425,"body_markdown":"I am using jdk 17.0.9.9. I was facing same issue with below error &quot;Invalid CEN header (invalid extra data field size for tag: 0x4c44 at 0)&quot;\r\n\r\nSolution: Added vm args as Djdk.util.zip.disableZip64ExtraFieldValidation=true and it got resolved.","link":"https://stackoverflow.com/questions/77274425/cytoscape-is-stuck-on-iniziling-osgi/77665174#77665174","title":"cytoscape is stuck on iniziling OSGi","body":"<p>I am using jdk 17.0.9.9. I was facing same issue with below error &quot;Invalid CEN header (invalid extra data field size for tag: 0x4c44 at 0)&quot;</p>\n<p>Solution: Added vm args as Djdk.util.zip.disableZip64ExtraFieldValidation=true and it got resolved.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":59,"answer_count":2,"score":0,"last_activity_date":1702630198,"creation_date":1697037960,"question_id":77274425,"body_markdown":"i managed to install cytoscape 3.9.1 on ubuntu 20.04, but when i open it is permanently stuck on `inizializing OGSi container...`  window. i have java 11, path of java_home is set. everything is 64 bit...\r\n\r\nI tried the `disable-opencl.dummy` file in CytoscapeConfiguration folder and nothing changed. looking for solutions in the helpdesk group of cytoskape i tried also to delete the CytoscapeConfiguration file,but did not worked. i tried to change the PATH to $JAVA_HOME/bin in bashrc. nothing...Cytoscape is stuck there forever. i don&#39;t know what to do.","link":"https://stackoverflow.com/questions/77274425/cytoscape-is-stuck-on-iniziling-osgi","title":"cytoscape is stuck on iniziling OSGi","body":"<p>i managed to install cytoscape 3.9.1 on ubuntu 20.04, but when i open it is permanently stuck on <code>inizializing OGSi container...</code>  window. i have java 11, path of java_home is set. everything is 64 bit...</p>\n<p>I tried the <code>disable-opencl.dummy</code> file in CytoscapeConfiguration folder and nothing changed. looking for solutions in the helpdesk group of cytoskape i tried also to delete the CytoscapeConfiguration file,but did not worked. i tried to change the PATH to $JAVA_HOME/bin in bashrc. nothing...Cytoscape is stuck there forever. i don't know what to do.</p>\n"},{"tags":["java","spring","spring-boot","environment-variables","application.properties"],"comments":[{"score":0,"post_type":"question","creation_date":1675693337,"post_id":75362523,"comment_id":132978079,"body_markdown":"do you have the .envfile plugin installed in IntelliJ? from my experience with it, it&#39;s barely working as it is.","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot#comment132978079_75362523","body":"do you have the .envfile plugin installed in IntelliJ? from my experience with it, it&#39;s barely working as it is."},{"score":1,"post_type":"question","creation_date":1675693447,"post_id":75362523,"comment_id":132978119,"body_markdown":"It is standard to use .env for environment variable but more in javascript than in java so Spring will not read this file without any configuration. If you want Spring Boot to read data, you can add an application.properties file beside your jar and it will be read.","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot#comment132978119_75362523","body":"It is standard to use .env for environment variable but more in javascript than in java so Spring will not read this file without any configuration. If you want Spring Boot to read data, you can add an application.properties file beside your jar and it will be read."},{"score":0,"post_type":"question","creation_date":1675694510,"post_id":75362523,"comment_id":132978491,"body_markdown":"@TomElias I did not installed it. Then, the `.env` file is read by that plugin instead of setting environment variables on InteliJ?","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot#comment132978491_75362523","body":"@TomElias I did not installed it. Then, the <code>.env</code> file is read by that plugin instead of setting environment variables on InteliJ?"},{"score":0,"post_type":"question","creation_date":1675694605,"post_id":75362523,"comment_id":132978523,"body_markdown":"@grekier I have an `application.yml` file, but could not understand what you mean. As far as I know, `application.yml` can read data from `.env` file, right? If so, do I need to install the plugin on IntelliJ?","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot#comment132978523_75362523","body":"@grekier I have an <code>application.yml</code> file, but could not understand what you mean. As far as I know, <code>application.yml</code> can read data from <code>.env</code> file, right? If so, do I need to install the plugin on IntelliJ?"},{"score":0,"post_type":"question","creation_date":1675695071,"post_id":75362523,"comment_id":132978685,"body_markdown":".env file will not be read by default! You need a plugin for that. Assuming you need some value read at runtime, you can add a file called application.properties (or yml) in the same folder that your jar file and those will be read when running the jar. If what you want to achieve is to load it in IntelliJ, either add them to the config or the local ENV","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot#comment132978685_75362523","body":".env file will not be read by default! You need a plugin for that. Assuming you need some value read at runtime, you can add a file called application.properties (or yml) in the same folder that your jar file and those will be read when running the jar. If what you want to achieve is to load it in IntelliJ, either add them to the config or the local ENV"},{"score":0,"post_type":"question","creation_date":1675699583,"post_id":75362523,"comment_id":132980368,"body_markdown":"Can we say that it is the same **reading environment variables from .env file using plugin** AND **reading environment variables from Environment Variables field of IntelliJ run configutation**?","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot#comment132980368_75362523","body":"Can we say that it is the same <b>reading environment variables from .env file using plugin</b> AND <b>reading environment variables from Environment Variables field of IntelliJ run configutation</b>?"},{"score":0,"post_type":"question","creation_date":1675703230,"post_id":75362523,"comment_id":132981607,"body_markdown":"And, as far as I see, I do not need .env file when running or debugging the app on IntelliJ (I can add necessary variables via run config of IntelliJ). What about when publishing this app to a Docker container? Then, how my ${{ }} fields in the properties file continues to read these environment variables when the app runs on Docker? Any idea?","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot#comment132981607_75362523","body":"And, as far as I see, I do not need .env file when running or debugging the app on IntelliJ (I can add necessary variables via run config of IntelliJ). What about when publishing this app to a Docker container? Then, how my ${{ }} fields in the properties file continues to read these environment variables when the app runs on Docker? Any idea?"},{"score":0,"post_type":"question","creation_date":1675708254,"post_id":75362523,"comment_id":132982935,"body_markdown":"@grekier Any reply please about my last comment?","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot#comment132982935_75362523","body":"@grekier Any reply please about my last comment?"},{"score":0,"post_type":"question","creation_date":1675715596,"post_id":75362523,"comment_id":132984998,"body_markdown":"reading .env with plugin and env from IntelliJ are the same yes. Env is always the same when it is set no matter where it is set from. For Docker, you can either build your image with the env set with CLI in dockerfile (like `export key=value`) if it is an alternative, add it to docker when starting with `-e` flag or use a docker compose file and put them there.","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot#comment132984998_75362523","body":"reading .env with plugin and env from IntelliJ are the same yes. Env is always the same when it is set no matter where it is set from. For Docker, you can either build your image with the env set with CLI in dockerfile (like <code>export key=value</code>) if it is an alternative, add it to docker when starting with <code>-e</code> flag or use a docker compose file and put them there."},{"score":0,"post_type":"question","creation_date":1675781123,"post_id":75362523,"comment_id":132999716,"body_markdown":"@grekier Thanks a lot for your help. I have a Dockerfile, how can I add my environment variable to DOckerfile? Could you please post it as answer? And also you can add the other alternative.","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot#comment132999716_75362523","body":"@grekier Thanks a lot for your help. I have a Dockerfile, how can I add my environment variable to DOckerfile? Could you please post it as answer? And also you can add the other alternative."},{"score":0,"post_type":"question","creation_date":1675799280,"post_id":75362523,"comment_id":133005456,"body_markdown":"@grekier I think I can use `.env` file for setting env variables for Docker container. https://docs.docker.com/compose/environment-variables/set-environment-variables/","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot#comment133005456_75362523","body":"@grekier I think I can use <code>.env</code> file for setting env variables for Docker container. <a href=\"https://docs.docker.com/compose/environment-variables/set-environment-variables/\" rel=\"nofollow noreferrer\">docs.docker.com/compose/environment-variables/&hellip;</a>"},{"score":0,"post_type":"question","creation_date":1675929743,"post_id":75362523,"comment_id":133034291,"body_markdown":"Chicos, are you there?","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot#comment133034291_75362523","body":"Chicos, are you there?"}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1675694736,"post_id":75362728,"comment_id":132978572,"body_markdown":"Yes, I am mixed, but although I have `.env` file, IntelliJ cannot read as I mentioned in the question. On the other hand, I don&#39;t see anything related to `.env` file on that page. Any clarification?","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot/75362728#comment132978572_75362728","body":"Yes, I am mixed, but although I have <code>.env</code> file, IntelliJ cannot read as I mentioned in the question. On the other hand, I don&#39;t see anything related to <code>.env</code> file on that page. Any clarification?"},{"score":0,"post_type":"answer","creation_date":1675698160,"post_id":75362728,"comment_id":132979805,"body_markdown":"The refernece provided was for spring boot env specific configuration. Inorder to make .env work you would need EnvFile - IntelliJ IDE Plugin installed. Hope it clarifies.","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot/75362728#comment132979805_75362728","body":"The refernece provided was for spring boot env specific configuration. Inorder to make .env work you would need EnvFile - IntelliJ IDE Plugin installed. Hope it clarifies."},{"score":0,"post_type":"answer","creation_date":1675699585,"post_id":75362728,"comment_id":132980370,"body_markdown":"Can we say that it is the same **reading environment variables from .env file using plugin** AND **reading environment variables from Environment Variables field of IntelliJ run configutation**?","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot/75362728#comment132980370_75362728","body":"Can we say that it is the same <b>reading environment variables from .env file using plugin</b> AND <b>reading environment variables from Environment Variables field of IntelliJ run configutation</b>?"},{"score":0,"post_type":"answer","creation_date":1675700856,"post_id":75362728,"comment_id":132980791,"body_markdown":"yes, that is the same. and you can reference environment variables in your properties files by using ${{ }} notation","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot/75362728#comment132980791_75362728","body":"yes, that is the same. and you can reference environment variables in your properties files by using ${{ }} notation"},{"score":0,"post_type":"answer","creation_date":1675701826,"post_id":75362728,"comment_id":132981134,"body_markdown":"Yes, I already referenced and read from IntelliJ environment variables. Thanks","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot/75362728#comment132981134_75362728","body":"Yes, I already referenced and read from IntelliJ environment variables. Thanks"},{"score":0,"post_type":"answer","creation_date":1675781137,"post_id":75362728,"comment_id":132999721,"body_markdown":"@krishnan Last question: I do not need .env file when running or debugging the app on IntelliJ (I can add necessary variables via run config of IntelliJ). What about when publishing this app to a Docker container? Then, how my ${{ }} fields in the properties file continues to read these environment variables when the app runs on Docker? Any idea?","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot/75362728#comment132999721_75362728","body":"@krishnan Last question: I do not need .env file when running or debugging the app on IntelliJ (I can add necessary variables via run config of IntelliJ). What about when publishing this app to a Docker container? Then, how my ${{ }} fields in the properties file continues to read these environment variables when the app runs on Docker? Any idea?"},{"score":0,"post_type":"answer","creation_date":1675799307,"post_id":75362728,"comment_id":133005467,"body_markdown":"Chico, I think I can use `.env` file for setting env variables for Docker container. https://docs.docker.com/compose/environment-variables/set-environment-variables/","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot/75362728#comment133005467_75362728","body":"Chico, I think I can use <code>.env</code> file for setting env variables for Docker container. <a href=\"https://docs.docker.com/compose/environment-variables/set-environment-variables/\" rel=\"nofollow noreferrer\">docs.docker.com/compose/environment-variables/&hellip;</a>"},{"score":0,"post_type":"answer","creation_date":1675929746,"post_id":75362728,"comment_id":133034292,"body_markdown":"Chicos, are you there?","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot/75362728#comment133034292_75362728","body":"Chicos, are you there?"}],"comment_count":8,"score":3,"last_activity_date":1675694227,"creation_date":1675694227,"answer_id":75362728,"question_id":75362523,"body_markdown":"Apparently you are mixing up spring boot and InteliJ.\r\n\r\n - .env will be used by IntelliJ if you have EnvFile - IntelliJ IDE\r\n   Plugin\r\n - application.properties looked up by spring boot for injecting spring properties\r\n\r\nIf you are looking to run the application detacted from IDE you should define them in application.propeties defining them in a profile specific approach. Consider this article from offical [spring docs][1].\r\n\r\n\r\n  [1]: https://spring.io/blog/2020/04/23/spring-tips-configuration","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot/75362728#75362728","title":"Cannot read value from .env file in Spring Boot","body":"<p>Apparently you are mixing up spring boot and InteliJ.</p>\n<ul>\n<li>.env will be used by IntelliJ if you have EnvFile - IntelliJ IDE\nPlugin</li>\n<li>application.properties looked up by spring boot for injecting spring properties</li>\n</ul>\n<p>If you are looking to run the application detacted from IDE you should define them in application.propeties defining them in a profile specific approach. Consider this article from offical <a href=\"https://spring.io/blog/2020/04/23/spring-tips-configuration\" rel=\"nofollow noreferrer\">spring docs</a>.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1702611768,"creation_date":1702611768,"answer_id":77664155,"question_id":75362523,"body_markdown":"In my case I was using the wrong version of the dependency dot-env that I Installed. The latest version caused me issues:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;me.paulschwarz&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-dotenv&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nBut when I switched to an older more stable version for this dependency than env reading started working in my Spring Boot application:\r\n\r\n\t  &lt;dependency&gt;\r\n\t   \t  &lt;groupId&gt;me.paulschwarz&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;spring-dotenv&lt;/artifactId&gt;\r\n\t\t  &lt;version&gt;2.5.4&lt;/version&gt;\r\n\t  &lt;/dependency&gt;","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot/77664155#77664155","title":"Cannot read value from .env file in Spring Boot","body":"<p>In my case I was using the wrong version of the dependency dot-env that I Installed. The latest version caused me issues:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;me.paulschwarz&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-dotenv&lt;/artifactId&gt;\n        &lt;version&gt;4.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>But when I switched to an older more stable version for this dependency than env reading started working in my Spring Boot application:</p>\n<pre><code>  &lt;dependency&gt;\n      &lt;groupId&gt;me.paulschwarz&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-dotenv&lt;/artifactId&gt;\n      &lt;version&gt;2.5.4&lt;/version&gt;\n  &lt;/dependency&gt;\n</code></pre>\n"}],"comment_count":12,"is_answered":true,"view_count":3017,"answer_count":2,"score":2,"last_activity_date":1702611768,"creation_date":1675693113,"question_id":75362523,"body_markdown":"In my Spring Boot app, I have the following values in my `.env` file located in the project root:\r\n\r\n***.env:***\r\n\r\n```\r\nDB_NAME=demo_db\r\nDB_USERNAME=postgres\r\nDB_PASSWORD=pass\r\n```\r\n\r\nOn the other hand, when I set environment variebles on the Run configuration of IntelliJ as shown below, it is working:\r\n\r\n```\r\nDB_NAME=demo_db;DB_USERNAME=postgres;DB_PASSWORD=pass\r\n```\r\n\r\nSo, I have the following questions:\r\n\r\n**1.** As far as I know, `.env` file is used to keep environment variables instead of setting. Is that true? Could you explain the usage of it a little bit more (I look at several pages but not a brief explanation).\r\n\r\n**2.** Is there any relation of `.env` file with `application.properties` except from reading variable values from `.env` file? I am not sure if there may also be different version o `.env` file e.g. `.env-dev` file ? ","link":"https://stackoverflow.com/questions/75362523/cannot-read-value-from-env-file-in-spring-boot","title":"Cannot read value from .env file in Spring Boot","body":"<p>In my Spring Boot app, I have the following values in my <code>.env</code> file located in the project root:</p>\n<p><em><strong>.env:</strong></em></p>\n<pre><code>DB_NAME=demo_db\nDB_USERNAME=postgres\nDB_PASSWORD=pass\n</code></pre>\n<p>On the other hand, when I set environment variebles on the Run configuration of IntelliJ as shown below, it is working:</p>\n<pre><code>DB_NAME=demo_db;DB_USERNAME=postgres;DB_PASSWORD=pass\n</code></pre>\n<p>So, I have the following questions:</p>\n<p><strong>1.</strong> As far as I know, <code>.env</code> file is used to keep environment variables instead of setting. Is that true? Could you explain the usage of it a little bit more (I look at several pages but not a brief explanation).</p>\n<p><strong>2.</strong> Is there any relation of <code>.env</code> file with <code>application.properties</code> except from reading variable values from <code>.env</code> file? I am not sure if there may also be different version o <code>.env</code> file e.g. <code>.env-dev</code> file ?</p>\n"},{"tags":["python","java","logging","pyspark","log4j"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702592982,"creation_date":1702592982,"answer_id":77663381,"question_id":75858726,"body_markdown":"\r\nUseful links:\r\n* Log4j2 configuration&#39;s [properties file section][1] (read slowly and carefully)\r\n* [Full list][2] of what you can configure.\r\n* [Sample file][3] that is supposed to come with your spark installation. But if you&#39;re doing it via pip/virtualenv/poetry, it may not.\r\n* [PatterLayout reference][4].\r\n---\r\nTo setup log4j2 logs from your spark session to `/tmp/my-spark.log` and stdout, place this file in `$SPARK_HOME/conf/log4j2.properties`.\r\n\r\nWe use poetry virtual env, so `SPARK_HOME` was `&lt;project-root&gt;/.venv/lib/python3.10/site-packages/pyspark/` and it had no `conf` folder.\r\nSo I created conf folder and created `&lt;project-root&gt;/.venv/lib/python3.10/site-packages/pyspark/conf/log4j2.properties`\r\n\r\nAny spark session started using `&lt;project-root&gt;/.venv/bin/pyspark` will use this log4j2 config.\r\n\r\nChange `logger.spark_loggers.level = trace|debug|info` to change log level of Spark&#39;s loggers to get VERY detailed logs.\r\n\r\nNOTE the comments inside the file.\r\n\r\n```properties\r\n# Reload config every X seconds, for testing out changes to\r\n# this file without quiting your spark console session\r\n# monitorInterval = 3  # seconds\r\n\r\nproperty.log_pattern = %d{MM-dd HH:mm:ss.SSS} %5p [%t-%X{tid}] %c{*.1} - %m%n%exception{full}\r\n\r\nappender.my_console.name = my_console\r\nappender.my_console.type = Console\r\nappender.my_console.target = SYSTEM_OUT\r\nappender.my_console.layout.type = PatternLayout\r\nappender.my_console.layout.pattern = ${log_pattern}\r\n\r\nappender.my_file.name = my_file\r\nappender.my_file.type = File\r\nappender.my_file.filename = /tmp/my-spark.log\r\nappender.my_file.layout.type = PatternLayout\r\nappender.my_file.layout.pattern = ${log_pattern}\r\n# Uncomment if you want to overwrite the log file everytime your program runs\r\n# appender.my_file.Append=false\r\n\r\n# For deploying Spark ThriftServer\r\n# SPARK-34128: Suppress undesirable TTransportException warnings involved in THRIFT-4805\r\nappender.my_console.filter.1.type = RegexFilter\r\nappender.my_console.filter.1.regex = .*Thrift error occurred during processing of message.*\r\nappender.my_console.filter.1.onMatch = deny\r\nappender.my_console.filter.1.onMismatch = neutral\r\n\r\n\r\n# Set all to goto the file\r\nrootLogger.level = warn\r\n# If you want to log everything to console, will be VERY noisy\r\n# rootLogger.appenderRef.my_console.ref = my_console\r\nrootLogger.appenderRef.my_file.ref = my_file\r\n\r\n# update to change spark log level (all loggers with org.apache.spark prefix)\r\nlogger.spark_loggers.name = org.apache.spark\r\nlogger.spark_loggers.level = warn\r\nlogger.spark_loggers.additivity = false\r\n\r\n# control loggers with com.kash.* prefix\r\nlogger.my_loggers.name = com.kash\r\nlogger.my_loggers.level = trace\r\n# logger.my_loggers.appenderRef.my_console.ref = my_console\r\nlogger.my_loggers.appenderRef.my_file.ref = my_file\r\nlogger.my_loggers.additivity = false\r\n\r\n# Set the default spark-shell/spark-sql log level to WARN. When running the\r\n# spark-shell/spark-sql, the log level for these classes is used to overwrite\r\n# the root logger&#39;s log level, so that the user can have different defaults\r\n# for the shell and regular Spark apps.\r\nlogger.repl.name = org.apache.spark.repl.Main\r\nlogger.repl.level = warn\r\n\r\nlogger.thriftserver.name = org.apache.spark.sql.hive.thriftserver.SparkSQLCLIDriver\r\nlogger.thriftserver.level = warn\r\n\r\n# Settings to quiet third party logs that are too verbose\r\nlogger.jetty1.name = org.sparkproject.jetty\r\nlogger.jetty1.level = warn\r\nlogger.jetty2.name = org.sparkproject.jetty.util.component.AbstractLifeCycle\r\nlogger.jetty2.level = error\r\nlogger.replexprTyper.name = org.apache.spark.repl.SparkIMain$exprTyper\r\nlogger.replexprTyper.level = info\r\nlogger.replSparkILoopInterpreter.name = org.apache.spark.repl.SparkILoop$SparkILoopInterpreter\r\nlogger.replSparkILoopInterpreter.level = info\r\nlogger.parquet1.name = org.apache.parquet\r\nlogger.parquet1.level = error\r\nlogger.parquet2.name = parquet\r\nlogger.parquet2.level = error\r\n\r\n# SPARK-9183: Settings to avoid annoying messages when looking up nonexistent UDFs in SparkSQL with Hive support\r\nlogger.RetryingHMSHandler.name = org.apache.hadoop.hive.metastore.RetryingHMSHandler\r\nlogger.RetryingHMSHandler.level = fatal\r\nlogger.FunctionRegistry.name = org.apache.hadoop.hive.ql.exec.FunctionRegistry\r\nlogger.FunctionRegistry.level = error\r\n```\r\n\r\n\r\n  [1]: https://logging.apache.org/log4j/2.x/manual/configuration.html#Properties\r\n  [2]: https://logging.apache.org/log4j/2.x/manual/configuration.html#ConfigurationSyntax\r\n  [3]: https://github.com/apache/spark/blob/master/conf/log4j2.properties.template\r\n  [4]: https://logging.apache.org/log4j/2.x/manual/layouts.html#patterns","link":"https://stackoverflow.com/questions/75858726/configuring-log4j-with-ide-pyspark-shell-to-log-to-console-and-file-using-prop/77663381#77663381","title":"Configuring log4j with IDE / pyspark shell to log to console and file using properties file","body":"<p>Useful links:</p>\n<ul>\n<li>Log4j2 configuration's <a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html#Properties\" rel=\"nofollow noreferrer\">properties file section</a> (read slowly and carefully)</li>\n<li><a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html#ConfigurationSyntax\" rel=\"nofollow noreferrer\">Full list</a> of what you can configure.</li>\n<li><a href=\"https://github.com/apache/spark/blob/master/conf/log4j2.properties.template\" rel=\"nofollow noreferrer\">Sample file</a> that is supposed to come with your spark installation. But if you're doing it via pip/virtualenv/poetry, it may not.</li>\n<li><a href=\"https://logging.apache.org/log4j/2.x/manual/layouts.html#patterns\" rel=\"nofollow noreferrer\">PatterLayout reference</a>.</li>\n</ul>\n<hr />\n<p>To setup log4j2 logs from your spark session to <code>/tmp/my-spark.log</code> and stdout, place this file in <code>$SPARK_HOME/conf/log4j2.properties</code>.</p>\n<p>We use poetry virtual env, so <code>SPARK_HOME</code> was <code>&lt;project-root&gt;/.venv/lib/python3.10/site-packages/pyspark/</code> and it had no <code>conf</code> folder.\nSo I created conf folder and created <code>&lt;project-root&gt;/.venv/lib/python3.10/site-packages/pyspark/conf/log4j2.properties</code></p>\n<p>Any spark session started using <code>&lt;project-root&gt;/.venv/bin/pyspark</code> will use this log4j2 config.</p>\n<p>Change <code>logger.spark_loggers.level = trace|debug|info</code> to change log level of Spark's loggers to get VERY detailed logs.</p>\n<p>NOTE the comments inside the file.</p>\n<pre><code># Reload config every X seconds, for testing out changes to\n# this file without quiting your spark console session\n# monitorInterval = 3  # seconds\n\nproperty.log_pattern = %d{MM-dd HH:mm:ss.SSS} %5p [%t-%X{tid}] %c{*.1} - %m%n%exception{full}\n\nappender.my_console.name = my_console\nappender.my_console.type = Console\nappender.my_console.target = SYSTEM_OUT\nappender.my_console.layout.type = PatternLayout\nappender.my_console.layout.pattern = ${log_pattern}\n\nappender.my_file.name = my_file\nappender.my_file.type = File\nappender.my_file.filename = /tmp/my-spark.log\nappender.my_file.layout.type = PatternLayout\nappender.my_file.layout.pattern = ${log_pattern}\n# Uncomment if you want to overwrite the log file everytime your program runs\n# appender.my_file.Append=false\n\n# For deploying Spark ThriftServer\n# SPARK-34128: Suppress undesirable TTransportException warnings involved in THRIFT-4805\nappender.my_console.filter.1.type = RegexFilter\nappender.my_console.filter.1.regex = .*Thrift error occurred during processing of message.*\nappender.my_console.filter.1.onMatch = deny\nappender.my_console.filter.1.onMismatch = neutral\n\n\n# Set all to goto the file\nrootLogger.level = warn\n# If you want to log everything to console, will be VERY noisy\n# rootLogger.appenderRef.my_console.ref = my_console\nrootLogger.appenderRef.my_file.ref = my_file\n\n# update to change spark log level (all loggers with org.apache.spark prefix)\nlogger.spark_loggers.name = org.apache.spark\nlogger.spark_loggers.level = warn\nlogger.spark_loggers.additivity = false\n\n# control loggers with com.kash.* prefix\nlogger.my_loggers.name = com.kash\nlogger.my_loggers.level = trace\n# logger.my_loggers.appenderRef.my_console.ref = my_console\nlogger.my_loggers.appenderRef.my_file.ref = my_file\nlogger.my_loggers.additivity = false\n\n# Set the default spark-shell/spark-sql log level to WARN. When running the\n# spark-shell/spark-sql, the log level for these classes is used to overwrite\n# the root logger's log level, so that the user can have different defaults\n# for the shell and regular Spark apps.\nlogger.repl.name = org.apache.spark.repl.Main\nlogger.repl.level = warn\n\nlogger.thriftserver.name = org.apache.spark.sql.hive.thriftserver.SparkSQLCLIDriver\nlogger.thriftserver.level = warn\n\n# Settings to quiet third party logs that are too verbose\nlogger.jetty1.name = org.sparkproject.jetty\nlogger.jetty1.level = warn\nlogger.jetty2.name = org.sparkproject.jetty.util.component.AbstractLifeCycle\nlogger.jetty2.level = error\nlogger.replexprTyper.name = org.apache.spark.repl.SparkIMain$exprTyper\nlogger.replexprTyper.level = info\nlogger.replSparkILoopInterpreter.name = org.apache.spark.repl.SparkILoop$SparkILoopInterpreter\nlogger.replSparkILoopInterpreter.level = info\nlogger.parquet1.name = org.apache.parquet\nlogger.parquet1.level = error\nlogger.parquet2.name = parquet\nlogger.parquet2.level = error\n\n# SPARK-9183: Settings to avoid annoying messages when looking up nonexistent UDFs in SparkSQL with Hive support\nlogger.RetryingHMSHandler.name = org.apache.hadoop.hive.metastore.RetryingHMSHandler\nlogger.RetryingHMSHandler.level = fatal\nlogger.FunctionRegistry.name = org.apache.hadoop.hive.ql.exec.FunctionRegistry\nlogger.FunctionRegistry.level = error\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":321,"answer_count":1,"score":0,"last_activity_date":1702592982,"creation_date":1679938444,"last_edit_date":1679947225,"question_id":75858726,"body_markdown":"In my development env on my laptop (Ubuntu box), I write my &quot;pyspark code&quot; and run it through `pytest` to test. I inject the spark session that&#39;s created using `SparkSession.builder.getOrCreate()` into my tests. This &quot;pyspark code&quot; has a bunch of log statements at info level. None of them show up anywhere, so I&#39;m forced to write `print()`, which I later remove.\r\n\r\nAll I want is:\r\n* Ability to set log level for all my loggers (`My.*`) \r\n* Write to console and file (appenders)\r\n* Some docs that describe the format specs. `%t, %m, %n, %d{YYYY-MM-DD}, ...`\r\n\r\n\r\n\r\nI read:\r\n* [Configuring Logging][1] in official documentation. It just says add `log4j2.properties`. Could not find any docs on format of `log4j2.properties`. [Sample `log4j2.properties.template`][2] is VERY limited. **NOTE that it says** nothing about using `xml` or other formats, just `properties`.\r\n* [All official log4j2][3] docs point to [the same place][4], which has no docs on contents of `log4j2.properties`. It gives some samples, but those are useless e.g. where do I specify filename for a file appender (not rolling file appender).\r\n* I even tried the [log4j (not log4j2) docs][5], this clearly doesn&#39;t work (`ConfigurationException: No type attribute provided for Appender my_console`).\r\n\r\nI don&#39;t want to figure it out by trial and error. Just looking for docs.\r\n\r\n`my_spark_module.py`\r\n```lang-py\r\nclass MySparkModule:\r\n    def __init__(self, spark):\r\n        self.log = spark.sparkContext._jvm.org.apache.log4j.LogManager.getLogger(&#39;My.SparkModule&#39;)\r\n        self.df = spark.createDataFrame([(&#39;data1&#39;, &#39;2022-01-01T00:00:00&#39;), (&#39;data2&#39;, &#39;2022-02-01T00:00:00&#39;)],\r\n            schema=[&#39;data&#39;, &#39;ts_column&#39;])\r\n        self.log.info(&#39;exiting init()&#39;)\r\n\r\n    def get_count(self):\r\n        return self.df.count()\r\n```\r\n`test_my_spark_module.py`\r\n```lang-py\r\nimport pytest\r\nfrom pyspark.sql import SparkSession\r\n\r\n@pytest.fixture(autouse=True, scope=&#39;module&#39;)\r\ndef spark_session():\r\n    return SparkSession.builder.getOrCreate()\r\n\r\n\r\nclass TestMySparkModule:\r\n    def test_tables(self):\r\n        spark_session = SparkSession.builder.getOrCreate()\r\n        log = spark_session.sparkContext._jvm.org.apache.log4j.LogManager.getLogger(&#39;My.TestMySparkModule&#39;)\r\n        log.info(&#39;something I wanted to log&#39;)\r\n        \r\n        assert MySparkModule(spark_session).get_count() == 1, &#39;expected count to be 1&#39;\r\n```\r\n\r\n\r\n  [1]: https://spark.apache.org/docs/latest/configuration.html#configuring-logging\r\n  [2]: https://github.com/apache/spark/blob/master/conf/log4j2.properties.template\r\n  [3]: https://duckduckgo.com/?q=%22log4j2.properties%22%20site%3Alogging.apache.org\r\n  [4]: https://logging.apache.org/log4j/2.x/manual/configuration.html#Properties\r\n  [5]: https://logging.apache.org/log4j/1.2/manual.html#configuration","link":"https://stackoverflow.com/questions/75858726/configuring-log4j-with-ide-pyspark-shell-to-log-to-console-and-file-using-prop","title":"Configuring log4j with IDE / pyspark shell to log to console and file using properties file","body":"<p>In my development env on my laptop (Ubuntu box), I write my &quot;pyspark code&quot; and run it through <code>pytest</code> to test. I inject the spark session that's created using <code>SparkSession.builder.getOrCreate()</code> into my tests. This &quot;pyspark code&quot; has a bunch of log statements at info level. None of them show up anywhere, so I'm forced to write <code>print()</code>, which I later remove.</p>\n<p>All I want is:</p>\n<ul>\n<li>Ability to set log level for all my loggers (<code>My.*</code>)</li>\n<li>Write to console and file (appenders)</li>\n<li>Some docs that describe the format specs. <code>%t, %m, %n, %d{YYYY-MM-DD}, ...</code></li>\n</ul>\n<p>I read:</p>\n<ul>\n<li><a href=\"https://spark.apache.org/docs/latest/configuration.html#configuring-logging\" rel=\"nofollow noreferrer\">Configuring Logging</a> in official documentation. It just says add <code>log4j2.properties</code>. Could not find any docs on format of <code>log4j2.properties</code>. <a href=\"https://github.com/apache/spark/blob/master/conf/log4j2.properties.template\" rel=\"nofollow noreferrer\">Sample <code>log4j2.properties.template</code></a> is VERY limited. <strong>NOTE that it says</strong> nothing about using <code>xml</code> or other formats, just <code>properties</code>.</li>\n<li><a href=\"https://duckduckgo.com/?q=%22log4j2.properties%22%20site%3Alogging.apache.org\" rel=\"nofollow noreferrer\">All official log4j2</a> docs point to <a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html#Properties\" rel=\"nofollow noreferrer\">the same place</a>, which has no docs on contents of <code>log4j2.properties</code>. It gives some samples, but those are useless e.g. where do I specify filename for a file appender (not rolling file appender).</li>\n<li>I even tried the <a href=\"https://logging.apache.org/log4j/1.2/manual.html#configuration\" rel=\"nofollow noreferrer\">log4j (not log4j2) docs</a>, this clearly doesn't work (<code>ConfigurationException: No type attribute provided for Appender my_console</code>).</li>\n</ul>\n<p>I don't want to figure it out by trial and error. Just looking for docs.</p>\n<p><code>my_spark_module.py</code></p>\n<pre class=\"lang-py prettyprint-override\"><code>class MySparkModule:\n    def __init__(self, spark):\n        self.log = spark.sparkContext._jvm.org.apache.log4j.LogManager.getLogger('My.SparkModule')\n        self.df = spark.createDataFrame([('data1', '2022-01-01T00:00:00'), ('data2', '2022-02-01T00:00:00')],\n            schema=['data', 'ts_column'])\n        self.log.info('exiting init()')\n\n    def get_count(self):\n        return self.df.count()\n</code></pre>\n<p><code>test_my_spark_module.py</code></p>\n<pre class=\"lang-py prettyprint-override\"><code>import pytest\nfrom pyspark.sql import SparkSession\n\n@pytest.fixture(autouse=True, scope='module')\ndef spark_session():\n    return SparkSession.builder.getOrCreate()\n\n\nclass TestMySparkModule:\n    def test_tables(self):\n        spark_session = SparkSession.builder.getOrCreate()\n        log = spark_session.sparkContext._jvm.org.apache.log4j.LogManager.getLogger('My.TestMySparkModule')\n        log.info('something I wanted to log')\n        \n        assert MySparkModule(spark_session).get_count() == 1, 'expected count to be 1'\n</code></pre>\n"},{"tags":["java","javafx","cloning"],"comments":[{"score":1,"post_type":"question","creation_date":1700405327,"post_id":77510301,"comment_id":136647723,"body_markdown":"Yes, your code correctly makes copies of Nodes and their properties. However, there are [many more properties of Node](https://openjfx.io/javadoc/21/javafx.graphics/javafx/scene/Node.html#property-summary), and of course, there are many subclasses of Node in addition to shapes and Group.  Is that a concern for you?  Or do you only care about those properties, and do you know for certain that the Node argument will always be a shape or Group?","link":"https://stackoverflow.com/questions/77510301/node-cloning-in-javafx#comment136647723_77510301","body":"Yes, your code correctly makes copies of Nodes and their properties. However, there are <a href=\"https://openjfx.io/javadoc/21/javafx.graphics/javafx/scene/Node.html#property-summary\" rel=\"nofollow noreferrer\">many more properties of Node</a>, and of course, there are many subclasses of Node in addition to shapes and Group.  Is that a concern for you?  Or do you only care about those properties, and do you know for certain that the Node argument will always be a shape or Group?"},{"score":0,"post_type":"question","creation_date":1700405859,"post_id":77510301,"comment_id":136647780,"body_markdown":"*&quot;will the properties of the cloned Node returned by the function above be truly unique or still point to the original Node&#39;s properties?&quot;*. It depends on the type of the property (though in this case it doesn&#39;t really matter). If the property is a primitive type (e.g. `double`, which is the case with `width`, `height`, `radius`, etc), your new node will get a copy of the *value*. If the property has a reference type (e.g. `fill` and `stroke` have type `Paint`) then your new node gets a copy of the reference (i.e. both nodes refer to the same `Paint` instance)...","link":"https://stackoverflow.com/questions/77510301/node-cloning-in-javafx#comment136647780_77510301","body":"<i>&quot;will the properties of the cloned Node returned by the function above be truly unique or still point to the original Node&#39;s properties?&quot;</i>. It depends on the type of the property (though in this case it doesn&#39;t really matter). If the property is a primitive type (e.g. <code>double</code>, which is the case with <code>width</code>, <code>height</code>, <code>radius</code>, etc), your new node will get a copy of the <i>value</i>. If the property has a reference type (e.g. <code>fill</code> and <code>stroke</code> have type <code>Paint</code>) then your new node gets a copy of the reference (i.e. both nodes refer to the same <code>Paint</code> instance)..."},{"score":0,"post_type":"question","creation_date":1700405962,"post_id":77510301,"comment_id":136647786,"body_markdown":"However, since `Paint` (and most value types in JavaFX) is immutable, it doesn&#39;t matter if your nodes share the same instance. You can&#39;t change any properties of that instance anyway.","link":"https://stackoverflow.com/questions/77510301/node-cloning-in-javafx#comment136647786_77510301","body":"However, since <code>Paint</code> (and most value types in JavaFX) is immutable, it doesn&#39;t matter if your nodes share the same instance. You can&#39;t change any properties of that instance anyway."},{"score":4,"post_type":"question","creation_date":1700406376,"post_id":77510301,"comment_id":136647834,"body_markdown":"All that said, dong this is something of an indication of a bad design. Your nodes represent (are views of) some application state that you&#39;re trying to display. You should consider creating classes that represent the application state independently of the view, and then creating views that update when the state changes. Then the functionality where you create new objects is delegates to the application state level, not the view level.","link":"https://stackoverflow.com/questions/77510301/node-cloning-in-javafx#comment136647834_77510301","body":"All that said, dong this is something of an indication of a bad design. Your nodes represent (are views of) some application state that you&#39;re trying to display. You should consider creating classes that represent the application state independently of the view, and then creating views that update when the state changes. Then the functionality where you create new objects is delegates to the application state level, not the view level."},{"score":0,"post_type":"question","creation_date":1700473816,"post_id":77510301,"comment_id":136654567,"body_markdown":"You may be interested in the similar code (class `ShapeFactory`) in this [answer to a different question](https://stackoverflow.com/a/77377572/1155209).  That linked answer uses a model, but the domain it is modeling is shapes, so it is a model of shapes.  In another domain, you might model objects of the domain rather than shapes.","link":"https://stackoverflow.com/questions/77510301/node-cloning-in-javafx#comment136654567_77510301","body":"You may be interested in the similar code (class <code>ShapeFactory</code>) in this <a href=\"https://stackoverflow.com/a/77377572/1155209\">answer to a different question</a>.  That linked answer uses a model, but the domain it is modeling is shapes, so it is a model of shapes.  In another domain, you might model objects of the domain rather than shapes."},{"score":0,"post_type":"question","creation_date":1700522962,"post_id":77510301,"comment_id":136662890,"body_markdown":"For questions like this, it is usually best to provide context as to what you actually want to achieve (high-level goal).  Cloning nodes might not be the appropriate solution for the goal, as pointed out by James_D.  This may be an [xy problem](https://xyproblem.info).  Context can also help make the answers to questions like VGR&#39;s self-explanatory.","link":"https://stackoverflow.com/questions/77510301/node-cloning-in-javafx#comment136662890_77510301","body":"For questions like this, it is usually best to provide context as to what you actually want to achieve (high-level goal).  Cloning nodes might not be the appropriate solution for the goal, as pointed out by James_D.  This may be an <a href=\"https://xyproblem.info\" rel=\"nofollow noreferrer\">xy problem</a>.  Context can also help make the answers to questions like VGR&#39;s self-explanatory."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702585524,"creation_date":1702585524,"answer_id":77662888,"question_id":77510301,"body_markdown":"&quot;My question is, will calling the various Node&#39;s property setters directly on the results of the property getters result in the property values be passed by value or by reference?&quot;\r\n\r\n**Answer:**\r\n\r\nThere is no &quot;pass by references&quot; in Java. In Java, everything is passed by value. If you pass a reference (like Cat cat), the reference is passed by value too. \r\n\r\nIf you have `public void abc(Cat cat)`, the reference of cat is passed by value and the method creates its own copy of the passed value (which is the reference of cat) inside of itself. \r\n\r\nIf you execute a Setter of the copied reference inside your method, you are editing the one and only cat in your RAM. \r\n\r\nThink of it like this: \r\n\r\n1. There is a paper with an address written on it. That&#39;s the reference.\r\n2. The house at the address is the value behind the reference.\r\n3. A copy of the paper points to the exact same house.\r\n\r\n","link":"https://stackoverflow.com/questions/77510301/node-cloning-in-javafx/77662888#77662888","title":"Node Cloning in JavaFX","body":"<p>&quot;My question is, will calling the various Node's property setters directly on the results of the property getters result in the property values be passed by value or by reference?&quot;</p>\n<p><strong>Answer:</strong></p>\n<p>There is no &quot;pass by references&quot; in Java. In Java, everything is passed by value. If you pass a reference (like Cat cat), the reference is passed by value too.</p>\n<p>If you have <code>public void abc(Cat cat)</code>, the reference of cat is passed by value and the method creates its own copy of the passed value (which is the reference of cat) inside of itself.</p>\n<p>If you execute a Setter of the copied reference inside your method, you are editing the one and only cat in your RAM.</p>\n<p>Think of it like this:</p>\n<ol>\n<li>There is a paper with an address written on it. That's the reference.</li>\n<li>The house at the address is the value behind the reference.</li>\n<li>A copy of the paper points to the exact same house.</li>\n</ol>\n"}],"comment_count":6,"is_answered":false,"view_count":53,"answer_count":1,"score":0,"last_activity_date":1702585557,"creation_date":1700387230,"question_id":77510301,"body_markdown":"I have a JavaFX `Node` object, and I wish to clone it via code.\r\n\r\nIt&#39;s my understanding that Java variables are reference-types, and simply doing something like `clonedNode = oldNode` would result in `clonedNode` pointing to `oldNode`.\r\n\r\nIt doesn&#39;t appear that JavaFX has an in-built function for cloning `Node` objects. Hence, I attempted to write a cloning function myself as such (suppose I&#39;m only working with `Node`s of types `Circle`, `Rectangle`, `Polygon`, `Line`, `Text` and `Group`, and that I only care about the `Fill`, `Stroke`, `Text` and positional properties of the `Node`):\r\n\r\n```\r\npublic static Node NodeClone(Node oldNode)\r\n{\r\n    Node clonedNode = null;\r\n\r\n    if (oldNode.getClass() == Circle.class)\r\n    {\r\n        Circle oldCircle = (Circle)oldNode;\r\n\r\n        Circle clonedCircle = new Circle();\r\n        clonedCircle.setRadius(oldCircle.getRadius());\r\n        clonedCircle.setFill(oldCircle.getFill());\r\n        clonedCircle.setStroke(oldCircle.getStroke());\r\n        clonedCircle.setStrokeWidth(oldCircle.getStrokeWidth());\r\n\r\n        clonedNode = clonedCircle;\r\n    }\r\n    else if (oldNode.getClass() == Rectangle.class)\r\n    {\r\n        Rectangle oldRectangle = (Rectangle)oldNode;\r\n\r\n        Rectangle clonedRectangle = new Rectangle();\r\n        clonedRectangle.setWidth(oldRectangle.getWidth());\r\n        clonedRectangle.setHeight(oldRectangle.getHeight());\r\n        clonedRectangle.setFill(oldRectangle.getFill());\r\n        clonedRectangle.setStroke(oldRectangle.getStroke());\r\n        clonedRectangle.setStrokeWidth(oldRectangle.getStrokeWidth());\r\n\r\n        clonedNode = clonedRectangle;\r\n    }\r\n    else if (oldNode.getClass() == Polygon.class)\r\n    {\r\n        Polygon oldTriangle = (Polygon)oldNode;\r\n\r\n        Polygon clonedTriangle = new Polygon();\r\n        LinkedList&lt;Double&gt; clonedPoints = new LinkedList&lt;Double&gt;(oldTriangle.getPoints());\r\n        clonedTriangle.getPoints().setAll(clonedPoints);\r\n        clonedTriangle.setFill(oldTriangle.getFill());\r\n        clonedTriangle.setStroke(oldTriangle.getStroke());\r\n        clonedTriangle.setStrokeWidth(oldTriangle.getStrokeWidth());\r\n\r\n        clonedNode = clonedTriangle;\r\n    }\r\n    else if (oldNode.getClass() == Line.class)\r\n    {\r\n        Line oldLine = (Line)oldNode;\r\n\r\n        Line clonedLine = new Line();\r\n        clonedLine.setStartX(oldLine.getStartX());\r\n        clonedLine.setStartY(oldLine.getStartY());\r\n        clonedLine.setEndX(oldLine.getEndX());\r\n        clonedLine.setEndY(oldLine.getEndY());\r\n        clonedLine.setStroke(oldLine.getStroke());\r\n        clonedLine.setStrokeWidth(oldLine.getStrokeWidth());\r\n\r\n        clonedNode = clonedLine;\r\n    }\r\n    else if (oldNode.getClass() == Text.class)\r\n    {\r\n        Text oldText = (Text)oldNode;\r\n\r\n        Text clonedText = new Text();\r\n        clonedText.setFont(oldText.getFont());\r\n        clonedText.setText(oldText.getText());\r\n        clonedText.setFill(oldText.getFill());\r\n\r\n        clonedNode = clonedText;\r\n    }\r\n    else if (oldNode.getClass() == Group.class)\r\n    {\r\n        Group oldGroup = (Group)oldNode;\r\n\r\n        Group clonedGroup = new Group();\r\n\r\n        for (int i = 0; i &lt; oldGroup.getChildren().size(); i++)\r\n            clonedGroup.getChildren().add(NodeClone(oldGroup.getChildren().get(i)));\r\n\r\n        clonedNode = clonedGroup;\r\n    }\r\n    else\r\n    {\r\n        throw new java.lang.Error(&quot;ERROR: Attempting to clone an unrecognized JavaFX oldNode type!&quot;);\r\n    }\r\n\r\n    clonedNode.setTranslateX(oldNode.getTranslateX());\r\n    clonedNode.setTranslateY(oldNode.getTranslateY());\r\n    clonedNode.setLayoutX(oldNode.getLayoutX());\r\n    clonedNode.setLayoutY(oldNode.getLayoutY());\r\n    clonedNode.setRotate(oldNode.getRotate());\r\n\r\n    return clonedNode;\r\n}\r\n```\r\n\r\nWith the function above returning a cloned instance of the provided `Node` object.\r\n\r\nMy question is, will calling the various `Node`&#39;s property setters directly on the results of the property getters result in the property values be passed by value or by reference?\r\n\r\nIn other words, will the properties of the cloned `Node` returned by the function above be truly unique or still point to the original `Node`&#39;s properties?\r\n\r\nFrom my own testing, this function appears to indeed produce fully unique `Node`s, but I wanted to verify before fully comitting to this `Node` cloning approach.\r\n\r\nThanks for reading my post, any guidance is appreciated.","link":"https://stackoverflow.com/questions/77510301/node-cloning-in-javafx","title":"Node Cloning in JavaFX","body":"<p>I have a JavaFX <code>Node</code> object, and I wish to clone it via code.</p>\n<p>It's my understanding that Java variables are reference-types, and simply doing something like <code>clonedNode = oldNode</code> would result in <code>clonedNode</code> pointing to <code>oldNode</code>.</p>\n<p>It doesn't appear that JavaFX has an in-built function for cloning <code>Node</code> objects. Hence, I attempted to write a cloning function myself as such (suppose I'm only working with <code>Node</code>s of types <code>Circle</code>, <code>Rectangle</code>, <code>Polygon</code>, <code>Line</code>, <code>Text</code> and <code>Group</code>, and that I only care about the <code>Fill</code>, <code>Stroke</code>, <code>Text</code> and positional properties of the <code>Node</code>):</p>\n<pre><code>public static Node NodeClone(Node oldNode)\n{\n    Node clonedNode = null;\n\n    if (oldNode.getClass() == Circle.class)\n    {\n        Circle oldCircle = (Circle)oldNode;\n\n        Circle clonedCircle = new Circle();\n        clonedCircle.setRadius(oldCircle.getRadius());\n        clonedCircle.setFill(oldCircle.getFill());\n        clonedCircle.setStroke(oldCircle.getStroke());\n        clonedCircle.setStrokeWidth(oldCircle.getStrokeWidth());\n\n        clonedNode = clonedCircle;\n    }\n    else if (oldNode.getClass() == Rectangle.class)\n    {\n        Rectangle oldRectangle = (Rectangle)oldNode;\n\n        Rectangle clonedRectangle = new Rectangle();\n        clonedRectangle.setWidth(oldRectangle.getWidth());\n        clonedRectangle.setHeight(oldRectangle.getHeight());\n        clonedRectangle.setFill(oldRectangle.getFill());\n        clonedRectangle.setStroke(oldRectangle.getStroke());\n        clonedRectangle.setStrokeWidth(oldRectangle.getStrokeWidth());\n\n        clonedNode = clonedRectangle;\n    }\n    else if (oldNode.getClass() == Polygon.class)\n    {\n        Polygon oldTriangle = (Polygon)oldNode;\n\n        Polygon clonedTriangle = new Polygon();\n        LinkedList&lt;Double&gt; clonedPoints = new LinkedList&lt;Double&gt;(oldTriangle.getPoints());\n        clonedTriangle.getPoints().setAll(clonedPoints);\n        clonedTriangle.setFill(oldTriangle.getFill());\n        clonedTriangle.setStroke(oldTriangle.getStroke());\n        clonedTriangle.setStrokeWidth(oldTriangle.getStrokeWidth());\n\n        clonedNode = clonedTriangle;\n    }\n    else if (oldNode.getClass() == Line.class)\n    {\n        Line oldLine = (Line)oldNode;\n\n        Line clonedLine = new Line();\n        clonedLine.setStartX(oldLine.getStartX());\n        clonedLine.setStartY(oldLine.getStartY());\n        clonedLine.setEndX(oldLine.getEndX());\n        clonedLine.setEndY(oldLine.getEndY());\n        clonedLine.setStroke(oldLine.getStroke());\n        clonedLine.setStrokeWidth(oldLine.getStrokeWidth());\n\n        clonedNode = clonedLine;\n    }\n    else if (oldNode.getClass() == Text.class)\n    {\n        Text oldText = (Text)oldNode;\n\n        Text clonedText = new Text();\n        clonedText.setFont(oldText.getFont());\n        clonedText.setText(oldText.getText());\n        clonedText.setFill(oldText.getFill());\n\n        clonedNode = clonedText;\n    }\n    else if (oldNode.getClass() == Group.class)\n    {\n        Group oldGroup = (Group)oldNode;\n\n        Group clonedGroup = new Group();\n\n        for (int i = 0; i &lt; oldGroup.getChildren().size(); i++)\n            clonedGroup.getChildren().add(NodeClone(oldGroup.getChildren().get(i)));\n\n        clonedNode = clonedGroup;\n    }\n    else\n    {\n        throw new java.lang.Error(&quot;ERROR: Attempting to clone an unrecognized JavaFX oldNode type!&quot;);\n    }\n\n    clonedNode.setTranslateX(oldNode.getTranslateX());\n    clonedNode.setTranslateY(oldNode.getTranslateY());\n    clonedNode.setLayoutX(oldNode.getLayoutX());\n    clonedNode.setLayoutY(oldNode.getLayoutY());\n    clonedNode.setRotate(oldNode.getRotate());\n\n    return clonedNode;\n}\n</code></pre>\n<p>With the function above returning a cloned instance of the provided <code>Node</code> object.</p>\n<p>My question is, will calling the various <code>Node</code>'s property setters directly on the results of the property getters result in the property values be passed by value or by reference?</p>\n<p>In other words, will the properties of the cloned <code>Node</code> returned by the function above be truly unique or still point to the original <code>Node</code>'s properties?</p>\n<p>From my own testing, this function appears to indeed produce fully unique <code>Node</code>s, but I wanted to verify before fully comitting to this <code>Node</code> cloning approach.</p>\n<p>Thanks for reading my post, any guidance is appreciated.</p>\n"},{"tags":["java","project-reactor"],"answers":[{"comment_count":0,"score":2,"last_activity_date":1695856989,"creation_date":1695856989,"answer_id":77191380,"question_id":77187449,"body_markdown":"If you look at the implementation of `publishOn` method, you will notice that it has a specific case for when it is called immediately after `Callable`. In this case, it returns `MonoSubscribeOnCallable` and the callable is executed on the scheduler that is passed to `publishOn`. This is why you see such a behaviour.\r\n\r\nHowever, if you add a `.log` operator between your `fromCallable` and `publishOn`, then this special case is not applied. This is because `this` pointer now refers to `MonoLogFuseable`, and as a result, `MonoPublishOn` is returned with default behavior.\r\n\r\n```java\r\npublic final Mono&lt;T&gt; publishOn(Scheduler scheduler) {\r\n    if(this instanceof Callable) {\r\n        if (this instanceof Fuseable.ScalarCallable) {\r\n            try {\r\n                T value = block();\r\n                return onAssembly(new MonoSubscribeOnValue&lt;&gt;(value, scheduler));\r\n            }\r\n            catch (Throwable t) {\r\n                //leave MonoSubscribeOnCallable defer error\r\n            }\r\n        }\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        Callable&lt;T&gt; c = (Callable&lt;T&gt;)this;\r\n        return onAssembly(new MonoSubscribeOnCallable&lt;&gt;(c, scheduler));\r\n    }\r\n    return onAssembly(new MonoPublishOn&lt;&gt;(this, scheduler));\r\n}\r\n```\r\n\r\nHere is the commit where this change was introduced: https://github.com/reactor/reactor-core/commit/41d9dae7256ffc36a07db7a9f5fa4d95182a5ad9\r\n\r\nUnfortunately, I couldn&#39;t find any ticket reference or explanation to clearly understand why it works the way it does.","link":"https://stackoverflow.com/questions/77187449/why-does-extra-log-influence-the-threadpool-used-for-calculating-fromcallable/77191380#77191380","title":"Why does extra log() influence the threadpool used for calculating fromCallable()?","body":"<p>If you look at the implementation of <code>publishOn</code> method, you will notice that it has a specific case for when it is called immediately after <code>Callable</code>. In this case, it returns <code>MonoSubscribeOnCallable</code> and the callable is executed on the scheduler that is passed to <code>publishOn</code>. This is why you see such a behaviour.</p>\n<p>However, if you add a <code>.log</code> operator between your <code>fromCallable</code> and <code>publishOn</code>, then this special case is not applied. This is because <code>this</code> pointer now refers to <code>MonoLogFuseable</code>, and as a result, <code>MonoPublishOn</code> is returned with default behavior.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final Mono&lt;T&gt; publishOn(Scheduler scheduler) {\n    if(this instanceof Callable) {\n        if (this instanceof Fuseable.ScalarCallable) {\n            try {\n                T value = block();\n                return onAssembly(new MonoSubscribeOnValue&lt;&gt;(value, scheduler));\n            }\n            catch (Throwable t) {\n                //leave MonoSubscribeOnCallable defer error\n            }\n        }\n        @SuppressWarnings(&quot;unchecked&quot;)\n        Callable&lt;T&gt; c = (Callable&lt;T&gt;)this;\n        return onAssembly(new MonoSubscribeOnCallable&lt;&gt;(c, scheduler));\n    }\n    return onAssembly(new MonoPublishOn&lt;&gt;(this, scheduler));\n}\n</code></pre>\n<p>Here is the commit where this change was introduced: <a href=\"https://github.com/reactor/reactor-core/commit/41d9dae7256ffc36a07db7a9f5fa4d95182a5ad9\" rel=\"nofollow noreferrer\">https://github.com/reactor/reactor-core/commit/41d9dae7256ffc36a07db7a9f5fa4d95182a5ad9</a></p>\n<p>Unfortunately, I couldn't find any ticket reference or explanation to clearly understand why it works the way it does.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1702585053,"creation_date":1702585053,"answer_id":77662855,"question_id":77187449,"body_markdown":"I annotated the code snippet a bit to explain what&#39;s going on.\r\n\r\n    Mono.fromCallable(() -&gt; calculate()) // &lt;1&gt;\r\n      //.log() // &lt;2&gt;\r\n      .publishOn(Schedulers.boundedElastic()) // &lt;3&gt;\r\n      .doOnNext(i -&gt; System.out.println( // &lt;4&gt;\r\n        &quot;thread: &quot; +   Thread.currentThread().getName()))\r\n      .block();\r\n\r\nWhat you experience is called operator fusion, which you can read more on [David Karnok&#39;s blog][1]. When &lt;2&gt; is present, it doesn&#39;t allow fusion between &lt;3&gt; and &lt;1&gt;. When you comment it out, &lt;3&gt; fuses with &lt;1&gt; and the `MonoCallable`&#39;s argument can be called on the `Scheduler` that delivers values to operator/`Subscriber` following the `publishOn` operator.\r\n\r\n&lt;1&gt; the source is Callable, which allows some operators to take advantage of its property of being finite.\r\n\r\n&lt;2&gt; the `log` operator is not Callable so any operator following it won&#39;t be able to apply this optimization.\r\n\r\n&lt;3&gt; when this operator is assembled, it notices the current state of the chain and is able to apply some optimizations, such as delaying the call to `Callable.call()` to the point that the onNext signal is delivered downstream.\r\n\r\n&lt;4&gt; the print statement is always executed on a `Thread` from the `Scheduler` specified in &lt;3&gt;.\r\n\r\nNow on to the actual problem here. The typical situation when users of Reactor run into asking this question is that the `Callable` needs to be executed on a specific `Scheduler`, especially if it is of a blocking nature. We recently [improved the documentation for this scenario][2]. Essentially, what you are looking for is the `subscribeOn()` operator. The `publishOn` operator guarantees the values are delivered on a specific Scheduler, but don&#39;t specify where the value extraction happens. Therefore, this particular optimization leads to such surprises when it can no longer be applied. \r\n\r\n\r\n  [1]: https://akarnokd.blogspot.com/2016/03/operator-fusion-part-1.html\r\n  [2]: https://projectreactor.io/docs/core/release/reference/#faq.wrap-blocking","link":"https://stackoverflow.com/questions/77187449/why-does-extra-log-influence-the-threadpool-used-for-calculating-fromcallable/77662855#77662855","title":"Why does extra log() influence the threadpool used for calculating fromCallable()?","body":"<p>I annotated the code snippet a bit to explain what's going on.</p>\n<pre><code>Mono.fromCallable(() -&gt; calculate()) // &lt;1&gt;\n  //.log() // &lt;2&gt;\n  .publishOn(Schedulers.boundedElastic()) // &lt;3&gt;\n  .doOnNext(i -&gt; System.out.println( // &lt;4&gt;\n    &quot;thread: &quot; +   Thread.currentThread().getName()))\n  .block();\n</code></pre>\n<p>What you experience is called operator fusion, which you can read more on <a href=\"https://akarnokd.blogspot.com/2016/03/operator-fusion-part-1.html\" rel=\"nofollow noreferrer\">David Karnok's blog</a>. When &lt;2&gt; is present, it doesn't allow fusion between &lt;3&gt; and &lt;1&gt;. When you comment it out, &lt;3&gt; fuses with &lt;1&gt; and the <code>MonoCallable</code>'s argument can be called on the <code>Scheduler</code> that delivers values to operator/<code>Subscriber</code> following the <code>publishOn</code> operator.</p>\n<p>&lt;1&gt; the source is Callable, which allows some operators to take advantage of its property of being finite.</p>\n<p>&lt;2&gt; the <code>log</code> operator is not Callable so any operator following it won't be able to apply this optimization.</p>\n<p>&lt;3&gt; when this operator is assembled, it notices the current state of the chain and is able to apply some optimizations, such as delaying the call to <code>Callable.call()</code> to the point that the onNext signal is delivered downstream.</p>\n<p>&lt;4&gt; the print statement is always executed on a <code>Thread</code> from the <code>Scheduler</code> specified in &lt;3&gt;.</p>\n<p>Now on to the actual problem here. The typical situation when users of Reactor run into asking this question is that the <code>Callable</code> needs to be executed on a specific <code>Scheduler</code>, especially if it is of a blocking nature. We recently <a href=\"https://projectreactor.io/docs/core/release/reference/#faq.wrap-blocking\" rel=\"nofollow noreferrer\">improved the documentation for this scenario</a>. Essentially, what you are looking for is the <code>subscribeOn()</code> operator. The <code>publishOn</code> operator guarantees the values are delivered on a specific Scheduler, but don't specify where the value extraction happens. Therefore, this particular optimization leads to such surprises when it can no longer be applied.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":90,"answer_count":2,"score":2,"last_activity_date":1702585053,"creation_date":1695817190,"last_edit_date":1695817650,"question_id":77187449,"body_markdown":"I&#39;m playing with Project Reactor and facing unintuitive behaviour. \r\n\r\nTake the following example:\r\n\r\n        Mono.fromCallable(() -&gt; calculate())\r\n        //.log()\r\n          .publishOn(Schedulers.boundedElastic())\r\n          .doOnNext(i -&gt; System.out.println(&quot;thread: &quot; +   Thread.currentThread().getName()))\r\n          .block();\r\n\r\nWhen I uncomment `log()`, `calculate()` runs on `main` thread but when I leave it in, the method is executed on `boundedElastic`. Why is that `log()` changes the behaviour of the Mono?","link":"https://stackoverflow.com/questions/77187449/why-does-extra-log-influence-the-threadpool-used-for-calculating-fromcallable","title":"Why does extra log() influence the threadpool used for calculating fromCallable()?","body":"<p>I'm playing with Project Reactor and facing unintuitive behaviour.</p>\n<p>Take the following example:</p>\n<pre><code>    Mono.fromCallable(() -&gt; calculate())\n    //.log()\n      .publishOn(Schedulers.boundedElastic())\n      .doOnNext(i -&gt; System.out.println(&quot;thread: &quot; +   Thread.currentThread().getName()))\n      .block();\n</code></pre>\n<p>When I uncomment <code>log()</code>, <code>calculate()</code> runs on <code>main</code> thread but when I leave it in, the method is executed on <code>boundedElastic</code>. Why is that <code>log()</code> changes the behaviour of the Mono?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","java-module"],"answers":[{"comment_count":0,"score":1,"last_activity_date":1702565862,"last_edit_date":1702565862,"creation_date":1701344977,"answer_id":77578205,"question_id":77578168,"body_markdown":"\r\nThe import instruction that triggered the IntelliJ to suggest the dependency was this:\r\n\r\n     import jakarta.transaction.Transactional;\r\n\r\nIn this case, the import should had be from `springboot` instead :\r\n  \r\n     import org.springframework.transaction.annotation.Transactional;\r\n\r\nI post this answer in case some else fall into this rare problem with no obvious solution.\r\n","link":"https://stackoverflow.com/questions/77578168/error-module-not-found-jakarta-cdi-when-using-module-info-java-in-a-spring-bo/77578205#77578205","title":"Error &quot;module not found: jakarta.cdi&quot; when using module-info.java in a Spring boot 3 project","body":"<p>The import instruction that triggered the IntelliJ to suggest the dependency was this:</p>\n<pre><code> import jakarta.transaction.Transactional;\n</code></pre>\n<p>In this case, the import should had be from <code>springboot</code> instead :</p>\n<pre><code> import org.springframework.transaction.annotation.Transactional;\n</code></pre>\n<p>I post this answer in case some else fall into this rare problem with no obvious solution.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":48,"answer_count":1,"score":0,"last_activity_date":1702565862,"creation_date":1701344541,"question_id":77578168,"body_markdown":"I got the following error when I add the dependency `jakarta.transaction` to the `module-info.java` file, as suggested by IntelliJ:\r\n\r\n    module not found: jakarta.cdi\r\n\r\nThe module-info.java file dependency is added like this:\r\n\r\n    module myModule.main {\r\n    ...\r\n    requires jakarta.transaction;\r\n    }\r\n\r\n\r\nThe project builds and runs well without the `module-info.java` file, so I guess all dependencies are well defined at `gradle.build` file.\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77578168/error-module-not-found-jakarta-cdi-when-using-module-info-java-in-a-spring-bo","title":"Error &quot;module not found: jakarta.cdi&quot; when using module-info.java in a Spring boot 3 project","body":"<p>I got the following error when I add the dependency <code>jakarta.transaction</code> to the <code>module-info.java</code> file, as suggested by IntelliJ:</p>\n<pre><code>module not found: jakarta.cdi\n</code></pre>\n<p>The module-info.java file dependency is added like this:</p>\n<pre><code>module myModule.main {\n...\nrequires jakarta.transaction;\n}\n</code></pre>\n<p>The project builds and runs well without the <code>module-info.java</code> file, so I guess all dependencies are well defined at <code>gradle.build</code> file.</p>\n"},{"tags":["java","json","elasticsearch"],"comment_count":0,"is_answered":false,"view_count":95,"answer_count":0,"score":2,"last_activity_date":1702559900,"creation_date":1695127843,"last_edit_date":1702559900,"question_id":77134708,"body_markdown":"for some time now I have been trying to incorporate the Elastic Java 8.10 client into my code, I have a big ELK stack with a lot of data. I am trying to fetch continuously data from it, but I am encountering some inconsistent behavior.\r\n\r\nMy code is following the Elastic tutorial on their website and I have a simple function to get the data:\r\n\r\n```java\r\n/**\r\n     * Method for querying a search in ELK using search_after.\r\n     * @param search_size\r\n     * @param index\r\n     * @param sort_options\r\n     * @param field\r\n     * @param value\r\n     * @return SearchResponse\r\n     * @throws IOException on failed search\r\n     */\r\n    public final SearchResponse&lt;JsonData&gt; querySearch(final int search_size,\r\n            final String index, final List&lt;SortOptions&gt; sort_options,\r\n            final List&lt;FieldValue&gt; search_after, final String field,\r\n            final String value) throws IOException {\r\n        SearchResponse&lt;JsonData&gt; result = this.el_client.search(s -&gt; s\r\n            .index(index)\r\n            .size(search_size)\r\n            .sort(sort_options)\r\n            .query(q -&gt; q\r\n                .term(t -&gt; t\r\n                    .field(field)\r\n                    .value(v -&gt; v.stringValue(value))\r\n                )),\r\n            JsonData.class);\r\n\r\n        return result;\r\n    }\r\n```\r\n\r\nThe strange thing is that it works fine for some time, but then I always receive the following error:\r\n\r\n```\r\nError deserializing co.elastic.clients.elasticsearch.core.search.Hit: jakarta.json.stream.JsonParsingException: Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in name\r\n```\r\nit is inconsistent as it happens at random entries retrieved from Elasticsearch, I looked the previous entries that were retrieved and it is never the same time window (i am using the @timestamp field to cross-reference which entries might provoke the error)\r\n\r\nHere is the stack trace:\r\n\r\n```\r\n co.elastic.clients.json.JsonpMappingException: Error deserializing co.elastic.clients.elasticsearch.core.search.Hit: jakarta.json.stream.JsonParsingException: Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in name\r\n  at [Source: (org.apache.http.nio.entity.ContentInputStream); line: 1, column: 176305] (JSON path: hits.hits[55]._source) (line no=1, column no=176305, offset=-1)\r\n \tat co.elastic.clients.json.JsonpMappingException.from0(JsonpMappingException.java:134)\r\n \tat co.elastic.clients.json.JsonpMappingException.from(JsonpMappingException.java:121)\r\n \tat co.elastic.clients.json.ObjectDeserializer.deserialize(ObjectDeserializer.java:218)\r\n \tat co.elastic.clients.json.ObjectDeserializer.deserialize(ObjectDeserializer.java:148)\r\n \tat co.elastic.clients.json.ObjectBuilderDeserializer.deserialize(ObjectBuilderDeserializer.java:85)\r\n \tat co.elastic.clients.json.JsonpDeserializerBase$ArrayDeserializer.deserialize(JsonpDeserializerBase.java:318)\r\n \tat co.elastic.clients.json.JsonpDeserializerBase$ArrayDeserializer.deserialize(JsonpDeserializerBase.java:280)\r\n \tat co.elastic.clients.json.JsonpDeserializer.deserialize(JsonpDeserializer.java:77)\r\n \tat co.elastic.clients.json.ObjectDeserializer$FieldObjectDeserializer.deserialize(ObjectDeserializer.java:78)\r\n \tat co.elastic.clients.json.ObjectDeserializer.deserialize(ObjectDeserializer.java:192)\r\n \tat co.elastic.clients.json.ObjectDeserializer.deserialize(ObjectDeserializer.java:148)\r\n \tat co.elastic.clients.json.JsonpDeserializer.deserialize(JsonpDeserializer.java:77)\r\n \tat co.elastic.clients.json.ObjectBuilderDeserializer.deserialize(ObjectBuilderDeserializer.java:79)\r\n \tat co.elastic.clients.json.ObjectDeserializer$FieldObjectDeserializer.deserialize(ObjectDeserializer.java:78)\r\n \tat co.elastic.clients.json.ObjectDeserializer.deserialize(ObjectDeserializer.java:192)\r\n \tat co.elastic.clients.json.ObjectDeserializer.deserialize(ObjectDeserializer.java:148)\r\n \tat co.elastic.clients.json.JsonpDeserializer.deserialize(JsonpDeserializer.java:77)\r\n \tat co.elastic.clients.json.ObjectBuilderDeserializer.deserialize(ObjectBuilderDeserializer.java:79)\r\n \tat co.elastic.clients.json.DelegatingDeserializer$SameType.deserialize(DelegatingDeserializer.java:43)\r\n \tat co.elastic.clients.json.DelegatingDeserializer$SameType.deserialize(DelegatingDeserializer.java:43)\r\n \tat co.elastic.clients.transport.endpoints.EndpointWithResponseMapperAttr$1.deserialize(EndpointWithResponseMapperAttr.java:56)\r\n \tat co.elastic.clients.transport.rest_client.RestClientTransport.decodeResponse(RestClientTransport.java:377)\r\n \tat co.elastic.clients.transport.rest_client.RestClientTransport.getHighLevelResponse(RestClientTransport.java:347)\r\n \tat co.elastic.clients.transport.rest_client.RestClientTransport.performRequest(RestClientTransport.java:154)\r\n \tat co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1887)\r\n \tat co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1904)\r\n \tat netrank.ElasticSourceClient.querySearch(ElasticSourceClient.java:190)\r\n \tat netrank.datasource.ElasticSource.run(ElasticSource.java:309)\r\n \tat be.cylab.mark.data.SourceWrapper.run(SourceWrapper.java:61)\r\n \tat java.base/java.lang.Thread.run(Thread.java:829)\r\n Caused by: jakarta.json.stream.JsonParsingException: Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in name\r\n  at [Source: (org.apache.http.nio.entity.ContentInputStream); line: 1, column: 176305]\r\n \tat co.elastic.clients.json.jackson.JacksonUtils.convertException(JacksonUtils.java:36)\r\n \tat co.elastic.clients.json.jackson.JacksonJsonpParser.getJsonData(JacksonJsonpParser.java:435)\r\n \tat co.elastic.clients.json.JsonData.from(JsonData.java:162)\r\n \tat co.elastic.clients.json.JsonData.lambda$static$0(JsonData.java:169)\r\n \tat co.elastic.clients.json.JsonpDeserializer$3.deserialize(JsonpDeserializer.java:136)\r\n \tat co.elastic.clients.json.JsonpDeserializer.deserialize(JsonpDeserializer.java:77)\r\n \tat co.elastic.clients.json.NamedDeserializer.deserialize(NamedDeserializer.java:64)\r\n \tat co.elastic.clients.json.ObjectDeserializer$FieldObjectDeserializer.deserialize(ObjectDeseri \tat co.elastic.clients.json.ObjectDeserializer.deserialize(ObjectDeserializer.java:192)\r\n \t... 27 more\r\n Caused by: com.fasterxml.jackson.core.JsonParseException: Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in name\r\n  at [Source: (org.apache.http.nio.entity.ContentInputStream); line: 1, column: 176305]\r\n \tat com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:1840)\r\n \tat com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:712)\r\n \tat com.fasterxml.jackson.core.base.ParserBase._throwUnquotedSpace(ParserBase.java:1046)\r\n \tat com.fasterxml.jackson.core.json.UTF8StreamJsonParser.parseEscapedName(UTF8StreamJsonParser.java:1931)\r\n \tat com.fasterxml.jackson.core.json.UTF8StreamJsonParser.parseLongName(UTF8StreamJsonParser.java:1872)\r\n \tat com.fasterxml.jackson.core.json.UTF8StreamJsonParser.parseMediumName2(UTF8StreamJsonParser.java:1810)\r\n \tat com.fasterxml.jackson.core.json.UTF8StreamJsonParser.parseMediumName(UTF8StreamJsonParser.java:1767)\r\n \tat com.fasterxml.jackson.core.json.UTF8StreamJsonParser._parseName(UTF8StreamJsonParser.java:1702)\r\n \tat com.fasterxml.jackson.core.json.UTF8StreamJsonParser.nextToken(UTF8StreamJsonParser.java:757)\r\n \tat com.fasterxml.jackson.databind.util.TokenBuffer._copyBufferContents(TokenBuffer.java:1155)\r\n \tat com.fasterxml.jackson.databind.util.TokenBuffer.copyCurrentStructure(TokenBuffer.java:1137)\r\n \tat co.elastic.clients.json.jackson.JacksonJsonpParser.getJsonData(JacksonJsonpParser.java:432)\r\n \t... 34 more\r\n```\r\n\r\nAt this point I have the feeling that the error is not from my code, but how the Elastic API sends the data and then the transformation from the raw JSON to JsonData. I tried using Object instead, but the same thing happens.\r\nIs there a way to sanitize the JSON at the moment of fetching it or any way to correct this strange behavior?\r\n\r\n**Small Update:**\r\n\r\nI added a throw/catch line in the querySearch method to print the request send to ELK as output so I can check afterwards in the Kibana Developer Console to see the output and if there are errors in it.\r\n\r\nStrangely, after I lowered the search_size (how many entries are fetched at once) from 100 to 50, I have no more Parsing errors. I wonder if the problem was the amount of lines retrieved and there being some artificial errors in them because of it.","link":"https://stackoverflow.com/questions/77134708/jakarta-json-stream-jsonparsingexception-when-retrieving-data-from-elasticsearch","title":"jakarta.json.stream.JsonParsingException when retrieving data from Elasticsearch","body":"<p>for some time now I have been trying to incorporate the Elastic Java 8.10 client into my code, I have a big ELK stack with a lot of data. I am trying to fetch continuously data from it, but I am encountering some inconsistent behavior.</p>\n<p>My code is following the Elastic tutorial on their website and I have a simple function to get the data:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n     * Method for querying a search in ELK using search_after.\n     * @param search_size\n     * @param index\n     * @param sort_options\n     * @param field\n     * @param value\n     * @return SearchResponse\n     * @throws IOException on failed search\n     */\n    public final SearchResponse&lt;JsonData&gt; querySearch(final int search_size,\n            final String index, final List&lt;SortOptions&gt; sort_options,\n            final List&lt;FieldValue&gt; search_after, final String field,\n            final String value) throws IOException {\n        SearchResponse&lt;JsonData&gt; result = this.el_client.search(s -&gt; s\n            .index(index)\n            .size(search_size)\n            .sort(sort_options)\n            .query(q -&gt; q\n                .term(t -&gt; t\n                    .field(field)\n                    .value(v -&gt; v.stringValue(value))\n                )),\n            JsonData.class);\n\n        return result;\n    }\n</code></pre>\n<p>The strange thing is that it works fine for some time, but then I always receive the following error:</p>\n<pre><code>Error deserializing co.elastic.clients.elasticsearch.core.search.Hit: jakarta.json.stream.JsonParsingException: Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in name\n</code></pre>\n<p>it is inconsistent as it happens at random entries retrieved from Elasticsearch, I looked the previous entries that were retrieved and it is never the same time window (i am using the @timestamp field to cross-reference which entries might provoke the error)</p>\n<p>Here is the stack trace:</p>\n<pre><code> co.elastic.clients.json.JsonpMappingException: Error deserializing co.elastic.clients.elasticsearch.core.search.Hit: jakarta.json.stream.JsonParsingException: Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in name\n  at [Source: (org.apache.http.nio.entity.ContentInputStream); line: 1, column: 176305] (JSON path: hits.hits[55]._source) (line no=1, column no=176305, offset=-1)\n    at co.elastic.clients.json.JsonpMappingException.from0(JsonpMappingException.java:134)\n    at co.elastic.clients.json.JsonpMappingException.from(JsonpMappingException.java:121)\n    at co.elastic.clients.json.ObjectDeserializer.deserialize(ObjectDeserializer.java:218)\n    at co.elastic.clients.json.ObjectDeserializer.deserialize(ObjectDeserializer.java:148)\n    at co.elastic.clients.json.ObjectBuilderDeserializer.deserialize(ObjectBuilderDeserializer.java:85)\n    at co.elastic.clients.json.JsonpDeserializerBase$ArrayDeserializer.deserialize(JsonpDeserializerBase.java:318)\n    at co.elastic.clients.json.JsonpDeserializerBase$ArrayDeserializer.deserialize(JsonpDeserializerBase.java:280)\n    at co.elastic.clients.json.JsonpDeserializer.deserialize(JsonpDeserializer.java:77)\n    at co.elastic.clients.json.ObjectDeserializer$FieldObjectDeserializer.deserialize(ObjectDeserializer.java:78)\n    at co.elastic.clients.json.ObjectDeserializer.deserialize(ObjectDeserializer.java:192)\n    at co.elastic.clients.json.ObjectDeserializer.deserialize(ObjectDeserializer.java:148)\n    at co.elastic.clients.json.JsonpDeserializer.deserialize(JsonpDeserializer.java:77)\n    at co.elastic.clients.json.ObjectBuilderDeserializer.deserialize(ObjectBuilderDeserializer.java:79)\n    at co.elastic.clients.json.ObjectDeserializer$FieldObjectDeserializer.deserialize(ObjectDeserializer.java:78)\n    at co.elastic.clients.json.ObjectDeserializer.deserialize(ObjectDeserializer.java:192)\n    at co.elastic.clients.json.ObjectDeserializer.deserialize(ObjectDeserializer.java:148)\n    at co.elastic.clients.json.JsonpDeserializer.deserialize(JsonpDeserializer.java:77)\n    at co.elastic.clients.json.ObjectBuilderDeserializer.deserialize(ObjectBuilderDeserializer.java:79)\n    at co.elastic.clients.json.DelegatingDeserializer$SameType.deserialize(DelegatingDeserializer.java:43)\n    at co.elastic.clients.json.DelegatingDeserializer$SameType.deserialize(DelegatingDeserializer.java:43)\n    at co.elastic.clients.transport.endpoints.EndpointWithResponseMapperAttr$1.deserialize(EndpointWithResponseMapperAttr.java:56)\n    at co.elastic.clients.transport.rest_client.RestClientTransport.decodeResponse(RestClientTransport.java:377)\n    at co.elastic.clients.transport.rest_client.RestClientTransport.getHighLevelResponse(RestClientTransport.java:347)\n    at co.elastic.clients.transport.rest_client.RestClientTransport.performRequest(RestClientTransport.java:154)\n    at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1887)\n    at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1904)\n    at netrank.ElasticSourceClient.querySearch(ElasticSourceClient.java:190)\n    at netrank.datasource.ElasticSource.run(ElasticSource.java:309)\n    at be.cylab.mark.data.SourceWrapper.run(SourceWrapper.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:829)\n Caused by: jakarta.json.stream.JsonParsingException: Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in name\n  at [Source: (org.apache.http.nio.entity.ContentInputStream); line: 1, column: 176305]\n    at co.elastic.clients.json.jackson.JacksonUtils.convertException(JacksonUtils.java:36)\n    at co.elastic.clients.json.jackson.JacksonJsonpParser.getJsonData(JacksonJsonpParser.java:435)\n    at co.elastic.clients.json.JsonData.from(JsonData.java:162)\n    at co.elastic.clients.json.JsonData.lambda$static$0(JsonData.java:169)\n    at co.elastic.clients.json.JsonpDeserializer$3.deserialize(JsonpDeserializer.java:136)\n    at co.elastic.clients.json.JsonpDeserializer.deserialize(JsonpDeserializer.java:77)\n    at co.elastic.clients.json.NamedDeserializer.deserialize(NamedDeserializer.java:64)\n    at co.elastic.clients.json.ObjectDeserializer$FieldObjectDeserializer.deserialize(ObjectDeseri  at co.elastic.clients.json.ObjectDeserializer.deserialize(ObjectDeserializer.java:192)\n    ... 27 more\n Caused by: com.fasterxml.jackson.core.JsonParseException: Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in name\n  at [Source: (org.apache.http.nio.entity.ContentInputStream); line: 1, column: 176305]\n    at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:1840)\n    at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:712)\n    at com.fasterxml.jackson.core.base.ParserBase._throwUnquotedSpace(ParserBase.java:1046)\n    at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.parseEscapedName(UTF8StreamJsonParser.java:1931)\n    at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.parseLongName(UTF8StreamJsonParser.java:1872)\n    at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.parseMediumName2(UTF8StreamJsonParser.java:1810)\n    at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.parseMediumName(UTF8StreamJsonParser.java:1767)\n    at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._parseName(UTF8StreamJsonParser.java:1702)\n    at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.nextToken(UTF8StreamJsonParser.java:757)\n    at com.fasterxml.jackson.databind.util.TokenBuffer._copyBufferContents(TokenBuffer.java:1155)\n    at com.fasterxml.jackson.databind.util.TokenBuffer.copyCurrentStructure(TokenBuffer.java:1137)\n    at co.elastic.clients.json.jackson.JacksonJsonpParser.getJsonData(JacksonJsonpParser.java:432)\n    ... 34 more\n</code></pre>\n<p>At this point I have the feeling that the error is not from my code, but how the Elastic API sends the data and then the transformation from the raw JSON to JsonData. I tried using Object instead, but the same thing happens.\nIs there a way to sanitize the JSON at the moment of fetching it or any way to correct this strange behavior?</p>\n<p><strong>Small Update:</strong></p>\n<p>I added a throw/catch line in the querySearch method to print the request send to ELK as output so I can check afterwards in the Kibana Developer Console to see the output and if there are errors in it.</p>\n<p>Strangely, after I lowered the search_size (how many entries are fetched at once) from 100 to 50, I have no more Parsing errors. I wonder if the problem was the amount of lines retrieved and there being some artificial errors in them because of it.</p>\n"},{"tags":["java","spring-boot","metrics","spring-boot-actuator","spring-micrometer"],"comments":[{"score":0,"post_type":"question","creation_date":1687932861,"post_id":76568855,"comment_id":135004379,"body_markdown":"Did you enable loadtime or compile time weaving? WIthout it this won&#39;t work.","link":"https://stackoverflow.com/questions/76568855/springboot-reactive-issue-timing-timed-with-micrometer#comment135004379_76568855","body":"Did you enable loadtime or compile time weaving? WIthout it this won&#39;t work."},{"score":0,"post_type":"question","creation_date":1687939537,"post_id":76568855,"comment_id":135005461,"body_markdown":"Hey, thank you for looking into this. &quot;loadtime or compile time weaving&quot; I do not think I did. How to please?","link":"https://stackoverflow.com/questions/76568855/springboot-reactive-issue-timing-timed-with-micrometer#comment135005461_76568855","body":"Hey, thank you for looking into this. &quot;loadtime or compile time weaving&quot; I do not think I did. How to please?"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702557916,"creation_date":1702557916,"answer_id":77660249,"question_id":76568855,"body_markdown":"As a last resort, you could do a workaround and extract such methods to a different helper class.\r\n\r\nThis way even if you just have AOP, the annotation should trigger the timedAspect.","link":"https://stackoverflow.com/questions/76568855/springboot-reactive-issue-timing-timed-with-micrometer/77660249#77660249","title":"SpringBoot reactive, issue timing @Timed with micrometer","body":"<p>As a last resort, you could do a workaround and extract such methods to a different helper class.</p>\n<p>This way even if you just have AOP, the annotation should trigger the timedAspect.</p>\n"}],"comment_count":2,"is_answered":false,"view_count":190,"answer_count":1,"score":0,"last_activity_date":1702557916,"creation_date":1687902523,"last_edit_date":1688025960,"question_id":76568855,"body_markdown":"*What I am trying to achieve:*\r\n\r\nGather some metrics, such as **time** using micrometer on a SpringBoot application within a **reactive** pipeline.\r\n\r\n*what I tried:*\r\n\r\n```\r\n    @Bean\r\n    public TimedAspect timedAspect(final MeterRegistry registry) {\r\n        return new TimedAspect(registry);\r\n    }\r\n```\r\n\r\n```\r\n@Service\r\npublic class MyClass {\r\n\r\n    public Flux&lt;String&gt; mainReactivePipelineETL() {\r\n        return Flux.interval(Duration.ofSeconds(1)) //Actual would be an aggressive flux from Kafka or http\r\n                .map(i -&gt; transformToComplexStringMethodIssueWithTimed(i));\r\n    }\r\n\r\n    @Timed(&quot;search_for_me&quot;)\r\n    private String transformToComplexStringMethodIssueWithTimed(Long i) {\r\n        //do some complex transformations from an input to an output\r\n        // I would like to time this operation, just this method\r\n        // The time varies for each transformation, again, this is invoked within a reactive pipeline\r\n        return ...;\r\n    }\r\n\r\n}\r\n```\r\n\r\n```\r\n &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\n*Issue:*\r\n\r\nAs you can see, following the reference guide https://micrometer.io/docs/concepts#_timers, I have in my code the proper @Configuration (see class above) for the TimedAspect\r\n\r\nBesides that, I do have the annotation on my method ```@Timed(&quot;search_for_me&quot;)```\r\n\r\nWith all, I am still not able to see these particular metrics (I do see a bunch of other metrics from micrometer, just not this one ```@Timed(&quot;search_for_me&quot;)```)\r\n\r\nFor instance, for the first 3 elements of my flux, let&#39;s say in this example, the first &quot;transformation: takes 10ms, the second takes 5ms, the third takes 20ms, I was hoping to see the metrics with:\r\n\r\n- a count of three\r\n- 10ms -&gt; 5ms -&gt; 20ms (so that I can plot that in a graph)\r\n\r\nHowever, nothing\r\n\r\n*Question:*\r\n\r\nWhat is the proper way to get those metrics in this reactive app?","link":"https://stackoverflow.com/questions/76568855/springboot-reactive-issue-timing-timed-with-micrometer","title":"SpringBoot reactive, issue timing @Timed with micrometer","body":"<p><em>What I am trying to achieve:</em></p>\n<p>Gather some metrics, such as <strong>time</strong> using micrometer on a SpringBoot application within a <strong>reactive</strong> pipeline.</p>\n<p><em>what I tried:</em></p>\n<pre><code>    @Bean\n    public TimedAspect timedAspect(final MeterRegistry registry) {\n        return new TimedAspect(registry);\n    }\n</code></pre>\n<pre><code>@Service\npublic class MyClass {\n\n    public Flux&lt;String&gt; mainReactivePipelineETL() {\n        return Flux.interval(Duration.ofSeconds(1)) //Actual would be an aggressive flux from Kafka or http\n                .map(i -&gt; transformToComplexStringMethodIssueWithTimed(i));\n    }\n\n    @Timed(&quot;search_for_me&quot;)\n    private String transformToComplexStringMethodIssueWithTimed(Long i) {\n        //do some complex transformations from an input to an output\n        // I would like to time this operation, just this method\n        // The time varies for each transformation, again, this is invoked within a reactive pipeline\n        return ...;\n    }\n\n}\n</code></pre>\n<pre><code> &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n&lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p><em>Issue:</em></p>\n<p>As you can see, following the reference guide <a href=\"https://micrometer.io/docs/concepts#_timers\" rel=\"nofollow noreferrer\">https://micrometer.io/docs/concepts#_timers</a>, I have in my code the proper @Configuration (see class above) for the TimedAspect</p>\n<p>Besides that, I do have the annotation on my method <code>@Timed(&quot;search_for_me&quot;)</code></p>\n<p>With all, I am still not able to see these particular metrics (I do see a bunch of other metrics from micrometer, just not this one <code>@Timed(&quot;search_for_me&quot;)</code>)</p>\n<p>For instance, for the first 3 elements of my flux, let's say in this example, the first &quot;transformation: takes 10ms, the second takes 5ms, the third takes 20ms, I was hoping to see the metrics with:</p>\n<ul>\n<li>a count of three</li>\n<li>10ms -&gt; 5ms -&gt; 20ms (so that I can plot that in a graph)</li>\n</ul>\n<p>However, nothing</p>\n<p><em>Question:</em></p>\n<p>What is the proper way to get those metrics in this reactive app?</p>\n"},{"tags":["java","sms","infobip","infobip-api"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702557597,"creation_date":1702557597,"answer_id":77660219,"question_id":76866314,"body_markdown":"Some time has passed and I am putting my comment here to help others not lose too much time on this. \r\nI had a similar problem and while looking for some clues I found your question. \r\n\r\nI was getting the same response when calling the API. \r\n\r\n    {\r\n      &quot;messages&quot;: [\r\n        {\r\n          &quot;messageId&quot;: &quot;SOME_MESSAGE_ID&quot;,\r\n          &quot;status&quot;: {\r\n            &quot;description&quot;: &quot;Message sent to next instance&quot;,\r\n            &quot;groupId&quot;: 1,\r\n            &quot;groupName&quot;: &quot;PENDING&quot;,\r\n            &quot;id&quot;: 26,\r\n            &quot;name&quot;: &quot;PENDING_ACCEPTED&quot;\r\n          },\r\n          &quot;to&quot;: &quot;SOME_PHONE_NUMBER&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\nIf you try to get some info about that messageID through the API again ( https://epqd3.api.infobip.com/sms/2/logs?messageId=THE_MESSAGE_ID ), you would get an empty response like: \r\n\r\n    {\r\n        &quot;results&quot;: []\r\n    }\r\n\r\nIf you try to check the dashboard in Infobip, there is no such request/message. \r\n\r\nIf you try to make a request via Postman (with SMS body as plain text), all is good and you can see the message in the dashboard.\r\n\r\n[**Cause of the problem**] \r\n\r\nTurned out the problem was that the content of the SMS was not in **PLAIN TEXT**! It was more like a rendered HTML encoded string. \r\n\r\n[**Solution**]\r\n\r\nFor me it was just making sure the body of the SMS is in PLAIN TEXT. That solved  the problem for me. ","link":"https://stackoverflow.com/questions/76866314/i-have-a-problem-when-try-to-send-sms-to-my-mobile-by-infobip/77660219#77660219","title":"I have a problem when try to send SMS to my mobile by INFOBIP","body":"<p>Some time has passed and I am putting my comment here to help others not lose too much time on this.\nI had a similar problem and while looking for some clues I found your question.</p>\n<p>I was getting the same response when calling the API.</p>\n<pre><code>{\n  &quot;messages&quot;: [\n    {\n      &quot;messageId&quot;: &quot;SOME_MESSAGE_ID&quot;,\n      &quot;status&quot;: {\n        &quot;description&quot;: &quot;Message sent to next instance&quot;,\n        &quot;groupId&quot;: 1,\n        &quot;groupName&quot;: &quot;PENDING&quot;,\n        &quot;id&quot;: 26,\n        &quot;name&quot;: &quot;PENDING_ACCEPTED&quot;\n      },\n      &quot;to&quot;: &quot;SOME_PHONE_NUMBER&quot;\n    }\n  ]\n}\n</code></pre>\n<p>If you try to get some info about that messageID through the API again ( <a href=\"https://epqd3.api.infobip.com/sms/2/logs?messageId=THE_MESSAGE_ID\" rel=\"nofollow noreferrer\">https://epqd3.api.infobip.com/sms/2/logs?messageId=THE_MESSAGE_ID</a> ), you would get an empty response like:</p>\n<pre><code>{\n    &quot;results&quot;: []\n}\n</code></pre>\n<p>If you try to check the dashboard in Infobip, there is no such request/message.</p>\n<p>If you try to make a request via Postman (with SMS body as plain text), all is good and you can see the message in the dashboard.</p>\n<p>[<strong>Cause of the problem</strong>]</p>\n<p>Turned out the problem was that the content of the SMS was not in <strong>PLAIN TEXT</strong>! It was more like a rendered HTML encoded string.</p>\n<p>[<strong>Solution</strong>]</p>\n<p>For me it was just making sure the body of the SMS is in PLAIN TEXT. That solved  the problem for me.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":124,"answer_count":1,"score":0,"last_activity_date":1702557597,"creation_date":1691573020,"last_edit_date":1691615689,"question_id":76866314,"body_markdown":"I have a problem when send SMS I get 200 http status but message is not received to my mobile.\r\n  \r\nTHIS MY CODE\r\n\r\n```\r\n        try {\r\n            // Create the connection to the Infobip API.\r\n            URL url = new URL(BASE_URL + &quot;/sms/2/text/advanced&quot;);\r\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n            connection.setRequestMethod(&quot;POST&quot;);\r\n            connection.setRequestProperty(&quot;Authorization&quot;, &quot;App &quot; + API_KEY);\r\n            connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n            connection.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\r\n//            connection.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/4.76&quot;);\r\n            connection.setDoOutput(true);\r\n\r\n            // Create the SMS message JSON payload.\r\n            String payload = String.format(&quot;{\\&quot;messages\\&quot;:[{\\&quot;from\\&quot;:\\&quot;%s\\&quot;,\\&quot;destinations\\&quot;:[{\\&quot;to\\&quot;:\\&quot;%s\\&quot;}],\\&quot;text\\&quot;:\\&quot;%s\\&quot;}]}&quot;,\r\n                    SENDER,\r\n                    RECIPIENT,\r\n                    MESSAGE_TEXT\r\n            );\r\n            // Write the payload to the request.\r\n            try (OutputStream os = connection.getOutputStream()) {\r\n                byte[] input = payload.getBytes(&quot;utf-8&quot;);\r\n                os.write(input, 0, input.length);\r\n            }\r\n\r\n            // Get the response from the API.\r\n            int responseCode = connection.getResponseCode();\r\n            System.out.println(&quot;Response Code: &quot; + responseCode);\r\n\r\n            if (responseCode == HttpURLConnection.HTTP_OK) {\r\n                try (BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()))) {\r\n                    String line;\r\n                    StringBuilder response = new StringBuilder();\r\n                    while ((line = reader.readLine()) != null) {\r\n                        response.append(line);\r\n                    }\r\n                    System.out.println(&quot;Message sent successfully. Response Content: &quot; + response.toString());\r\n                }\r\n            } else {\r\n                // Print the response content for error requests.\r\n                // Similar to the success case, adjust the parsing and print the full response content.\r\n                try (BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getErrorStream()))) {\r\n                    String line;\r\n                    StringBuilder response = new StringBuilder();\r\n                    while ((line = reader.readLine()) != null) {\r\n                        response.append(line);\r\n                    }\r\n                    System.out.println(&quot;Error sending message. Response Content: &quot; + response.toString());\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n```\r\n\r\nResponse Code: 200\r\n\r\nThis is response:\r\n\r\n&gt; Message sent successfully. Response Content: {&quot;messages&quot;:\\[{&quot;messageId&quot;:&quot;3915723960824335774697&quot;,&quot;status&quot;:{&quot;description&quot;:&quot;Message sent to next instance&quot;,&quot;groupId&quot;:1,&quot;groupName&quot;:&quot;PENDING&quot;,&quot;id&quot;:26,&quot;name&quot;:&quot;PENDING_ACCEPTED&quot;},&quot;to&quot;:&quot;970597086266&quot;}\\]}\r\n\r\nThis response should be returned like this:\r\n\r\n```none\r\n groupId: 3\r\n        groupName: DELIVERED\r\n        id: 5\r\n        name: DELIVERED_TO_HANDSET\r\n        description: Message delivered to handset\r\n        action: null\r\n```","link":"https://stackoverflow.com/questions/76866314/i-have-a-problem-when-try-to-send-sms-to-my-mobile-by-infobip","title":"I have a problem when try to send SMS to my mobile by INFOBIP","body":"<p>I have a problem when send SMS I get 200 http status but message is not received to my mobile.</p>\n<p>THIS MY CODE</p>\n<pre><code>        try {\n            // Create the connection to the Infobip API.\n            URL url = new URL(BASE_URL + &quot;/sms/2/text/advanced&quot;);\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n            connection.setRequestMethod(&quot;POST&quot;);\n            connection.setRequestProperty(&quot;Authorization&quot;, &quot;App &quot; + API_KEY);\n            connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n            connection.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\n//            connection.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/4.76&quot;);\n            connection.setDoOutput(true);\n\n            // Create the SMS message JSON payload.\n            String payload = String.format(&quot;{\\&quot;messages\\&quot;:[{\\&quot;from\\&quot;:\\&quot;%s\\&quot;,\\&quot;destinations\\&quot;:[{\\&quot;to\\&quot;:\\&quot;%s\\&quot;}],\\&quot;text\\&quot;:\\&quot;%s\\&quot;}]}&quot;,\n                    SENDER,\n                    RECIPIENT,\n                    MESSAGE_TEXT\n            );\n            // Write the payload to the request.\n            try (OutputStream os = connection.getOutputStream()) {\n                byte[] input = payload.getBytes(&quot;utf-8&quot;);\n                os.write(input, 0, input.length);\n            }\n\n            // Get the response from the API.\n            int responseCode = connection.getResponseCode();\n            System.out.println(&quot;Response Code: &quot; + responseCode);\n\n            if (responseCode == HttpURLConnection.HTTP_OK) {\n                try (BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()))) {\n                    String line;\n                    StringBuilder response = new StringBuilder();\n                    while ((line = reader.readLine()) != null) {\n                        response.append(line);\n                    }\n                    System.out.println(&quot;Message sent successfully. Response Content: &quot; + response.toString());\n                }\n            } else {\n                // Print the response content for error requests.\n                // Similar to the success case, adjust the parsing and print the full response content.\n                try (BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getErrorStream()))) {\n                    String line;\n                    StringBuilder response = new StringBuilder();\n                    while ((line = reader.readLine()) != null) {\n                        response.append(line);\n                    }\n                    System.out.println(&quot;Error sending message. Response Content: &quot; + response.toString());\n                }\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n</code></pre>\n<p>Response Code: 200</p>\n<p>This is response:</p>\n<blockquote>\n<p>Message sent successfully. Response Content: {&quot;messages&quot;:[{&quot;messageId&quot;:&quot;3915723960824335774697&quot;,&quot;status&quot;:{&quot;description&quot;:&quot;Message sent to next instance&quot;,&quot;groupId&quot;:1,&quot;groupName&quot;:&quot;PENDING&quot;,&quot;id&quot;:26,&quot;name&quot;:&quot;PENDING_ACCEPTED&quot;},&quot;to&quot;:&quot;970597086266&quot;}]}</p>\n</blockquote>\n<p>This response should be returned like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code> groupId: 3\n        groupName: DELIVERED\n        id: 5\n        name: DELIVERED_TO_HANDSET\n        description: Message delivered to handset\n        action: null\n</code></pre>\n"},{"tags":["java","spring-boot","bucket4j"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702550422,"creation_date":1702550422,"answer_id":77659520,"question_id":77354043,"body_markdown":"Even though bucket4j is a token-bucket implementation, the default limits (in simple bandwidths) are set as `Greedy`. Greedy means, with an example, that `Refill.greedy(10, Duration.ofSeconds(1));` will create 1 token every 100ms &quot;after it was consumed from a bucket&quot;. So if you work on maximum rate, then you have a leaky bucket in practise.\r\n\r\nNow, there is another config that could help you implement this for every other case. Havent tried that but maybe you could go for it and let us know. If you set `Initial tokens` as 1, maybe this will do the trick.\r\n\r\nLast thought, a brute force way would be possible here. Leaky means that you get a constant rate of, lets say 1 event every 1sec. You can implement that by just setting `Refill.greedy(1, Duration.ofSeconds(1));`. ","link":"https://stackoverflow.com/questions/77354043/implementing-leaky-bucket-using-bucket4j-to-rate-limit-an-api/77659520#77659520","title":"Implementing leaky bucket using bucket4j to rate limit an API","body":"<p>Even though bucket4j is a token-bucket implementation, the default limits (in simple bandwidths) are set as <code>Greedy</code>. Greedy means, with an example, that <code>Refill.greedy(10, Duration.ofSeconds(1));</code> will create 1 token every 100ms &quot;after it was consumed from a bucket&quot;. So if you work on maximum rate, then you have a leaky bucket in practise.</p>\n<p>Now, there is another config that could help you implement this for every other case. Havent tried that but maybe you could go for it and let us know. If you set <code>Initial tokens</code> as 1, maybe this will do the trick.</p>\n<p>Last thought, a brute force way would be possible here. Leaky means that you get a constant rate of, lets say 1 event every 1sec. You can implement that by just setting <code>Refill.greedy(1, Duration.ofSeconds(1));</code>.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":157,"answer_count":1,"score":0,"last_activity_date":1702550422,"creation_date":1698166880,"question_id":77354043,"body_markdown":"We are writing APIs in microservice based architecture. Since one perticular API does lot of computation and consume a lot of resources, we want to rate limit this API. We have used bucket4j to rate limit the API with token bucket algorithm. But we want to implement leaky bucket algorithm. \r\n\r\nDoes bucket4j support leaky bucket algorithm ? If yes can someone please provide me an example showing that. If no then what will be other possible solution? Should I simply try using blocking queue of Java ? Any implementation example will be of great help\r\n","link":"https://stackoverflow.com/questions/77354043/implementing-leaky-bucket-using-bucket4j-to-rate-limit-an-api","title":"Implementing leaky bucket using bucket4j to rate limit an API","body":"<p>We are writing APIs in microservice based architecture. Since one perticular API does lot of computation and consume a lot of resources, we want to rate limit this API. We have used bucket4j to rate limit the API with token bucket algorithm. But we want to implement leaky bucket algorithm.</p>\n<p>Does bucket4j support leaky bucket algorithm ? If yes can someone please provide me an example showing that. If no then what will be other possible solution? Should I simply try using blocking queue of Java ? Any implementation example will be of great help</p>\n"},{"tags":["java","mysql","hibernate","maven","xampp"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702545454,"creation_date":1702545454,"answer_id":77658982,"question_id":76324122,"body_markdown":"The Hibernate.cfg.xml lacked some necessary properties. It&#39;s fixed now.","link":"https://stackoverflow.com/questions/76324122/hibernate-reading-schema-error-error-while-reading-column-meta-data-for-mysql/77658982#77658982","title":"Hibernate: &quot;Reading schema error: Error while reading column meta data for mysql.user","body":"<p>The Hibernate.cfg.xml lacked some necessary properties. It's fixed now.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":69,"answer_count":1,"score":1,"last_activity_date":1702545454,"creation_date":1684935196,"last_edit_date":1684935265,"question_id":76324122,"body_markdown":"# **PROBLEM**\r\n\r\nHello everyone. I&#39;m trying to do reverse engineering on my Maven project using Hibernate. But it keeps giving me this error message:\r\n\r\n&gt; Reading schema error: Error while reading column meta data for mysql.user\r\n\r\n[Error message](https://i.stack.imgur.com/ekoYX.png)\r\n\r\n# **Project Details**\r\n\r\n[Project structure](https://i.stack.imgur.com/kz0G8.png)\r\n\r\nPom:\r\n\r\n``` \r\n  &lt;dependencies&gt;\r\n\t  \r\n\t&lt;!-- https://mvnrepository.com/artifact/com.mysql/mysql-connector-j --&gt;\r\n\t&lt;dependency&gt;\r\n\t    &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t    &lt;version&gt;8.0.33&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t\r\n\t&lt;!-- https://mvnrepository.com/artifact/org.hibernate.orm/hibernate-core --&gt;\r\n\t&lt;dependency&gt;\r\n\t    &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n\t    &lt;version&gt;6.2.3.Final&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nHibernate.cfg.xml:\r\n\r\n```\r\n&lt;hibernate-configuration&gt;\r\n &lt;session-factory name=&quot;Conection&quot;&gt;\r\n  &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\r\n  &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/busstation&lt;/property&gt;\r\n  &lt;property name=&quot;hibernate.connection.username&quot;&gt;root&lt;/property&gt;\r\n  &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\r\n &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n\r\nConsole configuration:\r\n[Bus Station CC](https://i.stack.imgur.com/PiYKU.png)\r\n\r\nMYSQL Database Script:\r\n\r\n```\r\nDROP DATABASE IF EXISTS BusStation;\r\nCREATE DATABASE IF NOT EXISTS BusStation;\r\nUSE BusStation;\r\n\r\nCREATE TABLE IF NOT EXISTS Bus(\r\n\tn INT PRIMARY KEY AUTO_INCREMENT,\r\n    sits INT NOT NULL,\r\n    plate CHAR(5) NULL\r\n);\r\n\r\nINSERT INTO Bus (sits, plate) VALUES(24, &#39;AAAAA&#39;);\r\nINSERT INTO Bus (sits, plate) VALUES(28, &#39;AAAAB&#39;);\r\nINSERT INTO Bus (sits, plate) VALUES(12, &#39;AAAAC&#39;);\r\nINSERT INTO Bus (sits, plate) VALUES(48, &#39;AAAAD&#39;);\r\n```\r\n\r\nThank you for your time.\r\n\r\n# **I tried**\r\n\r\n1. Changing the username or adding an incorrect password to see if it&#39;s just not letting it in. But it says [Different Error](https://i.stack.imgur.com/iccGz.png), so I discarded it.\r\n2. Switching versions of the JDK from 17 to 1.4(jdk17) and such, same error.\r\n3. Switching the database to the default &quot;test&quot;, same error.\r\n4. Switching versions of the &quot;com.mysql&quot; dependency, same error.","link":"https://stackoverflow.com/questions/76324122/hibernate-reading-schema-error-error-while-reading-column-meta-data-for-mysql","title":"Hibernate: &quot;Reading schema error: Error while reading column meta data for mysql.user","body":"<h1><strong>PROBLEM</strong></h1>\n<p>Hello everyone. I'm trying to do reverse engineering on my Maven project using Hibernate. But it keeps giving me this error message:</p>\n<blockquote>\n<p>Reading schema error: Error while reading column meta data for mysql.user</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/ekoYX.png\" rel=\"nofollow noreferrer\">Error message</a></p>\n<h1><strong>Project Details</strong></h1>\n<p><a href=\"https://i.stack.imgur.com/kz0G8.png\" rel=\"nofollow noreferrer\">Project structure</a></p>\n<p>Pom:</p>\n<pre><code>  &lt;dependencies&gt;\n      \n    &lt;!-- https://mvnrepository.com/artifact/com.mysql/mysql-connector-j --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n        &lt;version&gt;8.0.33&lt;/version&gt;\n    &lt;/dependency&gt;\n    \n    &lt;!-- https://mvnrepository.com/artifact/org.hibernate.orm/hibernate-core --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;6.2.3.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Hibernate.cfg.xml:</p>\n<pre><code>&lt;hibernate-configuration&gt;\n &lt;session-factory name=&quot;Conection&quot;&gt;\n  &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n  &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/busstation&lt;/property&gt;\n  &lt;property name=&quot;hibernate.connection.username&quot;&gt;root&lt;/property&gt;\n  &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\n &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>Console configuration:\n<a href=\"https://i.stack.imgur.com/PiYKU.png\" rel=\"nofollow noreferrer\">Bus Station CC</a></p>\n<p>MYSQL Database Script:</p>\n<pre><code>DROP DATABASE IF EXISTS BusStation;\nCREATE DATABASE IF NOT EXISTS BusStation;\nUSE BusStation;\n\nCREATE TABLE IF NOT EXISTS Bus(\n    n INT PRIMARY KEY AUTO_INCREMENT,\n    sits INT NOT NULL,\n    plate CHAR(5) NULL\n);\n\nINSERT INTO Bus (sits, plate) VALUES(24, 'AAAAA');\nINSERT INTO Bus (sits, plate) VALUES(28, 'AAAAB');\nINSERT INTO Bus (sits, plate) VALUES(12, 'AAAAC');\nINSERT INTO Bus (sits, plate) VALUES(48, 'AAAAD');\n</code></pre>\n<p>Thank you for your time.</p>\n<h1><strong>I tried</strong></h1>\n<ol>\n<li>Changing the username or adding an incorrect password to see if it's just not letting it in. But it says <a href=\"https://i.stack.imgur.com/iccGz.png\" rel=\"nofollow noreferrer\">Different Error</a>, so I discarded it.</li>\n<li>Switching versions of the JDK from 17 to 1.4(jdk17) and such, same error.</li>\n<li>Switching the database to the default &quot;test&quot;, same error.</li>\n<li>Switching versions of the &quot;com.mysql&quot; dependency, same error.</li>\n</ol>\n"},{"tags":["java","google-kubernetes-engine","remote-debugging","jkube"],"comments":[{"score":0,"post_type":"question","creation_date":1678624765,"post_id":75705442,"comment_id":133566006,"body_markdown":"Refer this [blog](https://www.eclipse.org/jkube/docs/kubernetes-maven-plugin/) helpful to you","link":"https://stackoverflow.com/questions/75705442/is-it-possible-to-deploy-and-debug-java-application-in-gke-cluster-from-eclipse#comment133566006_75705442","body":"Refer this <a href=\"https://www.eclipse.org/jkube/docs/kubernetes-maven-plugin/\" rel=\"nofollow noreferrer\">blog</a> helpful to you"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702544611,"creation_date":1702544611,"answer_id":77658897,"question_id":75705442,"body_markdown":"You can try the following:\r\n\r\n1. adding the debug port as a port you want to expose in jkube\r\n2. make sure the entrypoint contains the java command with your debug config\r\n\r\nApplying this should create a container which has an additional port for your debugger to connect to and a command that starts the app in debug\r\n\r\n3. connect to your kubernetes cluster with e.g. k9s and forward the remote debug port\r\n4. configure your debugger \r\n5. run the app in debug","link":"https://stackoverflow.com/questions/75705442/is-it-possible-to-deploy-and-debug-java-application-in-gke-cluster-from-eclipse/77658897#77658897","title":"Is it possible to deploy and debug Java application in GKE cluster from Eclipse using JKube?","body":"<p>You can try the following:</p>\n<ol>\n<li>adding the debug port as a port you want to expose in jkube</li>\n<li>make sure the entrypoint contains the java command with your debug config</li>\n</ol>\n<p>Applying this should create a container which has an additional port for your debugger to connect to and a command that starts the app in debug</p>\n<ol start=\"3\">\n<li>connect to your kubernetes cluster with e.g. k9s and forward the remote debug port</li>\n<li>configure your debugger</li>\n<li>run the app in debug</li>\n</ol>\n"}],"comment_count":1,"is_answered":false,"view_count":87,"answer_count":1,"score":0,"last_activity_date":1702544611,"creation_date":1678543086,"question_id":75705442,"body_markdown":"Using Eclipse JKube (https://www.eclipse.org/jkube/) ,is it possible to deploy Java application to GKE cluster from the Eclipse IDE itself and perform remote debug ?\r\nI can see some post on Openshift deployment (https://developers.redhat.com/articles/2022/04/13/deploy-java-application-red-hat-openshift-using-jkube#how_jkube_helps_build_and_deploy_java_applications ) but not for Azure,AWS or GCP. .\r\n","link":"https://stackoverflow.com/questions/75705442/is-it-possible-to-deploy-and-debug-java-application-in-gke-cluster-from-eclipse","title":"Is it possible to deploy and debug Java application in GKE cluster from Eclipse using JKube?","body":"<p>Using Eclipse JKube (<a href=\"https://www.eclipse.org/jkube/\" rel=\"nofollow noreferrer\">https://www.eclipse.org/jkube/</a>) ,is it possible to deploy Java application to GKE cluster from the Eclipse IDE itself and perform remote debug ?\nI can see some post on Openshift deployment (<a href=\"https://developers.redhat.com/articles/2022/04/13/deploy-java-application-red-hat-openshift-using-jkube#how_jkube_helps_build_and_deploy_java_applications\" rel=\"nofollow noreferrer\">https://developers.redhat.com/articles/2022/04/13/deploy-java-application-red-hat-openshift-using-jkube#how_jkube_helps_build_and_deploy_java_applications</a> ) but not for Azure,AWS or GCP. .</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701719573,"post_id":76085090,"comment_id":136808435,"body_markdown":"How to tell permitAll to short-circuit? Why would you permit all without short-circuiting? That doesn&#39;t really make sense from an API design point of view?","link":"https://stackoverflow.com/questions/76084548/spring-boot-permitall-not-working-using-securityfilterchain/76085090#comment136808435_76085090","body":"How to tell permitAll to short-circuit? Why would you permit all without short-circuiting? That doesn&#39;t really make sense from an API design point of view?"},{"score":0,"post_type":"answer","creation_date":1701722529,"post_id":76085090,"comment_id":136808854,"body_markdown":"@knittl The design is that each filter should have a precise role, so if you create an **authentication** filter, and during execution you can’t authenticate the user, you just pass the request to other filters to do their job. `permitAll()` works as expected and will authorize access to anonymous clients for matching requests. The rules you specify after `authorizeHttpRequests()` are about **authorization** and are implemented by a single filter (`AuthorizationFilter`), which can make a decision after all the auth filters have passed ; these rules do not change the behaviour of other filters.","link":"https://stackoverflow.com/questions/76084548/spring-boot-permitall-not-working-using-securityfilterchain/76085090#comment136808854_76085090","body":"@knittl The design is that each filter should have a precise role, so if you create an <b>authentication</b> filter, and during execution you can’t authenticate the user, you just pass the request to other filters to do their job. <code>permitAll()</code> works as expected and will authorize access to anonymous clients for matching requests. The rules you specify after <code>authorizeHttpRequests()</code> are about <b>authorization</b> and are implemented by a single filter (<code>AuthorizationFilter</code>), which can make a decision after all the auth filters have passed ; these rules do not change the behaviour of other filters."}],"comment_count":2,"score":0,"last_activity_date":1682256464,"last_edit_date":1682256464,"creation_date":1682256077,"answer_id":76085090,"question_id":76084548,"body_markdown":"In fact, it is working as intended. When you add a filter to the filter chain, and if a previous filter doesn’t short-circuit the chain, then your filter will be called for every single request.  \r\n`permitAll()` doesn’t short-circuit the filter chain, it just adds another entry to the authorization manager. The `AuthorizationFilter` (replacing a deprecated `FilterSecurityInterceptor`), which is one of the last filters called, will use the manager to decide if the request should be rejected or not.\r\n\r\nSo in your `CustomOncePerRequestFilter`, if you can’t authenticate the user, you just pass the request down the filter chain.","link":"https://stackoverflow.com/questions/76084548/spring-boot-permitall-not-working-using-securityfilterchain/76085090#76085090","title":"Spring Boot - permitAll not working using SecurityFilterChain","body":"<p>In fact, it is working as intended. When you add a filter to the filter chain, and if a previous filter doesn’t short-circuit the chain, then your filter will be called for every single request.<br />\n<code>permitAll()</code> doesn’t short-circuit the filter chain, it just adds another entry to the authorization manager. The <code>AuthorizationFilter</code> (replacing a deprecated <code>FilterSecurityInterceptor</code>), which is one of the last filters called, will use the manager to decide if the request should be rejected or not.</p>\n<p>So in your <code>CustomOncePerRequestFilter</code>, if you can’t authenticate the user, you just pass the request down the filter chain.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1682312810,"post_id":76085130,"comment_id":134189512,"body_markdown":"I tried your code snippet. It didn&#39;t work. Is there official documentation supporting your statement?","link":"https://stackoverflow.com/questions/76084548/spring-boot-permitall-not-working-using-securityfilterchain/76085130#comment134189512_76085130","body":"I tried your code snippet. It didn&#39;t work. Is there official documentation supporting your statement?"},{"score":0,"post_type":"answer","creation_date":1682317062,"post_id":76085130,"comment_id":134189991,"body_markdown":"yeah of course https://docs.spring.io/spring-security/reference/servlet/architecture.html. Are you keeping the component annotation in the filters? Because then you are not registering the filters in the security chain but in the regular chain. Keep me updated and I will edit the original response with a more detailed answer if this works in your case.","link":"https://stackoverflow.com/questions/76084548/spring-boot-permitall-not-working-using-securityfilterchain/76085130#comment134189991_76085130","body":"yeah of course <a href=\"https://docs.spring.io/spring-security/reference/servlet/architecture.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/servlet/&hellip;</a>. Are you keeping the component annotation in the filters? Because then you are not registering the filters in the security chain but in the regular chain. Keep me updated and I will edit the original response with a more detailed answer if this works in your case."},{"score":0,"post_type":"answer","creation_date":1682325014,"post_id":76085130,"comment_id":134191385,"body_markdown":"I removed Component annotation from my filter class. Yes please elaborate your answer. My requirement is that &quot;/art/**&quot; should be open for all. &quot;/api/**&quot; should be access by user having role &quot;ADMIN&quot; and rest should be access by an authenticated user.","link":"https://stackoverflow.com/questions/76084548/spring-boot-permitall-not-working-using-securityfilterchain/76085130#comment134191385_76085130","body":"I removed Component annotation from my filter class. Yes please elaborate your answer. My requirement is that &quot;/art/**&quot; should be open for all. &quot;/api/**&quot; should be access by user having role &quot;ADMIN&quot; and rest should be access by an authenticated user."},{"score":0,"post_type":"answer","creation_date":1682333759,"post_id":76085130,"comment_id":134193246,"body_markdown":"Hi Harsh, I wanted to let you know that I have made some updates to the comment. Please keep in mind that maybe we are using different versions, and I have also included some minor considerations that I think may be helpful. I have tested this on my local machine and it seems to be running properly based on your requirements. Let me know if you have any questions or concerns.","link":"https://stackoverflow.com/questions/76084548/spring-boot-permitall-not-working-using-securityfilterchain/76085130#comment134193246_76085130","body":"Hi Harsh, I wanted to let you know that I have made some updates to the comment. Please keep in mind that maybe we are using different versions, and I have also included some minor considerations that I think may be helpful. I have tested this on my local machine and it seems to be running properly based on your requirements. Let me know if you have any questions or concerns."}],"comment_count":4,"score":0,"last_activity_date":1682338577,"last_edit_date":1682338577,"creation_date":1682256553,"answer_id":76085130,"question_id":76084548,"body_markdown":"Looks like what you want it&#39;s something like this.\r\n\r\n\r\n\r\n    @Bean\r\n      @Order(2)\r\n      protected SecurityFilterChain filterChainPublic(HttpSecurity http) throws Exception {\r\n        return http.csrf().disable()\r\n            .authorizeHttpRequests()\r\n            .antMatchers(&quot;/art/**&quot;)\r\n            .permitAll()\r\n            .and()\r\n            .authorizeHttpRequests()\r\n            .antMatchers(&quot;/**&quot;)\r\n            .authenticated()\r\n            .and()\r\n            .cors()\r\n            .disable()\r\n            .build();\r\n      }\r\n    \r\n      @Bean\r\n      @Order(1)\r\n      protected SecurityFilterChain filterChainPrivate(HttpSecurity http) throws Exception {\r\n        return http.csrf().disable()\r\n            .requestMatchers()\r\n              .antMatchers(&quot;/api/**&quot;) // only apply the security configuration to requests that start with /api\r\n              .and()\r\n            .authorizeHttpRequests()\r\n            .antMatchers(&quot;/api/contenteditor/feed/**&quot;).hasAnyRole(&quot;SITE_ADMIN&quot;, &quot;STANDARD_ADMIN&quot;, &quot;DOMAIN_MEMBER&quot;)\r\n            .and()\r\n            .addFilterBefore(new CustomOncePerRequestFilter(), UsernamePasswordAuthenticationFilter.class)\r\n            .cors()\r\n            .disable()\r\n            .build();\r\n      }\r\n\t  \r\n\t  \r\n\t  \r\n\r\nThe provided code creates two security filter chains to filter elements based on their security level. The second bean applies to secured URLs, while the first bean is more open and does not require any special security configurations.\r\nAnother option it&#39;s you just filtering it out the paths you don&#39;t want in your filter object.\r\n\r\n**How this code works**\r\n\r\nThe filter chains allow you to have multiple chains for different base paths. The requestMatchers define the base paths that the SecurityFilterChain will work with. The antMatchers define pipeline elements conforming to patterns, and can be used with requestMatchers and authorizeHttpRequests().\r\n\r\nLet&#39;s take as an example, the code I proposed the first time. What we are doing here it&#39;s define a more restrictive element and a open one for general security configurations.\r\n\r\nLet&#39;s see this on code:\r\n\r\n     http.csrf().disable()\r\n        .requestMatchers()\r\n        .antMatchers(&quot;/api/**&quot;) // only apply the security configuration to requests that start with /api\r\n        .and()\r\n        .authorizeHttpRequests()\r\n        .antMatchers(&quot;/api/contenteditor/**&quot;)\r\n        .hasAnyRole(&quot;SITE_ADMIN&quot;, &quot;STANDARD_ADMIN&quot;, &quot;DOMAIN_MEMBER&quot;)\r\n        .and()\r\n        .addFilterBefore(new CustomOnPerRequestFilter(), UsernamePasswordAuthenticationFilter.class)\r\n\r\nThis code specifies that the filter chain should only work with requests that start with /api/** and use the filter only in these base paths. It also specifies that requests conforming to /api/contenteditor/** require the SITE_ADMIN, STANDARD_ADMIN, or DOMAIN_MEMBER roles. The addFilterBefore method specifies that a custom CustomOnPerRequestFilter filter should be added before the UsernamePasswordAuthenticationFilter. Notice that your custom filter would be executed in any /api/** path not only in/api/contenteditor/**.\r\n\r\nIf we instead do like the first bean\r\n\r\n    http.csrf().disable()\r\n        .authorizeHttpRequests()\r\n        .antMatchers(&quot;/art/**&quot;)\r\n        .permitAll()\r\n        .and()\r\n        .authorizeHttpRequests()\r\n        .antMatchers(&quot;/**&quot;)\r\n        .authenticated()\r\n\r\nThe requestMatcher by default is any path, so here we are operating over all the urls if we incluide a filter in here would be executed in any path that doesn&#39;t match the previous filter. The art endpoint is public but the rest are under authentication.\r\n\r\nIt&#39;s important to note that the order of the beans is essential, as Spring will use the first bean that conforms to the URL. Therefore, the most specific should be the first in order, and the most general should be the last.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nLastly, it&#39;s important not to annotate custom security filters as @Component or any other IOD annotation in this approach because Spring scans every bean that implements the filter and adds it to the regular filter chain.\r\n\r\nNote that the provided code works with Spring Security 5, but in Spring Security 6, things will change. In Spring Security 6, you can use the following code:\r\n\r\n\r\n        @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        return http\r\n            .authorizeHttpRequests(authorize -&gt; {\r\n                authorize.requestMatchers(&quot;/art/**&quot;)\r\n                    .permitAll();\r\n    \r\n                authorize.requestMatchers(&quot;/api/**&quot;)\r\n                    .hasAnyRole(&quot;SITE_ADMIN&quot;, &quot;STANDARD_ADMIN&quot;, &quot;DOMAIN_MEMBER&quot;)\r\n                    .anyRequest()\r\n                    .authenticated().and()\r\n                    .addFilterBefore(new CustomOnPerRequestFilter(), UsernamePasswordAuthenticationFilter.class);\r\n            })\r\n            .cors()\r\n            .disable()\r\n            .build(\r\n\r\n);\r\n}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/o7Fz3.png","link":"https://stackoverflow.com/questions/76084548/spring-boot-permitall-not-working-using-securityfilterchain/76085130#76085130","title":"Spring Boot - permitAll not working using SecurityFilterChain","body":"<p>Looks like what you want it's something like this.</p>\n<pre><code>@Bean\n  @Order(2)\n  protected SecurityFilterChain filterChainPublic(HttpSecurity http) throws Exception {\n    return http.csrf().disable()\n        .authorizeHttpRequests()\n        .antMatchers(&quot;/art/**&quot;)\n        .permitAll()\n        .and()\n        .authorizeHttpRequests()\n        .antMatchers(&quot;/**&quot;)\n        .authenticated()\n        .and()\n        .cors()\n        .disable()\n        .build();\n  }\n\n  @Bean\n  @Order(1)\n  protected SecurityFilterChain filterChainPrivate(HttpSecurity http) throws Exception {\n    return http.csrf().disable()\n        .requestMatchers()\n          .antMatchers(&quot;/api/**&quot;) // only apply the security configuration to requests that start with /api\n          .and()\n        .authorizeHttpRequests()\n        .antMatchers(&quot;/api/contenteditor/feed/**&quot;).hasAnyRole(&quot;SITE_ADMIN&quot;, &quot;STANDARD_ADMIN&quot;, &quot;DOMAIN_MEMBER&quot;)\n        .and()\n        .addFilterBefore(new CustomOncePerRequestFilter(), UsernamePasswordAuthenticationFilter.class)\n        .cors()\n        .disable()\n        .build();\n  }\n  \n  \n  \n</code></pre>\n<p>The provided code creates two security filter chains to filter elements based on their security level. The second bean applies to secured URLs, while the first bean is more open and does not require any special security configurations.\nAnother option it's you just filtering it out the paths you don't want in your filter object.</p>\n<p><strong>How this code works</strong></p>\n<p>The filter chains allow you to have multiple chains for different base paths. The requestMatchers define the base paths that the SecurityFilterChain will work with. The antMatchers define pipeline elements conforming to patterns, and can be used with requestMatchers and authorizeHttpRequests().</p>\n<p>Let's take as an example, the code I proposed the first time. What we are doing here it's define a more restrictive element and a open one for general security configurations.</p>\n<p>Let's see this on code:</p>\n<pre><code> http.csrf().disable()\n    .requestMatchers()\n    .antMatchers(&quot;/api/**&quot;) // only apply the security configuration to requests that start with /api\n    .and()\n    .authorizeHttpRequests()\n    .antMatchers(&quot;/api/contenteditor/**&quot;)\n    .hasAnyRole(&quot;SITE_ADMIN&quot;, &quot;STANDARD_ADMIN&quot;, &quot;DOMAIN_MEMBER&quot;)\n    .and()\n    .addFilterBefore(new CustomOnPerRequestFilter(), UsernamePasswordAuthenticationFilter.class)\n</code></pre>\n<p>This code specifies that the filter chain should only work with requests that start with /api/** and use the filter only in these base paths. It also specifies that requests conforming to /api/contenteditor/** require the SITE_ADMIN, STANDARD_ADMIN, or DOMAIN_MEMBER roles. The addFilterBefore method specifies that a custom CustomOnPerRequestFilter filter should be added before the UsernamePasswordAuthenticationFilter. Notice that your custom filter would be executed in any /api/** path not only in/api/contenteditor/**.</p>\n<p>If we instead do like the first bean</p>\n<pre><code>http.csrf().disable()\n    .authorizeHttpRequests()\n    .antMatchers(&quot;/art/**&quot;)\n    .permitAll()\n    .and()\n    .authorizeHttpRequests()\n    .antMatchers(&quot;/**&quot;)\n    .authenticated()\n</code></pre>\n<p>The requestMatcher by default is any path, so here we are operating over all the urls if we incluide a filter in here would be executed in any path that doesn't match the previous filter. The art endpoint is public but the rest are under authentication.</p>\n<p>It's important to note that the order of the beans is essential, as Spring will use the first bean that conforms to the URL. Therefore, the most specific should be the first in order, and the most general should be the last.</p>\n<p><a href=\"https://i.stack.imgur.com/o7Fz3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o7Fz3.png\" alt=\"enter image description here\" /></a></p>\n<p>Lastly, it's important not to annotate custom security filters as @Component or any other IOD annotation in this approach because Spring scans every bean that implements the filter and adds it to the regular filter chain.</p>\n<p>Note that the provided code works with Spring Security 5, but in Spring Security 6, things will change. In Spring Security 6, you can use the following code:</p>\n<pre><code>    @Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    return http\n        .authorizeHttpRequests(authorize -&gt; {\n            authorize.requestMatchers(&quot;/art/**&quot;)\n                .permitAll();\n\n            authorize.requestMatchers(&quot;/api/**&quot;)\n                .hasAnyRole(&quot;SITE_ADMIN&quot;, &quot;STANDARD_ADMIN&quot;, &quot;DOMAIN_MEMBER&quot;)\n                .anyRequest()\n                .authenticated().and()\n                .addFilterBefore(new CustomOnPerRequestFilter(), UsernamePasswordAuthenticationFilter.class);\n        })\n        .cors()\n        .disable()\n        .build(\n</code></pre>\n<p>);\n}</p>\n"},{"comment_count":0,"score":1,"last_activity_date":1682313074,"creation_date":1682313074,"answer_id":76088731,"question_id":76084548,"body_markdown":"Although it may seem strange, the only effective resolution I have found is to override the shouldNotFilter() method within my custom OncePerRequestFilter implementation and include all the paths that require exemption from authentication.\r\n\r\n    @Override\r\n    protected boolean shouldNotFilter(HttpServletRequest request) throws ServletException {\r\n        return request.getServletPath().startsWith(&quot;/art&quot;);\r\n    }","link":"https://stackoverflow.com/questions/76084548/spring-boot-permitall-not-working-using-securityfilterchain/76088731#76088731","title":"Spring Boot - permitAll not working using SecurityFilterChain","body":"<p>Although it may seem strange, the only effective resolution I have found is to override the shouldNotFilter() method within my custom OncePerRequestFilter implementation and include all the paths that require exemption from authentication.</p>\n<pre><code>@Override\nprotected boolean shouldNotFilter(HttpServletRequest request) throws ServletException {\n    return request.getServletPath().startsWith(&quot;/art&quot;);\n}\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1702536363,"last_edit_date":1702536363,"creation_date":1702535851,"answer_id":77658192,"question_id":76084548,"body_markdown":"The issue you are facing with your Custom OncePerRequestFilter is that if it is intended for user authentication it will be called before the Internal Spring Security Filter intended for deciding if the URI will be validated ```http.addFilterBefore(new CustomFilter(), UsernamePasswordAuthenticationFilter.class)```. What you need to do is just invoke filterChain.doFilter(request, response) ignoring, for example, an empty Authorization header. Don&#39;t worry, the SecurityFilterChain will correctly consider your requestMatchings down the road and your requests will be validated as expected. Ex:\r\n```java\r\n@Override\r\n    protected void doFilterInternal(HttpServletRequest request,\r\n                                    HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        Optional&lt;String&gt; token = Optional.ofNullable(request.getHeader(HttpHeaders.AUTHORIZATION))\r\n                .map(authHeader -&gt; authHeader.substring(Constants.BEARER_HEADER.length()));\r\n\r\n        if (token.isEmpty()) {\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n\r\n        BasicJwtAuthenticationToken auth = token\r\n                .map(this::createAuthenticationObject)\r\n                .orElseThrow(UnauthorizedTokenException::new);\r\n        ...\r\n        filterChain.doFilter(request, response);\r\n\r\n}\r\n```","link":"https://stackoverflow.com/questions/76084548/spring-boot-permitall-not-working-using-securityfilterchain/77658192#77658192","title":"Spring Boot - permitAll not working using SecurityFilterChain","body":"<p>The issue you are facing with your Custom OncePerRequestFilter is that if it is intended for user authentication it will be called before the Internal Spring Security Filter intended for deciding if the URI will be validated <code>http.addFilterBefore(new CustomFilter(), UsernamePasswordAuthenticationFilter.class)</code>. What you need to do is just invoke filterChain.doFilter(request, response) ignoring, for example, an empty Authorization header. Don't worry, the SecurityFilterChain will correctly consider your requestMatchings down the road and your requests will be validated as expected. Ex:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    protected void doFilterInternal(HttpServletRequest request,\n                                    HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        Optional&lt;String&gt; token = Optional.ofNullable(request.getHeader(HttpHeaders.AUTHORIZATION))\n                .map(authHeader -&gt; authHeader.substring(Constants.BEARER_HEADER.length()));\n\n        if (token.isEmpty()) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n\n        BasicJwtAuthenticationToken auth = token\n                .map(this::createAuthenticationObject)\n                .orElseThrow(UnauthorizedTokenException::new);\n        ...\n        filterChain.doFilter(request, response);\n\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":3601,"answer_count":4,"score":3,"last_activity_date":1702536363,"creation_date":1682249075,"last_edit_date":1682251632,"question_id":76084548,"body_markdown":"I have a Spring Boot application where I need to make certain endpoints accessible to all users without requiring authentication. To achieve this, I am using `permitAll()`. \r\n\r\nHowever, when I try to access one of these endpoints, `http://localhost:8080/content/123`, a `CustomOncePerRequestFilter` is being called, which shouldn&#39;t happen as it is supposed to be accessible to all users. \r\n\r\nThe rest of the endpoints are secured and working as expected. \r\n\r\nI am seeking guidance on why this is happening and how to fix it. My `SecurityConfiguration` code is as follows.\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration {\r\n    \r\n    \t@Autowired\r\n    \tprivate CustomOncePerRequestFilter tokenFilter;\r\n    \r\n    \t@Bean\r\n    \tprotected SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    \t\thttp.csrf().disable()\r\n    \t\t\t\t.authorizeHttpRequests()\r\n    \t\t\t\t.antMatchers(&quot;/art/**&quot;,&quot;/content/**&quot;).permitAll()\r\n    \t\t\t\t.and().authorizeHttpRequests()\r\n    \t\t\t\t.antMatchers(&quot;/api/contenteditor/feed/**&quot;).hasAnyRole(&quot;SITE_ADMIN&quot;, &quot;STANDARD_ADMIN&quot;, &quot;DOMAIN_MEMBER&quot;)\r\n    \t\t\t\t.anyRequest().authenticated().and()\r\n    \t\t\t\t.addFilterBefore(tokenFilter, UsernamePasswordAuthenticationFilter.class)\r\n    \t\t\t\t.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n    \t\tCorsConfiguration configuration = new CorsConfiguration();\r\n    \t\tconfiguration.setAllowedOrigins(Arrays.asList(&quot;*&quot;));\r\n    \t\tconfiguration.setAllowedMethods(Arrays.asList(&quot;*&quot;));\r\n    \t\tconfiguration.setAllowedHeaders(Arrays.asList(&quot;*&quot;));\r\n    \t\tUrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n    \t\tsource.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n    \t\thttp.cors().configurationSource(source);\r\n    \t\treturn http.build();\r\n    \t}\r\n    \r\n    }","link":"https://stackoverflow.com/questions/76084548/spring-boot-permitall-not-working-using-securityfilterchain","title":"Spring Boot - permitAll not working using SecurityFilterChain","body":"<p>I have a Spring Boot application where I need to make certain endpoints accessible to all users without requiring authentication. To achieve this, I am using <code>permitAll()</code>.</p>\n<p>However, when I try to access one of these endpoints, <code>http://localhost:8080/content/123</code>, a <code>CustomOncePerRequestFilter</code> is being called, which shouldn't happen as it is supposed to be accessible to all users.</p>\n<p>The rest of the endpoints are secured and working as expected.</p>\n<p>I am seeking guidance on why this is happening and how to fix it. My <code>SecurityConfiguration</code> code is as follows.</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration {\n\n    @Autowired\n    private CustomOncePerRequestFilter tokenFilter;\n\n    @Bean\n    protected SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n                .authorizeHttpRequests()\n                .antMatchers(&quot;/art/**&quot;,&quot;/content/**&quot;).permitAll()\n                .and().authorizeHttpRequests()\n                .antMatchers(&quot;/api/contenteditor/feed/**&quot;).hasAnyRole(&quot;SITE_ADMIN&quot;, &quot;STANDARD_ADMIN&quot;, &quot;DOMAIN_MEMBER&quot;)\n                .anyRequest().authenticated().and()\n                .addFilterBefore(tokenFilter, UsernamePasswordAuthenticationFilter.class)\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(Arrays.asList(&quot;*&quot;));\n        configuration.setAllowedMethods(Arrays.asList(&quot;*&quot;));\n        configuration.setAllowedHeaders(Arrays.asList(&quot;*&quot;));\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        http.cors().configurationSource(source);\n        return http.build();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-kafka","spring-cloud-stream","spring-cloud-stream-binder-kafka"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1677512926,"post_id":75582519,"comment_id":133347700,"body_markdown":"Thank you! Is it possible to provide destination in java code, not yaml/application.properties? I work with 17 kafka topics in the project","link":"https://stackoverflow.com/questions/75580132/how-to-replace-deprecated-streamlistener/75582519#comment133347700_75582519","body":"Thank you! Is it possible to provide destination in java code, not yaml/application.properties? I work with 17 kafka topics in the project"},{"score":0,"post_type":"answer","creation_date":1677515944,"post_id":75582519,"comment_id":133348770,"body_markdown":"Can you elaborate on your use case? Maybe creating a new SO thread or filing an issue in the Spring Cloud Stream repository is better.","link":"https://stackoverflow.com/questions/75580132/how-to-replace-deprecated-streamlistener/75582519#comment133348770_75582519","body":"Can you elaborate on your use case? Maybe creating a new SO thread or filing an issue in the Spring Cloud Stream repository is better."},{"score":0,"post_type":"answer","creation_date":1677517446,"post_id":75582519,"comment_id":133349278,"body_markdown":"Why would you want to couple your application so tightly to the infrastructure? The annotation-based programming modes was removed for exactly that reason?","link":"https://stackoverflow.com/questions/75580132/how-to-replace-deprecated-streamlistener/75582519#comment133349278_75582519","body":"Why would you want to couple your application so tightly to the infrastructure? The annotation-based programming modes was removed for exactly that reason?"},{"score":0,"post_type":"answer","creation_date":1677519132,"post_id":75582519,"comment_id":133349778,"body_markdown":"@OlegZhurakousky That&#39;s how it&#39;s done in my team so far. Tight coupling to infrastructure is ok in my case. Topic names don&#39;t change","link":"https://stackoverflow.com/questions/75580132/how-to-replace-deprecated-streamlistener/75582519#comment133349778_75582519","body":"@OlegZhurakousky That&#39;s how it&#39;s done in my team so far. Tight coupling to infrastructure is ok in my case. Topic names don&#39;t change"},{"score":0,"post_type":"answer","creation_date":1677519571,"post_id":75582519,"comment_id":133349905,"body_markdown":"We need to understand better how you are using 17 topics in the application. If they are dynamic destinations, Spring Cloud Stream already has a solution. Please create a GH issue in the Spring Cloud Stream repo with more details and context around your use case, and we could triage and take it from there.","link":"https://stackoverflow.com/questions/75580132/how-to-replace-deprecated-streamlistener/75582519#comment133349905_75582519","body":"We need to understand better how you are using 17 topics in the application. If they are dynamic destinations, Spring Cloud Stream already has a solution. Please create a GH issue in the Spring Cloud Stream repo with more details and context around your use case, and we could triage and take it from there."}],"comment_count":5,"score":0,"last_activity_date":1677512360,"creation_date":1677512360,"answer_id":75582519,"question_id":75580132,"body_markdown":"`StreamListener` is removed from the framework in preference to using `java.util.function` based programming model. If you have both input and output, that can use a `Function`; if you only have input, then use `Consumer.` Your `StreamListener` above can be re-rewritten as you did above, but if you don&#39;t want to access the headers, you do not need to wrap your payload in a `Message.` For example,\r\n\r\n```\r\n@Bean\r\npublic Consumer&lt;Order&gt; consumeOrder() {\r\n    return order -&gt; {\r\n        // business logic\r\n    }\r\n}\r\n```\r\n\r\nYou can provide a destination using the pattern - `spring.cloud.stream.bindings.consumeOrder-in-0.destination`. ","link":"https://stackoverflow.com/questions/75580132/how-to-replace-deprecated-streamlistener/75582519#75582519","title":"How to replace deprecated @StreamListener?","body":"<p><code>StreamListener</code> is removed from the framework in preference to using <code>java.util.function</code> based programming model. If you have both input and output, that can use a <code>Function</code>; if you only have input, then use <code>Consumer.</code> Your <code>StreamListener</code> above can be re-rewritten as you did above, but if you don't want to access the headers, you do not need to wrap your payload in a <code>Message.</code> For example,</p>\n<pre><code>@Bean\npublic Consumer&lt;Order&gt; consumeOrder() {\n    return order -&gt; {\n        // business logic\n    }\n}\n</code></pre>\n<p>You can provide a destination using the pattern - <code>spring.cloud.stream.bindings.consumeOrder-in-0.destination</code>.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":914,"answer_count":1,"score":0,"last_activity_date":1702534388,"creation_date":1677498764,"question_id":75580132,"body_markdown":"I&#39;m using Spring Boot and Kafka. Migrating to latest versions of Spring Boot and others, I encountered following issue: `@StreamListener` is deprecated and removed from the library. I have a topic `my_topic` and read from it as in example below:\r\n\r\n    public class OrderListener {\r\n        @StreamListener(&quot;my_topic&quot;)\r\n        public void consumeOrder(Order order) {\r\n            // business logic\r\n        }\r\n    }\r\n\r\nIn documentation it is advised to use functional programming model. How does it look like? I found this code sample:\r\n\r\n    @Bean\r\n    public Consumer&lt;Message&lt;Order&gt;&gt; consumeOrder() {\r\n        return msg -&gt; {\r\n            // to get header - msg.getHeaders().get(key, valueType);\r\n        }\r\n    }\r\n\r\nStill, it&#39;s quite verbose, I like previous approach (`@StreamListener`). Is there any short modern way to write it?","link":"https://stackoverflow.com/questions/75580132/how-to-replace-deprecated-streamlistener","title":"How to replace deprecated @StreamListener?","body":"<p>I'm using Spring Boot and Kafka. Migrating to latest versions of Spring Boot and others, I encountered following issue: <code>@StreamListener</code> is deprecated and removed from the library. I have a topic <code>my_topic</code> and read from it as in example below:</p>\n<pre><code>public class OrderListener {\n    @StreamListener(&quot;my_topic&quot;)\n    public void consumeOrder(Order order) {\n        // business logic\n    }\n}\n</code></pre>\n<p>In documentation it is advised to use functional programming model. How does it look like? I found this code sample:</p>\n<pre><code>@Bean\npublic Consumer&lt;Message&lt;Order&gt;&gt; consumeOrder() {\n    return msg -&gt; {\n        // to get header - msg.getHeaders().get(key, valueType);\n    }\n}\n</code></pre>\n<p>Still, it's quite verbose, I like previous approach (<code>@StreamListener</code>). Is there any short modern way to write it?</p>\n"},{"tags":["java","blockchain","smartcontracts","tron","trx"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702532198,"creation_date":1702532198,"answer_id":77657968,"question_id":77484946,"body_markdown":"&quot;BigInteger: modulus not positive&quot;, is a Java error that typically occurs when a BigInteger operation is attempted with a non-positive modulus. In the context of your issue, it seems like this error might be related to the &quot;from_amount&quot; parameter.\r\n\r\nThe &quot;from_amount&quot; parameter should represent the total amount of tokens you want to shield (i.e., transfer into the shielded contract). In your case, if you want to shield 500 USDT, you should set &quot;from_amount&quot; to 500. However, please note that the amount should be in the smallest unit of the token. For USDT, which has 6 decimal places, if you want to shield 500 USDT, you should set &quot;from_amount&quot; to 500000000 (500 * 10^6).\r\n\r\nPlease try adjusting the &quot;from_amount&quot; parameter and see if that resolves your issue.","link":"https://stackoverflow.com/questions/77484946/transfer-tron-shielded-tokens/77657968#77657968","title":"Transfer Tron Shielded Tokens","body":"<p>&quot;BigInteger: modulus not positive&quot;, is a Java error that typically occurs when a BigInteger operation is attempted with a non-positive modulus. In the context of your issue, it seems like this error might be related to the &quot;from_amount&quot; parameter.</p>\n<p>The &quot;from_amount&quot; parameter should represent the total amount of tokens you want to shield (i.e., transfer into the shielded contract). In your case, if you want to shield 500 USDT, you should set &quot;from_amount&quot; to 500. However, please note that the amount should be in the smallest unit of the token. For USDT, which has 6 decimal places, if you want to shield 500 USDT, you should set &quot;from_amount&quot; to 500000000 (500 * 10^6).</p>\n<p>Please try adjusting the &quot;from_amount&quot; parameter and see if that resolves your issue.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":39,"answer_count":1,"score":0,"last_activity_date":1702532198,"creation_date":1700016140,"question_id":77484946,"body_markdown":"I&#39;m newby to Tron network\r\n\r\nrecently I tried to transfer USDT TRC20 using Shielded contract on Nile testnet\r\n\r\nI did every step mentioned on the document : [shielded-TRC20-contract.md](https://github.com/tronprotocol/documentation-en/blob/master/docs/mechanism-algorithm/shielded-TRC20-contract.md)\r\n\r\nI did steps until: 8. Call api: wallet/getnewshieldedaddress to generate all the related keys\r\n\r\nand after that, I have to mint my Token to the Shielded Address \r\n\r\nnow I pass these params to `wallet/createshieldedcontractparameters` endpoint :\r\n\r\n```{\r\n    &quot;ovk&quot;: &quot;72493d42a87227481b90c7174006d388b263b64a8b94ea55dbb78d59f5e45fa3&quot;,\r\n    // the ovk I get from `wallet/getexpandedspendingkey`\r\n    \r\n    &quot;from_amount&quot;: &quot;50000&quot;,\r\n    // I don&#39;t know what should I pass here\r\n    \r\n    &quot;shielded_receives&quot;: {\r\n        &quot;note&quot;: {\r\n            &quot;value&quot;: 500,\r\n            // I wanna to transfer 500 USDT\r\n            \r\n            \r\n            &quot;payment_address&quot;: &quot;ztron17lk8dsfjjmpr96j3dwlz0jkwe99ejmpulrldz498aeguma477r3u48w4prnthjs04utxk3a3a40&quot;,\r\n            //Here I pass the payment address that I get from `wallet/getnewshieldedaddress`\r\n            \r\n            &quot;rcm&quot;: &quot;68ef5a158f06734984d8e1500da86988caa6798953281adc1984808a67192c02&quot;\r\n            // I pass rcm that I get from &#39;wallet/getrcm`\r\n        }\r\n    },\r\n    &quot;shielded_TRC20_contract_address&quot;: &quot;TXLAQ63Xg1NAzckPwKHvzw7CSEmLMEqcdj&quot;,\r\n    // I pass the smart Contract address of USDT nil test net that I already have in my wallet\r\n    &quot;visible&quot; : &quot;True&quot;\r\n}\r\n\r\n```\r\n\r\n\r\nnow when I send my request I got this error :\r\n\r\n\r\n`\r\n{\r\n    &quot;Error&quot;: &quot;class java.lang.ArithmeticException : BigInteger: modulus not positive&quot;\r\n}\r\n`\r\n\r\nI don&#39;t know what I done wrong and What exactly should I do :/","link":"https://stackoverflow.com/questions/77484946/transfer-tron-shielded-tokens","title":"Transfer Tron Shielded Tokens","body":"<p>I'm newby to Tron network</p>\n<p>recently I tried to transfer USDT TRC20 using Shielded contract on Nile testnet</p>\n<p>I did every step mentioned on the document : <a href=\"https://github.com/tronprotocol/documentation-en/blob/master/docs/mechanism-algorithm/shielded-TRC20-contract.md\" rel=\"nofollow noreferrer\">shielded-TRC20-contract.md</a></p>\n<p>I did steps until: 8. Call api: wallet/getnewshieldedaddress to generate all the related keys</p>\n<p>and after that, I have to mint my Token to the Shielded Address</p>\n<p>now I pass these params to <code>wallet/createshieldedcontractparameters</code> endpoint :</p>\n<pre><code>    &quot;ovk&quot;: &quot;72493d42a87227481b90c7174006d388b263b64a8b94ea55dbb78d59f5e45fa3&quot;,\n    // the ovk I get from `wallet/getexpandedspendingkey`\n    \n    &quot;from_amount&quot;: &quot;50000&quot;,\n    // I don't know what should I pass here\n    \n    &quot;shielded_receives&quot;: {\n        &quot;note&quot;: {\n            &quot;value&quot;: 500,\n            // I wanna to transfer 500 USDT\n            \n            \n            &quot;payment_address&quot;: &quot;ztron17lk8dsfjjmpr96j3dwlz0jkwe99ejmpulrldz498aeguma477r3u48w4prnthjs04utxk3a3a40&quot;,\n            //Here I pass the payment address that I get from `wallet/getnewshieldedaddress`\n            \n            &quot;rcm&quot;: &quot;68ef5a158f06734984d8e1500da86988caa6798953281adc1984808a67192c02&quot;\n            // I pass rcm that I get from 'wallet/getrcm`\n        }\n    },\n    &quot;shielded_TRC20_contract_address&quot;: &quot;TXLAQ63Xg1NAzckPwKHvzw7CSEmLMEqcdj&quot;,\n    // I pass the smart Contract address of USDT nil test net that I already have in my wallet\n    &quot;visible&quot; : &quot;True&quot;\n}\n\n</code></pre>\n<p>now when I send my request I got this error :</p>\n<p><code>{ &quot;Error&quot;: &quot;class java.lang.ArithmeticException : BigInteger: modulus not positive&quot; }</code></p>\n<p>I don't know what I done wrong and What exactly should I do :/</p>\n"},{"tags":["java","spring-boot","caching","redis","spring-data-redis"],"comments":[{"score":0,"post_type":"question","creation_date":1702522225,"post_id":76258699,"comment_id":136907757,"body_markdown":"related?: https://github.com/hendisantika/spring-data-redis-sample","link":"https://stackoverflow.com/questions/76258699/defaultserializer-requires-a-serializable-payload-but-received-an-object-of-type#comment136907757_76258699","body":"related?: <a href=\"https://github.com/hendisantika/spring-data-redis-sample\" rel=\"nofollow noreferrer\">github.com/hendisantika/spring-data-redis-sample</a>"}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1689870862,"creation_date":1689870862,"answer_id":76731940,"question_id":76258699,"body_markdown":"Add **implements Serializable** to the end of the NoteResponse for example\r\n\r\npublic class NoteResponse implements Serializable","link":"https://stackoverflow.com/questions/76258699/defaultserializer-requires-a-serializable-payload-but-received-an-object-of-type/76731940#76731940","title":"DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.ResponseEntity]","body":"<p>Add <strong>implements Serializable</strong> to the end of the NoteResponse for example</p>\n<p>public class NoteResponse implements Serializable</p>\n"}],"comment_count":1,"is_answered":true,"view_count":2157,"answer_count":1,"score":1,"last_activity_date":1702515843,"creation_date":1684197314,"last_edit_date":1684199006,"question_id":76258699,"body_markdown":"I want to cache the List&lt;NoteResponse&gt; in redis. Below is the service method for the same:-\r\n\r\n    @Autowired\r\n    private RedisTemplate&lt;String, Object&gt; redisTemplate;\r\n\r\n    @Cacheable(value = &quot;notes&quot;, key = &quot;#userId&quot;)\r\n    public ResponseEntity&lt;?&gt; getAllNotes(Integer userId) {\r\n\r\n            HashOperations&lt;String, String, Object&gt; hashOperations = redisTemplate.opsForHash();\r\n            //Check if the cacheKey contains this userId\r\n            if (hashOperations.hasKey(cacheKey, userIdAsKey)) {\r\n                List&lt;NoteResponse&gt; noteResponses = (List&lt;NoteResponse&gt;) hashOperations.get(cacheKey, userIdAsKey);\r\n                return ResponseEntity.ok(noteResponses);\r\n            }\r\n\r\n            List&lt;Note&gt; notes = noteRepository.findAllByUserId(userId);\r\n            List&lt;NoteResponse&gt; noteResponses = Helper.getNoteResponse(notes);\r\n            hashOperations.put(cacheKey, userIdAsKey, noteResponses);\r\n            return ResponseEntity.ok(noteResponses);\r\n    }\r\n\r\nbut i am getting this exception: java.lang.IllegalArgumentException: DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.ResponseEntity]\r\n\r\n","link":"https://stackoverflow.com/questions/76258699/defaultserializer-requires-a-serializable-payload-but-received-an-object-of-type","title":"DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.ResponseEntity]","body":"<p>I want to cache the List in redis. Below is the service method for the same:-</p>\n<pre><code>@Autowired\nprivate RedisTemplate&lt;String, Object&gt; redisTemplate;\n\n@Cacheable(value = &quot;notes&quot;, key = &quot;#userId&quot;)\npublic ResponseEntity&lt;?&gt; getAllNotes(Integer userId) {\n\n        HashOperations&lt;String, String, Object&gt; hashOperations = redisTemplate.opsForHash();\n        //Check if the cacheKey contains this userId\n        if (hashOperations.hasKey(cacheKey, userIdAsKey)) {\n            List&lt;NoteResponse&gt; noteResponses = (List&lt;NoteResponse&gt;) hashOperations.get(cacheKey, userIdAsKey);\n            return ResponseEntity.ok(noteResponses);\n        }\n\n        List&lt;Note&gt; notes = noteRepository.findAllByUserId(userId);\n        List&lt;NoteResponse&gt; noteResponses = Helper.getNoteResponse(notes);\n        hashOperations.put(cacheKey, userIdAsKey, noteResponses);\n        return ResponseEntity.ok(noteResponses);\n}\n</code></pre>\n<p>but i am getting this exception: java.lang.IllegalArgumentException: DefaultSerializer requires a Serializable payload but received an object of type [org.springframework.http.ResponseEntity]</p>\n"},{"tags":["java","android","xiaomi"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702508578,"creation_date":1702508578,"answer_id":77656984,"question_id":76505355,"body_markdown":"Try to define both https and app schemas in intent and change your activity launchMode to singleInstance\r\n\r\n``` xml\r\n        android:launchMode=&quot;singleInstance&quot;\r\n```","link":"https://stackoverflow.com/questions/76505355/why-deep-linking-not-working-in-mi-browser/77656984#77656984","title":"Why deep linking not working in Mi Browser?","body":"<p>Try to define both https and app schemas in intent and change your activity launchMode to singleInstance</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        android:launchMode=&quot;singleInstance&quot;\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":185,"answer_count":1,"score":1,"last_activity_date":1702508578,"creation_date":1687167199,"question_id":76505355,"body_markdown":"I have Java Android App that associated with my certificated web site by deep link in my AndroidManifest.xml. When this web site is opening in browser (Chrome, Firefox, etc.) it shows &quot;Open In&quot; dialog and navigates to Android App. I tested it in many browsers and it works fine but not in Xiaomi default browser, this browser just opens web site and don&#39;t do anything more. It works only if I manualy select url from address bar and choose &quot;Open&quot;.\r\n\r\nAnyone knows why it could be, does Mi Browser not supporting navigation to apps by deep linking?\r\n\r\nI tried to find anything about Mi browser problems with this, but found nothing.","link":"https://stackoverflow.com/questions/76505355/why-deep-linking-not-working-in-mi-browser","title":"Why deep linking not working in Mi Browser?","body":"<p>I have Java Android App that associated with my certificated web site by deep link in my AndroidManifest.xml. When this web site is opening in browser (Chrome, Firefox, etc.) it shows &quot;Open In&quot; dialog and navigates to Android App. I tested it in many browsers and it works fine but not in Xiaomi default browser, this browser just opens web site and don't do anything more. It works only if I manualy select url from address bar and choose &quot;Open&quot;.</p>\n<p>Anyone knows why it could be, does Mi Browser not supporting navigation to apps by deep linking?</p>\n<p>I tried to find anything about Mi browser problems with this, but found nothing.</p>\n"},{"tags":["java","android","android-spinner"],"comment_count":0,"is_answered":false,"view_count":18,"answer_count":0,"score":0,"last_activity_date":1702493050,"creation_date":1700391686,"last_edit_date":1702493050,"question_id":77510496,"body_markdown":"I&#39;m trying to automatically switch between dropdown menus.\r\n\r\nI have two drop-down menus, when I select the first menu, the second menu content changes depending on this menu, I want it to automatically switch to the second menu and show the list content.\r\n\r\nHowever, it goes to the second menu but does not show its content.\r\n\r\nIt appears when I click again.\r\n\r\nMy codes are below. Can you help me?\r\n\r\n\r\n``` \r\n\r\n   &lt;com.google.android.material.textfield.TextInputLayout\r\n        android:id=&quot;@+id/dropDownListOuterAccounts&quot;\r\n        style=&quot;@style/MyDropDownMenuOuterStyle&quot;\r\n        android:layout_marginTop=&quot;16dp&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/toolbar&quot;&gt;\r\n\r\n        &lt;AutoCompleteTextView\r\n            android:id=&quot;@+id/dropDownListAccounts&quot;\r\n            style=&quot;@style/MyEditTextInputInnerStyle&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:adapter=&quot;@{arrayAdapterAccounts}&quot;\r\n            android:hint=&quot;@string/choose_account&quot;\r\n            android:inputType=&quot;none&quot;\r\n            tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\r\n    &lt;/com.google.android.material.textfield.TextInputLayout&gt;\r\n\r\n    &lt;com.google.android.material.textfield.TextInputLayout\r\n        android:id=&quot;@+id/dropDownListOuterSubaccounts&quot;\r\n        style=&quot;@style/MyDropDownMenuOuterStyle&quot;\r\n        android:layout_marginTop=&quot;16dp&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/dropDownListOuterAccounts&quot;&gt;\r\n\r\n        &lt;AutoCompleteTextView\r\n            android:id=&quot;@+id/dropDownListSubaccounts&quot;\r\n            style=&quot;@style/MyEditTextInputInnerStyle&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:adapter=&quot;@{arrayAdapterSubaccounts}&quot;\r\n            android:hint=&quot;@string/choose_subaccount&quot;\r\n            android:inputType=&quot;none&quot;\r\n            tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\r\n    &lt;/com.google.android.material.textfield.TextInputLayout&gt;\r\n\r\n```\r\n\r\n\r\n```\r\n        binding.dropDownListAccounts.setOnItemClickListener((parent, view, position, id) -&gt; {\r\n\r\n            binding.dropDownListOuterAccounts.setHelperText(accountList.get(position).getAccountTypeName());\r\n\r\n            binding.dropDownListSubaccounts.setText(null);\r\n            binding.dropDownListOuterSubaccounts.setHelperText(null);\r\n\r\n            subaccountsList.set(\r\n                    subaccountList\r\n                            .stream()\r\n                            .filter(subaccounts -&gt; subaccounts.getAccountId().equals(accountList.get(position).getAccountId())).collect(Collectors.toList())\r\n            );\r\n\r\n            List&lt;String&gt; subaccountNames =\r\n                    subaccountsList.get()\r\n                            .stream()\r\n                            .map(Subaccounts::getSubaccountName)\r\n                            .collect(Collectors.toList());\r\n\r\n            binding.setArrayAdapterSubaccounts(\r\n                    new ArrayAdapter&lt;&gt;(\r\n                            requireContext(),\r\n                            com.google.android.material.R.layout.support_simple_spinner_dropdown_item,\r\n                            subaccountNames));\r\n            \r\n            binding.dropDownListSubaccounts.setFocusable(true);\r\n            binding.dropDownListSubaccounts.setFocusableInTouchMode(true);\r\n            binding.dropDownListSubaccounts.requestFocus();\r\n            binding.dropDownListSubaccounts.performClick();\r\n\r\n        });\r\n```","link":"https://stackoverflow.com/questions/77510496/automatic-switching-between-drop-down-menus-android","title":"Automatic switching between drop-down menus (Android)","body":"<p>I'm trying to automatically switch between dropdown menus.</p>\n<p>I have two drop-down menus, when I select the first menu, the second menu content changes depending on this menu, I want it to automatically switch to the second menu and show the list content.</p>\n<p>However, it goes to the second menu but does not show its content.</p>\n<p>It appears when I click again.</p>\n<p>My codes are below. Can you help me?</p>\n<pre><code>\n   &lt;com.google.android.material.textfield.TextInputLayout\n        android:id=&quot;@+id/dropDownListOuterAccounts&quot;\n        style=&quot;@style/MyDropDownMenuOuterStyle&quot;\n        android:layout_marginTop=&quot;16dp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/toolbar&quot;&gt;\n\n        &lt;AutoCompleteTextView\n            android:id=&quot;@+id/dropDownListAccounts&quot;\n            style=&quot;@style/MyEditTextInputInnerStyle&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:adapter=&quot;@{arrayAdapterAccounts}&quot;\n            android:hint=&quot;@string/choose_account&quot;\n            android:inputType=&quot;none&quot;\n            tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\n    &lt;/com.google.android.material.textfield.TextInputLayout&gt;\n\n    &lt;com.google.android.material.textfield.TextInputLayout\n        android:id=&quot;@+id/dropDownListOuterSubaccounts&quot;\n        style=&quot;@style/MyDropDownMenuOuterStyle&quot;\n        android:layout_marginTop=&quot;16dp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/dropDownListOuterAccounts&quot;&gt;\n\n        &lt;AutoCompleteTextView\n            android:id=&quot;@+id/dropDownListSubaccounts&quot;\n            style=&quot;@style/MyEditTextInputInnerStyle&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:adapter=&quot;@{arrayAdapterSubaccounts}&quot;\n            android:hint=&quot;@string/choose_subaccount&quot;\n            android:inputType=&quot;none&quot;\n            tools:ignore=&quot;SpeakableTextPresentCheck&quot; /&gt;\n    &lt;/com.google.android.material.textfield.TextInputLayout&gt;\n\n</code></pre>\n<pre><code>        binding.dropDownListAccounts.setOnItemClickListener((parent, view, position, id) -&gt; {\n\n            binding.dropDownListOuterAccounts.setHelperText(accountList.get(position).getAccountTypeName());\n\n            binding.dropDownListSubaccounts.setText(null);\n            binding.dropDownListOuterSubaccounts.setHelperText(null);\n\n            subaccountsList.set(\n                    subaccountList\n                            .stream()\n                            .filter(subaccounts -&gt; subaccounts.getAccountId().equals(accountList.get(position).getAccountId())).collect(Collectors.toList())\n            );\n\n            List&lt;String&gt; subaccountNames =\n                    subaccountsList.get()\n                            .stream()\n                            .map(Subaccounts::getSubaccountName)\n                            .collect(Collectors.toList());\n\n            binding.setArrayAdapterSubaccounts(\n                    new ArrayAdapter&lt;&gt;(\n                            requireContext(),\n                            com.google.android.material.R.layout.support_simple_spinner_dropdown_item,\n                            subaccountNames));\n            \n            binding.dropDownListSubaccounts.setFocusable(true);\n            binding.dropDownListSubaccounts.setFocusableInTouchMode(true);\n            binding.dropDownListSubaccounts.requestFocus();\n            binding.dropDownListSubaccounts.performClick();\n\n        });\n</code></pre>\n"},{"tags":["java","kotlin","gradle"],"comments":[{"score":0,"post_type":"question","creation_date":1699002284,"post_id":77415212,"comment_id":136478516,"body_markdown":"done fixing. but the button in the edit window to paste and format long logs really sucks takes me quite a while to format it.","link":"https://stackoverflow.com/questions/77415212/gradle-init-example-has-the-error-of-java-lang-classnotfoundexception-javaslan#comment136478516_77415212","body":"done fixing. but the button in the edit window to paste and format long logs really sucks takes me quite a while to format it."},{"score":0,"post_type":"question","creation_date":1699002414,"post_id":77415212,"comment_id":136478537,"body_markdown":"Not sure what you mean by window, I always type three backticks followed by none, followed by a linebreak, paste your log, followed by a linebreak and type three backticks. That is \\`\\`\\`none\\n&lt;log&gt;\\n\\`\\`\\`","link":"https://stackoverflow.com/questions/77415212/gradle-init-example-has-the-error-of-java-lang-classnotfoundexception-javaslan#comment136478537_77415212","body":"Not sure what you mean by window, I always type three backticks followed by none, followed by a linebreak, paste your log, followed by a linebreak and type three backticks. That is ```none\\n&lt;log&gt;\\n```"},{"score":0,"post_type":"question","creation_date":1699002504,"post_id":77415212,"comment_id":136478554,"body_markdown":"I see. this is waaaaayy better. thanks !","link":"https://stackoverflow.com/questions/77415212/gradle-init-example-has-the-error-of-java-lang-classnotfoundexception-javaslan#comment136478554_77415212","body":"I see. this is waaaaayy better. thanks !"},{"score":0,"post_type":"question","creation_date":1699002683,"post_id":77415212,"comment_id":136478588,"body_markdown":"So what is the real error? Your title mentions `javaslang/collection/HashMap`, but the log only contains `javaslang.λ`","link":"https://stackoverflow.com/questions/77415212/gradle-init-example-has-the-error-of-java-lang-classnotfoundexception-javaslan#comment136478588_77415212","body":"So what is the real error? Your title mentions <code>javaslang&#47;collection&#47;HashMap</code>, but the log only contains <code>javaslang.λ</code>"},{"score":0,"post_type":"question","creation_date":1699002965,"post_id":77415212,"comment_id":136478643,"body_markdown":"I think Caused by: java.lang.ClassNotFoundException: javaslang.λ this is the real error, but the stack-overflow doesn&#39;t allow me to change the title.","link":"https://stackoverflow.com/questions/77415212/gradle-init-example-has-the-error-of-java-lang-classnotfoundexception-javaslan#comment136478643_77415212","body":"I think Caused by: java.lang.ClassNotFoundException: javaslang.λ this is the real error, but the stack-overflow doesn&#39;t allow me to change the title."},{"score":0,"post_type":"question","creation_date":1699003016,"post_id":77415212,"comment_id":136478652,"body_markdown":"Changed the title for you","link":"https://stackoverflow.com/questions/77415212/gradle-init-example-has-the-error-of-java-lang-classnotfoundexception-javaslan#comment136478652_77415212","body":"Changed the title for you"},{"score":0,"post_type":"question","creation_date":1699003048,"post_id":77415212,"comment_id":136478660,"body_markdown":"Which Gradle version are you using?","link":"https://stackoverflow.com/questions/77415212/gradle-init-example-has-the-error-of-java-lang-classnotfoundexception-javaslan#comment136478660_77415212","body":"Which Gradle version are you using?"},{"score":0,"post_type":"question","creation_date":1699003586,"post_id":77415212,"comment_id":136478760,"body_markdown":"Oh, thanks a lot. I don&#39;t know the problem but the concrete classes change with each test, and sometimes it is the hashmap, and now it is different.","link":"https://stackoverflow.com/questions/77415212/gradle-init-example-has-the-error-of-java-lang-classnotfoundexception-javaslan#comment136478760_77415212","body":"Oh, thanks a lot. I don&#39;t know the problem but the concrete classes change with each test, and sometimes it is the hashmap, and now it is different."},{"score":0,"post_type":"question","creation_date":1699003604,"post_id":77415212,"comment_id":136478765,"body_markdown":"Gradle 8.4\n------------------------------------------------------------\n\nBuild time:   2023-10-04 20:52:13 UTC\nRevision:     e9251e572c9bd1d01e503a0dfdf43aedaeecdc3f\n\nKotlin:       1.9.10\nGroovy:       3.0.17\nAnt:          Apache Ant(TM) version 1.10.13 compiled on January 4 2023\nJVM:          17.0.9 (Eclipse OpenJ9 v0.41.0-release-3ede3b5a4)\nOS:           Mac OS X 13.6 aarch64","link":"https://stackoverflow.com/questions/77415212/gradle-init-example-has-the-error-of-java-lang-classnotfoundexception-javaslan#comment136478765_77415212","body":"Gradle 8.4 ------------------------------------------------------------  Build time:   2023-10-04 20:52:13 UTC Revision:     e9251e572c9bd1d01e503a0dfdf43aedaeecdc3f  Kotlin:       1.9.10 Groovy:       3.0.17 Ant:          Apache Ant(TM) version 1.10.13 compiled on January 4 2023 JVM:          17.0.9 (Eclipse OpenJ9 v0.41.0-release-3ede3b5a4) OS:           Mac OS X 13.6 aarch64"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702480962,"creation_date":1702480962,"answer_id":77654701,"question_id":77415212,"body_markdown":"For me, this appears to have been caused by my JVM. My JVM was set to `IBM Semeru Runtime Open Edition 17.0.9.0-m1 (build 17.0.9+5)`.\r\n\r\nI switched to an open jdk 17.x instance downloaded from Oracle and the problem went away. Specifically, I am now using:\r\n\r\n```\r\njava 17.0.9 2023-10-17 LTS\r\nJava(TM) SE Runtime Environment (build 17.0.9+11-LTS-201)\r\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.9+11-LTS-201, mixed mode, sharing)\r\n```","link":"https://stackoverflow.com/questions/77415212/gradle-init-example-has-the-error-of-java-lang-classnotfoundexception-javaslan/77654701#77654701","title":"Gradle init example has the error of &quot;java.lang.ClassNotFoundException: javaslang.λ&quot;","body":"<p>For me, this appears to have been caused by my JVM. My JVM was set to <code>IBM Semeru Runtime Open Edition 17.0.9.0-m1 (build 17.0.9+5)</code>.</p>\n<p>I switched to an open jdk 17.x instance downloaded from Oracle and the problem went away. Specifically, I am now using:</p>\n<pre><code>java 17.0.9 2023-10-17 LTS\nJava(TM) SE Runtime Environment (build 17.0.9+11-LTS-201)\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.9+11-LTS-201, mixed mode, sharing)\n</code></pre>\n"}],"comment_count":9,"is_answered":false,"view_count":209,"answer_count":1,"score":3,"last_activity_date":1702480962,"creation_date":1699000841,"last_edit_date":1699151051,"question_id":77415212,"body_markdown":"I am doing a learning of Gradle [with this manual][1], but encounter errors when building this project. And I don&#39;t know how to solve it.\r\n\r\n**additional information**: \r\n1.the problem appears sometimes and disappears sometimes, and I haven&#39;t got a pattern.\r\n2.I&#39;ve tried gradle version 8.x and 7.x, all have the problem \r\n\r\n### How to re-create this problem\r\n`gradle init` choose \r\n1) application \r\n2) Kotlin lang; \r\n3) multiple projects; \r\n4) Kotlin-DSL; \r\n5) jdk11; \r\n6) no new behavior\r\n\r\n```\r\n~/projects/poc-kafka-redirection &#187; ./gradlew build                                                                                                                                             maki.xie@CN-MB-makixie\r\n\r\n&gt; Task :app:compileKotlin\r\ne: java.lang.NoClassDefFoundError: javaslang.λ\r\n        at java.base/java.lang.ClassLoader.defineClassImpl(Native Method)\r\n        at java.base/java.lang.ClassLoader.defineClassInternal(ClassLoader.java:472)\r\n        at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:433)\r\n        at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:1174)\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:961)\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:867)\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:825)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:1095)\r\n        at java.base/java.lang.ClassLoader.defineClassImpl(Native Method)\r\n\r\n```\r\n","link":"https://stackoverflow.com/questions/77415212/gradle-init-example-has-the-error-of-java-lang-classnotfoundexception-javaslan","title":"Gradle init example has the error of &quot;java.lang.ClassNotFoundException: javaslang.λ&quot;","body":"<p>I am doing a learning of Gradle [with this manual][1], but encounter errors when building this project. And I don't know how to solve it.</p>\n<p><strong>additional information</strong>:\n1.the problem appears sometimes and disappears sometimes, and I haven't got a pattern.\n2.I've tried gradle version 8.x and 7.x, all have the problem</p>\n<h3>How to re-create this problem</h3>\n<p><code>gradle init</code> choose</p>\n<ol>\n<li>application</li>\n<li>Kotlin lang;</li>\n<li>multiple projects;</li>\n<li>Kotlin-DSL;</li>\n<li>jdk11;</li>\n<li>no new behavior</li>\n</ol>\n<pre><code>~/projects/poc-kafka-redirection » ./gradlew build                                                                                                                                             maki.xie@CN-MB-makixie\n\n&gt; Task :app:compileKotlin\ne: java.lang.NoClassDefFoundError: javaslang.λ\n        at java.base/java.lang.ClassLoader.defineClassImpl(Native Method)\n        at java.base/java.lang.ClassLoader.defineClassInternal(ClassLoader.java:472)\n        at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:433)\n        at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\n        at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:1174)\n        at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:961)\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:867)\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:825)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:1095)\n        at java.base/java.lang.ClassLoader.defineClassImpl(Native Method)\n\n</code></pre>\n"},{"tags":["java","android","admob","ads"],"comments":[{"score":0,"post_type":"question","creation_date":1676492547,"post_id":75204726,"comment_id":133150070,"body_markdown":"Did you find the solution finally?","link":"https://stackoverflow.com/questions/75204726/adrequest-this-method-should-only-be-accessed-from-tests-or-within-private-scop#comment133150070_75204726","body":"Did you find the solution finally?"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1675284902,"creation_date":1675284902,"answer_id":75316088,"question_id":75204726,"body_markdown":"I have the same issue, and added \r\n\r\n    @SuppressLint(&quot;VisibleForTests&quot;)\r\n    AdRequest adRequest = new AdRequest.Builder().build();\r\n\r\nIt is NOT a good solution, but it made the warning go away and the adds seem to work.","link":"https://stackoverflow.com/questions/75204726/adrequest-this-method-should-only-be-accessed-from-tests-or-within-private-scop/75316088#75316088","title":"AdRequest &quot;This method should only be accessed from tests or within private scope&quot;","body":"<p>I have the same issue, and added</p>\n<pre><code>@SuppressLint(&quot;VisibleForTests&quot;)\nAdRequest adRequest = new AdRequest.Builder().build();\n</code></pre>\n<p>It is NOT a good solution, but it made the warning go away and the adds seem to work.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1686731601,"post_id":75544087,"comment_id":134838049,"body_markdown":"Still getting it in 22.1.0","link":"https://stackoverflow.com/questions/75204726/adrequest-this-method-should-only-be-accessed-from-tests-or-within-private-scop/75544087#comment134838049_75544087","body":"Still getting it in 22.1.0"}],"comment_count":1,"score":3,"last_activity_date":1677151035,"creation_date":1677151035,"answer_id":75544087,"question_id":75204726,"body_markdown":"This warning disappeared after updating to version `21.5.0` of the Google Ads SDK.\r\n\r\n    implementation &#39;com.google.android.gms:play-services-ads:21.5.0&#39;","link":"https://stackoverflow.com/questions/75204726/adrequest-this-method-should-only-be-accessed-from-tests-or-within-private-scop/75544087#75544087","title":"AdRequest &quot;This method should only be accessed from tests or within private scope&quot;","body":"<p>This warning disappeared after updating to version <code>21.5.0</code> of the Google Ads SDK.</p>\n<pre><code>implementation 'com.google.android.gms:play-services-ads:21.5.0'\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1702463911,"creation_date":1702463911,"answer_id":77652872,"question_id":75204726,"body_markdown":"I get this message in the line:\r\n\r\n    if(ArrayUtils.contains(...)){...}\r\nfor the term &#39;contains&#39;.\r\n\r\n@McFarlane: I have not implemented &#39;play-services-ads:21.5.0&#39;, but &#39;play-services-location:21.0.1&#39; instead.\r\n","link":"https://stackoverflow.com/questions/75204726/adrequest-this-method-should-only-be-accessed-from-tests-or-within-private-scop/77652872#77652872","title":"AdRequest &quot;This method should only be accessed from tests or within private scope&quot;","body":"<p>I get this message in the line:</p>\n<pre><code>if(ArrayUtils.contains(...)){...}\n</code></pre>\n<p>for the term 'contains'.</p>\n<p>@McFarlane: I have not implemented 'play-services-ads:21.5.0', but 'play-services-location:21.0.1' instead.</p>\n"}],"comment_count":1,"is_answered":true,"view_count":970,"answer_count":3,"score":11,"last_activity_date":1702463911,"creation_date":1674431408,"question_id":75204726,"body_markdown":"I have seen that recently a new warning has appeared in mi project in the following line:\r\n\r\n\r\n        AdRequest adRequest = new AdRequest.Builder().build();\r\n\r\nThe warning is in &quot;new AdRequest.Builder().build();&quot; \r\n\r\nThis is the warning: \r\n\r\n&gt; This method should only be accessed from tests or within private scope\r\n\r\nI don&#39;t understand why this warning is showing, could it be a bug or something like that?","link":"https://stackoverflow.com/questions/75204726/adrequest-this-method-should-only-be-accessed-from-tests-or-within-private-scop","title":"AdRequest &quot;This method should only be accessed from tests or within private scope&quot;","body":"<p>I have seen that recently a new warning has appeared in mi project in the following line:</p>\n<pre><code>    AdRequest adRequest = new AdRequest.Builder().build();\n</code></pre>\n<p>The warning is in &quot;new AdRequest.Builder().build();&quot;</p>\n<p>This is the warning:</p>\n<blockquote>\n<p>This method should only be accessed from tests or within private scope</p>\n</blockquote>\n<p>I don't understand why this warning is showing, could it be a bug or something like that?</p>\n"},{"tags":["java","list"],"comments":[{"score":4,"post_type":"question","creation_date":1699878804,"post_id":77473755,"comment_id":136582187,"body_markdown":"To the person recommending &quot;Close&quot; due to being &quot;opinion-based&quot;: how can it _possibly_ be opinion-based? It either is or isn&#39;t unsafe to omit copying the list. If it is unsafe, you should be able to describe a scenario whereby the safety can be compromised. If it is safe, you should be able to prove it. Nothing opinion-based there.","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe#comment136582187_77473755","body":"To the person recommending &quot;Close&quot; due to being &quot;opinion-based&quot;: how can it <i>possibly</i> be opinion-based? It either is or isn&#39;t unsafe to omit copying the list. If it is unsafe, you should be able to describe a scenario whereby the safety can be compromised. If it is safe, you should be able to prove it. Nothing opinion-based there."},{"score":0,"post_type":"question","creation_date":1699977869,"post_id":77473755,"comment_id":136596964,"body_markdown":"Probably because you have not defined with &#39;safe&#39; means. What you consider safe someone else might consider unsafe. Until that is defined this question is a matter of opinion. It&#39;s also more than a little broad. Furthermore, what do you mean by &quot;sufficient&quot; in your first question? Sufficient for what? To compile? To run? To achieve the desired outcome? Something else?","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe#comment136596964_77473755","body":"Probably because you have not defined with &#39;safe&#39; means. What you consider safe someone else might consider unsafe. Until that is defined this question is a matter of opinion. It&#39;s also more than a little broad. Furthermore, what do you mean by &quot;sufficient&quot; in your first question? Sufficient for what? To compile? To run? To achieve the desired outcome? Something else?"}],"answers":[{"comments":[{"score":8,"post_type":"answer","creation_date":1699879042,"post_id":77473887,"comment_id":136582233,"body_markdown":"The `ArrayList` used in `Arrays` is not the normal `java.util.ArrayList`, but an unrelated implementation defined inside `Arrays` itself that just happens to also be called `ArrayList`. As such, a `j.u.ArrayList` being created using an `Arrays.ArrayList` is nothing strange.","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77473887#comment136582233_77473887","body":"The <code>ArrayList</code> used in <code>Arrays</code> is not the normal <code>java.util.ArrayList</code>, but an unrelated implementation defined inside <code>Arrays</code> itself that just happens to also be called <code>ArrayList</code>. As such, a <code>j.u.ArrayList</code> being created using an <code>Arrays.ArrayList</code> is nothing strange."}],"comment_count":1,"score":-3,"last_activity_date":1699880008,"last_edit_date":1699880008,"creation_date":1699878454,"answer_id":77473887,"question_id":77473755,"body_markdown":"I don&#39;t have an answer but I find the implementation of `Arrays.asList()` funny, since it also creates a list inside:\r\n\r\n```\r\n    public static &lt;T&gt; List&lt;T&gt; asList(T... a) {\r\n        return new ArrayList&lt;&gt;(a);\r\n    }\r\n```\r\n\r\nI wonder what happened, maybe its one of those: &quot;this only applies to certain VMs so cant be guaranteed&quot;\r\n\r\nIf you are not writing a library I wouldn&#39;t mind to much to be honest. `T` would also need to be immutable for true safety btw.\r\n\r\nEDIT: intresting stuff, apparently this `ArrayList` is a different `ArrayList`, *nothing strange*","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77473887#77473887","title":"Is it necessary to copy a list to be safe?","body":"<p>I don't have an answer but I find the implementation of <code>Arrays.asList()</code> funny, since it also creates a list inside:</p>\n<pre><code>    public static &lt;T&gt; List&lt;T&gt; asList(T... a) {\n        return new ArrayList&lt;&gt;(a);\n    }\n</code></pre>\n<p>I wonder what happened, maybe its one of those: &quot;this only applies to certain VMs so cant be guaranteed&quot;</p>\n<p>If you are not writing a library I wouldn't mind to much to be honest. <code>T</code> would also need to be immutable for true safety btw.</p>\n<p>EDIT: intresting stuff, apparently this <code>ArrayList</code> is a different <code>ArrayList</code>, <em>nothing strange</em></p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1699879377,"post_id":77473921,"comment_id":136582286,"body_markdown":"&quot;it is still possible to modify the backing list&quot; - yes, but what is this backing list? It is the list returned by `Arrays.asList(this.toArray())`. How can you possibly modify this list? It seems quite unmodifiable to me, as it&#39;s not accessible, it&#39;s something that gets created inside an API method and never gets out except through the `unmodifiable` wrapper.","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77473921#comment136582286_77473921","body":"&quot;it is still possible to modify the backing list&quot; - yes, but what is this backing list? It is the list returned by <code>Arrays.asList(this.toArray())</code>. How can you possibly modify this list? It seems quite unmodifiable to me, as it&#39;s not accessible, it&#39;s something that gets created inside an API method and never gets out except through the <code>unmodifiable</code> wrapper."},{"score":3,"post_type":"answer","creation_date":1699879622,"post_id":77473921,"comment_id":136582331,"body_markdown":"@k314159 This is a default method in an interface. There is no guarantee that `toArray` will return a brand new array. If the `Stream` implementation reuses array instances, that will retroactively change the list returned by `Arrays.asList` (since it&#39;s only a wrapper around the underlying array). As such, the point is to 1) get the array, 2) create an adapter to make it usable as a list, and 3) make a safe copy of that list without any connection to the original array.\n\n(Yes, reusing arrays is silly, but a default method can&#39;t just make wild assumptions about implementation details.)","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77473921#comment136582331_77473921","body":"@k314159 This is a default method in an interface. There is no guarantee that <code>toArray</code> will return a brand new array. If the <code>Stream</code> implementation reuses array instances, that will retroactively change the list returned by <code>Arrays.asList</code> (since it&#39;s only a wrapper around the underlying array). As such, the point is to 1) get the array, 2) create an adapter to make it usable as a list, and 3) make a safe copy of that list without any connection to the original array.  (Yes, reusing arrays is silly, but a default method can&#39;t just make wild assumptions about implementation details.)"},{"score":2,"post_type":"answer","creation_date":1699881149,"post_id":77473921,"comment_id":136582646,"body_markdown":"Thanks. It seems that all the Stream implementations inside the Java API (in the OpenJDK) define `toArray()` to create a brand new array. However, I guess you&#39;re saying there&#39;s nothing to prevent a user from writing their own Stream implementation that returns an existing array, and therefore it has to be copied.","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77473921#comment136582646_77473921","body":"Thanks. It seems that all the Stream implementations inside the Java API (in the OpenJDK) define <code>toArray()</code> to create a brand new array. However, I guess you&#39;re saying there&#39;s nothing to prevent a user from writing their own Stream implementation that returns an existing array, and therefore it has to be copied."},{"score":1,"post_type":"answer","creation_date":1699882036,"post_id":77473921,"comment_id":136582823,"body_markdown":"@k314159 correct. The implementations create brand new arrays, but as said before, the specification doesn&#39;t require it, and that allows other implementations to return the same instance.","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77473921#comment136582823_77473921","body":"@k314159 correct. The implementations create brand new arrays, but as said before, the specification doesn&#39;t require it, and that allows other implementations to return the same instance."}],"comment_count":4,"score":3,"last_activity_date":1699902350,"last_edit_date":1699902350,"creation_date":1699878779,"answer_id":77473921,"question_id":77473755,"body_markdown":"## Unmodifiable *view* backed by a modifiable collection\r\n\r\nFrom the [Javadoc](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Collection.html#unmodview) (emphasis mine):\r\n\r\n&gt; An unmodifiable view collection is a collection that is unmodifiable and that is also a view onto a backing collection. Its mutator methods throw UnsupportedOperationException, as described above, while reading and querying methods are delegated to the backing collection. The effect is to provide read-only access to the backing collection. This is useful for a component to provide users with read access to an internal collection, while preventing them from modifying such collections unexpectedly. Examples of unmodifiable view collections are those returned by the Collections.unmodifiableCollection, Collections.unmodifiableList, and related methods.\r\n\r\n&gt; Note that **changes to the backing collection might still be possible, and if they occur, they are visible through the unmodifiable view**. Thus, an unmodifiable view collection is not necessarily immutable. However, if the backing collection of an unmodifiable view is effectively immutable, or if the only reference to the backing collection is through an unmodifiable view, the view can be considered effectively immutable. \r\n\r\nAs the `Collections.unmodifiableList` returns a `unmodifiable view` of the backing list, it is still possible to modify the backing list which will impact the unmodifiable list. Now, the list is in turn backed by the array provided in the `Arrays.asList` method. So, everything depends on `this.toArray()`. As it is inside a default method of the `Stream` interface, it is dependent on the actual implementation of the stream whether `toArray()` returns a something modifiable or not. That&#39;s why it needs to be copied. \r\n","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77473921#77473921","title":"Is it necessary to copy a list to be safe?","body":"<h2>Unmodifiable <em>view</em> backed by a modifiable collection</h2>\n<p>From the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Collection.html#unmodview\" rel=\"nofollow noreferrer\">Javadoc</a> (emphasis mine):</p>\n<blockquote>\n<p>An unmodifiable view collection is a collection that is unmodifiable and that is also a view onto a backing collection. Its mutator methods throw UnsupportedOperationException, as described above, while reading and querying methods are delegated to the backing collection. The effect is to provide read-only access to the backing collection. This is useful for a component to provide users with read access to an internal collection, while preventing them from modifying such collections unexpectedly. Examples of unmodifiable view collections are those returned by the Collections.unmodifiableCollection, Collections.unmodifiableList, and related methods.</p>\n</blockquote>\n<blockquote>\n<p>Note that <strong>changes to the backing collection might still be possible, and if they occur, they are visible through the unmodifiable view</strong>. Thus, an unmodifiable view collection is not necessarily immutable. However, if the backing collection of an unmodifiable view is effectively immutable, or if the only reference to the backing collection is through an unmodifiable view, the view can be considered effectively immutable.</p>\n</blockquote>\n<p>As the <code>Collections.unmodifiableList</code> returns a <code>unmodifiable view</code> of the backing list, it is still possible to modify the backing list which will impact the unmodifiable list. Now, the list is in turn backed by the array provided in the <code>Arrays.asList</code> method. So, everything depends on <code>this.toArray()</code>. As it is inside a default method of the <code>Stream</code> interface, it is dependent on the actual implementation of the stream whether <code>toArray()</code> returns a something modifiable or not. That's why it needs to be copied.</p>\n"},{"comments":[{"score":1,"post_type":"answer","creation_date":1699880916,"post_id":77473925,"comment_id":136582585,"body_markdown":"Thanks, that&#39;s an interesting reminder about the existence of `toUnmodifiableList()`. However `Stream.toList()`, introduced in Java 16, is more &quot;modern&quot; than `Collectors.toUnmodifiableList()` (Java 10). And when you write `collect(Collectors.toUnmodifiableList())` IntelliJ IDEA suggests to change it to `toList()`.","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77473925#comment136582585_77473925","body":"Thanks, that&#39;s an interesting reminder about the existence of <code>toUnmodifiableList()</code>. However <code>Stream.toList()</code>, introduced in Java 16, is more &quot;modern&quot; than <code>Collectors.toUnmodifiableList()</code> (Java 10). And when you write <code>collect(Collectors.toUnmodifiableList())</code> IntelliJ IDEA suggests to change it to <code>toList()</code>."},{"score":1,"post_type":"answer","creation_date":1699881791,"post_id":77473925,"comment_id":136582783,"body_markdown":"also be aware that `Collectors.toUnmodifiableList()` does **not** allow `null` elements; while these are allowed by `toList()`","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77473925#comment136582783_77473925","body":"also be aware that <code>Collectors.toUnmodifiableList()</code> does <b>not</b> allow <code>null</code> elements; while these are allowed by <code>toList()</code>"}],"comment_count":2,"score":0,"last_activity_date":1699878803,"creation_date":1699878803,"answer_id":77473925,"question_id":77473755,"body_markdown":"The reason for creating a new ArrayList in the implementation you provided is to ensure that the returned list is truly unmodifiable. The Arrays.asList method returns a fixed-size list backed by the original array.\r\n\r\nAn alternative and more modern approach to obtaining an unmodifiable list is to use the Collectors.toUnmodifiableList() method from the Stream API. For example:\r\n\r\n&gt; Arrays.stream(this.toArray()).collect(Collectors.toUnmodifiableList());\r\n\r\nThis approach directly produces an unmodifiable list without the need for creating an intermediate ArrayList. I hope this suggestion proves helpful.\r\n\r\n\r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77473925#77473925","title":"Is it necessary to copy a list to be safe?","body":"<p>The reason for creating a new ArrayList in the implementation you provided is to ensure that the returned list is truly unmodifiable. The Arrays.asList method returns a fixed-size list backed by the original array.</p>\n<p>An alternative and more modern approach to obtaining an unmodifiable list is to use the Collectors.toUnmodifiableList() method from the Stream API. For example:</p>\n<blockquote>\n<p>Arrays.stream(this.toArray()).collect(Collectors.toUnmodifiableList());</p>\n</blockquote>\n<p>This approach directly produces an unmodifiable list without the need for creating an intermediate ArrayList. I hope this suggestion proves helpful.</p>\n"},{"comments":[{"score":1,"post_type":"answer","creation_date":1699881893,"post_id":77474199,"comment_id":136582804,"body_markdown":"&quot;Use `List.of` instead&quot; is great advise if you know that no element will be `null`. Since `Stream`&#39;s default method must assume the stream can contain `null` elements it cannot be used. That makes `Collections.unmodifiableList(new ArrayList&lt;&gt;(Arrays.asList(array)))` a good alternative to create an unmodifiable list based on a potentially mutable array.","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77474199#comment136582804_77474199","body":"&quot;Use <code>List.of</code> instead&quot; is great advise if you know that no element will be <code>null</code>. Since <code>Stream</code>&#39;s default method must assume the stream can contain <code>null</code> elements it cannot be used. That makes <code>Collections.unmodifiableList(new ArrayList&lt;&gt;(Arrays.asList(array)))</code> a good alternative to create an unmodifiable list based on a potentially mutable array."},{"score":1,"post_type":"answer","creation_date":1699882456,"post_id":77474199,"comment_id":136582904,"body_markdown":"One can also note that the default `Stream.toList()` implementation (which was tacked on many years later) is likely a compromise where the priorities (from high to low) were 1) make absolutely sure this works with every single contract-abiding implementation that has been written over the last several years, 2) since this only exists for backwards compatibility and it&#39;ll often be overridden with better implementations, don&#39;t make it smarter or more complicated than it has to be, and 3) just make sure it&#39;s not _painfully_ slow. Personally, I find the implementation to be a good balance.","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77474199#comment136582904_77474199","body":"One can also note that the default <code>Stream.toList()</code> implementation (which was tacked on many years later) is likely a compromise where the priorities (from high to low) were 1) make absolutely sure this works with every single contract-abiding implementation that has been written over the last several years, 2) since this only exists for backwards compatibility and it&#39;ll often be overridden with better implementations, don&#39;t make it smarter or more complicated than it has to be, and 3) just make sure it&#39;s not <i>painfully</i> slow. Personally, I find the implementation to be a good balance."},{"score":1,"post_type":"answer","creation_date":1702462835,"post_id":77474199,"comment_id":136898651,"body_markdown":"I don’t think that it is helpful to construct a difference between the contracts of `Collection.toArray` and `Stream.toArray`, both should return a new array. But there is some distrust about the correctness of 3rd part implementations, see [`ArrayList`’s constructor](https://stackoverflow.com/q/77574918/2711488) for example which also makes a copy of the array returned by `Collection.toArray` when it doesn’t come from a trusted class (`ArrayList` itself).","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77474199#comment136898651_77474199","body":"I don’t think that it is helpful to construct a difference between the contracts of <code>Collection.toArray</code> and <code>Stream.toArray</code>, both should return a new array. But there is some distrust about the correctness of 3rd part implementations, see <a href=\"https://stackoverflow.com/q/77574918/2711488\"><code>ArrayList</code>’s constructor</a> for example which also makes a copy of the array returned by <code>Collection.toArray</code> when it doesn’t come from a trusted class (<code>ArrayList</code> itself)."},{"score":0,"post_type":"answer","creation_date":1702476089,"post_id":77474199,"comment_id":136900962,"body_markdown":"@Holger I operate under the assumption that the javadoc of a method is the _canonical_ source of contract rules (here I use the term &#39;contract&#39; as: These are rules that, if you break them, means your code is buggy; however, the type system cannot check it. In contrast to e.g. an interface, where the compiler _will_ refuse to compile it if you `implements X` and fail to implement one of the methods you must implement as per the def of interface X.). That&#39;s the proper approach, no? In which case - there really is a contract difference between the two, I&#39;m afraid.","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77474199#comment136900962_77474199","body":"@Holger I operate under the assumption that the javadoc of a method is the <i>canonical</i> source of contract rules (here I use the term &#39;contract&#39; as: These are rules that, if you break them, means your code is buggy; however, the type system cannot check it. In contrast to e.g. an interface, where the compiler <i>will</i> refuse to compile it if you <code>implements X</code> and fail to implement one of the methods you must implement as per the def of interface X.). That&#39;s the proper approach, no? In which case - there really is a contract difference between the two, I&#39;m afraid."},{"score":0,"post_type":"answer","creation_date":1702476179,"post_id":77474199,"comment_id":136900977,"body_markdown":"I certainly agree with you this difference shouldn&#39;t exist, but, it&#39;s there. Editing that javadoc _now_ is backwards incompatible; an impl of stream.toArray that fails to make a safe copy is technically correct (in that no contract stipulates that this is _incorrect_); after a javadoc update it would no longer be so. OpenJDK has bizarre ideas about backwards compatibility; they take it too seriously in cases like this, and not seriously enough when it&#39;s their own pet projects. Such breaking `.setAccessible` on all reflective types. Point being - they won&#39;t change this in my experience.","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77474199#comment136900977_77474199","body":"I certainly agree with you this difference shouldn&#39;t exist, but, it&#39;s there. Editing that javadoc <i>now</i> is backwards incompatible; an impl of stream.toArray that fails to make a safe copy is technically correct (in that no contract stipulates that this is <i>incorrect</i>); after a javadoc update it would no longer be so. OpenJDK has bizarre ideas about backwards compatibility; they take it too seriously in cases like this, and not seriously enough when it&#39;s their own pet projects. Such breaking <code>.setAccessible</code> on all reflective types. Point being - they won&#39;t change this in my experience."},{"score":1,"post_type":"answer","creation_date":1702477462,"post_id":77474199,"comment_id":136901257,"body_markdown":"The documentation also doesn’t say that implementors were allowed to keep a reference to the returned array. So why should implementors be allowed to make more assumptions than the callers? By the way, it has been acknowledged in [this comment](https://stackoverflow.com/questions/65741773/would-stream-tolist-perform-better-than-collectors-tolist#comment116307258_65741773) that the scenario, this defensive copy is protecting against, is considered a violation of the spec.","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77474199#comment136901257_77474199","body":"The documentation also doesn’t say that implementors were allowed to keep a reference to the returned array. So why should implementors be allowed to make more assumptions than the callers? By the way, it has been acknowledged in <a href=\"https://stackoverflow.com/questions/65741773/would-stream-tolist-perform-better-than-collectors-tolist#comment116307258_65741773\">this comment</a> that the scenario, this defensive copy is protecting against, is considered a violation of the spec."},{"score":0,"post_type":"answer","creation_date":1702489701,"post_id":77474199,"comment_id":136903836,"body_markdown":"@Holger Implementors can do whatever they want once they&#39;ve adhered to all spelled out in the javadoc. That&#39;s the point of the abstraction layer. Any restrictions and stipulations must be specified (presumably, in the javadoc, because, where else?); if they aren&#39;t, they don&#39;t exist. Your link to the comment by Stuart Marks is quite interesting; it seems like Stuart is wrong. I assume Stuart is a homo sapiens, and therefore, fallible. I&#39;ve asked for clarification there; maybe team OpenJDK considers a different place as canonical repository of API contracts and stipulations.","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77474199#comment136903836_77474199","body":"@Holger Implementors can do whatever they want once they&#39;ve adhered to all spelled out in the javadoc. That&#39;s the point of the abstraction layer. Any restrictions and stipulations must be specified (presumably, in the javadoc, because, where else?); if they aren&#39;t, they don&#39;t exist. Your link to the comment by Stuart Marks is quite interesting; it seems like Stuart is wrong. I assume Stuart is a homo sapiens, and therefore, fallible. I&#39;ve asked for clarification there; maybe team OpenJDK considers a different place as canonical repository of API contracts and stipulations."},{"score":1,"post_type":"answer","creation_date":1702542819,"post_id":77474199,"comment_id":136909551,"body_markdown":"Even the documentation authors are homo sapiens and it’s never a good idea to counteract obvious intent just because someone feels like the intent has not been spelled out explicitly enough. You are the first one I ever encountered since the introduction of the Stream API who thinks that keeping a reference to the array was a legal behavior for implementors.","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77474199#comment136909551_77474199","body":"Even the documentation authors are homo sapiens and it’s never a good idea to counteract obvious intent just because someone feels like the intent has not been spelled out explicitly enough. You are the first one I ever encountered since the introduction of the Stream API who thinks that keeping a reference to the array was a legal behavior for implementors."},{"score":0,"post_type":"answer","creation_date":1702561644,"post_id":77474199,"comment_id":136912876,"body_markdown":"@Holger I have asked about this invisible spec Stuart is talking about on core-lib-dev. I don&#39;t have openJDK commit rights, but if it was a normal project I&#39;d have filed a PR to add the same stipulation rider the Collection.toArray javadoc has, to the Stream.toArray javadoc.","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77474199#comment136912876_77474199","body":"@Holger I have asked about this invisible spec Stuart is talking about on core-lib-dev. I don&#39;t have openJDK commit rights, but if it was a normal project I&#39;d have filed a PR to add the same stipulation rider the Collection.toArray javadoc has, to the Stream.toArray javadoc."}],"comment_count":9,"score":9,"last_activity_date":1699915581,"last_edit_date":1699915581,"creation_date":1699881593,"answer_id":77474199,"question_id":77473755,"body_markdown":"## It has a purpose\r\n\r\n&gt; I&#39;m wondering why the list returned by Arrays.asList needs to be copied to a new ArrayList. Would it not be sufficient to just return the following?\r\n\r\nWhich `.toArray()` are we talking about? If we&#39;re talking about the one from `j.u.Collection`, you&#39;re right: The javadoc of that `toArray()` method _guarantees_ that it is a newly allocated array, hence, no need to make a defensive copy. However, that&#39;s not the `toArray()` involved here: We&#39;re talking about `j.u.s.Stream`&#39;s `.toArray()`. Its javadoc is a lot shorter:\r\n\r\n```\r\n    /**\r\n     * Returns an array containing the elements of this stream.\r\n     *\r\n     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal\r\n     * operation&lt;/a&gt;.\r\n     *\r\n     * @return an array, whose {@linkplain Class#getComponentType runtime component\r\n     * type} is {@code Object}, containing the elements of this stream\r\n     */\r\n```\r\n\r\nUnlike `j.u.Collection toArray()`, this javadoc makes no notes either way about the nature of that array. Hence, evidently, the default impl in the `Stream` javadoc does not presume the array is necessarily &#39;safe&#39; (&#39;safe&#39; in the sense: Will not later be modified).\r\n\r\nI think you know, but just to be crystal clear:\r\n\r\n`Arrays.asList` is almost always a mistake. It&#39;s a worst-of-both-worlds list: It creates a light wrapper around the array you pass to it. So, `set()` works (because `foo[x] = value;` is possible and indeed, is how that is implemented), but `.add()` doesn&#39;t (because you can&#39;t change the size of an array). The list is not immutable (i.e. if passing it to code outside of your direct control you need to extensively document, or, make a defensive copy), but also not a fully featured list. Use `List.of` instead, which makes fully immutable lists - lists you can pass around to whomever you like without worrying about losing control of integrity.\r\n\r\nEDIT: And to explain why its `Collections.unmodifiableList(new ArrayList&lt;...`) instead of `List.copyOf` - The immutable lists that those static methods on `List` make throw NPEs when `null` is in there, but streams can have `null`, so you can&#39;t use that. This edit brought to you by a comment from @Rob Spoor :)\r\n\r\n## This is not as big an issue as you think, though\r\n\r\nNote that the code you found is merely the default implementation - any particular implementation of stream is free to come up with a better way to do this. Just about every implementation you are bound to run into overrides the definition. For example, if you call an arraylist&#39;s `stream()`, you end up with this implementation instead, which is from streamops and is the same code path used by all the collections in the core libs. Hence, the actual code you end up using, is this:\r\n\r\n```\r\n    @Override\r\n    public List&lt;P_OUT&gt; toList() {\r\n        return SharedSecrets.getJavaUtilCollectionAccess()\r\n        .listFromTrustedArrayNullsAllowed(this.toArray());\r\n    }\r\n```\r\n\r\n&#39;trusted array&#39; here refers to the notion that the array passed to it is guaranteed not going to change out from under you. There is no way the compiler can enforce that guarantee, but arraylist&#39;s (and indeed, all non-broken collections, given that the javadoc of `j.u.Collection` demands it!) `toArray()` makes new arrays so it&#39;s safe to do that, and this is far more efficient (avoids a bunch of needless copies).\r\n","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77474199#77474199","title":"Is it necessary to copy a list to be safe?","body":"<h2>It has a purpose</h2>\n<blockquote>\n<p>I'm wondering why the list returned by Arrays.asList needs to be copied to a new ArrayList. Would it not be sufficient to just return the following?</p>\n</blockquote>\n<p>Which <code>.toArray()</code> are we talking about? If we're talking about the one from <code>j.u.Collection</code>, you're right: The javadoc of that <code>toArray()</code> method <em>guarantees</em> that it is a newly allocated array, hence, no need to make a defensive copy. However, that's not the <code>toArray()</code> involved here: We're talking about <code>j.u.s.Stream</code>'s <code>.toArray()</code>. Its javadoc is a lot shorter:</p>\n<pre><code>    /**\n     * Returns an array containing the elements of this stream.\n     *\n     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal\n     * operation&lt;/a&gt;.\n     *\n     * @return an array, whose {@linkplain Class#getComponentType runtime component\n     * type} is {@code Object}, containing the elements of this stream\n     */\n</code></pre>\n<p>Unlike <code>j.u.Collection toArray()</code>, this javadoc makes no notes either way about the nature of that array. Hence, evidently, the default impl in the <code>Stream</code> javadoc does not presume the array is necessarily 'safe' ('safe' in the sense: Will not later be modified).</p>\n<p>I think you know, but just to be crystal clear:</p>\n<p><code>Arrays.asList</code> is almost always a mistake. It's a worst-of-both-worlds list: It creates a light wrapper around the array you pass to it. So, <code>set()</code> works (because <code>foo[x] = value;</code> is possible and indeed, is how that is implemented), but <code>.add()</code> doesn't (because you can't change the size of an array). The list is not immutable (i.e. if passing it to code outside of your direct control you need to extensively document, or, make a defensive copy), but also not a fully featured list. Use <code>List.of</code> instead, which makes fully immutable lists - lists you can pass around to whomever you like without worrying about losing control of integrity.</p>\n<p>EDIT: And to explain why its <code>Collections.unmodifiableList(new ArrayList&lt;...</code>) instead of <code>List.copyOf</code> - The immutable lists that those static methods on <code>List</code> make throw NPEs when <code>null</code> is in there, but streams can have <code>null</code>, so you can't use that. This edit brought to you by a comment from @Rob Spoor :)</p>\n<h2>This is not as big an issue as you think, though</h2>\n<p>Note that the code you found is merely the default implementation - any particular implementation of stream is free to come up with a better way to do this. Just about every implementation you are bound to run into overrides the definition. For example, if you call an arraylist's <code>stream()</code>, you end up with this implementation instead, which is from streamops and is the same code path used by all the collections in the core libs. Hence, the actual code you end up using, is this:</p>\n<pre><code>    @Override\n    public List&lt;P_OUT&gt; toList() {\n        return SharedSecrets.getJavaUtilCollectionAccess()\n        .listFromTrustedArrayNullsAllowed(this.toArray());\n    }\n</code></pre>\n<p>'trusted array' here refers to the notion that the array passed to it is guaranteed not going to change out from under you. There is no way the compiler can enforce that guarantee, but arraylist's (and indeed, all non-broken collections, given that the javadoc of <code>j.u.Collection</code> demands it!) <code>toArray()</code> makes new arrays so it's safe to do that, and this is far more efficient (avoids a bunch of needless copies).</p>\n"},{"comment_count":0,"score":2,"last_activity_date":1699890065,"creation_date":1699890065,"answer_id":77475089,"question_id":77473755,"body_markdown":"## When talking about **_safe_**, we usually refer to whether the object is [immutable][1]\r\n\r\n- `unmodifiableList` -&gt; **unmodifiable** here only guarantee caller can not change the state of wrapped list, and change of source will still be reflected in the wrapped list.  \r\n- `new ArrayList&lt;&gt;` -&gt; **defensive copy** means modifying source will not change the state of the copy and vice versa.\r\n- **unmodifiable** + **defensive copy** -&gt; **immutable**, you can assume the list always hold the same list of object reference.\r\n\r\n## Concrete example to demonstrate the difference\r\n\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\npublic class UnmodifiableListCopy {\r\n    public static void main(String[] args) {\r\n        String[] source = new String[]{&quot;dummy&quot;};\r\n        List&lt;String&gt; unmodifiable = unmodifiableListWithoutCopy(source);\r\n        List&lt;String&gt; immutable = unmodifiableListWithCopy(source);\r\n        System.out.println(&quot;unmodifiable:&quot; + unmodifiable);\r\n        System.out.println(&quot;immutable:&quot; + immutable);\r\n        source[0] = &quot;modified&quot;;\r\n        System.out.println(&quot;--- change source ---&quot;);\r\n        System.out.println(&quot;unmodifiable:&quot; + unmodifiable);\r\n        System.out.println(&quot;immutable:&quot; + immutable);\r\n    }\r\n\r\n    private static &lt;T&gt; List&lt;T&gt; unmodifiableListWithoutCopy(T[] arr) {\r\n        return Collections.unmodifiableList(Arrays.asList(arr));\r\n    }\r\n\r\n    private static &lt;T&gt; List&lt;T&gt; unmodifiableListWithCopy(T[] arr) {\r\n        return Collections.unmodifiableList(new ArrayList&lt;&gt;(Arrays.asList(arr)));\r\n    }\r\n}\r\n```\r\nYou should see below when you run the code. \r\n```\r\nunmodifiable:[dummy]\r\nimmutable:[dummy]\r\n--- change source ---\r\nunmodifiable:[modified]\r\nimmutable:[dummy]\r\n```\r\n\r\nReference\r\n- https://stackoverflow.com/q/8892350/7928721\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe/77475089#77475089","title":"Is it necessary to copy a list to be safe?","body":"<h2>When talking about <strong><em>safe</em></strong>, we usually refer to whether the object is <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html\" rel=\"nofollow noreferrer\">immutable</a></h2>\n<ul>\n<li><code>unmodifiableList</code> -&gt; <strong>unmodifiable</strong> here only guarantee caller can not change the state of wrapped list, and change of source will still be reflected in the wrapped list.</li>\n<li><code>new ArrayList&lt;&gt;</code> -&gt; <strong>defensive copy</strong> means modifying source will not change the state of the copy and vice versa.</li>\n<li><strong>unmodifiable</strong> + <strong>defensive copy</strong> -&gt; <strong>immutable</strong>, you can assume the list always hold the same list of object reference.</li>\n</ul>\n<h2>Concrete example to demonstrate the difference</h2>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class UnmodifiableListCopy {\n    public static void main(String[] args) {\n        String[] source = new String[]{&quot;dummy&quot;};\n        List&lt;String&gt; unmodifiable = unmodifiableListWithoutCopy(source);\n        List&lt;String&gt; immutable = unmodifiableListWithCopy(source);\n        System.out.println(&quot;unmodifiable:&quot; + unmodifiable);\n        System.out.println(&quot;immutable:&quot; + immutable);\n        source[0] = &quot;modified&quot;;\n        System.out.println(&quot;--- change source ---&quot;);\n        System.out.println(&quot;unmodifiable:&quot; + unmodifiable);\n        System.out.println(&quot;immutable:&quot; + immutable);\n    }\n\n    private static &lt;T&gt; List&lt;T&gt; unmodifiableListWithoutCopy(T[] arr) {\n        return Collections.unmodifiableList(Arrays.asList(arr));\n    }\n\n    private static &lt;T&gt; List&lt;T&gt; unmodifiableListWithCopy(T[] arr) {\n        return Collections.unmodifiableList(new ArrayList&lt;&gt;(Arrays.asList(arr)));\n    }\n}\n</code></pre>\n<p>You should see below when you run the code.</p>\n<pre><code>unmodifiable:[dummy]\nimmutable:[dummy]\n--- change source ---\nunmodifiable:[modified]\nimmutable:[dummy]\n</code></pre>\n<p>Reference</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/q/8892350/7928721\">Immutable vs Unmodifiable collection</a></li>\n</ul>\n"}],"comment_count":2,"is_answered":true,"view_count":223,"answer_count":5,"score":3,"last_activity_date":1702463606,"creation_date":1699876965,"last_edit_date":1699935623,"question_id":77473755,"body_markdown":"The implementation (and documentation) of [Stream.toList][1] is like this:\r\n\r\n```java\r\nCollections.unmodifiableList(new ArrayList&lt;&gt;(Arrays.asList(this.toArray())))\r\n```\r\n\r\nI&#39;m wondering why the list returned by `Arrays.asList` needs to be copied to a new `ArrayList`. Would it not be sufficient to just return the following?\r\n\r\n```java\r\nCollections.unmodifiableList(Arrays.asList(this.toArray()))\r\n```\r\n\r\nI would like to know, if I write a method that returns a list that it creates like this, would there be any issues if I didn&#39;t bother to make a defensive copy of it?\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#toList()","link":"https://stackoverflow.com/questions/77473755/is-it-necessary-to-copy-a-list-to-be-safe","title":"Is it necessary to copy a list to be safe?","body":"<p>The implementation (and documentation) of <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#toList()\" rel=\"nofollow noreferrer\">Stream.toList</a> is like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Collections.unmodifiableList(new ArrayList&lt;&gt;(Arrays.asList(this.toArray())))\n</code></pre>\n<p>I'm wondering why the list returned by <code>Arrays.asList</code> needs to be copied to a new <code>ArrayList</code>. Would it not be sufficient to just return the following?</p>\n<pre class=\"lang-java prettyprint-override\"><code>Collections.unmodifiableList(Arrays.asList(this.toArray()))\n</code></pre>\n<p>I would like to know, if I write a method that returns a list that it creates like this, would there be any issues if I didn't bother to make a defensive copy of it?</p>\n"},{"tags":["java","android","code-analysis","runtime-environment"],"comments":[{"score":1,"post_type":"question","creation_date":1678363561,"post_id":75684213,"comment_id":133519827,"body_markdown":"&quot;the ART: what version of the JVM does it uses&quot; -- it does not use any version of the JVM. ART is its own runtime. &quot;a simple mapping from each android OS version to a version of Java&quot; -- what do you mean by &quot;a version of Java&quot;?","link":"https://stackoverflow.com/questions/75684213/how-to-determine-java-version-per-android-os-version#comment133519827_75684213","body":"&quot;the ART: what version of the JVM does it uses&quot; -- it does not use any version of the JVM. ART is its own runtime. &quot;a simple mapping from each android OS version to a version of Java&quot; -- what do you mean by &quot;a version of Java&quot;?"},{"score":0,"post_type":"question","creation_date":1678363969,"post_id":75684213,"comment_id":133519954,"body_markdown":"Fair point. Better question could be, at its core(hence I mentioned ART), what version of Java is each version of Android shipped with ?","link":"https://stackoverflow.com/questions/75684213/how-to-determine-java-version-per-android-os-version#comment133519954_75684213","body":"Fair point. Better question could be, at its core(hence I mentioned ART), what version of Java is each version of Android shipped with ?"},{"score":0,"post_type":"question","creation_date":1678367733,"post_id":75684213,"comment_id":133521138,"body_markdown":"Again: what do you mean by &quot;version of Java&quot;? Please be very specific about what you mean here. A VM is not the same as a bytecode format, neither of which are the same as a class library, etc.","link":"https://stackoverflow.com/questions/75684213/how-to-determine-java-version-per-android-os-version#comment133521138_75684213","body":"Again: what do you mean by &quot;version of Java&quot;? Please be very specific about what you mean here. A VM is not the same as a bytecode format, neither of which are the same as a class library, etc."},{"score":0,"post_type":"question","creation_date":1678370264,"post_id":75684213,"comment_id":133521966,"body_markdown":"Ok. I try to know what version of the java runtime classes (e.g. java.lang.String) is used and compiled. From which jdk are they taken from (6,7,8,9,11, a mix) depending on the OS version. (thx for helping me being more precise btw)","link":"https://stackoverflow.com/questions/75684213/how-to-determine-java-version-per-android-os-version#comment133521966_75684213","body":"Ok. I try to know what version of the java runtime classes (e.g. java.lang.String) is used and compiled. From which jdk are they taken from (6,7,8,9,11, a mix) depending on the OS version. (thx for helping me being more precise btw)"},{"score":0,"post_type":"question","creation_date":1688571406,"post_id":75684213,"comment_id":135092093,"body_markdown":"Check out my answer [here](https://stackoverflow.com/a/76621845/6396174)!","link":"https://stackoverflow.com/questions/75684213/how-to-determine-java-version-per-android-os-version#comment135092093_75684213","body":"Check out my answer <a href=\"https://stackoverflow.com/a/76621845/6396174\">here</a>!"}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1702461503,"creation_date":1702461503,"answer_id":77652583,"question_id":75684213,"body_markdown":"Thanks all for your help.\r\n\r\nTo whomever might be interested, I analysed the openjdk java classes in each release version of libcore, from Android 7 to 13.\r\nI compared to which version of openJDK each class is closer to (post android dev team modifications).\r\n\r\nThe results are published in this article (repository link in the article):\r\nhttps://www.abartel.net/static/p/secdev2023-AndroidJCL.pdf","link":"https://stackoverflow.com/questions/75684213/how-to-determine-java-version-per-android-os-version/77652583#77652583","title":"How to determine Java Version per Android OS version","body":"<p>Thanks all for your help.</p>\n<p>To whomever might be interested, I analysed the openjdk java classes in each release version of libcore, from Android 7 to 13.\nI compared to which version of openJDK each class is closer to (post android dev team modifications).</p>\n<p>The results are published in this article (repository link in the article):\n<a href=\"https://www.abartel.net/static/p/secdev2023-AndroidJCL.pdf\" rel=\"nofollow noreferrer\">https://www.abartel.net/static/p/secdev2023-AndroidJCL.pdf</a></p>\n"}],"comment_count":5,"is_answered":true,"view_count":119,"answer_count":1,"score":0,"last_activity_date":1702461503,"creation_date":1678362631,"question_id":75684213,"body_markdown":"I was looking (hoping) for a simple mapping from each android OS version to a version of Java.\r\n\r\nMore specifically. I am focusing on the Android OS side (not the application side), the ART: what version of the JVM does it uses.\r\n\r\n\r\nI still have some hope due to source code diving seems to relate it to the java supported by dx (I guess now d8 and r8), the dex compiler.\r\n\r\nIn libcore/libart/src/main/java/java/lang/AndroidHardcodedSystemProperties.java:\r\n\r\n```\r\nfinal static String[][] STATIC_PROPERTIES = {\r\n// None of these four are meaningful on Android, but these keys are guaranteed\r\n// to be present for System.getProperty. For java.class.version, we use the maximum\r\n// class file version that dx currently supports.\r\n{ &quot;java.class.version&quot;, &quot;50.0&quot; },\r\n{ &quot;java.version&quot;, JAVA_VERSION },\r\n```\r\nBut the android developer blog may rather imply the library of java used is *ad hoc*/*custom*\r\n([blogpost](https://android-developers.googleblog.com/2017/04/java-8-language-features-support-update.html)) with a mix of versions:\r\nFirst openjdk 1.7 with *desugared* features of openjdk 1.8\r\nNow more like 8 ([but not all features](https://developer.android.com/studio/write/java8-support)) with *desugared* features of Java 8+. \r\n","link":"https://stackoverflow.com/questions/75684213/how-to-determine-java-version-per-android-os-version","title":"How to determine Java Version per Android OS version","body":"<p>I was looking (hoping) for a simple mapping from each android OS version to a version of Java.</p>\n<p>More specifically. I am focusing on the Android OS side (not the application side), the ART: what version of the JVM does it uses.</p>\n<p>I still have some hope due to source code diving seems to relate it to the java supported by dx (I guess now d8 and r8), the dex compiler.</p>\n<p>In libcore/libart/src/main/java/java/lang/AndroidHardcodedSystemProperties.java:</p>\n<pre><code>final static String[][] STATIC_PROPERTIES = {\n// None of these four are meaningful on Android, but these keys are guaranteed\n// to be present for System.getProperty. For java.class.version, we use the maximum\n// class file version that dx currently supports.\n{ &quot;java.class.version&quot;, &quot;50.0&quot; },\n{ &quot;java.version&quot;, JAVA_VERSION },\n</code></pre>\n<p>But the android developer blog may rather imply the library of java used is <em>ad hoc</em>/<em>custom</em>\n(<a href=\"https://android-developers.googleblog.com/2017/04/java-8-language-features-support-update.html\" rel=\"nofollow noreferrer\">blogpost</a>) with a mix of versions:\nFirst openjdk 1.7 with <em>desugared</em> features of openjdk 1.8\nNow more like 8 (<a href=\"https://developer.android.com/studio/write/java8-support\" rel=\"nofollow noreferrer\">but not all features</a>) with <em>desugared</em> features of Java 8+.</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa","spring-boot-actuator"],"comments":[{"score":0,"post_type":"question","creation_date":1677254871,"post_id":75558259,"comment_id":133307685,"body_markdown":"I think the property should have value: `spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver`","link":"https://stackoverflow.com/questions/75558259/org-springframework-beans-factory-unsatisfieddependencyexception-message-error#comment133307685_75558259","body":"I think the property should have value: <code>spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</code>"},{"score":0,"post_type":"question","creation_date":1677259368,"post_id":75558259,"comment_id":133308922,"body_markdown":"I tried this, but it didn&#39;t work, i think theres is no need of writing cj. as it says the new driver class is automatically registered via SPI","link":"https://stackoverflow.com/questions/75558259/org-springframework-beans-factory-unsatisfieddependencyexception-message-error#comment133308922_75558259","body":"I tried this, but it didn&#39;t work, i think theres is no need of writing cj. as it says the new driver class is automatically registered via SPI"},{"score":0,"post_type":"question","creation_date":1677259433,"post_id":75558259,"comment_id":133308935,"body_markdown":"error occurs after i add actuator dependency.","link":"https://stackoverflow.com/questions/75558259/org-springframework-beans-factory-unsatisfieddependencyexception-message-error#comment133308935_75558259","body":"error occurs after i add actuator dependency."}],"answers":[{"comment_count":0,"score":1,"last_activity_date":1681054926,"creation_date":1681054926,"answer_id":75971445,"question_id":75558259,"body_markdown":"I deleted the following code:\r\n\r\n    &lt;dependency&gt;\r\n\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nin dependencies in maven file (pom.xml) Worked for me.\r\n\r\n","link":"https://stackoverflow.com/questions/75558259/org-springframework-beans-factory-unsatisfieddependencyexception-message-error/75971445#75971445","title":"org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name &#39;webMvcMetricsFilter&#39; defined in class","body":"<p>I deleted the following code:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>in dependencies in maven file (pom.xml) Worked for me.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1702460008,"creation_date":1702460008,"answer_id":77652414,"question_id":75558259,"body_markdown":"I was having the `spring-data jpa dependency` as a transient dependency. I resolved this problem by excluding the `jpa depndency`.\r\n\r\nIf you are not trying to connect your application to any database, then this will work.","link":"https://stackoverflow.com/questions/75558259/org-springframework-beans-factory-unsatisfieddependencyexception-message-error/77652414#77652414","title":"org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name &#39;webMvcMetricsFilter&#39; defined in class","body":"<p>I was having the <code>spring-data jpa dependency</code> as a transient dependency. I resolved this problem by excluding the <code>jpa depndency</code>.</p>\n<p>If you are not trying to connect your application to any database, then this will work.</p>\n"}],"comment_count":3,"is_answered":true,"view_count":9122,"answer_count":2,"score":1,"last_activity_date":1702460008,"creation_date":1677251834,"last_edit_date":1677254940,"question_id":75558259,"body_markdown":"Error in console:\r\n\r\n    2023-02-24 09:37:19.082 ERROR 41612 --- [  restartedMain] o.s.b.web.embedded.tomcat.TomcatStarter  : Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name &#39;webMvcMetricsFilter&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/web/servlet/WebMvcMetricsAutoConfiguration.class]: Unsatisfied dependency expressed through method &#39;webMvcMetricsFilter&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;simpleMeterRegistry&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/export/simple/SimpleMetricsExportAutoConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dataSourcePoolMetadataMeterBinder&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/jdbc/DataSourcePoolMetricsAutoConfiguration$DataSourcePoolMetadataMetricsConfiguration.class]: Unsatisfied dependency expressed through method &#39;dataSourcePoolMetadataMeterBinder&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n    2023-02-24 09:37:19.349  INFO 41612 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n    2023-02-24 09:37:19.705  WARN 41612 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\r\n    2023-02-24 09:37:19.837  INFO 41612 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \r\n    \r\n    Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n    2023-02-24 09:37:19.970 ERROR 41612 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n    \r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n\r\nDescription:\r\n\r\n    Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.\r\n\r\nReason: *Failed to determine a suitable driver class*\r\n\r\n\r\nAction:\r\n\r\nConsider the following:\r\n\t\r\n\r\n    If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\r\n    If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).\r\n\r\nPOM.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.8&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.car&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;car&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;car-demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-actuator --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.7.8&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\napplication.properties\r\n\r\n```\r\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\nspring.datasource.url=jdbc:mysql://127.0.0.1:3306/cardb\r\nspring.datasource.username=root\r\nspring.datasource.password=root\r\nspring.datasource.tomcat.max-wait=20000\r\nspring.datasource.tomcat.max-active=50\r\nspring.datasource.tomcat.max-idle=20\r\nspring.datasource.tomcat.min-idle=15\r\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQLDialect\r\nspring.jpa.properties.hibernate.id.new_generator_mappings = false\r\nspring.jpa.properties.hibernate.format_sql = true\r\nlogging.level.org.hibernate.SQL=DEBUG\r\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\r\n```\r\n\r\n\r\n\r\n\r\nmain function\r\napplication.java\r\n```\r\npackage com.car;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class CarDemoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(CarDemoApplication.class, args);\r\n\t\tSystem.out.println(&quot;hello from car&quot;);\r\n\t}\r\n}\r\n```\r\n\r\nI tried removing some of  the dependencies, but it didnt worked for me [this solution](https://stackoverflow.com/questions/60023762/zipkin-error-error-creating-bean-with-name-webmvcmetricsfilter-defined-in-clas).","link":"https://stackoverflow.com/questions/75558259/org-springframework-beans-factory-unsatisfieddependencyexception-message-error","title":"org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name &#39;webMvcMetricsFilter&#39; defined in class","body":"<p>Error in console:</p>\n<pre><code>2023-02-24 09:37:19.082 ERROR 41612 --- [  restartedMain] o.s.b.web.embedded.tomcat.TomcatStarter  : Error starting Tomcat context. Exception: org.springframework.beans.factory.UnsatisfiedDependencyException. Message: Error creating bean with name 'webMvcMetricsFilter' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/web/servlet/WebMvcMetricsAutoConfiguration.class]: Unsatisfied dependency expressed through method 'webMvcMetricsFilter' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'simpleMeterRegistry' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/export/simple/SimpleMetricsExportAutoConfiguration.class]: Initialization of bean failed; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourcePoolMetadataMeterBinder' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/jdbc/DataSourcePoolMetricsAutoConfiguration$DataSourcePoolMetadataMetricsConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourcePoolMetadataMeterBinder' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n2023-02-24 09:37:19.349  INFO 41612 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2023-02-24 09:37:19.705  WARN 41612 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\n2023-02-24 09:37:19.837  INFO 41612 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2023-02-24 09:37:19.970 ERROR 41612 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n</code></pre>\n<p>Description:</p>\n<pre><code>Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.\n</code></pre>\n<p>Reason: <em>Failed to determine a suitable driver class</em></p>\n<p>Action:</p>\n<p>Consider the following:</p>\n<pre><code>If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\nIf you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).\n</code></pre>\n<p>POM.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.8&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.car&lt;/groupId&gt;\n    &lt;artifactId&gt;car&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;car-demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-actuator --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n            &lt;version&gt;2.7.8&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>application.properties</p>\n<pre><code>spring.datasource.driver-class-name=com.mysql.jdbc.Driver\nspring.datasource.url=jdbc:mysql://127.0.0.1:3306/cardb\nspring.datasource.username=root\nspring.datasource.password=root\nspring.datasource.tomcat.max-wait=20000\nspring.datasource.tomcat.max-active=50\nspring.datasource.tomcat.max-idle=20\nspring.datasource.tomcat.min-idle=15\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQLDialect\nspring.jpa.properties.hibernate.id.new_generator_mappings = false\nspring.jpa.properties.hibernate.format_sql = true\nlogging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\n</code></pre>\n<p>main function\napplication.java</p>\n<pre><code>package com.car;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class CarDemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(CarDemoApplication.class, args);\n        System.out.println(&quot;hello from car&quot;);\n    }\n}\n</code></pre>\n<p>I tried removing some of  the dependencies, but it didnt worked for me <a href=\"https://stackoverflow.com/questions/60023762/zipkin-error-error-creating-bean-with-name-webmvcmetricsfilter-defined-in-clas\">this solution</a>.</p>\n"},{"tags":["java","xsd","numberformatexception","xjc"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702457097,"last_edit_date":1702457097,"creation_date":1702324679,"answer_id":77642107,"question_id":77141627,"body_markdown":"While building the UI project, we generated Java classes from the XML schema, expecting it to map the XML type to the corresponding Java type correctly. However, in this case, it seems to generate incorrect code that tries to parse the XML value as an integer rather than a decimal, resulting in an error and failing to generate the correct annotations.To Fix the Issue\r\n\r\nThe `XJsr303Annotations` option allows for generating Java classes with annotations.\r\n\r\nto add the correct annotation `@DecimalMax` And `@DecimalMin` for `maxExculsive` and `minExculsive` we have to add the `-XJsr303Annotations:JSR_349=true`\r\n\r\n`arg(value: &quot;-XJsr303Annotations:JSR_349=true&quot;)`","link":"https://stackoverflow.com/questions/77141627/issue-with-jaxb-and-xjc-parsing-xsdecimal-with-minexclusive-constraint-when-bu/77642107#77642107","title":"Issue with JAXB and xjc: Parsing xs:decimal with minExclusive constraint when building the project","body":"<p>While building the UI project, we generated Java classes from the XML schema, expecting it to map the XML type to the corresponding Java type correctly. However, in this case, it seems to generate incorrect code that tries to parse the XML value as an integer rather than a decimal, resulting in an error and failing to generate the correct annotations.To Fix the Issue</p>\n<p>The <code>XJsr303Annotations</code> option allows for generating Java classes with annotations.</p>\n<p>to add the correct annotation <code>@DecimalMax</code> And <code>@DecimalMin</code> for <code>maxExculsive</code> and <code>minExculsive</code> we have to add the <code>-XJsr303Annotations:JSR_349=true</code></p>\n<p><code>arg(value: &quot;-XJsr303Annotations:JSR_349=true&quot;)</code></p>\n"}],"comment_count":0,"is_answered":true,"view_count":40,"answer_count":1,"score":0,"last_activity_date":1702457097,"creation_date":1695206616,"last_edit_date":1699722922,"question_id":77141627,"body_markdown":"I am facing an issue with JAXB and xjc while generating Java code from an XML schema (XSD) that includes an xs:decimal element with a minExclusive constraint. Despite specifying the type as xs:decimal in my XSD, xjc is generating code that attempts to parse the values as integers, leading to a NumberFormatException.\r\n\r\nHere&#39;s a simplified version of my XSD:\r\n\r\n```\r\n&lt;xs:element name=&quot;test&quot;&gt;\r\n    &lt;xs:simpleType&gt;\r\n        &lt;xs:restriction base=&quot;xs:decimal&quot;&gt;\r\n            &lt;xs:minExclusive value=&quot;1.5&quot;/&gt;\r\n        &lt;/xs:restriction&gt;\r\n    &lt;/xs:simpleType&gt;\r\n&lt;/xs:element&gt;\r\n```\r\n\r\n**Code that is being generating**\r\n\r\n```\r\n \r\n    @XmlElement(required = true)\r\n\r\n    @NotNull\r\n\r\n    @DecimalMin &lt;- error occurs on this line\r\n\r\n    protected BigDecimal test\r\n```\r\n\r\n**ERROR**\r\n\r\n&gt; Task :command-xsd:src_frm_xsd  \r\n&gt; \\[ant:xjc\\] java.lang.NumberFormatException: For input string: &quot;1.5&quot;  \r\n&gt; \\[ant:xjc\\]       at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n&gt; \\[ant:xjc\\]       at java.lang.Integer.parseInt(Integer.java:580)  \r\n&gt; \\[ant:xjc\\]       at java.math.BigInteger.\\&lt;init\\&gt;(BigInteger.java:472)\r\n&gt; \\[ant:xjc\\]       at java.math.BigInteger.\\&lt;init\\&gt;(BigInteger.java:608)\r\n&gt; \\[ant:xjc\\]       at com.sun.tools.xjc.addon.krasa.JaxbValidationsPlugins.processType(JaxbValidationsPlugins.java:324)\r\n&gt; \\[ant:xjc\\]       at com.sun.tools.xjc.addon.krasa.JaxbValidationsPlugins.processElement(JaxbValidationsPlugins.java:219)\r\n&gt; \\[ant:xjc\\]       at com.sun.tools.xjc.addon.krasa.JaxbValidationsPlugins.processElement(JaxbValidationsPlugins.java:203)\r\n&gt; \\[ant:xjc\\]       at com.sun.tools.xjc.addon.krasa.JaxbValidationsPlugins.run(JaxbValidationsPlugins.java:152)\r\n&gt; \\[ant:xjc\\]       at com.sun.tools.xjc.model.Model.generateCode(Model.java:292)\r\n&gt; \\[ant:xjc\\]       at com.sun.tools.xjc.XJC2Task.\\_doXJC(XJC2Task.java:524)\r\n&gt; \\[ant:xjc\\]       at com.sun.tools.xjc.XJC2Task.doXJC(XJC2Task.java:457)\r\n&gt; \\[ant:xjc\\]       at com.sun.tools.xjc.XJC2Task.execute(XJC2Task.java:380)\r\n&gt; \\[ant:xjc\\]       at com.sun.istack.tools.ProtectedTask.execute(ProtectedTask.java:103)\r\n&gt; \\[ant:xjc\\]       at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)\r\n&gt; \\[ant:xjc\\]       at sun.reflect.GeneratedMethodAccessor88.invoke(Unknown Source)\r\n&gt; \\[ant:xjc\\]       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \\[ant:xjc\\]       at java.lang.reflect.Method.invoke(Method.java:498)\r\n&gt; \\[ant:xjc\\]       at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:99)\r\n&gt; \\[ant:xjc\\]       at groovy.util.AntBuilder.performTask(AntBuilder.java:333)\r\n&gt; \\[ant:xjc\\]       at groovy.util.AntBuilder.nodeCompleted(AntBuilder.java:278)\r\n&gt; \\[ant:xjc\\]       at org.gradle.api.internal.project.ant.BasicAntBuilder.nodeCompleted(BasicAntBuilder.java:80)\r\n&gt; \\[ant:xjc\\]       at groovy.util.BuilderSupport.doInvokeMethod(BuilderSupport.java:151)\r\n&gt; \\[ant:xjc\\]       at groovy.util.AntBuilder.doInvokeMethod(AntBuilder.java:213)\r\n&gt; \\[ant:xjc\\]       at org.gradle.api.internal.project.ant.BasicAntBuilder.doInvokeMethod(BasicAntBuilder.java:107)\r\n&gt; \\[ant:xjc\\]       at groovy.util.BuilderSupport.invokeMethod(BuilderSupport.java:64)\r\n&gt; \\[ant:xjc\\]       at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:43)\r\n&gt; \\[ant:xjc\\]       at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:135)\r\n\r\nerror: annotation @DecimalMin\r\n\r\nis missing a default value for the element &#39;value&#39;\r\n\r\n    @DecimalMin\r\n    \r\n    ^\r\n\r\nAnd the generated code is trying to parse the values as integers, resulting in a NumberFormatException.\r\n\r\nI&#39;ve tried adding custom JAXB bindings, but the issue persists. How can I ensure that xjc correctly generates code that handles xs:decimal with minExclusive as a BigDecimal and not as an integer?\r\n\r\nAny insights or suggestions would be greatly appreciated. Thank you!","link":"https://stackoverflow.com/questions/77141627/issue-with-jaxb-and-xjc-parsing-xsdecimal-with-minexclusive-constraint-when-bu","title":"Issue with JAXB and xjc: Parsing xs:decimal with minExclusive constraint when building the project","body":"<p>I am facing an issue with JAXB and xjc while generating Java code from an XML schema (XSD) that includes an xs:decimal element with a minExclusive constraint. Despite specifying the type as xs:decimal in my XSD, xjc is generating code that attempts to parse the values as integers, leading to a NumberFormatException.</p>\n<p>Here's a simplified version of my XSD:</p>\n<pre><code>&lt;xs:element name=&quot;test&quot;&gt;\n    &lt;xs:simpleType&gt;\n        &lt;xs:restriction base=&quot;xs:decimal&quot;&gt;\n            &lt;xs:minExclusive value=&quot;1.5&quot;/&gt;\n        &lt;/xs:restriction&gt;\n    &lt;/xs:simpleType&gt;\n&lt;/xs:element&gt;\n</code></pre>\n<p><strong>Code that is being generating</strong></p>\n<pre><code> \n    @XmlElement(required = true)\n\n    @NotNull\n\n    @DecimalMin &lt;- error occurs on this line\n\n    protected BigDecimal test\n</code></pre>\n<p><strong>ERROR</strong></p>\n<blockquote>\n<p>Task :command-xsd:src_frm_xsd<br />\n[ant:xjc] java.lang.NumberFormatException: For input string: &quot;1.5&quot;<br />\n[ant:xjc]       at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\n[ant:xjc]       at java.lang.Integer.parseInt(Integer.java:580)<br />\n[ant:xjc]       at java.math.BigInteger.&lt;init&gt;(BigInteger.java:472)\n[ant:xjc]       at java.math.BigInteger.&lt;init&gt;(BigInteger.java:608)\n[ant:xjc]       at com.sun.tools.xjc.addon.krasa.JaxbValidationsPlugins.processType(JaxbValidationsPlugins.java:324)\n[ant:xjc]       at com.sun.tools.xjc.addon.krasa.JaxbValidationsPlugins.processElement(JaxbValidationsPlugins.java:219)\n[ant:xjc]       at com.sun.tools.xjc.addon.krasa.JaxbValidationsPlugins.processElement(JaxbValidationsPlugins.java:203)\n[ant:xjc]       at com.sun.tools.xjc.addon.krasa.JaxbValidationsPlugins.run(JaxbValidationsPlugins.java:152)\n[ant:xjc]       at com.sun.tools.xjc.model.Model.generateCode(Model.java:292)\n[ant:xjc]       at com.sun.tools.xjc.XJC2Task._doXJC(XJC2Task.java:524)\n[ant:xjc]       at com.sun.tools.xjc.XJC2Task.doXJC(XJC2Task.java:457)\n[ant:xjc]       at com.sun.tools.xjc.XJC2Task.execute(XJC2Task.java:380)\n[ant:xjc]       at com.sun.istack.tools.ProtectedTask.execute(ProtectedTask.java:103)\n[ant:xjc]       at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)\n[ant:xjc]       at sun.reflect.GeneratedMethodAccessor88.invoke(Unknown Source)\n[ant:xjc]       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n[ant:xjc]       at java.lang.reflect.Method.invoke(Method.java:498)\n[ant:xjc]       at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:99)\n[ant:xjc]       at groovy.util.AntBuilder.performTask(AntBuilder.java:333)\n[ant:xjc]       at groovy.util.AntBuilder.nodeCompleted(AntBuilder.java:278)\n[ant:xjc]       at org.gradle.api.internal.project.ant.BasicAntBuilder.nodeCompleted(BasicAntBuilder.java:80)\n[ant:xjc]       at groovy.util.BuilderSupport.doInvokeMethod(BuilderSupport.java:151)\n[ant:xjc]       at groovy.util.AntBuilder.doInvokeMethod(AntBuilder.java:213)\n[ant:xjc]       at org.gradle.api.internal.project.ant.BasicAntBuilder.doInvokeMethod(BasicAntBuilder.java:107)\n[ant:xjc]       at groovy.util.BuilderSupport.invokeMethod(BuilderSupport.java:64)\n[ant:xjc]       at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:43)\n[ant:xjc]       at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:135)</p>\n</blockquote>\n<p>error: annotation @DecimalMin</p>\n<p>is missing a default value for the element 'value'</p>\n<pre><code>@DecimalMin\n\n^\n</code></pre>\n<p>And the generated code is trying to parse the values as integers, resulting in a NumberFormatException.</p>\n<p>I've tried adding custom JAXB bindings, but the issue persists. How can I ensure that xjc correctly generates code that handles xs:decimal with minExclusive as a BigDecimal and not as an integer?</p>\n<p>Any insights or suggestions would be greatly appreciated. Thank you!</p>\n"},{"tags":["java","activiti","bpmn"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702446268,"creation_date":1702446268,"answer_id":77651331,"question_id":77098942,"body_markdown":"delete the deployment entry from database or give new name for every depolyment in application.properties file\r\nspring.activiti.deployment-name=nameofthedeployment","link":"https://stackoverflow.com/questions/77098942/activiti-processes-not-deploying/77651331#77651331","title":"Activiti Processes Not Deploying","body":"<p>delete the deployment entry from database or give new name for every depolyment in application.properties file\nspring.activiti.deployment-name=nameofthedeployment</p>\n"}],"comment_count":0,"is_answered":false,"view_count":47,"answer_count":1,"score":0,"last_activity_date":1702446268,"creation_date":1694622833,"last_edit_date":1694693218,"question_id":77098942,"body_markdown":"I&#39;m successfully using Activiti via the Spring Boot Starter for a while and am attempting to change from automatically deploying bpmn processes to manually doing it via Java. I basing this on a fairly simple example which is finding my process definitions and completing, but not creating a deployment with usable process definitions.\r\n\r\n    BpmnXMLConverter bpmnXMLConverter = new BpmnXMLConverter();\r\n    String processFolderPath = &quot;classpath:/processes/&quot;;\r\n    File processDirectory = resourceLoader.getResource(processFolderPath).getFile();\r\n    DeploymentBuilder builder = repositoryService.createDeployment();\r\n    if (processDirectory.exists()) { Arrays.stream(Objects.requireNonNull(processDirectory.list())).sequential()\r\n                .forEach(processDefFile -&gt; {\r\n                    try {\r\n                        String resource = processFolderPath + processDefFile;\r\n                        InputStream input = resourceLoader.getResource(resource).getInputStream();\r\n                        InputStreamSource streamSource = new InputStreamSource(input);\r\n                        BpmnModel model = bpmnXMLConverter.convertToBpmnModel(streamSource, true, false);\r\n                        String processDefName = processDefFile.substring(0, processDefFile.indexOf(&quot;.bpmn20.xml&quot;));\r\n                        builder.addBpmnModel(processDefName, model);\r\n                    } catch (IOException e) {\r\n                        log.error(e.getMessage(), e);\r\n                    }\r\n                });\r\n        } else {\r\n            log.warn(&quot;process directory not found&quot;);\r\n        }\r\n        builder.deploy();\r\n\r\nPreviously when I used auto deployment I would see records in the re_procdef table for each process and be able to query and use them. When I run the above code I only see records in the ge_bytearray table which contain the process xml in the BYTES_ field as a blob, but no deployed process.\r\n\r\nCan anyone see what I am doing wrong?","link":"https://stackoverflow.com/questions/77098942/activiti-processes-not-deploying","title":"Activiti Processes Not Deploying","body":"<p>I'm successfully using Activiti via the Spring Boot Starter for a while and am attempting to change from automatically deploying bpmn processes to manually doing it via Java. I basing this on a fairly simple example which is finding my process definitions and completing, but not creating a deployment with usable process definitions.</p>\n<pre><code>BpmnXMLConverter bpmnXMLConverter = new BpmnXMLConverter();\nString processFolderPath = &quot;classpath:/processes/&quot;;\nFile processDirectory = resourceLoader.getResource(processFolderPath).getFile();\nDeploymentBuilder builder = repositoryService.createDeployment();\nif (processDirectory.exists()) { Arrays.stream(Objects.requireNonNull(processDirectory.list())).sequential()\n            .forEach(processDefFile -&gt; {\n                try {\n                    String resource = processFolderPath + processDefFile;\n                    InputStream input = resourceLoader.getResource(resource).getInputStream();\n                    InputStreamSource streamSource = new InputStreamSource(input);\n                    BpmnModel model = bpmnXMLConverter.convertToBpmnModel(streamSource, true, false);\n                    String processDefName = processDefFile.substring(0, processDefFile.indexOf(&quot;.bpmn20.xml&quot;));\n                    builder.addBpmnModel(processDefName, model);\n                } catch (IOException e) {\n                    log.error(e.getMessage(), e);\n                }\n            });\n    } else {\n        log.warn(&quot;process directory not found&quot;);\n    }\n    builder.deploy();\n</code></pre>\n<p>Previously when I used auto deployment I would see records in the re_procdef table for each process and be able to query and use them. When I run the above code I only see records in the ge_bytearray table which contain the process xml in the BYTES_ field as a blob, but no deployed process.</p>\n<p>Can anyone see what I am doing wrong?</p>\n"},{"tags":["java","spring-boot","mongodb-replica-set"],"comment_count":0,"is_answered":false,"view_count":142,"answer_count":0,"score":0,"last_activity_date":1702417982,"creation_date":1699520971,"last_edit_date":1702417982,"question_id":77451817,"body_markdown":"I&#39;m facing an issue with my MongoDB setup on Kubernetes in a replica set configuration. I have 2 pods and an arbiter, and my Java SpringBoot application is interacting with MongoDB using Reactive Mongo Repository. The connection URL I&#39;m using is:\r\n\r\nmongodb://{{mongoURL}}/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;readPreference=primary\r\n\r\nHowever, I keep getting a MongoNotPrimaryException with the error message: &quot;Command failed with error 10107 (NotWritablePrimary): &#39;not primary&#39;.&quot;\r\n\r\nI&#39;d like to understand and resolve this problem. Any guidance or suggestions would be greatly appreciated. Thank you!\r\n\r\nWhat I&#39;ve Tried:\r\nI&#39;ve already attempted to diagnose and address this issue. Here&#39;s what I&#39;ve tried and the results:\r\n\r\nChecked MongoDB Configuration: I&#39;ve verified the MongoDB configuration for the replica set and the arbiter. Everything seems to be correctly set up in the Kubernetes cluster.\r\n\r\nApplication Code: I&#39;ve examined my Java SpringBoot application&#39;s code that interacts with MongoDB using Reactive Mongo Repository.\r\n\r\nActual Results:\r\nDespite these checks, I continue to encounter the MongoNotPrimaryException with the &quot;not primary&quot; error message when my application tries to write to MongoDB. It&#39;s unexpected as I&#39;m pointing to the primary in the connection string.\r\n\r\nAny insights or suggestions on how to resolve this issue would be greatly appreciated. Thank you!\r\n\r\nThese are logs in the mongo pod\r\n\r\n```\r\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.481+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:22943,   &quot;ctx&quot;:&quot;listener&quot;,&quot;msg&quot;:&quot;Connection accepted&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54236&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;87592666-c1a1-4d21-9f2d-9e992d8ad268&quot;}},&quot;connectionId&quot;:40918,&quot;connectionCount&quot;:32}}\r\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.481+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:22943,   &quot;ctx&quot;:&quot;listener&quot;,&quot;msg&quot;:&quot;Connection accepted&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54244&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;795de4a0-3d8b-4688-a046-e6e64330752f&quot;}},&quot;connectionId&quot;:40919,&quot;connectionCount&quot;:33}}\r\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.482+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:51800,   &quot;ctx&quot;:&quot;conn40918&quot;,&quot;msg&quot;:&quot;client metadata&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54236&quot;,&quot;client&quot;:&quot;conn40918&quot;,&quot;doc&quot;:{&quot;application&quot;:{&quot;name&quot;:&quot;mongosh 1.10.6&quot;},&quot;driver&quot;:{&quot;name&quot;:&quot;nodejs|mongosh&quot;,&quot;version&quot;:&quot;5.7.0|1.10.6&quot;},&quot;platform&quot;:&quot;Node.js v16.20.2, LE&quot;,&quot;os&quot;:{&quot;name&quot;:&quot;linux&quot;,&quot;architecture&quot;:&quot;x64&quot;,&quot;version&quot;:&quot;5.15.0-1041-azure&quot;,&quot;type&quot;:&quot;Linux&quot;}}}}\r\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.482+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:51800,   &quot;ctx&quot;:&quot;conn40919&quot;,&quot;msg&quot;:&quot;client metadata&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54244&quot;,&quot;client&quot;:&quot;conn40919&quot;,&quot;doc&quot;:{&quot;application&quot;:{&quot;name&quot;:&quot;mongosh 1.10.6&quot;},&quot;driver&quot;:{&quot;name&quot;:&quot;nodejs|mongosh&quot;,&quot;version&quot;:&quot;5.7.0|1.10.6&quot;},&quot;platform&quot;:&quot;Node.js v16.20.2, LE&quot;,&quot;os&quot;:{&quot;name&quot;:&quot;linux&quot;,&quot;architecture&quot;:&quot;x64&quot;,&quot;version&quot;:&quot;5.15.0-1041-azure&quot;,&quot;type&quot;:&quot;Linux&quot;}}}}\r\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.485+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:6788700, &quot;ctx&quot;:&quot;conn40918&quot;,&quot;msg&quot;:&quot;Received first command on ingress connection since session start or auth handshake&quot;,&quot;attr&quot;:{&quot;elapsedMillis&quot;:3}}\r\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.485+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:22943,   &quot;ctx&quot;:&quot;listener&quot;,&quot;msg&quot;:&quot;Connection accepted&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54252&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;f1419771-32a0-4760-9e68-6736d27f7a71&quot;}},&quot;connectionId&quot;:40920,&quot;connectionCount&quot;:34}}\r\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.489+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:51800,   &quot;ctx&quot;:&quot;conn40920&quot;,&quot;msg&quot;:&quot;client metadata&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54252&quot;,&quot;client&quot;:&quot;conn40920&quot;,&quot;doc&quot;:{&quot;application&quot;:{&quot;name&quot;:&quot;mongosh 1.10.6&quot;},&quot;driver&quot;:{&quot;name&quot;:&quot;nodejs|mongosh&quot;,&quot;version&quot;:&quot;5.7.0|1.10.6&quot;},&quot;platform&quot;:&quot;Node.js v16.20.2, LE&quot;,&quot;os&quot;:{&quot;name&quot;:&quot;linux&quot;,&quot;architecture&quot;:&quot;x64&quot;,&quot;version&quot;:&quot;5.15.0-1041-azure&quot;,&quot;type&quot;:&quot;Linux&quot;}}}}\r\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.499+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:6788700, &quot;ctx&quot;:&quot;conn40920&quot;,&quot;msg&quot;:&quot;Received first command on ingress connection since session start or auth handshake&quot;,&quot;attr&quot;:{&quot;elapsedMillis&quot;:10}}\r\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:49.503+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;-&quot;,        &quot;id&quot;:20883,   &quot;ctx&quot;:&quot;conn40917&quot;,&quot;msg&quot;:&quot;Interrupted operation as its client disconnected&quot;,&quot;attr&quot;:{&quot;opId&quot;:1375581}}\r\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:49.503+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:22944,   &quot;ctx&quot;:&quot;conn40920&quot;,&quot;msg&quot;:&quot;Connection ended&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54252&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;f1419771-32a0-4760-9e68-6736d27f7a71&quot;}},&quot;connectionId&quot;:40920,&quot;connectionCount&quot;:33}}\r\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:49.503+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:22944,   &quot;ctx&quot;:&quot;conn40918&quot;,&quot;msg&quot;:&quot;Connection ended&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54236&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;87592666-c1a1-4d21-9f2d-9e992d8ad268&quot;}},&quot;connectionId&quot;:40918,&quot;connectionCount&quot;:32}}\r\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:49.503+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:22944,   &quot;ctx&quot;:&quot;conn40919&quot;,&quot;msg&quot;:&quot;Connection ended&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54244&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;795de4a0-3d8b-4688-a046-e6e64330752f&quot;}},&quot;connectionId&quot;:40919,&quot;connectionCount&quot;:31}}\r\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:49.503+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:22944,   &quot;ctx&quot;:&quot;conn40917&quot;,&quot;msg&quot;:&quot;Connection ended&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54232&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;a571fb30-30ec-4a87-83e8-0b0ed0817385&quot;}},&quot;connectionId&quot;:40917,&quot;connectionCount&quot;:30}}\r\n```\r\n","link":"https://stackoverflow.com/questions/77451817/mongonotprimaryexception-command-failed-with-error-10107-notwritableprimary","title":"MongoNotPrimaryException: Command failed with error 10107 (NotWritablePrimary): &#39;not primary&#39; - MongoDB Replica Set - Reactive Mongo Repository","body":"<p>I'm facing an issue with my MongoDB setup on Kubernetes in a replica set configuration. I have 2 pods and an arbiter, and my Java SpringBoot application is interacting with MongoDB using Reactive Mongo Repository. The connection URL I'm using is:</p>\n<p>mongodb://{{mongoURL}}/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;readPreference=primary</p>\n<p>However, I keep getting a MongoNotPrimaryException with the error message: &quot;Command failed with error 10107 (NotWritablePrimary): 'not primary'.&quot;</p>\n<p>I'd like to understand and resolve this problem. Any guidance or suggestions would be greatly appreciated. Thank you!</p>\n<p>What I've Tried:\nI've already attempted to diagnose and address this issue. Here's what I've tried and the results:</p>\n<p>Checked MongoDB Configuration: I've verified the MongoDB configuration for the replica set and the arbiter. Everything seems to be correctly set up in the Kubernetes cluster.</p>\n<p>Application Code: I've examined my Java SpringBoot application's code that interacts with MongoDB using Reactive Mongo Repository.</p>\n<p>Actual Results:\nDespite these checks, I continue to encounter the MongoNotPrimaryException with the &quot;not primary&quot; error message when my application tries to write to MongoDB. It's unexpected as I'm pointing to the primary in the connection string.</p>\n<p>Any insights or suggestions on how to resolve this issue would be greatly appreciated. Thank you!</p>\n<p>These are logs in the mongo pod</p>\n<pre><code>{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.481+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:22943,   &quot;ctx&quot;:&quot;listener&quot;,&quot;msg&quot;:&quot;Connection accepted&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54236&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;87592666-c1a1-4d21-9f2d-9e992d8ad268&quot;}},&quot;connectionId&quot;:40918,&quot;connectionCount&quot;:32}}\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.481+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:22943,   &quot;ctx&quot;:&quot;listener&quot;,&quot;msg&quot;:&quot;Connection accepted&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54244&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;795de4a0-3d8b-4688-a046-e6e64330752f&quot;}},&quot;connectionId&quot;:40919,&quot;connectionCount&quot;:33}}\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.482+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:51800,   &quot;ctx&quot;:&quot;conn40918&quot;,&quot;msg&quot;:&quot;client metadata&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54236&quot;,&quot;client&quot;:&quot;conn40918&quot;,&quot;doc&quot;:{&quot;application&quot;:{&quot;name&quot;:&quot;mongosh 1.10.6&quot;},&quot;driver&quot;:{&quot;name&quot;:&quot;nodejs|mongosh&quot;,&quot;version&quot;:&quot;5.7.0|1.10.6&quot;},&quot;platform&quot;:&quot;Node.js v16.20.2, LE&quot;,&quot;os&quot;:{&quot;name&quot;:&quot;linux&quot;,&quot;architecture&quot;:&quot;x64&quot;,&quot;version&quot;:&quot;5.15.0-1041-azure&quot;,&quot;type&quot;:&quot;Linux&quot;}}}}\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.482+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:51800,   &quot;ctx&quot;:&quot;conn40919&quot;,&quot;msg&quot;:&quot;client metadata&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54244&quot;,&quot;client&quot;:&quot;conn40919&quot;,&quot;doc&quot;:{&quot;application&quot;:{&quot;name&quot;:&quot;mongosh 1.10.6&quot;},&quot;driver&quot;:{&quot;name&quot;:&quot;nodejs|mongosh&quot;,&quot;version&quot;:&quot;5.7.0|1.10.6&quot;},&quot;platform&quot;:&quot;Node.js v16.20.2, LE&quot;,&quot;os&quot;:{&quot;name&quot;:&quot;linux&quot;,&quot;architecture&quot;:&quot;x64&quot;,&quot;version&quot;:&quot;5.15.0-1041-azure&quot;,&quot;type&quot;:&quot;Linux&quot;}}}}\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.485+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:6788700, &quot;ctx&quot;:&quot;conn40918&quot;,&quot;msg&quot;:&quot;Received first command on ingress connection since session start or auth handshake&quot;,&quot;attr&quot;:{&quot;elapsedMillis&quot;:3}}\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.485+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:22943,   &quot;ctx&quot;:&quot;listener&quot;,&quot;msg&quot;:&quot;Connection accepted&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54252&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;f1419771-32a0-4760-9e68-6736d27f7a71&quot;}},&quot;connectionId&quot;:40920,&quot;connectionCount&quot;:34}}\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.489+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:51800,   &quot;ctx&quot;:&quot;conn40920&quot;,&quot;msg&quot;:&quot;client metadata&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54252&quot;,&quot;client&quot;:&quot;conn40920&quot;,&quot;doc&quot;:{&quot;application&quot;:{&quot;name&quot;:&quot;mongosh 1.10.6&quot;},&quot;driver&quot;:{&quot;name&quot;:&quot;nodejs|mongosh&quot;,&quot;version&quot;:&quot;5.7.0|1.10.6&quot;},&quot;platform&quot;:&quot;Node.js v16.20.2, LE&quot;,&quot;os&quot;:{&quot;name&quot;:&quot;linux&quot;,&quot;architecture&quot;:&quot;x64&quot;,&quot;version&quot;:&quot;5.15.0-1041-azure&quot;,&quot;type&quot;:&quot;Linux&quot;}}}}\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:48.499+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:6788700, &quot;ctx&quot;:&quot;conn40920&quot;,&quot;msg&quot;:&quot;Received first command on ingress connection since session start or auth handshake&quot;,&quot;attr&quot;:{&quot;elapsedMillis&quot;:10}}\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:49.503+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;-&quot;,        &quot;id&quot;:20883,   &quot;ctx&quot;:&quot;conn40917&quot;,&quot;msg&quot;:&quot;Interrupted operation as its client disconnected&quot;,&quot;attr&quot;:{&quot;opId&quot;:1375581}}\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:49.503+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:22944,   &quot;ctx&quot;:&quot;conn40920&quot;,&quot;msg&quot;:&quot;Connection ended&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54252&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;f1419771-32a0-4760-9e68-6736d27f7a71&quot;}},&quot;connectionId&quot;:40920,&quot;connectionCount&quot;:33}}\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:49.503+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:22944,   &quot;ctx&quot;:&quot;conn40918&quot;,&quot;msg&quot;:&quot;Connection ended&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54236&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;87592666-c1a1-4d21-9f2d-9e992d8ad268&quot;}},&quot;connectionId&quot;:40918,&quot;connectionCount&quot;:32}}\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:49.503+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:22944,   &quot;ctx&quot;:&quot;conn40919&quot;,&quot;msg&quot;:&quot;Connection ended&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54244&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;795de4a0-3d8b-4688-a046-e6e64330752f&quot;}},&quot;connectionId&quot;:40919,&quot;connectionCount&quot;:31}}\n{&quot;t&quot;:{&quot;$date&quot;:&quot;2023-11-09T09:05:49.503+00:00&quot;},&quot;s&quot;:&quot;I&quot;,  &quot;c&quot;:&quot;NETWORK&quot;,  &quot;id&quot;:22944,   &quot;ctx&quot;:&quot;conn40917&quot;,&quot;msg&quot;:&quot;Connection ended&quot;,&quot;attr&quot;:{&quot;remote&quot;:&quot;127.0.0.1:54232&quot;,&quot;uuid&quot;:{&quot;uuid&quot;:{&quot;$uuid&quot;:&quot;a571fb30-30ec-4a87-83e8-0b0ed0817385&quot;}},&quot;connectionId&quot;:40917,&quot;connectionCount&quot;:30}}\n</code></pre>\n"},{"tags":["java","arrays","string","loops"],"comments":[{"score":1,"post_type":"question","creation_date":1698718216,"post_id":77392724,"comment_id":136437941,"body_markdown":"Out of curiosity, why do you care? If you need to search or manipulate each character of the String as char, then what you&#39;re doing is fine. Your code always depends on the requirements of the job, so there&#39;s no &quot;best&quot; way. Resist the temptation to make unnecessary optimizations. If your code isn&#39;t doing what you need it to do in the way it needs to be done, then explore alternatives.","link":"https://stackoverflow.com/questions/77392724/which-loop-which-is-best-for-iterating-for-strings-in-java#comment136437941_77392724","body":"Out of curiosity, why do you care? If you need to search or manipulate each character of the String as char, then what you&#39;re doing is fine. Your code always depends on the requirements of the job, so there&#39;s no &quot;best&quot; way. Resist the temptation to make unnecessary optimizations. If your code isn&#39;t doing what you need it to do in the way it needs to be done, then explore alternatives."},{"score":0,"post_type":"question","creation_date":1698721498,"post_id":77392724,"comment_id":136438248,"body_markdown":"There&#39;s nothing wrong with your approach. It&#39;s been common in Java for decades, and is easily recognized and  understood. It may be there are circumstances that would make one of the alternatives better. But, since we don&#39;t know those circumstances, we couldn&#39;t say.","link":"https://stackoverflow.com/questions/77392724/which-loop-which-is-best-for-iterating-for-strings-in-java#comment136438248_77392724","body":"There&#39;s nothing wrong with your approach. It&#39;s been common in Java for decades, and is easily recognized and  understood. It may be there are circumstances that would make one of the alternatives better. But, since we don&#39;t know those circumstances, we couldn&#39;t say."},{"score":0,"post_type":"question","creation_date":1698744168,"post_id":77392724,"comment_id":136441027,"body_markdown":"There aren&#39;t many alternatives, to be honest. There&#39;s `CharacterIterator` and its implementation `StringCharacterIterator` but that&#39;s cumbersome. There&#39;s using `toCharArray()` but that creates a copy. There&#39;s `getChars` but that either requires a full copy, or a partial copy and nested looping (outer loop for `getChars`, inner loop for the `char[]` that&#39;s been read). And if you feel like doing things even more overly complex, there&#39;s `StringReader`. But in the end, out of all of these, the simple loop with `charAt` is still preferred.","link":"https://stackoverflow.com/questions/77392724/which-loop-which-is-best-for-iterating-for-strings-in-java#comment136441027_77392724","body":"There aren&#39;t many alternatives, to be honest. There&#39;s <code>CharacterIterator</code> and its implementation <code>StringCharacterIterator</code> but that&#39;s cumbersome. There&#39;s using <code>toCharArray()</code> but that creates a copy. There&#39;s <code>getChars</code> but that either requires a full copy, or a partial copy and nested looping (outer loop for <code>getChars</code>, inner loop for the <code>char[]</code> that&#39;s been read). And if you feel like doing things even more overly complex, there&#39;s <code>StringReader</code>. But in the end, out of all of these, the simple loop with <code>charAt</code> is still preferred."},{"score":0,"post_type":"question","creation_date":1698744242,"post_id":77392724,"comment_id":136441047,"body_markdown":"There is one alternative that actually is interesting though, and that&#39;s using `chars()`. That returns an `IntStream` so you need to cast its arguments to `char` before adding them to any `StringBuilder` etc., otherwise you&#39;ll get unexpected results.","link":"https://stackoverflow.com/questions/77392724/which-loop-which-is-best-for-iterating-for-strings-in-java#comment136441047_77392724","body":"There is one alternative that actually is interesting though, and that&#39;s using <code>chars()</code>. That returns an <code>IntStream</code> so you need to cast its arguments to <code>char</code> before adding them to any <code>StringBuilder</code> etc., otherwise you&#39;ll get unexpected results."},{"score":1,"post_type":"question","creation_date":1698758256,"post_id":77392724,"comment_id":136443618,"body_markdown":"Does this answer your question? [What is the easiest/best/most correct way to iterate through the characters of a string in Java?](https://stackoverflow.com/questions/196830/what-is-the-easiest-best-most-correct-way-to-iterate-through-the-characters-of-a)","link":"https://stackoverflow.com/questions/77392724/which-loop-which-is-best-for-iterating-for-strings-in-java#comment136443618_77392724","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/196830/what-is-the-easiest-best-most-correct-way-to-iterate-through-the-characters-of-a\">What is the easiest/best/most correct way to iterate through the characters of a string in Java?</a>"},{"score":0,"post_type":"question","creation_date":1698839425,"post_id":77392724,"comment_id":136455103,"body_markdown":"@RobSpoor has a point while I was iterating through string was using `char [] arr=s.toCharArray();` which creates a copy is there any possible solution that could iterate through string without using extra memory (I mean without converting to into char array) P.S I am aware String objects are immutable.","link":"https://stackoverflow.com/questions/77392724/which-loop-which-is-best-for-iterating-for-strings-in-java#comment136455103_77392724","body":"@RobSpoor has a point while I was iterating through string was using <code>char [] arr=s.toCharArray();</code> which creates a copy is there any possible solution that could iterate through string without using extra memory (I mean without converting to into char array) P.S I am aware String objects are immutable."},{"score":0,"post_type":"question","creation_date":1698840475,"post_id":77392724,"comment_id":136455297,"body_markdown":"@SatishChauhan the code you posted originally is just fine, and has the least overhead in memory of all solutions I can think of.","link":"https://stackoverflow.com/questions/77392724/which-loop-which-is-best-for-iterating-for-strings-in-java#comment136455297_77392724","body":"@SatishChauhan the code you posted originally is just fine, and has the least overhead in memory of all solutions I can think of."},{"score":0,"post_type":"question","creation_date":1698928399,"post_id":77392724,"comment_id":136468056,"body_markdown":"So basically my question is the solution And one of the best practices that could be followed for iterating for strings in Java?","link":"https://stackoverflow.com/questions/77392724/which-loop-which-is-best-for-iterating-for-strings-in-java#comment136468056_77392724","body":"So basically my question is the solution And one of the best practices that could be followed for iterating for strings in Java?"},{"score":0,"post_type":"question","creation_date":1702417230,"post_id":77392724,"comment_id":136893095,"body_markdown":"Your first example is not legal Java if `s` is a string.","link":"https://stackoverflow.com/questions/77392724/which-loop-which-is-best-for-iterating-for-strings-in-java#comment136893095_77392724","body":"Your first example is not legal Java if <code>s</code> is a string."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702416793,"creation_date":1702416793,"answer_id":77649139,"question_id":77392724,"body_markdown":"There are multiple ways of looping String, some of the options could be:\r\n    \r\n    //Using For Each loop\r\n    String str = &quot;Hello, World!&quot;;\r\n    for (char c : str.toCharArray()) {\r\n        // Process or print the character &#39;c&#39;\r\n    }\r\n    \r\n    //Using Java streams\r\n    String str = &quot;Hello, World!&quot;;\r\n    str.chars().forEach(c -&gt; {\r\n        // Process or print the character &#39;c&#39;\r\n    });","link":"https://stackoverflow.com/questions/77392724/which-loop-which-is-best-for-iterating-for-strings-in-java/77649139#77649139","title":"Which loop which is best for iterating for strings in java","body":"<p>There are multiple ways of looping String, some of the options could be:</p>\n<pre><code>//Using For Each loop\nString str = &quot;Hello, World!&quot;;\nfor (char c : str.toCharArray()) {\n    // Process or print the character 'c'\n}\n\n//Using Java streams\nString str = &quot;Hello, World!&quot;;\nstr.chars().forEach(c -&gt; {\n    // Process or print the character 'c'\n});\n</code></pre>\n"}],"comment_count":9,"is_answered":false,"view_count":55,"answer_count":1,"score":-1,"last_activity_date":1702416793,"creation_date":1698717217,"question_id":77392724,"body_markdown":"I always use normal for loop ie.\r\n```\r\nfor(int i=0;i&lt;s.length;i++){}\r\n```\r\n for iterating through string although its simple way to iterate through string can anyone suggest me other type of looping method which is more efficent and short syntax that could make code more clean and readable.\r\n\r\nThanks for help Btw i am new to online community.\r\n\r\n\r\n```\r\nfor (int i = 0; i &lt; s.length(); i++){\r\n    char c = s.charAt(i);        \r\n}\r\n```\r\nI always use this method.","link":"https://stackoverflow.com/questions/77392724/which-loop-which-is-best-for-iterating-for-strings-in-java","title":"Which loop which is best for iterating for strings in java","body":"<p>I always use normal for loop ie.</p>\n<pre><code>for(int i=0;i&lt;s.length;i++){}\n</code></pre>\n<p>for iterating through string although its simple way to iterate through string can anyone suggest me other type of looping method which is more efficent and short syntax that could make code more clean and readable.</p>\n<p>Thanks for help Btw i am new to online community.</p>\n<pre><code>for (int i = 0; i &lt; s.length(); i++){\n    char c = s.charAt(i);        \n}\n</code></pre>\n<p>I always use this method.</p>\n"},{"tags":["java"],"comments":[{"score":3,"post_type":"question","creation_date":1699548881,"post_id":77454960,"comment_id":136548983,"body_markdown":"What does your professor / teacher mean by &quot;without an index&quot; ?","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and#comment136548983_77454960","body":"What does your professor / teacher mean by &quot;without an index&quot; ?"},{"score":0,"post_type":"question","creation_date":1699549525,"post_id":77454960,"comment_id":136549123,"body_markdown":"Does this answer your question? [How do I reverse an int array in Java?](https://stackoverflow.com/questions/2137755/how-do-i-reverse-an-int-array-in-java)","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and#comment136549123_77454960","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2137755/how-do-i-reverse-an-int-array-in-java\">How do I reverse an int array in Java?</a>"},{"score":1,"post_type":"question","creation_date":1699549727,"post_id":77454960,"comment_id":136549181,"body_markdown":"@Moob -- I can&#39;t speak for the O/P, but my guess is &quot;No&quot;. The O/P has specific requirements to use recursion and &quot;without an index&quot;. I&#39;m not sure what is meant by the latter.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and#comment136549181_77454960","body":"@Moob -- I can&#39;t speak for the O/P, but my guess is &quot;No&quot;. The O/P has specific requirements to use recursion and &quot;without an index&quot;. I&#39;m not sure what is meant by the latter."},{"score":0,"post_type":"question","creation_date":1699549975,"post_id":77454960,"comment_id":136549241,"body_markdown":"By the way, the requirement to use recursion does not necessarily mean the recursive method has to be `int[] Problem5(int[] myArray)`. You could code, for example, a different method that uses recursion, such as `public static int [] reverse (int [] arr)` or `public static int [] reverse (int [] arr, int foo)`. The method `Problem5 (int[] myArray)` would call that method.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and#comment136549241_77454960","body":"By the way, the requirement to use recursion does not necessarily mean the recursive method has to be <code>int[] Problem5(int[] myArray)</code>. You could code, for example, a different method that uses recursion, such as <code>public static int [] reverse (int [] arr)</code> or <code>public static int [] reverse (int [] arr, int foo)</code>. The method <code>Problem5 (int[] myArray)</code> would call that method."},{"score":0,"post_type":"question","creation_date":1699550658,"post_id":77454960,"comment_id":136549393,"body_markdown":"@OldDogProgrammer the only parameters into the method is the array of integers.  I cannot change those parameters, therefore I cannot use any index parameters.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and#comment136549393_77454960","body":"@OldDogProgrammer the only parameters into the method is the array of integers.  I cannot change those parameters, therefore I cannot use any index parameters."},{"score":0,"post_type":"question","creation_date":1699551065,"post_id":77454960,"comment_id":136549483,"body_markdown":"Yes, I assume `public int[] Problem5(int[] myArray)` is mandatory. But, within that, you should be able to use indexes.  I would guess you would also be allowed to use a different method that *does* take values of indexes parameters. But, I suspect it would have to be a *method you code*.  That would prohibit using built-in methods of `Collections` or `Arrays` API.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and#comment136549483_77454960","body":"Yes, I assume <code>public int[] Problem5(int[] myArray)</code> is mandatory. But, within that, you should be able to use indexes.  I would guess you would also be allowed to use a different method that <i>does</i> take values of indexes parameters. But, I suspect it would have to be a <i>method you code</i>.  That would prohibit using built-in methods of <code>Collections</code> or <code>Arrays</code> API."},{"score":1,"post_type":"question","creation_date":1699551275,"post_id":77454960,"comment_id":136549518,"body_markdown":"@poet_will You would need to somehow keep track of the index. Are you allowed to use class variable (static) or instance variable for that? Or another method with array and index parameters, which will be the actual recursive method, and you will call it inside `Problem5`?","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and#comment136549518_77454960","body":"@poet_will You would need to somehow keep track of the index. Are you allowed to use class variable (static) or instance variable for that? Or another method with array and index parameters, which will be the actual recursive method, and you will call it inside <code>Problem5</code>?"},{"score":0,"post_type":"question","creation_date":1699551496,"post_id":77454960,"comment_id":136549557,"body_markdown":"Off-topic: I noticed `public int[] Problem5` is an instance method, but references no instance variables. Should it be `static` instead of an instance method?","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and#comment136549557_77454960","body":"Off-topic: I noticed <code>public int[] Problem5</code> is an instance method, but references no instance variables. Should it be <code>static</code> instead of an instance method?"},{"score":0,"post_type":"question","creation_date":1699551513,"post_id":77454960,"comment_id":136549562,"body_markdown":"@Chaosfire yes I can use class and method variables.  The method cannot take in a parameter to be used as the index.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and#comment136549562_77454960","body":"@Chaosfire yes I can use class and method variables.  The method cannot take in a parameter to be used as the index."},{"score":1,"post_type":"question","creation_date":1699552581,"post_id":77454960,"comment_id":136549736,"body_markdown":"@poet_will: I don&#39;t think you understand what we are saying. Yes, you are not allowed to change the return type, the name, or the parameter types or order of the `Problem5` method. But, we are suggesting you code an additional method that uses recursion, and  takes what parameters you need to solve the problem. Let&#39;s say you code a method `foo`. Somewhere inside `Problem5`, you call `foo`.  It will be `foo` that does the recursion. Chaosfire also wants to know if you are allowed to add instance variables to the class.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and#comment136549736_77454960","body":"@poet_will: I don&#39;t think you understand what we are saying. Yes, you are not allowed to change the return type, the name, or the parameter types or order of the <code>Problem5</code> method. But, we are suggesting you code an additional method that uses recursion, and  takes what parameters you need to solve the problem. Let&#39;s say you code a method <code>foo</code>. Somewhere inside <code>Problem5</code>, you call <code>foo</code>.  It will be <code>foo</code> that does the recursion. Chaosfire also wants to know if you are allowed to add instance variables to the class."},{"score":0,"post_type":"question","creation_date":1699552957,"post_id":77454960,"comment_id":136549812,"body_markdown":"Or, there could be instance variables already in the class you are allowed to use.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and#comment136549812_77454960","body":"Or, there could be instance variables already in the class you are allowed to use."},{"score":1,"post_type":"question","creation_date":1699627880,"post_id":77454960,"comment_id":136559507,"body_markdown":"There seems to be some sort of misunderstanding or miscommunication here. I suggest you talk with your professor / teacher. It might help if you show the professor / teacher this page.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and#comment136559507_77454960","body":"There seems to be some sort of misunderstanding or miscommunication here. I suggest you talk with your professor / teacher. It might help if you show the professor / teacher this page."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1699549394,"post_id":77455049,"comment_id":136549098,"body_markdown":"Thanks for the comment.  Unfortunately I cannot set myArray.length outside of the method.  There are other methods in the class that use the same &quot;myArray&quot; name and I cannot change it.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455049#comment136549098_77455049","body":"Thanks for the comment.  Unfortunately I cannot set myArray.length outside of the method.  There are other methods in the class that use the same &quot;myArray&quot; name and I cannot change it."},{"score":1,"post_type":"answer","creation_date":1699628156,"post_id":77455049,"comment_id":136559567,"body_markdown":"@poet_will : The code in main in this answer is just for test / demonstration. The code you need, in the `Problem5` method doesn&#39;t set the length of the array.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455049#comment136559567_77455049","body":"@poet_will : The code in main in this answer is just for test / demonstration. The code you need, in the <code>Problem5</code> method doesn&#39;t set the length of the array."},{"score":1,"post_type":"answer","creation_date":1699628646,"post_id":77455049,"comment_id":136559676,"body_markdown":"@poet_will:  Within the `Problem5` method, `myArray` is a *local* variable name. If there happens to be an instance or class variable also named `myArray`, that variable name is hidden by the local.  Search for &quot;Java variable shadowing&quot;. Within `Problem5` method, you won&#39;t know if local variable name `myArray` refers to the instance variable of the same name unless you test for that. If `Problem5` is part of `class Foo`, you couldh ave`public class Foo { int [] myArray; ... public void bar () { ... int [] bat = {100,50,-20,80,80,80,70,-40,10}; int [] bin = Problem5 (bat); ...}`","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455049#comment136559676_77455049","body":"@poet_will:  Within the <code>Problem5</code> method, <code>myArray</code> is a <i>local</i> variable name. If there happens to be an instance or class variable also named <code>myArray</code>, that variable name is hidden by the local.  Search for &quot;Java variable shadowing&quot;. Within <code>Problem5</code> method, you won&#39;t know if local variable name <code>myArray</code> refers to the instance variable of the same name unless you test for that. If <code>Problem5</code> is part of <code>class Foo</code>, you couldh ave<code>public class Foo { int [] myArray; ... public void bar () { ... int [] bat = {100,50,-20,80,80,80,70,-40,10}; int [] bin = Problem5 (bat); ...}</code>"},{"score":0,"post_type":"answer","creation_date":1699728446,"post_id":77455049,"comment_id":136569021,"body_markdown":"@poet_will this means that if there is another variable named `myArray` defined at a higher scope (i.e. in a class), it will be &#39;shadowed&#39; in the method. The method will only see and manipulate the `myArray` that was passed to it. not the class-level unless we refert to it","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455049#comment136569021_77455049","body":"@poet_will this means that if there is another variable named <code>myArray</code> defined at a higher scope (i.e. in a class), it will be &#39;shadowed&#39; in the method. The method will only see and manipulate the <code>myArray</code> that was passed to it. not the class-level unless we refert to it"}],"comment_count":4,"score":1,"last_activity_date":1699549131,"creation_date":1699549131,"answer_id":77455049,"question_id":77454960,"body_markdown":"`ArrayIndexOutOfBoundsException` means there is something wrong with how you are updating your variables.  \r\nyou have to try reverse an array using recursion:  \r\n```\r\npublic class Main {\r\n   static int beginning = 0;\r\n   static int end;\r\n\r\n   public static void main(String[] args) {\r\n       int[] myArray = {1, 2, 3, 4, 5};\r\n       end = myArray.length - 1;\r\n       Problem5(myArray);\r\n       for (int num : myArray) {\r\n           System.out.print(num + &quot; &quot;);\r\n       }\r\n   }\r\n\r\n   public static void Problem5(int[] myArray) {\r\n       if (beginning &gt;= end) {\r\n           return;\r\n       } else {\r\n           int temp = myArray[beginning];\r\n           myArray[beginning] = myArray[end];\r\n           myArray[end] = temp;\r\n       }\r\n       beginning++;\r\n       end--;\r\n       Problem5(myArray);\r\n   }\r\n}\r\n\r\n```\r\nBefore the elements and in the if statement i cheked `beginning &gt;= end` in order to avoid the variable error.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455049#77455049","title":"Reverse an array of integers using recursion without creating a second array and without an index","body":"<p><code>ArrayIndexOutOfBoundsException</code> means there is something wrong with how you are updating your variables.<br />\nyou have to try reverse an array using recursion:</p>\n<pre><code>public class Main {\n   static int beginning = 0;\n   static int end;\n\n   public static void main(String[] args) {\n       int[] myArray = {1, 2, 3, 4, 5};\n       end = myArray.length - 1;\n       Problem5(myArray);\n       for (int num : myArray) {\n           System.out.print(num + &quot; &quot;);\n       }\n   }\n\n   public static void Problem5(int[] myArray) {\n       if (beginning &gt;= end) {\n           return;\n       } else {\n           int temp = myArray[beginning];\n           myArray[beginning] = myArray[end];\n           myArray[end] = temp;\n       }\n       beginning++;\n       end--;\n       Problem5(myArray);\n   }\n}\n\n</code></pre>\n<p>Before the elements and in the if statement i cheked <code>beginning &gt;= end</code> in order to avoid the variable error.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1699550379,"post_id":77455094,"comment_id":136549333,"body_markdown":"These methods take in a start and end index values.  The method parameter I have only takes in an Array.  Therefore I&#39;m trying to solve the problem by using only the array and variables that I create.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455094#comment136549333_77455094","body":"These methods take in a start and end index values.  The method parameter I have only takes in an Array.  Therefore I&#39;m trying to solve the problem by using only the array and variables that I create."},{"score":1,"post_type":"answer","creation_date":1699550774,"post_id":77455094,"comment_id":136549425,"body_markdown":"@poet_will here also the Method Problem5 just takes one input (the array). then we create another method that can accept more input and to the recursion. By the way, if you need to use recursion you need somehow pass the start and end variables to the next method call. There is no magic, except using`ThreadLocal` which I don&#39;t recommend for solving this problem.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455094#comment136549425_77455094","body":"@poet_will here also the Method Problem5 just takes one input (the array). then we create another method that can accept more input and to the recursion. By the way, if you need to use recursion you need somehow pass the start and end variables to the next method call. There is no magic, except using<code>ThreadLocal</code> which I don&#39;t recommend for solving this problem."}],"comment_count":2,"score":1,"last_activity_date":1699550954,"last_edit_date":1699550954,"creation_date":1699549633,"answer_id":77455094,"question_id":77454960,"body_markdown":"In the solution below you can reverse the array without any extra space, no extra array, and no temp for swapping the start and end of the array.\r\n\r\n```Java\r\n    public int[] Problem5(int[] arr) {\r\n        return reverse(arr, 0, arr.length - 1); // use length - 1 to avoid index out of bound in accessing array\r\n    }\r\n\r\n    // By this method you can pass the new start and end \r\n    // Also you will do the recursion by this method\r\n    private static int[] reverse(int[] arr, int start, int end) {\r\n        if (start &gt; end) {\r\n            return arr;\r\n        }\r\n\r\n        // swap integers without temp\r\n        // x, y = 2, 3\r\n        // x = x + y = 2 + 3 = 5\r\n        // y = x - y = 5 - 3 = 2\r\n        // x = x - y = 5 - 2 = 3\r\n        arr[start] = arr[start] + arr[end];\r\n        arr[end] = arr[start] - arr[end];\r\n        arr[start] = arr[start] - arr[end];\r\n\r\n        //Move the indexes\r\n        start++;\r\n        end--;\r\n\r\n        return reverse(arr, start, end);\r\n    }\r\n```\r\n\r\nSolution with simple swapping:\r\n\r\n\r\n```Java\r\n    public int[] Problem5(int[] arr) {\r\n        return reverse(arr, 0, arr.length - 1); // use length - 1 to avoid index out of bound in accessing array\r\n    }\r\n\r\n    // By this method you can pass the new start and end \r\n    // Also you will do the recursion by this method\r\n    private static int[] reverse(int[] arr, int start, int end) {\r\n        if (start &gt; end) {\r\n            return arr;\r\n        }\r\n\r\n        int temp = arr[start];\r\n        arr[start] = arr[end];\r\n        arr[end] = temp;\r\n\r\n        //Move the indexes\r\n        start++;\r\n        end--;\r\n\r\n        return reverse(arr, start, end);\r\n    }\r\n```","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455094#77455094","title":"Reverse an array of integers using recursion without creating a second array and without an index","body":"<p>In the solution below you can reverse the array without any extra space, no extra array, and no temp for swapping the start and end of the array.</p>\n<pre><code>    public int[] Problem5(int[] arr) {\n        return reverse(arr, 0, arr.length - 1); // use length - 1 to avoid index out of bound in accessing array\n    }\n\n    // By this method you can pass the new start and end \n    // Also you will do the recursion by this method\n    private static int[] reverse(int[] arr, int start, int end) {\n        if (start &gt; end) {\n            return arr;\n        }\n\n        // swap integers without temp\n        // x, y = 2, 3\n        // x = x + y = 2 + 3 = 5\n        // y = x - y = 5 - 3 = 2\n        // x = x - y = 5 - 2 = 3\n        arr[start] = arr[start] + arr[end];\n        arr[end] = arr[start] - arr[end];\n        arr[start] = arr[start] - arr[end];\n\n        //Move the indexes\n        start++;\n        end--;\n\n        return reverse(arr, start, end);\n    }\n</code></pre>\n<p>Solution with simple swapping:</p>\n<pre><code>    public int[] Problem5(int[] arr) {\n        return reverse(arr, 0, arr.length - 1); // use length - 1 to avoid index out of bound in accessing array\n    }\n\n    // By this method you can pass the new start and end \n    // Also you will do the recursion by this method\n    private static int[] reverse(int[] arr, int start, int end) {\n        if (start &gt; end) {\n            return arr;\n        }\n\n        int temp = arr[start];\n        arr[start] = arr[end];\n        arr[end] = temp;\n\n        //Move the indexes\n        start++;\n        end--;\n\n        return reverse(arr, start, end);\n    }\n</code></pre>\n"},{"comments":[{"score":1,"post_type":"answer","creation_date":1699550411,"post_id":77455117,"comment_id":136549342,"body_markdown":"I cannot change the method parameters.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455117#comment136549342_77455117","body":"I cannot change the method parameters."},{"score":0,"post_type":"answer","creation_date":1702406598,"post_id":77455117,"comment_id":136891529,"body_markdown":"This will not compile.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455117#comment136891529_77455117","body":"This will not compile."}],"comment_count":2,"score":1,"last_activity_date":1702406587,"last_edit_date":1702406587,"creation_date":1699549770,"answer_id":77455117,"question_id":77454960,"body_markdown":"Place your start and end as parameters to your method.\r\n\r\n    public int[] Problem5(int[] myArray, int start, int end) {\r\n\r\n        int temp = 0;\r\n\r\n        if(start &gt; end) {\r\n            return myArray;\r\n        }\r\n        else {\r\n            temp = myArray[beginning];\r\n            myArray[beginning] = myArray[end];\r\n            myArray[end] = temp;\r\n        }\r\n        start++;\r\n        end--;\r\n\r\n        return Problem5(myArray, start end);\r\n    }\r\n\r\n","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455117#77455117","title":"Reverse an array of integers using recursion without creating a second array and without an index","body":"<p>Place your start and end as parameters to your method.</p>\n<pre><code>public int[] Problem5(int[] myArray, int start, int end) {\n\n    int temp = 0;\n\n    if(start &gt; end) {\n        return myArray;\n    }\n    else {\n        temp = myArray[beginning];\n        myArray[beginning] = myArray[end];\n        myArray[end] = temp;\n    }\n    start++;\n    end--;\n\n    return Problem5(myArray, start end);\n}\n</code></pre>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1699550125,"post_id":77455138,"comment_id":136549272,"body_markdown":"`reverse(copyOfRange(...))` won&#39;t work because it will reverse a _copy_ of the array, but you want to reverse a subrange of the original array.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455138#comment136549272_77455138","body":"<code>reverse(copyOfRange(...))</code> won&#39;t work because it will reverse a <i>copy</i> of the array, but you want to reverse a subrange of the original array."},{"score":1,"post_type":"answer","creation_date":1699551320,"post_id":77455138,"comment_id":136549530,"body_markdown":"The O/P is a student, and unlikely to have encountered generics at this point.  So, why not stick with `int`?","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455138#comment136549530_77455138","body":"The O/P is a student, and unlikely to have encountered generics at this point.  So, why not stick with <code>int</code>?"}],"comment_count":2,"score":1,"last_activity_date":1702406705,"last_edit_date":1702406705,"creation_date":1699549949,"answer_id":77455138,"question_id":77454960,"body_markdown":"That was a challenge, and I had to look it up.\r\n\r\nUtilize the _[Arrays#copyOfRange](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Arrays.html#copyOfRange(T[],int,int))_ method to _shallow copy_ the array.\r\n\r\n```java\r\n&lt;T&gt; void reverse(T[] a) {\r\n    if (a.length == 1) \r\n        return;\r\n    T t = a[0];\r\n    a[0] = a[a.length - 1];\r\n    a[a.length - 1] = t;\r\n    reverse(Arrays.copyOfRange(a, 1, a.length));\r\n}\r\n```\r\n\r\nAlternately, here is an example using a starting and ending index.\r\n\r\n```java\r\n&lt;T&gt; void reverse(T[] a, int i, int j) {\r\n    if (i == j) \r\n        return;\r\n    T t = a[i];\r\n    a[i] = a[j];\r\n    a[j] = t;\r\n    reverse(a, ++i, --j);\r\n}\r\n```\r\n\r\n","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455138#77455138","title":"Reverse an array of integers using recursion without creating a second array and without an index","body":"<p>That was a challenge, and I had to look it up.</p>\n<p>Utilize the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Arrays.html#copyOfRange(T%5B%5D,int,int)\" rel=\"nofollow noreferrer\">Arrays#copyOfRange</a></em> method to <em>shallow copy</em> the array.</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;T&gt; void reverse(T[] a) {\n    if (a.length == 1) \n        return;\n    T t = a[0];\n    a[0] = a[a.length - 1];\n    a[a.length - 1] = t;\n    reverse(Arrays.copyOfRange(a, 1, a.length));\n}\n</code></pre>\n<p>Alternately, here is an example using a starting and ending index.</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;T&gt; void reverse(T[] a, int i, int j) {\n    if (i == j) \n        return;\n    T t = a[i];\n    a[i] = a[j];\n    a[j] = t;\n    reverse(a, ++i, --j);\n}\n</code></pre>\n"},{"comment_count":0,"score":1,"last_activity_date":1702406847,"last_edit_date":1702406847,"creation_date":1699553357,"answer_id":77455464,"question_id":77454960,"body_markdown":"With an instance variable, a solution can be like this:\r\n\r\n```\r\npublic class Test {\r\n\r\n    private int currentIndex = 0; // It probably needs a better name\r\n\r\n    public int[] Problem5(int[] myArray) {\r\n        if (currentIndex == myArray.length / 2) {\r\n            // You have reached the middle of the array.\r\n            // Everything is swapped\r\n            currentIndex = 0; // Reset index if you need to use the same instance again\r\n            return myArray;\r\n        }\r\n        int firstIndex = currentIndex;\r\n        int secondIndex = myArray.length - 1 - firstIndex;\r\n\r\n        int temp = myArray[firstIndex];\r\n        myArray[firstIndex] = myArray[secondIndex];\r\n        myArray[secondIndex] = temp;\r\n        currentIndex++; // Update the index before the next recursive call\r\n        return Problem5(myArray);\r\n    }\r\n}\r\n```\r\n\r\nAlso, you can use the second method to do the actual recursion, without changing `Problem5`:\r\n\r\n```\r\npublic class Test {\r\n\r\n    public int[] Problem5(int[] myArray) {\r\n        // This method has remained unchanged\r\n        return actualRecursiveMethod(myArray, 0);\r\n    }\r\n\r\n    private static int[] actualRecursiveMethod(int[] myArray, int index) {\r\n        // The &#39;magic&#39; happens here\r\n        if (index == myArray.length / 2) {\r\n            // You have reached the middle of the array.\r\n            // Everything is swapped.\r\n            return myArray;\r\n        }\r\n        int secondIndex = myArray.length - 1 - index;\r\n\r\n        int temp = myArray[index];\r\n        myArray[index] = myArray[secondIndex];\r\n        myArray[secondIndex] = temp;\r\n        // Call recursively with next index\r\n        return actualRecursiveMethod(myArray, index + 1);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and/77455464#77455464","title":"Reverse an array of integers using recursion without creating a second array and without an index","body":"<p>With an instance variable, a solution can be like this:</p>\n<pre><code>public class Test {\n\n    private int currentIndex = 0; // It probably needs a better name\n\n    public int[] Problem5(int[] myArray) {\n        if (currentIndex == myArray.length / 2) {\n            // You have reached the middle of the array.\n            // Everything is swapped\n            currentIndex = 0; // Reset index if you need to use the same instance again\n            return myArray;\n        }\n        int firstIndex = currentIndex;\n        int secondIndex = myArray.length - 1 - firstIndex;\n\n        int temp = myArray[firstIndex];\n        myArray[firstIndex] = myArray[secondIndex];\n        myArray[secondIndex] = temp;\n        currentIndex++; // Update the index before the next recursive call\n        return Problem5(myArray);\n    }\n}\n</code></pre>\n<p>Also, you can use the second method to do the actual recursion, without changing <code>Problem5</code>:</p>\n<pre><code>public class Test {\n\n    public int[] Problem5(int[] myArray) {\n        // This method has remained unchanged\n        return actualRecursiveMethod(myArray, 0);\n    }\n\n    private static int[] actualRecursiveMethod(int[] myArray, int index) {\n        // The 'magic' happens here\n        if (index == myArray.length / 2) {\n            // You have reached the middle of the array.\n            // Everything is swapped.\n            return myArray;\n        }\n        int secondIndex = myArray.length - 1 - index;\n\n        int temp = myArray[index];\n        myArray[index] = myArray[secondIndex];\n        myArray[secondIndex] = temp;\n        // Call recursively with next index\n        return actualRecursiveMethod(myArray, index + 1);\n    }\n}\n</code></pre>\n"}],"comment_count":12,"is_answered":true,"view_count":151,"answer_count":5,"score":1,"last_activity_date":1702406847,"creation_date":1699548282,"last_edit_date":1699549313,"question_id":77454960,"body_markdown":"I am banging my head against the wall with this one. Here is what I have so far:\r\n```java\r\npublic int[] Problem5(int[] myArray) {\r\n\tend = myArray.length;\r\n\tint temp = 0;\r\n\t\r\n\tif(beginning &gt; end) {\r\n\t\treturn myArray;\r\n\t}\r\n\telse {\r\n\t\ttemp = myArray[beginning];\r\n\t\tmyArray[beginning] = myArray[end];\r\n\t\tmyArray[end] = temp;\r\n\t}\r\n\tbeginning ++;\r\n\tend--;\r\n\t\r\n\treturn Problem5(myArray);\r\n}\r\n```\r\n\r\nFirstly, I think I have to figure out how to not reset &quot;end&quot; to the array length each time. I&#39;m not sure how to handle that because I need to set it the first time.\r\n\r\nSecondly, I&#39;m getting an ArrayIndexOutOfBoundsException at the line &quot;myArray[beginning] = myArray[end];&quot;.  I&#39;m not sure how to handle that in the if statement.","link":"https://stackoverflow.com/questions/77454960/reverse-an-array-of-integers-using-recursion-without-creating-a-second-array-and","title":"Reverse an array of integers using recursion without creating a second array and without an index","body":"<p>I am banging my head against the wall with this one. Here is what I have so far:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public int[] Problem5(int[] myArray) {\n    end = myArray.length;\n    int temp = 0;\n    \n    if(beginning &gt; end) {\n        return myArray;\n    }\n    else {\n        temp = myArray[beginning];\n        myArray[beginning] = myArray[end];\n        myArray[end] = temp;\n    }\n    beginning ++;\n    end--;\n    \n    return Problem5(myArray);\n}\n</code></pre>\n<p>Firstly, I think I have to figure out how to not reset &quot;end&quot; to the array length each time. I'm not sure how to handle that because I need to set it the first time.</p>\n<p>Secondly, I'm getting an ArrayIndexOutOfBoundsException at the line &quot;myArray[beginning] = myArray[end];&quot;.  I'm not sure how to handle that in the if statement.</p>\n"},{"tags":["java","mariadb"],"comments":[{"score":1,"post_type":"question","creation_date":1691766453,"post_id":76884675,"comment_id":135540580,"body_markdown":"Do you have an appropriate driver-jar on your classpath?","link":"https://stackoverflow.com/questions/76884675/mariadb-no-suitable-driver-found#comment135540580_76884675","body":"Do you have an appropriate driver-jar on your classpath?"},{"score":0,"post_type":"question","creation_date":1691770354,"post_id":76884675,"comment_id":135541380,"body_markdown":"Is there even a db socket listening on that server?","link":"https://stackoverflow.com/questions/76884675/mariadb-no-suitable-driver-found#comment135541380_76884675","body":"Is there even a db socket listening on that server?"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702406657,"creation_date":1702406657,"answer_id":77648393,"question_id":76884675,"body_markdown":"Not sure how a Mine-craft plugin is created, but in my Android app the driver is referenced in Maven like this:\r\n\r\n    implementation &#39;org.mariadb.jdbc:mariadb-java-client:3.3.0&#39;","link":"https://stackoverflow.com/questions/76884675/mariadb-no-suitable-driver-found/77648393#77648393","title":"mariadb No suitable driver found","body":"<p>Not sure how a Mine-craft plugin is created, but in my Android app the driver is referenced in Maven like this:</p>\n<pre><code>implementation 'org.mariadb.jdbc:mariadb-java-client:3.3.0'\n</code></pre>\n"}],"comment_count":2,"is_answered":false,"view_count":50,"answer_count":1,"score":0,"last_activity_date":1702406657,"creation_date":1691765966,"last_edit_date":1691766655,"question_id":76884675,"body_markdown":"I have problem with, mysql from 11.0.2-MariaDB, client 15.2 when creating minecraft plugin, connecting to database\r\n\r\nfull error:\r\n\r\njava.lang.RuntimeException: java.sql.SQLException: No suitable driver found for jdbc:mariadb://172.17.0.1:3306/s1_users\r\n\tat qbsss.statsmpcore.statssmpcore.StatsSMPCore.onEnable(StatsSMPCore.java:43) ~[?:?]\r\n\tat org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:264) ~[spigot-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:342) ~[spigot-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:480) ~[spigot-api-1.19.2-R0.1-SNAPSHOT.jar:?]\r\n\tat org.bukkit.craftbukkit.v1_19_R1.CraftServer.enablePlugin(CraftServer.java:525) ~[spigot-1.19.2-R0.1-SNAPSHOT.jar:3610-Spigot-6198b5a-19df23a]\r\n\tat org.bukkit.craftbukkit.v1_19_R1.CraftServer.enablePlugins(CraftServer.java:439) ~[spigot-1.19.2-R0.1-SNAPSHOT.jar:3610-Spigot-6198b5a-19df23a]\r\n\tat net.minecraft.server.dedicated.DedicatedServer.e(DedicatedServer.java:225) ~[spigot-1.19.2-R0.1-SNAPSHOT.jar:3610-Spigot-6198b5a-19df23a]\r\n\tat net.minecraft.server.MinecraftServer.v(MinecraftServer.java:968) ~[spigot-1.19.2-R0.1-SNAPSHOT.jar:3610-Spigot-6198b5a-19df23a]\r\n\tat net.minecraft.server.MinecraftServer.lambda$0(MinecraftServer.java:293) ~[spigot-1.19.2-R0.1-SNAPSHOT.jar:3610-Spigot-6198b5a-19df23a]\r\n\tat java.lang.Thread.run(Thread.java:833) [?:?]\r\nCaused by: java.sql.SQLException: No suitable driver found for jdbc:mariadb://172.17.0.1:3306/s1_users\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:706) ~[java.sql:?]\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:229) ~[java.sql:?]\r\n\tat qbsss.statsmpcore.statssmpcore.StatsSMPCore.onEnable(StatsSMPCore.java:38) ~[?:?]\r\n\t... 9 more\r\n\r\nmy code:\r\n```\r\npackage qbsss.statsmpcore.statssmpcore;\r\n\r\nimport io.papermc.paper.event.player.AsyncChatCommandDecorateEvent;\r\nimport org.bukkit.ChatColor;\r\nimport org.bukkit.Material;\r\nimport org.bukkit.plugin.java.JavaPlugin;\r\n\r\nimport qbsss.statsmpcore.commands.AddZycie;\r\nimport qbsss.statsmpcore.commands.Menu;\r\nimport qbsss.statsmpcore.events.PlayerKillOtherPlayer;\r\nimport xyz.xenondevs.invui.gui.Gui;\r\nimport xyz.xenondevs.invui.item.builder.ItemBuilder;\r\nimport xyz.xenondevs.invui.item.impl.SimpleItem;\r\n\r\nimport org.mariadb.jdbc.Driver;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.SQLException;\r\nimport java.util.function.Supplier;\r\n\r\nimport static qbsss.statsmpcore.methods.Color.color;\r\n\r\npublic final class StatsSMPCore extends JavaPlugin {\r\n\r\n\r\n    @Override\r\n    public void onEnable()\r\n    {\r\n\r\n        //DATTABASE SETTINGS\r\n        //String databaseUrl = &quot;jdbc:mariadb://172.17.0.1:3306/DB?user=u1_lob9V9Z6iJ&amp;password=@LRV=lP1WWPhzhYlqQqB85Sb&quot;;\r\n        //String databaseUser = &quot;u1_lob9V9Z6iJ&quot;;\r\n        ///String databasePassword = &quot;@LRV=lP1WWPhzhYlqQqB85Sb&quot;;\r\n\r\n        //DATABASE CONNECTION\r\n\r\n        try {\r\n            Connection connection = DriverManager.getConnection(\r\n                    &quot;jdbc:mariadb://172.17.0.1:3306/s1_users&quot;,\r\n                    &quot;u1_lob9V9Z6iJ&quot;, &quot;@LRV=lP1WWPhzhYlqQqB85Sb&quot;\r\n            );\r\n        } catch (SQLException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        //Connection databaseConnection = DriverManager.getConnection(databaseUrl);\r\n            //Connection databaseConnection = DriverManager.getConnection(databaseUrl, databaseUser, databasePassword);\r\n\r\n            System.out.println(color(&quot;&amp;aPolaczono z baza danych&quot;));\r\n\r\n\r\n\r\n\r\n        getCommand(&quot;menu&quot;).setExecutor( new Menu());\r\n        getCommand(&quot;addzycie&quot;).setExecutor( new AddZycie());\r\n\r\n        getServer().getPluginManager().registerEvents(new PlayerKillOtherPlayer(), this);\r\n\r\n        System.out.println(&quot;[StatsSMPCore]&quot; +  &quot;&amp;a Witaj Swiecie!&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void onDisable()\r\n    {\r\n        System.out.println(&quot;[StatsSMPCore]&quot; + ChatColor.GREEN + &quot; Goodbye!!!&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\nimpotrant is to use mariadb so i dont want to change db engine\r\n\r\n\r\ni tried code thats upper and using mysql jdbc from mysql\r\n","link":"https://stackoverflow.com/questions/76884675/mariadb-no-suitable-driver-found","title":"mariadb No suitable driver found","body":"<p>I have problem with, mysql from 11.0.2-MariaDB, client 15.2 when creating minecraft plugin, connecting to database</p>\n<p>full error:</p>\n<p>java.lang.RuntimeException: java.sql.SQLException: No suitable driver found for jdbc:mariadb://172.17.0.1:3306/s1_users\nat qbsss.statsmpcore.statssmpcore.StatsSMPCore.onEnable(StatsSMPCore.java:43) ~[?:?]\nat org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:264) ~[spigot-api-1.19.2-R0.1-SNAPSHOT.jar:?]\nat org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:342) ~[spigot-api-1.19.2-R0.1-SNAPSHOT.jar:?]\nat org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:480) ~[spigot-api-1.19.2-R0.1-SNAPSHOT.jar:?]\nat org.bukkit.craftbukkit.v1_19_R1.CraftServer.enablePlugin(CraftServer.java:525) ~[spigot-1.19.2-R0.1-SNAPSHOT.jar:3610-Spigot-6198b5a-19df23a]\nat org.bukkit.craftbukkit.v1_19_R1.CraftServer.enablePlugins(CraftServer.java:439) ~[spigot-1.19.2-R0.1-SNAPSHOT.jar:3610-Spigot-6198b5a-19df23a]\nat net.minecraft.server.dedicated.DedicatedServer.e(DedicatedServer.java:225) ~[spigot-1.19.2-R0.1-SNAPSHOT.jar:3610-Spigot-6198b5a-19df23a]\nat net.minecraft.server.MinecraftServer.v(MinecraftServer.java:968) ~[spigot-1.19.2-R0.1-SNAPSHOT.jar:3610-Spigot-6198b5a-19df23a]\nat net.minecraft.server.MinecraftServer.lambda$0(MinecraftServer.java:293) ~[spigot-1.19.2-R0.1-SNAPSHOT.jar:3610-Spigot-6198b5a-19df23a]\nat java.lang.Thread.run(Thread.java:833) [?:?]\nCaused by: java.sql.SQLException: No suitable driver found for jdbc:mariadb://172.17.0.1:3306/s1_users\nat java.sql.DriverManager.getConnection(DriverManager.java:706) ~[java.sql:?]\nat java.sql.DriverManager.getConnection(DriverManager.java:229) ~[java.sql:?]\nat qbsss.statsmpcore.statssmpcore.StatsSMPCore.onEnable(StatsSMPCore.java:38) ~[?:?]\n... 9 more</p>\n<p>my code:</p>\n<pre><code>package qbsss.statsmpcore.statssmpcore;\n\nimport io.papermc.paper.event.player.AsyncChatCommandDecorateEvent;\nimport org.bukkit.ChatColor;\nimport org.bukkit.Material;\nimport org.bukkit.plugin.java.JavaPlugin;\n\nimport qbsss.statsmpcore.commands.AddZycie;\nimport qbsss.statsmpcore.commands.Menu;\nimport qbsss.statsmpcore.events.PlayerKillOtherPlayer;\nimport xyz.xenondevs.invui.gui.Gui;\nimport xyz.xenondevs.invui.item.builder.ItemBuilder;\nimport xyz.xenondevs.invui.item.impl.SimpleItem;\n\nimport org.mariadb.jdbc.Driver;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\nimport java.util.function.Supplier;\n\nimport static qbsss.statsmpcore.methods.Color.color;\n\npublic final class StatsSMPCore extends JavaPlugin {\n\n\n    @Override\n    public void onEnable()\n    {\n\n        //DATTABASE SETTINGS\n        //String databaseUrl = &quot;jdbc:mariadb://172.17.0.1:3306/DB?user=u1_lob9V9Z6iJ&amp;password=@LRV=lP1WWPhzhYlqQqB85Sb&quot;;\n        //String databaseUser = &quot;u1_lob9V9Z6iJ&quot;;\n        ///String databasePassword = &quot;@LRV=lP1WWPhzhYlqQqB85Sb&quot;;\n\n        //DATABASE CONNECTION\n\n        try {\n            Connection connection = DriverManager.getConnection(\n                    &quot;jdbc:mariadb://172.17.0.1:3306/s1_users&quot;,\n                    &quot;u1_lob9V9Z6iJ&quot;, &quot;@LRV=lP1WWPhzhYlqQqB85Sb&quot;\n            );\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n        //Connection databaseConnection = DriverManager.getConnection(databaseUrl);\n            //Connection databaseConnection = DriverManager.getConnection(databaseUrl, databaseUser, databasePassword);\n\n            System.out.println(color(&quot;&amp;aPolaczono z baza danych&quot;));\n\n\n\n\n        getCommand(&quot;menu&quot;).setExecutor( new Menu());\n        getCommand(&quot;addzycie&quot;).setExecutor( new AddZycie());\n\n        getServer().getPluginManager().registerEvents(new PlayerKillOtherPlayer(), this);\n\n        System.out.println(&quot;[StatsSMPCore]&quot; +  &quot;&amp;a Witaj Swiecie!&quot;);\n    }\n\n    @Override\n    public void onDisable()\n    {\n        System.out.println(&quot;[StatsSMPCore]&quot; + ChatColor.GREEN + &quot; Goodbye!!!&quot;);\n    }\n}\n\n</code></pre>\n<p>impotrant is to use mariadb so i dont want to change db engine</p>\n<p>i tried code thats upper and using mysql jdbc from mysql</p>\n"},{"tags":["java","spring-boot","junit"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702405737,"creation_date":1702405737,"answer_id":77648320,"question_id":75992699,"body_markdown":"I had a similar issue while serializing an object with an attribute java.time.Instant using Gson when upgrading java from version 11 to 17.\r\n\r\nThis issue answer explains why this happens: https://github.com/google/gson/issues/1979#issuecomment-927943566\r\n\r\nSolution: create Gson by using- new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create()\r\n\r\nexample:\r\n\r\n    Gson gson = new GsonBuilder()\r\n                .excludeFieldsWithoutExposeAnnotation()\r\n                .create();\r\n\r\n\r\n(this answer was adapted from [Praveen Kumar Verma][1]&#39;s answer [here][2])\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/4673240/praveen-kumar-verma\r\n  [2]: https://stackoverflow.com/a/77357819/4326295","link":"https://stackoverflow.com/questions/75992699/junit-test-case-causing-jsonioexception-for-java-time-zoneddatetimedatetime/77648320#77648320","title":"Junit test case causing JsonIOException for java.time.ZonedDateTime#dateTime","body":"<p>I had a similar issue while serializing an object with an attribute java.time.Instant using Gson when upgrading java from version 11 to 17.</p>\n<p>This issue answer explains why this happens: <a href=\"https://github.com/google/gson/issues/1979#issuecomment-927943566\" rel=\"nofollow noreferrer\">https://github.com/google/gson/issues/1979#issuecomment-927943566</a></p>\n<p>Solution: create Gson by using- new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create()</p>\n<p>example:</p>\n<pre><code>Gson gson = new GsonBuilder()\n            .excludeFieldsWithoutExposeAnnotation()\n            .create();\n</code></pre>\n<p>(this answer was adapted from <a href=\"https://stackoverflow.com/users/4673240/praveen-kumar-verma\">Praveen Kumar Verma</a>'s answer <a href=\"https://stackoverflow.com/a/77357819/4326295\">here</a>)</p>\n"}],"comment_count":0,"is_answered":false,"view_count":177,"answer_count":1,"score":0,"last_activity_date":1702405737,"creation_date":1681282531,"question_id":75992699,"body_markdown":"I am facing same issue as mentioned here in the following question  https://stackoverflow.com/questions/72769462/failed-making-field-property-accessible-either-change-its-visibility-or-write \r\nbut for a inbuilt class java.time.ZonedDateTime#dateTime. and i dont have module-info as my application is migrated from java 8 to java 11. This is happening while running a junit test case which uses ZonedDateTime object. please let me know how can I overcome the issue. complete trace\r\n\r\n    com.google.gson.JsonIOException: Failed making field &#39;java.time.ZonedDateTime#dateTime&#39; accessible; either increase its visibility or write a custom TypeAdapter for its declaring type.\r\n\tat app//com.google.gson.internal.reflect.ReflectionHelper.makeAccessible(ReflectionHelper.java:38)\r\n\tat app//com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:287)\r\n\tat app//com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:130)\r\n\tat app//com.google.gson.Gson.getAdapter(Gson.java:546)\r\n\tat app//com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:55)\r\n\tat app//com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:196)\r\n\tat app//com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:366)\r\n\tat app//com.google.gson.internal.bind.ObjectTypeAdapter.write(ObjectTypeAdapter.java:183)\r\n\tat app//com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:70)\r\n\tat app//com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.write(MapTypeAdapterFactory.java:207)\r\n\tat app//com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.write(MapTypeAdapterFactory.java:144)\r\n\tat app//com.google.gson.Gson.toJson(Gson.java:825)\r\n\tat app//com.google.gson.Gson.toJson(Gson.java:795)\r\n\tat app//com.google.gson.Gson.toJson(Gson.java:742)\r\n\tat app//com.google.gson.Gson.toJson(Gson.java:719)\r\n\tat java.base@17.0.6/java.util.HashMap$EntrySpliterator.forEachRemaining(HashMap.java:1850)\r\n\tat java.base@17.0.6/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat java.base@17.0.6/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n\tat java.base@17.0.6/java.util.stream.ReferencePipeline$15$1.accept(ReferencePipeline.java:541)\r\n\tat java.base@17.0.6/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base@17.0.6/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base@17.0.6/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base@17.0.6/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\r\n\tat java.base@17.0.6/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\r\n\tat java.base@17.0.6/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base@17.0.6/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\r\n\tat java.base@17.0.6/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base@17.0.6/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base@17.0.6/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base@17.0.6/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat app//org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n\tat app//org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat app//org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat app//org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat app//org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat app//org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat app//org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat app//org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat app//org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat app//org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat app//org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat app//org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat app//org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat app//org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat app//org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\r\n\tat app//org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat app//org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\r\n\tat app//org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\r\n\tat app//org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat app//org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat app//org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat app//org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base@17.0.6/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat app//org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat app//org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat app//org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat app//org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base@17.0.6/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat app//org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat app//org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat app//org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat app//org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat app//org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat app//org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat app//org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat app//org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat app//org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat app//org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat app//org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat app//org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat app//org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat app//org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat app//org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:110)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:90)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:85)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)\r\n\tat java.base@17.0.6/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base@17.0.6/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base@17.0.6/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base@17.0.6/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy5.stop(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\r\n\tat org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)\r\n\tat app//worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\r\n\tat app//worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\r\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.time.LocalDateTime java.time.ZonedDateTime.dateTime accessible: module java.base does not &quot;opens java.time&quot; to unnamed module @58ceff1\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\r\n\tat java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\r\n\tat java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\r\n\tat com.google.gson.internal.reflect.ReflectionHelper.makeAccessible(ReflectionHelper.java:35)\r\n\t... 114 more","link":"https://stackoverflow.com/questions/75992699/junit-test-case-causing-jsonioexception-for-java-time-zoneddatetimedatetime","title":"Junit test case causing JsonIOException for java.time.ZonedDateTime#dateTime","body":"<p>I am facing same issue as mentioned here in the following question  <a href=\"https://stackoverflow.com/questions/72769462/failed-making-field-property-accessible-either-change-its-visibility-or-write\">Failed making field &#39;property&#39; accessible; either change its visibility or write a custom TypeAdapter for its declaring type, gSON fromJson</a>\nbut for a inbuilt class java.time.ZonedDateTime#dateTime. and i dont have module-info as my application is migrated from java 8 to java 11. This is happening while running a junit test case which uses ZonedDateTime object. please let me know how can I overcome the issue. complete trace</p>\n<pre><code>com.google.gson.JsonIOException: Failed making field 'java.time.ZonedDateTime#dateTime' accessible; either increase its visibility or write a custom TypeAdapter for its declaring type.\nat app//com.google.gson.internal.reflect.ReflectionHelper.makeAccessible(ReflectionHelper.java:38)\nat app//com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:287)\nat app//com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:130)\nat app//com.google.gson.Gson.getAdapter(Gson.java:546)\nat app//com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:55)\nat app//com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:196)\nat app//com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:366)\nat app//com.google.gson.internal.bind.ObjectTypeAdapter.write(ObjectTypeAdapter.java:183)\nat app//com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:70)\nat app//com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.write(MapTypeAdapterFactory.java:207)\nat app//com.google.gson.internal.bind.MapTypeAdapterFactory$Adapter.write(MapTypeAdapterFactory.java:144)\nat app//com.google.gson.Gson.toJson(Gson.java:825)\nat app//com.google.gson.Gson.toJson(Gson.java:795)\nat app//com.google.gson.Gson.toJson(Gson.java:742)\nat app//com.google.gson.Gson.toJson(Gson.java:719)\nat java.base@17.0.6/java.util.HashMap$EntrySpliterator.forEachRemaining(HashMap.java:1850)\nat java.base@17.0.6/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\nat java.base@17.0.6/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\nat java.base@17.0.6/java.util.stream.ReferencePipeline$15$1.accept(ReferencePipeline.java:541)\nat java.base@17.0.6/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\nat java.base@17.0.6/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\nat java.base@17.0.6/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\nat java.base@17.0.6/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\nat java.base@17.0.6/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\nat java.base@17.0.6/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\nat java.base@17.0.6/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)\nat java.base@17.0.6/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base@17.0.6/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\nat java.base@17.0.6/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base@17.0.6/java.lang.reflect.Method.invoke(Method.java:568)\nat app//org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\nat app//org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\nat app//org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\nat app//org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\nat app//org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\nat app//org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\nat app//org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\nat app//org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\nat app//org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\nat app//org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\nat app//org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\nat app//org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\nat app//org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\nat app//org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\nat app//org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\nat app//org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat app//org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\nat app//org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\nat app//org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\nat app//org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\nat app//org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\nat app//org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\nat java.base@17.0.6/java.util.ArrayList.forEach(ArrayList.java:1511)\nat app//org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\nat app//org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\nat app//org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\nat app//org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\nat java.base@17.0.6/java.util.ArrayList.forEach(ArrayList.java:1511)\nat app//org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\nat app//org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\nat app//org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\nat app//org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\nat app//org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\nat app//org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\nat app//org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\nat app//org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\nat app//org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\nat app//org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\nat app//org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\nat app//org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\nat app//org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\nat app//org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\nat app//org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\nat app//org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\nat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:110)\nat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:90)\nat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:85)\nat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)\nat java.base@17.0.6/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base@17.0.6/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\nat java.base@17.0.6/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base@17.0.6/java.lang.reflect.Method.invoke(Method.java:568)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\nat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\nat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\nat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\nat jdk.proxy2/jdk.proxy2.$Proxy5.stop(Unknown Source)\nat org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)\nat org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\nat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\nat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\nat org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\nat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)\nat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)\nat app//worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\nat app//worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\n</code></pre>\n<p>Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.time.LocalDateTime java.time.ZonedDateTime.dateTime accessible: module java.base does not &quot;opens java.time&quot; to unnamed module @58ceff1\nat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\nat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\nat java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\nat java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\nat com.google.gson.internal.reflect.ReflectionHelper.makeAccessible(ReflectionHelper.java:35)\n... 114 more</p>\n"},{"tags":["java","android","android-studio","indexoutofboundsexception"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702405260,"last_edit_date":1702405260,"creation_date":1696849521,"answer_id":77258291,"question_id":75335792,"body_markdown":"Finally i found the answer, there was nothing to do with the bluetooth connections or something like that, it was a TextView wich i am using as log, when i empty the log to append new text for some reason it causes the exception that it posted below, so if someone is struggling with this, check if you are emptying some textview and trying to append text after or something like that.\r\n\r\nThe only thing that gived me a clue was the lines on the exception that mention the textview class;\r\n\r\n    at android.widget.TextView.onDraw(TextView.java:8852)\r\n\r\n","link":"https://stackoverflow.com/questions/75335792/android-app-indexoutofboundsexception-on-packedintvector/77258291#77258291","title":"Android app IndexOutOfBoundsException on PackedIntVector","body":"<p>Finally i found the answer, there was nothing to do with the bluetooth connections or something like that, it was a TextView wich i am using as log, when i empty the log to append new text for some reason it causes the exception that it posted below, so if someone is struggling with this, check if you are emptying some textview and trying to append text after or something like that.</p>\n<p>The only thing that gived me a clue was the lines on the exception that mention the textview class;</p>\n<pre><code>at android.widget.TextView.onDraw(TextView.java:8852)\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":265,"answer_count":1,"score":3,"last_activity_date":1702405260,"creation_date":1675427552,"question_id":75335792,"body_markdown":"i am developing an Android app that communicates with Bluetooth sending and receiving raw commands on byte array.\r\n\r\nRandomly the app crashes right after i send some of this command, with the following excepcion;\r\n\r\n     `Process: xxx.xxx.xxx, PID: 19983\r\n        java.lang.IndexOutOfBoundsException: 2, 1\r\n        at android.text.PackedIntVector.getValue(PackedIntVector.java:75)\r\n        at android.text.DynamicLayout.getLineTop(DynamicLayout.java:1010)\r\n        at android.text.Layout.getLineBottom(Layout.java:1725)\r\n        at android.widget.Editor.drawHardwareAcceleratedInner(Editor.java:2310)\r\n        at android.widget.Editor.drawHardwareAccelerated(Editor.java:2251)\r\n        at android.widget.Editor.onDraw(Editor.java:2191)\r\n        at android.widget.TextView.onDraw(TextView.java:8852)\r\n        at android.view.View.draw(View.java:23901)`\r\n  \r\n\r\nAs i understand the problem is on the PackedIntVector.java class, but its an Android class and on the stack trace there isn`t any of my app files, all are from Android classes.\r\n\r\nDoes anybody know what could be happening? The excepcion always happen right after sending a command and not always happen, but i have not found any thtat triggers it, seems &quot;random&quot;.\r\n\r\nThanks in advice!","link":"https://stackoverflow.com/questions/75335792/android-app-indexoutofboundsexception-on-packedintvector","title":"Android app IndexOutOfBoundsException on PackedIntVector","body":"<p>i am developing an Android app that communicates with Bluetooth sending and receiving raw commands on byte array.</p>\n<p>Randomly the app crashes right after i send some of this command, with the following excepcion;</p>\n<pre><code> `Process: xxx.xxx.xxx, PID: 19983\n    java.lang.IndexOutOfBoundsException: 2, 1\n    at android.text.PackedIntVector.getValue(PackedIntVector.java:75)\n    at android.text.DynamicLayout.getLineTop(DynamicLayout.java:1010)\n    at android.text.Layout.getLineBottom(Layout.java:1725)\n    at android.widget.Editor.drawHardwareAcceleratedInner(Editor.java:2310)\n    at android.widget.Editor.drawHardwareAccelerated(Editor.java:2251)\n    at android.widget.Editor.onDraw(Editor.java:2191)\n    at android.widget.TextView.onDraw(TextView.java:8852)\n    at android.view.View.draw(View.java:23901)`\n</code></pre>\n<p>As i understand the problem is on the PackedIntVector.java class, but its an Android class and on the stack trace there isn`t any of my app files, all are from Android classes.</p>\n<p>Does anybody know what could be happening? The excepcion always happen right after sending a command and not always happen, but i have not found any thtat triggers it, seems &quot;random&quot;.</p>\n<p>Thanks in advice!</p>\n"},{"tags":["java","android","usb","usbserial"],"comments":[{"score":0,"post_type":"question","creation_date":1701097315,"post_id":77557031,"comment_id":136729377,"body_markdown":"I see where you send data to the device but where do you read the response?","link":"https://stackoverflow.com/questions/77557031/usb-serial-for-android-echo-only#comment136729377_77557031","body":"I see where you send data to the device but where do you read the response?"},{"score":0,"post_type":"question","creation_date":1701098813,"post_id":77557031,"comment_id":136729766,"body_markdown":"I have forgotten to add the method to read, it&#39;s added","link":"https://stackoverflow.com/questions/77557031/usb-serial-for-android-echo-only#comment136729766_77557031","body":"I have forgotten to add the method to read, it&#39;s added"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702391275,"creation_date":1702391275,"answer_id":77646829,"question_id":77557031,"body_markdown":"Finaly I succed to read data with my usb device\r\nI was pretty dumb with my textview too small, I didn&#39;t realize in the answer I had the echo AND the response I needed\r\n\r\nI Just use somme String functions to delete echo and it&#39;s all OK now. Sorry for the inconvenience","link":"https://stackoverflow.com/questions/77557031/usb-serial-for-android-echo-only/77646829#77646829","title":"USB Serial For Android - Echo only","body":"<p>Finaly I succed to read data with my usb device\nI was pretty dumb with my textview too small, I didn't realize in the answer I had the echo AND the response I needed</p>\n<p>I Just use somme String functions to delete echo and it's all OK now. Sorry for the inconvenience</p>\n"}],"comment_count":2,"is_answered":true,"view_count":63,"answer_count":1,"score":0,"last_activity_date":1702391275,"creation_date":1701089399,"last_edit_date":1701098267,"question_id":77557031,"body_markdown":"I use usb-serial-[for-android project ](https://github.com/mik3y/usb-serial-for-android) to communicate with a device pluged in USB\r\nI can detect the device, open the port and send data BUT data received is always the data I just sent before\r\n\r\nI Also update the manifest to detect when the usb device is pluged or unpluged and run the application to manage it.\r\n\r\nThere is the code I use. Am I missing something?\r\n\r\n```\r\nUsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);\r\n    UsbSerialProber usbDefaultProber = UsbSerialProber.getDefaultProber();\r\n\r\n    HashMap&lt;String, UsbDevice&gt; deviceList = manager.getDeviceList();\r\n    if (deviceList.isEmpty()) {\r\n        Toast.makeText(this, &quot;Aucun ph&#233;riph&#233;rique USB detect&#233;&quot;, Toast.LENGTH_LONG).show();\r\n        infos.setText(&quot;Aucun ph&#233;riph&#233;rique USB detect&#233;&quot;);\r\n    }\r\n\r\n    for (UsbDevice device : deviceList.values()) {\r\n        Toast.makeText(this, &quot;Device detect&#233; =&quot; + device.getProductName(), Toast.LENGTH_LONG).show();\r\n        Toast.makeText(this, &quot;Device Vendor =&quot; + device.getVendorId() + &quot; Product Id = &quot; + device.getProductId(), Toast.LENGTH_LONG).show();\r\n        UsbSerialDriver driver = usbDefaultProber.probeDevice(device);\r\n        if (driver == null) {\r\n            ProbeTable customTable = new ProbeTable();\r\n            customTable.addProduct(device.getVendorId(), device.getProductId(), Cp21xxSerialDriver.class);\r\n            UsbSerialProber customProber = new UsbSerialProber(customTable);\r\n            driver = customProber.probeDevice(device);\r\n        }\r\n        if (driver != null) {\r\n            Context c = getApplicationContext();\r\n            PendingIntent pendingIntent;\r\n            Intent notificationIntent = new Intent();\r\n            if (android.os.Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\r\n                pendingIntent = PendingIntent.getActivity(c,\r\n                        0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_MUTABLE);\r\n\r\n            } else {\r\n                pendingIntent = PendingIntent.getActivity(c,\r\n                        0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n            }\r\n            while (!manager.hasPermission(device)) {\r\n                manager.requestPermission(device, pendingIntent);\r\n            }\r\n            UsbDeviceConnection connection = manager.openDevice(device);\r\n            if (connection == null) {\r\n                Toast.makeText(this, &quot;Connexion impossible&quot;, Toast.LENGTH_LONG).show();\r\n                return;\r\n            }\r\n            infos.setText(&quot;Envoi en cours...&quot;);\r\n            Thread.sleep(1000);\r\n            Toast.makeText(this, &quot;Envoi en cours...&quot;, Toast.LENGTH_LONG).show();\r\n            UsbSerialPort port = driver.getPorts().get(0); // Most devices have just one port (port 0)\r\n            port.open(connection);\r\n            port.setParameters(1200, 8, UsbSerialPort.STOPBITS_2, UsbSerialPort.PARITY_NONE);\r\n            request = new byte[port.getReadEndpoint().getMaxPacketSize()];\r\n            request[0] = hexIntToByte(0x80);\r\n            request[1] = hexIntToByte(0x3F);\r\n            request[2] = hexIntToByte(0x01);           \r\n            byte crcMSByte = hexIntToByte(0x05);\r\n            byte crcLSByte = hexIntToByte(0x8A);\r\n            request[3] = crcMSByte;//CRC MSByte\r\n            request[4] = crcLSByte;//CRC LSByte\r\n            request[5] = hexIntToByte(0x0D);//Stop Byte\r\n            SerialInputOutputManager usbIoManager = new SerialInputOutputManager(port, this);\r\n            usbIoManager.start();\r\n            port.write(request, 0);\r\n            String infosText;\r\n            infosText = &quot;Informations \\n&quot;;\r\n            infosText += &quot;Data envoy&#233;e = &quot; + byteArrayToHexString(request) + &quot;\\n&quot;;\r\n            infos.setText(infosText);\r\n\r\n        } else {\r\n            Toast.makeText(this, &quot;AUCUN Driver disponible&quot;, Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n\r\n    spinner.setVisibility(View.GONE);\r\n    } catch (Exception e) {\r\n        String erreur = e.toString();\r\n        Toast.makeText(this, &quot;Erreur = &quot; + erreur, Toast.LENGTH_LONG).show();\r\n        String erreurText;\r\n        erreurText = &quot;ERREUR \\n&quot;;\r\n        erreurText += &quot;Data envoy&#233;e = &quot; + byteArrayToHexString(request) + &quot;\\n&quot;;\r\n        erreurText += &quot;Erreur Message = &quot; + erreur + &quot;\\n&quot;;\r\n        infos.setText(erreurText);\r\n        spinner.setVisibility(View.GONE);\r\n\r\n    }  \r\n```\r\nTo read the data I have another method below\r\n\r\n    @Override\r\n    public void onNewData(byte[] data) {\r\n        runOnUiThread(() -&gt; { infos.append(byteArrayToHexString(data)); });\r\n    }","link":"https://stackoverflow.com/questions/77557031/usb-serial-for-android-echo-only","title":"USB Serial For Android - Echo only","body":"<p>I use usb-serial-<a href=\"https://github.com/mik3y/usb-serial-for-android\" rel=\"nofollow noreferrer\">for-android project </a> to communicate with a device pluged in USB\nI can detect the device, open the port and send data BUT data received is always the data I just sent before</p>\n<p>I Also update the manifest to detect when the usb device is pluged or unpluged and run the application to manage it.</p>\n<p>There is the code I use. Am I missing something?</p>\n<pre><code>UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);\n    UsbSerialProber usbDefaultProber = UsbSerialProber.getDefaultProber();\n\n    HashMap&lt;String, UsbDevice&gt; deviceList = manager.getDeviceList();\n    if (deviceList.isEmpty()) {\n        Toast.makeText(this, &quot;Aucun phériphérique USB detecté&quot;, Toast.LENGTH_LONG).show();\n        infos.setText(&quot;Aucun phériphérique USB detecté&quot;);\n    }\n\n    for (UsbDevice device : deviceList.values()) {\n        Toast.makeText(this, &quot;Device detecté =&quot; + device.getProductName(), Toast.LENGTH_LONG).show();\n        Toast.makeText(this, &quot;Device Vendor =&quot; + device.getVendorId() + &quot; Product Id = &quot; + device.getProductId(), Toast.LENGTH_LONG).show();\n        UsbSerialDriver driver = usbDefaultProber.probeDevice(device);\n        if (driver == null) {\n            ProbeTable customTable = new ProbeTable();\n            customTable.addProduct(device.getVendorId(), device.getProductId(), Cp21xxSerialDriver.class);\n            UsbSerialProber customProber = new UsbSerialProber(customTable);\n            driver = customProber.probeDevice(device);\n        }\n        if (driver != null) {\n            Context c = getApplicationContext();\n            PendingIntent pendingIntent;\n            Intent notificationIntent = new Intent();\n            if (android.os.Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) {\n                pendingIntent = PendingIntent.getActivity(c,\n                        0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_MUTABLE);\n\n            } else {\n                pendingIntent = PendingIntent.getActivity(c,\n                        0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);\n\n            }\n            while (!manager.hasPermission(device)) {\n                manager.requestPermission(device, pendingIntent);\n            }\n            UsbDeviceConnection connection = manager.openDevice(device);\n            if (connection == null) {\n                Toast.makeText(this, &quot;Connexion impossible&quot;, Toast.LENGTH_LONG).show();\n                return;\n            }\n            infos.setText(&quot;Envoi en cours...&quot;);\n            Thread.sleep(1000);\n            Toast.makeText(this, &quot;Envoi en cours...&quot;, Toast.LENGTH_LONG).show();\n            UsbSerialPort port = driver.getPorts().get(0); // Most devices have just one port (port 0)\n            port.open(connection);\n            port.setParameters(1200, 8, UsbSerialPort.STOPBITS_2, UsbSerialPort.PARITY_NONE);\n            request = new byte[port.getReadEndpoint().getMaxPacketSize()];\n            request[0] = hexIntToByte(0x80);\n            request[1] = hexIntToByte(0x3F);\n            request[2] = hexIntToByte(0x01);           \n            byte crcMSByte = hexIntToByte(0x05);\n            byte crcLSByte = hexIntToByte(0x8A);\n            request[3] = crcMSByte;//CRC MSByte\n            request[4] = crcLSByte;//CRC LSByte\n            request[5] = hexIntToByte(0x0D);//Stop Byte\n            SerialInputOutputManager usbIoManager = new SerialInputOutputManager(port, this);\n            usbIoManager.start();\n            port.write(request, 0);\n            String infosText;\n            infosText = &quot;Informations \\n&quot;;\n            infosText += &quot;Data envoyée = &quot; + byteArrayToHexString(request) + &quot;\\n&quot;;\n            infos.setText(infosText);\n\n        } else {\n            Toast.makeText(this, &quot;AUCUN Driver disponible&quot;, Toast.LENGTH_LONG).show();\n        }\n    }\n\n    spinner.setVisibility(View.GONE);\n    } catch (Exception e) {\n        String erreur = e.toString();\n        Toast.makeText(this, &quot;Erreur = &quot; + erreur, Toast.LENGTH_LONG).show();\n        String erreurText;\n        erreurText = &quot;ERREUR \\n&quot;;\n        erreurText += &quot;Data envoyée = &quot; + byteArrayToHexString(request) + &quot;\\n&quot;;\n        erreurText += &quot;Erreur Message = &quot; + erreur + &quot;\\n&quot;;\n        infos.setText(erreurText);\n        spinner.setVisibility(View.GONE);\n\n    }  \n</code></pre>\n<p>To read the data I have another method below</p>\n<pre><code>@Override\npublic void onNewData(byte[] data) {\n    runOnUiThread(() -&gt; { infos.append(byteArrayToHexString(data)); });\n}\n</code></pre>\n"},{"tags":["java","jvm"],"comments":[{"score":0,"post_type":"question","creation_date":1696325498,"post_id":77220932,"comment_id":136135333,"body_markdown":"What&#39;s preventing you from running it and seeing for yourself?","link":"https://stackoverflow.com/questions/77220932/is-it-possible-to-use-in-add-exports-jvm-option#comment136135333_77220932","body":"What&#39;s preventing you from running it and seeing for yourself?"},{"score":0,"post_type":"question","creation_date":1696333200,"post_id":77220932,"comment_id":136136630,"body_markdown":"I ran it and the test failed, that&#39;s why I am asking if I have not added correctly the option or it is just impossible. Are you aware of that @Michael?","link":"https://stackoverflow.com/questions/77220932/is-it-possible-to-use-in-add-exports-jvm-option#comment136136630_77220932","body":"I ran it and the test failed, that&#39;s why I am asking if I have not added correctly the option or it is just impossible. Are you aware of that @Michael?"},{"score":1,"post_type":"question","creation_date":1696333936,"post_id":77220932,"comment_id":136136782,"body_markdown":"If you tried and it didn&#39;t work, then obviously you can&#39;t. Using `--add-exports` and `--add-opens` should only be used in exceptional circumstances. Likely this also informed a design where wildcards are not supported. If you find the need to add it a lot (or for a lot of packages), then you&#39;&#39;re probably doing something wrong.","link":"https://stackoverflow.com/questions/77220932/is-it-possible-to-use-in-add-exports-jvm-option#comment136136782_77220932","body":"If you tried and it didn&#39;t work, then obviously you can&#39;t. Using <code>--add-exports</code> and <code>--add-opens</code> should only be used in exceptional circumstances. Likely this also informed a design where wildcards are not supported. If you find the need to add it a lot (or for a lot of packages), then you&#39;&#39;re probably doing something wrong."},{"score":0,"post_type":"question","creation_date":1696350685,"post_id":77220932,"comment_id":136140373,"body_markdown":"I don’t think there’s any way to do this.  I sympathize with your problem, but honestly, the difficult solution is probably the better solution:  find out what each library is trying to access and grant that permission explicitly.  If possible, upgrade to versions of libraries which are themselves Java modules.","link":"https://stackoverflow.com/questions/77220932/is-it-possible-to-use-in-add-exports-jvm-option#comment136140373_77220932","body":"I don’t think there’s any way to do this.  I sympathize with your problem, but honestly, the difficult solution is probably the better solution:  find out what each library is trying to access and grant that permission explicitly.  If possible, upgrade to versions of libraries which are themselves Java modules."},{"score":0,"post_type":"question","creation_date":1696409609,"post_id":77220932,"comment_id":136147793,"body_markdown":"You can expect those 3rd party libraries to crash anyway, as internal APIs have changed or been removed. And you can expect more changes and more removals in the future.","link":"https://stackoverflow.com/questions/77220932/is-it-possible-to-use-in-add-exports-jvm-option#comment136147793_77220932","body":"You can expect those 3rd party libraries to crash anyway, as internal APIs have changed or been removed. And you can expect more changes and more removals in the future."}],"comment_count":5,"is_answered":false,"view_count":95,"answer_count":0,"score":0,"last_activity_date":1702391100,"creation_date":1696323792,"last_edit_date":1702391100,"question_id":77220932,"body_markdown":"\r\n**NB! I know I can open access to that particular package, however my goal is to open access to all internal JDK APIs**\r\nI want to open the access to internal JDK APIs for my project, which I am migrating to JRE 17. I do not know which 3rd party libraries use which internal jdk apis so to be safe I want to open the access to all internal packages like that:\r\n\r\n```\r\n--add-exports java.*/sun.*=ALL-UNNAMED --add-exports java.*/com.sun.*=ALL-UNNAMED\r\n```\r\nI started the VM with that option, no complaints were printed but the test that was failing continued to fail with \r\n``` \r\ncannot access class sun.security.provider.certpath.OCSP (in module java.base) because module java.base does not export sun.security.provider.certpath to unnamed module @0x23f682d2\r\n```\r\n**TLDR: It is not possible**","link":"https://stackoverflow.com/questions/77220932/is-it-possible-to-use-in-add-exports-jvm-option","title":"Is it possible to use &quot;*&quot; in &quot;--add-exports&quot; JVM option?","body":"<p><strong>NB! I know I can open access to that particular package, however my goal is to open access to all internal JDK APIs</strong>\nI want to open the access to internal JDK APIs for my project, which I am migrating to JRE 17. I do not know which 3rd party libraries use which internal jdk apis so to be safe I want to open the access to all internal packages like that:</p>\n<pre><code>--add-exports java.*/sun.*=ALL-UNNAMED --add-exports java.*/com.sun.*=ALL-UNNAMED\n</code></pre>\n<p>I started the VM with that option, no complaints were printed but the test that was failing continued to fail with</p>\n<pre><code>cannot access class sun.security.provider.certpath.OCSP (in module java.base) because module java.base does not export sun.security.provider.certpath to unnamed module @0x23f682d2\n</code></pre>\n<p><strong>TLDR: It is not possible</strong></p>\n"},{"tags":["java","jvm","garbage-collection","graalvm","graalvm-native-image"],"answers":[{"comment_count":0,"score":-1,"last_activity_date":1702390289,"last_edit_date":1702390289,"creation_date":1701384272,"answer_id":77582077,"question_id":77582040,"body_markdown":"Yes, the GC also works in applications packaged with `native-image`. This is explained in the [Memory Management](https://www.graalvm.org/latest/reference-manual/native-image/optimizations-and-performance/MemoryManagement/) section of the docs.\r\n\r\nThe GC will still manage objects created by the application. However, `native-image` might perform optimizations so that some objects are allocated on the stack or freed immediately when they aren&#39;t needed any more if it is able to detect that.\r\n\r\nYou can even select a GC using the `--gc` argument to `native-image`. You can use the following GCs:\r\n- **Serial GC**: This GC has minimal footprint but only uses a single thread for garbage collection and might pause the application during that. It is also the default GC for normal Java applications (not native-image) with small heap sizes and it is the default for applications packaged with `native-image`.\r\n- **G1**: The G1 GC optimizes for throughput, uses multiple threads and has lower pause times than Serial GC. It is the default GC for normal Java applications (not native-image) that don&#39;t have small heap sizes. This GC is only available if you are using Oracle GraalVM, it doesn&#39;t work with GraalVM Community Edition.\r\n- **Epsilon**: The Epsilon GC doesn&#39;t do any garbage collection. If memory is full, the application will crash. This might be useful for testing, if you have small scripts that don&#39;t need any garbage collection or have a real-time application that can afford to restart regularly to avoid GC pauses or similar.\r\n\r\nThere is also work on making ZGC available on native-image.","link":"https://stackoverflow.com/questions/77582040/does-the-native-executable-that-is-created-by-graalvm-compiler-includes-memory-m/77582077#77582077","title":"Does the native executable that is created by graalvm compiler includes memory management and GC?","body":"<p>Yes, the GC also works in applications packaged with <code>native-image</code>. This is explained in the <a href=\"https://www.graalvm.org/latest/reference-manual/native-image/optimizations-and-performance/MemoryManagement/\" rel=\"nofollow noreferrer\">Memory Management</a> section of the docs.</p>\n<p>The GC will still manage objects created by the application. However, <code>native-image</code> might perform optimizations so that some objects are allocated on the stack or freed immediately when they aren't needed any more if it is able to detect that.</p>\n<p>You can even select a GC using the <code>--gc</code> argument to <code>native-image</code>. You can use the following GCs:</p>\n<ul>\n<li><strong>Serial GC</strong>: This GC has minimal footprint but only uses a single thread for garbage collection and might pause the application during that. It is also the default GC for normal Java applications (not native-image) with small heap sizes and it is the default for applications packaged with <code>native-image</code>.</li>\n<li><strong>G1</strong>: The G1 GC optimizes for throughput, uses multiple threads and has lower pause times than Serial GC. It is the default GC for normal Java applications (not native-image) that don't have small heap sizes. This GC is only available if you are using Oracle GraalVM, it doesn't work with GraalVM Community Edition.</li>\n<li><strong>Epsilon</strong>: The Epsilon GC doesn't do any garbage collection. If memory is full, the application will crash. This might be useful for testing, if you have small scripts that don't need any garbage collection or have a real-time application that can afford to restart regularly to avoid GC pauses or similar.</li>\n</ul>\n<p>There is also work on making ZGC available on native-image.</p>\n"}],"comment_count":0,"is_answered":false,"view_count":39,"answer_count":1,"score":-1,"last_activity_date":1702390289,"creation_date":1701383385,"question_id":77582040,"body_markdown":"I have been exploring graalvm and couldnt find an answer for this. Since the native executable that is created by graalvm compiler can run on any VM without Graalvm or JVM, what takes care of the memory management and GC? Does the native executable that is created by graalvm compiler includes memory management, GC an other things required during runtime? \r\n\r\nCouldn&#39;t find a clear explanation for this in the documentation","link":"https://stackoverflow.com/questions/77582040/does-the-native-executable-that-is-created-by-graalvm-compiler-includes-memory-m","title":"Does the native executable that is created by graalvm compiler includes memory management and GC?","body":"<p>I have been exploring graalvm and couldnt find an answer for this. Since the native executable that is created by graalvm compiler can run on any VM without Graalvm or JVM, what takes care of the memory management and GC? Does the native executable that is created by graalvm compiler includes memory management, GC an other things required during runtime?</p>\n<p>Couldn't find a clear explanation for this in the documentation</p>\n"},{"tags":["java","spring","spring-boot","tomcat","spring-profiles"],"comments":[{"score":0,"post_type":"question","creation_date":1675933093,"post_id":75364007,"comment_id":133035252,"body_markdown":"&quot;Here the problem is the other profiles should not spin a tomcat server, it should act only as a Kafka consumer&quot; - how do you plan on running the consumer, if not on a tomcat server or any other server?","link":"https://stackoverflow.com/questions/75364007/spring-boot-enable-disable-tomcat-or-kafka-consumer-based-on-the-profile#comment133035252_75364007","body":"&quot;Here the problem is the other profiles should not spin a tomcat server, it should act only as a Kafka consumer&quot; - how do you plan on running the consumer, if not on a tomcat server or any other server?"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1675942203,"creation_date":1675942203,"answer_id":75397964,"question_id":75364007,"body_markdown":"First you have to disbale the auto configuration for the embeded tomcat in the starter class to avoid deploying the tomcat:\r\n\r\n    @SpringBootApplication(exclude = {EmbeddedServletContainerAutoConfiguration.class, \r\n                                      WebMvcAutoConfiguration.class})\r\n    public class Application {\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n    }\r\n\r\nand then add the following property to your kafka config (non-Rest profiles):\r\n\r\n    spring.main.web-environment=false\r\n\r\nnow you have disabled auto-deployment of the integrated tomcat in spring boot. Now add the following configuration to your Rest profile to enable tomcat (only for this profile):\r\n\r\n    @Profile({&quot;REST&quot;})\r\n    @Configuration\r\n    // importing EmbeddedServletContainerAutoConfiguration delays the autoconfiguration until the profile load into context\r\n    @Import(EmbeddedServletContainerAutoConfiguration.class)\r\n    public class HttpConfiguration {\r\n        // ...\r\n    }\r\n\r\nand afterwards you have configure your kafka dynamically. You can find a solution for that in [Control enabling/disabling Kafka consumers in Spring Boot][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/54426658/control-enabling-disabling-kafka-consumers-in-spring-boot","link":"https://stackoverflow.com/questions/75364007/spring-boot-enable-disable-tomcat-or-kafka-consumer-based-on-the-profile/75397964#75397964","title":"Spring boot enable/disable tomcat or kafka consumer based on the profile","body":"<p>First you have to disbale the auto configuration for the embeded tomcat in the starter class to avoid deploying the tomcat:</p>\n<pre><code>@SpringBootApplication(exclude = {EmbeddedServletContainerAutoConfiguration.class, \n                                  WebMvcAutoConfiguration.class})\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n<p>and then add the following property to your kafka config (non-Rest profiles):</p>\n<pre><code>spring.main.web-environment=false\n</code></pre>\n<p>now you have disabled auto-deployment of the integrated tomcat in spring boot. Now add the following configuration to your Rest profile to enable tomcat (only for this profile):</p>\n<pre><code>@Profile({&quot;REST&quot;})\n@Configuration\n// importing EmbeddedServletContainerAutoConfiguration delays the autoconfiguration until the profile load into context\n@Import(EmbeddedServletContainerAutoConfiguration.class)\npublic class HttpConfiguration {\n    // ...\n}\n</code></pre>\n<p>and afterwards you have configure your kafka dynamically. You can find a solution for that in <a href=\"https://stackoverflow.com/questions/54426658/control-enabling-disabling-kafka-consumers-in-spring-boot\">Control enabling/disabling Kafka consumers in Spring Boot</a></p>\n"},{"comment_count":0,"score":0,"last_activity_date":1676360903,"last_edit_date":1676360903,"creation_date":1676287228,"answer_id":75435167,"question_id":75364007,"body_markdown":"Instead of configuring this in code I&#39;d suggest you to create `application-kafka.properties` (or `application-kafka.yml`) and add the following line into it:\r\n```properties\r\nspring.autoconfigure.exclude=org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration\r\n```\r\nThis disables `ServletWebServerFactoryAutoConfiguration` which is a root configuration class for Web environment.\r\n\r\n`-kafka` suffix in properties file name tells Spring to pick it up only when `kafka` profile is active.\r\n\r\nEven better solution is to exclude\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\nfrom built jar. In other words you could have a `pom.xml` two profiles with only required dependencies (shared ones are located in main `dependencies` section). See https://stackoverflow.com/a/167284/12473843. Using this approach you don&#39;t even need specifying excluded autoconfigurations as without `spring-boot-starter-web` in the classpath corresponding started is never activated.","link":"https://stackoverflow.com/questions/75364007/spring-boot-enable-disable-tomcat-or-kafka-consumer-based-on-the-profile/75435167#75435167","title":"Spring boot enable/disable tomcat or kafka consumer based on the profile","body":"<p>Instead of configuring this in code I'd suggest you to create <code>application-kafka.properties</code> (or <code>application-kafka.yml</code>) and add the following line into it:</p>\n<pre><code>spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration\n</code></pre>\n<p>This disables <code>ServletWebServerFactoryAutoConfiguration</code> which is a root configuration class for Web environment.</p>\n<p><code>-kafka</code> suffix in properties file name tells Spring to pick it up only when <code>kafka</code> profile is active.</p>\n<p>Even better solution is to exclude</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>from built jar. In other words you could have a <code>pom.xml</code> two profiles with only required dependencies (shared ones are located in main <code>dependencies</code> section). See <a href=\"https://stackoverflow.com/a/167284/12473843\">https://stackoverflow.com/a/167284/12473843</a>. Using this approach you don't even need specifying excluded autoconfigurations as without <code>spring-boot-starter-web</code> in the classpath corresponding started is never activated.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1702385569,"creation_date":1702385569,"answer_id":77646253,"question_id":75364007,"body_markdown":"Similar kind of issue I faced, while starting Kafka consumer it&#39;s starting tomcat on 8080 port and with another consumer start it was failing with error &quot;Port already in use&quot;\r\n\r\nAppearently previously same code working on spring boot 2.2 version when upgraded to higher version 2.6 it was showing above port in use error.\r\n\r\nBelow pom exclusion worked for me.\r\n\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    ","link":"https://stackoverflow.com/questions/75364007/spring-boot-enable-disable-tomcat-or-kafka-consumer-based-on-the-profile/77646253#77646253","title":"Spring boot enable/disable tomcat or kafka consumer based on the profile","body":"<p>Similar kind of issue I faced, while starting Kafka consumer it's starting tomcat on 8080 port and with another consumer start it was failing with error &quot;Port already in use&quot;</p>\n<p>Appearently previously same code working on spring boot 2.2 version when upgraded to higher version 2.6 it was showing above port in use error.</p>\n<p>Below pom exclusion worked for me.</p>\n<pre><code>&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"comment_count":1,"is_answered":false,"view_count":729,"answer_count":3,"score":1,"last_activity_date":1702385569,"creation_date":1675700819,"question_id":75364007,"body_markdown":"I&#39;m writing a Spring Boot application with several @Configuration classes for rest APIs and for Kafka consumers/producers depending on which @Profile it chooses to initialize. \r\n\r\nThe first configuration class uses the REST interface, and I have these dependencies added.\r\nThis starts up an embedded Tomcat instance and runs fine.\r\n\r\nHere the problem is the other profiles should not spin a tomcat server, it should act only as a Kafka consumer. \r\n\r\nIs there any way to stop spinning the @SpringBootApplication from starting up Tomcat based on profiles? \r\n\r\nI created 2 configuration classes, one for Kafka and one for rest endpoints, and added @Profile annotation for each config class. Can someone guide me on how to stop spin tomcat from my app?\r\n\r\n    &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.1.0.RELEASE&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-batch&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\nMain application:\r\n\r\n    @SpringBootApplication\r\n    @Import(value = {RestScanConfiguration.class, KafkaScanConfiguration.class})\r\n    public class MainApp {\r\n    \r\n        public static void main(final String[] args) {\r\n            SpringApplication.run(MainApp.class, args);\r\n        }\r\n    }\r\n\r\n\r\n\r\nRestScanConfiguration class:\r\n\r\n    \r\n    @Configuration\r\n    @EnableAutoConfiguration\r\n    @ComponentScan(basePackages = &quot;package.app.rest&quot;)\r\n    @Profile(&quot;!kafka&quot;)\r\n    public class RestScanConfiguration {\r\n    }\r\n\r\nKafkaScanConfiguration class:\r\n\r\n   \r\n\r\n     @Configuration\r\n    @EnableAutoConfiguration(\r\n            exclude = {\r\n                    DataSourceAutoConfiguration.class,\r\n                    HibernateJpaAutoConfiguration.class,\r\n                    ElasticsearchDataAutoConfiguration.class\r\n            })\r\n    @ComponentScan(basePackages = {&quot;package.app.kafka&quot;})\r\n    @Profile(&quot;kafka&quot;)\r\n    public class KafkaScanConfiguration {\r\n    }\r\n\r\ncan someone guide me on this?\r\n\r\nHow to stop spinning the tomcat server in Kafka consumer/producer profile. Any help would be appreciated.","link":"https://stackoverflow.com/questions/75364007/spring-boot-enable-disable-tomcat-or-kafka-consumer-based-on-the-profile","title":"Spring boot enable/disable tomcat or kafka consumer based on the profile","body":"<p>I'm writing a Spring Boot application with several @Configuration classes for rest APIs and for Kafka consumers/producers depending on which @Profile it chooses to initialize.</p>\n<p>The first configuration class uses the REST interface, and I have these dependencies added.\nThis starts up an embedded Tomcat instance and runs fine.</p>\n<p>Here the problem is the other profiles should not spin a tomcat server, it should act only as a Kafka consumer.</p>\n<p>Is there any way to stop spinning the @SpringBootApplication from starting up Tomcat based on profiles?</p>\n<p>I created 2 configuration classes, one for Kafka and one for rest endpoints, and added @Profile annotation for each config class. Can someone guide me on how to stop spin tomcat from my app?</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.1.0.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-batch&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n                &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Main application:</p>\n<pre><code>@SpringBootApplication\n@Import(value = {RestScanConfiguration.class, KafkaScanConfiguration.class})\npublic class MainApp {\n\n    public static void main(final String[] args) {\n        SpringApplication.run(MainApp.class, args);\n    }\n}\n</code></pre>\n<p>RestScanConfiguration class:</p>\n<pre><code>@Configuration\n@EnableAutoConfiguration\n@ComponentScan(basePackages = &quot;package.app.rest&quot;)\n@Profile(&quot;!kafka&quot;)\npublic class RestScanConfiguration {\n}\n</code></pre>\n<p>KafkaScanConfiguration class:</p>\n<pre><code> @Configuration\n@EnableAutoConfiguration(\n        exclude = {\n                DataSourceAutoConfiguration.class,\n                HibernateJpaAutoConfiguration.class,\n                ElasticsearchDataAutoConfiguration.class\n        })\n@ComponentScan(basePackages = {&quot;package.app.kafka&quot;})\n@Profile(&quot;kafka&quot;)\npublic class KafkaScanConfiguration {\n}\n</code></pre>\n<p>can someone guide me on this?</p>\n<p>How to stop spinning the tomcat server in Kafka consumer/producer profile. Any help would be appreciated.</p>\n"},{"tags":["java","maven","openapi","openapi-generator","openapi-generator-maven-plugin"],"comments":[{"score":1,"post_type":"question","creation_date":1687511505,"post_id":76537599,"comment_id":134950292,"body_markdown":"First you should use a more recent version of the openapi-generator-maven-plugin.. (6.X+ see https://central.sonatype.com/artifact/org.openapitools/openapi-generator-maven-plugin/6.6.0/versions) ... use `main/company-gaming-rest-api/src/main/resources/company.gaming/game.yml` as source and do not change the output directory and do not use the `src/` directory... also your structure looks weird... and why do you have the generation within your application module instead of in your api module (meaning the execution of the openapi generator plugin) ? Does not make sense...","link":"https://stackoverflow.com/questions/76537599/generating-api-layer-using-openapi-generator-in-a-multi-module-maven-project#comment134950292_76537599","body":"First you should use a more recent version of the openapi-generator-maven-plugin.. (6.X+ see <a href=\"https://central.sonatype.com/artifact/org.openapitools/openapi-generator-maven-plugin/6.6.0/versions\" rel=\"nofollow noreferrer\">central.sonatype.com/artifact/org.openapitools/&hellip;</a>) ... use <code>main&#47;company-gaming-rest-api&#47;src&#47;main&#47;resources&#47;company.gami&zwnj;&#8203;ng&#47;game.yml</code> as source and do not change the output directory and do not use the <code>src&#47;</code> directory... also your structure looks weird... and why do you have the generation within your application module instead of in your api module (meaning the execution of the openapi generator plugin) ? Does not make sense..."},{"score":1,"post_type":"question","creation_date":1687511597,"post_id":76537599,"comment_id":134950305,"body_markdown":"BTW: Why using Spring Boot 2.7.X instead 3.1+ and JDK 17 so that would result in avoiding the usage of lombok...","link":"https://stackoverflow.com/questions/76537599/generating-api-layer-using-openapi-generator-in-a-multi-module-maven-project#comment134950305_76537599","body":"BTW: Why using Spring Boot 2.7.X instead 3.1+ and JDK 17 so that would result in avoiding the usage of lombok..."},{"score":0,"post_type":"question","creation_date":1687512701,"post_id":76537599,"comment_id":134950516,"body_markdown":"Hi khmarbaise, thanks for looking it up and thanks for your time. I need to use spring boot 2.7. since we have some other libraries that don&#39;t go well with higher versions of boot. Also our project is Java 11, this is just demo that I need to make it work. I bumped version to 6.6.0 also, in the `&lt;inputSpec&gt;` I tried placing: `main/company-gaming-rest-api/src/main/resources/company.gaming/game.yml`  and  `company-gaming-rest-api/src/main/resources/company.gaming/game.yml` both failed with same error.  Didn&#39;t understand your point on not using `src/`","link":"https://stackoverflow.com/questions/76537599/generating-api-layer-using-openapi-generator-in-a-multi-module-maven-project#comment134950516_76537599","body":"Hi khmarbaise, thanks for looking it up and thanks for your time. I need to use spring boot 2.7. since we have some other libraries that don&#39;t go well with higher versions of boot. Also our project is Java 11, this is just demo that I need to make it work. I bumped version to 6.6.0 also, in the <code>&lt;inputSpec&gt;</code> I tried placing: <code>main&#47;company-gaming-rest-api&#47;src&#47;main&#47;resources&#47;company.gami&zwnj;&#8203;ng&#47;game.yml</code>  and  <code>company-gaming-rest-api&#47;src&#47;main&#47;resources&#47;company.gaming&#47;ga&zwnj;&#8203;me.yml</code> both failed with same error.  Didn&#39;t understand your point on not using <code>src&#47;</code>"},{"score":0,"post_type":"question","creation_date":1687512803,"post_id":76537599,"comment_id":134950540,"body_markdown":"And your last point, how to setup code so that it can generate classes/api layer in `company-gaming-rest-api` ? that could also work, tho, my requriments are that it needs to be generated in `company-gaming-service-core` Thank you for helping out","link":"https://stackoverflow.com/questions/76537599/generating-api-layer-using-openapi-generator-in-a-multi-module-maven-project#comment134950540_76537599","body":"And your last point, how to setup code so that it can generate classes/api layer in <code>company-gaming-rest-api</code> ? that could also work, tho, my requriments are that it needs to be generated in <code>company-gaming-service-core</code> Thank you for helping out"},{"score":1,"post_type":"question","creation_date":1687514582,"post_id":76537599,"comment_id":134950877,"body_markdown":"The requiements to generate the code in the service core means you have to move the yaml file into the same module and do so..otherwise it does not make sense.. I strongly recommend to have a separate module (api) and generate the code there ... and to use the generated code simply define a dependency in other module on that api module... that&#39;s clean and easy...","link":"https://stackoverflow.com/questions/76537599/generating-api-layer-using-openapi-generator-in-a-multi-module-maven-project#comment134950877_76537599","body":"The requiements to generate the code in the service core means you have to move the yaml file into the same module and do so..otherwise it does not make sense.. I strongly recommend to have a separate module (api) and generate the code there ... and to use the generated code simply define a dependency in other module on that api module... that&#39;s clean and easy..."},{"score":1,"post_type":"question","creation_date":1687514671,"post_id":76537599,"comment_id":134950902,"body_markdown":"Hint about 2.7... means you have to upgrade as soon as possible because support for 2.7.X line is end of life in November this year (See https://spring.io/projects/spring-boot#support). The only way is to upgrade to Spring Boot 3.1+ and JDK17...","link":"https://stackoverflow.com/questions/76537599/generating-api-layer-using-openapi-generator-in-a-multi-module-maven-project#comment134950902_76537599","body":"Hint about 2.7... means you have to upgrade as soon as possible because support for 2.7.X line is end of life in November this year (See <a href=\"https://spring.io/projects/spring-boot#support\" rel=\"nofollow noreferrer\">spring.io/projects/spring-boot#support</a>). The only way is to upgrade to Spring Boot 3.1+ and JDK17..."},{"score":0,"post_type":"question","creation_date":1687518063,"post_id":76537599,"comment_id":134951526,"body_markdown":"@khmarbaise Thank you once more for suggestions for spring boot version, will make sure to discuss with the team. I have updated my question and decided to accept you suggestion to generate api in rest-api module, but it isnot clean and easy to do so :) at least not for me. I have no idea what&#39;s wrong...","link":"https://stackoverflow.com/questions/76537599/generating-api-layer-using-openapi-generator-in-a-multi-module-maven-project#comment134951526_76537599","body":"@khmarbaise Thank you once more for suggestions for spring boot version, will make sure to discuss with the team. I have updated my question and decided to accept you suggestion to generate api in rest-api module, but it isnot clean and easy to do so :) at least not for me. I have no idea what&#39;s wrong..."},{"score":0,"post_type":"question","creation_date":1687527433,"post_id":76537599,"comment_id":134953678,"body_markdown":"I&#39;ve created a pull request for your repository and cleaned up the whole stuff...I don&#39;t understood why the dependeny plugin is needed and the configuration for m2e etc. ... that&#39;s unclear for me...Also I don&#39;t understand the need for build-helper-maven-plugin etc.","link":"https://stackoverflow.com/questions/76537599/generating-api-layer-using-openapi-generator-in-a-multi-module-maven-project#comment134953678_76537599","body":"I&#39;ve created a pull request for your repository and cleaned up the whole stuff...I don&#39;t understood why the dependeny plugin is needed and the configuration for m2e etc. ... that&#39;s unclear for me...Also I don&#39;t understand the need for build-helper-maven-plugin etc."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1687509347,"post_id":76537669,"comment_id":134949857,"body_markdown":"Hi Antonio, thanks for looking it up, but error is still the same. Have you managed to try on your machine? Maybe is something on my Windows/InteliJ setting?","link":"https://stackoverflow.com/questions/76537599/generating-api-layer-using-openapi-generator-in-a-multi-module-maven-project/76537669#comment134949857_76537669","body":"Hi Antonio, thanks for looking it up, but error is still the same. Have you managed to try on your machine? Maybe is something on my Windows/InteliJ setting?"},{"score":0,"post_type":"answer","creation_date":1687511070,"post_id":76537669,"comment_id":134950197,"body_markdown":"I use this tecnique everyday. Maybe some other little error on your code, but unfortnately I cannot assit you so much. Sorry. :(","link":"https://stackoverflow.com/questions/76537599/generating-api-layer-using-openapi-generator-in-a-multi-module-maven-project/76537669#comment134950197_76537669","body":"I use this tecnique everyday. Maybe some other little error on your code, but unfortnately I cannot assit you so much. Sorry. :("}],"comment_count":2,"score":1,"last_activity_date":1702381981,"last_edit_date":1702381981,"creation_date":1687502692,"answer_id":76537669,"question_id":76537599,"body_markdown":"Then **Open API maven generator plugin** runs before the classes (and resources) are compiled into `target` folder because it must generate the classes by the YAML which you referenced by your own project classes, so this is why it cannot find the YAML file into the target folder.\r\n\r\nTo solve this you have to change:\r\n `&lt;inputSpec&gt;${project.basedir}/target/company/gaming/game.yaml&lt;/inputSpec&gt;` \r\n\r\ninto \r\n\r\n`&lt;inputSpec&gt;${project.basedir}/company-gaming-service/src/main/resources/company/gaming/game.yaml&lt;/inputSpec&gt;`.","link":"https://stackoverflow.com/questions/76537599/generating-api-layer-using-openapi-generator-in-a-multi-module-maven-project/76537669#76537669","title":"Generating API layer using OpenApi generator in a multi module Maven project","body":"<p>Then <strong>Open API maven generator plugin</strong> runs before the classes (and resources) are compiled into <code>target</code> folder because it must generate the classes by the YAML which you referenced by your own project classes, so this is why it cannot find the YAML file into the target folder.</p>\n<p>To solve this you have to change:\n<code>&lt;inputSpec&gt;${project.basedir}/target/company/gaming/game.yaml&lt;/inputSpec&gt;</code></p>\n<p>into</p>\n<p><code>&lt;inputSpec&gt;${project.basedir}/company-gaming-service/src/main/resources/company/gaming/game.yaml&lt;/inputSpec&gt;</code>.</p>\n"}],"comment_count":8,"is_answered":true,"view_count":1443,"answer_count":1,"score":0,"last_activity_date":1702381981,"creation_date":1687501852,"last_edit_date":1687517929,"question_id":76537599,"body_markdown":"Hello Maven community,\r\n\r\nI have a multi module Maven project (for my Spring Boot application) for which I would like to generate API layer using [OpenAPI generator - Maven plugin][1].\r\n\r\nLet me explain the structure and at the end you can see a link to a repo with project.\r\n\r\nI have basically three `pom.xml`. First pom is on the project level, it has `&lt;dependencyManagement&gt;` from where other modules inherit dependencies and specify other versions as the see fit. Second pom is within module `company-gaming-rest-api`, idea with this module is that it doesn&#39;t contain any source code, only yaml file(s) for generating API layer along with some DTOs. Finally, second pom.xml comes from a module called `company-gaming-service-core`. Idea with this module is to actually contains bussiness logic and have  under its `/target` folder all those generated APIs.\r\n\r\nSo in `company-gaming-service-core` pom.xml I have used plugin like so:\r\n\r\n                  &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;gaming-generation&lt;/id&gt;\r\n                            &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;generate&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;inputSpec&gt;${project.basedir}/target/company/gaming/game.yaml&lt;/inputSpec&gt;\r\n                                &lt;generatorName&gt;spring&lt;/generatorName&gt;\r\n                                &lt;apiPackage&gt;company.gaming.ms.game.controller&lt;/apiPackage&gt;\r\n                                &lt;modelPackage&gt;company.gaming.ms.game.model&lt;/modelPackage&gt;\r\n                                &lt;generateSupportingFiles&gt;true&lt;/generateSupportingFiles&gt;\r\n                                &lt;configOptions&gt;\r\n    \r\n                                    &lt;enableBuilderSupport&gt;true&lt;/enableBuilderSupport&gt;\r\n                                    &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\r\n                                    &lt;dateLibrary&gt;java11&lt;/dateLibrary&gt;\r\n                                    &lt;serializableModel&gt;true&lt;/serializableModel&gt;\r\n                                    &lt;delegatePattern&gt;true&lt;/delegatePattern&gt;\r\n                                    &lt;useBeanValidation&gt;true&lt;/useBeanValidation&gt;\r\n                                    &lt;hideGenerationTimestamp&gt;true&lt;/hideGenerationTimestamp&gt;\r\n                                    &lt;simpleFluentPattern&gt;true&lt;/simpleFluentPattern&gt;\r\n                                    &lt;collectionFluentPattern&gt;true&lt;/collectionFluentPattern&gt;\r\n                                &lt;/configOptions&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n\r\nEntire project is using only two libraries, `mapstruct` and `lombok`, since in my humble understanding they are needed for api generator to generate classes/methods for API layer.\r\n\r\nI&#39;m using IntelliJ, so here is the image of a clean project:\r\n\r\n[![Clean project][2]][2] \r\n\r\nHere is the structure of project after `mvn clean install -DskipTests`:\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\nThe error, after `mvn clean install -DskipTests`, I&#39;m getting is very strange:\r\n\r\n    [INFO] Configured Artifact: company.gaming.ms:company-gaming-rest-api:0.0.1-SNAPSHOT:jar\r\n    [INFO] Unpacking C:\\Users\\FirstName.Lastname\\Desktop\\company-gaming-service\\company-gaming-rest-api\\target\\company-gaming-rest-api-0.0.1-SNAPSHOT.jar to C:\\Users\\FirstName.Lastname\\Desktop\\company-gaming-service\\company-gaming-service-core\\target with includes &quot;**/*.yaml&quot; and excludes &quot;&quot;\r\n    [INFO] \r\n    [INFO] --- openapi-generator-maven-plugin:4.0.2:generate (company-gaming) @ company-gaming-service-core ---\r\n    [WARNING] Exception while reading:\r\n    java.lang.RuntimeException: **Could not find C:/Users/FirstName.Lastname/Desktop/company-gaming-service/company-gaming-service-core/target/company/gaming/game.yaml on the classpath**\r\n        at io.swagger.v3.parser.util.ClasspathHelper.loadFileFromClasspath (ClasspathHelper.java:31)\r\n        at io.swagger.v3.parser.OpenAPIV3Parser.readWithInfo (OpenAPIV3Parser.java:135)\r\n        at io.swagger.v3.parser.OpenAPIV3Parser.readLocation (OpenAPIV3Parser.java:45)\r\n        at io.swagger.parser.OpenAPIParser.readLocation (OpenAPIParser.java:16)\r\n        at org.openapitools.codegen.config.CodegenConfigurator.toClientOptInput (CodegenConfigurator.java:586)\r\n\r\nIt says it cannot find on the classpath but it managed to copy it from rest module to core module. I did play with other versions of mapstruct/openapi plugin, but no luck :(\r\n\r\nHere is the [link to the repo][4]\r\n\r\nYaml schema is correct and validate against [Swagger Editor][5].\r\n\r\n\r\n  [1]: https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin\r\n  [2]: https://i.stack.imgur.com/ffASt.png\r\n  [3]: https://i.stack.imgur.com/zFUIg.png\r\n  [4]: https://github.com/Coding-Hefestus/company-gaming-service\r\n  [5]: https://editor.swagger.io/\r\n\r\n**Update1**\r\nBased on the suggestion from khmarbaise:\r\n\r\nI have commented out in core-module plugin related to api generator. Now, in my rest-api module I have following:\r\n\r\n        &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            \r\n\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;unpack&lt;/id&gt;\r\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;unpack&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n\r\n                            &lt;artifactItems&gt;\r\n                                &lt;artifactItem&gt;\r\n                                    &lt;groupId&gt;company.gaming.ms&lt;/groupId&gt;\r\n                                    &lt;artifactId&gt;company-gaming-rest-api&lt;/artifactId&gt;\r\n                                    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n                                    &lt;type&gt;jar&lt;/type&gt;\r\n                                    &lt;overWrite&gt;false&lt;/overWrite&gt;\r\n                                &lt;/artifactItem&gt;\r\n                            &lt;/artifactItems&gt;\r\n                            &lt;includes&gt;**/*.yaml&lt;/includes&gt;\r\n                            &lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt;\r\n                            &lt;overWriteReleases&gt;true&lt;/overWriteReleases&gt;\r\n                            &lt;overWriteSnapshots&gt;true&lt;/overWriteSnapshots&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n\r\n                &lt;/executions&gt;\r\n\r\n\r\n            &lt;/plugin&gt;\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n                &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;company-gaming-api-generation&lt;/id&gt;\r\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;generate&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n\r\n                            &lt;!--${project.basedir}\r\n\r\n                            C:/Users/FirstName.LastName/Desktop/repo/company-gaming-service/company-gaming-rest-api/src/main/resources/company.gaming/game.yaml--&gt;\r\n                            &lt;inputSpec&gt;${project.basedir}\\src\\main\\resource\\company\\gaming\\game.yaml&lt;/inputSpec&gt;\r\n                            &lt;generatorName&gt;spring&lt;/generatorName&gt;\r\n                            &lt;apiPackage&gt;company.gaming.ms.game.controller&lt;/apiPackage&gt;\r\n                            &lt;modelPackage&gt;company.gaming.ms.game.model&lt;/modelPackage&gt;\r\n                            &lt;generateSupportingFiles&gt;true&lt;/generateSupportingFiles&gt;\r\n                            &lt;configOptions&gt;\r\n\r\n                                &lt;enableBuilderSupport&gt;true&lt;/enableBuilderSupport&gt;\r\n                                &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\r\n                                &lt;dateLibrary&gt;java11&lt;/dateLibrary&gt;\r\n                                &lt;serializableModel&gt;true&lt;/serializableModel&gt;\r\n                                &lt;delegatePattern&gt;true&lt;/delegatePattern&gt;\r\n                                &lt;useBeanValidation&gt;true&lt;/useBeanValidation&gt;\r\n                                &lt;hideGenerationTimestamp&gt;true&lt;/hideGenerationTimestamp&gt;\r\n                                &lt;simpleFluentPattern&gt;true&lt;/simpleFluentPattern&gt;\r\n                                &lt;collectionFluentPattern&gt;true&lt;/collectionFluentPattern&gt;\r\n                            &lt;/configOptions&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;add-client-sources&lt;/id&gt;\r\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;add-source&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;sources&gt;\r\n                                &lt;source&gt;${project.build.directory}/generated-sources/openapi/src/main/java&lt;/source&gt;\r\n                                &lt;source&gt;${project.build.directory}/generated-sources/annotations&lt;/source&gt;\r\n                                &lt;source&gt;${project.build.directory}/generated-sources/xjc-client&lt;/source&gt;\r\n                            &lt;/sources&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n\r\n\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nTried with `/` `\\` `company.gaming` `company/gaming` its just keep serving me with:\r\n\r\n    [INFO] --- openapi-generator-maven-plugin:6.6.0:generate (gaming-api-generation) @ company-gaming-service-core ---\r\n    [WARNING] Exception while reading:\r\n    io.swagger.v3.parser.exception.ReadContentException: Unable to read location `main/company-gaming-rest-api/src/main/resources/company.gaming/game.yml`\r\n        at io.swagger.v3.parser.OpenAPIV3Parser.readContentFromLocation (OpenAPIV3Parser.java:295)\r\n        at io.swagger.v3.parser.OpenAPIV3Parser.readLocation (OpenAPIV3Parser.java:92)\r\n\r\nNote that in error it outputs `.yml` instead of `.yaml`\r\n\r\n","link":"https://stackoverflow.com/questions/76537599/generating-api-layer-using-openapi-generator-in-a-multi-module-maven-project","title":"Generating API layer using OpenApi generator in a multi module Maven project","body":"<p>Hello Maven community,</p>\n<p>I have a multi module Maven project (for my Spring Boot application) for which I would like to generate API layer using <a href=\"https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-maven-plugin\" rel=\"nofollow noreferrer\">OpenAPI generator - Maven plugin</a>.</p>\n<p>Let me explain the structure and at the end you can see a link to a repo with project.</p>\n<p>I have basically three <code>pom.xml</code>. First pom is on the project level, it has <code>&lt;dependencyManagement&gt;</code> from where other modules inherit dependencies and specify other versions as the see fit. Second pom is within module <code>company-gaming-rest-api</code>, idea with this module is that it doesn't contain any source code, only yaml file(s) for generating API layer along with some DTOs. Finally, second pom.xml comes from a module called <code>company-gaming-service-core</code>. Idea with this module is to actually contains bussiness logic and have  under its <code>/target</code> folder all those generated APIs.</p>\n<p>So in <code>company-gaming-service-core</code> pom.xml I have used plugin like so:</p>\n<pre><code>              &lt;plugin&gt;\n                &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n                &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;gaming-generation&lt;/id&gt;\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;inputSpec&gt;${project.basedir}/target/company/gaming/game.yaml&lt;/inputSpec&gt;\n                            &lt;generatorName&gt;spring&lt;/generatorName&gt;\n                            &lt;apiPackage&gt;company.gaming.ms.game.controller&lt;/apiPackage&gt;\n                            &lt;modelPackage&gt;company.gaming.ms.game.model&lt;/modelPackage&gt;\n                            &lt;generateSupportingFiles&gt;true&lt;/generateSupportingFiles&gt;\n                            &lt;configOptions&gt;\n\n                                &lt;enableBuilderSupport&gt;true&lt;/enableBuilderSupport&gt;\n                                &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\n                                &lt;dateLibrary&gt;java11&lt;/dateLibrary&gt;\n                                &lt;serializableModel&gt;true&lt;/serializableModel&gt;\n                                &lt;delegatePattern&gt;true&lt;/delegatePattern&gt;\n                                &lt;useBeanValidation&gt;true&lt;/useBeanValidation&gt;\n                                &lt;hideGenerationTimestamp&gt;true&lt;/hideGenerationTimestamp&gt;\n                                &lt;simpleFluentPattern&gt;true&lt;/simpleFluentPattern&gt;\n                                &lt;collectionFluentPattern&gt;true&lt;/collectionFluentPattern&gt;\n                            &lt;/configOptions&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>Entire project is using only two libraries, <code>mapstruct</code> and <code>lombok</code>, since in my humble understanding they are needed for api generator to generate classes/methods for API layer.</p>\n<p>I'm using IntelliJ, so here is the image of a clean project:</p>\n<p><a href=\"https://i.stack.imgur.com/ffASt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ffASt.png\" alt=\"Clean project\" /></a></p>\n<p>Here is the structure of project after <code>mvn clean install -DskipTests</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/zFUIg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zFUIg.png\" alt=\"enter image description here\" /></a></p>\n<p>The error, after <code>mvn clean install -DskipTests</code>, I'm getting is very strange:</p>\n<pre><code>[INFO] Configured Artifact: company.gaming.ms:company-gaming-rest-api:0.0.1-SNAPSHOT:jar\n[INFO] Unpacking C:\\Users\\FirstName.Lastname\\Desktop\\company-gaming-service\\company-gaming-rest-api\\target\\company-gaming-rest-api-0.0.1-SNAPSHOT.jar to C:\\Users\\FirstName.Lastname\\Desktop\\company-gaming-service\\company-gaming-service-core\\target with includes &quot;**/*.yaml&quot; and excludes &quot;&quot;\n[INFO] \n[INFO] --- openapi-generator-maven-plugin:4.0.2:generate (company-gaming) @ company-gaming-service-core ---\n[WARNING] Exception while reading:\njava.lang.RuntimeException: **Could not find C:/Users/FirstName.Lastname/Desktop/company-gaming-service/company-gaming-service-core/target/company/gaming/game.yaml on the classpath**\n    at io.swagger.v3.parser.util.ClasspathHelper.loadFileFromClasspath (ClasspathHelper.java:31)\n    at io.swagger.v3.parser.OpenAPIV3Parser.readWithInfo (OpenAPIV3Parser.java:135)\n    at io.swagger.v3.parser.OpenAPIV3Parser.readLocation (OpenAPIV3Parser.java:45)\n    at io.swagger.parser.OpenAPIParser.readLocation (OpenAPIParser.java:16)\n    at org.openapitools.codegen.config.CodegenConfigurator.toClientOptInput (CodegenConfigurator.java:586)\n</code></pre>\n<p>It says it cannot find on the classpath but it managed to copy it from rest module to core module. I did play with other versions of mapstruct/openapi plugin, but no luck :(</p>\n<p>Here is the <a href=\"https://github.com/Coding-Hefestus/company-gaming-service\" rel=\"nofollow noreferrer\">link to the repo</a></p>\n<p>Yaml schema is correct and validate against <a href=\"https://editor.swagger.io/\" rel=\"nofollow noreferrer\">Swagger Editor</a>.</p>\n<p><strong>Update1</strong>\nBased on the suggestion from khmarbaise:</p>\n<p>I have commented out in core-module plugin related to api generator. Now, in my rest-api module I have following:</p>\n<pre><code>    &lt;build&gt;\n    &lt;plugins&gt;\n        \n\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;unpack&lt;/id&gt;\n                    &lt;phase&gt;generate-sources&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;unpack&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n\n                        &lt;artifactItems&gt;\n                            &lt;artifactItem&gt;\n                                &lt;groupId&gt;company.gaming.ms&lt;/groupId&gt;\n                                &lt;artifactId&gt;company-gaming-rest-api&lt;/artifactId&gt;\n                                &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n                                &lt;type&gt;jar&lt;/type&gt;\n                                &lt;overWrite&gt;false&lt;/overWrite&gt;\n                            &lt;/artifactItem&gt;\n                        &lt;/artifactItems&gt;\n                        &lt;includes&gt;**/*.yaml&lt;/includes&gt;\n                        &lt;outputDirectory&gt;${project.build.directory}&lt;/outputDirectory&gt;\n                        &lt;overWriteReleases&gt;true&lt;/overWriteReleases&gt;\n                        &lt;overWriteSnapshots&gt;true&lt;/overWriteSnapshots&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n\n            &lt;/executions&gt;\n\n\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n            &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;company-gaming-api-generation&lt;/id&gt;\n                    &lt;phase&gt;generate-sources&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;generate&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n\n                        &lt;!--${project.basedir}\n\n                        C:/Users/FirstName.LastName/Desktop/repo/company-gaming-service/company-gaming-rest-api/src/main/resources/company.gaming/game.yaml--&gt;\n                        &lt;inputSpec&gt;${project.basedir}\\src\\main\\resource\\company\\gaming\\game.yaml&lt;/inputSpec&gt;\n                        &lt;generatorName&gt;spring&lt;/generatorName&gt;\n                        &lt;apiPackage&gt;company.gaming.ms.game.controller&lt;/apiPackage&gt;\n                        &lt;modelPackage&gt;company.gaming.ms.game.model&lt;/modelPackage&gt;\n                        &lt;generateSupportingFiles&gt;true&lt;/generateSupportingFiles&gt;\n                        &lt;configOptions&gt;\n\n                            &lt;enableBuilderSupport&gt;true&lt;/enableBuilderSupport&gt;\n                            &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\n                            &lt;dateLibrary&gt;java11&lt;/dateLibrary&gt;\n                            &lt;serializableModel&gt;true&lt;/serializableModel&gt;\n                            &lt;delegatePattern&gt;true&lt;/delegatePattern&gt;\n                            &lt;useBeanValidation&gt;true&lt;/useBeanValidation&gt;\n                            &lt;hideGenerationTimestamp&gt;true&lt;/hideGenerationTimestamp&gt;\n                            &lt;simpleFluentPattern&gt;true&lt;/simpleFluentPattern&gt;\n                            &lt;collectionFluentPattern&gt;true&lt;/collectionFluentPattern&gt;\n                        &lt;/configOptions&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;add-client-sources&lt;/id&gt;\n                    &lt;phase&gt;generate-sources&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;add-source&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;sources&gt;\n                            &lt;source&gt;${project.build.directory}/generated-sources/openapi/src/main/java&lt;/source&gt;\n                            &lt;source&gt;${project.build.directory}/generated-sources/annotations&lt;/source&gt;\n                            &lt;source&gt;${project.build.directory}/generated-sources/xjc-client&lt;/source&gt;\n                        &lt;/sources&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n\n\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>Tried with <code>/</code> <code>\\</code> <code>company.gaming</code> <code>company/gaming</code> its just keep serving me with:</p>\n<pre><code>[INFO] --- openapi-generator-maven-plugin:6.6.0:generate (gaming-api-generation) @ company-gaming-service-core ---\n[WARNING] Exception while reading:\nio.swagger.v3.parser.exception.ReadContentException: Unable to read location `main/company-gaming-rest-api/src/main/resources/company.gaming/game.yml`\n    at io.swagger.v3.parser.OpenAPIV3Parser.readContentFromLocation (OpenAPIV3Parser.java:295)\n    at io.swagger.v3.parser.OpenAPIV3Parser.readLocation (OpenAPIV3Parser.java:92)\n</code></pre>\n<p>Note that in error it outputs <code>.yml</code> instead of <code>.yaml</code></p>\n"},{"tags":["java","selenium-webdriver","automated-tests","testng"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702381020,"creation_date":1702381020,"answer_id":77645788,"question_id":77410277,"body_markdown":"To make this work, you need to make the driver static in the Utility class.\r\n\r\n    public class Utility {\r\n       public static WebDriver udriver;\r\n    \r\n       public static void setDriver(WebDriver driver) {\r\n          udriver = driver;\r\n       }\r\n    }","link":"https://stackoverflow.com/questions/77410277/child-class-is-not-inheriting-parent-class-variable/77645788#77645788","title":"Child class is not inheriting parent class variable","body":"<p>To make this work, you need to make the driver static in the Utility class.</p>\n<pre><code>public class Utility {\n   public static WebDriver udriver;\n\n   public static void setDriver(WebDriver driver) {\n      udriver = driver;\n   }\n}\n</code></pre>\n"}],"comment_count":0,"is_answered":false,"view_count":43,"answer_count":1,"score":0,"last_activity_date":1702381020,"creation_date":1698934021,"question_id":77410277,"body_markdown":"I am new to selenium. I tried to create a automate testing project. In there I created  class for every web pages and in my test packages  I created a baseTest class where I initiate browser and open the home page and another class for other methods.I also created test classes for every pages. Now when I move into homepages the driver is null.but every testclass extends baseTest.Why is it happening?\r\n\r\n```\r\npackage utilities;\r\n\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.chromium.ChromiumDriver;\r\n\r\npublic class utility {\r\n\tpublic WebDriver udriver;\r\n\t\r\n\tpublic void setDriver(WebDriver driver)\r\n\t{\r\n\t\tudriver =driver;\r\n\t}\r\n\t\r\n\tpublic String getTitle() {\r\n\t\treturn udriver.getTitle();\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic void clickEl(WebElement element) {\r\n\t\telement.click();\r\n\t}\r\n\r\n}\r\n\r\n```\r\nhomePageClass\r\n\r\n```\r\npackage Pages;\r\n\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.support.FindBy;\r\n\r\nimport utilities.utility;\r\n\r\npublic class HomePage extends utility {\r\n\r\n\t@FindBy(xpath = &quot;//a[normalize-space()=&#39;Gmail&#39;]&quot;)\r\n\tWebElement gmailBtn;\r\n\r\n\tpublic String homePageTitle() {\r\n\t\treturn getTitle();\r\n\t}\r\n\r\n\tpublic void clickOnGmailBtn() {\r\n\t\tclickEl(gmailBtn);\r\n\t}\r\n\r\n}\r\n\r\n```\r\nbaseTest\r\n\r\n```\r\npackage tests;\r\n\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.testng.annotations.AfterTest;\r\nimport org.testng.annotations.BeforeTest;\r\n\r\nimport utilities.utility;\r\n\r\npublic class BaseTest {\r\n\tprotected WebDriver driver;\r\n\tutility utility =new utility();\r\n\t\r\n\t@BeforeTest\r\n\tpublic void initializeBrowser()\r\n\t{\r\n\t\tdriver= new ChromeDriver();\r\n\t\tdriver.manage().window().maximize();\r\n\t\tdriver.get(&quot;https://www.google.com/&quot;);\r\n\t\tutility.setDriver(driver);\r\n\t\t\r\n\t}\r\n\t@AfterTest\r\n\tpublic void tearDown(){\r\n\t\tdriver.quit();\r\n\t\r\n\t}\r\n}\r\n\r\n```\r\nTestHomePage \r\n```\r\npackage tests;\r\n\r\nimport org.testng.annotations.Test;\r\n\r\nimport Pages.HomePage;\r\nimport utilities.utility;\r\n\r\npublic class TestHomePage extends utility{\r\n\tHomePage homePage= new HomePage();\r\n\t@Test\r\n\tpublic void TilteTest() {\r\n\t\r\n\t\tSystem.out.println(homePage.homePageTitle());\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nI tried with create a utility instance before every method ,but didn&#39;t work. I hope that the driver form crated in baseTest class will be passed to utility class and evry webPage class will get access to it.","link":"https://stackoverflow.com/questions/77410277/child-class-is-not-inheriting-parent-class-variable","title":"Child class is not inheriting parent class variable","body":"<p>I am new to selenium. I tried to create a automate testing project. In there I created  class for every web pages and in my test packages  I created a baseTest class where I initiate browser and open the home page and another class for other methods.I also created test classes for every pages. Now when I move into homepages the driver is null.but every testclass extends baseTest.Why is it happening?</p>\n<pre><code>package utilities;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chromium.ChromiumDriver;\n\npublic class utility {\n    public WebDriver udriver;\n    \n    public void setDriver(WebDriver driver)\n    {\n        udriver =driver;\n    }\n    \n    public String getTitle() {\n        return udriver.getTitle();\n        \n    }\n    \n    public void clickEl(WebElement element) {\n        element.click();\n    }\n\n}\n\n</code></pre>\n<p>homePageClass</p>\n<pre><code>package Pages;\n\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.support.FindBy;\n\nimport utilities.utility;\n\npublic class HomePage extends utility {\n\n    @FindBy(xpath = &quot;//a[normalize-space()='Gmail']&quot;)\n    WebElement gmailBtn;\n\n    public String homePageTitle() {\n        return getTitle();\n    }\n\n    public void clickOnGmailBtn() {\n        clickEl(gmailBtn);\n    }\n\n}\n\n</code></pre>\n<p>baseTest</p>\n<pre><code>package tests;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.testng.annotations.AfterTest;\nimport org.testng.annotations.BeforeTest;\n\nimport utilities.utility;\n\npublic class BaseTest {\n    protected WebDriver driver;\n    utility utility =new utility();\n    \n    @BeforeTest\n    public void initializeBrowser()\n    {\n        driver= new ChromeDriver();\n        driver.manage().window().maximize();\n        driver.get(&quot;https://www.google.com/&quot;);\n        utility.setDriver(driver);\n        \n    }\n    @AfterTest\n    public void tearDown(){\n        driver.quit();\n    \n    }\n}\n\n</code></pre>\n<p>TestHomePage</p>\n<pre><code>package tests;\n\nimport org.testng.annotations.Test;\n\nimport Pages.HomePage;\nimport utilities.utility;\n\npublic class TestHomePage extends utility{\n    HomePage homePage= new HomePage();\n    @Test\n    public void TilteTest() {\n    \n        System.out.println(homePage.homePageTitle());\n    }\n\n}\n\n</code></pre>\n<p>I tried with create a utility instance before every method ,but didn't work. I hope that the driver form crated in baseTest class will be passed to utility class and evry webPage class will get access to it.</p>\n"},{"tags":["java","logging","soap","guidewire"],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1696259943,"post_id":77216450,"comment_id":136127015,"body_markdown":"The problem is that the generation of soap messages is somewhere deep inside Guidewire&#39;s framework and I am not allowed to access it.\nWhat I see is the line\n      var result = ContactAPI.searchContact(remoteCriteria, remoteSpec)\nand the method searchContact() is inside Guidewire&#39;s jar and I cannot access its source code.\nThis call breaks with exception (after getting response from CM) and I cannot see any DTO object.","link":"https://stackoverflow.com/questions/77188431/log-soap-messages-in-guidewire-insurance-suite/77216450#comment136127015_77216450","body":"The problem is that the generation of soap messages is somewhere deep inside Guidewire&#39;s framework and I am not allowed to access it. What I see is the line       var result = ContactAPI.searchContact(remoteCriteria, remoteSpec) and the method searchContact() is inside Guidewire&#39;s jar and I cannot access its source code. This call breaks with exception (after getting response from CM) and I cannot see any DTO object."},{"score":0,"post_type":"answer","creation_date":1696260367,"post_id":77216450,"comment_id":136127094,"body_markdown":"So what is the exception being thrown when `ContactAPI.searchContact` is called? Can you still log the `remoteCriteria` and `remoteSpec` variables?","link":"https://stackoverflow.com/questions/77188431/log-soap-messages-in-guidewire-insurance-suite/77216450#comment136127094_77216450","body":"So what is the exception being thrown when <code>ContactAPI.searchContact</code> is called? Can you still log the <code>remoteCriteria</code> and <code>remoteSpec</code> variables?"},{"score":0,"post_type":"answer","creation_date":1696261212,"post_id":77216450,"comment_id":136127258,"body_markdown":"It is some NullPointerException with a deep stack trace inside the framework. Obviously the framework gets the response from CM side (btw, on CM side, I see resulting object in debugger, and it looks just fine, but I cannot see how it gets serialized to xml response), and then after that. on CC side, the framework part which processes the response runs into null value where it should not.","link":"https://stackoverflow.com/questions/77188431/log-soap-messages-in-guidewire-insurance-suite/77216450#comment136127258_77216450","body":"It is some NullPointerException with a deep stack trace inside the framework. Obviously the framework gets the response from CM side (btw, on CM side, I see resulting object in debugger, and it looks just fine, but I cannot see how it gets serialized to xml response), and then after that. on CC side, the framework part which processes the response runs into null value where it should not."},{"score":0,"post_type":"answer","creation_date":1696263676,"post_id":77216450,"comment_id":136127732,"body_markdown":"Yeah this one will be hard to debug. My best guess at this point is that CM is returning some contact without a required field that ClaimCenter expects to be populated. I would do this: 1) use the CC Contact Search UI to find a search that consistently throws the exception and then 2) use SOAP-UI to call the CM web service directly (with the same search criteria) and see which contact result(s) are different and possible missing a required field. Tedious but that is where I would start","link":"https://stackoverflow.com/questions/77188431/log-soap-messages-in-guidewire-insurance-suite/77216450#comment136127732_77216450","body":"Yeah this one will be hard to debug. My best guess at this point is that CM is returning some contact without a required field that ClaimCenter expects to be populated. I would do this: 1) use the CC Contact Search UI to find a search that consistently throws the exception and then 2) use SOAP-UI to call the CM web service directly (with the same search criteria) and see which contact result(s) are different and possible missing a required field. Tedious but that is where I would start"}],"comment_count":4,"score":0,"last_activity_date":1696258037,"creation_date":1696258037,"answer_id":77216450,"question_id":77188431,"body_markdown":"I don&#39;t think there is a way to log the actual SOAP envelop request/response for a function defined in a `@WsiWebService` class. You can always log the input of the function and then log the output of the function before the return. Something like:\r\n\r\n```\r\npublic function mySoapFunction (accountNumber : String) : AccountDTO {\r\n\r\n  //I assume a logger is defined for this web service class\r\n  logger.info(&quot;Calling mySoapFunction with accountNumber ${accountNumber}&quot;)\r\n\r\n  //The function implementation...\r\n\r\n  logger.info(&quot;Returning from mySoapFunction with account ${accountDTO.toXml()}&quot;)\r\n  return anAccountDTO\r\n}\r\n```\r\n\r\nThe above is just pseudo-code that I can&#39;t guarantee even compiles. The basic idea is you can do the logging yourself in the actual SOAP function. This is tedious, but I don&#39;t believe there is a way to log the SOAP request/responses natively in Guidewire applications by adjusting a setting.","link":"https://stackoverflow.com/questions/77188431/log-soap-messages-in-guidewire-insurance-suite/77216450#77216450","title":"log SOAP messages in Guidewire Insurance Suite","body":"<p>I don't think there is a way to log the actual SOAP envelop request/response for a function defined in a <code>@WsiWebService</code> class. You can always log the input of the function and then log the output of the function before the return. Something like:</p>\n<pre><code>public function mySoapFunction (accountNumber : String) : AccountDTO {\n\n  //I assume a logger is defined for this web service class\n  logger.info(&quot;Calling mySoapFunction with accountNumber ${accountNumber}&quot;)\n\n  //The function implementation...\n\n  logger.info(&quot;Returning from mySoapFunction with account ${accountDTO.toXml()}&quot;)\n  return anAccountDTO\n}\n</code></pre>\n<p>The above is just pseudo-code that I can't guarantee even compiles. The basic idea is you can do the logging yourself in the actual SOAP function. This is tedious, but I don't believe there is a way to log the SOAP request/responses natively in Guidewire applications by adjusting a setting.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1696574896,"post_id":77235835,"comment_id":136173168,"body_markdown":"I do not have info about implementation of GW web services, so I just tried with JAX-WS as probably most common solution.","link":"https://stackoverflow.com/questions/77188431/log-soap-messages-in-guidewire-insurance-suite/77235835#comment136173168_77235835","body":"I do not have info about implementation of GW web services, so I just tried with JAX-WS as probably most common solution."},{"score":0,"post_type":"answer","creation_date":1696596942,"post_id":77235835,"comment_id":136177175,"body_markdown":"That&#39;s OK, I was just not sure if you were after Guidewire solution (which you obviously were) or you want to implement it in some other conditions - all good and clear now!","link":"https://stackoverflow.com/questions/77188431/log-soap-messages-in-guidewire-insurance-suite/77235835#comment136177175_77235835","body":"That&#39;s OK, I was just not sure if you were after Guidewire solution (which you obviously were) or you want to implement it in some other conditions - all good and clear now!"},{"score":0,"post_type":"answer","creation_date":1702421733,"post_id":77235835,"comment_id":136893676,"body_markdown":"For future reference, here&#39;s the product documentation link for the api calls above.  Note that the doc presents this in the context of security configuration but as Gwisard has documented this is a general purpose api.\n\nhttps://docs.guidewire.com/cloud/pc/202310/integration/integration/topics/c_jt3699122.html?hl=requesttransform","link":"https://stackoverflow.com/questions/77188431/log-soap-messages-in-guidewire-insurance-suite/77235835#comment136893676_77235835","body":"For future reference, here&#39;s the product documentation link for the api calls above.  Note that the doc presents this in the context of security configuration but as Gwisard has documented this is a general purpose api.  <a href=\"https://docs.guidewire.com/cloud/pc/202310/integration/integration/topics/c_jt3699122.html?hl=requesttransform\" rel=\"nofollow noreferrer\">docs.guidewire.com/cloud/pc/202310/integration/integration/&hellip;</a>"}],"comment_count":3,"score":2,"last_activity_date":1696497999,"creation_date":1696497999,"answer_id":77235835,"question_id":77188431,"body_markdown":"Not sure if I fully understand your case as you keep referring to the JAX-WS implementation and just to be clear Guidewire Soap framework does not use JAX-WS. \r\n\r\nThere is an &quot;easy&quot; way to log the whole SOAP envelop if you are using @WsiWebService Soap server or utilising the WebServiceCollections Soap client.\r\nYou have to simply register a transformer by attaching it to the web service server class like this:\r\n\r\n    @WsiRequestTransform(MySoapServer._loggingRequestTransformer)\r\n\r\nYou can do the same with the @WsiResponseTransform to catch the response.\r\nThe transformer is simply a block consuming and returning InputStream of type like:\r\n\r\n    block(InputStream) : InputStream\r\n\r\nIt&#39;s somewhat similar for the client. There you have to register a Configuration Provider in the &quot;wsc&quot; file. And then in the implementation of it you have access to the config object where in similar way you can register your request/response transformers.\r\n\r\n    config.RequestTransform = _logWebServicePayload\r\n\r\nThere are however few caveats to this approach.\r\n\r\n - It will invoke the transformer for every single request/response while the transformer is registered so be 100% sure the transformer isn&#39;t logging your payload all the time esp. in Production! (only do any work there if for example the &quot;_LOGGER.DebugEnabled&quot;)\r\n - It requires you to return the InputStream and you most likely want to return the same information that you got in so extract it and wrap it again into some buffered InputStream or something similar\r\n - Soap payloads sometimes contain sensitive data or PII data so be very careful what you do with those logs and that you have permission to dump such information into the logs. I typically register separate loggers and appenders for that so they can be dealt with proper care and additional infra setup\r\n\r\n\r\nSo please only do this if you really need to and ensure it does not run in PROD 100% of the time and that you have takes all the necessary actions.","link":"https://stackoverflow.com/questions/77188431/log-soap-messages-in-guidewire-insurance-suite/77235835#77235835","title":"log SOAP messages in Guidewire Insurance Suite","body":"<p>Not sure if I fully understand your case as you keep referring to the JAX-WS implementation and just to be clear Guidewire Soap framework does not use JAX-WS.</p>\n<p>There is an &quot;easy&quot; way to log the whole SOAP envelop if you are using @WsiWebService Soap server or utilising the WebServiceCollections Soap client.\nYou have to simply register a transformer by attaching it to the web service server class like this:</p>\n<pre><code>@WsiRequestTransform(MySoapServer._loggingRequestTransformer)\n</code></pre>\n<p>You can do the same with the @WsiResponseTransform to catch the response.\nThe transformer is simply a block consuming and returning InputStream of type like:</p>\n<pre><code>block(InputStream) : InputStream\n</code></pre>\n<p>It's somewhat similar for the client. There you have to register a Configuration Provider in the &quot;wsc&quot; file. And then in the implementation of it you have access to the config object where in similar way you can register your request/response transformers.</p>\n<pre><code>config.RequestTransform = _logWebServicePayload\n</code></pre>\n<p>There are however few caveats to this approach.</p>\n<ul>\n<li>It will invoke the transformer for every single request/response while the transformer is registered so be 100% sure the transformer isn't logging your payload all the time esp. in Production! (only do any work there if for example the &quot;_LOGGER.DebugEnabled&quot;)</li>\n<li>It requires you to return the InputStream and you most likely want to return the same information that you got in so extract it and wrap it again into some buffered InputStream or something similar</li>\n<li>Soap payloads sometimes contain sensitive data or PII data so be very careful what you do with those logs and that you have permission to dump such information into the logs. I typically register separate loggers and appenders for that so they can be dealt with proper care and additional infra setup</li>\n</ul>\n<p>So please only do this if you really need to and ensure it does not run in PROD 100% of the time and that you have takes all the necessary actions.</p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1696633986,"post_id":77242405,"comment_id":136183183,"body_markdown":"and where do we need to keep this code?","link":"https://stackoverflow.com/questions/77188431/log-soap-messages-in-guidewire-insurance-suite/77242405#comment136183183_77242405","body":"and where do we need to keep this code?"},{"score":0,"post_type":"answer","creation_date":1697270686,"post_id":77242405,"comment_id":136261252,"body_markdown":"Annotations should reside in the file where web service class is defined, above the class definition, together with other annotations.\nI have put logSOAPMessage() into web service class, but you can put in which ever class you want, just make it public.","link":"https://stackoverflow.com/questions/77188431/log-soap-messages-in-guidewire-insurance-suite/77242405#comment136261252_77242405","body":"Annotations should reside in the file where web service class is defined, above the class definition, together with other annotations. I have put logSOAPMessage() into web service class, but you can put in which ever class you want, just make it public."}],"comment_count":2,"score":1,"last_activity_date":1696575575,"creation_date":1696575575,"answer_id":77242405,"question_id":77188431,"body_markdown":"Using Gwisard&#39;s answer, I have implemented logging on server side :\r\n\r\n    /** Uncomment for debugging only! Do not push uncommented!\r\n\r\n    @WsiRequestTransform(\\requestStream -&gt; {\r\n        var request = new String(requestStream.readAllBytes(), java.nio.charset.StandardCharsets.UTF_8);\r\n      logSOAPMessage(request, &quot;INPUT&quot;)\r\n        return new ByteArrayInputStream(request.getBytes())\r\n    })\r\n    \r\n    @WsiResponseTransform(\\responseStream -&gt; {\r\n      var response = new String(responseStream .readAllBytes(), java.nio.charset.StandardCharsets.UTF_8);\r\n      logSOAPMessage(response, &quot;OUTPUT&quot;)\r\n      return new ByteArrayInputStream(response.getBytes())\r\n    })*/\r\n\r\n\r\nAnd the method which writes both request and response to log file:\r\n\r\n      private static function logSOAPMessage(text : String, direction : String){\r\n        var logFilePath = &quot;C:\\\\tmp\\\\gwlogs\\\\soap.log&quot;\r\n        var logStream = new java.io.FileOutputStream(logFilePath, true)\r\n        logStream.write(&quot;\\n\\n${java.time.LocalTime.now().format(java.time.format.DateTimeFormatter.ofPattern(&quot;hh:mm.ss.SSS&quot;))} ${direction} \\n${text}&quot;.getBytes());\r\n        logStream.close();\r\n      }\r\n\r\n","link":"https://stackoverflow.com/questions/77188431/log-soap-messages-in-guidewire-insurance-suite/77242405#77242405","title":"log SOAP messages in Guidewire Insurance Suite","body":"<p>Using Gwisard's answer, I have implemented logging on server side :</p>\n<pre><code>/** Uncomment for debugging only! Do not push uncommented!\n\n@WsiRequestTransform(\\requestStream -&gt; {\n    var request = new String(requestStream.readAllBytes(), java.nio.charset.StandardCharsets.UTF_8);\n  logSOAPMessage(request, &quot;INPUT&quot;)\n    return new ByteArrayInputStream(request.getBytes())\n})\n\n@WsiResponseTransform(\\responseStream -&gt; {\n  var response = new String(responseStream .readAllBytes(), java.nio.charset.StandardCharsets.UTF_8);\n  logSOAPMessage(response, &quot;OUTPUT&quot;)\n  return new ByteArrayInputStream(response.getBytes())\n})*/\n</code></pre>\n<p>And the method which writes both request and response to log file:</p>\n<pre><code>  private static function logSOAPMessage(text : String, direction : String){\n    var logFilePath = &quot;C:\\\\tmp\\\\gwlogs\\\\soap.log&quot;\n    var logStream = new java.io.FileOutputStream(logFilePath, true)\n    logStream.write(&quot;\\n\\n${java.time.LocalTime.now().format(java.time.format.DateTimeFormatter.ofPattern(&quot;hh:mm.ss.SSS&quot;))} ${direction} \\n${text}&quot;.getBytes());\n    logStream.close();\n  }\n</code></pre>\n"}],"comment_count":0,"is_answered":true,"view_count":157,"answer_count":3,"score":0,"last_activity_date":1702379236,"creation_date":1695824974,"question_id":77188431,"body_markdown":"I want to catch the SOAP communication between my GW applications (Claim Center and Contact Manager). I&#39;d like to make CC or CM write the requests and responses to the log file, or at least to see  them through debugger somehow. It seems to me that Guidewire&#39;s framework does not help regarding this. \r\n\r\nI have tried [setting the system properties](https://stackoverflow.com/a/16338394/1506226) but it does not work, maybe the framework overrides them somehow. I have also tried to [define and utilize a SOAPHandler](https://stackoverflow.com/a/1957777/1506226) but it works with a @WebService implementation, and my web service (Contact Manager&#39;s `ABContactAPI`) is defined in other way, using the framework.\r\nIs there a way to fit Guidewire&#39;s web service into this scenario ? Or some other way to make Guidewire&#39;s web service log its SOAP messages somewhere ? Or to make Guidewire&#39;s web client code log its SOAP messages ? ","link":"https://stackoverflow.com/questions/77188431/log-soap-messages-in-guidewire-insurance-suite","title":"log SOAP messages in Guidewire Insurance Suite","body":"<p>I want to catch the SOAP communication between my GW applications (Claim Center and Contact Manager). I'd like to make CC or CM write the requests and responses to the log file, or at least to see  them through debugger somehow. It seems to me that Guidewire's framework does not help regarding this.</p>\n<p>I have tried <a href=\"https://stackoverflow.com/a/16338394/1506226\">setting the system properties</a> but it does not work, maybe the framework overrides them somehow. I have also tried to <a href=\"https://stackoverflow.com/a/1957777/1506226\">define and utilize a SOAPHandler</a> but it works with a @WebService implementation, and my web service (Contact Manager's <code>ABContactAPI</code>) is defined in other way, using the framework.\nIs there a way to fit Guidewire's web service into this scenario ? Or some other way to make Guidewire's web service log its SOAP messages somewhere ? Or to make Guidewire's web client code log its SOAP messages ?</p>\n"},{"tags":["java","spring","spring-security","vaadin","jsonresponse"],"comments":[{"score":0,"post_type":"question","creation_date":1687278253,"post_id":76516052,"comment_id":134913033,"body_markdown":"Have you annotated your routes for access?  e.g. PermitAll/RolesAllowed? Have you tried ramping up the logging of org.springframework.security?","link":"https://stackoverflow.com/questions/76516052/invalid-json-response-from-server-when-enabling-spring-security-config-extended#comment134913033_76516052","body":"Have you annotated your routes for access?  e.g. PermitAll/RolesAllowed? Have you tried ramping up the logging of org.springframework.security?"},{"score":0,"post_type":"question","creation_date":1687290846,"post_id":76516052,"comment_id":134915363,"body_markdown":"My LoginView/MainView have annotations for access - I&#39;ve tried with AnonymousAllowed/PermitAll/RolesAllowed, but none of them work. They don&#39;t have effect when I comment out this SecurityConfig class, though. I will edit my original post to include Spring Security debug logs.","link":"https://stackoverflow.com/questions/76516052/invalid-json-response-from-server-when-enabling-spring-security-config-extended#comment134915363_76516052","body":"My LoginView/MainView have annotations for access - I&#39;ve tried with AnonymousAllowed/PermitAll/RolesAllowed, but none of them work. They don&#39;t have effect when I comment out this SecurityConfig class, though. I will edit my original post to include Spring Security debug logs."},{"score":0,"post_type":"question","creation_date":1687291354,"post_id":76516052,"comment_id":134915434,"body_markdown":"What about this: `DaoAuthenticationProvider    : Failed to find user &#39;&#39;` ?","link":"https://stackoverflow.com/questions/76516052/invalid-json-response-from-server-when-enabling-spring-security-config-extended#comment134915434_76516052","body":"What about this: <code>DaoAuthenticationProvider    : Failed to find user &#39;&#39;</code> ?"},{"score":0,"post_type":"question","creation_date":1687292110,"post_id":76516052,"comment_id":134915549,"body_markdown":"Yes, I saw it too. I am trying to understand where is it looking for this undefined user.\nI do not have a DauAuthenticationProvider class.","link":"https://stackoverflow.com/questions/76516052/invalid-json-response-from-server-when-enabling-spring-security-config-extended#comment134915549_76516052","body":"Yes, I saw it too. I am trying to understand where is it looking for this undefined user. I do not have a DauAuthenticationProvider class."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702372957,"creation_date":1702372957,"answer_id":77644908,"question_id":76516052,"body_markdown":"While this does not explain why it is happening. Using `setLoginView(http, &quot;/ &quot;)`; seems to have this problem fixed (adding space after loginView url).","link":"https://stackoverflow.com/questions/76516052/invalid-json-response-from-server-when-enabling-spring-security-config-extended/77644908#77644908","title":"Invalid JSON response from server when enabling Spring Security Config extended by VaadinWebSecurity","body":"<p>While this does not explain why it is happening. Using <code>setLoginView(http, &quot;/ &quot;)</code>; seems to have this problem fixed (adding space after loginView url).</p>\n"}],"comment_count":4,"is_answered":false,"view_count":188,"answer_count":1,"score":1,"last_activity_date":1702372957,"creation_date":1687273221,"last_edit_date":1687290995,"question_id":76516052,"body_markdown":"Hеllo, all,\r\n\r\nI have a Java project that uses Vaadin 24.0.3, Spring boot 3.0.5, Java 17 and you can see the full project on [this link][1].\r\n\r\n\r\n\r\nThis is the error that I am getting when trying to implement SecurityConfig class:\r\n\r\n&gt; Invalid JSON response from server: &lt;!doctype html&gt;&lt;!-- This file is auto-generated by Vaadin. --&gt; &lt;html theme=&quot;&quot;&gt; &lt;head&gt; &lt;script initial=&quot;&quot;&gt;window.Vaadin = window.Vaadin || {};window.Vaadin.VaadinLicenseChecker = { maybeCheck: (productInfo) =&gt; { }};window.Vaadin.devTools = window.Vaadin.devTools || {};window.Vaadin.devTools.createdCvdlElements = window.Vaadin.devTools.createdCvdlElements || [];window.Vaadin.originalCustomElementDefineFn = window.Vaadin.originalCustomElementDefineFn || window.customElements.define;window.customElements.define = function (tagName, constructor, ...args) {const { cvdlName, version } = constructor;if (cvdlName &amp;&amp; version) { const { connectedCallback } = constructor.prototype; constructor.prototype.connectedCallback = function () { window.Vaadin.devTools.createdCvdlElements.push(this); if (connectedCallback) { connectedCallback.call(this); } }}window.Vaadin.originalCustomElementDefineFn.call(this, tagName, constructor, ...args);};&lt;/script&gt; &lt;script initial=&quot;&quot;&gt;window.Vaadin = window.Vaadin || {};window.Vaadin.ConsoleErrors = window.Vaadin.ConsoleErrors || [];const browserConsoleError = window.console.error.bind(window.console);console.error = (...args) =&gt; { browserConsoleError(...args); window.Vaadin.ConsoleErrors.push(args);};window.onerror = (message, source, lineno, colno, error) =&gt; {const location=source+&#39;:&#39;+lineno+&#39;:&#39;+colno;window.Vaadin.ConsoleErrors.push([message, &#39;(&#39;+location+&#39;)&#39;]);};window.addEventListener(&#39;unhandledrejection&#39;, e =&gt; { window.Vaadin.ConsoleErrors.push([e.reason]);});&lt;/script&gt; &lt;script initial=&quot;&quot;&gt;window.Vaadin = window.Vaadin || {}; window.Vaadin.developmentMode = true;&lt;/script&gt; &lt;script initial=&quot;&quot;&gt;if (!(&#39;CSSLayerBlockRule&#39; in window)) { window.location.search=&#39;v-r=oldbrowser&#39;; } &lt;/script&gt; &lt;script initial=&quot;&quot;&gt;window.Vaadin = window.Vaadin || {};window.Vaadin.TypeScript= {};&lt;/script&gt; &lt;meta name=&quot;_csrf_parameter&quot; content=&quot;_csrf&quot;&gt; &lt;meta name=&quot;_csrf_header&quot; content=&quot;X-CSRF-TOKEN&quot;&gt; &lt;meta name=&quot;_csrf&quot; content=&quot;cdeaa7d3-1a9e-4090-ab21-055dcb6262fa&quot;&gt;&lt;base href=&quot;.&quot;&gt; &lt;script type=&quot;text/javascript&quot;&gt;window.JSCompiler_renameProperty = function(a) { return a;}&lt;/script&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt; &lt;style&gt; body, #outlet { height: 100vh; width: 100%; margin: 0; } &lt;/style&gt; &lt;!-- index.ts is included here automatically (either by the dev server or during the build) --&gt; &lt;script type=&quot;module&quot; src=&quot;VAADIN/dev-bundle/VAADIN/build/indexhtml-88b1d04a.js&quot;&gt;&lt;/script&gt; &lt;style&gt;.v-reconnect-dialog,.v-system-error {position: absolute;color: black;background: white;top: 1em;right: 1em;border: 1px solid black;padding: 1em;z-index: 10000;max-width: calc(100vw - 4em);max-height: calc(100vh - 4em);overflow: auto;} .v-system-error {color: indianred;pointer-events: auto;} .v-system-error h3, .v-system-error b {color: red;}&lt;/style&gt; &lt;style&gt;[hidden] { display: none !important; }&lt;/style&gt; &lt;/head&gt; &lt;body&gt;&lt;!-- This outlet div is where the views are rendered --&gt; &lt;div id=&quot;outlet&quot;&gt;&lt;/div&gt; &lt;script&gt;window.Vaadin = window.Vaadin || {}; window.Vaadin.registrations = window.Vaadin.registrations || []; window.Vaadin.registrations.push({&quot;is&quot;:&quot;flow/SpringInstantiator&quot;,&quot;version&quot;:&quot;24.0.3&quot;},{&quot;is&quot;:&quot;routing/server&quot;,&quot;version&quot;:&quot;24.0.3&quot;},{&quot;is&quot;:&quot;flow/app-dev-bundle&quot;,&quot;version&quot;:&quot;24.0.3&quot;},{&quot;is&quot;:&quot;java&quot;,&quot;version&quot;:&quot;17.0.5&quot;});&lt;/script&gt;&lt;vaadin-dev-tools url=&quot;./VAADIN/push&quot; backend=&quot;SPRING_BOOT_DEVTOOLS&quot; springbootlivereloadport=&quot;35729&quot;&gt;&lt;/vaadin-dev-tools&gt; &lt;/body&gt; &lt;/html&gt;\r\n\r\n\r\nIf I comment out the method &quot;setLoginView(http, LoginView.class&quot;, I am able to get to my login view page, but none of my routes work as expected as I am greeted with the following error message - clicking on them doesn&#39;t work and redirects me to the same error message:\r\n\r\n&gt; Could not navigate to &#39;main&#39;\r\nAvailable routes:\r\n&lt;root&gt;\r\nadmin_panel\r\ncinemas\r\nconfirmation/:___url_parameter (requires parameter)\r\nmain\r\nprojections\r\nregistration\r\ntickets\r\nThis detailed message is only shown when running in development mode.\r\n\r\nThis is the SecurityConfig class\r\n\r\n    package com.finals.cinema.security;\r\n\r\n    import com.finals.cinema.view.LoginView;\r\n    import com.vaadin.flow.spring.security.VaadinWebSecurity;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.builders.WebSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.core.userdetails.User;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    import org.springframework.security.provisioning.InMemoryUserDetailsManager;\r\n    import org.springframework.security.provisioning.UserDetailsManager;\r\n    import org.springframework.security.web.util.matcher.AntPathRequestMatcher;\r\n\r\n    @EnableWebSecurity\r\n    @Configuration\r\n    public class SecurityConfig extends VaadinWebSecurity {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        // Delegating the responsibility of general configurations\r\n        // of http security to the super class. It&#39;s configuring\r\n        // the followings: Vaadin&#39;s CSRF protection by ignoring\r\n        // framework&#39;s internal requests, default request cache,\r\n        // ignoring public views annotated with @AnonymousAllowed,\r\n        // restricting access to other views/endpoints, and enabling\r\n        // ViewAccessChecker authorization.\r\n        // You can add any possible extra configurations of your own\r\n        // here (the following is just an example):\r\n\r\n        // http.rememberMe().alwaysRemember(false);\r\n\r\n        // Configure your static resources with public access before calling\r\n        // super.configure(HttpSecurity) as it adds final anyRequest matcher\r\n        //        http.authorizeHttpRequests().requestMatchers(new AntPathRequestMatcher(&quot;/*&quot;))\r\n        //                .permitAll();\r\n\r\n        super.configure(http);\r\n\r\n        // This is important to register your login view to the\r\n        // view access checker mechanism:\r\n        //        setLoginView(http, LoginView.class);\r\n    }\r\n\r\n    @Override\r\n    public void configure(WebSecurity web) throws Exception {\r\n        // Customize your WebSecurity configuration.\r\n        super.configure(web);\r\n    }\r\n\r\n    /**\r\n     * Demo UserDetailsManager which only provides two hardcoded\r\n     * in memory users and their roles.\r\n     * NOTE: This shouldn&#39;t be used in real world applications.\r\n     */\r\n    @Bean\r\n    public UserDetailsManager userDetailsService() {\r\n        UserDetails user =\r\n                User.withUsername(&quot;user&quot;)\r\n                        .password(&quot;{noop}user&quot;)\r\n                        .roles(&quot;USER&quot;)\r\n                        .build();\r\n        UserDetails admin =\r\n                User.withUsername(&quot;admin&quot;)\r\n                        .password(&quot;{noop}admin&quot;)\r\n                        .roles(&quot;ADMIN&quot;)\r\n                        .build();\r\n        return new InMemoryUserDetailsManager(user, admin);\r\n    }\r\n    }\r\n\r\n  \r\n\r\nWhat I have tried so far:\r\n\r\n    setLoginView(http, LoginView.class);\r\n    setLoginView(http, &quot;&quot;);\r\n    setLoginView(http, &quot;/&quot;);\r\n\r\nsetLoginView(http, MainView.class) - the application works as if the is no Security configured and all routes are available publicly/without being logged in.\r\n\r\nEDIT: This is the debug log from Spring Security.\r\n\r\n    2023-06-20T22:53:26.208+03:00 DEBUG 18424 --- [nio-8888-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /VAADIN/dev-bundle/VAADIN/build/FlowClient-e0ae8105.js\r\n    2023-06-20T22:53:26.289+03:00 DEBUG 18424 --- [nio-8888-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /VAADIN/themes/flowcrmtutorial/styles.css\r\n    2023-06-20T22:53:26.289+03:00 DEBUG 18424 --- [nio-8888-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n    2023-06-20T22:53:26.290+03:00 DEBUG 18424 --- [nio-8888-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /VAADIN/themes/flowcrmtutorial/styles.css\r\n    2023-06-20T22:53:26.297+03:00 DEBUG 18424 --- [nio-8888-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /?v-r=uidl&amp;v-uiId=3\r\n    2023-06-20T22:53:26.444+03:00 DEBUG 18424 --- [nio-8888-exec-4] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user &#39;&#39;\r\n    2023-06-20T22:53:26.446+03:00 DEBUG 18424 --- [nio-8888-exec-4] o.s.s.web.DefaultRedirectStrategy        : Redirecting to /?error\r\n    2023-06-20T22:53:26.450+03:00 DEBUG 18424 --- [nio-8888-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /?error\r\n    2023-06-20T22:53:26.450+03:00 DEBUG 18424 --- [nio-8888-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n    2023-06-20T22:53:26.450+03:00 DEBUG 18424 --- [nio-8888-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /?error\r\n\r\n[1]: https://github.com/Jmorkcho/CinemaApp","link":"https://stackoverflow.com/questions/76516052/invalid-json-response-from-server-when-enabling-spring-security-config-extended","title":"Invalid JSON response from server when enabling Spring Security Config extended by VaadinWebSecurity","body":"<p>Hеllo, all,</p>\n<p>I have a Java project that uses Vaadin 24.0.3, Spring boot 3.0.5, Java 17 and you can see the full project on <a href=\"https://github.com/Jmorkcho/CinemaApp\" rel=\"nofollow noreferrer\">this link</a>.</p>\n<p>This is the error that I am getting when trying to implement SecurityConfig class:</p>\n<blockquote>\n<p>Invalid JSON response from server: &lt;!doctype html&gt;   window.Vaadin = window.Vaadin || {};window.Vaadin.VaadinLicenseChecker = { maybeCheck: (productInfo) =&gt; { }};window.Vaadin.devTools = window.Vaadin.devTools || {};window.Vaadin.devTools.createdCvdlElements = window.Vaadin.devTools.createdCvdlElements || [];window.Vaadin.originalCustomElementDefineFn = window.Vaadin.originalCustomElementDefineFn || window.customElements.define;window.customElements.define = function (tagName, constructor, ...args) {const { cvdlName, version } = constructor;if (cvdlName &amp;&amp; version) { const { connectedCallback } = constructor.prototype; constructor.prototype.connectedCallback = function () { window.Vaadin.devTools.createdCvdlElements.push(this); if (connectedCallback) { connectedCallback.call(this); } }}window.Vaadin.originalCustomElementDefineFn.call(this, tagName, constructor, ...args);}; window.Vaadin = window.Vaadin || {};window.Vaadin.ConsoleErrors = window.Vaadin.ConsoleErrors || [];const browserConsoleError = window.console.error.bind(window.console);console.error = (...args) =&gt; { browserConsoleError(...args); window.Vaadin.ConsoleErrors.push(args);};window.onerror = (message, source, lineno, colno, error) =&gt; {const location=source+':'+lineno+':'+colno;window.Vaadin.ConsoleErrors.push([message, '('+location+')']);};window.addEventListener('unhandledrejection', e =&gt; { window.Vaadin.ConsoleErrors.push([e.reason]);}); window.Vaadin = window.Vaadin || {}; window.Vaadin.developmentMode = true; if (!('CSSLayerBlockRule' in window)) { window.location.search='v-r=oldbrowser'; }  window.Vaadin = window.Vaadin || {};window.Vaadin.TypeScript= {};    window.JSCompiler_renameProperty = function(a) { return a;}    body, #outlet { height: 100vh; width: 100%; margin: 0; }    .v-reconnect-dialog,.v-system-error {position: absolute;color: black;background: white;top: 1em;right: 1em;border: 1px solid black;padding: 1em;z-index: 10000;max-width: calc(100vw - 4em);max-height: calc(100vh - 4em);overflow: auto;} .v-system-error {color: indianred;pointer-events: auto;} .v-system-error h3, .v-system-error b {color: red;} [hidden] { display: none !important; }    window.Vaadin = window.Vaadin || {}; window.Vaadin.registrations = window.Vaadin.registrations || []; window.Vaadin.registrations.push({&quot;is&quot;:&quot;flow/SpringInstantiator&quot;,&quot;version&quot;:&quot;24.0.3&quot;},{&quot;is&quot;:&quot;routing/server&quot;,&quot;version&quot;:&quot;24.0.3&quot;},{&quot;is&quot;:&quot;flow/app-dev-bundle&quot;,&quot;version&quot;:&quot;24.0.3&quot;},{&quot;is&quot;:&quot;java&quot;,&quot;version&quot;:&quot;17.0.5&quot;});  </p>\n</blockquote>\n<p>If I comment out the method &quot;setLoginView(http, LoginView.class&quot;, I am able to get to my login view page, but none of my routes work as expected as I am greeted with the following error message - clicking on them doesn't work and redirects me to the same error message:</p>\n<blockquote>\n<p>Could not navigate to 'main'\nAvailable routes:\n\nadmin_panel\ncinemas\nconfirmation/:___url_parameter (requires parameter)\nmain\nprojections\nregistration\ntickets\nThis detailed message is only shown when running in development mode.</p>\n</blockquote>\n<p>This is the SecurityConfig class</p>\n<pre><code>package com.finals.cinema.security;\n\nimport com.finals.cinema.view.LoginView;\nimport com.vaadin.flow.spring.security.VaadinWebSecurity;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.builders.WebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager;\nimport org.springframework.security.provisioning.UserDetailsManager;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\n\n@EnableWebSecurity\n@Configuration\npublic class SecurityConfig extends VaadinWebSecurity {\n\n@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    // Delegating the responsibility of general configurations\n    // of http security to the super class. It's configuring\n    // the followings: Vaadin's CSRF protection by ignoring\n    // framework's internal requests, default request cache,\n    // ignoring public views annotated with @AnonymousAllowed,\n    // restricting access to other views/endpoints, and enabling\n    // ViewAccessChecker authorization.\n    // You can add any possible extra configurations of your own\n    // here (the following is just an example):\n\n    // http.rememberMe().alwaysRemember(false);\n\n    // Configure your static resources with public access before calling\n    // super.configure(HttpSecurity) as it adds final anyRequest matcher\n    //        http.authorizeHttpRequests().requestMatchers(new AntPathRequestMatcher(&quot;/*&quot;))\n    //                .permitAll();\n\n    super.configure(http);\n\n    // This is important to register your login view to the\n    // view access checker mechanism:\n    //        setLoginView(http, LoginView.class);\n}\n\n@Override\npublic void configure(WebSecurity web) throws Exception {\n    // Customize your WebSecurity configuration.\n    super.configure(web);\n}\n\n/**\n * Demo UserDetailsManager which only provides two hardcoded\n * in memory users and their roles.\n * NOTE: This shouldn't be used in real world applications.\n */\n@Bean\npublic UserDetailsManager userDetailsService() {\n    UserDetails user =\n            User.withUsername(&quot;user&quot;)\n                    .password(&quot;{noop}user&quot;)\n                    .roles(&quot;USER&quot;)\n                    .build();\n    UserDetails admin =\n            User.withUsername(&quot;admin&quot;)\n                    .password(&quot;{noop}admin&quot;)\n                    .roles(&quot;ADMIN&quot;)\n                    .build();\n    return new InMemoryUserDetailsManager(user, admin);\n}\n}\n</code></pre>\n<p>What I have tried so far:</p>\n<pre><code>setLoginView(http, LoginView.class);\nsetLoginView(http, &quot;&quot;);\nsetLoginView(http, &quot;/&quot;);\n</code></pre>\n<p>setLoginView(http, MainView.class) - the application works as if the is no Security configured and all routes are available publicly/without being logged in.</p>\n<p>EDIT: This is the debug log from Spring Security.</p>\n<pre><code>2023-06-20T22:53:26.208+03:00 DEBUG 18424 --- [nio-8888-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /VAADIN/dev-bundle/VAADIN/build/FlowClient-e0ae8105.js\n2023-06-20T22:53:26.289+03:00 DEBUG 18424 --- [nio-8888-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /VAADIN/themes/flowcrmtutorial/styles.css\n2023-06-20T22:53:26.289+03:00 DEBUG 18424 --- [nio-8888-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n2023-06-20T22:53:26.290+03:00 DEBUG 18424 --- [nio-8888-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /VAADIN/themes/flowcrmtutorial/styles.css\n2023-06-20T22:53:26.297+03:00 DEBUG 18424 --- [nio-8888-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /?v-r=uidl&amp;v-uiId=3\n2023-06-20T22:53:26.444+03:00 DEBUG 18424 --- [nio-8888-exec-4] o.s.s.a.dao.DaoAuthenticationProvider    : Failed to find user ''\n2023-06-20T22:53:26.446+03:00 DEBUG 18424 --- [nio-8888-exec-4] o.s.s.web.DefaultRedirectStrategy        : Redirecting to /?error\n2023-06-20T22:53:26.450+03:00 DEBUG 18424 --- [nio-8888-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /?error\n2023-06-20T22:53:26.450+03:00 DEBUG 18424 --- [nio-8888-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n2023-06-20T22:53:26.450+03:00 DEBUG 18424 --- [nio-8888-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /?error\n</code></pre>\n"},{"tags":["java","swing"],"comments":[{"score":2,"post_type":"question","creation_date":1701101086,"post_id":77557150,"comment_id":136730308,"body_markdown":"1) Don&#39;t use a util.Timer. Instead use javax.swing.Timer. All updates to Swing components should be done on the Event Dispatch Thread (EDT). The Swing Timer invokes code on the EDT. 2) No need for any of the update/validate methods. The setIcon(...) method of the label will automatically invoke revalidate() and repaint().  3) Instead of using a Timer, maybe use a SwingWorker to handle the packet data. Read the Swing tutorial on [Concurrency](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) for more information and examples. 4) Post an [mre] demonstrating the problem.","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136730308_77557150","body":"1) Don&#39;t use a util.Timer. Instead use javax.swing.Timer. All updates to Swing components should be done on the Event Dispatch Thread (EDT). The Swing Timer invokes code on the EDT. 2) No need for any of the update/validate methods. The setIcon(...) method of the label will automatically invoke revalidate() and repaint().  3) Instead of using a Timer, maybe use a SwingWorker to handle the packet data. Read the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency</a> for more information and examples. 4) Post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem."},{"score":0,"post_type":"question","creation_date":1701166053,"post_id":77557150,"comment_id":136738743,"body_markdown":"Thank you for the above comments. Referring to them: 1) I am using javax.swing.Timer. 3) To receive packets, I use a separate UDP listener in a class that extends Thread, and the GUI updating method is called from it (another table with packets is always updated correctly in the GUI). The timer is only used to flash the LED indicator for a DELAY period. 4) The application is very extensive and has many classes, and the GUI implementation is about half a thousand lines long, so I don&#39;t know what part of the code would be useful.","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136738743_77557150","body":"Thank you for the above comments. Referring to them: 1) I am using javax.swing.Timer. 3) To receive packets, I use a separate UDP listener in a class that extends Thread, and the GUI updating method is called from it (another table with packets is always updated correctly in the GUI). The timer is only used to flash the LED indicator for a DELAY period. 4) The application is very extensive and has many classes, and the GUI implementation is about half a thousand lines long, so I don&#39;t know what part of the code would be useful."},{"score":0,"post_type":"question","creation_date":1701261313,"post_id":77557150,"comment_id":136753292,"body_markdown":"@camickr I have added a small update to the information.","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136753292_77557150","body":"@camickr I have added a small update to the information."},{"score":1,"post_type":"question","creation_date":1701261842,"post_id":77557150,"comment_id":136753380,"body_markdown":"When you&#39;re using a swing time you don&#39;t need to `EventQueue.invokeLater` as it&#39;s already on the EventQueue. Although it puts it at the end of the queue if you need something like that. Can you make a single JFrame with a JLabel and ImageIcon and reproduce your example?","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136753380_77557150","body":"When you&#39;re using a swing time you don&#39;t need to <code>EventQueue.invokeLater</code> as it&#39;s already on the EventQueue. Although it puts it at the end of the queue if you need something like that. Can you make a single JFrame with a JLabel and ImageIcon and reproduce your example?"},{"score":0,"post_type":"question","creation_date":1701270566,"post_id":77557150,"comment_id":136755253,"body_markdown":"*The problem with refreshing is therefore when setting ENABLE_LED in the receivedPacket() method.* - because you always restart the Timer in that method so when the Timer fires it will become disabled.","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136755253_77557150","body":"<i>The problem with refreshing is therefore when setting ENABLE_LED in the receivedPacket() method.</i> - because you always restart the Timer in that method so when the Timer fires it will become disabled."},{"score":0,"post_type":"question","creation_date":1701338785,"post_id":77557150,"comment_id":136764241,"body_markdown":"@camickr Above, I added the missing `setRepeats(false)` command during initialization, that occurs in my application. It seems to me that the Timer mechanism is correct, because if the cursor is within the window, everything works fine.","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136764241_77557150","body":"@camickr Above, I added the missing <code>setRepeats(false)</code> command during initialization, that occurs in my application. It seems to me that the Timer mechanism is correct, because if the cursor is within the window, everything works fine."},{"score":1,"post_type":"question","creation_date":1701360103,"post_id":77557150,"comment_id":136768399,"body_markdown":"I have never had an issue updating an Icon using a Swing Timer whether the mouse is in the window or not. See: [Animated Icon](https://tips4java.wordpress.com/2009/06/21/animated-icon/) for a working example. I use Windows, don&#39;t know if OS platform causes issues. Once again post an [mre] if you need more help. Your real application logic is irrelevant to the stated problem. You just need a simple way to toggle icons.","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136768399_77557150","body":"I have never had an issue updating an Icon using a Swing Timer whether the mouse is in the window or not. See: <a href=\"https://tips4java.wordpress.com/2009/06/21/animated-icon/\" rel=\"nofollow noreferrer\">Animated Icon</a> for a working example. I use Windows, don&#39;t know if OS platform causes issues. Once again post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> if you need more help. Your real application logic is irrelevant to the stated problem. You just need a simple way to toggle icons."},{"score":0,"post_type":"question","creation_date":1701694993,"post_id":77557150,"comment_id":136803681,"body_markdown":"@camickr I have added an update to the information including that there is no problem on Windows.","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136803681_77557150","body":"@camickr I have added an update to the information including that there is no problem on Windows."},{"score":0,"post_type":"question","creation_date":1701701902,"post_id":77557150,"comment_id":136805115,"body_markdown":"(1-) You still haven&#39;t posted an [mre]. Did you test my code on Linux? How do you know if the problem is Linux or your code?","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136805115_77557150","body":"(1-) You still haven&#39;t posted an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Did you test my code on Linux? How do you know if the problem is Linux or your code?"},{"score":0,"post_type":"question","creation_date":1701779362,"post_id":77557150,"comment_id":136815345,"body_markdown":"@camickr Yes, I tested your code on Linux and it works without errors. I&#39;m not sure, the reason for my errors is the Linux system itself, but on Windows there are simply no errors, but on Linux there are - I wrote this as a hint. Maybe Linux has other threading mechanisms, including GUI threading? I have updated the post above.","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136815345_77557150","body":"@camickr Yes, I tested your code on Linux and it works without errors. I&#39;m not sure, the reason for my errors is the Linux system itself, but on Windows there are simply no errors, but on Linux there are - I wrote this as a hint. Maybe Linux has other threading mechanisms, including GUI threading? I have updated the post above."},{"score":0,"post_type":"question","creation_date":1701781640,"post_id":77557150,"comment_id":136815746,"body_markdown":"Yes, windows and linux handle things differently. If Camickr&#39;s example works fine, but yours fails, then I suspect you could fix your code. The best way would be to post a minimal reproducible example.","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136815746_77557150","body":"Yes, windows and linux handle things differently. If Camickr&#39;s example works fine, but yours fails, then I suspect you could fix your code. The best way would be to post a minimal reproducible example."},{"score":0,"post_type":"question","creation_date":1701881236,"post_id":77557150,"comment_id":136830549,"body_markdown":"The example you&#39;re suggesting has a complete compilable example. Their example becomes choppy and slow Also, did you try adding `-Dsun.java2d.opengl=True` when you run your program?","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136830549_77557150","body":"The example you&#39;re suggesting has a complete compilable example. Their example becomes choppy and slow Also, did you try adding <code>-Dsun.java2d.opengl=True</code> when you run your program?"},{"score":0,"post_type":"question","creation_date":1701882525,"post_id":77557150,"comment_id":136830776,"body_markdown":"I added an answer to that question, because if I use a JLabel with an ImageIcon it becomes much smoother. Which is odd to say the least.","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136830776_77557150","body":"I added an answer to that question, because if I use a JLabel with an ImageIcon it becomes much smoother. Which is odd to say the least."},{"score":0,"post_type":"question","creation_date":1701950422,"post_id":77557150,"comment_id":136839597,"body_markdown":"@matt _did you try adding -Dsun.java2d.opengl=True_ - I just tried this (in two ways - when running in the console and as a `setProperty` in the code) and it didn&#39;t help. It doesn&#39;t matter whether I update this LED light or, for example, deactivate/activate another button in the GUI in the place in the code where this LED is enabled - the problem is the same. There is no problem only if I update the table data in its model when receiving the packets. I will try to extract a piece of code from the application that will illustrate this more clearly.","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136839597_77557150","body":"@matt <i>did you try adding -Dsun.java2d.opengl=True</i> - I just tried this (in two ways - when running in the console and as a <code>setProperty</code> in the code) and it didn&#39;t help. It doesn&#39;t matter whether I update this LED light or, for example, deactivate/activate another button in the GUI in the place in the code where this LED is enabled - the problem is the same. There is no problem only if I update the table data in its model when receiving the packets. I will try to extract a piece of code from the application that will illustrate this more clearly."},{"score":0,"post_type":"question","creation_date":1702286694,"post_id":77557150,"comment_id":136873303,"body_markdown":"In UPDATE 2 I added the code of a simple program that illustrates the problem.","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136873303_77557150","body":"In UPDATE 2 I added the code of a simple program that illustrates the problem."},{"score":0,"post_type":"question","creation_date":1702418133,"post_id":77557150,"comment_id":136893223,"body_markdown":"This looks better, you could probably just reduce your problem down to the new question. I can reproduce it. If I run it with opengl enabled, &quot;java -Dsun.java2d.opengl=True MainWindow.java&quot; it works. Do you have to use the second time and restart? I think that is a bit clunky for running something with a delay. Is there a reason, or is that to simulate something else?","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136893223_77557150","body":"This looks better, you could probably just reduce your problem down to the new question. I can reproduce it. If I run it with opengl enabled, &quot;java -Dsun.java2d.opengl=True MainWindow.java&quot; it works. Do you have to use the second time and restart? I think that is a bit clunky for running something with a delay. Is there a reason, or is that to simulate something else?"},{"score":0,"post_type":"question","creation_date":1702453244,"post_id":77557150,"comment_id":136897069,"body_markdown":"This LED lighting mechanism is used in my application, which receives packets cyclically, e.g. every second. In the above example, the cyclic reception of packets is simulated by `eventTimer`, and the `ledDelayTimer` for a delay of 300ms is used in the same way, which also causes the refreshing problem. I haven&#39;t found any other way to turn on the LED for 300ms when the packet is received. I&#39;m new here and I&#39;d like to ask if I should move this last example with description to a separate post?","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136897069_77557150","body":"This LED lighting mechanism is used in my application, which receives packets cyclically, e.g. every second. In the above example, the cyclic reception of packets is simulated by <code>eventTimer</code>, and the <code>ledDelayTimer</code> for a delay of 300ms is used in the same way, which also causes the refreshing problem. I haven&#39;t found any other way to turn on the LED for 300ms when the packet is received. I&#39;m new here and I&#39;d like to ask if I should move this last example with description to a separate post?"},{"score":0,"post_type":"question","creation_date":1702547218,"post_id":77557150,"comment_id":136910297,"body_markdown":"@matt Sorry, after correctly using the &quot;java -Dsun.java2d.opengl=True&quot; command, there is no problem with refreshing the LEDs in the above example application and in my extended target application, but most of the window with controls, apart from the LEDs and the table, turns completely black (just like the window background in the sample app above).","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136910297_77557150","body":"@matt Sorry, after correctly using the &quot;java -Dsun.java2d.opengl=True&quot; command, there is no problem with refreshing the LEDs in the above example application and in my extended target application, but most of the window with controls, apart from the LEDs and the table, turns completely black (just like the window background in the sample app above)."},{"score":0,"post_type":"question","creation_date":1702548556,"post_id":77557150,"comment_id":136910526,"body_markdown":"Resizing the window eliminates the black background, but in my target application usually only temporarily if the LEDs are flashing.","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136910526_77557150","body":"Resizing the window eliminates the black background, but in my target application usually only temporarily if the LEDs are flashing."},{"score":0,"post_type":"question","creation_date":1702548962,"post_id":77557150,"comment_id":136910603,"body_markdown":"What a pain, I could remove the black effect by explicitly setting content pane to be opaque. `((JComponent)getContentPane()).setOpaque(true);`","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136910603_77557150","body":"What a pain, I could remove the black effect by explicitly setting content pane to be opaque. <code>((JComponent)getContentPane()).setOpaque(true);</code>"},{"score":0,"post_type":"question","creation_date":1702554102,"post_id":77557150,"comment_id":136911600,"body_markdown":"I set, in the GUI design of the above sample application, the opaque option selected for the `jPanel1` and `jLabel1`, but this did not help and after running, the background around `jLabel1` in `jPanel1` is black until I manually resize the window. Also, setting `((JComponent)getContentPane()).setOpaque(true);` after component initialization did not help.","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui#comment136911600_77557150","body":"I set, in the GUI design of the above sample application, the opaque option selected for the <code>jPanel1</code> and <code>jLabel1</code>, but this did not help and after running, the background around <code>jLabel1</code> in <code>jPanel1</code> is black until I manually resize the window. Also, setting <code>((JComponent)getContentPane()).setOpaque(true);</code> after component initialization did not help."}],"comment_count":21,"is_answered":false,"view_count":261,"answer_count":0,"score":-1,"last_activity_date":1702366595,"creation_date":1701090551,"last_edit_date":1702366595,"question_id":77557150,"body_markdown":"I have an application written in Swing that receives data packets and then in the GUI signals the reception of each packet (e.g. every second) using an indicator (light) that changes its color. The indicator is implemented as a `JLabel`, and its color is changed by replacing the icon with the `setIcon(Icon icon)` method.\r\nPacket reception is done from another thread (I don&#39;t know if it matters) and I use the standard `invokeLater` mechanism to update the GUI.\r\n\r\nIndicator has two states: ENABLE_LED and DISABLE_LED, and the display time of a given state is determined by the DELAY of the timer which is reset after each received packet.\r\n\r\nWhile receiving packets, I noticed a problem with refreshing the indicator in GUI **if I drag the mouse cursor outside the application window area**. In this case, usually there is correct signalling for a few seconds but later the indicator are not refreshing. After moving the mouse over the application window area again (without clicking), the indicator starts refreshing properly.\r\n\r\nI have tried various methods to force a refresh of the `JPanel` object, that contains the modified `JLabel` added to it using `addComponent()`, but none of the methods below fixed the problem.\r\n\r\n```java\r\nprivate void initTimer() {\r\n  receiveTimer = new Timer(DELAY, (ActionEvent ae) -&gt; {\r\n    EventQueue.invokeLater(new Runnable() {\r\n      @Override\r\n      public void run() {\r\n        receiveLabel.setIcon(DISABLE_LED);\r\n    \r\n        // Test use of refresh methods (one or several at the same time)\r\n        receivePanel.updateUI();\r\n        receivePanel.validate();\r\n        receivePanel.revalidate();\r\n        receivePanel.repaint();\r\n      }\r\n    });\r\n  });\r\n  receiveTimer.setRepeats(false);\r\n}\r\n```\r\n\r\n```java\r\npublic static void receivedPacket() {\r\n  receiveTimer.restart();\r\n\r\n  EventQueue.invokeLater(new Runnable() {\r\n    @Override\r\n    public void run() {\r\n      receiveLabel.setIcon(ENABLE_LED);\r\n  \r\n      // Test use of refresh methods (one or several at the same time)\r\n      receivePanel.updateUI();\r\n      receivePanel.validate();\r\n      receivePanel.revalidate();\r\n      receivePanel.repaint();\r\n    }\r\n  });\r\n}\r\n```\r\n\r\nPlease give me a hint on how to solve this problem.\r\n\r\nPlease also explain why GUI refreshing may depend in any way on whether the mouse cursor is within the application window or not?\r\n\r\n**UPDATE:**\r\n\r\nWhen refreshing is stopped, the LED is always turned off (DISABLE_LED state set by the Timer). The problem with refreshing is therefore when setting ENABLE_LED in the `receivedPacket()` method.\r\n\r\nSubsequent tests showed that the LED light in the GUI does not refresh not only when the cursor is outside the application window, but also when it is moved into the application area and remains motionless for, for example, 5 seconds. Then, for example, moving the cursor, covering the application window with another window or dragging the application window to another place causes refreshing to resume. The problem occurs when I run the application on Linux (Mint 18 or CentOS), but **on Windows there is no such problem**.\r\n\r\nIt seems to me that Linux may divide thread handling in a different way, and the refreshing of some elements in the GUI sometimes becomes frozen until, for example, the cursor is moved in the application window area. I receive packets in a different thread every second and at the same time the LED light should light up for 0.3 seconds. In turn, the table that displays packets received in the same thread (via updates to its model) always updates correctly.\r\n\r\nI think the problem is similar to: [Why does my custom Swing component repaint faster when I move the mouse? (Java)][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/57948299/why-does-my-custom-swing-component-repaint-faster-when-i-move-the-mouse-java?rq=2\r\n\r\n**UPDATE 2:**\r\n\r\nI wrote a simple program that uses the above described mechanism of turning on and off the LED using a timer.\r\nBelow is the code of this program. Its task is only to change the color of the LED lamp cyclically from red to green every second for a period of 300 ms.\r\n\r\n**The same no refresh effect** has been observed when the cursor moves outside the application window area. I also did a test in which I did **not use the `ledDelayTimer` timer** to display the green LED, but only alternated the colors, and **then the problem did not occur.**\r\n\r\n```java\r\npublic class GuiTimerIcon {\r\n\r\n    /**\r\n     * @param args the command line arguments\r\n     */\r\n    public static void main(String[] args) {\r\n        new MainWindow();\r\n    }\r\n}\r\n```\r\n\r\n```java\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.util.logging.Level;\r\nimport java.util.logging.Logger;\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.ImageIcon;\r\nimport javax.swing.Timer;\r\n\r\npublic class MainWindow extends javax.swing.JFrame {\r\n\r\n    private static Timer eventTimer;\r\n    private static Timer ledDelayTimer;\r\n    private static ImageIcon ENABLED_LED;\r\n    private static ImageIcon DISABLED_LED;\r\n    \r\n    /**\r\n     * Creates new form MainWindow\r\n     */\r\n    public MainWindow() {\r\n        initComponents();\r\n        this.setVisible(true);\r\n        \r\n        try {\r\n            BufferedImage buffEnabled = ImageIO.read(new File(&quot;/home/greenLed.png&quot;));\r\n            BufferedImage buffDisabled = ImageIO.read(new File(&quot;/home/redLed.png&quot;));\r\n            \r\n            ENABLED_LED = new ImageIcon(buffEnabled);\r\n            DISABLED_LED = new ImageIcon(buffDisabled);\r\n        } catch (IOException ex) {\r\n            Logger.getLogger(MainWindow.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n        \r\n        initLedDelayTimer();\r\n        \r\n        eventTimer = new Timer(1000, (ActionEvent ae) -&gt; {\r\n            jLabel1.setIcon(ENABLED_LED);\r\n            ledDelayTimer.restart();\r\n        });\r\n        \r\n        eventTimer.start();\r\n    }\r\n    \r\n    private void initLedDelayTimer() {\r\n        ledDelayTimer = new Timer(300, (ActionEvent ae) -&gt; {\r\n            jLabel1.setIcon(DISABLED_LED);\r\n        });\r\n        \r\n        ledDelayTimer.setRepeats(false);\r\n    }\r\n\r\n    /**\r\n     * This method is called from within the constructor to initialize the form.\r\n     * WARNING: Do NOT modify this code. The content of this method is always\r\n     * regenerated by the Form Editor.\r\n     */\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;                          \r\n    private void initComponents() {\r\n\r\n        jPanel1 = new javax.swing.JPanel();\r\n        jLabel1 = new javax.swing.JLabel();\r\n\r\n        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);\r\n        setMinimumSize(new java.awt.Dimension(400, 300));\r\n\r\n        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);\r\n        jPanel1.setLayout(jPanel1Layout);\r\n        jPanel1Layout.setHorizontalGroup(\r\n            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n            .addGroup(jPanel1Layout.createSequentialGroup()\r\n                .addGap(82, 82, 82)\r\n                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 220, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                .addContainerGap(98, Short.MAX_VALUE))\r\n        );\r\n        jPanel1Layout.setVerticalGroup(\r\n            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n            .addGroup(jPanel1Layout.createSequentialGroup()\r\n                .addGap(28, 28, 28)\r\n                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 220, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                .addContainerGap(29, Short.MAX_VALUE))\r\n        );\r\n\r\n        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());\r\n        getContentPane().setLayout(layout);\r\n        layout.setHorizontalGroup(\r\n            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n        );\r\n        layout.setVerticalGroup(\r\n            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n            .addGroup(layout.createSequentialGroup()\r\n                .addContainerGap()\r\n                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n                .addContainerGap())\r\n        );\r\n\r\n        pack();\r\n    }// &lt;/editor-fold&gt;                        \r\n\r\n    // Variables declaration - do not modify                     \r\n    private javax.swing.JLabel jLabel1;\r\n    private javax.swing.JPanel jPanel1;\r\n    // End of variables declaration                   \r\n}\r\n```","link":"https://stackoverflow.com/questions/77557150/the-swing-window-stops-updating-on-linux-when-there-is-no-user-action-in-gui","title":"The Swing window stops updating on Linux when there is no user action in GUI","body":"<p>I have an application written in Swing that receives data packets and then in the GUI signals the reception of each packet (e.g. every second) using an indicator (light) that changes its color. The indicator is implemented as a <code>JLabel</code>, and its color is changed by replacing the icon with the <code>setIcon(Icon icon)</code> method.\nPacket reception is done from another thread (I don't know if it matters) and I use the standard <code>invokeLater</code> mechanism to update the GUI.</p>\n<p>Indicator has two states: ENABLE_LED and DISABLE_LED, and the display time of a given state is determined by the DELAY of the timer which is reset after each received packet.</p>\n<p>While receiving packets, I noticed a problem with refreshing the indicator in GUI <strong>if I drag the mouse cursor outside the application window area</strong>. In this case, usually there is correct signalling for a few seconds but later the indicator are not refreshing. After moving the mouse over the application window area again (without clicking), the indicator starts refreshing properly.</p>\n<p>I have tried various methods to force a refresh of the <code>JPanel</code> object, that contains the modified <code>JLabel</code> added to it using <code>addComponent()</code>, but none of the methods below fixed the problem.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void initTimer() {\n  receiveTimer = new Timer(DELAY, (ActionEvent ae) -&gt; {\n    EventQueue.invokeLater(new Runnable() {\n      @Override\n      public void run() {\n        receiveLabel.setIcon(DISABLE_LED);\n    \n        // Test use of refresh methods (one or several at the same time)\n        receivePanel.updateUI();\n        receivePanel.validate();\n        receivePanel.revalidate();\n        receivePanel.repaint();\n      }\n    });\n  });\n  receiveTimer.setRepeats(false);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public static void receivedPacket() {\n  receiveTimer.restart();\n\n  EventQueue.invokeLater(new Runnable() {\n    @Override\n    public void run() {\n      receiveLabel.setIcon(ENABLE_LED);\n  \n      // Test use of refresh methods (one or several at the same time)\n      receivePanel.updateUI();\n      receivePanel.validate();\n      receivePanel.revalidate();\n      receivePanel.repaint();\n    }\n  });\n}\n</code></pre>\n<p>Please give me a hint on how to solve this problem.</p>\n<p>Please also explain why GUI refreshing may depend in any way on whether the mouse cursor is within the application window or not?</p>\n<p><strong>UPDATE:</strong></p>\n<p>When refreshing is stopped, the LED is always turned off (DISABLE_LED state set by the Timer). The problem with refreshing is therefore when setting ENABLE_LED in the <code>receivedPacket()</code> method.</p>\n<p>Subsequent tests showed that the LED light in the GUI does not refresh not only when the cursor is outside the application window, but also when it is moved into the application area and remains motionless for, for example, 5 seconds. Then, for example, moving the cursor, covering the application window with another window or dragging the application window to another place causes refreshing to resume. The problem occurs when I run the application on Linux (Mint 18 or CentOS), but <strong>on Windows there is no such problem</strong>.</p>\n<p>It seems to me that Linux may divide thread handling in a different way, and the refreshing of some elements in the GUI sometimes becomes frozen until, for example, the cursor is moved in the application window area. I receive packets in a different thread every second and at the same time the LED light should light up for 0.3 seconds. In turn, the table that displays packets received in the same thread (via updates to its model) always updates correctly.</p>\n<p>I think the problem is similar to: <a href=\"https://stackoverflow.com/questions/57948299/why-does-my-custom-swing-component-repaint-faster-when-i-move-the-mouse-java?rq=2\">Why does my custom Swing component repaint faster when I move the mouse? (Java)</a></p>\n<p><strong>UPDATE 2:</strong></p>\n<p>I wrote a simple program that uses the above described mechanism of turning on and off the LED using a timer.\nBelow is the code of this program. Its task is only to change the color of the LED lamp cyclically from red to green every second for a period of 300 ms.</p>\n<p><strong>The same no refresh effect</strong> has been observed when the cursor moves outside the application window area. I also did a test in which I did <strong>not use the <code>ledDelayTimer</code> timer</strong> to display the green LED, but only alternated the colors, and <strong>then the problem did not occur.</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class GuiTimerIcon {\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args) {\n        new MainWindow();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.event.ActionEvent;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javax.imageio.ImageIO;\nimport javax.swing.ImageIcon;\nimport javax.swing.Timer;\n\npublic class MainWindow extends javax.swing.JFrame {\n\n    private static Timer eventTimer;\n    private static Timer ledDelayTimer;\n    private static ImageIcon ENABLED_LED;\n    private static ImageIcon DISABLED_LED;\n    \n    /**\n     * Creates new form MainWindow\n     */\n    public MainWindow() {\n        initComponents();\n        this.setVisible(true);\n        \n        try {\n            BufferedImage buffEnabled = ImageIO.read(new File(&quot;/home/greenLed.png&quot;));\n            BufferedImage buffDisabled = ImageIO.read(new File(&quot;/home/redLed.png&quot;));\n            \n            ENABLED_LED = new ImageIcon(buffEnabled);\n            DISABLED_LED = new ImageIcon(buffDisabled);\n        } catch (IOException ex) {\n            Logger.getLogger(MainWindow.class.getName()).log(Level.SEVERE, null, ex);\n        }\n        \n        initLedDelayTimer();\n        \n        eventTimer = new Timer(1000, (ActionEvent ae) -&gt; {\n            jLabel1.setIcon(ENABLED_LED);\n            ledDelayTimer.restart();\n        });\n        \n        eventTimer.start();\n    }\n    \n    private void initLedDelayTimer() {\n        ledDelayTimer = new Timer(300, (ActionEvent ae) -&gt; {\n            jLabel1.setIcon(DISABLED_LED);\n        });\n        \n        ledDelayTimer.setRepeats(false);\n    }\n\n    /**\n     * This method is called from within the constructor to initialize the form.\n     * WARNING: Do NOT modify this code. The content of this method is always\n     * regenerated by the Form Editor.\n     */\n    @SuppressWarnings(&quot;unchecked&quot;)\n    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;                          \n    private void initComponents() {\n\n        jPanel1 = new javax.swing.JPanel();\n        jLabel1 = new javax.swing.JLabel();\n\n        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);\n        setMinimumSize(new java.awt.Dimension(400, 300));\n\n        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);\n        jPanel1.setLayout(jPanel1Layout);\n        jPanel1Layout.setHorizontalGroup(\n            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addGroup(jPanel1Layout.createSequentialGroup()\n                .addGap(82, 82, 82)\n                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 220, javax.swing.GroupLayout.PREFERRED_SIZE)\n                .addContainerGap(98, Short.MAX_VALUE))\n        );\n        jPanel1Layout.setVerticalGroup(\n            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addGroup(jPanel1Layout.createSequentialGroup()\n                .addGap(28, 28, 28)\n                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 220, javax.swing.GroupLayout.PREFERRED_SIZE)\n                .addContainerGap(29, Short.MAX_VALUE))\n        );\n\n        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());\n        getContentPane().setLayout(layout);\n        layout.setHorizontalGroup(\n            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n        );\n        layout.setVerticalGroup(\n            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addGroup(layout.createSequentialGroup()\n                .addContainerGap()\n                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                .addContainerGap())\n        );\n\n        pack();\n    }// &lt;/editor-fold&gt;                        \n\n    // Variables declaration - do not modify                     \n    private javax.swing.JLabel jLabel1;\n    private javax.swing.JPanel jPanel1;\n    // End of variables declaration                   \n}\n</code></pre>\n"},{"tags":["java","hibernate","many-to-many"],"comments":[{"score":0,"post_type":"question","creation_date":1701344670,"post_id":77570427,"comment_id":136765273,"body_markdown":"To understand your question better, you do not want to use that line and permissions will be deleted from the table, correct?\n**`employee.getAppUser().getPermissions().clear();`**","link":"https://stackoverflow.com/questions/77570427/clear-manytomany-via-cascaded-onetoone-remove#comment136765273_77570427","body":"To understand your question better, you do not want to use that line and permissions will be deleted from the table, correct? <b><code>employee.getAppUser().getPermissions().clear();</code></b>"},{"score":0,"post_type":"question","creation_date":1701415945,"post_id":77570427,"comment_id":136775228,"body_markdown":"Actually, I&#39;m just trying to remove the AppUser-entry from the Employee-entry with an update via Employee. But since the User has Permissions, it fails.","link":"https://stackoverflow.com/questions/77570427/clear-manytomany-via-cascaded-onetoone-remove#comment136775228_77570427","body":"Actually, I&#39;m just trying to remove the AppUser-entry from the Employee-entry with an update via Employee. But since the User has Permissions, it fails."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1701418868,"post_id":77583742,"comment_id":136775625,"body_markdown":"Thanks for your hint. I don&#39;t wan&#39;t the permissions to be deleted. I still tried that and it doesn&#39;t work. Instead of having JPA removing the entry from AppUserPermission, it tries to delete the permission (which is still referenced in AppUserPermission).","link":"https://stackoverflow.com/questions/77570427/clear-manytomany-via-cascaded-onetoone-remove/77583742#comment136775625_77583742","body":"Thanks for your hint. I don&#39;t wan&#39;t the permissions to be deleted. I still tried that and it doesn&#39;t work. Instead of having JPA removing the entry from AppUserPermission, it tries to delete the permission (which is still referenced in AppUserPermission)."}],"comment_count":1,"score":0,"last_activity_date":1701417334,"creation_date":1701417334,"answer_id":77583742,"question_id":77570427,"body_markdown":"Can you try this in the `AppUser` class? \r\n\r\n    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n    @JoinTable(name = &quot;AppUserPermission&quot;, joinColumns = @JoinColumn(name = &quot;appUserId&quot;), inverseJoinColumns = @JoinColumn(name = &quot;permissionId&quot;))\r\n    private Set&lt;Permission&gt; permissions = new HashSet&lt;&gt;();\r\n\r\nSince you use specify cascade `CascadeType.ALL` when `AppUser` entry is deleted, associated permissions also should be deleted automatically.","link":"https://stackoverflow.com/questions/77570427/clear-manytomany-via-cascaded-onetoone-remove/77583742#77583742","title":"Clear ManyToMany via cascaded OneToOne remove","body":"<p>Can you try this in the <code>AppUser</code> class?</p>\n<pre><code>@ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n@JoinTable(name = &quot;AppUserPermission&quot;, joinColumns = @JoinColumn(name = &quot;appUserId&quot;), inverseJoinColumns = @JoinColumn(name = &quot;permissionId&quot;))\nprivate Set&lt;Permission&gt; permissions = new HashSet&lt;&gt;();\n</code></pre>\n<p>Since you use specify cascade <code>CascadeType.ALL</code> when <code>AppUser</code> entry is deleted, associated permissions also should be deleted automatically.</p>\n"},{"comment_count":0,"score":0,"last_activity_date":1702364941,"creation_date":1702364941,"answer_id":77644241,"question_id":77570427,"body_markdown":"Applicable solution found by a colleague:\r\n\r\n    CONSTRAINT fk_AppUserPermission_appUserId FOREIGN KEY (appUserId)\r\n        REFERENCES AppUser (id) MATCH SIMPLE\r\n        ON UPDATE NO ACTION\r\n        ON DELETE NO ACTION\r\n\t    DEFERRABLE INITIALLY DEFERRED,\r\n\r\nIt was more a DB/postgresql topic, but it solves the problem. Hibernate will execute both delete statements - for the AppUser and AppUserPermission, but in the &quot;wrong&quot; order. Making the foreign key deferrable will validate the state at the end of the transaction. Deferrable is not applicable on RESTRICT - therefore it must be NO ACTION (which is mostly the same but allows having foreign keys deferrable).","link":"https://stackoverflow.com/questions/77570427/clear-manytomany-via-cascaded-onetoone-remove/77644241#77644241","title":"Clear ManyToMany via cascaded OneToOne remove","body":"<p>Applicable solution found by a colleague:</p>\n<pre><code>CONSTRAINT fk_AppUserPermission_appUserId FOREIGN KEY (appUserId)\n    REFERENCES AppUser (id) MATCH SIMPLE\n    ON UPDATE NO ACTION\n    ON DELETE NO ACTION\n    DEFERRABLE INITIALLY DEFERRED,\n</code></pre>\n<p>It was more a DB/postgresql topic, but it solves the problem. Hibernate will execute both delete statements - for the AppUser and AppUserPermission, but in the &quot;wrong&quot; order. Making the foreign key deferrable will validate the state at the end of the transaction. Deferrable is not applicable on RESTRICT - therefore it must be NO ACTION (which is mostly the same but allows having foreign keys deferrable).</p>\n"}],"comment_count":2,"is_answered":false,"view_count":68,"answer_count":2,"score":1,"last_activity_date":1702364941,"creation_date":1701254495,"last_edit_date":1701419340,"question_id":77570427,"body_markdown":"I&#39;m facing problems in a Hibernate project where I try to remove a OneToOne relation which still has entries in a ManyToMany relation.\r\n\r\nEntities:\r\n\r\n```java\r\n@Getter\r\n@Setter\r\n@Entity\r\npublic class Employee implements Serializable {\r\n\r\n    @Id\r\n    Long id;\r\n\r\n    @OneToOne(fetch = FetchType.LAZY, mappedBy = &quot;employeeId&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    private AppUser appUser;\r\n    \r\n    // some more basic fields\r\n\r\n}\r\n\r\n@Getter\r\n@Setter\r\n@Entity\r\npublic class AppUser implements Serializable {\r\n\r\n    @Id\r\n    Long id;\r\n\r\n    @OneToOne\r\n    @JoinColumn(name = &quot;employeeId&quot;)\r\n    @NotNull\r\n    private Employee employeeId;\r\n\r\n    @ManyToMany(fetch = FetchType.LAZY)\r\n    @JoinTable(name = &quot;AppUserPermission&quot;, joinColumns = @JoinColumn(name = &quot;appUserId&quot;), inverseJoinColumns = @JoinColumn(name = &quot;permissionId&quot;))\r\n    private Set&lt;Permission&gt; permissions = new HashSet&lt;&gt;();\r\n    \r\n    // some more basic fields\r\n}\r\n\r\n@Getter\r\n@Setter\r\n@Entity\r\npublic class Permission implements Serializable {\r\n\r\n    @Id\r\n    Long id;\r\n    \r\n    // some more basic fields\r\n}\r\n```\r\n\r\nDB:\r\n```sql\r\nCREATE TABLE IF NOT EXISTS Employee\r\n(\r\n    id bigint NOT NULL,\r\n    CONSTRAINT pk_Employee PRIMARY KEY (id)\r\n);\r\n\r\nCREATE TABLE IF NOT EXISTS AppUser\r\n(\r\n    id bigint NOT NULL,\r\n    employeeId bigint NOT NULL,\r\n    CONSTRAINT pk_AppUser PRIMARY KEY (id),\r\n    CONSTRAINT uq_AppUser_employeeId UNIQUE (employeeId),\r\n    CONSTRAINT fk_AppUser_employeeId FOREIGN KEY (employeeId)\r\n        REFERENCES Employee (id) MATCH SIMPLE\r\n        ON UPDATE RESTRICT\r\n        ON DELETE RESTRICT\r\n);\r\n\r\nCREATE TABLE IF NOT EXISTS Permission\r\n(\r\n    id bigint NOT NULL,\r\n    CONSTRAINT pk_Permission PRIMARY KEY (id)\r\n);\r\n\r\nCREATE TABLE IF NOT EXISTS AppUserPermission\r\n(\r\n    appUserId bigint NOT NULL,\r\n    permissionId bigint NOT NULL,\r\n    CONSTRAINT pk_AppUserPermission PRIMARY KEY (appUserId, permissionId),\r\n    CONSTRAINT fk_AppUserPermission_appUserId FOREIGN KEY (appUserId)\r\n        REFERENCES AppUser (id) MATCH SIMPLE\r\n        ON UPDATE RESTRICT\r\n        ON DELETE RESTRICT,\r\n    CONSTRAINT fk_UserPermission_permissionId FOREIGN KEY (permissionId)\r\n        REFERENCES Permission (id) MATCH SIMPLE\r\n        ON UPDATE RESTRICT\r\n        ON DELETE RESTRICT\r\n);\r\n``` \r\n\r\nWhen I now try to remove the User-entry from an Employee, where the User has no Permission, it works as expected - User is deleted from the DB:\r\n\r\n```java\r\nEmployee employee = session.find(Employee.class, employeeId);\r\n\r\n// user has no permission(s)\r\nAssert.assertTrue(employee.getAppUser().getPermissions().isEmpty());\r\n\r\nemployee.setAppUser(null);\r\nsession.update(employee);\r\nsession.flush();\r\n```\r\n\r\nIt&#39;s also possible to remove the Permissions via Employee - the entry in the DB&#39;s jointable got removed, the permission still is available:\r\n\r\n```java\r\nEmployee employee = session.find(Employee.class, employeeId);\r\n\r\n// user has permission(s)\r\nAssert.assertFalse(employee.getAppUser().getPermissions().isEmpty());\r\n\r\nemployee.getAppUser().getPermissions().clear();\r\nsession.update(employee);\r\nsession.flush();\r\n\r\n// this would also work now, but I wan&#39;t prevent two updates if possible\r\nemployee.setAppUser(null);\r\nsession.update(employee);\r\nsession.flush();\r\n```\r\n\r\nBut as stated above, I&#39;d like to do it in one update:\r\n```java\r\nEmployee employee = session.find(Employee.class, employeeId);\r\n\r\n// user has permission(s)\r\nAssert.assertFalse(employee.getAppUser().getPermissions().isEmpty());\r\n\r\nemployee.setAppUser(null);\r\nsession.update(employee);\r\nsession.flush();\r\n```\r\nWith the above code snippet, the following exception occurs:\r\n```\r\nCaused by: org.postgresql.util.PSQLException: ERROR: update or delete on table &quot;appuser&quot; violates foreign key constraint &quot;fk_appuserpermission_appuserid&quot; on table &quot;appuserpermission&quot;\r\n  Detail: Key (id)=(1825727638) is still referenced from table &quot;appuserpermission&quot;.\r\n  Ort: Datei: ri_triggers.c, Routine: ri_ReportViolation, Zeile: 2609.\r\n  Server SQLState: 23503\r\n```\r\n\r\nJPA executes:\r\n```\r\n/* delete test.hibernate.AppUser */ delete \r\n    from\r\n        appuser \r\n    where\r\n        &quot;id&quot;=?\r\n\r\n```\r\n\r\nBut what I expect is something like that:\r\n```\r\nDELETE FROM AppUserPermission WHERE appUserId = ? AND permissionId = ?;\r\n\r\nDELETE FROM AppUser WHERE id = ?;\r\n```\r\n\r\nDoes someone have an idea how to solve?\r\n\r\nI know it would work if I change the on-delete cascade option from restrict to cascade on the table AppUserPermission, but I&#39;m wondering if Hibernate is able to handle it without that. Since now, JPA handled all cascaded deletions in proper order, also if the DB&#39;s option is restrict.\r\n\r\n***EDIT***:\r\nThe permission(s) belonging to the AppUser should not be deleted - just the entry in the ManyToMany-jointable.\r\n\r\nAny hints appreciated :)","link":"https://stackoverflow.com/questions/77570427/clear-manytomany-via-cascaded-onetoone-remove","title":"Clear ManyToMany via cascaded OneToOne remove","body":"<p>I'm facing problems in a Hibernate project where I try to remove a OneToOne relation which still has entries in a ManyToMany relation.</p>\n<p>Entities:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@Entity\npublic class Employee implements Serializable {\n\n    @Id\n    Long id;\n\n    @OneToOne(fetch = FetchType.LAZY, mappedBy = &quot;employeeId&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n    private AppUser appUser;\n    \n    // some more basic fields\n\n}\n\n@Getter\n@Setter\n@Entity\npublic class AppUser implements Serializable {\n\n    @Id\n    Long id;\n\n    @OneToOne\n    @JoinColumn(name = &quot;employeeId&quot;)\n    @NotNull\n    private Employee employeeId;\n\n    @ManyToMany(fetch = FetchType.LAZY)\n    @JoinTable(name = &quot;AppUserPermission&quot;, joinColumns = @JoinColumn(name = &quot;appUserId&quot;), inverseJoinColumns = @JoinColumn(name = &quot;permissionId&quot;))\n    private Set&lt;Permission&gt; permissions = new HashSet&lt;&gt;();\n    \n    // some more basic fields\n}\n\n@Getter\n@Setter\n@Entity\npublic class Permission implements Serializable {\n\n    @Id\n    Long id;\n    \n    // some more basic fields\n}\n</code></pre>\n<p>DB:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE IF NOT EXISTS Employee\n(\n    id bigint NOT NULL,\n    CONSTRAINT pk_Employee PRIMARY KEY (id)\n);\n\nCREATE TABLE IF NOT EXISTS AppUser\n(\n    id bigint NOT NULL,\n    employeeId bigint NOT NULL,\n    CONSTRAINT pk_AppUser PRIMARY KEY (id),\n    CONSTRAINT uq_AppUser_employeeId UNIQUE (employeeId),\n    CONSTRAINT fk_AppUser_employeeId FOREIGN KEY (employeeId)\n        REFERENCES Employee (id) MATCH SIMPLE\n        ON UPDATE RESTRICT\n        ON DELETE RESTRICT\n);\n\nCREATE TABLE IF NOT EXISTS Permission\n(\n    id bigint NOT NULL,\n    CONSTRAINT pk_Permission PRIMARY KEY (id)\n);\n\nCREATE TABLE IF NOT EXISTS AppUserPermission\n(\n    appUserId bigint NOT NULL,\n    permissionId bigint NOT NULL,\n    CONSTRAINT pk_AppUserPermission PRIMARY KEY (appUserId, permissionId),\n    CONSTRAINT fk_AppUserPermission_appUserId FOREIGN KEY (appUserId)\n        REFERENCES AppUser (id) MATCH SIMPLE\n        ON UPDATE RESTRICT\n        ON DELETE RESTRICT,\n    CONSTRAINT fk_UserPermission_permissionId FOREIGN KEY (permissionId)\n        REFERENCES Permission (id) MATCH SIMPLE\n        ON UPDATE RESTRICT\n        ON DELETE RESTRICT\n);\n</code></pre>\n<p>When I now try to remove the User-entry from an Employee, where the User has no Permission, it works as expected - User is deleted from the DB:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Employee employee = session.find(Employee.class, employeeId);\n\n// user has no permission(s)\nAssert.assertTrue(employee.getAppUser().getPermissions().isEmpty());\n\nemployee.setAppUser(null);\nsession.update(employee);\nsession.flush();\n</code></pre>\n<p>It's also possible to remove the Permissions via Employee - the entry in the DB's jointable got removed, the permission still is available:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Employee employee = session.find(Employee.class, employeeId);\n\n// user has permission(s)\nAssert.assertFalse(employee.getAppUser().getPermissions().isEmpty());\n\nemployee.getAppUser().getPermissions().clear();\nsession.update(employee);\nsession.flush();\n\n// this would also work now, but I wan't prevent two updates if possible\nemployee.setAppUser(null);\nsession.update(employee);\nsession.flush();\n</code></pre>\n<p>But as stated above, I'd like to do it in one update:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Employee employee = session.find(Employee.class, employeeId);\n\n// user has permission(s)\nAssert.assertFalse(employee.getAppUser().getPermissions().isEmpty());\n\nemployee.setAppUser(null);\nsession.update(employee);\nsession.flush();\n</code></pre>\n<p>With the above code snippet, the following exception occurs:</p>\n<pre><code>Caused by: org.postgresql.util.PSQLException: ERROR: update or delete on table &quot;appuser&quot; violates foreign key constraint &quot;fk_appuserpermission_appuserid&quot; on table &quot;appuserpermission&quot;\n  Detail: Key (id)=(1825727638) is still referenced from table &quot;appuserpermission&quot;.\n  Ort: Datei: ri_triggers.c, Routine: ri_ReportViolation, Zeile: 2609.\n  Server SQLState: 23503\n</code></pre>\n<p>JPA executes:</p>\n<pre><code>/* delete test.hibernate.AppUser */ delete \n    from\n        appuser \n    where\n        &quot;id&quot;=?\n\n</code></pre>\n<p>But what I expect is something like that:</p>\n<pre><code>DELETE FROM AppUserPermission WHERE appUserId = ? AND permissionId = ?;\n\nDELETE FROM AppUser WHERE id = ?;\n</code></pre>\n<p>Does someone have an idea how to solve?</p>\n<p>I know it would work if I change the on-delete cascade option from restrict to cascade on the table AppUserPermission, but I'm wondering if Hibernate is able to handle it without that. Since now, JPA handled all cascaded deletions in proper order, also if the DB's option is restrict.</p>\n<p><em><strong>EDIT</strong></em>:\nThe permission(s) belonging to the AppUser should not be deleted - just the entry in the ManyToMany-jointable.</p>\n<p>Any hints appreciated :)</p>\n"},{"tags":["java","uri","wicket","content-security-policy","webdav"],"comments":[{"score":1,"post_type":"question","creation_date":1694767246,"post_id":77110517,"comment_id":135937310,"body_markdown":"This might help - https://stackoverflow.com/a/41939618/497381","link":"https://stackoverflow.com/questions/77110517/configure-content-security-policy-according-to-office-uri-scheme#comment135937310_77110517","body":"This might help - <a href=\"https://stackoverflow.com/a/41939618/497381\">stackoverflow.com/a/41939618/497381</a>"},{"score":0,"post_type":"question","creation_date":1695034263,"post_id":77110517,"comment_id":135965505,"body_markdown":"&#206; tried to configure it like this, but I am unable to specify the necessary value with Apache wicket and could not find any documentation or examples how to do it.","link":"https://stackoverflow.com/questions/77110517/configure-content-security-policy-according-to-office-uri-scheme#comment135965505_77110517","body":"&#206; tried to configure it like this, but I am unable to specify the necessary value with Apache wicket and could not find any documentation or examples how to do it."},{"score":0,"post_type":"question","creation_date":1695034980,"post_id":77110517,"comment_id":135965618,"body_markdown":"I&#39;d recommend you to test the solution in a non-Wicket mini application. If it indeed solves the problem then open an issue at Wicket JIRA! With a Pull Request at https://github.com/apache/wicket would be even better!","link":"https://stackoverflow.com/questions/77110517/configure-content-security-policy-according-to-office-uri-scheme#comment135965618_77110517","body":"I&#39;d recommend you to test the solution in a non-Wicket mini application. If it indeed solves the problem then open an issue at Wicket JIRA! With a Pull Request at <a href=\"https://github.com/apache/wicket\" rel=\"nofollow noreferrer\">github.com/apache/wicket</a> would be even better!"}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702363906,"creation_date":1702363906,"answer_id":77644162,"question_id":77110517,"body_markdown":"The solution I arrived at is this:\r\n\r\n    cspHeaderConfiguration.add(CSPDirective.FRAME_SRC, (settings, cycle) -&gt; &quot;ms-word:&quot;);\r\n\r\nI do not know how correct this is in terms of security, but it at least allows to activate CSP with unsafeinline which is better than nothing.","link":"https://stackoverflow.com/questions/77110517/configure-content-security-policy-according-to-office-uri-scheme/77644162#77644162","title":"Configure content security policy according to office uri scheme","body":"<p>The solution I arrived at is this:</p>\n<pre><code>cspHeaderConfiguration.add(CSPDirective.FRAME_SRC, (settings, cycle) -&gt; &quot;ms-word:&quot;);\n</code></pre>\n<p>I do not know how correct this is in terms of security, but it at least allows to activate CSP with unsafeinline which is better than nothing.</p>\n"}],"comment_count":3,"is_answered":true,"view_count":120,"answer_count":1,"score":0,"last_activity_date":1702363906,"creation_date":1694763764,"question_id":77110517,"body_markdown":"I am trying to configure a content security policy for a Java web application.\r\n\r\nI am currently overriding the init method of [Webapplication][1] like this:\r\n\r\n&gt; final CSPHeaderConfiguration cspHeaderConfiguration = getCspSettings().blocking().unsafeInline();\r\n\r\nI am aware that this is not the best option, but, as I am modifying an existing application, I just want to integrate a less secure policy and then upgrade over time as a stricter option causes other issues.\r\n\r\nThis is working pretty well and the resulting CSP-Header looks like this:\r\n\r\n&gt; Content-Security-Policy: default-src &#39;none&#39;; script-src &#39;self&#39; &#39;unsafe-inline&#39; &#39;unsafe-eval&#39;; style-src &#39;self&#39; &#39;unsafe-inline&#39;; img-src &#39;self&#39;; connect-src &#39;self&#39;; font-src &#39;self&#39;; manifest-src &#39;self&#39;; child-src &#39;self&#39;; base-uri &#39;self&#39;; frame-src &#39;self&#39;\r\n\r\nThis works fine except when I try to open file using the [microsoft office uri scheme][2]. More specifically I open a word document using an iframe with webdav.\r\n\r\nI set the url of the iframe like this:\r\n\r\n    $(&#39;body&#39;).append(&#39;&lt;iframe class=&quot;open-direct-link-iframe&quot; style=&quot;display:none&quot;&gt;&lt;/iframe&gt;&#39;);\r\n    $iframe = $(&#39;.open-direct-link-iframe&#39;);\r\n    iframe.attr(&#39;src&#39;,ms-word:ofe|u|https://localhost:8443/app/api/webdav/Asset/A3A2523A7FB23E650D1FD89BD5246F10-184/5/Word-document.docx&#39;\r\n\r\nWithout the csp this works fine. However with it I get the following error message:\r\n\r\n&gt; Content-Security-Policy: The page’s settings blocked the loading of a resource at ms-word:ofe|u|https://localhost:8443/app/api/webdav/Asset/A3A2523A7FB23E650D1FD89BD5246F10-184/5/Microsoft Word-document.docx (“frame-src”).\r\n\r\nI can not figure out how to configure the csp correctly. If I use a normal url for my iframe like https://localhost:8443/app/home this works fine, so I am certain then the issue lies with word:ofe|u|\r\n\r\n  [1]: https://nightlies.apache.org/wicket/apidocs/8.x/org/apache/wicket/protocol/http/WebApplication.html\r\n  [2]: https://learn.microsoft.com/en-us/office/client-developer/office-uri-schemes","link":"https://stackoverflow.com/questions/77110517/configure-content-security-policy-according-to-office-uri-scheme","title":"Configure content security policy according to office uri scheme","body":"<p>I am trying to configure a content security policy for a Java web application.</p>\n<p>I am currently overriding the init method of <a href=\"https://nightlies.apache.org/wicket/apidocs/8.x/org/apache/wicket/protocol/http/WebApplication.html\" rel=\"nofollow noreferrer\">Webapplication</a> like this:</p>\n<blockquote>\n<p>final CSPHeaderConfiguration cspHeaderConfiguration = getCspSettings().blocking().unsafeInline();</p>\n</blockquote>\n<p>I am aware that this is not the best option, but, as I am modifying an existing application, I just want to integrate a less secure policy and then upgrade over time as a stricter option causes other issues.</p>\n<p>This is working pretty well and the resulting CSP-Header looks like this:</p>\n<blockquote>\n<p>Content-Security-Policy: default-src 'none'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self'; connect-src 'self'; font-src 'self'; manifest-src 'self'; child-src 'self'; base-uri 'self'; frame-src 'self'</p>\n</blockquote>\n<p>This works fine except when I try to open file using the <a href=\"https://learn.microsoft.com/en-us/office/client-developer/office-uri-schemes\" rel=\"nofollow noreferrer\">microsoft office uri scheme</a>. More specifically I open a word document using an iframe with webdav.</p>\n<p>I set the url of the iframe like this:</p>\n<pre><code>$('body').append('&lt;iframe class=&quot;open-direct-link-iframe&quot; style=&quot;display:none&quot;&gt;&lt;/iframe&gt;');\n$iframe = $('.open-direct-link-iframe');\niframe.attr('src',ms-word:ofe|u|https://localhost:8443/app/api/webdav/Asset/A3A2523A7FB23E650D1FD89BD5246F10-184/5/Word-document.docx'\n</code></pre>\n<p>Without the csp this works fine. However with it I get the following error message:</p>\n<blockquote>\n<p>Content-Security-Policy: The page’s settings blocked the loading of a resource at ms-word:ofe|u|https://localhost:8443/app/api/webdav/Asset/A3A2523A7FB23E650D1FD89BD5246F10-184/5/Microsoft Word-document.docx (“frame-src”).</p>\n</blockquote>\n<p>I can not figure out how to configure the csp correctly. If I use a normal url for my iframe like https://localhost:8443/app/home this works fine, so I am certain then the issue lies with word:ofe|u|</p>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1694435188,"creation_date":1694435188,"answer_id":77081620,"question_id":77080651,"body_markdown":"## Solution: ##\r\nIn the first lines, the ```JOIN AepBanMef ban``` was moved directly after ```mef``` =&gt;\r\n\r\n```java\r\n\r\n@Query(&quot;select etab &quot;\r\n\t + &quot;from #{#entityName} etab &quot;\r\n\t + &quot;JOIN Mef mef ON mef.etabUajId = etab.id &quot;\r\n\t + &quot;JOIN AepBanMef ban ON ((mef.code = ban.code and mef.mefRattachement = null) &quot;\r\n\t\t+ &quot;OR mef.mefRattachement = ban.code), &quot;\r\n\t + &quot;TiMefAccueil nomenMef &quot;\r\n\t + &quot;where (....)\r\n```\r\n","link":"https://stackoverflow.com/questions/77080651/hibernate-6-migration-error-sqmqualifiedjoin-predicate-referred-to-sqmroot-oth/77081620#77081620","title":"Hibernate 6 migration - error SqmQualifiedJoin predicate referred to SqmRoot other than the join&#39;s root","body":"<h2>Solution:</h2>\n<p>In the first lines, the <code>JOIN AepBanMef ban</code> was moved directly after <code>mef</code> =&gt;</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Query(&quot;select etab &quot;\n     + &quot;from #{#entityName} etab &quot;\n     + &quot;JOIN Mef mef ON mef.etabUajId = etab.id &quot;\n     + &quot;JOIN AepBanMef ban ON ((mef.code = ban.code and mef.mefRattachement = null) &quot;\n        + &quot;OR mef.mefRattachement = ban.code), &quot;\n     + &quot;TiMefAccueil nomenMef &quot;\n     + &quot;where (....)\n</code></pre>\n"},{"comment_count":0,"score":0,"last_activity_date":1702360919,"creation_date":1702360919,"answer_id":77643980,"question_id":77080651,"body_markdown":"This might be due to cross join in the query. You can try to change ,(comma) to CROSS JOIN.\r\n\r\n    + &quot;JOIN Mef mef ON mef.etabUajId = etab.id CROSS JOIN &quot;\r\n     + &quot;TiMefAccueil nomenMef &quot;\r\n\r\nhttps://docs.jboss.org/hibernate/orm/6.0/userguide/html_single/Hibernate_User_Guide.html#hql-root-reference\r\n","link":"https://stackoverflow.com/questions/77080651/hibernate-6-migration-error-sqmqualifiedjoin-predicate-referred-to-sqmroot-oth/77643980#77643980","title":"Hibernate 6 migration - error SqmQualifiedJoin predicate referred to SqmRoot other than the join&#39;s root","body":"<p>This might be due to cross join in the query. You can try to change ,(comma) to CROSS JOIN.</p>\n<pre><code>+ &quot;JOIN Mef mef ON mef.etabUajId = etab.id CROSS JOIN &quot;\n + &quot;TiMefAccueil nomenMef &quot;\n</code></pre>\n<p><a href=\"https://docs.jboss.org/hibernate/orm/6.0/userguide/html_single/Hibernate_User_Guide.html#hql-root-reference\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/6.0/userguide/html_single/Hibernate_User_Guide.html#hql-root-reference</a></p>\n"}],"comment_count":0,"is_answered":false,"view_count":205,"answer_count":2,"score":1,"last_activity_date":1702360919,"creation_date":1694426397,"question_id":77080651,"body_markdown":"I have the following ```@Query``` which is working fine ine Hibernate 5.x but which failed to be validated since I migrated to Hibernate 6.\r\n\r\n```java\r\n@Query(&quot;select etab &quot;\r\n\t + &quot;from #{#entityName} etab &quot;\r\n\t + &quot;JOIN Mef mef ON mef.etabUajId = etab.id, &quot;\r\n\t + &quot;TiMefAccueil nomenMef &quot;\r\n\t + &quot;JOIN AepBanMef ban ON &quot;\r\n\t\t + &quot;((mef.code = ban.code and mef.mefRattachement = null) &quot;\r\n\t\t\t + &quot;OR mef.mefRattachement = ban.code) &quot;\r\n\t + &quot;where ((substring(mef.code, 1, length(nomenMef.debutCodeMef)) = nomenMef.debutCodeMef&quot;\r\n\t\t + &quot; AND substring(&quot;\r\n\t\t\t + &quot; mef.code,&quot;\r\n\t\t\t + &quot; 10 - length(nomenMef.finCodeMef10Car) + 1,&quot;\r\n\t\t\t + &quot; length(nomenMef.finCodeMef10Car)&quot;\r\n\t\t + &quot;) = nomenMef.finCodeMef10Car)&quot;\r\n\t\t + &quot; OR (&quot;\r\n\t\t + &quot; substring(mef.mefRattachement, 1, length(nomenMef.debutCodeMef))&quot;\r\n\t\t\t + &quot; = nomenMef.debutCodeMef&quot;\r\n\t\t + &quot; AND substring(&quot;\r\n\t\t\t + &quot; mef.mefRattachement,&quot;\r\n\t\t\t + &quot; 10 - length(nomenMef.finCodeMef10Car) + 1,&quot;\r\n\t\t\t + &quot; length(nomenMef.finCodeMef10Car)&quot;\r\n\t\t + &quot;) = nomenMef.finCodeMef10Car)&quot;\r\n\t + &quot;) and mef.mefSelectionne = true and nomenMef.codeTs = :codeTs &quot;\r\n\t + &quot;and (mef.dateFermeture &gt; current_date OR mef.dateFermeture = null)&quot;\r\n\t + &quot;and (ban.dateFermeture &gt; current_date OR ban.dateFermeture = null)&quot;)\r\nList&lt;EtabUaj&gt; findEtabsByCodeTi(@Param(&quot;codeTs&quot;) String codeTs);\r\n```\r\n\r\n\r\nI have this error:\r\n\r\n```\r\nCaused by: org.hibernate.query.SemanticException: SqmQualifiedJoin predicate referred to SqmRoot [`fr.edu.scolarite.nat.paramshared.model.Mef(mef)`] other than the join&#39;s root [`fr.edu.scolarite.nat.paramts.aep.model.AepBanMef(ban)`]\r\n```\r\n\r\nI don&#39;t understand why the join ```AepBanMef ban``` is not valid ? If I comment all the lines refering to ```BanMef``` the query is technically valid, but it&#39;s not what I want.\r\n\r\nThe few resources I could found around refered to the Criteria API, which I&#39;m not using.","link":"https://stackoverflow.com/questions/77080651/hibernate-6-migration-error-sqmqualifiedjoin-predicate-referred-to-sqmroot-oth","title":"Hibernate 6 migration - error SqmQualifiedJoin predicate referred to SqmRoot other than the join&#39;s root","body":"<p>I have the following <code>@Query</code> which is working fine ine Hibernate 5.x but which failed to be validated since I migrated to Hibernate 6.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(&quot;select etab &quot;\n     + &quot;from #{#entityName} etab &quot;\n     + &quot;JOIN Mef mef ON mef.etabUajId = etab.id, &quot;\n     + &quot;TiMefAccueil nomenMef &quot;\n     + &quot;JOIN AepBanMef ban ON &quot;\n         + &quot;((mef.code = ban.code and mef.mefRattachement = null) &quot;\n             + &quot;OR mef.mefRattachement = ban.code) &quot;\n     + &quot;where ((substring(mef.code, 1, length(nomenMef.debutCodeMef)) = nomenMef.debutCodeMef&quot;\n         + &quot; AND substring(&quot;\n             + &quot; mef.code,&quot;\n             + &quot; 10 - length(nomenMef.finCodeMef10Car) + 1,&quot;\n             + &quot; length(nomenMef.finCodeMef10Car)&quot;\n         + &quot;) = nomenMef.finCodeMef10Car)&quot;\n         + &quot; OR (&quot;\n         + &quot; substring(mef.mefRattachement, 1, length(nomenMef.debutCodeMef))&quot;\n             + &quot; = nomenMef.debutCodeMef&quot;\n         + &quot; AND substring(&quot;\n             + &quot; mef.mefRattachement,&quot;\n             + &quot; 10 - length(nomenMef.finCodeMef10Car) + 1,&quot;\n             + &quot; length(nomenMef.finCodeMef10Car)&quot;\n         + &quot;) = nomenMef.finCodeMef10Car)&quot;\n     + &quot;) and mef.mefSelectionne = true and nomenMef.codeTs = :codeTs &quot;\n     + &quot;and (mef.dateFermeture &gt; current_date OR mef.dateFermeture = null)&quot;\n     + &quot;and (ban.dateFermeture &gt; current_date OR ban.dateFermeture = null)&quot;)\nList&lt;EtabUaj&gt; findEtabsByCodeTi(@Param(&quot;codeTs&quot;) String codeTs);\n</code></pre>\n<p>I have this error:</p>\n<pre><code>Caused by: org.hibernate.query.SemanticException: SqmQualifiedJoin predicate referred to SqmRoot [`fr.edu.scolarite.nat.paramshared.model.Mef(mef)`] other than the join's root [`fr.edu.scolarite.nat.paramts.aep.model.AepBanMef(ban)`]\n</code></pre>\n<p>I don't understand why the join <code>AepBanMef ban</code> is not valid ? If I comment all the lines refering to <code>BanMef</code> the query is technically valid, but it's not what I want.</p>\n<p>The few resources I could found around refered to the Criteria API, which I'm not using.</p>\n"},{"tags":["java","concurrency","volatile","happens-before"],"answers":[{"comment_count":0,"score":0,"last_activity_date":1697418367,"last_edit_date":1697418367,"creation_date":1697417401,"answer_id":77298924,"question_id":77218107,"body_markdown":"&gt; Does volatile in this example really ensure that we will observe sequential consistency results and why?&quot;\r\n\r\nYes; volatile is sufficient to ensure only sequential consistency executions.\r\n\r\nWhy? If A and B are made volatile, then there are no data races. And when there are no data races, there can only be sequential consistent executions. And in any sequential consistent execution, program order needs to be preserved (nobody should be able to proof it was not preserved because memory models are all about pretending).\r\n\r\nAt the implementation level the appropriate compiler and CPU memory fences will be added. How this is realized is an implementation details and keep in mind that [fences are not a suitable replacement for the the JMM][1].\r\n\r\n&gt;I saw another interesting detail. Jmm authors write : If x and y are actions of the same thread and x comes before y in program order, then hb(x, y). I thought happens-before relationship happens between instructions in different threads, and it means that every read sees previous write and operations can&#39;t be reordered. But cpu and compiler can reorder these actions in a single thread and y can happen before x.\r\n\r\n**Only when there are no data races**, the happens-before rules apply and you should get sequential consistent executions. **But in the presence of data races, non sequential consistent executions are allowed.**  So if you have another look at the previous example (and A and B are plain variables)\r\n\r\n```\r\nint A,B=0\r\n\r\nThread 1; \r\nB = 1;    (a)\r\nr2 = A;   (b)\r\n\r\nThread 2;\r\nA = 2;    (c)\r\nr1 = B;   (d)\r\n```\r\n\r\nThere is a program-order happens-before edge between &#39;a&#39; and &#39;b&#39; due to program order. And the same goes for &#39;c&#39; and &#39;d&#39;. But because reading and writing of A,B are not synchronization operations, there are data races. **And when there are data races, the above program order happens-before edges do not need to be preserved in any of the executions.**\r\n\r\nTherefor the following execution is allowed:\r\n\r\n```\r\n1: r1 = B;   (d)\r\n2: r2 = A;   (b)\r\n3: B = 1;    (a)\r\n4: A = 2;    (c)\r\n```\r\n\r\nEven though program order is clearly violated.\r\n\r\n  [1]: https://shipilev.net/blog/2016/close-encounters-of-jmm-kind/#myth-barriers-are-sane","link":"https://stackoverflow.com/questions/77218107/jmm-specification-example/77298924#77298924","title":"JMM specification example","body":"<blockquote>\n<p>Does volatile in this example really ensure that we will observe sequential consistency results and why?&quot;</p>\n</blockquote>\n<p>Yes; volatile is sufficient to ensure only sequential consistency executions.</p>\n<p>Why? If A and B are made volatile, then there are no data races. And when there are no data races, there can only be sequential consistent executions. And in any sequential consistent execution, program order needs to be preserved (nobody should be able to proof it was not preserved because memory models are all about pretending).</p>\n<p>At the implementation level the appropriate compiler and CPU memory fences will be added. How this is realized is an implementation details and keep in mind that <a href=\"https://shipilev.net/blog/2016/close-encounters-of-jmm-kind/#myth-barriers-are-sane\" rel=\"nofollow noreferrer\">fences are not a suitable replacement for the the JMM</a>.</p>\n<blockquote>\n<p>I saw another interesting detail. Jmm authors write : If x and y are actions of the same thread and x comes before y in program order, then hb(x, y). I thought happens-before relationship happens between instructions in different threads, and it means that every read sees previous write and operations can't be reordered. But cpu and compiler can reorder these actions in a single thread and y can happen before x.</p>\n</blockquote>\n<p><strong>Only when there are no data races</strong>, the happens-before rules apply and you should get sequential consistent executions. <strong>But in the presence of data races, non sequential consistent executions are allowed.</strong>  So if you have another look at the previous example (and A and B are plain variables)</p>\n<pre><code>int A,B=0\n\nThread 1; \nB = 1;    (a)\nr2 = A;   (b)\n\nThread 2;\nA = 2;    (c)\nr1 = B;   (d)\n</code></pre>\n<p>There is a program-order happens-before edge between 'a' and 'b' due to program order. And the same goes for 'c' and 'd'. But because reading and writing of A,B are not synchronization operations, there are data races. <strong>And when there are data races, the above program order happens-before edges do not need to be preserved in any of the executions.</strong></p>\n<p>Therefor the following execution is allowed:</p>\n<pre><code>1: r1 = B;   (d)\n2: r2 = A;   (b)\n3: B = 1;    (a)\n4: A = 2;    (c)\n</code></pre>\n<p>Even though program order is clearly violated.</p>\n"},{"comment_count":0,"score":1,"last_activity_date":1702356649,"creation_date":1702356649,"answer_id":77643757,"question_id":77218107,"body_markdown":"You are misunderstanding the JMM, it is a formalism of the requirements on the JVM to ensure certain behaviours in multithreading environments. As a result, all definitions in the JMM are pure mathematical constructs, no more and no less. These mathematical constructs are then used to formally defined the behaviours of the program, but they do not in anyway impose any restriction on the actual execution of the program, as long as its behaviours are consistent with what are defined.\r\n\r\nAs for happen-before relationship, it is a somewhat misleading name, but if you think it in a pure mathematical sense then it is clear what does it do. In fact, `a` happens before `b` in the JMM sense does not mean that they happen in that order in the behavioural sense, and any thread (including the one that executes those operations) are permitted to observe `b` before `a` when there is no other restrictions. The opposite is also true, just because `a` is observed to be executed before `b` (e.g a read that observes a write from another thread) does not mean between them there is a happen-before relationship from the perspective of the JMM.","link":"https://stackoverflow.com/questions/77218107/jmm-specification-example/77643757#77643757","title":"JMM specification example","body":"<p>You are misunderstanding the JMM, it is a formalism of the requirements on the JVM to ensure certain behaviours in multithreading environments. As a result, all definitions in the JMM are pure mathematical constructs, no more and no less. These mathematical constructs are then used to formally defined the behaviours of the program, but they do not in anyway impose any restriction on the actual execution of the program, as long as its behaviours are consistent with what are defined.</p>\n<p>As for happen-before relationship, it is a somewhat misleading name, but if you think it in a pure mathematical sense then it is clear what does it do. In fact, <code>a</code> happens before <code>b</code> in the JMM sense does not mean that they happen in that order in the behavioural sense, and any thread (including the one that executes those operations) are permitted to observe <code>b</code> before <code>a</code> when there is no other restrictions. The opposite is also true, just because <code>a</code> is observed to be executed before <code>b</code> (e.g a read that observes a write from another thread) does not mean between them there is a happen-before relationship from the perspective of the JMM.</p>\n"}],"comment_count":0,"is_answered":true,"view_count":69,"answer_count":2,"score":0,"last_activity_date":1702356649,"creation_date":1696275681,"question_id":77218107,"body_markdown":"I&#39;ve  read [17.4.5][1] article of Jmm spec and I have a question about this example. \r\n```\r\nThread 1;  Thread 2;\r\nB = 1;\t   A = 2;\r\nr2 = A;\t   r1 = B;\r\n```\r\nAuthors write that r2 and r1 can be equal to 0 because of reordering and visibility, I understand, \r\nwe have data race here because these memory accesses are not synchronized. And I&#39;ve also seen how to prevent it. We can make `A` and `B` volatile(to prevent all data races in program) and be sure that we will observe only sequential consistent results([1,0], [0,1], [1,1]). But I can&#39;t understand why it is true, because I suppose that compiler or cpu can make read of r2 to happen before write of B, and r1 could happen before write of A. Volatile prevents reordering of instructions before write to such variable to happen after write and after read to happen before read. Explain me please:\r\n1) Does volatile is this example really ensure that we will observe sequential consistency results and why?\r\n\r\nI saw another interesting detail. Jmm authors write :\r\n`If x and y are actions of the same thread and x comes before y in program order, then hb(x, y).`\r\nI thought happens-before relashionship happens between instructions in different threads, and it means that every read sees previous write and operations can&#39;t be reordered. But cpu and compiler can reorder these actions in a single thread and `y` can happen before `x`. \r\n\r\nI know the following rules:\r\n```\r\nAn unlock on a monitor happens-before every subsequent lock on that monitor.\r\n\r\nA write to a volatile field (&#167;8.3.1.4) happens-before every subsequent read of that field.\r\n``` \r\nand others...\r\n\r\n2)How it is possible for x to happen before y in hb order? I know that compiler is allowed to reorder instructions until the result of a program is consistent with program order and I can say next: program-order(x is before y), but I am not sure that x happens before y in happens-before order. \r\n\r\nThanks for all!\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.3:~:text=17.4.5.-,Happens%2Dbefore%20Order,-Two%20actions%20can\r\n  [2]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.3:~:text=If%20x%20and%20y%20are%20actions%20of%20the%20same%20thread%20and%20x%20comes%20before%20y%20in%20program%20order%2C%20then%20hb(x%2C%20y)","link":"https://stackoverflow.com/questions/77218107/jmm-specification-example","title":"JMM specification example","body":"<p>I've  read <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.3:%7E:text=17.4.5.-,Happens%2Dbefore%20Order,-Two%20actions%20can\" rel=\"nofollow noreferrer\">17.4.5</a> article of Jmm spec and I have a question about this example.</p>\n<pre><code>Thread 1;  Thread 2;\nB = 1;     A = 2;\nr2 = A;    r1 = B;\n</code></pre>\n<p>Authors write that r2 and r1 can be equal to 0 because of reordering and visibility, I understand,\nwe have data race here because these memory accesses are not synchronized. And I've also seen how to prevent it. We can make <code>A</code> and <code>B</code> volatile(to prevent all data races in program) and be sure that we will observe only sequential consistent results([1,0], [0,1], [1,1]). But I can't understand why it is true, because I suppose that compiler or cpu can make read of r2 to happen before write of B, and r1 could happen before write of A. Volatile prevents reordering of instructions before write to such variable to happen after write and after read to happen before read. Explain me please:</p>\n<ol>\n<li>Does volatile is this example really ensure that we will observe sequential consistency results and why?</li>\n</ol>\n<p>I saw another interesting detail. Jmm authors write :\n<code>If x and y are actions of the same thread and x comes before y in program order, then hb(x, y).</code>\nI thought happens-before relashionship happens between instructions in different threads, and it means that every read sees previous write and operations can't be reordered. But cpu and compiler can reorder these actions in a single thread and <code>y</code> can happen before <code>x</code>.</p>\n<p>I know the following rules:</p>\n<pre><code>An unlock on a monitor happens-before every subsequent lock on that monitor.\n\nA write to a volatile field (§8.3.1.4) happens-before every subsequent read of that field.\n</code></pre>\n<p>and others...</p>\n<p>2)How it is possible for x to happen before y in hb order? I know that compiler is allowed to reorder instructions until the result of a program is consistent with program order and I can say next: program-order(x is before y), but I am not sure that x happens before y in happens-before order.</p>\n<p>Thanks for all!</p>\n"},{"tags":["java","jvm","garbage-collection","java-17","g1gc"],"comments":[{"score":0,"post_type":"question","creation_date":1701173005,"post_id":77563650,"comment_id":136739944,"body_markdown":"It rather seems that the GC has decided that you have a lot of short-lived objects, so it has changed the classification of +/- 28GiB of memory from old-gen to Eden.","link":"https://stackoverflow.com/questions/77563650/increase-in-eden-space-and-old-gen-peak-values#comment136739944_77563650","body":"It rather seems that the GC has decided that you have a lot of short-lived objects, so it has changed the classification of +/- 28GiB of memory from old-gen to Eden."},{"score":0,"post_type":"question","creation_date":1701257081,"post_id":77563650,"comment_id":136752467,"body_markdown":"&quot;after java 17 upgrade&quot;... from what? 8? If so, G1GC though can be enabled in java-8, was never recommended to do. What you see on the graphs are most probably an effect of `UseAdaptiveSizePolicy`, where G1 decided (based on previous cycles) what is old/new and how big are supposed those to be.","link":"https://stackoverflow.com/questions/77563650/increase-in-eden-space-and-old-gen-peak-values#comment136752467_77563650","body":"&quot;after java 17 upgrade&quot;... from what? 8? If so, G1GC though can be enabled in java-8, was never recommended to do. What you see on the graphs are most probably an effect of <code>UseAdaptiveSizePolicy</code>, where G1 decided (based on previous cycles) what is old/new and how big are supposed those to be."},{"score":0,"post_type":"question","creation_date":1701331048,"post_id":77563650,"comment_id":136762973,"body_markdown":"@Eugene I have updated the question. We have upgraded from Java 11 and we were using the default GC in Java 11 also which is G1GC I think. When I take memory dumps in different times(after the fresh deployment and 1-2 days later), nearly there is no difference in object counts, sizes or retained sizes. I don&#39;t get why peak values of Eden space and Old space is increasing.","link":"https://stackoverflow.com/questions/77563650/increase-in-eden-space-and-old-gen-peak-values#comment136762973_77563650","body":"@Eugene I have updated the question. We have upgraded from Java 11 and we were using the default GC in Java 11 also which is G1GC I think. When I take memory dumps in different times(after the fresh deployment and 1-2 days later), nearly there is no difference in object counts, sizes or retained sizes. I don&#39;t get why peak values of Eden space and Old space is increasing."},{"score":0,"post_type":"question","creation_date":1701779506,"post_id":77563650,"comment_id":136815379,"body_markdown":"Can you show JVM options and GC logs?","link":"https://stackoverflow.com/questions/77563650/increase-in-eden-space-and-old-gen-peak-values#comment136815379_77563650","body":"Can you show JVM options and GC logs?"},{"score":0,"post_type":"question","creation_date":1702130872,"post_id":77563650,"comment_id":136860764,"body_markdown":"Java 11 and Java 17 both use g1gc, so the garbage collector could be the cause of it.","link":"https://stackoverflow.com/questions/77563650/increase-in-eden-space-and-old-gen-peak-values#comment136860764_77563650","body":"Java 11 and Java 17 both use g1gc, so the garbage collector could be the cause of it."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702280302,"creation_date":1702280302,"answer_id":77638054,"question_id":77563650,"body_markdown":"Identify Increased `Heap Memory Vs  Memory Leak` situation\r\n\r\n - `Java 17` changed the default `garbage collector (GC) from Parallel GC to G1 GC`. - `G1 GC` divides the heap into smaller regions and adapts the size and number of regions based on the application&#39;s behavior &amp; has a different way of handling young and old generations, which may affect the heap usage patterns\r\n\r\n     To verify run your application with different `GCs` and compare the results. e.g. `XX:+UseParallelGC` option to switch back to `Parallel GC`, or try other GCs such as `ZGC or Shenandoah GC` \r\n\r\n     Use the `-Xlog:gc` option to enable `GC logging` and analyze the GC behavior in more detail.\r\n\r\n - If the GC is not the cause of your increased heap memory usage,  poss. `memory leak` in your application i.e. an object is no longer needed by the application, but it is still referenced by other objects and cannot be reclaimed by the GC. To detect this  use  tools such as `Eclipse Memory Analyzer`,  to analyze memory dumps","link":"https://stackoverflow.com/questions/77563650/increase-in-eden-space-and-old-gen-peak-values/77638054#77638054","title":"Increase in Eden Space and Old Gen peak values","body":"<p>Identify Increased <code>Heap Memory Vs  Memory Leak</code> situation</p>\n<ul>\n<li><p><code>Java 17</code> changed the default <code>garbage collector (GC) from Parallel GC to G1 GC</code>. - <code>G1 GC</code> divides the heap into smaller regions and adapts the size and number of regions based on the application's behavior &amp; has a different way of handling young and old generations, which may affect the heap usage patterns</p>\n<p>To verify run your application with different <code>GCs</code> and compare the results. e.g. <code>XX:+UseParallelGC</code> option to switch back to <code>Parallel GC</code>, or try other GCs such as <code>ZGC or Shenandoah GC</code></p>\n<p>Use the <code>-Xlog:gc</code> option to enable <code>GC logging</code> and analyze the GC behavior in more detail.</p>\n</li>\n<li><p>If the GC is not the cause of your increased heap memory usage,  poss. <code>memory leak</code> in your application i.e. an object is no longer needed by the application, but it is still referenced by other objects and cannot be reclaimed by the GC. To detect this  use  tools such as <code>Eclipse Memory Analyzer</code>,  to analyze memory dumps</p>\n</li>\n</ul>\n"}],"comment_count":5,"is_answered":false,"view_count":243,"answer_count":1,"score":0,"last_activity_date":1702338826,"creation_date":1701172370,"last_edit_date":1702279242,"question_id":77563650,"body_markdown":"After Java 17 upgrade, JVM heap memory started to increase. When we check the memory metrics, sizes of the Eden Space and the Old Generation fluctuating and peak values are increasing.\r\n\r\nThere seems no increase in lower values of Old Gen but the problem is it is increasing so fast and the peak value is also increasing.\r\n\r\nWhen I inspect the memory dumps, there seems no potential leak. Can we say that there is a memory leak in here?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nEDIT:\r\nWe have upgraded from Java 11 to 17.\r\nI don&#39;t see any unusual activity in GC metrics.\r\n[![enter image description here][2]][2]\r\n\r\nBefore the Upgrade Metrics: \r\nThe heap usage is much lower:\r\n[![enter image description here][3]][3]\r\n\r\nI don&#39;t see such activity in GC metrcis:\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hut4r.png\r\n  [2]: https://i.stack.imgur.com/riY02.png\r\n  [3]: https://i.stack.imgur.com/IQKyt.png\r\n  [4]: https://i.stack.imgur.com/5B9rP.png","link":"https://stackoverflow.com/questions/77563650/increase-in-eden-space-and-old-gen-peak-values","title":"Increase in Eden Space and Old Gen peak values","body":"<p>After Java 17 upgrade, JVM heap memory started to increase. When we check the memory metrics, sizes of the Eden Space and the Old Generation fluctuating and peak values are increasing.</p>\n<p>There seems no increase in lower values of Old Gen but the problem is it is increasing so fast and the peak value is also increasing.</p>\n<p>When I inspect the memory dumps, there seems no potential leak. Can we say that there is a memory leak in here?</p>\n<p><a href=\"https://i.stack.imgur.com/hut4r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hut4r.png\" alt=\"enter image description here\" /></a></p>\n<p>EDIT:\nWe have upgraded from Java 11 to 17.\nI don't see any unusual activity in GC metrics.\n<a href=\"https://i.stack.imgur.com/riY02.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/riY02.png\" alt=\"enter image description here\" /></a></p>\n<p>Before the Upgrade Metrics:\nThe heap usage is much lower:\n<a href=\"https://i.stack.imgur.com/IQKyt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IQKyt.png\" alt=\"enter image description here\" /></a></p>\n<p>I don't see such activity in GC metrcis:\n<a href=\"https://i.stack.imgur.com/5B9rP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5B9rP.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","xml"],"comments":[{"score":0,"post_type":"question","creation_date":1694385982,"post_id":77077915,"comment_id":135880486,"body_markdown":"XSLT would be the first choice","link":"https://stackoverflow.com/questions/77077915/xml-filtering-quick-find-specific-nodes-by-name-remove-parent-if-value-not-m#comment135880486_77077915","body":"XSLT would be the first choice"},{"score":0,"post_type":"question","creation_date":1694398571,"post_id":77077915,"comment_id":135881333,"body_markdown":"XML parsing is done in document order so the node to keep could be the last one and parsing efficiency could be similar in any case. Or as you said, the node may not exist at all but the whole doc was parsed anyway. Fast or slow is relative on XML. Moreover, finding might not be significant compared to writing the doc after removing a node. All in all, showing just a fragment of the xml without the code used to parse it is not enough to give advice.","link":"https://stackoverflow.com/questions/77077915/xml-filtering-quick-find-specific-nodes-by-name-remove-parent-if-value-not-m#comment135881333_77077915","body":"XML parsing is done in document order so the node to keep could be the last one and parsing efficiency could be similar in any case. Or as you said, the node may not exist at all but the whole doc was parsed anyway. Fast or slow is relative on XML. Moreover, finding might not be significant compared to writing the doc after removing a node. All in all, showing just a fragment of the xml without the code used to parse it is not enough to give advice."}],"answers":[{"comments":[{"score":0,"post_type":"answer","creation_date":1694502065,"post_id":77078054,"comment_id":135895254,"body_markdown":"OK, thanks. I&#39;m going to try XMLStreamReader first as the performance is the highest priority for me.","link":"https://stackoverflow.com/questions/77077915/xml-filtering-quick-find-specific-nodes-by-name-remove-parent-if-value-not-m/77078054#comment135895254_77078054","body":"OK, thanks. I&#39;m going to try XMLStreamReader first as the performance is the highest priority for me."},{"score":1,"post_type":"answer","creation_date":1694531002,"post_id":77078054,"comment_id":135901649,"body_markdown":"Apparently the [woodstox](https://github.com/FasterXML/woodstox) implementation of StAX is pretty fast, but you could also try [Aalto XML](https://github.com/FasterXML/aalto-xml).","link":"https://stackoverflow.com/questions/77077915/xml-filtering-quick-find-specific-nodes-by-name-remove-parent-if-value-not-m/77078054#comment135901649_77078054","body":"Apparently the <a href=\"https://github.com/FasterXML/woodstox\" rel=\"nofollow noreferrer\">woodstox</a> implementation of StAX is pretty fast, but you could also try <a href=\"https://github.com/FasterXML/aalto-xml\" rel=\"nofollow noreferrer\">Aalto XML</a>."}],"comment_count":2,"score":1,"last_activity_date":1694384049,"last_edit_date":1694384049,"creation_date":1694383623,"answer_id":77078054,"question_id":77077915,"body_markdown":"In general the different built-in parsers are SAX, StAX and DOM (https://rdayala.wordpress.com/dom-vs-sax-parsers/).\r\n - DOM is the slow one (load everything into memory) and is used with XPath.  \r\n - SAX is a pain to use.  \r\n - [StAX](https://docs.oracle.com/javase/tutorial/jaxp/stax/api.html) actually has 2 APIs:\r\n   - the iterator API, e.g. XMLEventReader (easier)\r\n   - the cursor API, e.g. XMLStreamReader (more efficient)\r\n\r\nYou could also try using XSLT, but the built-in one isn&#39;t necessarily the most high performing and you may need to pay for a premium one or to use all its features ([streamed processing](https://www.saxonica.com/technology/questions.xml#open)):  \r\nhttps://docs.oracle.com/javase/tutorial/jaxp/xslt/transformingXML.html","link":"https://stackoverflow.com/questions/77077915/xml-filtering-quick-find-specific-nodes-by-name-remove-parent-if-value-not-m/77078054#77078054","title":"XML filtering - quick find specific nodes by name + remove parent if value not match","body":"<p>In general the different built-in parsers are SAX, StAX and DOM (<a href=\"https://rdayala.wordpress.com/dom-vs-sax-parsers/\" rel=\"nofollow noreferrer\">https://rdayala.wordpress.com/dom-vs-sax-parsers/</a>).</p>\n<ul>\n<li>DOM is the slow one (load everything into memory) and is used with XPath.</li>\n<li>SAX is a pain to use.</li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/jaxp/stax/api.html\" rel=\"nofollow noreferrer\">StAX</a> actually has 2 APIs:\n<ul>\n<li>the iterator API, e.g. XMLEventReader (easier)</li>\n<li>the cursor API, e.g. XMLStreamReader (more efficient)</li>\n</ul>\n</li>\n</ul>\n<p>You could also try using XSLT, but the built-in one isn't necessarily the most high performing and you may need to pay for a premium one or to use all its features (<a href=\"https://www.saxonica.com/technology/questions.xml#open\" rel=\"nofollow noreferrer\">streamed processing</a>):<br />\n<a href=\"https://docs.oracle.com/javase/tutorial/jaxp/xslt/transformingXML.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/jaxp/xslt/transformingXML.html</a></p>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1694502218,"post_id":77079602,"comment_id":135895283,"body_markdown":"I&#39;ve never thought it could be done that way. Interesting. I&#39;ll put that on the list of things to test. Thank you!","link":"https://stackoverflow.com/questions/77077915/xml-filtering-quick-find-specific-nodes-by-name-remove-parent-if-value-not-m/77079602#comment135895283_77079602","body":"I&#39;ve never thought it could be done that way. Interesting. I&#39;ll put that on the list of things to test. Thank you!"}],"comment_count":1,"score":1,"last_activity_date":1694416697,"creation_date":1694416697,"answer_id":77079602,"question_id":77077915,"body_markdown":"This xslt 1.0 will do your job:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;xsl:stylesheet version=&quot;1.0&quot; \r\n      xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\r\n      &lt;xsl:output method=&quot;xml&quot; version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; indent=&quot;yes&quot;/&gt;\r\n      &lt;xsl:strip-space elements=&quot;*&quot;/&gt;\r\n      \r\n      &lt;!-- identity transform --&gt;\r\n      &lt;xsl:template match=&quot;@*|node()&quot;&gt;\r\n        &lt;xsl:copy&gt;\r\n          &lt;xsl:apply-templates select=&quot;@*|node()&quot;/&gt;\r\n        &lt;/xsl:copy&gt;\r\n      &lt;/xsl:template&gt;\r\n      \r\n      &lt;xsl:template match=&quot;someparent[@filters=&#39;+F1&#39;][not(filter/width[paper[concat(@size,&#39;/&#39;,@val)=&#39;a4/10&#39;] and paper[concat(@size,&#39;/&#39;,@val)=&#39;a3/12&#39;]])]&quot;/&gt;\r\n      \r\n      &lt;xsl:template match=&quot;someparent[@filters=&#39;-F1&#39;][(filter/width[paper[concat(@size,&#39;/&#39;,@val)=&#39;a4/10&#39;] and paper[concat(@size,&#39;/&#39;,@val)=&#39;a3/12&#39;]])]&quot;/&gt;\r\n      \r\n      \r\n    &lt;/xsl:stylesheet&gt;\r\n\r\n","link":"https://stackoverflow.com/questions/77077915/xml-filtering-quick-find-specific-nodes-by-name-remove-parent-if-value-not-m/77079602#77079602","title":"XML filtering - quick find specific nodes by name + remove parent if value not match","body":"<p>This xslt 1.0 will do your job:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;xsl:stylesheet version=&quot;1.0&quot; \n  xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\n  &lt;xsl:output method=&quot;xml&quot; version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; indent=&quot;yes&quot;/&gt;\n  &lt;xsl:strip-space elements=&quot;*&quot;/&gt;\n  \n  &lt;!-- identity transform --&gt;\n  &lt;xsl:template match=&quot;@*|node()&quot;&gt;\n    &lt;xsl:copy&gt;\n      &lt;xsl:apply-templates select=&quot;@*|node()&quot;/&gt;\n    &lt;/xsl:copy&gt;\n  &lt;/xsl:template&gt;\n  \n  &lt;xsl:template match=&quot;someparent[@filters='+F1'][not(filter/width[paper[concat(@size,'/',@val)='a4/10'] and paper[concat(@size,'/',@val)='a3/12']])]&quot;/&gt;\n  \n  &lt;xsl:template match=&quot;someparent[@filters='-F1'][(filter/width[paper[concat(@size,'/',@val)='a4/10'] and paper[concat(@size,'/',@val)='a3/12']])]&quot;/&gt;\n  \n  \n&lt;/xsl:stylesheet&gt;\n</code></pre>\n"},{"comments":[{"score":0,"post_type":"answer","creation_date":1694502133,"post_id":77085031,"comment_id":135895264,"body_markdown":"I&#39;m going to try that. I&#39;ll edit my post above when I get some concrete results. Thank you!","link":"https://stackoverflow.com/questions/77077915/xml-filtering-quick-find-specific-nodes-by-name-remove-parent-if-value-not-m/77085031#comment135895264_77085031","body":"I&#39;m going to try that. I&#39;ll edit my post above when I get some concrete results. Thank you!"}],"comment_count":1,"score":1,"last_activity_date":1694470326,"creation_date":1694470326,"answer_id":77085031,"question_id":77077915,"body_markdown":"Obviously, you need to parse the whole document, and the fastest way way to arrive at a solution is to not include the &quot;filtered out&quot; elements in the document building process. Both DOM4J and JDOM are good alternatives for this, since they allow custom document builders that can defer or allow the tree construction based on previously obtained conditions. SAX/StAX is of course also an alternative, but at a lower level and require more infrastructure code to get a result.\r\n\r\nSearch this site for DOM4J/JDOM and builder, I may already have given the answer ;)","link":"https://stackoverflow.com/questions/77077915/xml-filtering-quick-find-specific-nodes-by-name-remove-parent-if-value-not-m/77085031#77085031","title":"XML filtering - quick find specific nodes by name + remove parent if value not match","body":"<p>Obviously, you need to parse the whole document, and the fastest way way to arrive at a solution is to not include the &quot;filtered out&quot; elements in the document building process. Both DOM4J and JDOM are good alternatives for this, since they allow custom document builders that can defer or allow the tree construction based on previously obtained conditions. SAX/StAX is of course also an alternative, but at a lower level and require more infrastructure code to get a result.</p>\n<p>Search this site for DOM4J/JDOM and builder, I may already have given the answer ;)</p>\n"}],"comment_count":2,"is_answered":true,"view_count":59,"answer_count":3,"score":-1,"last_activity_date":1702338243,"creation_date":1694380545,"last_edit_date":1702338243,"question_id":77077915,"body_markdown":"I need a hint regarding a quick finding of specific nodes within the XML and removing the entire parent node (with children) if some of the values don&#39;t match the input parameters.\r\n\r\nExample, having the XML as shown below:\r\n```\r\n&lt;someparent attr=&quot;123&quot; filters=&quot;+F1&quot;&gt;\r\n\t&lt;filter id=&quot;F1&quot;&gt;\r\n\t\t&lt;width&gt;\r\n\t\t\t&lt;paper size=&quot;a4&quot; val=&quot;10&quot; /&gt;\r\n\t\t\t&lt;paper size=&quot;a3&quot; val=&quot;12&quot; /&gt;\r\n\t\t&lt;/width&gt;\r\n\t\t&lt;height&gt;\r\n\t\t\t&lt;paper size=&quot;a4&quot; val=&quot;10&quot; /&gt;\r\n\t\t\t&lt;paper size=&quot;a3&quot; val=&quot;12&quot; /&gt;\r\n\t\t&lt;/height&gt;\r\n\t&lt;/filter&gt;\r\n&lt;/someparent&gt;\r\n```\r\n\r\nI should apply some rules:\r\n - like if filters has a value starting with + (+F1) then if parameters match sizes and values, like: a4/10 or a3/12 should not remove the someparent node - any other size should causing the node removal\r\n - if filters has a value starting with - (-F1) then if parameters matching sizes and values, like: a4/10 or a3/12 should remove the someparent node - any other size should leave the node intact \r\n\r\nHowever, I think that may be irrelevant at this point. The most important is quickly finding the filter nodes and removing parent nodes if needed.\r\n\r\n\r\nExtra notes:\r\n - XPath is way too slow - literally unacceptable, Iterating over every single node is relatively quick - it&#39;s currently working like that - however, I&#39;d like to improve that. I&#39;m pretty sure it can be improved. \r\n - it may happen that filter node(s) does not exist in the file at all\r\n\r\n\r\nMy plan is to create some prototypes, however... I&#39;d appreciate any hints that may help me. \r\n\r\n\r\nEDIT://\r\nSorry for late reply on that. \r\nSo I&#39;ve ended with StAX - it&#39;s rapid and works perfectly for me. Thank you all involved. \r\n\r\n","link":"https://stackoverflow.com/questions/77077915/xml-filtering-quick-find-specific-nodes-by-name-remove-parent-if-value-not-m","title":"XML filtering - quick find specific nodes by name + remove parent if value not match","body":"<p>I need a hint regarding a quick finding of specific nodes within the XML and removing the entire parent node (with children) if some of the values don't match the input parameters.</p>\n<p>Example, having the XML as shown below:</p>\n<pre><code>&lt;someparent attr=&quot;123&quot; filters=&quot;+F1&quot;&gt;\n    &lt;filter id=&quot;F1&quot;&gt;\n        &lt;width&gt;\n            &lt;paper size=&quot;a4&quot; val=&quot;10&quot; /&gt;\n            &lt;paper size=&quot;a3&quot; val=&quot;12&quot; /&gt;\n        &lt;/width&gt;\n        &lt;height&gt;\n            &lt;paper size=&quot;a4&quot; val=&quot;10&quot; /&gt;\n            &lt;paper size=&quot;a3&quot; val=&quot;12&quot; /&gt;\n        &lt;/height&gt;\n    &lt;/filter&gt;\n&lt;/someparent&gt;\n</code></pre>\n<p>I should apply some rules:</p>\n<ul>\n<li>like if filters has a value starting with + (+F1) then if parameters match sizes and values, like: a4/10 or a3/12 should not remove the someparent node - any other size should causing the node removal</li>\n<li>if filters has a value starting with - (-F1) then if parameters matching sizes and values, like: a4/10 or a3/12 should remove the someparent node - any other size should leave the node intact</li>\n</ul>\n<p>However, I think that may be irrelevant at this point. The most important is quickly finding the filter nodes and removing parent nodes if needed.</p>\n<p>Extra notes:</p>\n<ul>\n<li>XPath is way too slow - literally unacceptable, Iterating over every single node is relatively quick - it's currently working like that - however, I'd like to improve that. I'm pretty sure it can be improved.</li>\n<li>it may happen that filter node(s) does not exist in the file at all</li>\n</ul>\n<p>My plan is to create some prototypes, however... I'd appreciate any hints that may help me.</p>\n<p>EDIT://\nSorry for late reply on that.\nSo I've ended with StAX - it's rapid and works perfectly for me. Thank you all involved.</p>\n"},{"tags":["java","repository","centos7","java-11","yum"],"comments":[{"score":1,"post_type":"question","creation_date":1700112554,"post_id":77492443,"comment_id":136615337,"body_markdown":"&quot;I want to have latest version.&quot; Java 13 is not the latest version 21 is.","link":"https://stackoverflow.com/questions/77492443/how-can-i-install-openjdk-13-x-on-centos-7#comment136615337_77492443","body":"&quot;I want to have latest version.&quot; Java 13 is not the latest version 21 is."},{"score":2,"post_type":"question","creation_date":1700130332,"post_id":77492443,"comment_id":136617902,"body_markdown":"Java 13 went out of support in March 2020 with the release of Java 14. At the moment the supported Java versions are Java 8 (support until 2026 ~ 2030 depending on vendor and contract), Java 11 (until 2024 ~ 2032), Java 17 (until 2027 ~ 2029) and Java 21 (until 2029 ~ 2031).","link":"https://stackoverflow.com/questions/77492443/how-can-i-install-openjdk-13-x-on-centos-7#comment136617902_77492443","body":"Java 13 went out of support in March 2020 with the release of Java 14. At the moment the supported Java versions are Java 8 (support until 2026 ~ 2030 depending on vendor and contract), Java 11 (until 2024 ~ 2032), Java 17 (until 2027 ~ 2029) and Java 21 (until 2029 ~ 2031)."},{"score":0,"post_type":"question","creation_date":1700145787,"post_id":77492443,"comment_id":136620710,"body_markdown":"As already said, JDK 13 is obsolete, however you can download it from https://jdk.java.net/archive/","link":"https://stackoverflow.com/questions/77492443/how-can-i-install-openjdk-13-x-on-centos-7#comment136620710_77492443","body":"As already said, JDK 13 is obsolete, however you can download it from <a href=\"https://jdk.java.net/archive/\" rel=\"nofollow noreferrer\">jdk.java.net/archive</a>"},{"score":0,"post_type":"question","creation_date":1700188082,"post_id":77492443,"comment_id":136626796,"body_markdown":"Thanks the the tips, the java.net url mentions `Mercurial repo`, does anyone know if this would be it ? `mercurial.x86_64 : Mercurial -- a distributed SCM` I found it with Yum, I don&#39;t want to break a new server setup","link":"https://stackoverflow.com/questions/77492443/how-can-i-install-openjdk-13-x-on-centos-7#comment136626796_77492443","body":"Thanks the the tips, the java.net url mentions <code>Mercurial repo</code>, does anyone know if this would be it ? <code>mercurial.x86_64 : Mercurial -- a distributed SCM</code> I found it with Yum, I don&#39;t want to break a new server setup"},{"score":0,"post_type":"question","creation_date":1700307687,"post_id":77492443,"comment_id":136640068,"body_markdown":"@adrianTNT You only need Mercurial if you want to checkout the sources, which you shouldn&#39;t need to.","link":"https://stackoverflow.com/questions/77492443/how-can-i-install-openjdk-13-x-on-centos-7#comment136640068_77492443","body":"@adrianTNT You only need Mercurial if you want to checkout the sources, which you shouldn&#39;t need to."}],"answers":[{"comment_count":0,"score":0,"last_activity_date":1702322376,"creation_date":1702322376,"answer_id":77641906,"question_id":77492443,"body_markdown":"`java-latest-openjdk-18.0.2.0.9-1.rolling.el7.x86_64` is provided via the [epel-testing][1] repo.\r\n\r\n\r\n\r\n    Name        : java-latest-openjdk\r\n    Arch        : x86_64\r\n    Epoch       : 1\r\n    Version     : 18.0.2.0.9\r\n    Release     : 1.rolling.el7\r\n    Size        : 539 k\r\n    Repo        : installed\r\n    From repo   : epel-testing\r\n    Summary     : OpenJDK 18 Runtime Environment\r\n    URL         : http://openjdk.java.net/\r\n    Licence     : ASL 1.1 and ASL 2.0 and BSD and BSD with advertising and GPL+ and GPLv2 and GPLv2 with exceptions and IJG and LGPLv2+ and MIT and MPLv2.0 and Public Domain and W3C\r\n                : and zlib and ISC and FTL and RSA\r\n    Description : The OpenJDK 18 runtime environment.\r\n\r\n\r\n  [1]: http://elrepo.org/tiki/HomePage","link":"https://stackoverflow.com/questions/77492443/how-can-i-install-openjdk-13-x-on-centos-7/77641906#77641906","title":"How can I install openjdk 13.x on Centos 7?","body":"<p><code>java-latest-openjdk-18.0.2.0.9-1.rolling.el7.x86_64</code> is provided via the <a href=\"http://elrepo.org/tiki/HomePage\" rel=\"nofollow noreferrer\">epel-testing</a> repo.</p>\n<pre><code>Name        : java-latest-openjdk\nArch        : x86_64\nEpoch       : 1\nVersion     : 18.0.2.0.9\nRelease     : 1.rolling.el7\nSize        : 539 k\nRepo        : installed\nFrom repo   : epel-testing\nSummary     : OpenJDK 18 Runtime Environment\nURL         : http://openjdk.java.net/\nLicence     : ASL 1.1 and ASL 2.0 and BSD and BSD with advertising and GPL+ and GPLv2 and GPLv2 with exceptions and IJG and LGPLv2+ and MIT and MPLv2.0 and Public Domain and W3C\n            : and zlib and ISC and FTL and RSA\nDescription : The OpenJDK 18 runtime environment.\n</code></pre>\n"}],"comment_count":5,"is_answered":false,"view_count":41,"answer_count":1,"score":0,"last_activity_date":1702322376,"creation_date":1700111636,"last_edit_date":1700130476,"question_id":77492443,"body_markdown":"I have two machines with CentOS 7.x on them, on one I have this (13.x since 2020?):\r\n\r\n```none\r\njava --version\r\nopenjdk 13.0.2 2020-01-14\r\nOpenJDK Runtime Environment 19.9 (build 13.0.2+8)\r\nOpenJDK 64-Bit Server VM 19.9 (build 13.0.2+8, mixed mode, sharing)\r\n```\r\n\r\nAnd on another one I have this (11.x since 2023?):\r\n\r\n```none\r\njava --version\r\nopenjdk 11.0.20 2023-07-18 LTS\r\nOpenJDK Runtime Environment (Red_Hat-11.0.20.0.8-1.el7_9) (build 11.0.20+8-LTS)\r\nOpenJDK 64-Bit Server VM (Red_Hat-11.0.20.0.8-1.el7_9) (build 11.0.20+8-LTS, mixed mode, sharing)\r\n```\r\n\r\nHow can I install version 13 on the other machine too? I cannot see newer version with `yum search`.\r\n\r\nOn the server with version 13 it says it openjdk is from Epel repo:\r\n\r\n```none\r\nyum info java-latest-openjdk.x86_64\r\nLoaded plugins: fastestmirror\r\nLoading mirror speeds from cached hostfile\r\n[...]\r\nhttps://ookla.bintray.com/rhel/repodata/repomd.xml: [Errno 14] curl#51 - &quot;Unable to communicate securely with peer: requested domain name does not match the server&#39;s certificate                                                            .&quot;\r\nTrying other mirror.\r\nInstalled Packages\r\nName        : java-latest-openjdk\r\nArch        : x86_64\r\nEpoch       : 1\r\nVersion     : 13.0.2.8\r\nRelease     : 1.rolling.el7\r\nSize        : 573 k\r\nRepo        : installed\r\nFrom repo   : epel\r\nSummary     : OpenJDK Runtime Environment 13\r\nURL         : http://openjdk.java.net/\r\nLicense     : ASL 1.1 and ASL 2.0 and BSD and BSD with advertising and GPL+ and GPLv2 and GPLv2 with exceptions and IJG and LGPLv2+ and MIT and MPLv2.0 and Public Domain and W3C\r\n            : and zlib and ISC and FTL and RSA\r\nDescription : The OpenJDK runtime environment.\r\n```\r\n\r\nHow can I update the other server with this 13.x version?\r\n\r\nI want to have latest version because I use some tools that return errors with the 11.x version.","link":"https://stackoverflow.com/questions/77492443/how-can-i-install-openjdk-13-x-on-centos-7","title":"How can I install openjdk 13.x on Centos 7?","body":"<p>I have two machines with CentOS 7.x on them, on one I have this (13.x since 2020?):</p>\n<pre class=\"lang-none prettyprint-override\"><code>java --version\nopenjdk 13.0.2 2020-01-14\nOpenJDK Runtime Environment 19.9 (build 13.0.2+8)\nOpenJDK 64-Bit Server VM 19.9 (build 13.0.2+8, mixed mode, sharing)\n</code></pre>\n<p>And on another one I have this (11.x since 2023?):</p>\n<pre class=\"lang-none prettyprint-override\"><code>java --version\nopenjdk 11.0.20 2023-07-18 LTS\nOpenJDK Runtime Environment (Red_Hat-11.0.20.0.8-1.el7_9) (build 11.0.20+8-LTS)\nOpenJDK 64-Bit Server VM (Red_Hat-11.0.20.0.8-1.el7_9) (build 11.0.20+8-LTS, mixed mode, sharing)\n</code></pre>\n<p>How can I install version 13 on the other machine too? I cannot see newer version with <code>yum search</code>.</p>\n<p>On the server with version 13 it says it openjdk is from Epel repo:</p>\n<pre class=\"lang-none prettyprint-override\"><code>yum info java-latest-openjdk.x86_64\nLoaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\n[...]\nhttps://ookla.bintray.com/rhel/repodata/repomd.xml: [Errno 14] curl#51 - &quot;Unable to communicate securely with peer: requested domain name does not match the server's certificate                                                            .&quot;\nTrying other mirror.\nInstalled Packages\nName        : java-latest-openjdk\nArch        : x86_64\nEpoch       : 1\nVersion     : 13.0.2.8\nRelease     : 1.rolling.el7\nSize        : 573 k\nRepo        : installed\nFrom repo   : epel\nSummary     : OpenJDK Runtime Environment 13\nURL         : http://openjdk.java.net/\nLicense     : ASL 1.1 and ASL 2.0 and BSD and BSD with advertising and GPL+ and GPLv2 and GPLv2 with exceptions and IJG and LGPLv2+ and MIT and MPLv2.0 and Public Domain and W3C\n            : and zlib and ISC and FTL and RSA\nDescription : The OpenJDK runtime environment.\n</code></pre>\n<p>How can I update the other server with this 13.x version?</p>\n<p>I want to have latest version because I use some tools that return errors with the 11.x version.</p>\n"}],"has_more":true,"quota_max":300,"quota_remaining":295}